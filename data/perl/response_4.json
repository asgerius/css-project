[{"tags": ["arrays", "perl", "string-matching"], "comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1423095796, "post_id": 28333783, "comment_id": 45014919, "body": "Does your <code>$info</code> fit into memory? What is the size of the array? The fastest method would probably be to construct regexen and match against them. (And your array declaration is probably wrong, what you&#39;ve stated there is an array with only one element)."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1423097475, "creation_date": 1423097475, "answer_id": 28334379, "question_id": 28333783, "link": "https://stackoverflow.com/questions/28333783/what-is-the-fastest-way-to-count-the-number-times-all-of-the-elements-in-an-arra/28334379#28334379", "title": "What is the fastest way to count the number times all of the elements in an array occur in a string?", "body": "<p>Performance might not be stellar, depending on the size of your source string, but you can optimize later if you need to.</p>\n\n<pre><code>my %results;\n\nfor my $code (@codes) {\n    my $count = () = $info =~ /$code/g;\n    $results{$code} = $count;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1423100398, "creation_date": 1423100398, "answer_id": 28334802, "question_id": 28333783, "link": "https://stackoverflow.com/questions/28333783/what-is-the-fastest-way-to-count-the-number-times-all-of-the-elements-in-an-arra/28334802#28334802", "title": "What is the fastest way to count the number times all of the elements in an array occur in a string?", "body": "<p>Two approaches come to mind for doing this:</p>\n\n<pre><code>my $pat = join '|', map quotemeta, @codes;\nmy $re = qr/,(?:$pat),/;\n\nfor my $info (...) {\n   my $padded_info = \",$info,\";\n   my $count; ++$count while $padded_info =~ /$re/g;\n   ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %codes = map { $_ =&gt; 1 } @codes;\n\nfor my $info (...) {\n   my $count = grep $codes{$_}, split /,/, $info;\n   ...\n}\n</code></pre>\n\n<p>I layed out the code as if multiple strings are checked for the code in <code>@codes</code>. Reusing calculated values is from where the real savings will come.</p>\n\n<p>I'll leave the benchmarking and micro-optimization to you, since that will depend on your data and usage pattern.</p>\n"}], "owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423100398, "creation_date": 1423093795, "last_edit_date": 1423099824, "question_id": 28333783, "link": "https://stackoverflow.com/questions/28333783/what-is-the-fastest-way-to-count-the-number-times-all-of-the-elements-in-an-arra", "title": "What is the fastest way to count the number times all of the elements in an array occur in a string?", "body": "<p>I have a string (<code>$info</code>) that looks something like this:</p>\n\n<pre><code>$info = \"Complete1:1,ATTCGGCTAGGGCTAGCTAGCTAG,Complete1:2,ATTTGAGAGGGATCGCGCCAT,...\"\n</code></pre>\n\n<p>And an array (<code>@codes</code>) that looks something like this:</p>\n\n<pre><code>@codes = (\"ACTTTCGGGGCATCGGATCG\", \"ATTGCATGGGCATGGCATGGCATG\", \"ACGGGATGGGCATGCTAG\",...);\n</code></pre>\n\n<p>The array <code>@codes</code> contains some elements that match (1 or more) parts of <code>$info</code> and some elements that do not match <code>$info</code> at all.</p>\n\n<p>What would be the fastest way to count the number times all of the elements in <code>@codes</code> matches the string <code>$info</code>?  Thanks!</p>\n"}, {"tags": ["perl", "string-matching"], "answers": [{"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1423090008, "creation_date": 1423090008, "answer_id": 28333043, "question_id": 28332733, "link": "https://stackoverflow.com/questions/28332733/perl-script-to-find-matching-lines-in-two-files/28333043#28333043", "title": "perl script to find matching lines in two files", "body": "<p>In first <code>while</code> you are assigning to wrong array, you meant <code>@L</code> here.</p>\n\n<p>Then you have pretty different strings in your first array (from first file) and in  other. Try to print them both out in your for-iteration. You'll see they can't match.</p>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "edited": false, "score": 0, "creation_date": 1423176529, "post_id": 28333315, "comment_id": 45054584, "body": "The thing is I&#39;m sure all the names from file1 exist in file2. I just need to pull out the lines in file2 that have those rsIDs and numbers. File2 is much larger than file1 and has additional rsIDs that I don&#39;t want."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "edited": false, "score": 0, "creation_date": 1423196309, "post_id": 28333315, "comment_id": 45060116, "body": "That&#39;s exactly what my script does... It prints lines from file2 that exist in file1. It will not print lines from file2 that are not in file1."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1423108927, "last_edit_date": 1423108927, "creation_date": 1423091238, "answer_id": 28333315, "question_id": 28332733, "link": "https://stackoverflow.com/questions/28332733/perl-script-to-find-matching-lines-in-two-files/28333315#28333315", "title": "perl script to find matching lines in two files", "body": "<p>Create a hash table of the items from the first file, then iterate over the second file and check if that rs-name exists... I'm also confirming that the number matches the name.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hash;\nmy $regex = qr/#.* *(rs\\d+) (\\d+) *.*/;\n\nopen my $file1, '&lt;', shift @ARGV;\nwhile (&lt;$file1&gt;) {\n    my ($name, $num) = $_ =~ $regex;\n    $hash{$name} = $num;\n}\nclose $file1;\n\nopen my $file2, '&lt;', shift @ARGV;\nwhile (&lt;$file2&gt;) {\n    my ($name, $num) = $_ =~ $regex;\n    print if (exists $hash{$name} and $hash{$name} = $num)\n}\nclose $file2;\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 955, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1423108927, "creation_date": 1423088774, "last_edit_date": 1423091672, "question_id": 28332733, "link": "https://stackoverflow.com/questions/28332733/perl-script-to-find-matching-lines-in-two-files", "title": "perl script to find matching lines in two files", "body": "<p>I have two files that look like (below) and want to find the fields from the first in the second file, but print every field of the second. </p>\n\n<pre><code>#rs116801199 720381\n#rs138295790 16057310\n#rs131531 16870251\n#rs131546 16872281\n#rs140375 16873251\n#rs131552 16873461\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#--- rs116801199 720381 0.026 0.939 0.996 0 -1 -1 -1\n#1 rs12565286 721290 0.028 1.000 1.000 2 0.370 0.934 0.000\n#1 rs3094315 752566 0.432 1.000 1.000 2 0.678 0.671 0.435\n#--- rs3131972 752721 0.353 0.906 0.938 0 -1 -1 -1\n#--- rs61770173 753405 0.481 0.921 0.950 0 -1 -1 -1\n</code></pre>\n\n<p>My script looks like:</p>\n\n<pre><code>#! perl -w\n\nmy $file1 = shift@ARGV;\n\nmy @filtered_snps;\nopen (IN, $file1) or die \"couldn't read file one\";\nwhile(&lt;IN&gt;){\n    my@L=split;\n    #next if ($L[0] =~ m/peak/);\n    push @filtered_snps,[$L[0],$L[1]];\n\n}\nclose IN;\n\nmy $file2 = shift@ARGV;\n\nmy @snps;\nopen (IN, $file2);\nwhile (&lt;IN&gt;){\n    my@L=split;\n    foreach (@filtered_snps){\n\n        if (($L[1] eq ${$_}[0]) &amp;&amp; ($L[2] == ${$_}[1])) {\n\n            print \"@L\\n\";\n\n            next;\n        }\n    }\n}\n</code></pre>\n\n<p>I am getting no output, when I should be finding every line from file 1. I've also tried grep with no success.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 2, "creation_date": 1423087576, "post_id": 28332189, "comment_id": 45011844, "body": "This may be of interest: <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.404/lib/List/MoreUtils.pm#part_BLOCK_LIST\" rel=\"nofollow noreferrer\">search.cpan.org/~rehsack/List-MoreUtils-0.404/lib/List/&hellip;</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423088505, "post_id": 28332189, "comment_id": 45012276, "body": "Yep. I&#39;d also suggest for anything complex data-structure-ish then the way to go is make an object."}], "answers": [{"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088972, "creation_date": 1423088972, "answer_id": 28332775, "question_id": 28332189, "link": "https://stackoverflow.com/questions/28332189/perl-using-variable-as-an-array-element-to-divide-major-array-into-smaller-arra/28332775#28332775", "title": "Perl: using variable as an array element to divide major array into smaller arrays", "body": "<p>I am not pretty sure you meant like this, but here it is how I understood your point:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings; use 5.010; \n\nmy @array = ( 'A' .. 'Z' );\nmy $length_of_slice = $ARGV[0] || 5 ;\n\nwhile ( @array ) {\n  local $\" = ', ';\n  my @minor = splice @array, 0, $length_of_slice;\n  say \"@minor\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 3014371, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/675f66ec033d7a56a7ddc5d7e6f9bc12?s=128&d=identicon&r=PG", "display_name": "GWP", "link": "https://stackoverflow.com/users/3014371/gwp"}, "edited": false, "score": 0, "creation_date": 1423109228, "post_id": 28332867, "comment_id": 45018141, "body": "Why are you going on about object oriented when all you&#39;re producing in the end is a simple array of arrays?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1423089328, "creation_date": 1423089328, "answer_id": 28332867, "question_id": 28332189, "link": "https://stackoverflow.com/questions/28332189/perl-using-variable-as-an-array-element-to-divide-major-array-into-smaller-arra/28332867#28332867", "title": "Perl: using variable as an array element to divide major array into smaller arrays", "body": "<p>When you have a complex data structure requirement, my first thought is - use an object. Perl supports object oriented programming, which allows you to do all manner of insanely complicated things like what you're trying to do. </p>\n\n<p>It'd go something like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\npackage TestObject;\n\nmy @major = qw(A B C D E F G H I J );\n\nsub new {\n    my ( $class, $slice_count ) = @_;\n    my $self = {};\n    if ( defined $slice_count ) { $self-&gt;{slice_count} = $slice_count }\n    $self-&gt;{major} = @major;\n    bless( $self, $class );\n    return $self;\n}\n\n\nsub get_slices {\n    my ( $self, $count ) = @_;\n    my @tmp = @major;\n    my @array_of_slices;\n    for ( 1 .. $count ) {\n        my $tmp_arr_ref = ();\n        for ( 0 .. ( @major / $count ) ) {\n            if ( @tmp ) { push( @$tmp_arr_ref, shift(@tmp) ) };\n        }\n        push( @array_of_slices, $tmp_arr_ref );\n    }\n    return (@array_of_slices);\n}\n</code></pre>\n\n<p>Called by:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse TestObject;\nuse Data::Dumper;\n\nmy $first = TestObject-&gt;new();\n\nmy @array_of_refs = $first-&gt;get_slices(4);\nprint Dumper \\@array_of_refs;\n</code></pre>\n\n<p>And giving result of:</p>\n\n<pre><code>$VAR1 = [\n          [\n            'A',\n            'B',\n            'C'\n          ],\n          [\n            'D',\n            'E',\n            'F'\n          ],\n          [\n            'G',\n            'H',\n            'I'\n          ],\n          [\n            'J'\n          ]\n        ];\n</code></pre>\n\n<p>Something like that (you'll have to adjust it a bit to get precisely what you have in mind depending on how you want to handle edge cases/rounding). </p>\n"}], "owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423089328, "creation_date": 1423086745, "question_id": 28332189, "link": "https://stackoverflow.com/questions/28332189/perl-using-variable-as-an-array-element-to-divide-major-array-into-smaller-arra", "title": "Perl: using variable as an array element to divide major array into smaller arrays", "body": "<p>I have a major array <code>@major</code> that I want to divide in a given number of minors arrays <code>@minor</code> , by setting the number of slices I want (let's say 4 here, but I wish to be able to chose whatever number I want), like this pseudo-code: \n(I know it's not correct, but it sort of gives you the idea)</p>\n\n<pre><code>@major = A,B,C,D,E,F,G,H,I,J\n\n$slice = 4;\n$arraySize = $#array + 1;\n$slicesize = $arraySize / $slice;\n\n@minor1 = @major[0..$slicesize]\n@minor2 = @major[($slicesize+1)..(2*$slicesize)]\n@minor3 = @major[((2*$slicesize)+1)..(3*$slicesize)]\n@minor4 = @major[((3*$slicesize)+1)..(4*$slicesize)]\n</code></pre>\n\n<p>The goal here is that I want to be able to change this size of the initial array <code>@major</code> and/or the number of slices <code>$slice</code> and that all values which set the size of the differents minor arrays (<code>($slicesize+1)</code>, <code>(2*$slicesize)</code>, and so on).</p>\n\n<p>I know this looks a bit complex but I don't know to expose it in another way.\nDo you have any idea about how to achieve this ? </p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1423085995, "post_id": 28331945, "comment_id": 45011011, "body": "There is no way to do this without a loop. You can hide the loop in a grep or map if you wish though."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423086039, "post_id": 28331945, "comment_id": 45011037, "body": "I&#39;m not too familiar with grep, what would this look like?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423086137, "post_id": 28331945, "comment_id": 45011096, "body": "<a href=\"http://stackoverflow.com/questions/10364821/finding-common-elements-in-arrays#\" title=\"finding common elements in arrays%23\">stackoverflow.com/questions/10364821/&hellip;</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1423086580, "post_id": 28331945, "comment_id": 45011333, "body": "How would you count something without a loop? Even in the real world, you count things with a loop. You don&#39;t count &quot;1, 2, 397, done!&quot; do you?"}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423086639, "post_id": 28331945, "comment_id": 45011360, "body": "For example, if I wanted to count the number of times a sting occurred in another string I would use:  $count=()=$string1=~/$string2/g;  Just wanted to know if there is something similar for matching hash values from array elements"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423087025, "post_id": 28331945, "comment_id": 45011572, "body": "Perhaps what I should have said is: &quot;There are <code>for</code> and <code>while</code> loops, and then there are ways to count things that don&#39;t look like loops (e.g. <code>grep</code>, <code>map</code>, <code>tr</code>), even though they really use loops behind the scenes. Why do you want to avoid <code>for</code> or <code>while</code> loops?&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423087174, "post_id": 28331945, "comment_id": 45011637, "body": "That example is still looping, it&#39;s just hiding that it&#39;s doing so, by doing it implicitly."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423087557, "post_id": 28331945, "comment_id": 45011832, "body": "Right, but it seems to iterate through it faster than with for or while loops.  I&#39;m sure there is a reason for this but I&#39;m not aware of it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1423087836, "post_id": 28331945, "comment_id": 45011959, "body": "@Spartacus That&#39;s called &quot;premature optimization.&quot; If you have a genuine performance problem in your code, by all means, try to find a faster method; but until you have a performance problem, and can prove that a particular section of code is your bottleneck and therefore worth tuning, you should probably focus on writing readable, maintainable code, even if that means using standard, boring <code>for</code> and <code>while</code> loops."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423088069, "post_id": 28331945, "comment_id": 45012071, "body": "Originally, all the relevant info in %records was in the form of a string and I was trying to count the number of times each element in @codes occurred in the string.  This process was taking much longer than I would have liked it to, so I started playing around with finding ways to speed it up, that brought me here."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1423088316, "post_id": 28331945, "comment_id": 45012185, "body": "One way of making faster is implementing parallelism. That&#39;s a genuine speedup with the right class of problem."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423088497, "post_id": 28331945, "comment_id": 45012272, "body": "You&#39;re right Sobrique, I have not explored that avenue yet"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1423088659, "post_id": 28331945, "comment_id": 45012357, "body": "@Spartacus That&#39;s called an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> (don&#39;t worry, they&#39;re quite common). If you had told us the actual problem you&#39;re trying to solve instead of how you&#39;re trying to solve it, we may have been able to suggest better approaches from the beginning. I would recommend asking a new question where you explain exactly what you&#39;re trying to accomplish and explain your speed constraints. There may be better approaches than using an array and a hash."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423088810, "post_id": 28331945, "comment_id": 45012401, "body": "Will do, thanks @ThisSuitIsBlackNot"}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423089458, "post_id": 28331945, "comment_id": 45012683, "body": "Apparently I have to wait 60 mins :/  Thank you though @ThisSuitIsBlackNot, I got a little ahead of myself trying to find a solution"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423090711, "post_id": 28331945, "comment_id": 45013272, "body": "@Spartacus It happens, even with experienced programmers. Now you can take that 60 minutes to draft a really great question :) Make sure to explain the actual problem you&#39;re trying to solve, e.g. &quot;I have a file that looks like &lt;sample input file&gt;. It is a CSV file where column 1 holds IDs and column 2 holds names. I need to find all the IDs where the name starts with &#39;J&#39;. I tried A, B, and C (&lt;actual code snippet&gt;), but they took more than 10 minutes to run on a 42 byte file. How can I do this more quickly?&quot; Make sure to include sample input and your expected output. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423087267, "post_id": 28332262, "comment_id": 45011685, "body": "This is exactly what I&#39;m looking for!  Thank you Sobrique!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1423087459, "post_id": 28332262, "comment_id": 45011786, "body": "Seems like the OP wants to count the elements of <code>@codes</code> that equal a value in the hash; this simply returns the number of elements in <code>@codes</code>."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423087790, "post_id": 28332262, "comment_id": 45011943, "body": "Ah yes, after checking the number of elements in @codes, ThisSuitIsBlackNot is correct."}, {"owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "edited": false, "score": 0, "creation_date": 1423087857, "post_id": 28332262, "comment_id": 45011972, "body": "And yes, I&#39;m looking to count the elements of @codes that equal a value in the hash, in the fastest way possible.  If that includes a loop, implicit or not, then so be it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423088268, "post_id": 28332262, "comment_id": 45012163, "body": "Personally - if you&#39;re after fast, then I honestly wouldn&#39;t go with map/grep - they&#39;re too clever for their own good. You could always do it two ways and compare."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1423088122, "last_edit_date": 1423088122, "creation_date": 1423087057, "answer_id": 28332262, "question_id": 28331945, "link": "https://stackoverflow.com/questions/28331945/is-there-a-way-to-count-hash-values-that-are-also-elements-of-an-array/28332262#28332262", "title": "Is there a way to count hash values that are also elements of an array?", "body": "<p>As an example of how you'd do this with map:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %records = (\n    'one'   =&gt; 1,\n    'two'   =&gt; 2,\n    'three' =&gt; 3,\n);\n\nmy @codes = ( 'one', 'three', 'fake' );\n\nmy %seen = map { $_ =&gt; 1 } @codes;\nprint scalar grep ( $seen{$_}, keys(%records) );\n</code></pre>\n\n<p>But don't be under any illusions - this is still doing a loop, it's just implicit in the <code>map</code> function. </p>\n"}], "owner": {"reputation": 25, "user_id": 1672576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f5c28dc172ae5693a5d7dd936503ba?s=128&d=identicon&r=PG", "display_name": "Spartacus", "link": "https://stackoverflow.com/users/1672576/spartacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423088122, "creation_date": 1423085869, "question_id": 28331945, "link": "https://stackoverflow.com/questions/28331945/is-there-a-way-to-count-hash-values-that-are-also-elements-of-an-array", "title": "Is there a way to count hash values that are also elements of an array?", "body": "<p>I have an array of elements (@codes) and some of these elements are values in a hash (%records), however the hash also has values that are not contained in the array (@codes).</p>\n\n<p>Is there a way to count the number of hash keys from %records where the corresponding hash value is an element of the array @codes?  I'd like to do this without iterating through a loop if possible.  Thanks!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1423083974, "post_id": 28331399, "comment_id": 45009983, "body": "Note that <code>-pi</code> is really <code>-p</code> and <code>-i</code>, two different options that are stacked together.  Why do you say that <code>$argv[1]</code> &quot;doesn&#39;t work&quot;?  What exactly doesn&#39;t work?  Can you show us actual code rather than a paraphrase?"}, {"owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "edited": false, "score": 0, "creation_date": 1423092940, "post_id": 28331399, "comment_id": 45014091, "body": "how about set bash variables and use them in your one-line perl? like this: <code>Pattern=&#39;foo&#39; &amp;&amp; (echo &#39;foo&#39; |  perl -pe &#39;s&#47;&#39;&quot;$Pattern&quot;&#39;&#47;bar&#47;&#39;)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "edited": false, "score": 1, "creation_date": 1423100913, "post_id": 28331399, "comment_id": 45016152, "body": "@qqibrow, That fails if <code>$Pattern</code> contains a <code>&#47;</code>."}, {"owner": {"reputation": 1553, "user_id": 354405, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/e45a01d692397fe1f1597c68a5d13d28?s=128&d=identicon&r=PG", "display_name": "azv", "link": "https://stackoverflow.com/users/354405/azv"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1423128693, "post_id": 28331399, "comment_id": 45025793, "body": "@AndyLester, $argv[1] is an empty string when -pi is used"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1423085812, "creation_date": 1423085812, "answer_id": 28331930, "question_id": 28331399, "link": "https://stackoverflow.com/questions/28331399/passing-a-parameter-to-perl-with-p/28331930#28331930", "title": "Passing a parameter to perl with -p", "body": "<p>I have never understood the preoccupation with one-line Perl programs, and I don't understand why you can't write a Perl script file to do this.</p>\n\n<p>However, you can remove an item from <code>@ARGV</code> and save it in a variable before the <code>-p</code> loop starts. Like this</p>\n\n<pre><code>perl -p -i -e 'BEGIN{ $r = pop } s/x/$r/' &lt;file&gt; &lt;replacement&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423089248, "post_id": 28331964, "comment_id": 45012592, "body": "&quot;If you really need to pass in a replacement, why don&#39;t you list it directly in the substitution.&quot; I&#39;m guessing the OP is invoking this one-liner in a shell script and wants to pass a shell variable. I can&#39;t imagine why else they would avoid using the replacement string directly. Of course, that&#39;s just a guess."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423092961, "post_id": 28331964, "comment_id": 45014098, "body": "Couldn&#39;t you just interpolate the shell variable directly into the command? e.g. <code>perl -pi -e &quot;s&#47;x&#47;$var&#47;&quot; &lt;file&gt;</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423094759, "post_id": 28331964, "comment_id": 45014628, "body": "You could that too. Anyway, this seems like an XY problem."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 0, "last_activity_date": 1423085919, "creation_date": 1423085919, "answer_id": 28331964, "question_id": 28331399, "link": "https://stackoverflow.com/questions/28331399/passing-a-parameter-to-perl-with-p/28331964#28331964", "title": "Passing a parameter to perl with -p", "body": "<p><code>perl -pi -e 's/x/y/' &lt;file&gt;</code> is equivalent to this: </p>\n\n<pre><code>while (&lt;&gt;) {\n   s/x/y/;\n} \ncontinue {\n   print or die \"-p failed: $!\\n\";\n}\n</code></pre>\n\n<p>This will pass every line of <code>&lt;file&gt;</code> through the expression <code>s/x/y/;</code> and print the result. (Note the -i flag will modify <code>&lt;file&gt;</code> inplace). If you really need to pass in a replacement, why don't you list it directly in the substitution. Either way it is still listed only once.</p>\n\n<pre><code>perl -pi -e 's/x/&lt;replacement&gt;/;' &lt;file&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1423101325, "creation_date": 1423101325, "answer_id": 28334913, "question_id": 28331399, "link": "https://stackoverflow.com/questions/28331399/passing-a-parameter-to-perl-with-p/28334913#28334913", "title": "Passing a parameter to perl with -p", "body": "<p>Solution 1: Roll out your own loop.</p>\n\n<pre><code>perl -i -e'$r = shift; while (&lt;&gt;) { s/x/$r/; print }' \"$replacement\" \"$file\"\n</code></pre>\n\n<p>Solution 2: Grab the var at compile time.</p>\n\n<pre><code>perl -i -pe'BEGIN { $r = shift; } s/x/$r/' \"$replacement\" \"$file\"\n</code></pre>\n\n<p>Solution 3: Use an env var instead of an argument</p>\n\n<pre><code>R=\"$replacement\" perl -i -pe's/x/$ENV{R}/' \"$file\"\n</code></pre>\n"}], "owner": {"reputation": 1553, "user_id": 354405, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/e45a01d692397fe1f1597c68a5d13d28?s=128&d=identicon&r=PG", "display_name": "azv", "link": "https://stackoverflow.com/users/354405/azv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 28331930, "answer_count": 3, "score": 0, "last_activity_date": 1423101325, "creation_date": 1423083851, "question_id": 28331399, "link": "https://stackoverflow.com/questions/28331399/passing-a-parameter-to-perl-with-p", "title": "Passing a parameter to perl with -p", "body": "<p>I have a short perl script that runs regex replace over files:\n<code>perl -pi -e 's/x/y/' &lt;file&gt;</code>\nI want to pass a parameter to the script, so it'll replace y with the command line argument (eg, something like <code>perl -pi -e 's/x/$argv[1]/' &lt;file&gt;</code> but I using $argv[1] doesn't work when the -pi parameter is used.</p>\n"}, {"tags": ["windows", "string", "perl", "memory"], "comments": [{"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 1, "creation_date": 1423078406, "post_id": 28329568, "comment_id": 45006992, "body": "Not sure if you came across this but this is a great answer for heap memory profiling and using memory map the file rather than slurping the file.  <a href=\"http://stackoverflow.com/questions/9733146/tips-for-keeping-perl-memory-usage-low\" title=\"tips for keeping perl memory usage low\">stackoverflow.com/questions/9733146/&hellip;</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1423079359, "post_id": 28329568, "comment_id": 45007473, "body": "Instead of doing a multi-line search and replace, why not just: 1) read the file line-by-line until you get to your opening delimiter 2) check that subsequent lines match your desired condition; if they do, don&#39;t print anything to your output file until you reach the closing delimiter; if they don&#39;t, print them."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1423085929, "post_id": 28329568, "comment_id": 45010982, "body": "You could try using something like <a href=\"http://search.cpan.org/~sukria/File-Sip-0.003/lib/File/Sip.pm\" rel=\"nofollow noreferrer\">File::Sip</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423086167, "post_id": 28329568, "comment_id": 45011112, "body": "It looks like you are processing XML data, and you should be using <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a>"}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1423088590, "post_id": 28329568, "comment_id": 45012320, "body": "It&#39;s not a solution (which is why I&#39;m posting this as a comment), but, for what it&#39;s worth, you can read the file line-by-line in one shot as <code>my @lines = &lt;FH&gt;;</code>"}, {"owner": {"reputation": 498, "user_id": 1769925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fb6cf77bdcefd03d0e7e7228314c179e?s=128&d=identicon&r=PG&f=1", "display_name": "user1769925", "link": "https://stackoverflow.com/users/1769925/user1769925"}, "edited": false, "score": 0, "creation_date": 1423232445, "post_id": 28329568, "comment_id": 45076500, "body": "Thanks for all the comments; no, I am not reading XML."}, {"owner": {"reputation": 498, "user_id": 1769925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fb6cf77bdcefd03d0e7e7228314c179e?s=128&d=identicon&r=PG&f=1", "display_name": "user1769925", "link": "https://stackoverflow.com/users/1769925/user1769925"}, "edited": false, "score": 0, "creation_date": 1423232490, "post_id": 28329568, "comment_id": 45076530, "body": "And I am still wondering why Perl does not just free up the memory that it is not using anymore; but I am probably not willing to dig deep enough in the Perl internals to truly understand it."}], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 3, "last_activity_date": 1423080515, "last_edit_date": 1423080515, "creation_date": 1423078521, "answer_id": 28329895, "question_id": 28329568, "link": "https://stackoverflow.com/questions/28329568/perl-out-of-memory-with-large-text-file/28329895#28329895", "title": "Perl &quot;out of memory&quot; with large text file", "body": "<p>You keep two complete copies of the file in memory at the same time, <code>@lines</code> and <code>$lines</code>.  You might consider instead:</p>\n\n<pre><code>open (my $FH, \"&lt;\", $file) or die \"Can't open $file for read: $!\";\n$FH-&gt;input_record_separator(undef); # slurp entire file\nmy $lines = &lt;$FH&gt;;\nclose $FH or die \"Cannot close $file: $!\";\n</code></pre>\n\n<p>On sufficiently obsolete versions of Perl you may need to explicitly <code>use IO::Handle</code>.</p>\n\n<p>Note also: I've switched to lexical file handles from the bare word versions.  I presume you aren't striving for compatibility with Perl v4.</p>\n\n<p>Of course if cutting your memory requirements by half isn't enough, you could always iterate through the file...</p>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1423080315, "post_id": 28330245, "comment_id": 45007988, "body": "Perhaps a little <i>too</i> simplified.  The <code>.*</code> in the original code is under the influence of the <code>s</code> modifier."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1423082377, "post_id": 28330245, "comment_id": 45009115, "body": "In reality, they should be using a SAX parser."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1423082712, "post_id": 28330245, "comment_id": 45009314, "body": "Definitely, but it was a fun little exercise."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1423085165, "post_id": 28330245, "comment_id": 45010581, "body": "I&#39;ve updated the answer to accommodate @tjd&#39;s comment."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1423085143, "last_edit_date": 1423085143, "creation_date": 1423079677, "answer_id": 28330245, "question_id": 28329568, "link": "https://stackoverflow.com/questions/28329568/perl-out-of-memory-with-large-text-file/28330245#28330245", "title": "Perl &quot;out of memory&quot; with large text file", "body": "<p>Working with XML using regexes is error prone and inefficient, as code which slurps the whole file as a string shows. To deal with XML you should be using an XML parser. In particular, you want a SAX parser which will work on the XML a piece at a time as opposed to a DOM parser which much read the whole file.</p>\n\n<p>I'm going to answer your question as is because there's some value in knowing how to work line by line.</p>\n\n<p>If you can avoid it, don't read a whole file into memory.  Work line by line.  Your task seems to be to remove a handful of lines from an XML file for reasons.  Everything between <code>&lt;DOCUMENT&gt;\\n&lt;TYPE&gt;EX-</code> and <code>&lt;\\/DOCUMENT&gt;</code>.  We can do that line-by-line by keeping a bit of state.</p>\n\n<pre><code>use autodie;\n\nopen (my $infh, \"&lt;\", $file);\nopen (my $outfh, \"&gt;\", \"$file.tmp\");\n\nmy $in_document = 0;\nmy $in_type_ex  = 0;\nwhile( my $line = &lt;$infh&gt; ) {\n    if( $line =~ m{&lt;DOCUMENT&gt;\\n}i ) {\n        $in_document = 1;\n        next;\n    } \n    elsif( $line =~ m{&lt;/DOCUMENT&gt;}i ) {\n        $in_document = 0;\n        next;\n    }\n    elsif( $line =~ m{&lt;TYPE&gt;EX-}i ) {\n        $in_type_ex = 1;\n        next;\n    }\n    elsif( $in_document and $in_type_ex ) {\n        next;\n    }\n    else {\n        print $outfh $line;\n    }\n}\n\nrename \"$file.tmp\", $file;\n</code></pre>\n\n<p>Using a temp file allows you to read the file while you construct its replacement.</p>\n\n<p>Of course this will fail if the XML document isn't formatted just so (I helpfully added the <code>/i</code> flag to the regexes to allow lower case tags), you should really use a SAX XML parser.</p>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1423080731, "post_id": 28330468, "comment_id": 45008240, "body": "The solution I hinted of at the end of my answer but was too lazy to write.  +1"}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1423081785, "post_id": 28330468, "comment_id": 45008797, "body": "Indeed it is. A bit shorter now :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423086377, "post_id": 28330468, "comment_id": 45011224, "body": "Have you tested this? You have a superfluous <code>next</code>, but more importantly it is far from clear what is in <code>$_</code> after your inner <code>while</code> loop. It looks like you will be printing the closing <code>&lt;&#47;DOCUMENT&gt;</code> tag whereas the OP&#39;s code deletes it."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 1, "creation_date": 1423086498, "post_id": 28330468, "comment_id": 45011288, "body": "Yes, it&#39;s been tested. The <code>next</code> jumps back to the top of the <code>while</code>, avoiding the print after a successful TYPE match. But, if you couldn&#39;t see that then perhaps some comments are in order."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 4, "last_activity_date": 1423087678, "last_edit_date": 1423087678, "creation_date": 1423080377, "answer_id": 28330468, "question_id": 28329568, "link": "https://stackoverflow.com/questions/28329568/perl-out-of-memory-with-large-text-file/28330468#28330468", "title": "Perl &quot;out of memory&quot; with large text file", "body": "<p>Handle the file line by line: </p>\n\n<pre><code>while ( my $file = $doc_it-&gt;() ) { # go through all documents found\n    print \"Stripping $file\\n\";\n\n    open (my $infh, \"&lt;\", $file) or die \"Can't open $file for read: $!\";\n    open (my $outfh, \"&gt;\", $file . \".tmp\") or die \"Can't open $file.tmp for write: $!\";\n\n    while (&lt;$infh&gt;) {\n       if ( /&lt;DOCUMENT&gt;/ ) {\n           # append the next line to test for TYPE\n           $_ .= &lt;$infh&gt;;\n           if (/&lt;TYPE&gt;EX-/) {\n              # document type is excluded, now loop through \n              # $infh until the closing tag is found.\n              while (&lt;$infh&gt;) { last if m|&lt;/DOCUMENT&gt;|; }\n\n              # jump back to the &lt;$infh&gt; loop to resume\n              # processing on the next line after &lt;/DOCUMENT&gt;\n              next;\n           }\n           # if we've made it this far, the document was not excluded\n           # fall through to print both lines\n       }\n       print $outfh $_;\n    }\n\n    close $outfh or die \"Cannot close $file: $!\";\n    close $infh or die \"Cannot close $file: $!\";\n    unlink $file;\n    rename $file.'.tmp', $file; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477324041, "post_id": 40218633, "comment_id": 67708325, "body": "That&#39;s because &lt;LOG&gt; in the first sample is evaluated in list context, i.e. the whole file is slurped in. In your second sample &lt;LOG&gt; is evaluated in scalar context and only one line at a time is fetched."}], "tags": [], "owner": {"reputation": 173, "user_id": 4554242, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W0e3754wS3g/AAAAAAAAAAI/AAAAAAAAAD4/IQO3VEWA_Ms/photo.jpg?sz=128", "display_name": "J&#248;rgen Austvik", "link": "https://stackoverflow.com/users/4554242/j%c3%b8rgen-austvik"}, "is_accepted": false, "score": 0, "last_activity_date": 1477312624, "creation_date": 1477312624, "answer_id": 40218633, "question_id": 28329568, "link": "https://stackoverflow.com/questions/28329568/perl-out-of-memory-with-large-text-file/40218633#40218633", "title": "Perl &quot;out of memory&quot; with large text file", "body": "<p>While working on a somewhat large (1.2G) file with Perl 5.10.1 on Windows Server 2013, I have noticed that \n</p>\n\n<pre><code>foreach my $line (&lt;LOG&gt;) {}\n</code></pre>\n\n<p>fails with out of memory, while</p>\n\n<pre><code>while (my $line = &lt;LOG&gt;) {}\n</code></pre>\n\n<p>works in a simple script that just runs some regexp'es and prints lines I'm interesting in.</p>\n"}], "owner": {"reputation": 498, "user_id": 1769925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fb6cf77bdcefd03d0e7e7228314c179e?s=128&d=identicon&r=PG&f=1", "display_name": "user1769925", "link": "https://stackoverflow.com/users/1769925/user1769925"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2588, "favorite_count": 0, "accepted_answer_id": 28330468, "answer_count": 4, "score": 2, "last_activity_date": 1477312624, "creation_date": 1423077472, "question_id": 28329568, "link": "https://stackoverflow.com/questions/28329568/perl-out-of-memory-with-large-text-file", "title": "Perl &quot;out of memory&quot; with large text file", "body": "<p>I have a problem with the following code under the latest release of Strawberry Perl for Windows: I want to read in all text files in a directory and process their contents. I don't currently see a way to process them line by line, as some of the changes I want to make to the file contents go across newlines. The processing largely involves removing large chunks of the files (in my example code below, it is just one line, but I would ideally run a couple of similar regexes that each cut out stuff from the file)</p>\n\n<p>I am running this script on a large number of files (>10,000) and it always breaks down with an \"Out of memory!\" message on one particular file that is larger than 400 MB. The thing is that when I write a program that ONLY processes the ONE file, the code works fine.</p>\n\n<p>The machine has 8 GB RAM, so I would think that physical RAM is not the issue.</p>\n\n<p>I read through other posts on memory issues, but did not find anything that would help me achieve my goal.</p>\n\n<p>Can anyone suggest what I would need to change to make the program work, i.e., make it more memory efficient or somehow sidestep the issue?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Iterator::Rule;\nuse utf8;\n\nuse open ':std', ':encoding(utf-8)';\n\nmy $doc_rule = Path::Iterator::Rule-&gt;new;\n$doc_rule-&gt;name('*.txt'); # only process text files\n$doc_rule-&gt;max_depth(3); # don't recurse deeper than 3 levels\nmy $doc_it = $doc_rule-&gt;iter(\"C:\\Temp\\\");\nwhile ( my $file = $doc_it-&gt;() ) { # go through all documents found\n    print \"Stripping $file\\n\";\n\n    # read in file\n    open (FH, \"&lt;\", $file) or die \"Can't open $file for read: $!\";\n    my @lines;\n    while (&lt;FH&gt;) { push (@lines, $_) }; # slurp entire file\n    close FH or die \"Cannot close $file: $!\";\n\n    my $lines = join(\"\", @lines); # put entire file into one string\n\n    $lines =~ s/&lt;DOCUMENT&gt;\\n&lt;TYPE&gt;EX-.*?\\n&lt;\\/DOCUMENT&gt;//gs; #perform the processing\n\n    # write out file\n    open (FH, \"&gt;\", $file) or die \"Can't open $file for write: $!\";\n    print FH $lines; # dump entire file\n    close FH or die \"Cannot close $file: $!\";\n}\n</code></pre>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423074270, "post_id": 28328545, "comment_id": 45004794, "body": "The path to the Perl script file being executed is held in <code>$0</code>. Does that help?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1423074395, "post_id": 28328545, "comment_id": 45004865, "body": "I would just check if the directory exists inside your Perl script. If it does, only then invoke your template."}, {"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423076038, "post_id": 28328545, "comment_id": 45005714, "body": "@Borodin, i do not use perl direct. I only call my template.tt"}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1423162847, "post_id": 28328545, "comment_id": 45047615, "body": "Is ProcessTemplate the windows equivalent of <code>tpage</code> from the TT package? If so, you could pass the drive letter as a variable <code>ProcessTemplate --define drive=C: template.tt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423074517, "post_id": 28328667, "comment_id": 45004929, "body": "Assuming, of course, the template files are on the same drive as the directory of interest."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1423074638, "post_id": 28328667, "comment_id": 45004999, "body": "Right, many assumptions... a better question would yield a better answer."}, {"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423076130, "post_id": 28328667, "comment_id": 45005765, "body": "@Ben Grimm, it is ensured"}, {"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "edited": false, "score": 0, "creation_date": 1423095074, "post_id": 28328667, "comment_id": 45014725, "body": "In my testing, <code>[% template.name %]</code> contains only the filename without the full path."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1423074380, "creation_date": 1423074380, "answer_id": 28328667, "question_id": 28328545, "link": "https://stackoverflow.com/questions/28328545/find-if-a-directory-exists-using-template-toolkit/28328667#28328667", "title": "Find if a directory exists using Template Toolkit", "body": "<p>The path to the current template is available in <code>template.name</code>. So I would assume that the drive letter (on windows) could be found by removing from the first / onward: </p>\n\n<pre><code>[% drive = template.name.remove('/.*') %]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423114957, "post_id": 28333941, "comment_id": 45019789, "body": "What does <i>c</i> in your example means?"}, {"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "reply_to_user": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423115301, "post_id": 28333941, "comment_id": 45019895, "body": "In Catalyst and similar frameworks, $c is the Web context. You haven&#39;t articulated what else is in your stack, so it&#39;s hard to know how to advise."}, {"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "reply_to_user": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423115594, "post_id": 28333941, "comment_id": 45019988, "body": "Yes, I know that. But what is TT rendering? Web pages? What is the source of this directory parameter?"}, {"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423118846, "post_id": 28333941, "comment_id": 45021096, "body": "i simply have a file foo.tt2 with TT syntax and text... the aim is generate a xml file. In the xml are fields that dependes of given files exists or not. I do not use perl direct in my scripts, only  ProcessTemplate v5.8 with TT v2.22"}, {"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423148563, "post_id": 28333941, "comment_id": 45038608, "body": "the perl solution return the path to my ProcessTemplate.exe knstead of my tt2 file..."}, {"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "reply_to_user": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1423175077, "post_id": 28333941, "comment_id": 45053982, "body": "Well yes, that&#39;s what <code>$0</code> is. I&#39;ve updated my answer above with more detail."}], "tags": [], "owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "is_accepted": false, "score": 1, "last_activity_date": 1423175046, "last_edit_date": 1423175046, "creation_date": 1423094781, "answer_id": 28333941, "question_id": 28328545, "link": "https://stackoverflow.com/questions/28328545/find-if-a-directory-exists-using-template-toolkit/28333941#28333941", "title": "Find if a directory exists using Template Toolkit", "body": "<p>A quick scan of the <a href=\"https://metacpan.org/source/ABW/Template-Toolkit-2.26/lib/Template/Plugin/File.pm\" rel=\"nofollow\">source for Template::Plugin::File</a> suggests that if the argument passed in is not an absolute path, it assumes the path is relative to <code>$config-&gt;{root}</code>, and knowing how TT works, that seems a reasonable thing to do. NB even this is a relative path only.</p>\n\n<p>You haven't said what framework you've got underneath TT, but if it's Catalyst or similar, you might find you can get what you need from</p>\n\n<pre><code>[%- c.path_to(c.config.root) -%]\n</code></pre>\n\n<p>... or even (horrors):</p>\n\n<pre><code>[%- PERL -%]\n    $stash-&gt;set(drive =&gt; substr($0,0,3)); \n[%- END -%]\n[%- SET dirpath = drive _ dirpath -%]\n</code></pre>\n\n<p>... but seriously, don't do that. If you turn on <code>EVAL_PERL =&gt; 1</code> in your TT config (which you must do for the above <code>PERL</code> block to work), just use it to introspect your environment and config so you can find a simple and clean pre-existing variable that holds the info you need.</p>\n\n<hr>\n\n<p><strong>UPDATE</strong> <em>based on comment trail</em></p>\n\n<p>The original question didn't really get to the heart of the problem, which if I restate as I understand it is this:</p>\n\n<p><em>The file I am processing with TT contains references to other files/directories. These references do not include Windows drive letters, which need to be included in order to locate and process these files/directories.</em></p>\n\n<p>Now if we were starting with a literal file, then <code>File::Spec</code> could be used to convert an relative reference to an absolute one. But all we have is the name of a file, so the drive letter has to be implied from something else: the location of the executing script <code>$0</code> <em>(see above)</em>, the current working directory <code>$ENV{PWD}</code> <em>(see below)</em> or a parameter passed to the script, e.g. <code>--define drive=C:</code> as Ben Grimm mentioned in another reply.</p>\n\n<p>Try this, which is what I suggested earlier, now presented explicitly: <em>NB untested</em></p>\n\n<pre><code>&lt;pre&gt;\n[%- PERL -%]\nforeach my $e (keys %ENV){\n    printf \"%s: %s\\n\", $e, $ENV{$e};\n}\n[%- END -%]\n&lt;/pre&gt;\n</code></pre>\n\n<p>That should show you what you have in your environment that might be useful to infer the drive.</p>\n"}], "owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423175046, "creation_date": 1423073965, "last_edit_date": 1423119093, "question_id": 28328545, "link": "https://stackoverflow.com/questions/28328545/find-if-a-directory-exists-using-template-toolkit", "title": "Find if a directory exists using Template Toolkit", "body": "<p>I am searching for a way to find if a directory exist or not using Template Toolkit.</p>\n\n<p>For findind if the directory exists, i am using <em>Template::Plugin::Directory</em></p>\n\n<pre><code>[% USE dir = Directory(dirpath) %]\n</code></pre>\n\n<p>In case the directory does not exist and exception will be thrown, so i vatch the exception.</p>\n\n<p>I would wish something like </p>\n\n<pre><code>isexists(dirpath)\n</code></pre>\n\n<p>My problem is that <em>dirpath</em> request the drive letter, which is not fixed.</p>\n\n<p>Is there a way with Template Toolkit to find the drive letter where my script is running?</p>\n\n<p>Is it possible to find the path of the script which is running?</p>\n\n<p>I am open for other ideas that could some my main problem, finding if a directory exist or not.</p>\n\n<p><strong>remark</strong></p>\n\n<p>I am using windows 7 and ProcessTemplate v5.8.0 with Template toolkit v2.22</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423073423, "post_id": 28328001, "comment_id": 45004318, "body": "I don&#39;t see how this question can be closed on the basis of being &quot;Too broad&quot;. How many interpretations can there be?!"}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423073972, "post_id": 28328001, "comment_id": 45004623, "body": "Exactly.  It is a very specific question and I have a very specific example string !  Thanks for all the positive answers."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1423072666, "post_id": 28328049, "comment_id": 45003929, "body": "<code>&#47;@.*?@&#47;</code> or <code>&#47;@[^@\\n]*@&#47;</code> (or <code>&#47;@.*?@&#47;s</code> or <code>&#47;@[^@]*@&#47;</code> if the OP really meant test the string, not test a line)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1423073866, "post_id": 28328049, "comment_id": 45004566, "body": "@ysth: I don&#39;t see how the non-greedy modifier helps."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423075368, "post_id": 28328049, "comment_id": 45005374, "body": "@Borodin: it doesn&#39;t change whether there&#39;s a match, but it does make it more efficient, which the question specifically asked for"}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 1, "last_activity_date": 1423072316, "creation_date": 1423072316, "answer_id": 28328049, "question_id": 28328001, "link": "https://stackoverflow.com/questions/28328001/identifying-lines-with-more-than-one-symbol/28328049#28328049", "title": "Identifying lines with more than one @ symbol", "body": "<pre><code>if ( $str =~ /@.*@/ ) \n</code></pre>\n\n<p>will match any line that has an <code>@</code> followed by any number of characters (even zero) and then <code>@</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1423073265, "creation_date": 1423073265, "answer_id": 28328332, "question_id": 28328001, "link": "https://stackoverflow.com/questions/28328001/identifying-lines-with-more-than-one-symbol/28328332#28328332", "title": "Identifying lines with more than one @ symbol", "body": "<p>The canonical way of counting characters in a string is to use <code>tr///</code>.</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy $s = 'an@example.commailto:an@example.com';\n\nmy $n = $s =~ tr/@//;\n\nsay $n;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>2\n</code></pre>\n\n<p>So you can write</p>\n\n<pre><code>if ( $s =~ tr/@// &gt; 1 ) {\n  # do stuff\n}\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 28328332, "answer_count": 2, "score": 0, "last_activity_date": 1423073265, "creation_date": 1423072133, "question_id": 28328001, "link": "https://stackoverflow.com/questions/28328001/identifying-lines-with-more-than-one-symbol", "title": "Identifying lines with more than one @ symbol", "body": "<p>Given an input such as (but not always in this exact format)</p>\n\n<blockquote>\n  <p>an@example.commailto:an@example.com</p>\n</blockquote>\n\n<p>What's the most efficient way to test a line for the presence of more than one @ symbol ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1423072125, "post_id": 28327905, "comment_id": 45003582, "body": "I know you just picked <code>$a</code> as an example, but you got (un)lucky in that <code>$a</code> is a special variable...you should never use <code>my $a</code> or <code>my ($a)</code> in a script since it will screw with <code>sort</code>."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3477387, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/QK4UC.jpg?s=128&g=1", "display_name": "Jallipalli Phanindra", "link": "https://stackoverflow.com/users/3477387/jallipalli-phanindra"}, "edited": false, "score": 0, "creation_date": 1423072821, "post_id": 28328022, "comment_id": 45004011, "body": "Thanks @Andy for the stuff"}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 2, "creation_date": 1423073273, "post_id": 28328022, "comment_id": 45004245, "body": "It&#39;s list context not array context, to be as pedantic as possible."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1423073324, "post_id": 28328022, "comment_id": 45004266, "body": "Also pedantified.  Thanks @AKHolland"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1423092607, "post_id": 28328022, "comment_id": 45013991, "body": "I would also add that <code>my ()</code> allows you to declare multiple vars as <code>my ($var1, $var2, @arr, %hash)</code> which is handy."}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": true, "score": 7, "last_activity_date": 1423073311, "last_edit_date": 1423073311, "creation_date": 1423072218, "answer_id": 28328022, "question_id": 28327905, "link": "https://stackoverflow.com/questions/28327905/what-is-the-difference-between-my-foo-and-my-foo/28328022#28328022", "title": "What is the difference between `my $foo` and `my ($foo)`?", "body": "<p>There is no difference between <code>my $a</code> and <code>my ($a)</code>.</p>\n\n<p>However, there is a world of difference between</p>\n\n<pre><code>my $a = some_function();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my ($a) = some_function();\n</code></pre>\n\n<p>The first example calls <code>some_function</code> in scalar context.  The second calls it in list context.</p>\n\n<p>If your function looks like this:</p>\n\n<pre><code>sub some_function {\n    return ( 'Larry', 'Moe', 'Curly' );\n}\n</code></pre>\n\n<p>Then your results will be:</p>\n\n<pre><code>my $a = some_function();  # $a gets \"Curly\", the last element in the list.\nmy ($a) = some_function();  # $a gets \"Larry\" and the other two values are discarded.\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3477387, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/QK4UC.jpg?s=128&g=1", "display_name": "Jallipalli Phanindra", "link": "https://stackoverflow.com/users/3477387/jallipalli-phanindra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 28328022, "answer_count": 1, "score": 2, "last_activity_date": 1423073311, "creation_date": 1423071819, "last_edit_date": 1423072250, "question_id": 28327905, "link": "https://stackoverflow.com/questions/28327905/what-is-the-difference-between-my-foo-and-my-foo", "title": "What is the difference between `my $foo` and `my ($foo)`?", "body": "<p>What is the difference between</p>\n\n<pre><code>my $foo\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my ($foo)\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 3, "creation_date": 1423072796, "post_id": 28326805, "comment_id": 45003997, "body": "Please note that the idea of &quot;the first value from the hash&quot; is not valid.  Hashes are not ordered.  The keys of the hash are not ordered.  Therefore, there is no &quot;first value&quot;."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1423072958, "post_id": 28326805, "comment_id": 45004080, "body": "DBI has <a href=\"https://metacpan.org/pod/DBI#selectcol_arrayref\" rel=\"nofollow noreferrer\">selectcol_arrayref</a> and <a href=\"https://metacpan.org/pod/DBI#selectrow_arrayref\" rel=\"nofollow noreferrer\">selectrow_arrayref</a> for just this situation."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1423072496, "post_id": 28326891, "comment_id": 45003819, "body": "Sorry to insist but how can I rewrite <code>$ref-&gt;[0]{$key}</code> <code>$ref-&gt;[0][1]</code>"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1423072762, "post_id": 28326891, "comment_id": 45003974, "body": "@coin: I am guessing that you are coming to Perl from PHP, where arrays are a combination of ordered values, like a Perl array, and keyed lookup, like a Perl hash.  But in Perl, the idea of &quot;the first value from the hash&quot; is not valid.  Hashes are not ordered.  The keys of the hash are not ordered.  Therefore, there is no &quot;first value&quot;.  You cannot rewrite <code>$ref-&gt;[0]{$key}</code> as <code>$ref-&gt;[0][1]</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1423080537, "post_id": 28326891, "comment_id": 45008127, "body": "Updated to simplify solution"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1423080672, "post_id": 28326891, "comment_id": 45008209, "body": "@AndyLester, Maybe, but <code>( %{ $ref-&gt;[0] } )[1]</code> isn&#39;t too far from <code>$ref-&gt;[0][1]</code>, syntactically speaking. (It doesn&#39;t have the implied efficiency of <code>$ref-&gt;[0][1]</code>, though.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1423080506, "last_edit_date": 1423080506, "creation_date": 1423068563, "answer_id": 28326891, "question_id": 28326805, "link": "https://stackoverflow.com/questions/28326805/get-the-first-value-of-an-array-of-hash-with-perl/28326891#28326891", "title": "Get the first value of an array of hash with Perl", "body": "<p>If you knew the key, it would be</p>\n\n<pre><code>query(\"...\")-&gt;[0]{$key}\n</code></pre>\n\n<p>But you don't know the key, so we'll have to grab it. The problem is the elements of a hash aren't ordered. You can grab <em>a key</em>, but there's no such thing as <em>the first key</em>. But it looks like you only have one element in the hash, so the following will do the trick:</p>\n\n<pre><code>my ($val) = values(%{ query(\"...\")-&gt;[0] });\n  -or-\nmy $val = ( values(%{ query(\"...\")-&gt;[0] }) )[0];\n  -or-\nmy $val = ( %{ query(\"...\")-&gt;[0] } )[1];\n</code></pre>\n\n<p>This is all just addressing the symptoms. Your problem stems from the fact that you are using yet-another-stupid-DBI-wrapper<sup>[1]</sup>. Without your wrapper you could simply do</p>\n\n<pre><code>my ($val) = $dbh-&gt;selectrow_array(\"...\");\n</code></pre>\n\n<hr>\n\n<ol>\n<li>Why does everyone insist on writing wrappers that make it harder to access the database? If you want to make DB access earlier, don't create a interface that simply executes SQL statements &mdash; DBI already does that quite well &mdash; create an interface that performs specific tasks (e.g. <code>get_x_for_y($dbh, $y)</code>). </li>\n</ol>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 0, "accepted_answer_id": 28326891, "answer_count": 1, "score": 0, "last_activity_date": 1521852057, "creation_date": 1423068290, "last_edit_date": 1521852057, "question_id": 28326805, "link": "https://stackoverflow.com/questions/28326805/get-the-first-value-of-an-array-of-hash-with-perl", "title": "Get the first value of an array of hash with Perl", "body": "<p>I have a subroutine that executes an SQL query and returns the result as a reference to an array of hashes.</p>\n\n<pre><code>my $value = query(\"SELECT value from table WHERE foo=bar LIMIT 1\");\n</code></pre>\n\n<p>How can I extract the first value from the only hash, without having to know the key of the element?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4473779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2bb1311c4b4e55624776a744abf156?s=128&d=identicon&r=PG&f=1", "display_name": "darkM", "link": "https://stackoverflow.com/users/4473779/darkm"}, "edited": false, "score": 0, "creation_date": 1423067681, "post_id": 28326434, "comment_id": 45000654, "body": "A nice...This helps me a lot...Have to do more digging in regex..:-(("}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 1, "last_activity_date": 1423067333, "creation_date": 1423067333, "answer_id": 28326434, "question_id": 28326285, "link": "https://stackoverflow.com/questions/28326285/regular-expression-swatch-monitor-log-file-output/28326434#28326434", "title": "Regular expression &quot;swatch monitor log file output&quot;", "body": "<p>This will capture the interesting portions: </p>\n\n<pre><code>watchfor /(test1-1).*(TCP Portscan).*} (.*)/\n       exec command /usr/local/bin/send_msg \"user\" \"$1 $2 $3\"\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4473779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2bb1311c4b4e55624776a744abf156?s=128&d=identicon&r=PG&f=1", "display_name": "darkM", "link": "https://stackoverflow.com/users/4473779/darkm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 28326434, "answer_count": 1, "score": 1, "last_activity_date": 1423067333, "creation_date": 1423066908, "question_id": 28326285, "link": "https://stackoverflow.com/questions/28326285/regular-expression-swatch-monitor-log-file-output", "title": "Regular expression &quot;swatch monitor log file output&quot;", "body": "<p>In the /var/log/messages, I will get a output off IDS. like this:</p>\n\n<pre><code>Feb  4 13:24:17 test1-1 snort[4535]: [122:1:1] (portscan) TCP Portscan [Classification: Attempted Information Leak] [Priority: 2] {PROTO:255} 10.0.0.1 -&gt; 10.0.0.2\n</code></pre>\n\n<p>What I do is , I monitor the /var/log/messenges file with <strong>swatch</strong>, and swatch will send the the logging output to a python script, and this will inform some manager with a smartphone. </p>\n\n<p>So I want a more detail output to the manager. The setting I use:</p>\n\n<pre><code>watchfor /.*(.*test1-1.*TCP Portscan.*).*/\n       exec command /usr/local/bin/send_msg \"user\" \"$1\"\n</code></pre>\n\n<p>Output will be this:</p>\n\n<pre><code> test1-1 snort[4535]: [122:1:1] (portscan) TCP Portscan\n</code></pre>\n\n<p>But I want something like this, the ip address is always random:</p>\n\n<pre><code> test1-1 TCP Postscan 10.0.0.1 -&gt; 10.0.0.2\n</code></pre>\n\n<p>How can a do this? with regular expression?</p>\n\n<p>kind regard </p>\n\n<p>from your friendly sysadmin</p>\n"}, {"tags": ["regex", "perl", "dbi", "psql"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1423066205, "post_id": 28326004, "comment_id": 44999561, "body": "Please show the exact Perl code you&#39;re using, the output you&#39;re getting, the reason you think it&#39;s not working, and any errors you&#39;re getting."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1423067229, "post_id": 28326004, "comment_id": 45000309, "body": "Remove the extra backslashes, perhaps? And be watchful of variable interpolation in <code>$&#39;</code>. Use <code>q()</code> to quote the string, not double quote <code>&quot;</code>."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1423114184, "post_id": 28326004, "comment_id": 45019545, "body": "Any reason for using <code>E&#39;&#39;</code> string literal? Just use the normal string literal, and you won&#39;t have to worry about escaping <code>\\</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1423068131, "creation_date": 1423068131, "answer_id": 28326748, "question_id": 28326004, "link": "https://stackoverflow.com/questions/28326004/postgre-regexp-does-not-work-in-perl-code-using-dbi/28326748#28326748", "title": "Postgre regexp does not work in perl code using dbi", "body": "<p>String literal</p>\n\n<pre><code>q(SELECT * FROM table WHERE ss.sizecode ~ E'^\\\\s*[\\\\d\\\\.]+\\\\s*$')\n</code></pre>\n\n<p>produces the string</p>\n\n<pre><code>SELECT * FROM table WHERE ss.sizecode ~ E'^\\s*[\\d\\.]+\\s*$'\n</code></pre>\n\n<p>To get</p>\n\n<pre><code>SELECT * FROM table WHERE ss.sizecode ~ E'^\\\\s*[\\\\d\\\\.]+\\\\s*$'\n</code></pre>\n\n<p>you need</p>\n\n<pre><code>q(SELECT * FROM table WHERE ss.sizecode ~ E'^\\\\\\\\s*[\\\\\\\\d\\\\\\\\.]+\\\\\\\\s*$')\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 1485889, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b28775c093e89408d6ed09287b6071b5?s=128&d=identicon&r=PG", "display_name": "isevcik", "link": "https://stackoverflow.com/users/1485889/isevcik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 28326748, "answer_count": 1, "score": -2, "last_activity_date": 1423068131, "creation_date": 1423066122, "last_edit_date": 1423067367, "question_id": 28326004, "link": "https://stackoverflow.com/questions/28326004/postgre-regexp-does-not-work-in-perl-code-using-dbi", "title": "Postgre regexp does not work in perl code using dbi", "body": "<p>i have this simple data in postgres table (data type is character varying):</p>\n\n<pre><code>48\n2\nL\n4XL\n25.0\n25\n7.0\n</code></pre>\n\n<p>i have this sql query with regexp match (i want match only numeric like values like 7.0 or 48): </p>\n\n<pre><code>SELECT * FROM table WHERE ss.sizecode ~ E'^\\\\s*[\\\\d\\\\.]+\\\\s*$'\n</code></pre>\n\n<p>this works perfect in command line client psql,<br>\nbut does not work in perl code:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\n    q(SELECT * FROM table WHERE ss.sizecode ~ E'^\\\\s*[\\\\d\\\\.]+\\\\s*$')\n );\n$sth-&gt;execute\nwhile ( my @row = $sth-&gt;fetchrow_array() ) {\n    # no data i want\n}\n</code></pre>\n"}, {"tags": ["perl", "catalyst", "dbix-class", "template-toolkit"], "comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1423065439, "post_id": 28325266, "comment_id": 44999010, "body": "Looks like a scalar vs. list context issue. Try <code>team_seasons_rs</code> to force the return of a resultset in list context."}, {"owner": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1423066501, "post_id": 28325266, "comment_id": 44999767, "body": "Sorry @nwellnhof, I&#39;m not sure I follow - where should I be putting <code>team_seasons_rs</code>?  As I understand it, <code>team_seasons</code> refers to the relationship name between the two tables and <code>team_seasons_rs</code> is not a valid relationship name?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1423076551, "post_id": 28325266, "comment_id": 45006005, "body": "DBIC also creates a special version of a relationship accessor postfixed with <code>_rs</code>. See <a href=\"https://metacpan.org/pod/DBIx::Class::Relationship#has_many\" rel=\"nofollow noreferrer\">the docs</a>."}, {"owner": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1423093653, "post_id": 28325266, "comment_id": 45014285, "body": "Ahh, so I see, that&#39;s excellent thank you so much!  (If you post it as an answer I can accept it I think?  New to Stack Overflow (other than just lurking!)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "edited": false, "score": 0, "creation_date": 1423066309, "post_id": 28325770, "comment_id": 44999632, "body": "Thank you for your reply - I thought it looked like it may work, but I still get the same thing:  <code>WHILE (division = divisions.next);   CALL c.log.debug(division.team_seasons); END;</code> This still gives me: ARRAY(0x6e3a08c)."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "edited": false, "score": 0, "creation_date": 1423069170, "post_id": 28325770, "comment_id": 45001722, "body": "My guess is that it&#39;s still a context gotcha on the relationship (team_seasons).  You could try looking at <a href=\"http://www.template-toolkit.org/docs/modules/Template/Stash/Context.html\" rel=\"nofollow noreferrer\">template-toolkit.org/docs/modules/Template/Stash/Context.htm&zwnj;&#8203;l</a>  I have not personally used it, but it would allow you to force scalar context via something like <code>c.log.debug(division.team_seasons.scalar)</code>"}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "edited": false, "score": 0, "creation_date": 1423093538, "post_id": 28325770, "comment_id": 45014241, "body": "The comment by @nwellnhof above which points out that &quot;DBIC also creates a special version of a relationship accessor postfixed with _rs&quot;, is something I wasn&#39;t aware of and provides a much simpler solution than using a different template stash."}, {"owner": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "edited": false, "score": 0, "creation_date": 1423093689, "post_id": 28325770, "comment_id": 45014304, "body": "Indeed, but I&#39;m told that scalar should also work - admittedly I&#39;ve not tried it for the reason you just mentioned, but thank you very much for your help."}], "tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 2, "last_activity_date": 1423065481, "creation_date": 1423065481, "answer_id": 28325770, "question_id": 28325266, "link": "https://stackoverflow.com/questions/28325266/dbixclass-sub-resultset-in-template-toolkit-presented-as-an-array-not-a-resu/28325770#28325770", "title": "DBIx::Class: sub resultset in Template Toolkit presented as an array, not a resultset", "body": "<p>Try <code>$self-&gt;search_rs</code> rather than <code>$self-&gt;search</code>.  \"This method does the same exact thing as search() except it will always return a resultset, even in list context.\"</p>\n\n<p><a href=\"https://metacpan.org/pod/release/RIBASUSHI/DBIx-Class-0.082810/lib/DBIx/Class/ResultSet.pm#search_rs\" rel=\"nofollow\">See the docs</a> for more info.</p>\n"}, {"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 0, "last_activity_date": 1423133833, "creation_date": 1423133833, "answer_id": 28342147, "question_id": 28325266, "link": "https://stackoverflow.com/questions/28325266/dbixclass-sub-resultset-in-template-toolkit-presented-as-an-array-not-a-resu/28342147#28342147", "title": "DBIx::Class: sub resultset in Template Toolkit presented as an array, not a resultset", "body": "<p>The <code>team_seasons</code> accessor returns a resultset in scalar context, and an array of rows in list context. It seems that template toolkit code evaluates the accessor in list context.</p>\n\n<p>As a work-around, DBIC installs a special accessor, postfixed with <code>_rs</code> that always returns a resultset regardless of context. So the following should work:</p>\n\n<pre><code>CALL c.log.debug(division.team_seasons_rs.grid_positions_filled);\n</code></pre>\n\n<p>This is documented under <a href=\"https://metacpan.org/pod/DBIx::Class::Relationship#has_many\" rel=\"nofollow\"><code>DBIx::Class::Relationship</code></a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4529071, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wd-TfIu7lfM/AAAAAAAAAAI/AAAAAAAAKDc/-pNsRoj9PXw/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4529071/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 28342147, "answer_count": 2, "score": 1, "last_activity_date": 1423133833, "creation_date": 1423064130, "question_id": 28325266, "link": "https://stackoverflow.com/questions/28325266/dbixclass-sub-resultset-in-template-toolkit-presented-as-an-array-not-a-resu", "title": "DBIx::Class: sub resultset in Template Toolkit presented as an array, not a resultset", "body": "<p>I am developing a Catalyst application using DBIx::Class and Template Toolkit; in the particular part I'm having issues with, I have a resultset obtained using by calling the following function in my ResultSet schema:</p>\n\n<pre>\n\n    sub divisions_and_teams_in_season {\n      my ( $self, $season, $grid ) = @_;\n\n      return $self->search({\n          \"division_seasons.season\"         => $season->id,\n          \"division_seasons.fixtures_grid\"  => $grid->id,\n        }, {\n        prefetch  => [\n          \"division_seasons\",\n          {\n            \"team_seasons\" => {\n              \"team\" => [{\n                  \"club\" => \"venue\"\n                },\n                \"home_night\"\n              ]\n            }\n          }\n        ],\n        order_by  => {\n          -asc => [ qw( division_seasons.rank team_seasons.grid_position club.short_name team.name ) ]\n        }\n      });\n    }\n\n</pre>\n\n<p>This returns the data as I would expect and I'm able to do the following in my Controller code to get back my resultset and iterate through the team_seasons:</p>\n\n<pre>\n\n    my $divisions = [ $c->model(\"DB::Division\")->divisions_and_teams_in_season($current_season, $c->stash->{grid}) ];\n\n    foreach my $division ( @{ $divisions } ) {\n      $c->log->debug( $division->team_seasons->grid_positions_filled ); # This works because $division->team_seasons is a resultset object \n    }\n</pre>\n\n<p>However, in my template (having stashed <code>$divisions</code>), I'm unable to access the grid_positions_filled object because division.team_seaons gives me an arrayref of team resultsets in that division:</p>\n\n<pre>\n\n    [%\n    # Loop through our divisions\n    FOREACH division IN divisions;\n      CALL c.log.debug(division.team_seasons); # The output of this is something like: ARRAY(0x6f8318c)\n    END;\n    -%]\n\n</pre>\n\n<p>The output I get for the same debug log in my controller is more like a list of resultset objects:</p>\n\n<pre>\n\n    TopTable::Model::DB::TeamSeason=HASH(0x6eea94c)\n    TopTable::Model::DB::TeamSeason=HASH(0x6f01834)\n    TopTable::Model::DB::TeamSeason=HASH(0x6ef5284)\n    TopTable::Model::DB::TeamSeason=HASH(0x6efec9c)\n    TopTable::Model::DB::TeamSeason=HASH(0x6ef4dc4)\n    TopTable::Model::DB::TeamSeason=HASH(0x6faf0ac)\n    TopTable::Model::DB::TeamSeason=HASH(0x6eefa04)\n\n</pre>\n\n<p>Hope all this makes sense!  Does anyone know how I can get the behaviour from the controller into the template so that I can access methods on the team_season ResultSet?</p>\n\n<p>Thank you very much in advance.</p>\n"}, {"tags": ["perl", "remote-server"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1423062960, "post_id": 28324810, "comment_id": 44997332, "body": "psexec is a reasonable alternative to ssh (on a windows machine)"}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1497454659, "post_id": 28324810, "comment_id": 76088896, "body": "When PowerShell 6 is available, it can run on Linux/UNIX systems. <code>Invoke-Command</code> can run commands on remote machines. <a href=\"https://github.com/PowerShell/PowerShell\" rel=\"nofollow noreferrer\">github.com/PowerShell/PowerShell</a>"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1423062922, "creation_date": 1423062922, "answer_id": 28324810, "question_id": 28324746, "link": "https://stackoverflow.com/questions/28324746/run-perl-script-on-remote-server/28324810#28324810", "title": "Run perl script on remote server", "body": "<p>You have to have <em>something</em> listening for an instruction to run the script, and then you have to send the instruction.</p>\n\n<p>There are lots of approaches you could take to that, including:</p>\n\n<ul>\n<li>Running an SSH server and then connecting to it from an ssh client on the windows machine</li>\n<li>Running an HTTP server, running the script through FastCGI, and then requesting the URL for it from <code>curl</code> or a browser on the Windows machine</li>\n<li>Writing a custom protocol, listening on a socket, and then writing a custom client that you run on the Windows machine</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423063610, "post_id": 28324942, "comment_id": 44997764, "body": "Assuming said server is running sshd ."}], "tags": [], "owner": {"reputation": 5791, "user_id": 2188862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d058a6da0b6ee2f51f92e4692af93fd8?s=128&d=identicon&r=PG", "display_name": "Joseph Myers", "link": "https://stackoverflow.com/users/2188862/joseph-myers"}, "is_accepted": false, "score": 1, "last_activity_date": 1423063963, "last_edit_date": 1423063963, "creation_date": 1423063301, "answer_id": 28324942, "question_id": 28324746, "link": "https://stackoverflow.com/questions/28324746/run-perl-script-on-remote-server/28324942#28324942", "title": "Run perl script on remote server", "body": "<p>Absolutely.</p>\n\n<p>You can use <code>plink</code> to run commands on the server from Windows, assuming the server is running <code>sshd</code>.</p>\n\n<pre><code>plink user@a.domain.ext echo hi\n</code></pre>\n\n<p>This will print \"hi\\n\" to the standard output.</p>\n\n<p>Substitute <code>/path/to/perl/script</code> for <code>echo</code> above and substitute <code>hi</code> with any command line argument that the script needs.</p>\n\n<p><code>plink</code> is available here: <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html\" rel=\"nofollow\">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a></p>\n\n<p>One cautionary personal note from doing this many times is that the environment in which the perl script will be run is much less complete than what you would experience when logging in via a full SSH session and running the command interactively. Many environment variables you would normally expect are unset.</p>\n\n<p>For instance using \"set | wc -l\" in the command above produces only 39 environment variables defined, but from an interactive SSH session, there are 57 environment variables defined. You have to make sure your perl script isn't depending on an environment variable that hasn't been set. For instance, you may need to use full paths for any modules that it uses, or by using the <code>-I</code> flag in the shebang line, because <code>@INC</code> may not be what you expect it to be.</p>\n"}], "owner": {"reputation": 780, "user_id": 3117006, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/1074696394/picture?type=large", "display_name": "zlenyk", "link": "https://stackoverflow.com/users/3117006/zlenyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "accepted_answer_id": 28324810, "answer_count": 2, "score": 1, "last_activity_date": 1423063963, "creation_date": 1423062755, "question_id": 28324746, "link": "https://stackoverflow.com/questions/28324746/run-perl-script-on-remote-server", "title": "Run perl script on remote server", "body": "<p>Is it possible to run perl script, which is located on a remote server, on that server from Windows? There is a job on a remote server that I want to get done every time I make something on Windows.</p>\n"}, {"tags": ["perl", "dynamic", "path", "directory"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1423062207, "post_id": 28324421, "comment_id": 44996828, "body": "Does the script know in which environment it&#39;s running?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423063508, "post_id": 28324421, "comment_id": 44997701, "body": "It isn&#39;t at all clear what you want to do. Please can you explain better? Do your \u201cenvironments\u201d correspond to different computer systems? Will there only ever be one directory that matches <code>&#47;home&#47;ssr&#47;GC&#47;*_CR_CTM</code>?"}, {"owner": {"reputation": 1, "user_id": 4450800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea91f33ab0a840b663c31e55138e594?s=128&d=identicon&r=PG&f=1", "display_name": "ssr", "link": "https://stackoverflow.com/users/4450800/ssr"}, "edited": false, "score": 0, "creation_date": 1423065915, "post_id": 28324421, "comment_id": 44999348, "body": "yes, it knows which environment it is running"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4450800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea91f33ab0a840b663c31e55138e594?s=128&d=identicon&r=PG&f=1", "display_name": "ssr", "link": "https://stackoverflow.com/users/4450800/ssr"}, "edited": false, "score": 0, "creation_date": 1423070206, "post_id": 28324561, "comment_id": 45002411, "body": "Thanks for your reply, but when i try this and print i am getting empty string into logdir. I have included use File::Glob;  Is there something else to be done apart from the above? thank you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 4450800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea91f33ab0a840b663c31e55138e594?s=128&d=identicon&r=PG&f=1", "display_name": "ssr", "link": "https://stackoverflow.com/users/4450800/ssr"}, "edited": false, "score": 0, "creation_date": 1423071356, "post_id": 28324561, "comment_id": 45003129, "body": "You don&#39;t need File::Glob. <code>glob</code> is a perl builtin"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 4450800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea91f33ab0a840b663c31e55138e594?s=128&d=identicon&r=PG&f=1", "display_name": "ssr", "link": "https://stackoverflow.com/users/4450800/ssr"}, "edited": false, "score": 0, "creation_date": 1423072337, "post_id": 28324561, "comment_id": 45003709, "body": "And if you <code>echo &#47;home&#47;ssr&#47;GC&#47;*_CR_CTM</code> from a shell, what does it give you? Because glob should expand that path, and return the first &#39;match&#39; in a scalar context. (So you can either use a <code>while</code> or <code>for</code> loop with scalar/list context respectively)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1423062268, "creation_date": 1423062268, "answer_id": 28324561, "question_id": 28324421, "link": "https://stackoverflow.com/questions/28324421/assign-a-folder-path-part-of-which-changes-between-environments-to-a-variable/28324561#28324561", "title": "assign a folder path, part of which changes between environments, to a variable", "body": "<p>Yes. If the <code>*</code> wildcard works reliably (e.g. you don't have multiple locations that would match) then you can use <code>glob</code>. </p>\n\n<pre><code>my $logdir = glob ( \"/home/ssr/GC/*_CR_CTM\" );\n</code></pre>\n\n<p>but bear in mind if there are multiple that match, that'll only return the first in the list. </p>\n\n<p>Otherwise, you'll need to detect your environment somehow - and then use that to decide. (glob may help here too). </p>\n"}], "owner": {"reputation": 1, "user_id": 4450800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea91f33ab0a840b663c31e55138e594?s=128&d=identicon&r=PG&f=1", "display_name": "ssr", "link": "https://stackoverflow.com/users/4450800/ssr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423062268, "creation_date": 1423061877, "last_edit_date": 1423062037, "question_id": 28324421, "link": "https://stackoverflow.com/questions/28324421/assign-a-folder-path-part-of-which-changes-between-environments-to-a-variable", "title": "assign a folder path, part of which changes between environments, to a variable", "body": "<p>I need help with assigning a dynamic folder path to a variable. The last part of the path has the name of the environment (like dev, test or prod environments).</p>\n\n<pre><code>my $logdir=/home/ssr/GC/dpg_CR_CTM\n</code></pre>\n\n<p>here dpg is the environment name. If i have to run this script in a different environment, the folder starts with that environment name. </p>\n\n<p>Is there a way i can make it more generalised, like below?</p>\n\n<pre><code>my $logdir=/home/ssr/GC/*_CR_CTM\n</code></pre>\n"}, {"tags": ["perl", "pass-by-reference", "subroutine", "pass-by-value", "pass-by-pointer"], "answers": [{"comments": [{"owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "edited": false, "score": 0, "creation_date": 1423060313, "post_id": 28323875, "comment_id": 44995536, "body": "Is there a way to make the second set of code behave the way I anticipated while keeping that assignment?  Such as my @array = \\@$arrayReference;?  (Althought that won&#39;t work.)  I am new to Perl if you cannot tell :-)"}, {"owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "edited": false, "score": 0, "creation_date": 1423060740, "post_id": 28323875, "comment_id": 44995837, "body": "That is, is there a way to make @array in the subroutine point to the same array that $arrayReference points to?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423061029, "post_id": 28323875, "comment_id": 44996029, "body": "You might be able to, but it&#39;s probably a bad idea. <code>our @alias;*alias = \\@array;</code> might do something like that. That might be worth a different question if you really want to know how. <a href=\"http://www.perlmonks.org/?node_id=976523\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=976523</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "edited": false, "score": 5, "creation_date": 1423061132, "post_id": 28323875, "comment_id": 44996110, "body": "@Evorlor, Yes, there are two ways. 1) <code>our @alias; local *alias = $ref;</code> 2) <code>use Data::Alias; alias my @array = @$ref;</code>. But seriously, get used to using references."}, {"owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1423061330, "post_id": 28323875, "comment_id": 44996227, "body": "@ikegami does that use a plugin?  It tells me Data/Alias.pm cannot be located for my <code>use Data::Alias;</code> line for way #2."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1423061636, "post_id": 28323875, "comment_id": 44996445, "body": "I don&#39;t know what you mean by plugin. <code>use Data::Alias;</code> loads module <a href=\"http://search.cpan.org/perldoc?Data::Alias\" rel=\"nofollow noreferrer\">Data::Alias</a>. If sounds like you don&#39;t have the module installed."}, {"owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1423061734, "post_id": 28323875, "comment_id": 44996518, "body": "@ikegami awesome, thanks. ill look into it. and first way works great!  thanks Quentin too!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "edited": false, "score": 4, "creation_date": 1423062086, "post_id": 28323875, "comment_id": 44996758, "body": "@Evorlor: I&#39;m glad you have a solution, but please heed the warnings not to use that. It is a pointless overhead to create an alias, and many people won&#39;t understand it."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1423062251, "post_id": 28323875, "comment_id": 44996858, "body": "and the first way uses a global variable, something that you should avoid whenever possible.  here, it is easy to just use the reference directly instead of making a copy.  if you really can&#39;t do that, I&#39;d use your second code as is, but add <code>@$arrayReference = @array; return;</code> at the end.  (By the way, your subs are implicitly returning whatever print returns; you should always use an explicit return at the end of a sub, even - or especially - if it returns nothing.)"}, {"owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "edited": false, "score": 0, "creation_date": 1423062577, "post_id": 28323875, "comment_id": 44997064, "body": "@Quentin ya Quentin! dont mess with things you dont understand! :-p (joking)"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 7, "last_activity_date": 1423060206, "creation_date": 1423060206, "answer_id": 28323875, "question_id": 28323819, "link": "https://stackoverflow.com/questions/28323819/why-do-these-blocks-of-code-behave-differently/28323875#28323875", "title": "Why do these blocks of code behave differently?", "body": "<p>In the first example, you use the reference to get the array and then you modify that. There is only one array and you change it.</p>\n\n<p>In the second example, you use the reference to get the array, then you <em>copy the content of the array into a second array</em>, then you modify the second array. There are two arrays and you never alter the original one.</p>\n"}], "owner": {"reputation": 6088, "user_id": 1889720, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PYEBN.png?s=128&g=1", "display_name": "Evorlor", "link": "https://stackoverflow.com/users/1889720/evorlor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 28323875, "answer_count": 1, "score": 0, "last_activity_date": 1423060206, "creation_date": 1423060065, "question_id": 28323819, "link": "https://stackoverflow.com/questions/28323819/why-do-these-blocks-of-code-behave-differently", "title": "Why do these blocks of code behave differently?", "body": "<p>I am new to Perl, and I cannot figure this out.  I have two seemingly identical sets of code, but one subroutine updates the value while another does not.  In the first set of code, my understanding is that the reference to an array is passed, then the value at which that reference is pointing is updated.  Then when leaving the subroutine, the value has been changed.  However, in the second one, I would expect the same thing to occur.  It does update the array, but then it forgets about it after leaving the subroutine.  Can someone please explain to me what is going on behind the scenes with the second set of code?</p>\n\n<p>First Code Set:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\n{\n    my @array = (1, 2, 3);\n    removeSecondElement(\\@array);\n    print @array;  #output: 13\n    print(\"\\n\");\n}\n\nsub removeSecondElement{\n    my ($arrayReference) = @_;\n    splice(@$arrayReference, 1, 1);\n    print @$arrayReference;  #output: 13\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Second Code Set:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\n{\n    my @array = (1, 2, 3);\n    removeSecondElement(\\@array);\n    print @array;  #output: 123\n    print(\"\\n\");\n}\n\nsub removeSecondElement{\n    my ($arrayReference) = @_;\n    my @array = @$arrayReference;\n    splice(@array, 1, 1);\n    print @array;  #output: 13\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "shell", "command-line", "awk", "sed"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1423056663, "post_id": 28322163, "comment_id": 44993138, "body": "Are you sure the input file isn&#39;t JSON? If it is, <code>name</code> and <code>filename</code> should be double quoted."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1423056787, "post_id": 28322163, "comment_id": 44993231, "body": "If it&#39;s JSON, then it&#39;s definitely something to run through a JSON parser. If it&#39;s not, someone needs a poke for making something that looks like JSON that isn&#39;t. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1423111111, "post_id": 28323140, "comment_id": 45018676, "body": "Would be useful to suggest ways for populating @list."}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": false, "score": -1, "last_activity_date": 1423110245, "last_edit_date": 1423110245, "creation_date": 1423058019, "answer_id": 28323140, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28323140#28323140", "title": "List strings which are not found in a text file", "body": "<p>Here is a solution in perl:</p>\n\n<p><code>@list</code> is the array with the filenames.</p>\n\n<pre><code>open(my $fh, \"&lt;\", \"input.txt\");\nmy $contents = do { local $/ = &lt;$fh&gt; };\nmy $string = &lt;$fh&gt;;\nclose($fh);\n\nforeach my $entry (@list) {\n    print \"$entry is not in file\\n\" if index($contents, $entry) == -1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "edited": false, "score": 0, "creation_date": 1423119102, "post_id": 28323221, "comment_id": 45021197, "body": "the image files are in some other directory. <code>ls &#47;var&#47;www&#47;html&#47;img&#47;*</code> and when i do this it list all the files."}], "tags": [], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "is_accepted": true, "score": 2, "last_activity_date": 1423145675, "last_edit_date": 1423145675, "creation_date": 1423058252, "answer_id": 28323221, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28323221#28323221", "title": "List strings which are not found in a text file", "body": "<p>What you want can be accomplished by the following command</p>\n\n<pre><code>$ mawk '/filename:/{gsub(\"\\\"\",\"\",$2);names[$2]}\n        END{while((\"ls ?.png\"|getline fnm)&gt;0){\n               if(!(fnm in names)) print fnm\n        }}' file.dat\n</code></pre>\n\n<p>In the first line we scan the data file, looking for the string <code>\"filename\"</code>, stripping the file name from quotes and eventually saving the filename in an array.</p>\n\n<p>At the <code>END</code> we make a loop on the output of the pertinent <code>ls</code> command and if the current file name wasn't saved in the array we print it to stdout.</p>\n\n<p>The tough part was to get the correct syntax for the final for loop...</p>\n\n<hr>\n\n<p><em>Addendum</em></p>\n\n<p>Following up the comment from the original poster, here it is a\nmodified version of the script</p>\n\n<pre><code>$ mawk '/filename:/{gsub(\"\\\"\",\"\",$2);names[$2]}\n        END{while((\"ls /var/www/html/img/*.png\"|getline path)&gt;0){\n                n = split(path, parts, \"/\")\n                fnm = parts[n]\n                if(!(fnm in names)) print fnm\n        }}' file.dat\n</code></pre>\n\n<p>that works for a fixed directory name. If the directory name must be\ngiven at runtime, try the following</p>\n\n<pre><code> $ extra_png () {\n mawk '/filename:/{gsub(\"\\\"\",\"\",$2);names[$2]}\n        END{while((\"ls '\"$2\"'/*.png\"|getline path)&gt;0){\n                n = split(path, parts, \"/\")\n                fnm = parts[n]\n                if(!(fnm in names)) print fnm\n        }}' \"$1\"\n }\n $ extra_png data.txt /var/www/html/img\n c.png\n $\n</code></pre>\n\n<p>where the first command defines a shell function that accepts as\narguments a data file and a directory to scan.</p>\n\n<p>As a side note, this <code>awk</code> script find the png files not mentioned in\nthe data file (as per the OP request), it may be interesting to know\nif filenames mentioned in the file are not present in the\ndirectory. But this could be the subject of another question.</p>\n"}, {"comments": [{"owner": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "edited": false, "score": 0, "creation_date": 1423120087, "post_id": 28326473, "comment_id": 45021603, "body": "Looks like all the files are listed in the absent section. The text file contains only the filenames with path-names not included. Ex: <code>x.png and not &#47;var&#47;www&#47;img&#47;x.png</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "edited": false, "score": 0, "creation_date": 1423129305, "post_id": 28326473, "comment_id": 45026184, "body": "OK, but why are you mentioning it? The script does what you wanted, right?"}, {"owner": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "edited": false, "score": 0, "creation_date": 1423129622, "post_id": 28326473, "comment_id": 45026373, "body": "oh i meant these files are actually present in the data file. They need to be shown in the present section. The script doesnt work."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "edited": false, "score": 0, "creation_date": 1423143716, "post_id": 28326473, "comment_id": 45035080, "body": "What are you trying to tell us? The script checks whether files in an <code>image</code> directory exist in a given file exactly as you asked for. In what way does the script &quot;not work&quot;? Edit your question to clarify if there is a misunderstanding of your requirements."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1423067912, "last_edit_date": 1423067912, "creation_date": 1423067437, "answer_id": 28326473, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28326473#28326473", "title": "List strings which are not found in a text file", "body": "<pre><code>$ cat tst.awk\nBEGIN {\n    while (ARGC &gt; 2) {\n        sub(/.*\\//,\"\",ARGV[--ARGC])\n        targets[ARGV[ARGC]]\n        delete ARGV[ARGC]\n    }\n}\nsub(/.*filename:[[:space:]]*\"/,\"\") &amp;&amp; sub(/\\\"[[:space:]]*$/,\"\") {\n    present[$0]\n}\nEND {\n    print \"Present:\"\n    for (file in present) {\n        if (file in targets) {\n            print \"\\t\" file\n        }\n    }\n\n    print \"\\nAbsent:\"\n    for (file in targets) {\n        if (! (file in present) ) {\n            print \"\\t\" file\n        }\n    }\n}\n\n$ awk -f tst.awk file image/*\nPresent:\n        x.png\n        a.png\n\nAbsent:\n        c.png\n</code></pre>\n\n<p>Note that this will work no matter what characters your file names contain, including spaces and double quotes and does not attempt to parse the output of <code>ls</code> which is always a bad idea.</p>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1423189896, "last_edit_date": 1423189896, "creation_date": 1423076547, "answer_id": 28329317, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28329317#28329317", "title": "List strings which are not found in a text file", "body": "<p>A simple way to list files that are in your data file but that are missing from your directory listing using Perl is to use a file test <em>in the directory</em>  (or pass the full path) that prints the file's name \"if file does not exist\" or \"unless file does exist\":</p>\n\n<pre><code>perl -nE 'map { say if !-e $_ } m/\\\"(.*)\\\"/ if /filename/' data.js\n</code></pre>\n\n<p><strong>or</strong> to do the opposite (your example) - <em>i.e.</em> to print a file name (<code>$fname</code>) from a directory listing if it can't be found in an array of names (<code>@m</code>) created from  your file list data (<code>data.js</code>):</p>\n\n<pre><code>perl -nE 'push @m, m/\\\"(.*)\\\"/ if /filename/ }{ \n         for $fname (glob \"*\"){ say $fname if !grep { $_ eq $fname } @m}' data.js\n</code></pre>\n\n<hr>\n\n<p>Here is a full script variation on what @neuhaus posted. The difference is the following approach uses <a href=\"https://metacpan.org/release/IO-All\" rel=\"nofollow\"><code>IO::All</code></a> to create an IO \"object\" from the directory <code>'./images/'</code> as a hash and then lists the names of the files with <code>keys</code>. I modified the data in your text file to illustrate the <code>grep unless</code> statement: </p>\n\n<pre><code># files.pl\nuse IO::All;\n@files =  keys %{ io('./images/') }  ;\n\nwhile(&lt;DATA&gt;) {\n  push @flist, m/\\\"(.*)\\\"/ if /filename/  ; \n}\n\nfor $fname ( @flist) {print $fname unless grep { $_ eq $name } @files}  ;\n\n__DATA__\n\n{\n   name: \"A\",\n   filename: \"a.png\"\n},\n   {\n   name: \"X\",\n   filename: \"x.png\"\n},\n  {\n   name: \"Z\",\n   filename: \"z.png\"\n}\n</code></pre>\n\n<p><strong>output</strong> (if <code>perl files.pl</code> is run in a directory containing the <code>./images/</code> directory):</p>\n\n<pre><code>  % ls ./images/ \n  a.png x.png y.png z.png\n  % perl files.pl\n  y.png\n</code></pre>\n\n<p>In the <code>__DATA__</code> section (standing in for the <code>data.js</code> file) file names are extracted into <code>@files</code>. Files that are in the directory listing are printed <code>unless</code> they are can be found with <code>grep</code> in <code>@files</code>.</p>\n\n<p>Here it is a version as a one liner with your data in <code>data.js</code>:</p>\n\n<pre><code>perl -MIO::All -lne 'push @flist, m/\\\"(.*)\\\"/ if /filename/ ; \n   }{ for $name (keys %{ io \"./images/\" }){ print $name \n   unless grep { $_ eq $name } @flist }' data.js\n</code></pre>\n\n<p>A more Unix-ish approach might use <code>glob</code> from inside the <code>/images/</code> directory (caveat: there are sometimes issues concerning file names with spaces on certain platforms):</p>\n\n<pre><code> perl -MIO::All -lne  'push @flist, m/\\\"(.*)\\\"/ if /filename/ ; \n    }{ for $name ( glob(\"*.png\") ){ print $name \n    unless grep { $_ eq $name } @flist }' data.js\n</code></pre>\n\n<p>or file and directory handles with <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>open</code></a> and <a href=\"http://perldoc.perl.org/functions/opendir.html\" rel=\"nofollow\"><code>opendir</code></a></p>\n\n<pre><code>... \nopendir(my $dir, \".\") || die; \n@files = readdir $dir ;\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1423146876, "creation_date": 1423146876, "answer_id": 28346633, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28346633#28346633", "title": "List strings which are not found in a text file", "body": "<p>If you can install some cool modules from <a href=\"https://metacpan.org\" rel=\"nofollow\">CPAN</a>, I propose a bit cleaner (IMHO) script for your quest:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings; use 5.010; \nuse JSON;\nuse Path::Tiny;\n\nmy $json_data = path('images.json')-&gt;slurp;\nmy $data = decode_json( $json_data );\n\nmy %files_to_check = map { $_-&gt;basename =&gt; 0 } path('images')-&gt;children; \nmy @files_in_json = map { $_-&gt;{filename} } @$data; \ndelete @files_to_check{ @files_in_json }; # delete all files we have in JSON\n\nsay \"$_\" for sort keys %files_to_check;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1423148611, "creation_date": 1423148611, "answer_id": 28347282, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file/28347282#28347282", "title": "List strings which are not found in a text file", "body": "<p>Whenever you have the idea that you must find or not find something in a list, think <em>hashes</em>. A hash is a quick way to index a list since you can find whether something or not is in a list by simply looking at the key.</p>\n\n<p>In the first half of this program, I am going through your JSON file looking for the file names and storing them in a hash called <code>%files</code>. In the second half, I go through the directory where my <code>png</code> files are located and check to see if each one is in that <code>%files</code> hash. If a particular entry doesn't exist, I know that it's not in my JSON file.</p>\n\n<blockquote>\n  <p><strong>NOTE:</strong> I could have used <code>use JSON;</code> to parse my JSON file. However, in this demonstration, I am merely looking for <code>filename</code> lines to keep things simple. If this was an actual program, use the <code>JSON</code> module.</p>\n</blockquote>\n\n<pre><code>#! /usr/bin/env perl\nuse strict;\nuse warnings;\nuse autodie;\nuse feature qw(say);\n\nuse constant {\n    FILE_NAME       =&gt; 'file.txt',\n    DIR_NAME        =&gt; 'temp',\n};\n\n#\n# Build the %files hash\n#\nopen my $fh, \"&lt;\", FILE_NAME;\nmy %files;\nwhile ( my $line = &lt;$fh&gt; ) { \n    chomp $line;\n    next unless $line =~ /\\s+filename:\\s+\"(.+)\"/;\n    my $file = $1;\n    $files{$file} = 1;\n}\nclose $fh;\n\n#\n# Go through directory looking for entries not in %files\n#\nopendir my $dh, DIR_NAME;\nwhile ( my $file = readdir $dh ) {\n    next if $file eq \".\" or $file eq \"..\";\n    if ( not exists $files{$file} ) {\n        say qq(File \"$file\" not in list);\n    }\n}\nclosedir $dh;\n</code></pre>\n"}], "owner": {"reputation": 2288, "user_id": 1662801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb2357d612ccbf51a6b8a05ae178bd34?s=128&d=identicon&r=PG", "display_name": "bhb", "link": "https://stackoverflow.com/users/1662801/bhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 28323221, "answer_count": 6, "score": 1, "last_activity_date": 1423189896, "creation_date": 1423055131, "last_edit_date": 1495535118, "question_id": 28322163, "link": "https://stackoverflow.com/questions/28322163/list-strings-which-are-not-found-in-a-text-file", "title": "List strings which are not found in a text file", "body": "<p>I have a directory with hundreds of files in it. The names of all the files that are in the directory are also listed in a Javascript file (see below). I want to find the names of the files in the directory which are <strong>not present</strong> in the text file. Example:</p>\n\n<pre><code>% ls ./images/ \na.png\nc.png\nx.png\n</code></pre>\n\n<p>File:</p>\n\n<pre><code>{\n   name: \"A\",\n   filename: \"a.png\"\n\n},\n{\n   name: \"X\",\n   filename: \"x.png\"\n\n}\n</code></pre>\n\n<p>In this case the output should be \"<code>c.png</code>\".</p>\n\n<p>I found some <code>awk</code> scripts which are able find the string (see: <a href=\"https://stackoverflow.com/questions/18945691/awk-script-check-if-all-wordsfields-from-one-file-are-contained-in-another-fi\">awk script: check if all words(fields) from one file are contained in another file</a>).  However in my case I want to find the list of files which <em>do not</em> match. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1423051860, "post_id": 28320933, "comment_id": 44990238, "body": "because the 1st cycle <b>consumes</b> the all of input lines from the <code>$file</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": true, "score": 3, "last_activity_date": 1423051863, "creation_date": 1423051863, "answer_id": 28321056, "question_id": 28320933, "link": "https://stackoverflow.com/questions/28320933/count-the-occurence-of-each-word-in-a-text-file-by-perl/28321056#28321056", "title": "Count the occurence of each word in a text file by Perl", "body": "<p>In your first loop, you read all the file's lines via the <code>&lt;&gt;</code> operator, which means that you essentially advance the file pointer to the end of the file. </p>\n\n<p>In your second loop, you are using the <code>&lt;&gt;</code> operator once again, but to no avail - you have consumed the whole file in your previous loop, so there is nothing else left to read. <code>%freq</code> is therefore uninitialized in your final loop.</p>\n\n<p>I would recommend merging loops 1 and 2, like this:</p>\n\n<pre><code>while ( my $line = &lt;$file&gt; ) {\n     chomp($line);\n     print $line; \n     foreach $word (split(' ', $line)) {\n         $freq{$word}++;\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 28321056, "answer_count": 1, "score": 0, "last_activity_date": 1423051863, "creation_date": 1423051474, "question_id": 28320933, "link": "https://stackoverflow.com/questions/28320933/count-the-occurence-of-each-word-in-a-text-file-by-perl", "title": "Count the occurence of each word in a text file by Perl", "body": "<p>I want to calculate the occurence of each word in a text file by using Perl. this is the script :</p>\n\n<pre><code>#! /usr/local/bin/perl -w\n#Exercice 8\n\n#Ouvrir le fichier\nopen my($file), '&lt;', 'file.txt' \nor die \"Erreur lors de l'ouverture\";\n\n#Afficher le fichier  \nwhile( my $line = &lt;$file&gt; ) {\n        chomp($line) ;\n        print \"$line \\n\";\n}\n\n#Calculer le nombre d'apparaition\nwhile( my $line = &lt;$file&gt; ){\nforeach $word (split(' ',$line)){\n    $freq{$word}++;\n}\n}\n\n#Afficher les mots en ordre\nforeach $word (sort keys %freq) {\nprint \"$word $freq{$word}\\n\";\n}\n</code></pre>\n\n<p>When I run the script I only get the result of the first loop as result.\nThe two others don't return any output.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 2681195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ft0p.png?s=128&g=1", "display_name": "findall", "link": "https://stackoverflow.com/users/2681195/findall"}, "edited": false, "score": 1, "creation_date": 1423051882, "post_id": 28320974, "comment_id": 44990256, "body": "It should be <code>grep { $string =~m&#47;$_&#47; }</code>, I&#39;d say."}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "reply_to_user": {"reputation": 2178, "user_id": 2681195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ft0p.png?s=128&g=1", "display_name": "findall", "link": "https://stackoverflow.com/users/2681195/findall"}, "edited": false, "score": 0, "creation_date": 1423052005, "post_id": 28320974, "comment_id": 44990321, "body": "Depends on <code>$string</code> is and what the author had in mind. Or is there some particular reason you think it should be that way?"}, {"owner": {"reputation": 643, "user_id": 2790119, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86ff770ac58c010482ce38480cf3e0da?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja Dubey", "link": "https://stackoverflow.com/users/2790119/pooja-dubey"}, "edited": false, "score": 0, "creation_date": 1423052085, "post_id": 28320974, "comment_id": 44990360, "body": "this is not working see my question i have updated that"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1423056748, "post_id": 28320974, "comment_id": 44993194, "body": "Actually, no. You don&#39;t <i>need</i> to pass <code>grep</code> a code block. As <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">the documentation</a> makes clear, it accepts either a code block or an expression as its first parameter. But when you use a block, you omit the comma between the first and second parameters."}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1423057168, "post_id": 28320974, "comment_id": 44993472, "body": "True! I&#39;ve removed the lie from the answer."}], "tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": true, "score": 2, "last_activity_date": 1423057218, "last_edit_date": 1423057218, "creation_date": 1423051610, "answer_id": 28320974, "question_id": 28320906, "link": "https://stackoverflow.com/questions/28320906/grep-values-from-a-string-in-perl/28320974#28320974", "title": "Grep Values from a String in perl", "body": "<p>What you want is this:</p>\n\n<pre><code>@has = grep { $string =~ m/$_/ } @array_list;\n</code></pre>\n\n<p>In general, this code block should return true for the elements, which you want to have grepped.</p>\n"}], "owner": {"reputation": 643, "user_id": 2790119, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86ff770ac58c010482ce38480cf3e0da?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja Dubey", "link": "https://stackoverflow.com/users/2790119/pooja-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 28320974, "answer_count": 1, "score": 1, "last_activity_date": 1423057218, "creation_date": 1423051393, "last_edit_date": 1423052387, "question_id": 28320906, "link": "https://stackoverflow.com/questions/28320906/grep-values-from-a-string-in-perl", "title": "Grep Values from a String in perl", "body": "<p>I have array that will have some values like this :</p>\n\n<pre><code>(\"test\",\"test1\",\"test3\").\n</code></pre>\n\n<p>Now i have a string that will have values like this <code>\"test\",\"test4\",\"test3\",\"test5\"</code></p>\n\n<p>I want to get the matching values from string that are in the array</p>\n\n<pre><code>@has = grep(m/$_/i,$strin) @array_list;\n</code></pre>\n\n<p>How can we do this please help me in this.</p>\n"}, {"tags": ["perl", "web", "cgi", "psgi"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1423053085, "post_id": 28320905, "comment_id": 44990872, "body": "<code>CGI</code> - is one specification what uses the Apache and/or other web-servers. <code>PSGI</code> is <b>another</b> specification. You can run <code>CGI</code> applications under the PSGI-servers (by using <code>CGI::PSGI</code>), but you can&#39;t run an PSGI application as plain CGI-script. For PSGI app you <b>dont need</b> apache. (if want use apache, you could: 1.) run your PSGI app behind reverse proxy, or 2.) use Plack::Handler::Apache2 or such..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1423056555, "post_id": 28320905, "comment_id": 44993067, "body": "&quot;More information about this error may be available in the server error log&quot; - That sounds like it might be a clue. What does the server error log say?"}, {"owner": {"reputation": 86, "user_id": 3942939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae9403b8b2f932807643ca9c936b17e?s=128&d=identicon&r=PG&f=1", "display_name": "kiran reddy", "link": "https://stackoverflow.com/users/3942939/kiran-reddy"}, "edited": false, "score": 0, "creation_date": 1423131101, "post_id": 28320905, "comment_id": 45027262, "body": "I can able to run it now using plack::runner module"}], "answers": [{"tags": [], "owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1423065095, "creation_date": 1423065095, "answer_id": 28325635, "question_id": 28320905, "link": "https://stackoverflow.com/questions/28320905/deploying-cgi-to-psgi-converted-application-in-apache/28325635#28325635", "title": "deploying cgi to psgi converted application in apache", "body": "<p>CGI and PSGI are two different specifications of how a web server and an external program communicate.</p>\n\n<p>Under CGI, the web server expects to receive text output from the program, consisting of the HTTP Response headers, a blank line, and the HTML rendered by the program.</p>\n\n<p>The CGI module implements this logic for the apache server, and if the output from the program does not comply, apache reports the 500 error.</p>\n\n<p>Under PSGI, the web server expects the program to return a three element list consisting of the HTTP response code, the HTTP Response headers, and the HTML rendered by the program.  </p>\n\n<p>So you can see that a program conforming to the PSGI spec would confuse the mod_cgi.</p>\n\n<p>So you need to install an apache module that implements PSGI, or employ a Perl module (the CGI::PSGI docs suggest <a href=\"http://search.cpan.org/perldoc?CGI%3A%3AEmulate%3A%3APSGI\" rel=\"nofollow\">CGI::Emulate::PSGI</a>  ) that will accept your PSGI list and convert to CGI for you.</p>\n"}], "owner": {"reputation": 86, "user_id": 3942939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ae9403b8b2f932807643ca9c936b17e?s=128&d=identicon&r=PG&f=1", "display_name": "kiran reddy", "link": "https://stackoverflow.com/users/3942939/kiran-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502588825, "creation_date": 1423051391, "last_edit_date": 1502588825, "question_id": 28320905, "link": "https://stackoverflow.com/questions/28320905/deploying-cgi-to-psgi-converted-application-in-apache", "title": "deploying cgi to psgi converted application in apache", "body": "<pre><code>#!C:/perl/bin/perl.exe\nuse CGI;\n\nmy $q = CGI-&gt;new;\nprint $q-&gt;header('text/plain'),\n    \"Hello \", $q-&gt;param('name');\n\n#CONVERTED PSGI PAGE\n\n#!C:/perl/bin/perl.exe\nuse CGI::PSGI;\n\nmy $app = sub {\n    my $env = shift;\n    my $q = CGI::PSGI-&gt;new($env);\n\n\n    return [ \n        $q-&gt;psgi_header('text/plain'),\n        [ \"Hello \", $q-&gt;param('name') ],\n    ];\n};\n</code></pre>\n\n<p>I run this cgi.pl in apache server as \n  <a href=\"http://localhost/cgi-bin/cgi.pl\" rel=\"nofollow\">http://localhost/cgi-bin/cgi.pl</a></p>\n\n<p>but I cant able to run the converted psgi.pl in apache server \nits displaying \nplease help \nInternal Server Error\nThe server encountered an internal error or misconfiguration and was unable to complete your request.\nPlease contact the server administrator at admin@example.com to inform them of the time this error occurred, and the actions you performed just before this error. More information about this error may be available in the server error log.</p>\n"}, {"tags": ["json", "multithreading", "perl"], "answers": [{"comments": [{"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1423051742, "post_id": 28320849, "comment_id": 44990157, "body": "There&#39;s actually more urls but I removed them. Thank you though :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 1, "creation_date": 1423051774, "post_id": 28320849, "comment_id": 44990182, "body": "You&#39;re still spawning 10 threads per URL, and it looks like 9 of those will be redundant."}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1423071031, "post_id": 28320849, "comment_id": 45002949, "body": "Just a question, it keeps saying &quot;invalid value for shared scalar&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1423071698, "post_id": 28320849, "comment_id": 45003327, "body": "Not sure why. My test case works ok. Which line gives that error? (And are you still assigning an empty array to <code>%arrInfo</code> because that&#39;s redundant)"}, {"owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 0, "creation_date": 1423073010, "post_id": 28320849, "comment_id": 45004109, "body": "Could you show me how you&#39;re doing it, if you dont mind?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "edited": false, "score": 1, "creation_date": 1423084938, "post_id": 28320849, "comment_id": 45010456, "body": "Edited answer with example"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1423084925, "last_edit_date": 1495542511, "creation_date": 1423051186, "answer_id": 28320849, "question_id": 28320525, "link": "https://stackoverflow.com/questions/28320525/adding-key-value-to-hashperl/28320849#28320849", "title": "Adding Key/Value To Hash(Perl)", "body": "<p>You're multithreading and not sharing the variable. When a thread spawns, the existing variable-space is cloned - so each thread has it's own local copy of <code>%arrInfo</code> which is discarded when it exits. </p>\n\n<p>You need to:</p>\n\n<pre><code>use threads::shared;\nmy %arrInfo : shared;\n</code></pre>\n\n<p>You're also doing something a bit odd with your thread spawn loop - you're spawning 10 threads x 3 URLs - for 30 threads, but only queuing 3 URLs to process. But then you're also not actually using <code>$resTask</code> at all, which doesn't make a lot of sense. </p>\n\n<p>So I'm prepared to bet your code hangs at the end, because you're trying to join some threads that aren't complete. </p>\n\n<p>You might find <code>$resQueue -&gt; end()</code> is more suitable than queuing up <code>undef</code>. </p>\n\n<p>Example using a shared hash:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse threads;\nuse threads::shared;\n\nuse Data::Dumper;\n\nmy %test_hash : shared;\nmy %second_hash;\n\n$test_hash{'from_parent'}       = 1;\n$second_hash{'from_parent_too'} = 1;\n\nthreads-&gt;create(\n    sub {\n        $test_hash{'from_first'}       = 2;\n        $second_hash{'from_first_too'} = 2;\n    }\n);\nthreads-&gt;create(\n    sub {\n        $test_hash{'from_second'}       = 3;\n        $second_hash{'from_second_too'} = 3;\n    }\n);\n\nforeach my $thr ( threads-&gt;list() ) { $thr-&gt;join }\n\nprint Dumper \\%test_hash;\nprint Dumper \\%second_hash;\n</code></pre>\n\n<p>For a 'worker threads' style approach, I'd offer: <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons/26297240#26297240\">Perl daemonize with child daemons</a></p>\n"}], "owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 28320849, "answer_count": 1, "score": 0, "last_activity_date": 1423084925, "creation_date": 1423050164, "question_id": 28320525, "link": "https://stackoverflow.com/questions/28320525/adding-key-value-to-hashperl", "title": "Adding Key/Value To Hash(Perl)", "body": "<p>Hi I'm trying to add multiple keys/values into a hash. Basically file names and their data. Each of the json file's content have hash and array referencing. The hash that contains the file names and data will be handled else where.</p>\n\n<p>This is my code:</p>\n\n<pre><code> sub getDecode {\n    my $self = shift;\n    my @arrUrls = ('http://domain.com/test.json', 'http://domain.com/test_two.json', 'http://domain.com/test3.json');\n\n    my $resQueue = Thread::Queue-&gt;new();\n    my $intThreads = 10;\n    my @arrThreads = ();\n    my %arrInfo = ();\n\n    foreach my $strUrl (@arrUrls) {\n          for (1..$intThreads) {\n              push (@arrThreads, threads-&gt;create(sub {\n                          while (my $resTask = $resQueue-&gt;dequeue) {\n                                      my $resData = get($strUrl);\n                                      my $strName = basename($strUrl, '.json');\n                                      my $arrData = decode_json($resData);\n                                      $arrInfo{$strName} = $arrData;\n                          }\n              }));\n          }\n   }\n\n   $resQueue-&gt;enqueue(@arrUrls);\n   $resQueue-&gt;enqueue(undef) for 1..$intThreads;\n   $_-&gt;join for @arrThreads;\n\n  return %arrInfo;       \n  }\n</code></pre>\n\n<p>When I try data dumping on <code>%arrInfo</code> no output is given. Please help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423054285, "post_id": 28320409, "comment_id": 44991551, "body": "What <i>do</i> you get when you dump them? But I&#39;m guessing - in one you&#39;ve got an <code>IO::File</code> object, and the other you&#39;ve got a scalar"}, {"owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423054873, "post_id": 28320409, "comment_id": 44991933, "body": "Using <code>IO::File</code> I get <code>bless( \\*Symbol::GEN4, &#39;IO::File&#39; )</code> where the <code>GEN&lt;n&gt;</code> part is different for different hash keys and with the <code>open</code> I get the same <code>\\*{&#39;::$_[...]&#39;}</code> for all keys."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1423056573, "creation_date": 1423056573, "answer_id": 28322671, "question_id": 28320409, "link": "https://stackoverflow.com/questions/28320409/different-string-representation-of-a-filehandle-reference-in-perl/28322671#28322671", "title": "Different string representation of a filehandle reference in Perl", "body": "<p><code>IO::File</code> is an object oriented interface to a file handle. Inside, it's doing the same thing, but the <code>IO::File</code> module has a bunch of built in methods for interacting with your filehandle. </p>\n\n<p>If you have a look at the doc: <a href=\"http://perldoc.perl.org/IO/File.html\" rel=\"nofollow\">http://perldoc.perl.org/IO/File.html</a></p>\n\n<p>You'll see this at work - when you use <code>new</code> the result is an instance of an <code>IO::File</code> object, and you can call methods within it via <code>-&gt;</code>.</p>\n\n<p>E.g. </p>\n\n<pre><code>$fh -&gt; close();\n</code></pre>\n\n<p>This is a different <code>close</code> to the perl built in, although it does basically the same thing. </p>\n\n<p>Behind the scenes, within the <code>IO::File</code> module, you'll probably find a \"real\" filehandle buried within, but without needing to mess around with the perl operators for autoflush, buffering, line endings etc. </p>\n\n<p>If you look at <a href=\"http://perldoc.perl.org/perlvar.htmlyou\" rel=\"nofollow\">http://perldoc.perl.org/perlvar.htmlyou</a>'ll see there's a bunch of globals that change behaviour of files:</p>\n\n<blockquote>\n  <p>$|\n  If set to nonzero, forces a flush right away and after every write or print on the currently selected output channel. </p>\n  \n  <p>$/\n  The input record separator, newline by default. This influences Perl's idea of what a \"line\" is.</p>\n</blockquote>\n\n<p>etc. <code>IO::File</code> hides these behind an OO layer. </p>\n\n<p><a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow\">http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles</a></p>\n"}], "owner": {"reputation": 1073, "user_id": 1039320, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28ba137ea03056ffb3a2e6db49ac29cd?s=128&d=identicon&r=PG", "display_name": "jreisinger", "link": "https://stackoverflow.com/users/1039320/jreisinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1423056573, "creation_date": 1423049835, "question_id": 28320409, "link": "https://stackoverflow.com/questions/28320409/different-string-representation-of-a-filehandle-reference-in-perl", "title": "Different string representation of a filehandle reference in Perl", "body": "<p>I did the exercise 8.2 from <a href=\"http://www.intermediateperl.com/\" rel=\"nofollow\" title=\"Intermediate Perl\">Intermediate Perl</a>. It looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nmy %fhs;    # filehandles\n\nwhile (&lt;&gt;) {\n    unless (/^\\s*(\\S[^:]+):/) {\n        warn \"ignoring line with missing name: $_\";\n        next;\n    }   \n    my $castaway = lc $1; \n\n    unless ( $fhs{$castaway} ) { \n        my $fh = IO::File-&gt;new( $castaway . '.info', 'w' );\n        #open my $fh, '&gt;', \"$castaway.info\";\n        $fhs{$castaway} = $fh;\n    }   \n\n    print { $fhs{$castaway} } $_; \n}   \n\nuse Data::Dumper;\nprint Dumper \\%fhs;\n</code></pre>\n\n<p>(You can download sample data to run the program on from the <a href=\"http://www.intermediateperl.com/downloads_page/\" rel=\"nofollow\">download page</a> - see Chapter 8).</p>\n\n<p>I tried to get the filehandles via one of these two ways:</p>\n\n<pre><code>my $fh = IO::File-&gt;new( $castaway . '.info', 'w' );\nopen my $fh, '&gt;', \"$castaway.info\";\n</code></pre>\n\n<p>I guess they are equivalent but when I dump the <code>%fhs</code> hash contents I get different results. Why do they differ? What does it mean? Thanks.</p>\n"}, {"tags": ["oracle", "perl", "amazon-web-services"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423049449, "post_id": 28319848, "comment_id": 44988931, "body": "What does your code look like?"}, {"owner": {"reputation": 2542, "user_id": 4044030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E3GIe.jpg?s=128&g=1", "display_name": "mmmmmpie", "link": "https://stackoverflow.com/users/4044030/mmmmmpie"}, "edited": false, "score": 0, "creation_date": 1423055208, "post_id": 28319848, "comment_id": 44992143, "body": "<code>create or replace package perl_global as fhutl_file.file_type; end;</code> This is not using proper syntax."}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1423055443, "post_id": 28319848, "comment_id": 44992311, "body": "What should be the syntax ? do I miss the \\ ? I follow the instructions from doc"}], "answers": [{"comments": [{"owner": {"reputation": 1389, "user_id": 5689062, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7cef9127eb99bf28e040c763bec1ecfd?s=128&d=identicon&r=PG&f=1", "display_name": "The One", "link": "https://stackoverflow.com/users/5689062/the-one"}, "edited": false, "score": 0, "creation_date": 1515485088, "post_id": 28810580, "comment_id": 83306554, "body": "let&#39;s say i have a data.dmp file. I put it on EC2 Windows. I can connect from this EC2 to Oracle RDS using SQL Developer. But i don&#39;t know how to run script. Can you tell me please?"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "reply_to_user": {"reputation": 1389, "user_id": 5689062, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7cef9127eb99bf28e040c763bec1ecfd?s=128&d=identicon&r=PG&f=1", "display_name": "The One", "link": "https://stackoverflow.com/users/5689062/the-one"}, "edited": false, "score": 0, "creation_date": 1515486321, "post_id": 28810580, "comment_id": 83307138, "body": "you would need to install perl on windows and run it from perl console or windows command line"}, {"owner": {"reputation": 1389, "user_id": 5689062, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7cef9127eb99bf28e040c763bec1ecfd?s=128&d=identicon&r=PG&f=1", "display_name": "The One", "link": "https://stackoverflow.com/users/5689062/the-one"}, "edited": false, "score": 0, "creation_date": 1515488508, "post_id": 28810580, "comment_id": 83308219, "body": "I posted my script below. It didn&#39;t work. It said: Unrecognized character \\x93, marked by &lt;-- HERE after y $data = &lt;-- HERE near column 12 at import-oracle.pl line 8."}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "reply_to_user": {"reputation": 1389, "user_id": 5689062, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7cef9127eb99bf28e040c763bec1ecfd?s=128&d=identicon&r=PG&f=1", "display_name": "The One", "link": "https://stackoverflow.com/users/5689062/the-one"}, "edited": false, "score": 0, "creation_date": 1515488608, "post_id": 28810580, "comment_id": 83308272, "body": "don&#39;t post your script as an answer - create a new question and point to the new post from a new comment"}, {"owner": {"reputation": 1389, "user_id": 5689062, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7cef9127eb99bf28e040c763bec1ecfd?s=128&d=identicon&r=PG&f=1", "display_name": "The One", "link": "https://stackoverflow.com/users/5689062/the-one"}, "edited": false, "score": 0, "creation_date": 1515489151, "post_id": 28810580, "comment_id": 83308555, "body": "<a href=\"https://stackoverflow.com/questions/48164717/whats-wrong-with-this-script-to-import-dmp-to-rds-oracle\" title=\"whats wrong with this script to import dmp to rds oracle\">stackoverflow.com/questions/48164717/&hellip;</a>"}], "tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": true, "score": 1, "last_activity_date": 1468309065, "last_edit_date": 1468309065, "creation_date": 1425301674, "answer_id": 28810580, "question_id": 28319848, "link": "https://stackoverflow.com/questions/28319848/import-oracle-dump-on-amazon-rds/28810580#28810580", "title": "Import Oracle dump on Amazon RDS", "body": "<p>For anyone coming here with the same issue, indeed the syntax was not correct and had to be </p>\n\n<pre><code>my $sql_global = \"create or replace package perl_global as fh utl_file.file_type; end;\";\n</code></pre>\n\n<p>the script on the link was not correct but it is correct in pdf file from amazon.</p>\n"}], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1984, "favorite_count": 1, "accepted_answer_id": 28810580, "answer_count": 1, "score": 3, "last_activity_date": 1515488562, "creation_date": 1423048154, "last_edit_date": 1472562806, "question_id": 28319848, "link": "https://stackoverflow.com/questions/28319848/import-oracle-dump-on-amazon-rds", "title": "Import Oracle dump on Amazon RDS", "body": "<p>I have dump files from our OracleDB production instance and I need to import it into our news RDS instance.</p>\n\n<p>I followed the instructions from <a href=\"http://d0.awsstatic.com/whitepapers/strategies-for-migrating-oracle-database-to-aws.pdf\" rel=\"nofollow\">http://d0.awsstatic.com/whitepapers/strategies-for-migrating-oracle-database-to-aws.pdf</a> (from p23)\nand <a href=\"http://www.connecteddba.com/howto/MigratetoRDS.html\" rel=\"nofollow\">http://www.connecteddba.com/howto/MigratetoRDS.html</a> (which is more or less the same)</p>\n\n<p>The files are on the EC2 instance and I can connect to the RDS instance, the user has correct rights.</p>\n\n<p>I correctly installed perl libraries to run the script</p>\n\n<pre><code>$ perl -e 'use DBI; print $DBI::VERSION,\"\\n\";'\n1.633\n$ perl -e 'use DBD::Oracle; print $DBD::Oracle::VERSION,\"\\n\";'\n1.74\n</code></pre>\n\n<p>I've configured the variables to point to my RDS info - From the Test Connection of the <a href=\"http://www.connecteddba.com/howto/MigratetoRDS.html\" rel=\"nofollow\">http://www.connecteddba.com/howto/MigratetoRDS.html</a> site, it passes correctly</p>\n\n<pre><code>$ perl test.pl\nGot here without dying\n</code></pre>\n\n<p>However when running the copy script, it fails with the following error:</p>\n\n<pre><code>$ perl copy_to_rds.pl &lt;myfile&gt;.dmp\nDBD::Oracle::db do warning: ORA-24344: success with compilation error (DBD SUCCESS_WITH_INFO: OCIStmtExecute) [for Statement \"create or replace package perl_global as fhutl_file.file_type; end;\"] at copy_to_rds.pl line 25.\nDBD::Oracle::st execute failed: ORA-06550: Ligne 1, colonne 7 :\nPLS-00905: object &lt;myrdsuser&gt;.PERL_GLOBAL is invalid\nORA-06550: Ligne 1, colonne 7 :\nPL/SQL: Statement ignored (DBD ERROR: error possibly near &lt;*&gt; indicator at char 6 in 'BEGIN &lt;*&gt;perl_global.fh := utl_file.fopen(:dirname, :fname, 'wb', :chunk); END;') [for Statement \"BEGIN perl_global.fh := utl_file.fopen(:dirname, :fname, 'wb', :chunk); END;\" with ParamValues: :chunk=8192, :dirname='DATA_PUMP_DIR', :fname='&lt;myfile&gt;.dmp'] at copy_to_rds.pl line 30.\nORA-06550: Ligne 1, colonne 7 :\nPLS-00905: object &lt;myrdsuser&gt;.PERL_GLOBAL is invalid\nORA-06550: Ligne 1, colonne 7 :\nPL/SQL: Statement ignored (DBD ERROR: error possibly near &lt;*&gt; indicator at char 6 in 'BEGIN &lt;*&gt;perl_global.fh := utl_file.fopen(:dirname, :fname, 'wb', :chunk); END;')\n</code></pre>\n\n<p>The script looks like this:</p>\n\n<pre><code>use DBI;\nuse warnings;\nuse strict;\n\n# RDS instance info\nmy $RDS_PORT=1521;\nmy $RDS_HOST=\"&lt;my rds instance&gt;\";\nmy $RDS_LOGIN=\"&lt;myuser&gt;/*******\";\nmy $RDS_SID=\"&lt;ORCL_LIKE&gt;\"; \n\n#The $ARGV[0] is a parameter you pass into the script\nmy $dirname = \"DATA_PUMP_DIR\";\nmy $fname = $ARGV[0];\n\nmy $data = \"dummy\";\nmy $chunk = 8192;\n\nmy $sql_open = \"BEGIN perl_global.fh := utl_file.fopen(:dirname, :fname, 'wb', :chunk); END;\";\nmy $sql_write = \"BEGIN utl_file.put_raw(perl_global.fh, :data, true); END;\";\nmy $sql_close = \"BEGIN utl_file.fclose(perl_global.fh); END;\";\nmy $sql_global = \"create or replace package perl_global as fhutl_file.file_type; end;\";\n\nmy $conn = DBI-&gt;connect('dbi:Oracle:host='.$RDS_HOST.';sid='.$RDS_SID.';port='.$RDS_PORT,$RDS_LOGIN, '') || die ( $DBI::errstr . \"\\n\");\n\nmy $updated=$conn-&gt;do($sql_global);\nmy $stmt = $conn-&gt;prepare ($sql_open);\n$stmt-&gt;bind_param_inout(\":dirname\", \\$dirname, 12);\n$stmt-&gt;bind_param_inout(\":fname\", \\$fname, 12);\n$stmt-&gt;bind_param_inout(\":chunk\", \\$chunk, 4);\n$stmt-&gt;execute() || die ( $DBI::errstr . \"\\n\");\n\nopen (INF, $fname) || die \"\\nCan't open $fname for reading: $!\\n\";\nbinmode(INF);\n$stmt = $conn-&gt;prepare ($sql_write);\nmy %attrib = ('ora_type','24');\nmy $val=1;\nwhile ($val&gt; 0) {\n  $val = read (INF, $data, $chunk);\n  $stmt-&gt;bind_param(\":data\", $data , \\%attrib);\n  $stmt-&gt;execute() || die ( $DBI::errstr . \"\\n\") ; };\ndie \"Problem copying: $!\\n\" if $!;\nclose INF || die \"Can't close $fname: $!\\n\";\n  $stmt = $conn-&gt;prepare ($sql_close);\n$stmt-&gt;execute() || die ( $DBI::errstr . \"\\n\") ;\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1423045477, "post_id": 28318832, "comment_id": 44986631, "body": "It doesn&#39;t work like that. If you write something and come across an insurmountable problem then come here and explain and we will help you out. We&#39;re not about writing entire solutions."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423045556, "post_id": 28318832, "comment_id": 44986688, "body": "I assume this data has come from a file? It&#39;s probably best to use a <code>while</code> loop to process your data a line at a time than to throw it all into an array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1423045685, "post_id": 28318832, "comment_id": 44986767, "body": "Is this homework? The product names don&#39;t look like real data."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423047982, "post_id": 28318832, "comment_id": 44988125, "body": "I also wouldn&#39;t be stuffing it into an array. This looks more like data suited for putting into a hash."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423047264, "post_id": 28318981, "comment_id": 44987701, "body": "While it&#39;s questionable what the OP actually has in the array, it&#39;s pretty clear that it isn&#39;t an array of hashes. My guess is that they&#39;ve just done <code>my @array = &lt;&gt;</code> which doesn&#39;t really advance the solution at all as all that&#39;s happened is that the data is now in memory instead of on disk."}, {"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1423047553, "post_id": 28318981, "comment_id": 44987879, "body": "Perhaps we should wait till we know the data. I&#39;ll edit my answer and add an assumtion of the data being hashes."}, {"owner": {"reputation": 7, "user_id": 4528057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13e52906a3d6cd1accb319c005a15aa?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/4528057/ajf"}, "edited": false, "score": 0, "creation_date": 1423054093, "post_id": 28318981, "comment_id": 44991426, "body": "Thanks for your responses. As I have mentioned this is the first time I am trying this... and as you have predicted this is from a file, and file has the same what I have given.. what I managed to do is split these lines using &quot;split(/\\n\\n/,$line)&quot; (because each product has two ) and put them in a array, so if I want to call each product, I can print them by array[0], array[1], and then I decided to put each array values in to hash, then get the output as desired.  may be this approach is entirely wrong.. expecting some help please.. Thanks again."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 7, "user_id": 4528057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13e52906a3d6cd1accb319c005a15aa?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/4528057/ajf"}, "edited": false, "score": 2, "creation_date": 1423056388, "post_id": 28318981, "comment_id": 44992931, "body": "@AJF: Please edit your question and include your code. That way we can see what you&#39;re doing and where you&#39;er going wrong. Otherwise, it&#39;s really hard to help."}], "tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": false, "score": -1, "last_activity_date": 1423055607, "last_edit_date": 1423055607, "creation_date": 1423045551, "answer_id": 28318981, "question_id": 28318832, "link": "https://stackoverflow.com/questions/28318832/splitting-arrays-in-perl/28318981#28318981", "title": "Splitting arrays in Perl", "body": "<p>Based on additional input from the author and the comments, here's an updated answer.</p>\n\n<ol>\n<li><p>Prepare a data structure (hash) to store data for one product.</p></li>\n<li><p>Read in the file product-by-product, by parsing consequtive lines. Store the data for one product in memory.</p></li>\n<li><p>Print the data as soon as you are finished with one product (an empty line seems to be a separator). Clear the data. Repeat.</p></li>\n</ol>\n\n<p>In total, this would look like this:</p>\n\n<pre><code>my $empty = {\n    name =&gt; \"\",\n    date =&gt; \"\",\n    value =&gt; \"\"\n    # etc\n};\n\nmy $product = $empty;\n\nwhile (my $line = &lt;$file&gt;) {\n    if ($line =~ m/^Product\\s+(.*)$) {\n        $product-&gt;{name} = $1;\n    } elsif ($line =~ m/^\\s+Date=(\\d+\\.\\d+\\.\\d+)$/) {\n        $product-&gt;{date} = $1;\n    } elsif () {\n        # etc.\n    } elsif ($line eq \"\") {\n        # Empty line\n        print $product-&gt;{name} . \"\\t\" . $product-&gt;{date} . \"\\n\"; #etc\n        # Clear the product data\n        $product = $empty;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4528057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13e52906a3d6cd1accb319c005a15aa?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/4528057/ajf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423055607, "creation_date": 1423045185, "question_id": 28318832, "link": "https://stackoverflow.com/questions/28318832/splitting-arrays-in-perl", "title": "Splitting arrays in Perl", "body": "<p>I am new to Perl\nI have below data into arrays, each product is a value of this array, </p>\n\n<pre><code> print @array\n\n Product A\n      Date=2.3.13\n      Value=100\n      Time=2.12\n\n Product B\n      Date=4.5.12\n      value=20\n      Description=Goods\n\n Product C\n      ...\n      ...\n</code></pre>\n\n<p>These products can change from A to Z, and their attributes can change as well, can some one help me getting data in below format</p>\n\n<pre><code> Product         Date      Value        Descrip      Time\n A               2.3.13    100          -Nil-        -Nil-\n B               4.5.12    20           Goods        \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423043260, "post_id": 28318101, "comment_id": 44985219, "body": "It looks like you&#39;re trying to embed perl within a batch script. Is that what you&#39;re trying to accomplish?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1423043471, "post_id": 28318101, "comment_id": 44985348, "body": "Possibly related: <a href=\"http://stackoverflow.com/questions/3062772/can-perl-and-batch-run-in-the-same-batch-file\" title=\"can perl and batch run in the same batch file\">stackoverflow.com/questions/3062772/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1423045333, "last_edit_date": 1423045333, "creation_date": 1423044817, "answer_id": 28318725, "question_id": 28318101, "link": "https://stackoverflow.com/questions/28318101/output-correct-line-number-for-perl-script-wrapped-in-batch-on-windows/28318725#28318725", "title": "Output correct line number for Perl script wrapped in batch on Windows?", "body": "<p>You can use the <a href=\"http://perldoc.perl.org/perlsyn.html#Plain-Old-Comments-%28Not!%29\" rel=\"nofollow\"><em>line directive</em></a>, which is a special form of comment that looks like <code># line 99</code> and dictates the line number that perl will assign to the following line.</p>\n\n<p>For instance</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\n\nSTDOUT-&gt;autoflush;\n\n# line 100\nsay \"line \". __LINE__;\ndie;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>line 100\nDied at E:\\Perl\\source\\line.pl line 101.\n</code></pre>\n\n<p>It is also possible to add a filename after the line number, which similarly dictates the source file name that perl will report.</p>\n"}], "owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 28318725, "answer_count": 1, "score": 0, "last_activity_date": 1598210396, "creation_date": 1423042926, "last_edit_date": 1598210396, "question_id": 28318101, "link": "https://stackoverflow.com/questions/28318101/output-correct-line-number-for-perl-script-wrapped-in-batch-on-windows", "title": "Output correct line number for Perl script wrapped in batch on Windows?", "body": "<p>Is there any specifier to tell Perl interpreter that the real Perl scripts starts at some line, then the output will have correct line number from interpreter, like interpret error message? For example, the line number information in below script is incorrect.</p>\n<pre><code>@perl -x &quot;%~f0&quot; %*\n@exit /b %errorlevel%\n\n#!perl  \n\nuse strict;\n\nprintxxx &quot;Perl Script\\n&quot;; # interpreter will output error for this line with **incorrect line number**\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 1, "creation_date": 1423040764, "post_id": 28317260, "comment_id": 44983685, "body": "If you don&#39;t know what <code>keys</code> actually does, how can you say that your snippet <i>does not seem to work</i>?"}, {"owner": {"reputation": 51, "user_id": 2834526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10046924c302f2864668441e96c8502?s=128&d=identicon&r=PG&f=1", "display_name": "user2834526", "link": "https://stackoverflow.com/users/2834526/user2834526"}, "reply_to_user": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 0, "creation_date": 1423065564, "post_id": 28317260, "comment_id": 44999114, "body": "Sorry this question is maybe incorrect. i have posted a more detailed question here. <a href=\"http://stackoverflow.com/questions/28323423/reading-windows-regsitry-with-perl\" title=\"reading windows regsitry with perl\">stackoverflow.com/questions/28323423/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1423070945, "post_id": 28317370, "comment_id": 45002905, "body": "You can go one further and loop through the keys directly.  <code>for (keys %$key)</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1423040757, "creation_date": 1423040757, "answer_id": 28317370, "question_id": 28317260, "link": "https://stackoverflow.com/questions/28317260/will-this-expression-work/28317370#28317370", "title": "Will this expression work?", "body": "<p>It's unnecessarily noisy. This sort of code is why Perl gets trashed. It's the same as</p>\n\n<pre><code>my @m1 = keys %$key;\n\nfor (@m1) {\n  if ( m|^(.*)/$| ) {\n    $a = $1;\n  }\n}\n</code></pre>\n\n<p>It loops over all the keys in the hash referred to by <code>$key</code> (setting <code>$_</code> to each of them) and checks whether they end in a slash character <code>/</code>. If so, then <code>$a</code> is set to the key string without the terminating slash.</p>\n\n<p>I assume there must be more to the loop than you have shown, because as it stands it is of little use.</p>\n"}], "owner": {"reputation": 51, "user_id": 2834526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10046924c302f2864668441e96c8502?s=128&d=identicon&r=PG&f=1", "display_name": "user2834526", "link": "https://stackoverflow.com/users/2834526/user2834526"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 28317370, "answer_count": 1, "score": 2, "last_activity_date": 1423040757, "creation_date": 1423040413, "last_edit_date": 1423040711, "question_id": 28317260, "link": "https://stackoverflow.com/questions/28317260/will-this-expression-work", "title": "Will this expression work?", "body": "<p>I am completely new to Perl and need some help understanding someone's code.\nPasted below is a snippet of Perl code. Can you help me understand what it means?</p>\n\n<pre><code>my @m1 =keys( %{$key} );\nforeach (@m1){\n    if (m/^(.*)\\/$/) {   \n             $a=$1;\n} }\n</code></pre>\n\n<p>This does not seem to work. Will this actually match the values in m1 with the capture group? Will the variable a contain the match of the capture group?</p>\n\n<p>And what does the keys function actually do?</p>\n"}, {"tags": ["perl", "sockets", "http"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423048054, "post_id": 28316517, "comment_id": 44988164, "body": "Need a bit more detail on what you&#39;re doing. You may find you can pass the filehandle via a <code>Thread::Queue</code> which I much prefer over <code>threads::shared</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 2, "last_activity_date": 1423154605, "last_edit_date": 1423154605, "creation_date": 1423153786, "answer_id": 28349126, "question_id": 28316517, "link": "https://stackoverflow.com/questions/28316517/how-to-share-a-filehandle-between-threads-in-perl/28349126#28349126", "title": "How to share a filehandle between threads in Perl?", "body": "<p>File <em>descriptors</em> are global to the process and you can dereference a filehandle to its descriptor using <code>fileno</code>. Then it's just a matter of passing that simple scalar value between threads and reopening by number.</p>\n\n<p>In your <code>HTTP::Daemon</code> thread: </p>\n\n<pre><code>my $fileno = fileno $fh; \n</code></pre>\n\n<p>The pass the number to the <code>IO::Select</code> thread by whatever means your program is using (e.g. a shared array). And reopen the handle by number in the <code>IO::Select</code> thread: </p>\n\n<pre><code>open my $fh, \"&amp;=$fileno\";\n</code></pre>\n"}], "owner": {"reputation": 19241, "user_id": 614944, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f92772ec8a16758d669026f736aa7f0f?s=128&d=identicon&r=PG", "display_name": "daisy", "link": "https://stackoverflow.com/users/614944/daisy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1424123026, "creation_date": 1423037579, "last_edit_date": 1424123026, "question_id": 28316517, "link": "https://stackoverflow.com/questions/28316517/how-to-share-a-filehandle-between-threads-in-perl", "title": "How to share a filehandle between threads in Perl?", "body": "<p>I have two threads,</p>\n\n<p>One runs a loop with HTTP::Daemon, and the other runs a IO::Select based socket server.</p>\n\n<p>Now when user connects to the HTTP service it will need to write to the client of the socket server.</p>\n\n<p>However, in Perl I cannot share a filehandle with <code>threads::shared</code>.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1097, "user_id": 3916640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff440cfc7c911ffc3ec96b892f20d4e?s=128&d=identicon&r=PG", "display_name": "rurouni88", "link": "https://stackoverflow.com/users/3916640/rurouni88"}, "is_accepted": false, "score": 0, "last_activity_date": 1423034667, "creation_date": 1423034667, "answer_id": 28315719, "question_id": 28315651, "link": "https://stackoverflow.com/questions/28315651/regex-to-read-the-id/28315719#28315719", "title": "Regex to read the id", "body": "<p>You were almost there:</p>\n\n<pre><code>perl -e '$string = \"(2947:_dRW00T3WEeSkhZ9pqkt5dQ)\"; if ($string =~ /^\\((\\d+:)(.*?)\\)$/) { die $2; }'\n_dRW00T3WEeSkhZ9pqkt5dQ at -e line 1.\n</code></pre>\n\n<p>Change your regular expression condition to:</p>\n\n<pre><code>/^\\((\\d+:)(.*?)\\)$/\n</code></pre>\n\n<p>What that does is match and group the 4 digits and colon into special var $1 and the id you want into special var $2.</p>\n"}, {"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1423036313, "last_edit_date": 1423036313, "creation_date": 1423034725, "answer_id": 28315739, "question_id": 28315651, "link": "https://stackoverflow.com/questions/28315651/regex-to-read-the-id/28315739#28315739", "title": "Regex to read the id", "body": "<p>Try this:</p>\n\n<pre><code>    while(&lt;$fh&gt;) {\n        if ($_ =~ /\\(\\d+:(.+?)\\)/) {\n            push @cs_ids , $1;\n        }\n    }\n</code></pre>\n\n<p>The regexp checks all string which starts with <code>(</code> then one or more digits a double point and than one or more characters ( Which will be stored in <code>$1</code>). THe end of the string is a <code>)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1423047539, "creation_date": 1423047539, "answer_id": 28319633, "question_id": 28315651, "link": "https://stackoverflow.com/questions/28315651/regex-to-read-the-id/28319633#28319633", "title": "Regex to read the id", "body": "<p>If every line of the log file is guaranteed to have an ID string, then you can write just</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n  /:(\\w+)/ and push @cs_ids , $1;\n}\n</code></pre>\n\n<p>The <code>\\w</code> (\"word\") character class matches alphanumeric characters or underscore, and this regex just snags the  first sequence of word characters that follow a colon. It is best to avoid the non-greedy modifier if possible as it is a sloppy specification and can be much slower than a simple multiple character match.</p>\n"}], "owner": {"reputation": 287, "user_id": 3616128, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b4fb2c549d63d985d5616231f73e784?s=128&d=identicon&r=PG&f=1", "display_name": "user3616128", "link": "https://stackoverflow.com/users/3616128/user3616128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1423047539, "creation_date": 1423034423, "question_id": 28315651, "link": "https://stackoverflow.com/questions/28315651/regex-to-read-the-id", "title": "Regex to read the id", "body": "<p>I have the log file with the following content:</p>\n\n<pre><code> (2947:_dRW00T3WEeSkhZ9pqkt5dQ) ---$ ABC XY \"Share\" 16-Sep-2014 03:22 PM\n (2948:_3nFSwz3TEeSkhZ9pqkt5dQ) ---$ ABC XY \"Share\" 16-Sep-2014 03:05 PM\n (2949:_voeYED3AEeSkhZ9pqkt5dQ) ---$ ABC XY \"Initial for Re,oved\" 16-Sep-2014 12:44 PM\n</code></pre>\n\n<p>I want to read the unique id say _dRW00T3WEeSkhZ9pqkt5dQ from each line and store it in a array.\nMy current code is:</p>\n\n<pre><code>while(&lt;$fh&gt;) {\n            if ($_ =~ /\\((.*?)\\)/) {\n                push @cs_ids , $1;\n            }\n        }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 1, "creation_date": 1423003379, "post_id": 28310118, "comment_id": 44971284, "body": "What&#39;s with the <code>&amp;</code>?  And what&#39;s wrong with <code>my ($variable) = Prog;</code>?"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1423003698, "post_id": 28310118, "comment_id": 44971422, "body": "Nothing is &quot;wrong&quot; with that construct, @cHao, but OP clearly doesn&#39;t know about it.  OP probably also is learning from an old tutorial that shows <code>&amp;</code> for function calls."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 3, "creation_date": 1423003923, "post_id": 28310118, "comment_id": 44971511, "body": "@AndyLester: Wow, those tutorials still exist?  <code>&amp;function</code> has been outdated style for at least a decade.  Seems step 1 would be to find a less ancient resource to learn from."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1423003984, "post_id": 28310118, "comment_id": 44971542, "body": "Something somewhere he read said to call subs with ampersand, right?  He didn&#39;t make it up on his own.  So he must be working with an old tutorial or an old book or something."}, {"owner": {"reputation": 257, "user_id": 4214177, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c7009602d16492ab8634dc6ceeecbde9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4214177/alexander"}, "edited": false, "score": 1, "creation_date": 1423004020, "post_id": 28310118, "comment_id": 44971560, "body": "I know that it&#39;s sometimes possible to omit <code>&amp;</code> in function calls. But for me it&#39;s easier to always use <code>&amp;</code> then to remember additional rules when I can omit it and when can&#39;t."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 4, "creation_date": 1423004234, "post_id": 28310118, "comment_id": 44971657, "body": "@Alexander: There are very, very few places where the <code>&amp;</code> sigil is even useful anymore, let alone required.  The only one that comes to mind is calling a code reference, but even then you can say <code>$function-&gt;()</code> IIRC (which is almost always less funky)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 2, "creation_date": 1423005322, "post_id": 28310118, "comment_id": 44972042, "body": "@cHao &quot;Wow, those tutorials still exist?&quot; Unfortunately, yes. Based on the number of questions we get on Stack Overflow with Perl code that looks like it was written in 1994, they aren&#39;t that hard to find either."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1423039850, "post_id": 28310118, "comment_id": 44983146, "body": "@Alexander: <i>Please</i> drop the use of <code>&amp;</code> on subroutine calls, as it will cause you problems. Firstly, it overrides any subroutine prototypes (which isn&#39;t such a problem as you shouldn&#39;t be using prototypes anyway) but when you specify no parameters it also passes the current contents of <code>@_</code> as the parameter list, which can be a game breaker. So in your example, you are <i>actually</i> writing <code>my @intermediate_array = Prog(@_)</code>. You need to use <code>&amp;</code> only when referring to subroutines as first-class data, usually when taking a reference, as in <code>my $subref = \\&amp;Prog</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1423062130, "post_id": 28310118, "comment_id": 44996781, "body": "Re &quot;I know that it&#39;s sometimes possible to omit &amp; in function calls.&quot; It should <i>always</i> be omitted."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1423335559, "post_id": 28310118, "comment_id": 45109844, "body": "@Alexander: If you call a function with arguments like <code>Prog(arg1, arg2)</code> then you never need the <code>&amp;</code>.  If there are no arguments, just use empty parentheses <code>Prog()</code>. You can omit the parentheses if your function definition precedes the function call."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1423062070, "post_id": 28310201, "comment_id": 44996747, "body": "Note that <code>shift</code> in new versions of Perl will (experimentally) accept an array references, so <code>shift Prog()</code> (being short for <code>shift @{ Prog() }</code>) should work for <code>sub Prog { [ 4,5 ] }</code>."}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": true, "score": 13, "last_activity_date": 1423003525, "creation_date": 1423003525, "answer_id": 28310201, "question_id": 28310118, "link": "https://stackoverflow.com/questions/28310118/why-i-cant-do-shift-subroutine-name-in-perl/28310201#28310201", "title": "Why I can&#39;t do &quot;shift subroutine_name()&quot; in Perl?", "body": "<p>The subroutine <code>Prog</code> returns a list of scalars.  The <code>shift</code> function only operates on an array.  Arrays and lists are not the same thing.  Arrays have storage, but lists do not.</p>\n\n<p>If what you want is to get the first element of the list that <code>Prog</code> returns, do this:</p>\n\n<pre><code>sub Prog {\n    return ( 'this', 'that' );\n}\n\nmy $var = (Prog())[0];\nprint \"$var\\n\";\n</code></pre>\n\n<p>I changed the sub invocation to <code>Prog()</code> instead of <code>&amp;Prog</code> because the latter is decidedly old style.</p>\n\n<p>You can also assign the first element to a scalar like others are showing:</p>\n\n<pre><code>my ($var) = Prog();\n</code></pre>\n\n<p>This is roughly the same as:</p>\n\n<pre><code>my ($var, $ignored_var) = Prog();\n</code></pre>\n\n<p>and then ignoring <code>$ignored_var</code>.  If you want to make it clear that you're ignoring the second value without actually giving it a variable, you can do this:</p>\n\n<pre><code>my ($var, undef) = Prog();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 4399474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071244d72e3a6f73f9329753619eeb7c?s=128&d=identicon&r=PG", "display_name": "user52889", "link": "https://stackoverflow.com/users/4399474/user52889"}, "is_accepted": false, "score": 7, "last_activity_date": 1423003549, "creation_date": 1423003549, "answer_id": 28310213, "question_id": 28310118, "link": "https://stackoverflow.com/questions/28310118/why-i-cant-do-shift-subroutine-name-in-perl/28310213#28310213", "title": "Why I can&#39;t do &quot;shift subroutine_name()&quot; in Perl?", "body": "<p><code>Prog</code> is returning a <strong>list</strong>, not an <strong>array</strong>. Operations like <code>shift</code> modify the array and cannot be used on lists. </p>\n\n<p>You can instead do:</p>\n\n<pre><code>my ($variable) = Prog; # $variable is now 1: \n                       # Prog is evaluated in list context \n                       # and the results assigned to the list ($variable)\n</code></pre>\n\n<p>Note that you don't need the <code>&amp;</code>.</p>\n"}], "owner": {"reputation": 257, "user_id": 4214177, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c7009602d16492ab8634dc6ceeecbde9?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4214177/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 28310201, "answer_count": 2, "score": 4, "last_activity_date": 1423040155, "creation_date": 1423003157, "last_edit_date": 1423040155, "question_id": 28310118, "link": "https://stackoverflow.com/questions/28310118/why-i-cant-do-shift-subroutine-name-in-perl", "title": "Why I can&#39;t do &quot;shift subroutine_name()&quot; in Perl?", "body": "<p>Why does this code return an <code>Not an ARRAY reference</code> error?</p>\n\n<pre><code>sub Prog {\n    my $var1 = 1;\n    my $var2 = 2;\n    ($var1, $var2);\n}\n\nmy $variable = shift &amp;Prog;\nprint \"$variable\\n\";\n</code></pre>\n\n<p>If I use an intermediate array, I avoid the error:</p>\n\n<pre><code>my @intermediate_array = &amp;Prog;\nmy $variable = shift @intermediate_array;\nprint \"$variable\\n\";\n</code></pre>\n\n<p>The above code now outputs \"1\".</p>\n"}, {"tags": ["perl", "unix"], "comments": [{"owner": {"reputation": 1089, "user_id": 3681109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d676ca6572e75e842ca0fa3e9e82d1bb?s=128&d=identicon&r=PG&f=1", "display_name": "genisage", "link": "https://stackoverflow.com/users/3681109/genisage"}, "edited": false, "score": 4, "creation_date": 1423003334, "post_id": 28310091, "comment_id": 44971267, "body": "Did you ask a question?"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1423004031, "post_id": 28310091, "comment_id": 44971563, "body": "There&#39;s no need to call <code>system</code> to remove a file.  Use the <code>unlink</code> function in Perl itself.  Also, instead of <code>join(&#39;&#39;,&#39;wc -l &#39;, $file)</code> you can just say <code>&quot;wc -l $file&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1423030410, "post_id": 28310819, "comment_id": 44978911, "body": "Alternatively: <code>my $count = () = &lt;FILE&gt;;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1423040366, "post_id": 28310819, "comment_id": 44983433, "body": "@Zaid: That will unnecessarily read the entire file into memory."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 3, "last_activity_date": 1423073466, "last_edit_date": 1423073466, "creation_date": 1423006351, "answer_id": 28310819, "question_id": 28310091, "link": "https://stackoverflow.com/questions/28310091/remove-files-less-than-n-lines-in-perl/28310819#28310819", "title": "Remove files less than n lines in Perl", "body": "<p>There's no need to use <code>system</code> for this. Perl is perfectly capable of counting lines:</p>\n\n<pre><code>sub count_lines { \n    open my $fh, '&lt;', shift;        \n    while(local $_ = &lt;$fh&gt;) {}  # loop through all lines\n    return $.;\n}\n\nunlink $file if count_lines($file) &lt; 4;\n</code></pre>\n\n<p>I'm assuming your end goal is to have it search through a directory tree removing files with line count less than <em>n</em>. Check out <a href=\"http://search.cpan.org/perldoc/File::Find\" rel=\"nofollow\">File::Find</a> and its nifty code generator <code>find2perl</code> to handle that part for you.</p>\n"}], "owner": {"reputation": 3, "user_id": 4526231, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205789388917881/picture?type=large", "display_name": "Alex Beecham", "link": "https://stackoverflow.com/users/4526231/alex-beecham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423073466, "creation_date": 1423003010, "last_edit_date": 1423042711, "question_id": 28310091, "link": "https://stackoverflow.com/questions/28310091/remove-files-less-than-n-lines-in-perl", "title": "Remove files less than n lines in Perl", "body": "<p>I'm writing a Perl script to remove files that have fewer than a given number of lines. What I have so far is</p>\n\n<pre><code>my $cmd = join('','wc -l ', $file); #prints number of lines to command line\nif (system($cmd) &lt; 4)\n{\n  my $rmcmd = join('','rm ',$file);\n  system($rmcmd);\n}\n</code></pre>\n\n<p>where <code>$file</code> is the name and location of a file. </p>\n"}, {"tags": ["perl", "nested-datalist"], "comments": [{"owner": {"reputation": 718, "user_id": 4479164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rB0L21qdjhE/AAAAAAAAAAI/AAAAAAAAABE/ZUbDxlB5pr8/photo.jpg?sz=128", "display_name": "Mike Satteson", "link": "https://stackoverflow.com/users/4479164/mike-satteson"}, "edited": false, "score": 0, "creation_date": 1423022231, "post_id": 28309381, "comment_id": 44976626, "body": "Are these data in some standard format? Your sample looks rather like JSON. If so check out <a href=\"http://search.cpan.org\" rel=\"nofollow noreferrer\">CPAN</a> and search for a module designed to handle the data. If the format is JSON, perhaps <a href=\"http://search.cpan.org/~makamaka/JSON-2.90/lib/JSON.pm\" rel=\"nofollow noreferrer\">JSON</a> will make your life easier."}, {"owner": {"reputation": 718, "user_id": 4479164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rB0L21qdjhE/AAAAAAAAAAI/AAAAAAAAABE/ZUbDxlB5pr8/photo.jpg?sz=128", "display_name": "Mike Satteson", "link": "https://stackoverflow.com/users/4479164/mike-satteson"}, "edited": false, "score": 0, "creation_date": 1423022660, "post_id": 28309381, "comment_id": 44976703, "body": "Do you have access to the program that created the file? It may document the format and offer some clues as to how it should be read."}, {"owner": {"reputation": 3973, "user_id": 266747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/da5e3914edcd58b1abd64a38a2cff8a5?s=128&d=identicon&r=PG", "display_name": "Barton Chittenden", "link": "https://stackoverflow.com/users/266747/barton-chittenden"}, "edited": false, "score": 1, "creation_date": 1423052901, "post_id": 28309381, "comment_id": 44990768, "body": "If you have access to the program that created the file, and can choose the data format to export, you can choose JSON, XML or YAML, any of which have libraries which will allow data to be imported directly with its structure intact. If the exporting program is written in Perl, it may allow the use of <code>Data::Dumper</code>, which would generate perl code very similar to +Mekk&#39;s second solution below."}], "answers": [{"tags": [], "owner": {"reputation": 1355, "user_id": 48167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87ac1f18c71c8fad6703be6de20c44?s=128&d=identicon&r=PG", "display_name": "Mekk", "link": "https://stackoverflow.com/users/48167/mekk"}, "is_accepted": false, "score": 0, "last_activity_date": 1431494940, "last_edit_date": 1431494940, "creation_date": 1423002762, "answer_id": 28310030, "question_id": 28309381, "link": "https://stackoverflow.com/questions/28309381/best-way-to-handle-complicated-nested-data-using-perl/28310030#28310030", "title": "Best way to handle complicated nested data using Perl", "body": "<p>If this is task you may do repeatably, I would consider writing simple parser for this mini-language. Doesn't seem to be very hard even from scratch, <a href=\"https://metacpan.org/pod/Parse::RecDescent\" rel=\"nofollow\">https://metacpan.org/pod/Parse::RecDescent</a> may be of some use (if not overkill).</p>\n\n<p>If I were in a hurry, had to handle such file once, and this file would be below 100MB, I would .... open a copy of that in emacs and make a few regexp replaces to make it correct perl by itself (or, if the file is very big, wrote short script to make those regexp replacemnets). That's not far, sth like:</p>\n\n<pre><code>city =&gt; {\n    area =&gt; \"50 sq miles\",\n    marriedCouples =&gt; { # this begins one married couple data\n       children =&gt; 2, \n       #...\n       values =&gt; qw(0 0.1 0.331 0.34 0.6 0.9 0.11 0.123 0.14 0.125),\n    },\n</code></pre>\n\n<p>is proper perl, so changes like </p>\n\n<ul>\n<li>swap :(anything);  with => \"(anything)\",</li>\n<li>add , after every }</li>\n<li>make qw out of (\"...\")</li>\n</ul>\n\n<p>will go close...</p>\n"}], "owner": {"reputation": 129, "user_id": 3512999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a1c20f077a28fd99c70be57fb4bec4e?s=128&d=identicon&r=PG&f=1", "display_name": "user3512999", "link": "https://stackoverflow.com/users/3512999/user3512999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431494940, "creation_date": 1423000047, "question_id": 28309381, "link": "https://stackoverflow.com/questions/28309381/best-way-to-handle-complicated-nested-data-using-perl", "title": "Best way to handle complicated nested data using Perl", "body": "<p><br>\n  I am relatively new to programming. I have to process a massive file containing nested data on married couples like below.  I tried to use writing a program in Perl but setting up so many flags to go into each of the nested data beginning { and ending with } does not seem like an efficient way to process this data.  I am seeking your advice on how to best handle data like below in Perl.</p>\n\n<p>Thanks a ton.\nAndy</p>\n\n<p>I have some data that looks like below:<br></p>\n\n<pre><code>city{\n area : 50 sq miles ;\n population : 3000 ;\n healthIndex : 90.5/100 ;\n\n marriedCouples { //this begins one married couple data\n  children : 2 ;\n  chronologicalData() {\n   date: 02-10-1990 ;\n   incomeRising(\"TableVals\") {\n    values(\"0 1 2 3 4 5 6 7 8 9\") ;\n   }\n   incomeFalling(\"TableVals\") {\n    values(\"0 1 2 3 4 5 6 7 8 9\") ;\n   }\n  }\n  child {\n   name: Nathan;\n   chronologicalData() {\n     DOB: 02-13-1994 ;\n\n    incomeRising(\"TableVals\") {\n     values(\"0 2 2 3 4 9 6 7 8 9\") ;\n    }\n    incomeFalling(\"TableVals\") {\n     values(\"0 1 2 1 1 1 6 7 8 9\") ;\n    }\n   }\n   intrinsicVal() {\n    risingVals {\n     values(\"0 0.1 0.33 0.34 0.6 0.9 0.11 0.123 0.14 0.15\") ;\n    }\n    fallingVals {\n     values(\"0.15 0.10 0.09 0.08 0.08 0.078 0.75 0.6 0.5 0.4\") ;\n    }\n   }\n  }\n } // this finishes one married couple data\n\n  child {  //Note that this child is not within the married couple and is a stand-alone child. It is outside of it\n   name: Cody;\n   chronologicalData() {\n     DOB: 02-13-1974 ;\n\n    incomeRising(\"TableVals\") {\n     values(\"0 12 22 33 44 49 56 57 58 59\") ;\n    }\n    incomeFalling(\"TableVals\") {\n     values(\"0 41 32 21 21 19 18 17 16 15\") ;\n    }\n   }\n   intrinsicVal() {\n    risingVals {\n     values(\"0 0.1 0.331 0.34 0.6 0.9 0.11 0.123 0.14 0.125\") ;\n    }\n    fallingVals {\n     values(\"0.55 0.10 0.09 0.08 0.08 0.078 0.75 0.6 0.5 0.4\") ;\n    }\n   }\n  } // End stand alone child\n} // End city data\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 469, "user_id": 1328942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xuXpt.jpg?s=128&g=1", "display_name": "Kescha Skywalker", "link": "https://stackoverflow.com/users/1328942/kescha-skywalker"}, "edited": false, "score": 2, "creation_date": 1423000103, "post_id": 28309174, "comment_id": 44969799, "body": "What is your question? What is the error?"}], "answers": [{"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": true, "score": 0, "last_activity_date": 1423024527, "last_edit_date": 1423024527, "creation_date": 1423017910, "answer_id": 28312666, "question_id": 28309174, "link": "https://stackoverflow.com/questions/28309174/perl-compare-two-file-print-out-differences-on-main-file-only/28312666#28312666", "title": "Perl (compare two file) print out differences on main file only", "body": "<p>I would create a hash table of the items from the second file, then you can iterate over the first file and check if that number exists, and also if the name matches the number.</p>\n\n<p>Given FILE1 looks like this</p>\n\n<pre><code>C2817771111 MARY LEE\nC8328883333 JOSEPH NGO\nC2012122111 PETER LANDRY\nC2123461111 PETER JAMES\nC2531861212 DAMARIS PAUL\nH8329195253 TIMOTHY HUE\n</code></pre>\n\n<p>and FILE2 looks like this</p>\n\n<pre><code>C8328883333  JOSEPH NGO    ADDRESS CITY STATE COUNTRY\nC2012122111 PETER LANDRY ADDRESS CITY STATE  COUNTRY\nC2123461111 PETER JAMES   ADDRESS CITY STATE  COUNTRY\n</code></pre>\n\n<p>and script looks like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $regex = qr/[CH](\\d+) +(\\w+ +\\w+) *.*/;\nmy %hash;\nwhile (&lt;FILE2&gt;) {\n    my ($num, $name) = $_ =~ $regex;\n    $hash{$num} = \"$name\";\n}\n\nwhile (&lt;FILE1&gt;) {\n    my ($num, $name) = $_ =~ $regex;\n    print unless (exists $hash{$num} and $hash{$num} = $name)\n}\n</code></pre>\n\n<p>I get the following output</p>\n\n<pre><code>C2817771111 MARY LEE\nC2531861212 DAMARIS PAUL\nH8329195253 TIMOTHY HUE\n</code></pre>\n\n<p>Get into the habit of always using the <code>strict</code> and <code>warnings</code> pragmas as they will help scope your code correctly and pick up errors.</p>\n\n<p>Also, the current idiom for opening files is to use lexical filehandles, with three arguments, like so...</p>\n\n<pre><code>open my $homephone, '&lt;', 'homephone.txt';\nwhile (&lt;$homephone&gt;) {\n    # do stuff\n}\nclose $homephone\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4314038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e95442372b77eb38a30ea9c992cab4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kume8sit", "link": "https://stackoverflow.com/users/4314038/kume8sit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28312666, "answer_count": 1, "score": 0, "last_activity_date": 1423024527, "creation_date": 1422999166, "question_id": 28309174, "link": "https://stackoverflow.com/questions/28309174/perl-compare-two-file-print-out-differences-on-main-file-only", "title": "Perl (compare two file) print out differences on main file only", "body": "<p>I have a two file that I need to compare and print out difference found on the first key file.  File one is the key file contains customer phone numbers, with file letter signifying the type is C- CELLPHONE or H-HOMEPHONE. The first letter is irrelevant.\n</p>\n\n<pre><code>C2817771111 MARY LEE\nC8328883333 JOSEPH NGO\nC2012122111 PETER LANDRY\nC2123461111 PETER JAMES\nC2531861212 DAMARIS PAUL\nH8329195253 TIMOTHY HUE\n</code></pre>\n\n<p>The second files has more columns but with but the file two columns are identical \n</p>\n\n<pre><code>C8328883333  JOSEPH NGO    ADDRESS CITY STATE COUNTRY\nC2012122111 PETER LANDRY ADDRESS CITY STATE  COUNTRY\nC2123461111 PETER JAMES   ADDRESS CITY STATE  COUNTRY\n\n#! /usr/bin/env perl\nmy %custphonehash = ();\n$cellphone = \"&lt;cellphone.dat\";\nopen (HOMEPHONES,\"&lt;homephone.txt\");\nopen(CELLPHONES,$cellphone);\nopen(DELTA_RECORDS,\"&gt;delta_phones.txt\");\n  while(&lt;CELLPHONES&gt;){\n   chomp($cellphone =  $_);\n   $custouthash{$cellphone} = substr($cellphone,1,10);\n    }\n    while(&lt;HOMEPHONES&gt;) {\n     chomp($line =  $_);\n    $phone_no = ($line,1,10)  \n\n     if ( exists $custphonehash{$phone_no} \n     {\n     print DELTA_RECORDS \"$_\\n\" ;\n\n     }\n\n      }\n   close CELLPHONES;\n   close HOMEPHONES;\n   close DELTA_RECORDS;*\n</code></pre>\n\n<p>Output should be like:</p>\n\n<pre><code>C2531861212 DAMARIS PAUL\nH8329195253 TIMOTHY HUE\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1422998605, "last_edit_date": 1422998605, "creation_date": 1422998210, "answer_id": 28308910, "question_id": 28308758, "link": "https://stackoverflow.com/questions/28308758/selective-printing-of-text-block-only-theres-a-line-match/28308910#28308910", "title": "Selective printing of text block only there&#39;s a line match", "body": "<pre><code>perl -ne 'BEGIN{ $/ =\"VLOG {Priority}$/\" } s/^/$ARGV:/gm; print $1 if /^(VLOG {Updated files}.*?\\.pm.*)/sm'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 1967512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q3JRO.jpg?s=128&g=1", "display_name": "Allen Supynuk", "link": "https://stackoverflow.com/users/1967512/allen-supynuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1423787230, "creation_date": 1423787230, "answer_id": 28490507, "question_id": 28308758, "link": "https://stackoverflow.com/questions/28308758/selective-printing-of-text-block-only-theres-a-line-match/28490507#28490507", "title": "Selective printing of text block only there&#39;s a line match", "body": "<p>First, you need to save the lines you might want to print, and print them at the end:</p>\n\n<pre><code>perl -e 'while(&lt;&gt;){s/^/$ARGV:/; push @save,$_ if m#VLOG {Updated files}# .. m#VLOG {Priority}#;} print @save;'\n</code></pre>\n\n<p>Now you want to look for lines that end in '.pm' and only print if you see one:</p>\n\n<pre><code>perl -e 'while(&lt;&gt;){s/^/$ARGV:/; do {push @save,$_; $sawPM = 1 if /\\.pm/; } if m#VLOG {Updated files}# .. m#VLOG {Priority}#;} print @save if $sawPM;'\n</code></pre>\n"}], "owner": {"reputation": 1083, "user_id": 56543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2tVBM.png?s=128&g=1", "display_name": "Francis", "link": "https://stackoverflow.com/users/56543/francis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1423787230, "creation_date": 1422997692, "question_id": 28308758, "link": "https://stackoverflow.com/questions/28308758/selective-printing-of-text-block-only-theres-a-line-match", "title": "Selective printing of text block only there&#39;s a line match", "body": "<p>I have a one-liner that prints lines in between two lines but I wanted to add another condition to only print the block if there's a line that matches *.pm:</p>\n\n<pre><code>perl -e 'while(&lt;&gt;){s/^/$ARGV:/; print if m#VLOG {Updated files}# .. m#VLOG {Priority}#;}'\n</code></pre>\n\n<p>Sample data:</p>\n\n<pre><code>VLOG {Updated files}\nfiles/skel/usr/local/cp/Modules/vsap/config.pm\nfiles/skel/usr/local/cp/Modules/vsap/files/list.pm\nfiles/skel/usr/local/cp/lib/i386-linux-thread-multi/perllocal.pod\nfiles/skel/usr/local/cp/templates/default/cp/files/dirdialog.xsl\n\nVLOG {Removed files}\n\nVLOG {Priority}\n</code></pre>\n\n<p>Any assistance is highly appreciated. Thanks.</p>\n"}, {"tags": ["perl", "parent-child", "wait"], "comments": [{"owner": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "edited": false, "score": 1, "creation_date": 1423000108, "post_id": 28308721, "comment_id": 44969801, "body": "In windows, the <code>fork</code> call is emulated by perl. Have you tried using <code>exec</code> instead of <code>system</code> to execute your process?  For more information you might want to look at: <a href=\"http://perldoc.perl.org/perlfork.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlfork.html</a>"}, {"owner": {"reputation": 23, "user_id": 3430745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b6a15b469c83d7174380fb3163d41d?s=128&d=identicon&r=PG&f=1", "display_name": "user3430745", "link": "https://stackoverflow.com/users/3430745/user3430745"}, "reply_to_user": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "edited": false, "score": 0, "creation_date": 1423003169, "post_id": 28308721, "comment_id": 44971190, "body": "I tried to use exec in the child process instead, and it looks like the parent process is still waiting for the child process to finish before it outputs the results to the screen. I need it to just go ahead and output. Should using exec help?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3430745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b6a15b469c83d7174380fb3163d41d?s=128&d=identicon&r=PG&f=1", "display_name": "user3430745", "link": "https://stackoverflow.com/users/3430745/user3430745"}, "edited": false, "score": 0, "creation_date": 1423011808, "post_id": 28309475, "comment_id": 44974033, "body": "Thanks for your help, I found another solution"}], "tags": [], "owner": {"reputation": 469, "user_id": 1328942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xuXpt.jpg?s=128&g=1", "display_name": "Kescha Skywalker", "link": "https://stackoverflow.com/users/1328942/kescha-skywalker"}, "is_accepted": false, "score": 1, "last_activity_date": 1423000410, "last_edit_date": 1592644375, "creation_date": 1423000410, "answer_id": 28309475, "question_id": 28308721, "link": "https://stackoverflow.com/questions/28308721/run-a-background-process-in-perl-dont-wait-for-it-to-finish/28309475#28309475", "title": "Run a background process in perl, don&#39;t wait for it to finish", "body": "<p>Use exec (as quicoju suggested) to execute a command in background</p>\n<p>See here for more details: <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/functions/exec.html</a></p>\n<blockquote>\n<p>exec PROGRAM LIST</p>\n<p>The exec function executes a system command and never returns; use system instead of exec if you want it to return. It fails and returns false only if the command does not exist and it is executed directly instead of via your system's command shell (see below).</p>\n</blockquote>\n<p>A very good answer you will find in this thread: <a href=\"https://stackoverflow.com/questions/799968/whats-the-difference-between-perls-backticks-system-and-exec\">What&#39;s the difference between Perl&#39;s backticks, system, and exec?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1355, "user_id": 48167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87ac1f18c71c8fad6703be6de20c44?s=128&d=identicon&r=PG", "display_name": "Mekk", "link": "https://stackoverflow.com/users/48167/mekk"}, "is_accepted": false, "score": 1, "last_activity_date": 1423002105, "creation_date": 1423002105, "answer_id": 28309903, "question_id": 28308721, "link": "https://stackoverflow.com/questions/28308721/run-a-background-process-in-perl-dont-wait-for-it-to-finish/28309903#28309903", "title": "Run a background process in perl, don&#39;t wait for it to finish", "body": "<p>There are various CPAN modules which may make task easier, for example <a href=\"http://search.cpan.org/~bzajac/Proc-Background-1.10/lib/Proc/Background.pm\" rel=\"nofollow\">http://search.cpan.org/~bzajac/Proc-Background-1.10/lib/Proc/Background.pm</a></p>\n\n<p>Having said that, I'd consider introducing some job queue, so your process puts task into the queue and separate process picks it up to handle, more manageable...</p>\n"}], "owner": {"reputation": 23, "user_id": 3430745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b6a15b469c83d7174380fb3163d41d?s=128&d=identicon&r=PG&f=1", "display_name": "user3430745", "link": "https://stackoverflow.com/users/3430745/user3430745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2814, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1423011727, "creation_date": 1422997519, "last_edit_date": 1423011727, "question_id": 28308721, "link": "https://stackoverflow.com/questions/28308721/run-a-background-process-in-perl-dont-wait-for-it-to-finish", "title": "Run a background process in perl, don&#39;t wait for it to finish", "body": "<p>EDIT: found a solution here:\n<a href=\"http://www.webmasterworld.com/forum13/4416.htm\" rel=\"nofollow\">http://www.webmasterworld.com/forum13/4416.htm</a></p>\n\n<p>Apparently it's way easier to do on Linux servers than Windows, google came through.</p>\n\n<pre><code>#Print out whatever you're going to print \nprint \"Stuff in progress. Thanks.\"\n\n# Close the I/O handles \nclose(STDIN); \nclose(STDOUT); \nclose(STDERR); \n# run your other code here\n</code></pre>\n\n<p>I don't work in perl at all so the easiest solution is best for me. I'm just trying to figure out how to modify this program to make it do what I want.</p>\n\n<p>Basically what this program is the broker for a UI. What it does is take a program name, print commands to a SAS program file including which SAS program to run to create output, then runs the SAS program, which then outputs the $pname.out file at the end, which is what is finally printed to the UI screen.</p>\n\n<p>The latest SAS program created can take a long time, so I plan to to run the SAS program in the background as the child and have the SAS send an email when it's done.</p>\n\n<p>In the foreground i.e. parent, I want to have the perl program return a screen with some basic info.</p>\n\n<p>So my question basically is, how do I tell perl to run the child process in the background and not wait for it to be done?</p>\n\n<p>I tried \"&amp;\" on the end of the system (\"$SASROOT $saschild\") command, but it just prevented the program from running at all. If I use the command without \"&amp;\", the program doesn't return anything to the browser screen until the child is done running.</p>\n\n<p>Any help would be appreciated!</p>\n\n<pre><code>#!perl\n\n\nuse CGI ;\n\n\n\n# YOUR MODIFICATIONS START HERE \n\n$TEMPFILES = \"c:\\\\temp\"; # This is the directory SAS will write its temporary files\n$PROGROOT = \"c:\\\\Inetpub\\\\wwwroot\\\\Effectiveness\"; # This is the directory that contains the SAS programs to run\n$DATAROOT = \"c:\\\\Inetpub\\\\wwwroot\\\\Effectiveness\" ; # This is the directory that contains the SAS data sets to be analysed\n\n$SASROOT = \"D:\\\\SAS\\\\SASFoundation\\\\9.2\\\\sas.exe\"; # This is the full path name of the SAS System\n$CGIBIN = \"\\\\\" ; # This is the alias of cgi-bin directory\n\n$HTTPURL =\"http://10.240.7.172\" ;\n\n$WEBROOT = \"c:\\\\Inetpub\\\\wwwroot\\\\Effectiveness\" ; # This is the root directory of webserver\n$SASCFG = \"d:\\\\SAS\\\\SASFoundation\\\\9.2\\\\SASV9.CFG\" ; # This is the path to SAS config file\n\n# YOUR MODIFICATIONS END HERE \n\n&amp;get_request;\n\n$PROGFILE = $rqpairs{'_program'};\n\nif (!($PROGFILE =~ /^(\\w[\\w\\.\\-]+)$/))\n{\n    &amp;error(\"The hidden field &lt;CODE&gt;_program&lt;/CODE&gt; (= \\\"$PROGFILE\\\") is invalid or missing.\");\n}\n\n$SASPROG=\"$PROGROOT\\\\$PROGFILE.sas\";\n\nif (!-f $SASPROG)\n{\n    &amp;error(\"The program file \\\"$SASPROG\\\" does not exist.\");\n}\n\n\n$pname = \"p$$\"; \n$cname = \"c$$\" ;\n$repname = \"r$$\" ;\n\n$random = int(rand(\"$$\")); \n$pname = \"$pname$random\" ;\n$cname = \"$cname$random\" ;\n$repname = \"$repname$random\" ;\n\n\nopen(OUTCON, \"+&gt;&gt;$TEMPFILES\\\\$cname.sas\") ;\n   print OUTCON \"-set outfl \\\"$TEMPFILES\\\\$pname.out\\\" \\n\" ;\n#print OUTCON \"%include \\\"$TEMPFILES\\\\config.tpl\\\" \\n\";\n   print OUTCON \"%include \\\"$SASCFG\\\" \\n\";\nclose(OUTCON) ;\n\n\nopen(OUTFI,\"+&gt;&gt;$TEMPFILES\\\\$pname.sas\");\n\n\nprint OUTFI \"options set=cgibin \\\"$CGIBIN/broker.pl\\\" ; \\n\" ;\nprint OUTFI \"options set=location \\\"$DATAROOT\\\" ; \\n\" ;\nprint OUTFI \"options set=webroot \\\"$WEBROOT\\\" ; \\n\" ;\nprint OUTFI \"options set=outfl \\\"$TEMPFILES\\\\$pname.out\\\" ; \\n\" ;\n\nprint OUTFI \"options set=outrep \\\"$WEBROOT\\\\$repname.xls\\\" ; \\n\" ;\nprint OUTFI \"options set=repline \\\"$HTTPURL\\\\broker.pl?_program=_result\\\" ; \\n\" ;\nprint OUTFI \"options set=excel_file=\\\"$repname.xls\\\" ; \\n\" ;\n\nprint OUTFI \"options mprint ; \\n\" ;\n\n\n\nwhile ( ($name,$value) = each %rqpairs )\n{\n\n $value =~ s/([%()])/%$1/g ;\n\n\n# $value =~ tr/ /\\n/s ;\n# $value =~ tr/,/,\\n/s ;\n\n# $in_string =~ tr/\\+/ /s; # translate and squeeze multiple spaces\n\n\n     if ($name ne \"var\")\n   {\n       print OUTFI \"%let $name = %nrstr($value);\\n\";\n   } \n}\n\n\n\nprint OUTFI \"%include \\\"$SASPROG\\\";\\n\";\nclose(OUTFI) ;\n\n$sasoptions = \" -nodms -sysin $TEMPFILES\\\\$pname.sas -log $TEMPFILES\\\\$pname.log -work $TEMPFILES -sasuser $TEMPFILES\" ;\n\n\n\n\n#THIS IS THE FORKING OF THE PROCESS - only fork for rfcost application\nmy $pid = fork();\nif (defined $pid &amp;&amp; $pid == 0){\n\n    #child\n    close STDIN; #close connections to webpage\n    close STDOUT; #close connections to webpage\n    $saschild = \" -nodms -sysin $TEMPFILES\\\\TestOutput.sas -log $TEMPFILES\\\\TestOutput.log -work $TEMPFILES -sasuser $TEMPFILES\" ;\n\n\n    system (\"$SASROOT $saschild\");\n    exit(0);\n\n}\n\n#   sleep(120);\nsystem (\"$SASROOT $sasoptions\");\n\n\n\n#system (\"$SASROOT -rsasuser -noterminal -sysparm -sysin $TEMPFILES\\\\$pname.sas -log $TEMPFILES\\\\$pname.log -config $TEMPFILES\\\\$cname.sas\");\n\n\n    print \"HTTP/1.0 200 OK\\n\";\n    print \"Content-type: text/html\\n\\n\";\n\n    &amp;html_trailer;\n\n#print \"$sasoptions\" ;\n\n   open (FILE, \"$TEMPFILES\\\\$pname.out\");\n    while (&lt;FILE&gt;){ print; }\n    close (FILE);\n\n    &amp;html_trailer;\n\n#unlink(\"$TEMPFILES/$pname.sas\");\n#unlink(\"$TEMPFILES/$pname.log\");\n#unlink(\"$TEMPFILES/$pname.lst\");\n#unlink(\"$TEMPFILES/$pname.out\");\n#unlink(\"$TEMPFILES/$cname.sas\");\n\nsub get_request \n{\n\n    if ($ENV{'REQUEST_METHOD'} eq \"POST\") {\n        read(STDIN, $request, $ENV{'CONTENT_LENGTH'});\n    } elsif ($ENV{'REQUEST_METHOD'} eq \"GET\" ) {\n        $request = $ENV{'QUERY_STRING'};\n    }\n\n    %rqpairs = ();\n    @rqarray = &amp;url_decode(split(/[&amp;=]/, $request));\n\n    while ( $key = shift(@rqarray) )\n       {\n       $value = shift(@rqarray);\n\n       if ( $rqpairs{$key} ne \"\" )\n          {\n          $rqpairs{$key} .= \",\" . $value;\n          }\n       else\n          {\n          $rqpairs{$key} = $value;\n          }\n       }\n}\n\nsub url_decode \n{\n\n\n    foreach (@_) \n    {\n        tr/+/ /;\n        s/%(..)/pack(\"c\",hex($1))/ge;\n    }\n    @_;\n}\n\nsub html_header \n{\n\n    local($title) = @_;\n\n    print \"HTTP/1.0 200 OK\\n\";\n    print \"Content-type: text/html\\n\\n\";\n    print \"&lt;html&gt;&lt;head&gt;\\n\";\n    print \"&lt;title&gt;$title&lt;/title&gt;\\n\";\n    print \"&lt;/head&gt;\\n&lt;body&gt;\\n\";\n}\n\nsub html_trailer \n{\n\n\n    local($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst)\n        = gmtime;\n\n    local($mname) = (\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\",\n                     \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\")[$mon];\n    local($dname) = (\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\",\n                    \"Sat\")[$wday];\n#    print \"&lt;br&gt;&lt;p&gt;Date: $hour:$min:$sec on $dname $mday $mname $year&lt;/p&gt; \\n\" ;\n    print \"&lt;/body&gt;&lt;/html&gt;\\n\";\n}\n\n\nsub error \n{\n\n    local($msg) = @_;\n    &amp;html_header(\"SAS CGI Process Error\");\n    print \"&lt;H1&gt;SAS CGI Process Error&lt;/H1&gt;\\n$msg\\n\";\n    &amp;html_trailer;\n    exit 1;\n}\n</code></pre>\n"}, {"tags": ["python", "arrays", "perl"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1422996311, "post_id": 28308356, "comment_id": 44967631, "body": "Is &quot;A + A + A + A&quot; legit?  or is it always only one of the numbers?"}, {"owner": {"reputation": 1, "user_id": 4525952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486ca4099de91bb14ddaef34a66510d7?s=128&d=identicon&r=PG&f=1", "display_name": "CephalopodaOctopoda", "link": "https://stackoverflow.com/users/4525952/cephalopodaoctopoda"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1422996770, "post_id": 28308356, "comment_id": 44967880, "body": "That is not legit - each number can only be used once."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4525952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486ca4099de91bb14ddaef34a66510d7?s=128&d=identicon&r=PG&f=1", "display_name": "CephalopodaOctopoda", "link": "https://stackoverflow.com/users/4525952/cephalopodaoctopoda"}, "edited": false, "score": 0, "creation_date": 1422996835, "post_id": 28308475, "comment_id": 44967917, "body": "I have other expressions with brackets that I would manually write into the program. I think there are 11 possible placements of brackets."}, {"owner": {"reputation": 1, "user_id": 4525952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486ca4099de91bb14ddaef34a66510d7?s=128&d=identicon&r=PG&f=1", "display_name": "CephalopodaOctopoda", "link": "https://stackoverflow.com/users/4525952/cephalopodaoctopoda"}, "edited": false, "score": 0, "creation_date": 1422996926, "post_id": 28308475, "comment_id": 44967976, "body": "Thanks for replying. Could you explain your answer a bit more so I know how to use it? Thanks"}, {"owner": {"reputation": 1, "user_id": 4525952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486ca4099de91bb14ddaef34a66510d7?s=128&d=identicon&r=PG&f=1", "display_name": "CephalopodaOctopoda", "link": "https://stackoverflow.com/users/4525952/cephalopodaoctopoda"}, "edited": false, "score": 0, "creation_date": 1422998027, "post_id": 28308475, "comment_id": 44968658, "body": "I really appreciate your help, but I am a beginner, so I don&#39;t understand most of what you sent me (even after thinking about it and googling the stuff I didn&#39;t know). If you have time, would you be able to explain how I would do this simply? I planned to do a nestled for loop where I would have ops[i] = x, ops [j] = y, ops[k] = z, and then have a list of combinations that would be tested. Ex: AxByCzD, (AxB)yCzD, (AxB)y(CzD)"}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": false, "score": 2, "last_activity_date": 1422997527, "last_edit_date": 1422997527, "creation_date": 1422996562, "answer_id": 28308475, "question_id": 28308356, "link": "https://stackoverflow.com/questions/28308356/array-of-arithmetic-operators/28308475#28308475", "title": "Array of Arithmetic Operators", "body": "<p>In Python,</p>\n\n<pre><code>import operator\n\nops = [operator.add, operator.sub, operator.mul, operator.div]\n</code></pre>\n\n<p>Your problem doesn't seem to consider order of operations, ie you will not get <code>(A + B) / (C - D)</code>, or <code>(B / A + D) / C</code>. Is this important?</p>\n\n<p><strong>Edit:</strong></p>\n\n<pre><code>from itertools import product\nfrom operator import add, sub, mul, div\n\ndef make_function(x, y, z):\n    \"\"\"\n    Return a function that implements `(((A x B) y C) z D)`\n      where x,y,z are two-argument operators\n    \"\"\"\n    def fn(a, b, c, d):\n        return z(y(x(a, b), c), d)\n    return fn\n\n# list: all unique operations\nops     = [add, sub, mul, div]\n\n# generator: all combinations of three operators\ncombos  = product(ops, repeat=3)\n\n# list: all functions implementing a three-operator combination\nall_fns = [make_function(*trio) for trio in combos]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1422998061, "creation_date": 1422998061, "answer_id": 28308862, "question_id": 28308356, "link": "https://stackoverflow.com/questions/28308356/array-of-arithmetic-operators/28308862#28308862", "title": "Array of Arithmetic Operators", "body": "<pre><code>use Algorithm::Loops qw( NextPermute );\n\nmy %OPS = (\n   '+' =&gt; sub { $_[0] + $_[1] },\n   '-' =&gt; sub { $_[0] - $_[1] },\n   '*' =&gt; sub { $_[0] * $_[1] },\n   '/' =&gt; sub { $_[0] / $_[1] },\n);\n\nmy @OPS = keys(@OPS);\n\nsub evaluate {\n   my ($vals, $ops) = @_;\n\n   $vals = [ @$vals ];\n\n   my $acc = shift(@$vals);{\n   for my $op (@$ops) {\n      $acc = $OPS{$op}-&gt;($acc, shift(@$vals));\n   }\n\n   return $acc;\n}\n\nmy @vals = ...;\n\nmy @indexes = 0..$#ops;\ndo {\n   my @ops = map $OPS[$_], @indexes;\n   my $rv = evaluate(\\@vals, \\@ops);\n   ...\n} while (NextPermute(@indexes));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4525952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486ca4099de91bb14ddaef34a66510d7?s=128&d=identicon&r=PG&f=1", "display_name": "CephalopodaOctopoda", "link": "https://stackoverflow.com/users/4525952/cephalopodaoctopoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1422998061, "creation_date": 1422996170, "question_id": 28308356, "link": "https://stackoverflow.com/questions/28308356/array-of-arithmetic-operators", "title": "Array of Arithmetic Operators", "body": "<p>I am working on a math problem where I need to test different combinations of numbers and mathematical operations (+,-,*,/). Can I create an array of arithmetic operations in Perl or Python so that I can cycle through these combinations?</p>\n\n<p>Example:\n(underscore indicates some operation, letters are variables for integers)</p>\n\n<p>A_B_C_D</p>\n\n<p>could be</p>\n\n<p>A+B+C+D\nor\nA*B+C-D\nor\nA-B/C+D\netc...</p>\n\n<p>I need to test be able to test integral values in all of these combinations without manually creating each expression (I believe there are 256 possible combinations for the above example).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["forms", "perl", "parameters", "web", "cgi"], "comments": [{"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 0, "creation_date": 1422993872, "post_id": 28307711, "comment_id": 44966284, "body": "Why don&#39;t you want to use a form?"}, {"owner": {"reputation": 43, "user_id": 4385313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f28f55700bf5075aa511f15b3939a52?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/4385313/jonny"}, "reply_to_user": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 0, "creation_date": 1422994007, "post_id": 28307711, "comment_id": 44966363, "body": "Using a form would mean that I would have to press a &#39;submit&#39; button to pass these parameters. To follow the design of the website, I would have to replace navigation buttons with submit buttons."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1422994142, "post_id": 28307711, "comment_id": 44966435, "body": "What&#39;s the problem? What do forms even have to do with requesting a web page?"}, {"owner": {"reputation": 43, "user_id": 4385313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f28f55700bf5075aa511f15b3939a52?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/4385313/jonny"}, "edited": false, "score": 1, "creation_date": 1422994316, "post_id": 28307711, "comment_id": 44966533, "body": "Problem: User logs in, clicks on a link, username forgotten. Getting the web page up isn&#39;t a problem, it&#39;s the web pages remembering the username which is the problem."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 1, "creation_date": 1422994354, "post_id": 28307711, "comment_id": 44966556, "body": "See: <a href=\"http://search.cpan.org/dist/CGI/lib/CGI/Cookie.pm\" rel=\"nofollow noreferrer\">CGI::Cookie</a> or pass parameters in your links. Or, better yet, use a framework like Catalyst which handles all of this for you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1422994466, "post_id": 28307711, "comment_id": 44966625, "body": "Easy: Use a cookie to store the information. Better: Use a cookie to store a session id that allows you to locate the correct information server-side."}, {"owner": {"reputation": 43, "user_id": 4385313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f28f55700bf5075aa511f15b3939a52?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/4385313/jonny"}, "edited": false, "score": 0, "creation_date": 1422994854, "post_id": 28307711, "comment_id": 44966809, "body": "Thanks guys, i&#39;ll give those a go."}], "owner": {"reputation": 43, "user_id": 4385313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f28f55700bf5075aa511f15b3939a52?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny", "link": "https://stackoverflow.com/users/4385313/jonny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1422994532, "answer_count": 0, "score": 0, "last_activity_date": 1422994333, "creation_date": 1422993780, "question_id": 28307711, "link": "https://stackoverflow.com/questions/28307711/how-can-i-pass-a-variable-between-two-perl-cgi-programs-without-a-form", "closed_reason": "Duplicate", "title": "How can I pass a variable between two Perl CGI programs without a form?", "body": "<p>I'm creating a website in Perl containing CGI which has a login side to it. Problem is, is that I am struggling to pass parameters without a form (don't particularly want to use a form to navigate between pages). The parameter I want to pass is the username.</p>\n\n<p>The only solution I can see is to use a form submit button for the navigation bar, and then to make a text field hidden, containing the variable that holds the username. But there must be an alternative method.</p>\n\n<p>Is there any way I can pass this parameter without usage of a form continuously throughout different pages until the user logs off (or quits the website).</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "shell", "loops", "directory"], "comments": [{"owner": {"reputation": 974, "user_id": 1240972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fca3f4f7332c76e581bedd012235dbd7?s=128&d=identicon&r=PG", "display_name": "quid", "link": "https://stackoverflow.com/users/1240972/quid"}, "edited": false, "score": 1, "creation_date": 1422993326, "post_id": 28307533, "comment_id": 44965975, "body": "Why not add the folder traversing to the perl script rather than a separate shell script?  Is each folder&#39;s perl script materially different?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993381, "post_id": 28307533, "comment_id": 44965998, "body": "<b>1</b> Don&#39;t iterate <code>find</code> results like that, see <a href=\"http://stackoverflow.com/a/7039579/418066\">this answer</a>. <b>2</b> <code>cd ..</code> won&#39;t take you back if you previously <code>cd</code>ed deeper than one directory."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1422993385, "post_id": 28307533, "comment_id": 44966003, "body": "<code>find data&#47; -type d -name &#39;2014-0[2-7]-(1[5-9]|20)&#39; -exec C:&#47;Tools&#47;script.pl {} \\;</code> The above command will work I believe (did not test), but it seems more reasonable to build a script that can take an arbitrary start and end point and apply whatever logic you want. Since it seems likely you will have to do this again."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993470, "post_id": 28307533, "comment_id": 44966046, "body": "@Biffen Thanks for the info but do you have any solutions?"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1422993520, "post_id": 28307533, "comment_id": 44966078, "body": "@Hunter I&#39;ll try this.  Will this wait for the perl script to finish over each iteration? And yes I&#39;d like to have it implemented in a script to run again later."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993566, "post_id": 28307533, "comment_id": 44966112, "body": "@johnstamos Your script is eerily similar to <a href=\"http://stackoverflow.com/questions/28285639/jump-into-each-subfolder-and-back-again-with-bash\">this other question</a>, see the accepted answer for solutions."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1422993626, "post_id": 28307533, "comment_id": 44966139, "body": "@HunterMcMillen The difference being that the directory is supplied as an argument, instead of being the working directory."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1422993628, "post_id": 28307533, "comment_id": 44966140, "body": "I believe It will run them in the order they were found, but keep in mind that <code>find</code> holds its results in memory so for very large sets this will not be the best approach"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993640, "post_id": 28307533, "comment_id": 44966144, "body": "@Biffen That has nothing to do with running a perl script with a shell."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993698, "post_id": 28307533, "comment_id": 44966179, "body": "@johnstamos No, but it&#39;s got to do with iterating <code>find</code> results and <code>cd</code>ing into directories and back again."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993807, "post_id": 28307533, "comment_id": 44966244, "body": "@Biffen  I think that is the only part I have working.  I don&#39;t cd in or out more than one directory."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422993984, "post_id": 28307533, "comment_id": 44966350, "body": "@johnstamos You <i>currently</i> don&#39;t <code>cd</code> more than one directory. Just as you&#39;re <i>currently</i> not dealing with paths with spaces. If you want your script to be the least bit future proof you might want to change it. Oh and I just noticed your <code>find</code> command looks wrong, is it even returning what you want it to?"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422994604, "post_id": 28307533, "comment_id": 44966701, "body": "You are correct.  I&#39;ve used it to locate files and just truncated the file part.  How could I get it to return dirs?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422995105, "post_id": 28307533, "comment_id": 44966940, "body": "@johnstamos Hunter gave you a clue in a previous comment: <code>-type d</code> But that&#39;s not the only problem; the syntax is quite messed up. For details see <code>man find</code>."}], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422996694, "post_id": 28308454, "comment_id": 44967839, "body": "Looks good.  It doesn&#39;t look like the range of the directories is included in this though right?  Also my other perl script uses another program for analysis so it can only be used once at a time."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422996817, "post_id": 28308454, "comment_id": 44967903, "body": "No. The way perl does it, is with that subroutine, and you can test either <code>$_</code> or <code>$File::Find::name</code> for matching the pattern you&#39;re seeking. Are you sure your other program can only be used one at a time? Is that some licensing issue?"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422996923, "post_id": 28308454, "comment_id": 44967974, "body": "Yes it uses another program for analysis that goes through and calculates a ton of data.  Can&#39;t run to sets of data at once."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422997056, "post_id": 28308454, "comment_id": 44968063, "body": "<i>shrug</i>. Well, the first example then. But like I say - it&#39;s not particularly common that you have a program that can only run one instance at a time. (Aside from resource constraints).   This will traverse anything under <code>&#47;path&#47;to&#47;dirs</code> that is a directory."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422997074, "post_id": 28308454, "comment_id": 44968072, "body": "if ( -d $File::Find::name ) {          your_script_sub($File::Find::name);     }  I&#39;ll change name to be the 2015-02-15 to 2015-07-20 range?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422997182, "post_id": 28308454, "comment_id": 44968139, "body": "<code>$File::Find::name</code> is variable defined by <code>File::Find</code> and is the full path to the current file. <code>$_</code> is also defined, and is just the current filename. Either you can test for pattern matching/parsing."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1422996494, "creation_date": 1422996494, "answer_id": 28308454, "question_id": 28307533, "link": "https://stackoverflow.com/questions/28307533/shell-script-to-run-perl-script-over-every-directory-in-a-directory/28308454#28308454", "title": "Shell script to run Perl script over every directory in a directory", "body": "<p>Why not do it all in perl? It has perfectly good traversal capability with the <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow\"><code>File::Find</code></a> built in module.</p>\n\n<p>Encapsulate your 'script' as a subroutine. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Find;\n\nsub your_script_sub {\n    my ( $dir ) = @_;\n    #do something with $dir. At a worst case, you could just run your script.\n    #but there's no real reason to do that, as it's perl already. \n}\n\nsub run_script_in_dirs {\n   if ( -d $File::Find::name ) { \n        your_script_sub($File::Find::name);\n    }\n}\n\nfind ( \\&amp;run_script_in_dirs, \"/path/to/your/dir\" );\n</code></pre>\n\n<p>For bonus points - you could use a thread to parallelise your 'run script in directory:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse threads;\nuse Thread::Queue;\n\nmy $num_threads = 4;\nmy $dir_q = Thread::Queue -&gt; new(); \n\nsub your_script_sub {\n   while ( my $dir = $dir_q -&gt; dequeue() ) {\n          # do something in $dir;\n   }\n}\n\nsub find_dirs_to_run_script {\n   if ( -d $File::Find::name ) { \n        $dir_q -&gt; enqueue($File::Find::Name);\n    }\n}\n\nfor ( 1..$num_threads ) {\n   threads -&gt; create ( \\&amp;your_script_sub );\n}\n\nfind ( \\&amp;find_dirs_to_run_script, \"/path/to/dirs\" );\n\n$dir_q -&gt; end();\n\nforeach my $thr ( threads -&gt; list() ) { $thr -&gt; join() }\n</code></pre>\n"}], "owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422996494, "creation_date": 1422993168, "question_id": 28307533, "link": "https://stackoverflow.com/questions/28307533/shell-script-to-run-perl-script-over-every-directory-in-a-directory", "title": "Shell script to run Perl script over every directory in a directory", "body": "<p>The setup:</p>\n\n<p>A data directory that contains directories for every day of the year. ie data/2014-01-01/ to 2014-12-31.  I have a perl script that I run individually inside each date directory.</p>\n\n<p>I am attempting to run a shell script to run from data and go through each directory from 2014-02-15 to 2014-07-20 and run the perl script inside each directory.  The perl script takes about 20 seconds to run.  This is what I have so far, it will only run on February so far, and doesn't wait for the perl script to finish.  I would like it to run on every directory in the range and wait for the perl script inside the loop to finish before relooping.</p>\n\n<pre><code> #!/bin/bash\n\n folders=`find 2014-02*`\n\n for folder in $folders; do \n cd $folder\n perl C:/Tools/script.pl\n cd ..\n done\n</code></pre>\n"}, {"tags": ["perl", "foreach", "scope"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1422989782, "post_id": 28306510, "comment_id": 44964140, "body": "Side note, unrelated to your problem. Since you mentioned that you&#39;re new to Perl and just in case you haven&#39;t already been hit over the head a thousand times about this: you should <i>always</i> put <code>use strict; use warnings;</code> at the top of every Perl script you write. Those two pragmas can save you a lot of painful debugging."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1422996735, "post_id": 28306510, "comment_id": 44967859, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2238576/what-is-the-default-scope-of-foreach-loop-in-perl\">What is the default scope of foreach loop in Perl?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422989641, "post_id": 28306559, "comment_id": 44964049, "body": "Here, I am not using foreach my $i. It that case I can expect it to localize."}, {"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422989668, "post_id": 28306559, "comment_id": 44964069, "body": "But if I don&#39;t  give the declaration at the top which is my $i = 0, it will complain regarding variable being not declared"}, {"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 1, "creation_date": 1422990053, "post_id": 28306559, "comment_id": 44964298, "body": "Your is working example of what is mentioned in link provided by @PrgmError . Thanks."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1422991292, "post_id": 28306559, "comment_id": 44964879, "body": "C-style loops may be less readable, but IMO are clearer when you do want the value to persist.  easy to make off-by-one errors though :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1422991435, "post_id": 28306559, "comment_id": 44964947, "body": "note that the <i>reason</i> it is localized to the loop is that it really is aliasing the variable to each element in the list being iterated over (or emulating that, in the case of <code>..</code>), not setting the existing variable to each value in turn."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1422991760, "post_id": 28306559, "comment_id": 44965107, "body": "@ysth actually $i leaves the for loop incremented by 1 (11 not 10). <code>:&#47;</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1422991881, "post_id": 28306559, "comment_id": 44965173, "body": "unless you <code>last</code> out, yes.  I guess there really isn&#39;t a good way to do what they ask for (loop including 10 but show 10 as the final value).  I think that&#39;s more of a reflection of asking for something you wouldn&#39;t normally want to do than anything else, though."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1422994013, "post_id": 28306559, "comment_id": 44966367, "body": "@ysth yes, it doesn&#39;t look like something you usually want to do. (btw, not quite an idiom <a href=\"https://eval.in/277180\" rel=\"nofollow noreferrer\">eval.in/277180</a>)"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1422994341, "post_id": 28306559, "comment_id": 44966547, "body": "Correct, and I wouldn&#39;t like to maintain such code. <code>:)</code>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 4, "last_activity_date": 1422991118, "last_edit_date": 1422991118, "creation_date": 1422989584, "answer_id": 28306559, "question_id": 28306510, "link": "https://stackoverflow.com/questions/28306510/perl-foreach-loop-variable-scope/28306559#28306559", "title": "Perl foreach loop variable scope", "body": "<p><code>foreach</code> localize variable to the loop.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $adr;\nmy $i = 0;\nforeach $i(5..10){\n    $adr = \\$i;\n    print \"$i ($adr)\\n\";\n}\n$adr = \\$i;\nprint \"Outside loop i = $i ($adr)\\n\";\n</code></pre>\n\n<p>output</p>\n\n<pre><code>5 (SCALAR(0x9d1e1d8))\n6 (SCALAR(0x9d1e1d8))\n7 (SCALAR(0x9d1e1d8))\n8 (SCALAR(0x9d1e1d8))\n9 (SCALAR(0x9d1e1d8))\n10 (SCALAR(0x9d1e1d8))\nOutside loop i = 0 (SCALAR(0x9d343a0))\n</code></pre>\n\n<p>From <a href=\"http://perldoc.perl.org/perlsyn.html\" rel=\"nofollow\">perldoc</a>,</p>\n\n<blockquote>\n  <p>The foreach loop iterates over a normal list value and sets the variable VAR to be each element of the list in turn. If the variable is preceded with the keyword my, then it is lexically scoped, and is therefore visible only within the loop. <strong>Otherwise, the variable is implicitly local to the loop and regains its former value upon exiting the loop.</strong> If the variable was previously declared with my, it uses that variable instead of the global one, <strong>but it's still localized to the loop</strong>. This implicit localization occurs only in a foreach loop.</p>\n</blockquote>\n\n<p>To preserve value of <code>$i</code> you can use <code>C</code> like <code>for</code> loop,</p>\n\n<pre><code>my $i = 0;\nfor ($i = 5; $i &lt;= 10; $i++) { .. }\n</code></pre>\n\n<p>although it's less readable than perl <code>foreach</code></p>\n"}, {"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1422989633, "creation_date": 1422989633, "answer_id": 28306581, "question_id": 28306510, "link": "https://stackoverflow.com/questions/28306510/perl-foreach-loop-variable-scope/28306581#28306581", "title": "Perl foreach loop variable scope", "body": "<p>The variable <code>$i</code> is redefined in foreach scope at</p>\n\n<pre><code>foreach $i(5..10){\n</code></pre>\n\n<p>So the variable outside foreach will not change.</p>\n"}, {"comments": [{"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422989814, "post_id": 28306592, "comment_id": 44964157, "body": "What an explanation. Exactly what I was looking for. So does this means there isn&#39;t a way of preserving foreach loop variable value after loop exits?"}, {"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422989914, "post_id": 28306592, "comment_id": 44964215, "body": "If this is the case, then I will need to use another variable and assign it the loop variable value in each iteration. Isn&#39;t this is inefficient and extra work."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1422989993, "post_id": 28306592, "comment_id": 44964264, "body": "Even if you spell <code>foreach</code> as <code>for</code>, the localization occurs.  It looks like you&#39;ll need a spare variable to get the value of <code>$i</code> in the loop on each iteration."}, {"owner": {"reputation": 113, "user_id": 2853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/481b69a847037e0713b77370ac0e8271?s=128&d=identicon&r=PG&f=1", "display_name": "PrgmError", "link": "https://stackoverflow.com/users/2853127/prgmerror"}, "reply_to_user": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422990120, "post_id": 28306592, "comment_id": 44964327, "body": "@chammu it seems that you need a helper variable in regards to this, I will update my answer accordingly/"}, {"owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422990159, "post_id": 28306592, "comment_id": 44964338, "body": "I got it. But this seems to be an extra work for no reason. Do you know if perl has any specific reason for going this way?"}, {"owner": {"reputation": 113, "user_id": 2853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/481b69a847037e0713b77370ac0e8271?s=128&d=identicon&r=PG&f=1", "display_name": "PrgmError", "link": "https://stackoverflow.com/users/2853127/prgmerror"}, "reply_to_user": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "edited": false, "score": 0, "creation_date": 1422990474, "post_id": 28306592, "comment_id": 44964476, "body": "@chammu updated my answer found a way to use $_, perl&#39;s special variable, to save you a few lines"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 4, "creation_date": 1422990930, "post_id": 28306592, "comment_id": 44964691, "body": "Changing from an explicitly named variable to <code>$_</code> is generally considered a step backwards for maintainability.  Usage of the &quot;C style&quot; <code>for</code> loop or a <code>while</code> loop is probably a better solution to this problem."}, {"owner": {"reputation": 96259, "user_id": 247696, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/936383b387d6cc6d51279e429e5d7cd9?s=128&d=identicon&r=PG", "display_name": "Flimm", "link": "https://stackoverflow.com/users/247696/flimm"}, "edited": false, "score": 0, "creation_date": 1423580928, "post_id": 28306592, "comment_id": 45200051, "body": "You can also do <code>foreach my $i (5..10)</code>"}], "tags": [], "owner": {"reputation": 113, "user_id": 2853127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/481b69a847037e0713b77370ac0e8271?s=128&d=identicon&r=PG&f=1", "display_name": "PrgmError", "link": "https://stackoverflow.com/users/2853127/prgmerror"}, "is_accepted": true, "score": 6, "last_activity_date": 1422990539, "last_edit_date": 1422990539, "creation_date": 1422989673, "answer_id": 28306592, "question_id": 28306510, "link": "https://stackoverflow.com/questions/28306510/perl-foreach-loop-variable-scope/28306592#28306592", "title": "Perl foreach loop variable scope", "body": "<p>According to the perldoc information regarding foreach loops: <a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow\">here</a></p>\n\n<blockquote>\n  <p>The foreach loop iterates over a normal list value and sets the\n  variable VAR to be each element of the list in turn. If the variable\n  is preceded with the keyword my, then it is lexically scoped, and is\n  therefore visible only within the loop. Otherwise, the variable is\n  implicitly local to the loop and regains its former value upon exiting\n  the loop. If the variable was previously declared with my, it uses\n  that variable instead of the global one, but it's still localized to\n  the loop. This implicit localization occurs only in a foreach loop.</p>\n</blockquote>\n\n<p>If you want to retain the value of $i outside the loop then you can omit $i in the foreach loop call and use perl's special variable $_ an example below:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $i = 0;\nforeach (5..10){\n    print $_.\"\\n\";\n    $i = $_;\n}\nprint \"Outside loop i = $i\\n\";\n</code></pre>\n\n<p>5\n6\n7\n8\n9\n10\nOutside loop i = 10</p>\n"}], "owner": {"reputation": 935, "user_id": 1960964, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ea9312241708cc0ffdca3f76a5f0df96?s=128&d=identicon&r=PG", "display_name": "chammu", "link": "https://stackoverflow.com/users/1960964/chammu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3416, "favorite_count": 1, "accepted_answer_id": 28306592, "answer_count": 3, "score": 5, "last_activity_date": 1422991118, "creation_date": 1422989363, "question_id": 28306510, "link": "https://stackoverflow.com/questions/28306510/perl-foreach-loop-variable-scope", "title": "Perl foreach loop variable scope", "body": "<p>I am new to perl and was confused with perl scoping rules after I wrote below code snippet:</p>\n\n<pre><code>#!/usr/bin/perl\nmy $i = 0;\nforeach $i(5..10){\n    print $i.\"\\n\";\n}\nprint \"Outside loop i = $i\\n\";\n</code></pre>\n\n<p>I expected output to be like :</p>\n\n<pre><code>5\n6\n7\n8\n9\n10\nOutside loop i = 10\n</code></pre>\n\n<p>But its giving :</p>\n\n<pre><code>5\n6\n7\n8\n9\n10\nOutside loop i = 0\n</code></pre>\n\n<p>So the variable $i value is not changing after the loop exits. Whats going on in here? </p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 10537, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "edited": false, "score": 0, "creation_date": 1422988646, "post_id": 28305876, "comment_id": 44963501, "body": "Nice; I like providing a BUILD method in the role.  I don&#39;t think this <i>quite</i> solves the whole problem because the sanity check is not exercised until object instantiation, which might not happen (what if a class uses TopSecret but only calls class methods, for example?)  There could be a convention of calling TopSecret-&gt;new in any class using TopSecret, but is there a way to get the role to somehow force that?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 10537, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "edited": false, "score": 0, "creation_date": 1422991510, "post_id": 28305876, "comment_id": 44964993, "body": "I see what you mean. I am not really sure there is a good way to restrict that. #moose on irc.perl.org might have a better idea."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 10537, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "edited": false, "score": 0, "creation_date": 1422991824, "post_id": 28305876, "comment_id": 44965146, "body": "The only thing I can think of would be that you provide a <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/MethodModifiers.pod#Before-and-after-Modifiers\" rel=\"nofollow noreferrer\"><code>before</code></a> method modifier on each of your class methods that checks if the user is authorized."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1422987243, "creation_date": 1422987243, "answer_id": 28305876, "question_id": 28305542, "link": "https://stackoverflow.com/questions/28305542/compile-time-sanity-check-provided-by-role/28305876#28305876", "title": "Compile-time sanity check provided by role", "body": "<p>I think that attribute overriding would be appropriate here. You declare the attribute in your Role and mark it as required, but don't provide a definition. Then the module that consumes the Role can supply the value for that attribute. Note that validation is typically done in the <code>BUILD()</code> subroutine.</p>\n\n<pre><code>package ForAuthorizedUser;\nuse Moose::Role;\n\nuse Carp qw(croak); # so you can see the line it fails on\n\nhas 'authorized_user' =&gt; (\n   is       =&gt; 'ro',\n   required =&gt; 1,\n);\n\nsub BUILD {\n   my ($self) = @_;\n\n   croak \"Only Joe can use this!\" \n      unless $self-&gt;authorized_user eq 'joe';\n}\n\n1;\n</code></pre>\n\n<p>Now in your module that consumes ForAuthorizedUser, you supply the definition for the attribute:</p>\n\n<pre><code>package TopSecret; \nuse Moose;\nwith qw(ForAuthorizedUser);\n\nhas '+authorized_user' =&gt; (\n   default =&gt; 'joe',\n);\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p>In a separate module you do the same thing, but with a different name (mine):</p>\n\n<pre><code>package TopSecret2; \nuse Moose;\nwith qw(ForAuthorizedUser);\n\nhas '+authorized_user' =&gt; (\n   default =&gt; 'hunter',\n);\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p>Then you could test this like so:</p>\n\n<pre><code>use TopSecret; \nuse TopSecret2; \n\nTopSecret-&gt;new; # lives\nTopSecret2-&gt;new # croaks Only Joe can use this! at constructor TopSecret2::new (defined at Test.pm line 35) line 36.\n</code></pre>\n"}], "owner": {"reputation": 10537, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1422987243, "creation_date": 1422986106, "question_id": 28305542, "link": "https://stackoverflow.com/questions/28305542/compile-time-sanity-check-provided-by-role", "title": "Compile-time sanity check provided by role", "body": "<p>I have a module that refuses to load unless a compile-time sanity check is met.  Something like this:</p>\n\n<pre><code>package TopSecret;\nuse Moose;\n\ndie \"Only Joe can use this!\" unless $ENV{USER} eq 'joe';\n\n1;\n</code></pre>\n\n<p>Now I would like to apply a similar sanity check to multiple modules, so my thought is to put it in a role.  The consuming module would provide some information to customize the check a bit.  So it might look something like:</p>\n\n<pre><code>package TopSecret;\nuse Moose;\nwith 'ForAuthorizedUser';\n\nsub authorized_user { 'joe' }\n\n1;\n</code></pre>\n\n<p>The problem is: how can I exercise TopSecret::authorized_user() from within ForAuthorizedUser, at compile time?  Something like 'requires \"authorized_user\"' - except it would have to verify not just that the method exists, but execute it and check the return value.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1422976849, "post_id": 28302279, "comment_id": 44956131, "body": "Run-time injection, or build-time injection?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1422977119, "post_id": 28302279, "comment_id": 44956295, "body": "yes, sounds to me like it&#39;s talking about build-time and mentioning Perl because of its strength as a file/string manipulation tool"}, {"owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1422977937, "post_id": 28302279, "comment_id": 44956866, "body": "@ysth - I&#39;m having trouble understanding what you mean.  My Perl skills are extremely limited.  Can you post an answer with a relevant example?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422978989, "post_id": 28302279, "comment_id": 44957671, "body": "I&#39;d be thinking things like <code>HTML::Template</code> and similar."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 1, "creation_date": 1422980057, "post_id": 28302279, "comment_id": 44958497, "body": "More like Text::Template or Template::Toolkit if you&#39;re using Perl as a pre-processor."}], "answers": [{"comments": [{"owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "edited": false, "score": 1, "creation_date": 1422981527, "post_id": 28303951, "comment_id": 44959366, "body": "The requirement is <code>What if you had to sprinkle certain statements liberally throughout the code? </code>...this is a pure decoupling problem no?  Code generation addresses DRY problems.  So I don&#39;t understand how this answers the question.  Am I missing something?"}, {"owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "edited": false, "score": 2, "creation_date": 1422982300, "post_id": 28303951, "comment_id": 44959839, "body": "After more thought perhaps the author is offering two ways to solve the problem:  AOP (in a put the code somewhere else strategy) or Perl in a token replacement strategy.  This way the answer of string replacement makes sense.  If I need to update my code I simply update the value I&#39;m inserting for the token (a DRY strategy)."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "edited": false, "score": 0, "creation_date": 1422982914, "post_id": 28303951, "comment_id": 44960226, "body": "Exactly. The author is referring to string replacement when he mentions Perl because it&#39;s synonymous with text processing."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 2, "last_activity_date": 1422981071, "creation_date": 1422981071, "answer_id": 28303951, "question_id": 28302279, "link": "https://stackoverflow.com/questions/28302279/how-is-perl-useful-as-a-metadata-tool/28303951#28303951", "title": "How is Perl useful as a metadata tool?", "body": "<p>Skip ahead to the section on Code Generators. The author provides a number of examples of processing input files to generate code, including this one: </p>\n\n<blockquote>\n  <p>Another example of melding environments using code generators happens when different programming languages are used in the same application. In order to communicate, each code base will need some information in commondata structures, message formats, and field names, for example. Rather than duplicate this information, use a code generator. Sometimes you can parse the information out of the source files of one language and use it to generate code in a second language. Often, though, it is simpler to express it in a simpler, language-neutral representation and generate the code for both languages, as shown in Figure 3.4 on the following page. Also see the answer to Exercise 13 on page 286 for an example of how to separate the parsing of the flat file representation from code generation.</p>\n</blockquote>\n\n<p>The answer to Exercise 13 is a set of Perl programs used to generate C and Pascal data structures from a common input file.</p>\n"}], "owner": {"reputation": 39030, "user_id": 87796, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b2028885d939a335af8333da70d06310?s=128&d=identicon&r=PG", "display_name": "P.Brian.Mackey", "link": "https://stackoverflow.com/users/87796/p-brian-mackey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 28303951, "answer_count": 1, "score": 2, "last_activity_date": 1422981071, "creation_date": 1422976378, "question_id": 28302279, "link": "https://stackoverflow.com/questions/28302279/how-is-perl-useful-as-a-metadata-tool", "title": "How is Perl useful as a metadata tool?", "body": "<p>In <a href=\"http://www.perlmonks.org/?node_id=983669\" rel=\"nofollow\">The Pragmatic Programmer</a>:</p>\n\n<blockquote>\n  <p>Normally, you can simply hide a third-party product behind a\n  well-defined, abstract interface. In fact , we've always been able to\n  do so on any project we've worked on. But suppose you couldn't isolate\n  it that cleanly. What if you had to sprinkle certain statements\n  liberally throughout the code? Put that requirement in metadata, and\n  use some automatic mechanism, such as Aspects (see page 39 ) or Perl,\n  to insert the necessary statements into the code itself.</p>\n</blockquote>\n\n<p>Here the author is referring to <a href=\"http://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow\">Aspect Oriented Programming</a> and Perl as tools that support \"automatic mechanisms\" for inserting metadata.  </p>\n\n<p>In my mind I envision some type of run-time injection of code.  How does Perl allow for \"automatic mechanisms\" for inserting metadata?  </p>\n"}, {"tags": ["mysql", "perl", "benchmarking", "dbi"], "comments": [{"owner": {"reputation": 751, "user_id": 4433555, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8jspF.png?s=128&g=1", "display_name": "etalon11", "link": "https://stackoverflow.com/users/4433555/etalon11"}, "edited": false, "score": 0, "creation_date": 1422965976, "post_id": 28298662, "comment_id": 44949241, "body": "A little bit offtopic: You know &quot;LOAD DATA INFILE&quot;? Would these be an alternative for you? (<a href=\"http://dev.mysql.com/doc/refman/5.0/en/load-data.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.0/en/load-data.html</a>)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422966013, "post_id": 28298662, "comment_id": 44949269, "body": "If you really want to speed up your inserts, either batch them or use <a href=\"http://dev.mysql.com/doc/refman/5.7/en/load-data.html\" rel=\"nofollow noreferrer\"><code>LOAD DATA INFILE</code></a>. Either of these will make a <i>much</i> bigger difference than <code>my</code> vs. <code>state</code>."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 751, "user_id": 4433555, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8jspF.png?s=128&g=1", "display_name": "etalon11", "link": "https://stackoverflow.com/users/4433555/etalon11"}, "edited": false, "score": 0, "creation_date": 1422966199, "post_id": 28298662, "comment_id": 44949378, "body": "@etalon11: i am aware of database level massinsertion tools, but this is not real alternative in my case, I must mungle data and insert it after that based some migration rules"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422966275, "post_id": 28298662, "comment_id": 44949427, "body": "@ThisSuitIsBlackNot: yes, those tools are magnitudes faster but does not suit in my flow for now"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 6, "creation_date": 1422966766, "post_id": 28298662, "comment_id": 44949710, "body": "This is an unfair test of <code>state</code>, because the speed advantage that it offers is swamped by the associated database operation, especially as you have the <code>DROP</code>/<code>CREATE</code> as part of your benchmark timing. Every <code>INSERT</code> will result in several disk write operations which take many thousands of CPU cycles to execute. This can be mitigated to some extent by starting a transaction, especially so if you can ask MySQL to log that transaction in memory instead of on disk. (That&#39;s possible with SQLite, but I don&#39;t know MySQL as well.)"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422967289, "post_id": 28298662, "comment_id": 44950026, "body": "@Borodin: AFAIU, you say that culprits are a) database ops and b) too few inserts ? That&#39;s why state and my does not different a much? Am I correct?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422967530, "post_id": 28298662, "comment_id": 44950143, "body": "Yes to <b>a</b>, but <b>b</b> is more like <i>too many disk operations</i>. At present you are committing the <code>INSERT</code> each time. It is more efficient to accumulate a list of changes for the DB engine to perform and then do them all at once. The bottom line is that benchmarking CPU performance by timing a code segment that includes disk operations is bound to fail."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422967598, "post_id": 28298662, "comment_id": 44950169, "body": "@Borodin: I included prepareTable to benchmarking to be sure that every benchmarking iteration has same starting point. And when every test had it, I thought it makes them even. Now I run tests without prepareTable ( only initialized before benchmarking ), results are 91/92/91 sec"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422967665, "post_id": 28298662, "comment_id": 44950206, "body": "@Borodin: for <i>b</i> there should be auto_commit set to zero and then committing after n iterations?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422967967, "post_id": 28298662, "comment_id": 44950393, "body": "@w.k: That sounds right. As I said, I&#39;m not so familiar with MySQL"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422968091, "post_id": 28298662, "comment_id": 44950457, "body": "If you really want to see the advantage that <code>state</code> gives you, you should remove the <code>execute</code> call from the subroutines. It&#39;s really only saving the time to execute <code>prepare</code> more than once."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422968196, "post_id": 28298662, "comment_id": 44950532, "body": "By the way, the line <code>&#39;callMy&#39;    =&gt; sub { callFor( ) ; } , </code> should be <code>&#39;callMy&#39;    =&gt; sub { callMy( ) ; } , </code>. But it would be cleaner to avoid the extra level of subroutine call by writing <code>callFor =&gt; \\&amp;callFor,</code> etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422972449, "post_id": 28298662, "comment_id": 44953104, "body": "Voting to close: typo."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1422977279, "post_id": 28298662, "comment_id": 44956402, "body": "@w.k Neither of those options requires a separate tool. To do batch/compound inserts, simply combine multiple values in one statement: <code>INSERT INTO table VALUES (foo, bar), (apple, orange), (pony, unicorn)</code>. If you crank <a href=\"http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_packet\" rel=\"nofollow noreferrer\"><code>max_allowed_packet</code></a> all the way up, you can send queries of up to 1GB at a time, all from your Perl script. <code>LOAD DATA INFILE</code> would be even faster for mass updates; munge your data, write it to a CSV file, and then call <code>LOAD DATA INFILE</code>, again all from within your Perl script."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1422968380, "post_id": 28299423, "comment_id": 44950649, "body": "Quite so. I see you&#39;re not a vegetarian programmer."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1422972137, "post_id": 28299423, "comment_id": 44952921, "body": "My benchmark did not confirm your hypothesis. Do you have any ideas, why? For start, I left commiting out on sake of simplicity, but after adding it to flow I am surprised it had no (good) influence."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1422973349, "post_id": 28299423, "comment_id": 44953641, "body": "An alternative way to do this is to queue your inserts to a file, then load the file to the DB once you reach a certain batch size (we default to 5000 rows at work). This method has been really clean, efficient methodology for us because we can use a simple Perl module to hide that ugliness and just use a <code>push_row() # queue a row to the file</code> and <code>upload() # upload the file to the DB and reset the batch object</code>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1422973731, "post_id": 28299423, "comment_id": 44953910, "body": "In a program if mine I switched from autocommit to doing a commit every 1000 inserts and the program was 1000x as fast. But that was against SQLite not MySQL."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1422977382, "post_id": 28299423, "comment_id": 44956472, "body": "@reinierpost: as you may see in results I present in my answer, autocommit does not have any (good) effect while usin MyISAM tables. Itried also InnoDB tables and here it gives big boost, so it becames almost so fast as with MyISAM."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 1, "creation_date": 1422977708, "post_id": 28299423, "comment_id": 44956707, "body": "@w.k &quot;autocommit does not have any (good) effect while usin MyISAM tables&quot; That&#39;s because MyISAM doesn&#39;t support transactions, so even with <code>autocommit</code> disabled, every statement is committed automatically."}], "tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 10, "last_activity_date": 1422997125, "last_edit_date": 1422997125, "creation_date": 1422967956, "answer_id": 28299423, "question_id": 28298662, "link": "https://stackoverflow.com/questions/28298662/why-state-is-not-faster-than-my-while-inserting-data-to-database/28299423#28299423", "title": "Why `state` is not faster than `my` while inserting data to database?", "body": "<p>You're chasing grasshoppers for protein in a field where there's a cow grazing.</p>\n\n<p>When doing bulk inserts or updates to a database, <code>autocommit</code> is <em>not</em> your friend if you want speed.  Do a single <code>commit</code> when you're done, or throw one in every 1000 records or so.</p>\n\n<p>In the end, saving a few CPU cycles each iteration will mean nothing if you're also waiting around for the Disk I/O of your changes and Index Updates to complete.</p>\n"}, {"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1422971197, "creation_date": 1422971197, "answer_id": 28300492, "question_id": 28298662, "link": "https://stackoverflow.com/questions/28298662/why-state-is-not-faster-than-my-while-inserting-data-to-database/28300492#28300492", "title": "Why `state` is not faster than `my` while inserting data to database?", "body": "<p>Thanks to @Borodin I may announce: <code>state</code> still wins over <code>my</code>, as should and expected. </p>\n\n<p>I had typo in my code <code>timethese()</code> should have a correct line <code>'callMy'    =&gt; sub { callMy( ) ; }</code> and no questions to ask.</p>\n\n<p>After fixing that and removing database ops, I got much colourful results:</p>\n\n<pre><code>Benchmark: timing 1000 iterations of callFor, callMy, callState...\n   callFor: 85 wallclock secs (15.60 usr + 13.38 sys = 28.98 CPU) @ 34.51/s (n=1000)\n    callMy: 162 wallclock secs (64.36 usr + 21.17 sys = 85.53 CPU) @ 11.69/s (n=1000)\n callState: 86 wallclock secs (15.83 usr + 13.55 sys = 29.38 CPU) @ 34.04/s (n=1000)\n</code></pre>\n\n<p>Then I set <code>$dbh-&gt;{AutoCommit} = 0;</code> and used <code>$dbh-&gt;commit();</code> after iteration:</p>\n\n<pre><code>Benchmark: timing 1000 iterations of callFor, callMy, callState...\n   callFor: 87 wallclock secs (16.57 usr + 14.50 sys = 31.07 CPU) @ 32.19/s (n=1000)\n    callMy: 166 wallclock secs (66.39 usr + 21.92 sys = 88.31 CPU) @ 11.32/s (n=1000)\n callState: 87 wallclock secs (16.50 usr + 14.21 sys = 30.71 CPU) @ 32.56/s (n=1000)\n</code></pre>\n\n<p>Seems to me, <code>autocommit</code> does not have good influence here.</p>\n\n<p>Leaving my answer here for future reference.</p>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1422997293, "last_edit_date": 1422997293, "creation_date": 1422995894, "answer_id": 28308272, "question_id": 28298662, "link": "https://stackoverflow.com/questions/28298662/why-state-is-not-faster-than-my-while-inserting-data-to-database/28308272#28308272", "title": "Why `state` is not faster than `my` while inserting data to database?", "body": "<p>If you want to test state vs my, all you really want to benchmark is the cost of a prepare.  I threw in <code>prepare_cached</code> since it does the same thing.</p>\n\n<pre><code>use strict; use warnings; use 5.010;\nuse DBI;\nuse Benchmark qw{:all} ;  \n\nmy $dbh = DBI-&gt;connect('DBI:mysql:database=test', '', '',\n                       {RaiseError =&gt; 1, AutoCommit =&gt; 0}\n                      );\n\nsub prepareTable {\n    my $dropTable   = q|DROP TABLE IF EXISTS test.table|;\n    $dbh-&gt;do( $dropTable );\n\n    my $createTable = q{\n    CREATE TABLE test.table (\n      `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n      `value` varchar(60),\n      PRIMARY KEY (`id`)\n    )\n    };\n    $dbh-&gt;do( $createTable );\n}\n\nprepareTable;\nmy $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;\ncmpthese( -3, {\n    'my'                =&gt; sub { my $sth = $dbh-&gt;prepare($sql); return; },  \n    'state'             =&gt; sub { state $sth = $dbh-&gt;prepare($sql); return; },\n    'prepare_cached'    =&gt; sub { my $sth = $dbh-&gt;prepare_cached($sql); return; },\n});\n__END__\n                     Rate             my prepare_cached          state\nmy                67966/s             --           -73%           -99%\nprepare_cached   253414/s           273%             --           -98%\nstate          11267589/s         16478%          4346%             --\n</code></pre>\n\n<p>This just tells you that not running code is faster than running code.  If you want to find out how much this will impact an actual application, you're on the right path, but you've gummed up your benchmark.  <a href=\"https://gist.github.com/schwern/53fec2012e1c9f37f364\" rel=\"nofollow\">Here is my improved benchmark</a>.  This makes it more like how code would be run in production (AutoCommit off, RaiseError on), eliminates the table scaffolding, and uses the <a href=\"https://stackoverflow.com/questions/20148/myisam-versus-innodb\">generally superior InnoDB</a>.  Importantly, it removes a lot of extra code and subroutines that will just gum up the benchmark.</p>\n\n<p>The result is, unsurprisingly, that the cost of doing 1000 INSERTs swamps the cost of preparing the INSERT.  The INSERT dominates so much, and its runtime is so unreliable, that it's hard to get a consistent benchmark result out of this.</p>\n\n<p>What if you do less executes per prepare?  The prepare should begin to have a larger effect, and that's just what we see.</p>\n\n<pre><code>$EXECUTES_PER_PREPARE = 1;\n                  Rate             my prepare_cached          state\nmy             24722/s             --           -36%           -56%\nprepare_cached 38610/s            56%             --           -31%\nstate          56180/s           127%            46%             --\n\n$EXECUTES_PER_PREPARE = 2;\n                  Rate             my prepare_cached          state\nmy             15949/s             --           -22%           -41%\nprepare_cached 20325/s            27%             --           -25%\nstate          27027/s            69%            33%             --\n\n$EXECUTES_PER_PREPARE = 10;\n                 Rate             my prepare_cached          state\nmy             4405/s             --           -17%           -22%\nprepare_cached 5305/s            20%             --            -6%\nstate          5618/s            28%             6%             --\n\n$EXECUTES_PER_PREPARE = 100;\n                Rate             my prepare_cached          state\nmy             546/s             --            -0%            -1%\nprepare_cached 546/s             0%             --            -1%\nstate          552/s             1%             1%             --\n</code></pre>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 28308272, "answer_count": 3, "score": 1, "last_activity_date": 1422997293, "creation_date": 1422965656, "question_id": 28298662, "link": "https://stackoverflow.com/questions/28298662/why-state-is-not-faster-than-my-while-inserting-data-to-database", "title": "Why `state` is not faster than `my` while inserting data to database?", "body": "<p>Being in the middle of converting databases I tried to use best/fastest inserts. AFAIK, idiomatic mass-insert should prepare the statement handler and after that iterate over data to insert it. Something like that: </p>\n\n<pre><code>my $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;  \nmy $sth = $dbh-&gt;prepare( $sql );  \nfor my $val ( 1 .. 1000000 ) {\n  $sth-&gt;execute( $val );\n}\n</code></pre>\n\n<p>I thought that with the help of the <code>state</code>-declarator I can refactor this routine into function, something like this:</p>\n\n<pre><code>sub sql_state {  \n  my ( $val ) = @_;\n  state $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;  \n  state $sth = $dbh-&gt;prepare( $sql );  \n  $sth-&gt;execute( $val ) \n    or die \"State\";  \n}  \n</code></pre>\n\n<p>So now the <code>$sql</code> is initialised once during all inserts and also <code>$sth</code> is prepared once, which is the base of enhancement.</p>\n\n<p>During the migrating my database I felt like this improvement did not give me such win as I was hoping. Then I found an article \n<a href=\"http://varlogrant.blogspot.co.uk/2013/08/enemy-of-state.html\" rel=\"nofollow\">Enemy of the State</a>, which rises pretty same question as I asked from my self: why <code>state</code> does not give any improvement over <code>my</code>?</p>\n\n<p>In commentaries rjbs guesses, that differences would be significant when used <code>state</code> and <code>my</code> when initializing statement handlers. I did some benchmarking and reach still pretty same conclusion as author of the article: even when in some situations I got <code>state</code> a little bit (0.5%) faster, in most cases <code>my</code> was at same speed or even faster (up to 9%).</p>\n\n<p>First, I tried with innodb tables, as I needed at my own task:</p>\n\n<pre><code>Benchmark: timing 100 iterations of callFor, callMy, callState...\n   callFor: 922 wallclock secs ( 7.31 usr +  3.78 sys = 11.09 CPU) @  9.02/s (n=100)\n    callMy: 927 wallclock secs ( 6.09 usr +  4.46 sys = 10.55 CPU) @  9.48/s (n=100)\n callState: 922 wallclock secs ( 6.72 usr +  4.62 sys = 11.34 CPU) @  8.82/s (n=100)\n</code></pre>\n\n<p>Those were too slow for wider iterations, so I made some with myisam tables too (1000x1000 = million inserts):</p>\n\n<pre><code>Benchmark: timing 1000 iterations of callfor, callmy, callstate...\n   callfor: 96 wallclock secs (15.19 usr + 15.50 sys = 30.69 CPU) @ 32.58/s (n=1000)\n    callmy: 95 wallclock secs (15.18 usr + 14.90 sys = 30.08 CPU) @ 33.24/s (n=1000)\n callstate: 104 wallclock secs (18.86 usr + 16.15 sys = 35.01 CPU) @ 28.56/s (n=1000)\n</code></pre>\n\n<p>Another run:</p>\n\n<pre><code>Benchmark: timing 1000 iterations of callfor, callmy, callstate...\n   callfor: 94 wallclock secs (14.90 usr + 14.47 sys = 29.37 CPU) @ 34.05/s (n=1000)\n    callmy: 92 wallclock secs (14.77 usr + 14.09 sys = 28.86 CPU) @ 34.65/s (n=1000)\n callstate: 99 wallclock secs (17.66 usr + 15.30 sys = 32.96 CPU) @ 30.34/s (n=1000)\n</code></pre>\n\n<p>Here is my actual code for testing:</p>\n\n<pre><code>use strict; use warnings; use 5.010;\nuse ...; # something to get $dbh ...\nuse Benchmark qw{:all} ;  \n\n\nsub prepareTable {\n  my $dropTable   = q|DROP TABLE IF EXISTS test.table|;\n  $dbh-&gt;do( $dropTable )\n    || die \"droptable\";\n\n  my $createTable = q|\n    CREATE TABLE test.table (\n      `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n      `value` varchar(60),\n      PRIMARY KEY (`id`)\n    ) ENGINE=MYISAM\n  |;\n  $dbh-&gt;do( $createTable )\n    || die \"createtable\";  \n}\n\n\nsub callFor {\n  prepareTable();\n\n  my $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;  \n  my $sth = $dbh-&gt;prepare( $sql );  \n\n  for my $val ( 1 .. 1000 ) {\n    sql_for( $sth, $val );\n  }\n}\n\nsub callMy {\n  prepareTable();\n\n  for my $val ( 1 .. 1000 ) {\n    sql_my( $val );\n  }\n}\n\nsub callState {\n  prepareTable();\n\n  for my $val ( 1 .. 1000 ) {\n    sql_state( $val );\n  }\n}\n\nsub sql_for {  \n  my ( $sth, $val ) = @_;\n  $sth-&gt;execute( $val ) \n    or die \"For\";\n}  \n\nsub sql_my {  \n  my ( $val ) = @_;\n  my $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;  \n  my $sth = $dbh-&gt;prepare( $sql );  \n  $sth-&gt;execute( $val ) \n    or die \"My\";\n}  \n\nsub sql_state {  \n  my ( $val ) = @_;\n  state $sql = q|INSERT INTO test.table ( value ) VALUES ( ? ) |;  \n  state $sth = $dbh-&gt;prepare( $sql );  \n  $sth-&gt;execute( $val ) \n    or die \"State\";  \n}  \n\n\ntimethese(  \n  1000 , {  \n    'callFor'   =&gt; sub { callFor( ) ; } ,  \n    'callMy'    =&gt; sub { callFor( ) ; } ,  \n    'callState' =&gt; sub { callState( ) ; } ,  \n  }\n);  \n</code></pre>\n\n<p>So, why <code>state</code> does not win here over <code>my</code>? It should easily. Or?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1422958827, "post_id": 28296411, "comment_id": 44945189, "body": "This is no valid perl code. It looks like a mixture from shell and perl code."}, {"owner": {"reputation": 1137, "user_id": 3831651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5979f6fa9c8e9f38d1a244e65ae217?s=128&d=identicon&r=PG", "display_name": "Rohith K", "link": "https://stackoverflow.com/users/3831651/rohith-k"}, "edited": false, "score": 0, "creation_date": 1422958934, "post_id": 28296411, "comment_id": 44945257, "body": "can&#39;t we use pipeline for this? mkdir -p &#39;/opt/test&#39; | touch &#39;/opt/test/test.txt&#39; ?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 1137, "user_id": 3831651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5979f6fa9c8e9f38d1a244e65ae217?s=128&d=identicon&r=PG", "display_name": "Rohith K", "link": "https://stackoverflow.com/users/3831651/rohith-k"}, "edited": false, "score": 0, "creation_date": 1422959331, "post_id": 28296411, "comment_id": 44945484, "body": "@Jango <code>touch</code> does not read anything from its standard input and <code>mkdir</code> doesn&#39;t print anything to standard out.  So no, that&#39;s just an obscure way of saying <code>mkdir -p &#47;opt&#47;test; touch &#47;opt&#47;test&#47;test.txt</code>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1422959409, "post_id": 28296411, "comment_id": 44945533, "body": "There is no guarantee of atomicity even within <code>mkdir -p</code> but if you are hellbent on doing it in one shell command, <code>mkdir -p &#47;opt&#47;test&#47;test.txt</code> will create a directory in one go.  If you need a file, that won&#39;t help, of course."}], "answers": [{"tags": [], "owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "is_accepted": false, "score": 11, "last_activity_date": 1422959326, "creation_date": 1422959326, "answer_id": 28296626, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/28296626#28296626", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>In a shell script, you can simply do:</p>\n\n<pre><code>mkdir -p /opt/test &amp;&amp; touch /opt/test/test.txt\n</code></pre>\n\n<p><code>mkdir -p</code> will not fail (and won't do anything) if the directory already exists.</p>\n\n<p>In perl, use <code>make_path</code> from the <a href=\"http://perldoc.perl.org/File/Path.html\" rel=\"noreferrer\"><code>File::Path</code></a> module, then create the file however you want. <code>make_path</code> also doesn't do anything if the directory exists already, so no need to check yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 10, "last_activity_date": 1422961119, "creation_date": 1422961119, "answer_id": 28297210, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/28297210#28297210", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>In perl, using one of my favorite module: <a href=\"https://metacpan.org/pod/Path::Tiny#touchpath\">Path::Tiny</a>.</p>\n\n<pre><code>path(\"/opt/test/test.txt\")-&gt;touchpath;\n</code></pre>\n\n<p>From the doc:</p>\n\n<blockquote>\n  <p>Combines mkpath and touch. Creates the parent directory if it doesn't\n  exist, before touching the file.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 4, "last_activity_date": 1422963465, "last_edit_date": 1422963465, "creation_date": 1422962835, "answer_id": 28297785, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/28297785#28297785", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>Perl from command line,</p>\n\n<pre><code>perl -MFile::Basename -MFile::Path=make_path -e'\n  make_path(dirname($_)), open(F, \"&gt;&gt;\", $_) for pop;\n' /opt/test/test.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1422979199, "post_id": 28302789, "comment_id": 44957862, "body": "IMHO, would be nicer call it with one argument (<code>mkfile &#47;path&#47;to&#47;filename</code>). The script (or function) could call <code>dirname</code> internally..."}], "tags": [], "owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "is_accepted": false, "score": 11, "last_activity_date": 1422980170, "last_edit_date": 1422980170, "creation_date": 1422977741, "answer_id": 28302789, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/28302789#28302789", "title": "How to touch a file and mkdir if needed in one line", "body": "<pre><code>mkdir B &amp;&amp; touch B/myfile.txt\n</code></pre>\n\n<p>Alternatively, create a function:</p>\n\n<pre><code>   mkfile() { \n    mkdir -p $( dirname \"$1\") &amp;&amp; touch \"$1\" \n   }\n</code></pre>\n\n<p>Execute it with 1 arguments: filepath. Saying:</p>\n\n<pre><code>mkfile B/C/D/myfile.txt\n</code></pre>\n\n<p>would create the file myfile.txt in the directory B/C/D.</p>\n"}, {"tags": [], "owner": {"reputation": 1957, "user_id": 2094708, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nIQKY.jpg?s=128&g=1", "display_name": "Sidharth C. Nadhan", "link": "https://stackoverflow.com/users/2094708/sidharth-c-nadhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1479792256, "creation_date": 1479792256, "answer_id": 40734340, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/40734340#40734340", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>Bring Python to command line.</p>\n\n<p>i.e. Use <a href=\"https://code.google.com/archive/p/pyp/\" rel=\"nofollow noreferrer\">pyp</a></p>\n\n<pre><code> cat filepaths.txt | pyp \"'mkdir -p '+s[0:-1]|s+'; touch '+o\" | sh\n</code></pre>\n\n<p>The Pyed Piper\", or pyp, is a linux command line text manipulation tool similar to awk or sed, but which uses standard python string and list methods as well as custom functions evolved to generate fast results in an intense production environment.    </p>\n"}, {"tags": [], "owner": {"reputation": 1561, "user_id": 267455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c108746381c8df387083f405de77c2e7?s=128&d=identicon&r=PG", "display_name": "Dale Anderson", "link": "https://stackoverflow.com/users/267455/dale-anderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1499717189, "last_edit_date": 1499717189, "creation_date": 1499380819, "answer_id": 44959953, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/44959953#44959953", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>I defined a <code>touchp</code> in my <code>~/.bash_aliases</code>:</p>\n\n<pre><code>function touchp() {\n  /bin/mkdir -p \"$(dirname \"$1\")/\" &amp;&amp; /usr/bin/touch \"$1\"\n}\n</code></pre>\n\n<p>It silently creates the structure above the file if not present, and is perfectly safe to use when passed a single filename without any directory in front of it.</p>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 1107350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b0c2645da6a61f949db6196e52c567?s=128&d=identicon&r=PG", "display_name": "Thomas Ingalls", "link": "https://stackoverflow.com/users/1107350/thomas-ingalls"}, "is_accepted": false, "score": 9, "last_activity_date": 1511930691, "creation_date": 1511930691, "answer_id": 47545205, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/47545205#47545205", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>I like typing very little, so I put this command into a named fn in my .profile, but I used this formulation for years before I did it:</p>\n\n<p><code>mkdir -p dirname/sub/dir &amp;&amp; touch $_/filename.ext</code></p>\n\n<p>The variable <code>$_</code> stores the last argument to the previous command. Pretty handy to know about overall.</p>\n"}, {"tags": [], "owner": {"reputation": 953, "user_id": 126992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7761bc0dd3533fd0bb2245264734148?s=128&d=identicon&r=PG", "display_name": "AL the X", "link": "https://stackoverflow.com/users/126992/al-the-x"}, "is_accepted": false, "score": 3, "last_activity_date": 1548386572, "creation_date": 1548386572, "answer_id": 54358534, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line/54358534#54358534", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>I have this shell function in my <code>.zshalias</code> file:</p>\n\n<pre><code>function touch-safe {\n    for f in \"$@\"; do\n      [ -d $f:h ] || mkdir -p $f:h &amp;&amp; command touch $f\n    done\n}\nalias touch=touch-safe\n</code></pre>\n\n<p>If either the <code>test</code> or the <code>mkdir</code> command fail, no <code>touch</code> command is invoked.</p>\n"}], "owner": {"reputation": 580, "user_id": 1746547, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IDJ1c.jpg?s=128&g=1", "display_name": "cartman", "link": "https://stackoverflow.com/users/1746547/cartman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13487, "favorite_count": 2, "accepted_answer_id": 28297210, "answer_count": 8, "score": 22, "last_activity_date": 1548386572, "creation_date": 1422958652, "question_id": 28296411, "link": "https://stackoverflow.com/questions/28296411/how-to-touch-a-file-and-mkdir-if-needed-in-one-line", "title": "How to touch a file and mkdir if needed in one line", "body": "<p>I need to touch a file with an absolute file name such as: /opt/test/test.txt, but I'm not sure if there is /opt/test existed on the system. So the code should similar with this:</p>\n\n<pre><code>if (-d '/opt/test') {\n    touch '/opt/test/test.txt';\n} else {\n    mkdir -p '/opt/test';\n    touch '/opt/test/test.txt'\n}\n</code></pre>\n\n<p>Is there any better way to simplify the code? I hope there is some system commands that can do the same job with only one line.</p>\n"}, {"tags": ["javascript", "perl", "pdf"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 1023294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5APW1.jpg?s=128&g=1", "display_name": "boobie_goodness", "link": "https://stackoverflow.com/users/1023294/boobie-goodness"}, "is_accepted": false, "score": 0, "last_activity_date": 1423828570, "creation_date": 1423828570, "answer_id": 28499072, "question_id": 28296333, "link": "https://stackoverflow.com/questions/28296333/table-header-in-every-page-of-pdf-created-by-wkhtmltopdf/28499072#28499072", "title": "Table header in every page of pdf created by wkhtmltopdf", "body": "<p>One solution would be to create a collection of one-page pdf files, one for each page, and then join them into your final PDF. </p>\n\n<pre><code> if (@pdfFilenames &gt; 1){\n    my $filenameString = join(' ',@pdfFilenames);\n    `pdfunite   $filenameString   joinedFinalAllCombinedPDFfilename.pdf `;\n    `rm $filenameString `;\n        :\n        :\n  }\n</code></pre>\n\n<p>uses the pdfunite commandline app. There will be other ways to combine PDFs, such as the very useful pdftk  (which is not a Tk app, AFAIK)  </p>\n\n<pre><code>pdftk A=a-doc.pdf B=bbbbb.pdf C=file3.pdf D=page4.pdf\\\n        cat     C D A1-10 B18 B2 A400-4-2  \\\n        output  combined.pdf\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587692, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100002112656723/picture?type=large", "display_name": "user3587692", "link": "https://stackoverflow.com/users/3587692/user3587692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423828570, "creation_date": 1422958454, "question_id": 28296333, "link": "https://stackoverflow.com/questions/28296333/table-header-in-every-page-of-pdf-created-by-wkhtmltopdf", "title": "Table header in every page of pdf created by wkhtmltopdf", "body": "<p>I am creating pdf using wkhtmltopdf-amd64. I am sending a string which is a table in javascript to this perl file.Pdf is created correctly,but the problem is on 2nd page and other pages i want the table header also. Here is my perl program.Please help....</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI;\nuse CGI qw/param/;  \nuse URI::Escape; \nuse strict;\nuse Data::Dumper;\nuse User;\nuse ADMIN;\nuse WORKFLOW;\nuse Time::Piece;\nuse User;\nuse HTML::Entities;\nuse lib \"../utils\";\n\nuse lib \"../cgi\";\nuse CGI::Carp qw(fatalsToBrowser);\nuse Date::Calc qw(:all);\nuse POSIX 'strftime';\nuse POSIX;\nuse configured_mail;\nuse PSESSION;\nuse 5.010;\nuse Time::Piece;\nuse URI::Escape; \n use MIME::Base64;\n\n\nmy $userobj = User -&gt; new();\nmy $BASEPATH = $userobj -&gt;getAppBasePath();\nmy $URLBASEPATH = $userobj-&gt;getAppBaseUrl();\n# my $admin_obj = ADMIN-&gt;new($proj,$username);\n#my $proj;\n#my $username;\n\nmy $query = CGI-&gt;new(); \nmy $CGISESSID = $query-&gt;param('CGISESSID');\n\nmy $ps = PSESSION-&gt;new();\nmy $ps_outref = $ps-&gt;getSessionData(\"$CGISESSID\");\nmy $proj = $ps_outref-&gt;{'proj'};\n\nmy ($pdffile,$htmlfile,$curtime);\nour $PageNo;\n\nsub generate_pdf\n{\n                my $file = shift @_;\n                my $pdf_path = shift @_;\n\n                my $curtime= localtime(time);\n                $curtime =~ s/ /_/g;\n                $curtime =~ s/:/_/g;    \n                my $time=$curtime;\n                $curtime=$pdf_path;\n\n                $htmlfile =\"$BASEPATH/macro/$proj/PDF_Report/\".$curtime.\".html\";\n                $pdffile=\"$BASEPATH/macro/$proj/PDF_Report/\".$curtime.\".pdf\";\n                open(INFO, \"&gt;$htmlfile\");\n                print INFO $file;\n                close(INFO);\n\n\n                system \"../bin/wkhtmltopdf-amd64 -B 15 -L 15 -R 15 --zoom 1.00 --margin-top 10 --footer-spacing 3 --footer-left 'Page:[page]' --footer-right 'Date:$time' --header-center 'BenchMark Report' --footer-center 'Tata Technologies Ltd.' --footer-font-size 12 --header-font-size 15 -O landscape $htmlfile $pdffile\";\n\n\n              return 1;\n\n\n}\n1; \n</code></pre>\n"}, {"tags": ["python", "perl", "sockets", "python-3.x"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422958456, "post_id": 28296217, "comment_id": 44944977, "body": "What does the perl code look like?"}, {"owner": {"reputation": 5302, "user_id": 637404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b379cfe07bbf58aab9414128a6e159f8?s=128&d=identicon&r=PG", "display_name": "M&#39;vy", "link": "https://stackoverflow.com/users/637404/mvy"}, "edited": false, "score": 0, "creation_date": 1422958585, "post_id": 28296217, "comment_id": 44945055, "body": "What are the query specifications? Do the server waits for a given message length? Is the message formatted in a specific way? Cause at the moment, I do not really see how the server would know when to send a response to you."}, {"owner": {"reputation": 9129, "user_id": 3673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7782f3928c748f618754315cfeae5d6?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Radix", "link": "https://stackoverflow.com/users/3673/j%c3%a9r%c3%b4me-radix"}, "edited": false, "score": 0, "creation_date": 1422959153, "post_id": 28296217, "comment_id": 44945371, "body": "Adding the perl script would help."}, {"owner": {"reputation": 327, "user_id": 1010297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d07be5154bd1452ac52b539d6bdde4a?s=128&d=identicon&r=PG", "display_name": "Atterratio", "link": "https://stackoverflow.com/users/1010297/atterratio"}, "edited": false, "score": 0, "creation_date": 1422959572, "post_id": 28296217, "comment_id": 44945629, "body": "I asked them from colleague. Waiting."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "edited": false, "score": 2, "creation_date": 1422961435, "post_id": 28296217, "comment_id": 44946702, "body": "Check the data movement with a third tool (tcpdump)! If the data comes, you need to debug only the receiver side. If it doesn&#39;t, you need to debug only the sender."}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 1010297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d07be5154bd1452ac52b539d6bdde4a?s=128&d=identicon&r=PG", "display_name": "Atterratio", "link": "https://stackoverflow.com/users/1010297/atterratio"}, "is_accepted": true, "score": 1, "last_activity_date": 1422962694, "creation_date": 1422962694, "answer_id": 28297739, "question_id": 28296217, "link": "https://stackoverflow.com/questions/28296217/exchange-data-between-python-and-perl-sockets/28297739#28297739", "title": "Exchange data between Python and Perl sockets", "body": "<p>O! I hate this! Initially on the server side was a mistake giving the same effect. But while it corrected, I had forgotten that the server is waiting for \\n to complete the request.</p>\n"}], "owner": {"reputation": 327, "user_id": 1010297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d07be5154bd1452ac52b539d6bdde4a?s=128&d=identicon&r=PG", "display_name": "Atterratio", "link": "https://stackoverflow.com/users/1010297/atterratio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 28297739, "answer_count": 1, "score": 1, "last_activity_date": 1422962694, "creation_date": 1422958107, "last_edit_date": 1422961133, "question_id": 28296217, "link": "https://stackoverflow.com/questions/28296217/exchange-data-between-python-and-perl-sockets", "title": "Exchange data between Python and Perl sockets", "body": "<p>My colleague wrote a simple server on Perl, which listening port and waits for message, and then sends a response:</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict;\nuse IO::Select;\nuse IO::Socket::INET;\n\nuse constant SIZE =&gt; 1024;\nuse constant EOL =&gt; \"\\x0D\\x0A\";\n\nmy %user_input;\n\nif(scalar @ARGV &lt; 2)\n{\ndie \"Usage: server.pl ip port\\n\";\n}\n\nmy ($serv_ip, $serv_port) = @ARGV;\n\nmy $socket = IO::Socket::INET-&gt;new(LocalAddr =&gt; $serv_ip, LocalPort =&gt; $serv_port, Listen =&gt; 20, Proto =&gt; 'tcp', Reuse =&gt; 1) or die $!;\nmy $select = IO::Select-&gt;new($socket) or die $!;\n\nprint \"Started\\n\";\n\nwhile(1)\n      {\n        my @r = $select-&gt;can_read;\n        my @w = $select-&gt;can_write(.1);\n\n      for my $handle (@r) {\n                  if($handle eq $socket) {\n                      my $connect = $socket-&gt;accept();\n                      $select-&gt;add($connect);\n                                          }\n                      else {\n                          my $user_input;\n                          while(sysread $handle, $_, SIZE) {\n                                  $user_input .= $_;\n                                  last if $_ =~ /\\x0A/ or length $user_input &gt;= SIZE;\n                                                        }\n                                  printf (\"Input:$user_input\\n\");\n                                    if(length $user_input &gt; 0) {\n                                      $user_input = handle_request($user_input, $handle);\n                                          if($user_input) {\n                                             printf(\"Output:$user_input\\n\");\n                                            syswrite $_, $user_input, SIZE for @w;\n                                                          }\n                                                } else {\n                                             $select-&gt;remove($handle);\n                                             close $handle;\n                                                        }\n                            }\n                         }\n        }\n\n##################\nsub handle_request\n{\n  my ($user_input, $handle) = @_;\n\nmy $error_begin = \"Hello world!\";\n$error_begin .= EOL;\n\nreturn $error_begin;\n} \n</code></pre>\n\n<p>Don't ask. I do not understand at Pearl and fear him.</p>\n\n<p>I wrote a simple script on Python 3 that sends a message and waits for response:</p>\n\n<pre><code>import socket\nimport json\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.settimeout(2)\ns.connect(('host', 9999))\ndata = 'message'\ns.sendall(data.encode())\n\ndata = s.recv(1024)\nprint(data)\n\ns.close()\n</code></pre>\n\n<p>When I run it raise the exception:</p>\n\n<pre><code>data = s.recv(1024)\nsocket.timeout: timed out\n</code></pre>\n\n<p>This means that my request comes, and the response not. But my colleague sees my requests on his server. At the same time, I successfully commit session with my own server on Python, with similar assignment. Moreover, I can send message and receive answers via telnet with my colleague's server. I suspect that there are some differences in the default sockets settings in Python and Perl.\nAny idea what could be the problem?</p>\n\n<p>UPD:\nperl 5.20.1\npython 3.4.2</p>\n"}, {"tags": ["arrays", "perl", "hash", "hash-of-hashes"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1422978186, "post_id": 28295799, "comment_id": 44957046, "body": "When you start using data structures that are this heavily nested, you should consider using objects instead. Take a look at the official Perl object-oriented programming tutorial, <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\"><code>perlootut</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2473753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZfaA.gif?s=128&g=1", "display_name": "thefoobarguy", "link": "https://stackoverflow.com/users/2473753/thefoobarguy"}, "edited": false, "score": 0, "creation_date": 1422958892, "post_id": 28296306, "comment_id": 44945233, "body": "Thanks, this is a &quot;config&quot; file given to me that I need to parse in order to fetch the elements in the inner-most array."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 23, "user_id": 2473753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZfaA.gif?s=128&g=1", "display_name": "thefoobarguy", "link": "https://stackoverflow.com/users/2473753/thefoobarguy"}, "edited": false, "score": 2, "creation_date": 1422960414, "post_id": 28296306, "comment_id": 44946155, "body": "Is that the format your config file is in? Because that&#39;s a trainwreck, and really you should try and discourage people from doing that sort of nastiness."}, {"owner": {"reputation": 23, "user_id": 2473753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZfaA.gif?s=128&g=1", "display_name": "thefoobarguy", "link": "https://stackoverflow.com/users/2473753/thefoobarguy"}, "edited": false, "score": 0, "creation_date": 1422965755, "post_id": 28296306, "comment_id": 44949110, "body": "Well unfortunately yes. And it is not even in my hands. :("}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1422958389, "creation_date": 1422958389, "answer_id": 28296306, "question_id": 28295799, "link": "https://stackoverflow.com/questions/28295799/parsing-a-hoaohoaohoaoh-in-perl/28296306#28296306", "title": "Parsing a HoAoHoAoHoAoH in Perl", "body": "<p>This looks a lot like an XY problem. What are you trying to solve here? </p>\n\n<p>You can access an element of your data structure like this:</p>\n\n<pre><code>print $my_hash{key01}[0]{key12}[0]{key22}[0]{key31}[0]{color},\"\\n\";\n</code></pre>\n\n<p>You can also iterate the bottom elements with:</p>\n\n<pre><code>foreach my $something ( @{ $my_hash{key01}[0]{key12}[0]{key22}[0]{key31} } ) {\n   print $something-&gt;{'color'};\n   print $something-&gt;{'quantity'}\n}\n</code></pre>\n\n<p>But this doesn't look like a real problem - what are you <em>actually</em> trying to accomplish? I might guess you're trying to parse XML or similar, in which case there's almost certainly a better approach. </p>\n"}], "owner": {"reputation": 23, "user_id": 2473753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZfaA.gif?s=128&g=1", "display_name": "thefoobarguy", "link": "https://stackoverflow.com/users/2473753/thefoobarguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 28296306, "answer_count": 1, "score": 0, "last_activity_date": 1422958389, "creation_date": 1422956884, "question_id": 28295799, "link": "https://stackoverflow.com/questions/28295799/parsing-a-hoaohoaohoaoh-in-perl", "title": "Parsing a HoAoHoAoHoAoH in Perl", "body": "<p>I am new to Perl and have a little idea about hashes. I have a hash of array of hash of array of hash of array of hash (HoAoHoAoHoAoH) as follows.</p>\n\n<pre><code>%my_hash = (\n    key00 =&gt; 'value00',\n    key01 =&gt; [\n        {  key10 =&gt; 'value10',\n           key11 =&gt; 'value11',\n           key12 =&gt; [\n               {   key20  =&gt; 'value20',\n                   key21  =&gt; 'value21',\n                   key22  =&gt; [\n                       {   key30  =&gt; 'value30',\n                           key31    =&gt; [\n                               { color =&gt; 'blue',  quantity =&gt; 10, boxes =&gt; [0,1,3] },\n                               { color =&gt; 'red',   quantity =&gt; 2,  boxes =&gt; [2,3]   },\n                               { color =&gt; 'green', quantity =&gt; 5,  boxes =&gt; [0]     },\n                           ],\n                       },\n                   ],\n               },\n           ]\n        }\n    ]\n);\n</code></pre>\n\n<p>What is the easiest way to access the \"color\", \"quantity\" and \"boxes\"? I also need to do arithmetic operations with the \"quantity\"s, such as 10+2+5 (quantity0+quantity1+quantity2).</p>\n"}, {"tags": ["perl", "loops", "foreach"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422957020, "post_id": 28294545, "comment_id": 44944080, "body": "You don&#39;t need signals for threading. You might if you&#39;re doing it with <code>fork()</code>.  You can also probably trap-and-kill &#39;interrupt&#39; signals like <code>ctrl-c</code> rather than <code>any key</code>."}, {"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1422987188, "post_id": 28294545, "comment_id": 44962786, "body": "I have updated the original question. So essentially, if I can see the script is going to timeout, I want to move it to the next item before 15 seconds is up."}], "tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": false, "score": 2, "last_activity_date": 1422952800, "creation_date": 1422952800, "answer_id": 28294545, "question_id": 28294092, "link": "https://stackoverflow.com/questions/28294092/perl-move-to-next-item-in-loop-before-it-is-done-executing/28294545#28294545", "title": "Perl: Move to next item in loop before it is done executing", "body": "<p>Basically you have two options:</p>\n\n<p><strong>1. Use threads</strong></p>\n\n<p>Create a new thread, call desired system function there. Wait for output. In another thread, check for user input. On input, you can kill the child process. When child process has finished, you can ignore user input.</p>\n\n<p>Such a solution seems to be rather complex, with a lot of synchronization needed, probably with using signals. Risky.</p>\n\n<p><strong>2. Use non-blocking IO</strong></p>\n\n<p>Please read <a href=\"http://www.perlmonks.org/?node_id=55241\" rel=\"nofollow\">this</a> thread. It explains how to make non-blocking IO reads from either a file or a pipe. You'd like to make a non-blocking read from pipe (created with <code>open</code>), then non-blocking read from <code>STDIN</code>, loop.</p>\n\n<p>Seems like a way to go, but, alas, rather complex as well.</p>\n"}, {"comments": [{"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1422987160, "post_id": 28296079, "comment_id": 44962762, "body": "I have updated the original question. So essentially, if I can see the script is going to timeout, I want to move it to the next item before 15 seconds is up."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "edited": false, "score": 0, "creation_date": 1422989390, "post_id": 28296079, "comment_id": 44963894, "body": "Why do you have a 15s timeout in that case? Why not make it shorter?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1422963719, "last_edit_date": 1422963719, "creation_date": 1422957673, "answer_id": 28296079, "question_id": 28294092, "link": "https://stackoverflow.com/questions/28294092/perl-move-to-next-item-in-loop-before-it-is-done-executing/28296079#28296079", "title": "Perl: Move to next item in loop before it is done executing", "body": "<p>The problem you've got with this, is that when you run <code>curl</code> perl hands over control and waits for completion. It blocks until it's 'done'. </p>\n\n<p>So it's not as easy to do this as it might seem. </p>\n\n<p>As another poster alludes to - you can use a variety of parallel processing options. I would suggest the easiest is to move away from using 'any' key, and require a ctrl-c.</p>\n\n<p>So you'd then do:</p>\n\n<pre><code>foreach my $addr ('http://site1.com', ...., 'http://site2.com') {\n     my $pid = open ( my $curl_fh, \"-|\", \"curl -m 15 $addr\" );\n     $SIG{'INT'} = sub { print \"Aborting fetch of $addr\"; kill $pid };\n     while ( &lt;$curl_fh&gt; ) {\n         print;\n     }\n     #might want to set it to something else. \n     #undef means 'ctrl-c' will abort the whole program. \n     #IGNORE means exactly what it says on the tin.\n     #important to change it though, as it has a specific pid it'll kill, \n     #and that might cause problems. \n     $SIG{'INT'} = undef;\n} \n</code></pre>\n\n<p>What this does is configure <code>SIGINT</code> (e.g. ctrl-c) so it doesn't kill your program, but does kill the sub-process. </p>\n\n<p>If you wanted to look at other options, I'd offer:</p>\n\n<ul>\n<li><p>Multithreading, spawn a thread to 'do' the curl fetching in the background and use <code>Thread::Queue</code> to pass results back and forth. (<code>Thread::Queue</code> supports nonblocking checks). </p></li>\n<li><p>Forking - fork a sub process to do the curl, and use your 'main' process to send a signal if a key is pressed.</p></li>\n<li><p><code>IO::Select</code> such that you're not making blocking reads on your process. </p></li>\n</ul>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 28296079, "answer_count": 2, "score": 1, "last_activity_date": 1422987040, "creation_date": 1422950879, "last_edit_date": 1422987040, "question_id": 28294092, "link": "https://stackoverflow.com/questions/28294092/perl-move-to-next-item-in-loop-before-it-is-done-executing", "title": "Perl: Move to next item in loop before it is done executing", "body": "<p>I have a perl script that is like so:</p>\n\n<pre><code>foreach my $addr ('http://site1.com', ...., 'http://site2.com') {\n    my $script = `curl -m 15 $addr`;\n    *do stuff with $script*\n} \n</code></pre>\n\n<p>The <code>-m</code> sets a timeout of 15 seconds. Is there a way to make it if a user pushes a key, it stops the current execution and moves onto the next item in the foreach? I know <code>last;</code> can move to the next item but I am unsure of how to link this to the key being pushed and how to do it while the curl script is running</p>\n\n<p>Edit: So based on the answers it seems difficult to do it while curl is running. Would it be possible to push a key while curl is running and have it skip to the next item in the loop <em>as soon as</em> the curl script returns (or times out after 15sec)?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422950620, "post_id": 28294004, "comment_id": 44940606, "body": "Just <code>print</code> something in the Perl script."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1422958088, "post_id": 28294004, "comment_id": 44944756, "body": "To use this the way you want, you would need some ability like bash&#39;s command substitution. Here is a link to a similar question: <a href=\"http://stackoverflow.com/questions/2033338/get-stdout-into-a-variable\" title=\"get stdout into a variable\">stackoverflow.com/questions/2033338/get-stdout-into-a-variab&zwnj;&#8203;le</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1423226951, "post_id": 28294004, "comment_id": 45073339, "body": "<a href=\"http://stackoverflow.com/questions/2323292/windows-batch-assign-output-of-a-program-to-a-variable\" title=\"windows batch assign output of a program to a variable\">stackoverflow.com/questions/2323292/&hellip;</a>"}], "owner": {"reputation": 121, "user_id": 1536536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f149ddc965fe8dfc16b22cee19da5c79?s=128&d=identicon&r=PG", "display_name": "GrooverMD", "link": "https://stackoverflow.com/users/1536536/groovermd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422950611, "creation_date": 1422950536, "last_edit_date": 1422950611, "question_id": 28294004, "link": "https://stackoverflow.com/questions/28294004/return-a-value-from-perl-script-into-a-batch-file", "title": "Return a value from perl script into a batch file", "body": "<p>Is it possible to return a value from a perl script, such as an integer, into a batch or cmd file?</p>\n\n<p>I was thinking like this:</p>\n\n<pre><code>set RESULT=0\nset COUNT=0\n\nascript.pl &gt; %RESULT%\n\n%COUNT% += %RESULT%\n\notherscript.pl &gt; %RESULT%\n\n%COUNT% += %RESULT%\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1422949562, "post_id": 28293689, "comment_id": 44940119, "body": "<i>Always</i> <code>use strict; use warnings;</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1422963646, "post_id": 28294615, "comment_id": 44947969, "body": "Thanks for the reply! But, why does $! gives different values for different conditions? What makes a difference when I set the $debug variable? It just executes a system(&quot;pause&quot;)..? Should I use backticks instead of system and then search it for any errors?  Also, could you elaborate on the sample code you mentioned? It&#39;s a bit confusing. For calculating, we do ($? &amp; 127) but while printing &quot;with&quot; or &quot;without&quot;, we do ($? &amp; 128)"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1422971175, "post_id": 28294615, "comment_id": 44952324, "body": "If nothing specifically causes an error, <code>$!</code>&#39;s value is meaningless -- there&#39;s no point in even looking at it.  If you right-shift <code>$?</code> with <code>$foo = $? &gt;&gt; 8</code>, then <code>$foo</code> will be the errorlevel that <code>xcopy</code> returns.  So if <code>$foo == 1</code>, then no files were found to copy.  You can probably ignore the bit flags on 127 and 128."}, {"owner": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423028710, "post_id": 28294615, "comment_id": 44978334, "body": "Well, here, there is an error occurring - one file is not found at the specified location while copying. Also, when I run  the program with $debug set, the program pauses at instances where I have written <code>system(&quot;pause&quot;)</code> and then $! does print &quot;No such file or directory&quot;. It&#39;s just that when not running with the $debug set, I get the other message (which you might be saying as meaningless, if I&#39;m not wrong)."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423075608, "post_id": 28294615, "comment_id": 45005500, "body": "Okay, <i>stop looking at <code>$!</code> if there isn&#39;t actually an error</i>.  Its value is <i>meaningless</i>."}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 2, "last_activity_date": 1422972362, "last_edit_date": 1422972362, "creation_date": 1422953048, "answer_id": 28294615, "question_id": 28293689, "link": "https://stackoverflow.com/questions/28293689/perl-returns-bad-file-descriptor-at-once-and-no-such-file-or-directory-wh/28294615#28294615", "title": "Perl $! returns &quot;Bad file descriptor&quot; at once and &quot;No such file or directory&quot; when run in debug mode (not Perl&#39;s debug mode)", "body": "<p>See the documentation for <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow\"><code>system</code></a>.  <code>$!</code> is only meaningful if <code>system</code> itself fails and returns <code>-1</code>.  Otherwise, you have to figure out what the error means on your own by picking apart <code>$?</code>.  A sample from the documentation:</p>\n\n<pre><code>if ($? == -1) {\n    print \"failed to execute: $!\\n\";\n}\nelsif ($? &amp; 127) {\n    printf \"child died with signal %d, %s coredump\\n\",\n        ($? &amp; 127),  ($? &amp; 128) ? 'with' : 'without';\n}\nelse {\n    printf \"child exited with value %d\\n\", $? &gt;&gt; 8;\n}\n</code></pre>\n\n<p>So you shift <code>$?</code> right by 8 bits, and that's the error code returned by <code>xcopy</code>.  There's a list of <code>xcopy</code>s error codes <a href=\"http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/xcopy.mspx?mfr=true\" rel=\"nofollow\">here</a>.</p>\n\n<p>That's the way it <em>should</em> behave, anyway.  In my testing with this:</p>\n\n<pre><code>my $ProjectPath = \"c:\\\\temp\";\nmy @FileList    = qw(aaa.txt asdf bbb.txt empty_dir beans.txt foo.pl);\nmy $NewPath     = \"c:\\\\temp2\";\n\nforeach my $eachFile (@FileList) {\n    print \"Copying $eachFile\\n\";\n    my $result = system(\n        qw(xcopy /I /F /V /Y /R), \"$ProjectPath\\\\$eachFile\", \"$NewPath\\\\\"\n    );\n\n    if ($? == -1) {\n        die \"failed to execute: $!\";\n    }\n    elsif ($? &gt; 0) {\n        my $foo = $? &gt;&gt; 8;\n        print \"Error code: $foo\\n\";\n        die \"no files found to copy\"          if $foo == 1;\n        die \"user pressed ctrl-c during copy\" if $foo == 2;\n        die \"initialization error\"            if $foo == 4;\n        die \"disk write error writing\"        if $foo == 5;\n        die \"unknown error\";\n    }\n}\n</code></pre>\n\n<p>It reports \"initialization error\" when it finds that there is no <code>beans.txt</code> in my temp directory.  I don't know what I'd have to do to make <code>xcopy</code> return a <code>1</code>.  C'est la vie.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1422968553, "post_id": 28295176, "comment_id": 44950743, "body": "Which &#39;\\&#39; are you mentioning about? There are quite some &#39;\\&#39; and &#39;/&#39; in that code..!"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423121111, "post_id": 28295176, "comment_id": 45022052, "body": "Its about path. @ss2025"}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1422954951, "creation_date": 1422954951, "answer_id": 28295176, "question_id": 28293689, "link": "https://stackoverflow.com/questions/28293689/perl-returns-bad-file-descriptor-at-once-and-no-such-file-or-directory-wh/28295176#28295176", "title": "Perl $! returns &quot;Bad file descriptor&quot; at once and &quot;No such file or directory&quot; when run in debug mode (not Perl&#39;s debug mode)", "body": "<p>'\\' as a separator might be the issue, the Unix-style is '/'.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423027704, "post_id": 28303053, "comment_id": 44978038, "body": "Well, that does help in writing better programs, thanks for that! I&#39;ll think about those tips, but I guess the File::Copy module does not provide as much functionality as the xcopy function provides - viz., the /I, /V, /F, /Y, /R, etc. (for e.g., File::Copy doesn&#39;t overwrite read-only files, whereas xcopy does it with /R switch)"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423060263, "post_id": 28303053, "comment_id": 44995492, "body": "@ss2025 <code>File:Copy</code> does have limits, but there are ways to get around these. You could use <a href=\"http://perldoc.perl.org/functions/chmod.html\" rel=\"nofollow noreferrer\">chmod</a> before attempting to copy the file in order to set write permission before doing <code>copy</code>. <code>xcopy</code> also does recursive copying too. This takes a bit more work and a few more standard modules (<code>File::Find</code>, <code>File::Basename</code>, <code>File::Path</code>, and maybe <code>File::Spec</code> to be safe). Or, you can use <a href=\"https://metacpan.org/pod/File::Copy::Recursive\" rel=\"nofollow noreferrer\">File::Copy::Recursive</a> which as a bonus <b>can</b> be set to overwrite existing files."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "edited": false, "score": 0, "creation_date": 1423060428, "post_id": 28303053, "comment_id": 44995611, "body": "When you use the <code>system</code> command to do something on your system, you&#39;re making assumptions on your system that may or may not be true. For example, a command may exist on one system that maybe different or operates completely differently than another system (especially between Win32 and Unix). Or that you might be relying on behavior on one version of the command that differs between another (Mac OS X vs. Linux). Or, that someone didn&#39;t write a batch or shell script with that name in order to add a security hole."}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1422979135, "last_edit_date": 1422979135, "creation_date": 1422978469, "answer_id": 28303053, "question_id": 28293689, "link": "https://stackoverflow.com/questions/28293689/perl-returns-bad-file-descriptor-at-once-and-no-such-file-or-directory-wh/28303053#28303053", "title": "Perl $! returns &quot;Bad file descriptor&quot; at once and &quot;No such file or directory&quot; when run in debug mode (not Perl&#39;s debug mode)", "body": "<p>Don't use a system command when you can use Perl. Otherwise, why bother with Perl?</p>\n\n<p>There is a file <code>copy</code> command in Perl. It's not part of the base commands, but is available via the <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow\">File::Copy</a> module. Don't be confused into thinking that this isn't part of <em>Standard Perl</em>, and shouldn't be used. The <code>File::Copy</code> module has been around for a long, long time, and is part of every Perl installation you will run into. Learn the various <strong><em>standard</em></strong> Perl modules, and use them as if they are part of the base Perl because they are.</p>\n\n<p>And, don't be afraid of installing CPAN Perl modules. These modules can extend Perl in wonderful ways (for example, parsing JSON, YAML, and XML files or interacting with the World Wide Web). Remember that the best Perl programmers are darn lazy and won't write code if someone else has already did it for them.</p>\n\n<p>All I had to do to get that <code>copy</code> command was to add <code>use File::Copy;</code> in the top of my Perl script. </p>\n\n<p>Note that my loop contains three lines:</p>\n\n<ul>\n<li>I verify the file exists via the <code>-f</code> command.</li>\n<li>I tell you what I am doing (You had <code>/V</code> there in your <code>xcopy</code> command)</li>\n<li>I copy the file.</li>\n</ul>\n\n<p>Also note that I <em>changed</em> your variable names. In Perl, the standard is to use underscores and lowercase for variable names. Also, it's now standard to simply say <code>for</code> instead of <code>foreach</code> which saves you typing four characters.</p>\n\n<p>I use the <code>use feature qw(say);</code> pragma which enables the <code>say</code> command. I like it much better than <code>print</code> since <code>say</code> automatically adds the <code>\\n</code> to the end of the line. This sounds like a tiny thing, but after you forget <code>\\n</code> a few times, of find situations where putting <code>\\n</code> changes your output in ways you didn't anticipate, you appreciate the <code>say</code> command.</p>\n\n<p>I use another module called <code>File::Path</code> which gives me the <code>make_path</code> command. This command is an extension of the built in <code>mkdir</code> command. However, it makes the directory and all parent directories required to make the directory you want. If you don't need to worry about making the entire path, you can simply use <code>mkdir</code> and not include <code>File::Path</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\n\nuse File::Copy;\nuse File::Path qw(make_path);\n\n...\n\nif ( not -d $project_path ) {\n    make_path $project_path\n            or die qq(Can't create directory \"$project_path\");\n    }\n}\n\nfor my $file in ( @files ) {\n    if not ( -f \"$project_path/$file\" ) {\n         die qq(Can't copy non-existant file \"$project_path/$file\".);\n    }\n    say qq(Copying \"$project_path/$file\" to \"$new_path\");\n    copy \"$project_path/$file\", $new_path\n         or die qq(Can't copy \"$file\": $!);\n}\n</code></pre>\n\n<p>Yes, this doesn't answer your <em>direct</em> question. However, I wanted you to know the <em>Perl way</em> of doing what you want, so you could become a better Perl programmer.</p>\n"}], "owner": {"reputation": 303, "user_id": 4260095, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fedb7d79a65b80803d616ce2bdc7b94?s=128&d=identicon&r=PG&f=1", "display_name": "saveshodhan", "link": "https://stackoverflow.com/users/4260095/saveshodhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2923, "favorite_count": 0, "accepted_answer_id": 28294615, "answer_count": 3, "score": 0, "last_activity_date": 1422979135, "creation_date": 1422949322, "question_id": 28293689, "link": "https://stackoverflow.com/questions/28293689/perl-returns-bad-file-descriptor-at-once-and-no-such-file-or-directory-wh", "title": "Perl $! returns &quot;Bad file descriptor&quot; at once and &quot;No such file or directory&quot; when run in debug mode (not Perl&#39;s debug mode)", "body": "<p>I have this Perl code:</p>\n\n<pre><code>foreach my $eachFile (@FileList)\n{\n    $cmd = \"xcopy /I /F /V /Y /R \\\"$ProjectPath\\\\$eachFile\\\" \\\"$NewPath\\\\\\\"\";\n    print \"\\n\\t$cmd\\n\";\n    my $result = system($cmd);\n    die \"ERROR: Could not copy from $viewPath to $DLPath: $!\" if ($result &gt; 0);\n}\n</code></pre>\n\n<p>In this code, I have put lines like: <code>system(\"pause\") if ($debug)</code> which pauses the execution when $debug variable is set.</p>\n\n<p>Now, the above xcopy dies as one file is not present. But, the $! prints : \"Bad file descriptor\" when run normally, and it print : \"No such file or directory\" when I set the $debug variable.</p>\n\n<p>Any idea why does $! give different message for the two instances?</p>\n"}, {"tags": ["c++", "perl", "xs"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1422948157, "post_id": 28293260, "comment_id": 44939517, "body": "check: <a href=\"https://metacpan.org/pod/Inline::CPP\" rel=\"nofollow noreferrer\">metacpan.org/pod/Inline::CPP</a>"}, {"owner": {"reputation": 61, "user_id": 4147776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ec902e7c1a9a9c089d0cef2a1d588?s=128&d=identicon&r=PG&f=1", "display_name": "user4147776", "link": "https://stackoverflow.com/users/4147776/user4147776"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1422949973, "post_id": 28293260, "comment_id": 44940314, "body": "@jm666 Thank you for your comments. The module seems to decrease the effort for embedding C code into perl, and it would be useful if I have to use XS. However, I cannot find the answer for my question there..."}], "answers": [{"comments": [{"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1422953390, "post_id": 28294592, "comment_id": 44941968, "body": "If the external program is interactive, and the loop is in the perl code, using <code>open</code> once before the loop and passing instructions/data on each iteration is worth considering as well. Am I right?"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "reply_to_user": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1422954055, "post_id": 28294592, "comment_id": 44942307, "body": "That <i>is</i> worth considering, but two-way communication is problematic. See &quot;Bidirectional Communication with Another Process&quot; in <code>perldoc perlipc</code>"}, {"owner": {"reputation": 61, "user_id": 4147776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ec902e7c1a9a9c089d0cef2a1d588?s=128&d=identicon&r=PG&f=1", "display_name": "user4147776", "link": "https://stackoverflow.com/users/4147776/user4147776"}, "edited": false, "score": 0, "creation_date": 1422956018, "post_id": 28294592, "comment_id": 44943464, "body": "@Bulletmagnet Thank you for your answer. I am sorry that I cannot vote up your answer because I don&#39;t have enough reputation."}, {"owner": {"reputation": 61, "user_id": 4147776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ec902e7c1a9a9c089d0cef2a1d588?s=128&d=identicon&r=PG&f=1", "display_name": "user4147776", "link": "https://stackoverflow.com/users/4147776/user4147776"}, "edited": false, "score": 0, "creation_date": 1423000778, "post_id": 28294592, "comment_id": 44970139, "body": "FYI. I wrote two simple perl programs: one calls an empty (doing nothing) C++ program 10,000 times using backticks, and the other uses xs to call the C++ program 10,000 times. The runtime of the backtick version is 14.44 s and that of the xs version is 0.02 s. There is a huge difference."}], "tags": [], "owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "is_accepted": false, "score": 1, "last_activity_date": 1422952985, "creation_date": 1422952985, "answer_id": 28294592, "question_id": 28293260, "link": "https://stackoverflow.com/questions/28293260/calling-a-c-program-from-perl-code/28294592#28294592", "title": "Calling a C++ program from Perl code", "body": "<p>Launching an external program is is always going to be slower than making a function call. If you care about speed, launching a program \"tens of millions of times\" is out of the question.</p>\n\n<p>If the loop which is executed tens of millions of times is inside the external program, then launching it only once may be acceptable. However, you now have another problem: how to get tens of millions of data to the external program and how to get the results back. Because it's an external program, you'll have to pass the data in text form. This means your script has to transform the data into text, pass it to the external program; the external program has to parse it and transform it into its native representation, perform the calculations, transform the results into text and return it; then your script has to parse the result. </p>\n\n<p><code>system</code> is probably not the right tool for this anyway. It is best suited for running programs for their effect (e.g. <code>rm -rf /</code>) rather than their output. If you want to read the output of a program, you probably want backticks (<code>``</code> a.k.a. <code>qx{}</code>) or piping to yourself (see \"Using <code>open()</code> for IPC\" in <code>perldoc perlipc</code>).</p>\n"}], "owner": {"reputation": 61, "user_id": 4147776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd7ec902e7c1a9a9c089d0cef2a1d588?s=128&d=identicon&r=PG&f=1", "display_name": "user4147776", "link": "https://stackoverflow.com/users/4147776/user4147776"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422952985, "creation_date": 1422947536, "question_id": 28293260, "link": "https://stackoverflow.com/questions/28293260/calling-a-c-program-from-perl-code", "title": "Calling a C++ program from Perl code", "body": "<p>I write perl code that calls a submodule tens of millions times. The submodule is computationally intensive and its runtime is very slow. I find a C++ program that exactly does what the submodule does and I would like to substitute the submodule with the C++ program.\nI am wondering whether I have to write XS code to interface the program. Does it decrease the performance a lot to directly call the C++ program using the \"system\" command in the perl code?\nThanks!</p>\n"}, {"tags": ["perl", "indentation", "libxml2", "children"], "answers": [{"tags": [], "owner": {"reputation": 1667, "user_id": 480667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Jhqvp.gif?s=128&g=1", "display_name": "Jason Viers", "link": "https://stackoverflow.com/users/480667/jason-viers"}, "is_accepted": true, "score": 1, "last_activity_date": 1423068716, "last_edit_date": 1423068716, "creation_date": 1422982413, "answer_id": 28304407, "question_id": 28290947, "link": "https://stackoverflow.com/questions/28290947/indentation-of-child-nodes-using-libxml-in-perl/28304407#28304407", "title": "Indentation of child nodes using LibXML in Perl", "body": "<blockquote>\n  <p>I don't want to use LibXML Pretty Print</p>\n</blockquote>\n\n<p>Pretty Print is the best way to go.  The alternative is:</p>\n\n<ul>\n<li>Grab the text node that was at the end of &lt;plurals> (and is now before your new item), which was previously a newline and 4 spaces, and change it to a newline and 8 spaces</li>\n<li>Add a text node after your new item, and give it a newline and 4 spaces</li>\n</ul>\n\n<p>But those numbers (4/8) will change if your XML ever gets moved around and changes depth.  This is the kind of stuff that pretty print (along with no_blanks parsing) is designed to handle for you.</p>\n"}], "owner": {"reputation": 459, "user_id": 4509191, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a40e6ea5a60e74319b92aabab43ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "cdm", "link": "https://stackoverflow.com/users/4509191/cdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 28304407, "answer_count": 1, "score": 1, "last_activity_date": 1423068716, "creation_date": 1422934651, "question_id": 28290947, "link": "https://stackoverflow.com/questions/28290947/indentation-of-child-nodes-using-libxml-in-perl", "title": "Indentation of child nodes using LibXML in Perl", "body": "<p>I'm having difficulty maintaining indentation when appending childNodes using XML.</p>\n\n<p>For example, if I have the following XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;resources&gt;\n\n    &lt;plurals name=\"number_of_items_selected\"&gt;\n        &lt;item quantity=\"one\"&gt;%1$d selected&lt;/item&gt;\n        &lt;item quantity=\"other\"&gt;%1$d selected&lt;/item&gt;\n    &lt;/plurals&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p>And this code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse XML::LibXML;\nuse strict;\n\nmy $parser = XML::LibXML-&gt;new;\nmy $dom = $parser-&gt;parse_file(\"plurals.xml\") or die;\n\nmy @plurals = $dom-&gt;getElementsByTagName(\"plurals\");\nforeach my $plural (@plurals){\n    my $tag = $dom-&gt;createElement(\"item\");\n    $tag-&gt;setAttribute('quantity'=&gt;'many');\n    $tag-&gt;appendText(\"many items selected\");\n    $plural-&gt;appendChild($tag);\n}\n$dom-&gt;toFile(\"plurals.xml\");\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;resources&gt;\n\n    &lt;plurals name=\"number_of_items_selected\"&gt;\n        &lt;item quantity=\"one\"&gt;%1$d selected&lt;/item&gt;\n        &lt;item quantity=\"other\"&gt;%1$d selected&lt;/item&gt;\n    &lt;item quantity=\"many\"&gt;many items selected&lt;/item&gt;&lt;/plurals&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p>Whereas I want to get this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;resources&gt;\n\n    &lt;plurals name=\"number_of_items_selected\"&gt;\n        &lt;item quantity=\"one\"&gt;%1$d selected&lt;/item&gt;\n        &lt;item quantity=\"other\"&gt;%1$d selected&lt;/item&gt;\n        &lt;item quantity=\"many\"&gt;many items selected&lt;/item&gt;\n    &lt;/plurals&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p>I don't want to use LibXML Pretty Print because it changes the entire layout of the XML. I know that it's all technically the same, but I'm trying to avoid whitespace diff if possible.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["html", "perl", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "is_accepted": false, "score": 1, "last_activity_date": 1422927504, "creation_date": 1422927504, "answer_id": 28289980, "question_id": 28289946, "link": "https://stackoverflow.com/questions/28289946/how-to-write-html-tags-in-perl-using-libxml/28289980#28289980", "title": "How to write HTML tags in Perl using LibXML", "body": "<p>Since it doesn't support <code>innerHTML</code>, you have to manually add text and tags:</p>\n\n<pre><code>my $tag = $doc-&gt;createElement(\"string\");\n$tag-&gt;setAttribute('name'=&gt;'no_messages');\n$tag-&gt;appendText(\"You have \");\n$b = $doc-&gt;createElement(\"b\");\n$b-&gt;appendText(\"no\");\n$tag-&gt;appendChild(\"b\");\n$tag-&gt;appendText(\" messages\");\n</code></pre>\n\n<p>That, or use the <a href=\"http://search.cpan.org/~shlomif/XML-LibXML/lib/XML/LibXML/Parser.pod\" rel=\"nofollow\">parser</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 459, "user_id": 4509191, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a40e6ea5a60e74319b92aabab43ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "cdm", "link": "https://stackoverflow.com/users/4509191/cdm"}, "edited": false, "score": 0, "creation_date": 1422994211, "post_id": 28290430, "comment_id": 44966473, "body": "do you know if it&#39;s possible to tell appendWellBalancedChunk not to convert HTML entities (such as &#39;&amp;#8211;&#39;)? I&#39;d like to write &#39;97&amp;#8211;2004&#39; , but when I do that, I end up with the UTF8 version &#39;97-2004&#39;"}, {"owner": {"reputation": 459, "user_id": 4509191, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a40e6ea5a60e74319b92aabab43ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "cdm", "link": "https://stackoverflow.com/users/4509191/cdm"}, "edited": false, "score": 0, "creation_date": 1422995980, "post_id": 28290430, "comment_id": 44967451, "body": "If after writing the XML, I open the file using a standard filehandle, and rewrite all the lines using &#39;decode_entities&#39; it works as expected. But I&#39;d like to avoid that if possible."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1422931038, "creation_date": 1422931038, "answer_id": 28290430, "question_id": 28289946, "link": "https://stackoverflow.com/questions/28289946/how-to-write-html-tags-in-perl-using-libxml/28290430#28290430", "title": "How to write HTML tags in Perl using LibXML", "body": "<p><a href=\"https://metacpan.org/module/XML::LibXML::Element\" rel=\"nofollow\"><code>XML::LibXML::Element</code></a> objects have an <code>appendWellBalancedChunk</code> method that does exactly what you are asking for.</p>\n\n<p>Here's a demonstration, based on your own sample code</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $doc = XML::LibXML::Document-&gt;new(qw/ 1.0 utf-8 /);\n\nmy $root = $doc-&gt;createElement('resources');\n\nmy $tag = $doc-&gt;createElement('string');\n$tag-&gt;setAttribute(name =&gt; 'no_messages');\n$tag-&gt;appendWellBalancedChunk('You have &lt;b&gt;no&lt;/b&gt; messages');\n\n$root-&gt;appendChild($tag);\n\n$doc-&gt;setDocumentElement($root);\n\nprint $doc-&gt;toString;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;&lt;string name=\"no_messages\"&gt;You have &lt;b&gt;no&lt;/b&gt; messages&lt;/string&gt;&lt;/resources&gt;\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 4509191, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a40e6ea5a60e74319b92aabab43ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "cdm", "link": "https://stackoverflow.com/users/4509191/cdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 28290430, "answer_count": 2, "score": 1, "last_activity_date": 1422931038, "creation_date": 1422927269, "last_edit_date": 1422927336, "question_id": 28289946, "link": "https://stackoverflow.com/questions/28289946/how-to-write-html-tags-in-perl-using-libxml", "title": "How to write HTML tags in Perl using LibXML", "body": "<p>I'm using LibXML to read/write an Android strings.xml file. Sometimes, I need to write html elements such as <code>&lt;b&gt;</code> or <code>&lt;i&gt;</code>. I've tried doing something like this (for example):</p>\n\n<pre><code>#!/usr/bin/env perl\n\n#\n# Create a simple XML document\n#\n\nuse strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $doc = XML::LibXML::Document-&gt;new('1.0', 'utf-8');\n\nmy $root = $doc-&gt;createElement(\"resources\");\nmy $tag = $doc-&gt;createElement(\"string\");\n$tag-&gt;setAttribute('name'=&gt;'no_messages');\n$tag-&gt;appendText(\"You have &lt;b&gt;no&lt;/b&gt; messages\");\n$root-&gt;appendChild($tag);\n\n$doc-&gt;setDocumentElement($root);\nprint $doc-&gt;toString();\n</code></pre>\n\n<p>But I end up with this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;string name=\"no_messages\"&gt;You have &amp;lt;b&amp;gt;no&amp;lt;/b&amp;gt; messages&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>And what I'm looking for is this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;string name=\"no_messages\"&gt;You have &lt;b&gt;no&lt;/b&gt; messages&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "merge"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422921905, "post_id": 28288933, "comment_id": 44932024, "body": "Your <code>split</code> will add the whitespace intervals as separate elements. But you seem to know this, as you say <code>@1 = A, ,B, ,C</code> etc. It is very hard to believe that this is what you want, so please confirm."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1422922008, "post_id": 28288933, "comment_id": 44932057, "body": "Are you sure that what you need isn&#39;t a Perl tutorial? You seem to be stumbling over very basic concepts."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1422922014, "post_id": 28288933, "comment_id": 44932059, "body": "You have been directed towards the module <code>List::MoreUtils</code>, with its functions <code>zip&#47;mesh</code> in your previous, identical question. That question was marked as a duplicate, because it was already answered. Posting the same question again will not accomplish anything. If you&#39;re having problems applying the suggested solution to your problem, ask a question about the code you have tried. That is what this site is for. Not for getting free code."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422922077, "post_id": 28288933, "comment_id": 44932086, "body": "The linked question was <a href=\"http://stackoverflow.com/questions/38345/is-there-an-elegant-zip-to-interleave-two-lists-in-perl-5\" title=\"is there an elegant zip to interleave two lists in perl 5\">stackoverflow.com/questions/38345/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422922288, "post_id": 28288933, "comment_id": 44932148, "body": "@TLP: If you are saying that this is a duplicate question then please mark it as such. Malevolent comments aren&#39;t useful."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422923078, "post_id": 28288933, "comment_id": 44932356, "body": "@Borodin I already closed the previous question he posted, which was identical to this one. Apparently he needed more information, which is what I gave him. If you think that is malevolent, that is only in your own mind, and I encourage you to read my comment with an open mind. If I &quot;mark&quot; this question as a duplicate, it is immediately closed -- because of my previleges -- and I thought that it would be fair if I first gave him a chance to fix it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1422923314, "post_id": 28288933, "comment_id": 44932412, "body": "You mentioned in a comment on your previous question that you tried the first solution in the linked duplicate, but it wasn&#39;t working for you. Please <a href=\"https://stackoverflow.com/posts/28288933/edit\">edit</a> your question to include the code you tried, the output you got, and any errors. Or, as @TLP has mentioned several times, simply use the <code>zip</code> function from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a>...that would probably be easier."}, {"owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "edited": false, "score": 0, "creation_date": 1422954710, "post_id": 28288933, "comment_id": 44942642, "body": "@ Borodin: yes I confirm. Maybe I need a tutorial in fact, I&#39;m a beginner so... @ TLP: Yes I have ask a new question because I was asked to do so by ThisSuitIsBlackNot in a comment on my previous question, and I was told to expose the exact code I was using, so here is the reason why I&#39;ve posted this new question."}, {"owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "edited": false, "score": 0, "creation_date": 1422956359, "post_id": 28288933, "comment_id": 44943683, "body": "Ok I&#39;ve used the <code>zip</code> function (which I didn&#39;t know of before) and it works perfect. Thank you all !"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422979390, "post_id": 28288933, "comment_id": 44958011, "body": "@chris202 Glad it worked for you. I&#39;m sorry that the duplicate we linked to your first question wasn&#39;t helpful...unfortunately, the best and simplest answer (<code>zip</code> or <code>merge</code> from <code>List::MoreUtils</code>) is not the highest-voted answer to that question, and there was no example of how to use <code>zip</code> in the answer so I understand how you could have missed it (I&#39;ve added a usage example to make it clearer). In the future, if your question is closed as a dupe, you may need to try several of the answers, not just the top one."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422979618, "post_id": 28288933, "comment_id": 44958180, "body": "@chris202 As for tutorials: there are a lot of really old Perl tutorials floating around on the web that demonstrate horrible programming practices. I&#39;d recommend one of <a href=\"http://perl-tutorial.org/#index3h1\" rel=\"nofollow noreferrer\">these modern Perl tutorials</a>. Personally, I started with &quot;Learn Perl in about 2 hours 30 minutes,&quot; but there are many good ones out there. Also, learn to love Perl&#39;s built-in documentation, <code>perldoc</code>. If installed on your system, you can run <code>perldoc perlvar</code> to learn about built-in variables, <code>perldoc perlop</code> to learn about operators, <code>perldoc -f &lt;function&gt;</code> (e.g. <code>perldoc -f sort</code>)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422979708, "post_id": 28288933, "comment_id": 44958243, "body": "<i>(continued)</i> to learn about built-in functions, <code>perldoc Module::Name</code> (e.g. <code>perldoc List::MoreUtils</code>) to learn about installed modules, and much more. The documentation is fantastic and should be your #1 go-to resource for Perl questions (yes, even before Stack Overflow). Good luck!"}, {"owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422999885, "post_id": 28288933, "comment_id": 44969693, "body": "@ThisSuitIsBlackNot Thanks for all the good info, I&#39;ll definitely have a look at it !"}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 3762078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf83517b41c8ee4e4508c5cb4723ff5?s=128&d=identicon&r=PG&f=1", "display_name": "kidkamek", "link": "https://stackoverflow.com/users/3762078/kidkamek"}, "is_accepted": false, "score": 0, "last_activity_date": 1422933276, "creation_date": 1422933276, "answer_id": 28290739, "question_id": 28288933, "link": "https://stackoverflow.com/questions/28288933/perl-array-splitting-and-complex-merging/28290739#28290739", "title": "Perl: array splitting and complex merging", "body": "<ol>\n<li><p><strong>To make a slice of an array in Perl:</strong></p>\n\n<pre><code>my @oldArray = (a, ,b, ,c, ,d, ,e, ,f, ,g, h, ,i, ,j, );\n\nmy @newArray1 = @oldArray[elemIndex1,elemIndex2,elemIndexN];\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>my @newArray1 = @oldArray[firstElemIndex..lastElemIndex]\n</code></pre>\n\n<p>Where <code>elemIndex</code> is the index of the element you want in the <code>newArray</code> array.</p>\n\n<p><code>firstElemIndex..lastElemIndex</code> is used when you want consecutive indexes to be in the sliced array.</p></li>\n<li><p><strong>To add elements at the end of an array:</strong></p>\n\n<pre><code>push(@interleavedArray,$newArray1[elemIndex]);\n</code></pre>\n\n<p>Where <code>$newArray1[elemIndex]</code> is the element from <code>@newArray1</code> you want to add to <code>@interleavedArray</code></p></li>\n<li><p><strong>To add elements in order:</strong></p>\n\n<p>Just do a for loop:</p>\n\n<pre><code>for my $index (0..3){\n    push(@interleavedArray,$newArray1[$index]);\n    push(@interleavedArray,$newArray2[$index]);\n    push(@interleavedArray,$newArray3[$index]);\n    push(@interleavedArray,$newArray4[$index]);\n    }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542680353, "creation_date": 1422920711, "last_edit_date": 1542680353, "question_id": 28288933, "link": "https://stackoverflow.com/questions/28288933/perl-array-splitting-and-complex-merging", "title": "Perl: array splitting and complex merging", "body": "<p>I have the following string <code>A B C D E F G H I J</code>. I want to make an array out of it, so I use this </p>\n\n<pre><code>my @string = split/(\\W)/, $text;\n</code></pre>\n\n<p>It works ok, and I get an array of 20 lines looking like this:</p>\n\n<pre><code>A\n\nB\n\nC\n\nD\n\n...\n</code></pre>\n\n<p>Now, I want to split this array in a given number of pieces (let's say 4 in this case), thus resulting I imagine in 4 smaller arrays of 5 lines each, looking like this @1 = <code>A, ,B, ,C</code> , @2 = <code>,D, ,E,</code>, @3 = <code>F, ,G, ,H</code> and @4 = <code>,I, ,J,</code>.\nFinally, I want to interleave these 4 arrays in order to get an output array in which I first have the first line of each array, the the second line of each array, and so on... the final thing looking like this :</p>\n\n<pre><code>A\n\nF\n\n\nD\n\nI\nB\n\nG\n\n\nE\n\nJ\nC\n\nH\n</code></pre>\n\n<p>How to achieve this?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1422914992, "post_id": 28287586, "comment_id": 44929319, "body": "You don&#39;t seem to have included a question in your question, but you might find <a href=\"https://metacpan.org/pod/Router::Simple\" rel=\"nofollow noreferrer\">Router::Simple</a> helpful for this."}, {"owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1422915839, "post_id": 28287586, "comment_id": 44929711, "body": "Thanks, nice module, Ill look into that"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422926210, "post_id": 28287586, "comment_id": 44933262, "body": "There is no need to escape the slashes in your regex patterns. It is necessary only to distinguish them from the default delimiter in literal regexes. You also seem to be a little liberal with your non-greedy <code>?</code> modifiers. Anything that matches, for example, <code>^news\\&#47;?(.*)?</code> will have already been matched by just <code>^news</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422923121, "post_id": 28287732, "comment_id": 44932368, "body": "There is no need to escape the slashes in your regex patterns. It is necessary only to distinguish them from the default delimiter in literal regexes. You also seem to be a little liberal with your non-greedy <code>?</code> modifiers. Anything that matches, for example, <code>^news\\&#47;?(.*)?</code> will have been matched already by just <code>^news</code>."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422925899, "post_id": 28287732, "comment_id": 44933159, "body": "You are correct of course, but I just took the regular expressions from the question without spending much (read any) time validating them."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422926160, "post_id": 28287732, "comment_id": 44933245, "body": "Yes, of course that&#39;s fine. My intention was to comment on the OP&#39;s code, and I shall duplicate it there."}, {"owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "edited": false, "score": 0, "creation_date": 1422949709, "post_id": 28287732, "comment_id": 44940195, "body": "Thanks for the comments, the regex&#39;s are just to give you an idea of the purpose of the solution I was looking for"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 1, "last_activity_date": 1422915340, "last_edit_date": 1422915340, "creation_date": 1422914945, "answer_id": 28287732, "question_id": 28287586, "link": "https://stackoverflow.com/questions/28287586/perl-grep-into-hash-with-arrays-as-values/28287732#28287732", "title": "Perl grep into hash with arrays as values", "body": "<p>You should use a framework that enables you to create routes, it will be much simpler in the long run. In answer to your general question though, you can do something like this:</p>\n\n<pre><code>use strict;\nuse warnings; \n\nuse List::Util qw(any);\n\nmy %routes = (\n  'News' =&gt; ['^news', '^news\\/?(.*)?', '^news\\/(\\d+)\\/(edit|delete|update)'],\n  'User' =&gt; ['^users', '^users\\/?(.*)?', '^users\\/(\\d+)\\/(edit|delete|update)'],\n);\n\nsub match { \n   my ($string_to_match) = @_;\n\n   foreach my $module ( keys %routes ) {\n      return $module if any { $string_to_match =~ m/$_/ } @{$routes{$module}}\n   }\n\n   return;\n}\n</code></pre>\n\n<p>Then you can say something like: </p>\n\n<pre><code>use strict; \nuse warnings; \n\nuse feature qw(say);\nuse MatchRoutes; # or whatever your package is called\n\nsay MatchRoutes-&gt;new-&gt;match('news/3/edit');\n</code></pre>\n"}], "owner": {"reputation": 2501, "user_id": 117278, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eaf2025323bb63b0befc35491afa618e?s=128&d=identicon&r=PG", "display_name": "kristian nissen", "link": "https://stackoverflow.com/users/117278/kristian-nissen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 28287732, "answer_count": 1, "score": -1, "last_activity_date": 1422915340, "creation_date": 1422914361, "question_id": 28287586, "link": "https://stackoverflow.com/questions/28287586/perl-grep-into-hash-with-arrays-as-values", "title": "Perl grep into hash with arrays as values", "body": "<p>I am building a small web service which has the following routes</p>\n\n<pre><code>my %routes = (\n  'News' =&gt; ['^news', '^news\\/?(.*)?', '^news\\/(\\d+)\\/(edit|delete|update)'],\n  'User' =&gt; ['^users', '^users\\/?(.*)?', '^users\\/(\\d+)\\/(edit|delete|update)'],\n);\n</code></pre>\n\n<p>each key in the %routes is a module, and the corresponding array holds the possible requests that are supported by the module.</p>\n\n<p>So in case the request is \"news/3/edit\" the news module should be found and returned.</p>\n\n<p>What I would like to do, is to grep the correct key, if it's corresponding array values matches the incoming request.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 2, "creation_date": 1422913402, "post_id": 28287270, "comment_id": 44928499, "body": "What is <code>mostrandose</code>?"}, {"owner": {"reputation": 557, "user_id": 4241398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfdb2db93b6307e21b1737efda1b1e93?s=128&d=identicon&r=PG&f=1", "display_name": "adsdsa", "link": "https://stackoverflow.com/users/4241398/adsdsa"}, "reply_to_user": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1422914469, "post_id": 28287270, "comment_id": 44929051, "body": "sorry my bad english , my from is spain."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422920069, "post_id": 28287270, "comment_id": 44931427, "body": "Guys! Please respect non-English speakers. A vote to close because of the language barrier is cowardly."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1422935291, "post_id": 28287270, "comment_id": 44935461, "body": "@adsdsa no need to apologize.  I just had no idea what you meant by that.  It&#39;s good to be as exact as possible here, so if you are able to run your questions through a spell checker before posting, that helps us to help you.  We all make typos. :)"}, {"owner": {"reputation": 719, "user_id": 2904411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d5355e354a21dd690910af55725307?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2904411/chris"}, "edited": false, "score": 0, "creation_date": 1431411198, "post_id": 28287270, "comment_id": 48471788, "body": "The cause of your problem is the trailing = after ipaddress, it should be <code>&#39;ipaddress&#39; =&gt; $target</code>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422920322, "post_id": 28288023, "comment_id": 44931526, "body": "Remember that JavaScript is necessary only to generate the HTML form. If the contents of the form can be assumed then there is no need to involve JavaScript."}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1422916193, "creation_date": 1422916193, "answer_id": 28288023, "question_id": 28287270, "link": "https://stackoverflow.com/questions/28287270/complete-form-with-lwpuseragent-in-perl/28288023#28288023", "title": "Complete form with LWP::UserAgent in Perl", "body": "<p>The answer for <strong>why</strong> your scraper doesn't work is that the website you are interested in uses Javascript, and LWP::UserAgent doesn't support Javascript.</p>\n\n<p>For how to handle this, you have a couple of options.</p>\n\n<ol>\n<li><p>Parse out the JS, and run it using <a href=\"http://search.cpan.org/~claesjac/JavaScript-1.16/lib/JavaScript.pm\" rel=\"nofollow\">the Javascript package</a></p></li>\n<li><p>Use <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm\" rel=\"nofollow\">WWW::Mechanize::Firefox</a> and perl will automate firefox, and use it to process the JS</p></li>\n<li><p>This is Perl (TMTOWTDI) find another package that can parse/process the JS  for you.</p></li>\n</ol>\n"}], "owner": {"reputation": 557, "user_id": 4241398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfdb2db93b6307e21b1737efda1b1e93?s=128&d=identicon&r=PG&f=1", "display_name": "adsdsa", "link": "https://stackoverflow.com/users/4241398/adsdsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422919655, "creation_date": 1422913192, "last_edit_date": 1422919655, "question_id": 28287270, "link": "https://stackoverflow.com/questions/28287270/complete-form-with-lwpuseragent-in-perl", "title": "Complete form with LWP::UserAgent in Perl", "body": "<p>I am trying to complete a form by post using the module <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow\"><code>LWP::UserAgent</code></a> in Perl of melissadata page. The problem is never complete well fields and the request never completes, showing \"normal page\" without the desired result.</p>\n\n<p>The code:</p>\n\n<pre><code>use LWP::UserAgent;\n\nmy $nave = LWP::UserAgent-&gt;new();\n$nave-&gt;timeout(5);\n$nave-&gt;agent(\"Mozilla/5.0 (Windows; U; Windows NT 5.1; nl; rv:1.8.1.12) Gecko/20080201Firefox/2.0.0.12\");\n\nmy $target = \"5.135.178.142\";\n\n$re = tomar(\n  \"http://www.melissadata.com/lookups/iplocation.asp\",\n  { 'ipaddress=' =&gt; $target, 'submit' =&gt; 'Submit' }\n);\n\nif ( $re =~ /City&lt;\\/td&gt;&lt;td align=(.*)&gt;&lt;b&gt;(.*)&lt;\\/b&gt;&lt;\\/td&gt;/ ) {\n  print \"Found : $2\\n\";\n}\nelse {\n  print $re;\n}\n\nsub tomar {\n  my ($web, $var) = @_;\n  return $nave-&gt;post($web, [%{$var}])-&gt;content;\n}\n</code></pre>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["perl", "devel-cover"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1422906901, "post_id": 28285468, "comment_id": 44925306, "body": "Do you need to return <code>undef</code> if <code>@rgb</code> is empty?  Wouldn&#39;t a return value of an empty list indicate the same thing?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1422907781, "post_id": 28285468, "comment_id": 44925747, "body": "1. Switching to an <code>if</code> statement is not going to increase your coverage. 2. I&#39;m guessing from what little is revealed from what you are doing, but It seems to me that returning an empty list would make far more sense than retuning undef. (<code>return map hex, @rgb;</code>)  3. Note that while making that change will claim 100% coverage, there&#39;s still a case you don&#39;t test."}, {"owner": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "edited": false, "score": 0, "creation_date": 1422934831, "post_id": 28285468, "comment_id": 44935325, "body": "If I change the procedure to return an empty list, I keep getting the 50% of coverage. Do you think of another reason of why I might be getting this score?"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1436180056, "creation_date": 1436180056, "answer_id": 31244032, "question_id": 28285468, "link": "https://stackoverflow.com/questions/28285468/develcover-branch-coverage-on-conditional-ternary-operator/31244032#31244032", "title": "Devel::Cover Branch coverage on conditional ternary operator", "body": "<p>You are not getting coverage for the <em>false</em> branch of the ternary, because your tests do not cover a case where <code>@rgb</code> is empty. In that case, the <code>map</code> will never be called, but it will return <code>undef</code> (or <code>()</code> like @ikegami suggested).</p>\n\n<p>The ternary is the same as this:</p>\n\n<pre><code>if (@rgb) { \n  return map { hex $_ } @rgb;\n} else {\n  return undef;\n}\n</code></pre>\n\n<p>So there is a branch there that has not been covered by the test.</p>\n\n<p>You have several options:</p>\n\n<ul>\n<li>go with the empty list and just remove the ternary like ikegami suggested, and take into account that you don't ensure the program does what you want if <code>@rgb</code> has no elements</li>\n<li>add an <code># uncoverable branch false</code> comment as described in <a href=\"https://metacpan.org/pod/Devel::Cover#UNCOVERABLE-CRITERIA\" rel=\"nofollow\">https://metacpan.org/pod/Devel::Cover#UNCOVERABLE-CRITERIA</a></li>\n<li><p>write a test case where it expects <code>@rgb</code> not to have elements</p>\n\n<pre><code>is foo('no_rgbs'), undef, 'returns undef when there are no elements';\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 31244032, "answer_count": 1, "score": 1, "last_activity_date": 1436180056, "creation_date": 1422906084, "question_id": 28285468, "link": "https://stackoverflow.com/questions/28285468/develcover-branch-coverage-on-conditional-ternary-operator", "title": "Devel::Cover Branch coverage on conditional ternary operator", "body": "<p>I'm running <code>cover</code> from <code>Devel::Cover</code> on a module and getting 50% of branch coverage in lines that use the conditional ternary operator i.e.</p>\n\n<p><code>return @rgb ? map { hex $_ } @rgb : undef;</code></p>\n\n<p>Is this OK? Do I have to change the code to use <code>if/else</code> blocks in order to gain the 100% of coverage? </p>\n\n<p>I'm new to <code>Devel::Cover</code> so any insight that you could provide about this, will be really helpful.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1422906372, "post_id": 28285460, "comment_id": 44925027, "body": "yes, that was the problem =( if not <code>cut</code> would be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 3, "last_activity_date": 1422906539, "creation_date": 1422906539, "answer_id": 28285576, "question_id": 28285460, "link": "https://stackoverflow.com/questions/28285460/how-to-extract-lines-from-two-textfiles-linked-by-heading-number-from-the-1st-10/28285576#28285576", "title": "How to extract lines from two textfiles linked by heading number from the 1st 10 characters?", "body": "<pre><code>awk '\n{ key = substr($0,1,10); data = substr($0,11) }\nNR==FNR { file1[key] = data; next }\nkey in file1 { print file1[key] data }\n' file1 file2\n</code></pre>\n\n<p>You could use FIELDWIDTHS with GNU awk rather than substr() if you prefer.</p>\n"}, {"tags": [], "owner": {"reputation": 360, "user_id": 4151506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7fe28b26324008af57a8503a7aaed97?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Darichuk", "link": "https://stackoverflow.com/users/4151506/shawn-darichuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088424, "creation_date": 1423088424, "answer_id": 28332623, "question_id": 28285460, "link": "https://stackoverflow.com/questions/28285460/how-to-extract-lines-from-two-textfiles-linked-by-heading-number-from-the-1st-10/28332623#28332623", "title": "How to extract lines from two textfiles linked by heading number from the 1st 10 characters?", "body": "<p>Super long Perl answer:</p>\n\n<pre><code>use warnings;\nuse strict;\n\n# add files here as needed\nmy @input_files = qw(file1.txt file2.txt);\nmy $output_file = 'output.txt';\n\n# don't touch anything below this line\nmy @output_lines = parse_files(@input_files);\n\nopen (my $output_fh, \"&gt;\", $output_file) or die;\nforeach (@output_lines) {\n    print $output_fh \"$_\\n\";                    #print to output file\n    print \"$_\\n\";                               #print to console\n}\nclose $output_fh;\n\nsub parse_files {\n    my @input_files = @_;                       #list of text files to read.\n    my %data;                                   #will store $data{$index} = datum1 datum2 datum3\n\n    foreach my $file (@input_files) {           \n        open (my $fh, \"&lt;\", $file) or die;       \n        while (&lt;$fh&gt;) { \n            chomp;                              \n            if (/^(\\d{10})\\s?(.*)$/) {\n                my $index = $1;\n                my $datum = $2;\n                if (exists $data{$index}) {\n                    $data{$index} .= \"\\t$datum\";\n                } else {\n                    $data{$index} = $datum;\n                } #/else\n            } #/if regex found\n        } #/while reading current file\n        close $fh;\n    } #/foreach file\n\n    # Create output array\n    my @output_lines;\n    foreach my $key (sort keys %data) {\n        push (@output_lines, \"$data{$key}\");\n    } #/foreach\n\n    return @output_lines;\n} #/sub parse_files\n</code></pre>\n"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28285576, "answer_count": 2, "score": -1, "last_activity_date": 1423088424, "creation_date": 1422906046, "last_edit_date": 1422906407, "question_id": 28285460, "link": "https://stackoverflow.com/questions/28285460/how-to-extract-lines-from-two-textfiles-linked-by-heading-number-from-the-1st-10", "title": "How to extract lines from two textfiles linked by heading number from the 1st 10 characters?", "body": "<p>I have two files:</p>\n\n<p><strong>file1.txt</strong>:</p>\n\n<pre><code>0000001435 XYZ \u4e0e ABC\n0000001438warlaugh \u4e16\u754c\n</code></pre>\n\n<p><strong>file1.txt</strong>:</p>\n\n<pre><code>0000001435 XYZ with abc\n0000001436 DFC whatever\n0000001437 FBFBBBF\n0000001438 world of warlaugh\n</code></pre>\n\n<p>The lines in the separated file are linked by the number (1st 10 characters). The desired output is a tab separated file with lines that exists and <code>file1.txt</code> and the corresponding lines from <code>file2.txt</code>:</p>\n\n<p><strong>file3.txt</strong>:</p>\n\n<pre><code>XYZ \u4e0e ABC   XYZ with abc\nwarlaugh \u4e16\u754c world of warlaugh\n</code></pre>\n\n<p><strong>How do I get the corresponding lines and then create a tab separated file with lines that exists in <code>file1.txt</code> to produce <code>file3.txt</code>?</strong></p>\n\n<p><strong>Note that only the first 10 character constitutes as the ID.</strong>, there are cases like <code>0000001438warlaugh \u4e16\u754c</code> or even <code>0000001432231hahaha lol</code> and only the <code>0000001438</code> and <code>0000001432</code> is the ID. </p>\n\n<p>I tried with python, <strong>getfile3.py</strong>:</p>\n\n<pre><code>import io\nf1 = {line[:10]:line[10:].strip() for line in io.open('file1.txt', 'r', encoding='utf8')}\nf2 = {line[:10]:line[10:].strip() for line in io.open('file1.txt', 'r', encoding='utf8')}\n\nf3 = io.open('file3.txt', 'w', encoding='utf8') \n\nfor i in f1:\n  f3.write(u\"{}\\t{}\\n\".format(f1[i], f2[i]))\n</code></pre>\n\n<p>But is there a bash/awk/grep/perl command-line way that i can get <code>file3.txt</code>?</p>\n"}, {"tags": ["perl", "codepages", "binmode"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4456735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be8f44b3f84c375b8292a16741d78e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4456735/pete"}, "edited": false, "score": 0, "creation_date": 1422907592, "post_id": 28285506, "comment_id": 44925656, "body": "Hi Ben, &quot;comming from your source code&quot; was the hint i needed. I missed the point, that notepad++ was set to utf8. Thank you very much! Pete"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15, "user_id": 4456735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be8f44b3f84c375b8292a16741d78e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4456735/pete"}, "edited": false, "score": 0, "creation_date": 1422911077, "post_id": 28285506, "comment_id": 44927376, "body": "@Pete: The proper solution is to <i>tell</i> Perl that the source is in UTF-8 by adding <code>use utf8</code> as the first statement in your source file. It&#39;s unusual now to use code page 850 (DOS Latin 1) as ISO-8859-1 (code page 1252 apart from a few trivia) has largely superseded it. You may find it simpler to use UTF-8 throughout, which is supported via Windows code page 65001."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1422912052, "post_id": 28285506, "comment_id": 44927877, "body": "Right, if you intend to use the encoding layer anywhere in your program your data must be consistently represented. It&#39;s usually <i>easier</i> to treat everything as bytes, so I don&#39;t typically turn on utf8, even when I&#39;ve got utf8 characters in the source. But I&#39;ll update the answer since it&#39;s the more modern way to do it :)"}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 1, "last_activity_date": 1422913993, "last_edit_date": 1422913993, "creation_date": 1422906281, "answer_id": 28285506, "question_id": 28285039, "link": "https://stackoverflow.com/questions/28285039/perl-special-char-windows/28285506#28285506", "title": "perl special char windows", "body": "<p>When using utf8 characters in your source code and using the IO layer for encoding, you should turn on utf8 in the perl parser:</p>\n\n<pre><code>use utf8; \n\nmy $encoding = $^O eq 'MSWin32' ? 'cp850' : 'utf8';\nbinmode(STDOUT, \":encoding($encoding)\" );\n\nprint \"$_\\n\" for qw/\u00e4 \u00f6 \u00fc \u00df \u00c4 \u00d6 \u00dc/;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4456735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be8f44b3f84c375b8292a16741d78e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4456735/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 1, "accepted_answer_id": 28285506, "answer_count": 1, "score": 0, "last_activity_date": 1422913993, "creation_date": 1422904529, "question_id": 28285039, "link": "https://stackoverflow.com/questions/28285039/perl-special-char-windows", "title": "perl special char windows", "body": "<p>i try to have german special chars: \u00f6\u00e4\u00fc\u00df\u00d6\u00c4\u00dc in the output of ma perl console app, but i failed. It's a german win7 system with active codepage 850.</p>\n\n<pre><code>#!/usr/bin/perl \nuse warnings;\nuse strict;\n\nbinmode(STDOUT , \":encoding(cp437)\" )  if $^O eq 'MSWin32';\n#binmode(STDOUT , \":encoding(cp850)\" )  if $^O eq 'MSWin32';\n#binmode(STDOUT , \":encoding(cp1252)\" ) if $^O eq 'MSWin32';\n\nmy @sp_chars = qw/\u00e4 \u00f6 \u00fc \u00df \u00c4 \u00d6 \u00dc/;\n\nforeach my $sp_char ( @sp_chars ) {\n  print \"$sp_char\\n\";\n}\n</code></pre>\n\n<p>I get errors like:</p>\n\n<pre><code>\"\\x{009f}\" does not map to cp1252 at umlaute.pl line 12.\n\n\"\\x{009f}\" does not map to cp850 at umlaute.pl line 12.\n\n\"\\x{00c3}\" does not map to cp437 at umlaute.pl line 12.\n</code></pre>\n\n<p>How can i get a propper output?</p>\n"}, {"tags": ["perl", "extract", "subdirectory"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1422904619, "post_id": 28285005, "comment_id": 44924059, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  What&#39;s your problem with using the core module <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>?  Please show your code."}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 4151506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7fe28b26324008af57a8503a7aaed97?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Darichuk", "link": "https://stackoverflow.com/users/4151506/shawn-darichuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1422908801, "creation_date": 1422908801, "answer_id": 28286126, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder/28286126#28286126", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<p>Which OS are you using? If it's Windows, I think a simple xcopy command would be a lot easier. Open a console window and type \"xcopy /?\" to get the info on this command. It should be something simple like:</p>\n\n<p>xcopy directory1/*.fna directory2 /s </p>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 1712162, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7PYxR.jpg?s=128&g=1", "display_name": "Nicholas Anderson", "link": "https://stackoverflow.com/users/1712162/nicholas-anderson"}, "is_accepted": false, "score": 1, "last_activity_date": 1422991302, "last_edit_date": 1422991302, "creation_date": 1422941838, "answer_id": 28292059, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder/28292059#28292059", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<p>Without much more information to go on, you don't <em>need</em> a perl script to do something as easy as this.</p>\n\n<p>Here's a *nix one-liner</p>\n\n<pre><code>find /source/dir -name \"*.fna\" -exec mv -t /target/dir '{}' \\+ -print\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 1, "last_activity_date": 1422957812, "creation_date": 1422957812, "answer_id": 28296128, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder/28296128#28296128", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<pre><code>use File::Find;\n\nmy @files;\nfind(\\&amp;search, '/some/path/*.fna');\ndoSomethingWith(@files);\nexit;\n\nsub search {\n  push @files, $File::Find::name;\n  return;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1355, "user_id": 48167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc87ac1f18c71c8fad6703be6de20c44?s=128&d=identicon&r=PG", "display_name": "Mekk", "link": "https://stackoverflow.com/users/48167/mekk"}, "is_accepted": true, "score": 2, "last_activity_date": 1431494879, "last_edit_date": 1431494879, "creation_date": 1423003369, "answer_id": 28310168, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder/28310168#28310168", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<p>As File::Find is recommended everywhere, let me add that there are other, sometimes nicer, options, like <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow\">https://metacpan.org/pod/Path::Iterator::Rule</a> or Path::Class traverse function. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1423839292, "post_id": 28501905, "comment_id": 45323673, "body": "This code should be added to the question and indented properly (and then this answer should be deleted)."}], "tags": [], "owner": {"reputation": 33, "user_id": 4521277, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BZmDt02J4kI/AAAAAAAAAAI/AAAAAAAAAH0/CmY0yQXvJUU/photo.jpg?sz=128", "display_name": "Nik", "link": "https://stackoverflow.com/users/4521277/nik"}, "is_accepted": false, "score": 0, "last_activity_date": 1423838107, "creation_date": 1423838107, "answer_id": 28501905, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder/28501905#28501905", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<p>sorry for the late response. I was away for a conference. Here is my code which seem to work fine so far.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Cwd;\nuse FileHandle;\nopen my $out, \"&gt;&gt;results7.txt\" or die;\nmy $parent = \"/home/denis/Denis_data/Ordered species\";\nmy ($par_dir, $sub_dir); \nopendir($par_dir, $parent); \nwhile (my $sub_folders = readdir($par_dir)) {\nnext if ($sub_folders =~ /^..?$/);  # skip . and ..\nmy $path = $parent . '/' . $sub_folders;\n#my $path = $sub_folders;\nnext unless (-d $path);   # skip anything that isn't a directory\nchdir($path) or die;\nsystem 'perl batch_hmm.pl';\nprint $out $path.\"\\n\";\n#chdir('..') or die;\n#closedir($sub_dir);\n}\nclosedir($par_dir);\n</code></pre>\n\n<p>I will also try the File::Finder option. The above one looks quite messy.</p>\n"}], "owner": {"reputation": 33, "user_id": 4521277, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BZmDt02J4kI/AAAAAAAAAAI/AAAAAAAAAH0/CmY0yQXvJUU/photo.jpg?sz=128", "display_name": "Nik", "link": "https://stackoverflow.com/users/4521277/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "accepted_answer_id": 28310168, "answer_count": 5, "score": 0, "last_activity_date": 1431494879, "creation_date": 1422904409, "last_edit_date": 1422904997, "question_id": 28285005, "link": "https://stackoverflow.com/questions/28285005/perl-search-for-a-particular-file-extension-in-folder-and-sub-folder", "title": "Perl search for a particular file extension in folder and sub folder", "body": "<p>I have a folder which has over 1500 files scattered around in different sub-folders with extension <code>.fna</code>. I was wondering if there is a simple way in Perl to extract all these files and store them in a different location?</p>\n"}, {"tags": ["arrays", "perl", "hash", "perl-data-structures"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422903841, "post_id": 28284446, "comment_id": 44923653, "body": "Do you mean <code>@test2 = (4, 44, 444)</code>? As you&#39;ve written it it&#39;s a one-element array. Are your hash keys <i>really</i> <code>VAR1</code>, <code>VAR2</code> etc? Because if so then you need arrays and not hashes."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1422907257, "last_edit_date": 1422907257, "creation_date": 1422902554, "answer_id": 28284533, "question_id": 28284446, "link": "https://stackoverflow.com/questions/28284446/adding-another-key-to-an-array-of-hashes-from-an-array/28284533#28284533", "title": "Adding another key to an array of hashes from an array?", "body": "<p>First of all, why is <code>@test2</code> an array if all it contains is a string??? To fix that, you can use the following:</p>\n\n<pre><code>my @real_test2 = split(/,/, $test2[0]);\n</code></pre>\n\n<hr>\n\n<p>Why are you using hashes as arrays???? Use an AoA! If you had an AoA, it would be</p>\n\n<pre><code>for my $i (0..$#result) {\n   push @{ $result[$i] }, $real_test2[$i];\n}\n</code></pre>\n\n<p>If you want to stick with an AoH, it's very similar.</p>\n\n<pre><code>for my $i (0..$#result) {\n   my $rec = $result[$i];\n   my $key = 'VAR' . ( keys(%$rec) + 1 );\n   $rec-&gt;{$key} = $real_test2[$i];\n}\n</code></pre>\n\n<p>Or if you know the key is always going to be the same, you could optimize a little.</p>\n\n<pre><code>if (@result) {\n   my $key = 'VAR' . ( keys(%{ $result[0] }) + 1 );\n   for my $rec (@result) {\n      $rec-&gt;{$key} = shift(@real_test2);\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1422904686, "creation_date": 1422904686, "answer_id": 28285090, "question_id": 28284446, "link": "https://stackoverflow.com/questions/28284446/adding-another-key-to-an-array-of-hashes-from-an-array/28285090#28285090", "title": "Adding another key to an array of hashes from an array?", "body": "<pre><code>$test[$_]{VAR4} = $test2[$_] foreach 0..$#test2;\n</code></pre>\n\n<p>I have to agree with ikegami that its a very bad use of hashes. </p>\n\n<p>The key to a hash should not be <em>numerically</em> significant&mdash;or significant of <em>order</em>. It should be <em>mnemonically</em> significant. It should tell you <em>what</em> the 4 is. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1422905136, "last_edit_date": 1422905136, "creation_date": 1422904722, "answer_id": 28285099, "question_id": 28284446, "link": "https://stackoverflow.com/questions/28284446/adding-another-key-to-an-array-of-hashes-from-an-array/28285099#28285099", "title": "Adding another key to an array of hashes from an array?", "body": "<p>If you <em>really</em> want to stick to using an array of hashes, then this will work for you.</p>\n\n<p>The <code>for</code> loop iterates over all the indices of <code>@test</code> and <code>@test2</code>. I've used the <code>min</code> function from <a href=\"https://metacpan.org/module/List::Util\" rel=\"nofollow\"><code>List::Util</code></a> to find the last index of the shorter of the two arrays. This avoids falling off the end of one or other of the arrays in case they are different lengths.</p>\n\n<p>The highest-numbered hash key is found by using a regular expression to extract the numeric part of each key, together with the <code>max</code> function, also from <code>List::Util</code>. The next key to be used is one more than this maximum, preceded by the string <code>VAR</code>.</p>\n\n<p>I've used <a href=\"https://metacpan.org/module/Data::Dump\" rel=\"nofollow\"><code>Data::Dump</code></a> only to show the resultant data structure.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw/ min max /;\n\nmy @test = (\n  { VAR1 =&gt; 1,   VAR2 =&gt; 2,   VAR3 =&gt; 3 },\n  { VAR1 =&gt; 11,  VAR2 =&gt; 22,  VAR3 =&gt; 33 },\n  { VAR1 =&gt; 111, VAR2 =&gt; 222, VAR3 =&gt; 333 },\n);\n\nmy @test2 = (4, 44, 444);\nmy $limit = min $#test, $#test2;\n\nfor my $i (0 .. $limit) {\n  my $max = max map /(\\d+)/, keys %{ $test[$i] };\n  $test[$i]{'VAR'.++$max} = $test2[$i];\n}\n\nuse Data::Dump;\ndd \\@test;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>[\n  { VAR1 =&gt; 1, VAR2 =&gt; 2, VAR3 =&gt; 3, VAR4 =&gt; 4 },\n  { VAR1 =&gt; 11, VAR2 =&gt; 22, VAR3 =&gt; 33, VAR4 =&gt; 44 },\n  { VAR1 =&gt; 111, VAR2 =&gt; 222, VAR3 =&gt; 333, VAR4 =&gt; 444 },\n]\n</code></pre>\n\n<p>But if you want to go for an array of arrays, then it will look more like this. It's quite similar, except that I can just use <code>push</code> instead of calculating an index for the next element of the arrays.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw/ min /;\n\nmy @test = (\n  [ 1, 2, 3 ],\n  [ 11, 22, 33 ],\n  [ 111, 222, 333 ],\n);\n\nmy @test2 = (4, 44, 444);\nmy $limit = min $#test, $#test2;\n\nfor my $i (0 .. $limit) {\n  push @{ $test[$i] }, $test2[$i];\n}\n\nuse Data::Dump;\ndd \\@test;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>[[1 .. 4], [11, 22, 33, 44], [111, 222, 333, 444]]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4521102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaed2121f38d6ff98e47761e9140793a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4521102/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1422907257, "creation_date": 1422902216, "last_edit_date": 1422907111, "question_id": 28284446, "link": "https://stackoverflow.com/questions/28284446/adding-another-key-to-an-array-of-hashes-from-an-array", "title": "Adding another key to an array of hashes from an array?", "body": "<p>Let's say there's an array of hashes as shown:</p>\n\n<pre><code>@test = (\n   {\n      VAR1 =&gt; \"1\",\n      VAR2 =&gt; \"2\",\n      VAR3 =&gt; \"3\",\n   },\n   {\n      VAR1 =&gt; \"11\",\n      VAR2 =&gt; \"22\",\n      VAR3 =&gt; \"33\",\n   },\n   {\n      VAR1 =&gt; \"111\",\n      VAR2 =&gt; \"222\",\n      VAR3 =&gt; \"333\",\n   },\n);\n</code></pre>\n\n<p>And an array:</p>\n\n<pre><code>@test2 = (\"4,44,444\");\n</code></pre>\n\n<p>How would one go about adding the array as a key-value pair in the array of hashes?</p>\n\n<p>Shooting for an end result that would look like:</p>\n\n<pre><code>@result = (\n   {\n      VAR1 =&gt; \"1\",\n      VAR2 =&gt; \"2\",\n      VAR3 =&gt; \"3\",\n      VAR4 =&gt; \"4\",\n   },\n   {\n      VAR1 =&gt; \"11\",\n      VAR2 =&gt; \"22\",\n      VAR3 =&gt; \"33\",\n      VAR4 =&gt; \"44\",\n   },\n   {\n      VAR1 =&gt; \"111\",\n      VAR2 =&gt; \"222\",\n      VAR3 =&gt; \"333\",\n      VAR4 =&gt; \"444\",\n   },\n);\n</code></pre>\n\n<p>I'm new to perl and not really sure how this could be accomplished. Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1422902211, "post_id": 28284349, "comment_id": 44922818, "body": "This works remember... so adding the command line argument would get rid of the garbage?  I thought the &lt;&gt; read from the command line no matter what."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1422902494, "post_id": 28284349, "comment_id": 44922981, "body": "That seems to get rid of the garbage.  What was the argument that I could add inside the .pl for command line args so I don&#39;t have to add the &quot;&lt;&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1422902592, "post_id": 28284349, "comment_id": 44923030, "body": "@MarcB: You don&#39;t appear to know what you&#39;re talking about. <code>&lt;&gt;</code> will read from the files listed in <code>@ARGV</code>, or <code>STDIN</code> if it is empty."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1422902649, "post_id": 28284349, "comment_id": 44923063, "body": "yes, and that&#39;s what&#39;s happening above. it read from argv[0], which is the script itself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422902850, "post_id": 28284349, "comment_id": 44923161, "body": "@johnstamos: Please write questions so that they stand by themselves. Starting with <i>&quot;I have it working&quot;</i> tells me nothing about your problem, and I can make little sense of it"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422902981, "post_id": 28284349, "comment_id": 44923233, "body": "@Borodin edited my question - &quot;My code works, except it prints some garbage at the beginning of the output file.&quot;  I&#39;ve solved this problem now.  Only problem I have now is skipping the first line to avoid editing the column headers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1422903036, "post_id": 28284349, "comment_id": 44923261, "body": "@MarcB: Please don&#39;t mislead people. Perl isn&#39;t C, and the script file is in <code>$0</code>. <code>$ARGV[0]</code> is the first command-line parameter. You can read from files specified on a command line like <code>.&#47;script.pl inputfile &gt; outputfile</code> using <code>&lt;&gt;</code> without explicitly opening them."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422903155, "post_id": 28284349, "comment_id": 44923321, "body": "The original question that has the script intermixed with the output might be useful to other people by itself (with an answer, of course) if re-titled."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1422903196, "post_id": 28284349, "comment_id": 44923342, "body": "@MarcB Not quite. From <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perldoc perlvar</code></a>: &quot;The array <code>@ARGV</code> contains the command-line arguments intended for the script.  <code>$#ARGV</code> is generally the number of arguments minus one, because <code>$ARGV[0]</code> is the first argument, not the program&#39;s command name itself.  See <code>$0</code> for the command name.&quot; The OP&#39;s latest edit shows that they were passing the script name as the first argument on the command line."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1422903228, "post_id": 28284349, "comment_id": 44923353, "body": "sigh... right. I&#39;ll just go slink off into the corner and brush up on my perl... it&#39;s been a long time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422919211, "post_id": 28284349, "comment_id": 44931090, "body": "@Paul: I&#39;m struggling to understand what you mean. Are you saying that people may want to write a program that reads its own source? That is a little strange, but would be best written as <code>open my $me, &#39;&lt;&#39;, $0</code>"}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422920374, "post_id": 28284349, "comment_id": 44931544, "body": "@Borodin No, I meant that the following version of this question might have been useful for future readers Q:&quot;Why does program output include program&#39;s source code?&quot; A:&quot;Reading from <code>&lt;&gt;</code> reads all lines in all files named in <code>@ARGV</code> and you included the source file in @ARGV by typing it in twice when you ran it.&quot;  As is, this looks more like the ubiquitous do-my-work-for-me-because-I-won&#39;t-lookup-how-to-define-vars-&zwnj;&#8203;or-if-statements type of question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 1, "creation_date": 1422920610, "post_id": 28284349, "comment_id": 44931622, "body": "@Paul: Okay. But I am struggling to believe that typing the source file name twice is a common problem."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422920804, "post_id": 28284349, "comment_id": 44931682, "body": "@johnstamos I don&#39;t mean to be mean-spirited.  Welcome to Stack Overflow.  The goal of this Stack Overflow involves a bit of bait-and-switch.  The purpose of Stack Overflow is to build a library of the world&#39;s programming questions and answers, so that when someone has a problem, they can find good examples in that library. Often questions that don&#39;t fit this pattern tend to be mercilessly downvoted, closed down, etc... A lot of questions are borderline.  I may have even asked a few of those.... Good luck."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422920893, "post_id": 28284349, "comment_id": 44931713, "body": "@Borodin Using something cryptic-looking like <code>&lt;&gt;</code> without knowing what it does is more of a problem.  It is also difficult to google <code>&lt;&gt;</code>.  I suppose one can <code>man perlop</code> but even that is assuming a lot.  Just noticed I can <code>man perl</code> but not <code>man perlop</code> on this machine I am typing on..."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422921320, "post_id": 28284349, "comment_id": 44931853, "body": "@Borodin Since it was a typo, it could have been closed at that point using the off-topic reason of &quot;problem that can no longer be reproduced or a simple typographical error...&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422921494, "post_id": 28284349, "comment_id": 44931903, "body": "@Paul: Try <code>perldoc perlop</code>"}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422921536, "post_id": 28284349, "comment_id": 44931929, "body": "@Borodin Needs <code>apt-get install perl-doc</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422921602, "post_id": 28284349, "comment_id": 44931950, "body": "@Paul: Without that, <code>man perlop</code> is never going to work either. I suggest you invest a few KB of disk space on the documentation!"}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422922114, "post_id": 28284349, "comment_id": 44932094, "body": "Looking around in <code>perl-doc perlop</code> the <code>&lt;&gt;</code> is used in sample code before it is defined, fairly early.  The first decent explanation is pretty late in the docs and begins &quot;The null filehandle <code>&lt;&gt;</code> is special: it can be used to emulate the behavior of sed and awk or any other Unix filter program that takes a list of filenames, doing the same to each line of input from all of them... &quot;  I suppose it really is too much to expect busy people to muck through all that.... and they shouldn&#39;t have to read some murky comparisons to get to the explanation of what it does."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1422922566, "post_id": 28284349, "comment_id": 44932233, "body": "<code>while (&lt;&gt;)</code> isn&#39;t in <code>perldoc perlcheat</code> either.  Not much about files in perlcheat."}], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422904352, "post_id": 28284825, "comment_id": 44923914, "body": "Good.  But the first line, 4th column header is still edited and printed in the output file.  Still results to -8.00000.  Do see the warning about it now though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422905273, "post_id": 28284825, "comment_id": 44924443, "body": "What is the warning that you get, please?"}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422905373, "post_id": 28284825, "comment_id": 44924494, "body": "Argument &quot;Header 4&quot; isn&#39;t numeric in subtraction (-) at ./column3Minus8.pl line 24, &lt;&gt; line 1."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422905704, "post_id": 28284825, "comment_id": 44924672, "body": "Line 24 is the sprintf line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 2, "creation_date": 1422906868, "post_id": 28284825, "comment_id": 44925290, "body": "@johnstamos:  At a guess, you don&#39;t have the <code>print scalar &lt;&gt;</code> line in there."}, {"owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "edited": false, "score": 0, "creation_date": 1422912464, "post_id": 28284825, "comment_id": 44928063, "body": "You win all the marbles."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1422903665, "creation_date": 1422903665, "answer_id": 28284825, "question_id": 28284349, "link": "https://stackoverflow.com/questions/28284349/perl-minus-a-constant-8-from-4th-column-of-a-text-file/28284825#28284825", "title": "Perl: Minus a constant (8) from 4th column of a text file", "body": "<p>There are still a few minor problems with your program. You should also have <code>use warnings</code> in place, and you should <code>chomp</code> each line in case it is the <em>last</em> column that you want to modify.</p>\n\n<p>This program adds the necessary code to take the value to be subtracted from the fourth column from the command line, and to copy the first line of the file.</p>\n\n<p>You should run this as</p>\n\n<pre><code>column3minus.pl 8 inputfile &gt; outputfile\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $delta = shift;\n\nprint scalar &lt;&gt;;  # Duplicate first line\n\nwhile (&lt;&gt;) {\n  chomp;\n  my @columns = split /,\\s*/;\n  $columns[3] = sprintf '%.5f', $columns[3] - $delta;\n  print join(', ', @columns), \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 961, "user_id": 2079306, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Wm1fn.jpg?s=128&g=1", "display_name": "john stamos", "link": "https://stackoverflow.com/users/2079306/john-stamos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28284825, "answer_count": 1, "score": -1, "last_activity_date": 1422903665, "creation_date": 1422901845, "last_edit_date": 1422903229, "question_id": 28284349, "link": "https://stackoverflow.com/questions/28284349/perl-minus-a-constant-8-from-4th-column-of-a-text-file", "title": "Perl: Minus a constant (8) from 4th column of a text file", "body": "<p>My code works, except it prints some garbage at the beginning of the output file.  I can just delete it manually, but would prefer my script to work. The input file is 19 columns of number data seperated by \", \" (comma space) with titles of each column on the 0th line (which I'd like to skip, another issue).</p>\n\n<p>I call my file with ./column3Minus8.pl INPUTFILE > OUTPUT.txt</p>\n\n<pre><code> #!/usr/bin/perl\n\n use strict;\n\n while(&lt;&gt;) {\n    my @columns = split \", \", $_;\n    $columns[3] = sprintf(\"%.5f\", $columns[3] - 8);\n    print join \", \", @columns;  \n }\n</code></pre>\n\n<p>The garbage at the beginning of output.txt is </p>\n\n<pre><code> #!/usr/bin/perl\n , , , -8.00000\n , , , -8.00000use strict;\n , , , -8.00000\n , , , -8.00000while(&lt;&gt;) {\n , , , -8.00000 my @columns = split \", \", $_;\n , -8.00000 $columns[3] = sprintf(\"%.5f\", $columns[3] - 8);\n , , -8.00000   print join \", \", @columns;  \n , -8.00000}, , , -8.00000\n</code></pre>\n\n<p>EDITFIX:  I was calling the perl file twice in my command line call which was causing the garbage.  \"./column3Minus8.pl column3Minus8.pl INPUTFILE > OUTPUT.txt\"  Oops.  I'd still like to know how to skip the first line though.  And replace the constant.</p>\n\n<p>TODO: Replace constant 8 with var.  Skip the 0th row so it does not get edited.</p>\n"}, {"tags": ["windows", "git", "perl", "cpan"], "comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1422907731, "post_id": 28283602, "comment_id": 44925723, "body": "<i>Please</i> think of the Perl that comes with MSys-Git as a library for Git only.  Don&#39;t ever <i>Intentionally</i> use it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1422900396, "post_id": 28283952, "comment_id": 44921881, "body": "This may be harder than it looks... msys perl told me &quot;OS unsupported&quot; when I tried it. Apparently msys is treated as a separate platform, like cygwin, but it&#39;s not as well supported as cygwin."}, {"owner": {"reputation": 899, "user_id": 863091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e44667dbe576b57503caf63d64e500?s=128&d=identicon&r=PG", "display_name": "Enrico Sada", "link": "https://stackoverflow.com/users/863091/enrico-sada"}, "edited": false, "score": 0, "creation_date": 1422901488, "post_id": 28283952, "comment_id": 44922428, "body": "tried to install, commented &quot;os unsupported&quot; for try it, but i cannot nmake it       <code>NMAKE : fatal error U1073: don&#39;t know how to make &#39;&#47;usr&#47;lib&#47;perl5&#47;5.8.8&#47;msys&#47;Config.pm&#39;     Stop.</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1422901690, "post_id": 28283952, "comment_id": 44922553, "body": "<code>msys</code> is a unix emulation environment. You need to use a <code>make</code> that&#39;s part of that environment (not <code>nmake</code>). You&#39;ll have other problems installing a Windows-based module in a smulated unix environment (though it is possible given that you are actually on a Windows platform). But why oh why are you using ancient limited <code>msys</code>? You mention you have ActivePerl installed. Why not use that?"}, {"owner": {"reputation": 899, "user_id": 863091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e44667dbe576b57503caf63d64e500?s=128&d=identicon&r=PG", "display_name": "Enrico Sada", "link": "https://stackoverflow.com/users/863091/enrico-sada"}, "edited": false, "score": 0, "creation_date": 1422902352, "post_id": 28283952, "comment_id": 44922898, "body": "i am trying to run it on <a href=\"http://www.appveyor.com/\" rel=\"nofollow noreferrer\">appveyor.com</a> ( an hosted ci server) where activeperl is not installed ( too much time to download+install )  i have activestate perl installed my machine , but i cannot install it on server (where perl script should run) On that server i have git ( so perl bundled with it ) and i was trying to run it anyway, but maybe is not possible"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422900329, "creation_date": 1422900329, "answer_id": 28283952, "question_id": 28283602, "link": "https://stackoverflow.com/questions/28283602/use-win32process-with-perl-of-msys-git/28283952#28283952", "title": "Use Win32::Process with Perl of msys git", "body": "<p>You have to <em>install</em> the module. You can't just copy the contents of the distribution into your include path.</p>\n\n<p>Take a look at <a href=\"http://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow\"><code>perldoc perlmodinstall</code></a>.</p>\n"}], "owner": {"reputation": 899, "user_id": 863091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e44667dbe576b57503caf63d64e500?s=128&d=identicon&r=PG", "display_name": "Enrico Sada", "link": "https://stackoverflow.com/users/863091/enrico-sada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2151, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1422909493, "creation_date": 1422899149, "last_edit_date": 1422909493, "question_id": 28283602, "link": "https://stackoverflow.com/questions/28283602/use-win32process-with-perl-of-msys-git", "title": "Use Win32::Process with Perl of msys git", "body": "<p>I have a <a href=\"https://github.com/Microsoft/visualfsharp/blob/fsharp4/tests/fsharpqa/testenv/bin/runall.pl\" rel=\"nofollow\">Perl script</a>, work ok with ActiveState Perl but I am trying to run it with perl.exe bundled with msys git (from Windows command prompt)</p>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>Can't locate Win32/Process.pm in @INC (@INC contains: /usr/lib/perl5/5.8.8/msys /usr/lib/perl5/5.8.8 /usr/lib/perl5/site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl .) at C:\\project\\tests\\fsharpqa\\testenv\\bin\\runall.pl line 3859.</p>\n</blockquote>\n\n<p>git Perl is:</p>\n\n<pre><code>C:\\Program Files (x86)\\Git\\bin&gt;perl --version\n</code></pre>\n\n<blockquote>\n  <p>This is perl, v5.8.8 built for msys</p>\n</blockquote>\n\n<p>Activestate per is:</p>\n\n<blockquote>\n  <p>This is perl 5, version 16, subversion 3 (v5.16.3) built for MSWin32-x64-multi-thread</p>\n</blockquote>\n\n<p>I've tried:</p>\n\n<ol>\n<li>Download <a href=\"http://search.cpan.org/~jdb/Win32-Process-0.16/Process.pm\" rel=\"nofollow\">Win32-Process module</a> from cpan </li>\n<li>Unzip in a directory <code>d:\\temp\\perllib</code></li>\n<li><code>Process.pm</code> exists in <code>d:\\temp\\perllib\\Win32</code></li>\n<li>Add directory <code>/d/temp/perllib</code> to <code>PERL5LIB</code> env var</li>\n</ol>\n\n<p>But no luck, I get:</p>\n\n<pre><code>C:\\Program Files (x86)\\Git\\bin&gt;.\\perl.exe -e 'use Win32::Process;'\n</code></pre>\n\n<blockquote>\n  <p>Can't locate loadable object for module Win32::Process in @INC (@INC contains: /d/temp/perllib /usr/lib/perl5/5.8.8/msys /usr/lib/perl5/5.8.8 /usr/lib/perl5/site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl .) at -e line 1</p>\n</blockquote>\n\n<p>With wrong directory in <code>PERL5LIB</code> I get instead:</p>\n\n<pre><code>C:\\Program Files (x86)\\Git\\bin&gt;.\\perl.exe -e 'use Win32::Process;'\n</code></pre>\n\n<blockquote>\n  <p>Can't locate Win32/Process.pm in @INC (@INC contains: /d/temp/perllib2 /usr/lib/perl5/5.8.8/msys /usr/lib/perl5/5.8.8 /usr/lib/perl5/site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl .) at -e line 1.</p>\n</blockquote>\n"}, {"tags": ["perl", "templates", "unpack"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1422894657, "post_id": 28281962, "comment_id": 44918745, "body": "<code>unpack(&quot;x238 A4&quot;, $line)</code> returns &quot;0000&quot; for me with your data. Please compare the code you&#39;re running with the code you pasted."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1422894857, "post_id": 28281962, "comment_id": 44918878, "body": "At a guess, maybe your original data has tabs instead of sequences of spaces. A tab might visually occupy more than one <i>column</i>, but it&#39;s only one <i>character</i>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1422896471, "last_edit_date": 1422896471, "creation_date": 1422895187, "answer_id": 28282418, "question_id": 28281962, "link": "https://stackoverflow.com/questions/28281962/unpack-and-x-option-in-template/28282418#28282418", "title": "Unpack and x option in TEMPLATE", "body": "<p>First of all, your data isn't what you said it is. The data you provided produces the desired result.</p>\n\n<pre><code>$ perl -E'\n   my $line = \"46S990BZ6BRIG___1381TRANSOCEAN_LTD______________BCALL_FEB00025000__1000000000000000000000000000000000000000B90002132015000000099999900161100000000000000007500111214111414121714100003000_H8817H100015012200005000000000010000000000000000000000009920202020150213__20_________________________________________________OV__0203P\";\n   $line =~ s/_/ /g;\n   say unpack(\"x238 A4\", $line);\n'\n0000\n</code></pre>\n\n<p>Maybe your actual data contained non-printable characters. Or maybe some of the spaces were actually tabs.</p>\n\n<pre><code>$ perl -E'\n   $_ = \"46S990BZ6BRIG___1381TRANSOCEAN_LTD______________BCALL_FEB00025000__1000000000000000000000000000000000000000B90002132015000000099999900161100000000000000007500111214111414121714100003000_H8817H100015012200005000000000010000000000000000000000009920202020150213__20_________________________________________________OV__0203P\";\n   s/_/ /g;\n   s/LTD\\K\\s+/\\t\\t/;  # If the spaces after LTD were tabs\n   say unpack(\"x238 A4\", $_);\n'\n2015\n</code></pre>\n\n<p>If you want to extract the characters at based on how your viewer expands tabs, you will need to expand tabs to spaces in the same fashion before passing the string to <code>unpack</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4520669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e73aed10dbcec555544ac2560e51d6e?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfly", "link": "https://stackoverflow.com/users/4520669/dragonfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422896471, "creation_date": 1422893690, "last_edit_date": 1422894023, "question_id": 28281962, "link": "https://stackoverflow.com/questions/28281962/unpack-and-x-option-in-template", "title": "Unpack and x option in TEMPLATE", "body": "<p>I have a row which looks like (no new lines, this is one line and I replaces the spaces with _ as otherwise they are trimmed):</p>\n\n<blockquote>\n  <p>46S990BZ6BRIG___1381TRANSOCEAN_LTD______________BCALL_FEB00025000__1000000000000000000000000000000000000000B90002132015000000099999900161100000000000000007500111214111414121714100003000_H8817H100015012200005000000000010000000000000000000000009920202020150213__20_________________________________________________OV__0203P</p>\n</blockquote>\n\n<p>The the use of unpack perl method returns as follows:</p>\n\n<pre><code>unpack(\"x49 A4\", $line); # where $line is the above example line\n</code></pre>\n\n<p>returns: CALL</p>\n\n<pre><code>unpack(\"x68 A4\", $line);\n</code></pre>\n\n<p>returns: 0122</p>\n\n<pre><code>unpack(\"x238 A4\", $line);\n</code></pre>\n\n<p>return: 2015</p>\n\n<p>Apparently, the column numbers do not match with the number given after 'x' in the TEMPLATE, as x238 is not equal to column 238 ('0000'), I have '2015' on column 251, not 238. The same for the other.</p>\n\n<p>Please, explain how exactly the numbers given after 'x' in TEMPLATE work.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 3, "creation_date": 1422892556, "post_id": 28281300, "comment_id": 44917305, "body": "This looks like a YAML  file, if so you should use a YAML parser to read YAML files. <a href=\"https://metacpan.org/pod/YAML::Tiny\" rel=\"nofollow noreferrer\"><code>YAML::Tiny</code></a> is a nice one, there are several others on CPAN."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1422892643, "post_id": 28281300, "comment_id": 44917359, "body": "<code>&lt;IN&gt;&#39;&lt;&#47;br&gt;&#39;</code> is a syntax error... Perhaps you meant to do <code>&lt;IN&gt; . &#39;&lt;&#47;br&gt;&#39;</code> Although if you are trying to view a YAML like format on a web page, you might want to wrap it in <code>&lt;pre&gt; .. &lt;&#47;pre&gt;</code> instead."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422893113, "post_id": 28281300, "comment_id": 44917697, "body": "I <i>think</i> it&#39;s trying to have a <code>&lt;BR&#47;&gt;</code> at the end of each line, which isn&#39;t going to work with file slurping."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4520545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4d29253bc7433b177bb199e91a8df70?s=128&d=identicon&r=PG&f=1", "display_name": "Nexius2", "link": "https://stackoverflow.com/users/4520545/nexius2"}, "edited": false, "score": 0, "creation_date": 1422945917, "post_id": 28281776, "comment_id": 44938664, "body": "I don&#39;t know what YAML is, I&#39;ll look at it. I&#39;m just wanted to display my changelog (.txt) in an HTML page. aniway, that was it! so simple when it&#39;s there :-) thanks !"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1422893047, "creation_date": 1422893047, "answer_id": 28281776, "question_id": 28281300, "link": "https://stackoverflow.com/questions/28281300/perl-read-a-file-into-a-variable-and-add-suffix-to-each-lines/28281776#28281776", "title": "Perl Read a file into a variable and add suffix to each lines", "body": "<p>As someone comments - this looks like YAML, so parsing as YAML is probably more appropriate. </p>\n\n<p>However to address your scenario:</p>\n\n<ul>\n<li>3 argument file opens are good.</li>\n<li>you're using <code>local $/;</code> which means you're reading the whole file into a string. This is not suitable for line by line processing. </li>\n</ul>\n\n<p>Looks like you're putting everything into one element of a hash. Is there any particular reason you're doing this?</p>\n\n<p>Anyway:</p>\n\n<pre><code>if ( open ( my $input, \"&lt;\", \"CHANGELOG.OLD\" ) ) {\n    while ( my $line = &lt;$input&gt; ) {\n        $tmplhtml{'CHANGELOG'} .= $line . \" &lt;BR/&gt;\\n\";\n    } \n}\nelse { \n    $tmplhtml{'CHANGELOG'} = \"Changelog not available\";\n}\n</code></pre>\n\n<p>As an alternative - you can render text 'neatly' to HTML using <code>&lt;PRE&gt;</code> tags. </p>\n"}], "owner": {"reputation": 13, "user_id": 4520545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4d29253bc7433b177bb199e91a8df70?s=128&d=identicon&r=PG&f=1", "display_name": "Nexius2", "link": "https://stackoverflow.com/users/4520545/nexius2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 28281776, "answer_count": 1, "score": -1, "last_activity_date": 1422893137, "creation_date": 1422891628, "last_edit_date": 1422893137, "question_id": 28281300, "link": "https://stackoverflow.com/questions/28281300/perl-read-a-file-into-a-variable-and-add-suffix-to-each-lines", "title": "Perl Read a file into a variable and add suffix to each lines", "body": "<p>I'm very new to Perl and I'm having a hard time find out what I want.</p>\n\n<p>I have a text file containing something like</p>\n\n<pre><code>text 2015-02-02:\n- blabla1\n- blabla2\ntext2 2014-12-12:\n- blabla\n- ...\n</code></pre>\n\n<p>I'm trying to read the file, put it in var, add  to end of each line (of my var) and use it to send it to a web page.</p>\n\n<p>This is what I have for the moment. It works except for the  part.</p>\n\n<pre><code>if (open (IN, \"CHANGELOG.OLD\")) { \n        local $/;   \n        $oldchangelog = &lt;IN&gt;'&lt;/br&gt;';            \n        close (IN);\n    $tmplhtml{'CHANGELOG'} = $oldchangelog;\n} else {\n    # changelog not available\n    $tmplhtml{'CHANGELOG'} = \"Changelog not available\";\n}\n</code></pre>\n\n<p>thanks for the help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 36703, "user_id": 204701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPN8z.jpg?s=128&g=1", "display_name": "Mihai Iorga", "link": "https://stackoverflow.com/users/204701/mihai-iorga"}, "edited": false, "score": 0, "creation_date": 1422891325, "post_id": 28281134, "comment_id": 44916451, "body": "Did you try something first?"}, {"owner": {"reputation": 45, "user_id": 3895436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8b2517f0c4ea490bc80a934bb6f6485a?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3895436/sriram"}, "reply_to_user": {"reputation": 36703, "user_id": 204701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPN8z.jpg?s=128&g=1", "display_name": "Mihai Iorga", "link": "https://stackoverflow.com/users/204701/mihai-iorga"}, "edited": false, "score": 0, "creation_date": 1422891389, "post_id": 28281134, "comment_id": 44916495, "body": "I was planning to try with renaming files with number of pages as filename to have it sorted. Thought of getting some suggestions before doing that..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422893637, "post_id": 28281134, "comment_id": 44918046, "body": "What do you mean by <i>&quot;Comparison of each file with the rest and sorting is not an optimal solution.&quot;</i>? You&#39;ve just asked <i>&quot;how to sort n number of PDF files in a folder&quot;</i>!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3895436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8b2517f0c4ea490bc80a934bb6f6485a?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3895436/sriram"}, "edited": false, "score": 0, "creation_date": 1422948689, "post_id": 28281489, "comment_id": 44939731, "body": "Thanks for the suggestion Mark. I will use the logic you suggested and the one Borodin had suggested below and see if which logic suits my requirement better."}], "tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 1, "last_activity_date": 1422892182, "creation_date": 1422892182, "answer_id": 28281489, "question_id": 28281134, "link": "https://stackoverflow.com/questions/28281134/sort-a-number-of-pdf-files-in-increasing-order-of-page-count-using-perl/28281489#28281489", "title": "Sort a number of PDF files in increasing order of page count using Perl", "body": "<p>With ImageMagick's <code>identify</code> command</p>\n\n<pre><code>identify -format \"%n %f\\n\" *.pdf | sort -n\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>16 a.pdf\n29 b.pdf\n</code></pre>\n\n<p>Or use <code>pdfinfo</code> which is probably faster:</p>\n\n<pre><code>for f in *.pdf; do\n  pages=$(pdfinfo \"$f\" | awk '/Pages:/{print $2}')\n  echo $pages $f\ndone | sort -n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3895436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8b2517f0c4ea490bc80a934bb6f6485a?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3895436/sriram"}, "edited": false, "score": 0, "creation_date": 1422948412, "post_id": 28283813, "comment_id": 44939615, "body": "Thanks for the code and suggestion Borodin. I thought the code execution might take time to compare the files since I have to compare 1000+ pdf files on each run. &lt;br/&gt;I will use your suggestion and see if it doesn&#39;t struggle."}, {"owner": {"reputation": 45, "user_id": 3895436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8b2517f0c4ea490bc80a934bb6f6485a?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3895436/sriram"}, "edited": false, "score": 0, "creation_date": 1423462709, "post_id": 28283813, "comment_id": 45142387, "body": "I used your logic for my requirement and it worked well. Thanks Borodin."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1422899857, "creation_date": 1422899857, "answer_id": 28283813, "question_id": 28281134, "link": "https://stackoverflow.com/questions/28281134/sort-a-number-of-pdf-files-in-increasing-order-of-page-count-using-perl/28283813#28283813", "title": "Sort a number of PDF files in increasing order of page count using Perl", "body": "<p>I don't understand why this is a problem -- it's a very trivial task. Do you know any Perl at all? Unless you have trillions of PDF files then there is no need for any concern about efficiency, and I don't understand what you mean by <em>\"Comparison of each file with the rest and sorting is not an optimal solution\"</em>.</p>\n\n<p>I recommend that you install <a href=\"https://metacpan.org/module/PDF::API2\" rel=\"nofollow\"><code>PDF::API2</code></a> to extract the number of pages in each document. Then it's just a matter of building a hash and sorting it. Whether that's <em>\"optimal\"</em> or not is irrelevant as it will take only a moment.</p>\n\n<p>This example program shows the idea. I have used a documentation directory that I had on one of my Windows systems.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse PDF::API2;\nuse List::Util 'max';\n\nchdir '\\\\\\\\SAMURAI\\C\\ProgramData\\Altova\\SharedBetweenVersions\\Apache FOP 1.1 JDK 1.4\\docs\\1.0';\n\nmy @files = glob '*.pdf';\nmy $width = max map length, @files;\nmy %page_counts;\n\nfor my $file (@files) {\n  my $pdf = PDF::API2-&gt;open($file);\n  $page_counts{$file} = $pdf-&gt;pages;\n}\n\nfor my $file (sort { $page_counts{$a} &lt;=&gt; $page_counts{$b} } keys %page_counts) {\n  printf \"%-*s - %d pages\\n\", $width, $file, $page_counts{$file};\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>index.pdf                - 2 pages\naccessibility.pdf        - 3 pages\ncompiling.pdf            - 3 pages\nreleaseNotes_1.0.pdf     - 3 pages\npdfa.pdf                 - 3 pages\npdfx.pdf                 - 3 pages\nupgrading.pdf            - 3 pages\nanttask.pdf              - 4 pages\npdfencryption.pdf        - 4 pages\nmetadata.pdf             - 4 pages\nhyphenation.pdf          - 5 pages\nknownissues_overview.pdf - 5 pages\nservlets.pdf             - 6 pages\nrunning.pdf              - 6 pages\nextensions.pdf           - 6 pages\nintermediate.pdf         - 7 pages\nevents.pdf               - 8 pages\ngraphics.pdf             - 8 pages\nconfiguration.pdf        - 9 pages\nfonts.pdf                - 9 pages\nchanges_1.0.pdf          - 10 pages\nembedding.pdf            - 11 pages\noutput.pdf               - 21 pages\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3895436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8b2517f0c4ea490bc80a934bb6f6485a?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3895436/sriram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 28283813, "answer_count": 2, "score": -1, "last_activity_date": 1422900049, "creation_date": 1422891042, "last_edit_date": 1422900049, "question_id": 28281134, "link": "https://stackoverflow.com/questions/28281134/sort-a-number-of-pdf-files-in-increasing-order-of-page-count-using-perl", "title": "Sort a number of PDF files in increasing order of page count using Perl", "body": "<p>Could anyone please suggest a logic on how to sort n number of PDF files in a folder according to the number of pages of each PDF file and write out the sorted list of PDF files in a text file?</p>\n\n<p>For instance</p>\n\n<pre><code>file1.pdf - 50 pages\nfile2.pdf - 30 pages\nfile3.pdf - 75 pages\nfile4.pdf - 20 pages\n.\n.\nfile34.pdf - 7 pages\nfile35.pdf - 75 pages\n</code></pre>\n\n<p>Comparison of each file with the rest and sorting is not an optimal solution.\nAnother idea I had is to rename the files with its number of pages and somehow sort it to write out in a sorted order.</p>\n\n<p>Please suggest if there are any libraries which do this. I am looking for a Perl-based solution.</p>\n"}, {"tags": ["json", "perl", "hash", "hashref", "data-dumper"], "comments": [{"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 4, "creation_date": 1422885550, "post_id": 28278858, "comment_id": 44912668, "body": "Is this a direct copy/paste of the Dumper output? This doesn&#39;t parse (you&#39;re missing a closing <code>}</code> on the <code>bless</code>) and it&#39;s unlikely that you have a blessed reference without it being blessed into a particular class (which would presumably include methods for accessing the contents)."}, {"owner": {"reputation": 291, "user_id": 2402135, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8dd3c14f00ab9aac457f1ecc25c0c4e4?s=128&d=identicon&r=PG", "display_name": "user2402135", "link": "https://stackoverflow.com/users/2402135/user2402135"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1422886677, "post_id": 28278858, "comment_id": 44913351, "body": "@MichaelCarman Apologies - I just extracted the part of the Data Dumper output that I needed to work with. print Dumper ($artifact) returns a lot more but it was not relevant."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1422890315, "post_id": 28278858, "comment_id": 44915786, "body": "From the <a href=\"https://metacpan.org/pod/Artifactory::Client#SYNOPSIS\" rel=\"nofollow noreferrer\">synopsis section of the <code>Artifactory::Client</code> documentation</a>: &quot;Every public method provided in this module returns a <code>HTTP::Response</code> object.&quot; You should be using the <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\"><code>HTTP::Response</code></a> API instead of poking around in the internals yourself."}], "answers": [{"comments": [{"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1422885621, "post_id": 28279024, "comment_id": 44912711, "body": "The only key is <code>_content</code>. The URI is encoded into the value."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1422886158, "post_id": 28279024, "comment_id": 44913024, "body": "Look again. Everything after <code>_content</code> is a string encoded as JSON/YAML."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 0, "creation_date": 1422886212, "post_id": 28279024, "comment_id": 44913063, "body": "Ah yes. OK. JSON embedded with object within private field. This strikes me as quite painful."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1598455324, "last_edit_date": 1598455324, "creation_date": 1422884279, "answer_id": 28279024, "question_id": 28278858, "link": "https://stackoverflow.com/questions/28278858/access-data-dumper-nested-perl-hash/28279024#28279024", "title": "Access Data Dumper nested Perl Hash", "body": "<p>To extract information from a hash reference, first you need to dereference. You can either:</p>\n<pre><code>print ${$artifact}{uri},&quot;\\n&quot;; \n</code></pre>\n<p>In this specific case, you can omit the braces and just do:</p>\n<pre><code>print $$artifact{uri},&quot;\\n&quot;; \n</code></pre>\n<p>But be aware that that can be ambiguous so the style of notation doesn't always work for dereferencing.</p>\n<p>Or the newer, and probably clearer notation (e.g. like object oriented)</p>\n<pre><code>print $artifact-&gt;{uri},&quot;\\n&quot;;\n</code></pre>\n<p>However, there is a BIG alarm bell here - <code>bless</code> - this means you're manipulating an object, probably. Poking inside an object is VERY dirty. You shouldn't ever do it. <em>Usually</em> the object will contain an accessor method to give you the information you need. By convention, an <code>_</code> prefix denotes <code>private</code> e.g.  'don't mess with this'. (Not that you should anyway)</p>\n<p>As noted in the comments - this is a JSON text string embedded within your object. So if you were really set on doing this - you can parse the JSON, turn it into a perl data structure, then use that.</p>\n<p>But far more likely - the object you're manipulating has some accessor methods built in, and you should use them.</p>\n<p>So given your example above:</p>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse JSON;\n\nmy $hashref = {\n    _content =&gt; '{\n      &quot;results&quot; : [ {\n&quot;uri&quot; : &quot;http://localhost:port/myfile.tar&quot;\n   } ]\n}'\n};\n\nprint Dumper \\$hashref;\n\nmy $json    = JSON-&gt;new();\nmy $json_ob = $json-&gt;decode( $hashref-&gt;{_content} );\nprint Dumper \\$json_ob;\nprint $json_ob -&gt;{results}-&gt;[0]-&gt;{uri};\n</code></pre>\n<p>However as mentioned in comments, you're using:\n<a href=\"http://search.cpan.org/%7Esyagi/Artifactory-Client-v0.8.1/lib/Artifactory/Client.pm\" rel=\"nofollow noreferrer\"><code>Artifactory::Client</code></a> which quite sensibly uses <code>LWP</code>.</p>\n<blockquote>\n<p>Every public method provided in this module returns a HTTP::Response object.</p>\n</blockquote>\n<p>Referring the <a href=\"http://search.cpan.org/%7Egaas/HTTP-Message-6.06/lib/HTTP/Response.pm\" rel=\"nofollow noreferrer\"><code>HTTP::Response</code></a> docs gives this sample:</p>\n<pre><code>if ($artifact-&gt;is_success) {\n    print $artifact-&gt;decoded_content;\n}\nelse {\n    print STDERR $artifact-&gt;status_line, &quot;\\n&quot;;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 1, "creation_date": 1422886073, "post_id": 28279312, "comment_id": 44912979, "body": "While I agree that there should be a class it is possible to bless a reference without specifying one. You can&#39;t access <code>uri</code> directly, though: everything after <code>_content</code> is a JSON/YAML string."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422886674, "post_id": 28279312, "comment_id": 44913347, "body": "Indeed - I just got caught out - that&#39;s all a string, not a data structure despite looking like <code>Data::Dumper</code> output at first glance."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "edited": false, "score": 1, "creation_date": 1422896526, "post_id": 28279312, "comment_id": 44919896, "body": "@MichaelCarman: You can certainly call <code>bless()</code> without specifying a class. But your blessed hash will still have a class attached - it will be the current package. Try <code>perl -MData::Dumper -E&#39; $o=bless({}), say Dumper $o&#39;</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1422896583, "last_edit_date": 1422896583, "creation_date": 1422885319, "answer_id": 28279312, "question_id": 28278858, "link": "https://stackoverflow.com/questions/28278858/access-data-dumper-nested-perl-hash/28279312#28279312", "title": "Access Data Dumper nested Perl Hash", "body": "<p>That's not the exact output you get from Dumper, is it? If the Dumper output includes a call to <code>bless</code> then it should also include the name of the class that the reference has been blessed into.</p>\n\n<p>The naive approach would be this:</p>\n\n<pre><code>print $artifact-&gt;{_content}{results}[0]{uri};\n</code></pre>\n\n<p>But given that what you seem to have there is an object (a blessed hash reference) then there will almost certainly be methods on the class to access the attributes of the object. You should use those rather than digging around in the internals of the object.</p>\n\n<p><strong>Update:</strong> Yes, I missed that the whole of the <code>_content</code> key was a JSON string. Sorry about that :-/</p>\n"}, {"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1422907225, "post_id": 28279325, "comment_id": 44925488, "body": "The Rails people thought they could use a YAML parser to handle JSON too :) If you want to parse JSON, why make it more compilcated? Use a JSON parser that doesn&#39;t have all the extra features, such as object creation and destruction."}], "tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 2, "last_activity_date": 1422885789, "last_edit_date": 1422885789, "creation_date": 1422885362, "answer_id": 28279325, "question_id": 28278858, "link": "https://stackoverflow.com/questions/28278858/access-data-dumper-nested-perl-hash/28279325#28279325", "title": "Access Data Dumper nested Perl Hash", "body": "<p>As far as Perl is concerned, your <code>$artifact</code> variable is a hash reference with a single key/value pair. The URI is embedded in the value, which appears to be JSON. You need to extract the value, parse it, and then fetch the URI.</p>\n\n<p>JSON is a valid subset of YAML, so you can use a YAML module to parse it.</p>\n\n<pre><code>use YAML::XS;\nmy $content = $artifact-&gt;{_content};\nmy $yaml    = Load($content);\nprint $yaml-&gt;{results}[0]{uri}; # http://localhost:port/myfile.tar\n</code></pre>\n\n<p>That said, a leading underscore on a method/attribute name usually mean that they're \"private\" to the class and shouldn't be used externally. Peeking behind the API (which we can't know without knowing where the data came from and what class <code>$artifact</code> is blessed into) is fragile.</p>\n"}], "owner": {"reputation": 291, "user_id": 2402135, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8dd3c14f00ab9aac457f1ecc25c0c4e4?s=128&d=identicon&r=PG", "display_name": "user2402135", "link": "https://stackoverflow.com/users/2402135/user2402135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1598455324, "creation_date": 1422883808, "last_edit_date": 1422887234, "question_id": 28278858, "link": "https://stackoverflow.com/questions/28278858/access-data-dumper-nested-perl-hash", "title": "Access Data Dumper nested Perl Hash", "body": "<p>I have a Perl hash reference <code>$artifact</code> that I am printing using Data::Dumper.</p>\n\n<p>The output of <code>print Dumper ($artifact);</code> returns the following.</p>\n\n<pre><code>$VAR1 = bless( {\n             '_content' =&gt; '{\n  \"results\" : [ {\n\"uri\" : \"http://localhost:port/myfile.tar\"\n   } ]\n}',);\n</code></pre>\n\n<p>However, I am having trouble trying to specifically access the value of URI, i.e. I want to check if <code>uri</code> has a value or not.</p>\n\n<p>Thanks!</p>\n\n<p>Edit: Just some context. I am using the 'artifact_search' method from the Artifactory::Client perl module</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 3, "creation_date": 1422886241, "post_id": 28278256, "comment_id": 44913077, "body": "Don&#39;t do that. Take a look at <a href=\"https://metacpan.org/pod/DBI#DBI_TRACE\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#DBI_TRACE</a> to get a better idea of what&#39;s going on under the hood."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 1, "creation_date": 1422887297, "post_id": 28278256, "comment_id": 44913806, "body": "You likely have a chain of objects and object references within your <code>$db</code>. You&#39;ll need to disentangle it, and life is just too short for that sort of pain. (@BenGrimm - if you post that as an answer, I&#39;ll upvote :))"}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422892481, "post_id": 28278256, "comment_id": 44917239, "body": "Hah @Sobrique, I just wanted to point out that there are better ways of debugging DBI. Schwern provided the only real answer to this question."}, {"owner": {"reputation": 21, "user_id": 1696931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea7df970729ad1aa78368a6b19b0bbf?s=128&d=identicon&r=PG", "display_name": "Jeroen Lodewijks", "link": "https://stackoverflow.com/users/1696931/jeroen-lodewijks"}, "edited": false, "score": 0, "creation_date": 1422893558, "post_id": 28278256, "comment_id": 44917997, "body": "Thank you very much for your posts. In this case I just needed to know a quick way to inspect internal variables so Schwern&#39;s answer will suffice"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1696931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea7df970729ad1aa78368a6b19b0bbf?s=128&d=identicon&r=PG", "display_name": "Jeroen Lodewijks", "link": "https://stackoverflow.com/users/1696931/jeroen-lodewijks"}, "edited": false, "score": 0, "creation_date": 1422893423, "post_id": 28280696, "comment_id": 44917902, "body": "Thank you very much, I didn&#39;t know about the &#39;tied&#39; keyword"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1422889672, "creation_date": 1422889672, "answer_id": 28280696, "question_id": 28278256, "link": "https://stackoverflow.com/questions/28278256/how-to-print-out-all-handle-attributes-of-dbi-in-perl/28280696#28280696", "title": "How to print out all handle attributes of DBI in Perl", "body": "<p><a href=\"https://metacpan.org/pod/DBI#swap_inner_handle\" rel=\"noreferrer\">The DBI docs mention in passing</a>...</p>\n\n<blockquote>\n  <p>A DBI handle is a reference to a tied hash. A tied hash has an inner hash that actually holds the contents.</p>\n</blockquote>\n\n<p>You can get at this internal attribute hash with <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"noreferrer\"><code>tied</code></a>.</p>\n\n<pre><code>print Dumper tied %$dbh;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1696931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea7df970729ad1aa78368a6b19b0bbf?s=128&d=identicon&r=PG", "display_name": "Jeroen Lodewijks", "link": "https://stackoverflow.com/users/1696931/jeroen-lodewijks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1422889672, "creation_date": 1422881797, "last_edit_date": 1422883075, "question_id": 28278256, "link": "https://stackoverflow.com/questions/28278256/how-to-print-out-all-handle-attributes-of-dbi-in-perl", "title": "How to print out all handle attributes of DBI in Perl", "body": "<p>To make debugging a bit easier, I want to print out all the keys and values of all handle attributes in DBI.</p>\n\n<p>I tried:</p>\n\n<pre><code>use DBI;\nuse Data::Dumper;\n\nmy $db = DBI-&gt;connect(etc);\nprint Dumper($db);\n</code></pre>\n\n<p>But I only see \"bless {}, 'DBI::db'\"\nIs there a method in DBI itself or a variable I can print with Dumper(), that will print info on the internals of DBI?</p>\n"}, {"tags": ["arrays", "perl", "reference"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422887498, "post_id": 28278205, "comment_id": 44913943, "body": "Another improvement: <code>for my $count (1..@indices) { ... }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1422882979, "post_id": 28278423, "comment_id": 44911227, "body": "Or better yet - don&#39;t use <code>@temp2</code> when you actually want an array reference. Declare it as a scalar: <code>my $temp_ref = @{ $c-&gt;next_combination }</code> or similar."}, {"owner": {"reputation": 21, "user_id": 4432884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a5f418ad7928a36c1aadff54ca9df?s=128&d=identicon&r=PG&f=1", "display_name": "blukasz695", "link": "https://stackoverflow.com/users/4432884/blukasz695"}, "edited": false, "score": 0, "creation_date": 1422884208, "post_id": 28278423, "comment_id": 44911920, "body": "Thank you for all the comments, especially for Mr Hans."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1422887599, "post_id": 28278423, "comment_id": 44914009, "body": "@Sobrique, I think you meant <code>my $temp_ref = [ $c-&gt;next_combination ]</code>, but that makes no sense either cause the loop will never end."}, {"owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "reply_to_user": {"reputation": 21, "user_id": 4432884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a5f418ad7928a36c1aadff54ca9df?s=128&d=identicon&r=PG&f=1", "display_name": "blukasz695", "link": "https://stackoverflow.com/users/4432884/blukasz695"}, "edited": false, "score": 0, "creation_date": 1423911303, "post_id": 28278423, "comment_id": 45347309, "body": "@blukasz: Did my answer solve your problem? If so, consider accepting it: this will show people coming here with the same problem that the answer was useful, and get you (and me...) some reputation-points."}], "tags": [], "owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "is_accepted": false, "score": 5, "last_activity_date": 1422882357, "creation_date": 1422882357, "answer_id": 28278423, "question_id": 28278205, "link": "https://stackoverflow.com/questions/28278205/pushing-an-array-reference-repeatedly-the-pushed-references-end-up-all-equal/28278423#28278423", "title": "Pushing an array reference repeatedly: the pushed references end up all equal", "body": "<p>Because you declare <code>@temp2</code> at the top level, the reference <code>\\@temp2</code> will always point to the same data. Because you exit the loop as soon as <code>@temp2</code> is empty, all the references in <code>@combinations</code> will point to this same empty array.</p>\n\n<p>The remedy is easy: declare the <code>@temp2</code> to be local to the <code>while</code> loop, by writing</p>\n\n<pre><code>while (my @temp2 =  $c-&gt;next_combination) {\n</code></pre>\n\n<p>This will create a <em>new</em> variable <code>@temp2</code>, with its own reference, each time the loop is repeated.</p>\n"}], "owner": {"reputation": 21, "user_id": 4432884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a5f418ad7928a36c1aadff54ca9df?s=128&d=identicon&r=PG&f=1", "display_name": "blukasz695", "link": "https://stackoverflow.com/users/4432884/blukasz695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422884579, "creation_date": 1422881640, "last_edit_date": 1422884579, "question_id": 28278205, "link": "https://stackoverflow.com/questions/28278205/pushing-an-array-reference-repeatedly-the-pushed-references-end-up-all-equal", "title": "Pushing an array reference repeatedly: the pushed references end up all equal", "body": "<p>I want to create a 2d array(<code>@combinations</code>) that holds all combinations of another array (<code>@indices</code>). </p>\n\n<p>I'm using <code>push</code> to append a reference to another array(<code>@temp2</code>). When I print my 2d array  (using <code>Dumper</code>) it is not as I expect: the <code>print</code> statement inside the loop shows that every pushed reference is to a non-empty list, but eventually all my references point to an empty list. Why?</p>\n\n<pre><code>use Math::Combinatorics;\nuse Data::Dumper;\n\n\nmy (@combinations, @temp2);\n\nmy @indices = (0, 2, 4);\n\nmy $count = 1;\n\nmy $counter = @indices;\n\nwhile ($counter&gt;= $count) {\n\n    my $c = Math::Combinatorics-&gt;new( \n    count     =&gt; $count,\n    data      =&gt; \\@indices,           \n    );\n\n    $count++;\n\n    while (@temp2 =  $c-&gt;next_combination) {\n\n        print \"@temp2 \\n\";\n        push @combinations, \\@temp2;\n\n    }\n}\n\nprint Dumper(\\@combinations);\n</code></pre>\n"}, {"tags": ["arrays", "perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1422882789, "post_id": 28276229, "comment_id": 44911133, "body": "The for loop looks a little messy. I prefer <code>for (@list) { say $_ . &quot;\\t&quot; . $i++ if $_ }</code>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1422883003, "post_id": 28276229, "comment_id": 44911241, "body": "@Joshua: Yes, you&#39;re right. In first version I printed <code>$_</code> instead of <code>$i</code> but it begun by 0. I&#39;ve added <code>$i</code> after but not change the loop :("}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1422885149, "post_id": 28276229, "comment_id": 44912437, "body": "You can still declare as <code>0</code> if you instead pre-increment in the print <code>++i</code>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 3, "last_activity_date": 1422883045, "last_edit_date": 1422883045, "creation_date": 1422874738, "answer_id": 28276229, "question_id": 28275827, "link": "https://stackoverflow.com/questions/28275827/perl-transform-string-into-array-and-print-line-number/28276229#28276229", "title": "Perl: transform string into array and print line number", "body": "<p>Here is a way to do the job:</p>\n\n<pre><code>my $text = \"Today, the sky is blue.\";\nmy @list = split/(\\W)/, $text;\nmy $i = 1;\nfor (@list) {\n    say $_,\"\\t\",$i++ if $_ ne '';\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Today   1\n,   2\n    3\nthe 4\n    5\nsky 6\n    7\nis  8\n    9\nblue    10\n.   11\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1422875377, "post_id": 28276373, "comment_id": 44907205, "body": "This doesn&#39;t give the wanted result."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1422876381, "post_id": 28276373, "comment_id": 44907780, "body": "What do you mean? I did not number the output and there is a trailing newline, ok."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1422876866, "post_id": 28276373, "comment_id": 44908029, "body": "Ok, now I see it - the spaces are missing."}], "tags": [], "owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "is_accepted": false, "score": 1, "last_activity_date": 1422878593, "last_edit_date": 1422878593, "creation_date": 1422875231, "answer_id": 28276373, "question_id": 28275827, "link": "https://stackoverflow.com/questions/28275827/perl-transform-string-into-array-and-print-line-number/28276373#28276373", "title": "Perl: transform string into array and print line number", "body": "<p>For matching regexes in Perl you have the matching operator, you will find many examples and explanations about it in the <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow\" title=\"Perl regex tutorial\">PerlRegex tutorial</a>.</p>\n\n<p>So you would reuse whatever regexes like this; here I am putting the results into an array, that contains the matches. Any postprocessing should be applied to this array. Here I am just outputting it.</p>\n\n<p>One more detail concerning your regex - if I do this, using the regex you gave</p>\n\n<pre><code>echo \"Today, the sky is blue.\" | grep -Eo '\\w+|[^\\w ]'\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Today\n,\nthe\nsky\nis\nblue\n.\n</code></pre>\n\n<p>This is because your negated character class <code>[^\\w ]</code> not only excludes alphanumeric characters but spaces too.</p>\n\n<p>However, according to your output you probably have <code>[^\\w]</code> here, so the space, which is not part of <code>\\w</code> is treated as match. So I am using this regex here too. By the way: I wonder, if you really want every non-word <em>character</em> to be a match of its own. </p>\n\n<pre><code>#!/usr/bin/perl\n#\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;)\n{\n    my (@matches) = $_ =~ m/(\\w+|[^\\w])/g;\n\n    print join(\"\\n\", @matches);\n}\n\n__DATA__\nToday, the sky is blue.\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 4180345, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/fd5766ada96891ff3478f96ff856bc4b?s=128&d=identicon&r=PG&f=1", "display_name": "chris202 ", "link": "https://stackoverflow.com/users/4180345/chris202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1422883045, "creation_date": 1422873616, "last_edit_date": 1422875184, "question_id": 28275827, "link": "https://stackoverflow.com/questions/28275827/perl-transform-string-into-array-and-print-line-number", "title": "Perl: transform string into array and print line number", "body": "<p>I have the following string <code>Today, the sky is blue.</code> and I would like to do two things with it.</p>\n\n<p>First, I'd like to turn it into the following array (or hash, not sure which one is the right one).</p>\n\n<pre><code>Today\n,\n\nthe\n\nsky \n\nis \n\nblue\n.\n</code></pre>\n\n<p>I can do it using this grep <code>grep -Eo '\\w+|[^\\w ]' input.txt</code> , but could somebody please tell me how to do this using perl (in order to run this as part of a script for example).</p>\n\n<p>Second thing, I'd like to add the line number to each line of my array (I know it's there somewhere but I want to actually see it), resulting in the following final output:</p>\n\n<pre><code>Today     1\n,         2\n          3\nthe       4\n          5\nsky       6\n          7\nis        8\n          9\nblue      10\n.         11\n</code></pre>\n\n<p>Could somebody help me use that grep function in a perlish context and print the corresponding line number ? Thanks a lot in advance ! </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "is_accepted": false, "score": 0, "last_activity_date": 1422892742, "last_edit_date": 1422892742, "creation_date": 1422877031, "answer_id": 28276908, "question_id": 28274721, "link": "https://stackoverflow.com/questions/28274721/filtering-a-list-by-many-regexes-passed-as-strings-in-perl/28276908#28276908", "title": "Filtering a list by many regexes passed as strings in perl", "body": "<p>After two different wrong logic attempts, solved it as following:</p>\n\n<pre><code>sub checktags {\n    my(@filters) = @_;\n    my @tags = split /\\s+/, $line;\n    for my $r (@filters) {\n        if( my($negate,$restr) = ( $r =~ m{^\\s*(!)?/(.*)/\\s*$}) ) {\n            my $res = any { $_ =~ qr/$restr/ } @tags;\n            return if( ($negate &amp;&amp; $res) || (!$negate &amp;&amp; !$res));\n        }\n        else {\n            warn \"Wrong filter $r - skipping\";\n        }\n    }\n    return @tags;\n}\n</code></pre>\n\n<p>prints the wanted:</p>\n\n<pre><code>filters: /(aaa|bbb)/ !/(xxx|zzz)/\nNO for aaaxxx bbb\nNO for aaa xxx bbb\nOK for aaa ccc\nOK for bbb ddd\nNO for \nNO for aaa zzzbbb\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422892742, "creation_date": 1422869961, "last_edit_date": 1422871426, "question_id": 28274721, "link": "https://stackoverflow.com/questions/28274721/filtering-a-list-by-many-regexes-passed-as-strings-in-perl", "title": "Filtering a list by many regexes passed as strings in perl", "body": "<p>Have a list of tags (strings) stored in array. Also have another array, what contains some regexes (as strings). Need filter the tags by those regexes.</p>\n\n<p>The following code is a demo of the problem.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse 5.014;\nuse warnings;\n\nmy @re = @ARGV;\nsay \"filters: @re\";\n\nmy $line;\nwhile(&lt;DATA&gt;) {\n    chomp;\n    $line = $_;\n    my $res = checktags(@re) ? \"OK\" : \"NO\";\n    say \"$res for $line\";\n}\n\nsub checktags {\n    my(@filters) = @_;\n    for my $tag (split /\\s+/, $line) {  #check each tag\n        for my $r (@filters) {              #with each filter\n            #say \"checking tag: $tag for regex: $r\";\n            return undef unless( $tag =~ $r );  # &lt;--- HOW HERE???\n            say \"\\tpassed\";\n        }\n    }\n    return 1;\n}\n\n__DATA__\naaaxxx bbb\naaa xxx bbb\naaa ccc\nbbb ddd\n\naaa zzzbbb\n</code></pre>\n\n<p>E.g. for the invocation of the script as</p>\n\n<pre><code>perl so2.pl '/(aaa|bbb)/' '!/(xxx|zzz)/'\n</code></pre>\n\n<p>so: one of the tags must match <code>aaa</code> or <code>bbb</code> <strong>and</strong> no one tag could match <code>xxx</code> or <code>zzz</code>, so should print:</p>\n\n<pre><code>filters: /(aaa|bbb)/ !/(xxx|zzz)/\nNO for aaaxxx bbb   #no, because one of tags matches /xxx/\nNO for aaa xxx bbb  #no, as above\nOK for aaa ccc      #ok, matches /aaa/ and here isn't /(xxx|zzz)/\nOK for bbb ddd      #ok, as above for /bbb/\nNO for              #no, no /aaa/ nor /bbb/\nNO for aaa zzzbbb   #no, here is /zzz/\n</code></pre>\n"}, {"tags": ["windows", "perl", "batch-file", "strawberry-perl", "activestate"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1422871136, "post_id": 28274140, "comment_id": 44904864, "body": "If it&#39;s not so much a questions as a methodology, then it may be better to turn it into a question that you then answer - that would be a better fit for the site."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1422872656, "post_id": 28274140, "comment_id": 44905728, "body": "Strawberry in Windows doesn&#39;t need the shebang line to be accurate.  <code>#!&#47;does&#47;not&#47;exist&#47;perl</code> works fine, even with arguments."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422874129, "post_id": 28274140, "comment_id": 44906495, "body": "Indeed. Windows doesn&#39;t use shebang, it uses file associations. Also - you don&#39;t need to pay for dmake, I&#39;m using ActiveState, and it&#39;s making use of MinGW."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1422876032, "post_id": 28274140, "comment_id": 44907564, "body": "On Windows, <code>#!perl</code> is entirely sufficient to act as a place for your arguments.  Otherwise just go for compatability with our *nix brothers..."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1422954738, "post_id": 28276236, "comment_id": 44942660, "body": "Sorry to everyone. Correct, I wasn&#39;t asking a question, I just thought I was BEING HELPFUL to people who might be in a similar predicament. Was it due to an outdated perl? I&#39;ve no idea. AS simply said I didn&#39;t have authorisation to install a module lest I paid $999. (Seems a number of people on Google have the same problem; who also didn&#39;t know that you can avoid the fee by upgrading!)"}, {"owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1422955129, "post_id": 28276236, "comment_id": 44942910, "body": "As for shebangs, maybe there are other paths that can be used ... if you simply want to play around on Windows. But what happens when you upload those files to a server which DOES require the shebang? Gonna spend ages changing every script to the correct shebang? Remember, I&#39;ve got around 400 scripts in my offline Apache/Windows development area that are FTPed to server! Makes life a lot easier to use the file as will be uploaded. Again, THOUGHT I was offering advice to anyone who might find themselves in a similar position. I now know not to do that unless in answer to a question"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 1, "creation_date": 1422956161, "post_id": 28276236, "comment_id": 44943548, "body": "You can self answer your own questions. That&#39;s both fine and appropriate. The point of StackOverflow is that it&#39;s <i>about</i> Q&amp;A. Just bear in mind that people will vote down - or up - according to how useful they find both question and answer. My point on shebang paths is - if you just leave it as <code>&#47;usr&#47;bin&#47;perl</code> and don&#39;t bother putting symlinks on your Windows system, it&#39;ll still work fine."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1566592884, "last_edit_date": 1566592884, "creation_date": 1422874749, "answer_id": 28276236, "question_id": 28274140, "link": "https://stackoverflow.com/questions/28274140/need-to-change-shebang-for-strawberry-perl/28276236#28276236", "title": "Need to change shebang for Strawberry Perl", "body": "<p>I'm pretty sure your problem with <a href=\"https://en.wikipedia.org/wiki/ActivePerl\" rel=\"nofollow noreferrer\">ActivePerl</a> is that you're using an older version. I've just done:</p>\n\n<pre><code>C:\\Users\\myaccount\\Documents&gt;perl -MCPAN -e shell\n\nIt looks like you don't have a C compiler and make utility installed.  Trying\nto install dmake and the MinGW GCC compiler using the Perl Package Manager.\nThis may take a a few minutes...\n\nDownloading ActiveState Package Repository dbimage...done\nDownloading MinGW-4.6.3...done\nDownloading dmake-4.11.20080107...done\nUnpacking MinGW-4.6.3...done\nUnpacking dmake-4.11.20080107...done\nGenerating HTML for MinGW-4.6.3...done\nGenerating HTML for dmake-4.11.20080107...done\nUpdating files in site area...done\n2759 files installed\n\nPlease use the `dmake` program to run commands from a Makefile!\n\n\ncpan shell -- CPAN exploration and modules installation (v2.05)\nEnter 'h' for help.\n\ncpan&gt;\n</code></pre>\n\n<p>Using version:</p>\n\n<blockquote>\n  <p>This is perl 5, version 20, subversion 1 (v5.20.1) built for MSWin32-x86-multi-thread-64int</p>\n</blockquote>\n\n<p>ActiveState has a policy of not keeping fully up to date on older versions, because of the support overhead. You can see - for example - their builds of <code>dmake</code> here:\n<a href=\"https://code.activestate.com/ppm/dmake/\" rel=\"nofollow noreferrer\">https://code.activestate.com/ppm/dmake/</a></p>\n\n<p>From their web page:</p>\n\n<blockquote>\n  <p>Looking for access to older versions of ActivePerl?</p>\n  \n  <p>Community Edition offers access to the newest versions of ActivePerl.\n  Access to older versions (Perl 5.6, 5.8, 5.10, 5.12, 5.14, 5.16) is available in Business Edition and Enterprise Edition.</p>\n</blockquote>\n\n<p>E.g. to use the version you're <em>currently</em> using (<code>5.12</code>), you'd need to buy support. But you could use <code>5.18</code> or <code>5.20</code> for free.</p>\n\n<p>I would also note: Windows doesn't use shebang paths anyway; it uses file associations.</p>\n"}], "owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "closed_date": 1422946976, "answer_count": 1, "score": -1, "last_activity_date": 1566592884, "creation_date": 1422867839, "last_edit_date": 1566592734, "question_id": 28274140, "link": "https://stackoverflow.com/questions/28274140/need-to-change-shebang-for-strawberry-perl", "closed_reason": "Needs details or clarity", "title": "Need to change shebang for Strawberry Perl", "body": "<p>This isn't so much a \"question\" as a methodology I found which I believe is working.</p>\n\n<p><em>Most</em> servers use the path \"/usr/bin/perl\" ... but Strawberry Perl  (strawberryperl.com) use their own unique path of \"/strawberry/perl/bin\" (!!) (I tried installing into a different directory as allowed by the prompt, but it wouldn't work at all then! I read somewhere that some files within the installation are 'hardcoded' to the above path.)</p>\n\n<p>I am not looking forward to having to rename all the shebangs of around 400 offline files, and then having to change them all again when uploaded, and I sought another solution. I found it in something called a \"symbolic link\".</p>\n\n<p>Basically, it's an internal Windows redirect. It basically says \"If you see the path as 'usr/bin/perl' then instead go to 'strawberry/perl/bin' \" There are two ways to set this up.</p>\n\n<p>The first is to open up a command line terminal (\"CMD\" in Windows search box, then click \"cmd.exe\") You use \"cd..\" to get back to the \"C:>\" prompt, and then enter \"/d usr\\bin\\perl starwberry\\perl\\bin\\perl.exe\" and click enter. This will set up the &lt;==> symbolic link. (Note directions of the slashes) That's OK for a one time use. (It may work without adding \".exe\", but to be sure...)</p>\n\n<p>But I design websites offline, so I need the redirect to be set up each time I boot up. You can do this as well with a batch file.</p>\n\n<p>Using a text file, enter the same data as you did at the prompt, and save it as a \".bat\" file to your startup folder, (as found in the left menu when clicking \"Start\" button lower left) You may well find other icons for programs that also initiate at startup within this folder.</p>\n\n<p>I'm 99% certain this is working, because I went into the 'usr/bin/perl' and renamed the executable files as 'perl_old.exe' and 'perl_5.12.4_old.exe\" and \"wperl_old.exe\" (so that if a Perl script DID access \"usr\\bin\\perl\" it wouldn't find any program to run) ... and the file still ran when I put URL into the browser.</p>\n\n<p>So why the switch from ActiveState? I wanted to install a particular library. I tried it via PPM and was told I didn't have authorisation. No, this isn't an \"Administrator Rights\" issue of Windows; it's the fact that ActiveState now want to charge <strong>$999</strong> for access to certain files. \"Well, you can still use 'dmake' to create the files downloaded direct from CPAN\" Er, no, you can't ... because \"dmake\" is one of the files under lock and key! And without that, you cannot install ANY file from CPAN. (The term \"Holding You To Ransom\" springs to mind.)</p>\n\n<p>Using Strawberry Perl, it's just a case of starting a command line terminal, (CMD) moving back to the root (C:>) and typing \"cpan\". You now type \"install MODULE::name\". Boom! All the files for that particular module are downloaded and installed using the \"make.pl\" associated with that program.</p>\n\n<p>We won't get into the debate of a company <em>charging</em> to access items in the public domain; they're a business after all.</p>\n\n<p>I know this might be teaching your grandmother to such eggs to some of the more advanced users, but there may be other people on the verge of renaming all their files when switching to Strawberry Perl. Oh, I believe their program suite also include C, C++ and Fortran compilers (no, I've no idea either!). One downside: Due to all the extra program features they install, the directory is THREE TIMES LARGER than the \"ActiveState\" installation!</p>\n"}, {"tags": ["perl", "csv", "xls"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422868478, "post_id": 28273551, "comment_id": 44903463, "body": "but I got below error: <code>Can&#39;t call method &quot;Value&quot; on an undefined value at  line 23</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1422876653, "post_id": 28273551, "comment_id": 44907922, "body": "If <code>$source_cell</code> is undef, then <code>Value</code> will error. You might find: <code>if ( defined $source_cell and defined $source_cell -&gt; Value ) {</code> does better."}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422953077, "post_id": 28273551, "comment_id": 44941796, "body": "@Jens. Thanks. I just updated the script with your new answer but the result still ignore the blanks in the csv file."}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422958674, "post_id": 28273551, "comment_id": 44945109, "body": "@Jens. That seems to work.The blanks are included. But it does not print the result(rows in xls) line by line in the csv."}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422959104, "post_id": 28273551, "comment_id": 44945344, "body": "@Jens. I am using AIX. if I use <code>print &quot;\\n&quot;;</code> it breaks each line at the points where blank columns exist."}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422960307, "post_id": 28273551, "comment_id": 44946086, "body": "@Jens. It should be FGO;;POP;JET;  instead it breaks the line into 2. At end of FGO;  and second line start with POP;JET;"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422961502, "post_id": 28273551, "comment_id": 44946746, "body": "@Drsin looks craz. Can you update the question with the code you know have?"}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422961598, "post_id": 28273551, "comment_id": 44946796, "body": "<code>if ($source_cell &amp;&amp; $source_cell-&gt;Value) {    #print &quot;( $row_index , $col_index ) =&gt;&quot;, $source_cell-&gt;Value, &quot;\\t;&quot;;    print  $source_cell-&gt;Value, &quot;;&quot;;    }  else   {   print &quot;\\n&quot;;    } </code>"}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422962591, "post_id": 28273551, "comment_id": 44947358, "body": "@Jens. <code>else { print &quot;;&quot;}</code> works. But it converts entire 208 rows in the xls to a single line in the csv file. I need it to return individual lines in the xls back to each rows in the csv file. so <code>cat aps.csv | wc -l </code> returns 1 instead of 208 lines in my xls. hope u understand. And thanks a lot so far."}, {"owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "edited": false, "score": 0, "creation_date": 1422967653, "post_id": 28273551, "comment_id": 44950198, "body": "@Jens. Thanks a million. It worked perfectly. A beer on me anytime you are Zurich, Switzerland. Thanks."}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 0, "last_activity_date": 1422966948, "last_edit_date": 1422966948, "creation_date": 1422865270, "answer_id": 28273551, "question_id": 28273438, "link": "https://stackoverflow.com/questions/28273438/perl-script-to-convert-xls-to-csv/28273551#28273551", "title": "Perl script to convert xls to csv", "body": "<p>You have to check if the value of the cell is initialized, not the cell it self.</p>\n\n<p>Change:</p>\n\n<pre><code>   if ($source_cell) {\n      #print \"( $row_index , $col_index ) =&gt;\", $source_cell-&gt;Value, \"\\t;\";\n       print  $source_cell-&gt;Value, \";\";\n   }\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>   if ($source_cell &amp;&amp; $source_cell-&gt;Value) {\n      #print \"( $row_index , $col_index ) =&gt;\", $source_cell-&gt;Value, \"\\t;\";\n      print  $source_cell-&gt;Value, \";\";\n   } else {\n      print  \";\";\n   } \n</code></pre>\n\n<p>should work.</p>\n\n<p>UPDATE:</p>\n\n<pre><code> foreach my $row_index ($source_sheet-&gt;{MinRow} .. $source_sheet-&gt;{MaxRow}) {\n  foreach my $col_index ($source_sheet-&gt;{MinCol} .. $source_sheet-&gt;{MaxCol}) {\n   my $source_cell = $source_sheet-&gt;{Cells}[$row_index][$col_index];\n   if ($source_cell &amp;&amp; $source_cell-&gt;Value) {\n      print  $source_cell-&gt;Value.\";\";\n   } else {\n      print \";\";\n   }\n  }\n  print \"\\n\";\n }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3283307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b89638e92ff5953a7a379db5b147d5e0?s=128&d=identicon&r=PG&f=1", "display_name": "Drsin", "link": "https://stackoverflow.com/users/3283307/drsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1493, "favorite_count": 0, "accepted_answer_id": 28273551, "answer_count": 1, "score": 0, "last_activity_date": 1422966948, "creation_date": 1422864731, "last_edit_date": 1422966736, "question_id": 28273438, "link": "https://stackoverflow.com/questions/28273438/perl-script-to-convert-xls-to-csv", "title": "Perl script to convert xls to csv", "body": "<p>This script coverts xls to csv ok.\nThe challenge is that it does not convert blank cell in the xls to blanks in csv file.\nAny help is appreciated: <strong>UPDATED SCRIPT</strong></p>\n\n<pre><code>    #!/usr/bin/perl\nuse strict;\nuse Spreadsheet::ParseExcel;\nuse Text::CSV;\n\nmy $sourcename = shift @ARGV or die \"invocation: $0 &lt;source file&gt;\\n\";\nmy $source_excel = new Spreadsheet::ParseExcel;\nmy $source_book = $source_excel-&gt;Parse($sourcename)\n    or die \"Could not open source Excel file $sourcename: $!\";\nmy $storage_book;\n\nforeach my $source_sheet_number (0 .. $source_book-&gt;{SheetCount}-1) {\n my $source_sheet = $source_book-&gt;{Worksheet}[$source_sheet_number];\n\n print \"--------- SHEET:\", $source_sheet-&gt;{Name}, \"\\n\";\n next unless defined $source_sheet-&gt;{MaxRow};\n next unless $source_sheet-&gt;{MinRow} &lt;= $source_sheet-&gt;{MaxRow};\n next unless defined $source_sheet-&gt;{MaxCol};\n next unless $source_sheet-&gt;{MinCol} &lt;= $source_sheet-&gt;{MaxCol};\n\n foreach my $row_index ($source_sheet-&gt;{MinRow} .. $source_sheet-&gt;{MaxRow}) {\n  foreach my $col_index ($source_sheet-&gt;{MinCol} .. $source_sheet-&gt;{MaxCol}) {\n   my $source_cell = $source_sheet-&gt;{Cells}[$row_index][$col_index];\n   if ($source_cell &amp;&amp; $source_cell-&gt;Value) {\n   #print \"( $row_index , $col_index ) =&gt;\", $source_cell-&gt;Value, \"\\t;\";\n   print  $source_cell-&gt;Value, \";\";\n   }\n else\n  {\n  print \";\"\n   }\n  }\n }\n}\n</code></pre>\n\n<p>sample excel</p>\n\n<pre><code>EFG KDD ABS JME\nFGO     POP JET\n</code></pre>\n\n<p>converted as:</p>\n\n<pre><code>EFG;KDD;ABS;JME;\nFGO;POP;JET;\n</code></pre>\n\n<p>but it should be:</p>\n\n<pre><code>EFG;KDD;ABS;JME;\nFGO;;POP;JET;\n</code></pre>\n"}, {"tags": ["macos", "perl", "shell"], "comments": [{"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1422855960, "post_id": 28271707, "comment_id": 44898838, "body": "The same logic shown in the accepted answer shall be applied to invoking <code>perl</code> too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user648852"}, "edited": false, "score": 0, "creation_date": 1422855964, "post_id": 28271707, "comment_id": 44898840, "body": "investigate the use of <code>find</code> and <code>xargs</code> to feed the file names to perl"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user648852"}, "is_accepted": false, "score": 2, "last_activity_date": 1422856677, "last_edit_date": 1422856677, "creation_date": 1422856338, "answer_id": 28271839, "question_id": 28271707, "link": "https://stackoverflow.com/questions/28271707/find-and-replace-text-in-files-in-all-subdirectories/28271839#28271839", "title": "Find and replace text in files in all subdirectories", "body": "<p>Use <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?find\" rel=\"nofollow\">find</a> and <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs\" rel=\"nofollow\">xargs</a></p>\n\n<p>Something similar to (NOT TESTED!):</p>\n\n<pre><code>find /Users/admin/Downloads/ -type f -print0 | xargs -0 perl -pi -w -e 's/OldText/NewText/g;' \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29866, "user_id": 930450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/se3CE.png?s=128&g=1", "display_name": "Ixx", "link": "https://stackoverflow.com/users/930450/ixx"}, "edited": false, "score": 4, "creation_date": 1481280698, "post_id": 28271885, "comment_id": 69323998, "body": "Hm. This removed the complete content of all my files (with specified ending) in the directory."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 29866, "user_id": 930450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/se3CE.png?s=128&g=1", "display_name": "Ixx", "link": "https://stackoverflow.com/users/930450/ixx"}, "edited": false, "score": 0, "creation_date": 1481295037, "post_id": 28271885, "comment_id": 69332990, "body": "@Ixx - I&#39;d need to see your exact command line to be able to tell you why. Along with your operating system, and/or version of <code>sed</code>. Most likely, your sed script (or the RE in it) is incorrect. Please feel free to <a href=\"http://stackoverflow.com/questions/ask\">ask a question</a>."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 1, "last_activity_date": 1422857027, "last_edit_date": 1422857027, "creation_date": 1422856652, "answer_id": 28271885, "question_id": 28271707, "link": "https://stackoverflow.com/questions/28271707/find-and-replace-text-in-files-in-all-subdirectories/28271885#28271885", "title": "Find and replace text in files in all subdirectories", "body": "<p>I'm not sure why you would need <code>perl</code> in this case, and I'm not sure who Hazel is and why she would run your shell script, but since you've flagged your question <code>shell</code> and are obviously using <code>bash</code>, I'll provide a shell-only answer.  Note that this will work in other shells too, not just bash.</p>\n\n<pre><code>#!/bin/bash\n\nfind /Users/admin/Downloads/ -type f -name \"*.txt\" \\\n  -exec sed -i '' -ne 's/OldText/NewText/g' {} \\;\n</code></pre>\n\n<p>Note that this <code>find</code> command is split into two lines for easier readability.  It uses <code>sed</code> instead of <code>perl</code> because <code>sed</code> is smaller and likely faster, and is considered a standard shell tool whereas <code>perl</code> may not be found on all systems.</p>\n\n<p>Note also that the exact syntax of the <code>sed</code> options I've used may depend on the implementation of sed that is on your system.</p>\n\n<p>The <code>find</code> command works like this:</p>\n\n<pre><code>find [path ...] [command ...]\n</code></pre>\n\n<p>You can <code>man find</code> to see the details, but the command I've provided here does the following.</p>\n\n<ul>\n<li>Starts in <code>/Users/admin/Downloads/</code></li>\n<li><code>-type f</code> - Looks for things that are files (as opposed to directories or symlinks)</li>\n<li><code>-name \"*.txt\"</code> - AND looks for things that match this filespec</li>\n<li><code>-exec ...</code> - AND executes the following shell command, replacing <code>{}</code> with the filename that's been found.</li>\n</ul>\n"}], "owner": {"reputation": 83, "user_id": 4518703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b421c2d78c9c0af65c61ee0e9e959b3f?s=128&d=identicon&r=PG&f=1", "display_name": "guisauer", "link": "https://stackoverflow.com/users/4518703/guisauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3758, "favorite_count": 0, "closed_date": 1422966233, "answer_count": 2, "score": 3, "last_activity_date": 1422857067, "creation_date": 1422855544, "last_edit_date": 1422857067, "question_id": 28271707, "link": "https://stackoverflow.com/questions/28271707/find-and-replace-text-in-files-in-all-subdirectories", "closed_reason": "Duplicate", "title": "Find and replace text in files in all subdirectories", "body": "<p>On a Mac; I'm using Hazel to run a shell script, in order to find &amp; replace text in <code>.txt</code> files in multiple subdirectories inside my Downloads folder.\nMy script.sh file lives somewhere else (<code>/Users/admin/Desktop</code>)</p>\n\n<p><code>script.sh</code> looks like this currently:</p>\n\n<pre><code>#!/bin/bash\ncd /Users/admin/Downloads/\nperl -pi -w -e 's/OldText/NewText/g;' *.txt\n</code></pre>\n\n<p>It works, but doesn't look through all the subdirectories inside Downloads. How do I do that?</p>\n"}, {"tags": ["perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1422853018, "post_id": 28268846, "comment_id": 44898151, "body": "what does the &quot;-&quot; at the end of [% INCLUDE ... line means?"}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 1, "creation_date": 1422854958, "post_id": 28268846, "comment_id": 44898600, "body": "It directs TT to chomp the whitespace: <a href=\"http://www.template-toolkit.org/docs/manual/Syntax.html#section_Chomping_Whitespace\" rel=\"nofollow noreferrer\">template-toolkit.org/docs/manual/&hellip;</a>"}, {"owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "edited": false, "score": 0, "creation_date": 1422914391, "post_id": 28268846, "comment_id": 44929012, "body": "@ysth, does the file need have the suffix tt2? or can it have the suffix tt?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1616687489, "last_edit_date": 1616687489, "creation_date": 1422830759, "answer_id": 28268846, "question_id": 28268454, "link": "https://stackoverflow.com/questions/28268454/how-to-pass-arguments-to-a-subroutine-in-template-toolkit-function/28268846#28268846", "title": "How to pass arguments to a subroutine in template toolkit function", "body": "<p>You can pass arguments, but you need to give them names.  Example:</p>\n<p>outer.tt2:</p>\n<pre><code>[% INCLUDE header.tt2 header_string=&quot;str&quot;, items=[ 1, 2, 3, 5, 10 ] -%]\n</code></pre>\n<p>header.tt2:</p>\n<pre><code>String: [% header_string %]\n[% FOREACH item IN items -%]\nItem: [% item %]\n[% END -%]\n</code></pre>\n<p>output:</p>\n<pre><code>String: str\nItem: 1\nItem: 2\nItem: 3\nItem: 5\nItem: 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1422857831, "creation_date": 1422857831, "answer_id": 28272096, "question_id": 28268454, "link": "https://stackoverflow.com/questions/28268454/how-to-pass-arguments-to-a-subroutine-in-template-toolkit-function/28272096#28272096", "title": "How to pass arguments to a subroutine in template toolkit function", "body": "<p>Check out <a href=\"http://www.template-toolkit.org/docs/manual/Directives.html#section_MACRO\" rel=\"nofollow\"><code>MACRO</code></a> definitions:</p>\n\n<pre><code>[% MACRO header(str, items) BLOCK -%]\n    [% FOREACH i IN items; -%]\n ... your item code here ... \n    [% END -%]\n[% END -%]\n\n[% header('str',[1, 2, 3, 5, 10]) %]\n</code></pre>\n\n<p>If TT exposed the raw arguments list at the template level, you could call it as you indicated (e.g. <code>header('str', 1, 2, 3, 5, 10)</code>), but this is pretty close. </p>\n"}], "owner": {"reputation": 2966, "user_id": 230270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f2eead5d54d62be44a0936f6914c3fe?s=128&d=identicon&r=PG", "display_name": "Eagle", "link": "https://stackoverflow.com/users/230270/eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 1, "accepted_answer_id": 28268846, "answer_count": 2, "score": 3, "last_activity_date": 1616687489, "creation_date": 1422828110, "last_edit_date": 1616687441, "question_id": 28268454, "link": "https://stackoverflow.com/questions/28268454/how-to-pass-arguments-to-a-subroutine-in-template-toolkit-function", "title": "How to pass arguments to a subroutine in template toolkit function", "body": "<p>I my document <em>foo.tt</em> i would like to write something like this:</p>\n<pre><code>[% INCLUDE header('str', 1, 2, 3, 5, 10) %]\n</code></pre>\n<p>My aim is to do some string manipulation on <em>str</em> and then with <em>foreach</em> / <em>for</em> iterates over all the numbers.</p>\n<p>unfortunately i was unable to find that this type of syntax in Template toolkit is allowed.</p>\n<p>What is Template toolkit way for passing arguments to a subroutine?</p>\n<p>Any ideas how to do it?</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422822112, "post_id": 28267354, "comment_id": 44890910, "body": "Your regex looks for the string <code>User:</code>, but there is no such string in your data."}, {"owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422822219, "post_id": 28267354, "comment_id": 44890952, "body": "I apologise was a typo. Corrected now: I only need to take the values hasguy82 and hashguy83;  let&#39;s assume like my description i have a file with two lines i need to store using my regex just the userid..eliminating everything else; i have the feeling the &quot; in PERL is confused with something else..what do you think?"}, {"owner": {"reputation": 2078, "user_id": 2616428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ieQ7.jpg?s=128&g=1", "display_name": "pajaja", "link": "https://stackoverflow.com/users/2616428/pajaja"}, "edited": false, "score": 0, "creation_date": 1422822704, "post_id": 28267354, "comment_id": 44891107, "body": "Lose the whitespaces: <code>\\[(PROTOCOL|APP)\\s\\(Id:\\&quot;(\\w+)\\&quot;\\,\\sProcessID\\:\\s\\d+\\)]\\s</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422825842, "post_id": 28267354, "comment_id": 44892239, "body": "Your new data has <code>ProcessId</code> where your original data has <code>ProcessID</code>. Also, your <i>Coomplete Code</i> has a Perl regex <code>qr&#47; \\[ (?: GUI | SOAP ) \\s* \\(User:&quot;(\\w+)&quot;, \\s* ThreadId: \\s* \\d+ \\) \\] &#47;x</code> embedded within another regex."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422824939, "post_id": 28267636, "comment_id": 44891960, "body": "Borodin i have added my code and a string default example in the main body of this post.... is driving me crazy it was working yesterday... :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422825811, "post_id": 28267636, "comment_id": 44892228, "body": "Your new data has <code>ProcessId</code> where your original data has <code>ProcessID</code>. Also, your <i>Coomplete Code</i> has a Perl regex <code>qr&#47; \\[ (?: GUI | SOAP ) \\s* \\(User:&quot;(\\w+)&quot;, \\s* ThreadId: \\s* \\d+ \\) \\] &#47;x</code> embedded within another regex."}, {"owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422827265, "post_id": 28267636, "comment_id": 44892727, "body": "i changed it completely and is working  &#91;(APP|PROTOCOL)\\s[(]Id:[&quot;](\\w+)&quot;,\\sprocessId:\\s\\d+&#41;]"}, {"owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422827543, "post_id": 28267636, "comment_id": 44892811, "body": "is the solution ok? or not to elegant?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1422823928, "last_edit_date": 1422823928, "creation_date": 1422823443, "answer_id": 28267636, "question_id": 28267354, "link": "https://stackoverflow.com/questions/28267354/perl-regex-multiple-exclusion-patterns-in-a-single-string/28267636#28267636", "title": "PERL REGEX: Multiple exclusion/patterns in a single string", "body": "<p>Unless you use the <code>/x</code> modifier, spaces and tabs in your regex must be matched in the target string. In your pattern</p>\n\n<pre><code>\\[(PROTOCOL|APP)\\s\\(Id:\\\"(\\w+)\\\"\\, \\s ProcessID\\: \\s \\d+\\)] \\s\n</code></pre>\n\n<p>you are requiring a space followed by a whitespace character after the comma. (The <code>\\s</code> character class matches ASCII control characters <code>HT</code>, <code>LF</code>, <code>VT</code>, <code>FF</code>, and <code>CR</code> as well as the space character.) Likewise, after the second colon you need a space, followed by a whitespace character, followed by another space for the pattern to match. In both the cases there is only a single space in the target string so the pattern won't match. You also ask for a space followed by a whitespace character after the final close square bracket, yet your data seems to end at the bracket. Were you trying to match a terminating newline?</p>\n\n<p>This would work</p>\n\n<pre><code>\\[(PROTOCOL|APP)\\s\\(Id:\\\"(\\w+)\\\"\\,\\sProcessID\\:\\s\\d+\\)]\n</code></pre>\n\n<p>but double quotes <code>\"</code>, commas <code>,</code>, and colons <code>:</code> don't need escaping, and it is best to use the <code>/x</code> modifier on anything but trivial patterns so that you can add insignificant whitespace to reveal their structure. It is also best to use non-capturing parentheses <code>(?: ... )</code> around <code>PROTOCOL</code> and <code>APP</code> if you don't need to capture that part of the string.</p>\n\n<p>Take a look at this program, which seems to do as you ask.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $re = qr/ \\[ (?: PROTOCOL | APP ) \\s* \\(Id:\"(\\w+)\", \\s* ProcessID: \\s* \\d+ \\) \\] /x;\n\nwhile (&lt;DATA&gt;) {\n  print $1, \"\\n\" if /$re/;\n}\n\n__DATA__\n[PROTOCOL (Id:\"hashguy82\", ProcessID: 45)] \n[APP (Id:\"hashguy83\", ProcessID: 67)]\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>hashguy82\nhashguy83\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "is_accepted": false, "score": 0, "last_activity_date": 1422828563, "last_edit_date": 1422828563, "creation_date": 1422827412, "answer_id": 28268352, "question_id": 28267354, "link": "https://stackoverflow.com/questions/28267354/perl-regex-multiple-exclusion-patterns-in-a-single-string/28268352#28268352", "title": "PERL REGEX: Multiple exclusion/patterns in a single string", "body": "<p>Solution probably not elegant but is working for my purpose:</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    my @fields = m{^\n        (\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:[\\d,]+)\n        \\s (?: WARNING | TRACE) \\s\\s\n        \\[(?: APP | PROTOCOL)\\s[(]Id:[\"](\\w+)\",\\sProcessID:\\s\\d+\\)]\n        \\s PerformanceLogger \\s \\(PerformanceLogger\\.Python\\:\\d+\\) \\s - \\s\n        Client:(\\d+),\n        UserId:(\\d+),\n        Ip:([\\d.]+),\n        DurationMillis:\\d+,\n        DurationText:([\\d.]+) \\s seconds,\n        Path:(\\S+)\n    $}x\n    or next;\n</code></pre>\n\n<p>Please if i am using a patching solution make me aware....</p>\n"}], "owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422828563, "creation_date": 1422821677, "last_edit_date": 1422827324, "question_id": 28267354, "link": "https://stackoverflow.com/questions/28267354/perl-regex-multiple-exclusion-patterns-in-a-single-string", "title": "PERL REGEX: Multiple exclusion/patterns in a single string", "body": "<p>For some dark and mysterious matter my reg-ex is not pulling what I am expecting;</p>\n\n<p>Example:</p>\n\n<p>examples text to clean: </p>\n\n<pre><code>[PROTOCOL (Id:\"hashguy82\", ProcessID: 45)] \n[APP (Id:\"hashguy83\", ProcessID: 67)]\n</code></pre>\n\n<p>I only need to get <em>username</em></p>\n\n<p>my code is :</p>\n\n<pre><code>\\[(PROTOCOL|APP)\\s\\(Id:\\\"(\\w+)\\\"\\, \\s ProcessID\\: \\s \\d+\\)] \\s\n</code></pre>\n\n<p><code>(PROTOCOL|APP)</code> I meant  defining different possible patterns</p>\n\n<p><code>\\s</code> I meant spaces </p>\n\n<p>Output: no error just blank output as I guess fundamentally the format is correct but I cannot understand what I am missing.</p>\n\n<p>Example String:</p>\n\n<pre><code>2015-01-27 00:00:09,654 TRACE  [APP (Id:\"HashMap81\", ProcessId: 62)] PerformanceLogger (PerformanceLogger.Python:29) - Client:344,UserId:13383,Ip:127.0.0.1,DurationMillis:272,DurationText:0.272 seconds,Path:MyClass.myMethod\n</code></pre>\n\n<p>Complete Code:</p>\n\n<pre><code>my $file = 'path_my_file.txt';\nopen my $fh, \"&lt;\", $file or die \"Could not open $file: $!\";\n\n\nwhile (&lt;$fh&gt;) {\n    my @fields = m{^\n        (\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:[\\d,]+)\n        \\s (WARNING|TRACE) \\s\\s\n        qr/ \\[ (?: APP| PROTOCOL) \\s* \\(Id:\"(\\w+)\", \\s* ProcessID: \\s* \\d+ \\) \\] /x \\s\n        \\s PerformanceLogger \\s \\(PerformanceLogger\\.Python\\:\\d+\\) \\s - \\s\n        Client:(\\d+),\n        UserId:(\\d+),\n        Ip:([\\d.]+),\n        DurationMillis:\\d+,\n        DurationText:([\\d.]+) \\s seconds,\n        Path:/(\\S+)\n    $}x\n    or next;\n\n    printf('$date=%s; $level=%s; $user=%s; $client_id=%s; $user_id=%s; $ip=%s; $elapsedTime=%s; $classMethod=%s', @fields);\n    print \"\\n\";\n</code></pre>\n"}, {"tags": ["arrays", "perl", "negative-number"], "answers": [{"comments": [{"owner": {"reputation": 629, "user_id": 722785, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/683b39730e13bd63a2286f882b82e638?s=128&d=identicon&r=PG", "display_name": "Ryan Dunphy", "link": "https://stackoverflow.com/users/722785/ryan-dunphy"}, "edited": false, "score": 1, "creation_date": 1422822863, "post_id": 28267327, "comment_id": 44891155, "body": "Makes sense.  Thankyou, sir."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1422826871, "post_id": 28267327, "comment_id": 44892578, "body": "You could also use a hash. That would be less efficient, but would work in the situation where you don&#39;t know the largest negative number you&#39;ll encounter. // You could also use two arrays: one for the negative indexes (accessed using the negated indexes), and one for non-negative indexes."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1422821530, "creation_date": 1422821530, "answer_id": 28267327, "question_id": 28267215, "link": "https://stackoverflow.com/questions/28267215/push-into-negative-array/28267327#28267327", "title": "Push into negative array", "body": "<p>A Perl array cannot have elements before index zero. Using indices less than zero accesses the elements relative to the <em>end</em> of the array, so that given</p>\n\n<pre><code>my @arr = qw/ a b c d /\n</code></pre>\n\n<p><code>$arr[-1]</code> is <code>d</code>, <code>$arr[-2]</code> is <code>c</code>, etc.</p>\n\n<p>If you wish to store values of a function, then you should transform the values so that they start at zero and have an interval of one. Note that a similar issue arises if you want to store values of <em>f(x)</em> for values of <em>x</em> with intervals of 0.1, except that now the problem is one of scaling rather than offset.</p>\n"}], "owner": {"reputation": 629, "user_id": 722785, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/683b39730e13bd63a2286f882b82e638?s=128&d=identicon&r=PG", "display_name": "Ryan Dunphy", "link": "https://stackoverflow.com/users/722785/ryan-dunphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 28267327, "answer_count": 1, "score": -2, "last_activity_date": 1422821530, "creation_date": 1422820885, "question_id": 28267215, "link": "https://stackoverflow.com/questions/28267215/push-into-negative-array", "title": "Push into negative array", "body": "<p>Is there a way to push values into a negative array? </p>\n\n<p>Lets say I'm doing something like this...</p>\n\n<pre><code>my @arr;\npush (@arr, \"one\");\npush (@arr, \"two\");\npush (@arr, \"three\");\n$arr[-1] = \"neg_one\";\n$arr[-2] = \"neg_two\";\n$arr[-3] = \"neg_three\";\nfor (my $a=-3;$a&lt;@arr;$a++){\n    print \"Array[\".$a.\"]::\".$arr[$a].\"\\n\";\n}\n\n# Return\nArray[-3]::neg_three\nArray[-2]::neg_two\nArray[-1]::neg_one\nArray[0]::neg_three\nArray[1]::neg_two\nArray[2]::neg_one\n\nprint \"Array length: \".@arr.\"\\n\";\n# Returns 3\n</code></pre>\n\n<p>So, can you not map a value to a negative index in an array?  Seemed to make sense to me that if I wanted to say, plot a value to the left of something, putting it into a negative array would do the trick.  So what's the big deal?  Am I doing it wrong or is this a very bad practice for reasons I haven't considered?</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["perl", "if-statement"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1422819515, "post_id": 28266840, "comment_id": 44890139, "body": "Just use an if. Read about branch prediction if you&#39;re worried about performance."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422819596, "post_id": 28266840, "comment_id": 44890168, "body": "On error, try alternative processing?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1422820884, "post_id": 28266840, "comment_id": 44890544, "body": "I presume you are reading your data from a disk file? If so, then the time taken to read each record will be much greater than the time to execute an <code>if</code> statement."}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422822203, "post_id": 28266840, "comment_id": 44890942, "body": "@Borodin: Yes, from a disk, but I am sure the OS buffers large chunks of data so it is not individual records."}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422822403, "post_id": 28266840, "comment_id": 44891008, "body": "@TLP: I don&#39;t understand your comment. The Once-in-a-million occurrence is not an error. It requires a re arrangement of array-slice masks."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1422824419, "post_id": 28266840, "comment_id": 44891752, "body": "Have you actually benchmarked the performance with and without an <code>if</code> statement? If not, this sounds like premature optimization."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1422824722, "post_id": 28266840, "comment_id": 44891881, "body": "@MeirG: Certainly the IO system will buffer the input to speed things up, but that doesn&#39;t mean that it takes no time at all to read the data: it simply makes it possible to approach the maximum read speed of the disk. A reasonable average disk read speed is 100MB per second. Say your records are 100 bytes each, that means you can read 1 million records per second, or 1\u03bcs per record. A 2011 Intel Core i5 processor runs at 83,000 MIPS, and so can execute 83,000 instructions in the time taken to read one record. It is pointless to avoid a few test and branch instructions amongst all that."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422831073, "post_id": 28266840, "comment_id": 44893794, "body": "@MeirG Presumably, the difference in processing requires some difference in the records. Presumably, such a difference will be noticeable by some error in the processing. Or noticeable in some way through the normal processing?"}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422831319, "post_id": 28266840, "comment_id": 44893866, "body": "@Borodin: Hmmm... very convincing! and records are about 130 bytes."}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422831651, "post_id": 28266840, "comment_id": 44893946, "body": "@ThisSuitIsBlackNot: No, not yet, but I will. And thanks to the kind and responsive people here I&#39;ll post the results here."}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "edited": false, "score": 0, "creation_date": 1422831996, "post_id": 28266840, "comment_id": 44894026, "body": "But still, what if an almost superfluous &#39;if&#39; condition indeed have a significant impact? Don&#39;t we have in Perl a hardware interrupt like mechanism that trips and jumps to some exception handler? (Sorry, not a very experienced Perl programmer. :("}, {"owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1422832255, "post_id": 28266840, "comment_id": 44894073, "body": "@TLP: I see what you mean, but in this case no error checking is done. The source has already been checked, so nothing akin to a hardware interrupt will take place."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1422838909, "post_id": 28266840, "comment_id": 44895401, "body": "It might help if you gave us some concrete examples of what your data looks like."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1422890915, "post_id": 28278383, "comment_id": 44916168, "body": "<a href=\"https://en.wikipedia.org/wiki/IOPS#Solid-state_devices\" rel=\"nofollow noreferrer\">A modern, middle of the road SSD will do more like 10,000 to 100,000 IOPS</a>, the IO / CPU gap has closed considerably.  I still think the OP shouldn&#39;t worry about it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1422892743, "post_id": 28278383, "comment_id": 44917417, "body": "It&#39;s true - as a storage engineer I&#39;m eagerly watching the SSD trend. They still suffer from scalability - the device size vs. controllers vs. footprint on the floor mean we&#39;re still running 90% spinning rust by capacity. (By iops, it&#39;s a fairly even split between SATA/FC/SSD)."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1422882232, "creation_date": 1422882232, "answer_id": 28278383, "question_id": 28266840, "link": "https://stackoverflow.com/questions/28266840/efficiently-checking-for-a-rare-occurrence/28278383#28278383", "title": "Efficiently checking for a rare occurrence", "body": "<p>The answer is: Don't worry about it. </p>\n\n<p>The speed of your CPU is considerably higher than that of your disk IO, so an <code>if</code> test is just not going to make a lot of difference - even if you ignored e.g. branch prediction algorithms. </p>\n\n<p>An SSD will do about 1500 IO operations per second, and to quote Borodin from the comments:</p>\n\n<blockquote>\n  <p>A reasonable average disk read speed is 100MB per second. Say your records are 100 bytes each, that means you can read 1 million records per second, or 1\u03bcs per record. A 2011 Intel Core i5 processor runs at 83,000 MIPS, and so can \n  execute 83,000 instructions in the time taken to read one record. It is pointless to avoid a few test and branch instructions amongst all that.</p>\n</blockquote>\n\n<p>Basically this is true in any code - your IO to storage is almost always your limiting factor, because CPUs have followed <a href=\"http://en.wikipedia.org/wiki/Moore%27s_law\" rel=\"nofollow\">Moore's law</a>, but the actual rotational speed of a spinning disk hasn't really changed in 15+ years. SSDs are something of a revolutionary change, but they're still too expensive to use as bulk storage options (and even if that wasn't true, they're <em>still</em> going to be the bottleneck on a sustained data transfer/processing operation).  </p>\n"}], "owner": {"reputation": 309, "user_id": 2964417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b5c71d859d620825097c7d6bbeef6afa?s=128&d=identicon&r=PG", "display_name": "MeirG", "link": "https://stackoverflow.com/users/2964417/meirg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422882232, "creation_date": 1422818879, "question_id": 28266840, "link": "https://stackoverflow.com/questions/28266840/efficiently-checking-for-a-rare-occurrence", "title": "Efficiently checking for a rare occurrence", "body": "<p>I have to process many millions of data records. A data record has a record-type string at the beginning of a record. Processing is record-type-dependent but does not require to 'if'/'elsif' the type, just selecting an array-slice mask from a hash.</p>\n\n<p>However, on the order of once-per-million I might encounter a record type that require a totally different kind of processing.</p>\n\n<p>I hate to insert an 'if' testing for this record type that will return 'true' so rarely.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks</p>\n\n<p>Meir</p>\n"}, {"tags": ["sql", "perl", "date", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422808880, "post_id": 28264962, "comment_id": 44886745, "body": "Hi Rob, how this gets applied in my case, look like i should declare first ad date_time type in my pl scrpt?"}, {"owner": {"reputation": 1442, "user_id": 4115522, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KR2bz.jpg?s=128&g=1", "display_name": "Reenactor Rob", "link": "https://stackoverflow.com/users/4115522/reenactor-rob"}, "reply_to_user": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "edited": false, "score": 0, "creation_date": 1422811452, "post_id": 28264962, "comment_id": 44887566, "body": "Actually, this module might be better  <a href=\"http://search.cpan.org/~cfaerber/DateTime-Format-DBI-0.041/lib/DateTime/Format/DBI.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~cfaerber/DateTime-Format-DBI-0.041/lib/&hellip;</a>  Beautiful code snippet right at the top."}], "tags": [], "owner": {"reputation": 1442, "user_id": 4115522, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KR2bz.jpg?s=128&g=1", "display_name": "Reenactor Rob", "link": "https://stackoverflow.com/users/4115522/reenactor-rob"}, "is_accepted": false, "score": 1, "last_activity_date": 1422816711, "last_edit_date": 1422816711, "creation_date": 1422808270, "answer_id": 28264962, "question_id": 28264898, "link": "https://stackoverflow.com/questions/28264898/perl-dbi-inserting-from-pl-into-an-oracle-db-a-to-date-function-into-a-test-va/28264962#28264962", "title": "PERL DBI: Inserting From .pl into an Oracle DB a to_date function into a test variable", "body": "<p>CPAN has the <a href=\"http://search.cpan.org/perldoc?DateTime::Format::Oracle\" rel=\"nofollow\">DateTime::Format::Oracle</a> and <a href=\"http://search.cpan.org/perldoc?DateTime::Format::DBI\" rel=\"nofollow\">DateTime::Format::DBI</a> modules for this.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 3384047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nrbGv.png?s=128&g=1", "display_name": "grvsmth", "link": "https://stackoverflow.com/users/3384047/grvsmth"}, "is_accepted": false, "score": 2, "last_activity_date": 1481646816, "creation_date": 1481646816, "answer_id": 41126068, "question_id": 28264898, "link": "https://stackoverflow.com/questions/28264898/perl-dbi-inserting-from-pl-into-an-oracle-db-a-to-date-function-into-a-test-va/41126068#41126068", "title": "PERL DBI: Inserting From .pl into an Oracle DB a to_date function into a test variable", "body": "<p>You can also change the date format for the session.  This is useful, for example, in Perl DBI, where the to_date() function is not available:</p>\n\n<pre><code>ALTER SESSION SET NLS_DATE_FORMAT='YYYY-MM-DD HH24:MI:SS'\n</code></pre>\n\n<p>You can permanently set the default nls_date_format as well:</p>\n\n<pre><code>ALTER SYSTEM SET NLS_DATE_FORMAT='YYYY-MM-DD HH24:MI:SS'\n</code></pre>\n\n<p>In Perl DBI you can run these commands with the do() method:</p>\n\n<pre><code>$db-&gt;do(\"ALTER SESSION SET NLS_DATE_FORMAT='YYYY-MM-DD HH24:MI:SS');\n</code></pre>\n\n<p><a href=\"http://www.dba-oracle.com/t_dbi_interface1.htm\" rel=\"nofollow noreferrer\">http://www.dba-oracle.com/t_dbi_interface1.htm</a>\n<a href=\"https://community.oracle.com/thread/682596?start=15&amp;tstart=0\" rel=\"nofollow noreferrer\">https://community.oracle.com/thread/682596?start=15&amp;tstart=0</a></p>\n"}], "owner": {"reputation": 541, "user_id": 3143161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ea198236954fde8cf57427aa1c17cad?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3143161/franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1481646816, "creation_date": 1422807851, "question_id": 28264898, "link": "https://stackoverflow.com/questions/28264898/perl-dbi-inserting-from-pl-into-an-oracle-db-a-to-date-function-into-a-test-va", "title": "PERL DBI: Inserting From .pl into an Oracle DB a to_date function into a test variable", "body": "<p>First a big thank you to all PERL specialist in this wonderful website; i'am learning so much.</p>\n\n<p>I have a small \"translation\" issue;</p>\n\n<p>my .pl script perform these task sequentially:</p>\n\n<ol>\n<li>Read a .txt file (in real life a log)</li>\n<li>a regex cleans and store in memory variables some info </li>\n<li>while reading line by line it inserts into a Oracle table</li>\n<li>Exit and disconnect when finish gracefully.</li>\n</ol>\n\n<p>The Table has 8 columns and one of this store date and time of an event and the format that i declared into sql is:</p>\n\n<pre><code>DATETIME_EVENT VARCHAR2(255 BYTE) DEFAULT NULL NOT NULL \n</code></pre>\n\n<p>you can clearly see where i am going in a bit....</p>\n\n<p>so point 3 above execute this block:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO myTable(TIME_ISSUE,col2,col3,col4,col5,col6,col7,col8) VALUES (?, ?, ?, ?, ?, ?, ?, ?)');\n</code></pre>\n\n<p>EXAMPLE INSERTED IS: 2014-09-19 00:03:58,562 </p>\n\n<p>Everything is smooth and fine , however I will perform set of queries later on; but I  will have to translate with to_date function in SQL to interpret  TIME_ISSUE column as datetime TYPE.</p>\n\n<p>AS: </p>\n\n<pre><code>select to_date(SUBSTR(TIME_ISSUE,0,19) ,'YYYY-MM-DD HH24:MI:SS' ) from myTable;\n</code></pre>\n\n<p>OUTPUT: 19/09/2014 23:59:56</p>\n\n<p>If I create the table.column as datetime type how can i write the perl insert block above in order to insert a txt into datetime type?</p>\n\n<p>I tried but is not working at all:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO REQUEST (TO_DATE(SUBSTR(DATETIME_EVENT ,0,19), 'YYYY-MM-DD HH24:MI:SS'),LOG_LEVEL,LOGONID, CLIENTID, USERID,IPADDRESS,DURATION,CLASSMETHOD) VALUES (?, ?, ?, ?, ?, ?, ?, ?)')\n</code></pre>\n\n<p>p.s.</p>\n\n<p>you can assume that if i run the perl above i have previously created that column as this:</p>\n\n<pre><code>TIME_ISSUE   DATE DEFAULT NOT NULL                       \n</code></pre>\n"}, {"tags": ["perl", "loops"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422801803, "post_id": 28263790, "comment_id": 44884596, "body": "It&#39;s not clear what you mean by <code>$dir[$iter]</code> and <code>$dir[$iter2]</code>. They access an array called <code>@dir</code> which doesn&#39;t exist."}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422802046, "post_id": 28263790, "comment_id": 44884650, "body": "by $dir[$iter], I want to access to the folder dir1 during the first iteration, process all files in that folder, and then put store the processed files in dir2."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422802101, "post_id": 28263790, "comment_id": 44884664, "body": "But what <i>are</i> those directories?"}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422802243, "post_id": 28263790, "comment_id": 44884707, "body": "If the files in dir1 are L1, L2, L3, ..., L500, I want the HRest to be executed as:  HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir1/L1&#39; -M dir2 -S train.scp for the first file, and as HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir1/L2 -M dir2 -S  for the next file, and so on for all files. then in next call of the script, I want it to be changed to   HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir2/L1&#39; -M dir3 -S train.scp for the first file, and so on.."}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422802283, "post_id": 28263790, "comment_id": 44884724, "body": "I hope its clear now"}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422802514, "post_id": 28263790, "comment_id": 44884783, "body": "Im calling the script iteratively from a shell script, as: for i in {1..4};do, trainhmms.pl dir$i $i  , done ,  ....   at each iteration, it is supposed to take all files from dir$i, process them and put them in a new directory dir(($i+1))"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422803327, "post_id": 28263790, "comment_id": 44885021, "body": "I think it would be better to write both loops in Perl, rather than one in bash and the other in Perl. Anyway, I have written something that I think should help. Please take a look at my answer."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "edited": false, "score": 0, "creation_date": 1422815143, "post_id": 28264058, "comment_id": 44888728, "body": "Thank you for such an impressive answer Borodin! But when I try it, I get the following error: InitSource: Cannot open source file /Users/negarolfati/Documents/Detection_rerun/AF_TIMIT/1_stat&zwnj;&#8203;e/trainHMMs/dir1//Us&zwnj;&#8203;ers/negarolfati/Docu&zwnj;&#8203;ments/Detection_reru&zwnj;&#8203;n/AF_TIMIT/1_state/t&zwnj;&#8203;rainHMMs/dir1/L505     ....there the $root is repeated twice but i can not figure out where to change, could you kindly help me?"}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "edited": false, "score": 1, "creation_date": 1422816070, "post_id": 28264058, "comment_id": 44889064, "body": "Sorry, my mistake! Its working now, thank you so much for such a great help! :)"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1422825123, "post_id": 28264058, "comment_id": 44892024, "body": "@Borodin, the question uses <a href=\"https://metacpan.org/pod/File::Slurp\" rel=\"nofollow noreferrer\"><code>File::Slurp</code></a>&#39;s <a href=\"https://metacpan.org/pod/File::Slurp#read_dir\" rel=\"nofollow noreferrer\"><code>read_dir</code></a> which <i>does</i> operate on a string containing a directory name and <i>doesn&#39;t</i> return <code>.</code> or <code>..</code>."}, {"owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1422864031, "post_id": 28264058, "comment_id": 44901500, "body": "@Jim Davis, so you mean the way I used read_dir is also correct?"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1422865022, "post_id": 28264058, "comment_id": 44901921, "body": "Yep.  You still need to prefix the result with the directory name to get the full path, though"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1422879228, "post_id": 28264058, "comment_id": 44909314, "body": "@JimDavis: Damn, you&#39;re quite right. Thanks for correcting me. I hate that module for so many reasons!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1422879341, "last_edit_date": 1422879341, "creation_date": 1422802687, "answer_id": 28264058, "question_id": 28263790, "link": "https://stackoverflow.com/questions/28263790/how-to-loop-through-a-directory-in-perl/28264058#28264058", "title": "How to loop through a directory in perl", "body": "<p><strike>You can't just use <code>readdir</code> on a directory string. You have to <code>opendir</code> the string, then <code>readdir</code> from the directory handle that you get, and finally <code>closedir</code> the handle.</strike></p>\n\n<p>You must also remember that <code>readdir</code> returns directory names as well as file names, <strike>and the pseudo-directories <code>.</code> and <code>..</code> too</strike>. To filter out just the files, you can use the <code>-f</code> test operator. And it is usually most convenient to <code>chdir</code> to the directory you are reading so that you don't have to append the path to each file name that <code>readdir</code> returns before you do the test.</p>\n\n<p>I don't know what <code>HRest</code> is, but if your command line must be executed from a specific working directory (perhaps to acccess <code>timedlabels_train.mlf</code> and <code>train.scp</code>) then please say so. I will have to remove the <code>chdir</code> statement.</p>\n\n<p>Something like this should get you going. I have used <code>autodie</code>, which does automatic checks on file system operations. It saves having to check <code>chdir</code> and <code>opendir</code> explicitly each time with <code>or die $!</code>.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse autodie;\n\nuse File::Spec::Functions 'catdir';\n\nmy ($file, $iter) = @ARGV;\n\nmy $root = '/Users/negarolfati/Documents/Detection_rerun/AF_TIMIT/1_state/trainHMMs';\nmy $dir1 = catdir $root, 'dir'.$iter;\nmy $dir2 = catdir $root, 'dir'.($iter+1);\n\nchdir $dir1;\n\nopendir my ($dh), '.';\nmy @files = grep -f, readdir $dh;\nclosedir $dh;\n\nfor my $file ( @files ) {\n\n    my $cmd = \"HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l '$dir1/$file' -M '$dir2' -S train.scp\";\n\n    system($cmd);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Here is an alternative version that avoids <code>chdir</code> so that the current working directory remains unchanged.</p>\n\n<p>I have added the secondary loop that was in your bash script. I have also added a <code>print</code> statement so that you can see each command before it is executed.</p>\n\n<p>To allow the <code>system</code> call to go ahead, just delete or comment out the <code>next</code> statement.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse autodie;\n\nuse File::Spec::Functions qw/ catdir catfile /;\n\nSTDOUT-&gt;autoflush;\n\nmy $root = '/Users/negarolfati/Documents/Detection_rerun/AF_TIMIT/1_state/trainHMMs';\n\nfor my $iter (1 .. 4) {\n\n  my $dir1 = catdir $root, 'dir'.$iter;\n  my $dir2 = catdir $root, 'dir'.($iter+1);\n\n  opendir my ($dh), $dir1;\n\n  while (my $node = readdir $dh) {\n    my $file = catfile($dir1, $node);\n    next unless -f $file;\n\n    my $cmd = \"HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l '$file' -M '$dir2' -S train.scp\";\n    print $cmd, \"\\n\";\n    next;               # Remove for full functionality\n\n    system($cmd);\n  }\n\n  closedir $dh;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 287, "user_id": 4441356, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9TJCclEDZ1Y/AAAAAAAAAAI/AAAAAAAAAJI/x4bj_-poTdQ/photo.jpg?sz=128", "display_name": "CapEnt", "link": "https://stackoverflow.com/users/4441356/capent"}, "is_accepted": false, "score": -1, "last_activity_date": 1422804699, "creation_date": 1422804699, "answer_id": 28264387, "question_id": 28263790, "link": "https://stackoverflow.com/questions/28263790/how-to-loop-through-a-directory-in-perl/28264387#28264387", "title": "How to loop through a directory in perl", "body": "<p>You can do this:</p>\n\n<pre><code>my @files = &lt;$path/*&gt;;\nforeach my $filename ( reverse(@files) ) {\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3310681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394e73235ec5ee0c3a868e45766c2f2e?s=128&d=identicon&r=PG&f=1", "display_name": "KianStar", "link": "https://stackoverflow.com/users/3310681/kianstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 28264058, "answer_count": 2, "score": 0, "last_activity_date": 1422879341, "creation_date": 1422801002, "last_edit_date": 1422804149, "question_id": 28263790, "link": "https://stackoverflow.com/questions/28263790/how-to-loop-through-a-directory-in-perl", "title": "How to loop through a directory in perl", "body": "<p>I have a directory <code>dir1</code> containing several hundreds of files, which are to be iteratively processed by a speech program called HRest. The program is supposed to take each file one by one, process it and put it in a new directory (as <code>dir2</code> for first iteration) to be used in next iteration. My problem is that i don't know if the way I've employed to loop through the files in <code>dir1</code>, and also the way I am running the script <code>(trainhmms.pl dir1 1)</code> is correct.</p>\n\n<p>If the files in dir1 are L1, L2, L3, ..., L500, I want <code>HRest</code> to be executed as</p>\n\n<pre><code>HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir1/L1 -M dir2 -S train.scp\n</code></pre>\n\n<p>for the first file, and as</p>\n\n<pre><code>HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir1/L2 -M dir2 -S train.scp\n</code></pre>\n\n<p>for the next file, and so on for all files. Then in next call of the script, I want it to be changed to</p>\n\n<pre><code>HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l dir2/L1 -M dir3 -S train.scp\n</code></pre>\n\n<p>for the first file, and so on..</p>\n\n<p>Here is the script for the first iteration: </p>\n\n<pre><code>#!/usr/bin/perl\nuse File::Slurp;\n\n# Usage: trainhmms.pl dir1 1\n# dir1:  Folder containing models after being initialised by HInit (L1,L2,..,L512)\n\n$file = $ARGV[0];\n$iter = $ARGV[1];\n\n\nmy @files = read_dir '/Users/negarolfati/Documents/Detection_rerun/AF_TIMIT/1_state//trainHMMs/dir1';\n\nfor my $file ( @files ) {\n\n\n    $iter2 = $iter+1;\n    $cmd = \"HRest -T 1 -I timedlabels_train.mlf -t -i 20 -l '$dir[$iter]/$file' -M '$dir[$iter2]' -S train.scp \";\n\n    system(\"$cmd\");\n\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 4, "creation_date": 1422796043, "post_id": 28262411, "comment_id": 44882886, "body": "What do you mean by <code>this fails when there is only 1 record set returned.</code> It works pretty fine and gives <code>1</code> in <code>$trig_count</code>. What do you expect?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1422815833, "post_id": 28262411, "comment_id": 44888973, "body": "what is the dumper output where there is only one record?  I&#39;m guessing there is no array then..."}], "answers": [{"tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1422853262, "creation_date": 1422853262, "answer_id": 28271382, "question_id": 28262411, "link": "https://stackoverflow.com/questions/28262411/perl-count-elements-in-array-of-hash/28271382#28271382", "title": "Perl Count elements in array of hash", "body": "<p>If your data is either a single hash ref or an array reference:</p>\n\n<pre><code>my $trig_count = ref $trigger eq 'HASH' || scalar @$triggers;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4073666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-qOHHtd-3N5U/AAAAAAAAAAI/AAAAAAAAAAA/6QJYqgV0B7k/photo.jpg?sz=128", "display_name": "Sandeep Madhu", "link": "https://stackoverflow.com/users/4073666/sandeep-madhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 876, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422853262, "creation_date": 1422791747, "question_id": 28262411, "link": "https://stackoverflow.com/questions/28262411/perl-count-elements-in-array-of-hash", "title": "Perl Count elements in array of hash", "body": "<p>I am calling a webservice that returns an array of hash records as response.</p>\n\n<p>my $triggers = $zabbix->raw('trigger','get', $options);\nprint Dumper($triggers);</p>\n\n<p>Dumper output is as follows</p>\n\n<pre><code>      $VAR1 = [\n      {\n        'lastchange' =&gt; '1422765352',\n        'triggerid' =&gt; '10430011'\n      },\n      {\n        'lastchange' =&gt; '1422617151',\n        'triggerid' =&gt; '604979'\n      },\n     ]\n</code></pre>\n\n<p>Sometimes i get only 1 record as response. How do i count the no of records returned?</p>\n\n<p>I tried using my $trig_count = @{$triggers}; but this fails when there is only 1 record set returned.</p>\n\n<p>Suggestions that will work for both the cases</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1423555265, "post_id": 28261393, "comment_id": 45185213, "body": "Is what you are describing anything like a role? That could be a job for <a href=\"https://metacpan.org/pod/Role::Tiny\" rel=\"nofollow noreferrer\"><code>Role::Tiny</code></a> ...  c.f. this nice comparison piece on <a href=\"http://oylenshpeegul.typepad.com/blog/2013/09/thats-how-we-role.html\" rel=\"nofollow noreferrer\">ways of composing functionality using perl OO</a>."}, {"owner": {"reputation": 553, "user_id": 1171163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1013351707fada043aa99c6c184204?s=128&d=identicon&r=PG", "display_name": "Bad_ptr", "link": "https://stackoverflow.com/users/1171163/bad-ptr"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1423584313, "post_id": 28261393, "comment_id": 45202498, "body": "@G.Cito, no i don&#39;t think that I need roles. But thanks for your attention and links.)"}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 1171163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1013351707fada043aa99c6c184204?s=128&d=identicon&r=PG", "display_name": "Bad_ptr", "link": "https://stackoverflow.com/users/1171163/bad-ptr"}, "edited": false, "score": 0, "creation_date": 1422799672, "post_id": 28263493, "comment_id": 44883970, "body": "Thanks! It works. I think that I can turn off strict refs inside a single small  function, nothing bad will happen:)."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "reply_to_user": {"reputation": 553, "user_id": 1171163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1013351707fada043aa99c6c184204?s=128&d=identicon&r=PG", "display_name": "Bad_ptr", "link": "https://stackoverflow.com/users/1171163/bad-ptr"}, "edited": false, "score": 0, "creation_date": 1422799767, "post_id": 28263493, "comment_id": 44883998, "body": "Yes, just added this."}], "tags": [], "owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "is_accepted": true, "score": 2, "last_activity_date": 1422799747, "last_edit_date": 1422799747, "creation_date": 1422799170, "answer_id": 28263493, "question_id": 28261393, "link": "https://stackoverflow.com/questions/28261393/i-have-a-string-with-a-package-name-is-it-possible-to-get-a-package-variable/28263493#28263493", "title": "I have a string with a package name. Is it possible to get a package variable?", "body": "<p>You should <code>use strict</code>, for many reasons, the one concerning your case being explained <a href=\"http://learn.perl.org/faq/perlfaq7.html#How-can-I-use-a-variable-as-a-variable-name\" rel=\"nofollow\" title=\"here\">here</a>.</p>\n\n<p>You can disable the warning, <code>use strict</code> emits for the following code by </p>\n\n<pre><code># some code block\n{  \n   ...\n   no strict 'refs'; \n   return @{$package_name.'::desired_var'};\n}\n</code></pre>\n\n<p>You should try to put what you really want to achieve in a seperate question and explain why you think, it could only be done with <code>our</code> variables.</p>\n"}], "owner": {"reputation": 553, "user_id": 1171163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1013351707fada043aa99c6c184204?s=128&d=identicon&r=PG", "display_name": "Bad_ptr", "link": "https://stackoverflow.com/users/1171163/bad-ptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 28263493, "answer_count": 1, "score": 2, "last_activity_date": 1422799747, "creation_date": 1422783674, "last_edit_date": 1422786950, "question_id": 28261393, "link": "https://stackoverflow.com/questions/28261393/i-have-a-string-with-a-package-name-is-it-possible-to-get-a-package-variable", "title": "I have a string with a package name. Is it possible to get a package variable?", "body": "<p>in WithVar.pm:</p>\n\n<pre><code>package Test::WithVar;\n\nour @desired_var = qw(1 2 3);\n</code></pre>\n\n<p>OtherPackage.pm:</p>\n\n<pre><code>package Test::OtherPackage;\nuse Test::WithVar;\n\nsub test_get_var ($) {\n    my $package_name = shift;\n\n    #\u2193 How to do that ? Is it possible ? \u2193\n    return @{$package_name::desired_var};\n}\n\n# I know that I can access the desired_var with @Test::WithVar::desired_var,\n# (explicitly typed package name, a 'bareword')\n# but what if I have package name in a string ?\n\ntest_get_var('Test::WithVar');\n</code></pre>\n\n<p>Another solution (i guess) is to define a function in the WithVar package that will return our variable.</p>\n\n<pre><code>package Test::WithVar;\n\nour @desired_var = qw(1 2 3);\n\nsub return_desired_var ($) {\n    my $self = shift;\n    our @desired_var;\n    return \\@desired_var;\n}\n</code></pre>\n\n<p>So now I can:</p>\n\n<pre><code>package Test::OtherPackage;\nuse Test::WithVar;\n\nmy $str = 'Test::WithVar';\nprint @{$str-&gt;return_desired_var()}, '\\n';\n</code></pre>\n\n<p>But the problem is the inheritance. I need to inherit from WithVar and child modules will return WithVar::desired_var and I need $ChildPackage::desired_var.</p>\n\n<p>package Test::ChildWithVar;\nuse parent 'Test::WithVar';</p>\n\n<p>our @desired_var = qw(4 5 6); # redefine variable in child module.</p>\n\n<p>And if I write</p>\n\n<pre><code>package Test::OtherPackage;\nuse Test::ChildWithVar;\n\nmy $str = 'Test::ChildWithVar';\n\n# This will print 1 2 3 of course, not 4 5 6.\nprint @{$str-&gt;return_desired_var()}, '\\n'; \n</code></pre>\n\n<p>So I need somehow to write universal method in Test::WithVar package:</p>\n\n<pre><code>package Test::WithVar;\n\nour @desired_var = qw(1 2 3);\n\nsub return_desired_var_universal ($) {\n    my $self = shift;\n    my $class = ref $self || $self;\n    return $class::desired_var; #Somehow ?!\n}\n</code></pre>\n\n<p>I know that I can use a hash and store package-specific variables in it instead of using 'our' variables. I know. But I need a solution with 'our', or the clear understanding that this is not possible.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["java", "perl", "nosql"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1422974105, "post_id": 28260588, "comment_id": 44954169, "body": "I&#39;d suggest have a look at elasticsearch/Kibana/Logstash."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 3774179, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZqAg8.jpg?s=128&g=1", "display_name": "alizelzele", "link": "https://stackoverflow.com/users/3774179/alizelzele"}, "is_accepted": false, "score": 0, "last_activity_date": 1422777883, "creation_date": 1422777883, "answer_id": 28260714, "question_id": 28260588, "link": "https://stackoverflow.com/questions/28260588/project-log-analyzer/28260714#28260714", "title": "Project : Log Analyzer", "body": "<p>why inventing a wheel again when there is already some ( just change the color and add what u want to it).</p>\n\n<p>maybe something like <a href=\"http://logging.apache.org/chainsaw/\" rel=\"nofollow\">chainsaw</a> or <a href=\"http://lilith.huxhorn.de/\" rel=\"nofollow\">lilith</a>.</p>\n"}], "owner": {"reputation": 2179, "user_id": 2679432, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c9e7d4520d74e4fb4df7e206456440cf?s=128&d=identicon&r=PG&f=1", "display_name": "user4127", "link": "https://stackoverflow.com/users/2679432/user4127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505821163, "creation_date": 1422776573, "last_edit_date": 1506103282, "question_id": 28260588, "link": "https://stackoverflow.com/questions/28260588/project-log-analyzer", "title": "Project : Log Analyzer", "body": "<p>I'm thinking of starting a log analyzer project for a product I'm supporting.</p>\n\n<p>Does anyone have any idea how to begin? </p>\n\n<p>Basically the logs come in a zip file and the log analyzer have to \"unzip\" it and look for key words. (Example bugs related to an exception and etc).</p>\n\n<p>I believe majority of the code will surround rule base system where by certain rules will be trigger when a version of logs has been uploaded.</p>\n\n<p>It should have some flexibility to allow user to add rules into it as issues are being discovered.</p>\n\n<p>Any good book to read on this topic and etc?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1422758123, "post_id": 28258794, "comment_id": 44875536, "body": "Succinctly, yes \u2014 the order matters. Note that you cannot pass any arguments after the array; <code>$aIndex</code> will always be <code>undef</code> and <code>@affiliations</code> will absorb any argument intended to be in <code>$aIndex</code>.  And yes, all scalars must appear before any array, and you can only have one array.  References are disinct, of course \u2014 they&#39;re like scalars (are a special case of scalar)."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 5, "last_activity_date": 1422759621, "creation_date": 1422759621, "answer_id": 28258965, "question_id": 28258794, "link": "https://stackoverflow.com/questions/28258794/is-the-order-in-which-parameters-are-passed-to-a-perl-subroutine-significant/28258965#28258965", "title": "Is the order in which parameters are passed to a Perl subroutine significant?", "body": "<p>Certainly the order matters.</p>\n\n<p>Arguments are passed in the order in which you pass them, and an array argument is <em>flattened</em> into the argument list. The argument list appears inside the subroutine as the contents of the <code>@_</code> list.</p>\n\n<p>You can't actually pass an array as an argument; its elements are extracted and shoved into the list with any other arguments.</p>\n\n<p>The problem you're having is because of the way you're processing the arguments:</p>\n\n<pre><code>my ($author, @affiliations, $aIndex) = @_;\n</code></pre>\n\n<p><code>$author</code> gets the first element of <code>@_</code>, as you intended, but <code>@affiliations</code> slurps up all the rest of the list. The value <code>undef</code> is then stored in <code>$aIndex</code>.</p>\n\n<p>You can pass a <em>single</em> array to a subroutine as long as it's the last argument:</p>\n\n<pre><code>my($first_scalar, $second_scalar, @array) = @_;\n</code></pre>\n\n<p>If you pass multiple arrays to a subroutine:</p>\n\n<pre><code>foo(@array1, @array2);\n</code></pre>\n\n<p>the elements of both arrays are flattened into a single list, and there's no way for the subroutine to know which elements came from which array argument.</p>\n\n<p>You can pass <em>references</em> to arrays:</p>\n\n<pre><code>sub foo {\n    my ($scalar1, $array_ref1, $scalar2, $array_ref2) = @_;\n    # ...\n}\n</code></pre>\n\n<p>and then call it like this:</p>\n\n<pre><code>foo(42, \\@array1, $some_scalar, \\@array2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1422828275, "creation_date": 1422828275, "answer_id": 28268478, "question_id": 28258794, "link": "https://stackoverflow.com/questions/28258794/is-the-order-in-which-parameters-are-passed-to-a-perl-subroutine-significant/28268478#28268478", "title": "Is the order in which parameters are passed to a Perl subroutine significant?", "body": "<p>Subroutines take a list of scalars as arguments. If you build the argument list from an array, the contents of the array will be passed.</p>\n\n<pre><code>$ perl -E'sub f { say \"$_: $_[$_]\" for 0..$#_; }  f(\"a\", \"b\", \"c\", \"d\", \"e\")'\n0: a\n1: b\n2: c\n3: d\n4: e\n\n$ perl -E'sub f { say \"$_: $_[$_]\" for 0..$#_; }  @a = (\"b\"); f(\"a\", @a, \"c\", \"d\", \"e\")'\n0: a\n1: b\n2: c\n3: d\n4: e\n\n$ perl -E'sub f { say \"$_: $_[$_]\" for 0..$#_; }  @a = (\"b\", \"c\"); f(\"a\", @a, \"d\", \"e\")'\n0: a\n1: b\n2: c\n3: d\n4: e\n</code></pre>\n\n<p>Now you assign the argument list (the contents of <code>@_</code>) to</p>\n\n<pre><code>($author, @affiliations, $aIndex)\n</code></pre>\n\n<p>How many of the scalars should it assign to <code>@affiliations</code>? You could say all but the first and the last, but then you have to come up for a new rule for</p>\n\n<pre><code>my (@a, @b) = @_;\n</code></pre>\n\n<p>To keep it simple, Perl always assigns all of the remaining scalars to the first array in the list. This works fine if the array is the last element, but not otherwise.</p>\n\n<p>If you want to pass an array to a sub, the best way is to pass a reference to it.</p>\n\n<pre><code>$ perl -E'sub f { say \"$_: $_[$_]\" for 0..$#_; }  @a = (\"b\", \"c\"); f(\"a\", \\@a, \"d\", \"e\")'\n0: a\n1: ARRAY(0x14ff8d0)\n2: d\n3: e\n</code></pre>\n"}], "owner": {"reputation": 2946, "user_id": 751621, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c39aa04d169149a5f792167abcdbbbd?s=128&d=identicon&r=PG", "display_name": "craigcaulfield", "link": "https://stackoverflow.com/users/751621/craigcaulfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 28258965, "answer_count": 2, "score": 1, "last_activity_date": 1422828275, "creation_date": 1422757832, "question_id": 28258794, "link": "https://stackoverflow.com/questions/28258794/is-the-order-in-which-parameters-are-passed-to-a-perl-subroutine-significant", "title": "Is the order in which parameters are passed to a Perl subroutine significant?", "body": "<p>Is the order in which parameters are passed to a Perl subroutine significant? When I debugged the following code:</p>\n\n<pre><code>my $loopCounter = 1;\nforeach(@authors) {\n\n   my @splitAffiliations = splitAffiliations($params);\n   my @foundItems = findAffiliationForAuthor($_, @splitAffiliations, $loopCounter);\n\n   # Process @foundItems\n\n   $loopCounter++;\n}\n\n...\n\nsub findAffiliationForAuthor {\n\n   my ($author, @affiliations, $aIndex) = @_;\n\n   ...\n} \n</code></pre>\n\n<p>I found that the variable <code>$loopCounter</code> had a value immediately before the subroutine <code>findAffiliationForAuthor</code> was called, but was undefined after the call. So, the subroutine received values for the first two parameters and nothing for the third. But, when I changed the order of the parameters to:</p>\n\n<pre><code>my @foundItems = findAffiliationForAuthor($loopCounter, $_, @splitAffiliations);\n</code></pre>\n\n<p>The value of <code>$loopCounter</code> was retained and passed the subroutine as expected. </p>\n\n<p>It looks like I have to put all my scalar variables before my array variables, or maybe not mix them. Does that sound right?</p>\n"}, {"tags": ["regex", "wordpress", "perl", "parsing"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422736928, "post_id": 28256254, "comment_id": 44870791, "body": "What result do you want exactly? Can you rely on there never being double quotes in the code?"}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422737170, "post_id": 28256254, "comment_id": 44870888, "body": "Sorry I forgot to include that but yes, there could be double quotes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422737271, "post_id": 28256254, "comment_id": 44870911, "body": "Okay, but what result do you want exactly? How do you want the information stored?"}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422737400, "post_id": 28256254, "comment_id": 44870951, "body": "The values in the second set of single quotes for each define. Something like my($host, $name, $user, $pass) =~ /regex/ would work."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "edited": false, "score": 0, "creation_date": 1422744723, "post_id": 28256366, "comment_id": 44873016, "body": "Thanks for the reply. I&#39;ll try to build on top of this and see if I can come up with a solution."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1422737218, "creation_date": 1422737218, "answer_id": 28256366, "question_id": 28256254, "link": "https://stackoverflow.com/questions/28256254/perl-parsing-specific-data-from-a-file/28256366#28256366", "title": "Perl - Parsing specific data from a file", "body": "<p>This should help you towards a solution. It simply extracts all the sequences of <em>word</em> characters (alphanumeric and underscore) from each line, and uses the second and third fields as the variable name and value.</p>\n\n<p>This won't work if the values are ever more complex than a simple quoted string, or if the values can contain something other than word characters, such as whitespace.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n  my @fields = /\\w+/g;\n  my ($var, $val) = @fields[1,2];\n  printf \"%-12s = %s\\n\", $var, $val;\n}\n\n__DATA__\ndefine('DB_NAME', 'foobar_db');\ndefine('DB_USER', 'foobar_user');\ndefine('DB_PASSWORD', 'foobar_password');\ndefine('DB_HOST', 'localhost');\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>DB_NAME      = foobar_db\nDB_USER      = foobar_user\nDB_PASSWORD  = foobar_password\nDB_HOST      = localhost\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 28256366, "answer_count": 1, "score": 0, "last_activity_date": 1422737218, "creation_date": 1422736570, "question_id": 28256254, "link": "https://stackoverflow.com/questions/28256254/perl-parsing-specific-data-from-a-file", "title": "Perl - Parsing specific data from a file", "body": "<p>I'm trying to parse the values for DB_HOST, DB_NAME, DB_USER, and DB_PASSWORD from this block of code which is in a PHP file:</p>\n\n<pre><code>define('DB_NAME', 'foobar_db');\ndefine('DB_USER', 'foobar_user');\ndefine('DB_PASSWORD', 'foobar_password');\ndefine('DB_HOST', 'localhost');\n</code></pre>\n\n<p>My current approach (as far as I've gotten with this anyways) is to store the file in a variable and parse the values for each define in one go using a regular expression. I can do that all fine and dandy. However, I only know basic regular expression syntax and don't know how to construct one that works for this. </p>\n\n<p>I appreciate the help in advance~</p>\n"}, {"tags": ["regex", "perl", "tr"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1422734159, "post_id": 28255857, "comment_id": 44869970, "body": "You can set a variable when you see the beginning of a block, and check that variable in your <code>while (&lt;&gt;)</code> loop to know if you&#39;re inside a block. Or when you see the beginning of a block you can start a nested loop that reads until the end of the block."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422734231, "post_id": 28255857, "comment_id": 44870001, "body": "What does the rest of the file look like? Would it be appropriate to change the record separator to semicolon <code>;</code>? How big is the file?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422734354, "post_id": 28255857, "comment_id": 44870035, "body": "Then you need to clarify what you have and how you want to process it. It reads as if <i>Existing_Value_To_Be_Changed</i> is always zero and <i>New_Value</i> is always one."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422735426, "post_id": 28255857, "comment_id": 44870353, "body": "So you&#39;re either changing everything to a 0 or everything to a 1?"}, {"owner": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422735470, "post_id": 28255857, "comment_id": 44870365, "body": "yes. that is correct"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422737481, "post_id": 28256208, "comment_id": 44870987, "body": "Thanks Borodin. When I try your code, I get an error that says - Bareword found where operator expected at line 49, near &quot;tr/0/1/r&quot; Do you know why this is happening?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422737966, "post_id": 28256208, "comment_id": 44871140, "body": "I would guess that you are using an old version of Perl. I have used the non-destructive substitution modifier <code>&#47;r</code>, which was introduced in version 14 of Perl 5 nearly four years ago."}, {"owner": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422739979, "post_id": 28256208, "comment_id": 44871710, "body": "Thanks Borodin. I fixed that. You guessed the DATA correctly. That&#39;s pretty much how the file looks. The code compiled but my input DATA file is still the same. The 1&#39;s did not get converted to 0.         foo_bar_xyz000123 := abcd (000011111110111         001001110000010000111000001010010010000111010100011100001110&zwnj;&#8203;1110         101110100011101100110110111110011001011100101001011111011001&zwnj;&#8203;1000);"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422741767, "post_id": 28256208, "comment_id": 44872204, "body": "How much do you know about Perl? The idea is that the <code>DATA</code> file handle is convenient for a demonstration, and in use you should either <code>open</code> an input file and use that file instead, or you should put the input file name on the command line and use the null file handle to read from it, like <code>while ( &lt;&gt; ) { ... }</code> etc. It really depends on whether you want to change the program or change the command line to read from a different file. Likewise, the program sends its output to <code>STDOUT</code>. You can use <code>open</code> to open a file for output, or you could redirect <code>STDOUT</code> on the command line using <code>&gt;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "edited": false, "score": 0, "creation_date": 1422742020, "post_id": 28256208, "comment_id": 44872286, "body": "If you want to edit the file in place then you should look at the <code>$^I</code> variable in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perldoc perlvar</code></a>. Which corresponds to the <code>-i</code> command-line switch <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perldoc perlrun</code></a>. Either that if use can write to a different file and then use <code>rename</code> to name the original file as a backup and the new file as the original."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422737834, "last_edit_date": 1422737834, "creation_date": 1422736299, "answer_id": 28256208, "question_id": 28255857, "link": "https://stackoverflow.com/questions/28255857/search-replace-character-in-string/28256208#28256208", "title": "Search &amp; Replace Character In String", "body": "<p>It is simplest to perform the translation as each multi-line sequence is found. This short program demonstrates.</p>\n\n<p>You haven't described the content of your input file, so I have had to guess at some test data. The <code>tr/0/1/r</code> within the executable substitution is the part that changes the data.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.014;    # For non-destructive substitution\n\nwhile (&lt;DATA&gt;) {\n  if (/foo_bar_xyz000123/) {\n    $_ .= &lt;DATA&gt; until /\\);/;\n    s| ( \\( [01\\s]+ \\) ) | $1 =~ tr/0/1/r |ex;\n  }\n  print\n}\n__DATA__\nxx\nyy\nzz\nfoo_bar_xyz000123 := abcd (100010                                       \n        01010111111001011010001010);\naa\nbb\ncc\nfoo_bar_xyz000123 := abcd (100010                                       \n        01010111111001011010001010\n        01010111111001011010001010\n        01010111111001011010001010); \ndd\nee\nff\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>xx\nyy\nzz\nfoo_bar_xyz000123 := abcd (111111                                       \n        11111111111111111111111111);\naa\nbb\ncc\nfoo_bar_xyz000123 := abcd (111111                                       \n        11111111111111111111111111\n        11111111111111111111111111\n        11111111111111111111111111); \ndd\nee\nff\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4515393, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007210924266/picture?type=large", "display_name": "ClumsyCoder", "link": "https://stackoverflow.com/users/4515393/clumsycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1422737834, "creation_date": 1422733951, "last_edit_date": 1422735309, "question_id": 28255857, "link": "https://stackoverflow.com/questions/28255857/search-replace-character-in-string", "title": "Search &amp; Replace Character In String", "body": "<p>I am trying to write a basic Perl script to do some string manipulation. I get the \"Existing_Value_To_Be_Changed\" and the \"New_Value\" as user inputs.</p>\n\n<p>The file has multiple block of lines such as the following -</p>\n\n<pre><code>foo_bar_xyz000123 := abcd (100010                                       \n        01010111111001011010001010); - (Not in same line as previous)\n</code></pre>\n\n<p>The <code>foo_bar_abc</code> part of the string appears multiple times in the file. The only numbers following it uniquifies each appearance.</p>\n\n<p>When I traverse line by line in Perl, how do I replace all the <code>0</code>'s(Existing_Value_To_Be_Changed) with <code>1</code>'s(New_Value) after the <code>foo_bar_xyz</code> has been matched (in all occurrences). But I need to start after the <code>(</code> and keep going on to the following line(s) until the <code>);</code> is encountered and stop after that.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I already completed the part about navigating my way into those specific blocks of lines. I am stuck in the character search &amp; replacing part.</p>\n\n<pre><code>$var = 'false';\nwhile &lt;File&gt; {\n  if (pattern matches) {\n    $var = 'true';\n  }\n  if ($var eq \"true\") {\n    push(@array, $_);\n    if ( $_ contains \");\" ) {\n      $var = 'false';\n    }\n  }\n}\n</code></pre>\n\n<p>When the current line is stored in a variable, what is the best way to do the replace after the <code>(</code> only until <code>);</code> part?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The <em>Existing_Value_To_Be_Changed</em> and <em>New_Value</em> are user inputs, and if one is 0, then the other is 1 and vice versa as it is a binary string that contains only 0s and 1s.</p>\n"}, {"tags": ["linux", "excel", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1422902459, "post_id": 28282613, "comment_id": 44922968, "body": "Unfortunately, somebody edited my post to remove the fact that I&#39;m running on Linux, and it looks like the Win32::OLE module will not run on Linux."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1422912931, "post_id": 28282613, "comment_id": 44928276, "body": "Ugh. Considerably more annoying then. You can <i>probably</i> unzip the xlsx (it&#39;z a zip file format) and parse the contents."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1422915998, "post_id": 28282613, "comment_id": 44929771, "body": "Ok, my quick test suggests that you can. Might need to fiddle a bit more to parse, given tags are a subset (but one that doesn&#39;t necessarily follow the same nesting rules)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1422914698, "last_edit_date": 1422914698, "creation_date": 1422895785, "answer_id": 28282613, "question_id": 28255607, "link": "https://stackoverflow.com/questions/28255607/read-parse-xlsx-file-keeping-fonts/28282613#28282613", "title": "Read/parse XLSX file, keeping fonts", "body": "<p>In order to read XLSX files you'll need to get to grips with <code>Win32::OLE</code> - it's a bit of a painful process, but it's not impossible. </p>\n\n<p>Microsoft provides some sample code: <a href=\"http://support.microsoft.com/kb/214797\" rel=\"nofollow\">http://support.microsoft.com/kb/214797</a></p>\n\n<p>But at a basic level for reading from a spreadsheet you'll need something like:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nuse Win32::OLE;\nuse Win32::OLE::Const 'Microsoft Excel';\n\nmy $excelfile = 'Book1.xlsx';\n\nmy $Excel = Win32::OLE-&gt;new('Excel.Application');\nmy $Book  = $Excel-&gt;Workbooks-&gt;Open($excelfile);\nmy $Sheet = $Book-&gt;Worksheets(\"Sheet1\");\n\nprint $Sheet-&gt;Range(\"a2\")-&gt;{Value}, \"\\n\";\n\nmy $cell = $Sheet-&gt;Range(\"a2\");\n\nforeach my $key ( keys %$cell ) {\n    print \"$key, \", $cell-&gt;{$key} ? $cell-&gt;{$key} : 0, \"\\n\";\n}\n</code></pre>\n\n<p>I think you'll be needing:</p>\n\n<pre><code>Font, Win32::OLE=HASH(0x1b2720c)\n</code></pre>\n\n<p>E.g:</p>\n\n<pre><code>foreach my $key ( keys %{$cell-&gt;{Font}} ) {\n    print \"$key, \", $cell-&gt;{Font}-&gt;{$key} ? $cell-&gt;{Font}-&gt;{$key} : 0, \"\\n\";\n}\n</code></pre>\n\n<p>This will tell you if the whole cell is italic. (Or bold, or whatever). I haven't yet dug out the element that'll tell you if substrings are formatted. </p>\n\n<p>Edit: Nope, I can't see any 'sub-cell' formatting, but clearly it <em>can</em> be done. </p>\n\n<p>With the additional detail - it's Linux:</p>\n\n<p><code>Win32::OLE</code> isn't an options - that's the easy way, as it 'automates' Excel (same mechanism as VB uses). </p>\n\n<p>However, one of the advantages of XLSX is that it's actually an XML based archive format. </p>\n\n<p>So something like this might work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Archive::Zip;\nuse XML::Twig;\n\nmy $archive = Archive::Zip -&gt; new ();\n\n$archive -&gt; read ( 'Book1.xlsx' );\n\nmy $thing = $archive -&gt; memberNamed('xl/sharedStrings.xml');\nprint $thing -&gt; contents();\n\nmy $parser = XML::Twig -&gt; new( pretty_print =&gt; 'indented' ) -&gt; parse ( $thing -&gt; contents() );\n\n$parser -&gt; print;\n</code></pre>\n\n<p>Now, that's a bit rough, because it'll just dump the XML. I <em>think</em> the formatting has each 'cell' as <code>&lt;si&gt;</code> elements. </p>\n\n<p>So you can do:</p>\n\n<pre><code>foreach my $element ( $parser -&gt; root -&gt; children('si') ) {\n    print $element -&gt; text,\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422914698, "creation_date": 1422732391, "last_edit_date": 1422902492, "question_id": 28255607, "link": "https://stackoverflow.com/questions/28255607/read-parse-xlsx-file-keeping-fonts", "title": "Read/parse XLSX file, keeping fonts", "body": "<p>Is there a Perl module/program/method that can, from within Linux, read the text in an XLSX file that has font formatting?</p>\n\n<p>It doesn't have to be Perl, but Perl is what I'm most familiar with, so Perl would be best.</p>\n\n<p>For example, a single cell might say:</p>\n\n<blockquote>\n  <p><em>King Kong</em> is my favorite book.  I like it more than <em>1984</em>.</p>\n</blockquote>\n\n<p>I read a bunch of posts and downloaded a bunch of perl modules and samples, but they are all simply extracting the text.  I'd really like to keep the formatting.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1422733812, "last_edit_date": 1422733812, "creation_date": 1422731912, "answer_id": 28255530, "question_id": 28255350, "link": "https://stackoverflow.com/questions/28255350/how-to-build-a-perl-multidimensional-array-or-hash/28255530#28255530", "title": "How to build a Perl multidimensional array or hash?", "body": "<p>This should get you started. It uses the <code>DATA</code> file handle so that I could embed the data in the program itself. I have used <code>to_json</code> from the <a href=\"https://metacpan.org/module/JSON\" rel=\"nofollow\"><code>JSON</code></a> module to format the hash as JSON data. The statement <code>$_ += 0 for @values</code> converts the contents of <code>@values</code> from string to to numeric, to avoid quotation marks in the resultant JSON data.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse JSON;\n\nmy %data;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my ($device, @values) = split /,/;\n  $_ += 0 for @values;\n  push @{ $data{$device} }, \\@values;\n}\n\nprint to_json(\\%data, { pretty =&gt; 1, canonical =&gt; 1 });\n\n__DATA__\nrouter1,5,10,4\nrouter1,5,1,5\nrouter2,5,10,4\nrouter2,5,2,5\nrouter3,4,5,6\nrouter3,7,6,5\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>{\n   \"router1\" : [\n      [\n         5,\n         10,\n         4\n      ],\n      [\n         5,\n         1,\n         5\n      ]\n   ],\n   \"router2\" : [\n      [\n         5,\n         10,\n         4\n      ],\n      [\n         5,\n         2,\n         5\n      ]\n   ],\n   \"router3\" : [\n      [\n         4,\n         5,\n         6\n      ],\n      [\n         7,\n         6,\n         5\n      ]\n   ]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1296, "user_id": 790557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTS1c.jpg?s=128&g=1", "display_name": "jjpcondor", "link": "https://stackoverflow.com/users/790557/jjpcondor"}, "is_accepted": false, "score": 0, "last_activity_date": 1422733195, "last_edit_date": 1422733195, "creation_date": 1422732720, "answer_id": 28255669, "question_id": 28255350, "link": "https://stackoverflow.com/questions/28255350/how-to-build-a-perl-multidimensional-array-or-hash/28255669#28255669", "title": "How to build a Perl multidimensional array or hash?", "body": "<p>Here is a simple solution which prints desired JSON object.</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy %hash;\n\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $line;\n  my ($device, @cpu_values) = split(/,/, $line);\n  my $cpu_token = join(\",\", @cpu_values);\n  $hash{$device} .= '[' . $cpu_token . '], ';\n}\n\nmy @devices = keys %hash;\n\nprint \"array = { \\n\";\nforeach  (sort @devices) {\n\n    print \"$_ =&gt; [$hash{$_}]\\n\";\n\n} \nprint \"}\\n\";\n\n__DATA__\nrouter1,5,10,4\nrouter1,5,1,5\nrouter2,5,10,4\nrouter2,5,2,5\nrouter3,4,5,6\nrouter3,7,6,5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2766262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995ac4898ed1a873348c1e9b200bbf42?s=128&d=identicon&r=PG&f=1", "display_name": "bentastic27", "link": "https://stackoverflow.com/users/2766262/bentastic27"}, "is_accepted": false, "score": 0, "last_activity_date": 1422787452, "creation_date": 1422787452, "answer_id": 28261810, "question_id": 28255350, "link": "https://stackoverflow.com/questions/28255350/how-to-build-a-perl-multidimensional-array-or-hash/28261810#28261810", "title": "How to build a Perl multidimensional array or hash?", "body": "<p>In Perl you need to use references in the way of anonymous arrays and hashes to make multidimensional arrays, arrays of arrays, hashes containing hashes and anywhere in between. <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\" title=\"perlreftut\">perlreftut</a> should cover how to accomplish what you are trying to do. Here is an example I wrote the other day that could help explain as well:</p>\n\n<pre><code>print \"\\nFun with multidimensional arrays\\n\";\nmy @myMultiArray = ([1,2,3],[1,2,3],[1,2,3]);\n\nfor my $a (@myMultiArray){\n    for my $b (@{$a}){\n        print \"$b\\n\";\n    }\n}\n\nprint \"\\nFun with multidimensional arrays containing hashes\\nwhich contains an anonymous array\\n\";\nmy @myArrayFullOfHashes = (\n    {'this-key'=&gt;'this-value','that-key'=&gt;'that-value'},\n    {'this-array'=&gt;[1,2,3], 'this-sub' =&gt; sub {return 'hi'}},\n);\n\nfor my $a (@myArrayFullOfHashes){\n    for my $b (keys %{$a}){\n        if (ref $a-&gt;{$b} eq 'ARRAY'){\n            for my $c (@{$a-&gt;{$b}}){\n                print \"$b.$c =&gt; $c\\n\";\n            }\n        } elsif ($a-&gt;{$b} =~ /^CODE/){\n            print \"$b =&gt; \". $a-&gt;{$b}() . \"\\n\";\n        } else {\n            print \"$b =&gt; $a-&gt;{$b}\\n\";\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3199303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f460af17814f8f8e145c9a8eaa1360?s=128&d=identicon&r=PG&f=1", "display_name": "user3199303", "link": "https://stackoverflow.com/users/3199303/user3199303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 28255530, "answer_count": 3, "score": 1, "last_activity_date": 1422787452, "creation_date": 1422730831, "last_edit_date": 1422731455, "question_id": 28255350, "link": "https://stackoverflow.com/questions/28255350/how-to-build-a-perl-multidimensional-array-or-hash", "title": "How to build a Perl multidimensional array or hash?", "body": "<p>I have a set of CSV values like this:</p>\n\n<pre><code>device name, CPU value, frequency of CPU value, CPU in percentage\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>router1,5,10,4\nrouter1,5,1,5\nrouter2,5,10,4\nrouter2,5,2,5\nrouter3,4,5,6\nrouter3,7,6,5\n</code></pre>\n\n<p>I need to form a data structure like this:</p>\n\n<pre><code>array = {\n    router1 =&gt; [5,10,4],[5,1,5],\n    router2 =&gt; [5,10,4],[5,2,5],\n    router3 =&gt; [4,5,6],[7,6,5]\n}\n</code></pre>\n\n<p>I need help in forming this data structure in Perl. </p>\n\n<p>I have tried visualizing how to do this but am unable to do so. I would appreciate any help on this.</p>\n\n<p>The end goal for me is to convert this into a JSON object.</p>\n"}, {"tags": ["perl", "permissions", "perl-module"], "comments": [{"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "edited": false, "score": 0, "creation_date": 1422725717, "post_id": 28254352, "comment_id": 44867522, "body": "This is interesting, I never knew Perl depended on a module to carry out the <code>-V</code> option. On my system (Windows 8.1, Cygwin) I found my <code>Config.pm</code> module at <code>&#47;usr&#47;lib&#47;perl5&#47;5.14&#47;x86_64-cygwin-threads&#47;Config.pm</code>. I tried renaming it to <code>Config.pm.bak</code> and running <code>perl -V</code>, and got a similar error (&quot;Can&#39;t locate Config.pm in @INC...&quot;). Running it without <code>-V</code> worked, however. Can you locate your <code>Config.pm</code> file on your Mac?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1422728534, "post_id": 28254352, "comment_id": 44868323, "body": "What module? It might be best to reinstall perl."}, {"owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1422731765, "post_id": 28254352, "comment_id": 44869241, "body": "It installed in /Library/Perl/5.18/Flickr/API2/ and did a lot of compilations. The config.pm is in /System/Library/Perl/5.18/darwin-thread-multi-2level/Config.&zwnj;&#8203;pm and I can read it. Strange. How do I reinstall the perl that comes with Mac OS? IN earlier times this was on the DVD, but this does not exist any longer ..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1422732821, "post_id": 28254352, "comment_id": 44869581, "body": "Given that the error message is <code>Can&#39;t locate Config.pm:   Permission denied.</code> you should check the permissions on <code>Config.pm</code> and on the directory that contains it. You should also look at the contents of <code>@INC</code>."}, {"owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1422777188, "post_id": 28254352, "comment_id": 44878556, "body": "OK. Thanks. Did a clean install from sources. Everything works now. I hope."}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1431728994, "post_id": 28254352, "comment_id": 48639053, "body": "As a &quot;next time&quot; - use perlbrew; it&#39;ll install a completely separate Perl instance in your home directory."}, {"owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1576178075, "post_id": 28254352, "comment_id": 104824720, "body": "I have this problem again. This time the security on Mac OS is stronger so that I cannot touch /usr/bin/perl. I am stuck."}], "answers": [{"tags": [], "owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "is_accepted": false, "score": 2, "last_activity_date": 1433420610, "creation_date": 1433420610, "answer_id": 30643748, "question_id": 28254352, "link": "https://stackoverflow.com/questions/28254352/how-can-i-fix-broken-perl-permissions/30643748#30643748", "title": "How can I fix broken perl permissions?", "body": "<p>I reinstalled. Yes, I did and now this answer is long enough.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4995826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87debb9e6d8c16480aa03c08155adcf5?s=128&d=identicon&r=PG&f=1", "display_name": "se zk", "link": "https://stackoverflow.com/users/4995826/se-zk"}, "is_accepted": false, "score": -1, "last_activity_date": 1466671210, "creation_date": 1466671210, "answer_id": 37986380, "question_id": 28254352, "link": "https://stackoverflow.com/questions/28254352/how-can-i-fix-broken-perl-permissions/37986380#37986380", "title": "How can I fix broken perl permissions?", "body": "<p>check the $PERL5LIB, echo $PERL5LIB, check if any paths in the $PERL5LIB is permission denied.</p>\n\n<p>eg. in my computer.</p>\n\n<p><code>$PERL5LIB\n/root/perl5:/home/t7910/usr/perl5:/home/t7910/perl5/lib/perl5</code></p>\n\n<p>so, <code>/root/perl5:</code> is permission denied.</p>\n"}, {"comments": [{"owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1576761612, "post_id": 41517846, "comment_id": 105008192, "body": "The suggestion to call sudo perl -V was helpful. I could then see that the path included  /Library/Perl/Updates/5.18.4/darwin-thread-multi-2level  This directory included just one file: perllocal.pod and it was restricted so that only root could enter it.  Once I changed the permissions of the directory so that other users could enter it, everything was fine again."}, {"owner": {"reputation": 260, "user_id": 343600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85143a143a603454eea6e6bf273e54ce?s=128&d=identicon&r=PG", "display_name": "Jan Steinman", "link": "https://stackoverflow.com/users/343600/jan-steinman"}, "edited": false, "score": 0, "creation_date": 1603068802, "post_id": 41517846, "comment_id": 113910599, "body": "I found a permission problem and fixed it. But now it says, &quot;List::Util object version 1.38 does not match bootstrap parameter 1.55 at /System/Library/Perl/5.18/darwin-thread-multi-2level/DynaLoa&zwnj;&#8203;der.pm line 217.&quot; So how do I synchronize Perl module versions?"}], "tags": [], "owner": {"reputation": 852, "user_id": 1388639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ec92500553d542d652b61766c1c5897?s=128&d=identicon&r=PG", "display_name": "Malcolm Boekhoff", "link": "https://stackoverflow.com/users/1388639/malcolm-boekhoff"}, "is_accepted": true, "score": 4, "last_activity_date": 1483763956, "last_edit_date": 1592644375, "creation_date": 1483763956, "answer_id": 41517846, "question_id": 28254352, "link": "https://stackoverflow.com/questions/28254352/how-can-i-fix-broken-perl-permissions/41517846#41517846", "title": "How can I fix broken perl permissions?", "body": "<h1>Perl: How to fix: &quot;perl -V&quot;: Can't locate Config.pm: Permission denied</h1>\n<ul>\n<li>Find out what the compiled-in @INC is:\n<ul>\n<li>sudo perl -V\n@INC:\n/etc/perl\n/usr/local/lib/perl/5.18.2\n/usr/local/share/perl/5.18.2\n/usr/lib/perl5\n/usr/share/perl5\n/usr/lib/perl/5.18\n/usr/share/perl/5.18\n/usr/local/lib/site_perl&quot;</li>\n</ul>\n</li>\n<li>For each path <strong>and all of it's parents</strong> make sure that the permissions include &quot;rx&quot;, e.g. for &quot;/usr/local/share/perl/5.18.2&quot;:\n<ul>\n<li>sudo chmod ugo+rx /usr</li>\n<li>sudo chmod ugo+rx /usr/local</li>\n<li>sudo chmod ugo+rx /usr/local/share</li>\n<li>sudo chmod ugo+rx /usr/local/share/perl</li>\n<li>sudo chmod ugo+rx /usr/local/share/perl/5.18.2</li>\n</ul>\n</li>\n</ul>\n"}], "owner": {"reputation": 264, "user_id": 2660362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a76357b61cefc392f4da78a82ddb50e9?s=128&d=identicon&r=PG", "display_name": "Stefan M&#252;ller", "link": "https://stackoverflow.com/users/2660362/stefan-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3120, "favorite_count": 0, "accepted_answer_id": 41517846, "answer_count": 3, "score": 3, "last_activity_date": 1576761540, "creation_date": 1422724934, "question_id": 28254352, "link": "https://stackoverflow.com/questions/28254352/how-can-i-fix-broken-perl-permissions", "title": "How can I fix broken perl permissions?", "body": "<p>I installed a perl module by <code>force install</code> and now perl does not work any longer. Somehow this must have set permissions wrong.</p>\n\n<pre><code>perl -V\nCan't locate Config.pm:   Permission denied.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>How can I fix this? I am on a Mac. I would also do a reinstall or recover stuff from a backup if I only know how or what files.</p>\n"}, {"tags": ["regex", "perl", "names"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 1, "creation_date": 1422732168, "post_id": 28253764, "comment_id": 44869385, "body": "@PatrickJ.S. I think that&#39;s a bit harsh.  The question is about algorithms and techniques, not about writing the code."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1422800567, "post_id": 28253764, "comment_id": 44884216, "body": "@schwern: yeah, sorry, you&#39;e right"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1422732703, "last_edit_date": 1422732703, "creation_date": 1422732112, "answer_id": 28255561, "question_id": 28253764, "link": "https://stackoverflow.com/questions/28253764/validate-proper-names-with-perl/28255561#28255561", "title": "Validate Proper Names (with Perl)", "body": "<p>Essentially, you're writing a spell checker.  You may want to look into an Open Source, multi-lingual spell checker such as <a href=\"https://en.wikipedia.org/wiki/GNU_Aspell\" rel=\"nofollow\">Aspell</a> and see what they do.  You might even be able to implement what you want as an aspell dictionary.</p>\n\n<p>There are many algorithms for doing <a href=\"https://en.wikipedia.org/wiki/Approximate_string_matching\" rel=\"nofollow\">approximate string matching</a>. The <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow\">Levenshtein distance</a> between words is one algorithm, and there are <a href=\"https://metacpan.org/search?q=Levenshtein&amp;size=20\" rel=\"nofollow\">several Perl modules to calculate it</a>, but <a href=\"https://metacpan.org/pod/Text::Fuzzy\" rel=\"nofollow\">Text::Fuzzy</a> looks pretty good.</p>\n\n<p>That's great for comparing a few words, but you have to choose between 150k.  You could just see if it's fast enough.  You could try caching the result.  But it remains an O(n) algorithm.  Instead (or in addition) you can create an index using a <a href=\"https://en.wikipedia.org/wiki/Phonetic_algorithm\" rel=\"nofollow\">phonetic matching algorithm</a>.  Generally, these index words by what they sound like to allow matching on misspelled words.  Once you've generated the index for each word, you can match a new word against the index very quickly.  Obviously this is subject to cultural ideas of what words sound like which is why there are many algorithms each with different optimizations.  You can create several indexes using different algorithms and try them all.</p>\n\n<p>You can even combine the two and do approximate string matching on the phonetic indexes.</p>\n"}], "owner": {"reputation": 23, "user_id": 4514974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ef646776712585d1aa8c1a5fb26d76?s=128&d=identicon&r=PG&f=1", "display_name": "La Bomba", "link": "https://stackoverflow.com/users/4514974/la-bomba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 28255561, "answer_count": 1, "score": 1, "last_activity_date": 1422732703, "creation_date": 1422721134, "question_id": 28253764, "link": "https://stackoverflow.com/questions/28253764/validate-proper-names-with-perl", "title": "Validate Proper Names (with Perl)", "body": "<p>I have a census list of 150k last names, and trying to use this to validate the spelling of person names in an existing database.</p>\n\n<p>Obviously there are many ethnic names in my database that don't match the census list, but are clearly not misspelled (Italian names like \"Petroni\", Swedish names like \"Magnusdotter\").</p>\n\n<p>I would like to create a function (in Perl) to detect slight variations - i.e. likely mis-spellings - between names in the database and other <em>very popular</em> names in the census list (a frequency number is available).</p>\n\n<p>I can imagine the algorithm, but before I dive in - any suggestions to do this in a reliable way - i.e. one that doesn't throw too many false positives?</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["perl", "filter"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 4512615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7mgk.png?s=128&g=1", "display_name": "epepepep", "link": "https://stackoverflow.com/users/4512615/epepepep"}, "is_accepted": false, "score": 0, "last_activity_date": 1422765321, "last_edit_date": 1422765321, "creation_date": 1422764904, "answer_id": 28259481, "question_id": 28252825, "link": "https://stackoverflow.com/questions/28252825/how-to-apply-a-perl-filter-to-code-loaded-with-require/28259481#28259481", "title": "How to apply a perl filter to code loaded with require", "body": "<p>How about calling perl with the <code>-Mmyfilter</code> option?</p>\n\n<p>You could <code>mv /usr/bin/perl /usr/bin/perl-real</code> and then create a wrapper script <code>/usr/bin/perl</code> like:</p>\n\n<pre><code>#!/bin/sh\n/usr/bin/perl-real -Mmyfilter $*\n</code></pre>\n\n<p>Then, all your scripts should include the module.</p>\n"}], "owner": {"reputation": 41, "user_id": 2159862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f624854d0050595647242d41f26cf3cd?s=128&d=identicon&r=PG", "display_name": "user2159862", "link": "https://stackoverflow.com/users/2159862/user2159862"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422765321, "creation_date": 1422715261, "last_edit_date": 1422718848, "question_id": 28252825, "link": "https://stackoverflow.com/questions/28252825/how-to-apply-a-perl-filter-to-code-loaded-with-require", "title": "How to apply a perl filter to code loaded with require", "body": "<p>I have been able to setup a filter using <a href=\"https://metacpan.org/module/Filter::Simple\" rel=\"nofollow\"><code>Filter::Simple</code></a>, however for it to work I must add the line:</p>\n\n<pre><code>use myfilter;\n</code></pre>\n\n<p>in every Perl file I want to filter.</p>\n\n<p>Example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse myfilter;\n\nprint \"Loading...\";  # this line is filtered\n\nrequire 'bar.pl';    # code inside the bar.pl file IS NOT FILTERED\n\nprint \"Done\";        # this line is filtered\n\n1;\n</code></pre>\n\n<p>====</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>Is it possible to apply a <code>Filter::Simple</code> filter to all the Perl code, including all the files loaded with <code>require</code>? </p></li>\n<li><p>Is it possible to make an alias to perl in such a way that the filter will be applied to every piece of code?</p></li>\n</ol>\n"}, {"tags": ["linux", "perl", "awk"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1422673487, "post_id": 28247661, "comment_id": 44855895, "body": "<code>awk &#39;NR==2{ print $4 }&#39;</code>"}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "edited": false, "score": 0, "creation_date": 1422674284, "post_id": 28247661, "comment_id": 44856018, "body": "For me the above command working fine."}, {"owner": {"reputation": 11974, "user_id": 1898580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CnDn3.png?s=128&g=1", "display_name": "Marat Talipov", "link": "https://stackoverflow.com/users/1898580/marat-talipov"}, "edited": false, "score": 3, "creation_date": 1422674545, "post_id": 28247661, "comment_id": 44856057, "body": "wouldn&#39;t it be easier to do <code>df &#47;root</code> to get just one record that you need?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1422682282, "post_id": 28247661, "comment_id": 44857239, "body": "What code are you using with <code>Filesys::Df</code>, and what is it returning?"}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1422683239, "post_id": 28247661, "comment_id": 44857399, "body": "@duskwuff I managed to figure it out and it was a simple mistake on my part. I wasn&#39;t specifying the correct block size required to give the results I was expecting. I think we&#39;re all good here."}, {"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1422754635, "post_id": 28247661, "comment_id": 44874994, "body": "Have a look at <a href=\"http://search.cpan.org/~iguthrie/Filesys-DfPortable-0.85/DfPortable.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~iguthrie/Filesys-DfPortable-0.85/DfPortable&zwnj;&#8203;.pm</a> for a more natural Perl way of doing this."}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "edited": false, "score": 0, "creation_date": 1422992360, "post_id": 28247661, "comment_id": 44965463, "body": "Thank you for that link. I did end up using filesys::df for this~"}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "edited": false, "score": 0, "creation_date": 1422683348, "post_id": 28248329, "comment_id": 44857416, "body": "Thanks for your response. That works like a charm. I managed to get Filesys::df working but I will certainly keep tabs on this just incase I need to use it in the future for whatever reason!"}], "tags": [], "owner": {"reputation": 9902, "user_id": 1960027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z89Jo.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1960027/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1422680430, "creation_date": 1422680430, "answer_id": 28248329, "question_id": 28247661, "link": "https://stackoverflow.com/questions/28247661/perl-get-free-disk-space-usage-on-linux/28248329#28248329", "title": "Perl - get free disk space usage on linux", "body": "<p>If you wish to do this all in <code>perl</code>, then:</p>\n\n<pre><code>df -h | perl -e 'while (&lt;stdin&gt;) { if ($. == 2) { @x = split; print $x[3] }}'\n</code></pre>\n\n<p>This uses <code>perl</code> alone to read the output of <code>df -h</code> and, for the second record (<code>$. == 2</code>) splits the record into fields, based on whitespace, and outputs field 3 (counting from 0).</p>\n"}, {"tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 0, "last_activity_date": 1422688451, "creation_date": 1422688451, "answer_id": 28249218, "question_id": 28247661, "link": "https://stackoverflow.com/questions/28247661/perl-get-free-disk-space-usage-on-linux/28249218#28249218", "title": "Perl - get free disk space usage on linux", "body": "<p>This seems to work ok too:</p>\n\n<pre><code>df -h | awk 'NR==2 {print $4}'\n</code></pre>\n\n<p>Get the second line and pint fourth field.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 6, "last_activity_date": 1422745734, "last_edit_date": 1422745734, "creation_date": 1422691134, "answer_id": 28249526, "question_id": 28247661, "link": "https://stackoverflow.com/questions/28247661/perl-get-free-disk-space-usage-on-linux/28249526#28249526", "title": "Perl - get free disk space usage on linux", "body": "<p>A little more succinctly:</p>\n\n<pre><code>df -h | perl -wlane 'print $F[3] if $. == 2;'\n\n\n-w   enable warnings\n-l   add newline to output(and chomps newline from input line)\n-a   splits the fields on whitespace into the @F array, which you access using the syntax $F[n] (first column is at index position 0)\n-n   puts the code inside the following loop:\n\n    LINE:\n        while (&lt;&gt;) { \n            ...     # code goes here\n        }\n     # &lt;&gt; reads lines from STDIN if no filenames are given on the command line\n\n-e   execute the string\n$.   current line number in the file (For the first line, $. is 1) \n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2270, "favorite_count": 0, "accepted_answer_id": 28249526, "answer_count": 3, "score": 1, "last_activity_date": 1422745734, "creation_date": 1422672847, "question_id": 28247661, "link": "https://stackoverflow.com/questions/28247661/perl-get-free-disk-space-usage-on-linux", "title": "Perl - get free disk space usage on linux", "body": "<p>I'm wondering how I can get the value of the second row, 4th column from df (\"/\"). Here's the output from df:</p>\n\n<pre><code>Filesystem      Size  Used Avail Use% Mounted on\nrootfs          208G  120G   78G  61% /\nfakefs          208G  120G   78G  61% /root\nfakefs          1.8T  1.3T  552G  70% /home4/user\nfakefs          4.0G  1.3G  2.8G  31% /ramdisk/bin\nfakefs          4.0G  1.3G  2.8G  31% /ramdisk/etc\nfakefs          4.0G  1.3G  2.8G  31% /ramdisk/php\nfakefs          208G  120G   78G  61% /var/lib\nfakefs          208G  120G   78G  61% /var/lib/mysql\nfakefs          208G  120G   78G  61% /var/log\nfakefs          208G  120G   78G  61% /var/spool\nfakefs          208G  120G   78G  61% /var/run\nfakefs          4.0G  361M  3.7G   9% /var/tmp\nfakefs          208G  120G   78G  61% /var/cache/man\n</code></pre>\n\n<p>I'm trying to get the available free space (78GB) using perl which I'm fairly new to. I'm able to get the value using the following linux command but I've heard it's not necessary to use awk in perl at all because perl can do what awk can natively.</p>\n\n<pre><code>df -h | tail -n +2 | sed -n '2p' | awk '{ print $4 }'\n</code></pre>\n\n<p>I'm stumped. I tried using the Filesys::df module but when I'd print out the available usage percent, it'd give me a different value than what running df from command line does. Help is appreciated.</p>\n"}, {"tags": ["arrays", "perl", "join"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user554546"}, "edited": false, "score": 5, "creation_date": 1422662509, "post_id": 28246398, "comment_id": 44853840, "body": "This is a bad code smell, and an indication that you want a hash."}, {"owner": {"reputation": 553, "user_id": 2788553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6388990dd2d4301ce2c4652e8ffde738?s=128&d=identicon&r=PG&f=1", "display_name": "g_puffo", "link": "https://stackoverflow.com/users/2788553/g-puffo"}, "edited": false, "score": 0, "creation_date": 1422724746, "post_id": 28246398, "comment_id": 44867202, "body": "Thanks: I think I will re-write my code so to use a hash instead!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1422974212, "post_id": 28246398, "comment_id": 44954234, "body": "<a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">perl.plover.com/varvarname.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 2788553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6388990dd2d4301ce2c4652e8ffde738?s=128&d=identicon&r=PG&f=1", "display_name": "g_puffo", "link": "https://stackoverflow.com/users/2788553/g-puffo"}, "edited": false, "score": 1, "creation_date": 1422662049, "post_id": 28246513, "comment_id": 44853683, "body": "Do you mean <code>my %data</code> or am I missing something?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 553, "user_id": 2788553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6388990dd2d4301ce2c4652e8ffde738?s=128&d=identicon&r=PG&f=1", "display_name": "g_puffo", "link": "https://stackoverflow.com/users/2788553/g-puffo"}, "edited": false, "score": 1, "creation_date": 1422662342, "post_id": 28246513, "comment_id": 44853778, "body": "You&#39;re right. I was torn between using a hash or a hash reference, and ended up using both. Thanks!"}, {"owner": {"reputation": 553, "user_id": 2788553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6388990dd2d4301ce2c4652e8ffde738?s=128&d=identicon&r=PG&f=1", "display_name": "g_puffo", "link": "https://stackoverflow.com/users/2788553/g-puffo"}, "edited": false, "score": 0, "creation_date": 1422662474, "post_id": 28246513, "comment_id": 44853828, "body": "I felt like a pro-Perl user when I noticed it... lol... I haven&#39;t thought about it but a hash might be better for what I need!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 9, "last_activity_date": 1422662284, "last_edit_date": 1422662284, "creation_date": 1422661817, "answer_id": 28246513, "question_id": 28246398, "link": "https://stackoverflow.com/questions/28246398/setting-name-of-array-in-perl/28246513#28246513", "title": "Setting name of array in Perl", "body": "<p>You <em>really</em> don't want to do that. How will you know what the array is called when you need to access it?</p>\n\n<p>Use a hash, like this</p>\n\n<pre><code>my %data;\n\nmy $body   = 'CC';\nmy $letter = 'P';\n\n$data{\"$body$letter\"} = [];\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 2788553, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6388990dd2d4301ce2c4652e8ffde738?s=128&d=identicon&r=PG&f=1", "display_name": "g_puffo", "link": "https://stackoverflow.com/users/2788553/g-puffo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1426888380, "accepted_answer_id": 28246513, "answer_count": 1, "score": 1, "last_activity_date": 1422662284, "creation_date": 1422661083, "question_id": 28246398, "link": "https://stackoverflow.com/questions/28246398/setting-name-of-array-in-perl", "closed_reason": "Duplicate", "title": "Setting name of array in Perl", "body": "<p>I would like to create an array in Perl that will have for name the values of two variables and, one of the two variables will have a value that is read from a file.</p>\n\n<p>In the simplified case, how can I create an array with name <code>CCP</code> when <code>P</code> and <code>CC</code> are two separate variables?</p>\n\n<p>So far I have joined the two using:</p>\n\n<pre><code>my $body='CC';\nmy $letter='P';\nmy $joined=$body . \"$venue\";\n</code></pre>\n\n<p>but I would like to actually create an array with name <code>@CCP</code>. The idea is that I will read different letters from a data file and then create the arrays that will have names given by joining 'CC' to the letters read from file.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1422657820, "post_id": 28245739, "comment_id": 44852387, "body": "Are the underscores deleted or replaced with blanks? The text says deleted; the example says replaced."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422661631, "post_id": 28245970, "comment_id": 44853566, "body": "Why use <code>File::Copy::move</code> instead of the built-in <code>rename</code>? Also, why replace spaces with spaces? You are also capitalising the first letter of the file extension. Finally, you don&#39;t need the <code>&#47;e</code> modifier if you use <code>\\U$1</code> instead of <code>uc($1)</code>"}, {"owner": {"reputation": 1099, "user_id": 2266881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FBu6W.jpg?s=128&g=1", "display_name": "Ghost", "link": "https://stackoverflow.com/users/2266881/ghost"}, "edited": false, "score": 0, "creation_date": 1422664957, "post_id": 28245970, "comment_id": 44854449, "body": "That&#39;s right, my mistake -&gt; replace underline with spaces, thanks"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422717191, "post_id": 28245970, "comment_id": 44864941, "body": "@Borodin Fixed the extension bug and removed <code>&#47;e</code>, thanks. As for <code>File::Copy::move</code>, the last time I suggested using built-in <code>rename</code>, commenters jumped on me for <i>that</i> (<code>File::Copy::move</code> is more flexible, works across drives, etc. -- even though <code>rename</code> is perfectly suited for <i>this</i> task). :-)"}], "tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 1, "last_activity_date": 1422717107, "last_edit_date": 1422717107, "creation_date": 1422658391, "answer_id": 28245970, "question_id": 28245739, "link": "https://stackoverflow.com/questions/28245739/change-filenames-first-letter/28245970#28245970", "title": "Change filenames first letter", "body": "<p>A simple version that takes a list of files from the command line, renaming per your examples:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Copy qw(move);\n\nfor my $fn (@ARGV)\n{\n  my $newfn = $fn;\n\n  # replace any spaces, tabs or _ with a single ' '  \n  $newfn =~ s/[_ \\t]+/ /g;     \n\n  # uppercase the first letter of any words in the new string\n  $newfn =~ s/(^|\\s)([a-z])/$1\\U$2/g;\n\n  # and add '.full' before any extension\n  $newfn =~ s/(\\.[^\\.]+)$/.full$1/g;\n\n  # and rename\n  move($fn, $newfn) or die \"Unable to rename '$fn' to '$newfn': $!\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1422659393, "last_edit_date": 1422659393, "creation_date": 1422658397, "answer_id": 28245973, "question_id": 28245739, "link": "https://stackoverflow.com/questions/28245739/change-filenames-first-letter/28245973#28245973", "title": "Change filenames first letter", "body": "<p>Assuming you have a Perl-based <code>rename</code> command (often called <code>prename</code>), then:</p>\n\n<pre><code>$ prename -n 's/^./\\U$&amp;/; s/_(.)/\\U$1/g ;s/\\.[^.]+$/.full$&amp;/' whatever_whatever2_whatever3.jpg \nwhatever_whatever2_whatever3.jpg renamed as WhateverWhatever2Whatever3.full.jpg\n$\n</code></pre>\n\n<p>The first substitute replaces the leading letter with upper-case; the second replaces <code>_x</code> with <code>X</code> throughout; the third inserts <code>.full</code> before the suffix string (a dot followed by non-dots).  If you want spaces instead of deleting the underscores, the fix is trivial (use <code>s/_(.)/ \\U$1/g</code> as the second substitute).</p>\n\n<p>Tested on an Ubuntu 14.04 LTS derivative.</p>\n"}, {"comments": [{"owner": {"reputation": 1099, "user_id": 2266881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FBu6W.jpg?s=128&g=1", "display_name": "Ghost", "link": "https://stackoverflow.com/users/2266881/ghost"}, "edited": false, "score": 0, "creation_date": 1422664923, "post_id": 28246257, "comment_id": 44854440, "body": "Worked Perfect! Used this instead of the first one only because it was shorter, but thanks anyway!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1422660936, "last_edit_date": 1422660936, "creation_date": 1422660109, "answer_id": 28246257, "question_id": 28245739, "link": "https://stackoverflow.com/questions/28245739/change-filenames-first-letter/28246257#28246257", "title": "Change filenames first letter", "body": "<p>This Perl one-line program will do as you ask</p>\n\n<pre><code>perl -e 'rename($_, tr/_/ /r =~ s/(?&lt;!\\.)\\b([a-z])/\\u$1/gr =~ s/(?=[^.]+$)/full./r) for glob \"*.ext\"'\n</code></pre>\n\n<p>It uses <code>tr///</code> to translate all underscores to spaces, and then <code>s///</code> to upper-case all lower-case letters that are preceded by a word boundary and not by a dot character, and again to precede the suffix with <code>full.</code>. It uses the non-destructive <code>/r</code> modifier for both <code>tr</code> and <code>s</code> so that they <em>return</em> the modified string instead of editing it in-place.</p>\n"}], "owner": {"reputation": 1099, "user_id": 2266881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FBu6W.jpg?s=128&g=1", "display_name": "Ghost", "link": "https://stackoverflow.com/users/2266881/ghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 28246257, "answer_count": 3, "score": -2, "last_activity_date": 1422717107, "creation_date": 1422657162, "question_id": 28245739, "link": "https://stackoverflow.com/questions/28245739/change-filenames-first-letter", "title": "Change filenames first letter", "body": "<p>This a bit specific thing i need to do, and at this hour can't force my brain to think a fast way to do it, so this is my problem:</p>\n\n<p>I got many files named, let's say:</p>\n\n<pre><code>word1_word2.ext\nword3_word4.ext\nword5_word5.ext\n..\n</code></pre>\n\n<p>I need to make a bash/perl/etc script in osx to change their filenames, basically doing 3 things:</p>\n\n<ul>\n<li>Capitalize every word first letter</li>\n<li>Delete the _ chars</li>\n<li>Add the string '.full' after the name, before the extension</li>\n</ul>\n\n<p>So, in other words..</p>\n\n<p>'whatever_whatever2_whatever3.jpg' becames 'Whatever Whatever2 Whatever3.full.jpg'</p>\n\n<p>Any help would be GREATLY welcomed :)</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1422681133, "creation_date": 1422681133, "answer_id": 28248414, "question_id": 28245161, "link": "https://stackoverflow.com/questions/28245161/generate-a-single-perl-file-from-multiple-files-pm-pl/28248414#28248414", "title": "Generate a single perl file from multiple files (.pm + .pl)", "body": "<p><code>ack</code> uses a home-rolled solution accessed via <code>make ack-standalone</code>.</p>\n\n<p>You should have a look at <a href=\"http://search.cpan.org/perldoc?App::FatPacker\" rel=\"nofollow\">App::FatPacker</a> since that's what it's all about.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28248414, "answer_count": 1, "score": 0, "last_activity_date": 1422681133, "creation_date": 1422654431, "question_id": 28245161, "link": "https://stackoverflow.com/questions/28245161/generate-a-single-perl-file-from-multiple-files-pm-pl", "title": "Generate a single perl file from multiple files (.pm + .pl)", "body": "<p>A good example of what I would like to do is <a href=\"http://beyondgrep.com/install/\" rel=\"nofollow\">Ack</a>. The original sources available on github are made of several packages and one main Perl file. </p>\n\n<p>However, the author also offers a single Perl file that include all the packages. From the source I can tell this file was auto-generated and I would like to know how it is done. </p>\n\n<p>I tried to <code>git clone</code> the sources and make the module with <code>perl Makefile.PL &amp;&amp; make &amp;&amp; make install</code> but I don't get any auto-generated file. I guess the answer is somewhere else. </p>\n\n<p>Is there any tool for doing such things?</p>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1422651192, "post_id": 28243914, "comment_id": 44849520, "body": "Side note: <code>qw</code> splits a string into a list of words, using whitespace as the delimiter. Probably not what you wanted. Also, your regex can be simplified to <code>&#47;_&#47;</code> (i.e. contains an underscore, anywhere in the string)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1422651476, "post_id": 28243914, "comment_id": 44849635, "body": "Also, be aware that because hashes cannot contain duplicate keys, this technique will only give you the <i>last</i> matching index in the case of duplicate array elements. For example, if your array is <code>my @array = qw(foo bar baz foo);</code>, then <code>$index{foo}</code> will be 3, the index of the last <code>foo</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422652564, "post_id": 28244430, "comment_id": 44850094, "body": "So? The point is to search <code>@array</code>. (<code>%index</code> is simply the mechanism used to lookup the exact strings in O(N+M) instead of O(N*M).)"}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1422653198, "post_id": 28244430, "comment_id": 44850386, "body": "In order to get the first match one could use <code>List::Util::first()</code>."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1422653243, "post_id": 28244430, "comment_id": 44850417, "body": "using %index is faster in the exact case, but the cost to construct has to be factored in if that&#39;s the concern. It may be just as effective to /^$search1$|^$search2$|^$search3$|$search4/"}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 2, "last_activity_date": 1422652585, "last_edit_date": 1422652585, "creation_date": 1422651214, "answer_id": 28244430, "question_id": 28243914, "link": "https://stackoverflow.com/questions/28243914/search-array-with-regex-perl/28244430#28244430", "title": "Search array with regex Perl", "body": "<p><code>qw</code> is used to quote lists of words, to store a regex in a variable, it's better to use <a href=\"http://perldoc.perl.org/functions/qr.html\" rel=\"nofollow\"><code>qr</code></a>:</p>\n\n<pre><code>my $search4 = qr/_/; # the leading and trailing '.*?' are redundant \n</code></pre>\n\n<p>Get a single arbitrary matching index:</p>\n\n<pre><code>my ($index4) = grep $array[$_] =~ /$search4/, 0..$#array; \n</code></pre>\n\n<p>Or all of them: </p>\n\n<pre><code>my @i = grep $array[$_] =~ /$search4/, 0..$#array;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1422655665, "post_id": 28244824, "comment_id": 44851549, "body": "@Ben Grimm how do you make your variables with the regex case sensitive?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "edited": false, "score": 0, "creation_date": 1422665759, "post_id": 28244824, "comment_id": 44854619, "body": "@JDE876 I think you meant to post this on Ben Grimm&#39;s answer, but... Regexes are <i>already</i> case sensitive by default. If you want to make them case <i>in</i>sensitive, you can use the <code>i</code> flag, e.g. <code>&#39;FoO&#39; =~ &#47;foo&#47;i</code>"}], "tags": [], "owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "is_accepted": false, "score": 0, "last_activity_date": 1422652857, "creation_date": 1422652857, "answer_id": 28244824, "question_id": 28243914, "link": "https://stackoverflow.com/questions/28243914/search-array-with-regex-perl/28244824#28244824", "title": "Search array with regex Perl", "body": "<p>In your code there is the unrelated problem, in that <code>$search4</code> is not a reqex. \n<code>$search4 =~ qw/.*?_.*?/;</code> \nmeans that you are matching the undefined variable <code>$search4</code> against <code>qw/.*?_.*?/;</code>. <code>qw</code> is basically splitting a string on whitespace. In this case there is no whitespace and thus you are matching against the string <code>.*?_.*?</code>. In void context this has no effect at all, <code>$search4</code>is left undefined.</p>\n\n<p>With <code>use strict; use warnings;</code> and after declaring your variables you would have gotten an appropriate error.</p>\n\n<pre><code>$ cat t1.pl \nuse strict;\nuse warnings;\n\nmy @array = ('Joe','Jim','Jim_BOB','Hello');\nmy $search = \"Joe\";\nmy $search2 = \"Hello\";\nmy $search3 = \"Jim\";\nmy $search4 =~ qw/.*?_.*?/;\n\nmy %index;\n@index{@array} = (0..$#array);\nmy $index = $index{$search};\nmy $index2 = $index{$search2};\nmy $index3 = $index{$search3};\nmy $index4 = $index{$search4};\nprint $index,\",\",$index2,\",\",$index3,\",\",$index4, \"\\n\";\n\n$ perl t.pl \nUse of uninitialized value $search4 in pattern match (m//) at t.pl line 8.\nUse of uninitialized value $search4 in hash element at t.pl line 15.\nUse of uninitialized value $index4 in print at t.pl line 16.\n0,3,1,\n</code></pre>\n\n<p>I assume that you meant <code>$search4 = qr/.*?_.*?/</code>.</p>\n\n<p>One solution to your problem would be to treat the regexp as a special case and to loop over your array.</p>\n\n<pre><code>$ cat t2.pl \nuse strict;\nuse warnings;\n\nmy @array = ('Joe','Jim','Jim_BOB','Hello');\nmy $search = 'Joe';\nmy $search2 = 'Hello';\nmy $search3 = 'Jim';\nmy $search4 = qr/.*?_.*?/;\n\nmy %index;\n@index{@array} = (0..$#array);\nmy $index = $index{$search};\nmy $index2 = $index{$search2};\nmy $index3 = $index{$search3};\n\n# loop over the array until a match is found\nmy $cnt = 0;\nmy $index4;\nfor my $elem ( @array ) {\n    if ( $elem =~ $search4 ) {\n        $index4 = $cnt;\n        last;\n    }\n    $cnt++;\n}\n\nprint \"$index,$index2,$index3,$index4\\n\";\n\n$ perl t2.pl \n0,3,1,2\n</code></pre>\n\n<p>If you want to use a lookup hash, then you might like the module <a href=\"http://search.cpan.org/~davecross/Tie-Hash-Regex-1.02/lib/Tie/Hash/Regex.pm\" rel=\"nofollow\" title=\"Tie::Hash::Regex\">Tie::Hash::Regex</a> from CPAN. </p>\n\n<pre><code>$ cat t3.pl \nuse strict;\nuse warnings;\n\n# modules from CPAN\nuse Tie::Hash::Regex;\n\nmy @array = ('Joe','Jim','Jim_BOB','Hello');\nmy $search = \"Joe\";\nmy $search2 = \"Hello\";\nmy $search3 = \"Jim\";\nmy $search4 = qr/.*?_.*?/;\n\nmy %index;\ntie %index, 'Tie::Hash::Regex';\n@index{@array} = (0..$#array);\nmy $index = $index{$search};\nmy $index2 = $index{$search2};\nmy $index3 = $index{$search3};\nmy $index4 = $index{$search4};\nprint \"$index,$index2,$index3,$index4\\n\";\nbernhard@bernhard-Aspire-E1-572:~/devel/StackOverflow$ perl t3.pl \n0,3,1,2\n</code></pre>\n\n<p>Beware that there are some downsides to that solution. If multiple keys are matching, than you have no guarantee which of the matching keys you will get. And if you pass a string that does not look like a regexp, it will still be considered a regexp.</p>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1422653006, "creation_date": 1422653006, "answer_id": 28244858, "question_id": 28243914, "link": "https://stackoverflow.com/questions/28243914/search-array-with-regex-perl/28244858#28244858", "title": "Search array with regex Perl", "body": "<p>Your current approach using a hash will only return the <em>last</em> matching index if your array contains duplicate elements. Other answers have shown how you can fix your existing code, but to allow for duplicate elements, you can use <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow\"><code>List::MoreUtils</code></a>.</p>\n\n<p>The following shows how to get the first and last matching indexes for both a fixed search string and a regex, as well as how to get all matching indexes:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse List::MoreUtils qw(first_index last_index indexes);\n\nmy @words = qw(Joe Jim Jim_BOB Hello Jim Hello Jim);\n\nmy $string = 'Jim';\nmy $regex = '^J';\n\nsay \"First $string: \" . first_index { $_ eq $string } @words;\nsay \"Last $string: \" . last_index { $_ eq $string } @words;\nsay \"All $string: \" . join ', ', indexes { $_ eq $string } @words;\n\nsay \"First regex: \" . first_index { /$regex/ } @words;\nsay \"Last regex: \" . last_index { /$regex/ } @words;\nsay \"All regex: \" . join ', ', indexes { /$regex/ } @words;\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>First Jim: 1\nLast Jim: 6\nAll Jim: 1, 4, 6\nFirst regex: 0\nLast regex: 6\nAll regex: 0, 1, 2, 4, 6\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1422653838, "creation_date": 1422648998, "question_id": 28243914, "link": "https://stackoverflow.com/questions/28243914/search-array-with-regex-perl", "title": "Search array with regex Perl", "body": "<pre><code>my @array = ('Joe','Jim','Jim_BOB','Hello');\n$search = \"Joe\";\n$search2 = \"Hello\";\n$search3 = \"Jim\";\n$search4 =~ qw/.*?_.*?/;\n\nmy %index;\n@index{@array} = (0..$#array);\nmy $index = $index{$search};\nmy $index2 = $index{$search2};\nmy $index3 = $index{$search3};\nmy $index4 = $index{$search4};\nprint $index,\",\",$index2,\",\",$index3,\",\",$index4, \"\\n\";\n</code></pre>\n\n<p>This returns 0,3,1 which are the indexes of the $search terms in @array.  The index will not recognize $search4 however becasuse it is a regex.\nMy question is, how do I search @array with regex?</p>\n"}, {"tags": ["perl", "soap", "wsdl", "soaplite"], "answers": [{"comments": [{"owner": {"reputation": 7293, "user_id": 1455351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c7bbfe48e8e888e843836283de97b5a1?s=128&d=identicon&r=PG", "display_name": "Gargoyle", "link": "https://stackoverflow.com/users/1455351/gargoyle"}, "edited": false, "score": 0, "creation_date": 1422757602, "post_id": 28256902, "comment_id": 44875457, "body": "I don&#39;t want to keep a local copy of the file."}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1422806280, "post_id": 28256902, "comment_id": 44885952, "body": "So you&#39;re comfortable manually reading the file and updating your packages when the WSDL changes, but not doing so in an automated fashion?  I&#39;m confused."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1422759027, "last_edit_date": 1422759027, "creation_date": 1422740907, "answer_id": 28256902, "question_id": 28243852, "link": "https://stackoverflow.com/questions/28243852/do-away-with-soaplite-service-call/28256902#28256902", "title": "Do away with SOAP::Lite-&gt;service() call", "body": "<p>Since you have the WSDL file, you can use the local copy of it to drop right in with no other changes to your code: </p>\n\n<pre><code>my $soap = SOAP::Lite-&gt;service(\"file:localcopy.wsdl\");\n</code></pre>\n\n<p>If you don't mind switching to <a href=\"http://search.cpan.org/~swalters/SOAP-WSDL/\" rel=\"nofollow\">SOAP::WSDL</a>, it includes <code>wsdl2perl.pl</code> which will generate all of the perl packages for you: </p>\n\n<pre><code>wsdl2perl.pl file:localcopy.wsdl\n</code></pre>\n"}], "owner": {"reputation": 7293, "user_id": 1455351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c7bbfe48e8e888e843836283de97b5a1?s=128&d=identicon&r=PG", "display_name": "Gargoyle", "link": "https://stackoverflow.com/users/1455351/gargoyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422759027, "creation_date": 1422648763, "question_id": 28243852, "link": "https://stackoverflow.com/questions/28243852/do-away-with-soaplite-service-call", "title": "Do away with SOAP::Lite-&gt;service() call", "body": "<p>I have a fully functional perl script which talks to our SOAP webservice.  Today it does that via the SOAP::Lite->service('.../name?WSDL') and then a call to execute() against the returned value.  They're now locking down the WSDL so when I hit that I get a 403 error back.  </p>\n\n<p>I'm looking for pointers on how to change my script so that it no longer uses the WSDL to figure things out.  I <em>do</em> have access to the WSDL itself to look at anything I need to know, but the perl script no longer will.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1678, "user_id": 637283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad72c3b6f2ce379c6effd3a0d7c6f43?s=128&d=identicon&r=PG", "display_name": "Mike Lyons", "link": "https://stackoverflow.com/users/637283/mike-lyons"}, "edited": false, "score": 1, "creation_date": 1422640358, "post_id": 28241736, "comment_id": 44844431, "body": "What have you tried so far? Have you written any perl yet? You need to because we&#39;re not really supposed to just write the whole thing for you ..."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1422640901, "post_id": 28241736, "comment_id": 44844658, "body": "<b>Try writing something yourself</b> and then if it doesn&#39;t work, show us specifically what you did so we can help you along. <b>You start it, and then we help. We don&#39;t write it for you.</b> Show us the actual code that you&#39;ve tried, and then describe what happened and what&#39;s not right, and then we can help you from there. Chances are you&#39;ll get pretty close to the answer if you just try it yourself first."}, {"owner": {"reputation": 53, "user_id": 3032425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/88f74c227caa2072ccd30d93cb56d6ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3032425", "link": "https://stackoverflow.com/users/3032425/user3032425"}, "edited": false, "score": 1, "creation_date": 1422642265, "post_id": 28241736, "comment_id": 44845301, "body": "Sorry for that, I just updated the code, please guide me regarding this. I m just started learning PERL."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1422646884, "post_id": 28241736, "comment_id": 44847578, "body": "Please <i>always</i> <code>use strict</code> and <code>use warnings</code> at the top of <i>every</i> Perl program that you write, and declare all your variables with <code>my</code> as close as possible to their first point of use. Please also avoid using variable names <code>$a</code> and <code>$b</code>, firstly because they are names reserved by Perl&#39;s built-in <code>sort</code>, and secondly because they aren&#39;t at all descriptive and say nothing about the purpose of the variable."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3032425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/88f74c227caa2072ccd30d93cb56d6ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3032425", "link": "https://stackoverflow.com/users/3032425/user3032425"}, "edited": false, "score": 0, "creation_date": 1422650930, "post_id": 28242382, "comment_id": 44849417, "body": "Thanks for your suggestion.. I just made changes in my code. If you can improve the code much appreciated.."}], "tags": [], "owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1422642612, "creation_date": 1422642612, "answer_id": 28242382, "question_id": 28241736, "link": "https://stackoverflow.com/questions/28241736/perl-match-specific-elements-from-arrays-between-two-files-and-print-desired-el/28242382#28242382", "title": "Perl: Match specific elements from arrays between two files and print desired elements from the file", "body": "<ul>\n<li>Logical AND is <code>&amp;&amp;</code> not <code>&amp;</code> in Perl (and most languages)</li>\n<li>If you want to test for string equality, use e.g. <code>$code eq $code1</code> (not <code>$code =~ $code1</code>, which does regex matching)</li>\n<li>Using a nested loop is a slow way of doing things, but it might be fast enough if one or both of your input files is fairly small.  But for it to work, you will need to load all the lines from <code>REPORT</code> into an array before you start.  Currently, on the second iteration of the outer loop, <code>&lt;REPORT&gt;</code> will return <code>undef</code> immediately because you have already read everything from this file.  (Alternatively you could rewind the file pointer with <code>seek()</code>.)</li>\n<li>Instead of a nested loop you could either use a hashtable, or sort both inputs -- but only bother with doing this if it takes too long.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 3032425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/88f74c227caa2072ccd30d93cb56d6ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3032425", "link": "https://stackoverflow.com/users/3032425/user3032425"}, "edited": false, "score": 0, "creation_date": 1422650888, "post_id": 28243600, "comment_id": 44849402, "body": "I am not able to get the output from the above script. I just updated the new script that i m using.. there i m facing a challenge to move on to the next line. Please guide me.."}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 53, "user_id": 3032425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/88f74c227caa2072ccd30d93cb56d6ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3032425", "link": "https://stackoverflow.com/users/3032425/user3032425"}, "edited": false, "score": 0, "creation_date": 1422746987, "post_id": 28243600, "comment_id": 44873547, "body": "I modified the program to change spaces to a single <code>:</code>. This way, you don&#39;t depend upon the spacing for the keys. I used the two files you presented in your program and used the file names you gave. The script should work with the data you gave here."}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1422746933, "last_edit_date": 1422746933, "creation_date": 1422647721, "answer_id": 28243600, "question_id": 28241736, "link": "https://stackoverflow.com/questions/28241736/perl-match-specific-elements-from-arrays-between-two-files-and-print-desired-el/28243600#28243600", "title": "Perl: Match specific elements from arrays between two files and print desired elements from the file", "body": "<p>What do you mean <em>match</em>. The two lines don't entirely match. Do you mean if the first six elements in the first file match the six elements in the second file? Are the lines identical except for that final element in the seventh file?</p>\n\n<p>Whenever you say \"I have to find a match\", you think first of using hashes. If your files are very large, you need to think about using an external database.</p>\n\n<p>I'm also going to use more <em>modern</em> Perl. This includes <code>use strict</code> and <code>use warnings</code>. This means declaring variables with <code>my</code>. This catches many of the programming errors that you run into.</p>\n\n<p>I create a hash called <code>%file_hash</code>. The key to this hash will be the file with the fields separated by colons instead of spaces. This way, I don't have to worry about space differences between the two files since the fields will be in the same order.</p>\n\n<p>The data of this hash will be the line itself. For example:</p>\n\n<pre><code>$file_hash{XYZ432345:Ethiopia:2567:89:ABC:P:28-Apr-14} =\n   \"XYZ432345   Ethiopia    2567    89  ABC P   28-Apr-14   No Issue\"\n</code></pre>\n\n<p>Now, if I do the same for the second file, I can see if that key exists in <code>%file_hash</code>. If it does, I know I've seen that line before in File #1, and I'll print out that data.</p>\n\n<p>By using a hash, I only have to go through each file once instead of matching each line against each other. If file #1 contains 100 lines, and file #2 contains 200 lines, I'm going through 300 iterations. In your way, you're looping 100 * 200 times, or 2000 iterations.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;  # Will kill my program if file doens't open\nuse feature qw(say);\n\nuse constant {\n    file_1  =&gt; 'rep.txt',\n    file_2  =&gt; 'errep.txt',\n};\n\n#\n# Open file #1 and build the hash index\n#\nopen my $fh_1, '&lt;', file_1;\n\nmy %file_hash;\nwhile ( my $line = &lt;$fh_1&gt; ) {\n    chomp $line;\n    my $key = substr( $line, 0, 53);\n    $key =~ s/\\s+/:/g;\n    $file_hash{$key} = $line;\n}\nclose $fh_1;\n\n#\n# Open file #2 and compare the lines against that hash index\n#\nopen my $fh_2, '&lt;', file_2;\nwhile ( my $line = &lt;$fh_2&gt; ) {\n    chomp $line;\n    my $key = $line;\n    $key =~ s/\\s+/:/g;\n    if ( $file_hash{$key} ) {\n        say \"$file_hash{$key};\"\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422647972, "creation_date": 1422647972, "answer_id": 28243663, "question_id": 28241736, "link": "https://stackoverflow.com/questions/28241736/perl-match-specific-elements-from-arrays-between-two-files-and-print-desired-el/28243663#28243663", "title": "Perl: Match specific elements from arrays between two files and print desired elements from the file", "body": "<p>I suggest you use something like this. Note the following</p>\n\n<ul>\n<li><p><code>use strict</code> and <code>use warnings</code>, and the declaration of all variables with <code>my</code></p></li>\n<li><p>Meaningful variable names</p></li>\n<li><p>Lexical file handles instead of global ones (<code>my $rep_fh</code> instead of <code>INFILE</code>) etc.</p></li>\n<li><p>I have copied the contents of <code>rep.txt</code> into the array <code>@rep</code>, to save reopening the file multiple times</p></li>\n<li><p>I have left the fields in their <em>arrays</em>, and used the <code>all</code> function from <a href=\"https://metacpan.org/module/List::Util\" rel=\"nofollow\"><code>List::Util</code></a> to check whether all of the first six fields match. There is no need to copy the values to their own scalar variables if you're not using them separately.</p></li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse List::Util 'all';\n\nopen my $rep_fh,  '&lt;', 'rep.txt' or die qq{Unable to open \"rep.txt\" for input: $!};\nmy @rep = &lt;$rep_fh&gt;;\nchomp @rep;\nclose $rep_fh;\n\nopen my $errep_fh, '&lt;', 'errep.txt' or die qq{Unable to open \"errep.txt\" for input: $!};\n\nwhile (my $errep_record = &lt;$errep_fh&gt;) {\n\n  chomp $errep_record;\n  my @errep_record = split /\\t/, $errep_record;\n\n  for my $rep_record (@rep) {\n\n    my @rep_record = split /\\t/, $rep_record;\n\n    if ( all { $rep_record[$_] eq $errep_record[$_] } 0 .. 5 ) {\n      print \"$rep_record\\n\";\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3032425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/88f74c227caa2072ccd30d93cb56d6ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3032425", "link": "https://stackoverflow.com/users/3032425/user3032425"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 1, "answer_count": 3, "score": -2, "last_activity_date": 1422746933, "creation_date": 1422640066, "last_edit_date": 1422694995, "question_id": 28241736, "link": "https://stackoverflow.com/questions/28241736/perl-match-specific-elements-from-arrays-between-two-files-and-print-desired-el", "title": "Perl: Match specific elements from arrays between two files and print desired elements from the file", "body": "<p>I want to match the elements from arrays between two files. The first file consists of six elements and second file consists of seven elements.</p>\n\n<p>The first six elements in the first file matches with the six elements in the second file.The two lines are identical except for that final element in the second file.</p>\n\n<p>I have to print the entire line from the second file, if the line matches with first file.</p>\n\n<p>First File - <strong>errep.txt</strong></p>\n\n<pre><code> XYZ432345  Ethiopia    2567    89  ABC P   28-Apr-14\n XYZ432345  Poland      2567    98  ABC P   28-Apr-14\n</code></pre>\n\n<p>Second File - <strong>rep.txt</strong></p>\n\n<pre><code>XYZ432345   Ethiopia    2567    89  ABC P   28-Apr-14   No Issue\nXYZ432345   Philippines 2467    92  ADC P   28-Apr-14   No Issue\n</code></pre>\n\n<p>Desired Output</p>\n\n<pre><code>XYZ432345   Ethiopia    2567    89  ABC P   28-Apr-14   No Issue\n</code></pre>\n\n<p>Below is the code which I am trying</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(OUT,\"&gt; Final Error Report.txt\");\n\nopen(IN, \"rep.txt\");\nmy @values = &lt;IN&gt;;\nclose IN;\n$flag=0;\n$count=0;\n\nopen(IN, \"errep.txt\");\nmy @verify = &lt;IN&gt;;\nclose IN;\n\nfor my $ver (@verify) {\nchomp $ver;\n@elements= split(\"\\t\",$ver);    \n for my $rep (@values) {\n chomp $rep;\n @report = split(\"\\t\",$rep);\n\n\n$newstring1=\"@elements[0 .. 5]\";\n$newstring2=\"@report[0 .. 5]\";\n\nif ($newstring1 =~/$newstring2/) {    \n    ++$count;\n    $flag=1;\n}\n\nif($flag==1){\n$flag=0;\nprint OUT \"$rep\\n\";\n            }\n    }\n}\nprint OUT \"Total Count:$count\";\n</code></pre>\n\n<p>If any one can improve this code much appreciated. Thanks for suggestions..</p>\n"}, {"tags": ["bash", "perl", "shell"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 3, "creation_date": 1422636821, "post_id": 28240701, "comment_id": 44842563, "body": "<i>&quot;it doesn&#39;t work&quot;</i> actually means nothing to us; if you can detail, maybe we can help better :)"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422644195, "post_id": 28240701, "comment_id": 44846276, "body": "@ikegami I didn&#39;t downvote or close vote anyawy"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422651430, "post_id": 28240701, "comment_id": 44849616, "body": "In this case, it means &quot;I don&#39;t know how to do it&quot;. There&#39;s nothing about this answer that warrants closing it. [oops, re-posting accidentally deleted comment]"}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1422638239, "creation_date": 1422638239, "answer_id": 28241193, "question_id": 28240701, "link": "https://stackoverflow.com/questions/28240701/set-a-shell-array-from-an-array-in-perl-script/28241193#28241193", "title": "Set a shell array from an array in Perl script", "body": "<p>You can do this, but you need to change vectTEST.pl -- currently you have an anonymous sub that you're not assigning to anything. Change the perl script to:</p>\n\n<pre><code>$vect = sub {\n    my $sequence=\"SEQUENCE1\";\n    my $sequence2=\"SEQUENCE2\";\n    my @Array=();\n    push(@Array,$sequence,$sequence2);\n    return \\@Array;\n};\n1;\n</code></pre>\n\n<p>Then, you can do this in bash:</p>\n\n<pre><code>mapfile -t seq &lt; &lt;(perl -E 'do \"vectTEST.pl\"; say join \"\\n\", @{$vect-&gt;()}')\nfor idx in \"${!seq[@]}\"; do echo \"$idx  ${seq[idx]}\"; done\n</code></pre>\n\n\n\n<pre><code>0  SEQUENCE1\n1  SEQUENCE2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1422643684, "last_edit_date": 1422643684, "creation_date": 1422638661, "answer_id": 28241319, "question_id": 28240701, "link": "https://stackoverflow.com/questions/28240701/set-a-shell-array-from-an-array-in-perl-script/28241319#28241319", "title": "Set a shell array from an array in Perl script", "body": "<p>You can't return an array. The concept makes no sense since <code>print</code> produces a stream of bytes, not variables.</p>\n\n<hr>\n\n<p>One solution is to output a text representation of the array and have the shell parse it.</p>\n\n<p>For example,</p>\n\n<pre><code>$ IFS=$'\\n' array=( $(\n   perl -e'\n      my @array = (\"a b\", \"c d\", \"e f\");\n      print \"$_\\n\" for @array;\n   '\n) )\n\n$ echo ${#array[@]}\n3\n\n$ echo \"${array[1]}\"\nc d\n</code></pre>\n\n<p>This particular implementation assumes your array can't contain newlines.</p>\n\n<hr>\n\n<p>The other alternative is to print out shell code that recreates the array and <code>eval</code> that code in the shell.</p>\n\n<p>For example,</p>\n\n<pre><code>$ eval \"array=( $(\n   perl -e'\n      use String::ShellQuote qw( shell_quote );\n      my @array = (\"a b\", \"c d\", \"e f\");\n      print join \" \", map shell_quote($_), @array;\n   '\n) )\"\n\n$ echo ${#array[@]}\n3\n\n$ echo \"${array[1]}\"\nc d\n</code></pre>\n\n<p>This is a robust solution.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1422651325, "post_id": 28243992, "comment_id": 44849568, "body": "Note: That will fail if the sequences have spaces."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1422651501, "post_id": 28243992, "comment_id": 44849651, "body": "What&#39;s with using <code>$,</code>? <code>print join &#39; &#39;, @Array, &quot;\\n&quot;;</code> would be better, although you could simply use <code>print &quot;@Array\\n&quot;;</code> here"}, {"owner": {"reputation": 39, "user_id": 4512293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JKXyQpPSg8I/AAAAAAAAAAI/AAAAAAAAJGM/Nr0lXrpLbA0/photo.jpg?sz=128", "display_name": "Siva Nandy", "link": "https://stackoverflow.com/users/4512293/siva-nandy"}, "edited": false, "score": 0, "creation_date": 1422791891, "post_id": 28243992, "comment_id": 44881766, "body": "Thanks guys, I&#39;ll test your suggestions monday :)"}], "tags": [], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1422649381, "creation_date": 1422649381, "answer_id": 28243992, "question_id": 28240701, "link": "https://stackoverflow.com/questions/28240701/set-a-shell-array-from-an-array-in-perl-script/28243992#28243992", "title": "Set a shell array from an array in Perl script", "body": "<p>Did you test your Perl script? In order to have that Perl script give you something to put into your shell script, you to make sure your Perl script works:</p>\n\n<pre><code>$ test.pl\n</code></pre>\n\n<p>No output at all.</p>\n\n<p>First issue, you put the whole Perl script in <code>sub</code>. Subroutines in Perl don't execute unless you call them. You can't even do that since your subroutine doesn't even have a name. Let's get rid of the subroutine:</p>\n\n<pre><code>my $sequence=\"SEQUENCE1\";\nmy $sequence2=\"SEQUENCE2\";\nmy @Array = ($sequence, $sequence2);\nprint  \\@Array . \"\\n\";\n</code></pre>\n\n<p>Okay, now let's try the program:</p>\n\n<pre><code>$ test.pl   \nARRAY(0x7f8bab8303e0)\n</code></pre>\n\n<p>You're printing out an array reference with that <code>\\</code> in the front of <code>@Array</code>. Let's print out the array itself:</p>\n\n<pre><code>my $sequence=\"SEQUENCE1\";\nmy $sequence2=\"SEQUENCE2\";\nmy @Array = ($sequence, $sequence2);\nprint  @Array, \"\\n\";\n</code></pre>\n\n<p>That will now print <code>@Array</code>:</p>\n\n<pre><code>$ test.pl\nSEQUENCE1SEQUENCE2\n</code></pre>\n\n<p>Not quite. There's no spaces between each element. Let's set <code>$,</code> which is the <em>output field separator</em> to be a single space:</p>\n\n<pre><code>my $sequence=\"SEQUENCE1\";\nmy $sequence2=\"SEQUENCE2\";\nmy @Array = ($sequence, $sequence2);\n$,=' ';\nprint @Array, \"\\n\";\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>$ test.pl\nSEQUENCE1 SEQUENCE2\n</code></pre>\n\n<p>Now, we have a working Perl program that outputs what we need to put into your shell array:</p>\n\n<pre><code>seq=($(test.pl))\necho ${seq[*]}\nSEQUENCE1 SEQUENCE2\n</code></pre>\n\n<p>When you have an issue, you need to break it down into pieces. Your first issue is that your Perl script wasn't working. Once that was fixed, you could now use it to initialize your array in your Bash shell.</p>\n"}], "owner": {"reputation": 39, "user_id": 4512293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JKXyQpPSg8I/AAAAAAAAAAI/AAAAAAAAJGM/Nr0lXrpLbA0/photo.jpg?sz=128", "display_name": "Siva Nandy", "link": "https://stackoverflow.com/users/4512293/siva-nandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1422649381, "creation_date": 1422636552, "last_edit_date": 1422640002, "question_id": 28240701, "link": "https://stackoverflow.com/questions/28240701/set-a-shell-array-from-an-array-in-perl-script", "title": "Set a shell array from an array in Perl script", "body": "<p>I have the following Perl script:</p>\n\n<pre><code> sub {\n    my $sequence=\"SEQUENCE1\";\n    my $sequence2=\"SEQUENCE2\";\n    my @Array = ($sequence, $sequence2);\n    return \\@Array;\n }\n -1\n</code></pre>\n\n<p>I want to retrieve the values of the array via a bash script</p>\n\n<pre><code>#!/bin/bash\nseq=$(perl vectTEST.pl)\n# retrieve the column 1 of the Array     \necho $seq[0]\n</code></pre>\n\n<p>My approach doesn't work.</p>\n"}, {"tags": ["perl", "format"], "comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 2, "creation_date": 1422637207, "post_id": 28240476, "comment_id": 44842828, "body": "Just a guess: but probably your <code>$code_block</code> variable is somehow read-only. If you use the multiline <code>^</code>, the original variable will be altered (the beginning will be chopped). Also, it seems to me like you have some redundant lines in your format, as you <code>~~</code> marker in the second line of your &quot;code_block&quot; and &quot;comment_block&quot; fields. Maybe try something like <code>$code_block = &quot;&quot;.$row-&gt;{codeblock};</code>. It&#39;s far too long ago I used <code>format</code> to give proper advice, but here are some directions you could try until the <code>format</code> experts are drippling in (if there still are some)."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1422685042, "post_id": 28240476, "comment_id": 44857700, "body": "Why would you post 100 lines of code? If you can&#39;t post an example that&#39;s 10 -15 lines long and demonstrates your problem, then you haven&#39;t spent enough time working on your code.   And, what does database code have to do with a format problem?  Why did you post the database code?"}, {"owner": {"reputation": 808, "user_id": 875203, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6caeaf6a567e967071e0b931caf50afb?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/875203/richard"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1422893540, "post_id": 28240476, "comment_id": 44917985, "body": "@7stud I&#39;m new to the perl format so I wasn&#39;t sure if it was the data being passed that was the issue. The encoding is different and I was not sure as to how it affects this code. I wanted to be clear and provide as much information as possible to help. I apologize for trying to be more detailed, Stud times 7."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 0, "last_activity_date": 1422687841, "last_edit_date": 1422687841, "creation_date": 1422685522, "answer_id": 28248880, "question_id": 28240476, "link": "https://stackoverflow.com/questions/28240476/perl-format-not-enough-format-arguments/28248880#28248880", "title": "Perl Format: Not enough format arguments", "body": "<p>Compare the following two examples:</p>\n\n<p>1)</p>\n\n<pre><code>my $code_block = \"helloworld\";\nmy $str = \"mars\";\n\nformat = \n  ^&lt;&lt;&lt;&lt;\n  $str\nbegin\n  ^&lt;&lt;&lt;&lt;\n  $code_block\n  ^&lt;&lt;&lt;&lt;\n  $code_block\n  ^&lt;&lt;&lt;&lt;\n  $code_block\nend;\n.\n\nwrite STDOUT;\n\n--output:--\n  mars\nbegin\n  hello\n  world\n\nend;\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>my $code_block = \"helloworld\";\nmy $str = \"mars\";\n\nformat = \n  ^&lt;&lt;&lt;&lt;\nbegin           #LINE 11\n  ^&lt;&lt;&lt;&lt;\n  $code_block\n  ^&lt;&lt;&lt;&lt;\n  $code_block\n  ^&lt;&lt;&lt;&lt;\n  $code_block\nend;\n.\n\nwrite STDOUT;\n\n--output:--\nModification of a read-only value attempted at 1.pl line 11.\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 875203, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6caeaf6a567e967071e0b931caf50afb?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/875203/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 28248880, "answer_count": 1, "score": -1, "last_activity_date": 1422687841, "creation_date": 1422635841, "question_id": 28240476, "link": "https://stackoverflow.com/questions/28240476/perl-format-not-enough-format-arguments", "title": "Perl Format: Not enough format arguments", "body": "<p>I am currently having trouble with formatting my output. I understand that this may be \"bad practice\", but using format is a requirement.</p>\n\n<p>I am attempting to get a print out of the values that I retrieved from the database into a template of a SQL insert for Netcool.</p>\n\n<p>I'm referencing <a href=\"http://perldoc.perl.org/perlform.html\" rel=\"nofollow\">http://perldoc.perl.org/perlform.html</a> to apply the proper variables but I'm not sure why this is not working. </p>\n\n<p>Here is a code snippet:</p>\n\n<pre><code>129 foreach my $row (@{$rows}) {\n130\n131   $trigger_name         = removeNull($row-&gt;{triggername});\n132   $trigger_group        = $row-&gt;{groupname};\n133   $trigger_kind         = $row-&gt;{triggerkind};\n134   $code_block           = $row-&gt;{codeblock};\n135   $isDebugEnabled       = IntToLiteralBoolean($row-&gt;{debugenabled});\n136   $isEnabled            = IntToLiteralBoolean($row-&gt;{isenabled});\n137   $priority             = $row-&gt;{triggerpriority};\n138   $comment_block        = $row-&gt;{commentblock};\n139   $evaluate_block       = $row-&gt;{evaluateblock};\n140   $bind_name            = $row-&gt;{bindname};\n141   $condition_block      = $row-&gt;{conditionblock};\n142   $declare_block        = $row-&gt;{declareblock};\n143\n144 #  my $sth_triggerType;\n145\n146   if($trigger_kind == 0) {\n147     #database logic goes here\n148     my $sql_getDatabaseFields = \"select *\n149                                  from catalog.database_triggers\n150                                  where TriggerName = '$trigger_name'\";\n151\n152     print \"\\n\\nExtracting trigger: $trigger_name\";\n153     print \"\\nTriggerKind: Database, $trigger_kind\";\n154\n155     my $sth_triggerType = $dbh-&gt;prepare($sql_getDatabaseFields);\n156     $sth_triggerType-&gt;execute;\n157     my $dbRows = $sth_triggerType-&gt;fetchall_arrayref({});\n158\n159     foreach my $row (@{$dbRows}) {\n160       $event_order       = $row-&gt;{eventorder};\n161       $event_op          = $row-&gt;{eventop};\n162       $database_name     = $row-&gt;{databasename};\n163       $table_name        = $row-&gt;{tablename};\n164       $event_level       = $row-&gt;{eventlevel};\n165       write;\n166\n167      # print \"\\nEvent Order: $event_order\";\n168      # print \"\\nEvent Op: $event_op\";\n169      # print \"\\nDatabase Name:$database_name\";\n170      # print \"\\nTable name:$table_name\";\n171      # print \"\\nEvent Level: $event_level\";\n172     }\n173 format =\n174\n175 CREATE OR REPLACE TRIGGER @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n176                           $trigger_name\n177 GROUP @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n178       $trigger_group\n179 DEBUG @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n180       $isDebugEnabled\n181 ENABLED @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n182       $isEnabled\n183 PRIORITY @&lt;&lt;\n184       $priority\n185 COMMENT ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n186   $comment_block\n187   ~~^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n188   $comment_block\n189   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n190   $comment_block\n191   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n192   $comment_block\n193   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n194   $comment_block\n195   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n196\n197 begin\n198   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n199   $code_block\n200   ~~^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n201   $code_block\n202   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n203   $code_block\n204   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n205   $code_block\n206   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n207   $code_block\n208   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n209   $code_block\n210   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n211   $code_block\n212   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n213   $code_block\n214   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n215   $code_block\n216   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n217   $code_block\n218   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n219   $code_block\n220   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n221   $code_block\n222   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n223   $code_block\n224   ^&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n225   $code_block\n226 end;\n227 .\n</code></pre>\n\n<p>This is the output when debugging:</p>\n\n<pre><code>Extracting trigger: service_reinsert\nNot enough format arguments at nc_trigger_extract.pl line 199.\n at nc_trigger_extract.pl line 199\n        main::STDOUT called at nc_trigger_extract.pl line 165\nModification of a read-only value attempted at nc_trigger_extract.pl line 199.\n at nc_trigger_extract.pl line 199\n        main::STDOUT called at nc_trigger_extract.pl line 165\nDebugged program terminated.  Use q to quit or R to restart,\n\n139:      $evaluate_block       = $row-&gt;{evaluateblock};\n140:      $bind_name            = $row-&gt;{bindname};\n141:      $condition_block      = $row-&gt;{conditionblock};\n142==&gt;b   $declare_block        = $row-&gt;{declareblock};\n143\n144     #  my $sth_triggerType;\n145\n146:      if($trigger_kind == 0) {\n147         #database logic goes here\n148:        my $sql_getDatabaseFields = \"select *\n\n\n    DB&lt;2&gt; x $code_block\n    0  \"\\cJ\\cIset old.LastReportAt = new.LastReportAt;\\cJ\\cJ\\cIif ( old.CurrentState != new.CurrentState )\\cJ\\cIthen\\cJ\\cI\\cIset old.CurrentState = new.CurrentState;\\cJ\\cI\\cIset old.StateChange = new.StateChange;\\cJ\\cIend if;\\cJ\\cJ\\cIif ( new.CurrentState = 0 )\\cJ\\cIthen\\cJ\\cI\\cIset old.LastGoodAt = new.LastGoodAt;\\cJ\\cIelseif ( new.CurrentState = 1 )\\cJ\\cIthen\\cJ\\cI\\cIset old.LastMarginalAt = new.LastMarginalAt;\\cJ\\cIelseif ( new.CurrentState = 2 )\\cJ\\cIthen\\cJ\\cI\\cIset old.LastBadAt = new.LastBadAt;\\cJ\\cIend if;\\cJ\\c@\"\n\n DB&lt;4&gt; x $comment_block\n0  \"Service processing for service.status\\c@\"\n  DB&lt;5&gt; c\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "edited": false, "score": 1, "creation_date": 1422635465, "post_id": 28240121, "comment_id": 44841719, "body": "I don&#39;t know why either should work. <code>\\w{7}</code> doesn&#39;t match any line. <code>\\w{7,}</code> would."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422636665, "post_id": 28240356, "comment_id": 44842473, "body": "That regex will match when <i>any</i> field is 7 characters or longer, not just the 11th field. <code>perl -i.bak -F, -anwe &#39;print unless length $F[10] &gt; 6&#39;</code> or similar would be better."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1422636754, "post_id": 28240356, "comment_id": 44842512, "body": "Ah yes, glossed over the bit about the 11th field. Updating the answer"}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 4, "last_activity_date": 1422637560, "last_edit_date": 1422637560, "creation_date": 1422635463, "answer_id": 28240356, "question_id": 28240121, "link": "https://stackoverflow.com/questions/28240121/perl-one-liner-in-line-edits-with-a-bak-file-csv/28240356#28240356", "title": "perl one liner in line edits with a bak file CSV", "body": "<p>To match on 7 <em>or more</em> characters, you would need to include a <code>,</code> after the 7. </p>\n\n<p>Including <code>-p</code> causes perl to <code>print $_</code> in the <code>continue</code> phase of the loop, so you'll double up on unmatched lines. </p>\n\n<p>However, to match <em>only</em> the 11th field, it's more appropriate to autosplit lines on ',' and test the length of the field: </p>\n\n<p><code>perl -i.bak -F, -anwe 'print unless length $F[10] &gt; 6'</code></p>\n\n<p>Keep in mind this will only work as a one-liner if your CSV does not include quoted commas. If you need more you'll have to look into the <a href=\"http://search.cpan.org/perldoc/Text::CSV\" rel=\"nofollow\">Text::CSV</a> module. </p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1422635522, "creation_date": 1422635522, "answer_id": 28240373, "question_id": 28240121, "link": "https://stackoverflow.com/questions/28240121/perl-one-liner-in-line-edits-with-a-bak-file-csv/28240373#28240373", "title": "perl one liner in line edits with a bak file CSV", "body": "<p>Because you are using the <code>-p</code> switch, which overrides the <code>-n</code> switch, and produces output for every line of input.</p>\n\n<p>I'll bet you are now seeing duplicate output for most of the lines in your input.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1436261180, "creation_date": 1422634630, "last_edit_date": 1436261180, "question_id": 28240121, "link": "https://stackoverflow.com/questions/28240121/perl-one-liner-in-line-edits-with-a-bak-file-csv", "title": "perl one liner in line edits with a bak file CSV", "body": "<p>I have a field where if the 11th field of a line in a csv file is larger than 6 characters,\nthe whole line needs to be removed.</p>\n\n<pre><code>casoer@casperbox::/here/s/johnny$ head /come/and/play/with/us/danny.csv\nD,642,0642,RED,RUM,,M,,L,S,FOREVERRR,0,862,\nD,642,0642,RED,RUM,,M,,L,L,WONKY,13783,10196,\nD,642,0642,RED,RUM,,M,,L,L,WONKY,13783,10196,\nD,642,0642,RED,RUM,,M,,L,L,CRACK?g,221,188,\n,642,0642,RED,RUM,,M,,L,L,CRACK?g,221,188,\nD,642,0642,RED,RUM,,M,,S,S,TRIP,4169,2858,\nD,642,0642,RED,RUM,,M,,S,S,TRIP,4169,2858,\nD,642,0642,RED,RUM,,M,,S,S,WRIDE,450,450,\nD,642,0642,RED,RUM,,M,,S,S,WRIDE,450,450,\nD,642,0642,RED,RUM,,M,,L,L,FOOHK,157,157,\n</code></pre>\n\n<p>this works great --</p>\n\n<pre><code>casoer@casperbox::/here/s/johnny$ perl -nle 'print unless /\\,\\w{7}\\,/' /come/and/play/with/us/danny.csv &gt; /come/and/play/with/us/danny.csv.trap\n</code></pre>\n\n<p>this will remove the line \"D,642,0642,RED,RUM,,M,,L,S,FOREVERRR,0,862,\"</p>\n\n<p>when I try and tidy this up -</p>\n\n<pre><code>casoer@casperbox::/here/s/johnny$ perl -p -i.bak -nle 'print unless /\\,\\w{7}\\,/' /come/and/play/with/us/danny.csv\n</code></pre>\n\n<p>the .bak file is created - but the \"D,642,0642,RED,RUM,,M,,L,S,FOREVERRR,0,862,\" is not removed from the in line file.\nI would like to have the oneliner create a bak up file if we are going to have it do -i for inline editing.</p>\n"}, {"tags": ["perl"], "owner": {"reputation": 103, "user_id": 1958532, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/300fa4c8393ede187c968924da66235e?s=128&d=identicon&r=PG", "display_name": "user1958532", "link": "https://stackoverflow.com/users/1958532/user1958532"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422638830, "creation_date": 1422633572, "last_edit_date": 1422638830, "question_id": 28239802, "link": "https://stackoverflow.com/questions/28239802/spreadsheetparsexlsx-or-spreadsheetparseexcel-doesnt-work-with-xlsx", "title": "Spreadsheet::ParseXLSX or Spreadsheet::ParseExcel doesn&#39;t work with .xlsx", "body": "<p>I have a script that works perfectly fine with .xls file but the same file when in xlsx doesn't work with my script. </p>\n\n<p>I use <a href=\"https://metacpan.org/pod/Spreadsheet::ParseXLSX\" rel=\"nofollow\">Spreadsheet::ParseXLSX</a> to parse the .xlsx file. \nIt works fine until getting the row and col range but doesn't work on get_cell or value of the cell. </p>\n\n<pre><code>my @name;\nmy @details = (); \nfor my $row(0 ..$row_max) {    \n    my $ligand_details = {};\n\n    for my $col (@required_cols) {\n        warn Dumper($worksheet); \n\n        my $cell = $worksheet-&gt;get_cell($row,$col);\n        warn $cell; \n\n        my $value =  $cell ? $cell-&gt;val :'';\n\n        if($row == 0 ) {                    \n            $name[$col] = $value;\n        } else {\n            $ligand_details-&gt;{$name[$col]} = $value; \n        }\n    }   \n    push @details , $ligand_details if (defined $row); \n}\n\nreturn \\@details; \n</code></pre>\n\n<p>Sorry forgot to add the error message </p>\n\n<pre><code>$VAR1 = [\n      {},\n      {\n        '' =&gt; ''\n      },\n      {\n        '' =&gt; ''\n      },\n      {\n        '' =&gt; ''\n      },\n      {\n</code></pre>\n\n<p>Is there any difference between ParseExcel and ParseXLSX? any suggestions?</p>\n"}]