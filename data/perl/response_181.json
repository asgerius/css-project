[{"tags": ["perl", "ssl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530140855, "post_id": 51072472, "comment_id": 89134815, "body": "&quot;I think I have some problems because of it. &quot; You will need to give more details on that. So, see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and show the code you run and the exact errors you get."}], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": true, "score": 1, "last_activity_date": 1530141962, "creation_date": 1530141962, "answer_id": 51072726, "question_id": 51072472, "link": "https://stackoverflow.com/questions/51072472/lwpuseragent-change-ssl-implementation/51072726#51072726", "title": "LWP::UserAgent change SSL implementation", "body": "<blockquote>\n  <p>How can I find out which one is in use</p>\n</blockquote>\n\n<p>If you look at <code>LWP::UserAgent</code> documentation it says you need to install <code>LWP::Protocol::https</code> module to have support for <code>https://</code> URIs.</p>\n\n<p>If you look at this module in turn you see that it does use the <code>Net::HTTP</code> distribution, into which you find a <code>HTTPS.pm</code> module (see it online at <a href=\"https://metacpan.org/source/OALDERS/Net-HTTP-6.18/lib/Net/HTTPS.pm\" rel=\"nofollow noreferrer\">https://metacpan.org/source/OALDERS/Net-HTTP-6.18/lib/Net/HTTPS.pm</a>) where at the beginning you can clearly see that, except if overriden, it first start to try using <code>IO::Socket::SSL</code> and next only searches for <code>Net::SSL</code>.</p>\n\n<p>See:</p>\n\n<pre><code>elsif ($IO::Socket::SSL::VERSION) {\n    $SSL_SOCKET_CLASS = \"IO::Socket::SSL\"; # it was already loaded\n}\nelsif ($Net::SSL::VERSION) {\n    $SSL_SOCKET_CLASS = \"Net::SSL\";\n}\n</code></pre>\n\n<p>If they are not loaded yet, it tries to load them, in the same order:</p>\n\n<pre><code>eval { require IO::Socket::SSL; };\nif ($@) {\n    my $old_errsv = $@;\n    eval {\n        require Net::SSL;  # from Crypt-SSLeay\n    };\n    if ($@) {\n        $old_errsv =~ s/\\s\\(\\@INC contains:.*\\)/)/g;\n        die $old_errsv . $@;\n    }\n    $SSL_SOCKET_CLASS = \"Net::SSL\";\n}\nelse {\n    $SSL_SOCKET_CLASS = \"IO::Socket::SSL\";\n}\n</code></pre>\n\n<p>So, in short, <code>IO::Socket::SSL</code> has full precedence.</p>\n\n<p>Inside your program, after having used <code>LWP::UserAgent</code> you can use the <code>$Net::HTTPS::SSL_SOCKET_CLASS</code> variable to know which class has been used for HTTPS operations.</p>\n\n<blockquote>\n  <p>how to change it to use the other module?</p>\n</blockquote>\n\n<p>If you read the beginning of the code you will see:</p>\n\n<pre><code>elsif ($SSL_SOCKET_CLASS = $ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS}) {\n    unless ($SSL_SOCKET_CLASS =~ /^(IO::Socket::SSL|Net::SSL)\\z/) {\n        die \"Bad socket class [$SSL_SOCKET_CLASS]\";\n    }\n    eval \"require $SSL_SOCKET_CLASS\";\n    die $@ if $@;\n}\n</code></pre>\n\n<p>which means that before everything above if the environment has a variable <code>PERL_NET_HTTPS_SSL_SOCKET_CLASS</code> defined, then its value is used as a class to do operations, if its name is either <code>IO::Socket::SSL</code> or <code>Net::SSL</code>.</p>\n\n<p>So, either set it in your environment before starting your program that uses <code>LWP::UserAgent</code> or do something like that in your program:</p>\n\n<pre><code>BEGIN {\n    $ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS} = 'Net::SSL';\n}\n</code></pre>\n\n<p>This needs to happen <strong>before</strong> you do <code>use LWP::UserAgent;</code></p>\n"}], "owner": {"reputation": 193, "user_id": 4392714, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9d145af011ef0de49a0ec9e2ed2ef322?s=128&d=identicon&r=PG&f=1", "display_name": "rainmaker", "link": "https://stackoverflow.com/users/4392714/rainmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 51072726, "answer_count": 1, "score": -1, "last_activity_date": 1530141962, "creation_date": 1530139892, "question_id": 51072472, "link": "https://stackoverflow.com/questions/51072472/lwpuseragent-change-ssl-implementation", "title": "LWP::UserAgent change SSL implementation", "body": "<p>I want to use LWP::UserAgent to send some requests over HTTPS. There is this sentence in the ssl_opts section in the <a href=\"https://metacpan.org/pod/LWP::UserAgent#ssl_opts\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<blockquote>\n  <p>Other options can be set and are processed directly by the SSL Socket\n  implementation in use. See IO::Socket::SSL or Net::SSL for details.</p>\n</blockquote>\n\n<p>I have installed both modules on my machine and I think I have some problems because of it. </p>\n\n<p>How can I find out which one is in use and how to change it to use the other module?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1530134702, "post_id": 51071488, "comment_id": 89133012, "body": "What a uniquely awful site. The <code>&lt;MYFILE&gt;</code> doesn&#39;t even show up when you view source, which means they copy-pasted it from another site that already wasn&#39;t rendering the HTML correctly."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1530134841, "post_id": 51071488, "comment_id": 89133073, "body": "Why <code>chomp</code> just to add <code>\\n</code> on the next line? Also, lexical filehandles. Also, 3-argument <code>open</code>. Also, check system calls for failure."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530141524, "post_id": 51071488, "comment_id": 89134970, "body": "There is a very good list of resources on the Stack Overflow <a href=\"https://stackoverflow.com/tags/perl/info\">Perl tag info page</a>. Any one of them would be a better choice than the site you have happened upon."}], "answers": [{"tags": [], "owner": {"reputation": 1214, "user_id": 1538270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ec55b9b6a94aaa6c1d34665ad04e3851?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/1538270/chad"}, "is_accepted": false, "score": 2, "last_activity_date": 1530133973, "creation_date": 1530133973, "answer_id": 51071489, "question_id": 51071488, "link": "https://stackoverflow.com/questions/51071488/why-does-this-program-to-read-a-file-cause-an-endless-loop/51071489#51071489", "title": "Why does this program to read a file cause an endless loop?", "body": "<p>The while statement above is incorrect: \"while ()\" is the same as \"while (1)\" and causes an endless loop. </p>\n\n<p>Change the line as follows, and the code works:</p>\n\n<pre><code>while (&lt;MYFILE&gt;) {\n</code></pre>\n"}], "owner": {"reputation": 1214, "user_id": 1538270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ec55b9b6a94aaa6c1d34665ad04e3851?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/1538270/chad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530141761, "creation_date": 1530133973, "last_edit_date": 1530141761, "question_id": 51071488, "link": "https://stackoverflow.com/questions/51071488/why-does-this-program-to-read-a-file-cause-an-endless-loop", "title": "Why does this program to read a file cause an endless loop?", "body": "<p>I wanted to find a program to read and write a file line by line.</p>\n\n<p>Googling I found <a href=\"https://www.thoughtco.com/read-and-write-files-in-perl-2641155\" rel=\"nofollow noreferrer\"><strong><em>How to Read and Write Files in Perl</em></strong></a>\non the first page of results.\nIt includes the following code to read a file and write every line to stdout:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nopen(MYFILE, 'data.txt');\n\nwhile ( ) {\n    chomp;\n    print \"$_\\n\";\n}\n\nclose(MYFILE);\n</code></pre>\n\n<p>When I run this program (using Perl 5.18.2 on Ubuntu) it endlessly prints newlines until I stop it. What's the problem?</p>\n"}, {"tags": ["perl", "csv"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530133134, "post_id": 51070923, "comment_id": 89132419, "body": "Re &quot;<i>If your escape character is <code>&#39;\\&#39;</code> (backslash) then your line should look like</i>&quot;, In CSV, the escape character is usually <code>&quot;</code>."}, {"owner": {"reputation": 1466, "user_id": 926057, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/66d793e3800b52a15181bc0b18393d77?s=128&d=identicon&r=PG", "display_name": "o\u1d09\u0279\u01dd\u0265\u0254", "link": "https://stackoverflow.com/users/926057/o%e1%b4%89%c9%b9%c7%9d%c9%a5%c9%94"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530909571, "post_id": 51070923, "comment_id": 89415862, "body": "@ikegami Sure. The focus here is to help the developer understand function of escape character and show how to configure it right."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530909674, "post_id": 51070923, "comment_id": 89415894, "body": "So why do you show how to configure it wrong (<code>escape_char =&gt; &quot;\\\\&quot;</code> instead of the correct and default <code>escape_char =&gt; &#39;&quot;&#39;</code>)?"}], "tags": [], "owner": {"reputation": 1466, "user_id": 926057, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/66d793e3800b52a15181bc0b18393d77?s=128&d=identicon&r=PG", "display_name": "o\u1d09\u0279\u01dd\u0265\u0254", "link": "https://stackoverflow.com/users/926057/o%e1%b4%89%c9%b9%c7%9d%c9%a5%c9%94"}, "is_accepted": false, "score": 0, "last_activity_date": 1530131948, "last_edit_date": 1530131948, "creation_date": 1530131290, "answer_id": 51070923, "question_id": 51070765, "link": "https://stackoverflow.com/questions/51070765/csv-specification-double-quotes-at-the-start-and-end-of-fields/51070923#51070923", "title": "CSV specification - double quotes at the start and end of fields", "body": "<p>That depends on the escape character you use. If your escape character is <code>'\"'</code> (double quote) then your line should look like</p>\n\n<pre><code>1,\"\"\"hello world\"\"\",9.5\n</code></pre>\n\n<p>If your escape character is <code>'\\'</code> (backslash) then your line should look like</p>\n\n<pre><code>1,\"\\\"hello world\\\"\",9.5\n</code></pre>\n\n<p>Check your parser/environment defaults or explicitly configure your parser with the escape character you need e.g. to use backslash do:</p>\n\n<pre><code>my $csv = Text::CSV_XS-&gt;new ({ quote_char =&gt; '\"', escape_char =&gt; \"\\\\\" });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 4, "last_activity_date": 1530131433, "creation_date": 1530131433, "answer_id": 51070955, "question_id": 51070765, "link": "https://stackoverflow.com/questions/51070765/csv-specification-double-quotes-at-the-start-and-end-of-fields/51070955#51070955", "title": "CSV specification - double quotes at the start and end of fields", "body": "<p>The canonical format definition of CSV is <a href=\"https://www.rfc-editor.org/rfc/rfc4180.txt\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc4180.txt</a>. It says:</p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li><p>Each field may or may not be enclosed in double quotes (however\n     some programs, such as Microsoft Excel, do not use double quotes\n     at all).  If fields are not enclosed with double quotes, then\n     double quotes may not appear inside the fields.  For example:</p>\n  \n  <p>\"aaa\",\"bbb\",\"ccc\" CRLF<br/>\n    zzz,yyy,xxx</p></li>\n  <li><p>Fields containing line breaks (CRLF), double quotes, and commas\n     should be enclosed in double-quotes.  For example:</p>\n  \n  <p>\"aaa\",\"b CRLF<br/>\n     bb\",\"ccc\" CRLF<br/>\n     zzz,yyy,xxx<br/></p></li>\n  <li><p>If double-quotes are used to enclose fields, then a double-quote\n     appearing inside a field must be escaped by preceding it with\n     another double quote.  For example:</p>\n  \n  <p>\"aaa\",\"b\"\"bb\",\"ccc\"</p></li>\n  </ol>\n</blockquote>\n\n<p>Last rule means your line should have been:</p>\n\n<pre><code>1,\"\"\"hello world\"\"\",9.5\n</code></pre>\n\n<p>But not all parsers/generators follow this standard perfectly, so you might need for interoperability reasons to relax some rules. It all depends on how much you control the CSV format writing and CSV format parsing parts.</p>\n"}], "owner": {"reputation": 181, "user_id": 7069267, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RFphAf8qSuk/AAAAAAAAAAI/AAAAAAAADPg/H6clIdD0mfQ/photo.jpg?sz=128", "display_name": "Tom Melly", "link": "https://stackoverflow.com/users/7069267/tom-melly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530132504, "creation_date": 1530130683, "last_edit_date": 1530132504, "question_id": 51070765, "link": "https://stackoverflow.com/questions/51070765/csv-specification-double-quotes-at-the-start-and-end-of-fields", "title": "CSV specification - double quotes at the start and end of fields", "body": "<p>Question (because I can't work it out), should <code>\"\"hello world\"\"</code> be a valid field value in a CSV file according to the specification?</p>\n\n<p>i.e should:</p>\n\n<pre><code>1,\"\"hello world\"\",9.5\n</code></pre>\n\n<p>be a valid CSV record?</p>\n\n<p>(If so, then the Perl CSV-XS parser I'm using is mildly broken, but if not, then <code>$line =~ s/\\342\\200\\234/\"\"/g;</code> is a really bad idea ;) )</p>\n\n<p>The weird thing is is that this code has been running without issue for years, but we've only just hit a record that started with both a left double quote and contained no comma (the above is from a CSV pre-parser).</p>\n"}, {"tags": ["profiling", "perl", "class-dbi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530129890, "post_id": 51070019, "comment_id": 89131008, "body": "Why not switch to Fast CGI? With minimal effort, that 1.6s becomes irrelevant"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1530164017, "post_id": 51070019, "comment_id": 89139727, "body": "It might be useful if you showed us the code you were using with DBIx::Class that was too slow.  There are different ways to initialise DBIx::Class with your schema info and it&#39;s not necessary to load all tables.  You can also set up static definitions for just the tables you care about which should load more quickly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530173972, "post_id": 51070019, "comment_id": 89144644, "body": "@ikegami if they are on a shared hosting environment they likely can&#39;t do that."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1530191011, "post_id": 51070019, "comment_id": 89155564, "body": "@GrantMcLean Please explain how to initialize <code>DBIx::Class</code> without loading all tables. I&#39;ve edited the question"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1530182556, "creation_date": 1530182556, "answer_id": 51080856, "question_id": 51070019, "link": "https://stackoverflow.com/questions/51070019/classdbi-does-it-load-all-tables/51080856#51080856", "title": "Class::DBI - does it load all tables?", "body": "<p>I really wouldn't recommend <a href=\"https://metacpan.org/pod/Class::DBI\" rel=\"nofollow noreferrer\">Class::DBI</a>. It's been unmaintained for twelve years - and there were good reasons why everyone switched to <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a>.</p>\n\n<p>I would highly recommend working on the problem that leads to you still using CGI. What is preventing you from, for example, using <a href=\"https://metacpan.org/pod/CGI::Emulate::PSGI\" rel=\"nofollow noreferrer\">CGI::Emulate::PSGI</a> to trivially convert your CGI code to PSGI apps which you can then deploy in a persistent environment like FastCGI or, better, as a standalone service which you can then access using nginx? Any of these solutions would mean that the DBIx::Class load time is no longer problem.</p>\n\n<p>Obviously, I have no idea what is keeping you tied to CGI. But, in my experience, moving to PSGI solution is often easier than people expect it to be and it will undoubtedly leave you in a better position.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530190966, "creation_date": 1530127273, "last_edit_date": 1530190966, "question_id": 51070019, "link": "https://stackoverflow.com/questions/51070019/classdbi-does-it-load-all-tables", "title": "Class::DBI - does it load all tables?", "body": "<p>We have a MySQL database with very big number of tables. Unfortunately in 2018 we still use Perl CGI. So loading time of a script is essential.</p>\n\n<p><code>DBIx::Class</code> was ruled out by me because it loads about 1.6 sec (so long because it loads Perl definitions for <em>all</em> tables of the DB) what is clearly too much.</p>\n\n<p>How quickly <code>Class::DBI</code> loads? My main question: Does Perl load information about all available tables (like <code>DBIx::Class</code> does) when we use <code>Class::DBI</code> or does it load Perl definitions for only these tables which we actually use?</p>\n\n<hr>\n\n<p>The following is a <code>DBIx::Class</code> code which loads 1.6 sec:</p>\n\n<pre><code>#!/usr/bin/perl\n\npackage MyApp::Schema;\nuse lib '.../ORMs/dbix-class';\nuse base qw/DBIx::Class::Schema/;\n\n__PACKAGE__-&gt;load_namespaces();\n\n1;\n</code></pre>\n\n<p>(The schema is autogenerated.)</p>\n\n<p>Is there any way to make it faster? How to use it without loading all tables?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1530122206, "post_id": 51068773, "comment_id": 89127489, "body": "Your array has only one element. Please provide the expected hash layout."}, {"owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1530122409, "post_id": 51068773, "comment_id": 89127595, "body": "Yes that&#39;s the only element in array."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1530122422, "post_id": 51068773, "comment_id": 89127601, "body": "<code>perl -w</code> has been obsolete since 2000. Please <code>use warnings;</code> instead."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530122451, "post_id": 51068773, "comment_id": 89127615, "body": "Are you looking for <a href=\"https://metacpan.org/pod/perlreftut\" rel=\"nofollow noreferrer\"><code>perldoc perlreftut</code></a>?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1530122926, "post_id": 51068773, "comment_id": 89127848, "body": "Your question isn&#39;t clear. Isn&#39;t it just <code>$hashElements{Item} = @arrayElements;</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1530123769, "post_id": 51068773, "comment_id": 89128236, "body": "@Barmar no, that would assign <code>1</code> to <code>$hashElements{Item}</code> because it would evaluate the array in scalar context."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1530123974, "post_id": 51068773, "comment_id": 89128340, "body": "<code>$hashElements{Item} = \\@arrayElements;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1530124456, "post_id": 51068773, "comment_id": 89128596, "body": "@Barmar that would assign a <i>reference</i> of <code>@arrayElements</code> to <code>$hashElements{Item}</code>. That means it&#39;s basically the whole data structure. If you print it, you&#39;ll get something like <code>ARRAY=0xD34DB33F</code>, and you&#39;d have to use <code>$hashElements{Item}-&gt;[0]</code> to get to the actual string <code>&#39;Array Functions&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "edited": false, "score": 1, "creation_date": 1530153173, "post_id": 51069367, "comment_id": 89137260, "body": "Thanks for the ... I understood the problem now with your comments.                   &quot;An array in scalar context gets converted to the number of elements in the array, so this would assign 1. That&#39;s not what you want.&quot;                                                                           I was getting numer of elements and after reading this got the mistake which I was doing. Thank you!!!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "edited": false, "score": 0, "creation_date": 1530173452, "post_id": 51069367, "comment_id": 89144343, "body": "@Shirinsh I&#39;m glad I could help. Please take a moment to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and to learn what to do when someone answers your question. Thanks. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1530124361, "creation_date": 1530124361, "answer_id": 51069367, "question_id": 51068773, "link": "https://stackoverflow.com/questions/51068773/perl-assign-array-elements-to-hash-user-defined-key/51069367#51069367", "title": "Perl assign array elements to hash user defined key", "body": "<p>You seem to be missing some core concepts of Perl (or programming in general). If you are learning Perl through a book or online tutorial, I suggest you re-read the chapters on arrays and hashes.</p>\n\n<p>Let's look at the things involved here. You have:</p>\n\n<ul>\n<li><code>@arrayElements</code>, which is an <em>array</em>. It contains a list with one elements, the string <code>'Array Functions'</code>.</li>\n<li><code>%hashElements</code>, which is a <em>hash</em>. It's empty.</li>\n<li><code>$hashElements{Item}</code>, which is a <em>scalar</em> value. You want to set this.</li>\n</ul>\n\n<p>You say you want <code>$hashElements{Item}</code> to have the value <code>'Array Functions'</code>, which you have as the first element in your array <code>@arrayElements</code>.</p>\n\n<pre><code>$hashElements{Item} = $arrayElements[0];\n</code></pre>\n\n<p>And that's it. Both <code>$hashElements{Item}</code> and <code>$arrayElements[0]</code> are <em>scalar</em> values. That's why their <em>sigils</em> (the sign at the front) changes from an <code>@</code> (for array) or <code>%</code> (for hash) to a <code>$</code>. You can distinguish whether the value came from a hash or an array by the brackets used to access the elements. <code>[]</code> is for arrays, and <code>{}</code> is for hashes.</p>\n\n<p>You cannot do the following though.</p>\n\n<pre><code>$hashElements{Item} = @arrayElements;\n</code></pre>\n\n<p>Because <code>$hashElements{Item}</code> is a scalar, the thing on the right hand side of the assignment will be treated in <em>scalar context</em>. An array in scalar context gets converted to the number of elements in the array, so this would assign <code>1</code>. That's not what you want.</p>\n\n<p>You should really read up more about this, and also pick better names for your variables. Your example is very confusing. In general, we don't do <code>$CamelCase</code> for variable names in Perl, but instead use <code>$snake_case</code>, which is easier to read and type.</p>\n\n<p>Take a look at the following resources to learn more about the concepts I've mentioned above.</p>\n\n<p><a href=\"https://perlmaven.com/perl-tutorial\" rel=\"nofollow noreferrer\">Perl Maven</a>, <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a>, <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530124361, "creation_date": 1530121908, "question_id": 51068773, "link": "https://stackoverflow.com/questions/51068773/perl-assign-array-elements-to-hash-user-defined-key", "title": "Perl assign array elements to hash user defined key", "body": "<p>Below is code in which I need help.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nuse Data::Dumper;\n\nmy @arrayElements = ('Array Functions');\nprint join(\", \", @arrayElements);\n### Output =&gt; Array Functions\n\nmy %hashElements = ();\n</code></pre>\n\n<p>I want to assign the content of <code>@arrayElements</code> to <code>$hashElements{Item}</code> \nMissing some core concepts or trying wrong and been a while struggling with this.  </p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1530118445, "post_id": 51066766, "comment_id": 89125688, "body": "Please <a href=\"https://stackoverflow.com/posts/51066766/edit\">edit</a> and show us the actual code you wrote that includes <code>delete unless exists</code> and the exact error message."}], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 4, "last_activity_date": 1530136843, "last_edit_date": 1530136843, "creation_date": 1530117261, "answer_id": 51067618, "question_id": 51066766, "link": "https://stackoverflow.com/questions/51066766/perl-delete-hash-items-if-not-found-in-an-array/51067618#51067618", "title": "perl delete hash items if not found in an array", "body": "<p>You should loop through the keys of <code>%{$data{$id}}</code> instead.</p>\n\n<pre><code>my %dates = map {$_ =&gt; 1} @dates;\nexists $dates{$_} or delete $data{$id}{$_} for keys %{$data{$id}};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530119208, "post_id": 51067911, "comment_id": 89126039, "body": "Good alternative. <code>$data</code> is a reference to a hash so you need to write <code>$$data{$id}{$_}</code> instead of <code>$data{$id}{$_}</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530136687, "post_id": 51067911, "comment_id": 89133765, "body": "@blhsing: If <code>$data</code> is a hash reference then the OP&#39;s code is wrong, and I have no reason to assume so."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530136902, "post_id": 51067911, "comment_id": 89133842, "body": "@blhsing: Even if you were correct, it would be best to write <code>$data-&gt;{$id}{$_}</code>"}, {"owner": {"reputation": 25, "user_id": 8887201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b167c3226f13430259f6838f6c7808b1?s=128&d=identicon&r=PG&f=1", "display_name": "lalala53__", "link": "https://stackoverflow.com/users/8887201/lalala53"}, "edited": false, "score": 0, "creation_date": 1530204969, "post_id": 51067911, "comment_id": 89164593, "body": "@borodin Thanks! This filtered out all the correct dates but I end up with undef hash for all but the last date. I&#39;ll work on debugging this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530216150, "post_id": 51067911, "comment_id": 89169222, "body": "You don&#39;t describe your data structure very carefull and I may have misunderstood it. If you add a dump of your hash into the question then it will help."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1530118365, "creation_date": 1530118365, "answer_id": 51067911, "question_id": 51066766, "link": "https://stackoverflow.com/questions/51066766/perl-delete-hash-items-if-not-found-in-an-array/51067911#51067911", "title": "perl delete hash items if not found in an array", "body": "<p>As long as the dates in <code>@dates</code> are guaranteed to appear in the hash you can use <code>map</code></p>\n\n<pre><code>%{ $data{$id} } = map { $_ =&gt; $data{$id}{$_} } @dates\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8887201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b167c3226f13430259f6838f6c7808b1?s=128&d=identicon&r=PG&f=1", "display_name": "lalala53__", "link": "https://stackoverflow.com/users/8887201/lalala53"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 51067911, "answer_count": 2, "score": 2, "last_activity_date": 1530136843, "creation_date": 1530114152, "last_edit_date": 1530117901, "question_id": 51066766, "link": "https://stackoverflow.com/questions/51066766/perl-delete-hash-items-if-not-found-in-an-array", "title": "perl delete hash items if not found in an array", "body": "<p>I have the following hash:\n<code>%{$data{$id}{$date}}</code>\nthat includes a large number of dates</p>\n\n<p>and an array <code>@dates</code> that includes a subsection of dates found in the <code>%hash</code>.</p>\n\n<p>What is the best way to loop through my <code>%hash</code> and delete all dates that are not found in <code>@dates</code> array? Once this is done I'd like the <code>%hash</code> to only have the values from <code>@array</code> dates.</p>\n\n<p>I've tried 'delete unless exists' looking at keys after I created a hash from my <code>@dates</code> array but would get missing arguments error.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530114425, "post_id": 51066614, "comment_id": 89123508, "body": "How did you do 3) Install libraries exactly? What the error message tells you is that this module is not installed in a path where perl searches for modules. So it is an installation problem."}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530114511, "post_id": 51066614, "comment_id": 89123556, "body": "I ran this and dont recall seeing an error :sudo cpan -f SQL::Translator DBIx::Class DBIx::Class::Schema XML::LibXML::Reader XML::Simple XML::LibXML::SAX XML::SAX XML::SAX::ParserFactory Log::Log4perl JSON @PatrickMevzek"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1530114579, "post_id": 51066614, "comment_id": 89123594, "body": "The problem is regarding the installation of the <code>BulkWhois</code> Perl distribution. How did you install this one?"}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530114835, "post_id": 51066614, "comment_id": 89123759, "body": "I don&#39;t think I did.  I&#39;m not sure how to.  @PatrickMevzek"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1530115162, "post_id": 51066614, "comment_id": 89123938, "body": "Besides installing it correctly, if you run your script like that it should find it: <code>cd ~&#47;McKizzle-Arin-XML-Data-to-MySQL-dc77a54&#47;src&#47; ; perl -I. bulkwhois2database.pl</code>; the <code>-I.</code> adds the current directory and hence will make perl find the module"}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530115357, "post_id": 51066614, "comment_id": 89124040, "body": "Can&#39;t locate Switch.pm in @INC (you may need to install the Switch module) (@INC contains: . /etc/perl /usr/local/lib/perl/5.18.2 /usr/local/share/perl/5.18.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.18 /usr/share/perl/5.18 /usr/local/lib/site_perl .) at InsertManager/XMLSimpleInsertManager.pm line 22. BEGIN failed--compilation aborted at InsertManager/XMLSimpleInsertManager.pm line 22. Compilation failed in require at bulkwhois2database.pl line 13. BEGIN failed--compilation aborted at bulkwhois2database.pl line 13."}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530115414, "post_id": 51066614, "comment_id": 89124070, "body": "That seemed to work then it moved down and failed at line 13. @PatrickMevzek"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1530115426, "post_id": 51066614, "comment_id": 89124075, "body": "<code>sudo cpan -f Switch</code>"}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530115545, "post_id": 51066614, "comment_id": 89124136, "body": "Awesome I think this is going to work.  It is saying I need to add the username and password for the MySQL database.  Let me add those to the end and run it again."}, {"owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530116642, "post_id": 51066614, "comment_id": 89124751, "body": "Thank you so much for your help!!! This worked and I see the tables in my &quot;BulkWhois&quot; database!  mp$ cd ubuntu@ubuntu:~$ cd ~/McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/ ; perl -I. bulkwhois2database.pl --file /tmp/arin_db.xml --dbms mysql --database BulkWhois --host localhost --port 3306 --user root @PatrickMevzek"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1530118699, "post_id": 51066614, "comment_id": 89125816, "body": "This would be a good time to install <a href=\"https://metacpan.org/pod/Perl::PrereqScanner::NotQuiteLite\" rel=\"nofollow noreferrer\">metacpan.org/pod/Perl::PrereqScanner::NotQuiteLite</a>, run it against the repository, use it to write a cpanfile listing all the dependencies and then create a pull request to add that to this tool, including a manual on how to use it."}], "answers": [{"tags": [], "owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "is_accepted": true, "score": 0, "last_activity_date": 1530213171, "creation_date": 1530213171, "answer_id": 51089847, "question_id": 51066614, "link": "https://stackoverflow.com/questions/51066614/arin-bulk-whois-data-perl-cant-locate-bulkwhois-schema-pm-in-inc/51089847#51089847", "title": "Arin Bulk whois data perl Can&#39;t locate BulkWhois/Schema.pm in @INC", "body": "<p>With all of the help from Patrick, we solved the issue I was having.</p>\n\n<p>Add the -I adds the current directory and made perl find the missing perl module.</p>\n\n<p>Needed to install the missing Switch module:</p>\n\n<pre><code>sudo cpan -f Switch\n</code></pre>\n\n<p>Final command that worked:</p>\n\n<pre><code>cd ~/McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/ ; perl -I. bulkwhois2database.pl --file /tmp/arin_db.xml --dbms mysql --database BulkWhois --host localhost --port 3306 --user root \n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 9530105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FLoW1.jpg?s=128&g=1", "display_name": "sectechguy", "link": "https://stackoverflow.com/users/9530105/sectechguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 51089847, "answer_count": 1, "score": 0, "last_activity_date": 1530213171, "creation_date": 1530113644, "last_edit_date": 1530122529, "question_id": 51066614, "link": "https://stackoverflow.com/questions/51066614/arin-bulk-whois-data-perl-cant-locate-bulkwhois-schema-pm-in-inc", "title": "Arin Bulk whois data perl Can&#39;t locate BulkWhois/Schema.pm in @INC", "body": "<p>I have tried this on two operating systems (first on Fedora then on Ubuntu(recommended)) and I am still confused so I am reaching out to the community. </p>\n\n<p>I have access to ARIN's bulk whois data and want to parse the xml file and throw it into a database.  I came across a Perl script that does exactly this in a github repo <a href=\"https://github.com/giovino/Arin-XML-Data-to-MySQL\" rel=\"nofollow noreferrer\">https://github.com/giovino/Arin-XML-Data-to-MySQL</a>.  This is done on Ubuntu and stored in a mysql database. </p>\n\n<p>I followed all of the steps, 1.) Download the project, 2.) Untar, 3.) Install libraries, 4.) Install perl modules, 5.) Install mysql, start the mysql-server, and create the \"BulkWhois\" database as suggested.</p>\n\n<p>When I run the command:</p>\n\n<pre><code>ubuntu@ubuntu:~$ ./McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/bulkwhois2database.pl --file ~/arin_db.xml --dbms mysql --database BulkWhois --host localhost --port 3306\n</code></pre>\n\n<p>I get this error message:</p>\n\n<pre><code>Can't locate BulkWhois/Schema.pm in @INC (you may need to install the BulkWhois::Schema module) (@INC contains: /etc/perl /usr/local/lib/perl/5.18.2 /usr/local/share/perl/5.18.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.18 /usr/share/perl/5.18 /usr/local/lib/site_perl .) at ./McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/bulkwhois2database.pl line 12.BEGIN failed--compilation aborted at ./McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/bulkwhois2database.pl line 12.\n</code></pre>\n\n<p>Line 12 in bulkwhois2database.pl:</p>\n\n<pre><code>use BulkWhois::Schema;\n</code></pre>\n\n<p>The error says <code>Can't locate BulkWhois/Schema.pm in @INC</code>. I know that in the directory above the one that <code>bulkwhois2database.pl</code> is in there is <code>Schema.pm</code></p>\n\n<pre><code>ubuntu@ubuntu:~/McKizzle-Arin-XML-Data-to-MySQL-dc77a54/src/BulkWhois$ ls\nSchema  Schema.pm\n</code></pre>\n\n<p>Do I need to move that somewhere?  Maybe there is another issue?</p>\n"}, {"tags": ["perl", "nginx", "unix-timestamp"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 4, "last_activity_date": 1530108974, "creation_date": 1530108974, "answer_id": 51065123, "question_id": 51064806, "link": "https://stackoverflow.com/questions/51064806/get-unix-timestamp-in-milliseconds-with-perl/51065123#51065123", "title": "Get unix timestamp in milliseconds with perl", "body": "<p>It pays off to <a href=\"http://p3rl.org/time\" rel=\"nofollow noreferrer\">read the documentation</a>.</p>\n\n<p><a href=\"http://p3rl.org/Time::HiRes\" rel=\"nofollow noreferrer\">Time::HiRes</a></p>\n"}, {"comments": [{"owner": {"reputation": 8193, "user_id": 418150, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e6ea6eda1ac602bde5b282216ae331f?s=128&d=identicon&r=PG", "display_name": "Lee Goddard", "link": "https://stackoverflow.com/users/418150/lee-goddard"}, "edited": false, "score": 1, "creation_date": 1601367941, "post_id": 51083507, "comment_id": 113378528, "body": "Points for not being rude."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 6, "last_activity_date": 1616749779, "last_edit_date": 1616749779, "creation_date": 1530190545, "answer_id": 51083507, "question_id": 51064806, "link": "https://stackoverflow.com/questions/51064806/get-unix-timestamp-in-milliseconds-with-perl/51083507#51083507", "title": "Get unix timestamp in milliseconds with perl", "body": "<p>You could make your own <code>time</code> which return a floating point number like this:</p>\n<pre><code>use Time::HiRes;\nsub time_fp { sprintf&quot;%d.%06d&quot;,Time::HiRes::gettimeofday }\n</code></pre>\n<p>Or just override the core <code>time</code> like this:</p>\n<pre><code>use Time::HiRes qw(time);\nprint time(), &quot;\\n&quot;;             # 1530190722.02601 for example\n</code></pre>\n<p>A problem though with the latter is that it's not room for 6 decimals (if you want microseconds instead of milliseconds) after that 10 digit number in a standard floating point number (might depend on Perl version and compile settings). Run <code>perl -le 'print 1530190907.849523'</code> to see what I mean. The last decimal 3 is lost.</p>\n"}], "owner": {"reputation": 3598, "user_id": 1808384, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/df5b5b74941a9f9e9b53ff8e78719f93?s=128&d=identicon&r=PG", "display_name": "Steve Robinson", "link": "https://stackoverflow.com/users/1808384/steve-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2044, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1616749779, "creation_date": 1530108067, "question_id": 51064806, "link": "https://stackoverflow.com/questions/51064806/get-unix-timestamp-in-milliseconds-with-perl", "title": "Get unix timestamp in milliseconds with perl", "body": "<p>I understand we can use the <code>time()</code> function to get the <code>seconds</code> elapsed since the epoch. How do I get the <code>milliseconds</code> though?</p>\n\n<p>I'm doing an interop with a JavaScript based system where we deal with <code>milliseconds</code>.</p>\n\n<p>Thanks! Btw, I'm gonna be evaluating this script in the context of nginx.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "edited": false, "score": 0, "creation_date": 1530108052, "post_id": 51064530, "comment_id": 89119436, "body": "Thanks, your first solutions works properly but unfortunately I can not go for it as it impacts others changes also, 2nd and 3rd solution doesn&#39;t work. Really appreciate your effort, Can you please help in getting the solution from 2nd or 3rd method ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "edited": false, "score": 0, "creation_date": 1530109032, "post_id": 51064530, "comment_id": 89120115, "body": "Don&#39;t tell me &quot;doesn&#39;t work&quot;. I test things before I post them. Your entire original program, with that one line changed, does work (prints <code>regex_ok = 1</code>)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 2, "last_activity_date": 1530107380, "creation_date": 1530107380, "answer_id": 51064530, "question_id": 51064060, "link": "https://stackoverflow.com/questions/51064060/why-below-code-is-not-working-as-expected/51064530#51064530", "title": "Why below code is not working as expected?", "body": "<p>Do you intend for <code>$tempStr</code> to be interpreted as a regular expression? If so, then you should know that the <code>?</code> is a regular expression operator and will not literally match a <code>?</code> in the target string.</p>\n\n<p>Also, it has a space after <code>Ma</code> but your sample file has <code>Maik</code> so that part won't match.</p>\n\n<p>These changes will produce a different result:</p>\n\n<pre><code>my $tempStr='=?UTF-8?B?U2Now4PCtm5l?=\\, Ma'; # remove the extra space\n\ngrep (/\\Q$rx/i, @msg_arr); # Add \\Q to match the literal string $tempStr in regexp\n</code></pre>\n\n<p>Or you could make <code>$tempStr</code> a real regexp from the start:</p>\n\n<pre><code>my $tempStr=qr/=\\?UTF-8\\?B\\?U2Now4PCtm5l\\?=\\\\, Ma/;\n</code></pre>\n\n<p>Or you could leave it as a string but put it in regexp syntax (needs an extra doubling of the double backslash, very ugly):</p>\n\n<pre><code>my $tempStr='=\\?UTF-8\\?B\\?U2Now4PCtm5l\\?=\\\\\\\\, Ma';\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9910028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1vx8OZxEE68/AAAAAAAAAAI/AAAAAAAAAAA/hLuEHyOshlI/photo.jpg?sz=128", "display_name": "chirag", "link": "https://stackoverflow.com/users/9910028/chirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530107380, "creation_date": 1530106099, "question_id": 51064060, "link": "https://stackoverflow.com/questions/51064060/why-below-code-is-not-working-as-expected", "title": "Why below code is not working as expected?", "body": "<p>I have below code to match particular keyword from file, Please note that particular keyword is present in that file. (Verified)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Getopt::Long;\n\nmy $fname=\"sample.txt\";\nmy @o_msg_rx;\n\nmy $tempStr='=?UTF-8?B?U2Now4PCtm5l?=\\, Ma ';\n\npush @o_msg_rx, $tempStr;\n\nforeach my $rx_temp (@o_msg_rx) {\n        print \"rx_temp = $rx_temp\\n\";\n}\n\nmy @msg_arr;\nopen MM, '&lt;', $fname;\nchomp(@msg_arr = (&lt;MM&gt;));\nclose MM;\n\nmy (%o_msg_rx, %msg_anti_rx);\nforeach my $rx (@o_msg_rx){\n        ($rx =~ s/^!// ? $msg_anti_rx{$rx} : $o_msg_rx{$rx}) = 0 if $rx;\n        print \"rx = \\t$rx\\n\";\n        print \"o_msg_rx_rx = \\t$o_msg_rx{$rx}\\n\";\n}\nif(@msg_arr) {\n        foreach my $rx (keys %o_msg_rx) {\n                $o_msg_rx{$rx} = 1 if grep (/$rx/i, @msg_arr);\n        }\n}\n\nmy $regex_ok = (! scalar grep (! $o_msg_rx{$_}, keys %o_msg_rx));\n\nprint \"regex_ok = $regex_ok\\n\";\n</code></pre>\n\n<p>I am attaching few lines from the file for clarification.</p>\n\n<pre><code># Step: 23    14:48:52\n#  \n# var: expect-count='1'\n# var: msg-rx=\"\"=?UTF-8?B?U2Now4PCtm5l?=\\, Maik \"\"\n# etc etc etc\n</code></pre>\n"}, {"tags": ["xml", "excel", "perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1530106364, "post_id": 51063897, "comment_id": 89118208, "body": "<a href=\"https://www.ecma-international.org/publications/standards/Ecma-376.htm\" rel=\"nofollow noreferrer\">ECMA-376</a> Part 1, page 3737, &#167;22.2.2.8"}, {"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530109873, "post_id": 51063897, "comment_id": 89120689, "body": "OK, if i&#39;m reading your referenced section correctly (I think it&#39;s page 3727 where &#167;22.2.2.8 resides) then there is no constraint on the ordering."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530119972, "post_id": 51063897, "comment_id": 89126389, "body": "Please avoid using HTML markup in Stack Overflow questions where possible. We use <a href=\"https://stackoverflow.com/editing-help\"><i>Markdown</i></a> for formatting here."}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530119857, "creation_date": 1530105609, "last_edit_date": 1530119857, "question_id": 51063897, "link": "https://stackoverflow.com/questions/51063897/scanning-reading-internal-excel-xml-file-app-xml-with-perl", "title": "Scanning/Reading internal Excel xml file app.xml with perl", "body": "<p>I am reading the contents of an Excel file (extension .xlsx) which is a collection of XML files contained within a zip file.</p>\n\n<p>I am trying to read some of these internal XML files with Perl. A basic <code>app.xml</code> file that I'm trying to read is shown below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\"&gt;\n  &lt;Application&gt;Microsoft Excel&lt;/Application&gt;\n  &lt;DocSecurity&gt;0&lt;/DocSecurity&gt;\n  &lt;ScaleCrop&gt;false&lt;/ScaleCrop&gt;\n  &lt;HeadingPairs&gt;\n    &lt;vt:vector size=\"4\" baseType=\"variant\"&gt;\n      &lt;vt:variant&gt;\n        &lt;vt:lpstr&gt;Worksheets&lt;/vt:lpstr&gt;\n      &lt;/vt:variant&gt;\n      &lt;vt:variant&gt;\n        &lt;vt:i4&gt;4&lt;/vt:i4&gt;\n      &lt;/vt:variant&gt;\n      &lt;vt:variant&gt;\n        &lt;vt:lpstr&gt;Named Ranges&lt;/vt:lpstr&gt;\n      &lt;/vt:variant&gt;\n      &lt;vt:variant&gt;\n        &lt;vt:i4&gt;2&lt;/vt:i4&gt;\n      &lt;/vt:variant&gt;\n    &lt;/vt:vector&gt;\n  &lt;/HeadingPairs&gt;\n  &lt;TitlesOfParts&gt;\n    &lt;vt:vector size=\"6\" baseType=\"lpstr\"&gt;\n      &lt;vt:lpstr&gt;Sheet1&lt;/vt:lpstr&gt;\n      &lt;vt:lpstr&gt;Sheet2&lt;/vt:lpstr&gt;\n      &lt;vt:lpstr&gt;Sheet3&lt;/vt:lpstr&gt;\n      &lt;vt:lpstr&gt;Sheet4&lt;/vt:lpstr&gt;\n      &lt;vt:lpstr&gt;Sheet3&lt;/vt:lpstr&gt;\n      &lt;vt:lpstr&gt;Test1&lt;/vt:lpstr&gt;\n    &lt;/vt:vector&gt;\n  &lt;/TitlesOfParts&gt;\n  &lt;Company/&gt;\n  &lt;LinksUpToDate&gt;false&lt;/LinksUpToDate&gt;\n  &lt;SharedDoc&gt;false&lt;/SharedDoc&gt;\n  &lt;HyperlinksChanged&gt;false&lt;/HyperlinksChanged&gt;\n  &lt;AppVersion&gt;16.0300&lt;/AppVersion&gt;\n&lt;/Properties&gt;\n</code></pre>\n\n<p>The section <code>&lt;HeadingPairs&gt;</code> contains two parts</p>\n\n<ul>\n<li>All non-hidden Worksheets within the Excel file</li>\n<li>All the Named Ranges</li>\n</ul>\n\n<p>I need to change some of the sheet name values and need to know whether\nthe <code>Worksheets</code> subsection of the <code>HeadingPairs</code> element will <em>always</em> be first in an arbitrary Excel file.</p>\n\n<p>If it is not always first then I have a problem. I cannot scan for it in general as I deal with Excel files in multiple languages and for each language the word <code>Worksheets</code> is translated.</p>\n\n<p>I have looked for documentation of structure or schemas for the <code>app.xml</code> file but have not found anything that helps.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1530103142, "post_id": 51063009, "comment_id": 89115808, "body": "<code>^</code> matches the start of the string."}, {"owner": {"reputation": 15, "user_id": 8709403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec678a33202bce514e35fb12a333e9c?s=128&d=identicon&r=PG&f=1", "display_name": "jen ", "link": "https://stackoverflow.com/users/8709403/jen"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1530103430, "post_id": 51063009, "comment_id": 89116008, "body": "That&#39;s true, but inside brackets e.g. [^abc] should match any string not containing abc. I&#39;m finding that this doesn&#39;t work if \\Q \\E is introduced."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1530103492, "post_id": 51063009, "comment_id": 89116043, "body": "<code>[^abc]</code> matches any <i>char</i> not equal to <code>a</code>, <code>b</code>and <code>c</code>. <code>^</code> is not inside <code>[...]</code> in your pattern, it is a start of string anchor."}, {"owner": {"reputation": 15, "user_id": 8709403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec678a33202bce514e35fb12a333e9c?s=128&d=identicon&r=PG&f=1", "display_name": "jen ", "link": "https://stackoverflow.com/users/8709403/jen"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1530103595, "post_id": 51063009, "comment_id": 89116122, "body": "Yes, but I also stated that I tried it inside the brackets, and it still returned 0 matches. I&#39;ll edit my question to make it clearer."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1530103618, "post_id": 51063009, "comment_id": 89116135, "body": "Ok, your input string contains no <code>^</code> chars."}], "owner": {"reputation": 15, "user_id": 8709403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec678a33202bce514e35fb12a333e9c?s=128&d=identicon&r=PG&f=1", "display_name": "jen ", "link": "https://stackoverflow.com/users/8709403/jen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1530103338, "answer_count": 0, "score": 0, "last_activity_date": 1530103939, "creation_date": 1530103078, "last_edit_date": 1530103939, "question_id": 51063009, "link": "https://stackoverflow.com/questions/51063009/perl-regex-combining-with-q-e", "closed_reason": "Duplicate", "title": "Perl regex: combining ^ with \\Q \\E", "body": "<p>I'm finding that when I  combine <code>^</code> with <code>\\Q \\E</code> in Perl regex, I no longer get matches that I should be getting:</p>\n\n<pre><code>$names = \"20170101--NAME1-NAME2\";\n@list = ( '20170101--NAME1-NAME2-bt123456789.xml', \n          '20170101--NAME1-NAME2-bt234567890.xml');\n@numbers = ( '123456789', '234567890' );\n\nfor my $filename (@list) {\n    if ($filename =~ /\\Q$names\\E-bt[^\\Q$numbers[0]\\E]\\.xml/) {\n        print \"$filename\\n\";\n    }\n}\n</code></pre>\n\n<p>This gives 0 matches, but should match <code>'20170101--NAME1-NAME2-bt234567890.xml'</code>. If I change the regex in the if statement to:</p>\n\n<pre><code>/\\Q$names\\E-bt(\\Q$numbers[0]\\E)\\.xml/\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>'20170101--NAME1-NAME2-bt123456789.xml'\n</code></pre>\n\n<p>I know it's not matching the same thing as my original regex, just proving that the regex works without the <code>^</code>. I also tried the following just in case: </p>\n\n<pre><code>^[\\Q$numbers[0]\\E] # 0 matches\n(^\\Q$numbers[0]\\E) # 0 matches\n</code></pre>\n"}, {"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530100042, "post_id": 51061864, "comment_id": 89113705, "body": "You seem to have forgotten to paste your code."}, {"owner": {"reputation": 301, "user_id": 2333889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3178a7c755b5fe23413f0abbf4758376?s=128&d=identicon&r=PG", "display_name": "zuzzy", "link": "https://stackoverflow.com/users/2333889/zuzzy"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530103263, "post_id": 51061864, "comment_id": 89115894, "body": "@daxim as per the text I&#39;m not pasting code as its a horrendously complicated mess and I want to start from scratch"}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 2333889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3178a7c755b5fe23413f0abbf4758376?s=128&d=identicon&r=PG", "display_name": "zuzzy", "link": "https://stackoverflow.com/users/2333889/zuzzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1530111834, "creation_date": 1530111834, "answer_id": 51066074, "question_id": 51061864, "link": "https://stackoverflow.com/questions/51061864/sending-spoofed-syslog-messages-in-perl/51066074#51066074", "title": "Sending spoofed syslog messages in Perl", "body": "<p>Actually I just had a breakthrough, I have linked the sources in the code but I found a test harness that is pretty basic and some UDP checksum code that with a bit of playing worked together and wireshark confirms its all correct</p>\n\n<p>Posted in case someone else needs it as its taken me a good couple of days to get to this</p>\n\n<pre><code>#!/usr/bin/perl\nuse Socket;\nuse List::Util qw(sum);\n\n\nsub udp_checksum {\n    # thanks to ikegami in post https://stackoverflow.com/questions/46181281/udp-checksum-function-in-perl\n    my $packed_src_addr = shift;  # As 4-char string, e.g. as returned by inet_aton.\n     my $packed_dst_addr = shift;  # As 4-char string, e.g. as returned by inet_aton.\n    my $udp_packet      = shift;  # UDP header and data as a string.\n\n    my $sum = sum(\n    IPPROTO_UDP,\n    length($udp_packet),\n    map({ unpack('n*', $_) }\n        $packed_src_addr,\n        $packed_dst_addr,\n        $udp_packet.\"\\0\",  # Extra byte ignored if length($udp_packet) is even.\n        ),\n    );\n\n    while (my $hi = $sum &gt;&gt; 16) {\n        $sum = ($sum &amp; 0xFFFF) + $hi;\n    }\n\n    return ~$sum &amp; 0xFFFF;\n}\n\n#this was found and adapted from http://rhosted.blogspot.com/2009/08/creating-udp-packetip-spoofing-through.html\n\n$src_host = $ARGV[0];\n$dst_host = $ARGV[1];\n$src_port = 33333;\n$dest_port = 514;\n$cksum = 0; #initialise, we will sort this later\n\n#$udp_len is the udp packet length in the udp header. Its just 8 plus the length of the data\n#for this test harness we will set the data here too\n$data = \"&lt;132&gt; %FWSM-3-106010: Deny inbound tcp src outside:215.251.218.222/11839 dst inside:192.168.1.1/369\";\n$udp_len = 8+length($data);\n\n$udp_proto = 17; #17 is the code for udp\n\n\n#Prepare the udp packet, needed for the checksum to happen, then get the checksum (horrifically complicated, just google it)\n$udp_packet = pack(\"nnnna*\", $src_port,$dest_port,$udp_len, $cksum, $data);\n$cksum = udp_checksum(inet_aton($src_host),inet_aton($dst_host),$udp_packet);\n\n$zero_cksum = 0; \n\n#test harness checks about host IPs\nmy $dst_host = (gethostbyname($dst_host))[4]; my $src_host = (gethostbyname($src_host))[4];\n\n# Now lets construct the IP packet\nmy $ip_ver = 4;\nmy $ip_len = 5;\nmy $ip_ver_len = $ip_ver . $ip_len;\nmy $ip_tos = 00;\nmy ($ip_tot_len) = $udp_len + 20;\nmy $ip_frag_id = 19245;\nmy $ip_frag_flag = \"010\";\nmy $ip_frag_oset = \"0000000000000\";\nmy $ip_fl_fr = $ip_frag_flag . $ip_frag_oset;\nmy $ip_ttl = 30;\n\n#H2H2nnB16C2na4a4 for the IP Header part#nnnna* for the UDP Header part.\n#To understand these, see the manual of pack function and IP and UDP Header formats\n#IP checksum ($zero_cksum is calculated by the kernel. Dont worry about it.)\n\nmy ($pkt) = pack('H2H2nnB16C2na4a4nnnna*',\n$ip_ver_len,$ip_tos,$ip_tot_len,$ip_frag_id,\n$ip_fl_fr,$ip_ttl,$udp_proto,$zero_cksum,$src_host,\n$dst_host,$src_port,$dest_port,$udp_len, $cksum, $data);\n\n#bit that makes the socket and sends the packet\nsocket(RAW, AF_INET, SOCK_RAW, 255) || die $!; setsockopt(RAW, 0, 1, 1);\nmy ($destination) = pack('Sna4x8', AF_INET, $dest_port, $dst_host);\nsend(RAW,$pkt,0,$destination);\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 2333889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3178a7c755b5fe23413f0abbf4758376?s=128&d=identicon&r=PG", "display_name": "zuzzy", "link": "https://stackoverflow.com/users/2333889/zuzzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1530111834, "creation_date": 1530099555, "question_id": 51061864, "link": "https://stackoverflow.com/questions/51061864/sending-spoofed-syslog-messages-in-perl", "title": "Sending spoofed syslog messages in Perl", "body": "<p><em>TL;DR I am trying to send syslog messages I have already created to a syslog server using spoofed source IPs but I'm making it really hard for myself and could do with a succinct approach</em></p>\n\n<p><em>Most questions about syslog do not include the spoofed IP problem hence I am asking afresh.</em></p>\n\n<p>I am writing (well updating) a script I wrote a long time ago that generates spoofed syslog messages (using UDP).  It currently uses Net::RawIP which is terrible for portability and also the code for the transmission I wrote ages ago has decided to stop working in Perl 5 (I haven't used this for ages and I am refreshing it).  I have been meaning to get rid of Net::RawIP for ages but its the only one I know how to use!</p>\n\n<p>Given I have to fix it and I have a little time at the moment I probably want to move to use the Socket capability, which is what I have been playing with - using code from SO or gists or other places I can find - rather than something like IO::Socket as I need the spoofed IPs permission given a low level ability to write to sockets.</p>\n\n<p>However, I have tied myself in knots with this, what I have right now forms the packets from scratch and then creates a socket and sends it, but in the processes wraps a superflous IPv4 header (I can see using wireshark) and without starting afresh I think its stuck like that as it has a fundamental flaw, hence I'm not sharing old code.</p>\n\n<p>Basically, I can keep playing with the overly complicated code I have or ask for help simplify it, as I am beyond my knowledge of sockets and many hours of googling haven't helped much.  What I keep finding is code that will work but it not compliant in some way - probably not an issue for what they are usually for which is for DDOS or syn attacks or whatever.</p>\n\n<p>Key requirements of this are (which every attempt I have done has failed in some form!):</p>\n\n<ul>\n<li>must come from a spoofed source IP and go to a known destination IP\n(hence I'm using UDP) (both of which I have in config variables) so that the syslog server things many different devices generated the logs</li>\n<li>must come from a set port and go to a set port (both of which I have in my\nexisting config variables) </li>\n<li>must contain a message I have already formed which includes all the syslog content (the PRI and the syslog message content) </li>\n<li>must be fully complaint with checksums and packet lengths etc when received </li>\n<li>be as portable as possible (I'll probably embed it in my main script to keep it all in one file I can share  with others).</li>\n</ul>\n\n<p>I just feel there must be a simple and easy way to do this as everything I have is overly flexible and complicated and a nightmare to unwind.</p>\n\n<p>NB This is shared in Sourceforge as \"must syslog\" and so you can see what I used to do but be aware its stopped working so it wont work if you run it currently!  Once I fix this I'll upload a new version.</p>\n\n<p>Cheers, --Chris</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1530094490, "post_id": 51059931, "comment_id": 89110261, "body": "Please include the expected output, and tell us if you&#39;ve tried anything already. You can <a href=\"https://stackoverflow.com/posts/51059931/edit\">edit</a> your question."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530095216, "post_id": 51059931, "comment_id": 89110712, "body": "I Haven&#39;t try to do it, because online i&#39;ve found only sort of key list :( or sort of a single array. Maybe is it not possible to do it in perl? :("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1530095297, "post_id": 51059931, "comment_id": 89110769, "body": "You&#39;re not a software developer, are you? Don&#39;t give up like that. Everything is possible in pretty much any language. In this case, the language doesn&#39;t really have to do with the solution. This is a hard problem. Your data structure is not ideal. If you transpose your data into a different structure, the problem gets a lot simpler."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1530095349, "post_id": 51059931, "comment_id": 89110805, "body": "So your desired output is a CSV file. Maybe your input is CSV as well? That would make things A LOT easier. How did you get your <code>%hash</code>? Think about lines, not columns."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530096942, "post_id": 51059931, "comment_id": 89111857, "body": "Thanks for your spur :). my input file isn&#39;t a csv. I manipulate a log and i push $date, $time and $name into my %hash:    push @{ $hash{&#39;date&#39;} }, $date;             push @{ $hash{&#39;time&#39;} }, $time;            push @{ $hash{&#39;name&#39;} }, $name;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530096989, "post_id": 51059931, "comment_id": 89111890, "body": "But it&#39;s all in one line at the time you read it? Why have you made the decision to use columns?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530097336, "post_id": 51059931, "comment_id": 89112117, "body": "I&#39;ve edited your question to show the data structure the way it actually is from what I gather from your description. You can also get something similar by using <code>use Data::Dumper; print Dumper \\%hash</code>. That should help you see why I am going on about columns and rows. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1530102913, "post_id": 51059931, "comment_id": 89115663, "body": "You&#39;ve made everything much more difficult by separating the columns. Instead, use <code>push @data, { date =&gt; $date, time =&gt; $time, name =&gt; $name }</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530103054, "post_id": 51059931, "comment_id": 89115752, "body": "@Borodin you&#39;re spoiling my teaching moment :D I was working up on that so they&#39;d figure it out themselves ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530103104, "post_id": 51059931, "comment_id": 89115780, "body": "@simbabque: Your moment passed an hour ago!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530103117, "post_id": 51059931, "comment_id": 89115790, "body": "@Borodin I guess you&#39;re right."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530103153, "post_id": 51059931, "comment_id": 89115820, "body": "With the response time of the OP it&#39;s a bit like mail chess."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530103964, "post_id": 51059931, "comment_id": 89116391, "body": "sorry, I&#39;m a bit slow ... :("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530105979, "post_id": 51059931, "comment_id": 89117908, "body": "No worries, this is not a chat. It&#39;s your task that needs solving, not ours. So have you looked over our comments? Please answer my question: <i>why did you decide to use columns, and not lines?</i>"}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530107217, "post_id": 51059931, "comment_id": 89118834, "body": "@simbabque for columns, do you mean hashes ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530107277, "post_id": 51059931, "comment_id": 89118879, "body": "By <i>columns</i> I mean putting each type of information (like <i>name</i> and <i>date</i>) into its own array inside of the hash key. That&#39;s like putting it in columns in an Excel table. Why did you do that? What was your thought process?"}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530109789, "post_id": 51059931, "comment_id": 89120625, "body": "@simbabque I chose this solution because I would like to do another sort order by date in the script. With key reference it will be more smart....(in my opinion)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530116754, "post_id": 51059931, "comment_id": 89124815, "body": "No, on the contrary. Like this the different values are unrelated to each other."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530119835, "post_id": 51059931, "comment_id": 89126321, "body": "@Borodin I might have gotten my moment after all. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530120184, "post_id": 51059931, "comment_id": 89126502, "body": "@simbabque: Hooray!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530118839, "post_id": 51067897, "comment_id": 89125869, "body": "How can i kiss you right now? You&#39;r post it&#39;s so clear &lt;3"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 1, "creation_date": 1530119719, "post_id": 51067897, "comment_id": 89126270, "body": "@Perler no need for that. Happy to help. I tried to focus on the actual, underlying problem rather than the immediate question. Often beginners don&#39;t really know what question to ask. That&#39;s one of the many skills you will develop over time. // You might want to check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to see what to do if there&#39;s an answer that resolves your question. :)"}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530701774, "post_id": 51067897, "comment_id": 89326552, "body": "@simbabque i&#39;ve put your answer as resolution :) . For print my sorted array of keys, what have i to correct?  print &quot;-- Date --|--- Time ---|-- Name --\\n&quot;;\t#HEAD of List for (my $i=0; $i &lt;= ($#events_by_user); $i++) { \tsay join &#39;;&#39;,$events_by_user{&#39;date&#39;}[$i],$events_by_user{&#39;time&#39;}[$i],&zwnj;&#8203;$events_by_user{&#39;nam&zwnj;&#8203;e&#39;}[$i]; }"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 0, "creation_date": 1530706324, "post_id": 51067897, "comment_id": 89329500, "body": "@perler you&#39;ve got it the wrong way around. I&#39;ll update the answer and add that."}, {"owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "edited": false, "score": 1, "creation_date": 1530709991, "post_id": 51067897, "comment_id": 89331845, "body": "@simbabque, thanks i&#39;ve compile the script and it works perfectly &lt;3"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1530706733, "last_edit_date": 1530706733, "creation_date": 1530118299, "answer_id": 51067897, "question_id": 51059931, "link": "https://stackoverflow.com/questions/51059931/how-could-i-sort-this-hash-array/51067897#51067897", "title": "How could I sort this hash array?", "body": "<blockquote>\n  <p>I chose this solution because I would like to do another sort order by date in the script. With key reference it will be more smart...</p>\n</blockquote>\n\n<p>This is the core part of your problem. Your thinking is correct, but you implemented it in the wrong way. That's what has put you into this corner now.</p>\n\n<p>Let's take a look at your data first. You said it's a log file, so it's line-based. I've made this format up.</p>\n\n<pre><code>On 2018/01/12 at 03:00:02 user jerry did stuff.\nOn 2018/03/01 at 01:00:01 user tom did stuff.\nOn 2018/03/20 at 00:24:39 user micky did stuff.\nOn 2018/04/04 at 11:33:33 user agata did stuff.\n</code></pre>\n\n<p>And your expected output is a CSV file. Again, this is line-based.</p>\n\n<blockquote>\n<pre><code>date;time;name\n2018/04/04;11:33:33;agata\n2018/01/12;03:00:02;jerry\n2018/03/20;00:24:39;micky\n2018/03/01;01:00:01;tom\n</code></pre>\n</blockquote>\n\n<p>So it stands to reason that the structure you want the data to be in is still line-based. </p>\n\n<p>When you want to sort this data by any of the columns, you are sorting <strong>rows</strong> based on values in the columns. So you really want to store the rows, in a way that makes it easy to access the values of each individual column for that row. This becomes especially clear once you look at it in a spreadsheet.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ejQby.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ejQby.png\" alt=\"screenshot of libreoffice spreadsheet with the example data\"></a></p>\n\n<p>Each of the columns is one value of a row. So let's do that.</p>\n\n<pre><code>my @events; # or something like that\nwhile (my $row = &lt;$log_fh&gt;) {\n    my ( $date, $time, $name ) = parse_row($row); # we don't care about this implementation\n\n    push @events, {\n        date =&gt; $date,\n        time =&gt; $time,\n        name =&gt; $name,\n    };\n}\n</code></pre>\n\n<p>Now we have this data structure (which I've output with <a href=\"https://p3rl.org/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a>).</p>\n\n<pre><code>[\n    [0] {\n        date   \"2018/01/12\",\n        name   \"jerry\",\n        time   \"03:00:02\"\n    },\n    [1] {\n        date   \"2018/03/01\",\n        name   \"tom\",\n        time   \"01:00:01\"\n    },\n    [2] {\n        date   \"2018/03/20\",\n        name   \"micky\",\n        time   \"00:24:39\"\n    },\n    [3] {\n        date   \"2018/04/04\",\n        name   \"agata\",\n        time   \"11:33:33\"\n    }\n]\n</code></pre>\n\n<p>As you can see, there is one hash reference per line, and that contains a key for the date, one for the time and one for the name.</p>\n\n<p>Now we can sort on any of the keys inside of those structures. <a href=\"https://stackoverflow.com/q/10901084/1331451\">That's easy</a>.</p>\n\n<pre><code>my @events_by_name = sort { $a-&gt;{name} cmp $b-&gt;{name} } @events;\nmy @events_by_date = sort { $a-&gt;{date} cmp $b-&gt;{date} } @events;\nmy @events_by_time = sort { $a-&gt;{time} cmp $b-&gt;{time} } @events;\n</code></pre>\n\n<p>And then you can produce CSV files for each of them.</p>\n\n<pre><code>open my $fh, '&gt;', 'events_by_name.csv' or die $!;\nforeach my $event (@events_by_name) {\n    print $fh join ';', $event-&gt;{name}, $event-&gt;{date}, $event-&gt;{time};\n    print $fh \"\\n\";\n}\nclose $fh;\n</code></pre>\n\n<p>Or you could iterate with the number of events, open several at the same time and only loop once.</p>\n\n<pre><code>open my $fh_name, '&gt;', 'events_by_name.csv' or die $!;\nopen my $fh_date, '&gt;', 'events_by_date.csv' or die $!;\nfor (my $i = 0; $i &lt; @events_by_name; $i++) {\n    print $fh_name join(\n         ';', \n         @events_by_name-&gt;[$i]-&gt;{name}, \n         @events_by_name-&gt;[$i]-&gt;{date}, \n         @events_by_name-&gt;[$i]-&gt;{time},\n    ); \n    print $fh_name \"\\n\";\n\n    print $fh_date join(\n         ';', \n         @events_by_name-&gt;[$i]-&gt;{name}, \n         @events_by_name-&gt;[$i]-&gt;{date}, \n         @events_by_name-&gt;[$i]-&gt;{time},\n    ); \n    print $fh_date \"\\n\";\n}\nclose $fh_name;\nclose $fh_date;\n</code></pre>\n\n<p>You can further shorten this by using another loop.</p>\n\n<pre><code>open my $fh_name, '&gt;', 'events_by_name.csv' or die $!;\nopen my $fh_date, '&gt;', 'events_by_date.csv' or die $!;\nfor (my $i = 0; $i &lt; @events_by_name; $i++) {\n    foreach my $fh ($fh_name, $fh_date) {\n        print $fh join(\n             ';', \n             @events_by_name-&gt;[$i]-&gt;{name}, \n             @events_by_name-&gt;[$i]-&gt;{date}, \n             @events_by_name-&gt;[$i]-&gt;{time},\n        ); \n        print $fh \"\\n\";\n    }\n}\nclose $fh_name;\nclose $fh_date;\n</code></pre>\n\n<p>As you can see, it makes a lot more sense to keep the structure line-based when you are dealing with lines.</p>\n"}], "owner": {"reputation": 43, "user_id": 9999117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5bd95bd057cbc44201cbb5f5d107d32?s=128&d=identicon&r=PG&f=1", "display_name": "Perler", "link": "https://stackoverflow.com/users/9999117/perler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 51067897, "answer_count": 1, "score": 2, "last_activity_date": 1530706733, "creation_date": 1530093797, "last_edit_date": 1530097246, "question_id": 51059931, "link": "https://stackoverflow.com/questions/51059931/how-could-i-sort-this-hash-array", "title": "How could I sort this hash array?", "body": "<p>I would like to sort alphabetically the content of <code>%hash{'name'}</code> maintaining the correlation of the other elements of <code>@{$hash{$keys}}</code>.</p>\n\n<p>How can I do that?</p>\n\n<pre><code>my %hash = (\n    date =&gt; [\n        qw(\n            2018/01/12\n            2018/03/01\n            2018/03/20\n            2018/04/04\n        )\n    ],\n    time =&gt; [\n        qw(\n            03:00:02\n            01:00:01\n            00:24:39\n            11:33:33            \n        )\n    ],\n    name =&gt; [\n        qw(\n            jerry\n            tom\n            micky\n            agata            \n        )\n    ]\n);\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>date;time;name\n2018/04/04;11:33:33;agata\n2018/01/12;03:00:02;jerry\n2018/03/20;00:24:39;micky\n2018/03/01;01:00:01;tom\n</code></pre>\n\n<p>I haven't tried anything yet, because I don't know where to start.</p>\n"}, {"tags": ["regex", "perl", "if-statement"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 4, "creation_date": 1530093908, "post_id": 51059801, "comment_id": 89109843, "body": "<code>use warnings;</code> would be helpful."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530105272, "post_id": 51059801, "comment_id": 89117370, "body": "<a href=\"https://stackoverflow.com/q/6350466#comment7437792_6351257\">Don&#39;t parse <code>df</code> output.</a> It&#39;s not generally machine-readable. Use a module wrapping the statvfs system call instead, e.g. <a href=\"http://p3rl.org/Filesys::DfPortable\" rel=\"nofollow noreferrer\">Filesys::DfPortable</a>."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1530093911, "creation_date": 1530093911, "answer_id": 51059978, "question_id": 51059801, "link": "https://stackoverflow.com/questions/51059801/perl-multiple-conditions-in-if/51059978#51059978", "title": "Perl multiple conditions in IF", "body": "<p>You need to use <code>eq</code> for comparing strings</p>\n\n<pre><code>if ( ($2 eq \"CC\" &amp;&amp; $1 &gt;= 80) || ($2 eq \"usr\" &amp;&amp; $1 &gt;= 90) ) {\n</code></pre>\n"}], "owner": {"reputation": 280, "user_id": 4301184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b25293793923d386acde700a1361f51b?s=128&d=identicon&r=PG&f=1", "display_name": "searcot jabali", "link": "https://stackoverflow.com/users/4301184/searcot-jabali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2971, "favorite_count": 0, "closed_date": 1530093867, "accepted_answer_id": 51059978, "answer_count": 1, "score": 0, "last_activity_date": 1530093911, "creation_date": 1530093468, "question_id": 51059801, "link": "https://stackoverflow.com/questions/51059801/perl-multiple-conditions-in-if", "closed_reason": "Duplicate", "title": "Perl multiple conditions in IF", "body": "<p>This is my code</p>\n\n<pre><code>my @usage = `df -hT | grep -e CC -e usr`;\nforeach (@usage) {\n    if ($_ =~ m/([0-9]{0,3})% \\/(.*)/) {\n        print \"$1 - $2\\n\";\n        if ( ($2 == \"CC\" &amp;&amp; $1 &gt;= 80) || ($2 == \"usr\" &amp;&amp; $1 &gt;= 90) ) {\n            print \"/$2 parition is at $1% utilization\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>It is a simple script to check if a partitions usage.\nThe problem is in the IF condition.</p>\n\n<pre><code>if ( ($2 == \"CC\" &amp;&amp; $1 &gt;= 80) || ($2 == \"usr\" &amp;&amp; $1 &gt;= 90)\n</code></pre>\n\n<p>Should translate to IF (partition is CC and if use is more than 80% ) OR (IF partition is usr and its use is more than 90%) then output.</p>\n\n<p>The my CC partition is at 83% and my usr is at 85%.\nTherefore I should only see </p>\n\n<p><strong>/CC partition is at 83%</strong></p>\n\n<p>But I get </p>\n\n<pre><code>83 - usr\n/usr parition is at 85% utilization\n83 - CC\n/CC parition is at 83% utilization\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530080291, "post_id": 51055224, "comment_id": 89102083, "body": "There is <a href=\"http://search.cpan.org/perldoc?if\" rel=\"nofollow noreferrer\">if</a>, but conditionally loading module that export makes no sense. Conditionally loading modules that export vars (and trying to use those vars) is right out. (Exporting vars is bad enough in normal circumstances.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530080434, "post_id": 51055224, "comment_id": 89102151, "body": "@ikegami I thought <code>if</code> went at compile time ...?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530080474, "post_id": 51055224, "comment_id": 89102169, "body": "@zdim, The &quot;if&quot; is a link to the &quot;if&quot; module (not the <code>if</code> statement)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530080654, "post_id": 51055224, "comment_id": 89102255, "body": "@zdim, Oh, sorry, thought you were referring to the <code>if</code> statement which executes at runtime. Yes, <code>use if ...</code> is exectued at compile-time. That&#39;s when modules should be loaded, so that&#39;s why it&#39;s a good way to do it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530080891, "post_id": 51055224, "comment_id": 89102359, "body": "@ikegami Ah, OK.  (How else would <code>use</code> be conditioned?)  I took their condition to imply runtime (assuming more complex command line processing), even though as it stands it doesn&#39;t."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1605837635, "post_id": 51055224, "comment_id": 114781732, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/3945583/how-can-i-conditionally-use-a-module-in-perl\">How can I conditionally use a module in Perl?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 8, "last_activity_date": 1530265584, "last_edit_date": 1530265584, "creation_date": 1530079987, "answer_id": 51055697, "question_id": 51055224, "link": "https://stackoverflow.com/questions/51055224/how-to-include-conditionally-perl-modules-and-libraries-as-well-as-global-varia/51055697#51055697", "title": "How to include conditionally Perl modules and libraries, as well as Global variables from them", "body": "<p>I expect that the example <code>$ARGV[0] eq '...'</code> really stands for more involved processing of the command line arguments, including assignments to variables and such. Then that happens at runtime and you cannot condition <code>use</code> that way, as it runs at compile time.</p>\n\n<p>The example as stated works at compile time though, in which case use the <a href=\"https://metacpan.org/pod/if\" rel=\"nofollow noreferrer\">if pragma</a> </p>\n\n<pre><code>use if @ARGV &amp;&amp; ($ARGV[0] eq 'no_libs'), Module::One, qw(...);\n</code></pre>\n\n<p>which has the same effect as <code>use Module::One qw(...)</code> if the condition is true.</p>\n\n<p>If the decision indeed happens at runtime then you need to use <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a> instead</p>\n\n<pre><code>if ($no_libs) {\n    require Module::One;\n    Module::One-&gt;import( qw(f1 f2) );  # as in: use Module::One qw(f1 f2);\n    ...\n}\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> comes down to <code>require</code> since <code>use Module LIST;</code> means exactly</p>\n\n<blockquote>\n  <p><code>BEGIN { require Module; Module-&gt;import( LIST ); }</code></p>\n</blockquote>\n\n<p>so you are doing practically the same but at runtime.</p>\n\n<p>However, global variables can't be imported this way since <code>strict</code> won't have their declarations in time.  Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for the comment. You can use them directly as <code>$Module::One::Var</code>, for <code>our $Var</code> in <code>Module::One</code>, but please see the following comments.</p>\n\n<p>In general, exporting global variables from modules is not a good practice as it erodes the overall design, by entangling supposedly distinct components and bypassing their interfaces. It may also lead to subtle and hard to detect problems.</p>\n\n<p>Having globals <em>conditionally</em> seems strange: how do you use them if they may not exist? This can be a confusing design, which can probably be changed. </p>\n"}], "owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 51055697, "answer_count": 1, "score": 3, "last_activity_date": 1530265584, "creation_date": 1530077995, "last_edit_date": 1530078344, "question_id": 51055224, "link": "https://stackoverflow.com/questions/51055224/how-to-include-conditionally-perl-modules-and-libraries-as-well-as-global-varia", "title": "How to include conditionally Perl modules and libraries, as well as Global variables from them", "body": "<p>I am developing a Perl script. Inside I use various moudules:</p>\n\n<pre><code>use Module::One;\nuse Module::Two;\n...\n</code></pre>\n\n<p>I also use global variables from these modules:</p>\n\n<pre><code>$GLOBAL_1 = 1;\n$GLOBAL_2 = 1;\n...\n</code></pre>\n\n<p>Let's say that the name of the script is</p>\n\n<pre><code>my_script.pl\n</code></pre>\n\n<p>Is it possible to include the above-mentioned modules and globals conditionally when passing to the script an argument called 'no_libs', but whenever not passing this argument - not include or use them? \nSomething like that:</p>\n\n<pre><code>perl my_cript.pl no_libs\n\nif ( $ARGV[0] eq 'no_libs' ) {\n    use Module::One;\n    use Module::Two;\n    ...\n\n    $GLOBAL_1 = 1;\n    $GLOBAL_2 = 1;\n    ...\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 230, "user_id": 111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8467c521944132d62de24bd28a2aaf22?s=128&d=identicon&r=PG", "display_name": "David Buttrick", "link": "https://stackoverflow.com/users/111145/david-buttrick"}, "edited": false, "score": 0, "creation_date": 1530073537, "post_id": 51054462, "comment_id": 89099791, "body": "You have an array of hashes in which one of the keys has an array of hashes as the value. Can you be more specific about which you want to sort? Could you provide an example of the expected output from the sort?"}, {"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "reply_to_user": {"reputation": 230, "user_id": 111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8467c521944132d62de24bd28a2aaf22?s=128&d=identicon&r=PG", "display_name": "David Buttrick", "link": "https://stackoverflow.com/users/111145/david-buttrick"}, "edited": false, "score": 0, "creation_date": 1530074431, "post_id": 51054462, "comment_id": 89099989, "body": "I need the last hash to be sorted by response date"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530075421, "post_id": 51054462, "comment_id": 89100252, "body": "What do you mean by the &quot;<i>last hash</i>&quot;?  Hashes are inherently unordered. You can print it sorted, or rearrange (sort) the hashrefs in an array, for example (what you seem to show). Can you edit the &quot;sorted&quot; example to show the whole data structure as you imagine it sorted? And please fix the indentation?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530075711, "post_id": 51054462, "comment_id": 89100328, "body": "The second example does not have the same data as the first.  Is that an example of how you want it sorted, or yet another data set to sort?  Please edit to clarify what you are trying to do."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1530093973, "post_id": 51054462, "comment_id": 89109894, "body": "This looks like <code>XML::Simple</code> output. Is it? There&#39;s reasons to use a different approach, which makes a lot of your problems a moot point."}, {"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 0, "creation_date": 1530149598, "post_id": 51054462, "comment_id": 89136537, "body": "yes its XML Simple output"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "edited": false, "score": 0, "creation_date": 1530252490, "post_id": 51054931, "comment_id": 89178366, "body": "my var value is var1 = [{ &#39;tender_data&#39; =&gt; [ { &#39;client_num&#39; =&gt; &#39;20110317-05&#39;, &#39;response_date&#39; =&gt; &#39;2018-05-14&#39;, }, { &#39;client_num&#39; =&gt; &#39;20140625-02&#39;, &#39;response_date&#39; =&gt; &#39;2018-05-24&#39;, }, { &#39;client_num&#39; =&gt; &#39;20180502-02&#39;, &#39;response_date&#39; =&gt; &#39;2018-05-18&#39;, }, ], &#39;state&#39; =&gt; &#39;QLD&#39; },] I tried but not getting the value ,shows $var1 = undef"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530444551, "post_id": 51054931, "comment_id": 89230823, "body": "It&#39;s much more readable to use the arrow operator <code>sort {$a-&gt;{response_date} cmp $b-&gt;{response_date}} @$data</code> or at least additional braces <code>sort {${$a}{response_date} cmp ${$b}{response_date}} @$data</code>"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1530076881, "last_edit_date": 1530076881, "creation_date": 1530076334, "answer_id": 51054931, "question_id": 51054462, "link": "https://stackoverflow.com/questions/51054462/sorting-an-array-ref-by-its-value-in-perl/51054931#51054931", "title": "Sorting an array ref by its value in Perl", "body": "<p>Given an array of hashes:</p>\n\n<pre><code>$data = [\n  {'response_date' =&gt; '2018-05-18', 'client_name' =&gt; 'Beaudesert Race Club Inc'},\n  {'response_date' =&gt; '2018-05-14', 'client_name' =&gt; 'Thunderbird Park'},\n  {'response_date' =&gt; '2018-05-24', 'client_name' =&gt; 'Geewood Pty Ltd'},\n];\n</code></pre>\n\n<p>You can sort it by the <code>'response_date'</code> key with:</p>\n\n<pre><code>sort {$$a{response_date} cmp $$b{response_date}} @$data\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code># perl -MData::Dumper\n$data = [\n  {'response_date' =&gt; '2018-05-18', 'client_name' =&gt; 'Beaudesert Race Club Inc'},\n  {'response_date' =&gt; '2018-05-14', 'client_name' =&gt; 'Thunderbird Park'},\n  {'response_date' =&gt; '2018-05-24', 'client_name' =&gt; 'Geewood Pty Ltd'},\n];\nprint Dumper([sort {$$a{response_date} cmp $$b{response_date}} @$data]);\n$VAR1 = [\n          {\n            'client_name' =&gt; 'Thunderbird Park',\n            'response_date' =&gt; '2018-05-14'\n          },\n          {\n            'response_date' =&gt; '2018-05-18',\n            'client_name' =&gt; 'Beaudesert Race Club Inc'\n          },\n          {\n            'client_name' =&gt; 'Geewood Pty Ltd',\n            'response_date' =&gt; '2018-05-24'\n          }\n        ];\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 2365884, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3cf67b8cf7af05ee0e93a1205a8f8de6?s=128&d=identicon&r=PG", "display_name": "Jitesh", "link": "https://stackoverflow.com/users/2365884/jitesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530085990, "creation_date": 1530072960, "last_edit_date": 1530085990, "question_id": 51054462, "link": "https://stackoverflow.com/questions/51054462/sorting-an-array-ref-by-its-value-in-perl", "title": "Sorting an array ref by its value in Perl", "body": "<p>I am extracting an XML and passing the value as reference.\nThe data in the reference is </p>\n\n<pre><code>$VAR1 = [ \n    {   \n        'tender_data' =&gt; [\n            {\n                'total_mwh' =&gt; '191.4600',\n                'retailer_code' =&gt; 'Origin',\n                'client_num' =&gt; '20180516-03',\n                'response_date' =&gt; '2018-05-22',\n                'nmi' =&gt; 'NGGG000692',\n                'month_name' =&gt; 'May',\n                'ext_date' =&gt; '2018-5',\n                'client_name' =&gt; 'Alpha Hotel Canberra',\n                'result' =&gt; 'lost'\n            }\n        ],\n        'state' =&gt; 'ACT'\n    },  \n    {   \n        'tender_data' =&gt; [\n            {\n                'total_mwh' =&gt; '445.6410',\n                'retailer_code' =&gt; 'ERM Power',\n                'client_num' =&gt; '20110317-05',\n                'response_date' =&gt; '2018-05-14',\n                'nmi' =&gt; 'QB00457566',\n                'month_name' =&gt; 'May',\n                'ext_date' =&gt; '2018-5',\n                'client_name' =&gt; 'Thunderbird Park',\n                'result' =&gt; 'lost'\n            },\n            {\n                'total_mwh' =&gt; '910.2670',\n                'retailer_code' =&gt; 'AGL',\n                'client_num' =&gt; '20140625-02',\n                'response_date' =&gt; '2018-05-24',\n                'nmi' =&gt; 'QB09015582',\n                'month_name' =&gt; 'May',\n                'ext_date' =&gt; '2018-5',\n                'client_name' =&gt; 'Geewood Pty Ltd',\n                'result' =&gt; 'undecided'\n            },  \n\n            {   \n                'total_mwh' =&gt; '120.4290',\n                'retailer_code' =&gt; 'AGL',\n                'client_num' =&gt; '20180502-02',\n                'response_date' =&gt; '2018-05-18',\n                'nmi' =&gt; 'QB00493554',\n                'month_name' =&gt; 'May',\n                'ext_date' =&gt; '2018-5',\n                'client_name' =&gt; 'Beaudesert Race Club Inc',\n                'result' =&gt; 'won'\n            },\n        ],\n        'state' =&gt; 'QLD'\n    },\n];\n</code></pre>\n\n<p>Now the issue is that I was trying to sort the hash by response_date, but I was not able to solve it.\nI tried this code</p>\n\n<pre><code>$data = (sort { join('', (split '-', $data-&gt;{$a}-&gt;{response_date})[0,1,2]) cmp join('', (split '-', $data-&gt;{$b}-&gt;{response_date})[0,1,2]) } keys %{$data-&gt;{tender_data}});\n</code></pre>\n\n<p>But it was giving me error- Not a hash ref</p>\n\n<p>So I tried with sorting array ref</p>\n\n<pre><code>$data = sort { join('', (split '-', $a)[0,1,2]) cmp join('', (split '-', $b)[0,1,2]) } @{$data};\n</code></pre>\n\n<p>But I was getting undef value. \nIf I loop it using <code>foreach my $tender(@{$data}){}</code> I was getting the value inside data reference</p>\n\n<p>Can someone please help me to sort the  it using <strong>response_date</strong>\nI need this to be sorted</p>\n\n<pre><code>{\n    'total_mwh' =&gt; '445.6410',\n    'retailer_code' =&gt; 'ERM Power',\n    'client_num' =&gt; '20110317-05',\n    'response_date' =&gt; '2018-05-14',\n    'nmi' =&gt; 'QB00457566',\n    'month_name' =&gt; 'May',\n    'ext_date' =&gt; '2018-5',\n    'client_name' =&gt; 'Thunderbird Park',\n    'result' =&gt; 'lost'\n},\n{\n    'total_mwh' =&gt; '120.4290',\n    'retailer_code' =&gt; 'AGL',\n    'client_num' =&gt; '20180502-02',\n    'response_date' =&gt; '2018-05-18',\n    'nmi' =&gt; 'QB00493554',\n    'month_name' =&gt; 'May',\n    'ext_date' =&gt; '2018-5',\n    'client_name' =&gt; 'Beaudesert Race Club Inc',\n    'result' =&gt; 'won'\n},\n\n{\n    'total_mwh' =&gt; '910.2670',\n    'retailer_code' =&gt; 'AGL',\n    'client_num' =&gt; '20140625-02',\n    'response_date' =&gt; '2018-05-24',\n    'nmi' =&gt; 'QB09015582',\n    'month_name' =&gt; 'May',\n    'ext_date' =&gt; '2018-5',\n    'client_name' =&gt; 'Geewood Pty Ltd',\n    'result' =&gt; 'undecided'\n},\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1530042257, "post_id": 51049873, "comment_id": 89091677, "body": "Different code is needed if there are 0, 1 or 2+ <code>classfieldvalue</code>. Don&#39;t use <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">such a complicated module</a>!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1530042291, "post_id": 51050143, "comment_id": 89091696, "body": "Naming all your variables <code>key</code> makes this code totally unreadable. /// Why do you think there could be more than one <code>classfield</code> and <code>classfieldvalues</code> element? /// Your code fails to handle docs with a single classfield or a single classfieldvalue. The data structure produced by XML::Simple <a href=\"https://stackoverflow.com/a/33273488/589924\">varies greatly</a> based on element counts and such."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1530041278, "creation_date": 1530041278, "answer_id": 51050143, "question_id": 51049873, "link": "https://stackoverflow.com/questions/51049873/perl-xml-print-values-from-hash-structure/51050143#51050143", "title": "Perl - XML print values from hash structure", "body": "<p>The below will print your whole hash. You can modify the code to print whatever you are interested in:</p>\n\n<pre><code>foreach my $key (keys %struct) {\n    print \"$key\\n\";\n    foreach my $key2 (keys %{$struct{$key}}) {\n        print \"-$key2\\n\";\n        foreach my $key3 (keys %{$struct{$key}-&gt;{$key2}}) {\n            print \"--$key3\\n\";\n            foreach my $key4 (keys %{$struct{$key}-&gt;{$key2}-&gt;{$key3}}) {\n                my $ref = ref $struct{$key}-&gt;{$key2}-&gt;{$key3}-&gt;{$key4};\n                if($ref eq '') {\n                    print \"---$key4 = $struct{$key}-&gt;{$key2}-&gt;{$key3}-&gt;{$key4}\\n\";\n                }\n                else {\n                    print \"---$key4\\n\";\n                    foreach my $key5 (keys %{$struct{$key}-&gt;{$key2}-&gt;{$key3}-&gt;{$key4}}) {\n                        print \"----$key5\\n\";\n                        foreach my $key6 (@{$struct{$key}-&gt;{$key2}-&gt;{$key3}-&gt;{$key4}-&gt;{$key5}}) {\n                            foreach my $key7 (keys %{$key6}) {\n                                print \"-----$key7 = $key6-&gt;{$key7}\\n\";\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6386886, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/60ae3e6b6725df8d7948e3f063648863?s=128&d=identicon&r=PG&f=1", "display_name": "LittleMagnolia", "link": "https://stackoverflow.com/users/6386886/littlemagnolia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530048972, "creation_date": 1530039934, "last_edit_date": 1530048972, "question_id": 51049873, "link": "https://stackoverflow.com/questions/51049873/perl-xml-print-values-from-hash-structure", "title": "Perl - XML print values from hash structure", "body": "<p>Code below is part of XML structure which i get from <code>XML::Simple</code>.</p>\n\n<p>I get many <code>classfield</code> (<code>classfield_101</code>, <code>classfield_1023</code>, ... ) and <code>classfield_101</code> is one of them. For <code>classfield_101</code> I expect the program to print <code>'CHECK UNCHECK'</code> to the console.</p>\n\n<pre><code>my (%ClassDetails) = ();\nmy %struct = ( \n    'level1' =&gt; {\n        'classfield' =&gt; {\n            'classfield_101' =&gt; {\n                'classfieldvalues' =&gt; { \n                    'classfieldvalue' =&gt; [ \n                        {'content' =&gt; 'CHECK', 'key' =&gt; '1254789'}, \n                        {'content' =&gt; 'UNCHECK', 'key' =&gt; '1987456'}\n                    ]   \n                },  \n                'classfieldname' =&gt; 'CHECKCLASS',\n                'key' =&gt; 'CHECKDETAILS'\n            },  \n        }   \n    },  \n);\n\nprint Dumper(\\%struct);\n\nfor my $elem (@{$struct{level1}{classfield}{classfield_101}{classfieldvalues}{classfieldvalue}}) {\n    print \"$elem-&gt;{content} \";\n}\n\n\n\n#Output\n#CHECK UNCHECK\n</code></pre>\n\n<p>How to loop over each <code>classfield_id</code> in <code>%$classfield</code> and print values ?</p>\n\n<pre><code>foreach $classfield_id (keys %$classfield) {\n    ## for ex: Looping for classfield_id = classfield_101 from %$classfield\n    if ( $classfield-&gt;{$classfield_id}-&gt;classfieldname eq \"CHECKCLASS\" ) {\n\n       ### Stuck here --- $ClassDetails{checkuncheck} = How to print \n\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "linux", "perl", "rename", "fastq"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 2, "creation_date": 1530031505, "post_id": 51047543, "comment_id": 89086721, "body": "Show us what you tried so far."}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1530118549, "post_id": 51047543, "comment_id": 89125739, "body": "Just to further complement the answers bellow, <a href=\"https://www.biostars.org/p/323148/\" rel=\"nofollow noreferrer\">here</a> are other approaches"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1530403513, "post_id": 51047543, "comment_id": 89224652, "body": "Please avoid <i>&quot;Give me the codez&quot;</i> questions that have been asked and answered so many times you have to make an effort to avoid finding an answer. Also see <a href=\"https://meta.stackoverflow.com/q/261592/608639\">How much research effort is expected of Stack Overflow users?</a>"}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1530548426, "post_id": 51047543, "comment_id": 89264466, "body": "@jww I had no intention to indolently ask this (and any other questions, for that matter). I researched (this forum and other resources) and tried several approaches. We all have limitations and mine (in this case) come from a background and biology and not computer sciences (hence my previous comment, indicating further answers on the Biostars forum). I&#39;m very thankful for the <code>stackoverflow community</code> for all the support (mostly indirect) over the past years"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530042273, "post_id": 51049774, "comment_id": 89091683, "body": "<code>Can&#39;t &quot;continue&quot; outside a when block at - line 3.</code> Also, I assume OP is trying to use the <code>rename</code> program."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530042421, "post_id": 51049774, "comment_id": 89091749, "body": "I meant to type <code>next</code>, not <code>continue</code>. The answer has been corrected. Thanks."}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "edited": false, "score": 0, "creation_date": 1530118293, "post_id": 51049774, "comment_id": 89125600, "body": "Thanks @blhsing! The script works :) Just a few clarifications for future references: this is a perl scrip, to run it call <code>perl script_name</code>"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "edited": false, "score": 1, "creation_date": 1530118361, "post_id": 51049774, "comment_id": 89125634, "body": "@LeonardoNormando No problem. Glad to be of help. A +1 vote would be appreciated. :-)"}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "edited": false, "score": 1, "creation_date": 1530118729, "post_id": 51049774, "comment_id": 89125824, "body": "I wish I could accept both answers.. And, at the moment, I don&#39;t have enough reputation to vote :( I will get back to you later, don&#39;t worry"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1530042390, "last_edit_date": 1530042390, "creation_date": 1530039546, "answer_id": 51049774, "question_id": 51047543, "link": "https://stackoverflow.com/questions/51047543/batch-rename-fastq-gz-files-using-regular-expression/51049774#51049774", "title": "Batch rename *fastq.gz files using regular expression", "body": "<p>The following does the renaming you want in the current directory:</p>\n\n<pre><code>opendir DIR, '.';\nfor (readdir DIR) {\n  /^([^_]+).*(_(?:R1|R2)_)[^_]+(\\.fastq\\.gz)$/ or next;\n  rename $_, \"$1$2$3\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530049471, "post_id": 51050336, "comment_id": 89094587, "body": "<code>rename</code> is not a program, but a built-in perl funciton. See <a href=\"http://perldoc.perl.org/perlport.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlport.html</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530051844, "post_id": 51050336, "comment_id": 89095369, "body": "@blhsing <a href=\"http://manpages.ubuntu.com/manpages/trusty/man1/prename.1.html\" rel=\"nofollow noreferrer\">manpages.ubuntu.com/manpages/trusty/man1/prename.1.html</a>"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1530052663, "post_id": 51050336, "comment_id": 89095589, "body": "Thanks I wasn&#39;t aware of such a command. Given the lack of code I think the OP is indeed referring to the command, not the built-in perl function then."}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "edited": false, "score": 0, "creation_date": 1530117432, "post_id": 51050336, "comment_id": 89125181, "body": "@melpomene is right, I meant the perl implementation of the command <code>rename</code>, as pointed out in the reference above"}, {"owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "edited": false, "score": 0, "creation_date": 1530117545, "post_id": 51050336, "comment_id": 89125237, "body": "Works flawlessly! Just add the -n option to just print the output.  Running: <code>rename -n &#39;s{^([^._]+)_[^.]*(_R[12]_)[^.]*}{$1$2}&#39; *.fastq,gz</code>  Outputs: <code>rename(Rinc_S96_L001_R1_001.fastq.gz, Rinc_R1_.fastq.gz) rename(Rinc_S96_L001_R2_001.fastq.gz, Rinc_R2_.fastq.gz) rename(SR1_S90_L001_R1_001.fastq.gz, SR1_R1_.fastq.gz) rename(SR1_S90_L001_R2_001.fastq.gz, SR1_R2_.fastq.gz)</code>  Thanks @melpomene!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1530042177, "creation_date": 1530042177, "answer_id": 51050336, "question_id": 51047543, "link": "https://stackoverflow.com/questions/51047543/batch-rename-fastq-gz-files-using-regular-expression/51050336#51050336", "title": "Batch rename *fastq.gz files using regular expression", "body": "<pre><code>rename 's{^([^._]+)_[^.]*(_R[12]_)[^.]*}{$1$2}' *\n</code></pre>\n\n<p>The idea is to match (and capture) the first part of the string (1 or more characters that are not <code>.</code> or <code>_</code>), followed by <code>_</code> and 0 or more non-<code>.</code> characters, followed by <code>_R1_</code> or <code>_R2_</code> (we capture this part, too), followed by 0 or more non-<code>.</code> characters yet again.</p>\n\n<p>This should match the first part of the filename (before <code>.</code>) and replace it by the first and second captured substrings, i.e. everything before the first <code>_</code> and the R1/R2 tag.</p>\n"}], "owner": {"reputation": 25, "user_id": 4362703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YWY287Ebd3Y/AAAAAAAAAAI/AAAAAAAAKGw/u5NUz4tkzFM/photo.jpg?sz=128", "display_name": "Leonardo Normando", "link": "https://stackoverflow.com/users/4362703/leonardo-normando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 1, "accepted_answer_id": 51050336, "answer_count": 2, "score": 0, "last_activity_date": 1530042390, "creation_date": 1530030346, "question_id": 51047543, "link": "https://stackoverflow.com/questions/51047543/batch-rename-fastq-gz-files-using-regular-expression", "title": "Batch rename *fastq.gz files using regular expression", "body": "<p>I'm trying to get a regex to work with <code>rename</code>; I've tried the approach of similar answered questions here but couldn't get the results I wanted.</p>\n\n<p>The files are named as such:</p>\n\n<pre><code>SR1_S90_L001_R1_001.fastq.gz \nSR1_S90_L001_R2_001.fastq.gz\nRinc_S96_L001_R1_001.fastq.gz \nRinc_S96_L001_R2_001.fastq.gz\n</code></pre>\n\n<p>And I would like to retain <em>only</em> the information prior to the first underscore and the _R1_ or _R2_ tags, like this:</p>\n\n<pre><code>SR1_R1_.fastq.gz \nSR1_R2_.fastq.gz\nRinc_R1_.fastq.gz \nRinc_R2_.fastq.gz\n</code></pre>\n"}, {"tags": ["php", "perl", "httprequest"], "comments": [{"owner": {"reputation": 21, "user_id": 7421838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284abf0f8bccafb3b5f8f22775f0beb9?s=128&d=identicon&r=PG&f=1", "display_name": "sanguinarium", "link": "https://stackoverflow.com/users/7421838/sanguinarium"}, "reply_to_user": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1530026210, "post_id": 51046265, "comment_id": 89083686, "body": "HTTP status code is 200 if the response started streaming correctly. The problem arises with uncatched runtime errors (memory, timeout) within PHP."}, {"owner": {"reputation": 13259, "user_id": 1207049, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/445e3d8cb8ef7471a15bdeda0b573de6?s=128&d=identicon&r=PG", "display_name": "marekful", "link": "https://stackoverflow.com/users/1207049/marekful"}, "edited": false, "score": 0, "creation_date": 1530026242, "post_id": 51046265, "comment_id": 89083704, "body": "Whether error messages end up in the output of a PHP script can be controlled by ini directives. A fatal error cannot be caught, the script will shut down, but with register_shutdown_function() you can do something before it happens."}, {"owner": {"reputation": 21, "user_id": 7421838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284abf0f8bccafb3b5f8f22775f0beb9?s=128&d=identicon&r=PG&f=1", "display_name": "sanguinarium", "link": "https://stackoverflow.com/users/7421838/sanguinarium"}, "reply_to_user": {"reputation": 13259, "user_id": 1207049, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/445e3d8cb8ef7471a15bdeda0b573de6?s=128&d=identicon&r=PG", "display_name": "marekful", "link": "https://stackoverflow.com/users/1207049/marekful"}, "edited": false, "score": 0, "creation_date": 1530026436, "post_id": 51046265, "comment_id": 89083827, "body": "Correct, if we had a influence on the server / PHP script we&#39;d change that. We are only in control of the client. I thought that was implicitely clear."}, {"owner": {"reputation": 4462, "user_id": 1018580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757fafb944d47f80a2336d097dcef7c5?s=128&d=identicon&r=PG", "display_name": "Trenton Trama", "link": "https://stackoverflow.com/users/1018580/trenton-trama"}, "edited": false, "score": 0, "creation_date": 1530029861, "post_id": 51046265, "comment_id": 89085893, "body": "Could you update your question with the output of <code>$response-&gt;as_string()</code> after removing any private data?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1530031277, "post_id": 51046265, "comment_id": 89086631, "body": "As a debugging help, take a look at <a href=\"https://metacpan.org/pod/LWP::ConsoleLogger::Everywhere\" rel=\"nofollow noreferrer\">metacpan.org/pod/LWP::ConsoleLogger::Everywhere</a>. If you install that and load it anywhere in your code, it&#39;ll dump loads of useful debugging information that you can then <a href=\"https://stackoverflow.com/posts/51046265/edit\">edit</a> into the question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530031359, "post_id": 51046265, "comment_id": 89086663, "body": "Also could it be that the website actually does more things? There could be an AJAX request, and the response of that might be added to the DOM at run time by the browser. LWP wouldn&#39;t do that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530063521, "post_id": 51046265, "comment_id": 89097790, "body": "Re &quot;<i>But when analyzing the call&#39;s $response in perl, the error message is not visible in the output ($response-&gt;content).</i>&quot;, So your first order of business is finding out how to get PHP to provide the error message when the client is LWP as opposed to different browser. Is the error even happening? If it is, why is PHP handling it different when the request comes from LWP?"}, {"owner": {"reputation": 21, "user_id": 7421838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284abf0f8bccafb3b5f8f22775f0beb9?s=128&d=identicon&r=PG&f=1", "display_name": "sanguinarium", "link": "https://stackoverflow.com/users/7421838/sanguinarium"}, "edited": false, "score": 0, "creation_date": 1530086701, "post_id": 51046265, "comment_id": 89105468, "body": "We just built a testcase with a PHP script that overflows the mem on purpose. There is only one output stream (no AJAX etc) and no difference in the output from the server side between connections from browser(s) vs perl and http/s. It could be, that the final error message ends up in &lt;stderr&gt; of the $request which might not be reflected in $response."}], "owner": {"reputation": 21, "user_id": 7421838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284abf0f8bccafb3b5f8f22775f0beb9?s=128&d=identicon&r=PG&f=1", "display_name": "sanguinarium", "link": "https://stackoverflow.com/users/7421838/sanguinarium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530087241, "creation_date": 1530026026, "last_edit_date": 1530087241, "question_id": 51046265, "link": "https://stackoverflow.com/questions/51046265/how-do-you-catch-a-fatal-error-in-php-output-from-a-perl-client", "title": "How do you catch a fatal error in PHP output from a Perl client?", "body": "<p>Given a perl client which is making requests to a webserver using <a href=\"https://metacpan.org/pod/HTTP::Request\" rel=\"nofollow noreferrer\">HTTP::Request</a> as in:</p>\n\n<pre><code>$request    = new HTTP::Request('POST', $someurl);\n$response   = $ua-&gt;request($request);\n</code></pre>\n\n<p>we are trying to catch/trap fatal runtime errors that might be produced by PHP scripts that run out of memory or time. As an example:</p>\n\n<pre><code>Fatal error: Allowed memory size of xxxx bytes exhausted \n  (tried to allocate xx bytes) in /xxx/xxx.php on line xx\n</code></pre>\n\n<p>If the call is made from a browser, the PHP error message ends up at the end of the page and is visible in the document source and DOM:</p>\n\n<pre><code>&lt;b&gt;Fatal error&lt;/b&gt;:  Allowed memory size of xxxx bytes exhausted \n  (tried to allocate xx bytes) in &lt;b&gt;/xxx/xxx.php&lt;/b&gt; on line &lt;b&gt;xx&lt;/b&gt;&lt;br /&gt;\n</code></pre>\n\n<p>But when analyzing the call's $response in perl, the error message is not visible in neither the output of <a href=\"https://metacpan.org/pod/HTTP::Response#$r-%3Econtent\" rel=\"nofollow noreferrer\">$response->content</a> or <a href=\"https://metacpan.org/pod/HTTP::Response#$r-%3Eas_string\" rel=\"nofollow noreferrer\">$response->as_string</a>. The stream basically 'cuts off' just before the error message:</p>\n\n<pre><code>HTTP/1.1 200 OK\nCache-Control: no-cache\nConnection: Upgrade, close\nDate: Wed, 27 Jun 2018 07:40:52 GMT\nPragma: no-cache\nUpgrade: h2,h2c\nServer: Apache/2.4\nContent-Type: text/html; charset=UTF-8\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nClient-Date: Wed, 27 Jun 2018 07:42:25 GMT\nClient-Peer: xxxx\nClient-Response-Num: 1\nClient-SSL-Cert-Issuer: xxxx\nClient-SSL-Cert-Subject: /CN=www.xxxx.ch\nClient-SSL-Cipher: xxxx\nClient-SSL-Socket-Class: IO::Socket::SSL\nClient-Transfer-Encoding: chunked\nSet-Cookie: sid=xxxxxx; path=/\nTitle: xxxxxxx\n\n&lt;!DOCTYPE HTML&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;xxxxx&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=\"xxxx\"&gt;\n  &lt;div id=\"xxxx\"&gt;&lt;img src=\"xxxx\"&gt;&lt;/div&gt;\n    &lt;div id=\"xxxx\"&gt;&lt;div id=\"xxxx\"&gt;xxxx&lt;/div&gt;\n      &lt;div id=\"xxxx\"&gt;\n          &lt;div id=\"xxxx\"&gt;\n                &lt;b&gt;stream&lt;/b&gt;\n                marker 1\n                marker 2\n                marker 3\n                marker 4\n                marker 5\n</code></pre>\n\n<p>The problem is that all status codes or error flags (see <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">HTTP::Response</a>)  look ok, since the response started streaming properly.</p>\n\n<p>Can someone elaborate on how to catch these kind of errors from within <a href=\"https://metacpan.org/pod/HTTP::Request\" rel=\"nofollow noreferrer\">HTTP:Request</a> or <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">HTTP::Response</a>?</p>\n"}, {"tags": ["perl", "solr", "lucene"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530025149, "post_id": 51045780, "comment_id": 89083017, "body": "How can we reproduce the problem?"}, {"owner": {"reputation": 61, "user_id": 4300351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O1UAA7xsbMk/AAAAAAAAAAI/AAAAAAAAAKM/N9QdbNPkUQc/photo.jpg?sz=128", "display_name": "Mike Carville GleTech", "link": "https://stackoverflow.com/users/4300351/mike-carville-gletech"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1530027980, "post_id": 51045780, "comment_id": 89084768, "body": "These were created from within our system. I am sharing from the logs. I am new to Solr. I cannot understand why the first command is not stored but gets a success result. Does it have to do with CommitWithin?"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4300351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O1UAA7xsbMk/AAAAAAAAAAI/AAAAAAAAAKM/N9QdbNPkUQc/photo.jpg?sz=128", "display_name": "Mike Carville GleTech", "link": "https://stackoverflow.com/users/4300351/mike-carville-gletech"}, "edited": false, "score": 0, "creation_date": 1530116353, "post_id": 51049746, "comment_id": 89124583, "body": "You are correct, that is what was happening. I needed to use the same ID as I was just adding more information for the same record. The solution was to use &quot;set&quot; as I outlined below."}], "tags": [], "owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "is_accepted": false, "score": 0, "last_activity_date": 1530039415, "creation_date": 1530039415, "answer_id": 51049746, "question_id": 51045780, "link": "https://stackoverflow.com/questions/51045780/posting-to-consecutive-commands-to-solr-data-missing-from-1st-call/51049746#51049746", "title": "Posting to Consecutive Commands to Solr - Data Missing from 1st Call", "body": "<p>The two documents you submit have the same id. The second document overwrites the first one, since the id has to uniquely identify a document. If the id doesn't do that, change which field is defined as a uniqueKey, or use a UUID generator to get a new id each time the document is submitted. The latter will cause issues if you're trying to do updates without having the new uuid readily available, tho.</p>\n\n<p>Another solution would be to prefix the id with the document type, or (depending on your use case) merge it into a single document before indexing.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 4300351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O1UAA7xsbMk/AAAAAAAAAAI/AAAAAAAAAKM/N9QdbNPkUQc/photo.jpg?sz=128", "display_name": "Mike Carville GleTech", "link": "https://stackoverflow.com/users/4300351/mike-carville-gletech"}, "is_accepted": false, "score": 0, "last_activity_date": 1530044647, "creation_date": 1530044647, "answer_id": 51050870, "question_id": 51045780, "link": "https://stackoverflow.com/questions/51045780/posting-to-consecutive-commands-to-solr-data-missing-from-1st-call/51050870#51050870", "title": "Posting to Consecutive Commands to Solr - Data Missing from 1st Call", "body": "<p>The answer to my problem was that the 1st and 2nd commands were full updates, and the rest were partial updates (using \"set\"</p>\n\n<p>I change the second command to a format like this</p>\n\n<p>[{\"checklist_id\":{\"set\":\"249725\"},\"brand_s\":{\"set\":\"Pinnacle\"},\"featured\":{\"set\":\"\"},\"sf_set_sort\":{\"set\":\"Baseball1992Pinnacle\"},\"sport_s\":{\"set\":\"Baseball\"},\"cardnumber\":{\"set\":\"287\"},\"issue_s\":{\"set\":\"\"},\"id\":\"3-159694\",\"year_s\":{\"set\":\"1992\"},\"team\":{\"set\":\"Milwaukee Brewers\"},\"set_name_s\":{\"set\":\"\"}}]</p>\n\n<p>And all was right with the code, no lionger overwriting the first query.</p>\n\n<p>Maybe this will help someone else!</p>\n\n<p>Thanks\nMike</p>\n"}], "owner": {"reputation": 61, "user_id": 4300351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O1UAA7xsbMk/AAAAAAAAAAI/AAAAAAAAAKM/N9QdbNPkUQc/photo.jpg?sz=128", "display_name": "Mike Carville GleTech", "link": "https://stackoverflow.com/users/4300351/mike-carville-gletech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530044647, "creation_date": 1530024581, "last_edit_date": 1530030289, "question_id": 51045780, "link": "https://stackoverflow.com/questions/51045780/posting-to-consecutive-commands-to-solr-data-missing-from-1st-call", "title": "Posting to Consecutive Commands to Solr - Data Missing from 1st Call", "body": "<p>I am sending the following commands with</p>\n\n<pre><code>    my $url = \"http://xxxxx/solr/inventory/update?commitWithin=1000\";\n</code></pre>\n\n<p>I am using perl to send to a solr setup on another server.</p>\n\n<p>Please excuse the formatting. I really did try.</p>\n\n<p>Thanks\nMike</p>\n\n<p>RESULTING DATA - The data from the first command is not here. All subsequent calls are.</p>\n\n<pre><code>{  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":0,\n      \"params\":{  \n         \"q\":\"*:*\",\n         \"fq\":\"id:3-159682\",\n         \"_\":\"1529984183431\"\n      }\n   },\n   \"response\":{  \n      \"numFound\":1,\n      \"start\":0,\n      \"docs\":[  \n         {  \n            \"checklist_id\":249746,\n            \"brand_s\":\"Pinnacle\",\n            \"featured\":\"\",\n            \"sf_set_sort\":\"Baseball1992Pinnacle\",\n            \"sf_set_sort_s\":\"Baseball1992Pinnacle\",\n            \"sport_s\":\"Baseball\",\n            \"cardnumber\":\"308\",\n            \"issue_s\":\"\",\n            \"id\":\"3-159682\",\n            \"year_s\":\"1992\",\n            \"team\":\"Los Angeles Dodgers\",\n            \"set_name_s\":\"\",\n            \"has_image\":1,\n            \"amazon_sku\":\"159682\",\n            \"amazon_sync\":1,\n            \"sf_id\":378827,\n            \"sf_ending_time\":2222222222,\n            \"sf_sort_id\":199230875,\n            \"sf_listing_type\":\"buy\",\n            \"shopify_id\":\"1302493397094\",\n            \"_version_\":1604345060355211264\n         }\n      ]\n   }\n}\n</code></pre>\n\n<p>COMMANDS AND RESPONSES</p>\n\n<pre><code>[  \n   {  \n      \"inv_location\":\"\",\n      \"ean\":\"\",\n      \"site_id\":\"3\",\n      \"category_id\":[  \n         \"1\",\n         \"55\",\n         \"2162220\",\n         \"2715086\",\n         \"306\",\n         \"2352370\",\n         \"2413461\"\n      ],\n      \"cp_id\":\"159682\",\n      \"isbn\":\"\",\n      \"id\":\"3-159682\",\n      \"consigner\":\"\",\n      \"upc_code\":\"0\",\n      \"quantity\":\"1\",\n      \"created_date\":\"2018-06-26T10:17:55Z\",\n      \"mpn\":\"\",\n      \"description\":\"\",\n      \"inv_num\":\"\",\n      \"cp_listing_type\":\"1\",\n      \"price\":\"0.69\",\n      \"title\":\"1992 Pinnacle #308 Darryl Strawberry NM-MT \",\n      \"live_status\":\"\"\n   }\n]\n\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n\n[  \n   {  \n      \"checklist_id\":\"249746\",\n      \"brand_s\":\"Pinnacle\",\n      \"featured\":\"\",\n      \"sf_set_sort\":\"Baseball1992Pinnacle\",\n      \"sport_s\":\"Baseball\",\n      \"cardnumber\":\"308\",\n      \"issue_s\":\"\",\n      \"id\":\"3-159682\",\n      \"year_s\":\"1992\",\n      \"team\":\"Los Angeles Dodgers\",\n      \"set_name_s\":\"\"\n   }\n]\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n\n\n[  \n   {  \n      \"has_image\":{  \n         \"set\":\"1\"\n      },\n      \"id\":\"3-159682\"\n   }\n]\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n\n\n\n\n[  \n   {  \n      \"amazon_sku\":{  \n         \"set\":\"159682\"\n      },\n      \"amazon_sync\":{  \n         \"set\":\"1\"\n      },\n      \"id\":\"3-159682\"\n   }\n]\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n\n\n\n[  \n   {  \n      \"sf_id\":{  \n         \"set\":\"378827\"\n      },\n      \"sf_ending_time\":{  \n         \"set\":\"2222222222\"\n      },\n      \"sf_sort_id\":{  \n         \"set\":\"199230875\"\n      },\n      \"id\":\"3-159682\",\n      \"sf_listing_type\":{  \n         \"set\":\"buy\"\n      }\n   }\n]\n\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n\n\n[  \n   {  \n      \"id\":\"3-159682\",\n      \"shopify_id\":{  \n         \"set\":\"1302493397094\"\n      }\n   }\n]\n\nSuccess: {  \n   \"responseHeader\":{  \n      \"status\":0,\n      \"QTime\":1\n   }\n}\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1530021573, "post_id": 51044476, "comment_id": 89080599, "body": "What does TCL have to do with it?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530023069, "post_id": 51044476, "comment_id": 89081632, "body": "I&#39;ve tidied your Perl code so that I can read it, but it&#39;s shameful that I need to do that at all. Please make a better effort next time you ask a question here."}, {"owner": {"reputation": 4462, "user_id": 1018580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757fafb944d47f80a2336d097dcef7c5?s=128&d=identicon&r=PG", "display_name": "Trenton Trama", "link": "https://stackoverflow.com/users/1018580/trenton-trama"}, "edited": false, "score": 0, "creation_date": 1530024388, "post_id": 51044476, "comment_id": 89082503, "body": "Is every item in cell.txt going to be in rerun.txt?"}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "reply_to_user": {"reputation": 4462, "user_id": 1018580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757fafb944d47f80a2336d097dcef7c5?s=128&d=identicon&r=PG", "display_name": "Trenton Trama", "link": "https://stackoverflow.com/users/1018580/trenton-trama"}, "edited": false, "score": 0, "creation_date": 1530103276, "post_id": 51044476, "comment_id": 89115901, "body": "@trenton-trama: there are few variables to be changed in cell.txt ,not all."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 1, "creation_date": 1530103951, "post_id": 51046601, "comment_id": 89116382, "body": "Thanks @ Borodin, As I have added above , I have basic version of perl and I&#39;m getting error for this as                                             BEGIN failed--compilation aborted at cell_new.pl line 3.. Please can you suggest me any solution . And yes im just learning  perl."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1532809381, "post_id": 51046601, "comment_id": 90115679, "body": "@Anthonyj It looks like you might be using a quite old version of Perl that did not include autodie as a core module/pragma. <code>corelist autodie</code> shows perl 5.10.1 as being the first such release and you might check <code>perl -v</code> to see if your version is earlier."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1530041943, "last_edit_date": 1530041943, "creation_date": 1530027142, "answer_id": 51046601, "question_id": 51044476, "link": "https://stackoverflow.com/questions/51044476/how-to-replace-a-line-after-certain-keyword-in-perl/51046601#51046601", "title": "how to replace a line after certain keyword in perl", "body": "<p>This solution reads the <em>rerun</em> data into hash <code>%rerun</code>, using the first column for keys and the second for values. A regex pattern <code>$re</code> is built from the set of possible keys and compiled</p>\n\n<p>The entirety of <code>cell.txt</code> is read into <code>$cell</code> to make it simpler to process multi-line strings. Each occurrence of <code>cell (x) {</code> with a following <code>area : 99.99</code> and where <code>x</code> is one of the keys of <code>%rerun</code> is found, and the subsequent <code>99.99</code> is replaced by the value of the corresponding hash element</p>\n\n<p>Once everything has been found and replaced, the new <code>$cell</code> is printed to <code>STDOUT</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy %rerun = do {\n    open my $fh, '&lt;', 'rerun.txt';\n    map { /[^,\\s]/g } &lt;$fh&gt;;\n};\n\nmy $cell = do {\n    open my $fh, '&lt;', 'cell.txt';\n    local $/;\n    &lt;$fh&gt;;\n};\n\nmy $re = join '|', sort { length $b &lt;=&gt; length $a } keys %rerun;\n$re = qr/$re/;\n\n$cell =~ s/ \\b cell \\s* \\( \\s* ( $re ) \\s* \\) \\s* \\{ \\s* area \\s* : \\s* \\K [\\d.]+ /$rerun{$1}/gx;\n\nprint $cell;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>  cell (a)  {\n     area :  1\n  }\n\n  cell (b)  {\n     area :  2\n   }\n  cell (c)  {\n     area :  3\n   }\n\n  cell (d)  {\n     area :  4\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530038988, "post_id": 51046861, "comment_id": 89090301, "body": "<i>&quot;Your attempt looks to me a bit like a BASIC program written in Perl&quot;</i> To be honest, that&#39;s how your answer looks to me. For a start, why no <code>use strict</code> or <code>use warnings &#39;all&#39;</code>?"}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530040741, "post_id": 51046861, "comment_id": 89091064, "body": "Borodin, it looks like you missed <code>use Modern::Perl;</code> - <a href=\"https://metacpan.org/pod/Modern::Perl\" rel=\"nofollow noreferrer\">metacpan.org/pod/Modern::Perl</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530040967, "post_id": 51046861, "comment_id": 89091144, "body": "Why should I have to learn what every non-core compilation module does? It&#39;s opaque, and not a great example for newcomers. <code>use strict</code> and <code>use warnings &#39;all&#39;</code> is sufficient and self-explanatory. By all means use <code>Modern::Perl</code> for your own purposes, but it&#39;s not appropriate in production or public code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530041182, "post_id": 51046861, "comment_id": 89091237, "body": "And <code>Regexp::Common</code> is overkill. <code>[\\d.]+</code> is fine unless you were trying to <i>validate</i> the input data, and if you were you would need to handle a mismatch  properly instead of just ignoring it. The OP doesn&#39;t imply that the files may be malformed, so there is no point in anything &quot;clever&quot;."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530042341, "post_id": 51046861, "comment_id": 89091716, "body": "I cannot understand the comment that Modern::Perl is not appropriate in production code <a href=\"http://modernperlbooks.com/books/modern_perl\" rel=\"nofollow noreferrer\">modernperlbooks.com/books/modern_perl</a> <a href=\"http://en.wikipedia.org/wiki/Chromatic_(programmer)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Chromatic_(programmer)</a> - With regard to public code, I realize that I don&#39;t see it much on this site but am not quite sure why."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530042459, "post_id": 51046861, "comment_id": 89091770, "body": "You need to add <code>@Borodin</code> for me to receive a notification of your message. I don&#39;t see the point of your link except to underline that Chromatic is a celebrity. Ask a number of Perl programmers what <code>use Modern::Perl</code> does and very few people will know the answer without looking at the documentation. Being non-core it needs to be installed to use it at all, and the result is a program with pragma that most people cannot define without help. I&#39;ll wager you don&#39;t know yourself what it does. It&#39;s a module that makes you look like you&#39;re trying too hard without caring about your audIence."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530043357, "post_id": 51046861, "comment_id": 89092133, "body": "@Borodin - I knew that <code>Modern::Perl</code> included <code>use warnings;</code> and <code>use strict</code> which you missed in your initial comment.  I wish you would have checked before being so harshly critical.  You don&#39;t seem familiar with the module but I noticed positive reviews of the related book by several CPAN authors and am not sure the problem is so universal."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530047560, "post_id": 51046861, "comment_id": 89093897, "body": "Did you even read my explanation? I would add that <code>Modern::Perl</code> doesn&#39;t look like a pragma, which conventionally have lower case names. If I overlooked it then doesn&#39;t it seem likely that others could do the same? I reflected your own criticism back to you, so presumably you think you were also being <i>&quot;harshly critical&quot;</i>? I would add that you should be using the three-parameter form of <code>open</code>, and you are unnecessarily checking for the existence of <code>area</code> in the line before doing the substitution. You don&#39;t appear to have a grasp of idiomatic Perl yet and shouldn&#39;t be throwing stones."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530048299, "post_id": 51046861, "comment_id": 89094176, "body": "I may indeed have overreacted to the OP use of <code>goto</code>.  AFAICT I read all of your explanations.  The dispute about <code>Modern::Perl</code> has turned up  before: <a href=\"https://stackoverflow.com/questions/22599829/use-or-not-to-use-the-namespacesweep-and-or-modernperl\" title=\"use or not to use the namespacesweep and or modernperl\">stackoverflow.com/questions/22599829/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 1, "creation_date": 1530103853, "post_id": 51046861, "comment_id": 89116311, "body": "Thanks @mr_ron i have very basic version of perl , and i cant instal modern::perl ,any solution for this.Thanks in advance"}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1530120559, "post_id": 51046861, "comment_id": 89126699, "body": "@Anthonyj - as described in other comments which also link to the doc for <code>Modern::Perl</code> (letter case matters), it could be replaced here with <code>use strict; use warnings;</code>.  Installing Perl/CPAN modules like <code>Modern::Perl</code> may greatly extend the power of Perl as a tool and seemingly can often be done without <code>root</code> or <code>admin</code> authority.  See <a href=\"https://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">cpan.org/modules/INSTALL.html</a> for more.  I usually have root and admit to using <code>local::lib</code> installation today for the first time."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1532773427, "post_id": 51046861, "comment_id": 90106892, "body": "@mr_ron I was just trying cpan as I installed today , i want to change the parameter in cell.txt directly so i used open($fh, &#39;&gt;&#39;, &#39;cell.txt&#39;) instead of open($fh, &#39;&lt;&#39;, &#39;cell.txt&#39;) but im facing this error                                                  &quot;Filehandle $fh opened only for output at new.pl line 7.&quot; Please help me out . Thanks in advance ."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1532808879, "post_id": 51046861, "comment_id": 90115544, "body": "@Anthonyj you are very likely trying to read from a file you only have open for write.  Perl can open for read and write with <code>+&lt;</code> and you could also consider <code>perl -i</code> edit in place ( <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html</a> ).  My guess is it would be simpler to write a new file and move or copy files as a separate step."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1532946127, "post_id": 51046861, "comment_id": 90148874, "body": "@mr_ron Thanks for the help again.I have done perl change.pl | tee new_cell.txt as u have suggested."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1532949053, "post_id": 51046861, "comment_id": 90150529, "body": "@mr_ron Thanks for the help again.I have done perl change.pl | tee new_cell.txt as u have suggested.But if in my cell.txt i have area : &quot;2&quot; ; then I have to modify last line of ua code Please help me whether I should do like this  s/(area\\s*:\\s*)&quot;[\\d.|\\w.]&quot;+/$1$new_area{$area_key}/  ? but its not working (I have added \\w. as if my rerun.txt contains a word )                                Thanks in advance"}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "edited": false, "score": 0, "creation_date": 1533000157, "post_id": 51046861, "comment_id": 90174256, "body": "Maybe: <code>s&#47;(area\\s*:\\s*)&quot;[\\d.|\\w.]+&quot;&#47;$1$new_area{$area_key}&#47;</code> ... the <code>+</code> needs to be after the <code>]</code> not the <code>&quot;</code>."}], "tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1530196321, "last_edit_date": 1530196321, "creation_date": 1530028002, "answer_id": 51046861, "question_id": 51044476, "link": "https://stackoverflow.com/questions/51044476/how-to-replace-a-line-after-certain-keyword-in-perl/51046861#51046861", "title": "how to replace a line after certain keyword in perl", "body": "<p>I am relying on somewhat fancier regexes to try to be defensive about possible input and combine some steps. The <a href=\"http://perldoc.perl.org/functions/goto.html\" rel=\"nofollow noreferrer\">docs on <code>goto</code></a> suggest <a href=\"http://perldoc.perl.org/functions/last.html\" rel=\"nofollow noreferrer\"><code>last</code></a> (in your case <code>last LABEL</code>) as an alternative but I hope the OP won't feel hurt by my echoing a dogma shared by some. My version prints to stdout instead of changing the original file but should be close enough.  Would have been helpful to print some expected output but hopefully I guessed right.</p>\n\n<p><a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> finished a few minutes before me and I did not see his posting which is in some ways a more advanced approach.  On suggestion from same I removed reference to <code>Regexp::Common</code> module which, while relevant, I agree was more than needed.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Modern::Perl;\n\nopen(my $fh, '&lt;', 'rerun.txt') or die \"Could not open rerun.txt: $!\";\nmy %new_area;\nforeach (&lt;$fh&gt;) {\n    chomp;\n    my ($k, $v) = split ',';\n    die \"invalid rerun format\" unless ($k =~ /^\\w+$/ and $v =~ /^[\\d.]+$/);\n    $new_area{ $k } = $v;\n}\n\nopen($fh, '&lt;', 'cell.txt') or die \"Could not open cell.txt: $!\";\nmy $area_key;\nwhile (&lt;$fh&gt;) {\n    if ( /^\\s* cell \\s*\\(\\s*(\\w+)\\s*\\)\\s* { \\s*$/x ) {\n        $area_key = $1;\n    }\n    elsif (/^\\s* } \\s*$/x) {\n        undef $area_key\n    }\n    elsif ( defined($area_key) and /\\barea\\b/ and\n            exists $new_area{ $area_key }\n    ) {\n        s/(area\\s*:\\s*)[\\d.]+/$1$new_area{$area_key}/\n    }\n\n    print;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>  cell (a)  {\n     area :  1\n  }\n\n  cell (b)  {\n     area :  2\n   }\n  cell (c)  {\n     area :  3\n   }\n\n... etc ...\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530196321, "creation_date": 1530020834, "last_edit_date": 1530104571, "question_id": 51044476, "link": "https://stackoverflow.com/questions/51044476/how-to-replace-a-line-after-certain-keyword-in-perl", "title": "how to replace a line after certain keyword in perl", "body": "<h3>rerun.txt</h3>\n\n<pre><code>a,1\nb,2\nc,3\nd,4\n</code></pre>\n\n<p>(<code>a</code>, <code>b</code>, <code>c</code>, <code>d</code> are <code>$var</code> and <code>1</code>, <code>2</code>... <code>$num</code> in my code) </p>\n\n<p>I want to search for <code>$var</code> in <code>cell.txt</code> and replace <code>area</code> (its corresponding next line) by <code>$num</code> ( like <code>area : 1</code> ) in this file</p>\n\n<h3>cell.txt</h3>\n\n<pre><code>  cell (a)  {\n     area :  2\n  }\n\n  cell (b)  {\n     area :  2.3\n   }\n  cell (c)  {\n     area :  2.5\n   }\n\n  cell (d)  {\n     area :  2.7\n   }\n</code></pre>\n\n<h3>Perl code</h3>\n\n<pre><code>#!usr/bin/perl\n\nuse warnings;\nuse strict;\n\nopen( my $fh1, \"rerun.txt\" ) or die \"Couldn't open file file.txt, $!\";\n\nmy $word  = 0;\nmy $input = \"area\";\nmy $num;\nmy $var;\nmy $line;\nmy $a     = 0;\nmy $flag  = 0;\nmy $flag1 = 0;\n\nwhile ( &lt;$fh1&gt; ) {\n\n    ( $var, $num ) = split \",\";    # splitting acc to comma\n\n    open( my $fh, \"cell.txt\" ) or die \"Couldn't open file file.txt, $!\";\n\n    while ( my $line1 = &lt;$fh&gt; ) {    # while in the file opened\n\n        $line1 =~ s/^\\s+//;         # removing spaces\n        my @word = split \" \", $line1;    # splitting acc to spcaes\n\n        foreach $word ( @word ) {\n\n            $word =~ s/[(,),]//g;        # excluding all brackets (,),{,}\n\n            if ( $word eq $var ) {\n                $flag = 1;\n            }\n\n            if ( $flag == 1 ) {\n\n                if ( $word eq \"area\" ) {\n\n                    $a = $.;             # saving the line number\n                    system( \"sed -i '$a s/.*/\\t area : $num /' cell.txt\" );\n                    goto L1;\n                }\n            }\n        }\n    }\n\n    L1:\n\n    close( $fh );\n}\n\nclose( $fh1 );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1530012287, "post_id": 51040617, "comment_id": 89074388, "body": "This is pretty straightforward, but I wonder if we don&#39;t have an XY problem on our hands. What are you actually trying to accomplish? If you&#39;re just reordering columns, then <code>split</code>/<code>join</code> will work nicely. If you&#39;re wanting specific fixed widths, then take a look at <code>format</code> in the perl docs. But either way - give it a try, and let us know what you&#39;re getting stuck on."}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1530012905, "post_id": 51040617, "comment_id": 89074774, "body": "I am just stuck on with the code. I just want to write that &quot;BOSTON&quot; starting from 74 and ending on 80 to another newly created file to a position starting from 10 and ending on 16"}, {"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1530012935, "post_id": 51040617, "comment_id": 89074793, "body": "i just need help with the code since i am new to perl"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1530013551, "post_id": 51040617, "comment_id": 89075152, "body": "If you need help with your code, you should start by showing us the code you&#39;ve got. Please <a href=\"https://stackoverflow.com/posts/51040617/edit\">edit</a> the question and include it."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "edited": false, "score": 0, "creation_date": 1530080556, "post_id": 51052147, "comment_id": 89102211, "body": "i need to understand this. What is  unpack(&#39;A16 A14 A42 A13 A3 A*&#39;, $_); and   say pack(&#39;A? A? A? A? A? A*&#39;, @fields[0,1,2,3,4,5]); exactly doing ?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1530051937, "creation_date": 1530051937, "answer_id": 51052147, "question_id": 51040617, "link": "https://stackoverflow.com/questions/51040617/changing-the-position-of-a-file-to-another-in-perl/51052147#51052147", "title": "changing the position of a file to another in perl", "body": "<pre><code>while (&lt;&gt;) {\n   chomp;\n   my @fields = unpack('A16 A14 A42 A13 A3 A*', $_);\n   say pack('A? A? A? A? A? A*', @fields[0,1,2,3,4,5]);\n}\n</code></pre>\n\n<p>Of course, you'll need to replace the <code>?</code> and perhaps change the order of the indexes to meet your unspecified format.</p>\n"}], "owner": {"reputation": 31, "user_id": 9993697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6431eb7199f06264f3daa65b256751a?s=128&d=identicon&r=PG&f=1", "display_name": "Riju Mukherjee", "link": "https://stackoverflow.com/users/9993697/riju-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530051937, "creation_date": 1530008856, "question_id": 51040617, "link": "https://stackoverflow.com/questions/51040617/changing-the-position-of-a-file-to-another-in-perl", "title": "changing the position of a file to another in perl", "body": "<p>I have a .dta file which contains below output</p>\n\n<pre><code>1600000000000   00000000000   060218                                    BOSTON       MA 15000060000000000000000F5466160239558164\n1600000000000   00000000000   060718                                    BOSTON       MA 15000070000000000000000N379809904781009\n1600000000000   00000000000   060818                                    BOSTON       MA 15000080000000000000000N372512000987069\n1600000000000   00000000000   060918                                    BOSTON       MA 15000090000000000000000F5466307589134928\n</code></pre>\n\n<p>The field \"BOSTON\" starting position is 74 and ending position is 80, it's length is 6. I want to write the column which is having \"BOSTON\" from the .dta file to another file, but the position will be different. For eg : The second file in which i want to write should have the column which is having \"BOSTON\" from starting postion 10 and ending position 16.<br>\nSince i am new to perl. Can anybody help me out with that?</p>\n"}, {"tags": ["macos", "perl", "io", "dyld"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1530000639, "post_id": 51037258, "comment_id": 89067359, "body": "\u201csome perl updates\u201d \u2013 could you clarify? If you upgrade your perl (e.g. from 5.24.x to 5.26.x) then you should reinstall all your modules, at least those modules with compiled (XS) extensions. E.g. your <code>@INC</code> paths still contain <code>&#47;opt&#47;biotools&#47;vcftools&#47;lib&#47;perl5&#47;site_perl&#47;5.24 &#47;work&#47;MyScripts&#47;modules</code> which might be a problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1530001745, "post_id": 51037258, "comment_id": 89067972, "body": "This error happens when you load an XS module that was installed with a different build of Perl than the one loading it."}, {"owner": {"reputation": 627, "user_id": 1386500, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51385782f7402df39437a962f1aaf75f?s=128&d=identicon&r=PG", "display_name": "splaisan", "link": "https://stackoverflow.com/users/1386500/splaisan"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1530091731, "post_id": 51037258, "comment_id": 89108413, "body": "@amon, the vcftools module should be OK as it is not related to this error and MyScripts only contains my own modules which are too simple to be the cause. For other modules compiled from older perl versions, is there a way to systematically recompile them? Thanks for any help"}, {"owner": {"reputation": 627, "user_id": 1386500, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51385782f7402df39437a962f1aaf75f?s=128&d=identicon&r=PG", "display_name": "splaisan", "link": "https://stackoverflow.com/users/1386500/splaisan"}, "edited": false, "score": 2, "creation_date": 1530092188, "post_id": 51037258, "comment_id": 89108730, "body": "thanks to both, it was a PERL5LIB I added as  PERL5LIB=/opt/local/lib/perl5/site_perl/5.26:${PERL5LIB} that was confusing the system."}], "owner": {"reputation": 627, "user_id": 1386500, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51385782f7402df39437a962f1aaf75f?s=128&d=identicon&r=PG", "display_name": "splaisan", "link": "https://stackoverflow.com/users/1386500/splaisan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1034, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529998231, "creation_date": 1529998231, "question_id": 51037258, "link": "https://stackoverflow.com/questions/51037258/dyld-lazy-symbol-binding-failed-symbol-not-found-perl-xs-handshake-io-bund", "title": "dyld: lazy symbol binding failed: Symbol not found: _Perl_xs_handshake : IO.bundle", "body": "<p>I made a simple bioperl script using the following libraries</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Bio::SeqIO;\nuse File::Basename;\nuse Getopt::Std;\n</code></pre>\n\n<p><br></p>\n\n<ul>\n<li><p>It used to work but since some perl updates it fails with:</p>\n\n<p>dyld: lazy symbol binding failed: Symbol not found: _Perl_xs_handshake\n  Referenced from: /opt/local/lib/perl5/site_perl/5.26/darwin-thread-multi-2level/auto/IO/IO.bundle\n  Expected in: flat namespace</p>\n\n<p>dyld: Symbol not found: _Perl_xs_handshake\n  Referenced from: /opt/local/lib/perl5/site_perl/5.26/darwin-thread-multi-2level/auto/IO/IO.bundle\n  Expected in: flat namespace</p></li>\n</ul>\n\n<p><br></p>\n\n<ul>\n<li><p>I use macport and sometimes cpan (maybe not so good idea!!) to maintain my OSX laptop (10.13.5)</p></li>\n<li><p>My perl -V gives:</p>\n\n<p>Summary of my perl5 (revision 5 version 26 subversion 2) configuration:</p>\n\n<p>Platform:\n    osname=darwin\n    osvers=17.6.0\n    archname=darwin-thread-multi-2level\n    uname='darwin highsierra.internal.macports.net 17.6.0 darwin kernel version 17.6.0: tue may 8 15:22:16 pdt 2018; root:xnu-4570.61.1~1release_x86_64 x86_64 '\n    config_args='-des -Dprefix=/opt/local -Dscriptdir=/opt/local/bin -Dvendorprefix=/opt/local -Dusemultiplicity=y -Dusethreads -Duseshrplib -Dcc=/usr/bin/clang -Dman1ext=1pm -Dman3ext=3pm -Dinstallstyle=lib/perl5 -Dman1dir=/opt/local/share/man/man1p -Dman3dir=/opt/local/share/man/man3p -Dsitebin=/opt/local/libexec/perl5.26/sitebin -Dsiteman1dir=/opt/local/share/perl5.26/siteman/man1 -Dsiteman3dir=/opt/local/share/perl5.26/siteman/man3 -Dvendorbin=/opt/local/libexec/perl5.26 -Dvendorman1dir=/opt/local/share/perl5.26/man/man1 -Dvendorman3dir=/opt/local/share/perl5.26/man/man3 -Dpager=/usr/bin/less -sR -Dperlpath=/opt/local/bin/perl5.26 -Dstartperl=#!/opt/local/bin/perl5.26 -Acppflags=-I/opt/local/include -Accflags=-pipe -Os  -Alddlflags=-L/opt/local/lib -Wl,-headerpad_max_install_names  -Aldflags=-L/opt/local/lib -Wl,-headerpad_max_install_names '\n    hint=recommended\n    useposix=true\n    d_sigaction=define\n    useithreads=define\n    usemultiplicity=define\n    use64bitint=define\n    use64bitall=define\n    uselongdouble=undef\n    usemymalloc=n\n    default_inc_excludes_dot=define\n    bincompat5005=undef\n  Compiler:\n    cc='/usr/bin/clang'\n    ccflags ='-fno-common -DPERL_DARWIN -mmacosx-version-min=10.13 -pipe -Os  -fno-strict-aliasing -fstack-protector-strong -I/opt/local/include -DPERL_USE_SAFE_PUTENV'\n    optimize='-O3'\n    cppflags='-I/opt/local/include -fno-common -DPERL_DARWIN -mmacosx-version-min=10.13 -pipe -Os  -fno-strict-aliasing -fstack-protector-strong -I/opt/local/include'\n    ccversion=''\n    gccversion='4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2)'\n    gccosandvers=''\n    intsize=4\n    longsize=8\n    ptrsize=8\n    doublesize=8\n    byteorder=12345678\n    doublekind=3\n    d_longlong=define\n    longlongsize=8\n    d_longdbl=define\n    longdblsize=16\n    longdblkind=3\n    ivtype='long'\n    ivsize=8\n    nvtype='double'\n    nvsize=8\n    Off_t='off_t'\n    lseeksize=8\n    alignbytes=8\n    prototype=define\n  Linker and Libraries:\n    ld='/usr/bin/clang'\n    ldflags =' -mmacosx-version-min=10.13 -L/opt/local/lib -Wl,-headerpad_max_install_names  -fstack-protector-strong'\n    libpth=/opt/local/lib /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/9.1.0/lib /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib /usr/lib\n    libs=-lpthread -lgdbm -ldbm -ldl -lm -lutil -lc\n    perllibs=-lpthread -ldl -lm -lutil -lc\n    libc=\n    so=dylib\n    useshrplib=true\n    libperl=libperl.dylib\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs\n    dlext=bundle\n    d_dlsymun=undef\n    ccdlflags=' '\n    cccdlflags=' '\n    lddlflags=' -mmacosx-version-min=10.13 -bundle -undefined dynamic_lookup -L/opt/local/lib -Wl,-headerpad_max_install_names  -fstack-protector-strong'</p>\n\n<p>Characteristics of this binary (from libperl): \n  Compile-time options:\n    HAS_TIMES\n    MULTIPLICITY\n    PERLIO_LAYERS\n    PERL_COPY_ON_WRITE\n    PERL_DONT_CREATE_GVSV\n    PERL_IMPLICIT_CONTEXT\n    PERL_MALLOC_WRAP\n    PERL_OP_PARENT\n    PERL_PRESERVE_IVUV\n    PERL_USE_SAFE_PUTENV\n    USE_64_BIT_ALL\n    USE_64_BIT_INT\n    USE_ITHREADS\n    USE_LARGE_FILES\n    USE_LOCALE\n    USE_LOCALE_COLLATE\n    USE_LOCALE_CTYPE\n    USE_LOCALE_NUMERIC\n    USE_LOCALE_TIME\n    USE_PERLIO\n    USE_PERL_ATOF\n    USE_REENTRANT_API\n  Built under darwin\n  Compiled at Jun 19 2018 13:45:49\n  %ENV:\n    PERL5LIB=\"/opt/local/lib/perl5/site_perl/5.26::/opt/biotools/ensembl_main/bioperl-1.2.3:/opt/biotools/ensembl_main/bioperl-live:/opt/biotools/ensembl_main/ensembl/modules:/opt/biotools/ensembl_main/ensembl-compara/modules:/opt/biotools/ensembl_main/ensembl-variation/modules:/opt/biotools/ensembl_main/ensembl-functgenomics/modules:/opt/biotools/ensembl_main/ensembl-external/modules:/opt/biotools/ensembl_main/ensembl-tools/modules:/opt/biotools/circos/lib:/opt/biotools/circosapi/lib:/opt/biotools/GeneNomenclatureUtils/modules:/opt/biotools/Haplotyping-0.1.0/Perl:/opt/biotools/hmmer/PfamScan:/opt/biotools/kaviar:/opt/biotools/pita/lib:/opt/biotools/vcftools/lib/perl5/site_perl/5.24:/work/MyScripts/modules:/work/MyScripts/pharmgkb:/opt/biotools/mummer/scripts\"\n  @INC:\n    /opt/local/lib/perl5/site_perl/5.26/darwin-thread-multi-2level\n    /opt/local/lib/perl5/site_perl/5.26\n    /opt/biotools/ensembl_main/bioperl-1.2.3\n    /opt/biotools/ensembl_main/bioperl-live\n    /opt/biotools/ensembl_main/ensembl/modules\n    /opt/biotools/ensembl_main/ensembl-compara/modules\n    /opt/biotools/ensembl_main/ensembl-variation/modules\n    /opt/biotools/ensembl_main/ensembl-functgenomics/modules\n    /opt/biotools/ensembl_main/ensembl-external/modules\n    /opt/biotools/ensembl_main/ensembl-tools/modules\n    /opt/biotools/circos/lib\n    /opt/biotools/circosapi/lib\n    /opt/biotools/GeneNomenclatureUtils/modules\n    /opt/biotools/Haplotyping-0.1.0/Perl\n    /opt/biotools/hmmer/PfamScan\n    /opt/biotools/kaviar\n    /opt/biotools/pita/lib\n    /opt/biotools/vcftools/lib/perl5/site_perl/5.24\n    /work/MyScripts/modules\n    /work/MyScripts/pharmgkb\n    /opt/biotools/mummer/scripts\n    /opt/local/lib/perl5/site_perl/5.26/darwin-thread-multi-2level\n    /opt/local/lib/perl5/site_perl/5.26\n    /opt/local/lib/perl5/vendor_perl/5.26/darwin-thread-multi-2level\n    /opt/local/lib/perl5/vendor_perl/5.26\n    /opt/local/lib/perl5/5.26/darwin-thread-multi-2level\n    /opt/local/lib/perl5/5.26</p></li>\n</ul>\n\n<p>I suspect I changed some path or dependency but do not find what.\nAny idea?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "nginx", "mojolicious"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1529996029, "post_id": 51035927, "comment_id": 89064826, "body": "Is this question really anything to do with Perl or Mojolicious? It looks like you&#39;re asking about an Apache configuration problem."}], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1530048684, "post_id": 51038516, "comment_id": 89094314, "body": "The second example works. I didn&#39;t manage to make the first one. @richard-smith"}], "tags": [], "owner": {"reputation": 34402, "user_id": 4862445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppXKM.jpg?s=128&g=1", "display_name": "Richard Smith", "link": "https://stackoverflow.com/users/4862445/richard-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1530002483, "creation_date": 1530002483, "answer_id": 51038516, "question_id": 51035927, "link": "https://stackoverflow.com/questions/51035927/how-can-i-strip-the-base-url-in-nginx-for-a-mojolicious-app/51038516#51038516", "title": "How can I strip the base url in Nginx for a Mojolicious app?", "body": "<p>To modify the URI as it passes upstream, you can use a <code>rewrite...break</code> or perform a similar function using the <code>proxy_pass</code> directive itself.</p>\n\n<p>For example:</p>\n\n<pre><code>location /print {\n    rewrite ^/print(/.*)$ $1 break;\n    proxy_pass http://printo;\n    ...\n}\n</code></pre>\n\n<p>Remember to keep a leading <code>/</code> in the rewritten URI. See <a href=\"http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite\" rel=\"nofollow noreferrer\">this document</a> for details.\nOr:</p>\n\n<pre><code>location /print/ {\n    proxy_pass http://printo/;\n    ...\n}\n</code></pre>\n\n<p>The <code>location</code> value should have a trailing <code>/</code> to ensure that the text substitution occurs correctly. See <a href=\"http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass\" rel=\"nofollow noreferrer\">this document</a> for details.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 51038516, "answer_count": 1, "score": 2, "last_activity_date": 1530002483, "creation_date": 1529993331, "question_id": 51035927, "link": "https://stackoverflow.com/questions/51035927/how-can-i-strip-the-base-url-in-nginx-for-a-mojolicious-app", "title": "How can I strip the base url in Nginx for a Mojolicious app?", "body": "<p>I am trying to run a Mojolicious up as a reverse proxy. My Nginx configuration looks like this:</p>\n\n<pre><code>upstream printo {\n    server 127.0.0.1:3000;\n}\n\n[..]\n\nlocation /print {\n   proxy_pass http://printo;\n   proxy_http_version 1.1;\n   proxy_set_header Upgrade $http_upgrade;\n   proxy_set_header Connection \"upgrade\";\n   proxy_set_header Host $host;\n   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n   proxy_set_header X-Forwarded-Proto $scheme;\n}\n</code></pre>\n\n<p>I'd like to strip the <code>/printo</code> portion of the URL before the request reaches the Mojolicious app - otherwise, all the requests have a <code>/printo/something</code> URL, which results in a 404.</p>\n\n<p>I've seen <a href=\"https://stackoverflow.com/questions/43290656/mojolicious-is-not-capturing-url-only-base-url\">this</a> but I'd like to do it in Nginx if possible.</p>\n\n<p>I've tried rewrite like this:</p>\n\n<pre><code>rewrite ^/print/(.+)$ $1;\n</code></pre>\n\n<p>to no result.</p>\n\n<p>How's that done?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1530003193, "post_id": 51035348, "comment_id": 89068800, "body": "The error messages are harmless. The program is surely trying turning off echo on the terminal attached to STDIN before reading the password, and trying to restoring it afterwards. <a href=\"https://stackoverflow.com/questions/4032790/stty-standard-input-inappropriate-ioctl-for-device\">This fails because STDIN is not attached to a terminal (because you redirected it), resulting in error messages.</a> But the fact that echo wasn&#39;t turned off is harmless. If it fails to read your password, it&#39;s for reasons you haven&#39;t shown us. Does the program actually read from STDIN?"}, {"owner": {"reputation": 11, "user_id": 9992392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cdb32acdaf2c78985635282d389446?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/9992392/james"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1531119330, "post_id": 51035348, "comment_id": 89458174, "body": "I used the below command to overcome the issue and now its working fine. echo &quot;password&quot;|perl /test/adcfgclone.pl dbconfig $CONTEXT_FILE 2&gt;/dev/null."}, {"owner": {"reputation": 6202, "user_id": 2494754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeXuj.png?s=128&g=1", "display_name": "NVRM", "link": "https://stackoverflow.com/users/2494754/nvrm"}, "edited": false, "score": 0, "creation_date": 1589928574, "post_id": 51035348, "comment_id": 109487212, "body": "This message is annoying AF, for users and programmers. This has to cease."}], "owner": {"reputation": 11, "user_id": 9992392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cdb32acdaf2c78985635282d389446?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/9992392/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3849, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530003463, "creation_date": 1529990374, "last_edit_date": 1529998427, "question_id": 51035348, "link": "https://stackoverflow.com/questions/51035348/stty-standard-input-inappropriate-ioctl-for-device", "title": "stty standard input inappropriate ioctl for device", "body": "<p>We are creating a script to automate, but we are unable to provide the app's password as input while running a script.</p>\n\n<p>I made this script to take input as password, but it's erroring out:</p>\n\n<pre><code>Pwd=password\nperl /test/adcfgclone.pl dbconfig /home/TEST_hostname.xml &lt;&lt; EOF\nPwd\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>stty: standard input: Inappropriate ioctl for device\nEnter the APPS password :\nstty: standard input: Inappropriate ioctl for device\n</code></pre>\n"}, {"tags": ["macos", "perl", "shared-libraries", "intel", "intel-mkl"], "owner": {"reputation": 93, "user_id": 4760272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JQ5vdeNdWmQ/AAAAAAAAAAI/AAAAAAAADMo/KlSms3irUXQ/photo.jpg?sz=128", "display_name": "Leon WANG", "link": "https://stackoverflow.com/users/4760272/leon-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529994267, "creation_date": 1529988611, "last_edit_date": 1529994267, "question_id": 51035090, "link": "https://stackoverflow.com/questions/51035090/dyld-library-not-loaded-rpath-libmkl-intel-lp64-dylib", "title": "dyld: Library not loaded: @rpath/libmkl_intel_lp64.dylib", "body": "<p>I tried to run a series of simulations using <code>gromacs 4.6.5</code> on MAC PRO in which <code>intel composer_xe_2013</code> was installed. If I manually submit an individual job using commands in a terminal, I do not have any problems. However, if I want to submit a series of job using <code>perl</code> scripts to run these commands, I always get the error message </p>\n\n<pre><code>dyld: Library not loaded: @rpath/libmkl_intel_lp64.dylib\n</code></pre>\n\n<p>The <code>$DYLD_LIBRARY_PATH</code> has been set and can be visited. I do not know what is going wrong here. Any suggestion would be highly appreciated.</p>\n"}, {"tags": ["perl", "tk", "key-bindings"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1529988318, "post_id": 51033947, "comment_id": 89061967, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be nice."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530031896, "post_id": 51033947, "comment_id": 89086922, "body": "Sorry, trying to figure out how to format stuff here, trying again.."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530032759, "post_id": 51033947, "comment_id": 89087399, "body": "@melpomene I&#39;ve added a minimal example, thanks.  Clicking somewhere in the text box will activate the cursor at that location, then arrow keys will move it around."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1530033565, "post_id": 51033947, "comment_id": 89087801, "body": "Related: <a href=\"https://stackoverflow.com/q/31326766/2173773\">Remove tkinter text default binding</a>"}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 1, "creation_date": 1530034339, "post_id": 51033947, "comment_id": 89088215, "body": "I found a workaround in calling <code>$textBox-&gt;SetCursor(&#39;end&#39;);</code> after the insert command.  That way, the cursor stays at the end of the buffer and the scroll widget tracks new entries."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1530042120, "post_id": 51033947, "comment_id": 89091616, "body": "Would like to add that I saw related Q&amp;A for Python tkinter and TCL/Tk, but it wasn&#39;t obvious what the equivalent for Perl would be."}], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1530032127, "creation_date": 1529978865, "last_edit_date": 1530032127, "question_id": 51033947, "link": "https://stackoverflow.com/questions/51033947/how-to-disable-keyboard-bindings-for-perl-tktext-widget", "title": "How to disable keyboard bindings for Perl Tk::Text widget?", "body": "<p>I'm including a scrolled text box widget in my main Tk window which I have set up to intercept any key presses as follows:</p>\n\n<pre><code>use Tk;\nuse Tk::ROText; # read-only version of Text widget\n\n$mw = new Tk::MainWindow;\n$textBox = $mw-&gt;Scrolled('ROText', -scrollbars =&gt;'e')-&gt;grid();\n$mw-&gt;bind('&lt;Any-KeyPress&gt;' =&gt; \\&amp;key_handler);\n\n#Attempts to disable key bindings of text widget\n#$textBox-&gt;bind('&lt;Any-KeyPress&gt;' =&gt; sub {});\n#$textBox-&gt;bindtags(undef);\n\nTk::MainLoop;\n\nsub key_handler {\n    $count++;\n    $textBox-&gt;insert('end', \"key press #$count\\n\");\n}\n</code></pre>\n\n<p>The Text widget has a bunch of default key bindings, among them is moving the cursor with the arrow keys.  I want to disable this behavior, since I wish to execute some other actions based on the arrow keys.</p>\n\n<p>I tried <code>$textBox-&gt;bind('Any-KeyPress' =&gt; sub {});</code> and <code>$textBox-&gt;bindtags(undef);</code> based on suggested solutions I found online, but neither would disable the cursor movement inside the text box.  I still get the undesired cursor movement in addition to the desired <code>key_handler</code> calls.</p>\n\n<p>Are there any other suggestions as to how I can disable Text widget keyboard bindings?</p>\n"}, {"tags": ["html", "css", "perl", "html-table"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529980238, "post_id": 51033718, "comment_id": 89060252, "body": "Why do you have <code>map { ... }</code> around the <code>&lt;th&gt;</code> strings? You have clearly found that something is wrong  because you have discovered that it won&#39;t work if you end the statement with a semicolon. You mustn&#39;t blindly copy other people&#39;s code without understanding what it does. What you have written will print <code>Column2</code> first followed by <code>Column1</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529980379, "post_id": 51033718, "comment_id": 89060282, "body": "<i>&quot;This line is adding the background color RED to the cell but it is not matching the condition Reject&quot;</i> What do you mean by this? All the lines contain <code>Reject</code> and all of them are displayed in red. That is what you asked for."}, {"owner": {"reputation": 305, "user_id": 6228494, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/46fb0384eee720a8562c84dfafd5da03?s=128&d=identicon&r=PG&f=1", "display_name": "MichealMills", "link": "https://stackoverflow.com/users/6228494/michealmills"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529983534, "post_id": 51033718, "comment_id": 89060894, "body": "Sorry for the confusion here. I have attached the output of the script as well. This Perl script takes the textfile.txt as an input and prints its content in an html table format as shown above. I just need to change the Reject cell in the output to RED. That is, if the table cell value is Reject then print background of that cell to RED. The above code is kind of POC and also I have replaced actual values with generic terms but the requirement is same. And yes I have took parts of code from web as I am very new to perl script and putting as much as effort as I could to learn."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1529986385, "post_id": 51033718, "comment_id": 89061493, "body": "<i>&quot;yes I have took parts of code from web as I am very new to perl script and putting as much as effort as I could to learn&quot;</i> Taking pieces of code from the internet is <i>not</i> putting in effort to learn. You have been using <code>map { ... }</code> for several days now without a proper reason. I say again, <b><i>you must never</i></b> simply copy someone else&#39;s code without understanding what it does and how it works. Given my warnings I hoped that you would at least read the Perl documentation on <code>map</code>. Go and do it now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1530015211, "post_id": 51033718, "comment_id": 89076213, "body": "I don&#39;t know what improvement you think you made by removing the Perl code from your question. I&#39;ve put it back."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1529990997, "last_edit_date": 1529990997, "creation_date": 1529989358, "answer_id": 51035201, "question_id": 51033718, "link": "https://stackoverflow.com/questions/51033718/set-html-table-cell-background-colour-according-to-text-content/51035201#51035201", "title": "Set HTML table cell background colour according to text content", "body": "<p>Here are some of the errors in your Perl code</p>\n\n<ul>\n<li><p>As I said, you are misusing <code>map</code></p></li>\n<li><p>You are creating a new HTML document for every element of <code>@data</code>. What do you expect the browser to do with multiple <code>&lt;html&gt;</code> elements? It can't display them all</p></li>\n<li><p>You are expecting the string <code>REJECT</code> to match <code>Reject</code></p></li>\n<li><p>You are using a mixture of CSS <code>style</code> strings and element attributes. For instance</p>\n\n<pre><code>print \"&lt;table style=table-layout= fixed width= 705 height=110 text = $color4 border = 2 bordercolor = $color1 bgcolor = $color2&gt;\"\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>print qq{&lt;table\n        style=\"table-layout:fixed; width=705; height=110; text=$color4\"\n        border=2\n        bordercolor=\"$color1\"\n        bgcolor=\"$color2\"&gt;\\n}\n</code></pre>\n\n<p>because <code>table-layout</code>, <code>width</code>, <code>height</code>, and <code>text</code> are CSS properties, while <code>border</code>, <code>bordercolor</code>, and <code>bgcolor</code> are HTML element attributes</p>\n\n<p>I think you should be writing CSS to solve this problem, but that is another matter</p></li>\n</ul>\n\n<p>It would also help you a lot if you printed a newline <code>\"\\n\"</code> after each HTML element. That way the output will be much more readable and you will be able to see better what you have created</p>\n\n<p>Please don't persist with this <em>\"try things until it works\"</em> approach. You always end up coming here for help to get you out of the mess you've created, and you're not asking intelligent questions. To be using <code>map</code> like that after so long means you're not learning at all, and you owe it to yourself as well as your employer to learn the language properly</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1529995673, "last_edit_date": 1529995673, "creation_date": 1529995127, "answer_id": 51036353, "question_id": 51033718, "link": "https://stackoverflow.com/questions/51033718/set-html-table-cell-background-colour-according-to-text-content/51036353#51036353", "title": "Set HTML table cell background colour according to text content", "body": "\n\n<p>Here is a solution that performs correctly, but it is no more than a correction of your own code. The problems that I have outlined have been fixed, and that is all</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy $color1 = 'black';\nmy $color2 = 'darkgreen';\nmy $color3 = 'black';\nmy $color4 = 'red';\nmy $color5 = 'lime';\n\nmy $size   = 6;\nmy $title  = 'This is the heading';\nmy $fstyle = 'Helvetica';\n\nprint \"Content-type: text/html\\n\\n\";\n\nprint \"&lt;body bgcolor = $color3&gt;\\n\";\nprint \"&lt;font color = $color5 face=$fstyle size=$size&gt;$title&lt;/font&gt;&lt;br /&gt;\\n\";\n\n{\n    print \"&lt;html&gt;\\n\";\n    print \"&lt;body&gt;\\n\";\n\n    print qq{&lt;table\n            style=\"table-layout:fixed; width=705; height=110; text=$color4\"\n            border=2\n            bordercolor=\"$color1\"\n            bgcolor=\"$color2\"&gt;\\n};\n\n    print \"&lt;tr&gt;\\n\";\n    print qq{&lt;th style=\"width:705\" &gt;Column1&lt;/th&gt;};\n    print qq{&lt;th style=\"width:705\" &gt;Column2&lt;/th&gt;};\n    print \"&lt;/tr&gt;\\n\";\n\n    open my $fh, '&lt;', 'textfile.txt' or die $!;\n\n    while ( &lt;$fh&gt; ) {\n\n        my @line = split;\n\n        print \"&lt;tr&gt;\\n\";\n\n        for ( @line ) {\n\n            if ( /reject/i ) {\n                print qq{&lt;td style=width:705 bgcolor=red&gt;$_&lt;/td&gt;};\n            }\n            else {\n                print \"&lt;td style=width:705&gt;$_&lt;/td&gt;\"\n            }\n        }\n\n        print \"&lt;/tr&gt;\\n\";\n    }\n\n    print \"&lt;/table&gt;\\n\";\n    print \"&lt;/body&gt;\\n\";\n    print \"&lt;/html&gt;\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-html prettyprint-override\"><code>Content-type: text/html\n\n&lt;body bgcolor = black&gt;\n&lt;font color = lime face=Helvetica size=6&gt;This is the heading&lt;/font&gt;&lt;br /&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;table\n        style=\"table-layout:fixed; width=705; height=110; text=red\"\n        border=2\n        bordercolor=\"black\"\n        bgcolor=\"darkgreen\"&gt;\n&lt;tr&gt;\n&lt;th style=\"width:705\" &gt;Column1&lt;/th&gt;&lt;th style=\"width:705\" &gt;Column2&lt;/th&gt;&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=width:705&gt;Column1&lt;/td&gt;&lt;td style=width:705&gt;Column2&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=width:705&gt;Accept&lt;/td&gt;&lt;td style=width:705 bgcolor=red&gt;Reject&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=width:705&gt;Accept&lt;/td&gt;&lt;td style=width:705 bgcolor=red&gt;Reject&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=width:705&gt;Accept&lt;/td&gt;&lt;td style=width:705 bgcolor=red&gt;Reject&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<h3>Appearance</h3>\n\n<p><img src=\"https://i.stack.imgur.com/erC9S.png\" alt=\"This is the result\"></p>\n\n<p>I still have misgivings about your approach. Hacking together a program from bits and pieces of others' work that you don't understand is a recipe for failure. If you have no inclination to explore and learn the details enough to survive on your own then you have chosen the wrong job</p>\n\n<ul>\n<li><p>I think you should be using a template system such as\n<a href=\"https://metacpan.org/pod/Template::Toolkit\" rel=\"nofollow noreferrer\"><code>Template::Toolkit</code></a> instead of printing <code>HTML</code> from your Perl program</p></li>\n<li><p>The colours should be changed using CSS and an appropriate <code>class</code>, rather than printing HTML attributes in line</p></li>\n</ul>\n\n<p>You seem to think that a casual and approximate approach is fine, or at least that you are unwilling to offer any more, but while that may be true of other professions, software engineering requires much more care and precision</p>\n"}], "owner": {"reputation": 305, "user_id": 6228494, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/46fb0384eee720a8562c84dfafd5da03?s=128&d=identicon&r=PG&f=1", "display_name": "MichealMills", "link": "https://stackoverflow.com/users/6228494/michealmills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1486, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539779008, "creation_date": 1529976350, "last_edit_date": 1539779008, "question_id": 51033718, "link": "https://stackoverflow.com/questions/51033718/set-html-table-cell-background-colour-according-to-text-content", "title": "Set HTML table cell background colour according to text content", "body": "\n\n<p>I have written a Perl program to create a web page with an HTML table derived from text file <code>textfile.txt</code>.</p>\n\n<p>I would like to change it so that cells of the table are coloured according to the text content. For instance, if the text is <code>Reject</code> then background of the cell should be red. </p>\n\n<p>Here are two methods that I tried. Neither of them worked</p>\n\n<h3>Method 1</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ( $_ eq \"REJECT\" ) {\n    print map { \"&lt;td style=width:705 bgcolor=#FF0000 &gt;REJECT&lt;/td&gt;\" } @$d;\n}\n</code></pre>\n\n<h3>Method 2</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $d ( @data ) {\n\n    $d //= '';    # Convert undefined values to empty strings\n\n    my $class;\n\n    if ( $d eq 'REJECT' ) {\n        $class = 'hilite';\n    }\n\n    $html .= '&lt;td';\n    $html .= \" class='$class'\" if $class;\n    $html .= \"&gt;$d&lt;/td&gt;\";\n}\n</code></pre>\n\n<h3>Perl program</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\n\nuse strict;\nuse warnings;\n\nmy $output = `cat textfile.txt`;\nmy @lines = split /\\n/, $output;\n\nmy @data;\n\nforeach my $line ( @lines ) {\n    chomp $line;\n    my @d = split /\\s+/, $line;\n    push @data, \\@d;\n}\n\nmy $color1 = \"black\";\nmy $color2 = \"darkgreen\";\nmy $color3 = \"black\";\nmy $color4 = \"red\";\nmy $color5 = \"lime\";\n\nmy $num    = 6;\nmy $title  = \"This is the heading\";\nmy $fstyle = \"Helvetica\";\n\nprint \"&lt;body bgcolor = $color3&gt;\";\nprint \"&lt;font color = $color5  face = $fstyle  size = $num&gt;$title&lt;/font&gt;&lt;br /&gt;\";\n\nforeach my $d ( @data ) {\n\n    print \"&lt;html&gt;\";\n    print \"&lt;body&gt;\";\n    print \"&lt;table style=table-layout= fixed width= 705 height=110 text = $color4 border = 2 bordercolor = $color1 bgcolor = $color2&gt;\";\n    print \"&lt;tr&gt;\";\n    print map {\"&lt;th style=width:705 &gt;Column1&lt;/th&gt;\"}\n            print map {\"&lt;th style=width:705 &gt;Column2&lt;/th&gt;\"}\n            print \"&lt;/tr&gt;\";\n    print \"&lt;tr&gt;\";\n    print map {\"&lt;td style=width:705 &gt;$_&lt;/td&gt;\"} @$d;\n\n    if ( $d eq 'REJECT' ) {\n        print map {\"&lt;td style=width:705 bgcolor=#FF0000 &gt;Reject&lt;/td&gt;\"} @$d;\n    }\n\n    print \"&lt;/tr&gt;\";\n    print \"&lt;/table&gt;\";\n    print \"&lt;/body&gt;\";\n    print \"&lt;/html&gt;\";\n}\n</code></pre>\n\n<p>Input text file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Column1 Column2\nAccept   Reject\nAccept   Reject\nAccept   Reject\n</code></pre>\n\n<p>This line</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>print map { \"&lt;td style=width:705 bgcolor=#FF0000 &gt;Reject&lt;/td&gt;\"\n</code></pre>\n\n<p>is adding the background color RED to the cell but it is not matching the condition <code>Reject</code>.</p>\n\n<h3>Output</h3>\n\n<p><img src=\"https://i.stack.imgur.com/awHmZ.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["perl", "pcre"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529967027, "post_id": 51032608, "comment_id": 89057727, "body": "Thanks -- I was not aware of the <code>\\K</code> form at all. Whoever downvoted this care to explain?"}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529969509, "post_id": 51032608, "comment_id": 89058310, "body": "Thanks @zdim; your reply was deleted for a time, so I thought it was deliberately erased. Glad to see it back. Also I&#39;m working with UTF-16LE encoded data so I think Path::Tiny won&#39;t work as well here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529969689, "post_id": 51032608, "comment_id": 89058351, "body": "@sqldoug Don&#39;t know <code>-16LE</code> but many <code>Path::Tiny</code>&#39;s methods have <code>_utf8</code> counterparts, <code>edit_lines</code> included.  Does that help?"}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529970115, "post_id": 51032608, "comment_id": 89058439, "body": "Understood. I have not looked into <code>edit_lines</code>; I will check that out, thanks."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529971017, "post_id": 51032608, "comment_id": 89058579, "body": "@sqldoug Thank you for the attribution.  Added a few bits"}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1529971202, "post_id": 51032608, "comment_id": 89058606, "body": "Thanks again @zdim. The \\K form with the $ anchor solved it."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1530510834, "last_edit_date": 1530510834, "creation_date": 1529965889, "answer_id": 51032608, "question_id": 51032554, "link": "https://stackoverflow.com/questions/51032554/fill-in-empty-data-before-end-of-line/51032608#51032608", "title": "Fill in empty data before end of line", "body": "<p>First: use a module to work with csv files, and a good one is <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a></p>\n\n<p>Now, for a job like this, this one time, a simple filter is OK:</p>\n\n<pre><code>my $line = q(first,last John,Smith Francis,);\n\n$line =~ s/.*,\\K$/filled_last_field/; \n</code></pre>\n\n<p>The greedy <code>.*</code> matches up to the <em>last</em> instance of the following pattern (comma here) on the line.\nThe <a href=\"https://perldoc.perl.org/5.12.4/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code> form</a> of the <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookbehind</a>\n drops all previous matches so they are not consumed; so it only replaces the pattern after it (adds the phrase in this case, as needed).</p>\n\n<p>If you'd like to first replace the file then you read it line by line and write the changed lines to a new file, which then gets moved over the old one.</p>\n\n<pre><code>open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nopen my $fh_out, '&gt;', $new_file or die \"Can't open $new_file: $!\";\n\nwhile (&lt;$fh&gt;) {\n    print $fh_out s/.*,\\K$/filled_last_field/r;\n}\n# Move $new_file to $file\n</code></pre>\n\n<p>where I've used the <code>/r</code> <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a>, which returns the modified string, just right for the <code>print</code> here. See <a href=\"https://stackoverflow.com/a/46723567/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/40269154/4653379\">this post</a> (for example) for full programs of this kind with relevant details.</p>\n\n<p>Or, with <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>path($file)-&gt;edit_lines( sub { s/.*,\\K$/ADDED/ } )\n</code></pre>\n\n<p>Methods to edit a file directly were added in the version 0.077. Many of the module's methods have their <code>_utf8</code> counterparts, and there is <a href=\"https://metacpan.org/pod/Path::Tiny#edit_lines,-edit_lines_utf8,-edit_lines_raw\" rel=\"nofollow noreferrer\">edit_lines_utf8</a> as well.</p>\n\n<hr>\n\n<p>In a one-liner</p>\n\n<pre><code>perl -wpe's/.*,\\K$/ADDED/' file.csv &gt; new_file.csv\n</code></pre>\n\n<p>or, to change the input file <em>in-place</em></p>\n\n<pre><code>perl -i -wpe's/.*,\\K$/ADDED/' file.csv\n</code></pre>\n\n<p>or, to change it and also keep a backup</p>\n\n<pre><code>perl -i.bak -wpe's/.*,\\K$/ADDED/' file.csv\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51032608, "answer_count": 1, "score": 1, "last_activity_date": 1530510834, "creation_date": 1529965478, "question_id": 51032554, "link": "https://stackoverflow.com/questions/51032554/fill-in-empty-data-before-end-of-line", "title": "Fill in empty data before end of line", "body": "<p>I'm processing some CSV files. The last field is sometimes missing data, like so:\n<code>first,last</code>\n<code>John,Smith</code>\n<code>Francis,</code></p>\n\n<p>This is causing ingestion errors when trying to load into a database. I'd like to add a space or some other 'filler' after the last comma, before the <code>crlf</code> but I'm having trouble filling this with a search/replace. I've tried the following for example:\n<code>$data =~ s/,\\x0d\\x0a/,\\x20\\x0d\\0xa/gi</code> but no space gets added before <code>crlf</code>.\nOf course I need to keep the end of line so that rows are properly marked.</p>\n\n<p>I've tried reading in with Path::Tiny as well as generic <code>open</code> but having no success so far.</p>\n"}, {"tags": ["perl", "http", "post", "cgi"], "comments": [{"owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1529961191, "post_id": 51031229, "comment_id": 89056071, "body": "I am comparing my request data against the specifications on <a href=\"https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"nofollow noreferrer\">W3.org</a> and not seeing any obvious problems with my request format."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1529962146, "post_id": 51031838, "comment_id": 89056413, "body": "thanks for the reply. The last boundary is now a on a new line, but did not make any difference. What is &quot;end-of-header&quot; marker? can you please elaborate."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1529962904, "post_id": 51031838, "comment_id": 89056683, "body": "@BReddy: <i>&quot; What is &quot;end-of-header&quot; marker?&quot;</i> -  To cite myself: <i>&quot;no end-of-header marker, i.e. <b>no empty line between header and body</b>&quot;</i>"}, {"owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1529963275, "post_id": 51031838, "comment_id": 89056801, "body": "Thanks again, I saw that suggestion in another post and added 2 empty lines after the header and before the form-data starts. It shows in the request I posted. Am I missing something?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 1, "creation_date": 1529963623, "post_id": 51031838, "comment_id": 89056912, "body": "@BReddy: to cite myself again: <i>&quot;...multiple things wrong with <b>this</b> part...&quot;</i>. And I&#39;ve actually quoted the relevant MIME part. To make it more clear: There should be an empty line before the body if this part, i.e. before &quot;Here goes...&quot;. And I really recommended to use some MIME libraries or alternatively study first and implement then the relevant standards instead  of guessing how this might work."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1529961047, "creation_date": 1529961047, "answer_id": 51031838, "question_id": 51031229, "link": "https://stackoverflow.com/questions/51031229/perl-cgi-says-request-is-bad-malformed-multipart-post/51031838#51031838", "title": "Perl CGI says request is Bad (malformed multipart POST)", "body": "<pre><code>-------OMT-164386aa112\nContent-Disposition: form-data; name=\"voice\"; filename=\"audiorecrodtest.3gp\"\nContent-Type: application/x-object\nHere goes the voice data file content.-------OMT-164386aa112--\n</code></pre>\n\n<p>There are multiple things wrong with this part: there is no end-of-header marker, i.e. no empty line between header and body. And the MIME boundary <code>-------OMT-164386aa112--</code> must start at the beginning of a line.</p>\n"}], "owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529961047, "creation_date": 1529957768, "question_id": 51031229, "link": "https://stackoverflow.com/questions/51031229/perl-cgi-says-request-is-bad-malformed-multipart-post", "title": "Perl CGI says request is Bad (malformed multipart POST)", "body": "<p>I am sending the following request from Android java agent to Apache/2.4.6 CGI perl script (CGI.pm 4.38 / Perl 5.18.1 on Linux SUSE 13.1). Dumping $cgi shows the following:</p>\n\n<pre><code>[Mon Jun 25 12:22:52.025910 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215: $VAR1 = bless( {\n[Mon Jun 25 12:22:52.025963 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  'escape' =&gt; 1,\n[Mon Jun 25 12:22:52.025977 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  '.fieldnames' =&gt; {},\n[Mon Jun 25 12:22:52.026006 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  '.charset' =&gt; 'ISO-8859-1',\n[Mon Jun 25 12:22:52.026019 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  'use_tempfile' =&gt; 1,\n[Mon Jun 25 12:22:52.026031 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  'param' =&gt; {},\n[Mon Jun 25 12:22:52.026044 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  '.parameters' =&gt; [],\n[Mon Jun 25 12:22:52.026066 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                  '.cgi_error' =&gt; '400 Bad request (malformed multipart POST)'\n[Mon Jun 25 12:22:52.026076 2018] [cgi:error] [pid 20515] [client 192.168.0.10:56197] AH01215:                }, 'CGI' );\n</code></pre>\n\n<p>When I captured the request using ncat, I see the following, but don't understand what part is bad (please note that ^M is getting added to the headers automatically). Any help is appreciated.</p>\n\n<pre><code>POST /cgi-bin/voicerec.cgi HTTP/1.1^M\nAccept-Charset: UTF-8^M\nContent-Type: multipart/form-data; boundary=-----OMT-164386aa112^M\nUser-Agent: Dalvik/1.6.0 (Linux; U; Android 4.2.2; GT-P5113 Build/JDQ39)^M\nHost: 192.168.0.12:55000^M\nConnection: Keep-Alive^M\nAccept-Encoding: gzip^M\nContent-Length: 515^M\n^M\n\n\n-------OMT-164386aa112\nContent-Disposition: form-data; name=\"action\"\n\nas_voice_rec\n-------OMT-164386aa112\nContent-Disposition: form-data; name=\"S_UID\"\n\na\n-------OMT-164386aa112\nContent-Disposition: form-data; name=\"voice\"; filename=\"audiorecrodtest.3gp\"\nContent-Type: application/x-object\nHere goes the voice data file content.-------OMT-164386aa112--\n</code></pre>\n"}, {"tags": ["perl", "loops"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 0, "creation_date": 1529956304, "post_id": 51030813, "comment_id": 89054048, "body": "Thank you, this did work. I just want to make sure I understand you correctly. So, <code>while(my $line = &lt;$fh&gt; &amp;&amp; !$test)</code> was implicitly evaluating like <code>while(my $line = (&lt;$fh&gt; &amp;&amp; !$test))</code>?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 1, "creation_date": 1529956586, "post_id": 51030813, "comment_id": 89054166, "body": "Yes, this is due to operator precedence. If this were not the case, boolean statements would simply not work with assignments, consider <code>my $check = $true &amp;&amp; $false</code> - if the brackets were different, <code>$check</code> would suddenly be true, and we&#39;d be stumped :)"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1530087128, "post_id": 51030813, "comment_id": 89105694, "body": "I was not aware of that, but that&#39;s a really nice tidbit to keep in mind!"}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": true, "score": 3, "last_activity_date": 1529955789, "creation_date": 1529955789, "answer_id": 51030813, "question_id": 51030651, "link": "https://stackoverflow.com/questions/51030651/while-loop-will-not-find-regex-when-checking-for-false-value/51030813#51030813", "title": "While loop will not find regex when checking for false value", "body": "<p>Consider the return of <code>&lt;$fh&gt; &amp;&amp; !$test</code> - this is a boolean context. Perl will return the last evaluated statement - in this case <code>!$test</code>. Which, since <code>$test</code> is undefined, is true, so 1.</p>\n\n<p>Thus, <code>$line</code> would now contain 1. Which doesn't match your regex :)</p>\n\n<p>If you wanted to, you could write <code>while( !$test &amp;&amp; (my $line = &lt;$fh&gt;) ){</code>,\nwhich would then behave as you seemed to expect. You could even do\n<code>while( my $line = !$test &amp;&amp; &lt;$fh&gt; )</code> - but I would not recommend that, as it is a bit confusing ( as you have noticed ;) ).</p>\n"}], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51030813, "answer_count": 1, "score": 0, "last_activity_date": 1529957860, "creation_date": 1529955038, "question_id": 51030651, "link": "https://stackoverflow.com/questions/51030651/while-loop-will-not-find-regex-when-checking-for-false-value", "title": "While loop will not find regex when checking for false value", "body": "<p>I'm working on a script that gathers various specs of my companies computers, and stores it to a database. One section of the script searches through a file for the serial number of the credit card reader attached to the computer.</p>\n\n<p>What I've found is that if I do not include a true/false check in the while condition, the regex will be matched, and I can break from there. That's fine, and it's what I'm going with. I do not understand though, why, when I change the while condition to include the true/false check, the regex is never matched.</p>\n\n<p>Here is what I've found works</p>\n\n<pre><code>use v5.10;\nuse warnings;\nuse strict;\n\nmy $test;\nopen(my $fh, \"&lt;\", \"\\\\\\\\192.168.0.132\\\\storeman\\\\log\\\\2018-06-22.sls\");\nwhile(my $line = &lt;$fh&gt;){\n    if($line =~ /unitid/i){\n        $line =~ /(\\d{3}\\-\\d{3}\\-\\d{3})/;\n        $test = $1;\n        last;\n    }\n};\nsay $test // \"Nothing found\";\n</code></pre>\n\n<p>On the other hand though, the follow does not work.</p>\n\n<pre><code>use v5.10;\nuse warnings;\nuse strict;\n\nmy $test;\nopen(my $fh, \"&lt;\", \"\\\\\\\\192.168.0.132\\\\storeman\\\\log\\\\2018-06-22.sls\");\nwhile(my $line = &lt;$fh&gt; &amp;&amp; !$test){\n    if($line =~ /unitid/i){\n        $line =~ /(\\d{3}\\-\\d{3}\\-\\d{3})/;\n        $test = $1;\n    }\n};\nsay $test // \"Nothing found\";\n</code></pre>\n\n<p>Note that in each case, <code>$test</code> is undeclared until the regex finds a match. Also, even when declaring <code>$test</code> as an empty string, and trying <code>&amp;&amp; $test ne \"\"</code>, the regex still never matches.</p>\n\n<p>I've debugged to the best of my abilities, and all I know is that when using <code>&amp;&amp; !$test</code>, the <code>if($line =~ /unitid/i)</code> is never found to be true.</p>\n\n<p>What is it about the <code>&amp;&amp; !$test</code> that could cause the regex to never match, and thus the loop to never break, but instead run through the whole file?</p>\n"}, {"tags": ["sqlite", "perl", "dancer"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1529955899, "post_id": 51030571, "comment_id": 89053869, "body": "Double check the content of <code>$sth</code> (from the error message, it is <code>undef</code>) before using it in <code>$sth-&gt;execute()</code>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1529956329, "post_id": 51030571, "comment_id": 89054056, "body": "You should check whether your database connection is still open. There are hooks to use with the Database plugin, apparently. <code>https:&#47;&#47;metacpan.org&#47;pod&#47;distribution&#47;Dancer-Plugin-Database&zwnj;&#8203;&#47;lib&#47;Dancer&#47;Plugin&#47;D&zwnj;&#8203;atabase.pm#HOOKS</code>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1530010557, "creation_date": 1530010557, "answer_id": 51041172, "question_id": 51030571, "link": "https://stackoverflow.com/questions/51030571/perl-dancer-error-execute-method-undefined/51041172#51041172", "title": "Perl dancer error execute method undefined", "body": "<p>You're using the <code>database</code> keyword to get a database handle. I'm guessing that's coming from <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Database\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Database</a> (it would be useful if you could include information like this in your question).</p>\n\n<p>The error says that you're calling <code>execute()</code> on an undefined value. You're calling <code>execute()</code> on the variable <code>$sth</code>. So <code>$sth</code> is undefined. You get <code>$sth</code> by calling <code>prepare()</code> on the database  handle returned from <code>database()</code>. So it looks like the <code>prepare()</code> call is failing. You should check the return value from that call and throw an error if it fails.</p>\n\n<p>The most common reason for <code>prepare()</code> to fail is that you're trying to compile an SQL statement that contains an error. I can't see any obvious error in your SQL, but it's worth checking it by running it manually against your database.</p>\n\n<p>I see you're using bind params in your SQL statement. That's a great idea, but please note that you don't need to quote the question marks in your SQL - the database driver will handle that for you. I don't think that's what is causing your problem though.</p>\n\n<p>I also see that you're using CGI.pm inside your Dancer app to get the request parameters. To be honest, I'm slightly surprised that it works - but it's a terrible idea. Dancer has its own keywords that will give you this information. Look at <code>query_parameters()</code>, <code>body_parameters()</code> and <code>route_parameters()</code> in the <a href=\"https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod\" rel=\"nofollow noreferrer\">Dancer documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6364, "user_id": 4040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77a97b7bec8a0dc42fee8ecb640cb25?s=128&d=identicon&r=PG", "display_name": "David Precious", "link": "https://stackoverflow.com/users/4040/david-precious"}, "is_accepted": false, "score": 1, "last_activity_date": 1530019484, "creation_date": 1530019484, "answer_id": 51044035, "question_id": 51030571, "link": "https://stackoverflow.com/questions/51030571/perl-dancer-error-execute-method-undefined/51044035#51044035", "title": "Perl dancer error execute method undefined", "body": "<p>In addition to the points made already, that your DBI prepare() call is probably failing (add error-checking to see why, e.g. <code>my $sth = database-&gt;prepare('...') or die \"DB error: \" . database-&gt;errstr</code>) and that you're using CGI.pm within a Dancer app (... don't do that, I'm surprised it would work <em>at all</em> - look at the Dancer documentation for how to access the params your app was sent), look also at the <code>quick_insert</code> convenience method provided by Dancer::Plugin::Database / Dancer2::Plugin::Database so that you don't have to write that SQL INSERT statement at all.</p>\n"}], "owner": {"reputation": 3, "user_id": 7091103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ed56c3ad62b2b3cb9d43a8ea75f2b?s=128&d=identicon&r=PG&f=1", "display_name": "Somesh", "link": "https://stackoverflow.com/users/7091103/somesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530019484, "creation_date": 1529954638, "question_id": 51030571, "link": "https://stackoverflow.com/questions/51030571/perl-dancer-error-execute-method-undefined", "title": "Perl dancer error execute method undefined", "body": "<p>I was trying to make a website using perl dancer, below is my code. It seems to be correct but the page keeps loading and never enters the values in the database. When I cancel the page I get an error stating \"<code>request to POST /appform crashed: Can't call method \"execute\" on an undefined value</code>\". I can't figured out whats wrong in the code. If you have any other code please mention. \nI am using SQLite for database.\nThere is a database <code>campus.db</code>and I am inserting the value in <code>student</code> table.</p>\n\n<pre><code>post '/appform' =&gt; sub {\n\n        my $q = CGI -&gt;new;\n        my $name = $q-&gt;param (\"firstname\");\n        my $password = $q-&gt;param(\"password\");\n        my $mobile_no = $q-&gt;param(\"mobile\");\n        my $gender = $q-&gt;param(\"gender\");\n        my $email = $q-&gt;param(\"email\");\n        my $address = $q-&gt;param(\"address\");\n        my $sslc = $q-&gt;param(\"SSLC\");\n        my $hsc = $q-&gt;param(\"HSC\");\n        my $cgpa = $q-&gt;param(\"cgpa\");\n        my $languages = $q-&gt;param(\"lang\");\n        my $internships = $q-&gt;param(\"intern\");\n        my $preferred_loc = $q-&gt;param(\"country\");\n        my $sql = \"insert into student(name,mobile_no,gender,email,address,sslc,hsc,cgpa,languages,internships,preferred_loc,password,applied_job,company_applied) values ('?','?','?','?','?','?','?','?','?','?','?','?','?','?');\";\n        my $sth = database-&gt;prepare($sql); \n        $sth-&gt;execute($name,$mobile_no,$gender,$email,$address,$sslc,$hsc,$cgpa,$languages,$internships,$preferred_loc,$password) or die $sth-&gt;errstr;\n        #$sth-&gt;execute();   \n        $sth-&gt; finish;\n        set_flash('New entry posted!');\n            redirect '/';\n    };\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1529951542, "post_id": 51029783, "comment_id": 89051950, "body": "Thanks. Got there at the same time :-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1529953188, "post_id": 51029783, "comment_id": 89052672, "body": "Do as you please of course -- but it&#39;s not &quot;<i>yadda yadda</i>&quot;.  It&#39;s equally important when you&#39;re playning -- that&#39;s when you <i>really</i> can mess up.  And warnings are specially good (I always have that on even in one-liners).  Just how hard is it to type <code>my</code>?  If it comes up too many times perhaps you can evolve your testing manners so that it doesn&#39;t?  My opinion, meant as constructive and with best intentions :)"}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "edited": false, "score": 0, "creation_date": 1529959527, "post_id": 51029783, "comment_id": 89055454, "body": "Ah but it&#39;s not my - it&#39;s $my. That&#39;s 50% more than my :-)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1529960671, "post_id": 51029783, "comment_id": 89055900, "body": "@JL_SO <code>$my</code>? You are mistaken. <a href=\"https://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/my.html</a>"}, {"owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1529966379, "post_id": 51029783, "comment_id": 89057574, "body": "@MattJacob yes you are of course correct, my mistake."}, {"owner": {"reputation": 25448, "user_id": 563532, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2773fec98b1630ec087b575482dc08a?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/563532/rob"}, "edited": false, "score": 1, "creation_date": 1530157541, "post_id": 51029783, "comment_id": 89138115, "body": "@JL_SO If you&#39;ve found an answer, please post it as an answer. Don&#39;t edit it into the question"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1530158460, "creation_date": 1530158460, "answer_id": 51074523, "question_id": 51029783, "link": "https://stackoverflow.com/questions/51029783/perl-complaining-about-global-symbols-needing-explicit-package-name-despite-stri/51074523#51074523", "title": "Perl complaining about global symbols needing explicit package name despite strict and warnings being off", "body": "<blockquote>\n  <p><em>It seems that <code>use v5.14.0;</code> is switching on strict or warnings; is that true? If so, how so?</em></p>\n</blockquote>\n\n<p>The docs for this are unfortunately buried in <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">the documentation for <code>use</code></a>.</p>\n\n<blockquote>\n  <p>use VERSION also lexically enables all features available in the requested version as defined by the feature pragma, disabling any features not in the requested version's feature bundle. See feature. <strong><em>Similarly, if the specified Perl version is greater than or equal to 5.12.0, strictures are enabled lexically as with use strict.</em></strong> Any explicit use of use strict or no strict overrides use VERSION , even if it comes before it. Later use of use VERSION will override all behavior of a previous use VERSION , possibly removing the strict and feature added by use VERSION . use VERSION does not load the feature.pm or strict.pm files.</p>\n</blockquote>\n\n\n\n<blockquote>\n  <p><em>And if so how do I get to be able to use say without having to prefix every sodding variable with $my?</em></p>\n</blockquote>\n\n<p>You can load features individually with <a href=\"http://perldoc.perl.org/feature.html#The-&#39;say&#39;-feature\" rel=\"nofollow noreferrer\"><code>use feature</code></a>. So <code>use feature \"say\"</code>. You can also load a pre-5.12.0 <a href=\"http://perldoc.perl.org/feature.html#FEATURE-BUNDLES\" rel=\"nofollow noreferrer\">feature bundle</a> with <code>use v5.10</code>.</p>\n\n<p>But you really, really, really want strict on. Really really really. Explicitly declaring variables with <code>my</code> gives you two important features: typo protection and lexical scoping. Typo protection is obvious, if you type <code>$receiver = 42</code> and later <code>print $reciever</code> you can spend a lot of time scratching your head until you realize you have a typo. This more than makes up for the time spend typing <code>my</code>.</p>\n\n<p>Just as important is lexical scoping. This means the variable only lives inside the block it's declared in.</p>\n\n<pre><code>use strict;\n\nsub foo {\n    my $thing = 42;\n}\n\nprint $thing;  # error\n</code></pre>\n\n<p>Without <code>my</code> variables are global by default. Any piece of code anywhere can touch a global variable at any time. This makes all but the smallest pieces of code more complex and more difficult to understand and turns them into <strong><em>NIGHTMARES</em></strong> for people who have to maintain it later. You also run the risk of accidentally using the same variable for two different purposes, particularly with a common name like <code>$count</code> or <code>$i</code>, mysteriously overwriting each other's values.</p>\n"}], "owner": {"reputation": 1271, "user_id": 4026629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1", "display_name": "JL_SO", "link": "https://stackoverflow.com/users/4026629/jl-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 51074523, "answer_count": 1, "score": -2, "last_activity_date": 1530158460, "creation_date": 1529951183, "last_edit_date": 1530157522, "question_id": 51029783, "link": "https://stackoverflow.com/questions/51029783/perl-complaining-about-global-symbols-needing-explicit-package-name-despite-stri", "title": "Perl complaining about global symbols needing explicit package name despite strict and warnings being off", "body": "<pre><code>use utf8;\nuse v5.14.0;\n@rocks = qw/ bedrock slate rubble granite /;\nwhile( ( $index, $value ) = each @rocks ) {\n    say \"$index: $value\\n\";\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>C:\\Users\\J\\Documents\\Development\\perl&gt;perl test.pl\nGlobal symbol \"@rocks\" requires explicit package name at test.pl line 6.\nGlobal symbol \"$index\" requires explicit package name at test.pl line 7.\nGlobal symbol \"$value\" requires explicit package name at test.pl line 7.\nGlobal symbol \"@rocks\" requires explicit package name at test.pl line 7.\nGlobal symbol \"$index\" requires explicit package name at test.pl line 8.\nGlobal symbol \"$value\" requires explicit package name at test.pl line 8.\nExecution of test.pl aborted due to compilation errors.\n</code></pre>\n\n<p>I have read that not including use strict and use warnings enables one to circumvent this issue. But I've removed strict and warnings and here it is. I know it's incredibly dangerous not to use strict, but I'm just playing around with code. Having to type</p>\n\n<pre><code>my @rocks = qw/ bedrock slate rubble granite /;\nwhile( (my $index, my $value ) = each @rocks ) {\n    say \"$index: $value\\n\";\n}\n</code></pre>\n\n<p>is a bit annoying when you're just playing around.</p>\n\n<p>It seems that </p>\n\n<pre><code>use v5.14.0;\n</code></pre>\n\n<p>is switching on strict or warnings; is that true? If so, how so?\nAnd if so how do I get to be able to use <code>say</code> without having to prefix every sodding variable with <code>$my</code>? It seems I cannot use say without having the line <code>use v5.14.0.;</code> in my file. </p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1529940477, "post_id": 51026892, "comment_id": 89046386, "body": "<code>XMLin</code> and <code>KeyAttr</code> come from <a href=\"http://p3rl.org/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a>, not <a href=\"http://p3rl.org/XML::Parser\" rel=\"nofollow noreferrer\">XML::Parser</a>."}, {"owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1529940637, "post_id": 51026892, "comment_id": 89046490, "body": "Sorry, thanks for highlighting. Corrected."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "edited": false, "score": 0, "creation_date": 1529943241, "post_id": 51027456, "comment_id": 89047957, "body": "Thanks for the guidance. but XML::LibXML not found/installed :-("}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1529944075, "post_id": 51027456, "comment_id": 89048349, "body": "<code>XML::Twig</code> may be installed - that&#39;s another common choice. But no XML parsers are &#39;core&#39; (not even <code>XML::Simple</code>)."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 4, "last_activity_date": 1529941929, "creation_date": 1529941929, "answer_id": 51027456, "question_id": 51026892, "link": "https://stackoverflow.com/questions/51026892/read-multiple-xml-text-values-using-xmlsimple/51027456#51027456", "title": "Read multiple XML text values using XML::Simple", "body": "<p><a href=\"http://p3rl.org/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">XML::Simple says</a> to use <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> instead.</p>\n\n<pre><code>use XML::LibXML qw();\n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; \\&lt;&lt;'XML');\n&lt;customfield id=\"customfield_66440\" key=\"com.atlassian.jira.plugin.system.customfieldtypes:multiselect\"&gt;\n    &lt;customfieldname&gt;Program&lt;/customfieldname&gt;\n    &lt;customfieldvalues&gt;\n        &lt;customfieldvalue key=\"125160\"&gt;&lt;![CDATA[UNIX]]&gt;&lt;/customfieldvalue&gt;\n        &lt;customfieldvalue key=\"125160\"&gt;&lt;![CDATA[PERL]]&gt;&lt;/customfieldvalue&gt;\n\n    &lt;/customfieldvalues&gt;\n&lt;/customfield&gt;\nXML\n\nmy @values = map { $_-&gt;textContent } $dom-&gt;findnodes('//customfieldvalue');\n# (\"UNIX\", \"PERL\")\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529947617, "creation_date": 1529940048, "last_edit_date": 1529947617, "question_id": 51026892, "link": "https://stackoverflow.com/questions/51026892/read-multiple-xml-text-values-using-xmlsimple", "title": "Read multiple XML text values using XML::Simple", "body": "\n\n<p>I started learning the\n<a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\"><code>XML::Simple</code></a> module\nbut I can't understand how to read tags and fetch the data for my use. </p>\n\n<p>Below is my attempt to parse a small section from an XML file. I want to pick a comma-separated list of the text content of <code>customfieldvalue</code> elements.</p>\n\n<p>Output for example should be like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>print \"customfieldvalue are = $myvalues \\n\";\n# customfieldvalue are = UNIX,PERL\n</code></pre>\n\n<p>I am stuck after reading the XML section, Please help meto achieve this.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\nuse strict;\n\nuse XML::Simple;\nuse Data::Dumper;\n\nmy $xml   = new XML::Simple;\nmy $cdata = join('', &lt;DATA&gt;);\n\nmy $data = $xml-&gt;XMLin($cdata, KeyAttr =&gt; ['id']);\nprint Dumper($cdata);\n\n__DATA__\n&lt;customfield id=\"customfield_66440\" key=\"com.atlassian.jira.plugin.system.customfieldtypes:multiselect\"&gt;\n  &lt;customfieldname&gt;Program&lt;/customfieldname&gt;\n  &lt;customfieldvalues&gt;\n    &lt;customfieldvalue key=\"125160\"&gt;&lt;![CDATA[UNIX]]&gt;&lt;/customfieldvalue&gt;\n    &lt;customfieldvalue key=\"125160\"&gt;&lt;![CDATA[PERL]]&gt;&lt;/customfieldvalue&gt;\n  &lt;/customfieldvalues&gt;\n&lt;/customfield&gt;\n</code></pre>\n"}, {"tags": ["perl", "scope", "warnings", "declaration", "variable-declaration"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1529935137, "post_id": 51025225, "comment_id": 89042939, "body": "You do not need to use &quot;my&quot; second time. You need to declare it with &quot;my&quot; once. After that you can assing new values to it at any point without redelairing it."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1529935199, "post_id": 51025225, "comment_id": 89042986, "body": "You do not need undef $var; either."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 8, "creation_date": 1529936013, "post_id": 51025225, "comment_id": 89043538, "body": "If you&#39;re copying the code multiple times, maybe you should make the code into a subroutine and call it multiple times instead?"}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1529936403, "post_id": 51025225, "comment_id": 89043785, "body": "@ChrisTurner, that&#39;s a good idea, but there are some variables outside this copied chunk that are accessed in the chunk. I guess I should declare those using <code>our</code> or <code>local</code> to access them in the subroutine if I were to go this way."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1529953394, "post_id": 51025225, "comment_id": 89052749, "body": "the trick is to figure out what variables you need inside the function or subroutine. you can pass all those variables from your main part into the subroutine, either by positional arguments or by named parameters."}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1529945462, "post_id": 51025580, "comment_id": 89049068, "body": "that works totally fine... but i\u2019d wish you also added a huge warning that the the 2nd $var does is no longer available after the closing <code>}</code>. and also that after the closing <code>}</code> the first $var comes back in place and $var has the value as before... \u20183\u2019. truly this answers is not an answer i would recommend for someone that apperntly is new to Perl and seemingly is not aware of things like \u2018scope\u2019 and how to write subroutines. the answer does indeed meet the needs asked, but is far from complete and unsuitable for novice Perl programmer"}, {"owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1529985366, "post_id": 51025580, "comment_id": 89061305, "body": "@vanHoesel I think it is better to put the first chunk in separate braces as well. Then there wouldn&#39;t be any <code>$var</code> that &quot;comes back&quot; to confuse me."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1529999052, "post_id": 51025580, "comment_id": 89066473, "body": "although that would be totally valid to do, it&#39;s something i would rather avoid. creating &#39;scope&#39; all over the place to fix one other problem is not really a good way to solve it. the only thing you were running into is the redeclaration message. That could have been fixed with changing the part where you caused it <code>undef $var; my $var = 4;</code> .... just skip the really unnecessary and do the following <code>$var = 4</code>. It is really totally fine to do <code>my $var;</code> somewhere upwards in the block of code and then lateron assign values to it when needed, just before your <code>print</code>."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1529999300, "post_id": 51025580, "comment_id": 89066613, "body": "having said that, i usually dislike re-use of variables or giving them different meanings or context. i prefer variables with a name that describes what the content is about. <code>$var</code> is not one of them. Creating a new variable is not a sin."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1529999391, "post_id": 51025580, "comment_id": 89066661, "body": "Really and truly, refactoring the code, using subroutines would be a good thing to start working on, but that would require more than the seven lines of code you showed."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1529936011, "creation_date": 1529936011, "answer_id": 51025580, "question_id": 51025225, "link": "https://stackoverflow.com/questions/51025225/how-to-re-declare-a-variable-in-the-same-scope-in-perl/51025580#51025580", "title": "How to re-declare a variable in the same scope in perl?", "body": "<p>To avoid the warning, you can enclose the new variable declaration, and the code that uses it, inside curly braces (<code>{...}</code>) and create a new scope.</p>\n\n<pre><code>my $var = 3;\nprint \"$var\\n\";\n\n{    \n    my $var = 4;\n    print \"$var\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8278183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f39893532f42c1a136ba2fd95a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/8278183/akhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 51025580, "answer_count": 1, "score": 2, "last_activity_date": 1529936011, "creation_date": 1529934948, "question_id": 51025225, "link": "https://stackoverflow.com/questions/51025225/how-to-re-declare-a-variable-in-the-same-scope-in-perl", "title": "How to re-declare a variable in the same scope in perl?", "body": "<p>Is there a way to re-declare a variable in the same scope using the <code>my</code> keyword in perl? When I run the following script:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $var = 3;\nprint \"$var\\n\";\n\nundef $var;\nmy $var = 4;\nprint \"$var\\n\";\n</code></pre>\n\n<p>I get the \"desired\" output, but there is also a warning <code>\"my\" variable $var masks earlier declaration in same scope</code>. Is there a way to re-declare the variable without getting the warning?</p>\n\n<p>I'm not sure, but I think this is because <code>my</code> happens at compile-time and <code>undef</code> happens at run-time because the warning is being printed even before the first <code>print</code> statement. (I'm not even sure if perl actually compiles the thing before running it.)</p>\n\n<p><strong>Context:</strong> I want to be able to copy a chunk of code and paste it multiple times in the same file without having to edit-out all the <code>my</code> declarations. I guess this isn't the best way to do it, but any solution to the problem would be appreciated. </p>\n"}, {"tags": ["perl", "openssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 3, "creation_date": 1529948173, "post_id": 51019488, "comment_id": 89050434, "body": "and so, what is your issue?"}, {"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1529976439, "post_id": 51019488, "comment_id": 89059585, "body": "@salva I edited my question. Sorry I forgot to include the issue. Thanks for pointing it out."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529987656, "post_id": 51019488, "comment_id": 89061805, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1529987751, "post_id": 51019488, "comment_id": 89061830, "body": "Post text as text, not pictures of text. What exactly do you mean by &quot;this is the output of the program&quot;? How are you running it? Is this what&#39;s printed to the console? Have you checked whether it&#39;s stdout/stderr/something else? Where&#39;s the rest of the code?"}, {"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529991272, "post_id": 51019488, "comment_id": 89062803, "body": "@melpomene I&#39;ve included the complete code and its output. Thanks"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529991618, "post_id": 51019488, "comment_id": 89062912, "body": "That output doesn&#39;t match your code."}, {"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529991940, "post_id": 51019488, "comment_id": 89063019, "body": "@melpomene what do you mean the output doesn&#39;t match my code? I got that output from running the code above."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529992001, "post_id": 51019488, "comment_id": 89063043, "body": "Then where&#39;s the <code>Enter account ID:</code> part?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529992154, "post_id": 51019488, "comment_id": 89063097, "body": "Which version of <code>Net::OpenSSH</code> are you using? (If you&#39;re not sure, changing the <code>use</code> line to <code>use Net::OpenSSH 999;</code> should give you a helpful error message.)"}, {"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529992697, "post_id": 51019488, "comment_id": 89063326, "body": "@melpomene The version is 0.62. The <code>Enter account ID:</code> part was before the SSH, I&#39;ve included it in the output. Apologies."}], "answers": [{"comments": [{"owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "edited": false, "score": 0, "creation_date": 1529994146, "post_id": 51036009, "comment_id": 89063915, "body": "I did not see that. Works perfectly now. Thanks!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1529993655, "last_edit_date": 1592644375, "creation_date": 1529993655, "answer_id": 51036009, "question_id": 51019488, "link": "https://stackoverflow.com/questions/51019488/redirect-debugging-output-in-openssh/51036009#51036009", "title": "Redirect debugging output in OpenSSH", "body": "<p>You said:</p>\n<blockquote>\n<p>The version is 0.62.</p>\n</blockquote>\n<p>As the <a href=\"https://metacpan.org/source/SALVA/Net-OpenSSH-0.78/Changes#L86\" rel=\"nofollow noreferrer\">changelog</a> explains:</p>\n<blockquote>\n<p><strong>0.66  Oct 11, 2015</strong></p>\n<ul>\n<li>documentation fix (reported by Alex Kok)</li>\n<li>allow redirecting debug output to a custom file handle</li>\n</ul>\n</blockquote>\n<p><code>$Net::OpenSSH::debug_fh</code> is only supported in Net::OpenSSH 0.66+. In older versions it always logs to <code>STDERR</code>.</p>\n"}], "owner": {"reputation": 70, "user_id": 9605182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacfc217c8e1c9a7c71a70eda2f6c78?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/9605182/claire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 51036009, "answer_count": 1, "score": 1, "last_activity_date": 1529993655, "creation_date": 1529916506, "last_edit_date": 1529992504, "question_id": 51019488, "link": "https://stackoverflow.com/questions/51019488/redirect-debugging-output-in-openssh", "title": "Redirect debugging output in OpenSSH", "body": "<p>I'm working on a program that runs interactive commands via OpenSSH and I can't figure out how I'm going to redirect the debugging output to debug.txt. </p>\n\n<p>This is the code: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;                                                 \nuse Net::OpenSSH;\n\nmy ($u_name, $acc_name, $acc_uid);\n\nprint \"Enter account ID: \";\n$acc_uid = &lt;STDIN&gt;;\nchomp ($acc_uid);\n\nprint \"Login as: \";\n$u_name = &lt;STDIN&gt;;\nchomp ($u_name);\n\nmy $createuser = \"sudo useradd $acc_uid\";\n\nsystem (\"clear\");\n\nBEGIN { \n    open (my $out, '&gt;&gt;', '/usr/local/debug.txt') or warn $!;\n    $Net::OpenSSH::debug_fh = $out;\n    $Net::OpenSSH::debug = 16;\n}  \n\nmy $ssh = Net::OpenSSH-&gt;new( \"$u_name\\@myserver\", strict_mode =&gt; 0);\n\n$ssh-&gt;system({tty =&gt; 1 }, \"$createuser\") \n                or die \"remote command failed: \" . $ssh-&gt;error;         \n</code></pre>\n\n<p>I found the code for Net::OpenSSH::debug in <a href=\"https://metacpan.org/pod/Net::OpenSSH#DEBUGGING\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> and this is the output of the program:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter account ID: usertest\nLogin as: testuser\n# open_ex: ['ssh','-V']\n# _waitpid(711) =&gt; pid: 711, rc:\ntestuser@myserver's password:\n# open_ex: ['ssh','-O','check','-T','-S','/root/.libnet-openssh-perl/testuser-myserver-344-438107','-l','testuser','myserver','--']\n# _waitpid(349) =&gt; pid: 349, rc:\n# open_ex: ['ssh','-qtt','-S','/root/.libnet-openssh-perl/testuser-myserver-344-438107','-l','testuser','myserver','--','sudo useradd testuser123']\n[sudo] password for testuser:\n# _waitpid(350) =&gt; pid: 350, rc:\n# open_ex: ['ssh','-O','exit','-T','-S','/root/.libnet-openssh-perl/testuser-myserver-344-438107','-l','testuser','myserver','--']\n# _waitpid(351) =&gt; pid: 351, rc:\n</code></pre>\n\n<p>And when I checked debug.txt, it's empty. Thank you!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 5, "creation_date": 1529915930, "post_id": 51019246, "comment_id": 89031156, "body": "Java translation: <code>String in_Out = &quot;out&quot;.equals(inOut) ? &quot;Out&quot; : &quot;In&quot;;</code>. Very tricky."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1529916108, "post_id": 51019246, "comment_id": 89031235, "body": "@Amadan: Double quotes needed in Java."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1529916134, "post_id": 51019246, "comment_id": 89031253, "body": "@choroba: See? Tricky! (I put them on <code>&quot;out&quot;</code>, then flubbed on the other two.)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1529916850, "post_id": 51019246, "comment_id": 89031670, "body": "It&#39;s the &quot;ternary operator&quot;, like <code>if ($inOut eq &#39;out&#39;) { return &#39;Out&#39; } else { return &#39;In&#39; }</code>."}, {"owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "edited": false, "score": 0, "creation_date": 1529917037, "post_id": 51019246, "comment_id": 89031791, "body": "It is called ternary operator and works like: <code>CONDITION ? EVALUATE_IF_CONDITION_WAS_TRUE : EVALUATE_IF_CONDITION_WAS_FALSE</code>. You can assign the result of this to a variable."}, {"owner": {"reputation": 11104, "user_id": 7329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4e398a7a3d75e8cffbc635860e01a?s=128&d=identicon&r=PG&f=1", "display_name": "jps", "link": "https://stackoverflow.com/users/7329832/jps"}, "edited": false, "score": 0, "creation_date": 1530009122, "post_id": 51019246, "comment_id": 89072437, "body": "@Sora pls. don&#39;t deface your post. It&#39;s a valid question and you got answers for it. Also consider <a href=\"https://stackoverflow.com/help/someone-answers\">accepting the answer</a> below, if you&#39;re satisfied with the answer."}], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1529939029, "creation_date": 1529939029, "answer_id": 51026562, "question_id": 51019246, "link": "https://stackoverflow.com/questions/51019246/explanation-of-perl-code/51026562#51026562", "title": "Explanation of Perl code", "body": "<p>It is a compact way of doing the same thing as:</p>\n\n<pre><code>if ( $inOut eq 'out' )\n{\n $IN_OUT = 'Out';\n} else\n{\n $IN_OUT = 'In';\n}\n</code></pre>\n\n<p>If <code>$inOut</code> is guaranteed to be only <code>out</code> or <code>in</code> the same result could be achieved simply by doing just:</p>\n\n<pre><code>$IN_OUT = ucfirst $inOut;\n</code></pre>\n\n<p>You can find a specific article on the Perl ternary operator here: <a href=\"https://perlmaven.com/the-ternary-operator-in-perl\" rel=\"nofollow noreferrer\">https://perlmaven.com/the-ternary-operator-in-perl</a></p>\n\n<p>Also, when in doubt about some Perl structure or operator you can start with these resources:</p>\n\n<ul>\n<li><a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlop.html</a> for all operators, and the ternary conditional one is at <a href=\"https://perldoc.perl.org/perlop.html#Conditional-Operator\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlop.html#Conditional-Operator</a></li>\n<li><a href=\"https://perldoc.perl.org/index-functions.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/index-functions.html</a> for all internal functions</li>\n<li><a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlvar.html</a> for all default internal Perl variables (which is often a point causing questions from people coming from other languages)</li>\n<li>the Perl FAQ qt <a href=\"https://learn.perl.org/faq/\" rel=\"nofollow noreferrer\">https://learn.perl.org/faq/</a> should also be your first stop in case of problems</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 9043847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605eb559030afcd96b2c5b8706b209e2?s=128&d=identicon&r=PG&f=1", "display_name": "Sora", "link": "https://stackoverflow.com/users/9043847/sora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530008751, "creation_date": 1529915660, "last_edit_date": 1530008751, "question_id": 51019246, "link": "https://stackoverflow.com/questions/51019246/explanation-of-perl-code", "title": "Explanation of Perl code", "body": "<p>Can someone explain me what this:</p>\n\n<pre><code>$IN_OUT = ( $inOut eq 'out' ? 'Out' : 'In' );\n</code></pre>\n\n<p>is doing? I need to translate it to Java but I have no Idea about Perl. </p>\n"}, {"tags": ["perl", "alias", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530004993, "post_id": 51019233, "comment_id": 89069916, "body": "The third way to do aliasing is using Data::Alias."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530038140, "post_id": 51019233, "comment_id": 89089940, "body": "Is it really any different than refaliasing?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530039533, "post_id": 51019233, "comment_id": 89090522, "body": "@ikegami Yeah, it does some pretty gruesome stuff with perl internals. See <a href=\"https://metacpan.org/pod/Data::Alias#IMPLEMENTATION\" rel=\"nofollow noreferrer\">metacpan.org/pod/Data::Alias#IMPLEMENTATION</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530064047, "post_id": 51019233, "comment_id": 89097894, "body": "If you want to change the language, you either need to actually change the parser (refaliasing) or hook into it (Data::Alias). It&#39;s not really any different."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1529915618, "creation_date": 1529915618, "answer_id": 51019233, "question_id": 51018408, "link": "https://stackoverflow.com/questions/51018408/how-to-create-perl-aliases-typeglobs/51019233#51019233", "title": "how to create perl aliases? typeglobs?", "body": "<p>The easiest way is to make a copy:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $p = { name =&gt; \"Joe\" };\nmy $name = $p-&gt;{name};\nprint \"'$name' is '$p-&gt;{name}'\\n\";\n</code></pre>\n\n<p>This is what I'd use if I don't need to assign to <code>$name</code>.</p>\n\n<p>If you want to be able to write through <code>$name</code>, the easiest way is to make it a reference:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $p = { name =&gt; \"Joe\" };\nmy $name = \\$p-&gt;{name};\nprint \"'$$name' is '$p-&gt;{name}'\\n\";\n$$name = \"Jill\";\nprint \"'$$name' is '$p-&gt;{name}'\\n\";\n</code></pre>\n\n<p>If you really want an alias, the easiest way is to abuse a <code>for</code> loop:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $p = { name =&gt; \"Joe\" };\nfor my $name ($p-&gt;{name}) {\n    print \"'$name' is '$p-&gt;{name}'\\n\";\n    $name = \"Jill\";\n    print \"'$name' is '$p-&gt;{name}'\\n\";\n}\n</code></pre>\n\n<p>If your perl is new enough (5.22+), you can also do aliasing through references:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'refaliasing';\nmy $p = { name =&gt; \"Joe\" };\n\\my $name = \\$p-&gt;{name};\nprint \"'$name' is '$p-&gt;{name}'\\n\";\n$name = \"Jill\";\nprint \"'$name' is '$p-&gt;{name}'\\n\";\n</code></pre>\n\n<p>Finally, you can do aliasing to package variables by assigning to typeglobs, but that's not something I'd actually use here:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $p = { name =&gt; \"Joe\" };\n*name = \\$p-&gt;{name};  # sets *name{SCALAR} to point to $p-&gt;{name}\nour $name;            # declares $name so we can use it to refer to $main::name\nprint \"'$name' is '$p-&gt;{name}'\\n\";\n$name = \"Jill\";\nprint \"'$name' is '$p-&gt;{name}'\\n\";\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 51019233, "answer_count": 1, "score": 1, "last_activity_date": 1529915660, "creation_date": 1529912393, "last_edit_date": 1529915660, "question_id": 51018408, "link": "https://stackoverflow.com/questions/51018408/how-to-create-perl-aliases-typeglobs", "title": "how to create perl aliases? typeglobs?", "body": "<p>Suppose I'm manipulating a hash that's in another package, and I want to create an alias to that variable?  What's a clean way to do that?  This sample code shows what I want to do, but it, and a dozen variations of it malfunction.</p>\n\n<pre><code>#!/usr/bin/perl\n#use strict;  # I want it to work with strict.\n\nmy $p = Person-&gt;new(\"Joe\");\nmy $name;\n*name = \\*$p-&gt;{\"name\"};     # Latest broken attempt\n\nprintf(\"'%s' should eq '%s' because they both point to the same place.\\n\",\n       $name, $p-&gt;{\"name\"});\n\n$name = \"Sam\";\n\nprintf(\"'%s' should eq '%s' because they both point to the same place.\\n\",\n       $name, $p-&gt;{\"name\"});\nexit 0;\n\n\npackage Person;\n\nsub new {\n    my $class = shift;\n\n    my $this = {};\n    bless $this, $class;\n\n    $this-&gt;{\"name\"} = shift;\n\n    return $this;\n}\n</code></pre>\n\n<p>The functionality I want is to be able to manipulate <code>$p-&gt;{\"name\"}</code> dozens of times without having to type <code>$p-&gt;{\"name\"}</code> repeatedly.  The real data structure is far more complex with a lot of nested hashes.</p>\n\n<p>It's probably something easy.\nThanks.</p>\n"}, {"tags": ["linux", "perl", "xampp"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1529914596, "post_id": 51016441, "comment_id": 89030410, "body": "<a href=\"https://www.google.com/search?q=bash+windows+line+endings+site:stackoverflow.com\" rel=\"nofollow noreferrer\">bash windows line endings site:stackoverflow.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6357537, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YlB2xUlwTI8/AAAAAAAAAAI/AAAAAAAAABQ/5AcdYtwGKAI/photo.jpg?sz=128", "display_name": "Telosma Cordata", "link": "https://stackoverflow.com/users/6357537/telosma-cordata"}, "is_accepted": false, "score": 0, "last_activity_date": 1574408324, "last_edit_date": 1574408324, "creation_date": 1544601441, "answer_id": 53738433, "question_id": 51016441, "link": "https://stackoverflow.com/questions/51016441/perl-uncaught-syntaxerror-invalid-or-unexpected-token/53738433#53738433", "title": "Perl Uncaught SyntaxError: Invalid or unexpected token", "body": "<p>Ah I have solved this problem by enable mod cgi in my web server. In my case I use apache2 so I added some configs like:</p>\n\n<p>Explicitly using Options to permit CGI execution\nYou could explicitly use the Options directive, inside your main server configuration file, to specify that CGI execution was permitted in a particular directory:</p>\n\n<p><code>&lt;Directory \"/var/www/mypro\"&gt;\n    Options ExecCGI\n&lt;/Directory&gt;</code></p>\n\n<p>The above directive tells Apache to permit the execution of CGI files. You will also need to tell the server what files are CGI files. The following AddHandler directive tells the server to treat all files with the cgi or pl extension as CGI programs:\n<code>AddHandler cgi-script .cgi .pl</code></p>\n\n<p>After that load cgi module:\n<code>a2enmod cgi</code></p>\n\n<p>Restart my apache server. It worked!\nIf you use another web server like nginx you can find some way to enable cgi in your config file.</p>\n"}], "owner": {"reputation": 13, "user_id": 5810798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf308406512107aa6150abbfeaed7866?s=128&d=identicon&r=PG&f=1", "display_name": "Androiddevama", "link": "https://stackoverflow.com/users/5810798/androiddevama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574408324, "creation_date": 1529901909, "question_id": 51016441, "link": "https://stackoverflow.com/questions/51016441/perl-uncaught-syntaxerror-invalid-or-unexpected-token", "title": "Perl Uncaught SyntaxError: Invalid or unexpected token", "body": "<p>My perl code has a error on the first line <code>#!/usr/bin/perl</code> when deploying on linux server. But it work properly in my local b/c I used this line <code>#!C:\\xampp\\perl\\bin\\perl.exe</code>.</p>\n\n<p>Can somebody tell me the reason?</p>\n"}, {"tags": ["perl", "email"], "answers": [{"comments": [{"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529933500, "post_id": 51016423, "comment_id": 89041847, "body": "Perhaps your table is in <code>$message</code> rather than <code>$text</code>? In that case you should put <code>$message</code> in the <code>pre</code> tag too."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529933857, "post_id": 51016423, "comment_id": 89042094, "body": "Perhaps use the <code>style</code> attribute to add more explicit CSS to the <code>pre</code> tag: <code>&lt;pre style=&quot;font-family: Courier New, monospace&quot;&gt;</code> although it&#39;s hard to imagine why your system doesn&#39;t render the <code>pre</code> tag properly without additional CSS."}, {"owner": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529980512, "post_id": 51016423, "comment_id": 89060303, "body": "is it possible i just convert all the font in the email into Courier New?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529980660, "post_id": 51016423, "comment_id": 89060329, "body": "You can apply the <code>style=&quot;font-family: Courier New, monospace&quot;</code> attribute to the <code>body</code> tag instead to make sure the entire email is in that font, although you still need the <code>pre</code> tag to preserve white spaces and newlines."}, {"owner": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529981014, "post_id": 51016423, "comment_id": 89060409, "body": "print MAIL &quot;&lt;html&gt;\\n&lt;body&gt;\\n&lt;p&gt;$message&lt;/p&gt;\\n&lt;pre style=&quot;font-family:Courier New, monospace&quot;&gt;$text&lt;/pre style=&quot;font-family:Courier New, monospace&quot;&gt;\\n&lt;/body&gt;\\n&lt;/html&gt;\\n&quot;; I tried use this command but it show syntax error .. is something i do wrongly?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529981242, "post_id": 51016423, "comment_id": 89060453, "body": "You need to escape double quotes with a blackslash within double quotes, and also you don&#39;t need any attribute for a tag closure like <code>&lt;&#47;pre&gt;</code>, so you should do this instead: <code>print MAIL &quot;&lt;html&gt;\\n&lt;body&gt;\\n&lt;p&gt;$message&lt;&#47;p&gt;\\n&lt;pre style=\\&quot;font-family:Courier New, monospace\\&quot;&gt;$text&lt;&#47;pre&gt;\\n&lt;&#47;body&gt;\\n&lt;&#47;html&gt;\\n&quot;;</code>"}, {"owner": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529981800, "post_id": 51016423, "comment_id": 89060572, "body": "My email sent the result like this  Content-Type: text/html  &lt;html&gt; &lt;body&gt; &lt;p&gt;Hi,this email is sent by using Perl Script&lt;/p&gt; &lt;pre&gt;|hello |  morning | 30 | 40 |  |Yes|evening| 30 | 50 | &lt;/pre&gt; &lt;/body&gt; &lt;/html&gt; The result dint change to courier new..is it because my table is not in HTML ?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529982374, "post_id": 51016423, "comment_id": 89060686, "body": "You must&#39;ve added double newlines at your Subject line: <code>print MAIL &quot;Subject: $subject\\n\\n&quot;</code>. Change it to <code>print MAIL &quot;Subject: $subject\\n&quot;;</code> like I showed you above."}, {"owner": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "edited": false, "score": 0, "creation_date": 1529987704, "post_id": 51016423, "comment_id": 89061813, "body": "Thank you very much for your guidance :) the email able to show the font"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 3, "last_activity_date": 1529902793, "last_edit_date": 1529902793, "creation_date": 1529901738, "answer_id": 51016423, "question_id": 51015961, "link": "https://stackoverflow.com/questions/51015961/how-to-change-the-word-font-in-email-using-perl/51016423#51016423", "title": "How to change the word font in email using perl", "body": "<p>You have to send email in HTML to be able to use a different font. Instead of specifying a font name, however, it's recommended to use the <code>pre</code> tag to allow the system to choose an available fixed-width font, since preserving your text-based table formatting is all you want.</p>\n\n<pre><code># Email Header\nprint MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\";\nprint MAIL \"Content-Type: text/html\\n\\n\";\n# Email Body\nprint MAIL \"&lt;html&gt;\\n&lt;body&gt;\\n&lt;p&gt;$message&lt;/p&gt;\\n&lt;pre&gt;$text&lt;/pre&gt;\\n&lt;/body&gt;\\n&lt;/html&gt;\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1529920847, "creation_date": 1529920847, "answer_id": 51020784, "question_id": 51015961, "link": "https://stackoverflow.com/questions/51015961/how-to-change-the-word-font-in-email-using-perl/51020784#51020784", "title": "How to change the word font in email using perl", "body": "<p>You've got some data in a table format, so you could convert that into a HTML table, which will be rendered correctly in whatever font is used by the email client. And for email clients that don't support HTML, provide a plain text version which would be rendered in a fixed-width font.</p>\n\n<p>The code below parses your pipe-separated CSV file and uses that to build the HTML table and a plain text alternative. Both of which are then added to the <code>MIME::Entity</code> object that will create all the headers you need to be able to send it correctly.</p>\n\n<p>I've used <code>Text::CSV</code> and <code>MIME::Entity</code> but other Perl modules exist that do their job too.</p>\n\n<pre><code>use strict;\nuse MIME::Entity;\nuse Text::CSV;\n\nmy $file=\"test_input.txt\"; # Change this to where your file is\nmy $subject=\"An email\";\nmy $from=\"someone\\@somewhere.com\";\nmy $to=\"someone\\@somewhere.com\";\n\n# Create the CSV parser. Confusingly the \"allow_whitespace\" strips whitespace rather than allowing it to pad out fields\nmy $csv=Text::CSV-&gt;new({sep_char =&gt; \"|\", allow_whitespace =&gt; 1});\n\n# Build the MIME::Entity object\nmy $mime_email=MIME::Entity-&gt;build(\n    From =&gt; $from,\n    To =&gt; $to,\n    Subject =&gt; $subject,\n    Type =&gt; \"multipart/alternative\");\n\nmy $html=\"&lt;table&gt;\\n\";\nmy $text;\nif(open(my $fh,\"&lt;\",$file)) # Use the modern way of opening a file\n    {\n    while(my $line = &lt;$fh&gt;)\n        {\n        $text .= $line;\n        $csv-&gt;parse($line);\n        $html .= \"&lt;tr&gt;\";\n        foreach my $field ($csv-&gt;fields())\n                {\n                $html .= \"&lt;td&gt;\".$field.\"&lt;/td&gt;\";\n                }\n        $html .= \"&lt;/tr&gt;\\n\";\n        }\n    close($fh);\n    }\n$html .= \"&lt;/table&gt;\\n\";\n\n$mime_email-&gt;attach(Type =&gt; \"text/plain\",Data =&gt; $text);\n$mime_email-&gt;attach(Type =&gt; \"text/html\",Data =&gt; $html);\n\n# Send the email\nif(open(my $mail,\"|-\",\"/usr/sbin/sendmail -t\"))\n    {\n    $mime_email-&gt;print($mail);\n    close($mail);\n    }\n</code></pre>\n\n<p>This will generate an email that looks like which should render the table nicely on a variety of email clients in their preferred fonts.</p>\n\n<pre><code>Content-Type: multipart/alternative; boundary=\"----------=_1529920158-30125-0\"\nContent-Transfer-Encoding: binary\nMIME-Version: 1.0\nX-Mailer: MIME-tools 5.505 (Entity 5.505)\nFrom: someone@somewhere.com\nTo: someone@somewhere.com\nSubject: An email\n\nThis is a multi-part message in MIME format...\n\n------------=_1529920158-30125-0\nContent-Type: text/plain\nContent-Disposition: inline\nContent-Transfer-Encoding: binary\n\nhello      |  morning    | 30 | 40 |\nYes        |  evening    | 30 | 50 |\n\n------------=_1529920158-30125-0\nContent-Type: text/html\nContent-Disposition: inline\nContent-Transfer-Encoding: binary\n\n&lt;table&gt;\n&lt;tr&gt;&lt;td&gt;hello&lt;/td&gt;&lt;td&gt;morning&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;Yes&lt;/td&gt;&lt;td&gt;evening&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n\n------------=_1529920158-30125-0--\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9900666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153411020659865/picture?type=large", "display_name": "Ew Ong", "link": "https://stackoverflow.com/users/9900666/ew-ong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 51016423, "answer_count": 2, "score": 1, "last_activity_date": 1529981338, "creation_date": 1529897576, "last_edit_date": 1529981338, "question_id": 51015961, "link": "https://stackoverflow.com/questions/51015961/how-to-change-the-word-font-in-email-using-perl", "title": "How to change the word font in email using perl", "body": "<p>I want to ask how to change the word font (Calibri to Courier New) in email using Perl script? </p>\n\n<p>I was trying to send a file.txt that contain a table format to an email. \nBut, the table did not arrange properly in the email content but the file.txt is arranged nicely. </p>\n\n<p>My result in email:</p>\n\n<pre><code> hello |  morning | 30 | 40 |\n Yes|evening| 30 | 50 |\n</code></pre>\n\n<p>expected output in email:</p>\n\n<pre><code> hello      |  morning    | 30 | 40 |\n Yes        |  evening    | 30 | 50 |\n\nenter code here\n</code></pre>\n\n<p>Below are my code:</p>\n\n<p>#!/usr/bin/perl</p>\n\n<pre><code>my $file = '/nfs/site/disks/fm8_pnr_9/users/eewongon/max_cap/vio_table.txt';\n\nopen my $fh, '&lt;', $file or die \"Cannot open '$file' for reading: $!\";\nmy $text = do {\nlocal $/;\n&lt;$fh&gt;\n};\nclose $fh or die \"Ugh: $!\\n\";\n\n$to = 'someone@somewhere.com';\n$from = 'someone@somewhere.com';\n$subject = 'Testing';\n$message = 'Hi, this is email sent by Perl Script';\n\nopen(MAIL, \"|/usr/sbin/sendmail -t\");\n\n# Email Header\nprint MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\\n\";\n\n# Email Body\nprint MAIL \"$message\\n\";\nprint MAIL \"\\n$text\\n\";\n\nclose(MAIL); \nprint \"Email Sent Successfully\\n\";\n</code></pre>\n"}, {"tags": ["regex", "perl", "libxml2"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529883079, "post_id": 51012558, "comment_id": 89022273, "body": "You say <i>&quot;I read that you can replace content node with <code>appendText</code>, but this is not working for me&quot;</i> but you have no call to <code>appendText</code> in the code that you show. It is essential that the code that you show in a question corresponds exactly to the description that you write, and can be compiled and run by the people that you&#39;re asking for help."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1529912061, "last_edit_date": 1529912061, "creation_date": 1529864175, "answer_id": 51012706, "question_id": 51012558, "link": "https://stackoverflow.com/questions/51012558/change-text-content-of-xml-using-xmllibxml-with-a-regex-pattern/51012706#51012706", "title": "Change text content of XML using XML::LibXML with a regex pattern", "body": "<p>You seem to expect <code>$content</code> to be an alias to the actual DOM node(s), but it is not, it's just a plain string that you need to put back in the DOM tree. Here's one way to do that, it assumes that <code>&lt;content&gt;</code> can only have text and no other child nodes:</p>\n\n<pre><code>foreach my $tweet ($dom-&gt;findnodes('//tweet')) {\n    my @content = $tweet-&gt;findnodes('./content');\n    die \"&lt;tweet&gt; didn't have exactly one &lt;content&gt;: $tweet\"\n        unless @content==1;\n    my $text = $content[0]-&gt;textContent;\n    $text =~ s/@//g;\n    $text =~ s/#/t\u00edo/g;\n    $text =~ s/ ke? /que/g;\n    $text =~ s/pls/por favor/g;\n    $content[0]-&gt;removeChildNodes();\n    $content[0]-&gt;appendText($text);\n}\nprint $dom-&gt;toString;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1529864328, "creation_date": 1529864328, "answer_id": 51012729, "question_id": 51012558, "link": "https://stackoverflow.com/questions/51012558/change-text-content-of-xml-using-xmllibxml-with-a-regex-pattern/51012729#51012729", "title": "Change text content of XML using XML::LibXML with a regex pattern", "body": "<p>You can for example get the content element and set its text() child's data to the new string:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse utf8;\nuse feature qw{ say };\n\nuse XML::LibXML;\n\nmy $dom = 'XML::LibXML'-&gt;load_xml(IO =&gt; *DATA);\n\nfor my $tweet ($dom-&gt;findnodes('//tweet')) {\n    my ($content) = $tweet-&gt;findnodes('./content');\n\n    my $string = $content-&gt;findvalue('.');\n    $string =~ s/@//g;\n    $string =~ s/#/t\u00edo/g;\n    $string =~ s/ k /que/g;\n    $string =~ s/ ke /que/g;\n    $string =~ s/pls/por favor/g;\n\n    $content-&gt;findnodes('text()')-&gt;[0]-&gt;setData($string);\n}\n\nsay $dom-&gt;toString;\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;tweets&gt;\n    &lt;tweet&gt;\n    &lt;tweetid&gt;768213876278165504&lt;/tweetid&gt;\n    &lt;user&gt;OnceBukowski&lt;/user&gt;\n    &lt;content&gt;@caca, #holadictadura, RT no me daaaaaa la gana&lt;/content&gt;\n    &lt;/tweet&gt;\n&lt;/tweets&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9791230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4752daaafe9a1b16b10c88453b3f87fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/9791230/jorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529912061, "creation_date": 1529862992, "last_edit_date": 1529883293, "question_id": 51012558, "link": "https://stackoverflow.com/questions/51012558/change-text-content-of-xml-using-xmllibxml-with-a-regex-pattern", "title": "Change text content of XML using XML::LibXML with a regex pattern", "body": "\n\n<p>I have to clean a twitter corpus in XML, I've parsed it with\n<a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">`XML::LibXML</a>.</p>\n\n<h3>original.xml</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;tweets&gt;\n  &lt;tweet&gt;\n    &lt;tweetid&gt;768213876278165504&lt;/tweetid&gt;\n    &lt;user&gt;OnceBukowski&lt;/user&gt;\n    &lt;content&gt;@caca, #holadictadura, RT no me daaaaaa la gana&lt;/content&gt;\n  &lt;/tweet&gt;\n&lt;tweet&gt;\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $filename = 'original.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\n\nforeach my $tweet ( $dom-&gt;findnodes( '//tweet' ) ) {\n\n    my ( $content ) = $tweet-&gt;findvalue( './content' );\n\n    #say $content;\n\n    #~ $content =~ s///g;\n    $content =~ s/@//g;\n    $content =~ s/#/t\u00edo/g;\n    $content =~ s/ k /que/g;\n    $content =~ s/ ke /que/g;\n    $content =~ s/pls/por favor/g;\n\n    #say $content; }\n</code></pre>\n\n<p>I don't understand why when I print out:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>   print $dom-&gt;toString;\n</code></pre>\n\n<p>The changes that I made in <code>$content</code> have not been included/inserted into the output.</p>\n\n<p>I read that you can replace content node with <code>appendText</code>, but this is not working for me.</p>\n"}, {"tags": ["regex", "windows", "perl", "powershell", "par"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6811411"}, "edited": false, "score": 3, "creation_date": 1529828584, "post_id": 51008015, "comment_id": 89009286, "body": "Iinsert <code>--%</code> to keep powershell from parsing your parameters. <code>pp --% -u -g -o Executable -f Bleach=&quot;^(AAA_|BBB_|MainScript)&quot; MainScript.pl</code> See <a href=\"https://stackoverflow.com/questions/18923315/using-in-powershell\">using --% in powershell</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10920, "user_id": 313088, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a45470bb644ccf6d46a0d364b21c650?s=128&d=identicon&r=PG", "display_name": "Tedd Hansen", "link": "https://stackoverflow.com/users/313088/tedd-hansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1529856610, "creation_date": 1529856610, "answer_id": 51011687, "question_id": 51008015, "link": "https://stackoverflow.com/questions/51008015/pass-a-regex-pattern-to-perl-packer-from-powershell/51011687#51011687", "title": "Pass a regex pattern to Perl Packer from Powershell", "body": "<p><a href=\"https://ss64.com/ps/syntax-esc.html\" rel=\"nofollow noreferrer\">Escape character for Powershell</a> is `.</p>\n\n<p>Something like this could work:<br />\n<code>pp -u -g -o Executable -f Bleach=`\"`(AAA_`|BBB_`|MainScript`)`\" MainScript.pl`</code></p>\n"}], "owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529856610, "creation_date": 1529827196, "last_edit_date": 1529851356, "question_id": 51008015, "link": "https://stackoverflow.com/questions/51008015/pass-a-regex-pattern-to-perl-packer-from-powershell", "title": "Pass a regex pattern to Perl Packer from Powershell", "body": "<p></p>\n\n<p>How do I correctly write this in a Windows Powershell? Coming from macOS, I have some problems in understanding what it is wrong with this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>pp -u -g -o Executable -f Bleach=\"^(AAA_|BBB_|MainScript)\" MainScript.pl\n</code></pre>\n\n<p>The regular expression to be passed to the option -f (filter) is not accepted and fires all sort of errors (command not recognized, and so on, no matter as I try to change it). On a Unix system it works just fine.</p>\n"}, {"tags": ["linux", "shell", "perl", "unix", "external"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529784273, "post_id": 51004489, "comment_id": 89002740, "body": "What do you want these functions to (actually) do from/in the Perl script?  Return some values to Perl? Or just do their thing?"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1529784345, "post_id": 51004489, "comment_id": 89002754, "body": "Your could possibly call a script that defined and called the function, but depending on what it does, it may be better to rewrite it as a Perl function."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1529784440, "post_id": 51004489, "comment_id": 89002776, "body": "You can invoke the function like this from the perl script:  <code>system &#39;bash&#39;, &#39;-c&#39;, &#39;source shell_script.sh; func_1&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1564039451, "last_edit_date": 1564039451, "creation_date": 1529784730, "answer_id": 51004682, "question_id": 51004489, "link": "https://stackoverflow.com/questions/51004489/how-to-call-a-function-defined-in-shell-script-in-a-perl-script/51004682#51004682", "title": "How to call a function (defined in shell script) in a Perl script", "body": "<p>To use <code>bash</code> functions you need to be in <code>bash</code>. So in a Perl script that puts you inside backticks or <code>system</code>, where you are inside a <code>bash</code> process<sup>&dagger;</sup>.  Then, inside that process, you can <code>source</code> the script with functions, what will bring them in, and execute them</p>\n\n<p><strong>funcs.sh</strong></p>\n\n<pre><code>#!/bin/bash\n\nfunction f1 {\n    t1=$1\n    u1=$2\n    echo \"f1: t1=$t1 u1=$u1\"\n}\n\nfunction f2 {\n    t2=$1\n    u2=$2\n    echo \"f2: t2=$t2 u2=$u2\"\n}\n</code></pre>\n\n<p>and in Perl (one-liner)</p>\n\n<pre><code>perl -wE'\n    @r = qx(source funcs.sh; f1 a1 b1; f2 a2 b2); \n    print \"got: $_\" for @r\n'\n</code></pre>\n\n<p>where <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">qx</a> is the operator for backticks, but perhaps clearer.  I use backticks in case  you need return from those functions. If your <code>/bin/sh</code> isn't linked to <code>bash</code><sup>&dagger;</sup> then call <code>bash</code> explicitly</p>\n\n<pre><code>perl -wE'\n    @r = qx(/bin/bash -c \"source funcs.sh; f1 a1 b1; f2 a2 b2\"); \n    print \"got: $_\" for @r\n'\n</code></pre>\n\n<p>Assignment to an array puts <code>qx</code> in list context, in which it returns the <code>STDOUT</code> of what it ran as a list of lines. This can be used to separate return from different functions, if they return a single line each.  The <code>a1,b1</code> and <code>a2,b2</code> are arguments passed to <code>f1</code> and <code>f2</code>.</p>\n\n<p>Prints</p>\n\n<pre>\ngot: f1: t1=a1 u1=b1\ngot: f2: t2=a2 u2=b2\n</pre>\n\n<p>This makes some (reasonable) assumptions.</p>\n\n<p>If there is no need for the return, but the functions only need to do their thing, you can use</p>\n\n<pre><code>system('/bin/bash', '-c', 'source ... ') \n</code></pre>\n\n<p>as in <a href=\"https://stackoverflow.com/a/51004707/4653379\">H\u00e5kon's answer</a></p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&nbsp; It is <code>/bin/sh</code> really, but that is often relegated to <code>bash</code>. Check your system (<code>/bin/sh</code> is likely a link to another shell). Or ensure that <code>bash</code> runs the command</p>\n\n<pre><code>my @ret = qx( /bin/bash -c \"source base.sh; f1 a1 b1; f2 a2 b2\" );\n</code></pre>\n\n<p>See text for the explanation of this example.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 8, "last_activity_date": 1529784977, "creation_date": 1529784977, "answer_id": 51004707, "question_id": 51004489, "link": "https://stackoverflow.com/questions/51004489/how-to-call-a-function-defined-in-shell-script-in-a-perl-script/51004707#51004707", "title": "How to call a function (defined in shell script) in a Perl script", "body": "<p>To invoke a shell <em>function</em>, the shell needs to know its definition. One way to achieve that is to have the shell first <code>source</code> the file which defines the function. And then, without exiting the shell, call the function. From a Perl script, that would be for example:</p>\n\n<pre><code>system 'bash', '-c', 'source shell_script.sh; func_1';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1529788856, "creation_date": 1529788856, "answer_id": 51005146, "question_id": 51004489, "link": "https://stackoverflow.com/questions/51004489/how-to-call-a-function-defined-in-shell-script-in-a-perl-script/51005146#51005146", "title": "How to call a function (defined in shell script) in a Perl script", "body": "<p>It's overkill for this problem, but <a href=\"http://metacpan.org/pod/Env::Modify\" rel=\"nofollow noreferrer\"><code>Env::Modify</code></a> provides a way to make shell functions available in Perl. With <code>Env::Modify</code>, you could, say, import the shell functions once and use them over and over again in subsequence <code>system</code> calls.</p>\n\n<pre><code>use Env::Modify qw(:bash system source qx);\n\n# import the shell functions\nsystem(\"source shell_script.sh ; export -f func_1 func_2\");\n# alternate: put  \"export -f func_1 func_2\"  at the end of shell_script.sh and call\nsource(\"shell_script.sh\");\n\n# use the shell functions\nsystem(\"func_1\");\n$output = `func_2`;\n...\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1564040146, "creation_date": 1529782739, "last_edit_date": 1564040146, "question_id": 51004489, "link": "https://stackoverflow.com/questions/51004489/how-to-call-a-function-defined-in-shell-script-in-a-perl-script", "title": "How to call a function (defined in shell script) in a Perl script", "body": "<p>I have two scripts, namely <code>shell_script.sh</code> and <code>perl_script.pl</code>. </p>\n\n<p><code>shell_script.sh</code> : It has function definitions which, when invoked from Perl script, will execute certain commands on Linux in batch mode.</p>\n\n<p><code>perl_script.pl</code> : It has the code and logic to be implemented, which functions to invoke etc.</p>\n\n<p>The content of <code>shell_script.sh</code> file is as under:</p>\n\n<pre>\nbash-4.2$ cat shell_script.sh\n</pre>\n\n<pre><code>#!/bin/bash\n\n# Function Definitions\nfunc_1 ()\n{\n  echo \"function definition\"\n}\n\nfunc_2 ()\n{\n  echo \"function definition\"\n}\n</code></pre>\n\n<p>The content of <code>perl_script.pl</code> file is as under:</p>\n\n<pre>\nbash-4.2$ cat perl_script.pl\n</pre>\n\n<pre><code>#!/usr/bin/perl\n\nuse Getopt::Long;\n\nmy $var1;\nmy $var1;\n\nGetOptions(\"var1=s\"     =&gt; \\$var1,\n       \"var2=s\" =&gt; \\$var2,\n       \"help|?\" =&gt; \\$help );\n\nif ($help)\n{\n    HelpMenu();\n}\n\nprint \" Can I call the func_1 (defined in shell script) with arguments here..?? (in this perl script)\";\n</code></pre>\n\n<p>How can i invoke the function <code>func_1()</code> (which is defined in <code>shell_script.sh</code>) in the perl script <code>perl_script.pl</code> ?</p>\n"}, {"tags": ["linux", "perl", "raspberry-pi", "raspberry-pi3", "raspbian"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529799905, "post_id": 51003349, "comment_id": 89005547, "body": "The proper name is Linux framebuffer console, just so everyone knows what we&#39;re talking about. I can confirm that blink does not work."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529848722, "post_id": 51003349, "comment_id": 89013842, "body": "Yes, it definitely does not work, hence the post. Do you happen to know why it works in a Centos console ( frame buffer ) for example and not in the Raspian console/Frame buffer. I believe that finding out and understanding the differences between the two is the first step to me finding a solution."}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1530109121, "post_id": 51003396, "comment_id": 89120165, "body": "Yes, I see that the documentation that you site says: &quot;Note that not all attributes are supported by all terminal types, and some terminals may not support any of these sequences.&quot;   But what is &quot;supported by all terminal types&quot; supposed to mean? How many unique linux terminals/consoles types are there? --not talking about terminal emulators. From any linux machine (not in Xwindows) I get &quot;/bin/login --&quot; when I type: ps -o &#39;cmd=&#39; -p $(ps -o &#39;ppid=&#39; -p $$). To simply say &quot;it may not work&quot; does not account for the fact that it does work on what seem to be the same &quot;terminal types&quot;."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1530109404, "post_id": 51003396, "comment_id": 89120374, "body": "I can even find instances where blink works on machines with the exact same terminfo and termcap output as that of machines where it does not work. Please see: <a href=\"https://unix.stackexchange.com/questions/269809/blink-codeescape-code-has-been-removed\" title=\"blink codeescape code has been removed\">unix.stackexchange.com/questions/269809/&hellip;</a>"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1529773934, "creation_date": 1529773934, "answer_id": 51003396, "question_id": 51003349, "link": "https://stackoverflow.com/questions/51003349/perl-termansicolor-not-working-on-raspberry-pi-console/51003396#51003396", "title": "perl Term::ANSIColor not working on Raspberry Pi Console", "body": "<blockquote>\n  <p>Attributes such as blink, italic, or bold may not work with the 256-color palette. -<a href=\"https://metacpan.org/pod/Term::ANSIColor#Supported-Colors\" rel=\"nofollow noreferrer\">documentation</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "is_accepted": false, "score": 1, "last_activity_date": 1573226874, "last_edit_date": 1573226874, "creation_date": 1573069745, "answer_id": 58737512, "question_id": 51003349, "link": "https://stackoverflow.com/questions/51003349/perl-termansicolor-not-working-on-raspberry-pi-console/58737512#58737512", "title": "perl Term::ANSIColor not working on Raspberry Pi Console", "body": "<p>After experimenting I can conclude that the reason that perl ANSI color's blink feature does not work on a Raspberry PI is because the monitor is connected via HDMI. perl ANSI color does in fact blink on a Raspberry PI if one logs in remotely from a machine with a VGA monitor.</p>\n\n<p>Update: Further testing concludes the blinking feature will NOT work by using a HDMI to VGA adapter to connect a VGA monitor to the raspberry PI -- so save yourself the money. The only way possible to get perl ANSIColor's blink feature to work on a PI is by sshing to the machine from a VGA displayed machine.</p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573226874, "creation_date": 1529773536, "question_id": 51003349, "link": "https://stackoverflow.com/questions/51003349/perl-termansicolor-not-working-on-raspberry-pi-console", "title": "perl Term::ANSIColor not working on Raspberry Pi Console", "body": "<p>This code:</p>\n\n<pre><code>use Term::ANSIColor;\nprint color(\"blink bold red\"), \"TEST\\n\";\nprint color(\"reset\"); \n</code></pre>\n\n<p>Has worked for eons on whatever linux console I have used it on. However, I when I try it on a Raspberry Pi console (not Xwindows) running Raspbian Stretch it simply colors the text red but does not blink. Anyone have any ideas as to how I can get this to work?</p>\n"}, {"tags": ["perl", "operator-overloading"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529740522, "post_id": 50998365, "comment_id": 88992339, "body": "potential work-around: <a href=\"http://p3rl.org/Variable::Magic\" rel=\"nofollow noreferrer\">p3rl.org/Variable::Magic</a>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1529742739, "post_id": 50998365, "comment_id": 88992784, "body": "<a href=\"https://www.perlmonks.org/?node_id=1217269\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>, where I wrote a reply (because I saw it there first)."}, {"owner": {"reputation": 349, "user_id": 3711695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vJ3k3.png?s=128&g=1", "display_name": "pudge", "link": "https://stackoverflow.com/users/3711695/pudge"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529766413, "post_id": 50998365, "comment_id": 88998565, "body": "@daxim I don&#39;t think it helps, since it&#39;s on assignment that I lose, and magic is lost on assignment.  Not sure how I could leverage that here.  Basically, I want control over when stringification happens, but it doesn&#39;t look like I can do that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1529768029, "post_id": 50998365, "comment_id": 88998905, "body": "Tip: <code>sub new {     my($value) = @_;     bless((ref $value ? $value : \\$value), __PACKAGE__); } </code> should be <code>sub new {     my($class, $value) = @_;     bless((ref $value ? $value : \\$value)), $class); } </code> and <code>str::new(&#39;foo&#39;)</code> should be <code>str-&gt;new(&#39;foo&#39;)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1529791251, "post_id": 50998365, "comment_id": 89004301, "body": "I recommend that you use the <code>perlbug</code> command line tool to ask p5p to explain the outcome of <a href=\"https://www.perlmonks.org/?displaytype=displaycode;node_id=1217306;part=2;abspart=1\" rel=\"nofollow noreferrer\">this cleaned up version of your program</a>. Include the output."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1530316205, "post_id": 50998365, "comment_id": 89208234, "body": "@ysth, See RT#132793. <a href=\"https://perl5.git.perl.org/perl.git/commit/55b62dee2d8dffa7b36b3b613ee4727fbefdb9e3\" rel=\"nofollow noreferrer\">Commit 55b62dee2d8dffa7b36b3b613ee4727fbefdb9e3</a> &quot;merely restores the existing buggy and inconsistent 5.26.0 and earlier behaviour.&quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1530317448, "post_id": 50998365, "comment_id": 89208419, "body": "@ikegami thanks, I think that will be helpful in trying to fix the perl bug/inconsistency.  though it doesn&#39;t quite match what I&#39;m seeing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1530317987, "post_id": 50998365, "comment_id": 89208504, "body": "@ysth, The point is this is a known bug, though there may not be a ticket for it."}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 6665383, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MVEE-7g_i5c/AAAAAAAAAAI/AAAAAAAADpU/_CP1fJ1LVhU/photo.jpg?sz=128", "display_name": "Nathan Loyer", "link": "https://stackoverflow.com/users/6665383/nathan-loyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1534478828, "creation_date": 1534478828, "answer_id": 51888256, "question_id": 50998365, "link": "https://stackoverflow.com/questions/50998365/perl-overloading-weirdness/51888256#51888256", "title": "Perl Overloading Weirdness", "body": "<p>Well it ain't a great solution and doesn't answer why perl does this, but I got something... I left a few debugging print statements in there.</p>\n\n<p>For whatever reason perl thinks you want to convert the scalar reference to your object to a scalar string. You can trick it into not doing this by adding a reference to the reference, then dereferencing it. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\nuse Data::Dumper; $Data::Dumper::Sortkeys=1;\nuse Scalar::Util 'reftype';\n\nmy $str1 = str::new('foo');\nmy $str2 = str::new('bar');\n\nsay 'good1';\nmy $good1 = \"$str1 $str2\";\nsay 'g1 ', reftype($good1);\nsay Dumper $good1;\n\nsay 'bad1';\nmy $bad1;\nsay 'b1 ', reftype($bad1);\n$bad1 = \"$str1 $str2\";\nsay 'b2 ', reftype($bad1);\nsay Dumper $bad1;\n\nsay 'workaround';\nmy $workaround;\nsay 'w1 ', reftype($workaround);\n$workaround = ${\\\"$str1 $str2\"};\nsay 'w2 ', reftype($workaround);\nsay Dumper $workaround;\n\n\npackage str;\nuse Data::Dumper; $Data::Dumper::Sortkeys=1;\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Scalar::Util 'reftype';\n\nuse overload (\n    '\"\"'        =&gt; \\&amp;stringify,\n    '.'         =&gt; \\&amp;concat,\n);\n\nsub new {\n    my ($value) = @_;\n    bless((ref $value ? $value : \\$value), __PACKAGE__);\n} \n\nsub stringify {\n    my ($str) = @_;\n\n    say \"stringify\";\n    say reftype($str);\n\n    if (reftype($str) eq 'ARRAY') {\n        say scalar @$str;\n        return join '', @$str;\n    }\n    else {\n        $$str;\n    }\n}\n\nsub concat {\n    my ($s1, $s2, $inverted) = @_;\n\n    say \"concat\";\n    say reftype($s1);\n    say reftype($s2);\n    say reftype($inverted);\n\n    return new( $inverted ? [$s2, $s1] : [$s1, $s2] );\n}\n\n1;\n</code></pre>\n\n<p>$workaround gets you the following</p>\n\n<pre><code>$VAR1 = bless( [\n                 bless( [\n                          bless( do{\\(my $o = 'foo')}, 'str' ),\n                          ' '\n                        ], 'str' ),\n                 bless( do{\\(my $o = 'bar')}, 'str' )\n               ], 'str' );\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 3711695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vJ3k3.png?s=128&g=1", "display_name": "pudge", "link": "https://stackoverflow.com/users/3711695/pudge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 1, "answer_count": 1, "score": 13, "last_activity_date": 1534478828, "creation_date": 1529733168, "question_id": 50998365, "link": "https://stackoverflow.com/questions/50998365/perl-overloading-weirdness", "title": "Perl Overloading Weirdness", "body": "<p>Long story short: we want to mark strings so that later we can do something with them, even if they get embedded in other strings.</p>\n\n<p>So we figured, hey, let's try overloading.  It is pretty neat.  I can do something like:</p>\n\n<pre><code>my $str = str::new('&lt;encode this later&gt;');\nmy $html = \"&lt;html&gt;$str&lt;/html&gt;\";\nprint $html; # &lt;html&gt;&lt;encode this later&gt;&lt;/html&gt;\nprint $html-&gt;encode; # &lt;html&gt;&amp;lt;encode this later&amp;gt;&lt;/html&gt;\n</code></pre>\n\n<p>It does this by overloading the concatenation operator to make a new object array with the plain string \"&lt;html>\", the object wrapping \"&lt;encode this later>\", and the plain string \"&lt;/html>\".  It can nest these arbitrarily.  On encode, it will leave the plain strings, but encode the object strings.  But if you stringify the object, it just spits it all out as plain strings.</p>\n\n<p>This works well, except that in some cases, it stringifies for no apparent reason.  The script below shows the behavior, which I've duplicated in 5.10 through 5.22.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\nuse Data::Dumper; $Data::Dumper::Sortkeys=1;\n\nmy $str1 = str::new('foo');\nmy $str2 = str::new('bar');\n\nmy $good1 = \"$str1 $str2\";\nmy $good2;\n$good2 = $good1;\nmy($good3, $good4);\n$good3 = \"$str1 a\";\n$good4 = \"a $str1\";\n\nmy($bad1, $bad2, $bad3);\n$bad1 = \"a $str1 a\";\n$bad2 = \"$str1 $str2\";\n$bad3 = \"a $str1 a $str2 a\";\n\nsay Dumper { GOOD =&gt; [$good1, $good2, $good3], BAD =&gt; [$bad1, $bad2, $bad3] };\n\n$bad1 = ''.\"a $str1 a\";\n$bad2 = ''.\"$str1 $str2\";\n$bad3 = ''.\"a $str1 a $str2 a\";\nsay Dumper { BAD_GOOD =&gt; [$bad1, $bad2, $bad3] };\n\n\npackage str;\nuse Data::Dumper; $Data::Dumper::Sortkeys=1;\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Scalar::Util 'reftype';\n\nuse overload (\n    '\"\"'        =&gt; \\&amp;stringify,\n    '.'         =&gt; \\&amp;concat,\n);\n\nsub new {\n    my($value) = @_;\n    bless((ref $value ? $value : \\$value), __PACKAGE__);\n} \n\nsub stringify {\n    my($str) = @_;\n    #say Dumper { stringify =&gt; \\@_ };\n    if (reftype($str) eq 'ARRAY') {\n        return join '', @$str;\n    }\n    else {\n        $$str;\n    }\n}\n\nsub concat {\n    my($s1, $s2, $inverted) = @_;\n    #say Dumper { concat =&gt; \\@_ };\n    return new( $inverted ? [$s2, $s1] : [$s1, $s2] );\n}\n\n1;\n</code></pre>\n\n<p>I want all of these to be dumped as objects, not strings.  But the \"BAD\" examples are all stringified.  All of the \"BAD\" examples are when I'm assigning a string object I am concatenating at the moment to a variable previously declared.  If I declare at the same time, or concatenate the strings previously, or add in an extra concatenation (beyond the interpolated string concat), then it works fine.</p>\n\n<p>This is nuts.</p>\n\n<p>The result of the script:</p>\n\n<pre><code>$VAR1 = {\n    'BAD' =&gt; [\n        'a foo a',\n        'foo bar',\n        'a foo a bar a'\n    ],\n    'GOOD' =&gt; [\n        bless( [\n            bless( [\n                bless( do{\\(my $o = 'foo')}, 'str' ),\n                ' '\n            ], 'str' ),\n            bless( do{\\(my $o = 'bar')}, 'str' )\n        ], 'str' ),\n        $VAR1-&gt;{'GOOD'}[0],\n        bless( [\n            $VAR1-&gt;{'GOOD'}[0][0][0],\n            ' a'\n        ], 'str' )\n    ]\n};\n\n$VAR1 = {\n    'BAD_GOOD' =&gt; [\n        bless( [\n            '',\n            bless( [\n                bless( [\n                    'a ',\n                    bless( do{\\(my $o = 'foo')}, 'str' )\n                ], 'str' ),\n                ' a'\n            ], 'str' )\n        ], 'str' ),\n        bless( [\n            '',\n            bless( [\n                bless( [\n                    $VAR1-&gt;{'BAD_GOOD'}[0][1][0][1],\n                    ' '\n                ], 'str' ),\n                bless( do{\\(my $o = 'bar')}, 'str' )\n            ], 'str' )\n        ], 'str' ),\n        bless( [\n            '',\n            bless( [\n                bless( [\n                    bless( [\n                        bless( [\n                            'a ',\n                            $VAR1-&gt;{'BAD_GOOD'}[0][1][0][1]\n                        ], 'str' ),\n                        ' a '\n                    ], 'str' ),\n                    $VAR1-&gt;{'BAD_GOOD'}[1][1][1]\n                ], 'str' ),\n                ' a'\n            ], 'str' )\n        ], 'str' )\n    ]\n};\n</code></pre>\n\n<p>The behavior makes no sense to me.  I'd like to understand why it works this way, and I'd like to find a workaround.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 0, "last_activity_date": 1529724918, "creation_date": 1529724918, "answer_id": 50997718, "question_id": 50997451, "link": "https://stackoverflow.com/questions/50997451/perl-remove-string-between-table-tags/50997718#50997718", "title": "Perl-remove string between table tags", "body": "<p><code>@find</code> contains the string <code>\\n(aaa)\\n</code> (where <code>\\n</code> is a newline character). When you call <code>$data =~ s/$_//</code>, you are not matching because the parentheses characters in <code>$_</code> are regexp metacharacters. <code>$data =~ s/\\n(aaa)\\n//</code> does not match and replace the string <code>\\n(aaa)\\n</code>; it matches the string <code>\\naaa\\n</code> and returns the string <code>aaa</code> as a capture group (say, in the special variable <code>$1</code>).</p>\n\n<p>Perl provides a couple of mechanisms to match a literal string in a regular expression. One is to wrap the string in <code>\\Q</code> and (sometimes optional) <code>\\E</code> tags:</p>\n\n<pre><code>$data =~ s/\\Q$_\\E//;           # match literal contents of $_\n</code></pre>\n\n<p>A second way is to use the <a href=\"http://metacpan.org/pod/perlfunc#quotemeta\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> function prior to applying the regular expression.</p>\n\n<pre><code>my $q = quotemeta($_);\n$data =~ s/$q//;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1529749313, "post_id": 50998029, "comment_id": 88994287, "body": "The regexp vs parsing choice also depends on the quality of the HTML. Dirty input sometimes require dirty methods (regexp)."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1529752734, "post_id": 50998029, "comment_id": 88995090, "body": "To be fair, LibXML&#39;s HTML parsing is very good at dealing with poor quality HTML."}, {"owner": {"reputation": 13, "user_id": 5310666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8bafa53363310e7bb6fc56739e7f34?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/5310666/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1529886235, "post_id": 50998029, "comment_id": 89022681, "body": "Thank you very much! I will look into the HTML parsing in Perl."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1529729112, "creation_date": 1529729112, "answer_id": 50998029, "question_id": 50997451, "link": "https://stackoverflow.com/questions/50997451/perl-remove-string-between-table-tags/50998029#50998029", "title": "Perl-remove string between table tags", "body": "<p>Although you can get away with regexes for quick-and-dirty manipulation of HTML, you might like to consider using an HTML parser as a less error-prone approach.  Here's an example:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.012;\nuse strict;\nuse warnings;\nuse autodie;\n\nuse XML::LibXML;\n\nmy $html = &lt;&lt;'EOF';\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Test Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;table&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;&lt;th&gt;Country&lt;/th&gt;&lt;th&gt;Population&lt;/th&gt;&lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr&gt;&lt;td&gt;Lithuania&lt;/td&gt;&lt;td&gt;2,908,249&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;td&gt;Bermuda&lt;/td&gt;&lt;td&gt;61,666&lt;/td&gt;&lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;table&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;&lt;th&gt;Country&lt;/th&gt;&lt;th&gt;Population&lt;/th&gt;&lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr&gt;&lt;td&gt;Botswana&lt;/td&gt;&lt;td&gt;2,250,260&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;td&gt;Dominica&lt;/td&gt;&lt;td&gt;73,543&lt;/td&gt;&lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nEOF\n\nmy $dom = XML::LibXML-&gt;load_html(\n    string  =&gt; $html,\n    recover =&gt; 1,\n);\n\nforeach my $table ($dom-&gt;findnodes('//table')) {\n    my $text_content = $table-&gt;to_literal;\n    if($text_content =~ /botswana/i) {\n        $table-&gt;parentNode-&gt;removeChild($table);\n    }\n}\n\nsay $dom-&gt;toStringHTML();\n</code></pre>\n\n<p><a href=\"http://grantm.github.io/perl-libxml-by-example/html.html\" rel=\"nofollow noreferrer\">Some more examples</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1529750656, "post_id": 50999268, "comment_id": 88994612, "body": "Without the &lt;html&gt; it doesn&#39;t work. Also with <code>&lt;tr&gt;&lt;td&gt;xyz&lt;&#47;td&gt;&lt;&#47;tr&gt;</code> instead of just <code>xyz</code>."}, {"owner": {"reputation": 13, "user_id": 5310666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8bafa53363310e7bb6fc56739e7f34?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/5310666/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1529886267, "post_id": 50999268, "comment_id": 89022687, "body": "Thank you very much for the suggestion! I will try it."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1529741312, "creation_date": 1529741312, "answer_id": 50999268, "question_id": 50997451, "link": "https://stackoverflow.com/questions/50997451/perl-remove-string-between-table-tags/50999268#50999268", "title": "Perl-remove string between table tags", "body": "<pre><code>use Web::Query::LibXML 'wq';\nmy $w = wq &lt;&lt;'HTML';\n&lt;html&gt;&lt;body&gt;\n&lt;table&gt;\n(aaa)\n&lt;/table&gt;\n\n&lt;table&gt;\nxyz\n&lt;/table&gt;\nHTML\n$w-&gt;find('table:not(:contains(\"xyz\"))')-&gt;html('');\nprint $w-&gt;as_html;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5310666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8bafa53363310e7bb6fc56739e7f34?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/5310666/perlbeginner"}, "edited": false, "score": 0, "creation_date": 1529886183, "post_id": 51000325, "comment_id": 89022676, "body": "Thank you very much for the suggestion! I will look at the HTML parsing using Perl."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1529750233, "creation_date": 1529750233, "answer_id": 51000325, "question_id": 50997451, "link": "https://stackoverflow.com/questions/50997451/perl-remove-string-between-table-tags/51000325#51000325", "title": "Perl-remove string between table tags", "body": "<pre><code>$data =~ s{(&lt;table.*?&gt;)(.*?)(&lt;/table&gt;)}\n          {\n            my($one,$two,$three) = ($1,$2,$3);\n            $two =~ /xyz/\n            ? \"$one$two$three\"\n            : \"$one$three\"\n          }esig;\n</code></pre>\n\n<p>...but that wouldn't work if you have a &lt;table> inside a &lt;table>. Do real HTML-parsing if so.</p>\n"}], "owner": {"reputation": 13, "user_id": 5310666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c8bafa53363310e7bb6fc56739e7f34?s=128&d=identicon&r=PG&f=1", "display_name": "perlbeginner", "link": "https://stackoverflow.com/users/5310666/perlbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 50997718, "answer_count": 4, "score": 0, "last_activity_date": 1529783578, "creation_date": 1529720867, "question_id": 50997451, "link": "https://stackoverflow.com/questions/50997451/perl-remove-string-between-table-tags", "title": "Perl-remove string between table tags", "body": "<p>I am new to Perl and am trying to remove tables from HTML files under some conditions. </p>\n\n<p>Here is an example. I want to remove the string between table tags if the string does not contain the string xyz. But the code does not work, it does not remove the first table. How should I revise the codes to make it work? Thank you very much!!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy $data = &lt;&lt;TEXT;\n\n&lt;table&gt;\n(aaa)\n&lt;/table&gt;\n\n&lt;table&gt;\nxyz\n&lt;/table&gt;\n\nTEXT\n\nmy @find=();\n@find=$data =~ m/&lt;TABLE[^&gt;]*&gt;(.*?)&lt;\\/TABLE&gt;/imosg;\n\nforeach (@find) {\nif ($_!~ m/xyz/imosg){$data =~ s/$_//;}\n}\n\nprint \"$data\\n\",\"*\" x 40, \"\\n\" ;\n</code></pre>\n"}, {"tags": ["regex", "perl", "split", "substr"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529698494, "post_id": 50994990, "comment_id": 88984572, "body": "Always <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 507, "user_id": 1386105, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9998f925274c7b72124988588121d673?s=128&d=identicon&r=PG", "display_name": "jtatria", "link": "https://stackoverflow.com/users/1386105/jtatria"}, "edited": false, "score": 0, "creation_date": 1529698605, "post_id": 50994990, "comment_id": 88984624, "body": "You are using the wrong character for the split. Your dates string literal uses a long dash (\u2013), while your split function call is using a regular hyphen. I just tried copying the character from the string directly and pasting as separator in the split call and it works flawlessly."}, {"owner": {"reputation": 21, "user_id": 9980069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4nO4.png?s=128&g=1", "display_name": "DewBe", "link": "https://stackoverflow.com/users/9980069/dewbe"}, "edited": false, "score": 0, "creation_date": 1529698623, "post_id": 50994990, "comment_id": 88984633, "body": "Thank you for your advice. In my actual source code I am utilizing both of those options. This post only contains a small portion of the source code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1529698877, "post_id": 50994990, "comment_id": 88984731, "body": "Try <code>@dates = split(&#47;\\p{Dash}&#47;, $date);</code> Or <code>@dates = split(&#47;[\\x{2D}\\x{58A}\\x{5BE}\\x{1400}\\x{1806}\\x{2010}-\\x{2015&zwnj;&#8203;}\\x{2053}\\x{207B}\\x{&zwnj;&#8203;208B}\\x{2212}\\x{2E17&zwnj;&#8203;}\\x{2E1A}\\x{2E3A}-\\x&zwnj;&#8203;{2E3B}\\x{2E40}\\x{301&zwnj;&#8203;C}\\x{3030}\\x{30A0}\\x&zwnj;&#8203;{FE31}-\\x{FE32}\\x{FE&zwnj;&#8203;58}\\x{FE63}\\x{FF0D}]&zwnj;&#8203;&#47;, $date);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9980069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4nO4.png?s=128&g=1", "display_name": "DewBe", "link": "https://stackoverflow.com/users/9980069/dewbe"}, "edited": false, "score": 1, "creation_date": 1529699135, "post_id": 50995099, "comment_id": 88984831, "body": "Thank you very much for your detailed explanation. This is exactly what I was looking for and helped fix my problem! You&#39;re the best!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 8, "last_activity_date": 1529699177, "last_edit_date": 1529699177, "creation_date": 1529698893, "answer_id": 50995099, "question_id": 50994990, "link": "https://stackoverflow.com/questions/50994990/how-to-split-a-string-containing-a-hyphen-in-perl/50995099#50995099", "title": "How to split a string containing a hyphen in perl", "body": "<p>The problem here is that you're trying to split on <code>-</code> (U+002D HYPHEN-MINUS) but your string contains <code>\u2013</code> (U+2013 EN DASH).</p>\n\n<p>There are a couple of ways you can specify this character in a regex:</p>\n\n<pre><code>use utf8;\n...\nmy ($StartDate, $EndDate) = split /\u2013/, $date;\n</code></pre>\n\n<p><code>use utf8</code> tells perl that your source code is in UTF-8, so you can use Unicode characters literally.</p>\n\n<pre><code>my ($StartDate, $EndDate) = split /\\x{2013}/, $date;\n</code></pre>\n\n<p>Or you can use a hex character code.</p>\n\n<pre><code>my ($StartDate, $EndDate) = split /\\N{EN DASH}/, $date;\n</code></pre>\n\n<p>Or a named character reference.</p>\n\n<p>If you don't necessarily want to split on EN DASH but any dash-like character, you can use a character class based on the \"Dash\" property:</p>\n\n<pre><code>my ($StartDate, $EndDate) = split /\\p{Dash}/, $date;\n</code></pre>\n\n<hr>\n\n<p>Note that <code>@dates[0]</code> will trigger a warning (if <code>use warnings</code> is enabled, which it should be) because a single element of an array <code>@foo</code> is spelled <code>$foo[0]</code> in Perl. The syntax <code>@array[ LIST ]</code> is used for array slices, i.e. extracting multiple elements by their indices.</p>\n"}], "owner": {"reputation": 21, "user_id": 9980069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4nO4.png?s=128&g=1", "display_name": "DewBe", "link": "https://stackoverflow.com/users/9980069/dewbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 50995099, "answer_count": 1, "score": 1, "last_activity_date": 1529699177, "creation_date": 1529698367, "last_edit_date": 1529698748, "question_id": 50994990, "link": "https://stackoverflow.com/questions/50994990/how-to-split-a-string-containing-a-hyphen-in-perl", "title": "How to split a string containing a hyphen in perl", "body": "<p>I have a string referred to as ($date) that I am trying to split into two parts using Perl. </p>\n\n<pre><code>$date= (June 25, 2018\u2013July 1, 2018)\n</code></pre>\n\n<p>From what I have read it seems that the proper way to split this string into the two separate dates would be to create a new array, use the Perl split() function with the hyphen as a delimiter and then assign the array index values to my StartDate/EndDate variables like this...</p>\n\n<pre><code>@dates = split(/-/, $date);\n  $StartDate = @dates[0];\n  $EndDate = @dates[1];\n\nprint \"Effective Date: ($date)\\n\";\nprint \"($StartDate)\";\nprint \"\\n\";\nprint \"($EndDate)\";\n</code></pre>\n\n<p>However this does not work as I expected it to. </p>\n\n<p>Please keep in mind that the code above is only a small section of the source code. </p>\n\n<pre><code>Current Output (Incorrect)\n\nEffective Date: (June 25, 2018\u2013July 1, 2018)\n(June 25, 2018\u2013July 1, 2018)\n()\n</code></pre>\n\n<p>Expected Output (Correct)</p>\n\n<pre><code>Effective Date: (June 25, 2018\u2013July 1, 2018)\n(June 25, 2018)\n(July 1, 2018)\n</code></pre>\n\n<p>Looking for any advice on how to achieve my goal.</p>\n"}, {"tags": ["regex", "linux", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529691790, "post_id": 50993647, "comment_id": 88981919, "body": "What do you mean by &quot;translator&quot;? Also, do you know any Perl?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1529694727, "post_id": 50993647, "comment_id": 88983123, "body": "What&#39;s it supposed to correct ? Got any examples ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1529695337, "post_id": 50993647, "comment_id": 88983363, "body": "If you&#39;re trying to correct end of record when quoted fields span lines, this is only a partial fix, since more than likely it will span more than one line. If using Perl, it&#39;s easy to write your own csv parser to handle fields spanning lines."}, {"owner": {"reputation": 11, "user_id": 9979785, "user_type": "registered", "profile_image": "https://graph.facebook.com/2087682814578344/picture?type=large", "display_name": "Brad Estep", "link": "https://stackoverflow.com/users/9979785/brad-estep"}, "edited": false, "score": 0, "creation_date": 1529696112, "post_id": 50993647, "comment_id": 88983672, "body": "A REGEX translator <a href=\"http://xenon.stanford.edu/~xusch/regexp/\" rel=\"nofollow noreferrer\">xenon.stanford.edu/~xusch/regexp</a>, and don&#39;t have much knowledge, no.  I know that -i -pe means it will be edited in place and overwrtitten with the same file name"}, {"owner": {"reputation": 11, "user_id": 9979785, "user_type": "registered", "profile_image": "https://graph.facebook.com/2087682814578344/picture?type=large", "display_name": "Brad Estep", "link": "https://stackoverflow.com/users/9979785/brad-estep"}, "edited": false, "score": 0, "creation_date": 1529696380, "post_id": 50993647, "comment_id": 88983773, "body": "@sln I can&#39;t be sure about the source correction, I haven&#39;t figured out what its doing yet, this same line is repeated about 30 times in the script.  But thanks for that input,, what do you mean by &quot;trying to correct end of record&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1529697340, "post_id": 50993647, "comment_id": 88984163, "body": "<code>, field info\\n</code> &lt;- EOR in most csv parsers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1529697720, "post_id": 50993647, "comment_id": 88984293, "body": "If you want to terminate it, insert a quote instead <code>s&#47;(,\\h*&quot;[^\\n&quot;]*)\\n&#47;$1&quot;\\n&#47;g</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1530043060, "post_id": 50993647, "comment_id": 89092019, "body": "Added an answer to fix your problem."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1529695203, "post_id": 50993824, "comment_id": 88983294, "body": "<code>In overall, the whole expression replaces newline after a field with a space</code> - I think it replaces a trailing string field that is not terminated with a quote and removing it&#39;s newline terminator. The problem is that common csv parsers perceive an <i>NEWLINE</i> as an end-of-record. This won&#39;t fix his problem since the quoted field could span lines, but what the hell .."}], "tags": [], "owner": {"reputation": 2295, "user_id": 954570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99ee3ff4c19463d9ad0e2fb37582278?s=128&d=identicon&r=PG", "display_name": "vitaly", "link": "https://stackoverflow.com/users/954570/vitaly"}, "is_accepted": false, "score": 0, "last_activity_date": 1529959129, "last_edit_date": 1529959129, "creation_date": 1529692400, "answer_id": 50993824, "question_id": 50993647, "link": "https://stackoverflow.com/questions/50993647/perl-regex-pattern-for-csv-correction/50993824#50993824", "title": "Perl REGEX pattern for CSV correction", "body": "<p><em>Edited this to second Schwern (also upvoted): regular expressions seem to be a poor fit for manipulating CSV.</em></p>\n\n<p>As for the regular expression in question, let's dissect it. Starting with the top level:</p>\n\n<p><code>'s/(,\\h*\"[^\\n\"]*)\\n/$1 /g'</code></p>\n\n<p>The <code>s/part1/part2/g</code> expression means \"substitute the first part with the second part everywhere\".</p>\n\n<p>Now let's examing the \"first part\":</p>\n\n<p><code>(,\\h*\"[^\\n\"]*)\\n</code></p>\n\n<p>The parentheses are enclosing a group. There is only one group, so it becomes group number 1. We'll come back to that in the next step.</p>\n\n<p>Then, check out <a href=\"https://perldoc.perl.org/perlrebackslash.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlrebackslash.html</a> for explanation of the character classes. <code>\\h</code> is a horizontal whitespace and <code>\\n</code> is a logical newline character.</p>\n\n<p>The expression inside the group is stating: \"starts with a comma, then any number of horizontal whitespace characters, then anything but a newline and quote; finally, there must be a trailing newline\". So it is basically a comma follwed by a csv field.</p>\n\n<p>Lastly, the \"second part\" reads:</p>\n\n<p><code>$1</code></p>\n\n<p>This is just a reference to the group number 1 that was captured earlier followed by a space.</p>\n\n<p>In overall, the whole expression replaces a trailing string field that is not terminated with a quote and removing it's newline terminator. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1529698656, "post_id": 50993947, "comment_id": 88984645, "body": "And you can replace <code>say Dumper $row;</code> with <code>s&#47;\\n+&#47; &#47;g for @$row; $csv-&gt;say(\\*STDOUT, $row);</code> if the goal is to produce a corrected CSV rather than consuming it immediately."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1529693848, "last_edit_date": 1529693848, "creation_date": 1529692951, "answer_id": 50993947, "question_id": 50993647, "link": "https://stackoverflow.com/questions/50993647/perl-regex-pattern-for-csv-correction/50993947#50993947", "title": "Perl REGEX pattern for CSV correction", "body": "<p>First, don't try and manipulate CSV (or XML or HTML) with regexes. While CSV might seem simple, it can be subtle. Instead use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>. The exception is if your CSV is malformed and you're fixing it.</p>\n\n<p>Now, for what your regex is doing. First, let's translate it it from <code>s//</code> to <code>s{}{}</code> which is a bit easier on the eyes and use <code>\\x</code> so we can space things out a bit.</p>\n\n<pre><code>s{\n    # Capture to $1\n    (\n        # A comma.\n        ,\n        # 0 or more `h` \"horizontal whitespace\": tabs and spaces\n        \\h*\n        # A quote.\n        \"\n        # 0 or more of anything which is not a quote or newline.\n        [^\\n\"]*\n    )\n    # A newline (not captured)\n    \\n\n}\n# Put the captured bit in with a space after it.\n# The `g` says to do it multiple times over the whole string.\n{$1 }gx\n</code></pre>\n\n<p>It will change <code>foo, \"bar\\n</code> into <code>foo, \"bar</code>. I'm guessing it's turning text fields in the CSV with newlines in them into ones with just spaces.</p>\n\n<pre><code>foo, \"first\nfield\", \"second\nfield\"\n</code></pre>\n\n<p>Will become</p>\n\n<pre><code>foo, \"first field\", \"second field\"\n</code></pre>\n\n<hr>\n\n<p>This is something better handled with Text::CSV. I suspect the purpose of the transform is to help out CSV parsers which cannot handle newlines. <a href=\"https://metacpan.org/pod/Text::CSV#Embedded-newlines\" rel=\"nofollow noreferrer\">Text::CSV can with a little coercing</a>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\nuse autodie;\n\nuse Text::CSV;\nuse IO::Scalar;\nuse Data::Dumper;\n\n# Pretend our scalar is an IO object so we can use `getline`.\nmy $str = qq[foo, \"bar\", \"this\\nthat\"\\n];\nmy $io = IO::Scalar-&gt;new(\\$str);\n\n# Configure Text::CSV\nmy $csv = Text::CSV-&gt;new({\n    # Embedded newlines normally aren't allowed, this tells Text::CSV to\n    # treat the content as binary instead.\n    binary=&gt; 1,\n\n    # Allow spaces between the cells.\n    allow_whitespace =&gt; 1\n});\n\n# Use Text::CSV-&gt;getline() to do the parsing.\nwhile( my $row = $csv-&gt;getline($io) ) {\n    # Dump the contents of the row\n    say Dumper $row;\n}\n</code></pre>\n\n<p>And it will correctly parse the row and its embedded newlines.</p>\n\n<pre><code>$VAR1 = [\n          'foo',\n          'bar',\n          'this\nthat'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1530042795, "last_edit_date": 1530042795, "creation_date": 1530042033, "answer_id": 51050297, "question_id": 50993647, "link": "https://stackoverflow.com/questions/50993647/perl-regex-pattern-for-csv-correction/51050297#51050297", "title": "Perl REGEX pattern for CSV correction", "body": "<p><em><strong>The best way to fix newlines in quoted fields that masquerade as End-Of-Record :</strong></em>  </p>\n\n<p>First, don't try and manipulate CSV (or XML or HTML) with modules. While CSV might seem tricky, it is extremely simple. Don't use Text::CSV. Instead, use a substitute regex with a callback.  </p>\n\n<p>Also, you can use the regex to just correctly <em>parse</em> a csv without replacing<br>\nnewlines, but you probably want to use Perl to <em>fix</em> it for use in some other language.</p>\n\n<p>Regex (with trim)  </p>\n\n<p><code>/((?:^|,|\\r?\\n))\\s*(?:(\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"[^\\S\\r\\n]*(?=$|,|\\r?\\n))|([^,\\r\\n]*(?=$|,|\\r?\\n)))/</code>  </p>\n\n<p>Explained  </p>\n\n<pre><code> (                                  # (1 start), Delimiter (comma or newline)\n      (?: ^ | , | \\r? \\n )\n )                                  # (1 end)\n \\s*                                # Leading optional whitespaces ( this is for trim )\n                                    # ( if no trim is desired, remove this, add \n                                    #  [^\\S\\r\\n]* to end of group 1 )\n (?:\n      (                                  # (2 start), Quoted string field\n           \"                                  # Quoted string\n           [^\"\\\\]* \n           (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n           \"\n           [^\\S\\r\\n]*                         # Trailing optional horizontal whitespaces\n           (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n      )                                  # (2 end)\n   |                                   # OR\n      (                                  # (3 start), Non quoted field\n           [^,\\r\\n]*                          # Not comma or newline\n           (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n      )                                  # (3 end)\n )\n</code></pre>\n\n<hr>\n\n<p>(<em>Note - this requires a script.</em>)  </p>\n\n<p>Perl sample  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n$/ = undef;\n\nsub RmvNLs {\n   my ($delim, $quote, $non_quote) = @_;\n   if ( defined $non_quote ) {\n      return $delim . $non_quote;\n   }\n   $quote =~ s/\\s*\\r?\\n/ /g;\n   return $delim . $quote;\n}\n\nmy $csv = &lt;DATA&gt;;\n\n$csv =~ s/\n     (                                  # (1 start), Delimiter (comma or newline)\n          (?: ^ | , | \\r? \\n )\n     )                                  # (1 end)\n     \\s*                                # Leading optional whitespaces ( this is for trim )\n                                        # ( if no trim is desired, remove this, add [^\\S\\r\\n]* to end of group 1 )\n     (?:\n          (                                  # (2 start), Quoted string field\n               \"                                  # Quoted string\n               [^\"\\\\]* \n               (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n               \"\n               [^\\S\\r\\n]*                         # Trailing optional horizontal whitespaces\n               (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n          )                                  # (2 end)\n       |                                   # OR\n          (                                 # (3 start), Non quoted field\n               [^,\\r\\n]*                          # Not comma or newline\n               (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n          )                                  # (3 end)\n     )\n   /RmvNLs($1,$2,$3)/xeg;\n\nprint $csv;\n\n\n__DATA__\n497,50,2008-08-02T16:56:53Z,469,4,\n\n\"foo bar \nfoo\n\nbar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar\nbar\"\n\n\n\nhello\nworld\n\"asdfas\"\n\nID,NAME,TITLE,DESCRIPTION,,\nPRO1234,\"JOHN SMITH\",ENGINEER,\"JOHN HAS BEEN WORKING\n\nHARD ON BEING A GOOD\n\nSERVENT.\"\n\n\n\nPRO1235,   \"KEITH SMITH\",ENGINEER,\"keith has been working\n\nhard on being a good\n\nservent.\"\nPRO1235,\"KENNY SMITH\",,\"keith has been working\n\nhard on being a good\n\nservent.\"\nPRO1235,\"RICK SMITH\",,,     # \n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>497,50,2008-08-02T16:56:53Z,469,4,\"foo bar foo bar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar bar\"\nhello\nworld\n\"asdfas\"\nID,NAME,TITLE,DESCRIPTION,,PRO1234,\"JOHN SMITH\",ENGINEER,\"JOHN HAS BEEN WORKING HARD ON BEING A GOOD SERVENT.\"\nPRO1235,\"KEITH SMITH\",ENGINEER,\"keith has been working hard on being a good servent.\"\nPRO1235,\"KENNY SMITH\",,\"keith has been working hard on being a good servent.\"\nPRO1235,\"RICK SMITH\",,,\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9979785, "user_type": "registered", "profile_image": "https://graph.facebook.com/2087682814578344/picture?type=large", "display_name": "Brad Estep", "link": "https://stackoverflow.com/users/9979785/brad-estep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530042795, "creation_date": 1529691609, "last_edit_date": 1529691752, "question_id": 50993647, "link": "https://stackoverflow.com/questions/50993647/perl-regex-pattern-for-csv-correction", "title": "Perl REGEX pattern for CSV correction", "body": "<pre><code>perl -i -pe 's/(,\\h*\"[^\\n\"]*)\\n/$1 /g' /opt/data-integration/transfer/events/processing/Master_Events_List.csv\n</code></pre>\n\n<p>What is going on here?  I tried a translator but its a bit vague.  What are some examples that might return here?</p>\n"}, {"tags": ["perl", "signals"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529672704, "post_id": 50988544, "comment_id": 88971727, "body": "Put a loop around <code>sleep</code>."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529672760, "post_id": 50988544, "comment_id": 88971767, "body": "but how would that allow the program to sleep for X amount of seconds then finish?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1529672802, "post_id": 50988544, "comment_id": 88971783, "body": "<code>while ($sleep &gt; 0) { $sleep -= sleep($sleep); }</code>"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529673051, "post_id": 50988544, "comment_id": 88971938, "body": "ah the good old read the documentation. This was a quick example made to test/play with handling signals. reading the Perl doc for sleep it says <code>May be interrupted if the process receives a signal such as &quot;SIGALRM&quot;.  Returns the number of seconds actually slept.  You probably cannot mix &quot;alarm&quot; and &quot;sleep&quot; calls, because &quot;sleep&quot; is often implemented using &quot;alarm&quot;.</code>. So lesson learned. I just assumed the the alarm would interrupt the currently executed line of code. Seems its just cause i am using sleep that its interrupted"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1529677630, "post_id": 50988544, "comment_id": 88974848, "body": "@melpomene: Please formulate an answer."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1536904202, "last_edit_date": 1536904202, "creation_date": 1529687605, "answer_id": 50992753, "question_id": 50988544, "link": "https://stackoverflow.com/questions/50988544/handle-signal-without-interrupting-current-sleep/50992753#50992753", "title": "Handle signal without interrupting current sleep", "body": "<p>Set up a block around that precious sleep, to ignore the signal within it</p>\n\n<pre><code>IGNORE_QUIT: {\n    local $SIG{QUIT} = 'IGNORE';\n    sleep 10;\n};\n</code></pre>\n\n<p>If the <code>sleep</code> happens to already be scoped suitably then you don't need an extra block.</p>\n\n<p>Can use a wrapper if there's more of this</p>\n\n<pre><code>sub sleep_protected {\n    local $SIG{QUIT} = 'IGNORE';\n    sleep $_[0];\n}\n</code></pre>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/local.html\" rel=\"nofollow noreferrer\">local</a> is crucial  so that <code>$SIG{QUIT}</code> isn't changed globally but only within the block.</p>\n\n<p>If you need a signal handler (and can't just use <code>'IGNORE'</code>) then <code>sleep</code> does get interrupted so that the handler can run. So you need to restart the call</p>\n\n<pre><code>sub sleep_protected {\n    my $sl = $_[0];\n    my $sigquit;\n    local $SIG{QUIT} = sub { \n        say \"Got $_[0], but don't do thread dump\"; \n        ++$sigquit; \n    };\n    $sl -= sleep $sl  while $sl &gt; 0;\n    return $sigquit;\n}\n</code></pre>\n\n<p>The counter is local and returned but you can use a global one instead, declared with <code>our</code>. Or declare it as a <a href=\"https://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\"><code>state</code></a> variable and it is remembered across calls (see <a href=\"https://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">feature</a>).</p>\n\n<p>The interrupted call returns with error <code>EINTR</code> if interrupted by a signal. This can be checked for using <a href=\"https://perldoc.perl.org/perlvar.html#%!\" rel=\"nofollow noreferrer\">%!</a>, as <code>if ($!{EINTR}) {...}</code>. However, I don't know how <code>sleep</code> can reasonably be interrupted other than by a signal and so didn't use this.</p>\n"}], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 50992753, "answer_count": 1, "score": 3, "last_activity_date": 1598584029, "creation_date": 1529672509, "last_edit_date": 1598584029, "question_id": 50988544, "link": "https://stackoverflow.com/questions/50988544/handle-signal-without-interrupting-current-sleep", "title": "Handle signal without interrupting current sleep", "body": "<p>In the below code, while sleeping if the QUIT signal comes the sleep will immediately finish and the last line of code will be executed. </p>\n\n<pre><code>#!/opt/tertio/localperl/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $quit = 0;\n\n$SIG{'QUIT'} = sub { \n    print \"Please dont try to take thread dump as i am not java\\n\"; \n    $quit++; \n};\n\nmy $sleep = shift || 30;\nprint \"I am going to sleep\\n\";\nsleep($sleep);\n\nprint \"I woke up so will exit, but someone tried to quit me $quit times\\n\";\n</code></pre>\n\n<p>No matter how long I set the <code>sleep</code> time, as soon as I send a <code>QUIT</code> signal <code>sleep</code> ends and the program continues.</p>\n\n<p>Is there a way to handle <code>QUIT</code> without affecting the current run of the program such that <code>sleep</code> continues for as long as it was meant to?</p>\n"}, {"tags": ["perl", "zip", "special-characters", "extract"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529667936, "post_id": 50983596, "comment_id": 88968947, "body": "With <code>use Archive::Zip qw(AZ_OK)</code>, the code runs for me without errors on Linux and Windows. The file names on Windows become double encoded mojibake."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529671949, "post_id": 50983596, "comment_id": 88971268, "body": "What operating system are you using?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529672065, "post_id": 50983596, "comment_id": 88971348, "body": "I suggest that you update your installation of <code>Archive::Zip</code>. In the current version, line 485 of <code>Archive&#47;Zip&#47;Member.pm</code> is a blank line."}, {"owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "edited": false, "score": 0, "creation_date": 1529915002, "post_id": 50983596, "comment_id": 89030635, "body": "In my installation, at #485 it tries to create a directory. It is a part of <code>extractToFileNamed</code> subroutine and the exact line is <code>mkpath (dirname($name) ); </code>."}, {"owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "edited": false, "score": 0, "creation_date": 1529915191, "post_id": 50983596, "comment_id": 89030761, "body": "For the zip i mentioned, it extracts to a folder with Japanese characters (when extracted using WinZip). I understand that it is failing due to encoding issues. All I want to ask is if there is a way to deal with the issue without me having to write my own unzipping module."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529937891, "post_id": 50983596, "comment_id": 89044790, "body": "Well, what happens when you update the module? Did you miss that suggestion above?"}, {"owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "edited": false, "score": 0, "creation_date": 1529993794, "post_id": 50983596, "comment_id": 89063765, "body": "I tried. It does not work. The error is the same (while making a directory). It lies in <code>member.pm#511</code>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529994003, "post_id": 50983596, "comment_id": 89063857, "body": "This means the problem is with the archive file. Can you help us somehow to reproduce the problem?"}, {"owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "edited": false, "score": 0, "creation_date": 1530002567, "post_id": 50983596, "comment_id": 89068433, "body": "The zip extracts to a directory with japanese name and the directory contains pdfs with japanese names."}], "owner": {"reputation": 75, "user_id": 8795995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3664b3f2e04a8156af267c447d38029?s=128&d=identicon&r=PG&f=1", "display_name": "andor", "link": "https://stackoverflow.com/users/8795995/andor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1389, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1529671886, "creation_date": 1529655368, "last_edit_date": 1529671886, "question_id": 50983596, "link": "https://stackoverflow.com/questions/50983596/extracting-files-with-japanese-characters-from-a-zip-archive", "title": "Extracting files with Japanese characters from a zip archive", "body": "<p>Everything inside the zip file has a Japanese name (e.g. the directories inside, pdfs inside etc.). When I tried using\n<a href=\"https://metacpan.org/pod/Archive::Zip\" rel=\"nofollow noreferrer\"><code>Archive::Zip</code></a>\nor\n<a href=\"https://metacpan.org/pod/Archive::Extract\" rel=\"nofollow noreferrer\"><code>Archive::Extract</code></a>,\nit fails at a single point (Input/Output error) while trying to create a directory with a apanese name. </p>\n\n<p>Is there any way to deal with this without having to write my unzipping module?</p>\n\n<pre><code>use warnings;\n\nuse POSIX;\nuse File::Basename;\nuse File::Copy;\nuse Sys::Hostname;\nuse Archive::Extract;\nuse File::Path;\n\nmy $filename = '42108e01b86ed61ed18c29066254b5b9.zip';\nmy $dest_dir = \"test_site/pk\";\n\nuse Archive::Zip;\n\nmy $zip = Archive::Zip-&gt;new();\n\nunless ( $zip-&gt;read( $filename ) == AZ_OK ) {\n    die \"Error Reading Zip File !\";\n}\n\nforeach my $m ( $zip-&gt;members() ) {\n\n    print \"Member $m:\\n  \";\n\n    my $err = $zip-&gt;extractMemberWithoutPaths( $m, \"$dest_dir/\" . $m-&gt;fileName );\n    print \"Error: $err\" if $err;\n    print $/;\n}\n</code></pre>\n\n<h3>Error is:</h3>\n\n<blockquote>\n  <p>Input/output error at Archive/Zip/Member.pm line 485.</p>\n</blockquote>\n"}, {"tags": ["java", "python", "regex", "perl", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1529662848, "post_id": 50984788, "comment_id": 88966351, "body": "You probably wanted to link <a href=\"https://perl5.git.perl.org/perl.git/tree/378cc40b38293ffc7298c6a7ed3cd740ad79be52\" rel=\"nofollow noreferrer\">this url</a> (<code>s&#47;blob&#47;tree&#47;</code> in yours) ?"}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529669855, "post_id": 50984788, "comment_id": 88970008, "body": "Thanks! That is tremendously simpler, but has extra features and efficiency, and <code>In some spots I&#39;ve traded clarity for efficiency, so don&#39;t blame Henry for some of the lack of readability.</code> I could try to push through it, but I think I really need ELI5, kindergarten, pedegogically simple code."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529912166, "post_id": 50984788, "comment_id": 89029220, "body": "So it seems to backtrack on an <code>NFA</code>: <code>essentially a linear encoding of a nondeterministic finite-state machine</code>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1529666659, "last_edit_date": 1529666659, "creation_date": 1529659441, "answer_id": 50984788, "question_id": 50983308, "link": "https://stackoverflow.com/questions/50983308/perl-compatible-regular-expression-engines-how-implemented/50984788#50984788", "title": "Perl compatible regular expression engines: how implemented?", "body": "<p>Regex in <a href=\"https://perl5.git.perl.org/perl.git/commit/378cc40b38293ffc7298c6a7ed3cd740ad79be52\" rel=\"nofollow noreferrer\">Perl 2</a> were taken from <a href=\"http://enwp.org/Henry_Spencer\" rel=\"nofollow noreferrer\">Henry Spencer</a>.</p>\n\n<p><a href=\"https://perl5.git.perl.org/perl.git/blob/378cc40b38293ffc7298c6a7ed3cd740ad79be52:/regexp.c\" rel=\"nofollow noreferrer\"><code>regexp.c</code></a> was only two thousand lines, it's not as difficult as later versions with more features.</p>\n"}, {"comments": [{"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529674461, "post_id": 50985990, "comment_id": 88972791, "body": "Thanks, could you elaborate on how backtracking works? When <i>automata</i> is discussed, they don&#39;t cover the detail. e.g. <a href=\"https://swtch.com/~rsc/regexp/regexp1.html\" rel=\"nofollow noreferrer\">Regular Expression Matching Can Be Simple And Fast</a> and Ullman&#39;s <a href=\"https://youtube.com/watch?v=Tb_2HdsqypI\" rel=\"nofollow noreferrer\"><i>Automata</i> course</a>. Do you store state (e.g. index of curr char) at every node, and for $ab$ both must match, and for $a+b$, one must match? I feel there&#39;s some tricky wrinkle where this doesn&#39;t work out... perhaps, for matching empty string? (for <i>optional</i> <code>?</code>)"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529677016, "post_id": 50985990, "comment_id": 88974480, "body": "@hyperpallium Your first link discusses finite automata (NFAs, DFAs) in detail, they are also featured in many \u201ctheoretical computer science 101\u201d style courses. In each step of executing a DFA, you consume exactly one input character. Backtracking is kind of a depth-first search through all possible parses until you find one that matches the input. One way to do this is with a recursive function <code>search(regex_state, string_pointer)</code>. E.g. if the regex is an alternation of regexes <code>a...|b...|c...</code>, the search function would try each alternative until one matches."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529678135, "post_id": 50985990, "comment_id": 88975149, "body": "I meant automata and backtracking as distinct approaches (as in this answer). Is backtracking really as simple as a recursive function? Is <code>regex_state</code> is the alternative we are currently in, from parent, and so recursively includes all the ancestor alternatives all the way up to root? I guess,mideally, I&#39;d like sample code, but I don&#39;t think I&#39;ve ever seen any. (BTW I&#39;m assuming the regex is already parsed into an AST). EDIT do you mean, backtracking through the DFA? So <code>regex_state</code> is the state in the automata? Is that how java, perl, python do it?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529688506, "post_id": 50985990, "comment_id": 88980528, "body": "@hyperpallium Here&#39;s a <a href=\"https://gist.github.com/latk/1cd221bf38049a14a1c9064e96daa347\" rel=\"nofollow noreferrer\">toy regex engine using backtracking</a> for you. It is geared towards simplicity and is unlike what you&#39;d see in a production engine, where we&#39;d save a stack of choice points instead of using recursion and wouldn&#39;t use a <code>cont</code> variable. But it shows the general concepts. Regarding backtracking through DFAs: no, you don&#39;t have to backtrack in a DFA because you&#39;re always in the correct state. You could evaluate a NFA with backtracking but that makes it difficult to detect infinite loops."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529820210, "post_id": 50985990, "comment_id": 89007828, "body": "oh yeah, I meant <code>NFA</code> (not <code>DFA</code>). But if not that, what exactly do engines backtrack <i>on</i>? Thanks for your engine (did you just write it?). It looks like it uses parser combinators, and your description says <code>parsing with derivatives</code> - is this the approach used by perl/java/python etc regex engines? (BTW you&#39;ve probably already come across this <a href=\"http://paste.lisp.org/display/24849\" rel=\"nofollow noreferrer\">&quot;14&quot; line engine</a> using parser combinators and <code>yield</code>)"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529838018, "post_id": 50985990, "comment_id": 89011184, "body": "@hyperpallium I updated the gist with a second variant that does explicit backtracking. That is closer to real engines, and can be mapped easily to low-level languages. Although I am copying the op_stack, whereas real engines can avoid copies by using linked lists. NFAs are typically executed by breadth-first search through the states, or by compiling them to a DFA. Parsing with derivatives is an illustrative parsing algorithm, but too inefficient for practical use. I&#39;m using it to construct the <code>cont</code> regex. Parser combinators work well but are not used in \u201creal\u201d engines due to high overhead."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529909125, "post_id": 50985990, "comment_id": 89027762, "body": "Thanks! First, to clarify my question: &quot;Do java/perl/python regex engines backtrack on an NFA, an AST, or something else? What do <i>they</i> backtrack on?&quot;"}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529910463, "post_id": 50985990, "comment_id": 89028408, "body": "I went though your first varient, and found I could instead return <code>(result, string)</code> to backtrack to the input string state, and it works for most cases, but e.g. the <code>Star</code> in regex <code>a*ab</code> on string <code>ab</code> consumes the <code>a</code>, so the second <code>a</code> can&#39;t be matched. Yours works on this, because each repeat of <code>Star</code> is a level of recursion that can exit to the next (<code>cont</code>) part of the regex. I can&#39;t see how to do by returning tuples instead of constructing <code>cont</code>s."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529944906, "post_id": 50985990, "comment_id": 89048767, "body": "@hyperpallium (1) Most engines compile the regex to interpreter opcodes, which could be an AST-like graph. Some even JIT-compile the opcodes. (2) A function <code>(position) \u2192 (result, position)</code> is a parsing function as used in parser combinators. (3) Backtracking is limited if you use \u201cnaive\u201d recursive descent/PEG. E.g. a PEG <code>(aa&#47;a)a</code> will match <code>aaa</code> but not <code>aa</code>, and the PEG <code>a*a</code> will never match because <code>a*</code> is <i>greedy</i> and consumes all <code>a</code>s. So PEG is an unsuitable algorithm for vanilla regexes. I don&#39;t know how mature engines avoid this problem without the high memory overhead of my demos."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1529998190, "post_id": 50985990, "comment_id": 89066013, "body": "Confirming 1, the other answer&#39;s source code for perl&#39;s engine describes it as a <i>&quot;linear encoding of a [NFA]&quot;</i> (also uses opcodes). Could one say mature engines are equivalent to backtracking an NFA, in the sense that they do exactly the same thing? The implementation details differ, but it&#39;s equivalent in visiting nodes in the same order, for the purposes of backreferences? But... you said <code>You could evaluate a NFA with backtracking but that makes it difficult to detect infinite loops.</code>, so there is some difference..."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530021508, "post_id": 50985990, "comment_id": 89080542, "body": "@hyperpallium Ok, it seems sensible to interpret that as backtracking over an NFA. But there are some tricky cases involving epsilon transitions in an NFA, e.g. a regex like <code>()*</code> that repeats the empty string, or nested nullable quantification like <code>(a*b?)+</code>. A breadth-first search through the NFA states deals with this elegantly, but a depth-first search combined with backtracking needs to take extra care. I don&#39;t think my demos handle this correctly either. One solution would be to break the repetition loop if the last iteration didn&#39;t advance the string position."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530076168, "post_id": 50985990, "comment_id": 89100452, "body": "Thanks, I now see your demos handle empty string (multiplicative identity). I checked both your regex examples, and both loop infinitely as you thought. One (theoretical) approach detects <code>nullable</code> but IIRC it&#39;s for the whole regex. You mentioned breadth-first search before - I guess it doesn&#39;t enable back-references, which requires backtracking, I think? It&#39;s all not really as simple or elegant as it first appears. I&#39;m actually interesting in &quot;unambiguous&quot; regex (not necessarily 1-unambiguous aka deterministic - e.g. $a+a$ is not OK; $ax+ay$ is), so maybe I can avoid all this."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530076365, "post_id": 50985990, "comment_id": 89100512, "body": "I don&#39;t have a clear model in my mind for the search part (even for just generating all the words in the language), although I have implemented it before. It&#39;s not as simple as traversing a tree. Do you have any pointers on that? (Though it probably should be a separate question, perhaps on the computer science SE.)"}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530091142, "post_id": 50985990, "comment_id": 89108039, "body": "By <i>breadth first search</i> of the NDA, did you mean simulating each possibility simultaneously ? <a href=\"https://perl.plover.com/Regex/article.html\" rel=\"nofollow noreferrer\">MJD&#39;s regex article</a> describes this with moving pennies on NFA nodes. Later, he describes backtracking as at each choice, just trying one; if it fails, go back to the penny waiting there. This makes it seem really simple, and I could probably code this. The code itself wouldn&#39;t be as neat as this model, but it would make sense in terms of the model. Do you think he&#39;s right? (He doesn&#39;t give the full picture til the end, at &quot;<code>Lies</code>&quot;)"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530095588, "post_id": 50985990, "comment_id": 89110953, "body": "@hyperpallium I don&#39;t really have the time to go into more detail, or to read that article \u2013 but MJD is really good at this stuff so I trust the article is good. His pennies seem to correspond roughly to my backtracking points. Yes, breadth first search through the NFA states keeps track of ALL states that are possible at the current input position. Backreferences require you to keep more engine state in addition to NFA state+input position, which all has to be saved/restored for backtracking."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530156383, "post_id": 50985990, "comment_id": 89137884, "body": "no need to reply just BTW I noticed BFS also has the infinite loop problem, because <code>()*</code> has a loop of epsilon transitions, giving infinite possible states."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530173162, "post_id": 50985990, "comment_id": 89144183, "body": "@hyperpallium umm no, a NFA has a <i>finite</i> amount of states. In BFS we track a set of all possible NFA states for the current input, but this can never exceed the size of the NFA. There may be infinitely many <i>paths</i> through the NFA, but we would be tracking states and not paths."}, {"owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "edited": false, "score": 0, "creation_date": 1530249548, "post_id": 50985990, "comment_id": 89177342, "body": "oh, I see. You could follow all the paths, but once a state is added you don&#39;t need to add it again. If you can show the paths will never visit additional states, you&#39;re done."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 7, "last_activity_date": 1529663483, "creation_date": 1529663483, "answer_id": 50985990, "question_id": 50983308, "link": "https://stackoverflow.com/questions/50983308/perl-compatible-regular-expression-engines-how-implemented/50985990#50985990", "title": "Perl compatible regular expression engines: how implemented?", "body": "<p>There are two general approaches in regular expression engines.</p>\n\n<ul>\n<li><p>Regular expressions can be transformed into finite automata. This relationship is well-studied in computer science. These finite automate can then be executed efficiently, and even run backwards. They provide strong guarantees, such as running in linear time and constant space with regards to the input string, but creating the finite automaton from the regex can be expensive. This approach also restricts the engine to real regular expressions, i.e. precludes advanced features such as back-references or recursion.</p></li>\n<li><p>Regular expressions can be interpreted by a backtracking engine. If an alternative in the pattern fails, this can back-track to the last decision point and try a different approach. This is extremely flexible and (with extra features like recursion + named subpatterns) can parse a much larger class of formal languages (formally, something like the LL(*) set of grammars). This is very similar to PEG parsers. The big drawback: due to the backtracking, running the regex can take exponential time \u2013 even without any extra advanced features.</p></li>\n</ul>\n\n<p>On top of that, regex engines feature extra optimizations such as first searching for constant substrings in the pattern, since that is more efficient than running any kind of regex (any may even be able to use vectorized CPU instructions). If there is a choice point between multiple constant strings, those can be compiled very easily into a trie data structure (effectively, a simple finite automaton). This can reduce the amount of backtracking.</p>\n\n<p>A regex that demonstrates the difference between finite automata and backtracking is the <code>a*a*a*a*a*b</code> pattern on the string <code>aaaaaaaaaaaaaaacb</code>. A finite automaton can easily see that this pattern will not match because of the <code>c</code> in the input. But a backtracking engine now has many many decision points where it can try different lengths for each <code>a*</code> subpattern. Regex engines like Perl's or the <code>re</code> module in Python go exponential in this case, i.e. take very long to complete \u2013 add more <code>a</code>s to the input to make it take longer. This allows for interesting denial of service attacks if untrusted users can supply arbitrary regexes. For untrusted input, only finite-automata based regex engines should be used, e.g. RE2 from Google.</p>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "is_accepted": false, "score": 1, "last_activity_date": 1531633330, "last_edit_date": 1531633330, "creation_date": 1530171707, "answer_id": 51077359, "question_id": 50983308, "link": "https://stackoverflow.com/questions/50983308/perl-compatible-regular-expression-engines-how-implemented/51077359#51077359", "title": "Perl compatible regular expression engines: how implemented?", "body": "<h1>NFA backtracking</h1>\n\n<p>The various engines seem to first construct (or \"compile\") an NFA from the regular expression, then execute the NFA, following transitions from state to state, and backtracking to a previous state when a route fails. <em>Please note:</em> the backtracking is done on the NFA, not on the regular expression.</p>\n\n<p>An <strong>NFA</strong> is a kind of automata, with a graph of nodes (states) connected by directed arcs (transitions). An arc is labeled with a character; when that character is seen in the text, that arc is followed. An NFA is a <em>Non-deterministic Finite Automata</em> - the \"non-deterministic\" part means that two arcs leaving a node can have the same label, so that both are followed simultaneously. There can also be <em>epsilon</em> transitions (\u03b5, representing the empty string - no character), which are always followed without needing a input character.</p>\n\n<p><strong>Backtracking</strong> means when we come to a choice, we checkpoint the state (where we are in the automata and in the text). Then, make a choice. If it doesn't work out, we revert or \"backtrack\" to that checkpoint, and tnry the next choice. Like navigating a cave, when might go deeper and deeper through a series of forks before we hit a dead-end, \"nesting\" the checkpoints.</p>\n\n<h1>Java source code analysis</h1>\n\n<h3>Constructing NFA</h3>\n\n<p>The process for contructing an NFA from a regular expression is called \"Thompson's construction\". For details, please see <a href=\"https://perl.plover.com/Regex/article.html\" rel=\"nofollow noreferrer\">MJD article</a> or <a href=\"https://swtch.com/~rsc/regexp/regexp1.html\" rel=\"nofollow noreferrer\">Regular Expression Matching Can Be Simple And Fast</a> (about 1/5 the way through, section \"Converting Regular Expressions to NFAs\"). There's also a wikipedia article\n<a href=\"https://wikipedia.org/wiki/Thompson%27s_construction\" rel=\"nofollow noreferrer\">Thompson's construction</a>.</p>\n\n<p>Java's implementation (<a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/c46daef6edb5/src/share/classes/java/util/regex/Pattern.java\" rel=\"nofollow noreferrer\"><code>java/util/regex/Pattern.java</code></a>)\nrecursively-descent parses the regular expression, with methods <em>expr()</em> (alternation <code>|</code>), <em>sequence()</em>, <em>atom()</em>, <em>closure()</em> (optional <code>?</code> and star <code>*</code>), generating the NFA as <em>Node</em> objects with a <em>next</em> field for the transition to another <em>Node</em>. There are many, many different <em>Node</em> subclasses. </p>\n\n<p>notes: (1) <em>expr()</em> calls <em>sequence()</em> which returns with a so-called \"double return\" - it returns <em>head</em> explicitly, and <em>tail</em> via a global field <em>root</em>; in effect a <em>(head, tail)</em> tuple.\n(2) There is no <em>Sequence</em> object; instead, the objects in a sequence have form a linked list, with their <em>next</em> fields.</p>\n\n<h3>Executing</h3>\n\n<p><strong>transitions</strong>\nThe NFA is traversed with <em>match()</em> methods. The <em>match</em> method on one <em>Node</em> subclass calls <em>match()</em> method on the <em>next</em> one, so that the path through the automaton is a recursive call. The last node is a <em>LastNode</em> object, that checks that the whole of the text has been used.</p>\n\n<p><strong>checkpointing</strong>\nThe arguments of <em>match()</em> includes an index <em>i</em> into the text. It also has an implicit argument of the object it is called on. Together, this index and object represent the present state, and the <em>matvch()</em> invocation effectively checkpoints it, so we can <em>backtrack</em> to it later.</p>\n\n<p><strong>backtracking</strong>\nThe method <em>match</em> returns a <em>boolean</em>, of whether the match succeeded or not. If <em>true</em>, the returns chain all the way back to the initial call (popping off all the checkpoints, as if quickly retracing our steps back). But if <em>false</em> (due to a character not matching; or running out of text; or reaching the <code>LastNode</code> while there's still text left), backtracking occurs.</p>\n\n<p>The simplest backtracking is <em>alternation</em>. The code, in <em>Branch.match</em> (line 4599 of above source) tries the first choice; if it fails, troies the second choice; and so on. If all choices fail, return <em>false</em>.</p>\n\n<h1>ELI5 pedagogical implementation</h1>\n\n<p>Although the java implementation is may be the simplest of the engines, because least optimized, it is still very complex! There are many <em>PCRE</em> features, it handles unicode, many explicit optimizations (e.g. <em>Boyer-Moore</em> substring matching), but also many minor optimizations in the flow of the code itself, making it hard to learn from. Therefore, following is an <em>ELI5</em> simplification, using only <em>sequence</em> and <em>alternation</em>  (i.e. not even <em>star</em> or <em>optional</em>, so not actually regular expressions).</p>\n\n<pre><code>public class MyPattern {\n  public static void main(String[] args) {\n    // ab|ac         // non-deterministic\n    Node eg =\n      new Branch(\n        new Sequence( new Single('a'), new Single('b') ),\n        new Sequence( new Single('a'), new Single('c') )\n      );\n    re = new Sequence(re, new LastNode());\n    System.out.println( re.match(0, \"ac\") );\n  }\n\n  abstract static class Node {\n    abstract void setNext(Node next);\n    abstract boolean match(int i, String s);\n  }\n\n  static class LastNode extends Node {\n    void setNext(Node next){ throw new RuntimeException(\"don't call me\"); }\n    boolean match(int i, String s) {\n      return i==s.length();\n    }\n  }\n\n  static class Single extends Node {\n    Node next;\n    char ch;\n    Single(char ch) { this.ch = ch; }\n    void setNext(Node next) { this.next = next; }\n    boolean match(int i, String s) {\n      return i&lt;s.length()&amp;&amp; s.charAt(i)==ch&amp;&amp; next.match(i+1, s);\n    }\n  }\n\n  static class Branch extends Node {\n    Node left, right;\n    Branch(Node l, Node r) { this.left=l; this.right=r; }\n    void setNext(Node next) {\n      left.setNext(next);\n      right.setNext(next);\n    }\n    boolean match(int i, String s) {\n      return left.match(i, s) || right.match(i, s);\n    }\n  }\n\n  static class Sequence extends Node {\n    Node left, right;\n    Sequence(Node l, Node r) {\n      this.left=l;\n      this.right=r;\n      left.setNext(right);\n    }\n    void setNext(Node next) { right.setNext(next); }\n    boolean match(int i, String s) {\n      return left.match(i, s);\n    }\n  }\n\n}\n</code></pre>\n\n<h1>Proof</h1>\n\n<p>To be proven: the above code parses a subset of regular expressions (i.e. without <em>star</em> or <em>optional</em>). In the following \"regular expression\" has this restricted meaning.</p>\n\n<p>First we'll prove the constructed NFA from a regular expression is equivalent; then, that the code constructs an equivalent NFA; and finally that backtracking parsing is equivalent to that.</p>\n\n<h3>Proof: regular expression to NFA</h3>\n\n<p>We'll begin by proving the plain regular-expression-to-NFA conversion is correct.</p>\n\n<strong>define regular expression</strong>\n\n<p>The standard definition of the meaning of a regular expression is in terms of the <em>set of words</em> it generates (not what it parses). This set is called a <em>language</em>, and we say <em>L(R)</em> is the language of regular expression <em>R</em>.</p>\n\n<p>It's very useful to be able to express every possible regular expression in the same way (as a language), because then we can ignore the details of the actual regular expression that generated it.</p>\n\n<ul>\n<li><p><strong>literal <code>a</code>:</strong> <em>L(<code>a</code>) -> {a}</em> - gives the set of that single-letter word</p></li>\n<li><p><strong>alternation:</strong> <em>L(A|B) -> L(A) U L(B)</em> - whenever two regular expressions <em>A</em> and <em>B</em> are or-ed together, we can easily work out the language produced. Assuming we know the language of each of the expressions, both can be generated, so the resulting language is just the union of their languages.</p></li>\n<li><p><strong>sequence:</strong> <em>L(AB) -> L(A) X L(B)</em> - the <em>X</em> means all combinations of: a word in <em>L(A)</em> followed by a word in <em>L(B)</em>.</p></li>\n</ul>\n\n<p>The language of a regular expression can be built up by finding the languages of the operations forming it (following an abstract syntax tree).</p>\n\n<strong>to NFA</strong>\n\n<p>The NFA of regular expression <em>A</em> is notated as <em>N(A)</em>. A word generated is the sequence of characters encountered by following a path of transitions through an NFA from the start node to the exit node. Its language <em>L(N(A))</em> is the set of all such words it can generate, by following all paths.</p>\n\n<p>Defining it as a language enables us to compare NFAs with regular expressions.</p>\n\n<ul>\n<li><p><strong>sequence:</strong> The NFA for <em>AB</em> is constructed by putting <em>N(A)</em> and <em>N(B)</em> in sequence: the last node of <em>N(A)</em> and the first node of <em>N(B)</em> become the same node:</p>\n\n<pre><code>   N(A)     N(B)\nO-------&gt;O-------&gt;O\n</code></pre></li>\n</ul>\n\n<p>The possible paths through this are: from the start node (on the left), any path can be taken through <em>N(A)</em> to the middle node; then, any path can be taken through <em>N(B)</em> to the exit node on the right. This produces the same language as <em>L(AB) = L(A) X L(B)</em></p>\n\n<p>(We assume that <em>A</em> and <em>B</em> have already been done correctly i.e. <em>L(N(A))=L(A)</em> and <em>L(N(B))=L(A)</em>).</p>\n\n<ul>\n<li><p><strong>alternation:</strong> The NFA for <em>A|B</em> is constructed by combining the start nodes of <em>N(A)</em> and <em>N(B)</em>, and the exit nodes of <em>N(A)</em> and <em>N(B)</em>:</p>\n\n<pre><code>  _______\n /  N(A) \\\nO         &gt;O\n \\_______/\n    N(B)\n</code></pre></li>\n</ul>\n\n<p>This combines the possible paths, just as <em>L(A|B) -> L(A) U L(B)</em>, and so the same language is produced: <em>L(N(A|B)) = L(A|B)</em>.</p>\n\n<p>(Again, we assume that <em>A</em> and <em>B</em> have already been done correctly, <em>L(N(A))=L(A)</em> and <em>L(N(B))=L(A)</em>).</p>\n\n<ul>\n<li><p><strong>literal <code>a</code>:</strong> The NFA for some character <code>a</code> is simply a transition from start to exit node labeled with <em>a</em>:</p>\n\n<pre><code>     a\nO--------&gt;O\n</code></pre></li>\n</ul>\n\n<p>The set of words produced by all possible paths through this NFA is simply <em>{a}</em> - the set of just the one, single-letter word <em>a</em>. This is the same as for the regular expression <code>a</code>, or <em>L(N(a)) = {a} = L(a)</em>.</p>\n\n<p>In summary, as we build up the NFA from the regular expression, operator by operator, the language of the NFA is the same as the regular expression at each step of the way.</p>\n\n<h3>Proof: code constructs NFA</h3>\n\n<p>To prove that the code above constructs the NFA, we'll first prove that that the method <em>setNext()</em> sets all the last arc out of the NFA.</p>\n\n<strong>lemma: setNext() sets all exit arcs</strong>\n\n<p>A <em>Node</em> object represents a node in an NFA. The <em>exit arcs</em> are all transitions to the NFA's exit node. In the code, these are represented by the <em>next</em> field referencing another node. We want to show that calling method <em>setNext()</em> will set all such exit arcs.</p>\n\n<ul>\n<li><strong>sequence:</strong> The exit arcs of NFA <em>N(AB)</em> are the exit arcs of <em>N(B)</em> (as all arcs from <em>N(A)</em> go to <em>N(B)</em>, not to the exit node).</li>\n</ul>\n\n<p>For a <strong>Sequence</strong> object (representing <em>N(AB)</em>), calling <em>right.setNext()</em> sets all its exit arcs, assuming the <em>setNext()</em> method of the component node <em>right</em> (representing <em>N(B)</em>) works correctly.</p>\n\n<ul>\n<li><strong>alternation:</strong> The exit arcs of NFA <em>N(A|B)</em> is the union of the exit arcs of <em>N(A)</em> and <em>N(B)</em>. </li>\n</ul>\n\n<p>For a <strong>Branch</strong> object (representing <em>N(A|B)</em>), calling both <em>left.setNext()</em> and <em>right.setNext()</em> sets all its exit arcs, again assuming those methods work correctly (on the <em>left</em> and <em>right</em> nodes, representing <em>N(A)</em> and <em>N(B)</em>). </p>\n\n<ul>\n<li><strong>literal <code>a</code>:</strong> The exit arc of NFA <em>N(a)</em> is simply the one arc labeled <em>a</em>.</li>\n</ul>\n\n<p>For a <strong>Single</strong> object (representing <em>N(a)</em>), setting the field <em>next</em> sets its exit arc.</p>\n\n<p>Combining the above three, calling <em>setNode</em> on a <em>Node</em> object will set all exit arcs.</p>\n\n<strong>Proof: code constructs NFA</strong>\n\n<p>To prove this without the complication of parsing and backtracking, we won't use <em>match()</em> yet, but add a new method <em>gen()</em> that prints out the language of the NFA.</p>\n\n<p>In the code, a transition from one <em>Node</em> object to another is represented by the first calling a method on the second.  The transfer of control to another <em>Node</em> object represents the transition to another node.</p>\n\n<ul>\n<li><strong>sequence:</strong> In a <strong>Sequence</strong> object, the entry arcs should connect to the <em>left</em> node. This is done by the method <em>gen()</em> calling <em>left.gen()</em>. </li>\n</ul>\n\n<p>In the constructor, the exit arcs of the <em>left</em> node are connected to the <em>right</em> node by calling <em>left.setNext(right)</em>. This is where <em>setNode()</em> calls originate, because a sequence is the only place where the concept of \"following\" is specified.</p>\n\n<p>note: <em>Sequence</em> acts as scaffolding to assemble the NFA, and after passing control to the <em>left</em> node has no further riole.</p>\n\n<ul>\n<li><p><strong>alternation:</strong> In a <strong>Branch</strong> object, the entry arcs are connected to both the <em>left</em> and <em>right</em> nodes, by <em>gen()</em> calls both <em>left.gen()</em> and <em>right.gen()</em>.</p></li>\n<li><p><strong>literal:</strong> In a <strong>Single</strong> node, control is transitioned to the next node with <em>next.gen()</em>.</p></li>\n</ul>\n\n<p>After the expression is constructed, all exit arcs are connected to a <em>LastNode</em> object by added as a sequence: <em>new Sequence(re, new LastNode())</em>.</p>\n\n<p>Here are the <em>gen()</em> methods. They record the literal character encountered in the path of transitions, and are print when control reaches the <em>LastNode</em>.</p>\n\n<pre><code>abstract Node:\n  abstract void gen(String path);\nLastNode:\n  void gen(String path) { System.out.println(path); }\nSingle:\n  void gen(String path) { next.gen(path+ch); }\nBranch:\n  void gen(String path) { left.gen(path); right.gen(path); }\nSequence:\n  void gen(String path) { left.gen(path); }\n</code></pre>\n\n<p>Thus, calling <em>gen(\"\")</em> on a <em>Node</em> object will print out its language. </p>\n\n<h1>Parsing and Backtracking</h1>\n\n<p>In a sense, the method <em>gen()</em> above always \"backtracks\" at <em>Branch</em>, because it first recurses into the <em>left</em> node, and when that returns, the state is restored: we are back to the same <em>Branch</em> object, that respresents the NFA node, and the state of the word generated is also what it was before the <em>left</em> recursion. When it recurses into the <em>right</em> node, it is as if for the first time.</p>\n\n<p>The change for \"backtracking\" in the method <em>match</em> is simply to not continue recursing if the sought word is already generated. This does not change which words are accepted.</p>\n\n<p>The change for parsing is to check the word character by character, and to abandon an avenue when a character does not match, instead of continuing all the way to the <em>LastNode</em>. One way for a character to \"not match\" is to not exist i.e. when the text is too short. This is the <em>i &lt; s.length()</em> check in <em>Single.match()</em>.</p>\n\n<p>Conversely, there could be too many characters in the text. This is addressed by <em>LastNode.match()</em> checking that all characters in the text have been read, with <em>i==s.length()</em>. </p>\n"}], "owner": {"reputation": 471, "user_id": 4930344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69f78a9022025b5bae39b8c9451daa4?s=128&d=identicon&r=PG", "display_name": "hyperpallium", "link": "https://stackoverflow.com/users/4930344/hyperpallium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1531633330, "creation_date": 1529654263, "last_edit_date": 1530169642, "question_id": 50983308, "link": "https://stackoverflow.com/questions/50983308/perl-compatible-regular-expression-engines-how-implemented", "title": "Perl compatible regular expression engines: how implemented?", "body": "<p>What is the basic approach used by perl, python, java and vim etc, to implement parsing with regular expressions?</p>\n\n<p>Not the clever formal language approaches (i.e. <code>NFA</code>, <code>DFA</code>); nor parser combinators (e.g. <a href=\"http://paste.lisp.org/display/24849\" rel=\"nofollow noreferrer\">14 line regex engine</a>).</p>\n\n<p>I've had a look at the source for java's implementation of perl style regular expressions, but its sophistcated features (e.g. back-references) and efficiency (e.g. Boyer-Moore substring matching), made it difficult to see how it <em>basically</em> works.</p>\n\n<p><strong>EDIT</strong>\nVarious sources say \"backtracking\" is involved (e.g. <a href=\"https://swtch.com/~rsc/regexp/regexp1.html\" rel=\"nofollow noreferrer\"><em>Regular Expression Matching Can Be Simple And Fast</em></a>; <em>formal methods</em> courses), but are not clear on exactly what is backtracked <em>on</em>... is it a way to evaluate an <code>NFA</code>? Can it be done from the AST of the regex directly?</p>\n\n<p>What do java/perl/python regex engines actually do?</p>\n\n<p>Is it something like: \"a way to generate all possible words in the regular language, but abandon a specific word as soon as it doesn't match the input string\".</p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529657799, "post_id": 50982929, "comment_id": 88963375, "body": "Please avoid using HTML in your posts. Stack Overflow uses <a href=\"https://stackoverflow.com/editing-help\"><i>Markdown</i></a>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1529659116, "post_id": 50982929, "comment_id": 88964101, "body": "I am not familiar with Mongo DB, but shouldn&#39;t there be an array index in the middle of <code>Job.JobTrack</code>? Like <code>Job.0.JobTrack</code> or something? Since <code>Job</code> is an array of hashes"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1529665610, "creation_date": 1529665610, "answer_id": 50986582, "question_id": 50982929, "link": "https://stackoverflow.com/questions/50982929/fetch-a-value-from-an-array-in-a-mongodb-collection/50986582#50986582", "title": "Fetch a value from an array in a MongoDB collection", "body": "<p>You need to access a specific element of the <code>Job</code> array. Because there is only one element in your example it must have an index of zero. Accordingly you need</p>\n\n<pre><code>my $JobId = \"$next-&gt;{'Job.0.Id'}\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2855, "user_id": 11800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37a63484d9878cf6c07dcc08adda9e2?s=128&d=identicon&r=PG", "display_name": "xdg", "link": "https://stackoverflow.com/users/11800/xdg"}, "is_accepted": true, "score": 1, "last_activity_date": 1529685314, "creation_date": 1529685314, "answer_id": 50992229, "question_id": 50982929, "link": "https://stackoverflow.com/questions/50982929/fetch-a-value-from-an-array-in-a-mongodb-collection/50992229#50992229", "title": "Fetch a value from an array in a MongoDB collection", "body": "<p>Assuming the query finds a document, <code>$next</code> is a Perl data structure that resembles your original JSON:</p>\n\n<pre><code>    {\n      'Name' =&gt; 'Rock',\n      '_id' =&gt; bless( {\n                        'value' =&gt; '5b2a2ee19d332d0118b26dfe'\n                      }, 'MongoDB::OID' ),\n      'Job' =&gt; [\n                 {\n                   'JobName' =&gt; 'abc',\n                   'JobTrack' =&gt; [\n                                   '123'\n                                 ],\n                   'Id' =&gt; bless( {\n                                    'value' =&gt; '5b2b93c63629d0271ce366ae'\n                                  }, 'MongoDB::OID' )\n                 }\n               ]\n    }\n</code></pre>\n\n<p>To get the job ID, you need to dereference that structure using Perl syntax, not MongoDB syntax:</p>\n\n<pre><code>my $JobId      = \"$next-&gt;{Job}[0]{Id}\";\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 50992229, "answer_count": 2, "score": 0, "last_activity_date": 1529685314, "creation_date": 1529652906, "last_edit_date": 1529657721, "question_id": 50982929, "link": "https://stackoverflow.com/questions/50982929/fetch-a-value-from-an-array-in-a-mongodb-collection", "title": "Fetch a value from an array in a MongoDB collection", "body": "\n\n<p>Below is my MongoDB collection</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n    \"_id\" : ObjectId(\"5b2a2ee19d332d0118b26dfe\"),\n    \"Name\" : \"Rock\",\n    \"Job\" : [\n        {\n            \"Id\" : ObjectId(\"5b2b93c63629d0271ce366ae\"),\n            \"JobName\" : \"abc\",\n            \"JobTrack\" : [\n                \"123\"\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>I want to fetch both <code>ObjectId</code> values</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $cursor = $custColl-&gt;find(\n    { 'Job.JobName' =&gt; \"abc\", 'Job.JobTrack' =&gt; \"123\" },\n    { '_id' =&gt; 1, 'Job.Id' =&gt; 1 }\n);\n\nwhile ( my $next = $cursor-&gt;next ) {\n\n    my $CustomerId = \"$next-&gt;{_id}\";\n    my $JobId      = \"$next-&gt;{'Job.Id'}\";\n\n    say \"$CustomerId =&gt; $JobId\\n\";\n}\n</code></pre>\n\n<p>The result I got from above code as follows</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>5b2a2ee19d332d0118b26dfe =&gt;\n</code></pre>\n\n<p>With this code I'm not able to get <code>$JobId</code>.</p>\n"}, {"tags": ["perl", "sftp"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1529910320, "post_id": 50980115, "comment_id": 89028354, "body": "You may like to try using <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a> instead."}, {"owner": {"reputation": 102, "user_id": 9844211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mqkE.jpg?s=128&g=1", "display_name": "Heyddo", "link": "https://stackoverflow.com/users/9844211/heyddo"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1530070029, "post_id": 50980115, "comment_id": 89099056, "body": "thanks, oh,  you are the writer of the moudle Net::SFTP::Foreign, a few days ago,i still could not figure out the problem, so  i tried Net::SFTP::Foreign, and then my script run successfully ."}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1529682064, "creation_date": 1529682064, "answer_id": 50991420, "question_id": 50980115, "link": "https://stackoverflow.com/questions/50980115/i-got-an-error-when-i-use-netsftp-in-my-perl-script-connection-closed-by-remo/50991420#50991420", "title": "i got an error when i use Net::SFTP in my perl script (Connection closed by remote host)", "body": "<p>I believe the issue is with variables not being evaluated properly. Try this to see if it works:</p>\n\n<pre><code>$host = $rSelectInfoRef-&gt;[0][2];\nmy %args = (\n    user =&gt; $rSelectInfoRef-&gt;[0][3],\n    password =&gt; $rSelectInfoRef-&gt;[0][4],\n);\n\nmy $sftp;\n\neval {\n    $sftp = Net::SFTP-&gt;new($host, %args);\n};\nif( $@ ) {\n    print \"[ERROR] $@\";\n    exit -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 9844211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mqkE.jpg?s=128&g=1", "display_name": "Heyddo", "link": "https://stackoverflow.com/users/9844211/heyddo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529682064, "creation_date": 1529637086, "last_edit_date": 1529657330, "question_id": 50980115, "link": "https://stackoverflow.com/questions/50980115/i-got-an-error-when-i-use-netsftp-in-my-perl-script-connection-closed-by-remo", "title": "i got an error when i use Net::SFTP in my perl script (Connection closed by remote host)", "body": "<p>I got a weird error when i use Net::SFTP to connect to my SFTP server. \nMy script get the SFTP connection infomation from oracle, and then use Net::SFTP to connect to a SFTP server.\nWhen I run the <code>perl</code> script , it failed with this error:</p>\n\n<blockquote>\n  <p>Connection closed by remote host. at /usr/local/lib64/perl5/Net/SSH/Perl/AuthMgr.pm</p>\n</blockquote>\n\n<pre><code># $rSelectInfoRef = (the connection infomation from oracle)\n$host = $rSelectInfoRef-&gt;[0][2];\n$user = $rSelectInfoRef-&gt;[0][3];\n$password = $rSelectInfoRef-&gt;[0][4];\n\nprint \"[DEBUG] $host|$user|$password|\\n\";\n\nmy $sftp;\n\neval {\n    $sftp = Net::SFTP-&gt;new($host, user=&gt;$user, password=&gt;$password);\n};\nif( $@ ) {\n    print \"[ERROR] $@\";\n    exit -1;\n}\n</code></pre>\n\n<p>But, When i assign these connect variables directly, the script run successfully. i didn't change the connection infomation. It confused me, the same value but different result .</p>\n\n<pre><code>#$host = $rSelectInfoRef-&gt;[0][2];\n#$user = $rSelectInfoRef-&gt;[0][3];\n#$password = $rSelectInfoRef-&gt;[0][4];\n\n$host = \"168.16.5.110\";\n$user = \"test\";\n$password = \"000000\";\nprint \"[DEBUG] $host|$user|$password|\\n\";\n\nmy $sftp;\n\neval {\n    $sftp = Net::SFTP-&gt;new($host, user=&gt;$user, password=&gt;$password);\n};\nif( $@ ) {\n    print \"[ERROR] $@\";\n    exit -1;\n}\n</code></pre>\n"}, {"tags": ["perl", "file", "command-line", "upload", "cgi"], "comments": [{"owner": {"reputation": 342, "user_id": 2038089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b63f7e356acc7018e0c5c57bbf632532?s=128&d=identicon&r=PG", "display_name": "Ahmad Bilal", "link": "https://stackoverflow.com/users/2038089/ahmad-bilal"}, "edited": false, "score": 0, "creation_date": 1529639007, "post_id": 50979911, "comment_id": 88956243, "body": "Please elaborate by providing the said script. What OS are you using, which command line? Thanks."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 1, "creation_date": 1529654144, "post_id": 50979911, "comment_id": 88961402, "body": "Do you have to use Perl to actually perform the upload? If not then the easiest thing to do is probably use <code>curl</code> - as in <code>curl -T file https:&#47;&#47;yoursite.com&#47;your-script.cgi</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1529656784, "post_id": 50979911, "comment_id": 88962780, "body": "@David that requires them to already run the program with a web server. They want to run the code without a web server."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1529661841, "post_id": 50984217, "comment_id": 88965802, "body": "Can you explain the <code>&lt; &lt;(...)</code> please? Why is there a space?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1529666949, "post_id": 50984217, "comment_id": 88968452, "body": "<code>&lt;()</code> is <a href=\"http://tldp.org/LDP/abs/html/process-sub.html\" rel=\"nofollow noreferrer\">tldp.org/LDP/abs/html/process-sub.html</a> (avoids temporary file or shell var) ; <code>&lt;</code> redirects from file descriptor into the process stdin. Edit: just noticed, a simple pipe will also do."}, {"owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "edited": false, "score": 0, "creation_date": 1529679110, "post_id": 50984217, "comment_id": 88975740, "body": "This worked great. Thank you @daxim. I see Content_Type set to &quot;form-data&quot; in this POST method, but when I dump $cgi, I see: &#39;Content-Disposition&#39; =&gt; &#39;form-data; name=&quot;uploaded_file&quot;; filename=&quot;wrapper_sbs.bin&quot;&#39;, &#39;Content-Type&#39; =&gt; &#39;application/octet-stream&#39; If I change the uploaded file extension to &quot;.sh&quot;, the Content-Type is becoming &#39;application/x-sh&#39;. Is there any way to specify the Content-Type without regard to the file extension?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1529739954, "post_id": 50984217, "comment_id": 88992193, "body": "Sure, that&#39;s in the <a href=\"http://p3rl.org/HTTP::Request::Common#POST-%24url\" rel=\"nofollow noreferrer\">documentation</a>, scroll down to <code>Form-based File Upload</code>."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1529657592, "creation_date": 1529657592, "answer_id": 50984217, "question_id": 50979911, "link": "https://stackoverflow.com/questions/50979911/how-to-test-perl-cgi-script-for-file-upload-from-the-command-line/50984217#50984217", "title": "How to test Perl CGI script for file upload from the command line?", "body": "<p>A file upload is just another POST request! See <a href=\"http://p3rl.org/CGI#DEBUGGING\" rel=\"nofollow noreferrer\">DEBUGGING in CGI.pm</a>. The program is <code>index.pl</code>, the file to upload is <code>somefile.bin</code> and the form field name is <code>uploaded_file</code>:</p>\n\n<pre><code>REQUEST_METHOD=POST \\\nCONTENT_TYPE='multipart/form-data; boundary=xYzZY' \\\nperl index.pl &lt; &lt;(\n    perl -MHTTP::Request::Common=POST -e'\n        print POST(\n            undef,\n            Content_Type =&gt; \"form-data\",\n            Content =&gt; [ uploaded_file =&gt; [ \"somefile.bin\" ]]\n        )-&gt;content\n    '\n)\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 50984217, "answer_count": 1, "score": 1, "last_activity_date": 1529657592, "creation_date": 1529635200, "question_id": 50979911, "link": "https://stackoverflow.com/questions/50979911/how-to-test-perl-cgi-script-for-file-upload-from-the-command-line", "title": "How to test Perl CGI script for file upload from the command line?", "body": "<p>I have a Perl script with a call <code>my $file_handle = $cgi-&gt;upload('uploaded_file')</code>. Is there a way to test this script from command line before deploying to the web server? I looked at (<a href=\"https://stackoverflow.com/questions/2224158/how-can-i-send-post-and-get-data-to-a-perl-cgi-script-via-the-command-line\">How can I send POST and GET data to a Perl CGI script via the command line?</a>) and other questions, but could not find any information for passing a file for upload from the command line. Thanks in advance for the help.</p>\n"}, {"tags": ["perl", "hash", "key", "strict"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1529614518, "post_id": 50977247, "comment_id": 88950568, "body": "Per first assignment, <code>$database{&#39;a&#39;}{&#39;b&#39;}{&#39;c&#39;}</code> is a string (<code>e</code>) so in second assignement you try to use the same variable (which is a string) as an hash to store the pair <code>(&#39;d&#39;, &#39;f&#39;)</code> which can not work as the error message tells you, before even trying the first <code>foreach</code>. You will need to revisit your data structure."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1529614554, "post_id": 50977247, "comment_id": 88950584, "body": "Avoid using <code>my $a;</code> and <code>my $b;</code> as <code>$a</code> and <code>$b</code> are kind of reserved Perl variables and you might have suprises."}, {"owner": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1529615236, "post_id": 50977247, "comment_id": 88950850, "body": "@PatrickMevzek OKOK, I will not use such reserved values any more. I just wanna make an example...XD"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "edited": false, "score": 0, "creation_date": 1529615678, "post_id": 50977350, "comment_id": 88951002, "body": "Cool idea! Thanks."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "edited": false, "score": 0, "creation_date": 1529616323, "post_id": 50977350, "comment_id": 88951219, "body": "See ikegami&#39;s answer for a data structure to allow strings and hashes at the same &quot;level&quot;"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1529614779, "creation_date": 1529614779, "answer_id": 50977350, "question_id": 50977247, "link": "https://stackoverflow.com/questions/50977247/perl-check-existence-of-a-hash-key-when-there-is-value-at-the-same-level-in-stri/50977350#50977350", "title": "perl check existence of a hash key when there is value at the same level in strict refs check", "body": "<p>If you want to not do the check unless the c-level is a hash, just check that:</p>\n\n<pre><code>if (ref $database{$a}{$b}{$c} ne 'HASH') {\n    print \"not a hash\\n\";\n}\nelsif (exists $database{$a}{$b}{$c}{'d'}){\n    print \"success!\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1529616070, "creation_date": 1529616070, "answer_id": 50977597, "question_id": 50977247, "link": "https://stackoverflow.com/questions/50977247/perl-check-existence-of-a-hash-key-when-there-is-value-at-the-same-level-in-stri/50977597#50977597", "title": "perl check existence of a hash key when there is value at the same level in strict refs check", "body": "<p>The following stores a string in <code>$database{'a'}{'b'}{'c'}</code>:</p>\n\n<pre><code>$database{'a'}{'b'}{'c'} = 'e';\n</code></pre>\n\n<p>But the following expects <code>$database{'a'}{'b'}{'c'}</code> to be a reference:</p>\n\n<pre><code>$database{'a'}{'b'}{'c'}{'d'} = 'f';\n</code></pre>\n\n<p>Assuming you can have values at any level, you need to change your data structure to something like the following:</p>\n\n<pre><code>$database{a}{children}{b}{children}{c}{value} = 'e';\n$database{a}{children}{b}{children}{c}{children} = 'f';\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8082106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4692c09a0d3747501e27fdb01987b31?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sun", "link": "https://stackoverflow.com/users/8082106/michael-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536748440, "creation_date": 1529614278, "last_edit_date": 1536748440, "question_id": 50977247, "link": "https://stackoverflow.com/questions/50977247/perl-check-existence-of-a-hash-key-when-there-is-value-at-the-same-level-in-stri", "title": "perl check existence of a hash key when there is value at the same level in strict refs check", "body": "<p>For the following code with strict check, it will raise an error.</p>\n\n<pre><code>use strict;\nmy $a;\nmy $b;\nmy $c;\n\nmy %database;\n$database{'a'}{'b'}{'c'} = 'e';\n$database{'a'}{'b'}{'c'}{'d'} = 'f';\nforeach my $a (keys %database){\n  foreach my $b (keys %{$database{$a}}){\n    foreach my $c (keys %{$database{$a}{$b}}){\n      if (exists $database{$a}{$b}{$c}{'d'}){print \"success!\\n\";}\n    }\n  }\n}\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>Can't use string (\"e\") as a HASH ref while \"strict refs\" in use at test.pl line 8.\n</code></pre>\n\n<p>Value 'e' and key 'd' is at the same level. When \"exists\" tries to find key d, the debugger will find there are values at the same level and raise the error, because 'e' is not a key to check.\nHow do I solve it when keeping the structure of hash and the use of strict?</p>\n\n<p>Yes it would raise an error at line 8. Actually another one created this hash without strict in one file and when I wrote another part in another file, I have strict and it raises such a problem.</p>\n"}, {"tags": ["perl", "ssl", "https", "mason"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1529604612, "post_id": 50975042, "comment_id": 88946255, "body": "Is the request you&#39;re talking about being sent or received by the Mason application?"}, {"owner": {"reputation": 10408, "user_id": 77244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/24540aca22e2fa9b1b71213e3bb5eca2?s=128&d=identicon&r=PG&f=1", "display_name": "jwl", "link": "https://stackoverflow.com/users/77244/jwl"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1529604695, "post_id": 50975042, "comment_id": 88946290, "body": "received.  In this scenario, Perl Mason is a webserver, and wants to know what TLS version the browser used on the request."}], "answers": [{"comments": [{"owner": {"reputation": 10408, "user_id": 77244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/24540aca22e2fa9b1b71213e3bb5eca2?s=128&d=identicon&r=PG&f=1", "display_name": "jwl", "link": "https://stackoverflow.com/users/77244/jwl"}, "edited": false, "score": 0, "creation_date": 1529678670, "post_id": 50975758, "comment_id": 88975457, "body": "Thanks!  But <a href=\"http://search.cpan.org/~miyagawa/PSGI-1.102/PSGI/Extensions.pod\" rel=\"nofollow noreferrer\">search.cpan.org/~miyagawa/PSGI-1.102/PSGI/Extensions.pod</a>  &quot;psgix.io: The raw IO socket to access the client connection to do low-level socket operations. This is only available in PSGI servers that run as an HTTP server, and should be used when (and only when) you want to jailbreak out of PSGI abstraction, to implement protocols over HTTP such as BOSH or WebSocket.&quot;  It seems like we don&#39;t have access to the socket connection in the Perl/Mason thread."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 10408, "user_id": 77244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/24540aca22e2fa9b1b71213e3bb5eca2?s=128&d=identicon&r=PG&f=1", "display_name": "jwl", "link": "https://stackoverflow.com/users/77244/jwl"}, "edited": false, "score": 0, "creation_date": 1529739337, "post_id": 50975758, "comment_id": 88992035, "body": "Not having access and your refusal to access are two different things."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1530077247, "post_id": 50975758, "comment_id": 89100807, "body": "I&#39;m not familiar with Mason but from the referenced documentation it looks like that <code>$m-&gt;req-&gt;{env}{&#39;psgix.io&#39;}</code> is the socket object, i.e. an <code>IO::Socket::SSL</code> object in this case. But <code>{*sslsock}{_SSL_arguments}{SSL_version}</code> does not give the SSL version for the current socket. It instead gives the <code>SSL_version</code> argument used to create the socket, i.e. something like <code>SSLv23:!SSLv3</code>. Also, accessing undocumented internal parts of the <code>IO::Socket::SSL</code> is not nice :).  Anyway, to get the actually used protocol version for the socket use <code>$sslsock-&gt;get_sslversion</code>."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 4, "last_activity_date": 1530084205, "last_edit_date": 1530084205, "creation_date": 1529607346, "answer_id": 50975758, "question_id": 50975042, "link": "https://stackoverflow.com/questions/50975042/is-it-possible-to-determine-the-ssl-tls-version-of-a-perl-mason-request/50975758#50975758", "title": "Is it possible to determine the SSL/TLS version of a Perl Mason Request?", "body": "<p><code>$m-&gt;req-&gt;{env}{'psgix.io'}-&gt;</code><a href=\"http://p3rl.org/IO::Socket::SSL#get_sslversion%28%29\" rel=\"nofollow noreferrer\"><code>get_sslversion</code></a></p>\n"}], "owner": {"reputation": 10408, "user_id": 77244, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/24540aca22e2fa9b1b71213e3bb5eca2?s=128&d=identicon&r=PG&f=1", "display_name": "jwl", "link": "https://stackoverflow.com/users/77244/jwl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530084205, "creation_date": 1529604352, "question_id": 50975042, "link": "https://stackoverflow.com/questions/50975042/is-it-possible-to-determine-the-ssl-tls-version-of-a-perl-mason-request", "title": "Is it possible to determine the SSL/TLS version of a Perl Mason Request?", "body": "<p>Is there some way to retrieve the TLS version used for a Perl Mason Request?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1529604025, "post_id": 50974893, "comment_id": 88945968, "body": "You should actually print out your object and ensure it matches the form you think it does. Just glancing at the commented out object it would suggest that your variable <code>$data</code> doesn&#39;t have a key &quot;download_url&quot;."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1529605006, "post_id": 50974893, "comment_id": 88946443, "body": "<code>$res</code> is an HTTP::Response object, not a JSON string!"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1529609025, "post_id": 50974893, "comment_id": 88948278, "body": "Your question is not clear/poorly phrased (I have edited it). You are not showing your current errors. You speak about &quot;download_link&quot; but your code uses &quot;download_url&quot;. Your script starts with &quot;perl-w&quot; which is probably a typo for &quot;perl -w&quot; and in which case the <code>-w</code> is useless as you have <code>use warnings;</code> (as recommended) below."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1529609125, "post_id": 50974893, "comment_id": 88948314, "body": "Do <b>NOT</b> use this form: <code>new HTTP::Request</code>, use instead <code>HTTP::Request-&gt;new()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1529605732, "last_edit_date": 1529605732, "creation_date": 1529604141, "answer_id": 50974988, "question_id": 50974893, "link": "https://stackoverflow.com/questions/50974893/perl-script-to-parse-json-data/50974988#50974988", "title": "Perl script to parse JSON data", "body": "<pre><code>use JSON qw(decode_json);\n\n# from $res-&gt;content\nmy $content = '{\"success\":true,\"data\":\"{\\\"campaign\\\":\\\"21490|\\\",\\\"format\\\":\\\"md5  \\\",\\\"delta_timestamp\\\":\\\"1528992718\\\",\\\"result\\\":\\\"success\\\",\\\"download_link\\\":\\\"https:\\\\\\/\\\\\\/gmail.net\\\\\\/accesskey\\\\\\/getfile\\\\\\/m-spqn-e61-2aef2575a0b5250354f2b0fda033e703?token=HUSYjdC5jyJskXUHiKn13l1A1BaAjH2R&amp;dcma=e8fae90c472ae146\\\"}\",\"message\":null}';\n\nprint decode_json(decode_json($content)-&gt;{data})-&gt;{download_link};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9903689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "admin jokmark", "link": "https://stackoverflow.com/users/9903689/admin-jokmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529641886, "creation_date": 1529603772, "last_edit_date": 1529641886, "question_id": 50974893, "link": "https://stackoverflow.com/questions/50974893/perl-script-to-parse-json-data", "title": "Perl script to parse JSON data", "body": "<p>I am trying to create a script to parse JSON content but it is not working:</p>\n\n<pre><code>#!/usr/local/bin/perl-w\nuse DBI;\nuse Parallel::ForkManager;\nuse LWP::Simple;\nuse XML::Simple;\nuse JSON qw( decode_json );\nuse Data::Dumper;\nuse DateTime;\nuse WWW::Mechanize;\nuse strict;\nuse warnings;\nuse JSON;\nmy $ua = LWP::UserAgent-&gt;new();\nmy $req = new HTTP::Request GET =&gt; 'https://google.com/pub/';\nmy $res = $ua-&gt;request($req);\nmy $contents = $res-&gt;content;\n##json response:\n\n#{\"success\":true,\"data\":\"{\\\"campaign\\\":\\\"21490|\\\",\\\"format\\\":\\\"md5  \\\",\\\"delta_timestamp\\\":\\\"1528992718\\\",\\\"result\\\":\\\"success\\\",\\\"download_link\\\":\\\"https:\\\\\\/\\\\\\/gmail.net\\\\\\/accesskey\\\\\\/getfile\\\\\\/m-spqn-e61-2aef2575a0b5250354f2b0fda033e703?token=HUSYjdC5jyJskXUHiKn13l1A1BaAjH2R&amp;dcma=e8fae90c472ae146\\\"}\",\"message\":null}\n\nprint $contents;\n\n#Check the outcome of the Response\nif ( $res-&gt;is_success ) {\nprint $res-&gt;content;\n}\n\n\n# Decode the main json object\nmy $jsn = decode_json($res);\n\n# Since 'data' is another serialized object, you need to decode that as well:\nmy $data = decode_json($jsn);\n\n# Now you can access the contents of 'data'\n#want to extract download_link object\nprint $data-&gt;{'download_url'};\n</code></pre>\n\n<p>I am looking at the content of <code>download_link</code>.</p>\n"}, {"tags": ["arrays", "perl", "unit-testing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1529594398, "post_id": 50971430, "comment_id": 88940615, "body": "Why do you have the constant defined in the test as well? What are you trying to achieve with that?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1529594999, "post_id": 50971430, "comment_id": 88941009, "body": "@simbabque: I guess they&#39;re in different files and aren&#39;t exported correctly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1529595129, "post_id": 50971430, "comment_id": 88941103, "body": "@DaveCross I have a feeling they want to use it in their regex. I don&#39;t think they even know they can export them."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1529595183, "post_id": 50971430, "comment_id": 88941134, "body": "@simbabque: Seems likely."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1529593825, "last_edit_date": 1529593825, "creation_date": 1529593405, "answer_id": 50971787, "question_id": 50971430, "link": "https://stackoverflow.com/questions/50971430/perl-unit-testing-check-if-a-string-is-an-array/50971787#50971787", "title": "Perl unit testing: check if a string is an array", "body": "<p>The return value of <code>$magicObject-&gt;getStringIDs</code> is an array reference, not a string. It looks like the spirit of your test is that you want to check if at least one element in the array pattern matches <code>BACK</code>. The way to do this is to <code>grep</code> through the dereferenced array and check if there are a non-zero number of matches.</p>\n\n<pre><code>ok( grep(/BACK/,@$strings) != 0, 'contains BACK' );\n</code></pre>\n\n<hr/>\n\n<p>At one time, the <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlop.pod#Smartmatch-Operator\" rel=\"nofollow noreferrer\">smartmatch operator</a> promised to be a solution to this problem ...</p>\n\n<pre><code>ok( $strings ~~ /BACK/ )\n</code></pre>\n\n<p>but it has <a href=\"https://stackoverflow.com/questions/16927024/perl-5-20-and-the-fate-of-smart-matching-and-given-when\">fallen into disrepute</a> and should be used with caution (and the <code>no warnings 'experimental::smartmatch'</code> pragma).</p>\n"}, {"comments": [{"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1529594715, "post_id": 50971828, "comment_id": 88940812, "body": "May I ask you why you use <code>&quot;@$strings&quot;</code> and not simply <code>@$strings</code> (without quotes)?"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1529594832, "post_id": 50971828, "comment_id": 88940891, "body": "And also, why do you use quotes in <code>$_ eq &#39;BACK&#39;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 1, "creation_date": 1529594912, "post_id": 50971828, "comment_id": 88940944, "body": "Using <code>$strings</code> runs all the elements together (<code>NEXTBACK</code>) whereas <code>&quot;@strings&quot;</code> puts spaces between the elements (<code>NEXT BACK</code>). That allows us to use <code>\\b</code> to look for individual words. Otherwise, we could be in trouble if our array contained &quot;FEB&quot; and &quot;ACK&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1529594913, "post_id": 50971828, "comment_id": 88940947, "body": "@just the quotes here in Dave&#39;s code relate to my comment on your question. When you use <code>m&#47;BACK&#47;</code> that&#39;s the string <i>BACK</i>, not the function call (constants are nothing more than functions in Perl). Perl can&#39;t interpolate function calls in strings."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1529595112, "last_edit_date": 1529595112, "creation_date": 1529593540, "answer_id": 50971828, "question_id": 50971430, "link": "https://stackoverflow.com/questions/50971430/perl-unit-testing-check-if-a-string-is-an-array/50971828#50971828", "title": "Perl unit testing: check if a string is an array", "body": "<p>Your <code>getStringIDs()</code> method returns an array reference.</p>\n\n<p>The regex binding operator (<code>=~</code>) expects a string on its left-hand side. So it converts your array reference to a string. And a stringified array reference will look something like <code>ARRAY(0x1ff4a68)</code>. It doesn't give you any of the contents of the array.</p>\n\n<p>You can get from your array reference (<code>$strings</code>) to an array by dereferencing it (<code>@$strings</code>). And you can stringify an array by putting it in double quotes (<code>\"@$strings\"</code>).</p>\n\n<p>So you could do something like this:</p>\n\n<pre><code>ok(\"@$strings\" =~ /BACK/);\n</code></pre>\n\n<p>But I suspect, you want word boundary markers in there:</p>\n\n<pre><code>ok(\"@$strings\" =~ /\\bBACK\\b/);\n</code></pre>\n\n<p>And you might also prefer the <code>like()</code> testing function.</p>\n\n<pre><code>like(\"@$strings\", qr[\\bBACK\\b], 'Strings array contains BACK');\n</code></pre>\n\n<p><strong>Update:</strong> Another alternative is to use <code>grep</code> to check that one of your array elements is the string \"BACK\".</p>\n\n<pre><code># Note: grep in scalar context returns the number of elements\n# for which the block evaluated as 'true'. If we don't care how\n# many elements are \"BACK\", we can just check that return value\n# for truth with ok(). If we care that it's exactly 1, we should\n# use is(..., 1) instead.\n\nok(grep { $_ eq 'BACK' } @$strings, 'Strings array contains BACK');\n</code></pre>\n\n<p><strong>Update 2:</strong> Hmm... the fact that you're using constants here complicates this. Constants are subroutines and regexes are strings and subroutines aren't interpolated in strings.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1529912952, "post_id": 50973747, "comment_id": 89029606, "body": "You should probably mention that they&#39;ll need to install the <a href=\"https://metacpan.org/pod/syntax\" rel=\"nofollow noreferrer\">syntax</a> and <a href=\"https://metacpan.org/pod/Syntax::Feature::In\" rel=\"nofollow noreferrer\">Syntax::Feature::In</a> modules."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1529599667, "creation_date": 1529599667, "answer_id": 50973747, "question_id": 50971430, "link": "https://stackoverflow.com/questions/50971430/perl-unit-testing-check-if-a-string-is-an-array/50973747#50973747", "title": "Perl unit testing: check if a string is an array", "body": "<p>The <a href=\"http://p3rl.org/Syntax::Feature::In\" rel=\"nofollow noreferrer\"><code>in</code> operator</a> is your friend.</p>\n\n<pre><code>use Test::More;\nuse syntax 'in';\n\nuse constant NEXT =&gt; 'next';\nuse constant BACK =&gt; 'back';\n\nok BACK |in| [NEXT, BACK], 'BACK is in the arrayref';\ndone_testing;\n</code></pre>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 50971828, "answer_count": 3, "score": 1, "last_activity_date": 1529599667, "creation_date": 1529592445, "question_id": 50971430, "link": "https://stackoverflow.com/questions/50971430/perl-unit-testing-check-if-a-string-is-an-array", "title": "Perl unit testing: check if a string is an array", "body": "<p>I have this function that I want to test:</p>\n\n<pre><code>use constant NEXT =&gt; 'next';\nuse constant BACK =&gt; 'back';\n\nsub getStringIDs {\n    return [\n        NEXT,\n        BACK\n    ];\n}\n</code></pre>\n\n<p>I've tried to write the following test, but it fails:</p>\n\n<pre><code>subtest 'check if it contains BACK' =&gt; sub {\n    use constant BACK =&gt; 'back';\n    my $strings = $magicObject-&gt;getStringIDs();\n    ok($strings =~ /BACK/);\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "imagemagick"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529591216, "post_id": 50970835, "comment_id": 88938428, "body": "See what fonts are installed in Terminal with <code>identify -list font</code>. If you have none, see <a href=\"https://stackoverflow.com/a/24701602/2836621\">stackoverflow.com/a/24701602/2836621</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529592146, "post_id": 50970835, "comment_id": 88939086, "body": "If you have only Times then it&#39;s not going to work if you choose Courier or Impact."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529592305, "post_id": 50970835, "comment_id": 88939201, "body": "Maybe try this in Terminal and see how <code>z.png</code> looks... <code>convert -size 100x100 xc:white -gravity center -fill red -font &#47;Library&#47;Fonts&#47;Impact.ttf -annotate 0 &quot;Hi there&quot; z.png</code>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529592447, "post_id": 50970835, "comment_id": 88939310, "body": "@Borodin It should work if OP specifies full path to <code>&#47;Library&#47;Fonts&#47;Impact.ttf</code> like he suggests he did, even if that font is not configured into ImageMagick&#39;s configuration settings."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529592664, "post_id": 50970835, "comment_id": 88939483, "body": "@Borodin I have hundreds of fonts. that&#39;s just a snippet I posted."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1529592705, "post_id": 50970835, "comment_id": 88939510, "body": "@MarkSetchell yup, that worked. hmmm."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529592811, "post_id": 50970835, "comment_id": 88939582, "body": "Maybe you are writing black on black? Or the Northern gravity is throwing you off the top of the page?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593065, "post_id": 50970835, "comment_id": 88939774, "body": "Nope. Black on mostly white. I tried with an without gravity. Maybe I can just have my perl script run a command line command for the existing image instead. How would that command look? ImageMagick commands confuse the hell out of me."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529593174, "post_id": 50970835, "comment_id": 88939855, "body": "Try setting Gravity to <code>center</code>, as it defaults to NorthWest even if you don&#39;t set it."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593278, "post_id": 50970835, "comment_id": 88939936, "body": "Bam! Yup, there it is."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593348, "post_id": 50970835, "comment_id": 88939974, "body": "It&#39;s weird though, it&#39;s not always centered. For some images it is actually appearing near the top, sometimes in the center. It depends on the dimensions of the image."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529593375, "post_id": 50970835, "comment_id": 88939998, "body": "Setting it to North or NorthWest makes the top of the image the <b>bottom</b> reference point for the text, i.e. the baseline of the text."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593420, "post_id": 50970835, "comment_id": 88940019, "body": "Ah, makes sense. So I just need to lower it. I can figure that out. Thanks so much! Saved me probably 2 hours!"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529593604, "post_id": 50970835, "comment_id": 88940128, "body": "Try running <code>identify YourImage.png</code> in the Terminal, and see if there is any +nnn+nnn after the image dimensions which would mean the image has been cut from a larger one and has remembered its original position. To ignore it, repage your image before use... <code>convert YourImage.png +repage ... -annotate ...</code>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593817, "post_id": 50970835, "comment_id": 88940236, "body": "Yup, that appears to be the case. Beautiful. I would have never figured that out."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529593891, "post_id": 50970835, "comment_id": 88940286, "body": "docs for Image::Magick don&#39;t mention anything about a &quot;repage&quot; option, however."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1529594199, "post_id": 50970835, "comment_id": 88940500, "body": "I think you can use <code>$img-&gt;Set( page=&gt;&#39;0x0+0+0&#39; );</code>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529594326, "post_id": 50970835, "comment_id": 88940575, "body": "Oh, yeah. You are the Magick Man! That did it. You have now saved me probably 6 hours. I owe you many beers."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1529594479, "post_id": 50970835, "comment_id": 88940660, "body": "OK, so now I can do NorthEast for gravity and not have to make any adjustments. It just places the text in the upper right hand corner, no muss, no fuss. Thanks again!"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1529595417, "post_id": 50970835, "comment_id": 88941290, "body": "Cool, I may write it up later (after France vs Peru World Cup football match) as an answer that you could maybe accept."}], "answers": [{"tags": [], "owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 1, "last_activity_date": 1529653499, "creation_date": 1529653499, "answer_id": 50983103, "question_id": 50970835, "link": "https://stackoverflow.com/questions/50970835/annotating-images-with-imagemagick-on-mac-installed-with-homebrew/50983103#50983103", "title": "Annotating images with Image::Magick on mac installed with homebrew", "body": "<p>In general, if you have trouble finding your textual output with <strong>ImageMagick</strong>, try the following suggestions:</p>\n\n<p><strong>Suggestion 1</strong></p>\n\n<p>Use contrasting fill and stroke so you can be reasonably sure of seeing your text on any background:</p>\n\n<pre><code>magick ... -fill cyan -stroke magenta ...\n</code></pre>\n\n<p><strong>Suggestion 2</strong></p>\n\n<p>Set gravity to <code>center</code> in case you are writing beyond the edges of your image:</p>\n\n<pre><code>magick ... -gravity center ...\n</code></pre>\n\n<p><strong>Suggestion 3</strong></p>\n\n<p>Specify the <strong>full path</strong> to a font file so ImageMagick will find it even if it is not configured into its configuration files:</p>\n\n<pre><code>magick ... -font /Library/Fonts/Impact.ttf ...\n</code></pre>\n\n<p><strong>Suggestion 4</strong></p>\n\n<p>Repage your image after loading so it forgets any old page settings it may have had when it was maybe previously part of some larger image and was cropped:</p>\n\n<pre><code>magick ... +repage ...\n</code></pre>\n\n<p>So, in summary, try a command like:</p>\n\n<pre><code>magick -size 100x100 xc:white -gravity center -fill cyan -stroke magenta -font /Library/Fonts/Impact.ttf -annotate 0 \"Hi there\" result.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4nHXC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4nHXC.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50983103, "answer_count": 1, "score": 0, "last_activity_date": 1529653499, "creation_date": 1529590796, "last_edit_date": 1529591830, "question_id": 50970835, "link": "https://stackoverflow.com/questions/50970835/annotating-images-with-imagemagick-on-mac-installed-with-homebrew", "title": "Annotating images with Image::Magick on mac installed with homebrew", "body": "<p>I've got ImageMagick software installed with homebrew on my mac and I'm using the Image::Magick Perl module. I'm trying to figure out how to annotate images with some text. Nothing I've tried works:</p>\n\n<pre><code>$error = $image-&gt;Annotate(font =&gt; 'Courier', gravity =&gt; 'North', pointsize=&gt;100, fill=&gt;'black', text =&gt; 'blah blah');\n\n$error = $image-&gt;Annotate(font =&gt; '/Library/Fonts/Impact.ttf', gravity =&gt; 'North', pointsize=&gt;100, fill=&gt;'black', text =&gt; 'blah blah');\n</code></pre>\n\n<p>I'm figuring it can't find the font but maybe something else is wrong. No error is thrown. I have installed ghostscript with homebrew but that didn't help.</p>\n\n<p>Partial output from identify -list font</p>\n\n<pre><code>  Font: Times-BoldItalic\n    family: Times\n    style: Italic\n    stretch: Normal\n    weight: 700\n    glyphs: /usr/local/share/ghostscript/fonts/n021024l.pfb\n  Font: Times-Italic\n    family: Times\n    style: Italic\n    stretch: Normal\n    weight: 400\n    glyphs: /usr/local/share/ghostscript/fonts/n021023l.pfb\n  Font: Times-Roman\n    family: Times\n    style: Normal\n    stretch: Normal\n    weight: 400\n    glyphs: /usr/local/share/ghostscript/fonts/n021003l.pfb\n</code></pre>\n"}, {"tags": ["perl", "duplicates"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1529587897, "post_id": 50969385, "comment_id": 88935920, "body": "Please create a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1529590285, "post_id": 50969385, "comment_id": 88937666, "body": "There is nothing in the code that you have shown that writes to files. It is impossible to help you unless we can see something relevant."}, {"owner": {"reputation": 1, "user_id": 5098325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60db858b44053e347dfd3559356432f1?s=128&d=identicon&r=PG&f=1", "display_name": "hedidev1", "link": "https://stackoverflow.com/users/5098325/hedidev1"}, "edited": false, "score": 0, "creation_date": 1529591137, "post_id": 50969385, "comment_id": 88938361, "body": "query_cotrol is a script that executes a query which result is written in QUERIES_LIST, but query_control result is one text, and QUERIES_LIST has this text duplicated"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5098325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60db858b44053e347dfd3559356432f1?s=128&d=identicon&r=PG&f=1", "display_name": "hedidev1", "link": "https://stackoverflow.com/users/5098325/hedidev1"}, "is_accepted": false, "score": 0, "last_activity_date": 1529653460, "last_edit_date": 1529653460, "creation_date": 1529652817, "answer_id": 50982903, "question_id": 50969385, "link": "https://stackoverflow.com/questions/50969385/process-produces-a-file-with-duplicate-results/50982903#50982903", "title": "Process produces a file with duplicate results", "body": "<p>I'm checking a new script, which exec the Script in arg, and which result is in arg Files, could it be in cause :   </p>\n\n<p>The function is called like this </p>\n\n<pre><code>($ok, $sr, $msgs) = ExecScripts\n                (Scripts =&gt;\n                [ \n                    $CONFIG-&gt;{BTEQScripts}-&gt;{query_control}\n                ],\n                Messages =&gt;\n                [\n                    'FILE=Get control queries listEXEC=',\n                ],\n                Files =&gt;\n                [\n                    $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST}\n                ],\n                NoExec =&gt; [ 1 ],\n                );\n\nsub ExecScripts\n{\n    llog ($DEBUG, 'begin, args = ['.Dumper (\\@_).']');\n\n    my %args =\n    (\n        Scripts =&gt; [],\n        Messages =&gt; [],\n        Files =&gt; undef,\n        Cache =&gt; undef,\n        NoExec =&gt; undef,\n        @_\n    );\n\n    my $ok = 0;\n    my $scripts_results = [];\n    my $monitor_messages = [];\n\n    my $exs_curr_step = launcher_step ();\n\n    #if ($exs_curr_step eq 'CHK')\n    #{\n\n        # for some reason, error reference define CHK step as FVT, the consistency !\n        #$exs_curr_step = 'FVT';\n    #}\n\n\n    if (defined $args{Scripts} and ref $args{Scripts} eq 'ARRAY')\n    {\n        if ( $#{$args{Scripts}} &gt; -1 )\n        {\n            my $temp_script_file = [];\n            my $script_idx = 0;\n\nESCRIPTLOOP:\n            for my $script ( @{$args{Scripts}} )\n            {\n                llog ($DEBUG, \"process script [$script]\");\n\n                my $subvarok;\n                my $skip_substitute = 0;\n\n                $temp_script_file-&gt;[$script_idx] = File::Spec-&gt;catfile ($CONFIG-&gt;{Folders}-&gt;{TEMPORARY_DIRECTORY}, basename ($script) );\n                add_to_trash ( [ $temp_script_file-&gt;[$script_idx] ] );\n\n                if (defined $args{Cache} and ref $args{Cache} eq 'ARRAY' and $args{Cache}-&gt;[$script_idx])\n                {\n                    llog ($DEBUG, \"S[$script_idx] Cache set, check file\");\n\n                    if (-e $temp_script_file-&gt;[$script_idx])\n                    {\n                        llog ($DEBUG, \"S[$script_idx] file [\".$temp_script_file-&gt;[$script_idx].'] exists');\n                        $skip_substitute = 1;\n                    }\n                    else\n                    {\n                        llog ($DEBUG, \"S[$script_idx] does not exists, do variables susbtitution step\");\n                    }\n                }\n\n                unless ($skip_substitute)\n                {\n                    if (-e $temp_script_file-&gt;[$script_idx])\n                    {\n                        unlink ( $temp_script_file-&gt;[$script_idx] );\n                    }\n\n                    $subvarok = substitute_variables_values_from_conf_in_bteq_script\n                    (\n                        BTEQScript =&gt; $script,\n                        OutputFile =&gt; $temp_script_file-&gt;[$script_idx],\n                        Dictionary =&gt; $DICTIONARY,\n                        StripComments =&gt; 1,\n                    );\n\n                    llog ($DEBUG, \"[$script_idx]($script) SVs=[$subvarok]\");\n\n                    if (!$subvarok)\n                    {\n                        llog ($INFO, \"Error in script [$script] (idx=[$script_idx]), see above log for more info\");\n                    }\n                }\n                else\n                {\n                    $subvarok = 1;\n                }\n\n                if (!-e $temp_script_file-&gt;[$script_idx])\n                {\n                    llog ($ERROR, \"S[$script_idx] script [\".$temp_script_file-&gt;[$script_idx].'] does not exists, abort current step');\n                    return 0;\n                }               \n\n                if ($subvarok)\n                {\n                    my $message_before_export = '';\n                    my $message_before_exec = '';\n\n                    if (defined $args{Messages} and ref $args{Messages} eq 'ARRAY' and defined $args{Messages}-&gt;[$script_idx])\n                    {\n                        if ($args{Messages}-&gt;[$script_idx] =~ /FILE=(.*)EXEC=(.*)/)\n                        {\n                            $message_before_export = $1;\n                            $message_before_exec = $2;\n                        }\n                        else\n                        {\n                            $message_before_export = $args{Messages}-&gt;[$script_idx];\n                        }\n\n                        hlog ($INFO, $message_before_export);\n                    }\n\n                    my $script_to_execute;\n\n                    if (defined $args{Files} and ref $args{Files} eq 'ARRAY' and defined $args{Files}-&gt;[$script_idx])\n                    {\n                        llog ($DEBUG, \"[$script_idx] Files args defined, use ExecBTEQGetFile\");\n                        my $getfile_ok = ExecBTEQGetFile \n                        (\n                            Script =&gt; $temp_script_file-&gt;[$script_idx],\n                            OutputFile =&gt; $args{Files}-&gt;[$script_idx],\n                            Sync =&gt; 1,\n                        );\n\n                        llog ($DEBUG, \"[$script_idx] GetFile result=[$getfile_ok]\");\n\n                        my $msg = check_monitor_messages ($exs_curr_step);\n\n                        if (defined $msg)\n                        {\n                            if ($msg =~ /^EXIT-/)\n                            {\n                                $monitor_termination_message_received = 1;\n                                return MONITOR_IS_GONE;\n                            }\n\n                            push @{$monitor_messages}, $msg;\n                        }\n\n                        if ($args{NoExec} and ref $args{NoExec} eq 'ARRAY' and $args{NoExec}-&gt;[$script_idx])\n                        {\n                            llog ($INFO, 'DO NOT execute file got earlier');\n                            next ESCRIPTLOOP;\n                        }\n\n                        $script_to_execute = $args{Files}-&gt;[$script_idx];\n                        #check if script file exists and not empty\n                        # empty may or may not be an error !\n\n                        llog ($DEBUG, \"GetFile exec: execute script [$script_to_execute]\");\n\n                        if (-e $script_to_execute and -z _)\n                        {\n                            llog ($WARN, 'export file is empty, skip script execution');\n                            #$ok = 1; #?? needed, better, latter check will not return fail status\n                            # BUT: should we consider empty file as not an error ALWAYS ?\n                            $ok = $script_idx;\n\n                            next ESCRIPTLOOP;\n                        }\n\n                        if ($message_before_exec)\n                        {\n                            hlog ($INFO, $message_before_exec);\n                        }\n                    }\n                    else\n                    {\n                        $script_to_execute = $temp_script_file-&gt;[$script_idx];\n                        llog ($DEBUG, \"Std exec: execute script [$script_to_execute]\");\n                    }\n\n                    #flags = ret2\n                    my ($exec_ok, $script_res) = ExecBTEQ \n                    ( \n                        Scripts =&gt; [ $script_to_execute ]\n                    );\n\n                    llog ($DEBUG, \"ExecBTEQ ret=[$exec_ok] SR=[\".Dumper ($script_res).']');\n                    hlog ($DEBUG, \"Script[$script_idx] =&gt; $exec_ok\");\n\n                    if (defined $script_res and ref $script_res eq 'ARRAY' and $#{$script_res} &gt; -1)\n                    {\n                        map\n                        {\n                            if ($_)\n                            {\n                                hlog ($ERROR, 'ERROR '.$_);\n                            }\n                        }\n                        @{$script_res};\n                    }\n\n                    my $msg = check_monitor_messages ($exs_curr_step);\n\n                    if (defined $msg)\n                    {\n                        if ($msg =~ /^EXIT-/)\n                        {\n                            $monitor_termination_message_received = 1;\n                            return MONITOR_IS_GONE;\n                        }\n\n                        push @{$monitor_messages}, $msg;\n                    }\n\n                    #abort\n                    if (!$exec_ok)\n                    {\n                        llog ($ERROR, 'An error occured when running, or trying to run, previous script, end here now');\n\n                        #shall we continue anyway ?\n                        return 0;\n                    }\n\n                    if ($script_res-&gt;[0])\n                    {\n                        map\n                        {\n                            my $msg = $_;\n\n                            if ($_ =~ /^\\d+$/)\n                            {\n                                $msg = 'return code: '.$_;\n                            }\n\n                            hlog ($ERROR, $script.' : '.$msg );\n                        }\n                        split /;/, $script_res-&gt;[0];\n                    }\n\n                    if (defined $script_res-&gt;[$script_idx])\n                    {\n                        llog ($INFO, 'get a return code from a script, which usually means Bteq process is gone, and something failed');\n\n                        if ($exec_ok)\n                        {\n                            llog ($DEBUG, 'ExecBTEQ does not return an error, consider this as a functional error');\n                            $ok += $exec_ok;\n                        }\n                    }\n                    else\n                    {\n                        $ok += $exec_ok;\n                    }\n\n                    $scripts_results-&gt;[$script_idx] = $script_res-&gt;[$script_idx];\n                }\n\n                $script_idx++;\n            }\n\n            #not go here !\n\n            # return 1 if no error occured previously, ie all scripts runs well\n            llog ($DEBUG, \"previous ok=[$ok] sidx=[$script_idx] final ok = 1 if they're equals\");\n            $ok = ($ok == $script_idx);\n        }\n        else\n        {\n            llog ($WARN, 'no script provided, nothing to do');\n        }\n    }\n    else\n    {\n        llog ($ERROR, 'parameter error');\n    }\n\n    llog ($DEBUG, 'end ok=['.$ok.']');\n\n    ($ok, $scripts_results, $monitor_messages);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5098325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60db858b44053e347dfd3559356432f1?s=128&d=identicon&r=PG&f=1", "display_name": "hedidev1", "link": "https://stackoverflow.com/users/5098325/hedidev1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1529653460, "creation_date": 1529586519, "last_edit_date": 1529588636, "question_id": 50969385, "link": "https://stackoverflow.com/questions/50969385/process-produces-a-file-with-duplicate-results", "title": "Process produces a file with duplicate results", "body": "<p>The file <code>QUERIES_LIST</code> has duplicate results generated by <code>query_control</code>. Could the problem be in nthis part of the code?</p>\n\n<pre><code>my $ok = 0;\n\nllog($DEBUG, 'begin step=[' . ( defined $step ? $step : 'N/A' ) . ']');\n\nif ( defined $step and $step eq 'CTL' ) {\n\n    hlog($INFO, 'begin CTL step');\n\n    my $MAX_PROCESS_TO_USE;\n    my $queries_to_execute = [];\n    my @team               = ();\n\n    $SIG{CHLD} = \\&amp;zombies_killer;\n\n    $DICTIONARY-&gt;{LIST_REQUETE}   = $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST};\n    $DICTIONARY-&gt;{separator_req}  = $CONFIG-&gt;{CTLQueriesSeparators}-&gt;{separator_req};\n    $DICTIONARY-&gt;{separator_ctl}  = $CONFIG-&gt;{CTLQueriesSeparators}-&gt;{separator_ctl};\n    $DICTIONARY-&gt;{ALL_QUERY_CTRL} = $CONFIG-&gt;{ExportFiles}-&gt;{QUERY_CTRL_GET};\n\n    my $sr;\n    my $msgs;\n\n    if ( can_we_proceed_now($CONFIG) ) {\n\n        ( $ok, $sr, $msgs ) = ExecScripts(\n            Scripts  =&gt; [ $CONFIG-&gt;{BTEQScripts}-&gt;{query_control} ],\n            Messages =&gt; [ 'FILE=Get control queries listEXEC=', ],\n            Files    =&gt; [ $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST} ],\n            NoExec   =&gt; [1],\n        );\n\n        llog($DEBUG, \"CTL1 ok=[$ok] SR=[\" . Dumper( $sr ) . '] msg=[' . Dumper( $msgs ) . ']');\n\n        if ( ! $ok ) {\n            llog($INFO, 'an error occured previously, abort');\n            return CTL_FAIL_GET_CTRL_QUERIES;\n        }\n\n        if ( ! -z $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST} ) {\n            $ok = ctl_clean_exported_file(\n                INPUT_FILE  =&gt; $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST},\n                OUTPUT_FILE =&gt; $CONFIG-&gt;{ExportFiles}-&gt;{QUERIES_LIST} . '.tmp',\n            );\n</code></pre>\n"}, {"tags": ["perl", "perl-module", "circular-dependency"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1529604546, "post_id": 50967991, "comment_id": 88946219, "body": "Circular dependencies like this should be avoided. <code>Common</code> uses <code>Validator</code>, and <code>Validator</code> uses <code>Common</code>. Split up the functions in <code>Common</code> into two modules."}, {"owner": {"reputation": 107, "user_id": 8131212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b0a0a7f734cbd2165bbe6bbc6a8ebd?s=128&d=identicon&r=PG&f=1", "display_name": "jbrachtl", "link": "https://stackoverflow.com/users/8131212/jbrachtl"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1529648777, "post_id": 50967991, "comment_id": 88958932, "body": "@tinita I am aware of the circular dependency. However my vision is that there will be many modules and they all will be using the Common module with some common functions. And some of these functions may require functionality provided by one of those modules."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1529588301, "post_id": 50968495, "comment_id": 88936211, "body": "Or just put ` our @EXPORT = qw( validate inArray )` in a <code>BEGIN</code> block before the <code>use Validator</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1529583780, "creation_date": 1529583780, "answer_id": 50968495, "question_id": 50967991, "link": "https://stackoverflow.com/questions/50967991/exported-perl-module-subroutines-are-not-available/50968495#50968495", "title": "Exported perl module subroutines are not available", "body": "<p>Because <code>Validator.pm</code> is loaded and processed before <code>@Common::EXPORT</code> is defined.</p>\n\n<p>Some workarounds are either to</p>\n\n<ul>\n<li><p>define <code>@Common::EXPORT</code> during the \"compile phase\" of <code>Common.pm</code> and before <code>Validator.pm</code> is loaded</p>\n\n<pre><code># Common.pm\n...\nBEGIN { our @EXPORT = qw(validate inArray) }\nuse Validator;\n...\n</code></pre></li>\n<li><p>load <code>Validator.pm</code> during the \"run phase\" of <code>Common.pm</code> and after <code>@Common::EXPORT</code> is defined</p>\n\n<pre><code># Common.pm\n...\nour @EXPORT = qw(validate inArray);\nrequire Validator;\nValidator-&gt;import;\n...\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 107, "user_id": 8131212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b0a0a7f734cbd2165bbe6bbc6a8ebd?s=128&d=identicon&r=PG&f=1", "display_name": "jbrachtl", "link": "https://stackoverflow.com/users/8131212/jbrachtl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 50968495, "answer_count": 1, "score": 2, "last_activity_date": 1529583780, "creation_date": 1529582120, "question_id": 50967991, "link": "https://stackoverflow.com/questions/50967991/exported-perl-module-subroutines-are-not-available", "title": "Exported perl module subroutines are not available", "body": "<p>Say I have 3 perl files.</p>\n\n<p>run.pl</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Common;\n\nvalidate();    # no need of Common::validate()\n</code></pre>\n\n<p>Common.pm</p>\n\n<pre><code>package Common;\n\nuse strict;\nuse warnings;\nuse Exporter qw(import);\nuse Validator;\n\nour @EXPORT = qw(validate inArray);\n\nsub validate\n{\n    Validator::doSomething();\n}\n\nsub inArray\n{\n    print(\"HERE\\n\");\n}\n\nreturn 1;\n</code></pre>\n\n<p>Validator.pm</p>\n\n<pre><code>package Validator;\n\nuse strict;\nuse warnings;\nuse Common;\n\nsub doSomething\n{\n    inArray();    # only Common::inArray() works here, why?\n}\n\nreturn 1;\n</code></pre>\n\n<p>When run the output is: <code>Undefined subroutine &amp;Validator::inArray called at Validator.pm line 10.</code></p>\n\n<p>If I change</p>\n\n<pre><code>sub doSomething\n{\n    inArray();\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>sub doSomething\n{\n    Common::inArray();\n}\n</code></pre>\n\n<p>then the result is expected <code>HERE</code>.</p>\n\n<p>My question is why are the subroutines exported by the Common module not available in the Validator module?</p>\n\n<p>I'm using perl 5.22.0.</p>\n"}, {"tags": ["perl", "strawberry-perl", "net-ssh", "pp-perl-par-packager", "perlnetssh"], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1530263853, "last_edit_date": 1530263853, "creation_date": 1529910166, "answer_id": 51017885, "question_id": 50967501, "link": "https://stackoverflow.com/questions/50967501/exe-crated-using-parpacker-with-script-containing-netssh2-is-not-working/51017885#51017885", "title": ".exe crated using Par::Packer with script containing Net::SSH2 is not working", "body": "<p>Probably you are not packing the <code>libssh2</code> and <code>openssl</code> DLLs inside the executable.</p>\n\n<p><code>Par::Packer</code> does not detect DLL dependencies automatically, you need to tell it explicitly which ones your program needs (a simple way to discover which DLLs your program needs is to use <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">Process Monitor</a>, an utility which allows one to monitor process activity).</p>\n\n<p>Another option is to use my module <a href=\"https://metacpan.org/pod/Win32::Packer\" rel=\"nofollow noreferrer\">Win32::Packer</a> to pack the application which does find DLL dependencies automatically.</p>\n"}], "owner": {"reputation": 7904, "user_id": 289715, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d7d03918d4c6bafb1e351c0444e8b27?s=128&d=identicon&r=PG", "display_name": "Senthil A Kumar", "link": "https://stackoverflow.com/users/289715/senthil-a-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1530263853, "creation_date": 1529580601, "question_id": 50967501, "link": "https://stackoverflow.com/questions/50967501/exe-crated-using-parpacker-with-script-containing-netssh2-is-not-working", "title": ".exe crated using Par::Packer with script containing Net::SSH2 is not working", "body": "<p>Am using Net::SSH2 module in my Perl script and trying to make an executable (.exe for windows) using Par::Packer. The script need to ssh to a linux box from a windows box using public keys and don't want to input password.</p>\n\n<p>Am facing the below error while running the .exe</p>\n\n<blockquote>\n  <p>Can't load\n  'C:\\Users...\\AppData\\Local\\Temp\\par-73656172756d7567616d\\cache-a6d57d5a234829aae84d08c4a78a09ad307ea8d3\\a9057da2.xs.dll'\n  for module Net::SSH2: load_file:The specified module could not be\n  found at C:/Strawberry/perl/lib/DynaLoader.pm line 193. at\n  C:/Strawberry/perl/vendor/lib/PAR/Heavy.pm line 123.</p>\n</blockquote>\n\n<p>Tried to workaround with the below methods but none of them worked</p>\n\n<ol>\n<li>Tried to pack from a portable version of Strawberry Perl</li>\n<li>Tried to link a9057da2.xs.dll while packing using Par::Packer</li>\n</ol>\n\n<p>Is there any workaround or fix for packing the perl scrip to .exe with Net:SSH2.\nOr are there alternatives to Net::SSH2 for ssh from windows to Linux using public keys (not passing passwords)?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529563822, "post_id": 50962009, "comment_id": 88920869, "body": "What are the array elements -- lines?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529563960, "post_id": 50962009, "comment_id": 88920940, "body": "@zdim, yes, the array will be router config including acl&#39;s, interface configs, routing tables etc. I just need to grab the interface detail specifically which will be stored in smaller flat files. So the array is as you see it i the example, but including other items."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529564114, "post_id": 50962009, "comment_id": 88921022, "body": "How do you tell the last item of the last interface section? (That&#39;s not the end of the file, is it?)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529564326, "post_id": 50962009, "comment_id": 88921152, "body": "@zdim, that is the problem, there is no beggining or end of the sections, it can start and end at any point. will edit question and show examples."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529564541, "post_id": 50962009, "comment_id": 88921258, "body": "@zdim as you can see in the edit, other config detail can follow, but will never be the same for any 2 device configs. Keep in mind we have different configs as we get Juniper devices, Cisco etc. Hence why I was merely thinking of using the match of interface with no space before it, then everything with 2 spaces means it is it&#39;s config."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529564793, "post_id": 50962009, "comment_id": 88921402, "body": "OK.  Still, you have to somehow be able to tell where <code>interface Ethernet1&#47;1</code> ends.  How do you know what the last line of that section is (where to stop)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529564919, "post_id": 50962009, "comment_id": 88921476, "body": "you don&#39;t know :) when the next interface starts, if means the previous ended. These examples are exactly as we see it. Some interfaces are in a shut state, so has less detail, others form a bundle, so have more info. The only thing that is a patern is the beginning of each item has no space before, then that items config items each have 2 spaces prior to the item."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529565376, "post_id": 50962009, "comment_id": 88921750, "body": "So, you have an array, of lines. An &quot;interface section&quot; starts with a line <code>interface</code> and ends before the next such line.  Then you get to the last <code>interface</code> line in the array ... where does that &quot;interface section&quot; ends? Does it go all the way to the end of the array?  You must know where to stop for the last one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529565764, "post_id": 50962009, "comment_id": 88921965, "body": "@zdim that is the problem, you do not know, the last interface will be where the next line does not start with <code>interface</code> :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529565917, "post_id": 50962009, "comment_id": 88922041, "body": "That is not possible; then you couldn&#39;t solve the problem.  Take line <code>interface Ethernet1&#47;1</code>, which I asked about above. You start reading lines after it ... until when? To the end of the array? To the line <code>clock timezone GMT 2 0</code> (unindented)?  If you don&#39;t know <i>that</i>, when to stop, you cannot have a solution for the last segment."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529566060, "post_id": 50962009, "comment_id": 88922132, "body": "unfortunately that is how it is :( That is exactly why I mentioned that the only way we know the detail of an interface has stopped is that the next item in the line will start without a leading 2 spaces and not be named interface."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1529566175, "post_id": 50962009, "comment_id": 88922194, "body": "Ah, &quot;<i>without the leading two spaces</i>&quot; !  That&#39;s what I was asking :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1530093392, "post_id": 50962511, "comment_id": 89109492, "body": "I have a question on the first script... I want to assign the line starting with interface to another variable, but I am unable to. I just want to split of the interface name from the rest of the config. I managed to do this in the last section simply by doing <code>if ($lines[$i] =~ &#47;^interface&#47;) {..</code> but it does not working i the first section."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1530119744, "post_id": 50962511, "comment_id": 89126281, "body": "@Jacob  The first snippet builds the array of indices at which <code>interface</code> lines are, <code>@idx</code>.  So the lines themselves are <code>my @if_lines = @lines[@idx];</code> .  When you index into an array you can use <i>a list</i> of indices, (<code>@ary[0,-1]</code>, <code>@ary[2..5]</code>, ...), and you get the array <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slice</a> (for hashes as well).  That &quot;list&quot; may be an array as well so <code>@lines[@idx]</code>.  Is that what you need?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1530165113, "post_id": 50962511, "comment_id": 89140053, "body": "Sorry for the delay in reply, my laptop crashed. Thanks, I think I get what you are saying, let me try that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1530175376, "post_id": 50962511, "comment_id": 89145419, "body": "Thanks. I simply did: <code>$iname = $lines[$idx[$i]]</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1531428233, "last_edit_date": 1531428233, "creation_date": 1529565261, "answer_id": 50962511, "question_id": 50962009, "link": "https://stackoverflow.com/questions/50962009/match-and-print-each-selection-from-array/50962511#50962511", "title": "match and print each selection from array", "body": "<p>The problem: An array (<code>@lines</code>) has \"interface sections\" which start with an <code>/^interface/</code> line and run until the next <code>interface</code> line. The last section stops at the first unindented line.  Parse interface sections from the array.</p>\n\n<p>One way: Find indices of each <code>interface</code> line in the array <code>@lines</code>. Then elements of <code>@lines</code> between successive indices are the interface sections. The last one is found separately.</p>\n\n<pre><code>my @idx = grep { $lines[$_] =~ /^interface/ } 0..$#lines;\n\nfor my $i (0..$#idx-1) {\n    say \"Interface:\";\n    say \"\\t$_\" for @lines[$idx[$i]..$idx[$i+1]-1];\n}\n\n# The last interface section stops at the first unindented line\nsay \"Interface:\";\nfor my $i ($idx[-1] .. $#lines) {\n    last if $lines[$i] =~ /^\\S/ and $lines[$i] !~ /^interface/;\n    say \"\\t$lines[$i]\";\n}\n</code></pre>\n\n<p>The last <code>interface</code> segment goes until the first unindented line, as clarified in comments.</p>\n\n<p>Prints <code>\"Interface:\"</code> are there only to visually distinguish sections; the lines for each interface can be added to an arrayref instead of printing, for example. Tested on the posted sample.</p>\n\n<hr>\n\n<p>Another way: Iterate over <code>@lines</code> and for each <code>/^interface/</code> line add a new arrayref to the array with all sections. Then the lines are added to that, last, arrayref. Exit on the first unindented line which isn't <code>/^interface/</code></p>\n\n<p>The program gets lines from the submitted file (or <code>lines.txt</code>), with the question's sample.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Data::Dump qw(dd);\nuse Path::Tiny;\n\nmy $file = shift @ARGV or 'lines.txt';\n\nmy @lines = path($file)-&gt;lines({chomp=&gt;1});\n\nmy @if_sections;  # store arrayrefs with lines for each interface\n\nfor (@lines) {\n    if (/^interface/) {\n        push @if_sections, [ $_ ];  # add arrayref for new interface\n        next;\n    }   \n    elsif (/^\\S/) { last }\n\n    push @{$if_sections[-1]}, $_;   # add lines to the last arrayref\n}\n\ndd \\@if_sections;\n</code></pre>\n\n<p>Uses the handy <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a> to read the file. The module runs checks and croaks on failures.</p>\n\n<p>The <code>dd</code> from <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> is used to easily show the data structure, for convenience.  This is an array with elements that are array references, so to work with it</p>\n\n<pre><code>foreach my $iface (@if_sections) { \n    say \"Interface section:\";\n    foreach my $line (@$iface) {\n        say $line;\n    }\n}\n</code></pre>\n\n<p>what can be written more compactly in a number of ways.</p>\n\n<p>See the tutorial <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and\nthe complex data structure cookbook <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50962511, "answer_count": 1, "score": -1, "last_activity_date": 1531428233, "creation_date": 1529563508, "last_edit_date": 1529564473, "question_id": 50962009, "link": "https://stackoverflow.com/questions/50962009/match-and-print-each-selection-from-array", "title": "match and print each selection from array", "body": "<p>I have a script which collects configuration data from a database and stores it in an array. I need to print find each interface and print it's config detail for a device. I will only post the parts that I need help with.</p>\n\n<p>So firstly, here is an extract from the array:</p>\n\n<pre><code>track 2 interface GigabitEthernet1/6 line-protocol\n!\n! \n!\n!\n!\ninterface Port-channel10.1\n description Enclosure 1 - 3040-1b\n switchport\n switchport trunk encapsulation dot\n switchport trunk allowed vlan 200, 202\n switchport mode trunk\n logging event link-status\n logging event trunk-status\n logging event bundle-status\n logging event spanning-tree status\n shutdown\ninterface Ethernet1/20\n  description tx to something\n  switchport mode trunk\n  switchport trunk allowed vlan 200-300\n  spanning-tree guard root\n  speed 1000\n  duplex full\ninterface Bundle-Ether2.1\n description Bundle link to something\n service-policy input qos-pol1\n vrf V17:vodanet\n ipv4 address 10.1.1.1 255.0.0.0\n encapsulation 250\ninterface Ethernet1/1\n  description some interface desc\n  switchport mode trunk\n  switchport trunk allowed vlan 200-299\n  spanning-tree guard root\n  duplex full\n  no negotiate auto\nclock timezone GMT 2 0\nline console\n  terminal length 48\n  ...\n</code></pre>\n\n<p>So each interface does not necessarily have the same amount of config detail following it. I basically need to take each of these interface configurations and print them individually. I will be storing these in smaller config-let flat files. So I need to print from <code>interface ...</code> till the last item before the next interface, but I am lost in searching. This is my latest attempt, but only works if I search for 2 different start/end strings, like so:</p>\n\n<pre><code>foreach (@array) {\n    if (/^interface/) {\n        $counter = 1;\n    } elsif (/duplex/) {\n        $counter =0;\n      } elsif ($counter) {\n            print;\n    }\n}\n</code></pre>\n\n<p>The problem here is I am missing the first and last string, and not all interfaces end with <code>duplex</code>. I was thinking of using the beginning of line <code>interface</code> and then each double white space delimited items after but unsure how. Can someone please help me in finding a solution.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>So to clarify <code>array</code> it is simply lines grabbed from a database and pushed to <code>@array</code></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1529557205, "post_id": 50960479, "comment_id": 88918115, "body": "Is this coming from a CSV file? Isn&#39;t there a perl module for parsing it, so you don&#39;t have to roll your own regexp?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529557321, "post_id": 50960479, "comment_id": 88918150, "body": "<code>$</code> matches the end of the line, but it&#39;s a zero-length assertion so nothing will be in the capture group."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529557600, "post_id": 50960479, "comment_id": 88918238, "body": "Hi, @Barmar. Thanks for the reply. Do you know any core Perl modules that would parse this as expected above? And yes this could come from a CSV file."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1529558102, "post_id": 50960479, "comment_id": 88918438, "body": "How about the <code>Text::CSV</code> module? It&#39;s the first hit from googling &quot;perl csv module."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1529558829, "post_id": 50960479, "comment_id": 88918661, "body": "@JimGarrison I think the example is in the <code>$text</code> variable in the code."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529558993, "post_id": 50960479, "comment_id": 88918726, "body": "@Barmar I see... thx."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529559229, "post_id": 50960479, "comment_id": 88918818, "body": "@Barmar: Thanks for the suggestion. I did consider Text::CSV but I am unable to use it as it is a CPAN module and due to restrictions I won&#39;t be able to install it."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1529559339, "post_id": 50960479, "comment_id": 88918868, "body": "Parsing CSV with regular expressions is tricky, it&#39;s hard to deal with escaping and quoting. And why did you ask for a module recommendation if you&#39;re not allowed to use them? Or is it only CPAN that&#39;s restricted? Where else does one find perl modules?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529559354, "post_id": 50960479, "comment_id": 88918879, "body": "Anyway, you can google as well as I can."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1529560016, "post_id": 50960479, "comment_id": 88919121, "body": "@Barmar  They asked for a &quot;core&quot; module ... and there&#39;s none such as far as I know."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1529561267, "post_id": 50960479, "comment_id": 88919638, "body": "Thanks for your responses. I may have solved my own problem. I just added the following &quot;hack&quot; after the while loop.   push @colArr, &#39;&#39; if ( $text =~ /[,]$/ or $text eq &#39;&#39; ); # New: Capture final trailing NULL value"}], "answers": [{"tags": [], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "is_accepted": false, "score": -1, "last_activity_date": 1529562494, "creation_date": 1529562494, "answer_id": 50961754, "question_id": 50960479, "link": "https://stackoverflow.com/questions/50960479/is-it-possible-to-use-the-end-of-string-as-a-regex-capture-group/50961754#50961754", "title": "Is it possible to use the End of String &quot;$&quot; as a regex capture group?", "body": "<p>Sorry for taking up your time but I think I solved my own problem below by adding an additional push after the while loop.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $text = qq(,,,\" test \",ing,,\"hello \"\", world\",\"some \"\",\"\" text w/ comma\",,,end_test,,);\nmy @colArr;\n\nwhile ( $text =~ /([^\",]+)|\"((?:[^\"]|\"\")*)\"|(?&lt;=^)([,])|(?&lt;=[,])([,])/gx ) {\n\n    my $field = '';\n\n    if ( defined $1 ) {\n        $field = $1;\n    }\n    elsif ( defined $2  ) {\n        ( $field = $2 ) =~ s/\"\"/\"/g;\n    }\n\n    # For $3 and 4, comma will be captured but should be treated as NULL\n    # Hoping to capture End of line as $5 where exists a comma behind it\n\n    push @colArr, $field;\n\n}\n\npush @colArr, '' if ( $text =~ /[,]$/ or $text eq '' ); # New: Capture final trailing NULL value\n\nfor ( my $i = 0; $i &lt; @colArr; $i++ ) {\n    print \"[$i]\\t: $colArr[$i]\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529562535, "creation_date": 1529555855, "last_edit_date": 1529562535, "question_id": 50960479, "link": "https://stackoverflow.com/questions/50960479/is-it-possible-to-use-the-end-of-string-as-a-regex-capture-group", "title": "Is it possible to use the End of String &quot;$&quot; as a regex capture group?", "body": "<p>I have a comma delimited string whose fields are enclosed in double quotes that looks like the following and would like to split the text using Perl and regex. </p>\n\n<p>I got the first 2 regex capture groups from the Second Edition Perl Cookbook and I tried to modify the regex to capture NULL values at the start of the line, in between and at the end.</p>\n\n<p>There should be 2 NULL values at the end but I am only getting 1 because I am using a look-behind to check if there is a preceding comma.</p>\n\n<p>Is it possible to get a 5th capture group patterned as ,\\s*($) ( comma + maybe some whitespace + End of line ) but only getting the End of Line?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $text = qq(,,,\" test \",ing,,\"hello \"\", world\",\"some \"\",\"\" text w/ comma\",,,end_test,,);\nmy @colArr;\n\nwhile ( $text =~ /([^\",]+)|\"((?:[^\"]|\"\")*)\"|(?&lt;=^)([,])|(?&lt;=[,])([,])/gx ) {\n\n    my $field = '';\n\n    if ( defined $1 ) {\n        $field = $1;\n    }\n    elsif ( defined $2  ) {\n        ( $field = $2 ) =~ s/\"\"/\"/g;\n    }\n\n    # For $3 and 4, comma will be captured but should be treated as NULL\n    # Hoping to capture End of line as $5 where exists a comma behind it\n\n    push @colArr, $field;\n\n}\n\npush @colArr, '' if ( $text =~ /[,]$/ or $text eq '' ); # New: Capture final trailing NULL value\n\nfor ( my $i = 0; $i &lt; @colArr; $i++ ) {\n    print \"[$i]\\t: $colArr[$i]\\n\";\n}\n\n=pod\nExpected:\n[0]     :\n[1]     :\n[2]     :\n[3]     :  test\n[4]     : ing\n[5]     :\n[6]     : hello \", world\n[7]     : some \",\" text w/ comma\n[8]     :\n[9]     :\n[10]    : end_test\n[11]    :\n[12]    :\n\nActual:\n[0]     :\n[1]     :\n[2]     :\n[3]     :  test\n[4]     : ing\n[5]     :\n[6]     : hello \", world\n[7]     : some \",\" text w/ comma\n[8]     :\n[9]     :\n[10]    : end_test\n[11]    :\n=cut\n</code></pre>\n\n<p>Do let me know if anyone has better ideas on how to do this.\nAlso, I can't install CPAN modules due to user restrictions.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1529554670, "post_id": 50960273, "comment_id": 88917436, "body": "Please show the code you have tried and explain what is not working.  Asking us to write code for you is a pretty sure way to accrue downvotes and have your question put on hold."}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1529554952, "post_id": 50960273, "comment_id": 88917504, "body": "I did this and it returns systax erroe<code>$i = length(@a); for (0..$1) { \t@array = push(@array, @a[$i], @s[$i]; \t} \tprint @array;</code>"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1529554984, "post_id": 50960273, "comment_id": 88917512, "body": "Please <a href=\"https://stackoverflow.com/posts/50960273/edit\">edit</a> your question and add the code there."}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1529555443, "post_id": 50960273, "comment_id": 88917634, "body": "Thanks for advice, edited my question."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1529587975, "post_id": 50960563, "comment_id": 88935963, "body": "Please use <code>strict</code> and <code>warnings</code> in code that you expect a user to copy and learn from."}], "tags": [], "owner": {"reputation": 1084, "user_id": 3087119, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/mJNMK.jpg?s=128&g=1", "display_name": "Justinus Hermawan", "link": "https://stackoverflow.com/users/3087119/justinus-hermawan"}, "is_accepted": false, "score": -1, "last_activity_date": 1529593037, "last_edit_date": 1529593037, "creation_date": 1529556483, "answer_id": 50960563, "question_id": 50960273, "link": "https://stackoverflow.com/questions/50960273/how-to-add-each-element-of-array-to-another-arrays-each-element/50960563#50960563", "title": "How to add each element of array to another array&#39;s each element?", "body": "<pre><code>use warnings;\nuse strict;    \nuse Data::Dumper;\n\nmy $result = [];\nmy @a = (\"a\", \"b\");\nmy @i = (1, 2);\nmy @s = ( \"\\!\", \"\\?\");\n\nmy $index = 0;\nfor my $a ( @a ) {\n  push( @$result, ($a[$index], $i[$index], $s[$index]) );\n  $index = $index + 1;\n}\n\nprint Dumper(@$result);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 0, "creation_date": 1529559349, "post_id": 50960631, "comment_id": 88918874, "body": "@Seho Welcome :).  Thank you for editing the question as suggested by Jim :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1529654929, "last_edit_date": 1529654929, "creation_date": 1529556929, "answer_id": 50960631, "question_id": 50960273, "link": "https://stackoverflow.com/questions/50960273/how-to-add-each-element-of-array-to-another-arrays-each-element/50960631#50960631", "title": "How to add each element of array to another array&#39;s each element?", "body": "<p>The basic idea you have is good, to iterate simultaneously using index of an array. But the code has many elementary errors and it also doesn't do what the examples show.  I suggest to first make a thorough pass through a modern and reputable Perl tutorial.</p>\n\n<p>The examples indicate that you want to concatenate (see <a href=\"https://perldoc.perl.org/perlop.html#Additive-Operators\" rel=\"nofollow noreferrer\"><code>.</code>  operator</a>) elements at each index</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @a1 = ('a', 'b');\nmy @a2 = (1, 2);\nmy @a3 = ('!', '?');\n\nmy @res;\nforeach my $i (0..$#a1) {\n    push @res, $a1[$i] . $a2[$i] . $a3[$i];\n}\n\nsay for @res;\n</code></pre>\n\n<p>where <code>$#a1</code> is the index of the last element of array <code>@a1</code>. This assumes that all arrays are of the same size and that all their elements are defined.</p>\n\n<p>This exact work can be done using <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> in one statement</p>\n\n<pre><code>my @res = map { $a1[$_] . $a2[$_] . $a3[$_] } 0..$#a1;\n</code></pre>\n\n<p>with the same, serious, assumptions. Even if you knew they held, do you know <em>for sure</em>, in every run on any data? For a robust approach see the <a href=\"https://stackoverflow.com/a/50960681/4653379\">answer by mwp</a>.</p>\n\n<p>There is also <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.428/lib/List/MoreUtils.pm#each_array_ARRAY1_ARRAY2_...\" rel=\"nofollow noreferrer\">each_array</a> from <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.428/lib/List/MoreUtils.pm\" rel=\"nofollow noreferrer\">List::MoreUtils</a>, providing a \"simultaneous iterator\" for all arrays</p>\n\n<pre><code>my $ea = each_array(@a1, @a2, @a3);\n\nmy @res;\nwhile ( my ($e1, $e2, $e3) = $ea-&gt;() ) {\n    push @res, $e1 . $e2 . $e3\n}\n</code></pre>\n\n<p>which is really useful for more complex processing.</p>\n\n<p>A quick run through basics</p>\n\n<ul>\n<li><p>Always have <code>use warnings;</code> and <code>use strict;</code> at the beginning of your programs. They will catch many errors that would otherwise take a lot of time and nerves.</p></li>\n<li><p>Don't use single-letter variable names. We quickly forget what they meant and the code gets hard to follow, and they make it way too easy to make silly mistakes.</p></li>\n<li><p>Array's size <em>is not</em> given by <code>length</code>. It is normally obtained using <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> -- when an array is assigned to a scalar the number of its elements is returned. For iteration over indices there is <code>$#ary</code>, the index of the last element of <code>@ary</code>. Then the list of indices is <code>0 .. $#ary</code>, using the <a href=\"https://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range (<code>..</code>) operator</a></p></li>\n<li><p>The sigil (<code>$</code>, <code>@</code>, <code>%</code>)  at the beginning of an identifier (variable name) indicates the <a href=\"https://perldoc.perl.org/perldata.html#Variable-names\" rel=\"nofollow noreferrer\">type of the variable</a> (scalar, array, hash). An array element is a scalar so it needs <code>$</code> -- <code>$ary[0]</code></p></li>\n<li><p>The <a href=\"https://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">push</a> doesn't return array elements but it rather adds to the array in its first argument the scalars in the list that follows.</p></li>\n<li><p>The <code>print @array;</code> prints array elements without anything between them. When you quote it spaces are added, <code>print \"@array\\n\";</code>.  Note the handy <a href=\"https://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">feature</a> <code>say</code> though, which adds the new line. </p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1529587863, "post_id": 50960681, "comment_id": 88935891, "body": "<i>You are iterating from zero to the last index, but you aren&#39;t assigning the iterator to a variable, so you have no way to access it.</i> Actually, it&#39;s in <code>$_</code>."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 2, "last_activity_date": 1529589592, "last_edit_date": 1529589592, "creation_date": 1529557263, "answer_id": 50960681, "question_id": 50960273, "link": "https://stackoverflow.com/questions/50960273/how-to-add-each-element-of-array-to-another-arrays-each-element/50960681#50960681", "title": "How to add each element of array to another array&#39;s each element?", "body": "<ol>\n<li>Always <code>use strict;</code> and <code>use warnings;</code> (and use <code>my</code> to declare variables).</li>\n<li>You don't need to escape <code>?</code> and <code>!</code> in Perl strings, and you can use the <code>qw//</code> quote-like operator to easily build lists of terms.</li>\n<li>You are using <code>length(@a)</code> to determine the last index, but Perl array indexes are zero-based, so the last index would actually be <code>length(@a) - 1</code>. (But that's still not right. See the next point...) </li>\n<li>To get an array's length in Perl, you want to evaluate it in scalar context. The <code>length</code> function is for strings.</li>\n<li>You have not accounted for the situation when the arrays are not all the same length.</li>\n<li>You assign the last index to a variable <code>$i</code>, but then you reference the variable <code>$1</code> on the next line. Those are two different variables.</li>\n<li>You are iterating from zero to the last index, but you aren't explicitly assigning the iterator to a variable, and you aren't using the implicit iterator variable (<code>$_</code>).</li>\n<li>To get a single array element by index in Perl, the syntax is <code>$a[$i]</code>, not <code>@a[$i]</code>. Because you only want a single, scalar value, the expression has to start with the scalar sigil <code>$</code>. (If instead you wanted a list of values from an expression, you would start the expression with the array sigil <code>@</code>.)</li>\n<li><code>push</code> modifies the array given by the first argument, so there's no need to assign the result back to the array in the expression. </li>\n<li>You are missing a closing parenthesis in your <code>push</code> expression.</li>\n<li>In your same code, you have <code>@new</code> and <code>@array</code>, and you are only adding elements from <code>@a</code> and <code>@s</code> (i.e. you forgot about <code>@i</code>).</li>\n<li>You are pushing elements onto the array, but you aren't concatenating them into the desired string format.</li>\n</ol>\n\n<p>Here is a working version of your implementation:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw{max};\n\nmy @a = (\"a\", \"b\");\nmy @i = (\"1\", \"2\");\nmy @s = (\"!\", \"?\");\n\nmy @array;\nmy $length = max scalar @a, scalar @i, scalar @s;\n\nforeach my $i (0 .. $length - 1) {\n  push @array, ($a[$i] // '') . ($i[$i] // '') . ($s[$i] // '');\n}\n\nprint @array;\n</code></pre>\n\n<p>(The <code>//</code> means \"defined-or\".)</p>\n\n<p>Here's how I might write it:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw{max};\n\nmy @a = qw/a b/;\nmy @i = qw/1 2/;\nmy @s = qw/! ?/;\n\nmy @array = map {\n  join '', grep defined, $a[$_], $i[$_], $s[$_]\n} 0 .. max $#a, $#i, $#s;\n\nprint \"@array\\n\";\n</code></pre>\n\n<p>(The <code>$#a</code> means \"give me the index of the last element of the array <code>@a</code>.\")</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 0, "creation_date": 1529647626, "post_id": 50970046, "comment_id": 88958501, "body": "Is the zip_by built-in function or a variable defined by the user? Could you maybe explain what exactly v6 does? I&#39;ve done some research about these terms which I&#39;m not familar with yet I can&#39;t understand the concept clearly. A help would be great, thansk!"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 0, "creation_date": 1529653893, "post_id": 50970046, "comment_id": 88961286, "body": "I edited the answer to reply to your questions because there&#39;s not enough space in the comments. HTH!"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 4, "last_activity_date": 1529653803, "last_edit_date": 1529653803, "creation_date": 1529588448, "answer_id": 50970046, "question_id": 50960273, "link": "https://stackoverflow.com/questions/50960273/how-to-add-each-element-of-array-to-another-arrays-each-element/50970046#50970046", "title": "How to add each element of array to another array&#39;s each element?", "body": "<pre><code>use 5.008;\nuse List::AllUtils qw(zip_by);\n\u22ee\nmy @new = zip_by { join '', @_ } \\@a, \\@i, \\@s;\n</code></pre>\n\n<p><a href=\"http://p3rl.org/List::AllUtils#zip_by\" rel=\"nofollow noreferrer\"><code>zip_by</code></a> is a subroutine from the <code>List::AllUtils</code> module on CPAN. So it's not built-in.</p>\n\n<hr>\n\n<pre><code>use v6;\n\u22ee\nmy @new = map { .join }, zip @a, @i, @s;\n</code></pre>\n\n<p>In Perl 6, <a href=\"https://docs.perl6.org/routine/zip\" rel=\"nofollow noreferrer\"><code>zip</code></a> is already part of the standard library. This additionaly solution is here for flavour, it's an opportunity to show off strengths: does the same job, but with less syntax in comparison, and works out of the box.</p>\n\n<p><code>v6</code> is not strictly necessary, here I just used it for contrast to indicate the version. But at the beginning of a file it also has the nice property that if you accidentally run Perl 6 code in Perl 5, you'll get a nice error message instead of a cryptic syntax error. Try it! From the <a href=\"http://p3rl.org/use\" rel=\"nofollow noreferrer\"><code>use VERSION</code> documentation</a>:</p>\n\n<blockquote>\n  <p>An exception is raised if VERSION is greater than the version of the current Perl</p>\n</blockquote>\n"}], "owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1529655925, "creation_date": 1529554481, "last_edit_date": 1529655925, "question_id": 50960273, "link": "https://stackoverflow.com/questions/50960273/how-to-add-each-element-of-array-to-another-arrays-each-element", "title": "How to add each element of array to another array&#39;s each element?", "body": "<p>I have these sets of arrays which has two elements for each.</p>\n\n<pre><code>@a = (\"a\", \"b\");\n\n@i = (1, 2);\n\n@s = ( \"\\\\!\", \"\\?\");\n</code></pre>\n\n<p>How do I make the result such that it'll return</p>\n\n<pre>\na1!,  b2?\n</pre>\n\n<p>And I need them to be a new set of an array like</p>\n\n<pre><code>@new =(a1!,b2?)\n</code></pre>\n\n<p>I wrote the code for output of the answer  </p>\n\n<pre><code>$i = length(@a);\n\nfor (0..$1) {\n\n    @array = push(@array, @a[$i], @s[$i];\n\n}\n\nprint @array;\n</code></pre>\n\n<p>However, it only returned </p>\n\n<pre><code>syntax error at pra.pl line 10, near \"];\"\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1529606202, "post_id": 50959899, "comment_id": 88946992, "body": "Thank you! The solution of course worked brilliantly, I knew it was something embarassingly simple that was escaping me. Doing the math first and then concatenating the results is exactly what I was looking for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "edited": false, "score": 0, "creation_date": 1529655476, "post_id": 50959899, "comment_id": 88962072, "body": "@Asterdahl You are welcome :).  This is not embarrassing -- it can confuse as one is inside a regex. Take note of the <code>\\K</code> facility, it is sometimes extremely useful.  Let me know if questions come up."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1530428422, "last_edit_date": 1530428422, "creation_date": 1529551267, "answer_id": 50959899, "question_id": 50959097, "link": "https://stackoverflow.com/questions/50959097/print-strings-alongside-math-results-in-s-substitution-with-the-e-modifier/50959899#50959899", "title": "Print strings alongside math results in s// substitution with the /e modifier", "body": "<p>The replacement part is treated as <em>code</em> under <code>/e</code> so it need be written using legal syntax, like you'd use in a program. Writing <code>$t$v</code> isn't legal syntax (<code>$1$2</code> in your regex).</p>\n\n<p>One way to concatenate strings is <code>$t . $v</code>. Then you also need parenthesis around the addition, since by precedence rules the strings <code>$1</code> and <code>$2</code> are concatenated first, and that alphanumeric string attempted in addition, drawing a warning. So</p>\n\n<pre><code>perl -i -pe's/(Foo *)([0-9]+)/$1.($2-4)/e'\n</code></pre>\n\n<p>I replaced <code>\\d</code> with <code>[0-9]</code> since <code>\\d</code> matches all kinds of \"digits,\" from all over Unicode, what doesn't seem to be what you need.</p>\n\n<hr>\n\n<p>There is another way if the math comes after the rest of the pattern, as it does in your examples</p>\n\n<pre><code>perl -i -pe's/Foo *\\K([0-9]+)/$1-4/e'\n</code></pre>\n\n<p>Here the <a href=\"https://perldoc.perl.org/5.12.4/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code></a> is a form of <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookbehind</a> which drops all matches previous to that anchor, so they are not consumed. Thus only the <code>[0-9]+</code> is replaced, as needed. </p>\n"}], "owner": {"reputation": 85, "user_id": 1876906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa77c9d3801375e1e523a5738f9e5fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Asterdahl", "link": "https://stackoverflow.com/users/1876906/asterdahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50959899, "answer_count": 1, "score": 1, "last_activity_date": 1530428422, "creation_date": 1529544111, "last_edit_date": 1529626324, "question_id": 50959097, "link": "https://stackoverflow.com/questions/50959097/print-strings-alongside-math-results-in-s-substitution-with-the-e-modifier", "title": "Print strings alongside math results in s// substitution with the /e modifier", "body": "<p>I am trying to write a very simple one liner to find cases of: </p>\n\n<pre><code>foo N \n</code></pre>\n\n<p>and replace them with </p>\n\n<pre><code>foo N-Y \n</code></pre>\n\n<p>For example, if I had 3 files and they had the following lines in them:</p>\n\n<pre><code>foo 5\nfoo 3\nfoo 9 \n</code></pre>\n\n<p>After the script is run with Y=4, the lines would read:</p>\n\n<pre><code>foo 1\nfoo -1\nfoo 5\n</code></pre>\n\n<p>I stumbled upon an existing thread that suggested using /e to run code in the replace half of the substitute command and was able to effectively subtract Y from all my matches, but I have no idea how to best print \"foo\" back into the file since when I try to separate foo and the number into two capture groups and print them back in, perl thinks I am trying to multiply them and wants an operator.</p>\n\n<p>Here's where I'm at: </p>\n\n<pre><code>find . -iname \"*somematch*\" -exec perl -pi -e 's/(Foo *)(\\d+)/$1$2-4/e' {} \\;\n</code></pre>\n\n<p>Of course this doesn't work, \"Scalar found where operator expected at -e line 1, near \"$1$2.\" I'm at a loss as to how best to proceed without writing something much longer.</p>\n\n<p><strong>Edit:</strong> To be more specific, if I have the /e option enabled to be able to perform math in the substitution, is there a simple way to print the string in another capture group in that substitution without it trying to do math to it?</p>\n\n<p>Alternatively, is there a simple way to surgically perform the substitution on only part of the pattern? I tried to combine m// and s/// to achieve the results but ended up getting nowhere.</p>\n"}, {"tags": ["perl", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "is_accepted": false, "score": 0, "last_activity_date": 1529593503, "creation_date": 1529593503, "answer_id": 50971817, "question_id": 50959089, "link": "https://stackoverflow.com/questions/50959089/getting-specific-raw-elements-and-its-subelements-from-xml-file-using-xmltwig/50971817#50971817", "title": "Getting specific raw elements and its subelements from XML file using XML::TWIG?", "body": "<p>The script expects the XML file as command line argument and will get rid of all elements that do not match the <code>$criteria</code>. You also should consider to split up the input file into smaller chunks to avoid <code>out of memory</code> issues.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings FATAL =&gt; 'all';\nuse strict;\nuse XML::Twig;\n\nmy $criteria = 'Gambardella, Matthew';\nmy $xml  = XML::Twig-&gt;new(\n  twig_handlers =&gt; {\n    'catalog/*' =&gt; \\&amp;catalog,\n  },\n  pretty_print =&gt; 'indented',\n)-&gt;parsefile($ARGV[0]);\n\nprint $xml-&gt;toString();\n\nsub catalog {\n  my ($t, $catalog) = @_;\n\n  $catalog-&gt;cut() unless $catalog-&gt;findvalue('author') eq $criteria;\n\n  return;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9970236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a691658015fa83a1e17a264c89657faa?s=128&d=identicon&r=PG&f=1", "display_name": "YOGaKrite", "link": "https://stackoverflow.com/users/9970236/yogakrite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529593503, "creation_date": 1529544047, "question_id": 50959089, "link": "https://stackoverflow.com/questions/50959089/getting-specific-raw-elements-and-its-subelements-from-xml-file-using-xmltwig", "title": "Getting specific raw elements and its subelements from XML file using XML::TWIG?", "body": "<p>I have the following large xml file (5-10gb) : </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;catalog&gt;\n   &lt;book id=\"bk101\"&gt;\n      &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n      &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n      &lt;price&gt;44.95&lt;/price&gt;          \n   &lt;/book&gt;\n   &lt;car id=\"bk102\"&gt;\n      &lt;author&gt;Ralls, Kim&lt;/author&gt;\n      &lt;title&gt;Midnight Rain&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n      &lt;price&gt;5.95&lt;/price&gt;\n   &lt;/car&gt;\n   &lt;book id=\"bk101\"&gt;\n      &lt;author&gt;Joseph&lt;/author&gt;\n      &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n   &lt;/book&gt;\n   &lt;magazine id=\"bk103\"&gt;\n      &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n      &lt;title&gt;Maeve Ascendant&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n   &lt;/magazine&gt;\n   .....\n&lt;/catalog&gt;\n</code></pre>\n\n<p>How can i read from book and magazine elements (ignore car) but only extract the the element (whole block) that contains the author name Gambardella, Matthew to a new file using XML TWIG or any other method in PERL?</p>\n\n<pre><code>   &lt;book id=\"bk101\"&gt;\n      &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n      &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n      &lt;price&gt;44.95&lt;/price&gt;          \n   &lt;/book&gt;      \n   &lt;magazine id=\"bk103\"&gt;\n      &lt;author&gt;Gambardella, Matthew&lt;/author&gt;\n      &lt;title&gt;Maeve Ascendant&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n   &lt;/magazine&gt;\n   .....\n&lt;/catalog&gt;\n</code></pre>\n"}]