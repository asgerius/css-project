[{"tags": ["perl", "http-headers", "httprequest", "httpresponse", "user-agent"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519857652, "post_id": 49038859, "comment_id": 85084992, "body": "Also, a single <code>LWP::UserAgent::request</code> call may end up sending several HTTP requests, in the case of redirects."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1519870670, "post_id": 49039495, "comment_id": 85088528, "body": "Note that this doesn&#39;t show the headers actually sent, just what LWP passes to Net::HTTP."}, {"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 0, "creation_date": 1519912475, "post_id": 49039495, "comment_id": 85106797, "body": "Since all solutions (available at time of this comment) lead to same or similar output, I reward very first answer."}], "tags": [], "owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "is_accepted": true, "score": 3, "last_activity_date": 1519856022, "creation_date": 1519856022, "answer_id": 49039495, "question_id": 49038859, "link": "https://stackoverflow.com/questions/49038859/how-to-get-full-http-request-not-response-headers/49039495#49039495", "title": "How to get full HTTP request (not response) headers", "body": "<p>I think you almost have it in your existing code. You are accessing the request URI with $response->request()->uri(). The ->request() is your HTTP::Request object. I believe that you can use $response->request->headers->as_string to get what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1519856123, "creation_date": 1519856123, "answer_id": 49039517, "question_id": 49038859, "link": "https://stackoverflow.com/questions/49038859/how-to-get-full-http-request-not-response-headers/49039517#49039517", "title": "How to get full HTTP request (not response) headers", "body": "<pre><code>print $response-&gt;request-&gt;as_string\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1519870636, "post_id": 49039947, "comment_id": 85088517, "body": "Note that this doesn&#39;t show the headers actually sent, just what LWP passes to Net::HTTP."}], "tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 1, "last_activity_date": 1519858101, "creation_date": 1519858101, "answer_id": 49039947, "question_id": 49038859, "link": "https://stackoverflow.com/questions/49038859/how-to-get-full-http-request-not-response-headers/49039947#49039947", "title": "How to get full HTTP request (not response) headers", "body": "<p>This will show you requests as well as responses.</p>\n\n<pre><code>use LWP::UserAgent;\nuse LWP::ConsoleLogger::Easy qw( debug_ua );\n\nmy $browser = LWP::UserAgent-&gt;new();\n\ndebug_ua( $browser );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1519918874, "last_edit_date": 1519918874, "creation_date": 1519870002, "answer_id": 49041536, "question_id": 49038859, "link": "https://stackoverflow.com/questions/49038859/how-to-get-full-http-request-not-response-headers/49041536#49041536", "title": "How to get full HTTP request (not response) headers", "body": "<p><code>$request-&gt;headers-&gt;as_string</code> and <code>$response-&gt;request-&gt;headers-&gt;as_string</code> will you get you the headers of the first and last request passed to Net::HTTP by LWP<sup>[1]</sup>, but these aren't quite what Net::HTTP sends. For example, Net::HTTP can add a <code>Content-Length</code> header, a <code>TE</code> header, and/or a number of others.</p>\n\n<p>Net::HTTP doesn't keep a record of the headers it actually sends. You will need a wire sniffer (e.g. <code>tcpdump</code>) or a debugging proxy (e.g. Fiddler) for that. You could also use a debugger or trace statements to view the request prepared in Net::HTTP::Methods's <code>format_request</code>. The most convenient, however, might be to wrap Net::HTTP::Methods's <code>format_request</code>.</p>\n\n<hr>\n\n<ol>\n<li><p>These are the same unless the initial request was redirected. To get all the requests (and responses), you can use:</p>\n\n<pre><code>while ($response) {\n   my $request = $response-&gt;request;\n   ...\n\n   $response = $response-&gt;previous;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 1, "accepted_answer_id": 49039495, "answer_count": 4, "score": 1, "last_activity_date": 1519918874, "creation_date": 1519853254, "last_edit_date": 1519918149, "question_id": 49038859, "link": "https://stackoverflow.com/questions/49038859/how-to-get-full-http-request-not-response-headers", "title": "How to get full HTTP request (not response) headers", "body": "<p>I have a simple code like this:</p>\n\n<pre><code>use LWP::UserAgent;\nuse HTTP::Cookies;\nuse HTTP::Request;\n\nmy $cookies = HTTP::Cookies-&gt;new();\nmy $browser = LWP::UserAgent-&gt;new();\n   $browser-&gt;agent(' ... ');    \n   $browser-&gt;cookie_jar($cookies);   \nmy $request = HTTP::Request-&gt;new();     \nmy $response;                           \nmy $url;                                \nmy $referer;                                        \n\n$referer = '';\n$url = 'https:// ...'; # url #1\n$request-&gt;url($url);\n$request-&gt;method('GET');\n$request-&gt;header('Referer' =&gt; $referer);    \n$response = $browser-&gt;request($request);    \nprint $response-&gt;request()-&gt;uri()     . \"\\n\\n\" .\n      $response-&gt;headers()-&gt;as_string . \"\\n\\n\" .\n      $response-&gt;content              . \"\\n\\n\";\n\n$referer = $response-&gt;request()-&gt;uri();\n$url = 'https:// ... '; # url #2\n$request-&gt;url($url);\n$request-&gt;method('GET');\n$request-&gt;header('Referer' =&gt; $referer);\n$response = $browser-&gt;request($request);\nprint $response-&gt;request()-&gt;uri()     . \"\\n\\n\" .\n      $response-&gt;headers()-&gt;as_string . \"\\n\\n\" .\n      $response-&gt;content              . \"\\n\\n\";\n</code></pre>\n\n<p>Now, I want to see full HTTP <strong>request headers</strong> as well, not just response headers.</p>\n\n<p>How can I do it? What has to be added to this code?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 12, "last_activity_date": 1583465050, "last_edit_date": 1583465050, "creation_date": 1519859250, "answer_id": 49040165, "question_id": 49038533, "link": "https://stackoverflow.com/questions/49038533/using-encodeencode-with-utf8/49040165#49040165", "title": "Using Encode::encode with &quot;utf8&quot;", "body": "\n\n<pre class=\"lang-none prettyprint-override\"><code>                   \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n                   \u2551                                            \u2502                      \u2551\n                   \u2551                  On Read                   \u2502       On Write       \u2551\n                   \u2551                                            \u2502                      \u2551\n        Perl       \u255f\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2562\n        5.26       \u2551                     \u2502                      \u2502                      \u2551\n                   \u2551 Invalid encoding    \u2502 Outside of Unicode,  \u2502 Outside of Unicode,  \u2551\n                   \u2551 other than sequence \u2502 Unicode nonchar, or  \u2502 Unicode nonchar, or  \u2551\n                   \u2551 length              \u2502 Unicode surrogate    \u2502 Unicode surrogate    \u2551\n                   \u2551                     \u2502                      \u2502                      \u2551\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u2551 :encoding(UTF-8) \u2551 Warns and Replaces  \u2502 Warns and Replaces   \u2502 Warns and Replaces   \u2551\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u255f\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2562\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u2551 :encoding(utf8)  \u2551 Warns and Replaces  \u2502 Accepts              \u2502 Warns and Outputs    \u2551\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u255f\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256b\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2562\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u2551 :utf8            \u2551 Corrupt scalar      \u2502 Accepts              \u2502 Warns and Outputs    \u2551\n\u2551                  \u2551                     \u2502                      \u2502                      \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2569\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Smm7r.png\" rel=\"nofollow noreferrer\">Click here if you have trouble viewing the above table</a></p>\n\n<p>Note that <code>:encoding(UTF-8)</code> actually decodes using utf8, then checks if the resulting character is in the acceptable range. This reduces the number of error messages for bad input, so it's good.</p>\n\n<p>(Encoding names are case-insensitive.)</p>\n\n<hr>\n\n<p>Tests used to generate the above table:</p>\n\n<h2>On read</h2>\n\n<ul>\n<li><p><strong><code>:encoding(UTF-8)</code></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf \"\\xC3\\xA9\\n\\xEF\\xBF\\xBF\\n\\xED\\xA0\\x80\\n\\xF8\\x88\\x80\\x80\\x80\\n\\x80\\n\" |\n   perl -MB -nle'\n      use open \":std\", \":encoding(UTF-8)\";\n      my $sv = B::svref_2object(\\$_);\n      printf \"%vX%s (internal: %vX, UTF8=%d)\\n\", $_, length($_)==1 ? \"\" : \" = $_\", $sv-&gt;PVX, utf8::is_utf8($_);\n   '\nutf8 \"\\xFFFF\" does not map to Unicode.\nutf8 \"\\xD800\" does not map to Unicode.\nutf8 \"\\x200000\" does not map to Unicode.\nutf8 \"\\x80\" does not map to Unicode.\nE9 (internal: C3.A9, UTF8=1)\n5C.78.7B.46.46.46.46.7D = \\x{FFFF} (internal: 5C.78.7B.46.46.46.46.7D, UTF8=1)\n5C.78.7B.44.38.30.30.7D = \\x{D800} (internal: 5C.78.7B.44.38.30.30.7D, UTF8=1)\n5C.78.7B.32.30.30.30.30.30.7D = \\x{200000} (internal: 5C.78.7B.32.30.30.30.30.30.7D, UTF8=1)\n5C.78.38.30 = \\x80 (internal: 5C.78.38.30, UTF8=1)\n</code></pre></li>\n<li><p><strong><code>:encoding(utf8)</code></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf \"\\xC3\\xA9\\n\\xEF\\xBF\\xBF\\n\\xED\\xA0\\x80\\n\\xF8\\x88\\x80\\x80\\x80\\n\\x80\\n\" |\n   perl -MB -nle'\n      use open \":std\", \":encoding(utf8)\";\n      my $sv = B::svref_2object(\\$_);\n      printf \"%vX%s (internal: %vX, UTF8=%d)\\n\", $_, length($_)==1 ? \"\" : \" = $_\", $sv-&gt;PVX, utf8::is_utf8($_);\n   '\nutf8 \"\\x80\" does not map to Unicode.\nE9 (internal: C3.A9, UTF8=1)\nFFFF (internal: EF.BF.BF, UTF8=1)\nD800 (internal: ED.A0.80, UTF8=1)\n200000 (internal: F8.88.80.80.80, UTF8=1)\n5C.78.38.30 = \\x80 (internal: 5C.78.38.30, UTF8=1)\n</code></pre></li>\n<li><p><strong><code>:utf8</code></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ printf \"\\xC3\\xA9\\n\\xEF\\xBF\\xBF\\n\\xED\\xA0\\x80\\n\\xF8\\x88\\x80\\x80\\x80\\n\\x80\\n\" |\n   perl -MB -nle'\n      use open \":std\", \":utf8\";\n      my $sv = B::svref_2object(\\$_);\n      printf \"%vX%s (internal: %vX, UTF8=%d)\\n\", $_, length($_)==1 ? \"\" : \" = $_\", $sv-&gt;PVX, utf8::is_utf8($_);\n   '\nE9 (internal: C3.A9, UTF8=1)\nFFFF (internal: EF.BF.BF, UTF8=1)\nD800 (internal: ED.A0.80, UTF8=1)\n200000 (internal: F8.88.80.80.80, UTF8=1)\nMalformed UTF-8 character: \\x80 (unexpected continuation byte 0x80, with no preceding start byte) in printf at -e line 4, &lt;&gt; line 5.\n0 (internal: 80, UTF8=1)\n</code></pre></li>\n</ul>\n\n<h2>On write</h2>\n\n<ul>\n<li><p><strong><code>:encoding(UTF-8)</code></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use open \":std\", \":encoding(UTF-8)\";\n   print \"\\x{E9}\\n\";\n   print \"\\x{FFFF}\\n\";\n   print \"\\x{D800}\\n\";\n   print \"\\x{20_0000}\\n\";\n' &gt;a\nUnicode non-character U+FFFF is not recommended for open interchange in print at -e line 4.\nUnicode surrogate U+D800 is illegal in UTF-8 at -e line 5.\nCode point 0x200000 is not Unicode, may not be portable in print at -e line 6.\n\"\\x{ffff}\" does not map to utf8.\n\"\\x{d800}\" does not map to utf8.\n\"\\x{200000}\" does not map to utf8.\n\n$ od -t c a\n0000000 303 251  \\n   \\   x   {   F   F   F   F   }  \\n   \\   x   {   D\n0000020   8   0   0   }  \\n   \\   x   {   2   0   0   0   0   0   }  \\n\n0000040\n\n$ cat a\n\u00e9\n\\x{FFFF}\n\\x{D800}\n\\x{200000}\n</code></pre></li>\n<li><p><strong><code>:encoding(utf8)</code></strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use open \":std\", \":encoding(utf8)\";\n   print \"\\x{E9}\\n\";\n   print \"\\x{FFFF}\\n\";\n   print \"\\x{D800}\\n\";\n   print \"\\x{20_0000}\\n\";\n' &gt;a\nUnicode surrogate U+D800 is illegal in UTF-8 at -e line 4.\nCode point 0x200000 is not Unicode, may not be portable in print at -e line 5.\n\n$ od -t c a\n0000000 303 251  \\n 355 240 200  \\n 370 210 200 200 200  \\n\n0000015\n\n$ cat a\n\u00e9\n\u2592\n\u2592\n</code></pre></li>\n<li><p><strong><code>:utf8</code></strong></p>\n\n<p>Same results as <code>:encoding(utf8)</code>.</p></li>\n</ul>\n\n<p>Tested using Perl 5.26.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Encode::encode by default will replace invalid characters with a substitution character. Is that true even if you are passing the looser \"utf8\" as the encoding?</em></p>\n</blockquote>\n\n<p>Perl strings are strings of 32-bit or 64-bit characters depending on the build. utf8 can encode any 72-bit integer. It is therefore capable of encoding all characters it can be asked to encode.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 5, "answer_count": 1, "score": 8, "last_activity_date": 1583465050, "creation_date": 1519851895, "question_id": 49038533, "link": "https://stackoverflow.com/questions/49038533/using-encodeencode-with-utf8", "title": "Using Encode::encode with &quot;utf8&quot;", "body": "<p>So as you probably know, in Perl \"utf8\" means Perl's looser understanding of UTF-8 which allows characters that technically aren't valid code points in UTF-8. By contrast \"UTF-8\" (or \"utf-8\") is Perl's stricter understanding of UTF-8 which doesn't allow invalid code points.</p>\n\n<p>I have a few usage questions related to this distinction:</p>\n\n<ol>\n<li><p>Encode::encode by default will replace invalid characters with a substitution character. Is that true even if you are passing the looser \"utf8\" as the encoding? </p></li>\n<li><p>What happens when you read and write files which were <code>open</code>'d using \"UTF-8\"? Does character substitution happen to bad characters or does something else happen?</p></li>\n<li><p>What is the difference between using <code>open</code> with a layer like '>:utf8' and a layer like '>:encoding(utf8)' ? Can both approaches be used with both 'utf8' and 'UTF-8'?</p></li>\n</ol>\n"}, {"tags": ["xml", "perl", "xml-parsing", "parse-error"], "comments": [{"owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 2, "creation_date": 1519852371, "post_id": 49038397, "comment_id": 85082523, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "reply_to_user": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1519855031, "post_id": 49038397, "comment_id": 85083866, "body": "I added the bit of the script that is erroring.  It would be more of a help to just tell me that you want to see the script.  I am very new to Perl and XML, and as you can tell, I have very few posts on here."}, {"owner": {"reputation": 88920, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 0, "creation_date": 1519855936, "post_id": 49038397, "comment_id": 85084278, "body": "Read <b><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b>."}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519923337, "post_id": 49038397, "comment_id": 85114236, "body": "I updated with a bit more of the code.  i -think- it&#39;s using XML::LibXML, but it might not be.  The supplied code doesn&#39;t have me using the XML::Simple Mod, but i&#39;m very new to all of this, and maybe using XML::LibXML::Simple is just a different way of calling the deprecated scripts?"}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519923462, "post_id": 49038397, "comment_id": 85114319, "body": "@K.Davis  I did not add the solution.  That is just more of the code showing how i&#39;m calling the mod.  This is from UPS&#39; canned dev scripts, I didn&#39;t write it, so there may be something in the way they wrote it that&#39;s breaking."}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519923539, "post_id": 49038397, "comment_id": 85114358, "body": "May I put the additional script back in so that someone can maybe help me with the problem?"}, {"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1519930345, "post_id": 49038397, "comment_id": 85118023, "body": "This is not a perl problem. You need to examine the error and also probably the content."}, {"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1519930391, "post_id": 49038397, "comment_id": 85118048, "body": "And, as already mentioned, it&#39;s pretty useless to attempt to parse the same content multiple times."}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519933767, "post_id": 49038397, "comment_id": 85119818, "body": "that&#39;s the problem.  there&#39;s nothing wrong with the file. if I run it again, exact same file, it parses with no problems.  The only thing I can think of is that maybe the UPS servers lag a bit at sending the response, so it tries to process the half finished XML, but since it finishes writing the XML file before I pull it, everything looks fine.  I can&#39;t come up with any other reason.  The errors that it&#39;s saying are there, are not there when I pull the file.  All the XML tags are closed and ended correctly."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519933889, "post_id": 49055698, "comment_id": 85119867, "body": "I know what the error is, that&#39;s not the problem.  The problem is that it&#39;s trying to process the incomplete XML file, which is why when I run the same command again everything works fine.  There must be just enough time that it finishes writing to the file.  That&#39;s all I can come up with."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519983125, "post_id": 49055698, "comment_id": 85137558, "body": "Alright, I suspect the lack of error checking on the HTTP request; I have edited my answer above."}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519998493, "post_id": 49055698, "comment_id": 85145951, "body": "ok, so that looks like it will catch the error a little nicer, but will that also take care of the problem of the script trying to read the XML file before it&#39;s finished? If I&#39;m understanding it correctly the check for $resp-&gt;is_success is checking to see if it&#39;s all there, but if it&#39;s not, it fails.  Is there a way to have it check, if it fails, wait and check again, if it fails a second time, then die?  It seems like it&#39;s a matter a few ms that&#39;s causing the problem."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1519999834, "post_id": 49055698, "comment_id": 85146795, "body": "There is no file, it&#39;s an HTTP response. <a href=\"https://metacpan.org/source/OALDERS/HTTP-Message-6.14/lib/HTTP/Status.pm#L109\" rel=\"nofollow noreferrer\"><code>is_success</code> checks the status code only.</a> Did you try the code? If yes, do you still get parsing failures? \u2013\u2013\u2013 What makes you think the response object changes after the <code>request</code> method has finished? Either you&#39;re misinterpreting what you&#39;re seeing or we don&#39;t have the full picture. Please enable us to reproduce the error on our own, the guesswork is tiresome."}, {"owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "edited": false, "score": 0, "creation_date": 1520003260, "post_id": 49055698, "comment_id": 85149098, "body": "completely understandable!  I&#39;ll try your code and see what it does, if it&#39;s still erroring, I will let you know and I&#39;ll see what I can do to get you all the pieces to try to recreate it.  Thank you for the help!!"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1519983057, "last_edit_date": 1519983057, "creation_date": 1519926303, "answer_id": 49055698, "question_id": 49038397, "link": "https://stackoverflow.com/questions/49038397/perl-xmlin-parser-error-premature-end-of-data-problems/49055698#49055698", "title": "Perl XMLIn Parser Error - premature end of data problems", "body": "<p><a href=\"http://p3rl.org/HTTP::Response#$r-%3Econtent\" rel=\"nofollow noreferrer\">$resp->content</a> contains an error message if the request was not successful, which is not valid XML. The program should stop if it's a permanent error, retry if it's a transient error, and only parse the content on success.</p>\n\n<pre><code>use LWP::UserAgent::Determined qw();\nmy $browser = LWP::UserAgent::Determined-&gt;new;\n...\nmy $resp = $browser-&gt;request($req);\nif ($resp-&gt;is_success) {\n    my $parser = ... etc. etc.\n} else {\n    die sprintf \"could not POST to &lt;%s&gt;:\\nStatus %s\\n%s\\n\"\n        $endpointurl, $resp-&gt;status_line, $resp-&gt;content;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6692956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sdPqv.jpg?s=128&g=1", "display_name": "Alith7", "link": "https://stackoverflow.com/users/6692956/alith7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519983057, "creation_date": 1519851372, "last_edit_date": 1519983016, "question_id": 49038397, "link": "https://stackoverflow.com/questions/49038397/perl-xmlin-parser-error-premature-end-of-data-problems", "title": "Perl XMLIn Parser Error - premature end of data problems", "body": "<p>I am very new to Perl and XML, so please be patient with me.</p>\n\n<p>I am having problems with my XMLIn randomly not liking the returned XML file, even though if I open the two different XML return files they are identical.</p>\n\n<p>I came up with this solution:</p>\n\n<pre><code>#Send HTTP Request\nmy $browser = LWP::UserAgent-&gt;new();   \nmy $req = HTTP::Request-&gt;new(POST =&gt; $endpointurl);\n$req-&gt;content(\"@XML\");\n\n#Get HTTP Response Status\nmy $resp = $browser-&gt;request($req);\n\n#Get Response Status\nmy $parser = XML::LibXML::Simple-&gt;new();\nmy $xmlResp = ();\n$xmlResp = eval { $parser-&gt;XMLin($resp-&gt;content()) };\nunless ($xmlResp)\n{\n    $xmlResp = eval { $parser-&gt;XMLin($resp-&gt;content()) };\n}\n</code></pre>\n\n<p>But i'm not sure if that's \"good practice\", or what a better way to have it loop through the return if it fails would be.</p>\n\n<p>This seems to work, but I know that doesn't make it \"right\".</p>\n\n<p>*** This part of the code was supplied from UPS, I didn't write it, and I don't 100% understand it.</p>\n"}, {"tags": ["perl", "twitter", "twitter-oauth"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519856293, "post_id": 49038387, "comment_id": 85084426, "body": "That doesn&#39;t make any sense. Only authenticated users can post tweets."}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519856603, "post_id": 49038387, "comment_id": 85084546, "body": "@MattJacob But how do I make a post on behalf of my application?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1519856666, "post_id": 49038387, "comment_id": 85084561, "body": "Do you have a separate Twitter account for your application?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1519905511, "creation_date": 1519905511, "answer_id": 49049281, "question_id": 49038387, "link": "https://stackoverflow.com/questions/49038387/modify-tweet-call-for-origin-being-the-application/49049281#49049281", "title": "modify tweet call for origin being the application", "body": "<p>You need to regenerate the authorisation tokens while you're logged into Twitter as the account that you want to tweet from.</p>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 49049281, "answer_count": 1, "score": 0, "last_activity_date": 1519905511, "creation_date": 1519851343, "question_id": 49038387, "link": "https://stackoverflow.com/questions/49038387/modify-tweet-call-for-origin-being-the-application", "title": "modify tweet call for origin being the application", "body": "<p>I've currently built the twitter handling for posting a tweet. Unknowingly, i built for the tweet to come from the authroized user, and we actually want to tweet from our app itself. How do I tweak this code to post <code>on behalf of the application itself</code>.</p>\n\n<pre><code>use Net::Twitter;\nmy $nt = Net::Twitter-&gt;new(\n    traits   =&gt; [qw/OAuth API::RESTv1_1/],\n    consumer_key =&gt; '',\n    consumer_secret =&gt; '',\n    access_token =&gt; '',\n    access_token_secret =&gt; '',\n);\nmy $result = $nt-&gt;update('Hello, world!');\n</code></pre>\n"}, {"tags": ["perl", "cgi", "cpan"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1519851036, "post_id": 49037950, "comment_id": 85081788, "body": "Please provide the exact <code>use</code> statement and the exact error message. (Feel free to to replace private words in the paths with alternate words on a one-to-one basis.)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7507136, "user_type": "registered", "profile_image": "https://graph.facebook.com/829285557177917/picture?type=large", "display_name": "asdjf", "link": "https://stackoverflow.com/users/7507136/asdjf"}, "edited": false, "score": 0, "creation_date": 1520057616, "post_id": 49049255, "comment_id": 85168048, "body": "Downloaded the session module from the link you provided and pasted session folder contents to CGI folder. its working"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 7507136, "user_type": "registered", "profile_image": "https://graph.facebook.com/829285557177917/picture?type=large", "display_name": "asdjf", "link": "https://stackoverflow.com/users/7507136/asdjf"}, "edited": false, "score": 0, "creation_date": 1520058683, "post_id": 49049255, "comment_id": 85168210, "body": "@NirmalPraveen: That&#39;s a terrible approach. Please install CPAN modules using the standard methods."}, {"owner": {"reputation": 23, "user_id": 7507136, "user_type": "registered", "profile_image": "https://graph.facebook.com/829285557177917/picture?type=large", "display_name": "asdjf", "link": "https://stackoverflow.com/users/7507136/asdjf"}, "edited": false, "score": 0, "creation_date": 1520058792, "post_id": 49049255, "comment_id": 85168221, "body": "in Perl package manager, I&#39;m unable find session module. Is there any alternative way to do it."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 7507136, "user_type": "registered", "profile_image": "https://graph.facebook.com/829285557177917/picture?type=large", "display_name": "asdjf", "link": "https://stackoverflow.com/users/7507136/asdjf"}, "edited": false, "score": 1, "creation_date": 1520060660, "post_id": 49049255, "comment_id": 85168635, "body": "I&#39;ve no idea what a &quot;Perl package manager&quot; is. You should install CPAN modules using <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1519905436, "creation_date": 1519905436, "answer_id": 49049255, "question_id": 49037950, "link": "https://stackoverflow.com/questions/49037950/cgisession-pm-file-not-present/49049255#49049255", "title": "CGI::Session.pm file not present", "body": "<p>Looks like <a href=\"https://metacpan.org/pod/CGI::Session\" rel=\"nofollow noreferrer\">CGI::Session</a> isn't installed on your system. It's a separate distribution to <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">CGI</a>, so it needs to be installed separately.</p>\n"}], "owner": {"reputation": 23, "user_id": 7507136, "user_type": "registered", "profile_image": "https://graph.facebook.com/829285557177917/picture?type=large", "display_name": "asdjf", "link": "https://stackoverflow.com/users/7507136/asdjf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 49049255, "answer_count": 1, "score": -1, "last_activity_date": 1520067742, "creation_date": 1519849511, "last_edit_date": 1520067742, "question_id": 49037950, "link": "https://stackoverflow.com/questions/49037950/cgisession-pm-file-not-present", "title": "CGI::Session.pm file not present", "body": "<p>I'm working latest CGI module (version 4.3+) and when I try to create CGI:: Session objects in a pl file, it's throwing error saying Session.pm file not present. As it said Session.pm file is not existing in @INC. How come file missed and is there any fix for this. </p>\n"}, {"tags": ["html", "regex", "bash", "perl", "pcre"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1519846837, "post_id": 49037283, "comment_id": 85079650, "body": "By default the perl command line read a file line by line, if you want to change this behaviour, you have to switch the slurp mode on. However I suggest to find an other way to parse your html."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1519846898, "post_id": 49037283, "comment_id": 85079685, "body": "Btw, what&#39;s wrong with simple <code>&#47;&lt;script.*?script\\s*&gt;&#47;&#47;</code> ?"}, {"owner": {"reputation": 445, "user_id": 5054192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4664f4d8c2843c163153e15c195c12cc?s=128&d=identicon&r=PG&f=1", "display_name": "nulldev", "link": "https://stackoverflow.com/users/5054192/nulldev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519847165, "post_id": 49037283, "comment_id": 85079790, "body": "@zdim It would probably work fine, I just don&#39;t have much experience with regex and didn&#39;t consider that. Thanks!"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1519849706, "post_id": 49037283, "comment_id": 85081124, "body": "<code>[\\s\\S]</code> can be written as <code>.</code> -- <code>[\\s\\S]</code> is the set of all space and non-space characters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519851113, "post_id": 49037283, "comment_id": 85081830, "body": "<code>[\\s\\S]</code> can be written as <code>.</code> if and only if <code>&#47;s</code> or equivalent is used."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519851374, "post_id": 49037283, "comment_id": 85081973, "body": "The repeated uses of <code>.*?</code> can cause major problems. You want <code>perl -0777pe&#39;s{&lt;script[^&gt;]*&gt;(?:(?!&lt;&#47;script[^&gt;]*&gt;).))*&lt;&#47;script[^&gt;]&zwnj;&#8203;*&gt;}{}sg&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519851392, "post_id": 49037283, "comment_id": 85081985, "body": "Note that it&#39;s very easy to circumvent your &quot;protections&quot; (even with my change)."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1519855864, "post_id": 49037283, "comment_id": 85084243, "body": "@nulldev - out of curiousity, how are you planning to &quot;reconstitute&quot; the file once you&#39;ve run your parser on the actual html?  Or is the html parsing read-only?"}, {"owner": {"reputation": 445, "user_id": 5054192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4664f4d8c2843c163153e15c195c12cc?s=128&d=identicon&r=PG&f=1", "display_name": "nulldev", "link": "https://stackoverflow.com/users/5054192/nulldev"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1519857575, "post_id": 49037283, "comment_id": 85084945, "body": "@zzxyz I don&#39;t have to reconstitute the file, I&#39;m parsing it as read-only."}, {"owner": {"reputation": 445, "user_id": 5054192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4664f4d8c2843c163153e15c195c12cc?s=128&d=identicon&r=PG&f=1", "display_name": "nulldev", "link": "https://stackoverflow.com/users/5054192/nulldev"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519857742, "post_id": 49037283, "comment_id": 85085035, "body": "@ikegami Thanks for the help. Also, I&#39;m not actually using this as protection, I&#39;m just using this to avoid crashing the parser. The script I&#39;m running this in is only invoked explicitly under a watchful human eye. It&#39;s never run automatically and the output is never &quot;evaled&quot; or anything similar."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1519846970, "post_id": 49037352, "comment_id": 85079711, "body": "You mean not to break the file into separate records (lines) ?"}, {"owner": {"reputation": 445, "user_id": 5054192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4664f4d8c2843c163153e15c195c12cc?s=128&d=identicon&r=PG&f=1", "display_name": "nulldev", "link": "https://stackoverflow.com/users/5054192/nulldev"}, "edited": false, "score": 1, "creation_date": 1519847009, "post_id": 49037352, "comment_id": 85079724, "body": "That was fast, I was total unaware that perl processed files line-by-line. I&#39;ll accept this answer in a couple minutes, thanks!"}], "tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": true, "score": 10, "last_activity_date": 1539799391, "last_edit_date": 1539799391, "creation_date": 1519846880, "answer_id": 49037352, "question_id": 49037283, "link": "https://stackoverflow.com/questions/49037283/perl-regex-working-in-online-pcre-tester-but-not-in-perl-command/49037352#49037352", "title": "Perl regex working in online PCRE tester but not in perl command", "body": "<p>You need to tell perl not to break up each line of the file into its own separate record with <code>-0</code>.</p>\n\n<pre><code> perl -0 -pe 's/&lt;script.*?&gt;[\\s\\S]*?&lt; *?\\/ *?script *?&gt;//g' tmp.html\n</code></pre>\n\n<p>This actually tells perl to break up records on <code>'\\0'</code>.  <code>perl -0777</code> will very explicitly slurp the whole file.</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1519862851, "post_id": 49040447, "comment_id": 85086701, "body": "@EdwardKirton It will"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 1, "creation_date": 1519863215, "post_id": 49040447, "comment_id": 85086779, "body": "(because <code>..</code> keeps state)"}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1519886605, "post_id": 49040447, "comment_id": 85092789, "body": "Thanks for the added explanation, zzxyz.  Very nice."}], "tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 3, "last_activity_date": 1519864251, "last_edit_date": 1519864251, "creation_date": 1519861244, "answer_id": 49040447, "question_id": 49037283, "link": "https://stackoverflow.com/questions/49037283/perl-regex-working-in-online-pcre-tester-but-not-in-perl-command/49040447#49040447", "title": "Perl regex working in online PCRE tester but not in perl command", "body": "<p>By the way, because I find slurping whole files distasteful, and because I don't care what html has to say about line breaks...a quicker, cleaner, more correct way to do this <strong>IF</strong> you can guarantee there is no important content on <code>&lt;script&gt;</code> tag lines is:</p>\n\n<pre><code>perl -ne 'print if !(/&lt;script&gt;/../&lt;\\/script&gt;/)' tmp.html\n</code></pre>\n\n<p>(modifying the two regexes to your fancy, of course)\n<code>..</code> is a stateful operator that is flipped on by the expression before it being true and off by the one after being true.  </p>\n\n<pre><code>~/test\u00a3 cat example.html\n&lt;important1/&gt;\n&lt;edgecase1/&gt;&lt;script&gt;&lt;/script&gt;&lt;edgecase2/&gt;\n&lt;important2/&gt;\n&lt;script&gt;&lt;/script&gt;\n&lt;important3/&gt;\n&lt;script&gt;\n&lt;notimportant/&gt;\n&lt;/script&gt;\n\n~/test\u00a3 perl -ne 'print if !(/&lt;script&gt;/../&lt;\\/script&gt;/)' example.html\n&lt;important1/&gt;\n&lt;important2/&gt;\n&lt;important3/&gt;\n</code></pre>\n\n<p>And to (mostly) address content on script tag lines but outside tags:</p>\n\n<pre><code>~/test\u00a3 perl -ne 'print if !(/&lt;script&gt;/../&lt;\\/script&gt;/);print \"$1\\n\" if /(.+)&lt;script&gt;/;print \"$1\\n\" if /&lt;\\/script&gt;(.+)/;' example.html\n&lt;important1/&gt;\n&lt;edgecase1/&gt;\n&lt;edgecase2/&gt;\n&lt;important2/&gt;\n&lt;important3/&gt;\n</code></pre>\n"}], "owner": {"reputation": 445, "user_id": 5054192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4664f4d8c2843c163153e15c195c12cc?s=128&d=identicon&r=PG&f=1", "display_name": "nulldev", "link": "https://stackoverflow.com/users/5054192/nulldev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 49037352, "answer_count": 2, "score": 4, "last_activity_date": 1539799391, "creation_date": 1519846537, "question_id": 49037283, "link": "https://stackoverflow.com/questions/49037283/perl-regex-working-in-online-pcre-tester-but-not-in-perl-command", "title": "Perl regex working in online PCRE tester but not in perl command", "body": "<p>I've written the following PCRE regex to strip scripts from HTML pages: <code>&lt;script.*?&gt;[\\s\\S]*?&lt; *?\\/ *?script *?&gt;</code></p>\n\n<p>It works on many online PCRE regex testers:</p>\n\n<p><a href=\"https://regex101.com/r/lsxyI6/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/lsxyI6/1</a></p>\n\n<p><a href=\"https://www.regextester.com/?fam=102647\" rel=\"nofollow noreferrer\">https://www.regextester.com/?fam=102647</a></p>\n\n<p>It does <strong>NOT</strong> work when I run the following perl substitution command in a bash terminal: <code>cat tmp.html | perl -pe 's/&lt;script.*?&gt;[\\s\\S]*?&lt; *?\\/ *?script *?&gt;//g'</code></p>\n\n<p>I am using the following test data:</p>\n\n<pre><code>&lt;script&gt;\n                       $(document).ready(function() {\n                           var url = window.location.href;\n                           var element = $('ul.nav a').filter(function() {\n                               if (url.charAt(url.length - 1) == '/') {\n                                   url = url.substring(0, url.length - 1);\n                               }\n\n                               return this.href == url;\n                           }).parent();\n\n                           if (element.is('li')) {\n                               element.addClass('active');\n                           }\n                       });\n                   &lt;/script&gt;\n</code></pre>\n\n<p><strong>P.S.</strong> I am using regex to parse HTML because the HTML parser I am forced to use (xmlpath) breaks when there are complex scripts on the page. I am using this regex to remove scripts from the page before passing it to the parser.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1519844137, "post_id": 49036631, "comment_id": 85078184, "body": "YELLING in the title isn&#39;t helping. Could you try and make that more descriptive and a better summary of the actual problem?"}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519845106, "post_id": 49036631, "comment_id": 85078714, "body": "I did not mean &#39;YELLING&#39;, but emphasize the main point of the question! I could do it in more words, but it makes harder to read the header to realize the question itself!  Is there a way to highlight the words without a capitals in the title?  Let me know, and i will be glad to make it &#39;quietly&#39;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1519845569, "post_id": 49036631, "comment_id": 85078988, "body": "That&#39;s what language is for; you shouldn&#39;t need visual emphasis.  Also, you may expect readers to also understand what they are reading.  It is enough to state that the calling script should set variables for the caller."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519845778, "post_id": 49036631, "comment_id": 85079102, "body": "There, I gave it a shot with the title -- by all means &quot;roll back&quot; if you don&#39;t like it (go to &quot;edit&quot; and under a previous revision there is &quot;roll back&quot;)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519845897, "post_id": 49036631, "comment_id": 85079175, "body": "With all stated conditions you likely have to use <code>do</code> and be careful with declarations."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519846402, "post_id": 49036631, "comment_id": 85079435, "body": "You&#39;re being extremely fussy with your requirements. You&#39;ve pretty much discounted every way of doing what you ask for, so you need to explain each restriction in some detail."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519846631, "post_id": 49036631, "comment_id": 85079545, "body": "<i>&quot;I did try to use the <code>eval &quot;do script2.pl&quot;</code>&quot;</i> You don&#39;t need <code>eval</code> there, but <b>mob&#39;s</b> answer below does work, so you have done something wrong."}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519846891, "post_id": 49036631, "comment_id": 85079679, "body": "&#39;zdim&#39; - What do you mean &#39;be careful with declaration&#39;? I do not see your point  Regarding &#39;That&#39;s what language is for; ... you may expect readers to also understand what they are reading&#39;:    - You are big optimist, expecting people reading carefully everything printed!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519847840, "post_id": 49036631, "comment_id": 85080134, "body": "(1) Need to declare things with <code>our</code> (so global), which you normally don&#39;t do. See mob&#39;s answer  2) Visual emphasis substitutes for a suitable use of the language. The text can end up looking like a Christmas tree with all those. It&#39;s better to restrain from that and express the emphasis using language facilities (I&#39;m at fault of using visuals too much here!).  Does your title now need very close reading?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519847939, "post_id": 49036631, "comment_id": 85080188, "body": "It would probably help to describe what you&#39;d like to accomplish and not what you&#39;re trying to do. There&#39;s almost certainly a shortcoming in your design that would be better solved a different way."}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519849674, "post_id": 49036631, "comment_id": 85081108, "body": "&#39;Matt&#39;, &#39;Borodin&#39;  --  I have added additional description!"}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519849802, "post_id": 49036631, "comment_id": 85081179, "body": "&#39;zdim&#39; - In my example I reasonably use the &#39;our&#39; specifier  -  so, I still do not see a reason of your point.   And the &#39;mod&#39;s answer do not accomplish what I need to do: it executed BEFORE first script starts and DO NOT set the parameters, that I in my example set by &#39;local ..&#39; specifiers!   That is important part of my task:  the second script arguments defined during processing the first script!   Thus, despite of your expectation, even you do not understanding the question! (now ... I did not clear in my question,, right?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519846216, "post_id": 49037100, "comment_id": 85079325, "body": "Thanks, &#39;mob&#39; for answer, but it is not resolving the issue! I need it be executed in place, where I have realized (and set) some values, not on starting (compiling) the first script, as it will be in your example!"}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519846588, "post_id": 49037100, "comment_id": 85079530, "body": "(5 min for editting make reply brocken on two...) ...  Also, it is no reason, as I understand, in first declaration of the <code>our @set_var</code>, as by having it in the second script with <code>our ..</code> specifier.  Good point about the <code>exit()</code>: I will do it conditionally. Thanks"}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519847982, "post_id": 49037100, "comment_id": 85080207, "body": "Is it complicated for &#39;intermediate perl&#39; questions?!    I see people do not understand the issues!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1519846531, "last_edit_date": 1592644375, "creation_date": 1519845874, "answer_id": 49037100, "question_id": 49036631, "link": "https://stackoverflow.com/questions/49036631/how-to-execute-a-script-from-another-so-that-it-also-sets-variables-for-the-call/49037100#49037100", "title": "How to execute a script from another so that it also sets variables for the caller script", "body": "<p>This works just fine:</p>\n<h3>script2.pl</h3>\n<pre><code>use strict;\nour @set_var = (&quot;foo&quot;,&quot;bar&quot;);\n</code></pre>\n<h3>script1.pl</h3>\n<pre><code>use strict;\nour @set_var;\ndo './script2.pl';\nprint &quot;@set_var\\n&quot;;\n</code></pre>\n\n<pre><code>$ perl script1.pl\nfoo bar\n</code></pre>\n<p>But it does not if you use:</p>\n<h3>script2.pl</h3>\n<pre><code>use strict;\nour @set_var = (&quot;foo&quot;,&quot;bar&quot;);\nexit 0;\n</code></pre>\n<p>There is only a single perl process in this example, so calling <code>exit</code>, even from the second script, exits your program.</p>\n<hr>\n<p>If you don't want to remove the <code>exit</code> call in the second script, we can work around that with some <code>CORE::GLOBAL</code> namespace hacking. The gist is to redirect the <code>exit</code> function to your own custom function that you can manipulate when the second script runs.</p>\n<h3>script1.pl</h3>\n<pre><code>BEGIN { *CORE::GLOBAL::exit = *my_exit };\nuse strict;\nsub my_exit { goto &amp;CORE::exit }\nour @set_var;\n{\n    local *my_exit = sub { warn &quot;Not exiting&quot; };\n    do './script2.pl';\n}\nprint &quot;@set_var\\n&quot;;\n</code></pre>\n<h3>script2.pl</h3>\n<pre><code>use strict;\nour @set_var = (&quot;foo&quot;,&quot;bar&quot;);\nexit 0;\n\n$ perl script1.pl\nNot exiting at script1.pl line 7.\nfoo bar\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519847239, "post_id": 49037276, "comment_id": 85079835, "body": "Thanks, &#39;Thanos&#39; for response, but, not, it  not helps! I need the value of @ARGV be set before calling the second script (and that could be done by your using the &#39;system()&#39;, but IMPORTANT is, that I need some variables be set in the script two and, not just be printed, but be used in the script one!  That is not possible by using the &#39;system()&#39; (as I understand)."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519849756, "post_id": 49037276, "comment_id": 85081155, "body": "Hello again @alex5161, see new update solution. I think this is what you are looking for?"}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519893991, "post_id": 49037276, "comment_id": 85096036, "body": "Again, down vote for the answer. Is there any logic? What the update answer doesn&#39;t do what the op asked?"}, {"owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "edited": false, "score": 0, "creation_date": 1519931600, "post_id": 49037276, "comment_id": 85118684, "body": "&#39;Thanos&#39;, thanks for another try.   The &#39;Storable&#39; is new for me and, at least, this new experience is apreciated already.  But, it is cheating!  :)  The storable saving result in a file, --  I try to have everything be done in the same process space!  ...  It is simple to save result in file and read it from place of calling!!!!     .... It is not a solution.   I agree, using that Storable much simplify that approach - through a file  -  but still out of running process......  Anyway, thanks for familiarizing me with Storable!"}], "tags": [], "owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "is_accepted": false, "score": -1, "last_activity_date": 1519849691, "last_edit_date": 1592644375, "creation_date": 1519846505, "answer_id": 49037276, "question_id": 49036631, "link": "https://stackoverflow.com/questions/49036631/how-to-execute-a-script-from-another-so-that-it-also-sets-variables-for-the-call/49037276#49037276", "title": "How to execute a script from another so that it also sets variables for the caller script", "body": "<p>I am not really sure what you are trying to do exactly, but along these lines it should be very close.</p>\n<h3>test.pl</h3>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse IPC::System::Simple qw(system);\n\nsay $0;\nsystem($^X, &quot;sample.pl&quot;, @ARGV);\n</code></pre>\n\n<pre><code>$ perl test.pl first-arg second-arg\ntest.pl\nsample.pl\n$VAR1 = [\n          'first-arg',\n          'second-arg'\n        ];\n</code></pre>\n<h3>sample.pl</h3>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nuse feature 'say';\n\nsay $0;\nprint Dumper \\@ARGV;\n</code></pre>\n<p>I used the module <a href=\"http://search.cpan.org/%7Epjf/IPC-System-Simple-1.25/lib/IPC/System/Simple.pm\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a>. You can also capture the output of the script (<code>sample.pl</code>) through <a href=\"http://search.cpan.org/%7Epjf/IPC-System-Simple-1.25/lib/IPC/System/Simple.pm#capture()\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple::capture</code></a>.</p>\n<p><strong>Update:</strong> Maybe you can use <a href=\"https://perldoc.perl.org/Storable.html\" rel=\"nofollow noreferrer\">Storable</a>. This way you can pass new parameters that you can use from script 2 (sample.pl) to script 1 (test.pl).</p>\n<p><strong>test.pl</strong></p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Storable;\nuse Data::Dumper;\nuse feature 'say';\nuse IPC::System::Simple qw(system);\n\nsay $0;\nsystem($^X, &quot;sample.pl&quot;, @ARGV);\n\nmy $hashref = retrieve('sample');\nprint Dumper $hashref;\n\n__END__\n\n$ perl test.pl first-arg second-arg\ntest.pl\nsample.pl\n$VAR1 = [\n          'first-arg',\n          'second-arg'\n        ];\n$VAR1 = {\n          'arg1' =&gt; 'test1',\n          'arg2' =&gt; 'test2'\n        };\n</code></pre>\n<p><strong>sample.pl</strong></p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Storable;\nuse Data::Dumper;\nuse feature 'say';\n\nsay $0;\nprint Dumper \\@ARGV;\n\nmy %hashArgs = ( arg1 =&gt; 'test1',\n         arg2 =&gt; 'test2', );\n\nstore \\%hashArgs, 'sample';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "is_accepted": false, "score": 0, "last_activity_date": 1520119528, "last_edit_date": 1520119528, "creation_date": 1520119003, "answer_id": 49090255, "question_id": 49036631, "link": "https://stackoverflow.com/questions/49036631/how-to-execute-a-script-from-another-so-that-it-also-sets-variables-for-the-call/49090255#49090255", "title": "How to execute a script from another so that it also sets variables for the caller script", "body": "<p>(Ok, finally, asked by myself and ansvering by myself, too!)<br>\n ( After additional reviewing, I am realized, that <strong>'mod'</strong> solution does use it, but I did not understand advice!<br>\n  I am sorry: my false to step over the real solution!<br>\n)  </p>\n\n<p>Solution to my question is simple! It is the:</p>\n\n<blockquote>\n  <p>do EXPR;</p>\n</blockquote>\n\n<p>That way<br>\n - the second script executed in place where it placed; so, anything defined and set in the first one usefull in the second one;<br>\n - It is printing to STDOUT everything what it should print (the second script;)<br>\n - any variables or objects that are defined in the second script process, are accessible in the first one after coming back; and<br>\n - control is returned to position immediately after the second-script execution with continuation to process the first script commands!  </p>\n\n<p>Simple! I am just amazed, why I forget about that 'do...' command. I have used it already not once!  </p>\n\n<p>And I am disappointed by that forum much!<br>\n While it is badly designed to display communication, participants, instead of perl-issue reviewing, much concerned on moderating others, teaching them how to leave in such nice forum!  </p>\n"}], "owner": {"reputation": 19, "user_id": 4046496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea794e3ef368d7438806fe1f0aa8e57?s=128&d=identicon&r=PG&f=1", "display_name": "alex5161", "link": "https://stackoverflow.com/users/4046496/alex5161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49037100, "answer_count": 3, "score": -2, "last_activity_date": 1543487464, "creation_date": 1519844082, "last_edit_date": 1543487464, "question_id": 49036631, "link": "https://stackoverflow.com/questions/49036631/how-to-execute-a-script-from-another-so-that-it-also-sets-variables-for-the-call", "title": "How to execute a script from another so that it also sets variables for the caller script", "body": "<p>I reviewed many examples on-line about running another process (either PERL or shell command or a program), but do not find any useful for my needs way.  </p>\n\n<p>(As by already received answers I see that my 'request' is not understood, I will try to say it in short, leaving all earlier printed as an example of what I already tried...)  </p>\n\n<p>I need:<br>\n - In a caller script set parameters for the second script before call the second script (thus, I could not use the <code>do script2.pl</code> s it executed before startin to run the first script)<br>\n - In the second script I need to set some variables that will be used in the caller script (therefore it is not useful to process the second script by <code>system()</code> or by <code>back ticks</code>);<br>\n - and, as I need to use those variables in the first script, I need come back to the first script after completting the second one<br>\n(I hope now it is more clear what I need...)  </p>\n\n<p>(Reviewed and not useful the <code>system()</code>, <code>'back ticks'</code>, <code>exec()</code> and <code>open()</code>)  </p>\n\n<p>I would like to run another PERL-script from a first one, not exiting (as by <code>exec()</code>), not catching the <code>STDOUT</code> of the called script (as in the <code>back tick</code> processing,) but having it printed out, as in initial script (as it is by <code>system()</code>) while I do not need the return status (as by <code>system()</code>); </p>\n\n<ul>\n<li><strong>but, I would like to have the called script to set some variables</strong>, that will be accessible in the calling s  cript (sure, set by the <code>our @set_var</code>;)</li>\n</ul>\n\n<p>My attempt (that I am not able to make do what I need) is: </p>\n\n<p>Script1 is something, like:</p>\n\n<pre><code>...\n if($condition) \n{  local $0 = 'script2.pl';\n    local @ARGV = ('first-arg', 'second_arg');\n    do script2.pl;\n}\nprint \"set array is: '@set_var'\\n\";\n...\n</code></pre>\n\n<p>The 'script2' would have something like: </p>\n\n<pre><code>#!/usr/bin/perl\n...\n  print \"having input parameters: '@ARGV'\\n\";\n  ... # all script activities\n  our @set_var = ($val1, $val2, $val3);\n  exit 0;\n</code></pre>\n\n<p>The problem in my code is that the <code>do ...</code> command is executed on beginning of the first script run and is not in the place, where it is prepared for it (by setting some <code>local ..</code> vars!)</p>\n\n<p>I did try to use the <code>eval \"do script2.pl\"</code>  :\n- now it is executed in the proper place, but it is not setting the @set_var into the first script process!</p>\n\n<p>Is there any idea to do it as I would like to have it?<br>\n(I understand, that I can rewrite the script2.pl, including whole processing in some function (say, <code>main()</code>) and load it by <code>require()</code> and execute the function <code>main()</code>: that will do everything as I prefer it; but I would like to leave the second script as-is to be executable from shell by itself, as it is now.<br>\n ... and I do not like the way to pass values by a flat file...)</p>\n\n<p>Does anybody have an idea how to do my whim?</p>\n"}, {"tags": ["perl", "csv", "aggregate"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1519833814, "post_id": 49033630, "comment_id": 85072211, "body": "Sample data would help for constructing a solution."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519833830, "post_id": 49033630, "comment_id": 85072227, "body": "Place the records in a hash keyed by the value of the key field"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519833847, "post_id": 49033630, "comment_id": 85072244, "body": "You should also be using Text::CSV_XS or similar."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "edited": false, "score": 0, "creation_date": 1519835258, "post_id": 49033799, "comment_id": 85073120, "body": "Hey Sobrique,  What about if I had to compare 2 columns?    my @columns = split /,/, $line;     $Address= $columns[1];     $State = $columns[2];*********     $forSale= $columns[3];  What if I needed to compare $Address and $State and when there are duplicates, like... OHIO 474 Creekside St (3 duplicates) and I need to add up all of their $forSale?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "edited": false, "score": 2, "creation_date": 1519839938, "post_id": 49033799, "comment_id": 85076105, "body": "Key your array by both. <code>$sum_of{$address}{$state} += $forSale;</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1519833920, "creation_date": 1519833920, "answer_id": 49033799, "question_id": 49033630, "link": "https://stackoverflow.com/questions/49033630/add-multiple-values-together-when-a-condition-is-met/49033799#49033799", "title": "Add Multiple values together when a condition is met?", "body": "<p>The tool you need for this job is a <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">hash</a>. </p>\n\n<p>This will allow you to 'key' things by Address:</p>\n\n<pre><code>my %sum_of;\n\nwhile(my $line = &lt;$feed&gt;) {\n    chomp $line;\n\n    my @columns = split /,/, $line;\n    $Address= $columns[1];\n    $forSale= $columns[3];\n\n    $sum_of{$Address} += $forSale; \n\n}\n\nforeach my $address ( sort keys %sum_of ) {\n    print \"$address =&gt; $sum_of{$address}\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "is_accepted": false, "score": 1, "last_activity_date": 1519842088, "creation_date": 1519842088, "answer_id": 49036137, "question_id": 49033630, "link": "https://stackoverflow.com/questions/49033630/add-multiple-values-together-when-a-condition-is-met/49036137#49036137", "title": "Add Multiple values together when a condition is met?", "body": "<p>Hello <a href=\"https://stackoverflow.com/users/8786131/chris-simmons\">Chris Simmons</a>,</p>\n\n<p>I would like to add a few minor modification(s) on the perfect answer that <a href=\"https://stackoverflow.com/users/2566198/sobrique\">Sobrique</a> provided you.</p>\n\n<p>You can open a file on the way you did but also you can open multiple files on the command line e.g. <code>test.pl sample1.csv sample2.csv</code>, you can read about it here <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\">eof</a>.</p>\n\n<p>I would also choose to check the file if it contains comma character (,) else print on terminal that this line can not be parsed.</p>\n\n<p>Next step after splitting all values in the array I would trim the string(s) for white space leading and trailing.</p>\n\n<p>Having said all that see solution bellow:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %hash;\nwhile (&lt;&gt;) {\n    chomp;\n    if (index($_, ',') != -1) {\n    my @fields = split(/,/);\n    # remove leading and trailing white space\n    s{^\\s+|\\s+$}{}g foreach @fields;\n    $hash{$fields[0]} += $fields[3];\n    }\n    else {\n    warn \"Line could not be parsed: $_\\n\";\n    }\n} continue {\n    close ARGV if eof;\n}\nprint Dumper \\%hash;\n\n__END__\n\n$ perl test.pl sample.csv\n$VAR1 = {\n          '123 6th St.' =&gt; 3,\n          '71 Pilgrim Avenue' =&gt; 5\n        };\n\n__DATA__\n\n123 6th St., Melbourne, FL 32904, 2\n71 Pilgrim Avenue, Chevy Chase, MD 20815, 5\n123 6th St., Melbourne, CT 06074, 1\n</code></pre>\n\n<p>Since you did not provide us sample of input data I created my own.</p>\n\n<p>Another possible way is to use the module <a href=\"http://search.cpan.org/~ishigaki/Text-CSV-1.95/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">Text::CSV</a> as <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> proposed. Sample of code with the same checks that I mentioned earlier, see bellow:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Text::CSV;\nuse Data::Dumper;\n\nmy $csv = Text::CSV-&gt;new({ sep_char =&gt; ',' });\n\nmy %hash;\nwhile (&lt;&gt;) {\n    chomp;\n    if ($csv-&gt;parse($_)) {\n    my @fields = $csv-&gt;fields();\n    # remove leading and trailing white space\n    s{^\\s+|\\s+$}{}g foreach @fields;\n    $hash{$fields[0]} += $fields[3];\n    } else {\n    warn \"Line could not be parsed: $_\\n\";\n    }\n} continue {\n    close ARGV if eof;\n}\nprint Dumper \\%hash;\n\n__END__\n\n$ perl test.pl sample.csv\n$VAR1 = {\n          '123 6th St.' =&gt; 3,\n          '71 Pilgrim Avenue' =&gt; 5\n        };\n\n__DATA__\n\n123 6th St., Melbourne, FL 32904, 2\n71 Pilgrim Avenue, Chevy Chase, MD 20815, 5\n123 6th St., Melbourne, CT 06074, 1\n</code></pre>\n\n<p>Hope this helps.</p>\n\n<p>BR / Thanos</p>\n"}], "owner": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519842088, "creation_date": 1519833391, "last_edit_date": 1519833750, "question_id": 49033630, "link": "https://stackoverflow.com/questions/49033630/add-multiple-values-together-when-a-condition-is-met", "title": "Add Multiple values together when a condition is met?", "body": "<p>My mind seems to be missing a few screws today. I have an issue that I'm baffled by, but to be fair, I'm new to Perl scripting. </p>\n\n<p>I am opening a csv file and need to look for duplicate values in one column, and where there are duplicates in this column, I need to add all values from another column for each duplicate together and print it on a new line in a new file. </p>\n\n<pre><code>open(my $feed, '&lt;', $rawFile) or die \"Could not locate '$rawFile'\\n\";\nopen(OUTPUT, '&gt;', $newFile) or die \"Could not locate '$newFile'\\n\";\nwhile(my $line = &lt;$feed&gt;) {\n    chomp $line;\n\n    my @columns = split /,/, $line;\n    $Address= $columns[1];\n    $forSale= $columns[3];\n\n}\n</code></pre>\n\n<p>I understand how to open the file and read it line by line. I know how to print results to new file. What I'm having trouble with is building logic to say, \"For each Address in this extract that're duplicates, add all of their forSale's up and print the Address in new file with the added forSale's values. I hope this makes sense. Any assistance at all is encouraged. </p>\n"}, {"tags": ["perl", "sed", "tcl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1519818746, "post_id": 49027398, "comment_id": 85062031, "body": "I think we need some desired output. I also think that <code>regex</code> might not be the tool for the job, because this looks like a contextual search."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1519856452, "post_id": 49027398, "comment_id": 85084485, "body": "Please explain the criteria for keeping the &quot;o_[9]&quot; block but discarding the &quot;m_*_clk&quot; blocks."}, {"owner": {"reputation": 21, "user_id": 8608690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xazp6e5qEig/AAAAAAAAAAI/AAAAAAAAGOk/wgFkD66hqvM/photo.jpg?sz=128", "display_name": "Bhargavi Bk", "link": "https://stackoverflow.com/users/8608690/bhargavi-bk"}, "edited": false, "score": 0, "creation_date": 1519900399, "post_id": 49027398, "comment_id": 85099706, "body": "added some logic and created some ports in the design to do some modification but end of the design I am trying to remove the ports which I have created in the design. So only &quot;m_*_clk&quot; blocks are not needed"}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1519820834, "post_id": 49029185, "comment_id": 85063319, "body": "You forgot the last <code>}</code> from the <code>signal</code> block."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1519821175, "post_id": 49029185, "comment_id": 85063537, "body": "@daxim, thanks a TON sir, I edited my one liner now, will edit explanation part too shortly."}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1519821151, "last_edit_date": 1519821151, "creation_date": 1519819516, "answer_id": 49029185, "question_id": 49027398, "link": "https://stackoverflow.com/questions/49027398/how-to-delete-pattern-which-matches-with-the-next-new-pattern-which-is-calling-i/49029185#49029185", "title": "How to delete pattern which matches with the next new pattern which is calling in the next line by using /bin/sed command in dc_shell", "body": "<p>Could you please try following and let me know if this helps you.(Considering that your actual Input_file is same as shown sample file)</p>\n\n<pre><code>awk -v line_number=$(cat Input_file | wc -l) '/signal {/ || /\"o_\\[9\\]\" {/ || FNR==line_number{flag=1}; /^$/{flag=\"\"} flag'    Input_file\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Adding explanation for code too now as follows:</p>\n\n<pre><code>awk -v line_number=$(cat Input_file | wc -l) '   ##Creating variable named line_number in awk script whose value is number of lines of Input_file.\n/signal {/ || /\"o_\\[9\\]\" {/ || FNR==line_number{ ##checking condition here if a line contains strings either signal {  OR \"o_\\[9\\]\" { then do following:\n  flag=1}                                        ##Setting variable named flag here and setting its value to 1 here.\n/^$/{                                            ##Checking condition here if a line is NULL or BLANK then do following:\n  flag=\"\"}                                       ##Nullifying the variable flag here.\nflag                                             ##awk works on method of condition then actions, so checking if variable flag value is NOT NULL here and not mentioning any action here so by default peint of current line will happen here.\n'   Input_file                                   ##Metioning the Input_file name here.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1519832645, "creation_date": 1519832645, "answer_id": 49033379, "question_id": 49027398, "link": "https://stackoverflow.com/questions/49027398/how-to-delete-pattern-which-matches-with-the-next-new-pattern-which-is-calling-i/49033379#49033379", "title": "How to delete pattern which matches with the next new pattern which is calling in the next line by using /bin/sed command in dc_shell", "body": "<p>Solution with a context-sensitive parser:</p>\n\n<pre><code>use Marpa::R2 qw();\n\nmy $input = &lt;&lt;'INPUT';\n         signal {\n          {\n            ab\n            cd\n          }\n\n        \"m_1_clk\" {\n              P {\n                 '0ns' D;\n                  '25ns' U;\n                  '65ns' D;\n                  }\n             }\n\n            \"m_0_clk\" {\n                        P {\n                          '0ns' D;\n                          '25ns' U;\n                          '65ns' D;\n                          }\n                       }\n\n              \"o_[9]\" {\n                     Data S Mk {\n                     Active Up;\n                            }\n                        }\n\n               \"m_0_clk\" {\n                          Data S Mk {\n                            Active Up;\n                            }\n                        }\n\n             \"m_1_clk\" {\n                          Data S Mk {\n                          Active Up;\n                            }\n                        }\n            }\nINPUT\n\nmy $grammar = Marpa::R2::Scanless::G-&gt;new({\n    bless_package =&gt; 'Foo',\n    source =&gt; \\&lt;&lt;'GRAMMAR',\n        :default ::= action =&gt; [values] bless =&gt; ::lhs\n        lexeme default = action =&gt; [ value ] bless =&gt; ::name latm =&gt; 1\n        :start ::= blocks\n        blocks ::= block+\n        block ::= optionalname [{] contentblocks [}] optionalws\n        optionalname ::= name | epsilon\n        contentblocks ::= contentorblock+\n        contentorblock ::= content | block\n        name ~ [a-zA-Z0-9_\"\\x{5b}\\x{5d} ]+\n        content ~ [a-zA-Z0-9;'\\s]*\n        optionalws ~ [\\s]*\n        epsilon ::=\nGRAMMAR\n});\n\nmy $parser = Marpa::R2::Scanless::R-&gt;new({grammar =&gt; $grammar});\n$parser-&gt;read(\\$input);\nmy $output;\ndeleteblocks($parser-&gt;value-&gt;$*);\nprint $output;\n\nsub deleteblocks {\n    my ($v) = @_;\n    return if ref $v eq 'Foo::block' and $v-&gt;[0][0]\n        and $v-&gt;[0][0][0] !~ /signal|\"o_\\[9\\]\"/;\n    if (ref $v) {\n        deleteblocks($_) for $v-&gt;@*;\n    } else {\n        $output .= $v || '';\n    }\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>     signal {\n      {\n        ab\n        cd\n      }\n\n    \"o_[9]\" {\n                 Data S Mk {\n                 Active Up;\n                        }\n                    }\n\n           }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8608690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xazp6e5qEig/AAAAAAAAAAI/AAAAAAAAGOk/wgFkD66hqvM/photo.jpg?sz=128", "display_name": "Bhargavi Bk", "link": "https://stackoverflow.com/users/8608690/bhargavi-bk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519832645, "creation_date": 1519813997, "last_edit_date": 1519823922, "question_id": 49027398, "link": "https://stackoverflow.com/questions/49027398/how-to-delete-pattern-which-matches-with-the-next-new-pattern-which-is-calling-i", "title": "How to delete pattern which matches with the next new pattern which is calling in the next line by using /bin/sed command in dc_shell", "body": "<p>Below is the example of my file,    </p>\n\n<pre><code>         signal {\n          {\n            ab\n            cd\n          }\n\n        \"m_1_clk\" {\n              P {\n                 '0ns' D;\n                  '25ns' U;\n                  '65ns' D;\n                  }\n             }\n\n            \"m_0_clk\" {\n                        P {\n                          '0ns' D;\n                          '25ns' U;\n                          '65ns' D;\n                          }\n                       }\n\n              \"o_[9]\" {\n                     Data S Mk {\n                     Active Up;\n                            }\n                        }\n\n               \"m_0_clk\" {\n                          Data S Mk {\n                            Active Up;\n                            }\n                        }\n\n             \"m_1_clk\" {\n                          Data S Mk {\n                          Active Up;\n                            }\n                        }\n            }\n</code></pre>\n\n<p>I am expecting the output from above file to be:</p>\n\n<pre><code>      signal {\n           {\n              ab\n              cd\n            }\n         \"o_[9]\" {\n                  Data S Mk {\n                  Active Up;\n                      }\n                   }\n              }     \n</code></pre>\n\n<p>Hi,\nAbove is the example of my file\n    I would like to delete pattern which matches the next pattern which is calling in the next line. </p>\n\n<p>Trying to search the specific pattern for deleting the lines which it should not be present in my file.</p>\n\n<p>Need to search the specific pattern with new pattern in the next line. because first line is calling in multiple loops. so should grep specific pattern of all the content.\nI tried using the below command in tcl its not working. could anyone help me on this,</p>\n\n<p>below is the sed command used in tcl</p>\n\n<pre><code>exec /bin/sed -e {s/\\m\\(.*\\)clk\" {\\.*\\n\\.*Data\\.*//}  -i file\n\nexec /bin/sed -e {s/\\m\\(.*\\)clk\" {\\.*\\n\\.*P {\\.*//}  -i  file\n</code></pre>\n"}, {"tags": ["arrays", "perl", "bioinformatics", "sequences", "fastq"], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 2, "last_activity_date": 1519822388, "creation_date": 1519822388, "answer_id": 49030079, "question_id": 49021973, "link": "https://stackoverflow.com/questions/49021973/perl-extract-common-elements-from-2-arrays-common-sequences-in-fastq-file/49030079#49030079", "title": "perl extract common elements from 2 arrays (common sequences in fastq file)", "body": "<p>You'd better use hash maps to check for item existence in lists.<br>\nConstruct common hash map: </p>\n\n<pre><code>my %list1_map = map { $_, 1 } @list_R1;\nmy %common_map = map { $list1_map{$_} ? ($_, 1) : () )} @list_R2;\n</code></pre>\n\n<p>Then process your lists:  </p>\n\n<pre><code>for my $item(@list_R1) {\nif (defined ($common_map{$item})) {\n    # ... process ...       \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 1, "last_activity_date": 1519864652, "creation_date": 1519864652, "answer_id": 49040919, "question_id": 49021973, "link": "https://stackoverflow.com/questions/49021973/perl-extract-common-elements-from-2-arrays-common-sequences-in-fastq-file/49040919#49040919", "title": "perl extract common elements from 2 arrays (common sequences in fastq file)", "body": "<p>In the following solution, I've moved the FASTQ parsing to a separate class, which will read 4 lines from the file and return a hashref of id, hdr, seq, and qual representing one record.  I've left writing this class to you as an exercise.  Doing so makes the logic below easy to follow.  Readability is important.</p>\n\n<p>This code simply saves the IDs (i.e. the $1 in $hdr=~/^@(\\S+)/) of empty seqs from file1.  Then it reads file2 and outputs complete records and also saves IDs of empty records.  Finally, you read file1 again and output the complete records by removing those indicated by the %filtered hash. </p>\n\n<p>This solution is inefficient in that it reads file1 twice.  Not mentioned in the original question was that FASTQ files typically contain millions of records, so saving all the unfiltered records from file1 in the %filtered hash would require a lot of RAM but if you have a lot of RAM, you could alter to suit, but personally I wouldn't worry about reading the file twice.</p>\n\n<pre><code># SAVE IDS OF EMPTY RECORDS FROM FILE1 IN HASH\nmy %filter;\nmy $fq = new Fastq($file1);\nwhile (my $rec = nextSeq($fq))\n{\n    $rec-&gt;{seq} or $filter{$rec-&gt;{id}} = undef; # not using value\n}\n\n# ADD IDS OF EMPTY RECORDS FROM FILE2 TO HASH AND OUTPUT FILTERED_FILE2\nopen(my $out, '&gt;', \"$file2.filtered\") or die($!);\n$fq = new Fastq($file2);\nwhile (my $rec = nextSeq($fq) )\n{\n    if ( $rec-&gt;{seq} )\n    {\n        # READ2 FOR THIS PAIR IS NOT EMPTY\n        if ( ! exists($filter{$rec-&gt;{id}}) )\n        {\n             # READ1 FOR THIS PAIR IS ALSO NOT EMPTY\n             print $out join(\"\\n\", $rec-&gt;{hdr}, $rec-&gt;{seq}, '+', $rec-&gt;{qual}), \"\\n\";\n        }\n    } else\n    {\n         # READ2 IS EMPTY, ADD TO FILTERED HASH\n         $filtered{$rec-&gt;{id}} = undef;\n    }\n}\nclose($out);\n\n# OUTPUT FILTERED_FILE1\nopen($out, '&gt;', \"$file1.filtered\") or die($!);\n$fq = new Fastq($file1);\nwhile (my $rec = nextSeq($fq) )\n{\n    if ( $rec-&gt;{seq} and ! exists($filter{$rec-&gt;{id}}) )\n    {\n         print $out join(\"\\n\", $rec-&gt;{hdr}, $rec-&gt;{seq}, '+', $rec-&gt;{qual}), \"\\n\";\n    }\n}  \nclose($out);   \n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519864652, "creation_date": 1519791928, "question_id": 49021973, "link": "https://stackoverflow.com/questions/49021973/perl-extract-common-elements-from-2-arrays-common-sequences-in-fastq-file", "title": "perl extract common elements from 2 arrays (common sequences in fastq file)", "body": "<p>I have 2 file (paired_end) with reads in fastq format from the same organism (File_R1.fastq and File_R2.fastq). And I want to determinate the coverage deep using bwa and samtools (bioinformatics), for do it I need both files with the same number of reads, the same name (file_1: @XX00341:4450:6341 1:N:0:AACGTTAA+TTGCAATT   and   file_2: @XX00341:4450:6341 2:N:0:AACGTTAA+TTGCAATT), in the same order in both files, the problem is that both files have empty reads (The corresponding read for each file, could be empty in one but not in other !!!!), and if I try to run it with bwa it fails due to empty sequences. </p>\n\n<p>So I'm trying to make a perl script to extract the NO empty reads with the same name and order in both files.</p>\n\n<p>this is the format of fastq file (each read has 4 lines: name (@XX00341:19:000H27K25:1:11101:4450:6341 1:N....), sequence (GAGGTGCGTGGTTGTCACCCC...), Q_head (+) and Quality (FFFFFFFFFFFFFFF....), in that order.</p>\n\n<p>file_r1.fastq (characterized with = .... 1:N:0:AACGTTAA+TTGCAATT)</p>\n\n<pre><code>@XX00341:4450:6341 1:N:0:AACGTTAA+TTGCAATT\nCGCCCATCATGAGGTGCGTGGTTGTCACCCCCGCAAACGCGGAGGTGTAAACAGGCTCACCTGTGGGTTGTTGGTAGTCGTTATTGTGCTTGCGCTGTTCATCTGGATTACTGGATTCGACGCGTTGAGC\n+\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n@XX00341:14420:6341 1:N:0:AACGTTAA+TTGCAATT\nGCTTTGTCGTCGTCGGTTTTAAAGTGAACCGCTTTACCTGTTTCTGCTTGAACTTGTTCTGCTTGAGGTGCTGCTTCTGGTTTTGTTTCTTCTTTCTGACAACCTACCGCTAGCATTACTGTTGCAGCAA\n+\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF/FFFFAAFFFFFFAFFFFAFFFFFFFFFFAFAFFFFFAFFFFFFFFFFFFFFFFAFFFFFFFFFFFFFAFFFFFFFAFFFFFFF/FFFFFFFFFFFF\n@XX00341:10259:6342 1:N:0:AACGTTAA+TTGCAATT\n\n+\n\n@XX00341:6685:6342 1:N:0:AACGTTAA+TTGCAATT\nCATTGGAAGGCAAGCCAGAACAAGGCAAGAATATTCCAGATGACATCGTGCGCGTTCGCATCGATCGCAACAGCGGTCTGCTGACTCATAAAGTGGATAGCACGTCCATGTTTGAATACTTTGAGAAAGG\n+\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF6FFFFAFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFFFFFFFFFFFFFFFFFFFFFFAFFFFFFFFFFFFFFFFFFFFAFFFFFFAFFFFFFFFFFFFF\n@XX00341:4051:6343 1:N:0:AACGTTAA+TTGCAATT\nTCACCATGATCGGATTTATGAATGGTTTAGTGGACAGCATGATCAAAAATGCGATTGCTTGGCAAACCAGCCATTTGCAGATTCATCAAAGTGCTTATCTCGTTAATCCTGAACTGAAAGACACCATACC\n+\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n@XX00341:12307:6344 1:N:0:AACGTTAA+TTGCAATT\nTCCAAATTGAGAGTTAATGTGAAAAAAGAATGACTTTTTGCTTGTCATGCAGCGGATTTGTGTGATACCACTAATGACGCAAACATTTTCGTAGAACATTACACAATACTATTTAACGAAAAAAGAACGA\n+\nFAAFFAFAAFFAFFF/FF/FFAFFFFFFFFFAAFFF=F=AFFFFFFFFFFFFAFFFFFFFFFFAFFFFFFFFFFAFFFFFAAFFFFFFFFFF/FAFFFFAFFFFFFFFFFFFAAAFFAF///FAFFFFFF\n@XX00341:24250:6345 1:N:0:AACGTTAA+TTGCAATT\nCGAACATAGAGCAAGCTCTGGTAAGTCCCGATGGGAGCTTAAAGACACAAGTAGACCAAAAGCTCGCAGAACATGGCTTGAGCCGTAAAGTCACCGTGGCGTCGCGCAACTTTCTCACCATTCGGCATCT\n+\nFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n</code></pre>\n\n<p>file_r2.fastq (characterized with = .... 2:N:0:AACGTTAA+TTGCAATT)</p>\n\n<pre><code>@XX00341:4450:6341 2:N:0:AACGTTAA+TTGCAATT\nGCGGCTTTGGTAGCGAAGCGCGTCTACCAACCGCAGCCATGAAACAACTGGCGTTTGAAGTGGAAAAAACGGCAGCGGGCAGTATTCCGGTACTGATTGAAGCCATCGAACAAGTGGCGGTGCCTACCGC\n+\nAFFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFF/FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFAFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n@XX00341:14420:6341 2:N:0:AACGTTAA+TTGCAATT\nGCGGTTCGAGTGGCCAACGTTGAACTTCATGCTCGGTAAAAAAGCAACCATTTAACGTGGTGATGACAATTAAATATAGGAATAAATGAGAAATTCTTTGCATCACATCTAATAATCCGGTTTGTGTCTT\n+\nAFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF/FFFAFAFFFFFFFF/FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFFF\n@XX00341:10259:6342 2:N:0:AACGTTAA+TTGCAATT\nTCTTTTTTCGTTAAATAGTATTGTGTAAT\n+\nFFFFFFFFFFFFFAFFFFFFFFFFFFFFF\n@XX00341:6685:6342 2:N:0:AACGTTAA+TTGCAATT\nGAATAAATGCTGTCTTCGAGGCTGTTACCAACGTATTCGGTTGGCTCCGTGCCTTTCTCAAAGTATTCAAACATGGACGTGCTATCCACTTTATGAGTCAGCAGACCGCTGTTGCGATCGATGCGAACGC\n+\nAFFFFFFFFAFFFFAFFFFFFFFFFFFFFFFFFFFFFFF/FF/FFFFFFFFAFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFAFFFF=FF=FFFFFFFAFFFFFFF\n@XX00341:4051:6343 2:N:0:AACGTTAA+TTGCAATT\nGAAGCTATCATGCCATCGGCGAGAAACCGCTCCGATACGGCTTTCACGCTTTGATGCTTGTCTAACGTTGTCACGATGCTTTGCGAGTCAGGTATGGTGTCTTTCAGTTCAGGATTAACGAGATAAGCAC\n+\nAFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n@XX00341:12307:6344 2:N:0:AACGTTAA+TTGCAATT\nGTTCATCTGTCTGTCGTTCTTTTTTCGTTAAATAGTATTGTGTAATGTTCTACGAAAATGTTTGCGTCATTAGTGGTATCACACAAATCCGCTGCATGACAAGCAAAAAGTCATTCTTTTTTCACATTAA\n+\nAFFFFFFFFFAFFFFFFFFAFFFFFFFFFFFFFAFFFFFFFFFFFFFFFFFFFFFFFFFFFF=FFFFFFFAFFFFFFFAFFFFFFFFFF=FAFFFFFFFFAFFFAFFAFFFFFFFFA=AFF6AFFAFAFF\n@XX00341:24250:6345 2:N:0:AACGTTAA+TTGCAATT\nCCATAGCATGGCAATATCAAAATCCGCAACGGCGATCGGCGGCTTAACAGTAATGAGATCGTCTGAAAAGCCCTCCGCCAACGCCATTTTTTCTGGCACGATGGCAATGAGATCGCGCTTTTTCAATAGA\n+\nAFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF/FFFFFFFFFFFFFFFFFFFFFFFFFFF\n</code></pre>\n\n<p>in this case, one read is empty in the file_1.fastq (@XX00341:10259:6342 1:N....), the second and fourth line are empty (sequence and quality), but not in the file_2.fastq (@XX00341:10259:6342 2:N....); in this example both sequences (the 4 lines in each file) must be omited !!! </p>\n\n<p>This is the code that I\u00b4m trying to finish: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Getopt::Long;\n\nmy ($fastQ_R1, $fastQ_R2);\n      GetOptions (\n            'R1|r1=s'   =&gt;\\$fastQ_R1,\n            'R2|r2=s'   =&gt;\\$fastQ_R2,\n\n      );\n\n    sub extract_list {\n        my ($file_in) = @_;\n        open FILE, '&lt;', $file_in or die \"cant open the $file_in\\n\";\n\n        my (@elements, @list, @seq);\n        while(\n            defined(my $head    =   &lt;FILE&gt;) &amp;&amp;   # 1 line\n            defined(my $seq     =   &lt;FILE&gt;) &amp;&amp;   # 2 line\n            defined(my $qhead   =   &lt;FILE&gt;) &amp;&amp;   # 3 line\n            defined(my $quality =   &lt;FILE&gt;)      # 4 line\n        ){\n            if ($seq=~ m/^$/g){\n                next;\n            }\n            else {  push @seq, $head;   }\n         }\n        close FILE;\n        foreach (@seq){\n            chomp;\n            @elements = split '\\s', $_;\n                push @list, $elements[0]; # split to eliminate 1:N... (file_1) and 2:N... (file_2)\n        }\n        return @list;\n    }\n\n    my @list_R1 = extract_list ($fastQ_R1);\n\n    my @list_R2 = extract_list  ($fastQ_R2);\n</code></pre>\n\n<p>So far I have the list of No empty sequences (@list_R1 and @list_R2) in both files, the comparison the both arrays will give the No empty reads (with 4 lines !!) that are present in both files (@common_elements) obtained from the comparison of both array.</p>\n\n<p>@list_R2=</p>\n\n<pre><code>@XX00341:4450:6341   \n@XX00341:14420:6341   \n@XX00341:6685:6342   \n@XX00341:4051:6343   \n@XX00341:12307:6344   \n@XX00341:24250:6345\n</code></pre>\n\n<p>@list_R2=</p>\n\n<pre><code>@XX00341:4450:6341   \n@XX00341:14420:6341   \n@XX00341:10259:6342\n@XX00341:6685:6342   \n@XX00341:4051:6343   \n@XX00341:12307:6344   \n@XX00341:24250:6345\n</code></pre>\n\n<p>@common_elemnts=</p>\n\n<pre><code>@XX00341:4450:6341   \n@XX00341:14420:6341   \n@XX00341:6685:6342   \n@XX00341:4051:6343   \n@XX00341:12307:6344   \n@XX00341:24250:6345\n</code></pre>\n\n<p>so the new array (@common_elemnts) will be used to search and extract the common reads (4 lines) foreach file and will give tow output files: Files_R1_common.fastq (obtained from the File_R1.fastq) and File_R2_common.fastq (obtained from the File_R2.fastq). </p>\n\n<p>Any suggestion, will be appreciated !!!! \nThanks so much </p>\n"}, {"tags": ["shell", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1519801324, "post_id": 49021541, "comment_id": 85052093, "body": "<code>, www int)</code> No back tik in <code>www</code>"}, {"owner": {"reputation": 15, "user_id": 9247336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afcc0246fa0898f2639b61c27ce039c?s=128&d=identicon&r=PG&f=1", "display_name": "Express Cars Inc", "link": "https://stackoverflow.com/users/9247336/express-cars-inc"}, "edited": false, "score": 0, "creation_date": 1519822107, "post_id": 49021541, "comment_id": 85064120, "body": "sorry, I missed the back tick in <code>www</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9247336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afcc0246fa0898f2639b61c27ce039c?s=128&d=identicon&r=PG&f=1", "display_name": "Express Cars Inc", "link": "https://stackoverflow.com/users/9247336/express-cars-inc"}, "edited": false, "score": 0, "creation_date": 1519822249, "post_id": 49024115, "comment_id": 85064224, "body": "Thanks for spending time on my question. I did try to use sed in shell scripts but it did not work. I thought perl will be better at string extraction. I m have no experience in perl."}, {"owner": {"reputation": 15, "user_id": 9247336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afcc0246fa0898f2639b61c27ce039c?s=128&d=identicon&r=PG&f=1", "display_name": "Express Cars Inc", "link": "https://stackoverflow.com/users/9247336/express-cars-inc"}, "edited": false, "score": 0, "creation_date": 1519822495, "post_id": 49024115, "comment_id": 85064389, "body": "This is part of the large shell script. The below step will be within a loop. Only one SQL statement will be sent as input to the below. Your code works as expected but how to make changes to your code to satisfy my problem ?    my @bcktik = &quot;&quot;; while(&lt;DATA&gt;) {     if($_=~m/PARTITIONED BY\\s*\\(((?:\\(.*\\)|[^\\(])*)\\)/i)     {         push(@bcktik, join &quot;\\,&quot;, ($1=~m/<code>([^</code>]*)`/g));     } } print &quot;$_\\n&quot; for @bcktik;"}, {"owner": {"reputation": 15, "user_id": 9247336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afcc0246fa0898f2639b61c27ce039c?s=128&d=identicon&r=PG&f=1", "display_name": "Express Cars Inc", "link": "https://stackoverflow.com/users/9247336/express-cars-inc"}, "edited": false, "score": 0, "creation_date": 1519822604, "post_id": 49024115, "comment_id": 85064451, "body": "Just an example,      DATA = &quot;CREATE TABLE <code>xxx</code>( <code>path</code> varchar(200), <code>fsize</code> bigint, <code>usrname</code> varchar(100)) PARTITIONED BY ( <code>depth</code> int, <code>permi</code> varchar(100)) ROW FORMAT SERDE &#39;org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&#39; STORED AS INPUTFORMAT &#39;org.apache.hadoop.mapred.TextInputFormat&#39; OUTPUTFORMAT &#39;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&#39; LOCATION &#39;xxx&#39; TBLPROPERTIES ( &#39;transient_lastDdlTime&#39;=&#39;1519784177&#39;)&quot;"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1519802999, "creation_date": 1519802999, "answer_id": 49024115, "question_id": 49021541, "link": "https://stackoverflow.com/questions/49021541/how-to-extract-the-values-in-tick-separated-by-comma-between-the-bracket-of-par/49024115#49024115", "title": "How to extract the values in tick separated by comma between the bracket of &quot;PARTITIONED BY&quot; clause", "body": "<p>Just try this:</p>\n\n<pre><code>my @bcktik = \"\";\nwhile(&lt;DATA&gt;)\n{\n    if($_=~m/PARTITIONED BY\\s*\\(((?:\\(.*\\)|[^\\(])*)\\)/i)\n    {\n        push(@bcktik, join \"\\,\", ($1=~m/`([^`]*)`/g));\n    }\n}\nprint \"$_\\n\" for @bcktik;\n\n__DATA__\nCREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int, `permi` varchar(100)) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\n\nCREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\n\nCREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int, `permi` varchar(100), `www` int) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9247336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afcc0246fa0898f2639b61c27ce039c?s=128&d=identicon&r=PG&f=1", "display_name": "Express Cars Inc", "link": "https://stackoverflow.com/users/9247336/express-cars-inc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519865724, "creation_date": 1519788710, "last_edit_date": 1519865724, "question_id": 49021541, "link": "https://stackoverflow.com/questions/49021541/how-to-extract-the-values-in-tick-separated-by-comma-between-the-bracket-of-par", "title": "How to extract the values in tick separated by comma between the bracket of &quot;PARTITIONED BY&quot; clause", "body": "<p>I have shell script which extracts the syntax of the create table statement for all tables in a database. I loop one create table statement at a time and create table statement will be available as a variable $DATA within the loop. I need to extract the columns in the create table statements within the partitioned by clause. </p>\n\n<p>For example, $DATA is the variable within the loop</p>\n\n<p>Input of Iteration 1 to the loop:</p>\n\n<pre><code>DATA=\"CREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int, `permi` varchar(100)) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\"\n</code></pre>\n\n<p>Output of iteration 1:\ndataoutput=depth,permi</p>\n\n<p>Input of Iteration 2 to the loop:</p>\n\n<pre><code>DATA=\"CREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\"\n</code></pre>\n\n<p>Output of iteration 2:\ndataoutput=depth</p>\n\n<p>Input of Iteration 3 to the loop:</p>\n\n<pre><code>DATA=\"CREATE TABLE `xxx`( `path` varchar(200), `fsize` bigint, `usrname` varchar(100)) PARTITIONED BY ( `depth` int, `permi` varchar(100), `www` int) ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe' STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.TextInputFormat' OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' LOCATION 'xxx' TBLPROPERTIES ( 'transient_lastDdlTime'='1519784177')\"\n</code></pre>\n\n<p>Output of iteration 3:\ndataoutput=depth,permi,www</p>\n"}, {"tags": ["regex", "perl", "syntax", "space", "removing-whitespace"], "comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519778963, "post_id": 49020238, "comment_id": 85045787, "body": "@MattJacob The issue is with input such as <code>print(&quot;foo bar&quot; baz)</code>, which should come out as <code>print(&quot;foo bar&quot;, baz)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519831662, "post_id": 49020238, "comment_id": 85070758, "body": "Tip: Don&#39;t clobber <code>$_</code>!!! At least use <code>local $_ = shift;</code>, but even that can cause problems because <code>$_</code> is not uncommonly aliased to a magical or read-only variable. <code>for (my $s = shift) { ... }</code> is safe, but you&#39;re better off using just <code>my $s = shift;</code> in most cases."}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 3, "last_activity_date": 1519780780, "creation_date": 1519780780, "answer_id": 49020552, "question_id": 49020238, "link": "https://stackoverflow.com/questions/49020238/insert-missing-commas-in-c-source/49020552#49020552", "title": "Insert missing commas in C source", "body": "<p>You could use Text::ParseWords to get the data between the parens and do the substitution on the results of the parse.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Text::ParseWords;\n\nfor ('foo(\"bar baz\")', 'print(\"foo bar\" baz)', 'foo(bar baz)') {\n    my $s = $_;\n    $s =~ s/(\\([^)]*\\))/remove_sp($1)/eg;\n    print $s, $/;\n}\n\nsub remove_sp {\n    join \", \", quotewords('\\s+', 1, shift);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo(\"bar baz\")\nprint(\"foo bar\", baz)\nfoo(bar, baz)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1519796868, "post_id": 49020789, "comment_id": 85050389, "body": "I wasn&#39;t looking for optimal C syntax correction/compression, just adding commas where necessary. We can assume that anywhere a comma looks like it should exist should exist."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 2, "creation_date": 1519797221, "post_id": 49020789, "comment_id": 85050502, "body": "It&#39;s not a matter of &quot;correction/compression&quot;. There are situations where it&#39;s impossible to tell whether a comma was supposed to be there or not. If it was possible to guess where all the commas were supposed to be, you wouldn&#39;t need to include them. :)"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1519863173, "post_id": 49020789, "comment_id": 85086771, "body": "I&#39;m just saying that this answer goes beyond the scope of the question; I want to replace spaces between parenthesis with comma-space unless the spaces are between quotes."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1519797377, "last_edit_date": 1519797377, "creation_date": 1519782743, "answer_id": 49020789, "question_id": 49020238, "link": "https://stackoverflow.com/questions/49020238/insert-missing-commas-in-c-source/49020789#49020789", "title": "Insert missing commas in C source", "body": "<p>I don't think that's possible. I can think of a couple of grammatical edge cases where it's impossible to determine whether a comma is needed or not:</p>\n\n<h2>String pasting</h2>\n\n<pre><code>foo(\"abc\" \"def\");   // = foo(\"abcdef\")\nfoo(\"foo\", \"bar\");\n</code></pre>\n\n<p>Placing two string constants next to each other causes them to be \"pasted\" together. Without knowing how many arguments are needed for a function, there's no way of telling whether this was the expected behavior.</p>\n\n<h2>Comma expressions, e.g. in <code>for</code> loops</h2>\n\n<p><a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">The comma is an operator in C</a>; it evaluates two expressions and returns the value of the one on the RHS. Combined with the unary/binary dual nature of the <code>+</code>, <code>-</code>, <code>&amp;</code>, and <code>*</code> operators, this means that an expression as simple as:</p>\n\n<pre><code>a + b    or    a * b\n</code></pre>\n\n<p>can have a comma inserted into it:</p>\n\n<pre><code>a, +b    or    a, *b\n</code></pre>\n\n<p>While this is a contrived example, more complex cases can emerge, e.g. in complex <code>for</code> loops.</p>\n\n<h2>Function arguments</h2>\n\n<p>Similarly:</p>\n\n<pre><code>foo(a * b - 1);\nfoo(a * b, -1);\nfoo(a, *b - 1);\nfoo(a, *b, -1);\n(etc)\n</code></pre>\n\n<p>Without knowing the number of arguments that are expected to a function, it's impossible to tell whether a comma should be inserted. And sometimes even that isn't enough!</p>\n"}], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 49020552, "answer_count": 2, "score": 1, "last_activity_date": 1519797377, "creation_date": 1519778462, "last_edit_date": 1519780709, "question_id": 49020238, "link": "https://stackoverflow.com/questions/49020238/insert-missing-commas-in-c-source", "title": "Insert missing commas in C source", "body": "<p>I've got a perl script (using <code>-p</code> flag) that performs some corrections on a corrupted C source file. Here's part of the script:</p>\n\n<pre><code>sub remove_sp {\n    $_ = shift; \n    s/ /, /g; \n    return $_;\n}\n\ns/(\\([^}]*\\))/remove_sp($1)/eg;\n</code></pre>\n\n<p>This replaces spaces inside parenthesis with <code>,&nbsp;</code>,  e.g. <code>foo(bar baz)</code> becomes <code>foo(bar, baz)</code>. However, it's not very smart. It also changes <code>foo(\"bar baz\")</code> to <code>foo(\"bar, baz\")</code> which obviously isn't something I want.</p>\n\n<p>I can't think of a way to rewrite the script so that it replaces a space with a comma-space only when the space is not between quotes. How can I do this?</p>\n\n<hr>\n\n<p>Here's a simple table of what I need and what isn't working.</p>\n\n<pre><code>Search                       | Replace                        | Currently handled correctly?\n--------------------------------------------------------------------------------------------\nfoo(bar baz)                 | foo(bar, baz)                  | Yes\nfoo(\"bar baz\")               | foo(\"bar baz\")                 | No\nfoo(\"bar baz\" bak)           | foo(\"bar baz\", bak)            | No\nfoo(\"bar baz\" bak \"123 abc\") | foo(\"bar baz\", bak, \"123 abc\") | No\n</code></pre>\n"}, {"tags": ["arrays", "perl", "nested-loops"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519770050, "post_id": 49018678, "comment_id": 85043002, "body": "You are testing whether the value of <code>$emp-&gt;{Manager}</code> (as string) is <i>equal</i> to that of <code>$emp2-&gt;{Login}</code>.  Equal meaning down to spaces, newlines, and all. Is that what you meant to do?"}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519770183, "post_id": 49018678, "comment_id": 85043064, "body": "@zdim if the 2 are equal, I don&#39;t want to push the Manager name because the Manager is terminated. If they are not equal, then I can push the Manager&#39;s name."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519770269, "post_id": 49018678, "comment_id": 85043097, "body": "Fine ... but how  &quot;<i>doesn&#39;t seem to work</i>&quot;?  You don&#39;t say."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519770433, "post_id": 49018678, "comment_id": 85043164, "body": "I was reminding you that <code>ne</code> means <i>not equal</i>, as it is common to see that people mean things to match but use <code>eq</code>.  I am looking at that since it is not at all clear what (else/other?) is not working in your code.  Also, what lists are you comparing, and what is that other &quot;<i>terminated</i>&quot; business?  I suggest you edit the post to clarify."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519770601, "post_id": 49018678, "comment_id": 85043221, "body": "I did say, but perhaps not clearly enough. I wanted to see if the manager was also found to be in the terminated list. If he wasn&#39;t, then I could add him to %manager. If he was terminated, I didn&#39;t want to add him because emails couldn&#39;t be sent to him. I did this by trying to see if one value in the first AoH is found in the second AoH. So I did the foreach my $emp2 (@$qr2){...} inside my first AoH foreach my $emp (@$qr). I noted that in testing, Harry@email.com shows up when it shouldn&#39;t be added due to Harry also being a terminated employee."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519771236, "post_id": 49018678, "comment_id": 85043502, "body": "That particular test is fine; perhaps the logic is off somewhere? For instance, you check <code>Harry</code> for <i>all</i> <code>Login</code>s and it will be <code>ne</code> for both <code>Tom</code> and <code>Dick</code>. It all seems a little convoluted -- print debugging statements throughout to see what exactly the code is in fact doing."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519771656, "post_id": 49018678, "comment_id": 85043642, "body": "@zdim I rearranged my paragraphs and added a bit more so hopefully the post is more clear now. I will try to add more debugging statements - I&#39;ve done a number of them but perhaps I need to do one at each line :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519773027, "post_id": 49018678, "comment_id": 85044075, "body": "OK, thank you, it is <i>much</i> clearer now. (The code is too convoluted, which is probably why you have errors -- but OK, that&#39;s your question.)  I&#39;ll look as time permits -- more importantly, hopefully it&#39;s clearer for other people :)  By debugging I meant for yourself (not in the post), then you&#39;ll likely figure it out."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519804589, "post_id": 49018678, "comment_id": 85053633, "body": "When I run your code as it stands it prints nothing.  When I print the <code>%manager</code> the only one is <code>Tod</code> -- and this is because of <code>if ( ... &amp;&amp; $emp-&gt;{Owner} eq $a)</code>, where <code>$a</code> is <code>Tod</code>.  There are number of corrections to be made but first: 1) the code doesn&#39;t do what you say 2) I don&#39;t see what you want with some conditions, like the one selecting <code>Tod</code>.  Please clean this up."}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519831206, "post_id": 49018678, "comment_id": 85070450, "body": "@zdim I didn&#39;t do the whole code with all of my elsifs, which is why you see Tod first. I did the printing after each line and I see where my error is. In comparing the manager to each name in the term list, I have it being added if it is different from at least one name instead of making sure it isn&#39;t in there at all :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519845266, "post_id": 49018678, "comment_id": 85078807, "body": "Good you got it figured out, and got an answer :).  A tip: Reduce code so that it does exhibit the error(s), so that people can copy-paste; that&#39;s an ideal. I did figure out the problem (was late to prepare for a post) but it&#39;s better if it is all ready for those who look at it.  Make it as clear and easy as you can for them."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1519818367, "post_id": 49027955, "comment_id": 85061771, "body": "You could just use a hash instead of <code>~~</code>: <code>my %dismissed = map { $_-&gt;{Login} =&gt; 1 } @$qr2; ... grep { !$dismissed{$_-&gt;{Manager}} } ...</code>"}, {"owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "edited": false, "score": 0, "creation_date": 1519843900, "post_id": 49027955, "comment_id": 85078044, "body": "Thank you for answer. This wasn&#39;t quite what I needed as far as what I need to do overall. However, your my@dismissed was exactly what I needed instead of doing the second foreach, which I found out was the wrong logic thanks to zdim&#39;s debugging tip. I was then able to correctly do <code>my @term_emp = map {$_-&gt;{Login}} @$qr2;             if (grep {$emp-&gt;{Manager} eq $_} @term_emp) {$manager{&#39;jhaight&#39;} = 1;}             else {$manager{$emp-&gt;{Manager}} = 1;}</code> Therefore, I am marking it as the answer I needed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519846456, "post_id": 49027955, "comment_id": 85079459, "body": "As for &quot;smart match,&quot; an easy advice is: don&#39;t.  It&#39;s clear that its workings will change so we better wait (than have broken code).  As for an alternative, see for example <a href=\"http://search.cpan.org/~rehsack/List-MoreUtils-0.428/lib/List/MoreUtils.pm\" rel=\"nofollow noreferrer\">List::MoreUtils</a> (or just write a little more code)"}], "tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": true, "score": 1, "last_activity_date": 1519818173, "last_edit_date": 1519818173, "creation_date": 1519815568, "answer_id": 49027955, "question_id": 49018678, "link": "https://stackoverflow.com/questions/49018678/need-to-compare-one-value-in-aoh-to-another-value-in-a-second-aoh/49027955#49027955", "title": "Need to compare one value in AoH to another value in a second AoH", "body": "<p>Unless I have missed something obvious, I think you're making things too complicated.</p>\n\n<p>The following works for me.</p>\n\n<p><strong>WARNING:</strong> It uses the 'smartmatch operator' to search for an element within an array. AFAIK this feature is still deemed 'experimental'. Others might be able to comment on the status of that feature - or suggest a more suitable alternative.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $qr = [\n    {IP=&gt;'X.Y.Z.51',Testnet=&gt;'bos-por-leg',Owner=&gt;'Edmund', Email =&gt; 'bosemail', Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.52',Testnet=&gt;'bos-por-2',Owner=&gt;'Edmund', Email =&gt; 'boemail2',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.53',Testnet=&gt;'bos-por-leg',Owner=&gt;'Edmund', Email =&gt; 'bosemail',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.54',Testnet=&gt;'sqa',Owner=&gt;'Richard', Email =&gt; 'sqaemail',Manager =&gt; 'Harry'},\n    {IP=&gt;'X.Y.Z.55',Testnet=&gt;'sqa',Owner=&gt;'Richard', Email =&gt; 'sqaemail',Manager =&gt; 'Harry'},\n    {IP=&gt;'X.Y.Z.56',Testnet=&gt;'fll-pro',Owner=&gt;'Larry', Email =&gt; 'fllemail',Manager =&gt; 'Moe'},\n    {IP=&gt;'X.Y.Z.57',Testnet=&gt;'fll-pro', Owner=&gt;'', Email =&gt; 'fllemail',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.58',Testnet=&gt;'fll-pro2', Owner=&gt;'', Email =&gt; 'flemail2', Manager =&gt; 'Curly'},\n];\n\nmy $qr2 = [{Login =&gt; 'Tom'},\n           {Login =&gt; 'Dick'},\n           {Login =&gt; 'Harry'},\n           ];\n\nmy @dismissed = map { $_-&gt;{Login} } @$qr2;\n\nmy @eligible = grep { !($_-&gt;{Manager} ~~ @dismissed) } @$qr;\n\nsay $_-&gt;{Testnet}, ', ', $_-&gt;{Email} foreach @eligible;\n</code></pre>\n\n<p><strong>Alternative DB queries</strong></p>\n\n<p>Since you tagged the question with Perl rather than DBI, this is parenthetical - but I think is worth noting nonetheless.</p>\n\n<p>You asked:</p>\n\n<blockquote>\n  <p>I am trying to also see if there is a way to do what I want using only\n  1 query</p>\n</blockquote>\n\n<p>I think there is - using the <a href=\"https://www.w3schools.com/sql/sql_in.asp\" rel=\"nofollow noreferrer\">NOT IN</a> operator. Something similar to the following will probably work - although you might need to alter the syntax slightly depending on the database server you are using. </p>\n\n<p>Simple add another condition to your <code>WHERE</code> clause, so </p>\n\n<pre><code>where \n    DIVISION like 'TERM%' and TERM_DATE is not null\n</code></pre>\n\n<p>would become</p>\n\n<pre><code>where \n    DIVISION like 'TERM%' and TERM_DATE is not null\nAND\n    hr_manager_login NOT IN (select login from CMN_INT.AK_EMPLOYEE where DIVISION = q[Terminated Employees])\n</code></pre>\n\n<p>If the number of terminated employees is <em>extremely long</em> (you intimate it is 'quite long' - but don't specify exactly how long) there may be performance implications for using <code>NOT IN</code>, but I think that is probably not the case here.</p>\n"}], "owner": {"reputation": 75, "user_id": 9355368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f408be0771b8451b59900e02670c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/9355368/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49027955, "answer_count": 1, "score": 0, "last_activity_date": 1519818173, "creation_date": 1519768934, "last_edit_date": 1519771287, "question_id": 49018678, "link": "https://stackoverflow.com/questions/49018678/need-to-compare-one-value-in-aoh-to-another-value-in-a-second-aoh", "title": "Need to compare one value in AoH to another value in a second AoH", "body": "<p>Editing to be more clear:</p>\n\n<p>I am going to be obtaining 2 queries from the database and storing them as AoH. The 2 queries are:</p>\n\n<pre><code>select\n    ip_address, \n    testnet,\n    t.email as email, \n    owner, \n    hr_manager_login as manager\nfrom \n    lab_view \n    JOIN CMN_INT.AK_EMPLOYEE on owner = login \n    JOIN testnets t on t.name = testnet\nwhere \n    DIVISION like 'TERM%' and TERM_DATE is not null\norder by owner\n</code></pre>\n\n<p>and <code>select login from CMN_INT.AK_EMPLOYEE where DIVISION = q[Terminated Employees]</code></p>\n\n<p>For my original testing, I wasn't going to dive into the opening/using DBI, so I used dummy data. my $qr is an example of what I would get from the first query and my $qr2 is an example of what I would get from the second query. I want to see if the Manager value in the first AoH is found in the second (terminated employees) AoH. If it IS found, then the manager is a terminated employee and its name shouldn't be pushed to the %manager. I tried testing this out by inserting the below foreach code into my first foreach code, but it didn't work as the Manager Harry was still being pushed and printed.</p>\n\n<pre><code>foreach my $emp2 (@$qr2){\n    if ($emp-&gt;{Manager} ne $emp2-&gt;{Login}){\n        $manager{$emp-&gt;{Manager}} = 1; #capture all managers not also terminated related to $name. Done this way for when $name is undef\n    }\n}\n</code></pre>\n\n<p>I also tried to assign the $emp->{Manager} to a variable before the 2nd foreach and then use if ($M ne $emp2->{Login}), but that also didn't work. </p>\n\n<p>Below is the first part of my testing code with dummy data for the queries I would run, minus all the elsifs :) </p>\n\n<pre><code>my $qr = [\n    {IP=&gt;'X.Y.Z.51',Testnet=&gt;'bos-por-leg',Owner=&gt;'Edmund', Email =&gt; 'bosemail', Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.52',Testnet=&gt;'bos-por-2',Owner=&gt;'Edmund', Email =&gt; 'boemail2',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.53',Testnet=&gt;'bos-por-leg',Owner=&gt;'Edmund', Email =&gt; 'bosemail',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.54',Testnet=&gt;'sqa',Owner=&gt;'Richard', Email =&gt; 'sqaemail',Manager =&gt; 'Harry'},\n    {IP=&gt;'X.Y.Z.55',Testnet=&gt;'sqa',Owner=&gt;'Richard', Email =&gt; 'sqaemail',Manager =&gt; 'Harry'},\n    {IP=&gt;'X.Y.Z.56',Testnet=&gt;'fll-pro',Owner=&gt;'Larry', Email =&gt; 'fllemail',Manager =&gt; 'Moe'},\n    {IP=&gt;'X.Y.Z.57',Testnet=&gt;'fll-pro', Owner=&gt;'', Email =&gt; 'fllemail',Manager =&gt; 'Tod'},\n    {IP=&gt;'X.Y.Z.58',Testnet=&gt;'fll-pro2', Owner=&gt;'', Email =&gt; 'flemail2', Manager =&gt; 'Curly'},\n];\nmy $qr2 = [{Login =&gt; 'Tom'},\n           {Login =&gt; 'Dick'},\n           {Login =&gt; 'Harry'},\n           ];\nmy $len = scalar @$qr;\nmy $l = $len;\nmy $a = @$qr[0]-&gt;{Owner};\nfunc ($a);\nmy %ip;\nmy %test;\nmy $name;\nmy %manager;\nmy $ip_ref;\nmy $test_ref;\nmy $man_ref;\nsub func{\n    foreach my $emp (@$qr) {\n        if ($l &gt; 1 &amp;&amp; $emp-&gt;{Owner} eq $a) {\n            $name = $emp-&gt;{Owner} || 'Undefined'; #to use with email as $a will change as cycle thru\n            $ip{$emp-&gt;{IP}} = $emp-&gt;{Testnet}; #capture all IPs related to owner $name\n            $test{$emp-&gt;{Testnet}} = $emp-&gt;{Email}; #capture unique testnets only related to owner $name\n            foreach my $emp2 (@$qr2){\n                if ($emp-&gt;{Manager} ne $emp2-&gt;{Login}){\n                $manager{$emp-&gt;{Manager}} = 1; #capture all managers not also term related to $name. Done this way for when $name is undef\n                }\n            }\n            $l--; #to cycle thru array until reach last row\n        }\n    }\n}\nsub mail_func{\n    my $n = shift;   #user \n    my $i = shift;   #ips\n    my $t = shift;   #testnets\n    my $m = shift;   #managers (multiple if owner is undef) --&gt; to field\n    print \"User name is: $n\\n\";\n    my @to_list;\n        foreach my $value (values %{$t}){\n            if ($value ne 'bosemail'){\n                if (grep {$value} @to_list){next;}\n                else {push(@to_list,$value . '@email.com');}\n            }\n        }\n    foreach my $key (keys %{$m}){push(@to_list,$key . '@email.com');}\n    print \"@to_list\\n\";\n    my @body;\n    while ( my ( $key, $value ) = each %{$i} ) {\n        my $b = \"IP \" . $key . \" : Testnet \" . $value . \"\\n\";\n        push (@body, $b);\n    }\n    print \"@body\\n\";\n}\n</code></pre>\n\n<p>In testing, I get:</p>\n\n<pre><code>User name is: Richard\nsqaemail@email.com Harry@email.com   ##Harry shouldn't be added\nIP X.Y.Z.54 : Testnet sqa\n IP X.Y.Z.55 : Testnet sqa\n</code></pre>\n\n<p>I appreciate all input on how to correct. If you need more code, please let me know. Also to note, the terminated employees list is pretty long, so I'm guessing I probably shouldn't even be comparing each value in one AoH to each value in another AoH via the loop method, but that is all I know :) I am trying to also see if there is a way to do what I want using only 1 query. Thank you.</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 3, "creation_date": 1519746112, "post_id": 49012475, "comment_id": 85029662, "body": "I&#39;ve voted to close this question because it appears to be a request for a recommendation for a tool or solution, rather than a request for assistance with your own code. This makes your question off-topic for StackOverflow. If that assessment was incorrect, and you do indeed want help writing your own code, then please <a href=\"https://stackoverflow.com/posts/49012475/edit\">add your work so far to your question</a> and I&#39;ll happily retract my close vote."}, {"owner": {"reputation": 3, "user_id": 7115077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwZGtgdA8dg/AAAAAAAAAAI/AAAAAAAABnY/rGO2o53ZDm8/photo.jpg?sz=128", "display_name": "Sandeep Kumar", "link": "https://stackoverflow.com/users/7115077/sandeep-kumar"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1519747806, "post_id": 49012475, "comment_id": 85030892, "body": "well, i have written my code and it seems to ending up with 1st result, here is it, hence this questions, feel free, if you still think the question doesn&#39;t stand a chance, Thanks    #!/usr/bin/perl  use strict; use Data::Dumper;  my $filename = $ARGV[0]; chomp($filename);  open(FILE,$filename); my ($FSR);  while(my $data = &lt;FILE&gt;) { \t\t#print $data;         ($FSR) = &quot;&quot;;         if($data =~ /(&#39;FSR.*?)(.*?)(\\&#39;)/) {                 $FSR = &quot;$1,$2&quot;;         } print &quot;$FSR\\n&quot;; }  close(FILE);"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 3, "creation_date": 1519748023, "post_id": 49012475, "comment_id": 85031025, "body": "please, edit your post instead of posting code as a comment"}, {"owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "edited": false, "score": 0, "creation_date": 1519752855, "post_id": 49012475, "comment_id": 85034090, "body": "Now that you&#39;ve shown your code, I&#39;m more confused: didn&#39;t you say you wanted to add a pipe symbol.  Your code seems to be attempting to add a comma."}, {"owner": {"reputation": 3, "user_id": 7115077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwZGtgdA8dg/AAAAAAAAAAI/AAAAAAAABnY/rGO2o53ZDm8/photo.jpg?sz=128", "display_name": "Sandeep Kumar", "link": "https://stackoverflow.com/users/7115077/sandeep-kumar"}, "edited": false, "score": 0, "creation_date": 1519753296, "post_id": 49012475, "comment_id": 85034366, "body": "Either ways i am fine, i tried with comma, though, thanks for notifying"}], "answers": [{"comments": [{"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 1, "creation_date": 1519747663, "post_id": 49012719, "comment_id": 85030784, "body": "If you have a new question, please ask it by clicking the <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a> button. Include a link to this question if it helps provide context. - <a href=\"/review/low-quality-posts/18952023\">From Review</a>"}, {"owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "reply_to_user": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1519747820, "post_id": 49012719, "comment_id": 85030905, "body": "This an answer to the question in this post.  The question &#39;what am I missing?&#39; is directed at @SandeepKumar because the fact that such a simple answer seems to be all they&#39;re seeking potentially means that I don&#39;t fully understand the scope of their question---it&#39;s a request that they elaborate."}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 1, "creation_date": 1519747966, "post_id": 49012719, "comment_id": 85030994, "body": "That isn&#39;t clear. You should edit to make the answer clearer and to also explain what the code does and why it fixes the problem. If you want someone to elaborate, comment on their question/answer."}, {"owner": {"reputation": 3, "user_id": 7115077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwZGtgdA8dg/AAAAAAAAAAI/AAAAAAAABnY/rGO2o53ZDm8/photo.jpg?sz=128", "display_name": "Sandeep Kumar", "link": "https://stackoverflow.com/users/7115077/sandeep-kumar"}, "edited": false, "score": 0, "creation_date": 1519753530, "post_id": 49012719, "comment_id": 85034496, "body": "The result give me the entire line, rather then 2 segments as confirmed above                     **FSR**+S:KSSSSS+20+14++20120401&#39; | **FSR**+S:KSSSSS+44+1++20160218&#39;"}, {"owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "edited": false, "score": 0, "creation_date": 1519759321, "post_id": 49012719, "comment_id": 85037674, "body": "You need to edit your question to make it clear what defines a &quot;segment&quot;.  Is it the apostrophe?"}], "tags": [], "owner": {"reputation": 1546, "user_id": 2989337, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/JoDFi.png?s=128&g=1", "display_name": "JawguyChooser", "link": "https://stackoverflow.com/users/2989337/jawguychooser"}, "is_accepted": false, "score": 0, "last_activity_date": 1519752530, "last_edit_date": 1519752530, "creation_date": 1519746605, "answer_id": 49012719, "question_id": 49012475, "link": "https://stackoverflow.com/questions/49012475/find-similar-patterns-in-a-row-using-awk-or-sed/49012719#49012719", "title": "FInd similar patterns in a row using Awk or SED", "body": "<p>EDITED:</p>\n\n<p>The following one-liner would seem to address your problem as described:</p>\n\n<pre><code>$ sed -i -e 's/FSR/ | FSR/g' YOURFILE\n</code></pre>\n\n<p>Is there something more to this or is that what you were looking for?</p>\n"}], "owner": {"reputation": 3, "user_id": 7115077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YwZGtgdA8dg/AAAAAAAAAAI/AAAAAAAABnY/rGO2o53ZDm8/photo.jpg?sz=128", "display_name": "Sandeep Kumar", "link": "https://stackoverflow.com/users/7115077/sandeep-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1519806399, "creation_date": 1519745823, "last_edit_date": 1519748653, "question_id": 49012475, "link": "https://stackoverflow.com/questions/49012475/find-similar-patterns-in-a-row-using-awk-or-sed", "title": "FInd similar patterns in a row using Awk or SED", "body": "<p>Need some help here\nI have file which has multiple rows, Something like below</p>\n\n<pre><code>'**FSR**+S:KSSSSS+20+14++20120401'FST+S:KSSSSS+2'**FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401'FST+S:KSSSSS+2'**FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401'FST+S:KSSSSS+2'**FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401'\n</code></pre>\n\n<p>I am trying to get all the segments within a row which begins with <strong>FSR</strong>\nso results should be something like this, add pipe every time its finds a FSR, since they are constant on where they would occur in row. so i am not able to use cut here, in short FSR may come in beginning , middle or in the end of the row</p>\n\n<pre><code>'**FSR**+S:KSSSSS+20+14++20120401' | **FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401' | **FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401' | **FSR**+S:KSSSSS+44+1++20160218'\n'**FSR**+S:KSSSSS+20+14++20120401' \n</code></pre>\n\n<p>Additionally, this is the code, i had written in perl, thinking if this could be could be done in simple way</p>\n\n<p>#!/usr/bin/perl</p>\n\n<pre><code>use strict;\nuse Data::Dumper;\n\nmy $filename = $ARGV[0];\nchomp($filename);\n\nopen(FILE,$filename);\nmy ($FSR);\n\nwhile(my $data = &lt;FILE&gt;) {\n        #print $data;\n        ($FSR) = \"\";\n        if($data =~ /('FSR.*?)(.*?)(\\')/) {\n                $FSR = \"$1,$2\";\n        }\nprint \"$FSR\\n\";\n}\n close(FILE);\n</code></pre>\n\n<p>Please help</p>\n\n<p>Thanks\nSandy</p>\n"}, {"tags": ["python", "perl", "com", "win32com", "win32ole"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1519738095, "post_id": 49008075, "comment_id": 85023998, "body": "Smells like a 32/64 bit issue. Make sure your client is of the same bitness as the COM dll"}, {"owner": {"reputation": 43, "user_id": 4913216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c007c6554b077f41dcdedd79a843897?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/4913216/barry"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1519989072, "post_id": 49008075, "comment_id": 85140812, "body": "@SimonMourier:  2.7.12 [MSC v.1500 <b>32 bit</b> (Intel)] is the python version,  <b>v5.14.4 MSWin32-x86-multi-thread</b> is the perl version and the COM dll is built for <b>x86</b> target in visual studio"}, {"owner": {"reputation": 43, "user_id": 4913216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c007c6554b077f41dcdedd79a843897?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/4913216/barry"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1519991412, "post_id": 49008075, "comment_id": 85141910, "body": "@SimonMourier: Looks like the 32 bit and 64 bit issue. I removed the previous registrations and did re registration and tried with 32 bit python, now the error is different (OLE error 0x80131534: Guess some issue with the dependencies)"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 4913216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c007c6554b077f41dcdedd79a843897?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/4913216/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1519999129, "creation_date": 1519999129, "answer_id": 49070632, "question_id": 49008075, "link": "https://stackoverflow.com/questions/49008075/win32client-dispatch-fails-in-python-while-win32ole-new-runs-successfully-in-p/49070632#49070632", "title": "win32client dispatch fails in python while win32::ole new runs successfully in perl for a com dll", "body": "<p>It was a 32 bit/ 64 bit problem. After using a 32 bit python version, the issue was resolved.</p>\n"}], "owner": {"reputation": 43, "user_id": 4913216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c007c6554b077f41dcdedd79a843897?s=128&d=identicon&r=PG", "display_name": "Barry", "link": "https://stackoverflow.com/users/4913216/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519999129, "creation_date": 1519732423, "last_edit_date": 1519733015, "question_id": 49008075, "link": "https://stackoverflow.com/questions/49008075/win32client-dispatch-fails-in-python-while-win32ole-new-runs-successfully-in-p", "title": "win32client dispatch fails in python while win32::ole new runs successfully in perl for a com dll", "body": "<p>I have a com dll implemented in C# and is registered via regasm.\nWhen I try to get a handle to this dll in python via </p>\n\n<pre><code>handle = win32com.client.Dispatch('{EC456B4B-5AC4-46E8-99E8-54C193C316BC}')\n</code></pre>\n\n<p>or  </p>\n\n<pre><code>handle = win32com.client.Dispatch('MyCOMdll')\n</code></pre>\n\n<p>it fails with an error: (-2147221164, 'Class not registered', None, None)</p>\n\n<p>while this works in the perl script where I use </p>\n\n<pre><code>my $handle = Win32::OLE-&gt;new('MyCOMdll');\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $handle = Win32::OLE-&gt;new('{EC456B4B-5AC4-46E8-99E8-54C193C316BC}');\n</code></pre>\n\n<p>Meanwhile win32com.client.Dispatch is working good for the COM exe objects.</p>\n\n<p>Is the way I am using the win32.comclient for COM dlls correct ?</p>\n\n<hr>\n\n<p>[update 01]</p>\n\n<p>perl code which is working</p>\n\n<pre><code>use Win32::OLE;\nmy $handle = Win32::OLE-&gt;new('MyCOMdll');\n# my $handle = Win32::OLE-&gt;new('{EC456B4B-5AC4-46E8-99E8-54C193C316BC}');\nmy $result = Win32::OLE-&gt;LastError();\nif ($result != 0)\n{\n    print(\"OLE Error: \",$result,\"/n\");\n    die \"\";\n}\nelse\n{\n    print(\"OLE Success!!/n\");\n}\nexit 0;\n</code></pre>\n\n<p>Python code which works only for COM exe and not for COM dlls</p>\n\n<pre><code>import win32com.client\n\ntry:\n    handle = win32com.client.Dispatch('MyCOMdll')\n    # handle = win32com.client.Dispatch('{EC456B4B-5AC4-46E8-99E8-54C193C316BC}')\nexcept Exception as ex:\n    handle = None\n    print(ex)\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl", "awk", "scripting"], "comments": [{"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 1, "creation_date": 1519729438, "post_id": 49006763, "comment_id": 85018678, "body": "Can you show the result of <code>cat -v</code> on each file?  This will show any hidden control characters, new-lines, and such. I have a feeling that one of your files is in DOS format and the other not, or something like that. That would explain why your last field doesn&#39;t match even though the visible characters are the same."}, {"owner": {"reputation": 187, "user_id": 9153621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16524bc3fd6f15b17877f5d04a326dc7?s=128&d=identicon&r=PG&f=1", "display_name": "as7951", "link": "https://stackoverflow.com/users/9153621/as7951"}, "reply_to_user": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 0, "creation_date": 1519730360, "post_id": 49006763, "comment_id": 85019271, "body": "Hi,Thank you Jas.. File had &quot;^M&quot; charater present, now i have removed it and got the script working. But have one more issue. Need to list all header that are not matching with another file. Currently script is showing only first mismatch it found and not displaying the second mismatch. /Scripts/gst/Kenan_Test_Scenarios1.txt:order of SourceIdentifier is not correct"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1519730798, "post_id": 49006763, "comment_id": 85019549, "body": "@as7951, if you could post your samples in CODE TAGS <code>{}</code> button in better condition it will be easier for us to help you, please do so."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1519731091, "post_id": 49006763, "comment_id": 85019739, "body": "Do you actually need to identify incorrect/misordered headers, or is your concern making sure the data is ordered the same way as the &#39;key&#39;? Because that&#39;s two slightly different questions."}, {"owner": {"reputation": 187, "user_id": 9153621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16524bc3fd6f15b17877f5d04a326dc7?s=128&d=identicon&r=PG&f=1", "display_name": "as7951", "link": "https://stackoverflow.com/users/9153621/as7951"}, "edited": false, "score": 0, "creation_date": 1519732741, "post_id": 49006763, "comment_id": 85020742, "body": "Hi Sobrique, Perhaps i need both, i need to identify the incorrect header(may be some might be containing character in small letter and some might be missing some character etc) and also need to validate the order of header data. and need to print all the records that are mismatch, if three column header are not correct then need to print those three column headers"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1519736203, "post_id": 49006763, "comment_id": 85022776, "body": "To list all issues just get rid of the <code>next</code> statements."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1519738517, "post_id": 49006763, "comment_id": 85024271, "body": "<code>i=0</code> should be <code>i=1</code> btw. Awk arrays, strings, and fields start at 1, not 0."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1519731428, "creation_date": 1519731428, "answer_id": 49007764, "question_id": 49006763, "link": "https://stackoverflow.com/questions/49006763/validate-header-of-file-in-linux/49007764#49007764", "title": "Validate header of file in linux", "body": "<p>OK, you've tagged this perl, so here's a perl answer. I think you're focussing on the wrong problem - why not instead read row by row, parse them into a hash, and then output your desired ordering:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nopen ( my $first_file, '&lt;', 'file_name_here' ) or die $!; \nchomp ( my @header = split /\\|/, &lt;$first_file&gt; ); \nclose ( $first_file ); \n#debugging\nprint Dumper \\@header; \n\nopen  ( my $second_file, '&lt;', 'second_file_name_here' ) or die $!; \nchomp ( my @second_header = split /\\|/, &lt;$second_file&gt; );\n\nprint join ( \"|\", @header ), \"\\n\";\nwhile ( &lt;$second_file&gt; ) {\n    my %row;\n    #use ordering of column headings to read into named fields; \n    @row{@second_header} = split /\\|/;\n    #debugging output to show you what's going on. \n    print Dumper \\%row; \n\n    print join (\"|\", @row{@header} ), \"\\n\";\n}\n</code></pre>\n\n<p>That way you don't care if the order is wrong, because you forward fix it.</p>\n\n<p>If you really need to compare, then you can iterate each of the <code>@header</code> arrays and look for differences. But that's more a question of what you're actually trying to get - I would suggest looking at <a href=\"http://search.cpan.org/~zmij/Array-Utils-0.5/Utils.pm\" rel=\"nofollow noreferrer\"><code>Array::Utils</code></a> because that lets you trivially use <code>array_diff</code>, <code>intersect</code> and <code>unique</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1519744389, "creation_date": 1519744389, "answer_id": 49012003, "question_id": 49006763, "link": "https://stackoverflow.com/questions/49006763/validate-header-of-file-in-linux/49012003#49012003", "title": "Validate header of file in linux", "body": "<p>this may come in handy</p>\n\n<pre><code>$ diff -y --suppress-common-lines  &lt;(tr '|' '\\n' &lt;file1) &lt;(tr '|' '\\n' &lt;file2)\n</code></pre>\n\n<p>used your first file as is for file1 and used this</p>\n\n<pre><code>$ sed 's/2/8/;s/Export/Import/' file1 &gt; file2\n</code></pre>\n\n<p>to create the second file.  Running the script gives</p>\n\n<pre><code>ProfitCentre2                                                 | ProfitCentre8\nExportDuty                                                    | ImportDuty\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 9153621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16524bc3fd6f15b17877f5d04a326dc7?s=128&d=identicon&r=PG&f=1", "display_name": "as7951", "link": "https://stackoverflow.com/users/9153621/as7951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519744389, "creation_date": 1519728306, "question_id": 49006763, "link": "https://stackoverflow.com/questions/49006763/validate-header-of-file-in-linux", "title": "Validate header of file in linux", "body": "<p>I am using below script to validate header of file. For which i have created one file which is having only header and comparing it with another file which is having data for column along with the header.</p>\n\n<pre><code>awk -F\"|\" 'FNR==NR{hn=split($0,header); next}\n     FNR==1 {n=split($0,fh)\n            for(i=0;i&lt;=hn; i++)\n                if (fh[i]!=header[i]) {\n                   printf \"%s:order of %s is not correct\\n\",FILENAME, header[i]\n                 next}\n            if (hn==n)\n                print FILENAME, \"has expected order of fields\"\n        else\n                print FILENAME, \"has extra fields\"\nnext\n                }' key /Scripts/gst/Kenan_Test_Scenarios1.txt\n</code></pre>\n\n<p>Sample file header(Key)\n<code>SourceIdentifier|SourceFileName|GLAccountCode|Division|SubDivision|ProfitCentre1|ProfitCentre2|PlantCode|ReturnPeriod|SupplierGSTIN|DocumentType|SupplyType|DocumentNumber|DocumentDate|OriginalDocumentNumber|OriginalDocumentDate|CRDRPreGST|LineNumber|CustomerGSTIN|UINorComposition|OriginalCustomerGSTIN|CustomerName|CustomerCode|BillToState|ShipToState|POS|PortCode|ShippingBillNumber|ShippingBillDate|FOB|ExportDuty|HSNorSAC|ProductCode|ProductDescription|CategoryOfProduct|UnitOfMeasurement|Quantity|TaxableValue|IntegratedTaxRate|IntegratedTaxAmount|CentralTaxRate|CentralTaxAmount|StateUTTaxRate|StateUTTaxAmount|CessRateAdvalorem|CessAmountAdvalorem|CessRateSpecific|CessAmountSpecific|InvoiceValue|ReverseChargeFlag|TCSFlag|eComGSTIN|ITCFlag|ReasonForCreditDebitNote|AccountingVoucherNumber|AccountingVoucherDate|Userdefinedfield1|Userdefinedfield2|Userdefinedfield3</code></p>\n\n<p>File 2 header along with data(Kenan_Test_Scenarios1.txt)</p>\n\n<pre><code>SourceIdentifier|SourceFileName|GLAccountCode|Division|SubDivision|ProfitCentre1|ProfitCentre2|PlantCode|ReturnPeriod|SupplierGSTIN|DocumentType|SupplyType|DocumentNumber|DocumentDate|OriginalDocumentNumber|OriginalDocumentDate|CRDRPreGST|LineNumber|CustomerGSTIN|UINorComposition|OriginalCustomerGSTIN|CustomerName|CustomerCode|BillToState|ShipToState|POS|PortCode|ShippingBillNumber|ShippingBillDate|FOB|ExportDuty|HSNorSAC|ProductCode|ProductDescription|CategoryOfProduct|UnitOfMeasurement|Quantity|TaxableValue|IntegratedTaxRate|IntegratedTaxAmount|CentralTaxRate|CentralTaxAmount|StateUTTaxRate|StateUTTaxAmount|CessRateAdvalorem|CessAmountAdvalorem|CessRateSpecific|CessAmountSpecific|InvoiceValue|ReverseChargeFlag|TCSFlag|eComGSTIN|ITCFlag|ReasonForCreditDebitNote|AccountingVoucherNumber|AccountingVoucherDate|Userdefinedfield1|Userdefinedfield2|Userdefinedfield3\nKEN|TEST1|||Tela|Outw|ANP|POST|1017|36AAA|NV|TX|4841446542|2017-12-12||2035-06-11|Y|1|36AAACB89|||||||36||||||94||Telecomm Servi||||1557.20|0.00|10.00|9.00|140.15|9.00|140.15|||||18.50||||||||B2B INV||\n</code></pre>\n\n<p>Getting below output and which is not correct though header in both files are same.</p>\n\n<pre><code> is not correctnan_Test_Scenarios1.txt:order of Userdefinedfield3\n</code></pre>\n\n<p>Could you please help me to rectify the code and also need to capture if multiple header names has msimatch</p>\n"}, {"tags": ["bash", "shell", "perl", "unix", "perl-module"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1519732277, "post_id": 49006382, "comment_id": 85020471, "body": "In perl null values referenced as <code>undef</code>. To check for null: <code>if (defined($text1)) { ... }</code>"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1519732383, "post_id": 49006382, "comment_id": 85020529, "body": "@wolfrevokcat i have edited the question, i have tried the same approach and i am not able to do it."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1519736817, "post_id": 49006382, "comment_id": 85023176, "body": "Can&#39;t you just change <code>null</code> values to empty strings? <code>$text1 = $text1 eq &#39;&#39; || $text1 eq &#39;null&#39; ? &#39;&#39; : $text1</code>"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1519798046, "post_id": 49006382, "comment_id": 85050796, "body": "If u place null value ie ..&#39;&#39; that is not going to work on the write_rich_string(). The format cannot be applied to a null vaiue."}], "answers": [{"comments": [{"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1519798491, "post_id": 49008382, "comment_id": 85050949, "body": "since u are undef value with &quot;NULL&quot; the String &quot;NULL&quot; will get printed on the excel. I dont want that null to be printed on the excel. Thank you."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1519811724, "post_id": 49008382, "comment_id": 85057739, "body": "Hello @VimalBhaskar, I have added one more line under this command:  <code># Or simply empty string # defined or $_ = &quot;&quot; for @text;</code>  This does exactly the same but instead of <code>NULL</code> it prints an empty string with no white space. You can replace it with <code>defined or $_ = &quot; &quot; for @text;</code>.  It was just a sample of code, I do not know what you want to do in case you do have a <code>NULL</code> value you have not provide us this part of information.  Provide us an output in case you do have a <code>NULL</code> e.g. output: <code>Text1 Text2</code> etc...  Looking forward to your update."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1519836673, "post_id": 49008382, "comment_id": 85074090, "body": "Negative voting, what for? Did someone tried it and did not work the sample of code for them? Is there any logic of voting on this site or randomly people vote negatively?"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1519900245, "post_id": 49008382, "comment_id": 85099601, "body": "I didnt negative vote @Thanos. And looks like $_ = &quot;&quot; for text will not be placing the format. Anyways i am upvoting for the effort u took. Thank you. I anyways solved the issue."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1519904003, "post_id": 49008382, "comment_id": 85101701, "body": "Hello @VimalBhaskar, I did not thought that you down vote but I am wondering why someone would? The proposed solution works and resolves the problem, maybe not the way that you want but it tackles the issue. Can you also provide us the solution for future reference that someone might have the same problem as you had?"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1527160856, "post_id": 49008382, "comment_id": 88028037, "body": "I up voted for u thanos :), since u got a downvote(I never downvoted u :) ).  and by the way i used &#39; &#39;to  process. Please note this is not null, but a blank space inbetween the qoutes."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1527250066, "post_id": 49008382, "comment_id": 88069272, "body": "@VimalBhaskar, thanks but if you see my answer also included <code># Or simply white space # defined or $_ = &quot; &quot; for @text;</code> which will match your problem."}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1527489435, "post_id": 49008382, "comment_id": 88131326, "body": "Didn&#39;t see that. Thank you. :)"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1527506936, "post_id": 49008382, "comment_id": 88140814, "body": "Make sure u go &#39; &#39; instead of &quot; &quot;. Thats the only difference."}], "tags": [], "owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "is_accepted": true, "score": 0, "last_activity_date": 1519904100, "last_edit_date": 1519904100, "creation_date": 1519733356, "answer_id": 49008382, "question_id": 49006382, "link": "https://stackoverflow.com/questions/49006382/write-rich-string-with-dynamic-values-perl/49008382#49008382", "title": "write_rich_string with dynamic values (Perl)", "body": "<p>On top of my mind you can have an array with the string (text) that you want to enter in the spreadsheet. Search the array for <code>undef</code> elements and change them to <code>NULL</code> strings.</p>\n\n<p>Sample of working code based on the code that you provide us.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n\n# Create a new Excel workbook\nmy $workbook = Excel::Writer::XLSX-&gt;new( 'perl.xlsx' );\n\n# Add a worksheet\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n#  Add and define a format\nmy $format1 = $workbook-&gt;add_format();\n$format1-&gt;set_bold();\n$format1-&gt;set_color( 'red' );\n$format1-&gt;set_align( 'center' );\n\n#  Add and define a format\nmy $format2 = $workbook-&gt;add_format();\n$format2-&gt;set_bold();\n$format2-&gt;set_color( 'blue' );\n$format2-&gt;set_align( 'center' );\n\n#  Add and define a format\nmy $format3 = $workbook-&gt;add_format();\n$format3-&gt;set_bold();\n$format3-&gt;set_color( 'orange' );\n$format3-&gt;set_align( 'center' );\n\n# Search array and replace undef element(s)\nmy @text = ('string1', undef, 'string3');\ndefined or $_ = \"NULL\" for @text;\n# Or simply empty string\n# defined or $_ = \"\" for @text;\n# Or simply white space\n# defined or $_ = \" \" for @text;\n\n# Write some strings with multiple formats.\nmy ($row, $col) = 0;\n$worksheet-&gt;write_rich_string( $row, $col,\n                   $format1, $text[0],\n                   $format2, $text[1],\n                   $format3, $text[2] );\n</code></pre>\n\n<p>Does this work for you?</p>\n\n<p>Looking forward to your reply, BR.</p>\n"}], "owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 49008382, "answer_count": 1, "score": 0, "last_activity_date": 1519904100, "creation_date": 1519727153, "last_edit_date": 1519732722, "question_id": 49006382, "link": "https://stackoverflow.com/questions/49006382/write-rich-string-with-dynamic-values-perl", "title": "write_rich_string with dynamic values (Perl)", "body": "<p>I am pretty much new to perl and i am put into a new perl project . Me being a C developer had a few hiccups initially, but somehow managed to fix the code expect for the below logic. </p>\n\n<p>I am using write_rich_string in order to do different formatting within the same cell. Here is the snippet of the code where i am getting the error. </p>\n\n<pre><code>$worksheet-&gt;write_rich_string(0,0,$format1,$text1,$format2,$text2,$wrap);\n</code></pre>\n\n<p><strong>the code is working great until one of the text1 or text2 comes as null. Is there any way i can handle the null inside the write_rich_string()?</strong> </p>\n\n<p>Please note i have 7 texts with its corresponding formats to be inserted. I have  just shown 2 texts. </p>\n\n<p>Request your assistance guys. Please help. </p>\n\n<p><strong>Update 2</strong> : I also tried the below approach such that i can concatenate the Worksheet format(Red colour font cell) with the string in a variable and put it inside the write_rich_string() function . But that gives the below message and the excel row has the below message instead.</p>\n\n<pre><code>if ($mdr_count == 1) { $var.=\"$lav_cell,$mrd\"; }\nif ($lwd_count == 1) { $var.=\"$red_cell,$lwd\"; }\nprint \"The value is ${var}\";\n\n$worksheet-&gt;write_rich_string($row,$pos,$var);\n</code></pre>\n\n<h1>Output :</h1>\n\n<pre><code>**Excel::Writer::XLSX::Format=HASH(0x1427aac)**,Provide Missing Required **DataExcel::Writer::XLSX::Format=HASH(0x1426e7c)**,Loan is late by more than 30 days\n</code></pre>\n\n<p>It just converted the format into a string and pasted that in the excel row. </p>\n"}, {"tags": ["mysql", "sql", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519741049, "post_id": 49006002, "comment_id": 85026053, "body": "The number of rows returned from <i>which</i> query? It looks like you\u2019re probably running several for each input. What have you tried so far? I don\u2019t see any code that indicates an attempt at doing anything you\u2019ve asked for help with."}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519741618, "post_id": 49006002, "comment_id": 85026474, "body": "Sorry, I missed out the line. I have edited the post. The rows from the select ano query"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519741898, "post_id": 49006002, "comment_id": 85026672, "body": "What is the <code>AS $b</code> for? Normally you\u2019d write <code>SELECT COUNT(*) ...</code> if you wanted to know the number of matching rows."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519742053, "post_id": 49006002, "comment_id": 85026783, "body": "Also, <code>stdin</code> is not one of the standard I/O handles. You probably meant <code>STDIN</code>."}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519742262, "post_id": 49006002, "comment_id": 85026903, "body": "In an attempt to store the counted rows in a variable I used AS $b."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519742578, "post_id": 49006002, "comment_id": 85027150, "body": "Don\u2019t do that. It seems like you might have a misunderstanding about the interaction between Perl and a database."}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519742915, "post_id": 49006002, "comment_id": 85027352, "body": "Is there any other way I can store the counted rows?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519742991, "post_id": 49006002, "comment_id": 85027397, "body": "Did you not read what I said a few comments up?"}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1519743078, "post_id": 49006002, "comment_id": 85027454, "body": "I will try that method"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519726771, "post_id": 49006187, "comment_id": 85016917, "body": "I did try using that method. But I couldn&#39;t figure out a way to store it in a variable"}, {"owner": {"reputation": 2342, "user_id": 5871602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rx2Kt.png?s=128&g=1", "display_name": "Daniel E.", "link": "https://stackoverflow.com/users/5871602/daniel-e"}, "reply_to_user": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519726876, "post_id": 49006187, "comment_id": 85016994, "body": "Do you mean an array  or do you want to display it like &quot;rows matching input &lt;$num&gt;&quot; ?"}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519727855, "post_id": 49006187, "comment_id": 85017665, "body": "No. Like an array. I need to use that count value for further codes"}, {"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519736170, "post_id": 49006187, "comment_id": 85022755, "body": "The variable did get printed, but how do I get a sum of the total rows? It did gives it as  1 row returned 1 row returned"}, {"owner": {"reputation": 2342, "user_id": 5871602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rx2Kt.png?s=128&g=1", "display_name": "Daniel E.", "link": "https://stackoverflow.com/users/5871602/daniel-e"}, "reply_to_user": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519736513, "post_id": 49006187, "comment_id": 85022975, "body": "Will you add an other question after every edit ? -_-"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1519755787, "post_id": 49006187, "comment_id": 85035743, "body": "<code>rows</code> should not be used here. See <a href=\"https://metacpan.org/pod/DBI#rows\" rel=\"nofollow noreferrer\">perldoc DBI</a>. Too long to explain in a comment."}], "tags": [], "owner": {"reputation": 2342, "user_id": 5871602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rx2Kt.png?s=128&g=1", "display_name": "Daniel E.", "link": "https://stackoverflow.com/users/5871602/daniel-e"}, "is_accepted": false, "score": -2, "last_activity_date": 1519759074, "last_edit_date": 1519759074, "creation_date": 1519726549, "answer_id": 49006187, "question_id": 49006002, "link": "https://stackoverflow.com/questions/49006002/how-to-store-the-number-of-rows-returned-using-select-in-a-variable/49006187#49006187", "title": "How to store the number of rows returned using SELECT in a variable", "body": "<p>The DBD::mysql driver has a the rows() method that can return the count of the results:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare( ... );\n$sth-&gt;execute($num); \n$rowsCount = $sth-&gt;rows;\n</code></pre>\n\n<p>if you want to store it, you can do this :</p>\n\n<pre><code>$rowsCount[$num] = $sth-&gt;rows;\n</code></pre>\n\n<p>If you want to sum it : </p>\n\n<p><code>my $rowsCount = 0</code>  &lt;-- before the  <code>for my $num(@num)</code></p>\n\n<p>then you can write :</p>\n\n<pre><code>$rowsCount += $sth-&gt;rows;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1519748825, "creation_date": 1519748825, "answer_id": 49013432, "question_id": 49006002, "link": "https://stackoverflow.com/questions/49006002/how-to-store-the-number-of-rows-returned-using-select-in-a-variable/49013432#49013432", "title": "How to store the number of rows returned using SELECT in a variable", "body": "<pre><code>use strict;\nuse warnings;\nuse 5.012;\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:SQLite:dbname=:memory:', '', '', {\n    RaiseError =&gt; 1,\n    PrintError =&gt; 0,\n}) or die $DBI::errstr;\n\n$dbh-&gt;do(q{\n    create table mody (\n        ano int\n    )\n});\n\nmy $sth = $dbh-&gt;prepare(q{insert into mody (ano) values (?)});\n\nfor (1 .. 100) {\n    $sth-&gt;execute(int(rand(10)));\n}\n\nchomp(my $input = &lt;STDIN&gt;);\nmy @numbers = split(//, $input);\n\n$sth = $dbh-&gt;prepare(q{select count(*) from mody where ano = ?});\n\nfor my $num (@numbers) {\n    $sth-&gt;execute($num);\n    my $count = $sth-&gt;fetchrow_array;\n\n    say \"$num: $count\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1519759074, "creation_date": 1519725950, "last_edit_date": 1519741552, "question_id": 49006002, "link": "https://stackoverflow.com/questions/49006002/how-to-store-the-number-of-rows-returned-using-select-in-a-variable", "title": "How to store the number of rows returned using SELECT in a variable", "body": "<p>I want to store the number of rows returned from the SELECT statement in a variable, as i require the count for further calculations.\nI tried using the COUNT function, but I don't know how to store it in a variable. Please help me out. Any alternate method would do too.\nThanks in advance.</p>\n\n<pre><code> #!C:/Perl64/bin/Perl.exe\n\n use warnings;\n use strict;\n use autodie;\n use Data::Dumper;\n use DBI;\n\n my $db=\"hnf1a\";\n my $user=\"root\";\n my $password=\"\";\n my $host=\"localhost\";\n my $dbh = DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password);\n my $sth=$dbh-&gt;prepare('SELECT COUNT ano AS $b FROM mody where ano = ?');\n my $input = &lt;stdin&gt;;\n my @num = split //, $input;\n\n for my $num(@num){     \n say \"rows matching input &lt;$num&gt;:\";     \n $sth-&gt;execute($num);   \n while(my@data = $sth-&gt;fetchrow_array){     \n say\"\\t@data\";  \n }}\n</code></pre>\n\n<p>So in my code i need to find a way to store the number of rows returned.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1519725026, "creation_date": 1519725026, "answer_id": 49005694, "question_id": 49005020, "link": "https://stackoverflow.com/questions/49005020/howto-remove-duplicates-in-perl-array-of-hashes-based-on-one-unique-key-and-conc/49005694#49005694", "title": "Howto remove duplicates in perl array of hashes based on one unique key and concatenate others", "body": "<p>The idea is to use a hash to keep track of which ticket_ids go with which ipns.\nThe keys of the subhash keyed off of the ticket_id will have all of the matching ipns.  Later we can merge them together to produce a new array of hash references.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\nmy @parts = (\n    { ipn =&gt; \"12345\", ticket_id =&gt; \"10\", },\n    { ipn =&gt; \"12346\", ticket_id =&gt; \"11\", },\n    { ipn =&gt; \"12345\", ticket_id =&gt; \"12\", },\n);\n\nmy %ipns;\nfor my $part ( @parts ) {\n    # Keep track of which ticket_ids go with each ipn\n    # 12345 -&gt; 10\n    #       -&gt; 12\n    # 12346 -&gt; 11\n    $ipns{ $part-&gt;{ipn} }-&gt;{ $part-&gt;{ticket_id} }++;\n}\n\nmy @grouped_parts;\nfor my $ipn ( sort { $a &lt;=&gt; $b } keys %ipns ) {\n    my @tickets = sort { $a &lt;=&gt; $b } keys %{ $ipns{ $ipn } };\n    # Merge the ticket ids with each ipn\n    push @grouped_parts, {\n        ipn =&gt; $ipn,\n        ticket_ids =&gt; join(', ', sort { $a &lt;=&gt; $b } @tickets)\n    }; \n}\n\nprint Dumper(@grouped_parts);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>$VAR1 = {\n          'ipn' =&gt; '12345',\n          'ticket_ids' =&gt; '10, 12'\n        };\n$VAR2 = {\n          'ipn' =&gt; '12346',\n          'ticket_ids' =&gt; '11'\n        };\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9417611, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carl van Litsenborgh", "link": "https://stackoverflow.com/users/9417611/carl-van-litsenborgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 49005694, "answer_count": 1, "score": -2, "last_activity_date": 1519725331, "creation_date": 1519722942, "question_id": 49005020, "link": "https://stackoverflow.com/questions/49005020/howto-remove-duplicates-in-perl-array-of-hashes-based-on-one-unique-key-and-conc", "title": "Howto remove duplicates in perl array of hashes based on one unique key and concatenate others", "body": "<p>Can someone help me with a Perl code snippet to convert from:</p>\n\n<p>Note: ipn must be the unique key</p>\n\n<pre><code>@part = (\n{\n   ipn       =&gt; \"12345\",\n   ticket_id =&gt; \"10\",\n},\n{\n   ipn       =&gt; \"12346\",\n   ticket_id =&gt; \"11\",\n},\n{\n   ipn  =&gt; \"12345\",\n   ticket_id =&gt; \"12\",\n},\n);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>@part_new = (\n{\n   ipn       =&gt; \"12345\",\n   ticket_id =&gt; \"10, 12\",\n},\n{\n   ipn       =&gt; \"12346\",\n   ticket_id =&gt; \"11\",\n},\n);\n</code></pre>\n\n<p>Any other alternative solution to achieve something similar is also very welcome. The end result is to know which \"ticket numbers\" are associated with each unique part number (ipn).</p>\n\n<p>Thank you.</p>\n\n<p>Carl</p>\n"}, {"tags": ["multithreading", "perl", "loops"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519719700, "post_id": 49003366, "comment_id": 85012554, "body": "Exceptions can be caught using <code>eval BLOCK</code>."}, {"owner": {"reputation": 33, "user_id": 4745498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c75928675731c96052c0232c83697d0?s=128&d=identicon&r=PG", "display_name": "Firsim", "link": "https://stackoverflow.com/users/4745498/firsim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519720386, "post_id": 49003366, "comment_id": 85012942, "body": "ikegami, Is it possible to set an example?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1519724812, "post_id": 49003366, "comment_id": 85015690, "body": "<a href=\"http://www.modernperlbooks.com/books/modern_perl_2016/08-perl-style-efficiency.html#Q2F0Y2hpbmdFeGNlcHRpb25z\" rel=\"nofollow noreferrer\">&quot;Catching Exceptions&quot; in <i>Modern Perl</i></a>, <a href=\"http://p3rl.org/eval\" rel=\"nofollow noreferrer\">perldoc -f eval</a>"}, {"owner": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "edited": false, "score": 0, "creation_date": 1519775473, "post_id": 49003366, "comment_id": 85044816, "body": "In you sample code, I don&#39;t see anything that would cause a thread to &quot;die or pause&quot; and don&#39;t see anything related streams.  I may be wrong, but it kind of feels like this might be an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>.  You&#39;ve highlighted your question about restarting streams, but the question title is about threads.  That sounds like you have a problem with interacting with a stream (Y), but you&#39;re asking for help about threads (X)."}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1519864947, "post_id": 49003366, "comment_id": 85087208, "body": "If a thread does die, there&#39;s probably something wrong with the data or the logic, so simply repeating would create a never-ending loop of error messages.  If there&#39;s really some kind of other issue, like service unavailable, then you need to check if it&#39;s available and catch that exception and push the uncompleted task to the end of your queue (or block and wait for the resources to be available so the task can finish)."}, {"owner": {"reputation": 33, "user_id": 4745498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c75928675731c96052c0232c83697d0?s=128&d=identicon&r=PG", "display_name": "Firsim", "link": "https://stackoverflow.com/users/4745498/firsim"}, "edited": false, "score": 0, "creation_date": 1519980360, "post_id": 49003366, "comment_id": 85136069, "body": "In the streams, the JSON data is disassembled. And sometimes the web server sends a &quot;500&quot; error, for example. And because of this, the JSON kills the stream."}, {"owner": {"reputation": 33, "user_id": 4745498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c75928675731c96052c0232c83697d0?s=128&d=identicon&r=PG", "display_name": "Firsim", "link": "https://stackoverflow.com/users/4745498/firsim"}, "edited": false, "score": 0, "creation_date": 1519980486, "post_id": 49003366, "comment_id": 85136128, "body": "I test used &quot;Try::Tiny&quot; and &quot;try - catch&quot; and operator &quot;next&quot; in the function JSON parsing. It seems to work so far .."}], "owner": {"reputation": 33, "user_id": 4745498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c75928675731c96052c0232c83697d0?s=128&d=identicon&r=PG", "display_name": "Firsim", "link": "https://stackoverflow.com/users/4745498/firsim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519716679, "creation_date": 1519716679, "question_id": 49003366, "link": "https://stackoverflow.com/questions/49003366/perl-threads-auto-restart-in-case-of-error-or-out", "title": "Perl threads: auto restart in case of error or out", "body": "<p>There is an infinite loop, about as below. And the function \"new_task\" can give an error because of which the thread will die or pause (I do not know).\n<strong>Is it possible to automatically restart the stream in this case?</strong>\nI did not find an answer on the Internet, or I did not understand. Thank you.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse threads;\n\nsub new_task {\n    print \"Hello! I may be die..\";\n}\n\nsub threaded_task {\n    threads-&gt;create(\\&amp;new_task,);\n}\n\nwhile (1) {\n    threaded_task();\n    sleep 1;\n}\n</code></pre>\n"}, {"tags": ["perl", "authentication", "ssh", "automation", "passwords"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519710192, "post_id": 49001550, "comment_id": 85008508, "body": "What have you tried so far? Please edit your question with more details."}, {"owner": {"reputation": 329, "user_id": 8164137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d889b9c8170ecb442a5c9ffbb8eb3732?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/8164137/pooja"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519712987, "post_id": 49001550, "comment_id": 85009491, "body": "@AbhiNickz Have edited the question with perl module tried, but not sure if that&#39;s the correct way. Could you please help ?"}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519714361, "post_id": 49001550, "comment_id": 85010035, "body": "Code you have entered here has no syntax error, it works and ssh to host successfully, So check your code, You have syntax error on your original code."}, {"owner": {"reputation": 329, "user_id": 8164137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d889b9c8170ecb442a5c9ffbb8eb3732?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/8164137/pooja"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519720241, "post_id": 49001550, "comment_id": 85012855, "body": "Have un-commented line &quot;Enter your EMERG one-time password =&gt; &#39;123456&#39;,&quot;  in the shared code to enter 2nd password. please check now."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519721073, "post_id": 49001550, "comment_id": 85013362, "body": "use quote around <code>&#39;Enter your EMERG one-time password&#39; =&gt; &#39;123456&#39;,</code> like this and check if this removes your syntax error."}, {"owner": {"reputation": 329, "user_id": 8164137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d889b9c8170ecb442a5c9ffbb8eb3732?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/8164137/pooja"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1519722125, "post_id": 49001550, "comment_id": 85014007, "body": "Unfortunately, quote ddnt helped. Error seen now is:    IllegalArgument attribute &#39;Enter your EMERG one-time password&#39; is not a valid constructor argument. at test_pswrd.pl line 6."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 329, "user_id": 8164137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d889b9c8170ecb442a5c9ffbb8eb3732?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/8164137/pooja"}, "edited": false, "score": 0, "creation_date": 1519722201, "post_id": 49001550, "comment_id": 85014060, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/165878/discussion-between-abhinickz-and-pooja\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1519815338, "post_id": 49001550, "comment_id": 85060009, "body": "Hello @Pooja, SSH-keys could save you of a lot of trouble in connecting. A solution like that would work for you or it is mandatory for you to connect through password?"}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1519865112, "post_id": 49001550, "comment_id": 85087240, "body": "I think that&#39;s what ssh keygen is for, with keys in your ~/.ssh dir.  Saving passwords in a script or otherwise may violate your company&#39;s security guidelines and is poor practice."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 0, "last_activity_date": 1519890574, "creation_date": 1519890574, "answer_id": 49044931, "question_id": 49001550, "link": "https://stackoverflow.com/questions/49001550/how-to-automate-ssh-login-where-2-passwords-is-required-for-user-with-perl-scrip/49044931#49044931", "title": "how to automate ssh login where 2 passwords is required for user with perl script", "body": "<p>AFAIK, no SSH Perl module supports logging with more than one password directly.</p>\n\n<p><a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> allows one to use a custom <a href=\"https://metacpan.org/pod/Net::OpenSSH#login_handler-=%3E-%5C&amp;custom_login_handler\" rel=\"nofollow noreferrer\">login handler</a>, but you have to write the code to read the remote prompts and send the passwords at the right time.</p>\n\n<p>Another option is to use <a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\">Expect</a>.</p>\n\n<p>Which option is best depends on what you plan to do afterwards, once the connection is established. For complex SSH interactions, <code>Net::OpenSSH</code> is a better option. On the other hand, if you just want to send a single command to the remote side, probably writing the custom <code>login_handler</code> would not worth the trouble, so my advice would be to use <code>Expect</code> in that case.</p>\n"}], "owner": {"reputation": 329, "user_id": 8164137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d889b9c8170ecb442a5c9ffbb8eb3732?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/8164137/pooja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1519890574, "creation_date": 1519708301, "last_edit_date": 1519795247, "question_id": 49001550, "link": "https://stackoverflow.com/questions/49001550/how-to-automate-ssh-login-where-2-passwords-is-required-for-user-with-perl-scrip", "title": "how to automate ssh login where 2 passwords is required for user with perl script", "body": "<p>I need to automate a test case where user,on ssh login, is prompted for 2nd password if user is authenticated successfully with 1st password (which is keyboard interactive).</p>\n\n<p>How to automate this test case using perl ?  </p>\n\n<p>Have tried using perl SSH expect module but it only works for 1st password :  </p>\n\n<p>Without Enter your EMERG one-time password line, script works for single password. But if I include 2nd password ie. Enter your EMERG one-time password , following error is seen on compilation : </p>\n\n<p>syntax error at test_pswrd.pl line 8, near \"time password\"\nGlobal symbol \"$ssh\" requires explicit package name at test_pswrd.pl line 13. Execution of test_pswrd.pl aborted due to compilation errors.</p>\n\n<pre><code>use Net::SSH::Expect;\nuse strict; \nuse warnings;\n\nmy $ssh = Net::SSH::Expect-&gt;new (host =&gt; \"1.1.1.1\",\npassword=&gt; 'testpwd',\nEnter your EMERG one-time password =&gt; '123456',\nuser =&gt; 'testuser',\nraw_pty =&gt; 1);\n\nmy $login_output = $ssh-&gt;login();\nprint $login_output;\n</code></pre>\n"}, {"tags": ["windows", "perl", "unicode", "cmd", "character-encoding"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1519678044, "post_id": 48996757, "comment_id": 84998956, "body": "Why do you need these escapes? Are you trying to create a specific output format? Depending on your goals, there may already be a module and we don&#39;t have to implement this by hand."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1519678272, "post_id": 48996757, "comment_id": 84999073, "body": "So to be clear, you want the string <code>&quot;\u03b1\u03c9&quot;</code> converted into the string consisting of 16 ASCII characters <code>&quot;\\x{03B1}\\x{03C9}&quot;</code>? May I ask what you need this for? If you want a string in Perl&#39;s format, does <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> not work for you? But if it&#39;s not Perl, then I&#39;d suggest <i>not</i> to use <code>Data::Dumper</code> - using a module specific to the format you want to create would be much better."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1519678497, "post_id": 48996757, "comment_id": 84999186, "body": "I have simplified the example. I need this in order to send this to Windows CMD later."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519679806, "post_id": 48996757, "comment_id": 84999810, "body": "Could you show the code you are using to &quot;send this to Windows CMD&quot; and explain/show the expected behavior, and how it&#39;s currently failing?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519680151, "post_id": 48996757, "comment_id": 84999996, "body": "(BTW, in regards to my comment above, I should have written <code>&#39;\\x{03B1}\\x{03C9}&#39;</code> to stay in the correct Perl notation of single-quoted strings not interpolating escape sequences. That you used double quotes in your question is also confusing.)"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519682019, "post_id": 48996757, "comment_id": 85000884, "body": "@ikegami I&#39;m still a tiny bit doubtful, since under <code>utf8</code>, <code>&quot;\u03b1\u03c9&quot; eq &quot;\\x{03B1}\\x{03C9}&quot;</code>, so I wonder if there is more background to the question, e.g. I&#39;d be curious to know what went wrong when the OP tried <code>print &quot;\u03b1\u03c9&quot;;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519685519, "post_id": 48996757, "comment_id": 85002226, "body": "@haukex: That string is two characters long. Encoded as UTF-8 it happens to be two two-byte character encodings. There is no ASCII involved at all. To generate what I imagine you meant by <i>&quot;the string consisting of 16 ASCII characters&quot;</i> you would use single quotes: <code>&#39;\\x{03B1}\\x{03C9}&#39;</code>. I&#39;m sorry if this appear finicky, but many people are still confused by Unicode in Perl, and I feel that no amount of words can be too many."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519692060, "post_id": 48996757, "comment_id": 85004021, "body": "@Omar, Decode inputs, encode outputs. You&#39;d need to encode. To encode, you can use <a href=\"http://search.cpan.org/perldoc?Encode\" rel=\"nofollow noreferrer\"><code>encode</code></a>. But you have to use the encoding for system calls, not the encoding used by the console. There are two version of each Windows system calls that deals with text. The &quot;A&quot; version of the calls expect text to be encoded according to the Active Code Page (<code>&quot;cp&quot;.Win32::GetACP()</code>). The &quot;W&quot; version of the calls expect text to be encoded using UTF-16le. Only the latter gives access to the full range of Unicode chars."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519692069, "post_id": 48996757, "comment_id": 85004025, "body": "<code>mkdir</code> calls <code>CreateDirectoryA</code>, so it won&#39;t do the trick. But <a href=\"http://search.cpan.org/perldoc?Win32::Unicode::Dir\" rel=\"nofollow noreferrer\">Win32::Unicode::Dir</a>&#39;s <code>mkdirW</code> calls <code>CreateDircetoryW</code> (and handles the encoding for you). This is definitely the way to go to create directories."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519692078, "post_id": 48996757, "comment_id": 85004029, "body": "If you want to spawn an external program, I don&#39;t have a solution handy. Both <code>system</code> and Win32::Process use <code>CreateProcessA</code>, but you need access to <code>CreateProcessW</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519708162, "post_id": 48996757, "comment_id": 85007915, "body": "You&#39;ll probably have to use <a href=\"http://search.cpan.org/perldoc?Win32::API\" rel=\"nofollow noreferrer\">Win32::API</a> to expose <code>CreateProcessW</code>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1519724782, "post_id": 48996757, "comment_id": 85015666, "body": "cmd.exe is a Unicode application, so there should be no immediate problem there, at least not for the command line as long as cmd.exe is executed via <code>CreateProcessW</code> with the command line as a UTF-16 string. There could be subsequent issues related to how CMD uses its attached console&#39;s output codepage (i.e. <code>GetConsoleOutputCP</code>), basically as the process locale, whenever its internal commands read from and write to pipes or disk files. UTF-8 can be used via <code>chcp.com 65001</code>, but with care and only temporarily because the console itself (not CMD) has many bugs in how it handles UTF-8."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519760028, "post_id": 48996757, "comment_id": 85038062, "body": "@Borodin I completely agree, and I did correct myself in a later comment. It was just somewhat too late to edit the original comment..."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1519727018, "post_id": 49006144, "comment_id": 85017096, "body": "If &quot;\u03b1\u03c9.bat&quot; is a UTF-8 file, then it&#39;s the batch script itself that should call <code>chcp.com 65001</code>, and only temporarily to read in UTF-8 string literals from the .bat file. It needs to save the previous codepage and restore it as soon as possible because the console has many bugs associated with setting the input and output codepages to 65001."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1519727077, "post_id": 49006144, "comment_id": 85017135, "body": "For example, with codepage 65001, input read via <code>ReadFile</code> or <code>ReadConsoleA</code> will be limited to 7-bit ASCII; <code>WriteFile</code> and <code>WriteConsoleA</code> will report the wrong number of bytes written prior to Windows 8; and even <code>WriteConsoleW</code> will fail for non-ASCII text if a raster font is selected in the console."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1519758502, "post_id": 49006144, "comment_id": 85037269, "body": "I&#39;m getting <code>Stopping: &#39;install&#39; failed for &#39;Win32::Unicode&#39;.</code> when I try to install Win32::Unicode. I am using Windows 10 and Strawberry Perl v5.26.1.1"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1519816001, "post_id": 49006144, "comment_id": 85060432, "body": "I see some test failures, too. They are not relevant to the <code>systemW</code> subroutine. If you wish, you can skip/disable the tests and force an installation: <code>cpanm -nv Win32::Unicode</code>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1519726404, "creation_date": 1519726404, "answer_id": 49006144, "question_id": 48996757, "link": "https://stackoverflow.com/questions/48996757/how-to-call-cmd-with-utf8-arguments-from-perl/49006144#49006144", "title": "How to call CMD with utf8 arguments from perl?", "body": "<p>See <a href=\"http://p3rl.org/Win32::Unicode\" rel=\"nofollow noreferrer\">Win32::Unicode</a>.</p>\n\n<p>\u03b1\u03c9.bat</p>\n\n<pre><code>@echo hi\u03b1\u03c9\n</code></pre>\n\n<p>so48996757.pl</p>\n\n<pre><code>use utf8;\nuse Win32::Unicode::Process qw(systemW);\n\nsystem 'chcp 65001';\nsystemW '\u03b1\u03c9';\n</code></pre>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 49006144, "answer_count": 1, "score": 0, "last_activity_date": 1519726404, "creation_date": 1519677719, "last_edit_date": 1519698998, "question_id": 48996757, "link": "https://stackoverflow.com/questions/48996757/how-to-call-cmd-with-utf8-arguments-from-perl", "title": "How to call CMD with utf8 arguments from perl?", "body": "<p>How to call CMD with utf8 arguments from perl without messing the argument's characters?</p>\n\n<p>One of the things I've tried is to convert a string of unicode characters to its unicode character codes then use <code>system($cmd)</code>:</p>\n\n<pre><code>use utf8;\n\n`chcp 65001`;\nbinmode STDOUT, \":encoding(UTF-8)\";\n$string = \"\u03b1\u03c9\";\n$converted_string = convert_to_unicode_code($string);\n    # gets $converted_string = '\\x{03B1}\\x{03C9}'\n$cmd = 'program \"'.$converted_string.'\"';\n    # $cmd's value is: program \"\\x{03B1}\\x{03C9}\"\nsystem($cmd);\n\nsub convert_to_unicode_code {\n    my $input = shift;\n    $input =~ s/(.)/\"\\\\x{\" . (sprintf \"%04X\", ord $1) . \"}\"/eg;\n    return $input;\n}\n</code></pre>\n\n<p>Actually this solution doesn't work as expected and calls <code>program \"\\x{03B1}\\x{03C9}\"</code> instead of <code>program \"\u03b1\u03c9\"</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1519668558, "post_id": 48994547, "comment_id": 84994428, "body": "If you don&#39;t need it, delete it. If that breaks something find out why."}], "answers": [{"tags": [], "owner": {"reputation": 8396, "user_id": 7361479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/soT91.jpg?s=128&g=1", "display_name": "kshetline", "link": "https://stackoverflow.com/users/7361479/kshetline"}, "is_accepted": false, "score": 2, "last_activity_date": 1519668919, "creation_date": 1519668919, "answer_id": 48994651, "question_id": 48994547, "link": "https://stackoverflow.com/questions/48994547/why-do-you-need-to-this-line-of-code/48994651#48994651", "title": "Why do you need to this line of code?", "body": "<p>It's there so you can count the number of times the pattern is found in the word. It keeps track of where the pattern was previously found so that subsequent searches start further into the word and don't find occurrences of the pattern that have already been discovered.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1519676853, "last_edit_date": 1519676853, "creation_date": 1519671404, "answer_id": 48995243, "question_id": 48994547, "link": "https://stackoverflow.com/questions/48994547/why-do-you-need-to-this-line-of-code/48995243#48995243", "title": "Why do you need to this line of code?", "body": "<p>You really can't get around specifying both the string you want to find (<code>$search</code>), and the string in which to look (<code>$_</code>). So, at a minimum, you need</p>\n\n<pre><code>$pos = index($_, $search);\n</code></pre>\n\n<p>Why wasn't that used? Because that finds the first match, but the goal is to find all matches. <code>index</code> will start looking at the position given by the third parameter if give, allowing the loop to find every instance of <code>$search</code> in <code>$_</code>.</p>\n\n<p>Note that because <code>$pos++;</code> was used instead of <code>$pos += length($search);</code>, overlapping matches are possible. For example, if you were search for <code>abab</code> in <code>abababab</code>, your algorithm would find 3 matches instead of 2.</p>\n\n<hr>\n\n<p>Cleaned up code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nmy @words = qw( Chattahoochee committee bookkeeper millennium cappuccino Tattle Illiad Mississippi Tennessee );\n\nmy ($search) = @ARGV\n    or die(\"usage\\n\");\n\nfor my $word (@words) {\n    my $count = 0;\n    my $pos = 0;\n    while (1) {\n        $pos = index($word, $search, $pos);\n        last if $pos &lt; 0;\n\n        ++$count;\n        ++$pos;\n    }\n\n    say \"$_ contains $count instances of $search\";\n}\n</code></pre>\n\n<hr>\n\n<p>Using match operator instead of <code>index</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nmy @words = qw( Chattahoochee committee bookkeeper millennium cappuccino Tattle Illiad Mississippi Tennessee );\n\nmy ($search) = @ARGV\n    or die(\"usage\\n\");\n\nfor my $word (@words) {\n    my $count = 0;\n    ++$count while $word =~ /\\Q$search/g;\n    say \"$_ contains $count instances of $search\";\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9336343, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/01613fc3fe056209188d4ec4e966d06c?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/9336343/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1519676853, "creation_date": 1519668493, "last_edit_date": 1519671318, "question_id": 48994547, "link": "https://stackoverflow.com/questions/48994547/why-do-you-need-to-this-line-of-code", "title": "Why do you need to this line of code?", "body": "<p>Here is the code</p>\n\n<pre><code>#!/usr/bin/perl\nmy ($items,\n@aryitems,\n@aryitems2,\n$search,\n$size,\n$num);\n@aryitems2=('Chattahoochee','committee','bookkeeper'\n,'millennium','cappuccino','Tattle','Illiad','Mississippi',\n'Tennessee');\n$size=@aryitems2;\nprint \"The size of the array is $size\\n\";\nprint \"Enter the string to search:\";\nchomp ($search=&lt;STDIN&gt;);\nforeach (@aryitems2)\n{\n$num=0;\n$pos=0;\nprint \"The word is $_\\n\";\nif (/$search/i)\n{\n    print \"The pattern is '$search' and found in the word $_\\n\";\n    while ($pos&lt;(length $_) and $pos!=-1)\n    {\n        $pos=index ($_,$search,$pos);\n        if ($pos!=-1)\n        {\n        $pos++;\n        $num++;\n        }\n    }\n    print \"the number of times '$search' is found in this word is $num\\n\";\n    }\n    else\n    {\n    print \"the pattern is '$search' and is not found in $_\\n\";\n    }\n}\n</code></pre>\n\n<p>The part I don't get is</p>\n\n<pre><code>$pos=index ($_,$search,$pos);\n</code></pre>\n\n<p>What is the purpose of this code? How come it's not </p>\n\n<pre><code>$pos=index ($_,$pos);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$pos=index($search,$pos);\n</code></pre>\n\n<p>etc...</p>\n\n<p>Why do you need it?</p>\n"}, {"tags": ["perl", "awk", "bioinformatics", "genetics"], "comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1519667313, "post_id": 48993980, "comment_id": 84993694, "body": "What did you try? Essentially you need make hash table of the BioMart data, then do a substitution in &quot;string&quot; file of the hash keys with the hash values."}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1519668141, "creation_date": 1519668141, "answer_id": 48994457, "question_id": 48993980, "link": "https://stackoverflow.com/questions/48993980/how-do-you-loop-and-match-column-1-and-2-of-file1-with-cell-in-column1-of-file2/48994457#48994457", "title": "How do you loop and match column 1 and 2 of file1 with cell in column1 of file2 in order to replace them with the adjacent cell in column 2 of file 2?", "body": "<p>Sounds like all you need (assuming all values from String are present in BioMart like in your example) is:</p>\n\n<pre><code>awk '\nNR==FNR{ map[$1]=$2; next }\n{\n    for (i=1; i&lt;=2; i++) {\n        split($i,f,/[.]/)\n        $i = f[1] \".\" map[f[2]]\n    }\n    print\n}\n' BioMartFile StringFile\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9089333, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156846945529348/picture?type=large", "display_name": "Rodrigo Arenas", "link": "https://stackoverflow.com/users/9089333/rodrigo-arenas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519668141, "creation_date": 1519666296, "question_id": 48993980, "link": "https://stackoverflow.com/questions/48993980/how-do-you-loop-and-match-column-1-and-2-of-file1-with-cell-in-column1-of-file2", "title": "How do you loop and match column 1 and 2 of file1 with cell in column1 of file2 in order to replace them with the adjacent cell in column 2 of file 2?", "body": "<p>I am using String-db interactions for a project but I found out that the complete list of interactions uses their ensembl protein IDs. I would like to replace those ensembl protein ID names with their HGNC approved gene symbols. Using BioMart, I downloaded a table with the ensembl protein IDs and their respective gene name. So I need to match all the ensembl IDs found in the string file (both first and second column have ensembl IDs) with their ensembl ID in my biomart file and then replace each ID with their gene symbol found, also, in the biomart file. I have the extra complication that I have an \"9606.\" before each ensembl ID in the string file and not in the BioMart file. This number denotes that it is a human ensembl ID and still needs to be there in the new tbl String file.</p>\n\n<p>Note: These files are big!</p>\n\n<p>String file example (first 10 lines):</p>\n\n<pre><code>9606.ENSP00000000233    9606.ENSP00000263025    ptmod       f   f   150\n9606.ENSP00000000233    9606.ENSP00000265709    reaction    f   f   908\n9606.ENSP00000000233    9606.ENSP00000265709    catalysis   t   t   908\n9606.ENSP00000000233    9606.ENSP00000263025    inhibition  inhibition  t   t   154\n9606.ENSP00000000233    9606.ENSP00000265709    binding     f   t   908\n9606.ENSP00000000233    9606.ENSP00000265709    catalysis   t   f   908\n9606.ENSP00000000233    9606.ENSP00000263025    inhibition  inhibition  f   t   150\n9606.ENSP00000000233    9606.ENSP00000263025    inhibition  inhibition  f   f   150\n9606.ENSP00000000233    9606.ENSP00000265709    binding     f   f   908\n9606.ENSP00000000233    9606.ENSP00000263025    catalysis   t   t   156\n</code></pre>\n\n<p>BioMart file (example made to work with above file):</p>\n\n<pre><code>Ensembl_Protein_ID  Gene_Symbol\nENSP00000265709 ANK1\nENSP00000000233 ARF5\nENSP00000263025 MAPK3\nENSP00000388118 NCSTN\n</code></pre>\n\n<p>Output file:</p>\n\n<pre><code>9606.ARF5   9606.MAPK3  ptmod       f   f   150\n9606.ARF5   9606.ANK1   reaction    f   f   908\n9606.ARF5   9606.ANK1   catalysis   t   t   908\n9606.ARF5   9606.MAPK3  inhibition  inhibition  t   t   154\n9606.ARF5   9606.ANK1   binding     f   t   908\n9606.ARF5   9606.ANK1   catalysis   t   f   908\n9606.ARF5   9606.MAPK3  inhibition  inhibition  f   t   150\n9606.ARF5   9606.MAPK3  inhibition  inhibition  f   f   150\n9606.ARF5   9606.ANK1   binding     f   f   908\n9606.ARF5   9606.MAPK3  catalysis   t   t   156\n</code></pre>\n\n<p>I have no idea how to do this. I have tried using awk and perl but nothing works. I'm still a noob at the bioinformatics stuff. If anyone out there is willing to help this poor fellow, I would greatly appreciate it.</p>\n"}, {"tags": ["sql-server", "perl", "reorderlist"], "answers": [{"tags": [], "owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "is_accepted": false, "score": 0, "last_activity_date": 1519679395, "creation_date": 1519679395, "answer_id": 48997144, "question_id": 48992770, "link": "https://stackoverflow.com/questions/48992770/perl-sql-server-query-re-ordered/48997144#48997144", "title": "perl/sql server query &quot;re-ordered&quot;", "body": "<p>I'm sure someone could give you a cool nested SQL command to do this, but I was a Perl programming before a SQL programmer.  So, if you don't have to worry about SQL performance, you should query the DB for all the different Job Titles (unless you already know them), and then loop through the Titles (<code>foreach my $title (@jobTitles)</code>), printing out the title and then all the records that match that title (<code>WHERE JobTitle=$title</code> kind of thing).</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1519830489, "creation_date": 1519830489, "answer_id": 49032704, "question_id": 48992770, "link": "https://stackoverflow.com/questions/48992770/perl-sql-server-query-re-ordered/49032704#49032704", "title": "perl/sql server query &quot;re-ordered&quot;", "body": "<p>Since the query is returning the data sorted by job title, all you have to do is keep track of what the previous job title was and when it is different to the current one, print out a new job title header like this code snippet demonstrates.</p>\n\n<pre><code>my $last_job_title;\nforeach my $data (@$all_cust) {\n    if($last_job_title ne $data-&gt;{JobTitle}) {\n        $last_job_title = $data-&gt;{JobTitle};\n        print $data-&gt;{JobTitle},\"\\n\";\n    }\n    print $data-&gt;{BusinessEntityID}.\" \".$data-&gt;{FirstName}.\" \".$data-&gt;{LastName}.\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49032704, "answer_count": 2, "score": -2, "last_activity_date": 1519830489, "creation_date": 1519662141, "last_edit_date": 1519663172, "question_id": 48992770, "link": "https://stackoverflow.com/questions/48992770/perl-sql-server-query-re-ordered", "title": "perl/sql server query &quot;re-ordered&quot;", "body": "<p>Sorry for asking this question I am sure this was already answered somewhere else but I don't even know what keywords or how to explain it properly...\nSo... I have this perl code that connects to sql server..</p>\n\n<pre><code>my $user = '';\nmy $pass = '.';\nmy $connection = \"dbi:Sybase:server=;database=Adventure\";\nmy $dbh_SQL = DBI-&gt;connect($connection, $user, $pass) or die 'Cannot connect';\nmy $query_cust_main = \"\nSELECT BusinessEntityID,\n       Title,\n       FirstName,\n       LastName,\n       Suffix,\n       JobTitle\n\nFROM HumanResources.vEmployee\norder by JobTitle\";\n\nmy $query_cust_sth = $dbh_SQL-&gt;prepare($query_cust_main);\n$query_cust_sth-&gt;execute();\nmy $all_cust = $dbh_SQL-&gt;selectall_arrayref($query_cust_main, {Slice =&gt; {}});\n\nforeach my $data (@$all_cust){\nprint $data-&gt;{BusinessEntityID}.\" \".$data-&gt;{FirstName}.\" \".$data-&gt;{LastName}.\" \".$data-&gt;{JobTitle}.\"\\n\";\n}\n</code></pre>\n\n<p>This code prints:\n12 Thierry D'Hers Tool Designer\n13 Janice Galvin Tool Designer\n2 Terri Duffy Vice President of Engineering\n25 James Hamilton Vice President of Production\n273 Brian Welcker Vice President of Sales</p>\n\n<p>Now, what i want to do...somehow is to re-order the results as this:</p>\n\n<p><strong>Vice President of Production</strong> </p>\n\n<p>25 James Hamilton</p>\n\n<p>273 Brian Welcker</p>\n\n<p><strong>Tool Designer</strong></p>\n\n<p>13 Janice Galvin </p>\n\n<p>12 Thierry D'Hers</p>\n\n<p>As in </p>\n\n<p><strong>JobTitle</strong> </p>\n\n<p>BusinessEntityID FirstName LastName ... </p>\n\n<p>Is is possible to obtain this re order only in perl? without using/altering the query?</p>\n\n<p>Thank you,\nR.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1519662185, "post_id": 48992675, "comment_id": 84990546, "body": "show what you have tried.  in your desired structure, are subcategories (and the main parentless categories) ordered by id or name or orderless?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1519662223, "post_id": 48992675, "comment_id": 84990582, "body": "Without seeing the code, we can&#39;t tell you what you&#39;re doing wrong. The data output looks like it&#39;s all there."}, {"owner": {"reputation": 9, "user_id": 9414290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7c2c505073c2580998a1c0a8dc580f?s=128&d=identicon&r=PG&f=1", "display_name": "John.Doe", "link": "https://stackoverflow.com/users/9414290/john-doe"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1519666820, "post_id": 48992675, "comment_id": 84993455, "body": "@ChrisTurner Sorry, I wasn&#39;t to specific. The data output is not the problem. I just displayed what I have so far, I&#39;l edit and add the <code>while</code> that I used to go through the records after the query. As for the code that I worked for the new structure, some attempts were in perl, some in vue.js, some in sql. When I was sure I failed I deleted and tried another route, but after seeing what @choroba posted, I wasn&#39;t even near his answer which was exactly what I needed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519667439, "post_id": 48992675, "comment_id": 84993777, "body": "@John: Hint: <b>choroba&#39;s</b> post isn&#39;t what you want either. Spraying your attempts over Perl, Vue, and SQL in the hope of seeing the right result will leave you cornered with so many bugs you don&#39;t know where to look. You don&#39;t even tell us what database engine or HTTP server you&#39;re using. Is this a CGI app?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9414290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7c2c505073c2580998a1c0a8dc580f?s=128&d=identicon&r=PG&f=1", "display_name": "John.Doe", "link": "https://stackoverflow.com/users/9414290/john-doe"}, "edited": false, "score": 0, "creation_date": 1519665826, "post_id": 48992850, "comment_id": 84992950, "body": "Had to research &#39;grep&#39; first (I&#39;m not that good in perl) but it does exactly what I wanted. Thank you so much."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": -1, "last_activity_date": 1519662460, "creation_date": 1519662460, "answer_id": 48992850, "question_id": 48992675, "link": "https://stackoverflow.com/questions/48992675/array-category-subcategory/48992850#48992850", "title": "Array category subcategory", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy %struct = (category =&gt; [\n    {\n        'name' =&gt; 'Laptop',\n        'id' =&gt; '1',\n        'parent_id' =&gt; undef\n    },\n    {\n        'name' =&gt; 'TV',\n        'id' =&gt; '2',\n        'parent_id' =&gt; undef\n    },\n    {\n        'name' =&gt; 'Table &amp; mobile',\n        'id' =&gt; '3',\n        'parent_id' =&gt; undef\n    },\n    {\n        'name' =&gt; 'PC',\n        'id' =&gt; '4',\n        'parent_id' =&gt; undef\n    },\n    {\n        'name' =&gt; 'Laptops',\n        'id' =&gt; '5',\n        'parent_id' =&gt; '1'\n    },\n    {\n        'name' =&gt; 'Laptop accessories ',\n        'id' =&gt; '6',\n        'parent_id' =&gt; '1'\n    },\n    {\n        'name' =&gt; 'TV accessories',\n        'id' =&gt; '7',\n        'parent_id' =&gt; '2'\n    }\n]);\n\n\nmy %tree;\nfor my $cat (grep ! defined $_-&gt;{parent_id}, @{ $struct{category} }) {\n    $tree{ $cat-&gt;{id} } = $cat;\n}\n\nfor my $cat (grep defined $_-&gt;{parent_id}, @{ $struct{category} }) {\n    $tree{ $cat-&gt;{parent_id} }{subcat}{ $cat-&gt;{id} } = $cat;\n}\n\nuse Data::Dumper; print Dumper \\%tree;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9414290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e7c2c505073c2580998a1c0a8dc580f?s=128&d=identicon&r=PG&f=1", "display_name": "John.Doe", "link": "https://stackoverflow.com/users/9414290/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 48992850, "answer_count": 1, "score": -1, "last_activity_date": 1519665795, "creation_date": 1519661856, "last_edit_date": 1519665795, "question_id": 48992675, "link": "https://stackoverflow.com/questions/48992675/array-category-subcategory", "title": "Array category subcategory", "body": "<p>I have this category and subcategory table.</p>\n\n<p>The field that has the value <code>NULL</code> for <code>parent_id</code> is a category, and the ones that use <code>parent_id</code> are subcategories.</p>\n\n<p>My tree view has subcategories assigned only to categories, so no subcategories for subcategories.</p>\n\n<pre><code>+----+---------------------+-----------+\n| id | name                | parent_id |\n+----+---------------------+-----------+\n|  1 | Laptop              |      NULL |\n|  2 | TV                  |      NULL |\n|  3 | Tablet &amp; Mobile     |      NULL |\n|  4 | PC                  |      NULL |\n|  5 | Laptops             |         1 |\n|  6 | Laptop accessories  |         1 |\n|  7 | TV accessories      |         2 |\n</code></pre>\n\n<p>If I do a <code>SELECT *</code> and spice it with a <code>while</code> I get the following array.</p>\n\n<pre><code>'category' =&gt; [\n              {\n                'name' =&gt; 'Laptop',\n                'id' =&gt; '1',\n                'parent_id' =&gt; undef\n              },\n              {\n                'name' =&gt; 'TV',\n                'id' =&gt; '2',\n                'parent_id' =&gt; undef\n              },\n              {\n                'name' =&gt; 'Table &amp; mobile',\n                'id' =&gt; '3',\n                'parent_id' =&gt; undef\n              },\n              {\n                'name' =&gt; 'PC',\n                'id' =&gt; '4',\n                'parent_id' =&gt; undef\n              },\n              {\n                'name' =&gt; 'Laptops',\n                'id' =&gt; '5',\n                'parent_id' =&gt; '1'\n              },\n              {\n                'name' =&gt; 'Laptop accessories ',\n                'id' =&gt; '6',\n                'parent_id' =&gt; '1'\n              },\n              {\n                'name' =&gt; 'TV accessories',\n                'id' =&gt; '7',\n                'parent_id' =&gt; '2'\n              }\n</code></pre>\n\n<p>The structure I'm looking for should look like this.</p>\n\n<pre><code>category 1\n-- subcategory 1.1\n-- subcategory 1.2\ncategory 2\n-- subcategory 2.1\n</code></pre>\n\n<p>What I get now looks like</p>\n\n<pre><code>category 1\nsubcategory 1.1\ncategory 2\nsubcategory 1.2\nsubcategory 2.1\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1519656811, "post_id": 48991089, "comment_id": 84987169, "body": "Yes, it&#39;s possible to do all those things in Perl. <code>find</code> can be replaced by <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\"><code>File::Find</code></a>, <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\"><code>File::Find::Rule</code></a>, or other similar modules; see <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\"><code>stat</code></a> to get file times; and a regular <code>while(&lt;&gt;)</code> loop with regexes to replace <code>grep</code>, see <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perlintro</a> and <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519657246, "post_id": 48991227, "comment_id": 84987450, "body": "That may work, but I think it should be noted that what that script generates isn&#39;t exactly the greatest code."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 0, "last_activity_date": 1519656821, "creation_date": 1519656821, "answer_id": 48991227, "question_id": 48991089, "link": "https://stackoverflow.com/questions/48991089/find-ctime-bash-alternative-in-perl/48991227#48991227", "title": "find -ctime bash alternative in Perl", "body": "<p>When you try to convert <a href=\"/questions/tagged/find\" class=\"post-tag\" title=\"show questions tagged &#39;find&#39;\" rel=\"tag\">find</a> command to perl, consider using <a href=\"https://fastapi.metacpan.org/source/LEONT/App-find2perl-1.003/script/find2perl\" rel=\"nofollow noreferrer\"><code>find2perl</code> script</a>.</p>\n\n<p>It generate the perl code.</p>\n\n<pre><code>find2perl 'INPUT_DIR' -ctime -'DAYS_NUM' -type f -exec grep -hs EDI_DC {} \\;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519656821, "creation_date": 1519656364, "last_edit_date": 1519656518, "question_id": 48991089, "link": "https://stackoverflow.com/questions/48991089/find-ctime-bash-alternative-in-perl", "title": "find -ctime bash alternative in Perl", "body": "<p>Kind of new to Perl, still navigating my way through.</p>\n\n<p>Is there another way to write the bash command below in \"Perl\"?</p>\n\n<pre><code>find $INPUT_DIR -ctime -$DAYS_NUM -type f -exec grep -hs EDI_DC {} \\; | \ngrep -i -v xml &gt;&gt; $OUTPUT_DIR/$OUTPUT_FILENAME\n</code></pre>\n\n<p>where INPUT_DIR, DAYS_NUM, OUTPUT_DIR and OUTPUT_FILENAME are arguments passed during runtime.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 8, "creation_date": 1519637427, "post_id": 48985094, "comment_id": 84974880, "body": "Hashes have no innate ordering for keys. You apply order to keys based on how you sort the extracted keys, or you have the keys stored in an array or list, and you have applied some desired sort order to that array."}, {"owner": {"reputation": 1136, "user_id": 1694803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5qVj9.jpg?s=128&g=1", "display_name": "Boris D&#228;ppen", "link": "https://stackoverflow.com/users/1694803/boris-d%c3%a4ppen"}, "edited": false, "score": 2, "creation_date": 1519640712, "post_id": 48985094, "comment_id": 84976829, "body": "afaik it&#39;s actually a feature, that hashes are (not anymore) allowing the prediction of the order of their keys."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1519648714, "post_id": 48985094, "comment_id": 84982012, "body": "The code you posted is not valid Perl. Please use a package like <code>Data::Dumper</code> to display data structures."}, {"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1519649209, "post_id": 48985094, "comment_id": 84982280, "body": "@shawnhcorey from my comment below: &quot;Thanks, I know the syntax I used in the post isn&#39;t correct, I was just illustrating what I want the order to be...&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "edited": false, "score": 0, "creation_date": 1519638001, "post_id": 48985297, "comment_id": 84975176, "body": "Thanks, I know the syntax I used in the post isn&#39;t correct, I was just illustrating what I want the order to be... Thanks for the thorough explanation, I will check this out."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1519639666, "post_id": 48985297, "comment_id": 84976178, "body": "<a href=\"http://p3rl.org/Tie::Hash::Indexed\" rel=\"nofollow noreferrer\">Tie::Hash::Indexed</a> is faster than Tie::IxHash."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519660146, "post_id": 48985297, "comment_id": 84989244, "body": "@MoreE: While I respect your choice of answer, I am certain that it would be best to code your own solution. Both <code>Tie::IxHash</code> and <code>Tie::Hash::Indexed</code> seem like a godsend if they do <i>exactly</i> what you want, but they don&#39;t carry with them any explanation of what you intended and why, and there is too much <i>action at a distance</i> for comfort. At the very least your code needs to include comments about the <i>order of the source data</i> as well as <i>why you want to retain the same order</i> for other purposes. This is a very non-Perlish application of hashes, and you should reconsider your solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519661780, "post_id": 48985297, "comment_id": 84990288, "body": "@haukex: The OP says very clearly in the question that the order they require is <b><i>not</i></b> the order of creation. Your solution will ensure that the order is always wrong, while dramatically increasing run time. Questions that are based on misconceptions like this are only confounded further by answers who treat those misconceptions seriously. I shall flag your answer for removal, but I hope you see fit to do the surgery yourself."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519662625, "post_id": 48985297, "comment_id": 84990864, "body": "@Borodin <i>&quot;The OP says very clearly in the question that the order they require is not the order of creation.&quot;</i> Sorry, but that&#39;s not my understanding of the question - it gives a very clear example of sample input with expected output. I take the <i>&quot;I am beginning to think, it&#39;s adding them by the time they were created&quot;</i> to be an attempt at understanding <i>why</i> the hash was output &quot;out of order&quot;, and <i>not</i> the <i>desired</i> order. I&#39;m not sure what other misconceptions you are talking about. I&#39;ll make an edit in regards to <code>Tie::IxHash</code>, but I&#39;m not sure what other &quot;surgery&quot; you mean."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519663665, "post_id": 48985297, "comment_id": 84991586, "body": "@hauk: The input is far from clear; it is over-simplified to two static hashes of strings. For the OP to expect them to be ordered I guess that the real data came from two separate database requests. The correct &quot;answer&quot; here is an explanation that neither <code>%hash1</code> nor <code>%hash2</code> were ever in any order that the OP may have imagined, and an encouragement to ask the <i>real</i> question with much wider vision. <code>Tie::IxHash</code> is very rarely a practical solution to any real-life problem, and you should at least have withheld it until you understood the question. Racing for points doesn&#39;t look good."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 5, "last_activity_date": 1519663892, "last_edit_date": 1519663892, "creation_date": 1519637811, "answer_id": 48985297, "question_id": 48985094, "link": "https://stackoverflow.com/questions/48985094/turn-2-hash-tables-into-one-without-losing-the-order-of-keys/48985297#48985297", "title": "Turn 2 hash tables into one without losing the order of keys", "body": "<p>Hash keys don't have a fixed order. To keep elements in a specific order, you can use for example an array, or maybe a module like <a href=\"https://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow noreferrer\"><code>Tie::IxHash</code></a> or <a href=\"https://metacpan.org/pod/Tie::Hash::Indexed\" rel=\"nofollow noreferrer\"><code>Tie::Hash::Indexed</code></a> (as suggested by @daxim, thanks) - but see below in regards to these modules.</p>\n\n<p>However, personally I find that in most cases, instead of keeping the hashes in a certain order using additional modules, just <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a>ing on output is enough:</p>\n\n<pre><code>my %hash1 = (key1=&gt;'value1', key2=&gt;'value2', key3=&gt;'value3');\nmy %hash2 = (key4=&gt;'value4', key5=&gt;'value5', key6=&gt;'value6');\nmy %hash3 = (%hash1, %hash2);\nfor my $key (sort keys %hash3) {\n    print \"$key: $hash3{$key}\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>key1: value1\nkey2: value2\nkey3: value3\nkey4: value4\nkey5: value5\nkey6: value6\n</code></pre>\n\n<p>See also the FAQs <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f\" rel=\"nofollow noreferrer\">How do I sort a hash (optionally by value instead of key)?</a> and <a href=\"http://perldoc.perl.org/perlfaq4.html#How-can-I-always-keep-my-hash-sorted%3f\" rel=\"nofollow noreferrer\">How can I always keep my hash sorted?</a>.</p>\n\n<p>Here is a <code>Tie::IxHash</code> example, the output is the same as above; note how the <code>sort</code> isn't needed. <code>Tie::IxHash</code> will preserve the order in which elements were added to the hash - <em>but</em> please be sure that this is what you want, because it's <em>not</em> the same as sorting the keys on output, as I showed above - the modules remember insertion order, while the <code>sort</code> solution will sort the keys for output only, without changing anything in the original hash. Using <code>tie</code>d hashes will also cause a performance impact.</p>\n\n<pre><code>use Tie::IxHash;\ntie my %hash1, 'Tie::IxHash';\ntie my %hash2, 'Tie::IxHash';\ntie my %hash3, 'Tie::IxHash';\n%hash1 = (key1=&gt;'value1', key2=&gt;'value2', key3=&gt;'value3');\n%hash2 = (key4=&gt;'value4', key5=&gt;'value5', key6=&gt;'value6');\n%hash3 = (%hash1, %hash2);\nfor my $key (keys %hash3) {\n    print \"$key: $hash3{$key}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8537960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b0fa5ed1f34f9fce0fa8b9d1c163ccd?s=128&d=identicon&r=PG&f=1", "display_name": "Mor Elmaliach", "link": "https://stackoverflow.com/users/8537960/mor-elmaliach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 48985297, "answer_count": 1, "score": 0, "last_activity_date": 1519678041, "creation_date": 1519637084, "last_edit_date": 1519678041, "question_id": 48985094, "link": "https://stackoverflow.com/questions/48985094/turn-2-hash-tables-into-one-without-losing-the-order-of-keys", "title": "Turn 2 hash tables into one without losing the order of keys", "body": "<p>I am trying to do something I figured would be quite simple, but it seems I'm either missing a letter or something or I just don't know how to do it properly.\nI have  2 hash tables with values.\ne.g (written in simple code just to illustrate the hashes! I know how the syntax looks in the code):</p>\n\n<pre><code>%hash1=&gt;(key1,key2,key3)=&gt;[value1,value2,value3]\n%hash2=&gt;(key4,key5,key6)=&gt;[value4,value5,value6]\n</code></pre>\n\n<p>I want to merge the two, so that I'll have one hash, with these keys &amp; values (order matters).</p>\n\n<pre><code>%hash3=&gt; (key1,key2,key3,key4,key5,key6) =&gt;[value1,value2,value3,value4,value5,value6]\n</code></pre>\n\n<p>I tried using <a href=\"https://metacpan.org/pod/Hash::Merge\" rel=\"nofollow noreferrer\"><code>Hash::Merge</code></a>, but it failed. I tried to slice the hash:</p>\n\n<pre><code>(@Hash1{ keys %Hash2 } = values %Hash2)\n</code></pre>\n\n<p>because I thought it'll just add it to \"the bottom\" of the list. It doesn't seem to work.</p>\n\n<p>I am beginning to think, it's adding them by the time they were created, and they're created sort of in this order:\nvalue4,value5,value1,value2,value6,value3</p>\n\n<p>So possibly, that's why it does it... however... I want to avoid the option to loop over each hash once after it's done to just add it one by one... is there any option other than that? (The script runs for less then 0.1 second, so it's fine either way, but I want the code to look ok as well as work properly.\nThanks.</p>\n"}, {"tags": ["python", "perl", "command"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 4, "creation_date": 1519635112, "post_id": 48984287, "comment_id": 84973650, "body": "And ... What did you try and how did it fail?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 2, "creation_date": 1519648153, "post_id": 48984287, "comment_id": 84981656, "body": "why <code>python</code> AND <code>perl</code> tag hough? can you show us some code so we can help you?"}, {"owner": {"reputation": 1, "user_id": 8731940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3HXhXn_cYG4/AAAAAAAAAAI/AAAAAAAAB8M/F0qFLx11NWY/photo.jpg?sz=128", "display_name": "onur baloglu", "link": "https://stackoverflow.com/users/8731940/onur-baloglu"}, "edited": false, "score": 0, "creation_date": 1519733373, "post_id": 48984287, "comment_id": 85021106, "body": "for python i tried this but doesnot work properly    f1 = &#39;file1.txt&#39; f2 = &#39;file2.txt&#39;  if len(sys.argv) == 3:     f1 = sys.argv[1]     f2 = sys.argv[2] with open(f1) as file_1, open(&#39;out.txt&#39;, &#39;w&#39;) as of:     for l1 in file_1:         col_of_f1 = int(l1.split()[0])         with open(f2) as file_2:             for l2 in file_2:                 col_of_f2 = l2.split()                 if len(col_of_f2) &lt; 1:                     break                 col_of_f2 = int(col_of_f2[0])                 if col_of_f1 == col_of_f2:                     of.write(l2)                     break"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8731940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3HXhXn_cYG4/AAAAAAAAAAI/AAAAAAAAB8M/F0qFLx11NWY/photo.jpg?sz=128", "display_name": "onur baloglu", "link": "https://stackoverflow.com/users/8731940/onur-baloglu"}, "edited": false, "score": 0, "creation_date": 1522053754, "post_id": 49217206, "comment_id": 85977066, "body": "hi , i tried but it just copied first file directly do not eliminate or select common lines"}, {"owner": {"reputation": 11, "user_id": 8977069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7afe5680195f89a072a6cf174cdb0bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjit Mathew ", "link": "https://stackoverflow.com/users/8977069/sanjit-mathew"}, "reply_to_user": {"reputation": 1, "user_id": 8731940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3HXhXn_cYG4/AAAAAAAAAAI/AAAAAAAAB8M/F0qFLx11NWY/photo.jpg?sz=128", "display_name": "onur baloglu", "link": "https://stackoverflow.com/users/8731940/onur-baloglu"}, "edited": false, "score": 0, "creation_date": 1522141614, "post_id": 49217206, "comment_id": 86021457, "body": "this code worked with the input and output you gave in the question. just take try giving the inputs you gave in the question"}], "tags": [], "owner": {"reputation": 11, "user_id": 8977069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7afe5680195f89a072a6cf174cdb0bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjit Mathew ", "link": "https://stackoverflow.com/users/8977069/sanjit-mathew"}, "is_accepted": false, "score": 0, "last_activity_date": 1520748741, "creation_date": 1520748741, "answer_id": 49217206, "question_id": 48984287, "link": "https://stackoverflow.com/questions/48984287/comparing-two-tab-seperated-files-for-multiple-column-and-combine-matches/49217206#49217206", "title": "comparing two tab seperated files for multiple column and combine matches", "body": "<p>Replace with this code after initializing f1 and f2</p>\n\n<pre><code>s1=open(f1,'r').read().split('\\n')\ns2=open(f2,'r').readlines()\nof=open('out.txt','w')\nans=''\nfor i in s1:\n    for j in s2:\n         if i in j:\n             ans+=j+'\\n'\nof.write(ans)\nof.close()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8731940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3HXhXn_cYG4/AAAAAAAAAAI/AAAAAAAAB8M/F0qFLx11NWY/photo.jpg?sz=128", "display_name": "onur baloglu", "link": "https://stackoverflow.com/users/8731940/onur-baloglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1520748741, "creation_date": 1519633972, "last_edit_date": 1519733748, "question_id": 48984287, "link": "https://stackoverflow.com/questions/48984287/comparing-two-tab-seperated-files-for-multiple-column-and-combine-matches", "title": "comparing two tab seperated files for multiple column and combine matches", "body": "<p>I need to compare two files for first two columns and select the matched ones with additional information of second file like;</p>\n\n<p>input1:</p>\n\n<pre><code>0   1\n2   4\n5   6\n</code></pre>\n\n<p>input2:</p>\n\n<pre><code>2   4  xyz\n5   4  asv\n0   1  qwe\n</code></pre>\n\n<p>output is</p>\n\n<pre><code>2   4  xyz\n0   1  qwe\n</code></pre>\n\n<p>i tried this at python but does not work properly; like if there are more 1 at first column it cannot give proper output</p>\n\n<pre><code>#!/usr/bin/python\n\nimport sys\n\nf1 = 'file1.txt'\nf2 = 'file2.txt'\n\nif len(sys.argv) == 3:\n    f1 = sys.argv[1]\n    f2 = sys.argv[2]\n\nwith open(f1) as file_1, open('out.txt', 'w') as of:\n    for l1 in file_1:\n        col_of_f1 = int(l1.split()[0])\n        with open(f2) as file_2:\n            for l2 in file_2:\n                col_of_f2 = l2.split()\n                if len(col_of_f2) &lt; 1:\n                    break\n                col_of_f2 = int(col_of_f2[0])\n                if col_of_f1 == col_of_f2:\n                    of.write(l2)\n                    break\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1519634254, "post_id": 48983428, "comment_id": 84973265, "body": "dsn to try =&gt; <a href=\"https://metacpan.org/pod/release/PYTHIAN/DBD-Oracle-1.74/lib/DBD/Oracle.pm#connect\" rel=\"nofollow noreferrer\">metacpan.org/pod/release/PYTHIAN/DBD-Oracle-1.74/lib/DBD/&hellip;</a>"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1519638626, "post_id": 48983428, "comment_id": 84975542, "body": "Use the <a href=\"http://p3rl.org/debtut\" rel=\"nofollow noreferrer\">debugger</a>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1519837647, "creation_date": 1519837647, "answer_id": 49034995, "question_id": 48983428, "link": "https://stackoverflow.com/questions/48983428/how-to-change-database-from-mysql-to-oracle-in-theschwartz/49034995#49034995", "title": "How to change database from MySQL to Oracle in TheSchwartz", "body": "<p>Using TheSchwartz is almost certainly a complete red herring here. TheSchwartz is just creating a DBI connection. So once you can successfully create a DBI connection outside of TheSchwartz, you should be able to do the same insider TheSchwartz.</p>\n\n<p>The way I would approach it would be in two stages:</p>\n\n<ul>\n<li>Write a simple DBI program to connect to the Oracle database.</li>\n<li>Copy your successful connection details to your TheSchwartz code.</li>\n</ul>\n\n<p>The simple DBI program I'd write, only needs to be as simple as this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:Oracle:OraDB01', 'dbi', 'xxx')\n  or die $DBI::errstr;\n</code></pre>\n\n<p>That will presumably fail in the same way as your existing code, but you'll get the raw DBI connection error which should allow you to work out what the problem is.</p>\n\n<p>Obviously, you might find the <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">DBD::Oracle documentation</a> to be useful as well.</p>\n"}], "owner": {"reputation": 66, "user_id": 5844803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0d91e409eb66531e686169d14fac1b?s=128&d=identicon&r=PG&f=1", "display_name": "delorean924", "link": "https://stackoverflow.com/users/5844803/delorean924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49034995, "answer_count": 1, "score": 0, "last_activity_date": 1519837647, "creation_date": 1519630163, "last_edit_date": 1519631365, "question_id": 48983428, "link": "https://stackoverflow.com/questions/48983428/how-to-change-database-from-mysql-to-oracle-in-theschwartz", "title": "How to change database from MySQL to Oracle in TheSchwartz", "body": "<p>I'd like to switch database from MySQL to Oracle in perl's TheSchwartz module which is the job queue system. I suspects following code has the key.  </p>\n\n<pre><code>my $client = TheSchwartz-&gt;new(\n    databases =&gt; [{\n    dsn  =&gt; 'dbi:mysql:TheSchwartz',\n    user =&gt; 'dbi',\n    pass =&gt; 'xxxxxxx',\n    }],\n    verbose =&gt; 1,\n);  \n</code></pre>\n\n<p>I changed the code.   </p>\n\n<pre><code>dsn  =&gt; 'dbi:mysql:TheSchwartz',  \n</code></pre>\n\n<p>to  </p>\n\n<pre><code>dsn  =&gt; 'dbi:Oracle:OraDB01',    \n</code></pre>\n\n<p>then I got the message. </p>\n\n<pre><code>#Disabling DB 9e410d44ac4b9ede28c9ef34f6c1e817 because unknown\n</code></pre>\n\n<p>TheSchwartz doesn't tell me any clue of Oracle's error(ex password error ,or network error ....).</p>\n\n<p>My question are<br>\n 1. Is it possible to use Oracle in perl's TheSchwartz?<br>\n 2. For dubugging ,how to get the ORA- Error message in TheSchwartz?  </p>\n\n<p>Any help would be welcomed.<br>\nRegards,</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1519634685, "post_id": 48983344, "comment_id": 84973444, "body": "<a href=\"https://metacpan.org/pod/Exception::Class#SYNOPSIS\" rel=\"nofollow noreferrer\">metacpan.org/pod/Exception::Class#SYNOPSIS</a>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1519638575, "post_id": 48983344, "comment_id": 84975515, "body": "Note it&#39;s better to use the pattern <code>eval {...; 1} or do {...}</code> instead of <code>eval {...}; if ($@) {...}</code> (even though you will still find many examples of the latter online). <a href=\"https://www.perlmonks.org/?node_id=1153468\" rel=\"nofollow noreferrer\">See also</a>"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 5, "last_activity_date": 1519638119, "creation_date": 1519638119, "answer_id": 48985396, "question_id": 48983344, "link": "https://stackoverflow.com/questions/48983344/perl-try-catch-for-user-defined-exceptions/48985396#48985396", "title": "Perl try catch for user defined exceptions", "body": "<p>The closest solution is probably the straight-forward <a href=\"http://p3rl.org/failures\" rel=\"noreferrer\">failures</a> object and <a href=\"http://p3rl.org/TryCatch\" rel=\"noreferrer\">TryCatch</a> for the type checking.</p>\n\n<pre><code>use failures qw(\n    Example::Value_too_small\n    Example::Value_too_large\n);\nuse TryCatch;\n\ntry {\n    my $number = 6;\n    my $i_num = 3;\n    if ($i_num &lt; $number) {\n        failure::Example::Value_too_small-&gt;throw({\n            msg =&gt; '%d is too small, try again!',\n            payload =&gt; $i_num,\n        });\n    } elsif ($i_num &gt; $number) {\n        failure::Example::Value_too_large-&gt;throw({\n            msg =&gt; '%d is too large, try again!',\n            payload =&gt; $i_num,\n        });\n    }\n} catch (failure::Example::Value_too_small $e) {\n    say sprintf $e-&gt;msg, $e-&gt;payload;\n} catch (failure::Example::Value_too_large $e) {\n    say sprintf $e-&gt;msg, $e-&gt;payload;\n} finally {\n    ...\n}\n</code></pre>\n\n<p>You can upgrade from here to <a href=\"http://p3rl.org/custom::failures\" rel=\"noreferrer\">custom::failures</a>, <a href=\"http://p3rl.org/Throwable\" rel=\"noreferrer\">Throwable</a>, <a href=\"http://p3rl.org/Exception::Class\" rel=\"noreferrer\">Exception::Class</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 4814971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzV61.jpg?s=128&g=1", "display_name": "Jacques", "link": "https://stackoverflow.com/users/4814971/jacques"}, "is_accepted": false, "score": 1, "last_activity_date": 1591072721, "creation_date": 1591072721, "answer_id": 62144934, "question_id": 48983344, "link": "https://stackoverflow.com/questions/48983344/perl-try-catch-for-user-defined-exceptions/62144934#62144934", "title": "Perl try catch for user defined exceptions", "body": "<p>Like @daxim pointed out, there is <a href=\"https://metacpan.org/pod/TryCatch\" rel=\"nofollow noreferrer\">TryCatch</a>, but I am writing this for all those who would see this and to alert them that unfortunately <a href=\"https://metacpan.org/pod/TryCatch\" rel=\"nofollow noreferrer\">TryCatch</a> is now broken since the version 0.006020 of <a href=\"https://metacpan.org/pod/Devel::Declare\" rel=\"nofollow noreferrer\">Devel::Declare</a> on which <a href=\"https://metacpan.org/pod/TryCatch\" rel=\"nofollow noreferrer\">TryCatch</a> relies.</p>\n\n<p>In replacement, there is <a href=\"https://metacpan.org/pod/Nice::Try\" rel=\"nofollow noreferrer\">Nice::Try</a> which is quite unique and provides all the features like in other programming languages.</p>\n\n<p>It supports exception variable assignment, exception class like the OP requested, clean-up with <code>finally</code> block, embedded try-catch blocks.</p>\n\n<p>Full disclosure: I have developed Nice::Try when <a href=\"https://rt.cpan.org/Ticket/Display.html?id=97089\" rel=\"nofollow noreferrer\">TryCatch got broken</a>.</p>\n"}], "owner": {"reputation": 980, "user_id": 2486083, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/pZudJ.jpg?s=128&g=1", "display_name": "Chetan", "link": "https://stackoverflow.com/users/2486083/chetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 48985396, "answer_count": 2, "score": 5, "last_activity_date": 1591072721, "creation_date": 1519629804, "last_edit_date": 1519634228, "question_id": 48983344, "link": "https://stackoverflow.com/questions/48983344/perl-try-catch-for-user-defined-exceptions", "title": "Perl try catch for user defined exceptions", "body": "<p>I want to know if perl has some try catch mechanism similar to python where i can raise user defined exceptions and handle accordingly.</p>\n\n<p><strong>PythonCode:</strong></p>\n\n<pre><code>   try:\n       number = 6\n       i_num = 3\n       if i_num &lt; number:\n           raise ValueTooSmallError\n       elif i_num &gt; number:\n           raise ValueTooLargeError\n       break\n   except ValueTooSmallError:\n       print(\"This value is too small, try again!\")\n       print()\n   except ValueTooLargeError:\n       print(\"This value is too large, try again!\")\n       print()\n</code></pre>\n\n<p>I know perl has try catch mechnism like below:</p>\n\n<pre><code>sub method_one {\n    try {\n        if (\"number\" eq \"one\") {\n            die(\"one\");\n        } else {\n            die(\"two\");\n        }\n    } catch {\n        if ($@ eq \"one\") {\n            print \"Failed at one\";\n        }\n    }\n}\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>eval {\n    open(FILE, $file) || \n      die MyFileException-&gt;new(\"Unable to open file - $file\");\n  };\n\n  if ($@) {\n    # now $@ contains the exception object of type MyFileException\n    print $@-&gt;getErrorMessage();  \n    # where getErrorMessage() is a method in MyFileException class\n  }\n</code></pre>\n\n<p>I am concentrating more on the <strong>if</strong> checks on the catch. Is there a way i can avoid the checks for the different kind of errors i catch.</p>\n"}, {"tags": ["json", "perl", "loops", "multidimensional-array"], "comments": [{"owner": {"reputation": 2603, "user_id": 7477922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88zBB.jpg?s=128&g=1", "display_name": "Akhilesh Awasthi", "link": "https://stackoverflow.com/users/7477922/akhilesh-awasthi"}, "edited": false, "score": 2, "creation_date": 1519627042, "post_id": 48982626, "comment_id": 84970311, "body": "Can you please show the work you have done to solve it ??"}, {"owner": {"reputation": 1, "user_id": 9411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0ca6729aeaba71e2a4f0de637ca15d?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh", "link": "https://stackoverflow.com/users/9411559/nagesh"}, "reply_to_user": {"reputation": 2603, "user_id": 7477922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88zBB.jpg?s=128&g=1", "display_name": "Akhilesh Awasthi", "link": "https://stackoverflow.com/users/7477922/akhilesh-awasthi"}, "edited": false, "score": 0, "creation_date": 1519629602, "post_id": 48982626, "comment_id": 84971311, "body": "@AkhileshAwasthi                                                                                                 my $json_array = decode_json($json);   foreach my $item($json_array) {          print $item-&gt;{deal}-&gt;{distributionWindows}[0]{constraints}[0]{cate&zwnj;&#8203;goryIds}[0];          print &quot;\\n&quot;;          print $item-&gt;{deal}-&gt;{distributionWindows}[0]{constraints}[0]{cate&zwnj;&#8203;goryIds}[1];          print &quot;\\n&quot;;          print print $item-&gt;{deal}-&gt;{distributionWindows}[0]{constraints};   } I am new to this perl and do not know how to do this?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0ca6729aeaba71e2a4f0de637ca15d?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh", "link": "https://stackoverflow.com/users/9411559/nagesh"}, "edited": false, "score": 0, "creation_date": 1520014028, "post_id": 48992670, "comment_id": 85155717, "body": "Thank you Stefan. It is working for inserting into the array. But for entire new content extra double quote is getting added and also a backslash for content. Added content is like this:           constraints&quot;: [           {             &quot;type&quot;: &quot;forbidden&quot;,             &quot;categoryIds&quot;: [               &quot;1560ef81-5e83-4b16-a1d5-6de511f35d9a&quot;,               &quot;09d96db9-2728-4ac1-a601-c5176744d534&quot;             ],             &quot;enforcedUntil&quot;: &quot;2017-11-09T23:00:00Z&quot;,             &quot;enforcedAt&quot;: &quot;2017-11-08T23:00:00Z&quot;           }, &quot;{\\&quot;categoryIds\\&quot;: [\\&quot;0c5401a4-7d96-44f8-a229-7403453512e8\\&quot;]}&quot;"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 1, "user_id": 9411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0ca6729aeaba71e2a4f0de637ca15d?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh", "link": "https://stackoverflow.com/users/9411559/nagesh"}, "edited": false, "score": 0, "creation_date": 1520234426, "post_id": 48992670, "comment_id": 85215466, "body": "@Nagesh that can only mean that your strings contain <code>&quot;</code> (quotes) themselves. Please compare  <code>perl -MJSON -e &#39;$k = &quot;test&quot;; $d{$k}++; print encode_json(\\%d), &quot;\\n&quot;;&#39;</code> -&gt; <code>{&quot;test&quot;:1}</code>  vs.  <code>perl -MJSON -e &#39;$k = &quot;\\&quot;test\\&quot;&quot;; $d{$k}++; print encode_json(\\%d), &quot;\\n&quot;;&#39;</code> -&gt; <code>{&quot;\\&quot;test\\&quot;&quot;:1}</code>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 1, "user_id": 9411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0ca6729aeaba71e2a4f0de637ca15d?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh", "link": "https://stackoverflow.com/users/9411559/nagesh"}, "edited": false, "score": 0, "creation_date": 1520234812, "post_id": 48992670, "comment_id": 85215632, "body": "@Nagesh if the strings that get converted to hash keys are passed in, then I would check and add a quote stripper, e.g. maybe this simple one is already good enough for your use case: <code>$key =~ s&#47;&quot;&#47;&#47;g;</code>"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1519661835, "creation_date": 1519661835, "answer_id": 48992670, "question_id": 48982626, "link": "https://stackoverflow.com/questions/48982626/how-to-add-content-to-dynamic-nested-json-with-perl-script/48992670#48992670", "title": "How to add content to dynamic nested JSON with Perl script", "body": "<p>How about this?</p>\n\n<pre><code>sub process_window($)\n{\n   my($window) = @_;\n   my $constraints = $window-&gt;{constraints};\n\n   my $new_constraint;\n   # your code that decides if constraint needs to be added goes here...\n\n   # update constraints in window\n   push(@{ $constraints }, $new_constraint);\n}\n\nmy $data = decode_json($json);\nforeach my $distWindow (@{ $data-&gt;{deal}-&gt;{DistributionWindows} }) {\n    process_window($distWindow);\n}\nmy $new_json = encode_json($data);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0ca6729aeaba71e2a4f0de637ca15d?s=128&d=identicon&r=PG&f=1", "display_name": "Nagesh", "link": "https://stackoverflow.com/users/9411559/nagesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1519661835, "creation_date": 1519626478, "last_edit_date": 1519627591, "question_id": 48982626, "link": "https://stackoverflow.com/questions/48982626/how-to-add-content-to-dynamic-nested-json-with-perl-script", "title": "How to add content to dynamic nested JSON with Perl script", "body": "<p>Hi I have to add some new array of content to existing JSON array dynamically. I have a JSON like this: </p>\n\n<pre><code>{\n  \"deal\": {\n    \"distributionWindows\": [\n      {\n        \"availableAt\": \"2016-10-08T23:00:00Z\",\n        \"availableUntil\": \"2016-10-09T23:00:00Z\",\n        \"constraints\": [\n          {\n            \"categoryIds\": [\n              \"1760gh81-5m83-4b16-a2c5-6ed511f35d9a\",\n              \"09f78fg9-2728-4nl1-a601-c5176744d534\"\n            ],\n            \"enforcedAt\": \"2016-10-08T23:00:00Z\",\n            \"enforcedUntil\": \"2016-10-09T23:00:00Z\",\n            \"type\": \"forbidden\"\n          }\n        ],\n        \"enabled\": false,\n        \"type\": \"prefeature\"\n      },\n      {\n        \"availableAt\": \"2016-10-09T23:00:00Z\",\n        \"availableUntil\": \"2016-12-12T21:44:23Z\",\n        \"constraints\": [\n          {\n            \"categoryIds\": [\n              \"1324kj81-5e89-4b16-a1u5-6uy511f35d9a\",\n              \"1234nhgt-2728-4ac1-a601-c5176744d534\"\n            ],\n            \"enforcedAt\": \"2016-11-09T23:00:00Z\",\n            \"enforcedUntil\": \"2016-12-12T22:59:59Z\",\n            \"type\": \"forbidden\"\n          }\n        ],\n        \"enabled\": false,\n        \"type\": \"featured\"\n      }\n    ],\n    \"inviteOnly\": true,\n    \"wowDeal\": true\n  }\n}\n</code></pre>\n\n<p>For this JSON I have to add new content for every constraints and finally JSON should look like this:</p>\n\n<pre><code>{\n  \"deal\": {\n    \"distributionWindows\": [\n      {\n        \"availableAt\": \"2016-10-08T23:00:00Z\",\n        \"availableUntil\": \"2016-10-09T23:00:00Z\",\n        \"constraints\": [\n          {\n            \"categoryIds\": [\n              \"1760gh81-5m83-4b16-a2c5-6ed511f35d9a\",\n              \"09f78fg9-2728-4nl1-a601-c5176744d534\"\n            ],\n            \"enforcedAt\": \"2016-10-08T23:00:00Z\",\n            \"enforcedUntil\": \"2016-10-09T23:00:00Z\",\n            \"type\": \"forbidden\"\n          },\n          {\n            \"categoryIds\": [\n              \u201c9fiu8908-7d78-22e4-a228-7403453512e8\"\n            ],\n            \"enforcedAt\": \"2016-10-08T23:00:00Z\",\n            \"enforcedUntil\": \"2016-10-09T23:00:00Z\",\n            \"type\": \"allowed\"\n          }\n        ],\n        \"enabled\": false,\n        \"type\": \"prefeature\"\n      },\n      {\n        \"availableAt\": \"2016-10-09T23:00:00Z\",\n        \"availableUntil\": \"2016-12-12T21:44:23Z\",\n        \"constraints\": [\n          {\n            \"categoryIds\": [\n              \"1324kj81-5e89-4b16-a1u5-6uy511f35d9a\",\n              \"1234nhgt-2728-4ac1-a601-c5176744d534\"\n            ],\n            \"enforcedAt\": \"2016-11-09T23:00:00Z\",\n            \"enforcedUntil\": \"2016-12-12T22:59:59Z\",\n            \"type\": \"forbidden\"\n          },\n          {\n            \"categoryIds\": [\n              \u201c9fiu8908-7d78-22e4-a228-7403453512e8\"\n            ],\n            \"enforcedAt\": \"2016-10-08T23:00:00Z\",\n            \"enforcedUntil\": \"2016-10-09T23:00:00Z\",\n            \"type\": \"allowed\"\n          }\n        ],\n        \"enabled\": false,\n        \"type\": \"featured\"\n      }\n    ],\n    \"inviteOnly\": true,\n    \"wowDeal\": true\n  }\n}\n</code></pre>\n\n<p>How to do this using perl? How do I loop dynamically and add the last constraint? I can extract values but I am not sure how to loop it the JSON array and add content in middle. And main problem is it is dynamic, some times it may have one constraint array in existing JSON, and some times it may have 2 or 3. But I have to add my new constraint at the end of the every distributionWindow.</p>\n"}, {"tags": ["perl", "perforce"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1519594377, "post_id": 48978668, "comment_id": 84962369, "body": "How does the <code>p4</code> command signal the existence? Using backticks or <a href=\"http://p3rl.org/system\" rel=\"nofollow noreferrer\">system</a> should work."}], "answers": [{"tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": false, "score": 4, "last_activity_date": 1519594661, "last_edit_date": 1519594661, "creation_date": 1519594360, "answer_id": 48978684, "question_id": 48978668, "link": "https://stackoverflow.com/questions/48978668/how-to-check-if-a-file-exists-in-perforce-in-perl-script/48978684#48978684", "title": "How to check if a file exists in perforce in perl script", "body": "<p>You can run a command from a Perl script with the backtick operator:</p>\n\n<pre><code>`p4 files $file`\n</code></pre>\n\n<p>This will work as a truthy check to see if a file exists in Perforce:</p>\n\n<pre><code>if (`p4 -F %depotFile% files \"$file\"`)\n</code></pre>\n\n<p>Note that this requires you to be logged in to the Perforce server before you run the script (if you can't connect you'll always get \"false\" from the above condition).</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "is_accepted": false, "score": 2, "last_activity_date": 1519596012, "last_edit_date": 1519596012, "creation_date": 1519595352, "answer_id": 48978823, "question_id": 48978668, "link": "https://stackoverflow.com/questions/48978668/how-to-check-if-a-file-exists-in-perforce-in-perl-script/48978823#48978823", "title": "How to check if a file exists in perforce in perl script", "body": "<p>Based on the question asked, it appears that you could run the p4 command using Perl's <code>system()</code>, or the <code>exec()</code> method, or as described above using the \"backticks\" operator.</p>\n\n<p>The backtics operator will allow you trap <code>STDERR</code> and <code>STDOUT</code> from the command, so that you can use it for whatever.</p>\n\n<p>The other two will attempt run the command and give return values accordingly, as described in <a href=\"https://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">perldoc -f exec</a></p>\n\n<p>So, typically what can be done is a command like:</p>\n\n<pre><code>p4 files $file\n</code></pre>\n\n<p>Followed by</p>\n\n<pre><code>echo $?\n</code></pre>\n\n<p>The second command will get you the exit status of the last shell command.</p>\n\n<p>When using backticks you can also try these:</p>\n\n<p>Windows: <code>command-to-execute 2&gt;NUL</code></p>\n\n<p>Linux / OSX: <code>command-to-execute 2&gt; /dev/null</code></p>\n\n<p>These will suppress <code>STDERR</code> and give you the output only. If you use a \"1\" instead of a \"2\" you will suppress <code>STDOUT</code> and get the error only.</p>\n\n<p>Finally, if you want both, you can use:</p>\n\n<p>Windows / Linux / macOS: <code>command-to-execute 1&gt;2&amp;</code></p>\n\n<p>This will concatenate <code>STDOUT</code> and <code>STDERR</code>.</p>\n\n<p>So in short, you use Perl to run any existing program on any operating system, and there are multiple ways to process the result of that.</p>\n"}], "owner": {"reputation": 63, "user_id": 4561027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5144878978f0265d615a7dbf3ddf5221?s=128&d=identicon&r=PG", "display_name": "zeal4learning", "link": "https://stackoverflow.com/users/4561027/zeal4learning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519596012, "creation_date": 1519594257, "question_id": 48978668, "link": "https://stackoverflow.com/questions/48978668/how-to-check-if-a-file-exists-in-perforce-in-perl-script", "title": "How to check if a file exists in perforce in perl script", "body": "<p>I can use the <code>if (-e $file)</code> in perl script to tell if a file exists in linux or not.<br>\nI can run <code>p4 fstat $file</code> in linux to tell if a file exists in perforce depot.<br>\nBut how do I use perl script to check if a file is in perforce depot?</p>\n"}, {"tags": ["c#", "regex", "perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1519465699, "post_id": 48961457, "comment_id": 84929069, "body": "Does the order of the paths matter?"}, {"owner": {"reputation": 95, "user_id": 9405126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GC3yWGSiBlo/AAAAAAAAAAI/AAAAAAAAAAA/TG2LCVz0iFA/photo.jpg?sz=128", "display_name": "Troy Harter", "link": "https://stackoverflow.com/users/9405126/troy-harter"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1519465741, "post_id": 48961457, "comment_id": 84929077, "body": "No, just that the duplicates are removed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1519465795, "post_id": 48961457, "comment_id": 84929089, "body": "Break the string by semicolon and run some version of <code>unique</code> on the obtained array.  Is the program in C# or in Perl?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 3, "creation_date": 1519465956, "post_id": 48961457, "comment_id": 84929130, "body": "Perl or C#? @TroyHarter"}, {"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1519466016, "post_id": 48961457, "comment_id": 84929143, "body": "Is it an option to select only the <a href=\"https://regex101.com/r/xzb3KO/1\" rel=\"nofollow noreferrer\">last occurance</a> and then use replace?"}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 7, "last_activity_date": 1519587638, "last_edit_date": 1519587638, "creation_date": 1519466333, "answer_id": 48961541, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48961541#48961541", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>The typical way to remove duplicates in Perl is with a hash. See also <a href=\"http://perldoc.perl.org/perlfaq4.html#How-can-I-remove-duplicate-elements-from-a-list-or-array%3f\" rel=\"nofollow noreferrer\">perlfaq4: How can I remove duplicate elements from a list or array?</a></p>\n\n<pre><code>my $str = q{C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3};\nmy %seen;\nmy $out = join ';', sort grep { !$seen{$_}++ } split /;/, $str;\nprint $out, \"\\n\";\n__END__\n# Output:\nC:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path6\n</code></pre>\n\n<p>I threw the <code>sort</code> in there but you can remove it if you don't need that.</p>\n\n<p>Although you haven't yet specified whether the implementation is supposed to be in C# or Perl, the same idea should apply to C# as well. (<em>Update:</em> see <a href=\"https://stackoverflow.com/a/48961594/9300627\">Patrick Artner's answer</a>)</p>\n\n<p>Note the regex is slow because for every match of <code>\\b([^;]+)</code>, the engine has to scan the entire rest of the string for the lookahead <code>.*;\\1;</code>, so it's essentially like having nested loops.</p>\n"}, {"tags": [], "owner": {"reputation": 999, "user_id": 9208617, "user_type": "registered", "profile_image": "https://graph.facebook.com/1649762841754613/picture?type=large", "display_name": "Harun Diluka Heshan", "link": "https://stackoverflow.com/users/9208617/harun-diluka-heshan"}, "is_accepted": false, "score": 1, "last_activity_date": 1519466558, "creation_date": 1519466558, "answer_id": 48961573, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48961573#48961573", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>Try following code.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var inputStr = \"C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path1;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path5;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path1;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path6;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path1;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path3;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path1;C:\\\\Users\\\\user\\\\Desktop\\\\TESTING\\\\path3\"\r\n\r\nvar urlArr = inputStr.split(\";\");\r\nvar uniqueUrlList = [];\r\n\r\nurlArr.forEach(function (elem, indx1) {\r\n    let foundElem = uniqueUrlList.find((x, indx2)=&gt;{\r\n        return x.toUpperCase() === elem.toUpperCase() &amp;&amp;\r\n        (indx1 != indx2);\r\n    });    \r\n    \r\n    if (foundElem === undefined) {\r\n        uniqueUrlList.push(elem);\r\n    }\r\n});\r\n\r\nconsole.log(uniqueUrlList);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 8, "last_activity_date": 1519466741, "creation_date": 1519466741, "answer_id": 48961594, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48961594#48961594", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>Or the C# version:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\n\npublic class Program\n{\n    public static void Main()\n    {\n        var paths = @\"C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;\";\n\n        var cleaned = string.Join(\";\", new HashSet&lt;string&gt;(paths.Split(';')));\n\n        Console.WriteLine(cleaned);\n    }\n}\n</code></pre>\n\n<p>Outputs:  </p>\n\n<pre><code>C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path3;\n</code></pre>\n\n<p>Split input at <code>;</code>, make it a <code>HashSet&lt;string&gt;(..)</code> to get rid of dupes, join with <code>;</code> again.</p>\n\n<hr>\n\n<p><strong>Caveat</strong>: If your paths contain <code>;</code> as part of the directory name, this breaks - you would have to get more creative for that case - but the same would be valid for any RegEx you use.</p>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 4, "creation_date": 1519468782, "post_id": 48961672, "comment_id": 84929770, "body": "A very nice optimization \ud83d\udc4d Although <code>split</code> is still significantly faster: <a href=\"https://gist.github.com/haukex/eeebfdaf0951e32be4d0cb5eee3e982d\" rel=\"nofollow noreferrer\">gist.github.com/haukex/eeebfdaf0951e32be4d0cb5eee3e982d</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1519584629, "post_id": 48961672, "comment_id": 84959214, "body": "Why are you claiming <b><i>most optimised</i></b>? That&#39;s a very hard thing to prove."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1519585042, "post_id": 48961672, "comment_id": 84959390, "body": "Because I know what I&#39;m talking about?! It eliminates much of backtracks and fails soon encountering a wrong path."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 1, "last_activity_date": 1519468098, "last_edit_date": 1519468098, "creation_date": 1519467283, "answer_id": 48961672, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48961672#48961672", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>Perl, most optimized one-liner RegEx version:</p>\n\n<pre><code>(?&lt;![^;])([^;]++;)(?=(?&gt;[^;]*;)*?\\1)\n</code></pre>\n\n<p>On your own input string, your own regex takes ~114000 steps to find all matches but with this one it takes 567 steps to accomplish.</p>\n\n<p>Over 40000 occurrences found in ~4 seconds:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QKDZB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QKDZB.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://regex101.com/r/La4Y60/1\" rel=\"nofollow noreferrer\">Live demo</a></p>\n\n<p>RegEx Breakdown:</p>\n\n<pre><code>(?&lt;!    # A Negative lookbehind\n    [^;]    # Should be anything other than `;`\n)   # End of lookbehind\n(   # Capturing group #1\n    [^;]++; # Match anything up to first `;`\n)   # End of CG #1\n(?= # A Positive lookahead\n    (?&gt;[^;]*;)*?    # Skip over next path, don't backtrack\n    \\1  # Until an occurrence\n)   # End of lookahead\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 1, "last_activity_date": 1519479263, "creation_date": 1519479263, "answer_id": 48963429, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48963429#48963429", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>In Perl,</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# always use these two\nuse strict;\nuse warnings;\n\nmy $paths = 'C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;';\n\nprint \"$paths\\n\";\n{\n    my %temporary_hash = map { $_ =&gt; 1 } split( q{;}, $paths );\n    $paths = join( q{;}, keys %temporary_hash );\n}\nprint \"$paths\\n\";\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlfaq4.html#How-can-I-remove-duplicate-elements-from-a-list-or-array%3F\" rel=\"nofollow noreferrer\"><code>perldoc -q duplicate</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1519571503, "last_edit_date": 1519571503, "creation_date": 1519562989, "answer_id": 48973618, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48973618#48973618", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>In Perl it takes one line to do it using the library <a href=\"http://search.cpan.org/~pevans/Scalar-List-Utils-1.50/lib/List/Util.pm\" rel=\"nofollow noreferrer\"><code>List::Util</code></a> which is core and highly optimized:</p>\n\n<pre><code>my $newpaths = join ';', uniq split /;/, $paths;\n</code></pre>\n\n<p>How does it work? <code>split</code> will create a list of paths splitting around the <code>;</code> character;<code>uniq</code> will make sure there are no repetitions; <code>join</code> will create a string of paths separated with <code>;</code> again.</p>\n\n<p>If the case of the paths is not important, then:</p>\n\n<pre><code>my $newpaths = join ';', uniq split /;/, lc $paths;\n</code></pre>\n\n<p>The full program could be:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw( uniq );\n\nmy $paths = 'C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;';\n\nmy $newpaths = join ';', uniq split /;/, $paths;\n\nprint $newpaths, \"\\n\";\n</code></pre>\n\n<p>To make things interesting, let's time this solution against the proposed one that uses a temporaty hash. This is the timing program:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw( uniq );\nuse Time::HiRes qw( time );\n\nmy @p;\nfor( my $i = 0; $i &lt; 1000000; $i++ ) {\n  push @p, 'C:\\This\\is\\a\\random\\path' . int(rand(250000));\n}\nmy $paths = join ';', @p;\n\nmy $t = time();\nmy $newpaths = join ';', uniq split /;/, $paths;\n$t = time() - $t;\nprint 'Time with uniq: ', $t, \"\\n\";\n\n$t = time();\nmy %temp = map { $_ =&gt; 1 } split /;/, $paths;\n$newpaths = join ';', keys %temp;\n$t = time() - $t;\nprint 'Time with temporaty hash: ', $t, \"\\n\";\n</code></pre>\n\n<p>It generates 1 million random paths which should have a ratio of 5:1 duplicates (5 duplicates of each path). The timings for the server where I have tested this are:</p>\n\n<pre><code>Time with uniq: 0.849196910858154\nTime with temporaty hash: 1.29486703872681\n</code></pre>\n\n<p>Which makes the <code>uniq</code> library faster than the temporary hash. With 100:1 duplicates:</p>\n\n<pre><code>Time with uniq: 0.526581048965454\nTime with temporaty hash: 0.823433876037598\n</code></pre>\n\n<p>With 10000:1 duplicates:</p>\n\n<pre><code>Time with uniq: 0.423808097839355\nTime with temporaty hash: 0.736939907073975\n</code></pre>\n\n<p>Both algorithms work less the more duplicates found. <code>uniq</code> performs consistently better as the duplicates increase.</p>\n\n<p>Feel free to play with the numbers of the random generator.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -2, "last_activity_date": 1519572686, "last_edit_date": 1519572686, "creation_date": 1519566623, "answer_id": 48974192, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48974192#48974192", "title": "Regex, Remove duplicate paths from delimited string", "body": "\n\n<p>Since these are case-insensitive Windows paths, you presumably want to remove elements that are identical except for case</p>\n\n<p>(The next step would be to push each element through <code>File::Spec::canonpath</code> to find whether the paths are the same but differently-expressed, and then perhaps to account for links, but this is just about case-insensitivity)</p>\n\n<p>I don't know whether your request <em>\"using a regular expression\"</em> is a requirement, but it is, as you have found, a hugely inefficient way to do this</p>\n\n<p>I recommend a simple <code>split</code> on semicolons, and\n<a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\"><code>List::UtilsBy</code></a>\nto do the case-independent uniqueness</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse List::UtilsBy 'uniq_by';\n\nmy $p = 'C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;';\n\nmy $newp = join \"\", map { \"$_;\" } uniq_by { lc } split /;/, $p;\n\nsay $newp;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path3;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2214, "user_id": 7863149, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iv2fh.jpg?s=128&g=1", "display_name": "void", "link": "https://stackoverflow.com/users/7863149/void"}, "is_accepted": false, "score": 2, "last_activity_date": 1519629603, "creation_date": 1519629603, "answer_id": 48983293, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string/48983293#48983293", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>I think this is much simpler to do in perl using perl's hash idiom.</p>\n\n<p>Take a look at this example,</p>\n\n<pre><code>@items = (1,2,4,1,1,1);\n\nmy %uniq;\nundef @uniq{ @items };\nmy @uniques = keys %uniq;\n\nprint join \" \",@uniques\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 2 4\n</code></pre>\n\n<blockquote>\n  <p>Each key exists only once in a hash, assigning the same key to a hash multiple times stores only the most recent value associated with that key. This behavior has advantages! For example, to find unique elements of a list:</p>\n  \n  <p>Using <strong>undef</strong> with a hash slice sets the values of the hash to undef. This idiom is the <strong>cheapest way</strong> to perform set operations with a hash.</p>\n</blockquote>\n\n<p>The above was taken from the book <strong>Modern perl books</strong> Here's the link for you to check up. <a href=\"http://modernperlbooks.com/books/modern_perl_2016/03-perl-language.html#VGhlVGVybmFyeUNvbmRpdGlvbmFsT3BlcmF0b3I\" rel=\"nofollow noreferrer\">Hash idioms</a></p>\n\n<p>We can clearly make use of this in your scenario.</p>\n\n<pre><code>use feature \"say\";\n\nmy $sample_text= C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;;\n\n#Split the paths seperated by ';' into an array of paths \nmy @path_arr=  split /;/,$sample_text;\n\nsay \"Path files with duplicates\";\nprint join \"\\n\",@path_arr;\nprint \"------------------------\";\n\nmy %temp_hash;                     } THIS \nundef @temp_hash{@path_arr};       }    IS WHAT \nmy @unique  = keys %temp_hash;     }       YOU WANT\n\nsay \"Path files without duplicates\";\n\nprint join \"\\n\",@unique;\n</code></pre>\n\n<p>Ouput:</p>\n\n<pre><code>Path files with duplicates:\nC:\\Users\\user\\Desktop\\TESTING\\path1\nC:\\Users\\user\\Desktop\\TESTING\\path5\nC:\\Users\\user\\Desktop\\TESTING\\path1\nC:\\Users\\user\\Desktop\\TESTING\\path6\nC:\\Users\\user\\Desktop\\TESTING\\path1\nC:\\Users\\user\\Desktop\\TESTING\\path3\nC:\\Users\\user\\Desktop\\TESTING\\path1\nC:\\Users\\user\\Desktop\\TESTING\\path3\n-----------------------------\nPath files without duplicates:\nC:\\Users\\user\\Desktop\\TESTING\\path1\nC:\\Users\\user\\Desktop\\TESTING\\path3\nC:\\Users\\user\\Desktop\\TESTING\\path6\nC:\\Users\\user\\Desktop\\TESTING\\path5\n</code></pre>\n\n<p>I believe this is the fastest way to achieve what you want. If performance is an issue.</p>\n"}], "owner": {"reputation": 95, "user_id": 9405126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GC3yWGSiBlo/AAAAAAAAAAI/AAAAAAAAAAA/TG2LCVz0iFA/photo.jpg?sz=128", "display_name": "Troy Harter", "link": "https://stackoverflow.com/users/9405126/troy-harter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "answer_count": 8, "score": 7, "last_activity_date": 1519629603, "creation_date": 1519465559, "last_edit_date": 1519465848, "question_id": 48961457, "link": "https://stackoverflow.com/questions/48961457/regex-remove-duplicate-paths-from-delimited-string", "title": "Regex, Remove duplicate paths from delimited string", "body": "<p>I'm trying to remove duplicate file paths from a semicolon delimited strings using a regular expression.  Order of the final paths does not matter.</p>\n\n<p>Example Input:</p>\n\n<pre><code>C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>C:\\Users\\user\\Desktop\\TESTING\\path5;C:\\Users\\user\\Desktop\\TESTING\\path6;C:\\Users\\user\\Desktop\\TESTING\\path1;C:\\Users\\user\\Desktop\\TESTING\\path3;\n</code></pre>\n\n<p>I have the following regex that works but is very slow when the input strings get very long.  Add to this running it over thousands of lines and the time is takes is very bad.</p>\n\n<pre><code>\\b([^;]+)(?=.*;\\1;);\n</code></pre>\n\n<p>Any tips on how to improve the performance of this is much appreciated!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1519420880, "post_id": 48956369, "comment_id": 84919606, "body": "There&#39;s no word boundary between the space and <code>-</code> that precedes the <code>d</code>. Try <code>-d\\b</code> or <code>(?&lt;= )-d\\b</code>"}, {"owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1519421087, "post_id": 48956369, "comment_id": 84919678, "body": "this is the kind of thing I&#39;m trying to catch:     echo &quot;--tags a-b-c-d -d -e foo=bar&quot; | perl -ne &#39;$_ =~ s|\\b-d\\b||; print $_&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "edited": false, "score": 1, "creation_date": 1519421409, "post_id": 48956460, "comment_id": 84919802, "body": "you are absolutely right.  a dash does NOT belong to &#39;\\w&#39;.  I didn&#39;t see that at first."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1519421509, "post_id": 48956460, "comment_id": 84919837, "body": "This is the correct answer. I&#39;ve deleted my answer as it may fail against <code>-</code>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1519421656, "post_id": 48956460, "comment_id": 84919914, "body": "You may add this link for a working code demo if you&#39;d like: <a href=\"https://tio.run/##FcJLCoAgFAXQrdwkyAZvBSUtomE/NC2DUNGG0taNDkfJZEsxu/VgRI88E@wFSYp20vgbHN4LJSNDRjDxBjmDpt4gXqTMh76aViwtaT5U89jm3CHEyz2ot6aUDw\" rel=\"nofollow noreferrer\">tio.run/##FcJLCoAgFAXQrdwkyAZvBSUtomE/NC2DUNGG0taNDkfJZEsxu/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "edited": false, "score": 1, "creation_date": 1519423576, "post_id": 48956460, "comment_id": 84920688, "body": "@senor: An ASCII &quot;word&quot; character is very simply any alphanumeric character with the awkward addition of underscore. I can guess at what the designers were thinking, but to me it&#39;s as frustrating as <code>readdir</code> also returning <code>.</code> and <code>..</code>, which are <i>never</i> useful. It&#39;s also worth pointing out that <code>\\b</code> will match a before a &quot;word&quot; character at the beginning of the string, or after one at the end. That is, it doesn&#39;t require a preceding or succeeding &quot;non-word&quot; character to kick in."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519428924, "post_id": 48956460, "comment_id": 84922336, "body": "@ysth: <i>&quot;It means ... a transition between word characters and non-word characters&quot;</i> I often encounter this misapprehension, but as I wrote above it means <code>(?&lt;!\\w)(?=\\w)|(?&lt;=\\w)(?!\\w)</code>, not <code>(?&lt;=\\W)(?=\\w)|(?&lt;=\\w)(?=\\W)</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519431787, "post_id": 48956460, "comment_id": 84923001, "body": "@ysth: I was pretty sure you would know, I just wanted to leave an annotation for the benefit of the future of mankind!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1519431647, "last_edit_date": 1519431647, "creation_date": 1519421249, "answer_id": 48956460, "question_id": 48956369, "link": "https://stackoverflow.com/questions/48956369/s-b-d-b-regex-not-working-as-expected/48956460#48956460", "title": "s|\\b-d\\b|| regex not working as expected", "body": "<p><code>\\b</code> does not mean is preceded or followed by whitespace, it means a word boundary (a transition into or out of a sequence of word characters); since <code>-</code> is not a word character, <code>\\b-</code> means <code>-</code> has to have a word character before it.</p>\n\n<p>I'm guessing maybe you mean <code>s|(?&lt;!\\S)-d(?!\\S)||</code> (<code>-d</code> neither preceded nor followed by a non-whitespace character.</p>\n\n<p><a href=\"https://tio.run/##FYhNCoAgFAav8hVBtngnqPAQbQPxrxQiRVtKVzeDgWFGyexqtdoF9GRA9Mgzw3lIUqT/07A4QliVTK16FESbLtBtMQ4C64tcGF@6fZvIMP67lHNGTP5@MIix1g8\" rel=\"nofollow noreferrer\">See the code in use here</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1519425798, "creation_date": 1519425798, "answer_id": 48957242, "question_id": 48956369, "link": "https://stackoverflow.com/questions/48956369/s-b-d-b-regex-not-working-as-expected/48957242#48957242", "title": "s|\\b-d\\b|| regex not working as expected", "body": "<p>Unlike <code>d</code>, <code>-</code> isn't a word char, so use <code>(?&lt;!\\w)</code> instead of <code>\\b</code>.</p>\n\n<hr>\n\n<pre><code>\\b\n</code></pre>\n\n<p>means</p>\n\n<pre><code># At a word char that's not preceded by a word char, or\n# after a word char that's not followed by a word char.\n(?&lt;!\\w)(?=\\w) | (?&lt;=\\w)(?!\\w)\n</code></pre>\n\n<p>so </p>\n\n<pre><code>\\b -d \\b\n</code></pre>\n\n<p>means</p>\n\n<pre><code>(?: (?&lt;!\\w)(?=\\w)|(?&lt;=\\w)(?!\\w) ) -d (?: (?&lt;!\\w)(?=\\w)|(?&lt;=\\w)(?!\\w) )\n</code></pre>\n\n<p>Since <code>-</code> isn't a word char, and since <code>d</code> is a word char, the above simplifies to the following:</p>\n\n<pre><code>(?&lt;=\\w) -d (?!\\w)\n</code></pre>\n\n<p>If <code>-</code> was a word char, the above would simplify to the following instead:</p>\n\n<pre><code>(?&lt;!\\w) -d (?!\\w)\n</code></pre>\n\n<p>That is what you want, or just</p>\n\n<pre><code>(?&lt;!\\w) -d \\b\n</code></pre>\n\n<p>(<em>Spaces added for readability. Either remove the spaces or use <code>/x</code>.</em>)</p>\n"}], "owner": {"reputation": 710, "user_id": 1099103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e60172669e9d630a88b03eabdc5b8a9?s=128&d=identicon&r=PG", "display_name": "senorsmile", "link": "https://stackoverflow.com/users/1099103/senorsmile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48956460, "answer_count": 2, "score": 0, "last_activity_date": 1519489844, "creation_date": 1519420794, "last_edit_date": 1519489844, "question_id": 48956369, "link": "https://stackoverflow.com/questions/48956369/s-b-d-b-regex-not-working-as-expected", "title": "s|\\b-d\\b|| regex not working as expected", "body": "<p>The following one liner is not working as I'd expect: </p>\n\n<pre><code>echo \"--tags hi -d -e foo=bar\" | perl -ne '$_ =~ s|\\b-d\\b||; print $_'\n</code></pre>\n\n<p>The \"-d\" remains. After looking at it for 15 minutes, I decided I should get help.  </p>\n\n<p>This does work ok: </p>\n\n<pre><code>echo \"--tags hi -d -e foo=bar\" | perl -ne '$_ =~ s|-d||; print $_'\n</code></pre>\n\n<p>but of course may not always work... i.e. I need word boundary markers in the search.  </p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 4, "creation_date": 1519395492, "post_id": 48949796, "comment_id": 84906038, "body": "<code>sentences</code> is an array. I don&#39;t know Perl but it looks like you&#39;re accessing it as if it were a plain object. So maybe try getting the first index first? Just a guess."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519398102, "post_id": 48949796, "comment_id": 84907832, "body": "The <code>sentences</code> array may have multiple elements. Do you want <code>ner</code> from all the <code>tokens</code> from all the <code>sentences</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519398662, "post_id": 48949796, "comment_id": 84908184, "body": "It would help a lot if you told us about the error messages that you&#39;re certainly getting from this code."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1519399708, "post_id": 48949796, "comment_id": 84908883, "body": "I think the syntax should be <code>$json-&gt;{sentences}[0]{tokens}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1519406751, "last_edit_date": 1519406751, "creation_date": 1519401599, "answer_id": 48951796, "question_id": 48949796, "link": "https://stackoverflow.com/questions/48949796/accessing-a-decoded-json-data-structure/48951796#48951796", "title": "Accessing a decoded JSON data structure", "body": "<p>JSON objects are represented with <code>{}</code>, and arrays with <code>[]</code>. You're missing a couple levels of arrays in your attempt:</p>\n\n<pre><code>{                                    # $json\n    \"sentences\": [                   # $json-&gt;{sentences}\n        {                            # $json-&gt;{sentences}-&gt;[0]\n            \"tokens\": [              # $json-&gt;{sentences}-&gt;[0]-&gt;{tokens}\n                {                    # $json-&gt;{sentences}-&gt;[0]-&gt;{tokens}-&gt;[0]\n                    \"ner\": \"PERSON\"  # $json-&gt;{sentences}-&gt;[0]-&gt;{tokens}-&gt;[0]-&gt;{ner}\n</code></pre>\n\n<p>So instead of this:</p>\n\n<p><code>$json-&gt;{sentences}-&gt;{tokens}</code></p>\n\n<p>You want this:</p>\n\n<p><code>$json-&gt;{sentences}-&gt;[0]-&gt;{tokens}-&gt;[0]-&gt;{ner}</code></p>\n\n<p>If you want <em>all</em> values for the <code>ner</code> key and not just the value at specific subscripts of <code>sentences</code> and <code>tokens</code>, you'll need to use iteration:</p>\n\n<pre><code>my $obj = decode_json($json);\n\nfor my $sentence (@{$obj-&gt;{sentences}}) {\n    for my $token (@{$sentence-&gt;{tokens}}) {\n        print \"$token-&gt;{ner}\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519415236, "post_id": 48952808, "comment_id": 84917096, "body": "That&#39;s a useful lesson. I don&#39;t know whether it was deliberate, but I agree that Brian&#39;s <code>no warnings qw(experimental::postderef)</code> is inappropriate in production code. If you&#39;re going to use experimental features then you damn well want a warning to remind you of the possible source of spurious errors. A &quot;clean&quot; build is not such a great goal."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519417490, "post_id": 48952808, "comment_id": 84918172, "body": "<i>&quot;<code>use v5.24; # why not?!</code>&quot;</i> because you&#39;re using it specifically to enable the <code>postderef</code> (and <code>say</code>) features, which is far from obvious."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519419336, "post_id": 48952808, "comment_id": 84918981, "body": "For the record, the &quot;<b>why not?!</b>&quot; above is meant to be a tongue-in-cheek inducement to try nice features of recent <code>perl</code>s. It is not meant as a commentary on <a href=\"https://stackoverflow.com/users/2766176/brian-d-foy\">@brian d foy</a>&#39;s blog post which predates <code>5.24</code>. It is a useful and succinct introduction suitable to the OP&#39;s level (and more helpful to the Perl beginner than official documentation on the feature)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519422596, "post_id": 48952808, "comment_id": 84920295, "body": "I didn&#39;t take it to be a critique in any way, and my <i>&quot;I agree&quot;</i> was inappropriate. In hindsight I would write <i>&quot;...but I applaud the lack of the corresponding <code>no warnings qw&#47; experimental::postderef &#47;</code> that Brian uses&quot;</i>. It is those who used a <code>no warnings</code> who are squirming now that v5.28 is discontinuing <code>experimental::smartmatch</code>. On a parallel idea, I would be careful about writing code that is clearly functionally complete, including even a shebang line, that you would prefer not to see in production code. Like it or not you are an authority that people will like to cite"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519422959, "post_id": 48952808, "comment_id": 84920435, "body": "I must add that trying <i>any</i> features of <i>any</i> <code>perl</code> is to be applauded. A few minutes of engaged experimentation would quickly correct very many misunderstandings of Perl&#39;s operators such as <code>my @parts = split &#47;;&#47;, @data</code> that appeared only today, and the knowledge would be <i>absorbed</i> instead of applied and discarded."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1519405221, "creation_date": 1519405221, "answer_id": 48952808, "question_id": 48949796, "link": "https://stackoverflow.com/questions/48949796/accessing-a-decoded-json-data-structure/48952808#48952808", "title": "Accessing a decoded JSON data structure", "body": "<pre><code>#!/usr/bin/env perl\n\nuse v5.24; # why not?!\nuse utf8;\nuse strict;\nuse warnings;\n\nuse open qw(:std utf8);\n\nuse JSON::MaybeXS qw( decode_json );\n\nmy $json = \"...\";\n\nmy $x = decode_json $json;\n\nfor my $sentence ($x-&gt;{sentences}-&gt;@*) {\n    for my $token ($sentence-&gt;{tokens}-&gt;@*) {\n        say $token-&gt;{ner};\n    }\n}\n</code></pre>\n\n<p>See <a href=\"https://www.effectiveperlprogramming.com/2014/09/use-postfix-dereferencing/\" rel=\"nofollow noreferrer\">Use postfix dereferencing</a>. Of course, you can just use <code>@{ $x-&gt;{sentences} }</code> and <code>@{ $sentence-&gt;{tokens} }</code> if you must have compatibility with older <code>perl</code>s.</p>\n"}], "owner": {"reputation": 9, "user_id": 4363075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tl-3CjMAHaE/AAAAAAAAAAI/AAAAAAAAADE/BuFhy1D8XDs/photo.jpg?sz=128", "display_name": "madrigal987", "link": "https://stackoverflow.com/users/4363075/madrigal987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1519649085, "answer_count": 2, "score": -2, "last_activity_date": 1519410593, "creation_date": 1519395197, "last_edit_date": 1519410593, "question_id": 48949796, "link": "https://stackoverflow.com/questions/48949796/accessing-a-decoded-json-data-structure", "closed_reason": "Needs more focus", "title": "Accessing a decoded JSON data structure", "body": "<p>I am trying to extract a specific entry from this JSON using Perl</p>\n\n<pre><code>{\n    \"sentences\": [\n        {\n            \"index\": 0,\n            \"tokens\": [\n                {\n                    \"index\":                1,\n                    \"word\":                 \"\u76e7\u65fa\u9054\",\n                    \"originalText\":         \"\u76e7\u65fa\u9054\",\n                    \"lemma\":                \"\u76e7\u65fa\u9054\",\n                    \"characterOffsetBegin\": 0,\n                    \"characterOffsetEnd\":   3,\n                    \"pos\":                  \"NN\",\n                    \"ner\":                  \"PERSON\"\n                },\n                {\n                    \"index\":                2,\n                    \"word\":                 \"\u63f4\u52a9\",\n                    \"originalText\":         \"\u63f4\u52a9\",\n                    \"lemma\":                \"\u63f4\u52a9\",\n                    \"characterOffsetBegin\": 3,\n                    \"characterOffsetEnd\":   5,\n                    \"pos\":                  \"NN\",\n                    \"ner\":                  \"O\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>I would like access to <code>tokens</code> and then to <code>ner</code>, I have been trying to use this code but it doesn`t return anything</p>\n\n<pre><code>$json = decode_json $json_string;\n\nmy $tokens = $json-&gt;{\"sentences\"}-&gt;{\"tokens\"};\n\nprint Dumper(\\$tokens);\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "strawberry-perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519378794, "post_id": 48944598, "comment_id": 84896363, "body": "Your code seems completely unrelated to the data that you show and I don&#39;t see how it can generate the errors you say it does. <code>$self-&gt;session(&#39;userDetails&#39;)</code> returns a hash reference, not a hash, and <code>roles</code> is an array, not a hash. There is no mention of <code>family</code> in your data, and you never declare or define <code>%HoH</code> (which is a lazy name for a variable anyway)."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519379012, "post_id": 48944598, "comment_id": 84896463, "body": "It is just a variable name. I just copied the foreach code from somewhere. Problem is with lines <code>my %userDetails = $self-&gt;session(&#39;userDetails&#39;); my %roles = $userDetails{&#39;roles&#39;};</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519379287, "post_id": 48944598, "comment_id": 84896599, "body": "You can&#39;t write working code by &quot;copying code from somewhere&quot;. You clearly have no idea what you&#39;re writing."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519379399, "post_id": 48944598, "comment_id": 84896653, "body": "I do have an idea of what I am writing. I am a PHP programmer trying to learn Perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519379525, "post_id": 48944598, "comment_id": 84896716, "body": "<a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\"><code>perldoc perldsc</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "edited": false, "score": 0, "creation_date": 1519794434, "post_id": 48952340, "comment_id": 85049692, "body": "Thanks a lot. Don&#39;t know why getting downvotes when the SO is meant for helping each other."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": true, "score": 0, "last_activity_date": 1519403432, "creation_date": 1519403432, "answer_id": 48952340, "question_id": 48944598, "link": "https://stackoverflow.com/questions/48944598/how-to-retrieve-hash-value-from-session-in-perl/48952340#48952340", "title": "How to retrieve hash value from session in Perl", "body": "<p>Just guessing blatantly</p>\n\n<pre><code>my %userDetails = %{$self-&gt;session('userDetails')};\nmy @roles = @{$userDetails{'roles'}};\nrequire Data::Dumper;\nforeach my $family ( @roles ) {\n    print Data::Dumper::Dumper($family);\n}\n</code></pre>\n\n<p>In your example</p>\n\n<blockquote>\n  <p>'roles' => [</p>\n</blockquote>\n\n<p>so this indicates that the value beneath the role attribute is an array reference.</p>\n\n<blockquote>\n  <p>$self->session('userDetails')</p>\n</blockquote>\n\n<p>might be hash, or more probably a hash-reference. I guessed the later. So if you have a reference to an \"element\" you derefence it first. See <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc perlref</a></p>\n"}], "owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 48952340, "answer_count": 1, "score": -2, "last_activity_date": 1519403432, "creation_date": 1519377574, "question_id": 48944598, "link": "https://stackoverflow.com/questions/48944598/how-to-retrieve-hash-value-from-session-in-perl", "title": "How to retrieve hash value from session in Perl", "body": "<p>I am storing a hash in session. I am trying to retrieve the values from session, but is not successful. I want to loop through the hash value in session to generate a select box. Below is the session value</p>\n\n<pre><code>$VAR1 = {\n          'userDetails' =&gt; {\n                           'roles' =&gt; [\n                                      {\n                                        'ln' =&gt; 'asdf',\n                                        'email' =&gt; 'test@example.com',\n                                        'session_id' =&gt; '14',\n                                        'is_active' =&gt; '0',\n                                        'role' =&gt; 'ndfbfd',\n                                        'facility_name' =&gt; 'jjjj',\n                                        'fn' =&gt; 'yyyyyy'\n                                      },\n                                      {\n                                        'ln' =&gt; 'asdf',\n                                        'email' =&gt; 'test@example.com',\n                                        'session_id' =&gt; '15',\n                                        'is_active' =&gt; '1',\n                                        'role' =&gt; 'ndfbfd',\n                                        'facility_name' =&gt; 'fbhsdf',\n                                        'fn' =&gt; 'yyyyyy'\n                                      },\n                                      {\n                                        'ln' =&gt; 'asdf',\n                                        'email' =&gt; 'test@example.com',\n                                        'session_id' =&gt; '16',\n                                        'is_active' =&gt; '1',\n                                        'role' =&gt; 'ndfbfd',\n                                        'facility_name' =&gt; 'mvsd',\n                                        'fn' =&gt; 'yyyyyy'\n                                      },\n                                      {\n                                        'ln' =&gt; 'asdf',\n                                        'email' =&gt; 'test@example.com',\n                                        'session_id' =&gt; '17',\n                                        'is_active' =&gt; '1',\n                                        'role' =&gt; 'bdfgre',\n                                        'facility_name' =&gt; 'jjjj',\n                                        'fn' =&gt; 'yyyyyy'\n                                      },\n                                      {\n                                        'ln' =&gt; 'asdf',\n                                        'email' =&gt; 'test@example.com',\n                                        'session_id' =&gt; '18',\n                                        'is_active' =&gt; '0',\n                                        'role' =&gt; 'gderere',\n                                        'facility_name' =&gt; 'jjjj',\n                                        'fn' =&gt; 'yyyyyy'\n                                      }\n                                    ],\n                           'ln' =&gt; 'asdf',\n                           'logged_in' =&gt; '1',\n                           'fn' =&gt; 'yyyyyy'\n                         },\n          'logged_in' =&gt; '1',\n          'username' =&gt; 'test@example.com'\n        };\n</code></pre>\n\n<p>I am trying to retrieve the roles from the session</p>\n\n<pre><code>my %userDetails = $self-&gt;session('userDetails');\nmy %roles = $userDetails{'roles'};\nforeach my $family ( keys %roles ) {\n    print \"$family: { \";\n    for my $role ( keys %{ $HoH{$family} } ) {\n        print \"$role=$HoH{$family}{$role} \";\n    }\n    print \"}\\n\";\n}\n</code></pre>\n\n<p>It is showing two errors.</p>\n\n<pre><code>Reference found where even-sized list expected.\nOdd number of elements in hash assignment.\n</code></pre>\n\n<p>When I change the code <code>my %userDetails = $self-&gt;session('userDetails');</code> to <code>my %userDetails = \\$self-&gt;session('userDetails');</code> I am getting the error </p>\n\n<pre><code>Odd number of elements in hash assignment.\nOdd number of elements in hash assignment.\n</code></pre>\n"}, {"tags": ["rest", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519377420, "post_id": 48943909, "comment_id": 84895687, "body": "What is the result of <code>$client-&gt;{_res}-&gt;dump</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519378909, "post_id": 48943909, "comment_id": 84896416, "body": "Please <a href=\"https://stackoverflow.com/posts/48943909/edit\">edit</a> your question to include the information there. It is all but impossible to read in a comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519379783, "post_id": 48943909, "comment_id": 84896857, "body": "Okay, at a guess the module isn&#39;t intended to cope with chunked response data. I suggest you try <code>my $json = $client-&gt;{_res}-&gt;decoded_content</code> and <code>my $response = from_json($json)</code>."}, {"owner": {"reputation": 324, "user_id": 5268701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6337f6d67e579cb0a4b7c668e48d3d47?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul.B", "link": "https://stackoverflow.com/users/5268701/rahul-b"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519380082, "post_id": 48943909, "comment_id": 84897020, "body": "Thanks! Tried that as well same error. I will see if I can change server code to send data in some other way."}, {"owner": {"reputation": 324, "user_id": 5268701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6337f6d67e579cb0a4b7c668e48d3d47?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul.B", "link": "https://stackoverflow.com/users/5268701/rahul-b"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519383753, "post_id": 48943909, "comment_id": 84899019, "body": "Thank you @Borodin I have finally given up and my friend suggested me to use curl and it is working fine. Thanks again for your time and effort!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519395073, "post_id": 48943909, "comment_id": 84905740, "body": "Okay, I&#39;m sorry I couldn&#39;t fix it. Is this a public server? Is there a way I can try it for myself, perhaps on an insecure test server? This really needs to be resolved as <code>REST::Client</code> is a fairly popular module. By the way, did you check that <code>LWP</code> and <code>REST::Client</code> were up to date? Can you also show your solution using <code>curl</code>?"}, {"owner": {"reputation": 324, "user_id": 5268701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6337f6d67e579cb0a4b7c668e48d3d47?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul.B", "link": "https://stackoverflow.com/users/5268701/rahul-b"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519628768, "post_id": 48943909, "comment_id": 84971002, "body": "Added code snippet using curl (in the question). The web service is not public. However, it is easy to replicate the issue which I did on my home computer as well. Need to check LWP and REST::Client versions. Will give more details on how to replicate the issue. However, you would have to run a sample web service locally using Eclipse (I can share the details). Let me know?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1519639237, "post_id": 48943909, "comment_id": 84975921, "body": "Yes, please go ahead and post the instructions to enable us to replicate the bug."}, {"owner": {"reputation": 324, "user_id": 5268701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6337f6d67e579cb0a4b7c668e48d3d47?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul.B", "link": "https://stackoverflow.com/users/5268701/rahul-b"}, "edited": false, "score": 0, "creation_date": 1519647916, "post_id": 48943909, "comment_id": 84981504, "body": "You can run this sample web service. &quot;<a href=\"https://spring.io/guides/gs/rest-service/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/rest-service</a>&quot; . If you have STS (Spring Tool Suite) it would take you minutes to make it running."}], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 196096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a96f55ea446d1e9c2e5b4286bf432ee?s=128&d=identicon&r=PG", "display_name": "Mose", "link": "https://stackoverflow.com/users/196096/mose"}, "is_accepted": false, "score": 0, "last_activity_date": 1556295548, "creation_date": 1556295548, "answer_id": 55871515, "question_id": 48943909, "link": "https://stackoverflow.com/questions/48943909/restclient-unable-to-parse-get-response-json-object/55871515#55871515", "title": "REST::Client | unable to parse GET response JSON object", "body": "<p>I have a similar issue that I am working through. I suspect (Have not verified yet) that the root cause is that the server is not passing the <code>Encoding-Content</code> Response Header, therefore <code>LWP::UserAgent</code> and <code>HTTP::Response</code> are not attempting to return the decoded string. I am going to try to isolate where this decision is being made and see what options are available and request a patch. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/55837177/perl-restclient-garbage-data-in-response/55866488#55866488\">Perl REST::Client - Garbage data in response</a></p>\n"}], "owner": {"reputation": 324, "user_id": 5268701, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6337f6d67e579cb0a4b7c668e48d3d47?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul.B", "link": "https://stackoverflow.com/users/5268701/rahul-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556295548, "creation_date": 1519374499, "last_edit_date": 1519628630, "question_id": 48943909, "link": "https://stackoverflow.com/questions/48943909/restclient-unable-to-parse-get-response-json-object", "title": "REST::Client | unable to parse GET response JSON object", "body": "<p>This is the first time i am writing a Perl client to consume a REST service. I am using REST::Client and JSON perl module. The web service returns data in JSON format. The problem is when I try to use from_json or decode_json method on client->responseContent() method, I am getting an error saying </p>\n\n<p><strong>\"malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before \"HTTP/1.1 200 \\r\\nCon...\"</strong></p>\n\n<p>The web service is ofcourse a stable one and works fine with other languages REST clients.</p>\n\n<p>After debugging the issue I found that client->responseContent() not only contains the JSON data but also the header information hence from_json is unable to parse it. Below is the snippet of the code:</p>\n\n<pre><code>my $url = \"/data\";\nmy $client = REST::Client-&gt;new();\n$client-&gt;setHost($host);\nmy $headers = {Accept =&gt; 'application/json'};\n$client-&gt;GET($url, $headers);\nmy $response = from_json($client-&gt;responseContent());\n</code></pre>\n\n<p>Not able to figure out this thing from two days now :-( </p>\n\n<p>Here is the dump of \"<strong>$client->{_res}->dump</strong>\"</p>\n\n<pre><code>Fri Feb 23 09:38:35 2018: HTTP/0.9 200 EOF\nClient-Date: Fri, 23 Feb 2018 09:38:35 GMT\nClient-Peer: 45.32.84.105:8282\nClient-Response-Num: 1\n\nHTTP/1.1 200 \\r\nContent-Type: application/json;charset=UTF-8\\r\nTransfer-Encoding: chunked\\r\nDate: Fri, 23 Feb 2018 09:38:33 GMT\\r\nConnection: close\\r\n\\r\n2000\\r\n[{\"REGION\":\"AP\",\"REMARK\":null,\"STATUS\":\"PROD\",\"UPDATED_TIME\":null,\"UPDATED_BY\":null,\"ROUTE_ID\":1,\"ROUTE_ID_VER\":20150310,\"USER_ROUTE_LOGIC\":\"|CAPTIVE|\",\"USER_DEST\":null,\"USER_ORDSIZE_TYPE\":null,\"MIN_USER_ORDSIZE_VAL\":0,\"MAX_USER_ORDSIZE_VAL\":100,\"TAG_775\":\"|1|\",\"CROSS_CURRENCY\":\"|Y|N|\",\"TAG_12703\":\"|PB-CS|\",\"COUNTRY\":\"|AU|HK|ID|IN|JP|KR|MY|SG|\",\"TAG_12207\":...\n(+ 423449 more bytes not shown)\n</code></pre>\n\n<p>Even when the transfer encoding is not chunked, I am getting the same issue;</p>\n\n<pre><code>Fri Feb 23 10:40:20 2018: HTTP/1.1 200 ^M\nContent-Type: application/json;charset=utf-8^M\nContent-Length: 1618^M\nDate: Fri, 23 Feb 2018 10:40:20 GMT^M\nConnection: close^M\n^M\n{ \"data\":[ {\n  \"REGION\" : \"AP\",\n  \"REMARK\" : \"\",\n  \"STATUS\" : \"PROD\",\n  \"UPDATED_TIME\" : \"\",\n  \"UPDATED_BY\" : \"\",\n</code></pre>\n\n<p>Ultimately, solved using curl command for now (Actual code snippet below):</p>\n\n<pre><code>my $command = \"curl '$url'\";\nmy $rules = qx/$command/;\n</code></pre>\n"}, {"tags": ["sql", "oracle", "perl", "oracle11g", "dbi"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1519371785, "post_id": 48943110, "comment_id": 84893135, "body": "I really appreciate your assistance, it makes perfect sense now."}], "tags": [], "owner": {"reputation": 28247, "user_id": 7998591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d596f1872edb66dc5bcbf7e7b07098b?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Nayak", "link": "https://stackoverflow.com/users/7998591/kaushik-nayak"}, "is_accepted": true, "score": 5, "last_activity_date": 1519371215, "last_edit_date": 1519371215, "creation_date": 1519370890, "answer_id": 48943110, "question_id": 48942960, "link": "https://stackoverflow.com/questions/48942960/oracle-merge-instead-of-insert/48943110#48943110", "title": "Oracle merge instead of insert?", "body": "<p>In your case, a  <code>MERGE</code> statement like this should work. Note that I am selecting a single record from <code>DUAL</code> table. you may use multiple <code>UNION ALL</code>s  from <code>DUAL</code> for multiple rows.</p>\n\n<pre><code>MERGE INTO yourtable target\n     USING (SELECT 1 AS id, 'value_1' AS column_1, 'value_2' AS column_2\n              FROM DUAL) source\n        ON (source.id = target.id)\nWHEN MATCHED\nTHEN\n   UPDATE SET\n      target.column_1 = source.column_1, target.column_2 = source.column_2\nWHEN NOT MATCHED\nTHEN\n   INSERT     (column_1, column_2)\n       VALUES (source.column_1, source.column_2);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2594, "favorite_count": 0, "accepted_answer_id": 48943110, "answer_count": 1, "score": 5, "last_activity_date": 1519375252, "creation_date": 1519370159, "last_edit_date": 1519375252, "question_id": 48942960, "link": "https://stackoverflow.com/questions/48942960/oracle-merge-instead-of-insert", "title": "Oracle merge instead of insert?", "body": "<p>I currently have an insert statement in a perl script using the <code>DBI</code> module that collects router interface data. It works each time, but obviously with Unique constraint error because some items exist when the script is re-run. I am trying to do a merge instead, but I am unsure of how to do it by not selecting data from another table like the examples I have seen. To better understand, the perl script collects data by running <code>ssh</code> to the devices and stores certain information into variables. for instance interface name will be <code>$interface</code>. etc.</p>\n\n<p>The current insert statement</p>\n\n<pre><code>$dbh-&gt;do(\"INSERT INTO table VALUES (?, ?, ?, ?, ?)\", undef, $interface, $id, $device, $description, $user);\n</code></pre>\n\n<p>I started writing the merge funtion, but I cannot seem to grasp how this will work, as all the merge statements do select from other tables and matching data and then do update/insert? The below example selects data from from 2 different tables and matching, however I am only looking at one table and want to merge new data.</p>\n\n<pre><code>MERGE INTO bonuses D\n   USING (SELECT employee_id, salary, department_id FROM employees\n   WHERE department_id = 80) S\n   ON (D.employee_id = S.employee_id)\n   WHEN MATCHED THEN UPDATE SET D.bonus = D.bonus + S.salary*.01\n     DELETE WHERE (S.salary &gt; 8000)\n   WHEN NOT MATCHED THEN INSERT (D.employee_id, D.bonus)\n VALUES (S.employee_id, S.salary*.01)\n WHERE (S.salary &lt;= 8000); \n</code></pre>\n\n<p>So it is merging data into <code>bonuses</code> but matching it from employees. Even if such a statement would have worked, is it even possible using such a statement in a perl script?</p>\n"}, {"tags": ["perl", "docker", "jenkins-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 542, "user_id": 1150133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed8e50a887128bd9a3e01a5dd291111e?s=128&d=identicon&r=PG", "display_name": "gypark", "link": "https://stackoverflow.com/users/1150133/gypark"}, "is_accepted": true, "score": 4, "last_activity_date": 1519363602, "creation_date": 1519363602, "answer_id": 48941659, "question_id": 48940834, "link": "https://stackoverflow.com/questions/48940834/jenkins-different-result-from-pipeline-and-freestyle-build-carton-install-fai/48941659#48941659", "title": "Jenkins - Different result from pipeline and freestyle build (carton install failed to install some modules)", "body": "<p>I found the answer.</p>\n\n<p>I'd named the pipeline job <code>TestProject(pipeline)</code> in Jenkins.</p>\n\n<p>Job name contains parentheses,\nso does the name of workspace directory,\nand BOOM inside a shell command...</p>\n\n<pre><code>cc -c  -I/Users/gypark/temp/b(test)/local/..omitted../Install\n  -fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -O3   \n  -DVERSION=\\\"0.005\\\" -DXS_VERSION=\\\"0.005\\\"  \n  \"-I/Users/gypark/perl5/perlbrew/perls/perl-5.18/lib/5.18.1/darwin-thread-multi-2level/CORE\"   filehandles.c\n/bin/sh: -c: line 0: syntax error near unexpected token `(\n</code></pre>\n\n<p>I made a new pipeline project, without a parenthesis in its name. And everything worked succesfully.</p>\n"}], "owner": {"reputation": 542, "user_id": 1150133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed8e50a887128bd9a3e01a5dd291111e?s=128&d=identicon&r=PG", "display_name": "gypark", "link": "https://stackoverflow.com/users/1150133/gypark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 48941659, "answer_count": 1, "score": 4, "last_activity_date": 1519363602, "creation_date": 1519357954, "last_edit_date": 1519361012, "question_id": 48940834, "link": "https://stackoverflow.com/questions/48940834/jenkins-different-result-from-pipeline-and-freestyle-build-carton-install-fai", "title": "Jenkins - Different result from pipeline and freestyle build (carton install failed to install some modules)", "body": "<p>I have a Perl project, including <code>cpanfile</code>.</p>\n\n<pre><code>REPO/\n  Jenkinsfile\n  PROJECT1/\n    cpanfile\n    local/\n  PROJECT2/\n    cpanfile -&gt; ../PROJECT1/cpanfile\n    local/   -&gt; ../PROJECT1/local\n  ...\n</code></pre>\n\n<p>I'm running Jenkins in a Docker container from <code>jenkinsci/blueocean</code> image.</p>\n\n<p>Now I want to build, test, and deploy this Perl project using Jenkins.</p>\n\n<p>At first, I tried to use a freestyle build. This is my build script:</p>\n\n<pre><code>docker run -t --rm \\\n  -v $WORKSPACE:/usr/src/myapp -w /usr/src/myapp/PROJECT1 \\\n  localhost:20000/perl-carton:5.26 \\\n  carton install\n</code></pre>\n\n<ul>\n<li><code>localhost:20000/perl-carton:5.26</code> is a Docker image that I'd built from <code>perl:5.26</code>. I added to this image some Perl modules like Carton and some dependencies like libgd-dev for my project.</li>\n<li>I mounted the workspace to <code>/usr/src/myapp</code> and set a working directory of the container to <code>PROJECT1</code> below the workspace, because <code>cpanfile</code> is there.</li>\n</ul>\n\n<p>This <code>docker run ...</code> command works well in my host machine(replacing <code>$WORKSPACE</code> with <code>$PWD</code>).</p>\n\n<p>This command works well also in the Jenkins container.</p>\n\n<p>Then, I tried to use Jenkins Pipeline. I made <code>Jenkinsfile</code> like this:</p>\n\n<pre><code>// Jenkinsfile\npipeline {\n    agent none\n    stages {\n        stage('Build') {\n            agent {\n                docker {\n                    image 'localhost:20000/perl-carton:5.26'\n//                    args '-v $WORKSPACE:/usr/src/myapp -w /usr/src/myapp/PROJECT1'\n                }\n            }\n            steps {\n                sh 'cd PROJECT1 &amp;&amp; carton install'\n            }\n    ...\n}\n</code></pre>\n\n<ul>\n<li>I commented out <code>-v ... -w ...</code> because I'd found, from an output, that Jenkins mounts its workspace and set the working directory to that workspace by force: <code>docker run ... -w /var/jenkins_home/workspace/JOBNAME --volumes-from DOCKER_CONTAINER_ID ...</code>. So my <code>-w ...</code> option was overwritten.</li>\n</ul>\n\n<p>I hoped this pipeline would do the same job. But when I run this pipeline, it fails to install some modules.</p>\n\n<pre><code>[AppStore(pipeline)] Running shell script\n+ cd PROJECT1\n+ carton install\nInstalling modules using /var/jenkins_home/workspace/JOBNAME/PROJECT1/cpanfile\n! Installing DBD::SQLite failed. See /root/.cpanm/work/1519351987.18/build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'DBD::SQLite' is not installed\n! Bailing out the installation for DBIx-Class-0.082840.\n...\nInstalling modules failed\n</code></pre>\n\n<p>Finally, I tried to modify Jenkinsfile not to use <code>agent docker</code> and let it run docker in a shell command:</p>\n\n<pre><code>agent any\nsteps {\n    sh 'docker run -t --rm -v $WORKSPACE:/usr/src/myapp -w /usr/src/myapp/PROJECT1 localhost:20000/perl-carton:5.26 carton install'\n}\n</code></pre>\n\n<p>It was successful as I'd expected.</p>\n\n<p>I have no idea of what causes this difference.</p>\n"}, {"tags": ["perl", "awk", "sed"], "answers": [{"tags": [], "owner": {"reputation": 16493, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "is_accepted": false, "score": 0, "last_activity_date": 1519339183, "last_edit_date": 1519339183, "creation_date": 1519338807, "answer_id": 48938321, "question_id": 48938123, "link": "https://stackoverflow.com/questions/48938123/data-transformation-using-sed/48938321#48938321", "title": "Data transformation using sed", "body": "<p>Replacing newlines with <code>sed</code> is a bit complicated (see <a href=\"https://stackoverflow.com/q/1251999/6770384\">this question</a>). It is easier to use <code>tr</code> for the newlines. The rest can be done by <code>sed</code>.</p>\n\n<p>The following command assumes that <code>yourFile</code> does not contain any <code>,</code>.</p>\n\n<pre><code>tr '\\n' , &lt; yourFile | sed 's/,*$/\\n/;s/,,/\\n/g'\n</code></pre>\n\n<p>The <code>tr</code> part converts all newlines to <code>,</code>. The resulting string will have no newlines.<br>\n<code>s/,*$/\\n/</code> removes trailing commas and appends a newline (text files usually end with a newline).<br>\n<code>s/,,/\\n/g</code> replaces <code>,,</code> by a newline. Two consecutive commas appear only where your original file contained two consecutive newlines, that is where the sections are separated by an empty line.</p>\n"}, {"tags": [], "owner": {"reputation": 9689, "user_id": 1475324, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/59dca664e41227733ba8a0d1b4f9d73f?s=128&d=identicon&r=PG", "display_name": "iamauser", "link": "https://stackoverflow.com/users/1475324/iamauser"}, "is_accepted": false, "score": 2, "last_activity_date": 1519339651, "creation_date": 1519339651, "answer_id": 48938496, "question_id": 48938123, "link": "https://stackoverflow.com/questions/48938123/data-transformation-using-sed/48938496#48938496", "title": "Data transformation using sed", "body": "<p><code>xargs</code> could do it,</p>\n\n<pre><code>$ xargs -n4 &lt; file | tr ' ' ','\nA,B,C,D\nE,F,G,H\nI,J,K,L\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1519341703, "post_id": 48938722, "comment_id": 84884659, "body": "I came up with <code>perl -00nE &#39;chomp; s&#47;\\s+&#47;,&#47;g; say&#39; file</code> to prevent double spacing the output."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1519343544, "post_id": 48938722, "comment_id": 84885251, "body": "@GillesQuenot Because it will set the output record separator to the same value as the input record separator if it&#39;s omitted, and we don&#39;t want that. So, we have to set it first, before modifying <code>$&#47;</code>."}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519358141, "post_id": 48938722, "comment_id": 84888686, "body": "@ikegami yup, it would work <code>perl -l -00 -ane &#39;print join &quot;,&quot;, @F&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519363734, "post_id": 48938722, "comment_id": 84890149, "body": "Adding <code>-F$&quot;\\n&quot;</code> would support lines with space."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 8, "last_activity_date": 1519362716, "last_edit_date": 1519362716, "creation_date": 1519340935, "answer_id": 48938722, "question_id": 48938123, "link": "https://stackoverflow.com/questions/48938123/data-transformation-using-sed/48938722#48938722", "title": "Data transformation using sed", "body": "<p>Set the <a href=\"https://perldoc.perl.org/perlvar.html#$INPUT_RECORD_SEPARATOR\" rel=\"nofollow noreferrer\">input record separator</a> to paragraph mode (<a href=\"https://perldoc.perl.org/perlrun.html#*-0*[_octal/hexadecimal_]\" rel=\"nofollow noreferrer\"><code>-00</code></a>) and then split each record on any remaining whitespace:</p>\n\n<pre><code>$ perl -00 -ne 'print join(\",\" =&gt; split), \"\\n\"' test\n</code></pre>\n\n<hr>\n\n<p>Add <a href=\"https://perldoc.perl.org/perlrun.html#*-l*[_octnum_]\" rel=\"nofollow noreferrer\"><code>-l</code></a> to enable automatic newlines (but make sure it comes before <code>-00</code>, because we want <code>$\\</code> to be set to the value of <code>$/</code> <em>before</em> modification):</p>\n\n<pre><code>$ perl -l -00 -ne 'print join(\",\" =&gt; split)' test\n</code></pre>\n\n<hr>\n\n<p>Add <a href=\"https://perldoc.perl.org/perlrun.html#*-a*\" rel=\"nofollow noreferrer\"><code>-a</code></a> to enable autosplit mode and implicitly split to <code>@F</code>:</p>\n\n<pre><code>$ perl -l -00 -ane 'print join(\",\" =&gt; @F)' test\n</code></pre>\n\n<hr>\n\n<p>Swap out <code>-n</code> for <a href=\"https://perldoc.perl.org/perlrun.html#*-p*\" rel=\"nofollow noreferrer\"><code>-p</code></a> for automatic printing:</p>\n\n<pre><code>$ perl -l -00 -ape '$_ = join(\",\" =&gt; @F)' test\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1519387796, "post_id": 48938875, "comment_id": 84901395, "body": "You also don&#39;t need to set ORS since <code>\\n</code> is the default - <code>awk -v RS= -v OFS=, &#39;{$1=$1}1&#39;</code>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 3, "last_activity_date": 1519360084, "last_edit_date": 1519360084, "creation_date": 1519341873, "answer_id": 48938875, "question_id": 48938123, "link": "https://stackoverflow.com/questions/48938123/data-transformation-using-sed/48938875#48938875", "title": "Data transformation using sed", "body": "<p>You could use</p>\n\n<pre><code>awk 'BEGIN {RS=\"\"; FS=\"\\n\"; ORS=\"\\n\"; OFS=\",\"} {$1=$1} 1' file\n</code></pre>\n\n<hr>\n\n<p>I see the gawk manual says this:</p>\n\n<blockquote>\n  <p>If RS\n         is set to the null string, then records are separated by blank lines.  When RS is set to the null string, the newline character always acts as a field separator, in addition to whatever value FS may have.</p>\n</blockquote>\n\n<p>So we don't actually need to specify FS to get the desired output:</p>\n\n<pre><code>awk 'BEGIN {RS=\"\"; ORS=\"\\n\"; OFS=\",\"} {$1=$1} 1' file\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 1585696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/afc0d7659613f656c46ea87836a637a1?s=128&d=identicon&r=PG", "display_name": "Tyler D", "link": "https://stackoverflow.com/users/1585696/tyler-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1519387986, "creation_date": 1519337799, "last_edit_date": 1519387986, "question_id": 48938123, "link": "https://stackoverflow.com/questions/48938123/data-transformation-using-sed", "title": "Data transformation using sed", "body": "<p>I have a file like:</p>\n\n<pre><code>A\nB\nC\nD\n\nE\nF\nG\nH\n\nI\nJ\nK\nL\n</code></pre>\n\n<p>and I want it to come out like</p>\n\n<pre><code>A,B,C,D\nE,F,G,H\n</code></pre>\n\n<p>I'm assuming I'd use <code>sed</code>, but actually I'm not even sure if that's the best tool.  I'm open to using anything commonly available on a Linux system.</p>\n\n<p>In <code>perl</code>, I did it like this ... it works, but it's dirty and has a trailing comma.  Was hoping for something simpler:</p>\n\n<pre><code>$ perl -ne 'if (/^(\\w)\\R/) {print \"$1,\";} else {print \"\\n\";}' test\nA,B,C,D,\nE,F,G,H,\nI,J,K,L,    \n</code></pre>\n"}, {"tags": ["regex", "perl", "makefile", "grep", "piping"], "comments": [{"owner": {"reputation": 199, "user_id": 8234213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c0b7ee188d078922455c21b62364a53?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Nedreg&#229;rd", "link": "https://stackoverflow.com/users/8234213/jens-nedreg%c3%a5rd"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1519329839, "post_id": 48935515, "comment_id": 84879222, "body": "Thanks for the tip about removing the <code>@</code>"}], "answers": [{"comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "reply_to_user": {"reputation": 199, "user_id": 8234213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c0b7ee188d078922455c21b62364a53?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Nedreg&#229;rd", "link": "https://stackoverflow.com/users/8234213/jens-nedreg%c3%a5rd"}, "edited": false, "score": 1, "creation_date": 1519345277, "post_id": 48935782, "comment_id": 84885689, "body": "It&#39;s interspersed with tab/space problems :)."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 3, "last_activity_date": 1519328457, "last_edit_date": 1519328457, "creation_date": 1519328055, "answer_id": 48935782, "question_id": 48935515, "link": "https://stackoverflow.com/questions/48935515/unexpected-perl-regex-substitution-output-in-makefile-using-fgrep/48935782#48935782", "title": "Unexpected perl regex substitution output in makefile using fgrep", "body": "<p>If you want to use <code>$</code> in a recipe you have to escape it from make by doubling it to <code>$$</code>.</p>\n\n<pre><code>help:\n    @fgrep -h \"##\" input.txt | fgrep -v fgrep | \\\n      perl -pe 's/(.*):(.*)##(.*)/(\"$$1:\" . (\" \" x length($$2)) . \" $$3\")/e'\n</code></pre>\n\n<p>The above can be simplified:</p>\n\n<pre><code>help:\n    @perl -ne'next if !/##/; s/(.*):(.*)##(.*)/ \"$$1:\".( \" \" x length($$2) ).\" $$3\" /e; print'\n</code></pre>\n\n<p>Or (5.10+):</p>\n\n<pre><code>help:\n    @perl -ne'next if !/##/; s/:\\K(.*)(?=##)/ \" \" x length($$1) /e; print'\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 8234213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c0b7ee188d078922455c21b62364a53?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Nedreg&#229;rd", "link": "https://stackoverflow.com/users/8234213/jens-nedreg%c3%a5rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 48935782, "answer_count": 1, "score": 0, "last_activity_date": 1519328457, "creation_date": 1519326976, "question_id": 48935515, "link": "https://stackoverflow.com/questions/48935515/unexpected-perl-regex-substitution-output-in-makefile-using-fgrep", "title": "Unexpected perl regex substitution output in makefile using fgrep", "body": "<p>Inspired by this rule by <em>prwhite</em> on GitHub</p>\n\n<pre><code>help:\n    @fgrep -h \"##\" $(MAKEFILE_LIST) | fgrep -v fgrep | sed -e 's/\\\\$$//' | sed -e 's/##//'`\n</code></pre>\n\n<p>I'm trying to make a version that replaces target files with spaces. I want to replace a part of a string with all spaces.\nWith the file <code>input.txt</code>: </p>\n\n<pre><code>spec: $(ALL_FILES)      ## Runs all specs\nmyst-spec: $(ALL_FILES) ## Runs just the in-language specs\nbuild: $(SOURCE_FILES)   ## Builds myst into an executable\ncheck: $(ALL_FILES)     ## Runs all crystal specs\nclean:                  ## Cleans (deletes) docs and executables\nhelp:                   ## Show this help.\n</code></pre>\n\n<p>This is the expected output:</p>\n\n<pre><code>spec:                   ## Runs all specs\nmyst-spec:              ## Runs just the in-language specs\nbuild:                  ## Builds myst into an executable\ncheck:                  ## Runs all crystal specs\nclean:                  ## Cleans (deletes) docs and executables\nhelp:                   ## Show this help.\n</code></pre>\n\n<p>This is the rule i currently have:</p>\n\n<pre><code>help:\n    @fgrep -h \"##\" input.txt | fgrep -v fgrep | \\\n      perl -pe 's/(.*):(.*)##(.*)/(\"$1:\" . (\" \" x length($2)) . \" $3\")/e'\n</code></pre>\n\n<p>Note that <code>fgrep</code> is used here, because actually this is supposed to be run on the makefile itself, but i use <code>input.txt</code> here so you don't have to deal with the whole makefile.</p>\n\n<p>Unexpectedly, i get this output:</p>\n\n<pre><code>:\n:\n:\n:\n:\n:\n</code></pre>\n\n<p>What confuses me the most is that if i run the perl script directly on <code>input.txt</code> (like this: <code>cat input.txt | perl -pe 's/(.*):(.*)##(.*)/(\"$1:\" . (\" \" x length($2)) . \" $3\")/e'</code>) \u2013 i get the expected output. What is the reason it gives different output? I realize it (probably) has something to do with fgrep, but I don't see how it would make a difference, so here I am.</p>\n"}, {"tags": ["git", "perl", "docker", "build", "autotools"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519313769, "post_id": 48931247, "comment_id": 84869304, "body": "Where is <code>MakeMaker.pm</code>? Is its directory in <code>perl E &#39;say for @INC&#39;</code>? Have you tried running <code>cpan ExtUtils::MakeMaker</code> first, on its own?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1519313951, "post_id": 48931247, "comment_id": 84869421, "body": "Your Git install seems to be running with perl-5.22 (pre-installed on 16.04) whereas you installed perl-5.26. I am not sure to which installation your <code>cpan</code> command belongs."}, {"owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519317957, "post_id": 48931247, "comment_id": 84872467, "body": "@Borodin I added the output of <code>perl -E &#39;say for @INC&#39;</code>. Replacing <code>cpan install ExtUtils::MakeMaker</code> with <code>cpan ExtUtils::MakeMaker</code> doesn&#39;t help (I assume that&#39;s what you meant)."}, {"owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1519318166, "post_id": 48931247, "comment_id": 84872605, "body": "@amon I added more info about initial perl and cpan commands to the question (there&#39;s a <code>perl</code>, but no <code>cpan</code> command provided, i.e. <code>cpan</code> has to belong to the <code>perl</code> source installation). Nevertheless autotools are picking up <code>&#47;usr&#47;bin&#47;perl</code> instead of <code>&#47;usr&#47;local&#47;bin&#47;perl</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519318699, "post_id": 48931247, "comment_id": 84872940, "body": "Thanks for that. I&#39;m unclear why you have two copies of <code>ExtUtils::MakeMaker</code> within <code>&#47;usr&#47;local&#47;lib&#47;perl5</code>. What do you get from <code>perl -MExtUtils::MakeMaker -E &#39;say for values %INC&#39;</code>?"}, {"owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519319069, "post_id": 48931247, "comment_id": 84873177, "body": "@Borodin I found a solution (see my answer below). Thanks for your support. You can investigate further yourself with the SSCCE I provided."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519319625, "post_id": 48933225, "comment_id": 84873512, "body": "Ah! I was about to suggest removing the original installation of perl or taking its location out of <code>PATH</code>. Well done."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1519320352, "post_id": 48933225, "comment_id": 84874011, "body": "If your regular programs are <code>&#47;usr&#47;local&#47;bin&#47;perl</code> and <code>&#47;usr&#47;local&#47;bin&#47;cpan</code> but git is using <code>&#47;usr&#47;bin&#47;perl</code>, then modules missing in the git build can probably be installed with <code>&#47;usr&#47;bin&#47;cpan</code>."}, {"owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1519320397, "post_id": 48933225, "comment_id": 84874047, "body": "@mob <code>&#47;usr&#47;bin&#47;cpan</code> belonging to <code>&#47;usr&#47;bin&#47;perl</code>) doesn&#39;t exist (see question). Or do you mean to install everything into prefix <code>&#47;usr</code> instead of <code>&#47;usr&#47;local</code> and effectively overwrite the <code>perl</code> provided by the system? That&#39;s not a good idea, right?"}], "tags": [], "owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "is_accepted": true, "score": 3, "last_activity_date": 1519323815, "last_edit_date": 1519323815, "creation_date": 1519318951, "answer_id": 48933225, "question_id": 48931247, "link": "https://stackoverflow.com/questions/48931247/cant-locate-extutils-makemaker-pm-in-inc-during-git-build/48933225#48933225", "title": "&quot;Can&#39;t locate ExtUtils/MakeMaker.pm in @INC&quot; during git build", "body": "<p>using <code>./configure --with-perl=/usr/local/bin/perl</code> for <code>git</code> works, however it's unclear for me why <code>/usr/local/bin/perl</code> isn't picked up before <code>/usr/bin/perl</code> if <code>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code>.</p>\n\n<p>The <code>cpan ExtUtils::MakeMaker</code> isn't necessary after adding <code>--with-perl</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "is_accepted": false, "score": 24, "last_activity_date": 1525840277, "creation_date": 1525840277, "answer_id": 50245544, "question_id": 48931247, "link": "https://stackoverflow.com/questions/48931247/cant-locate-extutils-makemaker-pm-in-inc-during-git-build/50245544#50245544", "title": "&quot;Can&#39;t locate ExtUtils/MakeMaker.pm in @INC&quot; during git build", "body": "<p>In CentOS7, I encounter this issue, I find I should install the <code>perl-devel</code> firstly:</p>\n\n<pre><code>yum install perl-devel\n</code></pre>\n\n<p>Then retry it.</p>\n"}], "owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12476, "favorite_count": 0, "accepted_answer_id": 48933225, "answer_count": 2, "score": 5, "last_activity_date": 1525840277, "creation_date": 1519313517, "last_edit_date": 1519317588, "question_id": 48931247, "link": "https://stackoverflow.com/questions/48931247/cant-locate-extutils-makemaker-pm-in-inc-during-git-build", "title": "&quot;Can&#39;t locate ExtUtils/MakeMaker.pm in @INC&quot; during git build", "body": "<p>I'm building <code>git</code> on a pretty minimal system (Ubuntu 16.04 docker image) without using the package manager (except for <code>wget</code>, <code>xz-utils</code>, <code>make</code> and <code>gcc</code>). I thus installed prerequisistes as follows:</p>\n\n<pre><code>apt-get update &amp;&amp; apt-get install --yes wget xz-utils make gcc\nwget http://www.cpan.org/src/5.0/perl-5.26.1.tar.gz &amp;&amp; tar xf perl-5.26.1.tar.gz &amp;&amp; cd perl-5.26.1 &amp;&amp; ./configure.gnu &amp;&amp; make -j16 &amp;&amp; make install &amp;&amp; cd ..\nwget https://ftp.gnu.org/pub/gnu/gettext/gettext-0.19.8.1.tar.xz &amp;&amp; tar xf gettext-0.19.8.1.tar.xz &amp;&amp; cd gettext-0.19.8.1 &amp;&amp; ./configure &amp;&amp; make -j16 &amp;&amp; make install &amp;&amp; cd ..\nwget https://www.zlib.net/zlib-1.2.11.tar.gz &amp;&amp; tar xf zlib-1.2.11.tar.gz &amp;&amp; cd zlib-1.2.11 &amp;&amp; ./configure &amp;&amp; make -j16 &amp;&amp; make install &amp;&amp; cd ..\ncpan install ExtUtils::MakeMaker\nwget https://www.kernel.org/pub/software/scm/git/git-2.13.3.tar.gz &amp;&amp; tar xf git-2.13.3.tar.gz &amp;&amp; cd git-2.13.3 &amp;&amp; ./configure &amp;&amp; make -j16 &amp;&amp; make install &amp;&amp; cd ..\n</code></pre>\n\n<p>However, <code>make</code> in the <code>git</code> source root fails due to</p>\n\n<pre><code>Can't locate ExtUtils/MakeMaker.pm in @INC (you may need to install the ExtUtils::MakeMaker module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.22.1 /usr/local/share/perl/5.22.1 /usr/lib/x86_64-linux-gnu/perl5/5.22 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.22 /usr/share/perl/5.22 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base .) at Makefile.PL line 3.\nBEGIN failed--compilation aborted at Makefile.PL line 3.\nmake[1]: *** [perl.mak] Error 2\nMakefile:83: recipe for target 'perl.mak' failed\nmake: *** [perl/perl.mak] Error 2\nmake: *** Waiting for unfinished jobs....\nMakefile:1870: recipe for target 'perl/perl.mak' failed\n</code></pre>\n\n<p>I'm aware that there're a lot of solutions regarding <code>Can't locate [module].pm in @INC</code> for perl projects, <a href=\"https://stackoverflow.com/questions/898782/how-do-i-tell-cpan-to-install-all-dependencies\">How do I tell CPAN to install all dependencies?</a>. However, <code>git</code> uses GNU autotools and options which could fix the issue are probably read from environment variables which I couldn't figure out so far.</p>\n\n<p>The Ubuntu 16.04 provides a <code>perl</code>, but no <code>cpan</code> command (which is why I added the <code>perl</code> source installation). After the <code>perl</code> source installation is recognized, but doesn't seem to be used:</p>\n\n<pre><code>$ which -a perl\n/usr/local/bin/perl\n/usr/bin/perl\n$ which -a cpan\n/usr/local/bin/cpan\n</code></pre>\n\n<p>After <code>cpan</code> I get</p>\n\n<pre><code>$ find / -name MakeMaker.pm\n/builds/project-0/perl-5.26.1/lib/ExtUtils/MakeMaker.pm\n/builds/project-0/perl-5.26.1/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MakeMaker.pm\n/root/.cpan/build/ExtUtils-MakeMaker-7.32-0/lib/ExtUtils/MakeMaker.pm\n/root/.cpan/build/ExtUtils-MakeMaker-7.32-0/blib/lib/ExtUtils/MakeMaker.pm\n/usr/local/lib/perl5/5.26.1/ExtUtils/MakeMaker.pm\n/usr/local/lib/perl5/site_perl/5.26.1/ExtUtils/MakeMaker.pm\n$ perl -E 'say for @INC'\n/usr/local/lib/perl5/site_perl/5.26.1/x86_64-linux\n/usr/local/lib/perl5/site_perl/5.26.1\n/usr/local/lib/perl5/5.26.1/x86_64-linux\n/usr/local/lib/perl5/5.26.1\n</code></pre>\n\n<p>The setup is abstracted from a bootstrapping script, so using the package manager is really no option.</p>\n\n<p>You can use <code>docker run -i -t ubuntu:latest</code> in case you care to investigate the environment.</p>\n\n<p>I provided a reproducible build at <a href=\"https://gitlab.com/krichter/git-docker-build\" rel=\"noreferrer\">https://gitlab.com/krichter/git-docker-build</a> and example output of the GitLab CI runner can be found at <a href=\"https://gitlab.com/krichter/git-docker-build/-/jobs/53888412\" rel=\"noreferrer\">https://gitlab.com/krichter/git-docker-build/-/jobs/53888412</a>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1519309257, "post_id": 48929672, "comment_id": 84865862, "body": "how do you select the name to print between quotes? is it always the 2nd element in the array?"}, {"owner": {"reputation": 47, "user_id": 7649318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afbd7db057189eb63fde381305f8e1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/7649318/dominik"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1519309407, "post_id": 48929672, "comment_id": 84866002, "body": "Yes only the second one is to be in quotes. I know that I can grab each individual array by doing print @names[1] and so on."}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1519320341, "post_id": 48929672, "comment_id": 84874005, "body": "The perlfunc man page mentions a function called printf. It&#39;ll help you."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7649318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afbd7db057189eb63fde381305f8e1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/7649318/dominik"}, "edited": false, "score": 0, "creation_date": 1519310111, "post_id": 48929881, "comment_id": 84866554, "body": "Is there a way to do this without having any of the arrays in double quotes?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 47, "user_id": 7649318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afbd7db057189eb63fde381305f8e1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/7649318/dominik"}, "edited": false, "score": 0, "creation_date": 1519310468, "post_id": 48929881, "comment_id": 84866828, "body": "I&#39;m not following. What are you trying to accomplish?"}, {"owner": {"reputation": 47, "user_id": 7649318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afbd7db057189eb63fde381305f8e1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/7649318/dominik"}, "edited": false, "score": 0, "creation_date": 1519310647, "post_id": 48929881, "comment_id": 84866960, "body": "Create an array with the values \u201cAndrew,\u201d \u201cAndy,\u201d and \u201cKaufman\u201d (without the quotes). Write a program that prints Andrew &quot;Andy&quot; Kaufman. I&#39;m trying to get this for an assignment and I thought it meant without any double quotes."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1519309611, "creation_date": 1519309611, "answer_id": 48929881, "question_id": 48929672, "link": "https://stackoverflow.com/questions/48929672/print-one-part-of-a-array-in-double-quotes/48929881#48929881", "title": "print one part of a array in double quotes", "body": "<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n#DEFINE AN ARRAY\nmy @names = (\"Andrew\",\"Andy\",\"Kaufman\");\n\n\n$names[1] = \"\\\"$names[1]\\\"\";\nprint \"@names\";\n</code></pre>\n\n<p>This will modify the array too. </p>\n"}, {"tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": true, "score": 2, "last_activity_date": 1519311108, "last_edit_date": 1519311108, "creation_date": 1519309733, "answer_id": 48929918, "question_id": 48929672, "link": "https://stackoverflow.com/questions/48929672/print-one-part-of-a-array-in-double-quotes/48929918#48929918", "title": "print one part of a array in double quotes", "body": "<p>even though Sobrique has already ansewered, another possible solution would be</p>\n\n<pre><code>#DEFINE AN ARRAY\nmy @names = qw(Andrew \"Andy\" Kaufman);\n\n#printing the array\nprint \"@names\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#DEFINE AN ARRAY\nmy @names = qw(Andrew Andy Kaufman);\n#or\n#my @names = (\"Andrew\",\"Andy\",\"Kaufman\");\n\n#printing the array\nprint \"$names[0] \\\"$names[1]\\\" $names[2]\";\n</code></pre>\n\n<p>I think your main trouble was to print a double quote, you simply have to escape it with a backslash. it's a way to say to perl \"hey this is not the actual end of string, this is a character I want to be in the string\"</p>\n"}], "owner": {"reputation": 47, "user_id": 7649318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afbd7db057189eb63fde381305f8e1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik", "link": "https://stackoverflow.com/users/7649318/dominik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 48929918, "answer_count": 2, "score": -2, "last_activity_date": 1519311108, "creation_date": 1519309130, "question_id": 48929672, "link": "https://stackoverflow.com/questions/48929672/print-one-part-of-a-array-in-double-quotes", "title": "print one part of a array in double quotes", "body": "<p>What I'm trying to do is have my array names print out in a single line \nAndrew \"Andy\" Kaufman. This is what I have so far.</p>\n\n<pre><code>#DEFINE AN ARRAY\n@names = (Andrew,Andy,Kaufman);\n\n#printing the array\nprint \"@names\";\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "strawberry-perl"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 2, "creation_date": 1519303354, "post_id": 48927547, "comment_id": 84861511, "body": "do you <code>use strict; use warnings;</code> ?  don&#39;t you get the message <code>argument &#39;fn&#39; isn&#39;t numeric in array element</code> ?"}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1519304142, "post_id": 48927547, "comment_id": 84862024, "body": "Yes. I am using strict and warnings. I am getting message argument &#39;fn&#39; isn&#39;t numeric in array element"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1519304865, "post_id": 48927547, "comment_id": 84862591, "body": "so, why don&#39;t you use numeric arguments instead of &quot;fn&quot; and &quot;ln&quot;?"}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1519305283, "post_id": 48927547, "comment_id": 84862924, "body": "As it is more readable. How can I use associative arrays in Perl?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1519305708, "post_id": 48927547, "comment_id": 84863265, "body": "you can have a look here :) <a href=\"http://www.google.com\" rel=\"nofollow noreferrer\">google.com</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1519306585, "post_id": 48927547, "comment_id": 84863904, "body": "&quot;associative arrays&quot; are called hashes in Perl"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1519367420, "post_id": 48932597, "comment_id": 84891340, "body": "Welcome back! Haven&#39;t seen you in a while. :-)"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1519317194, "creation_date": 1519317194, "answer_id": 48932597, "question_id": 48927547, "link": "https://stackoverflow.com/questions/48927547/how-to-store-an-array-in-session-in-perl/48932597#48932597", "title": "How to store an array in session in Perl", "body": "<p>See <a href=\"http://www.modernperlbooks.com/books/modern_perl_2016/03-perl-language.html#SGFzaGVz\" rel=\"nofollow noreferrer\"><em>hashes</em> in Modern Perl</a> and <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a>.</p>\n\n<pre><code>my %return_result;\n$returnResult{fn} = $decoded-&gt;{fn};\n$returnResult{ln} = $decoded-&gt;{ln};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %return_result = (\n    fn =&gt; $decoded-&gt;{fn},\n    ln =&gt; $decoded-&gt;{ln},\n);\n</code></pre>\n\n<p>or simply</p>\n\n<pre><code># http://perldoc.perl.org/perl5200delta.html#New-slice-syntax\nmy %return_result = %$decoded{qw(fn ln)};\n</code></pre>\n\n<p>You do not get automatic references like in other languages. Use the <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\"><code>\\</code> operator</a>.</p>\n\n<pre><code>$self-&gt;session(returnResult =&gt; \\%return_result);\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1519332623, "accepted_answer_id": 48932597, "answer_count": 1, "score": -2, "last_activity_date": 1519317194, "creation_date": 1519302891, "question_id": 48927547, "link": "https://stackoverflow.com/questions/48927547/how-to-store-an-array-in-session-in-perl", "closed_reason": "Not suitable for this site", "title": "How to store an array in session in Perl", "body": "<p>I am using Mojolicious Perl framework in my application. I want to store an array in session, but is not successful.</p>\n\n<pre><code>my @returnResult;\n$returnResult['fn'] = $decoded-&gt;{'fn'};\n$returnResult['ln'] = $decoded-&gt;{'ln'};\n$self-&gt;session(returnResult =&gt; @returnResult);\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1519281275, "post_id": 48920868, "comment_id": 84848272, "body": "You want a 3x2 array ?  <code>my @merged = ( \\@array1, \\@array2 );</code>  But then you need to use 2 indexes to get the values out.  <code>my $scooter = $merged[0]-&gt;[1];</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1519281398, "post_id": 48920868, "comment_id": 84848330, "body": "multidimensional array should be possible"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1519281531, "post_id": 48920868, "comment_id": 84848401, "body": "Have a read of <code>perldoc perldsc</code> : <a href=\"https://perldoc.perl.org/perldsc.html#ARRAYS-OF-ARRAYS\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldsc.html#ARRAYS-OF-ARRAYS</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 14, "last_activity_date": 1583236103, "last_edit_date": 1583236103, "creation_date": 1519282365, "answer_id": 48921287, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/48921287#48921287", "title": "Merge arrays to make a new array in perl", "body": "<p>In Perl, if you are storing the array(s) in list it will automatically flattened as a <strong>single list</strong>.</p>\n\n<pre><code>my @array = (@ar1,@ar2);\n</code></pre>\n\n<p>If you want to store as an array, you should make a reference to an array and store the reference to another array like</p>\n\n<pre><code>my @array = (\\@ar1,\\@ar2);\n</code></pre>\n\n<p>Now <code>@array</code> has reference of <code>@ar1</code> and <code>@ar2</code>.</p>\n\n<p>Then use corresponding datatype to dereference the reference</p>\n\n<p>In your case</p>\n\n<pre><code>print @{$array[0]}; \n</code></pre>\n\n<p>Finally you can use the following for your case</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @array1 = qw(car scooter truck);\nmy @array2 = qw(four five six);\n\nmy @merged = (\\@array1,\\@array2); #referencing the array1 and array2\n\nforeach my $i (0..$#{$merged[0]}) \n{\n    # getting the last index value using $#{$merged[0]}\n\n    printf (\"%-10s%-10s\\n\",$merged[0][$i],$merged[1][$i]);\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1519292845, "creation_date": 1519292845, "answer_id": 48924183, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/48924183#48924183", "title": "Merge arrays to make a new array in perl", "body": "<p>Judging by the sample data, an associative array (hash) is probably a more appropriate data structure:</p>\n\n<pre><code>my %data;\n@data{@array1} = @array2;\n\nprint $data{car}; # \"four\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 1, "last_activity_date": 1519867122, "creation_date": 1519867122, "answer_id": 49041211, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/49041211#49041211", "title": "Merge arrays to make a new array in perl", "body": "<p>This will do as requested:</p>\n\n<pre><code>my @merged;\nfor (my $i=0; $i&lt;=$#array1; ++$i)\n{\n    $merged[$i*2] = $array1[$i];\n    $merged[$i*2+1] = $array2[$i];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 1, "creation_date": 1548860073, "post_id": 54441245, "comment_id": 95695843, "body": "That&#39;ll still produce one flat array like this - <code>car, four, scooter, two, truck, six</code>, while the OP seems to need it like this - <code>$merged[0] = \\@array1, $merged[1] = \\@array2;</code>."}, {"owner": {"reputation": 126, "user_id": 4524846, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNW-Wr7lEdU/AAAAAAAAAAI/AAAAAAAAAAA/SPweKYLoyrY/photo.jpg?sz=128", "display_name": "Scott Pritchett", "link": "https://stackoverflow.com/users/4524846/scott-pritchett"}, "reply_to_user": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 0, "creation_date": 1556631868, "post_id": 54441245, "comment_id": 98498284, "body": "Fixed(?) Obviously the arrays must be the same size too."}, {"owner": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 1, "creation_date": 1556632551, "post_id": 54441245, "comment_id": 98498677, "body": "This is closer, but the matrix is inverted. In your code, <code>$merged[0]</code> will give <i>[car, four]</i>, while OP requests code for <i>car, scooter, truck</i>."}], "tags": [], "owner": {"reputation": 126, "user_id": 4524846, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNW-Wr7lEdU/AAAAAAAAAAI/AAAAAAAAAAA/SPweKYLoyrY/photo.jpg?sz=128", "display_name": "Scott Pritchett", "link": "https://stackoverflow.com/users/4524846/scott-pritchett"}, "is_accepted": true, "score": 2, "last_activity_date": 1556632547, "last_edit_date": 1556632547, "creation_date": 1548853306, "answer_id": 54441245, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/54441245#54441245", "title": "Merge arrays to make a new array in perl", "body": "<pre><code>my @merged;\nfor (0 .. $#array1) {\n    push(@merged, ([$array1[$_],$array2[$_]]));\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>my @merged;\npush @merged, map {[$array1[$_], $array2[$_]]} 0 .. $#array1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 1, "last_activity_date": 1549040672, "last_edit_date": 1592644375, "creation_date": 1549040672, "answer_id": 54484020, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/54484020#54484020", "title": "Merge arrays to make a new array in perl", "body": "<blockquote>\n<p>But what I want is as follows:</p>\n<pre><code>@merged[0] @merged[1] \ncar             four\nscooter         two\ntruck           six\n</code></pre>\n</blockquote>\n<p>I see two ways to interpret this.</p>\n<p>Either as mkHun did, as a list of two array references:</p>\n<pre><code>my @array1 = qw(a b c);\nmy @array2 = qw(x y z);\nmy @merged = (\\@array1, \\@array2); # (['a', 'b', 'c'], ['x', 'y', 'z'])\n</code></pre>\n<p>at which point you can do:</p>\n<pre><code>$merged[0]-&gt;[1] # 'b'\n$merged[1]-&gt;[2] # 'z'\n</code></pre>\n<p>Or as a single list of interleaved elements:</p>\n<pre><code>use List::MoreUtils qw(zip);\n\nmy @array1 = qw(a b c);\nmy @array2 = qw(x y z);\nmy @merged = zip @array1, @array2; # ('a', 'x', 'b', 'y', 'c', 'z')\n</code></pre>\n<p>at which point you can do:</p>\n<pre><code>$merged[2] # 'b'\n$merged[5] # 'z'\n</code></pre>\n<p>See <a href=\"https://www.jobindex.dk/perldoc/List/MoreUtils#zip-ARRAY1-ARRAY2-ARRAY3\" rel=\"nofollow noreferrer\"><code>List::MoreUtils::zip</code></a> for this.</p>\n"}, {"tags": [], "owner": {"reputation": 769, "user_id": 225429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e99094114bf4bab32df80e1f52f3b2ff?s=128&d=identicon&r=PG", "display_name": "1.618", "link": "https://stackoverflow.com/users/225429/1-618"}, "is_accepted": false, "score": 0, "last_activity_date": 1568383304, "last_edit_date": 1568383304, "creation_date": 1568361701, "answer_id": 57919561, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl/57919561#57919561", "title": "Merge arrays to make a new array in perl", "body": "<p>Try this:</p>\n\n<pre><code>((1,2,3),(4,5,6))==(1,2,3,4,5,6)\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 3181681, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e9059360247a8f344cc8ced514897074?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3181681/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15383, "favorite_count": 1, "accepted_answer_id": 54441245, "answer_count": 6, "score": 11, "last_activity_date": 1583236103, "creation_date": 1519280447, "question_id": 48920868, "link": "https://stackoverflow.com/questions/48920868/merge-arrays-to-make-a-new-array-in-perl", "title": "Merge arrays to make a new array in perl", "body": "<p>What is the way to merge two arrays (column-wise) into a new composite array in perl? </p>\n\n<p>@array1</p>\n\n<pre><code>car\nscooter\ntruck\n</code></pre>\n\n<p>@array2</p>\n\n<pre><code>four\ntwo\nsix\n</code></pre>\n\n<p>I tried using following:</p>\n\n<pre><code>my @merged = (@array1, @array2); print @merged;\n</code></pre>\n\n<p>But it merges both arrays in one column as follows:</p>\n\n<pre><code>car\nscooter\ntruck\nfour\ntwo\nsix\n</code></pre>\n\n<p>But what I want is as follows:</p>\n\n<pre><code>@merged[0] @merged[1] \ncar             four\nscooter         two\ntruck           six\n</code></pre>\n"}, {"tags": ["image", "perl", "cairo"], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 4, "last_activity_date": 1519274367, "last_edit_date": 1519274367, "creation_date": 1519273425, "answer_id": 48919637, "question_id": 48918453, "link": "https://stackoverflow.com/questions/48918453/how-to-convert-from-cairo-to-imager/48919637#48919637", "title": "How to convert from Cairo to Imager?", "body": "<p>Cairo is using ARGB for its raw format, while Imager is using RGBA. The difference between them is the order that the samples are stored within each pixel. Cairo also uses premultiplied alpha, while Imager uses non-premultiplied alpha. Neither library seems to have any option to change either of these things.</p>\n\n<p>The sample ordering thing could be fixed fairly easily by re-ordering the bytes within the raw image data, but the premultiplication thing starts to get into the territory of not worth bothering with. Therefore I recommend that you simply save a PNG file in Cairo and load it in Imager. It may be slightly slower, but it's easy to understand and recognize that it's correct.</p>\n\n<p>Below: code from a previous version of this answer that recommended swapping the byte order, before I realized about the premultiplied alpha issue:</p>\n\n<pre><code>for (my $i = 0 ; $i &lt; length($testData) ; $i += 4) {\n    substr($testData, $i, 4,\n        substr($testData, $i+1, 3) . substr($testData, $i, 1)\n    );\n}\n</code></pre>\n\n<p>I don't recommend using it.</p>\n"}], "owner": {"reputation": 97, "user_id": 2400477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9b8b78e6c512179cef4c57e57d1873?s=128&d=identicon&r=PG", "display_name": "junpayment", "link": "https://stackoverflow.com/users/2400477/junpayment"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519319366, "creation_date": 1519264941, "last_edit_date": 1519319366, "question_id": 48918453, "link": "https://stackoverflow.com/questions/48918453/how-to-convert-from-cairo-to-imager", "title": "How to convert from Cairo to Imager?", "body": "<p>For historical reasons we are forced to use Cairo and Imager together.</p>\n\n<p>Converting from Cairo to Imager and converting it back to Imager for some reason makes the color strange.</p>\n\n<p>The reason for converting to Imager again is to combine with another Imager object after this.</p>\n\n<pre><code># Create a yellow fill image as Cairo object.\n# And output as a png file.\nmy $testSurface = Cairo::ImageSurface-&gt;create(\n    'argb32',\n    $width,\n    $height\n);\n\nmy $testContext = Cairo::Context-&gt;create($testSurface);\n$testContext-&gt;rectangle(0, 0, $width, $height);\n$testContext-&gt;set_source_rgba(1.0, 1.0, .0, 1);\n$testContext-&gt;fill();\n# This is a yellow png file.\n$testSurface-&gt;write_to_png(\"output/fill_yellow.png\");\n\n# Convert the Cairo object to an Imager object.\n\nmy $testData = $testSurface-&gt;get_data;\n\nmy $testImager = Imager-&gt;new(\n    xsize    =&gt; $width,\n    ysize    =&gt; $height,\n    channels =&gt; 4,\n);\n\nmy $testRes = $testImager-&gt;read(\n    data              =&gt; $testData,\n    type              =&gt; \"raw\",\n    xsize             =&gt; $width,\n    ysize             =&gt; $height,\n    raw_datachannels  =&gt; 4,\n    raw_storechannels =&gt; 4,\n    raw_interleave    =&gt; 0,\n);\n\n# Output Imager object as a PNG file.\n# ! This PNG file becomes blue unexpectedly\n$testRes-&gt;write(\n    file =&gt; \"output/fill_yellow_imager.png\",\n    type =&gt; \"png\"\n);\n</code></pre>\n"}]