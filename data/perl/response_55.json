[{"tags": ["perl", "mariadb"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453932125, "post_id": 35048834, "comment_id": 57822096, "body": "Just to be clear: data inserted with your PHP script is still being replicated after switching to MariaDB, but data inserted with your Perl script isn&#39;t?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453932260, "post_id": 35048834, "comment_id": 57822176, "body": "MariaDB is binary compatible with MySQL, so the DBD::mysql driver works fine."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939656, "post_id": 35048834, "comment_id": 57825445, "body": "<code>mysql.log</code> has nothing to do with Replication.  Stuff being replicated goes into the &quot;binlog&quot; on the Master; from there it is transferred to the &quot;relay log&quot; on the Slave."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939674, "post_id": 35048834, "comment_id": 57825452, "body": "Do <code>SHOW SLAVE STATUS;</code>"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939686, "post_id": 35048834, "comment_id": 57825462, "body": "Add error checks at each step of the Perl."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939740, "post_id": 35048834, "comment_id": 57825484, "body": "Were both the PHP and Perl writing to the <i>same</i> db and table?  Do you have any <code>binlog&#47;replicate_do&#47;ignore_*</code> configured in either the Master or Slave?"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939800, "post_id": 35048834, "comment_id": 57825495, "body": "What version of MySQL/MariaDB is the Master?  The Slave?"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453939838, "post_id": 35048834, "comment_id": 57825507, "body": "(I&#39;m asking a lot of questions because I don&#39;t know where the &quot;Aha!&quot; will show up.)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1453940674, "post_id": 35048834, "comment_id": 57825745, "body": "@RickJames &quot;Add error checks at each step of the Perl.&quot; The OP has <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"nofollow noreferrer\"><code>RaiseError</code></a> enabled, so any error will throw an exception and cause the program to die noisily."}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 5199025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847939e33221b7cacfdb97dc101d1847?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Bauer", "link": "https://stackoverflow.com/users/5199025/peter-bauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1454227879, "last_edit_date": 1454227879, "creation_date": 1454192430, "answer_id": 35107898, "question_id": 35048834, "link": "https://stackoverflow.com/questions/35048834/mariadb-replication-some-times-does-not-working/35107898#35107898", "title": "MariaDB replication some times does not working", "body": "<p>I found the reason why the replication failed with this simple Perl script:\nThere is written:</p>\n\n<pre><code>$dsn = 'dbi:mysql:database=mysql;host=myhostname';\n...\n$sth = $dbh-&gt;prepare(\"INSERT INTO mydatabase.mytable (user, domain) VALUES('$account_name', '$domain')\");\n</code></pre>\n\n<p>This is not working, because DBI connects to the database \"mysql\" and not \"mydatabase\" (see \"database=mysql\"). Even if the INSERT INTO inserts the row directly in the database \"mydatabase\", MariaDB master server ignores it for the replication. Its strange that it worked perfectly with MySQL and not for MariaDB (version 5.5.46). Maybe its a bug in MariaDB, I don't know.</p>\n"}], "owner": {"reputation": 156, "user_id": 5199025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847939e33221b7cacfdb97dc101d1847?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Bauer", "link": "https://stackoverflow.com/users/5199025/peter-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 35107898, "answer_count": 1, "score": 2, "last_activity_date": 1454227879, "creation_date": 1453931769, "last_edit_date": 1454089598, "question_id": 35048834, "link": "https://stackoverflow.com/questions/35048834/mariadb-replication-some-times-does-not-working", "title": "MariaDB replication some times does not working", "body": "<p>I have a problem that I have never seen before with Mysql replication (Master/Slave):\nIt works excellent when I execute on my PHP scripts, on the mysql console queries like \"INSERT INTO\". They are perfectly replicated on the mysql slave machine.\nBut: Not if I do this same operations on a Perl script, using Perl DBI. Then its only stored on the Mysql master server. In the mysql.log file on the slave server, nothing arrives. I have this problem since I migrated on the two servers from Mysql to MariaDB.\nIs there something that a Perl DBI client should absolutely do that replicating would work?</p>\n\n<p>I'm using this simple code to INSERT data:</p>\n\n<pre><code>#!/usr/bin/perl\nuse DBI;\n$dsn = 'dbi:mysql:database=mysql;host=myhostname';\n$dbh = DBI-&gt;connect($dsn, 'mouser', 'password',\n            { RaiseError =&gt; 1, AutoCommit =&gt; 0 }) || exit(1);\n...\n$sth = $dbh-&gt;prepare(\"INSERT INTO mydatabase.mytable (user, domain) VALUES('$account_name', '$domain')\");\n$sth-&gt;execute();\n$dbh-&gt;commit();\n</code></pre>\n\n<p>Is it possible that it does not replicate because DBI should use a mariadb driver? Like $dsn = 'dbi:mariadb:database=mysql;host=myhostname'; if that exists?</p>\n\n<p>To be clear: Data inserted with your PHP script is still being replicated after switching to MariaDB, but data inserted with your Perl script isn't.</p>\n"}, {"tags": ["perl", "directory", "subdirectory"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 5, "creation_date": 1453930465, "post_id": 35048389, "comment_id": 57821128, "body": "Uhhh... you&#39;re just assigning a string to a variable. Perhaps you meant to use <a href=\"http://perldoc.perl.org/perlop.html#%60_STRING_%60\" rel=\"nofollow noreferrer\">backticks</a>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1453930560, "post_id": 35048389, "comment_id": 57821191, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/364842/how-do-i-run-a-perl-script-from-within-a-perl-script\">How do I run a Perl script from within a Perl script?</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453977424, "post_id": 35048389, "comment_id": 57841089, "body": "@MattJacob yes, but the accepted answer there is a bit overkill for this case."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1454001303, "post_id": 35048389, "comment_id": 57858679, "body": "@simbabque The accepted answer, perhaps. But there are other answers within that thread that do answer this question (and the question is the same)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1454005479, "post_id": 35048389, "comment_id": 57861172, "body": "@m, I agree, but my vote would hammer it, so I didn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 5828093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd601d81e7f40e450ce160a3aa42e98e?s=128&d=identicon&r=PG&f=1", "display_name": "cjhutton", "link": "https://stackoverflow.com/users/5828093/cjhutton"}, "is_accepted": false, "score": 1, "last_activity_date": 1454004432, "creation_date": 1454004432, "answer_id": 35068824, "question_id": 35048389, "link": "https://stackoverflow.com/questions/35048389/how-do-i-make-a-perl-script-run-another-perl-script/35068824#35068824", "title": "How do I make a perl script run another perl script?", "body": "<p>The similar question answer does not work with my version of perl. The line </p>\n\n<pre><code>use IPC::System::Simple qw(system capture);\n</code></pre>\n\n<p>throws some errors. However just using system works, like this:</p>\n\n<pre><code>my $mynumber = system($^X, \"../tools/convert.pl\", 'bin2dec', '1011');\n</code></pre>\n\n<p>I can use the above without setting equal to something to execute scripts which return no value and are only sent arguments. </p>\n\n<p>This seems to be the easiest way to do what I need to and the entire programs folder can be moved anywhere and it will still work as no parent directories above programs are used.</p>\n"}, {"tags": [], "owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "is_accepted": false, "score": 2, "last_activity_date": 1454177297, "creation_date": 1454177297, "answer_id": 35105214, "question_id": 35048389, "link": "https://stackoverflow.com/questions/35048389/how-do-i-make-a-perl-script-run-another-perl-script/35105214#35105214", "title": "How do I make a perl script run another perl script?", "body": "<p>I like to assign the output of a command to an array so I can loop through the array to find error or other messages. For example if I'm making a zip file to email to someone I want to check to see if the zip program had any errors before I continue to make and send the email. </p>\n\n<pre><code>@msgs = `zip -f myfile.zip *.pl`; # Use backticks\n</code></pre>\n\n<p>You can also assign the output to a scalar:</p>\n\n<pre><code>$msg = `ls -al *.pl`; # Use backticks\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 5828093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd601d81e7f40e450ce160a3aa42e98e?s=128&d=identicon&r=PG&f=1", "display_name": "cjhutton", "link": "https://stackoverflow.com/users/5828093/cjhutton"}, "is_accepted": true, "score": 2, "last_activity_date": 1470340710, "creation_date": 1470340710, "answer_id": 38776378, "question_id": 35048389, "link": "https://stackoverflow.com/questions/35048389/how-do-i-make-a-perl-script-run-another-perl-script/38776378#38776378", "title": "How do I make a perl script run another perl script?", "body": "<p>To run any system command or script all you have to do is use `backticks`. From observing another programer's perl code, I misread these strange quotes for 'single quotes'. </p>\n\n<p>backticks are also nice because they return the text in STDOUT to your perl script so that the output can be assigned to a variable, something I have found impossible if using system(\"\");</p>\n"}], "owner": {"reputation": 91, "user_id": 5828093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd601d81e7f40e450ce160a3aa42e98e?s=128&d=identicon&r=PG&f=1", "display_name": "cjhutton", "link": "https://stackoverflow.com/users/5828093/cjhutton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1651, "favorite_count": 0, "accepted_answer_id": 38776378, "answer_count": 3, "score": 2, "last_activity_date": 1470340710, "creation_date": 1453930053, "last_edit_date": 1453934639, "question_id": 35048389, "link": "https://stackoverflow.com/questions/35048389/how-do-i-make-a-perl-script-run-another-perl-script", "title": "How do I make a perl script run another perl script?", "body": "<p>I am writing a large Perl script, which needs to utilize other existing Perl scripts. The problem is the main script needs to reference many different scripts from different folders. For example the main script would be contained in:</p>\n\n<pre><code>/perl/programs/io \n</code></pre>\n\n<p>It may need to run a script which is stored in:</p>\n\n<pre><code>/perl/programs/tools \n</code></pre>\n\n<p>Note that there are other orthogonal folders besides tools so I need to be able to access any of them on the fly.</p>\n\n<p>Currently this is what I got:</p>\n\n<pre><code>my $mynumber = '../tools/convert.pl bin2dec 1011';\n</code></pre>\n\n<p>In theory it should move back from the io directory then enter the appropriate tool directory and call the <code>convert.pl</code> script while passing it the parameters. </p>\n\n<p>All this does is store the string in the single quotes to <code>$myNumber</code>.</p>\n"}, {"tags": ["matlab", "perl", "syntax-error"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 2, "creation_date": 1453929606, "post_id": 35048061, "comment_id": 57820645, "body": "Always, always, add <code>use strict;</code> and <code>use warnings;</code> to the beginning of your script"}, {"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 0, "creation_date": 1453986068, "post_id": 35048061, "comment_id": 57847099, "body": "When you change <code>if([cond1]) { if([cond2]) {</code> to <code>if([cond1]) { ... } if([cond2]) { ... }</code> surely the logic of your program might change."}], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 5808208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09c91835e911d3e341e13db92cb5373a?s=128&d=identicon&r=PG&f=1", "display_name": "mee mee", "link": "https://stackoverflow.com/users/5808208/mee-mee"}, "edited": false, "score": 0, "creation_date": 1453933318, "post_id": 35048151, "comment_id": 57822752, "body": "Thanks for the answer, But i think it&#39;s same as my example 1. Or do i miss anything?"}, {"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "reply_to_user": {"reputation": 387, "user_id": 5808208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09c91835e911d3e341e13db92cb5373a?s=128&d=identicon&r=PG&f=1", "display_name": "mee mee", "link": "https://stackoverflow.com/users/5808208/mee-mee"}, "edited": false, "score": 1, "creation_date": 1453933749, "post_id": 35048151, "comment_id": 57822982, "body": "@meemee It is the same as your answer, except that I&#39;ve pointed out where the syntax error is.  I didn&#39;t attempt to <i>correct</i> it."}], "tags": [], "owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "is_accepted": false, "score": 5, "last_activity_date": 1453929324, "creation_date": 1453929324, "answer_id": 35048151, "question_id": 35048061, "link": "https://stackoverflow.com/questions/35048061/putting-the-correclty-in-if-loop-of-perl-script/35048151#35048151", "title": "putting the { } correclty in if loop of perl script", "body": "<p>You would have immediately noticed the syntax error if you followed proper indentation.</p>\n\n<p><a href=\"https://i.stack.imgur.com/I6qjg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I6qjg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 387, "user_id": 5808208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09c91835e911d3e341e13db92cb5373a?s=128&d=identicon&r=PG&f=1", "display_name": "mee mee", "link": "https://stackoverflow.com/users/5808208/mee-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1453932038, "answer_count": 1, "score": -5, "last_activity_date": 1453929324, "creation_date": 1453929013, "last_edit_date": 1453929181, "question_id": 35048061, "link": "https://stackoverflow.com/questions/35048061/putting-the-correclty-in-if-loop-of-perl-script", "closed_reason": "Not suitable for this site", "title": "putting the { } correclty in if loop of perl script", "body": "<p>Hi I am trying to translate a code from matlab to perl script. My matlab code is as follows:</p>\n\n<pre><code>for i=1:n\nif \n  statement\nif \n  statement\nif \n  statement\nelse \n  statement\n\nfor j=1:1000\nif \n  statement\nend\nend\n\nif \n  statement\nelse \n  statement\nend\n\nend\nend\nend\nend\n</code></pre>\n\n<p>Then I translate into perl as below: </p>\n\n<pre><code>for ($i=1;$i&lt;=n;$i++){\nif (){\n  statement\nif {\n  statement\nif {\n  statement\nelse {\n  statement\n}\nfor ($j=1;$j&lt;=1000;$j++){\nif {\n  statement\n   }\n}\n\nif {\n  statement\n}\nelse {\n  statement\n}\n\n}\n}\n}\n}\n</code></pre>\n\n<p>But there were syntax errors so I change into like below: </p>\n\n<pre><code>for ($i=1;$i&lt;=n;$i++){\nif (){\n  statement\n}\nif {\n  statement\n}\nif {\n  statement\n}\nelse {\n  statement\n}\nfor ($j=1;$j&lt;=1000;$j++){\nif {\n  statement\n   }\n}\n\nif {\n  statement\n}\nelse {\n  statement\n}\n}\n</code></pre>\n\n<p>Then the code runs well but the answer is different. So, I think I am putting { } in \"if loop\" of perl incorrectly. Please advise how to translate correctly. Thank you</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453928726, "post_id": 35047801, "comment_id": 57820125, "body": "Perl&#39;s concatenation operator is <code>.</code>, not <code>,</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453929953, "post_id": 35048180, "comment_id": 57820862, "body": "Your example will print <code>foo</code>. You would need parentheses to print <code>bar</code>: <code>my $foo = (&#39;foo&#39;, &#39;bar&#39;);</code>"}, {"owner": {"reputation": 139, "user_id": 3250422, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7d90aee8219076c20e535fcd5d770a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3250422", "link": "https://stackoverflow.com/users/3250422/user3250422"}, "edited": false, "score": 0, "creation_date": 1453930301, "post_id": 35048180, "comment_id": 57821052, "body": "DOH! Thanks guys. I don&#39;t ever print lists- this was some code I got frmo another author. I&#39;ll concat everything and we should be good!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453930313, "post_id": 35048180, "comment_id": 57821057, "body": "@MattJacob Damn precedence. Thanks, fixed."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 2, "last_activity_date": 1453930301, "last_edit_date": 1592644375, "creation_date": 1453929430, "answer_id": 35048180, "question_id": 35047801, "link": "https://stackoverflow.com/questions/35047801/printing-an-html-page-header-is-different-when-saved-in-a-var/35048180#35048180", "title": "Printing an HTML page header is different when saved in a var?", "body": "<blockquote>\n<p>Why would saving all the HTML in a var then printing that var produce a different result than printing directly?</p>\n</blockquote>\n<p>For the same reason that</p>\n<pre><code>print 'foo', 'bar'; # outputs foobar\n</code></pre>\n<p>is different than</p>\n<pre><code>my $foo = 'foo', 'bar';\nprint $foo; # outputs foo\n</code></pre>\n<p><a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\"><code>print</code></a> takes a list and outputs all the elements separated by <code>$,</code> (<code>undef</code> by default).</p>\n<p>The <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">comma operator</a> in scalar context evaluates its left operand, throws away the result, evaluates its right operand, and returns that value. So <code>my $foo = 'foo', 'bar'</code> assigns the string <code>foo</code> to <code>$foo</code> and returns the string <code>bar</code>.</p>\n<hr />\n<p>Also note that the <a href=\"https://metacpan.org/pod/CGI#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">HTML generation functions in CGI.pm are deprecated</a>:</p>\n<blockquote>\n<p><strong>HTML Generation functions should no longer be used</strong></p>\n<p>All HTML generation functions within CGI.pm are no longer being maintained. Any issues, bugs, or patches will be rejected unless they relate to fundamentally broken page rendering.</p>\n<p>The rationale for this is that the HTML generation functions of CGI.pm are an obfuscation at best and a maintenance nightmare at worst. You should be using a template engine for better separation of concerns. See CGI::Alternatives for an example of using CGI.pm with the Template::Toolkit module.</p>\n<p>These functions, and perldoc for them, are considered deprecated, they are no longer being maintained and no fixes or features for them will be accepted.</p>\n</blockquote>\n"}], "owner": {"reputation": 139, "user_id": 3250422, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7d90aee8219076c20e535fcd5d770a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3250422", "link": "https://stackoverflow.com/users/3250422/user3250422"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453930301, "creation_date": 1453928135, "question_id": 35047801, "link": "https://stackoverflow.com/questions/35047801/printing-an-html-page-header-is-different-when-saved-in-a-var", "title": "Printing an HTML page header is different when saved in a var?", "body": "<p>this works fine:</p>\n\n<pre><code>print $cgi-&gt;header({-type =&gt; \"text/html\", -expires =&gt; \"now\"}),\n$cgi-&gt;start_html({-title =&gt; \"TEST PAGE\",\n      -style =&gt; [{-type =&gt; \"text/css\", -src =&gt;\"one.css\"},\n                 {-type =&gt; \"text/css\", -src =&gt;\"calendar.css\"}],\n      -script =&gt; [\n     {-type =&gt; \"text/javascript\", -src =&gt; \"main.js\"},\n                 ]}),\n  $cgi-&gt;start_form({-name =&gt; \"test\", -autocomplete =&gt; \"off\"});\n</code></pre>\n\n<p>but if instead I try:</p>\n\n<pre><code>my $html= $cgi-&gt;header({-type =&gt; \"text/html\", -expires =&gt; \"now\"}),\n$cgi-&gt;start_html({-title =&gt; \"TEST PAGE\",\n      -style =&gt; [{-type =&gt; \"text/css\", -src =&gt;\"one.css\"},\n                 {-type =&gt; \"text/css\", -src =&gt;\"calendar.css\"}],\n      -script =&gt; [\n     {-type =&gt; \"text/javascript\", -src =&gt; \"main.js\"},\n                 ]}),\n  $cgi-&gt;start_form({-name =&gt; \"test\", -autocomplete =&gt; \"off\"});\nprint $html;\n</code></pre>\n\n<p>The HTML is then displayed on the page instead of rendered? Why would saving all the HTML in a var then printing that var produce a different result than printing directly? It's difficult to capture what's different because of the subtle differences like capturing a \\n\\n ..</p>\n\n<p>Do I have to sprint that header into the var or something?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1453927548, "post_id": 35047574, "comment_id": 57819518, "body": "@toolic: Also, the copy of perl I &quot;get&quot; to use is ancient 5.6, so it&#39;s possible they fixed this since then."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1453935156, "post_id": 35047574, "comment_id": 57823704, "body": "@BillyONeal Holy crap, Perl 5.6 is old enough to drive in some countries!"}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1453935229, "post_id": 35047574, "comment_id": 57823738, "body": "@duskwuff: Yeah. Our test harness is <i>OLD</i>"}], "answers": [{"comments": [{"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1453927443, "post_id": 35047619, "comment_id": 57819458, "body": "So one double facepalm typo, and one perl just being strange. Got it, thanks!"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453927689, "post_id": 35047619, "comment_id": 57819579, "body": "What was the Perl being strange bit?"}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453927847, "post_id": 35047619, "comment_id": 57819664, "body": "@Grant: Declaring the thing you want to be an array as a scalar."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 2, "creation_date": 1453927936, "post_id": 35047619, "comment_id": 57819718, "body": "@BillyONeal That&#39;s because the &quot;thing&quot; is not an array, it&#39;s a reference. And all references are scalars."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1453960229, "post_id": 35047619, "comment_id": 57831501, "body": "@BillyONeal If you really want to understand references <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">Mark&#39;s very short tutorial about references</a> is an excellent place to start."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 7, "last_activity_date": 1453927403, "creation_date": 1453927403, "answer_id": 35047619, "question_id": 35047574, "link": "https://stackoverflow.com/questions/35047574/how-do-i-accept-an-output-parameter-array-and-a-scalar-in-perl/35047619#35047619", "title": "How do I accept an output parameter array and a scalar in perl?", "body": "<p>Declare the variable as <code>$target</code> when unpacking your arguments, and unpack from <code>@_</code>:</p>\n\n<pre><code>my ($target, $path) = @_;\n    ^                 ^^\n</code></pre>\n"}], "owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 35047619, "answer_count": 1, "score": 4, "last_activity_date": 1453960185, "creation_date": 1453927244, "question_id": 35047574, "link": "https://stackoverflow.com/questions/35047574/how-do-i-accept-an-output-parameter-array-and-a-scalar-in-perl", "title": "How do I accept an output parameter array and a scalar in perl?", "body": "<p>I have a function where I want to check if a path exists, and if it does, add that to an array. Here's what I tried:</p>\n\n<pre><code># If a path exists, adds the canonical version of that path to an array\nsub AddPathCandidate {\n    my (@$target, $path) = $_;\n    die ('path needed') unless defined($path);\n    $path = File::Spec-&gt;canonpath($path);\n    if (-e $path) {\n        push(@{$target}, $path);\n    }\n}\n</code></pre>\n\n<p>where the caller looks like:</p>\n\n<pre><code>my @exampleDirs = ();\nAddPathCandidate(\\@exampleDirs, $inDir . 'a');\nAddPathCandidate(\\@exampleDirs, $inDir . \"../b/a/$arch\");\nAddPathCandidate(\\@exampleDirs, $inDir . \"../../b/a/$arch\");\n</code></pre>\n\n<p>But the \"die\" statement always executes; the second parameter of AddPathCandidate isn't getting through somehow.</p>\n\n<p>Is what I'm trying to do here even possible or is there some more \"perl-ish way\" to accomplish this?</p>\n"}, {"tags": ["perl", "powershell", "host"], "comments": [{"owner": {"reputation": 46257, "user_id": 702944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ddc09de7193d48aa3ba66a2e2d3cee01?s=128&d=identicon&r=PG&f=1", "display_name": "Frode F.", "link": "https://stackoverflow.com/users/702944/frode-f"}, "edited": false, "score": 0, "creation_date": 1453927649, "post_id": 35047174, "comment_id": 57819560, "body": "I don&#39;t know Perl so I&#39;m probably reading this wrong... Doesn&#39;t <code>m&#47;$web&#47;</code> = line starts with &quot;web&quot;? A host file starts with `         1.1.1.1     somedomain` so that would never work. Please provide a sample hosts file before and after the desired changes."}, {"owner": {"reputation": 46257, "user_id": 702944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ddc09de7193d48aa3ba66a2e2d3cee01?s=128&d=identicon&r=PG&f=1", "display_name": "Frode F.", "link": "https://stackoverflow.com/users/702944/frode-f"}, "edited": false, "score": 0, "creation_date": 1453930097, "post_id": 35047174, "comment_id": 57820942, "body": "Okay :) What does the rest in the else part do? :)"}], "answers": [{"tags": [], "owner": {"reputation": 15822, "user_id": 36429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hbOz9.jpg?s=128&g=1", "display_name": "Mike Shepard", "link": "https://stackoverflow.com/users/36429/mike-shepard"}, "is_accepted": false, "score": 2, "last_activity_date": 1453927225, "creation_date": 1453927225, "answer_id": 35047567, "question_id": 35047174, "link": "https://stackoverflow.com/questions/35047174/powershell-host-file-edit/35047567#35047567", "title": "Powershell Host File edit", "body": "<p>-contains is a \"set\" operator, not a substring operator.  Try .Contains() or -like.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454083770, "post_id": 35048433, "comment_id": 57899813, "body": "This works exactly as a desire... However, it does not remove the comment from the old line.. Anyway to do that part as well??"}, {"owner": {"reputation": 46257, "user_id": 702944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ddc09de7193d48aa3ba66a2e2d3cee01?s=128&d=identicon&r=PG&f=1", "display_name": "Frode F.", "link": "https://stackoverflow.com/users/702944/frode-f"}, "reply_to_user": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454086115, "post_id": 35048433, "comment_id": 57901437, "body": "See updated answer. Next time you should include a sample (before and after) as it&#39;s unclear what you want for those who doesn&#39;t know perl."}, {"owner": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454100194, "post_id": 35048433, "comment_id": 57909155, "body": "I apologize, I will keep that in mind for the future. But now it is no longer working..."}, {"owner": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454100334, "post_id": 35048433, "comment_id": 57909245, "body": "Nevermind didn&#39;t see you wrapped it in a function!  Thanks for all the help!!"}, {"owner": {"reputation": 46257, "user_id": 702944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ddc09de7193d48aa3ba66a2e2d3cee01?s=128&d=identicon&r=PG&f=1", "display_name": "Frode F.", "link": "https://stackoverflow.com/users/702944/frode-f"}, "reply_to_user": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454148984, "post_id": 35048433, "comment_id": 57921963, "body": "Glad i could help. If you consider this the correct answer you should mark it as answer using the checkmark to the left."}], "tags": [], "owner": {"reputation": 46257, "user_id": 702944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ddc09de7193d48aa3ba66a2e2d3cee01?s=128&d=identicon&r=PG&f=1", "display_name": "Frode F.", "link": "https://stackoverflow.com/users/702944/frode-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1454086074, "last_edit_date": 1454086074, "creation_date": 1453930230, "answer_id": 35048433, "question_id": 35047174, "link": "https://stackoverflow.com/questions/35047174/powershell-host-file-edit/35048433#35048433", "title": "Powershell Host File edit", "body": "<p>This will comment out lines matching the variable <code>$word</code>, while removing <code>#</code> from non-matches (except the header):</p>\n\n<pre><code>function Edit-Hosts ([string]$Web, $File = \"C:\\windows\\system32\\drivers\\etc\\hosts\") {\n    #If file exists and $web is not empty/whitespace\n    if((Test-Path -Path $file -PathType Leaf) -and $web.Trim()) {\n        $row = 1\n\n        (Get-Content -Path $file) | ForEach-Object {\n            if($_ -like \"*$web*\") {\n                #Matched PROD, comment out line\n                \"#$($_)\"\n            } else { \n                #No match. If past header = remove comment\n                if($row -gt 21) { $_ -replace '^#' } else { $_ }\n            }\n            $row++\n        } | Set-Content -Path $file\n\n    } else {\n        Write-Error -Category InvalidArgument -Message \"'$file' doesn't exist or Web-parameter is empty\"\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>Edit-Hosts -Web \"PROD\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454083807, "post_id": 35049284, "comment_id": 57899837, "body": "Frode. F&#39;s worked great, I attemted to run yours with no success. It did not error either... not sure why it didn&#39;t work"}, {"owner": {"reputation": 3832, "user_id": 5771128, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/g8dup.jpg?s=128&g=1", "display_name": "Charlie Joynt", "link": "https://stackoverflow.com/users/5771128/charlie-joynt"}, "reply_to_user": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454090495, "post_id": 35049284, "comment_id": 57903902, "body": "I can have another look; I&#39;d at least like this to be a useful answer. :) I happened to be doing almost exactly this same thing in work today so it is fresh in my mind."}, {"owner": {"reputation": 3832, "user_id": 5771128, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/g8dup.jpg?s=128&g=1", "display_name": "Charlie Joynt", "link": "https://stackoverflow.com/users/5771128/charlie-joynt"}, "reply_to_user": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "edited": false, "score": 0, "creation_date": 1454107205, "post_id": 35049284, "comment_id": 57912431, "body": "If it isn&#39;t working the most likely the <code>-match</code> part isn&#39;t working. The bit in quotes after <code>-match</code> is interpreted as a regex, so if <b>$web</b> contains special characters there could be a problem. In my own testing of the code above I set <code>$web = &quot;localhost&quot;</code> and, using a default hosts file, it prefixed the three lines with &quot;localhost&quot; in them with a &quot;# &quot;. I&#39;ll put some edits in the answer though..."}], "tags": [], "owner": {"reputation": 3832, "user_id": 5771128, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/g8dup.jpg?s=128&g=1", "display_name": "Charlie Joynt", "link": "https://stackoverflow.com/users/5771128/charlie-joynt"}, "is_accepted": false, "score": 0, "last_activity_date": 1454111212, "last_edit_date": 1495535278, "creation_date": 1453933520, "answer_id": 35049284, "question_id": 35047174, "link": "https://stackoverflow.com/questions/35047174/powershell-host-file-edit/35049284#35049284", "title": "Powershell Host File edit", "body": "<p>This is a similar answer to Frode F.'s answer, but I'm not yet able to comment to add my 2c worth, so have to provide an alternative answer instead.</p>\n\n<p>It looks like one of the gotchas moving from perl to PowerShell, in this example, is that when we get the content of the file using <code>Get-Content</code> it is an \"offline\" copy, i.e. any edits are not made directly to the file itself. One approach is to compile the new content to the <em>whole</em> file and then write that back to disk.</p>\n\n<p>I suppose that the <code>print FILE \"some text\\n\";</code> construct in perl might be similar to <code>\"some text\" | Out-File $filename -Encoding ascii -Append</code> in PowerShell, albeit you would use the latter either (1) to write line-by-line to a new/empty file or (2) accept that you are appending to existing content.</p>\n\n<p>Two other things about editing the hosts file:</p>\n\n<ul>\n<li>Be sure to make sure that your hosts file is ASCII encoded; I have caused a major outage for a key enterprise application (50k+ users) in learning that...</li>\n<li>You may need to remember to run your PowerShell / PowerShell ISE by right-clicking and choosing <strong>Run as Administrator</strong> else you might not be able to modify the file.</li>\n</ul>\n\n<p>Anyway, here's a version of the previous answer using <code>Out-File</code>:</p>\n\n<pre><code>$FileName = \"C:\\windows\\system32\\drivers\\etc\\hosts\"\n$web = \"PROD\"\n\n# Get \"offline\" copy of file contents\n$FileContent = Get-Content $FileName\n\n# The following creates an empty file and returns a file\n# object (type [System.IO.FileInfo])\n\n$EmptyFile = New-Item -Path $FileName -ItemType File -Force\n\nforeach($Line in $FileContent) {\n  if($Line -match \"$web\") {\n    \"# $Line\" | Out-File $EmptyFile -Append -Encoding ascii\n  } else {\n    \"$Line\" | Out-File $EmptyFile -Append -Encoding ascii\n  }\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<ol>\n<li>The <code>($Line -match \"$web\")</code> takes whatever is in the <strong>$web</strong> variable and treats it as a regular expression. In my example I was assuming that you were just wanting to match a simple text string, but you might well be trying to match an IP address, etc. You have a couple of options:\n\n<ul>\n<li>Use <code>($Line -like \"*$web*\")</code> instead.</li>\n<li>Convert what is in $web to be an <em>escaped</em> regex, i.e. one that will match literally. Do this with <code>($Line -match [Regex]::Escape($web))</code>. </li>\n</ul></li>\n<li>You also wanted to strip off comments from any line past row 21 of the hosts file, should that line <em>not</em> match <strong>$web</strong>. In perl you have used the <strong>s</strong> substitution operator; the PowerShell equivalent is <code>-replace</code>.</li>\n</ol>\n\n<p>So... here is an updated version of that <code>foreach</code> loop:</p>\n\n<pre><code>$LineCount = 1\n\nforeach($Line in $FileContent) {\n  if($Line -match [Regex]::Escape($web) {\n    # ADD comment to any matched line\n    $Line = \"#\" + $Line\n  } elseif($LineCount -gt 21) {\n    # Uncomment the other lines\n    $Line = $Line -replace '^[# ]+',''\n  }\n\n  # Remove 'stacked up' comment characters, if any\n  $Line = $Line -replace '[#]+','#'\n\n  $Line | Out-File $EmptyFile -Append -Encoding ascii\n\n  $LineCount++\n}\n</code></pre>\n\n<h2>More Information</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1331873/are-there-good-references-for-moving-from-perl-to-powershell\">Are there good references for moving from Perl to Powershell?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19794187/how-to-use-operator-replace-in-powershell-to-replace-strings-of-texts-with-sp\">How to use operator &#39;-replace&#39; in PowerShell to replace strings of texts with special characters and replace successfully</a></li>\n<li><a href=\"https://technet.microsoft.com/en-gb/library/hh847759.aspx\" rel=\"nofollow noreferrer\">about_Comparison_Operators</a></li>\n<li><a href=\"http://www.comp.leeds.ac.uk/Perl/sandtr.html\" rel=\"nofollow noreferrer\">http://www.comp.leeds.ac.uk/Perl/sandtr.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 353, "user_id": 4691676, "user_type": "registered", "accept_rate": 4, "profile_image": "https://i.stack.imgur.com/iHGbp.jpg?s=128&g=1", "display_name": "Royston", "link": "https://stackoverflow.com/users/4691676/royston"}, "is_accepted": false, "score": 0, "last_activity_date": 1574947391, "creation_date": 1574947391, "answer_id": 59089886, "question_id": 35047174, "link": "https://stackoverflow.com/questions/35047174/powershell-host-file-edit/59089886#59089886", "title": "Powershell Host File edit", "body": "<p>If you wanted to verify what was in there and then add entries, you could use the below which is designed to be ran interactively and returns any existing entries you specify in the varibles:</p>\n\n<p>Note: the `t is powershell's in script method for 'Tab' command. </p>\n\n<pre><code>$hostscontent\n\n# Script to Verify and Add Host File Entries\n\n$hostfile = gc 'C:\\Windows\\System32\\drivers\\etc\\hosts'\n$hostscontent1 = $hostfile | select-string \"autodiscover.XXX.co.uk\"\n$hostscontent2 = $hostfile | select-string \"webmail.XXX.co.uk\"\n$1 = \"XX.XX.XXX.XX`tautodiscover.XXX.co.uk\"\n$2 = \"webmail.XXX.co.uk\"\n\n\n\n\n# Replace this machines path with a path to your list of machines e.g. $machines = gc \\\\machine\\machines.txt\n$machines = gc 'c:\\mytestmachine.txt'\nForEach ($machine in $machines) {\n\n                                If ($hostscontent1 -ne $null) { \n                                Start-Sleep -Seconds 1\n                                Write-Host \"$machine Already has Entry $1\" -ForegroundColor Green\n\n} Else { \n        Write-Host \"Adding Entry $1 for $machine\" -ForegroundColor Green\n        Start-Sleep -Seconds 1\n        Add-Content -Path C:\\Windows\\System32\\drivers\\etc\\hosts -Value \"XX.XX.XXX.XX`tautodiscover.XXX.co.uk\" -Force\n\n}\n\n                                If ($hostscontent2 -ne $null) {\n                                Start-Sleep -Seconds 1\n                                Write-Host \"$machine Already has Entry $2\" -ForegroundColor Green\n\n} Else {\n        Write-Host \"Adding Entry $2 for $machine\" -ForegroundColor Green\n        Start-Sleep -Seconds 1\n        Add-Content -Path C:\\Windows\\System32\\drivers\\etc\\hosts -Value \"XX.XX.XXX.XX`twebmail.XXX.co.uk\" -Force\n\n}\n    }\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5049160, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/e685c1bc98dad36bab8b5c7582bb9ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Campbell", "link": "https://stackoverflow.com/users/5049160/grant-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1574947391, "creation_date": 1453925771, "last_edit_date": 1453925878, "question_id": 35047174, "link": "https://stackoverflow.com/questions/35047174/powershell-host-file-edit", "title": "Powershell Host File edit", "body": "<p>Guys i'm having some issues converting my Perl script to powershell, I need some help. In the host file of our machines, we have all of the URL's to our test environments blocked. In my PERL script, based on which environment is selected, it will comment out the line of the environment selected to allow access and block others so the testers can't mistakenly do things in the wrong environment. </p>\n\n<p>I need help converting to powershell</p>\n\n<p>Below is what I have in PERL:</p>\n\n<pre><code>sub editHosts {\nprint \"Editing hosts file...\\n\";\nmy $file = 'C:\\\\Windows\\\\System32\\\\Drivers\\\\etc\\\\hosts';\nmy $data = readFile($file);\nmy @lines = split /\\n/, $data;\nmy $row = '1';\nopen (FILE, \"&gt;$file\") or die \"Cannot open $file\\n\";\nforeach my $line (@lines) {\n    if ($line =~ m/$web/) { \n        print FILE '#'.\"$line\\n\"; }\n    else {\n        if ($row &gt; '21') {\n            $line =~ s/^\\#*127\\.0\\.0\\.1/127\\.0\\.0\\.1/;\n            $line =~ s/[#;].*$//s; }\n        print FILE \"$line\\n\"; }\n    $row++;\n}\nclose(FILE);\n}\n</code></pre>\n\n<p>Here is what i've tried in Powershell: </p>\n\n<pre><code>foreach ($line in get-content \"C:\\windows\\system32\\drivers\\etc\\hosts\") {\nif ($line -contains $web) {\n$line + \"#\"\n}\n</code></pre>\n\n<p>I've tried variation including set-content with what used to be in the host file, etc.</p>\n\n<p>Any help would be appreciated! </p>\n\n<p>Thanks,\nGrant </p>\n"}, {"tags": ["perl", "gd", "cpan"], "comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453925627, "post_id": 35046966, "comment_id": 57818421, "body": "Obvious questions that must be asked ... someone once said: &quot;99% of UNIX issues are permissions related&quot;, so are you running the commands as different users?  (*i.e.8 did you run your CPAN shell as <code>root</code> the first time and later as a user). Are you out of disk space?  Your <code>%INC</code> looks a little bit spread around and does not seem to follow application specific management, this makes it easier to break an something with &quot;updates at a distance&quot;."}, {"owner": {"reputation": 866, "user_id": 4789486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zJGuM.jpg?s=128&g=1", "display_name": "Gaius Augustus", "link": "https://stackoverflow.com/users/4789486/gaius-augustus"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453926306, "post_id": 35046966, "comment_id": 57818834, "body": "I only have one user, and have run everything the same way.  I checked disk space and it is fine.  Please see my updates...I just found out I needed <code>libgd</code> installed first."}], "answers": [{"comments": [{"owner": {"reputation": 866, "user_id": 4789486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zJGuM.jpg?s=128&g=1", "display_name": "Gaius Augustus", "link": "https://stackoverflow.com/users/4789486/gaius-augustus"}, "edited": false, "score": 0, "creation_date": 1453932071, "post_id": 35048011, "comment_id": 57822061, "body": "As mentioned, this was not really a fix, but pointed me in the correct direction.  See my answer for how I actually fixed the problem."}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": true, "score": 2, "last_activity_date": 1453928870, "last_edit_date": 1495541692, "creation_date": 1453928870, "answer_id": 35048011, "question_id": 35046966, "link": "https://stackoverflow.com/questions/35046966/installing-gd-module-for-perl-errors-when-installing-program/35048011#35048011", "title": "Installing GD module for perl - Errors when installing program", "body": "<p>This is not really a fix <em>per se</em> but take a look at:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27597167/cannot-install-gd-module-on-darwin-13-0-1-using-cpan\">Cannot install GD module on darwin 13.0.1 using cpan</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453935730, "post_id": 35048551, "comment_id": 57823976, "body": "Can you copy the &quot;very last bit of code&quot; into your answer? I can&#39;t figure out what bit of code you&#39;re referring to, specifically, and if that link ever goes dead, this answer will be a lot less useful."}], "tags": [], "owner": {"reputation": 866, "user_id": 4789486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zJGuM.jpg?s=128&g=1", "display_name": "Gaius Augustus", "link": "https://stackoverflow.com/users/4789486/gaius-augustus"}, "is_accepted": false, "score": 3, "last_activity_date": 1454015244, "last_edit_date": 1495541286, "creation_date": 1453930682, "answer_id": 35048551, "question_id": 35046966, "link": "https://stackoverflow.com/questions/35046966/installing-gd-module-for-perl-errors-when-installing-program/35048551#35048551", "title": "Installing GD module for perl - Errors when installing program", "body": "<p>As G. Cito suggested, there was an issue with GD module in perl.</p>\n\n<p>I used the instructions he posted along with the following to fix the errors:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27597167/cannot-install-gd-module-on-darwin-13-0-1-using-cpan\">Cannot install GD module on darwin 13.0.1 using cpan</a></li>\n<li><a href=\"http://zientzilaria.herokuapp.com/blog/2012/06/03/installing-circos-on-os-x/\" rel=\"nofollow noreferrer\">Installing Circos on OS X</a></li>\n</ul>\n\n<p>Specifically, the very last bit of code was what I needed in order to properly install GD module for perl:</p>\n\n<pre><code>srctemp$ curl -O http://www.cpan.org/authors/id/L/LD/LDS/GD-2.49.tar.gz (if curl fails copy and past on your browser)\nsrctemp$ tar -xzvf GD-2.49.tar.gz\nsrctemp$ cd GD-2.49\nsrctemp/GD-2.49$ perl Makefile.PL\nsrctemp/GD-2.49$ make\nsrctemp/GD-2.49$ sudo make install\n</code></pre>\n"}], "owner": {"reputation": 866, "user_id": 4789486, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zJGuM.jpg?s=128&g=1", "display_name": "Gaius Augustus", "link": "https://stackoverflow.com/users/4789486/gaius-augustus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3664, "favorite_count": 0, "accepted_answer_id": 35048011, "answer_count": 2, "score": 3, "last_activity_date": 1454015244, "creation_date": 1453925019, "last_edit_date": 1453930736, "question_id": 35046966, "link": "https://stackoverflow.com/questions/35046966/installing-gd-module-for-perl-errors-when-installing-program", "title": "Installing GD module for perl - Errors when installing program", "body": "<p>I am currently trying to install Circos in Ubuntu.</p>\n\n<p>Per the instructions, I have gone to the bin folder and run <code>perl circos</code></p>\n\n<p>I got an error telling me a bunch of modules were not installed.  I tried to install them, and all worked except two.</p>\n\n<p>When I go into the <code>cpan</code> shell:</p>\n\n<pre><code>cpan[7]&gt; install GD.pm\nRunning install for module 'GD'\n  LDS/GD-2.56.tar.gz\n  Has already been unwrapped into directory /home/qiime/.cpan/build/GD-2.56-DqDuWT\n  LDS/GD-2.56.tar.gz\n  '/usr/bin/perl Build.PL --installdirs site' returned status 512, not re-running\n</code></pre>\n\n<p>If I run it from the main terminal:</p>\n\n<pre><code>qiime@qiime-190-virtual-box:~/Documents/circos-0.69/bin$ perl -MCPAN -e 'install GD'\nReading '/home/qiime/.cpan/Metadata'\n  Database was generated on Wed, 27 Jan 2016 07:41:02 GMT\nRunning install for module 'GD'\nChecksum for /home/qiime/.cpan/sources/authors/id/L/LD/LDS/GD-2.56.tar.gz ok\n\n==&gt; Couldn't mkdir '/home/qiime/.cpan/build/tmp-8161': Permission denied\n\n==&gt; Cannot continue: Please find the reason why I cannot make the &lt;==\n==&gt; directory                                                     &lt;==\n==&gt; /home/qiime/.cpan/build/tmp-8161                              &lt;==\n==&gt; and fix the problem, then retry.                              &lt;==\n</code></pre>\n\n<p>Every other (~15 modules total) module installed with no problem.  I'm not sure what to do at this point.  I assume it's something simple I am missing...?</p>\n\n<p>For completeness, here is the error from trying to run <code>perl circos</code>:</p>\n\n<pre><code>qiime@qiime-190-virtual-box:~/Documents/circos-0.69/bin$ perl circos\n*** REQUIRED MODULE(S) MISSING OR OUT-OF-DATE ***\n\nYou are missing one or more Perl modules, require newer versions, or some modules failed to load. Use CPAN to install it as described in this tutorial\n\nhttp://www.circos.ca/documentation/tutorials/configuration/perl_and_modules\n\nmissing GD\n  error Can't locate GD.pm in @INC (@INC contains: /home/qiime/Documents/circos-0.69/bin/lib /home/qiime/Documents/circos-0.69/bin/../lib /home/qiime/Documents/circos-0.69/bin /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at (eval 25) line 1.\nmissing GD::Polyline\n  error Can't locate GD/Polyline.pm in @INC (@INC contains: /home/qiime/Documents/circos-0.69/bin/lib /home/qiime/Documents/circos-0.69/bin/../lib /home/qiime/Documents/circos-0.69/bin /etc/perl /usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14 /usr/local/lib/site_perl .) at (eval 26) line 1.\n</code></pre>\n\n<p><strong>EDIT: UPDATE</strong>\nI found that I may not have install <code>libgd</code>, so I did that.  I tried running <code>install GD.pm</code> in the <code>cpan</code> shell:</p>\n\n<pre><code>cpan[1]&gt; install GD.pm\nReading '/home/qiime/.cpan/Metadata'\n  Database was generated on Wed, 27 Jan 2016 07:41:02 GMT\nRunning install for module 'GD'\nChecksum for /home/qiime/.cpan/sources/authors/id/L/LD/LDS/GD-2.56.tar.gz ok\nScanning cache /home/qiime/.cpan/build for sizes\n............................................................................DONE\nConfiguring L/LD/LDS/GD-2.56.tar.gz with Build.PL\nConfiguring for libgd version 2.0.36.\nChecking for stray libgd header files...none found.\n\nUnknown option: installdirs\nUsage: perl Build.PL [options]\n\nConfigure GD module.\n\n Options:\n     -options       \"JPEG,FT,PNG,GIF,XPM,ANIMGIF\"   feature options, separated by commas\n     -lib_gd_path   path            path to libgd\n     -lib_ft_path   path            path to Freetype library\n     -lib_png_path  path            path to libpng\n     -lib_jpeg_path path            path to libjpeg\n     -lib_xpm_path  path            path to libxpm\n     -lib_zlib_path path            path to libpng\n     -ignore_missing_gd             Ignore missing or old libgd installations and try to compile anyway\n\nIf no options are passed on the command line.  The program will\nattempt to autoconfigure itself with the gdlib-config program (present\nin GD versions 2.0.27 or later).  Otherwise it will prompt for these\nvalues interactively.\nWarning: No success on command[/usr/bin/perl Build.PL --installdirs site]\n  LDS/GD-2.56.tar.gz\n  /usr/bin/perl Build.PL --installdirs site -- NOT OK\nFailed during this command:\n LDS/GD-2.56.tar.gz                           : writemakefile NO '/usr/bin/perl Build.PL --installdirs site' returned status 512\n</code></pre>\n"}, {"tags": ["bash", "perl", "sed", "wildcard"], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933197, "last_edit_date": 1453933197, "creation_date": 1453924430, "answer_id": 35046804, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash/35046804#35046804", "title": "replace part of different strings (perl, bash)", "body": "<p>You can do so with gnu-awk:</p>\n\n<pre><code>cat file\nany text,\"textA, textB\",any text\n\nawk -v FPAT='\"[^\"]*\"|[^,]*' -v OFS=, '{for(i=1; i&lt;=NF; i++) {\n     gsub(/,/, \";\", $i); gsub(/\"/, \"\", $i)}} 1' file\nany text,textA; textB,any text\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4401178"}, "is_accepted": false, "score": 0, "last_activity_date": 1453930366, "creation_date": 1453930366, "answer_id": 35048467, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash/35048467#35048467", "title": "replace part of different strings (perl, bash)", "body": "<p>You can use sed, to match the quotes and then capture groups to grab the text after the first quote up to a comma (all text that is not a quote and not a comma (<code>[^\",]*</code>), then the text after the comma up to the closing quote.</p>\n\n<p><code>sed 's/\\(\"\\)\\([^\",]*\\)\\([,]\\)\\([^\",]*\\)\\(\"\\)/\\2;\\4/g' &lt;&lt;&lt; 'any text,\"textA, textB\",any text'</code></p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933151, "creation_date": 1453933151, "answer_id": 35049192, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash/35049192#35049192", "title": "replace part of different strings (perl, bash)", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r ':a;/\"/!b;s//\\n/;s//\\n/;h;y/,/;/;G;s/.*\\n(.*)\\n.*\\n(.*)\\n.*\\n/\\2 \\1/;ta' file\n</code></pre>\n\n<p>If there are no <code>\"</code> in the line bail out. Otherwise replace the first two occurances of <code>\"</code> with newlines and make a copy in the hold space. Translate any <code>,</code> to <code>;</code> in the pattern space then append the hold space to the pattern space and re-arrange the line using pattern matching. If the substitution were successful then repeat until all <code>\"</code> have been replaced.</p>\n\n<p>N.B. This presupposes that all <code>\"</code> are matched.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1453934355, "creation_date": 1453934355, "answer_id": 35049519, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash/35049519#35049519", "title": "replace part of different strings (perl, bash)", "body": "<pre><code>$ sed -r 's/\"([^\"]+),([^\"]+)\"/\\1;\\2/g' file\nany text,textA; textB,any text\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1453978156, "creation_date": 1453978156, "answer_id": 35059342, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash/35059342#35059342", "title": "replace part of different strings (perl, bash)", "body": "<p>Perl solution using the (standard) T<a href=\"https://metacpan.org/pod/Text::ParseWords\" rel=\"nofollow\">ext::ParseWords</a> module.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Text::ParseWords;\n\nwhile (&lt;DATA&gt;) {\n  my @data = map { s/,/;/g; $_ } parse_line(',', 0, $_);\n  print join ',', @data;\n}\n\n__DATA__\nany text,\"textA, textB\",any text\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5848673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c571919060c035d613bb3ba40c8e72?s=128&d=identicon&r=PG&f=1", "display_name": "Simone", "link": "https://stackoverflow.com/users/5848673/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1453978156, "creation_date": 1453924174, "last_edit_date": 1453924303, "question_id": 35046731, "link": "https://stackoverflow.com/questions/35046731/replace-part-of-different-strings-perl-bash", "title": "replace part of different strings (perl, bash)", "body": "<p>I would like to replace text in a csv-file in several lines:</p>\n\n<p>Input:</p>\n\n<pre><code>any text,\"textA, textB\",any text\n</code></pre>\n\n<p>Ouput:</p>\n\n<pre><code>any text, textA; textB,any text\n</code></pre>\n\n<p>(i.e.: substitute comma by semicolon in case it is located between two quotation marks, and remove also quotation marks)</p>\n\n<p>I tried sed and wildcards for textA and textB but was not able to print textA and textB in the output file.\nThanks for your help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1453915108, "post_id": 35043874, "comment_id": 57811938, "body": "<code>printf</code> / <code>sprintf</code> <code>&quot;%.2f&quot;</code>"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1453915259, "post_id": 35043874, "comment_id": 57812029, "body": "See the Perl FAQ at <a href=\"http://learn.perl.org/faq/perlfaq4.html\" rel=\"nofollow noreferrer\">learn.perl.org/faq/perlfaq4.html</a> Search for &quot;decimal places&quot;."}, {"owner": {"reputation": 518, "user_id": 3617046, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/afad7c3481df3dcbbcd2b4366782e056?s=128&d=identicon&r=PG&f=1", "display_name": "Bulrush", "link": "https://stackoverflow.com/users/3617046/bulrush"}, "edited": false, "score": 0, "creation_date": 1454177703, "post_id": 35043874, "comment_id": 57931504, "body": "Be careful with rounding with sprintf. It sometimes doesn&#39;t round calculated numbers that end in .49 correctly, because the 2.49 is not stored as 2.49, it&#39;s stored as something like 2.49999999999999."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 23, "last_activity_date": 1453917389, "creation_date": 1453917389, "answer_id": 35044678, "question_id": 35043874, "link": "https://stackoverflow.com/questions/35043874/how-can-i-format-a-number-to-2-decimal-places-in-perl/35044678#35044678", "title": "How can I format a number to 2 decimal places in Perl?", "body": "<p>It depends on how you want to truncate it.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/sprintf.html\"><code>sprintf</code></a> with the <code>%.2f</code> format will do the normal \"round to half even\".</p>\n\n<pre><code>sprintf(\"%.2f\", 1.555);  # 1.56\nsprintf(\"%.2f\", 1.554);  # 1.55\n</code></pre>\n\n<p><code>%f</code> is a floating point number (basically a decimal) and <code>.2</code> says to only print two decimal places.</p>\n\n<hr>\n\n<p>If you want to truncate, not round, then use <code>int</code>.  Since that will only truncate to an integer, you have to multiply it and divide it again by the number of decimal places you want to the power of ten.</p>\n\n<pre><code>my $places = 2;\nmy $factor = 10**$places;\nint(1.555 * $factor) / $factor;  # 1.55\n</code></pre>\n\n<hr>\n\n<p>For any other rounding scheme use <a href=\"https://metacpan.org/pod/Math::Round\">Math::Round</a>.</p>\n"}], "owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41492, "favorite_count": 3, "answer_count": 1, "score": 6, "last_activity_date": 1585386904, "creation_date": 1453914999, "last_edit_date": 1453917909, "question_id": 35043874, "link": "https://stackoverflow.com/questions/35043874/how-can-i-format-a-number-to-2-decimal-places-in-perl", "title": "How can I format a number to 2 decimal places in Perl?", "body": "<p>What is best way to format a number to 2 decimal places in Perl?</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10      -&gt; 10.00\n10.1    -&gt; 10.10\n10.11   -&gt; 10.11\n10.111  -&gt; 10.11\n10.1111 -&gt; 10.11\n</code></pre>\n"}, {"tags": ["regex", "perl", "pattern-matching", "readfile"], "comments": [{"owner": {"reputation": 398, "user_id": 3329333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddb83927a51446f8511dac1ed4be63f?s=128&d=identicon&r=PG", "display_name": "lnrdo", "link": "https://stackoverflow.com/users/3329333/lnrdo"}, "edited": false, "score": 1, "creation_date": 1453911332, "post_id": 35042394, "comment_id": 57809285, "body": "Why do you need two separate whiles. It seems unnecessarily complicated and inefficient. You can just check for it in a single loop. Just do not make it a elsif, but another if and do not exit the loop inside the first branch."}, {"owner": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "reply_to_user": {"reputation": 398, "user_id": 3329333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddb83927a51446f8511dac1ed4be63f?s=128&d=identicon&r=PG", "display_name": "lnrdo", "link": "https://stackoverflow.com/users/3329333/lnrdo"}, "edited": false, "score": 0, "creation_date": 1453911433, "post_id": 35042394, "comment_id": 57809356, "body": "I intend to have a second <code>while</code> so that after the first 2 matches I do not need to check for <code>pattern1</code> and <code>pattern2</code> again."}, {"owner": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "reply_to_user": {"reputation": 398, "user_id": 3329333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddb83927a51446f8511dac1ed4be63f?s=128&d=identicon&r=PG", "display_name": "lnrdo", "link": "https://stackoverflow.com/users/3329333/lnrdo"}, "edited": false, "score": 0, "creation_date": 1453911563, "post_id": 35042394, "comment_id": 57809441, "body": "btw shouldn&#39;t <code>elsif</code> be better, since once you have a match you can proceed to check the next line immediately?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1453912221, "post_id": 35042394, "comment_id": 57809897, "body": "Yes, you can do a <code>while (my $line = &lt;FILE&gt;) { while (my $line = &lt;FILE&gt;) { ...} ...}</code> Scope is honored for the $line, and <code>&lt;FILE&gt;</code> position is only increased on the handle. The handle would have to be reset to start from the beginning of file. And you should use &lt;$file&gt; variable instead of &lt;FILE&gt;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453912550, "post_id": 35042394, "comment_id": 57810143, "body": "I appreciate your attempts to simplify your log file data, but it would be more help to see the real data together with a full description of the result that you require"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1453913066, "post_id": 35042394, "comment_id": 57810494, "body": "Instead of using a second while loop, which I think would be confusing, just keep the patterns you&#39;re checking for saved somehow, perhaps in a list or something.  You can either modify the pattern array when you want to change what you&#39;re searching for or track the indexes of the array that you should be checking for and update those when certain criteria are met...  Just a thought."}], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "edited": false, "score": 0, "creation_date": 1454204085, "post_id": 35096420, "comment_id": 57939595, "body": "This is not exactly what I am looking for. I have found a solution to my problem which is storing my data in an array and it becomes super simple to get any line I need. However, the code you provided to separate the data would still be very useful for future reference. Thanks a lot!"}, {"owner": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "edited": false, "score": 0, "creation_date": 1454204169, "post_id": 35096420, "comment_id": 57939614, "body": "Btw I have seen <code>Data::Dumper</code> being used quite frequently in Perl code, do you mind explaining what is the use of it? Thanks!"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "edited": false, "score": 0, "creation_date": 1454241656, "post_id": 35096420, "comment_id": 57947503, "body": "<a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> is a module to serialize a Perl data structures, i.e. to convert them into a string, no matter how complicated the structure is (hashes of hashes, arrays, you name it). The resulting string can be printed or saved to disk and later be reloaded and <code>eval</code>&#39;ed back into the original data structure. It&#39;s a bit similar to JSON. <i>And,</i> and that&#39;s what most people use it for, it&#39;s perfect for debugging as you can print out your structures to see what&#39;s actually in them."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1454113168, "creation_date": 1454113168, "answer_id": 35096420, "question_id": 35042394, "link": "https://stackoverflow.com/questions/35042394/perl-iterate-through-a-file-to-find-and-save-lines-separately-accordingly-to-dif/35096420#35096420", "title": "Perl iterate through a file to find and save lines separately accordingly to different given patterns", "body": "<p>If you know the 5 patterns in advance, that would be easy. Do you? Or are they part of the input file and unpredictable?</p>\n\n<p>Assuming you know them in advance:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $current_pattern = 'else';\nmy $pattern_arrays = {\n    'pattern1' =&gt; [],\n    'pattern2' =&gt; [],\n    'pattern3' =&gt; [],\n    'pattern4' =&gt; [],\n    'pattern5' =&gt; [],\n    'else'     =&gt; [],\n};\n\nwhile ( my $line = &lt;DATA&gt; ) {\n    chomp($line); # remove trailing '\\n' from $line\n\n    # See if we just read one of our 5 patterns. Remember that\n    # as the $current_pattern, and proceed to the next line.\n    if ( $line =~ /^(pattern1|pattern2|pattern3|pattern4|pattern5)$/ ) {\n        $current_pattern = $line;\n        next; # jump back to \"while...\", i.e. proceed to next line\n    }\n\n    # If we get here, we have some $current_pattern, which is one\n    # of \"pattern1\" ... \"pattern5\" or \"else\". The $current_pattern\n    # is only \"else\" at the beginning, when we haven't found a\n    # pattern yet (i.e. only the first line in your case).\n    # Push the $line to the array that belongs to the $current_pattern.\n    push @{$pattern_arrays-&gt;{$current_pattern}}, $line;\n}\n\n# Pretty-print the arrays.\n$Data::Dumper::Sortkeys = 1; # Sort Data::Dumper output by keys\nprint Data::Dumper-&gt;Dump( [$pattern_arrays], ['pattern_arrays'] );\n\n__DATA__\n(text)\npattern1\npattern2\n(m lines of text)\npattern3\n(2 lines of text)\npattern1\npattern2\n(x lines of text)\npattern3\n(this continues ~50-100 times where number of lines between pattern2 and pattern3 vary)\n...\npattern3\n(5 lines of text)\npattern4\n(2 lines of text)\npattern5\n(text)\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>$pattern_arrays = {\n                    'else' =&gt; [\n                                '(text)'\n                              ],\n                    'pattern1' =&gt; [],\n                    'pattern2' =&gt; [\n                                    '(m lines of text)',\n                                    '(x lines of text)'\n                                  ],\n                    'pattern3' =&gt; [\n                                    '(2 lines of text)',\n                                    '(this continues ~50-100 times where number of lines between pattern2 and pattern3 vary)',\n                                    '...',\n                                    '(5 lines of text)'\n                                  ],\n                    'pattern4' =&gt; [\n                                    '(2 lines of text)'\n                                  ],\n                    'pattern5' =&gt; [\n                                    '(text)',\n                                    ''\n                                  ]\n                  };\n</code></pre>\n\n<p>Actually, I'm not really sure if that is what you asked for.\nOf course, instead of <code>&lt;DATA&gt;</code> you would use some other <code>&lt;FILE&gt;</code>.</p>\n"}], "owner": {"reputation": 801, "user_id": 4652826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/811835123cd52e84642a1b972b9bd77a?s=128&d=identicon&r=PG&f=1", "display_name": "annena", "link": "https://stackoverflow.com/users/4652826/annena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454113168, "creation_date": 1453911073, "question_id": 35042394, "link": "https://stackoverflow.com/questions/35042394/perl-iterate-through-a-file-to-find-and-save-lines-separately-accordingly-to-dif", "title": "Perl iterate through a file to find and save lines separately accordingly to different given patterns", "body": "<p>I need to iterate through a log file (around 2MB) line by line, compare each with 5 different patterns and save those that give a match in separate arrays according to the pattern they match with. The patterns are presented in the file like the following:</p>\n\n<pre><code>(text)\npattern1\npattern2\n(m lines of text)\npattern3\n(2 lines of text)\npattern1\npattern2\n(x lines of text)\npattern3\n(this continues ~50-100 times where number of lines between pattern2 and pattern3 vary)\n...\npattern3\n(5 lines of text)\npattern4\n(2 lines of text)\npattern5\n(text)\n</code></pre>\n\n<p>I am aware that a lot of similar questions have been asked and answered, however, I do not really understand the code in those answers. What I plan to do is:</p>\n\n<ol>\n<li><p>Read each line, check for <code>pattern1</code> and <code>pattern2</code> until the first match using 2 <code>if</code> statements then exit the loop immediately.</p></li>\n<li><p>Start another <code>while (my $line = &lt;FILE&gt;)</code> loop, check only for <code>pattern3</code>, if match found, save the line with <code>pattern3</code> and the followings <code>pattern1</code> and <code>pattern2</code> lines (which are the 3rd and 4th lines from <code>pattern3</code>)</p></li>\n</ol>\n\n<p>Here are my questions:</p>\n\n<p>a. When I exit a <code>while (&lt;FILE&gt;)</code> loop before it reaches the end and start another <code>while ($line = &lt;FILE&gt;)</code> loop immediately after that, does the 2nd loop start reading from the top again or continue from where it stopped?</p>\n\n<p>b. Can anyone be kind enough to give a sample commented implementation for step 2? </p>\n\n<p>c. How can I make use of the search for <code>pattern3</code> to get the line with <code>pattern4</code> and <code>pattern5</code>since the match for <code>pattern4</code> and <code>pattern5</code> is a fixed distance away from the last match of <code>pattern3</code>.</p>\n\n<p>d. Will my plan be more efficient than simply using <code>if-else</code> statements that checks for all 5 patterns for every line (which, eg if there are 30 <code>pattern1</code>'s, the total number of comparisons is 6*30 + 4 + 5 + 5*number of lines with no match)? </p>\n\n<p>e. Any better/more efficient way to solve my problem? The percentage of having a line matched to any pattern is around 1%.</p>\n\n<p>I would really appreciate any answer/suggestion/alternative provided. Thanks</p>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1453910252, "post_id": 35041814, "comment_id": 57808494, "body": "It looks like you&#39;re trying to retrieve result of arbitrary HTTP request, because with URL and LWP module this doesn&#39;t looks like calls at all. Clarify your question - right now it is unclear what you really want."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1453977656, "post_id": 35041814, "comment_id": 57841276, "body": "&quot;After googling i found i can use backtick operator for this&quot; - I would be very interested to see the page which gave you this impression."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1467624876, "last_edit_date": 1467624876, "creation_date": 1453910678, "answer_id": 35042246, "question_id": 35041814, "link": "https://stackoverflow.com/questions/35041814/backtick-operator-not-working-for-executing-php-script-from-perl/35042246#35042246", "title": "backtick operator not working for executing php script from perl", "body": "<p>The contents of your backticks aren't a shell command, they're a URL. Since you're already using <code>LWP::Simple</code> you can retrieve the value at this url with a call to <code>get</code></p>\n\n<p>It looks like this, although the value presumably isn't representative of what you expect as you will need to replace <code>&lt;mykey&gt;</code> and <code>&lt;mobile&gt;</code> by their real values. You don't <em>have</em> to build the URL using the <a href=\"http://metacpan.org/module/URI\" rel=\"nofollow\"><code>URI</code></a> module like this, but it makes it much simpler to alter individual query parameters and avoids you having to deal with URI-escaped strings</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse URI;\nuse LWP::Simple 'get';\n\nmy $url = URI-&gt;new('https://control.msg91.com/api/sendhttp.php');\n$url-&gt;query_form(\n    authkey =&gt; '&lt;mykey&gt;',\n    mobiles =&gt; '&lt;mobile&gt;',\n    message =&gt; 'Thank you for placing order at WokoShop. Order id: 1434 Invoice Value: 1445.04',\n    sender  =&gt; 'WOKOSP',\n    route   =&gt; 4,\n);\n\nsay get $url;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>366141754843343731333535\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453925972, "post_id": 35043473, "comment_id": 57818637, "body": "<i>&quot;Using <code>LWP::Simple</code> ... offers you a plenty of features to control the HTTP request you&#39;re sending, by setting the request headers, parameters, etc. I don&#39;t prefer using this option for simple URL calls similar to your case.&quot;</i>  I assume you meant <i>\u201cdon&#39;t prefer\u201d</i>? It&#39;s fine, but rather unusual. I would write \u201cI don&#39;t recommend\u201d.  This isn&#39;t true, and you&#39;re probably thinking of <a href=\"http://metacpan.org/module/LWP\" rel=\"nofollow noreferrer\">LWP</a>. <a href=\"http://metacpan.org/module/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> offers only the very basic calls <code>get</code>, <code>head</code>, and variations on <code>get</code>; there is no way to affect the headers it sends"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453926618, "post_id": 35043473, "comment_id": 57819005, "body": "I would also say that Perl&#39;s capabilities are way beyond those of <code>curl</code> or <code>wget</code>. Your <code>my $phpOutput = `curl $url`</code> is identical to  <code>my $phpOutput = get $url</code> and also avoids starting shell and curl processes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453927134, "post_id": 35043473, "comment_id": 57819281, "body": "Your alternative <code>my $phpOutput = system( &quot;curl &#39;$url&#39;&quot;)</code> will discard the contents of the web page and return only the status of the <code>curl</code> command to <code>$phpOutput</code>, while <code>my $phpOutput = exec &quot;curl &#39;$url&#39;&quot;</code> will <i>kill</i> the Perl process if it is successful, and return a status code in <code>$phpOutput</code> if the <code>fork</code> fails"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453927293, "post_id": 35043473, "comment_id": 57819357, "body": "The only viable solutions are your first and second statements, which are equivalent apart from the alternative quoting. And, as I said, <code>LWP::Simple</code> is a better alternative to those"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453963335, "post_id": 35043473, "comment_id": 57832687, "body": "Thanks a lot for your comments! I&#39;m not the Perl expert and I&#39;m new to Stackoverflow, so I just tried to share my knowledge, which wasn&#39;t accurate, and benefit from the experts&#39; comments."}], "tags": [], "owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "is_accepted": false, "score": -3, "last_activity_date": 1453963146, "last_edit_date": 1453963146, "creation_date": 1453913826, "answer_id": 35043473, "question_id": 35041814, "link": "https://stackoverflow.com/questions/35041814/backtick-operator-not-working-for-executing-php-script-from-perl/35043473#35043473", "title": "backtick operator not working for executing php script from perl", "body": "<p>To call a specific URL/page in UNIX you can use <strong><em>curl</em></strong>, so instead of typing the URL as is in the backticks, you do it as such:</p>\n\n<pre><code>my $phpOutput = `curl 'https://control.msg91.com/api/sendhttp.php?authkey=&lt;mykey&gt;&amp;mobiles=&lt;mobile&gt;&amp;message=Thank%20you%20for%20placing%20order%20at%20WokoShop.%20Order%20id%3A%201434%20Invoice%20Value%3A%201445.04&amp;sender=WOKOSP&amp;route=4'`;\n</code></pre>\n\n<p>You can also do:</p>\n\n<pre><code>my $phpOutput = qx|curl 'https://control.msg91.com/api/sendhttp.php?authkey=&lt;mykey&gt;&amp;mobiles=&lt;mobile&gt;&amp;message=Thank%20you%20for%20placing%20order%20at%20WokoShop.%20Order%20id%3A%201434%20Invoice%20Value%3A%201445.04&amp;sender=WOKOSP&amp;route=4'|;\n</code></pre>\n"}], "owner": {"reputation": 7922, "user_id": 1216931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/30f58cc2bfc607ccaabb56839dfdd7e2?s=128&d=identicon&r=PG", "display_name": "Devesh Agrawal", "link": "https://stackoverflow.com/users/1216931/devesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 35042246, "answer_count": 2, "score": -2, "last_activity_date": 1467624876, "creation_date": 1453909519, "question_id": 35041814, "link": "https://stackoverflow.com/questions/35041814/backtick-operator-not-working-for-executing-php-script-from-perl", "title": "backtick operator not working for executing php script from perl", "body": "<p>I am trying to call php script from perl. After googling i found i can use backtick operator for this.</p>\n\n<p>but when i tried </p>\n\n<pre><code>my $phpOutput = `https://control.msg91.com/api/sendhttp.php?authkey=&lt;mykey&gt;&amp;mobiles=&lt;mobile&gt;&amp;message=Thank%20you%20for%20placing%20order%20at%20WokoShop.%20Order%20id%3A%201434%20Invoice%20Value%3A%201445.04&amp;sender=WOKOSP&amp;route=4`;\n</code></pre>\n\n<p>It is not working. The same url i tried in browser that works fine.</p>\n\n<p>What changes i need to do to make it work in perl script also.</p>\n\n<p>I am using this perl package.</p>\n\n<pre><code>use LWP::Simple;\n</code></pre>\n"}, {"tags": ["php", "macos", "perl"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5874582, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c1507c28a06e760e5b3cc6faa058e83a?s=128&d=identicon&r=PG", "display_name": "Monty Rohde", "link": "https://stackoverflow.com/users/5874582/monty-rohde"}, "is_accepted": false, "score": 1, "last_activity_date": 1454441597, "last_edit_date": 1495542339, "creation_date": 1454441597, "answer_id": 35162282, "question_id": 35041034, "link": "https://stackoverflow.com/questions/35041034/composer-errors-on-os-x-and-openssl-used-by-php/35162282#35162282", "title": "Composer errors on OS X and OpenSSL used by PHP", "body": "<p>First there is the link here, the solution requires you to have brew installed:\n<a href=\"https://apple.stackexchange.com/questions/126830/how-to-upgrade-openssl-in-os-x\">https://apple.stackexchange.com/questions/126830/how-to-upgrade-openssl-in-os-x</a></p>\n\n<p>If the proper version does not appear when you enter into the console:\nopenssl version -a</p>\n\n<p>This will help you switch versions.\n<a href=\"https://stackoverflow.com/questions/15185661/openssl-version-macosx-homebrew\">Update OpenSSL on OS X with Homebrew</a></p>\n\n<p>If you want a quick fix refer to  Felipe Micaroni Lalli's answer on Mar 21 '14.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6680936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bG8Cl.jpg?s=128&g=1", "display_name": "Rezwan Anjum Nibir", "link": "https://stackoverflow.com/users/6680936/rezwan-anjum-nibir"}, "is_accepted": false, "score": 1, "last_activity_date": 1470388991, "last_edit_date": 1470388991, "creation_date": 1470384677, "answer_id": 38784342, "question_id": 35041034, "link": "https://stackoverflow.com/questions/35041034/composer-errors-on-os-x-and-openssl-used-by-php/38784342#38784342", "title": "Composer errors on OS X and OpenSSL used by PHP", "body": "<p>You don't need to delete XAMPP. If you are using XAMPP for larval 5.2, it will be much better. In short XAMPP has all the updates for your work. Mac has built in PHP and other things but larval 5.1/5.2 needs an upgraded version of PHP and OpenSSL. So follow these steps,(hope you have latest XAMPP in your mac)</p>\n\n<ol>\n<li><code>cd</code></li>\n<li><code>sudo nano .bash_profile</code>\nyou will have new .bash_profile. add below statement</li>\n<li><p><code>export PATH=/Applications/XAMPP/xamppfiles/bin:$PATH</code>\nhit \"enter\" >> \"control-X\">> \"Y\" (saving)>> \"enter\"</p></li>\n<li><p>quit terminal and reopen terminal</p></li>\n<li><code>cd \"/Applications/XAMPP/htdocs\"</code></li>\n<li><code>curl -sS http://getcomposer.org/installer | php</code></li>\n<li><code>php composer.phar create-project laravel/laravel --prefer-dist</code></li>\n</ol>\n\n<p>That's it. Further checking your steps you can follow this link:\n<a href=\"http://www.kaanburaksener.com/blog/installing-laravel-on-mac-os-x-with-xampp/\" rel=\"nofollow\">http://www.kaanburaksener.com/blog/installing-laravel-on-mac-os-x-with-xampp/</a></p>\n"}], "owner": {"reputation": 558, "user_id": 5564548, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7600238a6e64b57b55ae18a2f2f5de47?s=128&d=identicon&r=PG", "display_name": "AhmedEls", "link": "https://stackoverflow.com/users/5564548/ahmedels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12924, "favorite_count": 3, "answer_count": 2, "score": 11, "last_activity_date": 1470388991, "creation_date": 1453907493, "last_edit_date": 1465192567, "question_id": 35041034, "link": "https://stackoverflow.com/questions/35041034/composer-errors-on-os-x-and-openssl-used-by-php", "title": "Composer errors on OS X and OpenSSL used by PHP", "body": "<p>I deleted my old Xampp local server and installed latest one it's include</p>\n\n<ul>\n<li>Apache/2.4.18 (Unix)  </li>\n<li>OpenSSL/1.0.2e</li>\n<li>PHP/7.0.1</li>\n<li>mod_perl/2.0.8-dev</li>\n<li>Perl/v5.16.3</li>\n</ul>\n\n<p>But when I try to install it by:</p>\n\n<pre><code>curl -sS https://getcomposer.org/installer | php\n</code></pre>\n\n<p>It says: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Some settings on your machine may cause stability issues with Composer.\nIf you encounter issues, try to change the following:\n\nThe OpenSSL library (0.9.8zc) used by PHP does not support TLSv1.2 or TLSv1.1.\nIf possible you should upgrade OpenSSL to version 1.0.1 or above.\n\nDownloading...\n\nComposer successfully installed to: /Users/hammodgrimmie/composer.phar\nUse it: php composer.phar\n</code></pre>\n\n<p>Help please.</p>\n"}, {"tags": ["python", "regex", "perl", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1453907673, "post_id": 35040998, "comment_id": 57806495, "body": "Cool, i didn&#39;t know about that <code>unichars</code> tool. How could I install that on debian? My question is more of how to port the <code>\\p{Open_Punctuation}</code> and  <code>\\p{Close_Punctuation}</code> to python but I guessing knowing what&#39;s the punctuations in the set would be a first step."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1453907723, "post_id": 35040998, "comment_id": 57806540, "body": "Do you want me to delete my answer?"}, {"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1453908053, "post_id": 35040998, "comment_id": 57806795, "body": "Nope I think that&#39;s fine. But a nice regex to replace them and pad with space like in <a href=\"http://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python\" title=\"padding multiple character with space python\">stackoverflow.com/questions/35037626/&hellip;</a> should suffice."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1453908172, "post_id": 35040998, "comment_id": 57806869, "body": "I don&#39;t know python."}, {"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1453908327, "post_id": 35040998, "comment_id": 57807000, "body": "no worries, i&#39;ll edit your answers in a while once the installation finishes and I can access the full list of chars =)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1453910148, "last_edit_date": 1453910148, "creation_date": 1453907421, "answer_id": 35040998, "question_id": 35040905, "link": "https://stackoverflow.com/questions/35040905/what-is-the-equivalence-of-perluniprops-in-python/35040998#35040998", "title": "What is the equivalence of perluniprops in python?", "body": "<p>Are you asking how to determine what's the corresponding closing punctuation for a given open punctuation? Unicode does not define this. In fact, there's not even a 1:1 relationship.</p>\n\n<pre><code>$ unichars '\\p{Open_Punctuation}' | wc -l\n75\n\n$ unichars '\\p{Close_Punctuation}' | wc -l\n73\n</code></pre>\n\n<p>However, It should be relatively easy for you to build your own mapping.</p>\n\n<pre><code>$ unichars '\\p{Open_Punctuation}' | cat\n (  U+0028 LEFT PARENTHESIS\n [  U+005B LEFT SQUARE BRACKET\n {  U+007B LEFT CURLY BRACKET\n \u0f3a  U+0F3A TIBETAN MARK GUG RTAGS GYON\n \u0f3c  U+0F3C TIBETAN MARK ANG KHANG GYON\n \u169b  U+169B OGHAM FEATHER MARK\n \u201a  U+201A SINGLE LOW-9 QUOTATION MARK\n \u201e  U+201E DOUBLE LOW-9 QUOTATION MARK\n \u2045  U+2045 LEFT SQUARE BRACKET WITH QUILL\n \u207d  U+207D SUPERSCRIPT LEFT PARENTHESIS\n \u208d  U+208D SUBSCRIPT LEFT PARENTHESIS\n \u2308  U+2308 LEFT CEILING\n \u230a  U+230A LEFT FLOOR\n \u2329 U+2329 LEFT-POINTING ANGLE BRACKET\n \u2768  U+2768 MEDIUM LEFT PARENTHESIS ORNAMENT\n \u276a  U+276A MEDIUM FLATTENED LEFT PARENTHESIS ORNAMENT\n \u276c  U+276C MEDIUM LEFT-POINTING ANGLE BRACKET ORNAMENT\n \u276e  U+276E HEAVY LEFT-POINTING ANGLE QUOTATION MARK ORNAMENT\n \u2770  U+2770 HEAVY LEFT-POINTING ANGLE BRACKET ORNAMENT\n \u2772  U+2772 LIGHT LEFT TORTOISE SHELL BRACKET ORNAMENT\n \u2774  U+2774 MEDIUM LEFT CURLY BRACKET ORNAMENT\n \u27c5  U+27C5 LEFT S-SHAPED BAG DELIMITER\n \u27e6  U+27E6 MATHEMATICAL LEFT WHITE SQUARE BRACKET\n \u27e8  U+27E8 MATHEMATICAL LEFT ANGLE BRACKET\n \u27ea  U+27EA MATHEMATICAL LEFT DOUBLE ANGLE BRACKET\n \u27ec  U+27EC MATHEMATICAL LEFT WHITE TORTOISE SHELL BRACKET\n \u27ee  U+27EE MATHEMATICAL LEFT FLATTENED PARENTHESIS\n \u2983  U+2983 LEFT WHITE CURLY BRACKET\n \u2985  U+2985 LEFT WHITE PARENTHESIS\n \u2987  U+2987 Z NOTATION LEFT IMAGE BRACKET\n \u2989  U+2989 Z NOTATION LEFT BINDING BRACKET\n \u298b  U+298B LEFT SQUARE BRACKET WITH UNDERBAR\n \u298d  U+298D LEFT SQUARE BRACKET WITH TICK IN TOP CORNER\n \u298f  U+298F LEFT SQUARE BRACKET WITH TICK IN BOTTOM CORNER\n \u2991  U+2991 LEFT ANGLE BRACKET WITH DOT\n \u2993  U+2993 LEFT ARC LESS-THAN BRACKET\n \u2995  U+2995 DOUBLE LEFT ARC GREATER-THAN BRACKET\n \u2997  U+2997 LEFT BLACK TORTOISE SHELL BRACKET\n \u29d8  U+29D8 LEFT WIGGLY FENCE\n \u29da  U+29DA LEFT DOUBLE WIGGLY FENCE\n \u29fc  U+29FC LEFT-POINTING CURVED ANGLE BRACKET\n \u2e22  U+2E22 TOP LEFT HALF BRACKET\n \u2e24  U+2E24 BOTTOM LEFT HALF BRACKET\n \u2e26  U+2E26 LEFT SIDEWAYS U BRACKET\n \u2e28  U+2E28 LEFT DOUBLE PARENTHESIS\n \u2e42  U+2E42 DOUBLE LOW-REVERSED-9 QUOTATION MARK\n \u3008 U+3008 LEFT ANGLE BRACKET\n \u300a U+300A LEFT DOUBLE ANGLE BRACKET\n \u300c U+300C LEFT CORNER BRACKET\n \u300e U+300E LEFT WHITE CORNER BRACKET\n \u3010 U+3010 LEFT BLACK LENTICULAR BRACKET\n \u3014 U+3014 LEFT TORTOISE SHELL BRACKET\n \u3016 U+3016 LEFT WHITE LENTICULAR BRACKET\n \u3018 U+3018 LEFT WHITE TORTOISE SHELL BRACKET\n \u301a U+301A LEFT WHITE SQUARE BRACKET\n \u301d U+301D REVERSED DOUBLE PRIME QUOTATION MARK\n \ufd3f  U+FD3F ORNATE RIGHT PARENTHESIS\n \ufe17 U+FE17 PRESENTATION FORM FOR VERTICAL LEFT WHITE LENTICULAR BRACKET\n \ufe35 U+FE35 PRESENTATION FORM FOR VERTICAL LEFT PARENTHESIS\n \ufe37 U+FE37 PRESENTATION FORM FOR VERTICAL LEFT CURLY BRACKET\n \ufe39 U+FE39 PRESENTATION FORM FOR VERTICAL LEFT TORTOISE SHELL BRACKET\n \ufe3b U+FE3B PRESENTATION FORM FOR VERTICAL LEFT BLACK LENTICULAR BRACKET\n \ufe3d U+FE3D PRESENTATION FORM FOR VERTICAL LEFT DOUBLE ANGLE BRACKET\n \ufe3f U+FE3F PRESENTATION FORM FOR VERTICAL LEFT ANGLE BRACKET\n \ufe41 U+FE41 PRESENTATION FORM FOR VERTICAL LEFT CORNER BRACKET\n \ufe43 U+FE43 PRESENTATION FORM FOR VERTICAL LEFT WHITE CORNER BRACKET\n \ufe47 U+FE47 PRESENTATION FORM FOR VERTICAL LEFT SQUARE BRACKET\n \ufe59 U+FE59 SMALL LEFT PARENTHESIS\n \ufe5b U+FE5B SMALL LEFT CURLY BRACKET\n \ufe5d U+FE5D SMALL LEFT TORTOISE SHELL BRACKET\n \uff08 U+FF08 FULLWIDTH LEFT PARENTHESIS\n \uff3b U+FF3B FULLWIDTH LEFT SQUARE BRACKET\n \uff5b U+FF5B FULLWIDTH LEFT CURLY BRACKET\n \uff5f U+FF5F FULLWIDTH LEFT WHITE PARENTHESIS\n \uff62  U+FF62 HALFWIDTH LEFT CORNER BRACKET\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$ unichars '\\p{Close_Punctuation}' | cat\n )  U+0029 RIGHT PARENTHESIS\n ]  U+005D RIGHT SQUARE BRACKET\n }  U+007D RIGHT CURLY BRACKET\n \u0f3b  U+0F3B TIBETAN MARK GUG RTAGS GYAS\n \u0f3d  U+0F3D TIBETAN MARK ANG KHANG GYAS\n \u169c  U+169C OGHAM REVERSED FEATHER MARK\n \u2046  U+2046 RIGHT SQUARE BRACKET WITH QUILL\n \u207e  U+207E SUPERSCRIPT RIGHT PARENTHESIS\n \u208e  U+208E SUBSCRIPT RIGHT PARENTHESIS\n \u2309  U+2309 RIGHT CEILING\n \u230b  U+230B RIGHT FLOOR\n \u232a U+232A RIGHT-POINTING ANGLE BRACKET\n \u2769  U+2769 MEDIUM RIGHT PARENTHESIS ORNAMENT\n \u276b  U+276B MEDIUM FLATTENED RIGHT PARENTHESIS ORNAMENT\n \u276d  U+276D MEDIUM RIGHT-POINTING ANGLE BRACKET ORNAMENT\n \u276f  U+276F HEAVY RIGHT-POINTING ANGLE QUOTATION MARK ORNAMENT\n \u2771  U+2771 HEAVY RIGHT-POINTING ANGLE BRACKET ORNAMENT\n \u2773  U+2773 LIGHT RIGHT TORTOISE SHELL BRACKET ORNAMENT\n \u2775  U+2775 MEDIUM RIGHT CURLY BRACKET ORNAMENT\n \u27c6  U+27C6 RIGHT S-SHAPED BAG DELIMITER\n \u27e7  U+27E7 MATHEMATICAL RIGHT WHITE SQUARE BRACKET\n \u27e9  U+27E9 MATHEMATICAL RIGHT ANGLE BRACKET\n \u27eb  U+27EB MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET\n \u27ed  U+27ED MATHEMATICAL RIGHT WHITE TORTOISE SHELL BRACKET\n \u27ef  U+27EF MATHEMATICAL RIGHT FLATTENED PARENTHESIS\n \u2984  U+2984 RIGHT WHITE CURLY BRACKET\n \u2986  U+2986 RIGHT WHITE PARENTHESIS\n \u2988  U+2988 Z NOTATION RIGHT IMAGE BRACKET\n \u298a  U+298A Z NOTATION RIGHT BINDING BRACKET\n \u298c  U+298C RIGHT SQUARE BRACKET WITH UNDERBAR\n \u298e  U+298E RIGHT SQUARE BRACKET WITH TICK IN BOTTOM CORNER\n \u2990  U+2990 RIGHT SQUARE BRACKET WITH TICK IN TOP CORNER\n \u2992  U+2992 RIGHT ANGLE BRACKET WITH DOT\n \u2994  U+2994 RIGHT ARC GREATER-THAN BRACKET\n \u2996  U+2996 DOUBLE RIGHT ARC LESS-THAN BRACKET\n \u2998  U+2998 RIGHT BLACK TORTOISE SHELL BRACKET\n \u29d9  U+29D9 RIGHT WIGGLY FENCE\n \u29db  U+29DB RIGHT DOUBLE WIGGLY FENCE\n \u29fd  U+29FD RIGHT-POINTING CURVED ANGLE BRACKET\n \u2e23  U+2E23 TOP RIGHT HALF BRACKET\n \u2e25  U+2E25 BOTTOM RIGHT HALF BRACKET\n \u2e27  U+2E27 RIGHT SIDEWAYS U BRACKET\n \u2e29  U+2E29 RIGHT DOUBLE PARENTHESIS\n \u3009 U+3009 RIGHT ANGLE BRACKET\n \u300b U+300B RIGHT DOUBLE ANGLE BRACKET\n \u300d U+300D RIGHT CORNER BRACKET\n \u300f U+300F RIGHT WHITE CORNER BRACKET\n \u3011 U+3011 RIGHT BLACK LENTICULAR BRACKET\n \u3015 U+3015 RIGHT TORTOISE SHELL BRACKET\n \u3017 U+3017 RIGHT WHITE LENTICULAR BRACKET\n \u3019 U+3019 RIGHT WHITE TORTOISE SHELL BRACKET\n \u301b U+301B RIGHT WHITE SQUARE BRACKET\n \u301e U+301E DOUBLE PRIME QUOTATION MARK\n \u301f U+301F LOW DOUBLE PRIME QUOTATION MARK\n \ufd3e  U+FD3E ORNATE LEFT PARENTHESIS\n \ufe18 U+FE18 PRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRACKET\n \ufe36 U+FE36 PRESENTATION FORM FOR VERTICAL RIGHT PARENTHESIS\n \ufe38 U+FE38 PRESENTATION FORM FOR VERTICAL RIGHT CURLY BRACKET\n \ufe3a U+FE3A PRESENTATION FORM FOR VERTICAL RIGHT TORTOISE SHELL BRACKET\n \ufe3c U+FE3C PRESENTATION FORM FOR VERTICAL RIGHT BLACK LENTICULAR BRACKET\n \ufe3e U+FE3E PRESENTATION FORM FOR VERTICAL RIGHT DOUBLE ANGLE BRACKET\n \ufe40 U+FE40 PRESENTATION FORM FOR VERTICAL RIGHT ANGLE BRACKET\n \ufe42 U+FE42 PRESENTATION FORM FOR VERTICAL RIGHT CORNER BRACKET\n \ufe44 U+FE44 PRESENTATION FORM FOR VERTICAL RIGHT WHITE CORNER BRACKET\n \ufe48 U+FE48 PRESENTATION FORM FOR VERTICAL RIGHT SQUARE BRACKET\n \ufe5a U+FE5A SMALL RIGHT PARENTHESIS\n \ufe5c U+FE5C SMALL RIGHT CURLY BRACKET\n \ufe5e U+FE5E SMALL RIGHT TORTOISE SHELL BRACKET\n \uff09 U+FF09 FULLWIDTH RIGHT PARENTHESIS\n \uff3d U+FF3D FULLWIDTH RIGHT SQUARE BRACKET\n \uff5d U+FF5D FULLWIDTH RIGHT CURLY BRACKET\n \uff60 U+FF60 FULLWIDTH RIGHT WHITE PARENTHESIS\n \uff63  U+FF63 HALFWIDTH RIGHT CORNER BRACKET\n</code></pre>\n\n<p>After installing <code>unichars</code> with <code>cpan Unicode::Tussle</code>, in python:</p>\n\n<pre><code>&gt;&gt;&gt; import subprocess\n&gt;&gt;&gt; cmd = \"unichars '\\p{Open_Punctuation}' | cut -f2 -d' ' | tr -d '\\n'\"\n&gt;&gt;&gt; open_punct = subprocess.check_output(cmd, shell=True).decode('utf8')\nSmartmatch is experimental at /usr/local/bin/unichars line 546.\n&gt;&gt;&gt; print (open_punct)\n([{\u0f3a\u0f3c\u169b\u201a\u201e\u2045\u207d\u208d\u2329\u2768\u276a\u276c\u276e\u2770\u2772\u2774\u27c5\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997\u29d8\u29da\u29fc\u2e22\u2e24\u2e26\u2e28\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u3018\u301a\u301d\ufd3e\ufe17\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41\ufe43\ufe47\ufe59\ufe5b\ufe5d\uff08\uff3b\uff5b\uff5f\uff62\n</code></pre>\n"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "accepted_answer_id": 35040998, "answer_count": 1, "score": 1, "last_activity_date": 1453910856, "creation_date": 1453907190, "last_edit_date": 1495540039, "question_id": 35040905, "link": "https://stackoverflow.com/questions/35040905/what-is-the-equivalence-of-perluniprops-in-python", "title": "What is the equivalence of perluniprops in python?", "body": "<p>In <code>perl</code>, there's the <code>perluniprops</code> index of Unicode 7, <a href=\"http://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perluniprops.html</a> where I can do the following to pad opening and closing punctuations:</p>\n\n<pre><code>s/(\\p{Open_Punctuation})/ $1 /g;\ns/(\\p{Close_Punctuation})/ $1 /g;\n</code></pre>\n\n<p><strong>What is the full list of opening/closing punctuations that gets padded when using the perl? And what is the equivalence in <code>python</code>?</strong></p>\n\n<p>Related question: <a href=\"https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python\">Padding multiple character with space - python</a> <a href=\"https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python\">Padding multiple character with space - python</a>; this question was asked separatedly by answerer's vote that it should be separate.</p>\n"}, {"tags": ["linux", "perl", "cpan"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1453907191, "post_id": 35040323, "comment_id": 57806133, "body": "Is the $PERL5LIB variable set?"}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453907449, "post_id": 35040323, "comment_id": 57806338, "body": "No, it is not set.  I checked with and without SUDO, and it doesn&#39;t show up under root either.  I have sudo access, but I&#39;m not the primary or original sysadmin for the server.  I assume they just did a standard install of PERL during the original OS install.  Perhaps some steps were not completed?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1453907592, "post_id": 35040323, "comment_id": 57806436, "body": "Try running <code>type perl</code> or <code>which perl</code> as both users, too."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453907639, "post_id": 35040323, "comment_id": 57806472, "body": "Also, show any env variables related to Perl: <code>echo ${!PERL*}</code> to get their names in bash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453908779, "post_id": 35040323, "comment_id": 57807396, "body": "Re &quot; I would not be able to access the new module without manually going in and chmod 775&#39;ing the module related files and directories.&quot;, hmmm. Perl installers already do that."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453909013, "post_id": 35040323, "comment_id": 57807578, "body": "On other computers, I&#39;ve never had an issue.  Install a cpan module as root, the users can all use it.  On this computer, I&#39;ve had two different modules that I installed earlier, where I could only use them as root until I went in and increased the permissions.  This system is running an older version of PERL, something that I cannot change at the moment.  When I installed the new modules and did a module upgrade, I assumed it was the same deal with permissions, but in this case, that doesn&#39;t seem to be the primary cause.  I chmod&#39;ed the updated files, and it didn&#39;t solve the issue."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453909095, "post_id": 35040323, "comment_id": 57807633, "body": "For context, I should explain that this is a development server in a corporate environment.  Getting the admin team to upgrade PERL would be incredibly difficult.  It might be easier to ask them to create a new VM running RHEL 7.x, which would give me a fresh system with a newer version of PERL by default."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453909096, "post_id": 35040323, "comment_id": 57807635, "body": "<code>sudo echo ${!PERL*}</code> expands the variable names before running sudo."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453909261, "post_id": 35040323, "comment_id": 57807770, "body": "I tried <b>printenv | grep perl</b> with and without sudo, returned nothing either.  Reviewing full printenv output showed nothing PERL related."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453909587, "post_id": 35040323, "comment_id": 57807998, "body": "@ByronJones: Please, it&#39;s <b><i>Perl</i></b>."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453909883, "post_id": 35040323, "comment_id": 57808212, "body": "Borodin: Noted.        <b>&#187; perl -wle &#39;print join(&quot;\\n&quot;, @INC)&#39;</b> /usr/local/lib64/perl5      /usr/local/share/perl5    /usr/lib64/perl5/vendor_perl     /usr/share/perl5/vendor_perl     /usr/lib64/perl5     /usr/share/perl5      [run with sudo returns identical list]"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453910669, "post_id": 35040323, "comment_id": 57808798, "body": "Check your CPAN config by running <code>o conf</code> in the CPAN shell."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1453911236, "post_id": 35040323, "comment_id": 57809213, "body": "Add clarifying information to the question, not the comments."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453911274, "post_id": 35040323, "comment_id": 57809241, "body": "Brian - Noted.   I&#39;ll move it."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1453913508, "post_id": 35040323, "comment_id": 57810842, "body": "For what it&#39;s worth, this is the same question as <a href=\"http://stackoverflow.com/questions/1251918/how-can-i-fix-a-bootstrap-version-mismatch-when-loading-perls-threads-module\" title=\"how can i fix a bootstrap version mismatch when loading perls threads module\">stackoverflow.com/questions/1251918/&hellip;</a> , but that doesn&#39;t have a satisfying answer."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453916520, "post_id": 35040323, "comment_id": 57812886, "body": "You&#39;re right, it seems like these probably have the same root cause.  I&#39;ll post a link from this one into that question."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453913765, "post_id": 35043184, "comment_id": 57811045, "body": "Brian - Thanks for this very in depth response.  I&#39;m still looking it all over, but in the meantime I&#39;ll post the list of List/Util.pm files installed."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453914226, "post_id": 35043184, "comment_id": 57811342, "body": "I&#39;ve added a clarification that this is happening to multiple modules.  While I had seen a permissions issue when I installed new modules previously, this current issue occurred when I installed new modules and did a perl module upgrade.  I did both at the same time, but I am seeing errors with modules that I think were more likely part of the upgrade, rather than installed as a module dependency.  It almost seems like the upgrade had problems, although I did not see anything beyond the usual occasional test warning during the upgrade."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453914488, "post_id": 35043184, "comment_id": 57811515, "body": "Brian - There are only two people who use this development server, and it&#39;s not a production server in any way.  Perhaps I should have (beg) the sysadmins to completely uninstall and reinstall/update the Perl package for RHEL 6.6?  I&#39;m thinking that a clean slate install might be preferred to chasing down something that might have resulted in a corrupt Perl configuration.  I&#39;m an IT generalist, not a Perl guru..."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453914490, "post_id": 35043184, "comment_id": 57811517, "body": "Is it possible to install another module as root and show us the permissions it creates? Also, can you show us the umask setting the root account has?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453914561, "post_id": 35043184, "comment_id": 57811571, "body": "If it were me, I&#39;d start over and keep a snapshot to go back to. I&#39;m more interested in helping the entire world solve this rare but interesting problem, though. The next person who has this problem can read this answer. :)"}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453916070, "post_id": 35043184, "comment_id": 57812569, "body": "Thanks for all your help Brian.  The chmod that Ikegami suggested above seems to have resolved the issue. The test scripts I wrote are working as non-root now.  I&#39;ll keep testing as I continue development, but I think this has resolved the issue."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453916459, "post_id": 35043184, "comment_id": 57812834, "body": "Okay, but it&#39;s the same thing you were doing before. <i>shrug</i>"}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453916760, "post_id": 35043184, "comment_id": 57813061, "body": "Not exactly.  Before I had been chmod&#39;ing individual modules post-install, assuming that the module installer had not set permissions or something.  This was a more comprehensive chmod, which seems to help perl find the correct version when running as non-root. I think the directory permissions were wrong for the module directory itself.  Perhaps whomever setup the system locked down the permissions excessively, and left regular users with this issue of not being able to load modules."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1453916951, "post_id": 35043184, "comment_id": 58217353, "body": "Just to add; since the module initially in question was Scalar::Util, a dual-life (in core and on CPAN) module, and the perl being used is prior to 5.12.0, &quot;sudo cpan&quot; will actually install the module into the perl&#39;s archlib, <i>overwriting</i> the original core module. This is because prior to 5.12.0, the @INC order places privlib/archlib before sitelib, so if a dual-life module is installed to sitelib the new version will not be picked up, it will still be masked by the core module. I&#39;m not sure how it figures into the XS issues, but it may be important to keep in mind."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453917192, "post_id": 35043184, "comment_id": 58217354, "body": "Thank you for this additional information.  While I&#39;ve used Perl off and on for years as needed, it was never my primary language for work until recently.  I think I&#39;ll need to do some more self-learning about what is going on under the hood in Perl, especially for this kind of situation."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1453917564, "post_id": 35043184, "comment_id": 58217355, "body": "My advice is normally much like Brian&#39;s, in that if you plan to do any serious development in Perl and need updated/additional perl modules, you should install your own perl separate from the system perl which is usually managed by a package manager. This is easy to do with tools like <a href=\"https://metacpan.org/pod/distribution/Perl-Build/script/perl-build\" rel=\"nofollow noreferrer\">perl-build</a>, <a href=\"https://metacpan.org/pod/perlbrew\" rel=\"nofollow noreferrer\">perlbrew</a>, and <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">plenv</a>, and you get the option of benefiting from the development on perl core since 5.10.1."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453917808, "post_id": 35043184, "comment_id": 58217356, "body": "I considered that.  The concerns I had were:  Several of the scripts I develop are run under a separate service account once they are ready to be scheduled in cron.  Also, I wanted to ensure that if a new employee took over the work on these scripts, that the default environment would allow him to do the work without having to reverse engineer my environment.  My predecessor seems to have had a custom Perl config, but they deleted his user account, so I can&#39;t login as him to see how his Perl was configured."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1453918018, "post_id": 35043184, "comment_id": 58217357, "body": "Those are fair concerns certainly. But if you can ensure the scripts run correctly under the other version of perl, you can usually just change the shebang to point to the newly built version explicitly, or run it explicitly as: /path/to/perl /path/to/script.pl -- this doesn&#39;t require any messing about with PATH."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453918388, "post_id": 35043184, "comment_id": 58217358, "body": "Thanks, I hadn&#39;t considered that.  Perhaps if I setup a separate Perl instance not for me alone, but rather one that was separate from the default system Perl, in my application&#39;s own directory, and have an independent configuration.  That way I could install a version of Perl later than the rather dated one that is on the system, and not worry about that system version any more."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453919388, "post_id": 35043184, "comment_id": 57814789, "body": "Brian, I just ran across your article <a href=\"http://www.effectiveperlprogramming.com/2010/03/make-links-to-per-version-tools/\" rel=\"nofollow noreferrer\">effectiveperlprogramming.com/2010/03/&hellip;</a>  and I will give it a thorough read.  I&#39;m honored that a real Perl Guru helped me today :)"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1453914381, "last_edit_date": 1453914381, "creation_date": 1453913080, "answer_id": 35043184, "question_id": 35040323, "link": "https://stackoverflow.com/questions/35040323/perl-modules-not-loading-correctly-when-running-as-non-root-user/35043184#35043184", "title": "Perl modules not loading correctly when running as non-root user", "body": "<p><em>I can only get so far on the information you provide, but here's a start. If you fill in some details we may be able to figure out this problem.</em></p>\n\n<p>These sorts of error typically mean that you have two versions of the same module installed in different places or that the it was upgraded incompletely in one place (perhaps because someone tried it by hand, had insufficient permissions, or was interrupted). The program is able to load one part of the module from one source, fails to load a second part and looks elsewhere. Hence you get the mismatch.</p>\n\n<p>In your case, it looks like you have <code>List::Util</code> in both <em>/usr/lib64/perl5</em> and\n<em>/usr/local/lib64/perl5</em>. From your <code>@INC</code>, you look in <em>/usr/local/lib64/perl5</em> first. I'm guessing that's where the newest version should be. For some reason, it doesn't load right so it keeps looking and finds the old version in <em>/usr/lib64/perl5</em>, but that's a mismatch.</p>\n\n<p>For pure Perl files, these matches don't usually matter. However, for the compiled (XS) modules, the details of their compilation have to match up. Different versions of the same compilation tools, or different inputs to the same versions, likely cause incompatible formats. Or, different versions of the same Perl module name might have been reorganized so they don't match up with the binary component of previous versions. Hence the error message you get after something else already went wrong.</p>\n\n<p>I wonder in your case if you've set an odd umask so that your root module installation doesn't make the file readable (or the directory executable) so other users can see the files. What were the permissions before you changed them? You should track down that problem since you said you've had the same problem previously (and may again).</p>\n\n<p>The <code>cpan</code> module can find it for you looking through the current Perl's <code>@INC</code>. I haven't upgraded <code>List::Util</code> on this version of Perl, and it's found under <em>lib/5.22.0/darwin-2level</em>:</p>\n\n<pre><code>$ cpan -D List::Util\nCPAN: Storable loaded ok (v2.53)\nReading '/Users/brian/.cpan/Metadata'\n  Database was generated on Tue, 26 Jan 2016 12:17:02 GMT\nList::Util\n-------------------------------------------------------------------------\n    List utilities (eg min, max, reduce)\n    P/PE/PEVANS/Scalar-List-Utils-1.42.tar.gz\n    /usr/local/perls/perl-5.22.0/lib/5.22.0/darwin-2level/List/Util.pm\n    Installed: 1.41\n    CPAN:      1.42  Not up to date\n    Graham Barr (GBARR)\n    gbarr@pobox.com\n</code></pre>\n\n<p>After I update it, the update is in <em>lib/site_perl/5.22.0/darwin-2level</em>, a different directory. CPAN.pm does not remove old versions, it merely shadows them. I still have the version that originally came with your Perl, and now you have an update in <em>site_perl</em> </p>\n\n<pre><code>$ cpan -D List::Util\nCPAN: Storable loaded ok (v2.53)\nReading '/Users/brian/.cpan/Metadata'\n  Database was generated on Tue, 26 Jan 2016 12:17:02 GMT\nList::Util\n-------------------------------------------------------------------------\n    CPAN: Module::CoreList loaded ok (v5.20150520)\nList utilities (eg min, max, reduce)\n    P/PE/PEVANS/Scalar-List-Utils-1.42.tar.gz\n    /usr/local/perls/perl-5.22.0/lib/site_perl/5.22.0/darwin-2level/List/Util.pm\n    Installed: 1.42\n    CPAN:      1.42  up to date\n    Graham Barr (GBARR)\n    gbarr@pobox.com\n</code></pre>\n\n<p>The paths may vary from system to system, but the idea is the same. I have different versions in different directories.</p>\n\n<p>Now to recreate the problem. Curiously, in Perl v5.22, when I move the newly installed directory so it doesn't have the right name (forcing Perl to look in the wrong directory), I get a much friendly (although similarly unhelpful) message:</p>\n\n<pre><code>$ perl5.22.0 -MScalar::Util -e 1\nList::Util version 1.42 required--this is only version 1.41 at /usr/local/perls/perl-5.22.0/lib/site_perl/5.22.0/darwin-2level/Scalar/Util.pm line 23.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>It looks like you are using Perl 5.8.8. When I tried this same process on my system, <code>cpan</code> wrote files to the same location. </p>\n\n<p>However, you can configure <code>cpan</code> for the installation locations. Your system may have helpfully done that for you. If you have the build logs (or <code>cpan</code> config or package manager info) to show us where it installed the new <code>List::Util</code>, that could help. Or, find us the list of <em>List/Util.pm</em> files you have installed and we could work backward. If you installed from a package, that might have chosen another location.</p>\n\n<p>My advice is normally to leave the base installation alone and install everything into a different set of directories. If you are playing with the system <code>perl</code> (and it looks like you are), messing up the same <code>perl</code> that system needs for its admin and housekeeping tasks can cause additional headaches.</p>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1453915946, "post_id": 35043559, "comment_id": 57812489, "body": "I ran this command, and the errors with Scalar::Util and Config::Onion both went away when running as non root. I&#39;ll keep testing, but I think this may have resolved the issue.  Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1453914059, "creation_date": 1453914059, "answer_id": 35043559, "question_id": 35040323, "link": "https://stackoverflow.com/questions/35040323/perl-modules-not-loading-correctly-when-running-as-non-root-user/35043559#35043559", "title": "Perl modules not loading correctly when running as non-root user", "body": "<p><code>List/Util/Util.so</code> probably exists twice in</p>\n\n<pre><code>/usr/local/lib64/perl5 \n/usr/local/share/perl5 \n/usr/lib64/perl5/vendor_perl \n/usr/share/perl5/vendor_perl \n/usr/lib64/perl5 \n/usr/share/perl5 \n</code></pre>\n\n<p>They are different versions. The newer one can only be accessed by root. If this is the problem it will be solved using</p>\n\n<pre><code>chmod -R go+rX                   \\\n   /usr/local/lib64/perl5        \\\n   /usr/local/share/perl5        \\\n   /usr/lib64/perl5/vendor_perl  \\\n   /usr/share/perl5/vendor_perl  \\\n   /usr/lib64/perl5              \\\n   /usr/share/perl5 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37045, "user_id": 492624, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5a75643b4f878e1cd716d4dd30651ed?s=128&d=identicon&r=PG", "display_name": "Marek Sebera", "link": "https://stackoverflow.com/users/492624/marek-sebera"}, "is_accepted": false, "score": 1, "last_activity_date": 1499943205, "creation_date": 1499943205, "answer_id": 45078554, "question_id": 35040323, "link": "https://stackoverflow.com/questions/35040323/perl-modules-not-loading-correctly-when-running-as-non-root-user/45078554#45078554", "title": "Perl modules not loading correctly when running as non-root user", "body": "<p>For those, who struggle with this kind of issue, and are running <strong>grsec</strong> linux kernel, check <code>dmesg -T</code> for occurences of messages, such as</p>\n\n<pre><code>[Thu Jul 13 12:39:32 2017] grsec: From 12.34.56.78: denied untrusted exec (due to file in group-writable directory) of /usr/local/lib/x86_64-linux-gnu/perl/5.24.1/auto/DBD/mysql/mysql.so by /usr/bin/perl[perl:9515] uid/euid:1000/1000 gid/egid:1000/1000, parent /bin/bash[bash:31545] uid/euid:1000/1000 gid/egid:1000/1000\n</code></pre>\n\n<p>This means non-root user was not able to use perl shared library <code>mysql.so</code> because of permissions on parent folder.</p>\n\n<p>Solution good enough is to (for example, in this particular case) chmod parent folder <code>g-w</code> (group -write)</p>\n\n<pre><code>chmod g-w /usr/local/lib/x86_64-linux-gnu/perl/5.24.1/auto/DBD/mysql/\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5053, "favorite_count": 0, "accepted_answer_id": 35043559, "answer_count": 3, "score": 2, "last_activity_date": 1499943205, "creation_date": 1453905695, "last_edit_date": 1455901653, "question_id": 35040323, "link": "https://stackoverflow.com/questions/35040323/perl-modules-not-loading-correctly-when-running-as-non-root-user", "title": "Perl modules not loading correctly when running as non-root user", "body": "<p>I'm running into an issue with Perl on a linux system.</p>\n\n<p>When installing new modules (as root), I would occasionally have issues where running scripts as a regular user, I would not be able to access the new module without manually going in and chmod 775'ing the module related files and directories.</p>\n\n<p>I recently performed a CPAN upgrade, as well as installing several modules for a new project.  Now, Perl has become almost unusable as a regular user, because of errors that don't appear to be permissions related.</p>\n\n<p>For example, the following very simple script runs fine as root, but returns an error run as a regular user:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Scalar::Util;\n</code></pre>\n\n<p>As you can see, the script literally does nothing except attempt to load the Scalar::Util module.  As a regular user, it returns this error:</p>\n\n<pre><code>**List::Util object version 1.21 does not match bootstrap parameter 1.42 at /usr/lib64/perl5/DynaLoader.pm line 223.\nCompilation failed in require at /usr/local/lib64/perl5/Scalar/Util.pm line 22.\nCompilation failed in require at ./scalar-test.pl line 4.\nBEGIN failed--compilation aborted at ./scalar-test.pl line 4**\n</code></pre>\n\n<p>When I <em>sudo cpan</em> and try <em>install List::Util</em>, I get back:\n    <strong>List::Util is up to date (1.42).</strong></p>\n\n<p><strong>CLARIFICATION:</strong>  <em>This is happening with several modules, not just the one example. It does not appear to affect every module that was upgraded though; it's several though.</em></p>\n\n<p>The fact that root can run the scripts says to me that either there is another, underlying permissions issue I'm not seeing, OR PERL is configured slightly different in some way for root than my regular account which is causing it not to find this module.</p>\n\n<p>A search for the List.pm file is returning:</p>\n\n<pre><code> \u00bb sudo find / -name List.pm \n\n/usr/share/perl5/I18N/LangTags/List.pm\n/opt/OV/nonOV/perl/a/lib/5.8.8/I18N/LangTags/List.pm\n/root/.cpan/build/perl-5.22.1-D0_eFO/dist/I18N-LangTags/lib/I18N/LangTags/List.pm\n\n \u00bb ls -l /usr/share/perl5/I18N/LangTags/List.pm\n-rw-r--r-- 1 root root 28826 Nov  6  2014 /usr/share/perl5/I18N/LangTags/List.pm\n\n \u00bb ls -l /opt/OV/nonOV/perl/a/lib/5.8.8/I18N/LangTags/List.pm\n-r--r--r-- 1 bin bin 28826 Nov 30  2012 /opt/OV/nonOV/perl/a/lib/5.8.8/I18N/LangTags/List.pm\n\n \u00bb sudo ls -l /root/.cpan/build/perl-5.22.1-D0_eFO/dist/I18N-LangTags/lib/I18N/LangTags/List.pm\n-r--r--r-- 1 1018 513 28826 Oct 17 08:32 /root/.cpan/build/perl-5.22.1-D0_eFO/dist/I18N-LangTags/lib/I18N/LangTags/List.pm\n</code></pre>\n\n<p>System is RHEL 6.6 x64, Perl is v5.10.1</p>\n\n<hr>\n\n<pre><code>**\u00bb type perl**\nperl is hashed (/usr/bin/perl)\n\n**\u00bb which perl**\n/usr/bin/perl \n\n**\u00bb sudo type perl**\nsudo: type: command not found \n\n**\u00bb sudo which perl**\n/usr/bin/perl\n\n**\u00bb echo ${!PERL*}**\n[Nothing Returned] \n\n**\u00bb sudo echo ${!PERL*}**\n[Nothing Returned]\n\n**\u00bb perl -wle 'print join(\"\\n\", @INC)'**\n/usr/local/lib64/perl5 \n/usr/local/share/perl5 \n/usr/lib64/perl5/vendor_perl \n/usr/share/perl5/vendor_perl \n/usr/lib64/perl5 \n/usr/share/perl5 \n[run with sudo returns identical list]\n\n[Edited for brevity] \ncpan[1]&gt; o conf \n$CPAN::Config options from /usr/share/perl5/CPAN/Config.pm: \nbuild_dir [/root/.cpan/build] \nbuild_dir_reuse [0] \nbuild_requires_install_policy [ask/yes] \nconnect_to_internet_ok [1] \ncpan_home [/root/.cpan] \nkeep_source_where [/root/.cpan/sources] \nmake [/usr/bin/make] \nmake_install_make_command [/usr/bin/make] \nmakepl_arg [INSTALLDIRS=site] \nprefer_installer [MB] \nprefs_dir [/root/.cpan/prefs] \n</code></pre>\n\n<p>I redacted a few lines here from other user's folders</p>\n\n<pre><code> \u00bb sudo find / -name Util.pm | grep \"List/Util.pm\"\n/usr/lib64/perl5/List/Util.pm\n/usr/local/lib64/perl5/List/Util.pm\n/home/{USERNAME REDACTED}/.cpanm/work/1448660183.31550/ExtUtils-MakeMaker-7.10/bundled/Scalar-List-Utils/List/Util.pm\n/root/.cpan/build/Scalar-List-Utils-1.42-2c3ONp/lib/List/Util.pm\n/root/.cpan/build/Scalar-List-Utils-1.42-2c3ONp/blib/lib/List/Util.pm\n/root/.cpan/build/Scalar-List-Utils-1.42-NOwU0A/lib/List/Util.pm\n/root/.cpan/build/Scalar-List-Utils-1.42-NOwU0A/blib/lib/List/Util.pm\n/root/.cpan/build/perl-5.22.1-D0_eFO/cpan/Scalar-List-Utils/lib/List/Util.pm\n</code></pre>\n\n<p>Per request of brian d foy, I installed a new module.  This module Config::Onion was not previously installed, so nothing old to conflict. The module installs OK, but I created an onion-test.pl script, same as above, and it has the same issue where it only loads the module as root.</p>\n\n<pre><code> \u00bb sudo perl -MConfig::Onion -e 'print \"Module: \" . $ARGV[0] . \"\\nVersion: \" . $ARGV[0]-&gt;VERSION . \"\\n\\n\"' Config::Onion\nCan't locate Config/Onion.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .).\nBEGIN failed--compilation aborted.\n\n \u00bb sudo cpan\nTerminal does not support AddHistory.\n\ncpan shell -- CPAN exploration and modules installation (v2.10)\nEnter 'h' for help.\n\ncpan[1]&gt; install Config::Onion\n\n[Redacted for brevity. No errors noted during this process.]\n\nResult: PASS\n  DSHEROH/Config-Onion-1.004.tar.gz\n  /usr/bin/make test -- OK\nRunning make install\nPrepending /root/.cpan/build/Config-Onion-1.004-TigyuT/blib/arch /root/.cpan/build/Config-Onion-1.004-TigyuT/blib/lib to PERL5LIB for 'install'\nManifying 2 pod documents\nInstalling /usr/local/share/perl5/Config/Onion.pm\nInstalling /usr/local/share/perl5/Config/Onion/Simple.pm\nInstalling /usr/local/share/man/man3/Config::Onion.3pm\nInstalling /usr/local/share/man/man3/Config::Onion::Simple.3pm\nAppending installation info to /usr/lib64/perl5/perllocal.pod\n  DSHEROH/Config-Onion-1.004.tar.gz\n  /usr/bin/make install  -- OK\n\n \u00bb cd /usr/local/share/perl5/Config\n \u00bb sudo ls -l  Onion\ntotal 4\n-r--r--r-- 1 root root 1856 May  9  2014 Simple.pm\n\n \u00bb sudo find / -name Onion.pm\n/usr/local/share/perl5/Config/Onion.pm\n/root/.cpan/build/Config-Onion-1.004-TigyuT/lib/Config/Onion.pm\n/root/.cpan/build/Config-Onion-1.004-TigyuT/blib/lib/Config/Onion.pm\n\n\nonion-test.pl:\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Config::Onion;\n\n\n\n \u00bb ./onion-test.pl\nCan't locate Hash/Merge/Simple.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/share/perl5/Config/Onion.pm line 9.\nBEGIN failed--compilation aborted at /usr/local/share/perl5/Config/Onion.pm line 9.\nCompilation failed in require at ./onion-test.pl line 29.\nBEGIN failed--compilation aborted at ./onion-test.pl line 29.\n\n\n \u00bb sudo ./onion-test.pl\n[No Errors]\n</code></pre>\n\n<p>Per Ikegami, I ran this command:</p>\n\n<pre><code>sudo chmod -R go+rX                   \\\n   /usr/local/lib64/perl5        \\\n   /usr/local/share/perl5        \\\n   /usr/lib64/perl5/vendor_perl  \\\n   /usr/share/perl5/vendor_perl  \\\n   /usr/lib64/perl5              \\\n   /usr/share/perl5 \n</code></pre>\n\n<p>Both of my test scripts, with Scalar::Util and Config::Onion are loading the modules without error.  I think his solution is the right one for the issue I was having, and I've marked it accordingly.  Thanks everyone for your research, and to Ikegami for hitting on the solution.</p>\n"}, {"tags": ["python", "bash", "perl"], "comments": [{"owner": {"reputation": 19290, "user_id": 471899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ed5e532a550a0dc42404044d3f7adba4?s=128&d=identicon&r=PG", "display_name": "Alik", "link": "https://stackoverflow.com/users/471899/alik"}, "edited": false, "score": 0, "creation_date": 1453903870, "post_id": 35039543, "comment_id": 57803520, "body": "<code>perl -e &#39;print &quot;A\\x09B&quot;&#39;</code> outputs tab for me, I can see it on screen and see it in file if I redirect output"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1453903900, "post_id": 35039543, "comment_id": 57803542, "body": "<code>echo -e &quot;foo\\x09bar&quot;</code>"}, {"owner": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1453903966, "post_id": 35039543, "comment_id": 57803590, "body": "So at issue here is the <code>&lt;&lt;&lt;</code> operator, using a pipe shows a tab."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1453904082, "post_id": 35039543, "comment_id": 57803686, "body": "Quoting: <code>hexdump -C &lt;&lt;&lt; &quot;$(printf &#39;A\\x09B&#39;)&quot;</code>"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1453904335, "post_id": 35039543, "comment_id": 57803889, "body": "Always quote parameter expansions, unless you explicitly want word-splitting... which you generally <i>don&#39;t</i> want. See <a href=\"http://mywiki.wooledge.org/BashGuide/Practices#Quoting\" rel=\"nofollow noreferrer\">BashGuide</a> for details."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1453904339, "post_id": 35039543, "comment_id": 57803896, "body": "@Cyrus: It&#39;s not clear what your comment means. It is an exact copy of the last line of code in the question, and the OP says it produces a space character as before"}, {"owner": {"reputation": 19290, "user_id": 471899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ed5e532a550a0dc42404044d3f7adba4?s=128&d=identicon&r=PG", "display_name": "Alik", "link": "https://stackoverflow.com/users/471899/alik"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453904425, "post_id": 35039543, "comment_id": 57803972, "body": "@Borodin no, it is not exact copy."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1453904498, "post_id": 35039543, "comment_id": 57804027, "body": "What output do you expect ?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453904499, "post_id": 35039543, "comment_id": 57804029, "body": "@Borodin: Cyrus&#39;s code protects the <code>$(...)</code> command with double-quotes."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1453904562, "post_id": 35039543, "comment_id": 57804077, "body": "@PM2Ring According to the <code>bash</code> documentation, the argument to <code>&lt;&lt;&lt;</code> isn&#39;t supposed to undergo word-splitting, but command substitutions still incorrectly do. This is fixed in 4.4."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453904664, "post_id": 35039543, "comment_id": 57804159, "body": "Thanks, @chepner. Still, &quot;when in doubt, double-quote&quot; is a good motto when doing stuff with Bash parameter expansions. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1453904691, "post_id": 35039543, "comment_id": 57804184, "body": "@PM2Ring: Ah, I apologise. Cyrus&#39; <i>original</i> comment was identical to the OP&#39;s code. I am using the SO tablet app which doesn&#39;t update comments when they are modified"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453904780, "post_id": 35039543, "comment_id": 57804252, "body": "@Borodin: That&#39;s correct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 19290, "user_id": 471899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ed5e532a550a0dc42404044d3f7adba4?s=128&d=identicon&r=PG", "display_name": "Alik", "link": "https://stackoverflow.com/users/471899/alik"}, "edited": false, "score": 0, "creation_date": 1453904785, "post_id": 35039543, "comment_id": 57804256, "body": "@Alik: You could have helped a lot by describing the difference"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453904910, "post_id": 35039543, "comment_id": 57804344, "body": "@Borodin: Mystery solved! :)"}], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1453904455, "post_id": 35039780, "comment_id": 57803996, "body": "Technically, this is a bug in <code>bash</code>. The argument following <code>&lt;&lt;&lt;</code> isn&#39;t supposed to undergo word-splitting, but command substitutions do. This is fixed in the upcoming 4.4 release. Quoting the expansion will also solve the problem."}, {"owner": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453904986, "post_id": 35039780, "comment_id": 57804416, "body": "@chepner: ah, interesting, I already had trouble justifying the behaviour from the man page.."}], "tags": [], "owner": {"reputation": 881839, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 8, "last_activity_date": 1453906143, "last_edit_date": 1453906143, "creation_date": 1453904196, "answer_id": 35039780, "question_id": 35039543, "link": "https://stackoverflow.com/questions/35039543/print-x09-print-0x20-how-to-print-0x09-to-stdout/35039780#35039780", "title": "Print &quot;\\x09&quot;, print 0x20, how to print 0x09 to STDOUT?", "body": "<p>At issue here is Bash <em>expansion</em>; you get the same issue with putting the command in backticks:</p>\n\n\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ echo `python -c 'print \"A\\x09B\"'`\nA B\n</code></pre>\n\n<p>Avoid expansion; it splits your input on whitespace and rejoins for the next command; you see the same with multiple spaces:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ hexdump -C &lt;&lt;&lt; $(python -c 'print \"A\\x20\\x20\\x20B\"')\n00000000  41 20 42 0a                                       |A B.|\n00000004\n</code></pre>\n\n<p>Use a pipe instead:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ python -c 'print \"A\\x09B\"' | hexdump\n0000000 41 09 42 0a\n0000004\n</code></pre>\n\n<p>or quote the command (miraculously, the extra quotes don't clash with those used in the command line itself!):</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>hexdump -C &lt;&lt;&lt; \"$(python -c 'print \"A\\x20\\x20\\x20B\"')\"\n</code></pre>\n\n<p>The subprocess output being expanded is a bug in bash, to be fixed in bash 4.4. </p>\n"}, {"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1453906799, "post_id": 35040456, "comment_id": 57805851, "body": "Note the quotes <i>shouldn&#39;t</i> be necessary, but are until <code>bash</code> 4.4 is released. (The man page states that the word following <code>&lt;&lt;&lt;</code> isn&#39;t subject to word-splitting; the shell itself is still striving to reach that goal :)"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453907089, "post_id": 35040456, "comment_id": 57806062, "body": "@chepner i think quotes should be necessary (even it is being changed so they aren&#39;t) as it isn&#39;t a single word after the &quot;&lt;&lt;&lt;&quot; as the subshell would be processed first and so there would be multiple words. If it is being changed to no quotes, does that mean that <code>cat &lt;&lt;&lt; 1 2 3 54 5</code> should work? what about newlines ? etc"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453908268, "post_id": 35040456, "comment_id": 57806946, "body": "@chepner Do you know when the bashref was updated to indicate which expansions take place on the heredoc &quot;word&quot;?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453908773, "post_id": 35040456, "comment_id": 57807391, "body": "Good question; sometime after 4.1, at least by 4.3 (I don&#39;t have 4.2 to check)"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1453909089, "post_id": 35040456, "comment_id": 57807631, "body": "<code>cat &lt;&lt;&lt; 1 2 3 54 5</code> doesn&#39;t involve word-splitting; that&#39;s simply parsing, so <code>1</code> is the only word used by <code>&lt;&lt;&lt;</code>; the rest are ordinary arguments to <code>cat</code>. By contrast, <code>$(...)</code> is a single word whose expansion may be subject to word-splitting, depending on context."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1453909208, "post_id": 35040456, "comment_id": 57807714, "body": "Similar problems for ordinary parameters expansions were fixed in 4.3, but command substitutions seem to be handled by separate code, so they slipped through."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1453906935, "last_edit_date": 1453906935, "creation_date": 1453906025, "answer_id": 35040456, "question_id": 35039543, "link": "https://stackoverflow.com/questions/35039543/print-x09-print-0x20-how-to-print-0x09-to-stdout/35040456#35040456", "title": "Print &quot;\\x09&quot;, print 0x20, how to print 0x09 to STDOUT?", "body": "<p>It's entirely a bash issue. Specifically, it's a bash bug that can be worked around as follows:</p>\n\n<pre><code>                 +-------- Add these ---------+\n                 |                            |\n                 v                            v\n$ hexdump -C &lt;&lt;&lt; \"$(perl -e 'print \"A\\x09B\"' )\"\n00000000  41 09 42 0a                                       |A.B.|\n00000004\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code># Passed via STDIN as the original.\n$ perl -e 'print \"A\\x09B\"' | hexdump -C\n00000000  41 09 42                                          |A.B|\n00000003\n\n# Passed via a file name.\n$ hexdump -C &lt;( perl -e 'print \"A\\x09B\"' )\n00000000  41 09 42                                          |A.B|\n00000003\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 4126223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fcaf5208d8be50fdcba0be3b97de9055?s=128&d=identicon&r=PG&f=1", "display_name": "tutuen", "link": "https://stackoverflow.com/users/4126223/tutuen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "accepted_answer_id": 35040456, "answer_count": 2, "score": 0, "last_activity_date": 1453906935, "creation_date": 1453903566, "last_edit_date": 1453904268, "question_id": 35039543, "link": "https://stackoverflow.com/questions/35039543/print-x09-print-0x20-how-to-print-0x09-to-stdout", "title": "Print &quot;\\x09&quot;, print 0x20, how to print 0x09 to STDOUT?", "body": "<p>I try to print to STDOUT the 0x09 (horizontal TAB) value, but in perl, python or bash 0x09 is replaced by 0x20 (a space). </p>\n\n<pre><code>$ hexdump -C &lt;&lt;&lt; $(perl -e 'print \"A\\x09B\" ')\n00000000  41 20 42 0a                                       |A B.|\n00000004\n</code></pre>\n\n<p>same problem in bash:</p>\n\n<pre><code>$ hexdump -C &lt;&lt;&lt; $(printf \"A\\x09B\")\n00000000  41 20 42 0a                                       |A B.|\n00000004\n</code></pre>\n\n<p>It's possible to print the 0x09 value to STDOUT?</p>\n"}, {"tags": ["python", "regex", "perl", "tokenize", "substitution"], "comments": [{"owner": {"reputation": 3394, "user_id": 4805174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y0dE2.png?s=128&g=1", "display_name": "kayess", "link": "https://stackoverflow.com/users/4805174/kayess"}, "edited": false, "score": 4, "creation_date": 1453898808, "post_id": 35037626, "comment_id": 57799920, "body": "It is preferred if you can post separate questions instead of combining your questions into one. That way, it helps the people answering your question and also others hunting for at least one of your questions. Thanks!"}, {"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 3394, "user_id": 4805174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y0dE2.png?s=128&g=1", "display_name": "kayess", "link": "https://stackoverflow.com/users/4805174/kayess"}, "edited": false, "score": 0, "creation_date": 1453898977, "post_id": 35037626, "comment_id": 57800044, "body": "@kayess, in this case, it&#39;s almost the same question; i think asking another question would result in duplicates. Especially when <code>\\p{Open_Punctuation}</code> is some what similar to <code>u&quot;&quot;&quot;&quot;&#39;&lt;([&quot;&quot;&quot;</code>"}, {"owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 3394, "user_id": 4805174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y0dE2.png?s=128&g=1", "display_name": "kayess", "link": "https://stackoverflow.com/users/4805174/kayess"}, "edited": false, "score": 1, "creation_date": 1453907202, "post_id": 35037626, "comment_id": 57806141, "body": "By popular demand: <a href=\"http://stackoverflow.com/questions/35040905/what-is-the-equivalence-of-perluniprops-in-python\" title=\"what is the equivalence of perluniprops in python\">stackoverflow.com/questions/35040905/&hellip;</a> =)"}], "answers": [{"comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 2, "creation_date": 1453899614, "post_id": 35037700, "comment_id": 57800493, "body": "The OP wants to get rid of the <code>for</code> loop. Your answer is not semantically different than the original except that yours run a little faster."}], "tags": [], "owner": {"reputation": 10660, "user_id": 4907767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/To1v7.jpg?s=128&g=1", "display_name": "gtlambert", "link": "https://stackoverflow.com/users/4907767/gtlambert"}, "is_accepted": false, "score": 0, "last_activity_date": 1453898513, "creation_date": 1453898513, "answer_id": 35037700, "question_id": 35037626, "link": "https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python/35037700#35037700", "title": "Padding multiple character with space - python", "body": "<p>Use the <code>format</code> function, and insert a <code>unicode</code> string:</p>\n\n<pre><code>p = u'\u060c;\u061b\u00bf!\"\\])}\u00bb\u203a\u201d\u061f%\u066a\u00b0\u00b1\u00a9\u00ae\u0964\u0965\u2026'\ntext = u\"this, is a sentence with weird\u00bb symbols\u2026 appearing everywhere\u00bf\"\nfor i in p:\n    text = text.replace(i, u' {} '.format(i))\n\nprint(text)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>this, is a sentence with weird \u00bb  symbols \u2026  appearing everywhere \u00bf \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1453910790, "last_edit_date": 1453910790, "creation_date": 1453899041, "answer_id": 35037908, "question_id": 35037626, "link": "https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python/35037908#35037908", "title": "Padding multiple character with space - python", "body": "<p>Python version of <code>$1</code> is <code>\\1</code>, but you should use regex substitution instead of simple string replace:</p>\n\n<pre><code>import re\n\np = ur'([\u060c;\u061b\u00bf!\"\\])}\u00bb\u203a\u201d\u061f%\u066a\u00b0\u00b1\u00a9\u00ae\u0964\u0965\u2026])'\ntext = u\"this, is a sentence with weird\u00bb symbols\u2026 appearing everywhere\u00bf\"\n\nprint re.sub(p, ur' \\1 ', text)\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>this , is a sentence with weird \u00bb  symbols \u2026  appearing everywhere \u00bf \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1078, "user_id": 1132213, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a0c40c56a9d1b5fa4b65e3d1e9df886f?s=128&d=identicon&r=PG", "display_name": "eskaev", "link": "https://stackoverflow.com/users/1132213/eskaev"}, "is_accepted": false, "score": 2, "last_activity_date": 1453899090, "creation_date": 1453899090, "answer_id": 35037923, "question_id": 35037626, "link": "https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python/35037923#35037923", "title": "Padding multiple character with space - python", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/re.html#re.sub\" rel=\"nofollow\"><code>re.sub</code></a>, with <code>\\1</code> as a placeholder.</p>\n\n<pre><code>&gt;&gt;&gt; p = u'\u060c;\u061b\u00bf!\"\\])}\u00bb\u203a\u201d\u061f%\u066a\u00b0\u00b1\u00a9\u00ae\u0964\u0965\u2026'\n&gt;&gt;&gt; text = u\"this, is a sentence with weird\u00bb symbols\u2026 appearing everywhere\u00bf\"\n&gt;&gt;&gt; text = re.sub(u'([{}])'.format(p), r' \\1 ', text)\n&gt;&gt;&gt; print text\nthis, is a sentence with weird \u00bb  symbols \u2026  appearing everywhere \u00bf\n</code></pre>\n"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 35037908, "answer_count": 3, "score": 1, "last_activity_date": 1453910790, "creation_date": 1453898335, "last_edit_date": 1453907075, "question_id": 35037626, "link": "https://stackoverflow.com/questions/35037626/padding-multiple-character-with-space-python", "title": "Padding multiple character with space - python", "body": "<p>In <code>perl</code>, I can do the following with will pad my punctuation symbols with spaces:</p>\n\n<pre><code>s/([\u060c;\u061b\u00bf!\"\\])}\u00bb\u203a\u201d\u061f%\u066a\u00b0\u00b1\u00a9\u00ae\u0964\u0965\u2026])/ $1 /g;` \n</code></pre>\n\n<p>In <code>Python</code>, I've tried this:</p>\n\n<pre><code>&gt;&gt;&gt; p = u'\u060c;\u061b\u00bf!\"\\])}\u00bb\u203a\u201d\u061f%\u066a\u00b0\u00b1\u00a9\u00ae\u0964\u0965\u2026'\n&gt;&gt;&gt; text = u\"this, is a sentence with weird\u00bb symbols\u2026 appearing everywhere\u00bf\"\n&gt;&gt;&gt; for i in p:\n...     text = text.replace(i, ' '+i+' ')\n... \n&gt;&gt;&gt; text\nu'this, is a sentence with weird \\xbb  symbols \\u2026  appearing everywhere \\xbf '\n&gt;&gt;&gt; print text\nthis, is a sentence with weird \u00bb  symbols \u2026  appearing everywhere \u00bf \n</code></pre>\n\n<p>But is there a way to use some sort of a placeholder symbol, e.g. <code>$1</code> in <code>perl</code> where I can do the same in <code>python</code> with 1 regex?</p>\n"}, {"tags": ["perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453901515, "post_id": 35037706, "comment_id": 57801792, "body": "I do not fully understand how this works. What is $op doing and why is the splice needed?"}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453901766, "post_id": 35037706, "comment_id": 57801960, "body": "Also, if a fourth letter, for example &#39;D&#39;, was introduced and behaved like C (i.e. subtraction) - could this be added without major modification of the line? Likewise, if the fourth letter was to be completely ignored in the summation?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 1, "creation_date": 1453905552, "post_id": 35037706, "comment_id": 57804862, "body": "@AnnaSchumann: <code>splice</code> removes the first two elements from the array. $op is the letter, $num is the number."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 1, "creation_date": 1453905705, "post_id": 35037706, "comment_id": 57804986, "body": "@AnnaSchumann: Introducing a new letter is possible in both solutions. You need to add it to the character class in the regex, and in the first solution, you have to change the ternary operator condition. In the second one, you just add it to the %one hash with the corresponding factor (1 for add, -1 for subtract, 0 for ignore)."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1453898527, "creation_date": 1453898527, "answer_id": 35037706, "question_id": 35037427, "link": "https://stackoverflow.com/questions/35037427/splitting-and-tallying-substrings-within-mixed-integer-string-data/35037706#35037706", "title": "Splitting and tallying substrings within mixed integer-string data", "body": "<p>When you use <code>split</code> with a capture, the captured group is returned from split, too.</p>\n\n<pre><code>perl -lane '\n    @ar = split /([ABC])/, $F[2];\n    $s = 0;\n    $s += $n * (\"C\" eq $op ? -1 : 1) while ($n, $op) = splice @ar, 0, 2;\n    print $s\n' &lt; input\n</code></pre>\n\n<p>Or maybe more declarative:</p>\n\n<pre><code>BEGIN { %one = ( A =&gt;  1,\n                 B =&gt;  1,\n                 C =&gt; -1 ) }\n@ar = split /([ABC])/, $F[2];\n$s = 0;\n$s += $n * $one{$op} while ($n, $op) = splice @ar, 0, 2;\nprint $s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1453898839, "creation_date": 1453898839, "answer_id": 35037826, "question_id": 35037427, "link": "https://stackoverflow.com/questions/35037427/splitting-and-tallying-substrings-within-mixed-integer-string-data/35037826#35037826", "title": "Splitting and tallying substrings within mixed integer-string data", "body": "<p>When working through a string like this, it's useful to know that regular expressions can return a list of results. </p>\n\n<p>E.g. </p>\n\n<pre><code>my @matches = $str =~ m/(\\d+[A-C])/g; #will catch repeated instances\n</code></pre>\n\n<p>So you can do something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    my $total;\n    #break the string into digit+letter groups.\n    for (m/(\\d+[A-C])/g) {\n        #separate out this group into num and code. \n        my ( $num, $code ) =  m/(\\d+)([A-C])/;\n        print \"\\t\",$num, \" =&gt; \", $code, \"\\n\";\n        if ( $code eq \"C\" ) {\n            $total -= $num;\n        }\n        else {\n            $total += $num;\n        }\n    }\n    print $total, \" =&gt; \", $_;\n}\n\n__DATA__\n40A3B35A3C\n30A5B28A2C2B\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 1939168, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/2e47f3a6db33bc8a8e3f28a18f12a7ef?s=128&d=identicon&r=PG", "display_name": "user1939168", "link": "https://stackoverflow.com/users/1939168/user1939168"}, "is_accepted": false, "score": 1, "last_activity_date": 1453899605, "last_edit_date": 1453899605, "creation_date": 1453899106, "answer_id": 35037930, "question_id": 35037427, "link": "https://stackoverflow.com/questions/35037427/splitting-and-tallying-substrings-within-mixed-integer-string-data/35037930#35037930", "title": "Splitting and tallying substrings within mixed integer-string data", "body": "<pre><code>perl -lne 'push @a,/([\\d]+)[AB]/g;\n           push @b,/([\\d]+)[C]/g;\n           $sum+=$_ for(@a);$sum-=$_ for(@b);\n           print $sum;@a=@b=();undef $sum' Your_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "is_accepted": false, "score": 1, "last_activity_date": 1453900173, "last_edit_date": 1453900173, "creation_date": 1453899420, "answer_id": 35038036, "question_id": 35037427, "link": "https://stackoverflow.com/questions/35037427/splitting-and-tallying-substrings-within-mixed-integer-string-data/35038036#35038036", "title": "Splitting and tallying substrings within mixed integer-string data", "body": "<p>how it works</p>\n\n<ul>\n<li>use the command line arg as the input </li>\n<li>set the hash \"%op\" to the\noperations per letter </li>\n<li>substitute the letters for operators in the</li>\n<li>input evaluate the substituted input as an expression</li>\n</ul>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %op=qw(A + B + C -);\n$ARGV[0] =~ s/(\\d+)(A|B|C)/$op{$2} $1/g;\nprint eval($ARGV[0]);\n</code></pre>\n"}], "owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 35037706, "answer_count": 4, "score": -1, "last_activity_date": 1453900173, "creation_date": 1453897805, "question_id": 35037427, "link": "https://stackoverflow.com/questions/35037427/splitting-and-tallying-substrings-within-mixed-integer-string-data", "title": "Splitting and tallying substrings within mixed integer-string data", "body": "<p>Input Data (example):</p>\n\n<pre><code>40A3B35A3C\n30A5B28A2C2B\n</code></pre>\n\n<p>Desired output (per-line) is a single number determined by the composition of the code 40A3B35A3C and the following rules:</p>\n\n<pre><code>if A - add the proceeding number to the running total\nif B - add the proceeding number to the running total\nif C - subtract the proceeding number from the running total\n</code></pre>\n\n<p><code>40A 3B 35A 3C</code> would thus produce 40 + 3 + 35 - 3 = 75.</p>\n\n<p>Output from both lines:</p>\n\n<pre><code>75\n63\n</code></pre>\n\n<p>Is there an efficient way to achieve this for a particular column (such as <code>$F[2]</code>) in a tab-delimited .txt file using a one-liner? I have considered splitting the entire code into individual characters, then performing if statement checks to detect A/B/C, but my Perl knowledge is limited and I am unsure how to go about this.</p>\n"}, {"tags": ["apache", "perl", "timeout", "cgi", "mod-perl2"], "comments": [{"owner": {"reputation": 15919, "user_id": 98959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd8df86ca823b368f838da3ff25f10c?s=128&d=identicon&r=PG", "display_name": "covener", "link": "https://stackoverflow.com/users/98959/covener"}, "edited": false, "score": 0, "creation_date": 1453905127, "post_id": 35034862, "comment_id": 57804539, "body": "Whats the verbatim error when using mod_cgi?"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 15919, "user_id": 98959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd8df86ca823b368f838da3ff25f10c?s=128&d=identicon&r=PG", "display_name": "covener", "link": "https://stackoverflow.com/users/98959/covener"}, "edited": false, "score": 0, "creation_date": 1453908639, "post_id": 35034862, "comment_id": 57807279, "body": "&quot;Script timed out before returning headers&quot;, but that&#39;s really not the question, I want to know what happens server side after sending that error."}], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453917657, "post_id": 35041719, "comment_id": 57813669, "body": "So my succeeding process was only lucky being in the 3 seconds interval? Is there any way to influence this cleanup function, besides rising the timeout? Maybe any further documentation, so I can get some background about mod_per as well?"}, {"owner": {"reputation": 15919, "user_id": 98959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd8df86ca823b368f838da3ff25f10c?s=128&d=identicon&r=PG", "display_name": "covener", "link": "https://stackoverflow.com/users/98959/covener"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 1, "creation_date": 1453919406, "post_id": 35041719, "comment_id": 57814801, "body": "It is not configurable in mod_cgi or mod_cgid. In the former, it is part of a watch-list for any kind of child process that needs to be killed after a timeout.    The API between modules and this facility is apr_pool_note_subprocess. There is one call to this in mod_perl but I cannot tell if it&#39;s for routine script execution (my guess would be no because there should not even be a child process for mod_perl?)  The process lifetime stuff is in APR, see above method and free_process_chain in srclib/apr/memory/unix/apr_pools.c"}], "tags": [], "owner": {"reputation": 15919, "user_id": 98959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd8df86ca823b368f838da3ff25f10c?s=128&d=identicon&r=PG", "display_name": "covener", "link": "https://stackoverflow.com/users/98959/covener"}, "is_accepted": true, "score": 1, "last_activity_date": 1453909305, "creation_date": 1453909305, "answer_id": 35041719, "question_id": 35034862, "link": "https://stackoverflow.com/questions/35034862/what-happens-after-apache-says-script-timed-out-before-returning-headers-to-th/35041719#35041719", "title": "What happens AFTER Apache says &quot;Script timed out before returning headers&quot; to the running script?", "body": "<p>Both mod_cgi and mod_cgid set a cleanup function on the request scope to kill the child process, but they do it slightly different ways.    This would happen shortly after the timeout is reported (a little time for mod_cgi to return control, the error response to be written, the request logged, etc)</p>\n\n<p>mod_cgi uses a core facility in httpd that does SIGTERM, sleeps for 3 seconds, then does a SIGKILL.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 0, "accepted_answer_id": 35041719, "answer_count": 1, "score": 1, "last_activity_date": 1453909305, "creation_date": 1453890745, "question_id": 35034862, "link": "https://stackoverflow.com/questions/35034862/what-happens-after-apache-says-script-timed-out-before-returning-headers-to-th", "title": "What happens AFTER Apache says &quot;Script timed out before returning headers&quot; to the running script?", "body": "<p>I have a Perl web app served by Apache httpd using plain <code>mod_cgi</code> or optionally <code>mod_perl</code> with <code>PerlHandler ModPerl::Registry</code>. Recently the app encountered the error <code>Script timed out before returning headers</code> on some invocations and behaved differently afterwards: While some requests seemed to be processed successfully in the background, after httpd sent status 504 to the client, others didn't.</p>\n\n<p>So how exactly behaves httpd AFTER it reached its configured timeout and sent the error to the client? The request/response cycle is finished now, so I guess things like KeepAlive come into play to decide if the TCP connections stays alive or not etc. But what happens to the running script in which environment, e.g. mod_cgi vs. mod_perl?</p>\n\n<p>Especially in mod_cgi, where new processes are started for each request, I would have guessed that httpd keeps the processes simply running. Because all our Perl files have a shebang, I'm not even sure if httpd is able to track the processes and does so or not. That could be completely different with mod_perl, because in that case httpd is aware of the interpreters and what they are doing etc. In fact, the same operation which timed out using plain mod_cgi, succeeded using mod_perl without any timeout, but even with a timeout in mod_cgi at least one request succeeded afterwards as well.</p>\n\n<p>I find this question interesting for other runtimes than Perl as well, because they share the concepts of plain mod_cgi vs. some persistent runtime embedded into the httpd processes or using some external daemons.</p>\n\n<p>So, my question is NOT about how to get the error message away. Instead I want to understand how httpd behaves AFTER the error occurred, because I don't seem to find much information on that topic. It's all just about increasing configuration values and try to avoid the problem in the first place, which is fine, but not what I need to know currently.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["xml", "perl", "parsing", "soap", "character-encoding"], "comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453889344, "post_id": 35034019, "comment_id": 57793467, "body": "Your XML prolog seems correct for UTF-8, because a missing encoding attribute implies UTF-8 already. Guessing the turkish character as the problem doesn&#39;t help much, you shoud additionally provide the XML context reaching the server, so especially line 7 completely and the bytes for the turkish character."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453890276, "post_id": 35034019, "comment_id": 57794074, "body": "XML input context reaching to server is correct because when I call web service at debug mode (use SOAP::Lite &#39;debug&#39;), I see context at logs and it works when I copy it to SOAPUI interface it works."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453890373, "post_id": 35034019, "comment_id": 57794149, "body": "Output context is as follow :    &lt;?xml version=&quot;1.0&quot; ?&gt; &lt;soap:Envelope xmlns:soap=&quot;<a href=\"http://schemas.xmlsoap.org/soap/envelope/\" rel=\"nofollow noreferrer\">schemas.xmlsoap.org/soap/envelope</a>&quot;&gt;   &lt;soap:Body&gt;     &lt;MyMethodOutput xmlns=&quot;<a href=\"http://xmlns.oracle.com/orawsv/xxx/MyMethod\" rel=\"nofollow noreferrer\">xmlns.oracle.com/orawsv/xxx/MyMethod</a>&quot;&gt;       &lt;P_SONUCTXT&gt;&lt;/P_SONUCTXT&gt;       &lt;P_SONUC&gt;Bilgi: KIOS olumsuz&lt;/P_SONUC&gt;       &lt;P_RENK&gt;Ye\ufffdil&lt;/P_RENK&gt;       &lt;P_KARARSTATU&gt;&lt;/P_KARARSTATU&gt;       &lt;P_KARARSONUC&gt;&lt;/P_KARARSONUC&gt;       &lt;P_FAIZ&gt;0&lt;/P_FAIZ&gt;     &lt;/MyMethodOutput&gt;   &lt;/soap:Body&gt; &lt;/soap:Envelope&gt;"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453890802, "post_id": 35034019, "comment_id": 57794466, "body": "Line 7 at output is as follow:   &lt;P_RENK&gt;Ye\ufffdil&lt;/P_RENK&gt;"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453890880, "post_id": 35034019, "comment_id": 57794510, "body": "Provides the bytes of column 16 as HEX. And if your logged request works in SoapUI, check the HTTP headers sent using SOAP::Lite."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453895582, "post_id": 35034019, "comment_id": 57797566, "body": "How will I chech HTTP headers? I see following when I call web service at debug mode :   SOAP::Transport::HTTP::Client::send_receive: HTTP::Response=HASH(0x9219db4) SOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 200 OK Server: Oracle XML DB/Oracle Database Content-Type: text/xml Client-Date: Wed, 27 Jan 2016 11:50:22 GMT Client-Peer: 172.22.36.108:8080 Client-Response-Num: 1 Client-Transfer-Encoding: chunked DAV: 1,2,&lt;<a href=\"http://www.oracle.com/xdb/webdav/props\" rel=\"nofollow noreferrer\">oracle.com/xdb/webdav/props</a>&gt; MS-Author-Via: DAV"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453897643, "post_id": 35034019, "comment_id": 57799115, "body": "You need some tool like Wireshark showing you the exact request sent by your client."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1453902327, "post_id": 35034019, "comment_id": 57802370, "body": "@thorsten, I am also client and seeing xml code making request. It works when I copy it to SOAPUI. It can not be a coincidence that the error message indicates to line 7 ( &lt;P_RENK&gt;Ye\ufffdil&lt;/P_RENK&gt;) at response. There is not any other Turkish character before it."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1454318125, "post_id": 35034019, "comment_id": 57973322, "body": "I still could not find a solution. How can I set response encoding to iso-1859  instead of default value utf-8?"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453888611, "creation_date": 1453888611, "question_id": 35034019, "link": "https://stackoverflow.com/questions/35034019/perl-soaplite-xml-parser-encoding-value", "title": "Perl SOAP::Lite XML Parser encoding value", "body": "<p>I am calling web service with SOAP::Lite. It gives following error:</p>\n\n<pre><code>not well-formed (invalid token) at line 7, column 16, byte 281 at /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/XML/Parser.pm line 187\n</code></pre>\n\n<p>At line 7 of output, there is Turkish character which I think caused this problem. I can see output from terminal. It is starting with following line : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt;\n</code></pre>\n\n<p>There is no encoding parameter. How can I set output encoding value to UTF-8?\nI tried following when I am calling web service but it did not work:</p>\n\n<pre><code>my $soap = SOAP::Lite\n    -&gt; on_action( sub { join '/', @_ } )\n    -&gt; readable(1)\n    -&gt; uri('xxx')\n    -&gt; proxy(\"http://xxx\")\n    -&gt; ns(\"http://schemas.xmlsoap.org/soap/envelope/\",\"soapenv\")\n    -&gt; ns(\"xxx\",\"yyy\");\n$soap-&gt;serializer()-&gt;encodingStyle(\"utf-8\");\n</code></pre>\n"}, {"tags": ["bash", "perl", "ssh", "parallel-processing", "centos7"], "comments": [{"owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "edited": false, "score": 3, "creation_date": 1453908499, "post_id": 35033350, "comment_id": 57807155, "body": "It looks like perl is not installed on these instances."}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": true, "score": 2, "last_activity_date": 1453917477, "creation_date": 1453917477, "answer_id": 35044704, "question_id": 35033350, "link": "https://stackoverflow.com/questions/35033350/gnu-parallel-exec-perl-not-found/35044704#35044704", "title": "gnu-parallel: exec: perl: not found", "body": "<p>This:</p>\n\n<pre><code>parallel ./test.sh --sshloginfile ALL_SERVERS\n</code></pre>\n\n<p>is not the same as:</p>\n\n<pre><code>parallel --sshloginfile ALL_SERVERS ./test.sh\n</code></pre>\n\n<p>You want the last.</p>\n\n<p><code>perl</code> must be installed on the workers.</p>\n\n<pre><code>ssh remote perl -e \\''print \"OK\\n\"'\\'\n</code></pre>\n\n<p>must return OK.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5558501"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 35044704, "answer_count": 1, "score": 1, "last_activity_date": 1453917477, "creation_date": 1453886773, "last_edit_date": 1453889971, "question_id": 35033350, "link": "https://stackoverflow.com/questions/35033350/gnu-parallel-exec-perl-not-found", "title": "gnu-parallel: exec: perl: not found", "body": "<p>I have 3 EC2 instances with as OS Centos7.\nI've installed parallel on one of the instances (server1).</p>\n\n<p>It's possible to acces so no SSH issue</p>\n\n<p><code>ssh root@ip-10-0-xx-xx.xx-xx-1.compute.internal date</code> gave me the date.</p>\n\n<pre><code>ssh $SERVER echo works\nworks\n</code></pre>\n\n<p>Here I've created a ALL_SERVERS -file which contains the hostnames of my servers (root@ip-10-0-xx-xx.xx-xx-1.compute.internal).</p>\n\n<p>Now I've written a short bash-script with the name test:</p>\n\n<pre><code>#!/bin/bash\necho 'hello'\n</code></pre>\n\n<p>I want to run this script (started on server1). also on server2 and server3 at the same time.</p>\n\n<pre><code>parallel ./test.sh --sshloginfile ALL_SERVERS\n</code></pre>\n\n<p>But it's just showing <code>Academic tradition requires you to cite works you base your article on....</code>\nAnd after a few enters it's showing hello (only on my server1).</p>\n\n<p>Can someone explaining what I'm doing wrong.</p>\n\n<p>EDIT:\nAlso tried it without the file:</p>\n\n<pre><code>    parallel --sshlogin root@ip-10-0-xx-xx.xx-xx-1.compute.internal echo hello\n\noutput: bash: line 0: exec: perl: not found\n</code></pre>\n\n<p>I tried this too:</p>\n\n<pre><code>parallel --tag --nonall --slf ALL_SERVERS\n</code></pre>\n\n<p>Now I get:</p>\n\n<pre><code>root@ip-10-0-0-xx.xx-xx-1.compute.internal  bash: line 0: exec: perl: not found\nroot@ip-10-0-0-xx.xx-xx-1.compute.internal  bash: line 0: exec: perl: not found\n</code></pre>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453884805, "post_id": 35032358, "comment_id": 57790504, "body": "Welcome to Stack Overflow, and to the perl tag. Please <a href=\"https://stackoverflow.com/posts/35032358/edit\">edit</a> your question to include those first trials. We will not write code for you, but instead help you fix yours. It also helps to include <i>valid</i> XML. The stuff you show is not. The <code>&lt;Hit&gt;</code> and <code>&lt;Hsp&gt;</code> tags never closed. Please include code and input either exactly the way it is, or simplified in a way that it still reproduces the problem. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453891708, "post_id": 35032358, "comment_id": 57795067, "body": "Thank you for adding more information and making the XML valid. But please also add the code that you tried with."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1453888832, "post_id": 35033638, "comment_id": 57793158, "body": "This is not a good answer. You should explain what you are doing, and why. Code-only answers are discouraged. Furthermore, you are using neither <code>use strict</code> nor <code>use warnings</code>, and <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">the docs of XML::Simple discourage its use</a> because it is horrible to maintain code that uses it. Please revise your answer."}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453889807, "post_id": 35033638, "comment_id": 57793749, "body": "You&#39;re right regarding the <code>use strict</code> and <code>use warnings</code>. But for the explaining my code I already added some main comments in the code showing the steps, isn&#39;t that enough?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1453891630, "post_id": 35033638, "comment_id": 57795005, "body": "Well, it&#39;s enough to solve the problem, but not to understand what&#39;s going on. I consider a good answer to have a bit more explanation, and some reasoning as to why you would use XML::Simple specifically. And since OP says the file is 5 GB of size, it&#39;s probably going to eat <b>a lot of memory</b>. Explain how that would not be a problem in your solution. Simply throwing code at someone is not what Stack Overflow is about. But that&#39;s just my five cents. ;)"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453904616, "post_id": 35033638, "comment_id": 57804119, "body": "Thanks for shedding the light on the performance point, I&#39;m not that senior in Perl, but after some research I found that by installing <code>XML::SAX::Expat</code> or <code>XML::SAX::ExpatXS</code> parsers, <code>XML::Simple</code> performance should be much better compared to using the default, old, <code>XML::SAX</code> parser - <a href=\"http://search.cpan.org/dist/XML-Simple/lib/XML/Simple/FAQ.pod#Why_is_XML::Simple_so_slow\" rel=\"nofollow noreferrer\">search.cpan.org/dist/XML-Simple/lib/XML/Simple/&hellip;</a>?   What do you think?"}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454272396, "post_id": 35033638, "comment_id": 57958688, "body": "Hi. First thanks for the quick answer. I&#39;ve tried this script with a reduced xml-file and I got an error: Not a HASH reference at xml2xml.pl line 21. This is the line with the foreach loop. Have you any idea what is wrong?"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454313216, "post_id": 35033638, "comment_id": 57970738, "body": "The XML should be of exactly the same structure as the one you supplied in your question above, if you try the script with the same XML portion above it&#39;ll run as expected. In case you are using another XML you need to state that new one so that we edit the script to fit with your new XML."}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454316779, "post_id": 35033638, "comment_id": 57972523, "body": "I&#39;m sorry for my bad explanation; the &quot;reduced xml-file&quot; has the same XML portion as I showed in my qestion, only the number of entries is less. Nevertheless the script don&#39;t run and has the error I posted in the last commend. Have you tried the script at your computer?"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454317403, "post_id": 35033638, "comment_id": 57972890, "body": "Yes of course I tried it on the same XML in your question and it&#39;s working fine for me. Would you please check if your xml file gas the &lt;?xmlversion=&quot;1.0&quot;?&gt; line, and if so please try removing it, save the change, and then rerun the script. Let me know if this works or not."}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454318589, "post_id": 35033638, "comment_id": 57973613, "body": "I just tried the xml with the &lt;?xmlversion=&quot;1.0&quot;?&gt; tag and it failed, and I found that that tag should be either removed or replaced by this one <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code>"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454318703, "post_id": 35033638, "comment_id": 57973679, "body": "Also you need to make sure that the xml file is in the same directory as the script, they both should be on the same level, otherwise you need to modify the files paths in the script to point to the correct files."}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454320549, "post_id": 35033638, "comment_id": 57974860, "body": "I posted my output to an answer, because the script is to long for a comment. I had to delete the first line and yes the files and the script are in the same directory. So thank you for your help and your patience with me. Now I have to try the script with the big 5GB file. I hope it works also."}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454322859, "post_id": 35033638, "comment_id": 57976394, "body": "I&#39;ve tried to transfer the script to the real xml-file and have realized the major xml-tree, so that your script didn&#39;t work anymore. I&#39;ve updated my question with the tree so I hope my problem get clear."}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454325325, "post_id": 35033638, "comment_id": 57977969, "body": "Man, once you parse the XML into the $xml, you can access all its elements since whatever the structure is, since $xml is ref to a hash now. So whatever the XML tree is, you just have to modify the way you&#39;re updating the element, so in this case it seems like you&#39;ll have an array of <code>Iteration</code>, and inside each one you have another array of <code>hit</code>, so replace the foreach loop by two loops, one looping over each iteration of the iterants array, and an inner loop looping over each hit of the current iteration. Please try modifying the script as such, and let me know the latest"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454325411, "post_id": 35033638, "comment_id": 57978028, "body": "Try using <code>print Data::Dumper::Dumper($xml)</code> to see the exact structure of the $xml so that you can easily locate the iterations array and the hits array"}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454403821, "post_id": 35033638, "comment_id": 58016866, "body": "Thanks for your help. I updated the script and it worked so far with one exception: The script replace the first 10 descriptions and then it started to replace again the first 10 descriptions and not go through the description list. Can you fix this problem?"}, {"owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "edited": false, "score": 0, "creation_date": 1454404372, "post_id": 35033638, "comment_id": 58017221, "body": "I added the @{} to the inner foreach. This should be working now I guess"}, {"owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "edited": false, "score": 0, "creation_date": 1454414171, "post_id": 35033638, "comment_id": 58023754, "body": "Unfortunately it don&#39;t worked. For every &#39;Iteration&#39; the script replaced the same first 10 descriptions. Any other solutions?"}], "tags": [], "owner": {"reputation": 1987, "user_id": 5320562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1250463315/picture?type=large", "display_name": "Loukan ElKadi", "link": "https://stackoverflow.com/users/5320562/loukan-elkadi"}, "is_accepted": true, "score": 0, "last_activity_date": 1454404332, "last_edit_date": 1454404332, "creation_date": 1453887569, "answer_id": 35033638, "question_id": 35032358, "link": "https://stackoverflow.com/questions/35032358/integrate-description-from-one-file-in-another-xml-file-in-perl/35033638#35033638", "title": "Integrate description from one file in another XML file in Perl", "body": "<p>I just updated the script to match the new XML structure for your new XML above. </p>\n\n<p>Check my comments in the code below:</p>\n\n<pre><code>    use strict;                                                                                                                                                                                      \n    use warnings;\n    use XML::Simple;\n\n    #First, parse your XML into a hash\n    open my $MF1,'&lt;', 'my_xml.xml';\n    my $xml = XMLin($MF1);\n    close $MF1;\n\n    =com    This the $xml sample\n    $VAR1 = {\n        'BlastOutput_db' =&gt; '/mreferate/dwolff/RAPSearch2.23/db/NCBI_nr_dec15',\n        'BlastOutput_program' =&gt; 'RAPSearch',\n        'BlastOutput_param' =&gt; {\n        'Parameters' =&gt; {}\n        },\n        'BlastOutput_reference' =&gt; 'YonganZhao,HaixuTangandYuzhenYe.RAPSearch2:afastandmemory-efficientproteinsimilaritysearchtoolfornextgenerationsequencingdata.Bioinformatics2012,28(1):125-126',\n        'BlastOutput_version' =&gt; 'RAPSearch2',\n        'BlastOutput_iterations' =&gt; {\n            'Iteration' =&gt; {\n                'Iteration_hits' =&gt; {\n                    'Hit' =&gt; [\n                        {\n                        'Hit_accession' =&gt; 'KPV42113.1',\n                        'Hit_id' =&gt; 'gi|939543432|gb|KPV42113.1|',\n                        'Hit_hsps' =&gt; {\n                        'Hsp' =&gt; {\n                        'Hsp_hseq' =&gt; 'LVLCDEPVSALDVSVQAAVLNLLLEIQREHGTTMIFI',\n                        'Hsp_bit-score' =&gt; '58.151',\n                        'Hsp_identity' =&gt; '28',\n                        'Hsp_align-len' =&gt; '37',\n                        'Hsp_query-frame' =&gt; '0',\n                        'Hsp_query-from' =&gt; '1',\n                        'Hsp_qseq' =&gt; 'MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI',\n                        'Hsp_evalue' =&gt; '-5.6061',\n                        'Hsp_midline' =&gt; '+V+CDEPVSALDVSVQAAVLLL+EIQ++HTMII',\n                        'Hsp_num' =&gt; '1',\n                        'Hsp_positive' =&gt; '33',\n                        'Hsp_hit-from' =&gt; '54',\n                        'Hsp_score' =&gt; '139',\n                        'Hsp_hit-to' =&gt; '90',\n                        'Hsp_query-to' =&gt; '37'\n                        }\n                        },\n                    'Hit_len' =&gt; '162',\n                    'Hit_num' =&gt; '1',\n                    'Hit_def' =&gt; 'XX'\n                    },\n                    {\n                    'Hit_accession' =&gt; 'EIF44286.1',\n                    'Hit_id' =&gt; 'gi|385280362|gb|EIF44286.1|',\n                    'Hit_hsps' =&gt; {\n                    'Hsp' =&gt; {\n                    'Hsp_hit-from' =&gt; '169',\n                    'Hsp_positive' =&gt; '31',\n                    'Hsp_score' =&gt; '130',\n                    'Hsp_query-to' =&gt; '37',\n                    'Hsp_hit-to' =&gt; '205',\n                    'Hsp_num' =&gt; '1',\n                    'Hsp_midline' =&gt; '+V+CDEPVSALDVSVQA++LLE+Q+HTAM+I',\n                    'Hsp_align-len' =&gt; '37',\n                    'Hsp_query-frame' =&gt; '0',\n                    'Hsp_qseq' =&gt; 'MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI',\n                    'Hsp_evalue' =&gt; '-4.56249',\n                    'Hsp_query-from' =&gt; '1',\n                    'Hsp_bit-score' =&gt; '54.6842',\n                    'Hsp_identity' =&gt; '24',\n                    'Hsp_hseq' =&gt; 'LVICDEPVSALDVSVQAQIINLLQELQTEHNTAMLFI'\n                    }\n                    },\n                    'Hit_def' =&gt; 'XX',\n                    'Hit_len' =&gt; '327',\n                    'Hit_num' =&gt; '2'\n                    },\n\n=cut\n\n# Save the second file into an array\nopen my $MF2, '&lt;', 'file2';\nchomp( my @defs = &lt;$MF2&gt; );\nclose $MF2;\n\n# Update the XML hash\nforeach my $iteration ( @{ $xml-&gt;{'BlastOutput_iterations'}{'Iteration'}}){ \nforeach my $hit ( @{$iteration-&gt;{'Iteration_hits'}{'Hit'}}){    \n$hit-&gt;{'Hit_def'} = @defs[ $hit-&gt;{'Hit_num'} - 1 ];\n}}\n\n# Write the new XML to file1\nopen my $MF1_new, '&gt;', 'my_xml.xml';\nXMLout($xml, OutputFile =&gt; $MF1_new, NoAttr =&gt; 1, RootName =&gt; 'BlastOutput' );\nclose $MF1_new;  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "is_accepted": false, "score": 0, "last_activity_date": 1454320433, "creation_date": 1454320433, "answer_id": 35127468, "question_id": 35032358, "link": "https://stackoverflow.com/questions/35032358/integrate-description-from-one-file-in-another-xml-file-in-perl/35127468#35127468", "title": "Integrate description from one file in another XML file in Perl", "body": "<p>Finally I've got it. Only the output is a little bit displaced:</p>\n\n<pre><code>&lt;BlastOutput&gt;\n  &lt;BlastOutput_db&gt;/mreferate/dwolff/RAPSearch2.23/db/NCBI_nr_dec15&lt;/BlastOutput_db&gt;\n  &lt;BlastOutput_iterations&gt;\n    &lt;name&gt;Iteration&lt;/name&gt;\n    &lt;Iteration_hits&gt;\n      &lt;Hit&gt;\n        &lt;Hit_accession&gt;KPV42113.1&lt;/Hit_accession&gt;\n        &lt;Hit_def&gt;peptide ABC transporter ATPase, partial [Kouleothrix aurantiaca]\n&lt;/Hit_def&gt;\n        &lt;Hit_hsps&gt;\n          &lt;name&gt;Hsp&lt;/name&gt;\n          &lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n          &lt;Hsp_bit-score&gt;58.151&lt;/Hsp_bit-score&gt;\n          &lt;Hsp_evalue&gt;-5.6061&lt;/Hsp_evalue&gt;\n          &lt;Hsp_hit-from&gt;54&lt;/Hsp_hit-from&gt;\n          &lt;Hsp_hit-to&gt;90&lt;/Hsp_hit-to&gt;\n          &lt;Hsp_hseq&gt;LVLCDEPVSALDVSVQAAVLNLLLEIQREHGTTMIFI&lt;/Hsp_hseq&gt;\n          &lt;Hsp_identity&gt;28&lt;/Hsp_identity&gt;\n          &lt;Hsp_midline&gt;+V+CDEPVSALDVSVQAAVLLL+EIQ++HTMII&lt;/Hsp_midline&gt;\n          &lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n          &lt;Hsp_positive&gt;33&lt;/Hsp_positive&gt;\n          &lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n          &lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n          &lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n          &lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n          &lt;Hsp_score&gt;139&lt;/Hsp_score&gt;\n        &lt;/Hit_hsps&gt;\n        &lt;Hit_id&gt;gi|939543432|gb|KPV42113.1|&lt;/Hit_id&gt;\n        &lt;Hit_len&gt;162&lt;/Hit_len&gt;\n        &lt;Hit_num&gt;1&lt;/Hit_num&gt;\n      &lt;/Hit&gt;\n      &lt;Hit&gt;\n        &lt;Hit_accession&gt;EIF44286.1&lt;/Hit_accession&gt;\n        &lt;Hit_def&gt;oligopeptide ABC transporter [gamma proteobacterium BDW918]\n&lt;/Hit_def&gt;\n        &lt;Hit_hsps&gt;\n          &lt;name&gt;Hsp&lt;/name&gt;\n          &lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n          &lt;Hsp_bit-score&gt;54.6842&lt;/Hsp_bit-score&gt;\n          &lt;Hsp_evalue&gt;-4.56249&lt;/Hsp_evalue&gt;\n          &lt;Hsp_hit-from&gt;169&lt;/Hsp_hit-from&gt;\n          &lt;Hsp_hit-to&gt;205&lt;/Hsp_hit-to&gt;\n          &lt;Hsp_hseq&gt;LVICDEPVSALDVSVQAQIINLLQELQTEHNTAMLFI&lt;/Hsp_hseq&gt;\n          &lt;Hsp_identity&gt;24&lt;/Hsp_identity&gt;\n          &lt;Hsp_midline&gt;+V+CDEPVSALDVSVQA++LLE+Q+HTAM+I&lt;/Hsp_midline&gt;\n          &lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n          &lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n          &lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n          &lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n          &lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n          &lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n          &lt;Hsp_score&gt;130&lt;/Hsp_score&gt;\n        &lt;/Hit_hsps&gt;\n        &lt;Hit_id&gt;gi|385280362|gb|EIF44286.1|&lt;/Hit_id&gt;\n        &lt;Hit_len&gt;327&lt;/Hit_len&gt;\n        &lt;Hit_num&gt;2&lt;/Hit_num&gt;\n      &lt;/Hit&gt;\n      &lt;Hit&gt;\n        &lt;Hit_accession&gt;WP_022666548.1&lt;/Hit_accession&gt;\n        &lt;Hit_def&gt;ABC transporter ATP-binding protein [Desulfospira joergensenii]\n&lt;/Hit_def&gt;\n        &lt;Hit_hsps&gt;\n          &lt;name&gt;Hsp&lt;/name&gt;\n          &lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n          &lt;Hsp_bit-score&gt;53.5286&lt;/Hsp_bit-score&gt;\n          &lt;Hsp_evalue&gt;-4.21462&lt;/Hsp_evalue&gt;\n          &lt;Hsp_hit-from&gt;549&lt;/Hsp_hit-from&gt;\n          &lt;Hsp_hit-to&gt;585&lt;/Hsp_hit-to&gt;\n          &lt;Hsp_hseq&gt;MVICDEPVSALDVSVQAAVLNLLNEIKEEMGTTMIFI&lt;/Hsp_hseq&gt;\n          &lt;Hsp_identity&gt;27&lt;/Hsp_identity&gt;\n          &lt;Hsp_midline&gt;MV+CDEPVSALDVSVQAAVLLLEI+++TMII&lt;/Hsp_midline&gt;\n          &lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n          &lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n          &lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n          &lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n          &lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n          &lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n          &lt;Hsp_score&gt;127&lt;/Hsp_score&gt;\n        &lt;/Hit_hsps&gt;\n        &lt;Hit_id&gt;gi|550913550|ref|WP_022666548.1|&lt;/Hit_id&gt;\n        &lt;Hit_len&gt;721&lt;/Hit_len&gt;\n        &lt;Hit_num&gt;3&lt;/Hit_num&gt;\n      &lt;/Hit&gt;\n    &lt;/Iteration_hits&gt;\n    &lt;Iteration_iter-num&gt;1&lt;/Iteration_iter-num&gt;\n    &lt;Iteration_query-def&gt;gene_id_1&lt;/Iteration_query-def&gt;\n    &lt;Iteration_query-len&gt;37&lt;/Iteration_query-len&gt;\n    &lt;Iteration_stat&gt;\n      &lt;name&gt;Statistics&lt;/name&gt;\n      &lt;Statistics_db-len&gt;28292933896&lt;/Statistics_db-len&gt;\n      &lt;Statistics_db-num&gt;77704984&lt;/Statistics_db-num&gt;\n      &lt;Statistics_eff-space&gt;0&lt;/Statistics_eff-space&gt;\n      &lt;Statistics_entropy&gt;0.14&lt;/Statistics_entropy&gt;\n      &lt;Statistics_hsp-len&gt;0&lt;/Statistics_hsp-len&gt;\n      &lt;Statistics_kappa&gt;0.041&lt;/Statistics_kappa&gt;\n      &lt;Statistics_lambda&gt;0.267&lt;/Statistics_lambda&gt;\n    &lt;/Iteration_stat&gt;\n  &lt;/BlastOutput_iterations&gt;\n  &lt;BlastOutput_param&gt;\n    &lt;name&gt;Parameters&lt;/name&gt;\n  &lt;/BlastOutput_param&gt;\n  &lt;BlastOutput_program&gt;RAPSearch&lt;/BlastOutput_program&gt;\n  &lt;BlastOutput_reference&gt;YonganZhao,HaixuTangandYuzhenYe.RAPSearch2:afastandmemory-efficientproteinsimilaritysearchtoolfornextgenerationsequencingdata.Bioinformatics2012,28(1):125-126&lt;/BlastOutput_reference&gt;\n  &lt;BlastOutput_version&gt;RAPSearch2&lt;/BlastOutput_version&gt;\n&lt;/BlastOutput&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5842641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff3b2713e5f1f604adb65c1ada387d13?s=128&d=identicon&r=PG&f=1", "display_name": "Wookie777", "link": "https://stackoverflow.com/users/5842641/wookie777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 35033638, "answer_count": 2, "score": -1, "last_activity_date": 1454404332, "creation_date": 1453883916, "last_edit_date": 1454322965, "question_id": 35032358, "link": "https://stackoverflow.com/questions/35032358/integrate-description-from-one-file-in-another-xml-file-in-perl", "title": "Integrate description from one file in another XML file in Perl", "body": "<p>I'm new here so I apologize for my bad english.\nI have 2 files (file 1: main-XML-file and file 2: description-file) and I want to integrate the description line per line in a specific position (replace the XX in Hit_def) in the XML-file.</p>\n\n<p>file 1:\nHere is the xml-tree:</p>\n\n<pre><code> &lt;BlastOutput&gt;\n    &lt;BlastOutput_iterations&gt;\n        &lt;Iteration&gt; (gene 1)\n            &lt;Iteration_hits&gt;\n                &lt;Hit&gt; (1-10)\n                    &lt;Hit_def&gt;\n        &lt;Iteration&gt; (gene 2)\n            &lt;Iteration_hits&gt;\n                &lt;Hit&gt; (1-10)\n                    &lt;Hit_def&gt;\n</code></pre>\n\n<p>And here the first and last lines, because file is 5 GB big:</p>\n\n<pre><code>&lt;?xmlversion=\"1.0\"?&gt;\n&lt;BlastOutput&gt;\n&lt;BlastOutput_program&gt;RAPSearch&lt;/BlastOutput_program&gt;\n&lt;BlastOutput_version&gt;RAPSearch2&lt;/BlastOutput_version&gt;\n&lt;BlastOutput_reference&gt;YonganZhao,HaixuTangandYuzhenYe.RAPSearch2:afastandmemory-efficientproteinsimilaritysearchtoolfornextgenerationsequencingdata.Bioinformatics2012,28(1):125-126&lt;/BlastOutput_reference&gt;\n&lt;BlastOutput_db&gt;/mreferate/dwolff/RAPSearch2.23/db/NCBI_nr_dec15&lt;/BlastOutput_db&gt;\n&lt;BlastOutput_param&gt;\n&lt;Parameters&gt;\n&lt;/Parameters&gt;\n&lt;/BlastOutput_param&gt;\n&lt;BlastOutput_iterations&gt;\n&lt;Iteration&gt;\n&lt;Iteration_iter-num&gt;1&lt;/Iteration_iter-num&gt;\n&lt;Iteration_query-def&gt;gene_id_1&lt;/Iteration_query-def&gt;\n&lt;Iteration_query-len&gt;37&lt;/Iteration_query-len&gt;\n&lt;Iteration_hits&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;1&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|939543432|gb|KPV42113.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;XX&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;KPV42113.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;162&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;58.151&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;139&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-5.6061&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;54&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;90&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;28&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;33&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;LVLCDEPVSALDVSVQAAVLNLLLEIQREHGTTMIFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;+V+CDEPVSALDVSVQAAVLLL+EIQ++HTMII&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;2&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|385280362|gb|EIF44286.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;XX&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;EIF44286.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;327&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;54.6842&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;130&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-4.56249&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;169&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;205&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;24&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;LVICDEPVSALDVSVQAQIINLLQELQTEHNTAMLFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;+V+CDEPVSALDVSVQA++LLE+Q+HTAM+I&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;3&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|550913550|ref|WP_022666548.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;XX&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;WP_022666548.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;721&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;53.5286&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;127&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-4.21462&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;549&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;585&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;27&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;MVICDEPVSALDVSVQAAVLNLLNEIKEEMGTTMIFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;MV+CDEPVSALDVSVQAAVLLLEI+++TMII&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n...\n&lt;/Iteration_hits&gt;\n&lt;Iteration_stat&gt;\n&lt;Statistics&gt;\n&lt;Statistics_db-num&gt;77704984&lt;/Statistics_db-num&gt;\n&lt;Statistics_db-len&gt;28292933896&lt;/Statistics_db-len&gt;\n&lt;Statistics_hsp-len&gt;0&lt;/Statistics_hsp-len&gt;\n&lt;Statistics_eff-space&gt;0&lt;/Statistics_eff-space&gt;\n&lt;Statistics_kappa&gt;0.041&lt;/Statistics_kappa&gt;\n&lt;Statistics_lambda&gt;0.267&lt;/Statistics_lambda&gt;\n&lt;Statistics_entropy&gt;0.14&lt;/Statistics_entropy&gt;\n&lt;/Statistics&gt;\n&lt;/Iteration_stat&gt;\n&lt;/Iteration&gt;\n&lt;/BlastOutput_iterations&gt;\n&lt;/BlastOutput&gt;\n</code></pre>\n\n<p>file 2:</p>\n\n<pre><code>peptide ABC transporter ATPase, partial [Kouleothrix aurantiaca]\noligopeptide ABC transporter [gamma proteobacterium BDW918]\nABC transporter ATP-binding protein [Desulfospira joergensenii]\n</code></pre>\n\n<p>output should be:</p>\n\n<pre><code>&lt;?xmlversion=\"1.0\"?&gt;\n&lt;BlastOutput&gt;\n&lt;BlastOutput_program&gt;RAPSearch&lt;/BlastOutput_program&gt;\n&lt;BlastOutput_version&gt;RAPSearch2&lt;/BlastOutput_version&gt;\n&lt;BlastOutput_reference&gt;YonganZhao,HaixuTangandYuzhenYe.RAPSearch2:afastandmemory-efficientproteinsimilaritysearchtoolfornextgenerationsequencingdata.Bioinformatics2012,28(1):125-126&lt;/BlastOutput_reference&gt;\n&lt;BlastOutput_db&gt;/mreferate/dwolff/RAPSearch2.23/db/NCBI_nr_dec15&lt;/BlastOutput_db&gt;\n&lt;BlastOutput_param&gt;\n&lt;Parameters&gt;\n&lt;/Parameters&gt;\n&lt;/BlastOutput_param&gt;\n&lt;BlastOutput_iterations&gt;\n&lt;Iteration&gt;\n&lt;Iteration_iter-num&gt;1&lt;/Iteration_iter-num&gt;\n&lt;Iteration_query-def&gt;gene_id_1&lt;/Iteration_query-def&gt;\n&lt;Iteration_query-len&gt;37&lt;/Iteration_query-len&gt;\n&lt;Iteration_hits&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;1&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|939543432|gb|KPV42113.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;peptide ABC transporter ATPase, partial [Kouleothrix aurantiaca]&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;KPV42113.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;162&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;58.151&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;139&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-5.6061&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;54&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;90&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;28&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;33&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;LVLCDEPVSALDVSVQAAVLNLLLEIQREHGTTMIFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;+V+CDEPVSALDVSVQAAVLLL+EIQ++HTMII&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;2&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|385280362|gb|EIF44286.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;oligopeptide ABC transporter [gamma proteobacterium BDW918]&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;EIF44286.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;327&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;54.6842&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;130&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-4.56249&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;169&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;205&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;24&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;LVICDEPVSALDVSVQAQIINLLQELQTEHNTAMLFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;+V+CDEPVSALDVSVQA++LLE+Q+HTAM+I&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n&lt;Hit&gt;\n&lt;Hit_num&gt;3&lt;/Hit_num&gt;\n&lt;Hit_id&gt;gi|550913550|ref|WP_022666548.1|&lt;/Hit_id&gt;\n&lt;Hit_def&gt;ABC transporter ATP-binding protein [Desulfospira joergensenii]&lt;/Hit_def&gt;\n&lt;Hit_accession&gt;WP_022666548.1&lt;/Hit_accession&gt;\n&lt;Hit_len&gt;721&lt;/Hit_len&gt;\n&lt;Hit_hsps&gt;\n&lt;Hsp&gt;\n&lt;Hsp_num&gt;1&lt;/Hsp_num&gt;\n&lt;Hsp_bit-score&gt;53.5286&lt;/Hsp_bit-score&gt;\n&lt;Hsp_score&gt;127&lt;/Hsp_score&gt;\n&lt;Hsp_evalue&gt;-4.21462&lt;/Hsp_evalue&gt;\n&lt;Hsp_query-from&gt;1&lt;/Hsp_query-from&gt;\n&lt;Hsp_query-to&gt;37&lt;/Hsp_query-to&gt;\n&lt;Hsp_hit-from&gt;549&lt;/Hsp_hit-from&gt;\n&lt;Hsp_hit-to&gt;585&lt;/Hsp_hit-to&gt;\n&lt;Hsp_query-frame&gt;0&lt;/Hsp_query-frame&gt;\n&lt;Hsp_identity&gt;27&lt;/Hsp_identity&gt;\n&lt;Hsp_positive&gt;31&lt;/Hsp_positive&gt;\n&lt;Hsp_align-len&gt;37&lt;/Hsp_align-len&gt;\n&lt;Hsp_qseq&gt;MVVCDEPVSALDVSVQAAVLTLLVEIQQQHETAMILI&lt;/Hsp_qseq&gt;\n&lt;Hsp_hseq&gt;MVICDEPVSALDVSVQAAVLNLLNEIKEEMGTTMIFI&lt;/Hsp_hseq&gt;\n&lt;Hsp_midline&gt;MV+CDEPVSALDVSVQAAVLLLEI+++TMII&lt;/Hsp_midline&gt;\n&lt;/Hsp&gt;\n&lt;/Hit_hsps&gt;\n&lt;/Hit&gt;\n...\n&lt;/Iteration_hits&gt;\n&lt;Iteration_stat&gt;\n&lt;Statistics&gt;\n&lt;Statistics_db-num&gt;77704984&lt;/Statistics_db-num&gt;\n&lt;Statistics_db-len&gt;28292933896&lt;/Statistics_db-len&gt;\n&lt;Statistics_hsp-len&gt;0&lt;/Statistics_hsp-len&gt;\n&lt;Statistics_eff-space&gt;0&lt;/Statistics_eff-space&gt;\n&lt;Statistics_kappa&gt;0.041&lt;/Statistics_kappa&gt;\n&lt;Statistics_lambda&gt;0.267&lt;/Statistics_lambda&gt;\n&lt;Statistics_entropy&gt;0.14&lt;/Statistics_entropy&gt;\n&lt;/Statistics&gt;\n&lt;/Iteration_stat&gt;\n&lt;/Iteration&gt;\n&lt;/BlastOutput_iterations&gt;\n&lt;/BlastOutput&gt;\n</code></pre>\n\n<p>First trials to write a script gave no results and were disastrous. So I hope someone can help me.</p>\n"}, {"tags": ["perl", "ssl", "jms", "stomp"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5305573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iac8F.jpg?s=128&g=1", "display_name": "djtsheps", "link": "https://stackoverflow.com/users/5305573/djtsheps"}, "is_accepted": false, "score": 0, "last_activity_date": 1478205232, "creation_date": 1478205232, "answer_id": 40410750, "question_id": 35031477, "link": "https://stackoverflow.com/questions/35031477/error-connecting-to-a-jms-topic-broker-via-ssl-using-netstompclient-module-i/40410750#40410750", "title": "Error Connecting to a JMS Topic Broker via SSL using Net::STOMP::Client module in Perl", "body": "<p>I also had some issues using the uri key try the following :</p>\n\n<pre><code>$stomp = Net::STOMP::Client-&gt;new(host =&gt; \"mmx-nprd1-06\", port =&gt; 7222,\n  sockopts =&gt; {\n      # path of the directory containing trusted certificates\n      SSL_ca_path   =&gt; \"$Bin/JmsCertificate/\",\n      # client certificate to present\n      SSL_cert_file =&gt; \"$Bin/JmsCertificate/aix_jms_cert.pem\",\n      # # client private key\n      SSL_key_file  =&gt; \"$Bin/JmsCertificate/aix_jms_key.pem\",\n      # passphrase of the client private key\n      SSL_passwd_cb =&gt; sub { return(\"password\") }, # Leave this out if your key doesn't require a passphrase\n  },\n);\n\n$stomp-&gt;connect(login =&gt; \"aix_jms\", passcode =&gt; \"some_password\");\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 3669003, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1510334485/picture?type=large", "display_name": "Vivek Sharma", "link": "https://stackoverflow.com/users/3669003/vivek-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478205232, "creation_date": 1453880863, "question_id": 35031477, "link": "https://stackoverflow.com/questions/35031477/error-connecting-to-a-jms-topic-broker-via-ssl-using-netstompclient-module-i", "title": "Error Connecting to a JMS Topic Broker via SSL using Net::STOMP::Client module in Perl", "body": "<p>I am trying to connect to a TIBCO JMS Topic Broker with the help of Net::STOMP::Client package in perl.</p>\n\n<p>I am using the SSL approach while creating a new Net::STOMP::Client Object and passing the attributes 'uri' &amp; 'sockopts' where it takes the Topic Uri &amp; SSL Certificate files for Authentication.</p>\n\n<p>When I try to run this script it throws an error saying : -</p>\n\n<p><strong>cannot SSL connect to mmx-nprd1-06:7222: IO::Socket::INET6 configuration failed</strong></p>\n\n<p>Code is give below :-</p>\n\n<pre><code>use Net::Stomp;\nuse Net::STOMP::Client;\n\nuse Moose;\nuse strict;\nuse warnings;\nuse FindBin qw($Bin);\n\nprint \"\\n$Bin\\n\";\n\nmy $stomp; \n\n  $stomp = Net::STOMP::Client-&gt;new(\n      uri =&gt; \"stomp+ssl://mmx-nprd1-06:7222\",\n      sockopts =&gt; {\n          # path of the directory containing trusted certificates\n          SSL_ca_path   =&gt; \"$Bin/JmsCertificate/\",\n          # client certificate to present\n          SSL_cert_file =&gt; \"$Bin/JmsCertificate/aix_jms_cert.pem\",\n          # # client private key\n          SSL_key_file  =&gt; \"$Bin/JmsCertificate/aix_jms_key.pem\",\n          # passphrase of the client private key\n          SSL_passwd_cb =&gt; sub { return(\"password\") },\n      },\n  );\n\n  $stomp-&gt;connect();\n\n  my $peer = $stomp-&gt;peer();\n  printf(\"connected to broker %s (IP %s), port %d\\n\", $peer-&gt;host(), $peer-&gt;addr(), $peer-&gt;port());\n\n  my $sid = $stomp-&gt;uuid();\n  $stomp-&gt;subscribe(\n      destination =&gt; \"/queue/test\",\n      # we use the generated subscription id\n      id          =&gt; $sid,\n      # we want a receipt on our SUBSCRIBE frame\n      receipt     =&gt; $stomp-&gt;uuid(),\n  );\n  my $count = 0;\n  my $frame;\n\n  while ($count &lt; 10) {\n      $frame = $stomp-&gt;wait_for_frames(timeout =&gt; 1);\n      if ($frame) {\n          if ($frame-&gt;command() eq \"MESSAGE\") {\n              $count++;\n              printf(\"received message %d with id %s\\n\",\n                     $count, $frame-&gt;header(\"message-id\"));\n          } else {\n              # this will catch the RECEIPT frame\n              printf(\"%s frame received\\n\", $frame-&gt;command());\n          }\n      } else {\n          print(\"waiting for messages...\\n\");\n      }\n  }\n  $stomp-&gt;unsubscribe(id =&gt; $sid);\n  $stomp-&gt;disconnect();\n</code></pre>\n\n<p>Can Someone help me out with this as I am not able to figure out whats going wrong here.</p>\n"}, {"tags": ["perl", "hash", "key", "dereference", "autovivification"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1453873341, "post_id": 35029084, "comment_id": 57785289, "body": "<a href=\"https://rt.perl.org/Public/Bug/Display.html?id=118983\" rel=\"nofollow noreferrer\">rt.perl.org/Public/Bug/Display.html?id=118983</a>"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1453910073, "last_edit_date": 1453910073, "creation_date": 1453879851, "answer_id": 35031218, "question_id": 35029084, "link": "https://stackoverflow.com/questions/35029084/why-does-autovivification-occur-with-keys-and-not/35031218#35031218", "title": "Why does Autovivification occur with keys() and not %{..}?", "body": "<p>Note that keys can indeed be an lvalue (setting the hash's expected number of elements).</p>\n\n<p>But even if keys itself isn't used in an lvalue context, it has a side effect of resetting a hash's iterator.</p>\n\n<p>So it does modify the hash and so gives the dereference an lvalue context, which makes it autovivify.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453924624, "post_id": 35045133, "comment_id": 57817868, "body": "You&#39;re right about subroutine arguments being lvalues, but <code>keys</code> is an operator, not a subroutine. The argument to <code>keys</code> is treated as an lvalue, but this is not the case for all operators. Compare <code>perl -E&#39;keys %$h; say $h&#39;</code> to <code>perl -E&#39;length %$h; say $h&#39;</code>."}], "tags": [], "owner": {"reputation": 89, "user_id": 3617125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d6abd631dbb694ffb1422b4fffac86?s=128&d=identicon&r=PG&f=1", "display_name": "eric_rookie1", "link": "https://stackoverflow.com/users/3617125/eric-rookie1"}, "is_accepted": false, "score": 0, "last_activity_date": 1453918918, "creation_date": 1453918918, "answer_id": 35045133, "question_id": 35029084, "link": "https://stackoverflow.com/questions/35029084/why-does-autovivification-occur-with-keys-and-not/35045133#35045133", "title": "Why does Autovivification occur with keys() and not %{..}?", "body": "<p>After some research and asking around, I found that this has to do with the fact that <code>$d-&gt;{cd}</code> was passed to a subroutine, not the fact that it was <code>keys</code>. For instance,</p>\n\n<pre><code>% perl -e 'use warnings; use strict; my $d = { \"ab\" =&gt; 1 }; sub foo {}; my @e = foo(%{$d-&gt;{cd}});'\n</code></pre>\n\n<p>This will also autovivify; this is because internally perl needs to be able to set an alias to function arguments.  </p>\n\n<p>Inside <code>foo()</code>, we have an alias set <code>$_[0] = $d-&gt;{cd}</code> But that means <code>$d-&gt;{cd}</code> needs to be lvalue-able, since subroutines in perl assume you can do something like <code>$_[0] = \"123\";</code> so the autovivification needs to happen.</p>\n"}], "owner": {"reputation": 89, "user_id": 3617125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d6abd631dbb694ffb1422b4fffac86?s=128&d=identicon&r=PG&f=1", "display_name": "eric_rookie1", "link": "https://stackoverflow.com/users/3617125/eric-rookie1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1453918918, "creation_date": 1453869938, "last_edit_date": 1453870365, "question_id": 35029084, "link": "https://stackoverflow.com/questions/35029084/why-does-autovivification-occur-with-keys-and-not", "title": "Why does Autovivification occur with keys() and not %{..}?", "body": "<p>This is a subtlety I found with <code>keys()</code>.  </p>\n\n<pre><code>$ perl -e 'use warnings; use strict; my $d = { \"ab\" =&gt; 1 }; my @e = keys(%{$d-&gt;{cd}});'\n\n$ perl -e 'use warnings; use strict; my $d = { \"ab\" =&gt; 1 }; my %e = %{$d-&gt;{cd}};'\nCan't use an undefined value as a HASH reference at -e line 1.\n</code></pre>\n\n<p>I am most puzzled as to why the first snippet would not give an dereferencing error.  When I use <code>Data::Dumper</code>, it becomes clear that in the first snippet, <code>$d-&gt;{cd}</code>, is autovivified to be <code>{}</code>.</p>\n\n<p>Why does <code>keys</code> need to autovivify? I tried reading the <code>perldoc</code> for it, could not find a satisfying answer. <code>keys</code> does not set an alias (<code>$_</code>, etc) so there is no need for perl to think <code>$d-&gt;{cd}</code> needs to be in lvalue context, is there? (I understand if the expression needs to be in lvalue context autovivification happens as explained <a href=\"http://www.effectiveperlprogramming.com/2011/04/understand-autovivification\">here</a>.</p>\n\n<p>A relevant <a href=\"https://stackoverflow.com/questions/6419618/perl-vivification-question-while-dereferencing-undefined-array-reference\">post</a>.</p>\n"}, {"tags": ["perl", "raku"], "comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453866794, "post_id": 35028504, "comment_id": 57783360, "body": "A segmentation fault in C is better than execution continuing as if nothing happened."}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 2, "creation_date": 1453867116, "post_id": 35028504, "comment_id": 57783448, "body": "Perl does what you ask it to do no matter what. It assumes you know what you are asking for, well it doesn&#39;t actually assume anything. It really couldn&#39;t give a flying leap if you do know or wanted what you are asking for it will just give it to you. If you check <code>if defined</code> you don&#39;t have to use exceptions like crutches.  Basically it&#39;s a paradigm shift and being a python developer this article outlines the differences of opinions fairly nicely: <a href=\"http://yosefk.com/blog/what-makes-cover-up-preferable-to-error-handling.html\" rel=\"nofollow noreferrer\">yosefk.com/blog/&hellip;</a>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1453867316, "post_id": 35028504, "comment_id": 57783507, "body": "@scrappedcola thanks for the feedback! I know, you can tell I&#39;m full of Pythonisms but I can&#39;t think of any other language where this wouldn&#39;t cause a crash, simply because there&#39;s no other logical reaction."}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 2, "creation_date": 1453867807, "post_id": 35028504, "comment_id": 57783656, "body": "modeling invalid elements as undefined values and having autovivification certainly makes sense and I don&#39;t see how this is not logical"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1453867888, "post_id": 35028504, "comment_id": 57783682, "body": "@perreal but I asked for something that doesn&#39;t exist! can I at least have a message about its lack of existence or <i>must</i> I check the index exists?"}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1453868076, "post_id": 35028504, "comment_id": 57783744, "body": "something that doesn&#39;t exists is logically not defined"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453870275, "post_id": 35028504, "comment_id": 57784347, "body": "Why <i>-3</i>? Is it a particularly bad question? Why?"}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "edited": false, "score": 2, "creation_date": 1453872624, "post_id": 35028504, "comment_id": 57785040, "body": "@cat: likely because your question is, let&#39;s say, <i>opinionated</i>; returning an undefined value for out of bounds access is a perfectly orthodox choice for a dynamic language (Perl, Ruby, Javascript, Lua, ...)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1453874627, "post_id": 35028504, "comment_id": 57785789, "body": "You phrased this poorly (it reads like a rant more than a question). I think that distracts from your question about why Perl does this, which is a perfectly legitimate question. I would recommend editing out the ranty bits, you&#39;ll probably get better responses that way."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 2, "creation_date": 1453878884, "post_id": 35028504, "comment_id": 57787457, "body": "@cat I&#39;ve edited your question to tone it down. Hopefully the downvotes will stop."}, {"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1453902644, "post_id": 35028504, "comment_id": 57802570, "body": "@raiph Nice editing! Thanks for making this a question that I&#39;m pleased to upvote."}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1454281223, "post_id": 35028504, "comment_id": 57961819, "body": "I would find that very annoying if I had to program in Python."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1454281387, "post_id": 35028504, "comment_id": 57961853, "body": "@BradGilbert under which circumstances is autovivification ever better?"}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1454281522, "post_id": 35028504, "comment_id": 57961897, "body": "<code>my @a; @a[5]&lt;a&gt; = &#39;b&#39;</code>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1454281654, "post_id": 35028504, "comment_id": 57961933, "body": "@BradGilbert I&#39;m not entirely sure what on earth that actually does having tested it but why do you want to do this with an empty list?"}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1454282101, "post_id": 35028504, "comment_id": 57962037, "body": "<code>my @lengths; for @words { push @lengths[ .chars ], $_ }</code> Would you want to have to check if you already found one of at least that length, or find out the longest one before you start?"}], "answers": [{"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453870321, "post_id": 35029130, "comment_id": 57784362, "body": "if that&#39;s how it goes, that&#39;s how it goes, I guess."}], "tags": [], "owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "is_accepted": true, "score": 11, "last_activity_date": 1453870210, "creation_date": 1453870210, "answer_id": 35029130, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception/35029130#35029130", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<p>Perl 6 has shaped arrays to enforce array bounds on simple or multidimensional arrays.</p>\n\n<p>From <a href=\"https://design.perl6.org/S09.html#Multidimensional_arrays\" rel=\"noreferrer\">S09</a>:</p>\n\n<pre><code>my int @ints[4;2];          # Valid indices are 0..3 ; 0..1\nmy @calendar[12;31;24];     # Valid indices are 0..11 ; 0..30 ; 0..23\n</code></pre>\n\n<p>Some more examples:</p>\n\n<pre><code>use v6;\n# declare an array with four elements\nmy @l[4] = (1..4);\ntry { @l.push: 42}\nsay @l;\n# [1 2 3 4]\n</code></pre>\n\n<p>These can be multi-dimensional </p>\n\n<pre><code>my @tic_tac_toe[3;3] = &lt;x o x&gt;, &lt;o . o&gt;, &lt; x o x&gt;;\n@tic_tac_toe[1;1] = \"x\";      # ok\ntry @tic_tac_toe[3][3] = \"o\"; # illegal\nsay @tic_tac_toe;\n# [[x o x] [o x o] [x o x]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 5, "creation_date": 1453870590, "post_id": 35029177, "comment_id": 57784445, "body": "&quot;Don&#39;t try to adapt a language to your ideas&quot; sorry, the reason I program is to adapt the computer to my ideas, and the reason I think Perl 6 is cool is because it is malleable and adapts to my ideas."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1453870687, "post_id": 35029177, "comment_id": 57784477, "body": "@cat: &quot;...the main idea is a shared flaw/feature of both 5 and 6.&quot; - obviously you are complaining about the language and don&#39;t adapt to the ideas of the language. What you consider a flaw others consider a feature."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453870817, "post_id": 35029177, "comment_id": 57784528, "body": "I only added that comment because of <a href=\"http://meta.stackoverflow.com/questions/315419/should-perl6-questions-be-tagged-with-the-perl-tag-as-well\">this thing</a> and because I genuinely wasn&#39;t sure whether this behaviour was intentional, a bug or if I was screwing up."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 2, "creation_date": 1453870900, "post_id": 35029177, "comment_id": 57784550, "body": "@cat: in this case it would have been more wise to ask nicely for somebody to explain the concepts instead of complain loudly with &quot;.. to be completely stupid..&quot; etc."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": -1, "last_activity_date": 1453870478, "creation_date": 1453870478, "answer_id": 35029177, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception/35029177#35029177", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<blockquote>\n  <p>which is almost always what I want.</p>\n</blockquote>\n\n<p>Please don't try to adapt a language to your ideas, but adapt your ideas to the language. If you are not willing to do this use another language which fits your ideas. It is a bad idea trying to write Java-style code in Perl same as it would be to write Perl-style code in Java.</p>\n"}, {"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453916608, "post_id": 35041368, "comment_id": 57812951, "body": "<code>Don&#39;t know how to &#39;no autovivification&#39; just yet</code>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453916658, "post_id": 35041368, "comment_id": 57812987, "body": "This seems like the perfect answer, if Rakudo knew how to <code>no autovivificate</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 2, "creation_date": 1453916763, "post_id": 35041368, "comment_id": 57813066, "body": "I wasn&#39;t aware that Rakudo could run Perl5."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453916920, "post_id": 35041368, "comment_id": 57813182, "body": "Sorry, I wasn&#39;t aware that bit was specific to 5."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1453916815, "last_edit_date": 1453916815, "creation_date": 1453908373, "answer_id": 35041368, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception/35041368#35041368", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<p>[Since you asked for both a Perl5 and a Perl6 answer, but you only got a Perl6 answer, here's a Perl5 answer.]</p>\n\n<p>You could write an op checker that replaces the indexing ops with ones that check bounds (in the same way that <code>no autovivification;</code> replaces dereferencing ops with versions that don't autovivify.)</p>\n"}, {"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1454018262, "post_id": 35072643, "comment_id": 57868762, "body": "Cool! this is more what I was looking for! Now, can I, for instance, define a type that inherits from <code>List</code> and which defaults to <code>Failure.new(&quot;IndexError&quot;)</code> so I just have to write <code>my SafeList @a;</code> instead?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5854207"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 3, "creation_date": 1454021453, "post_id": 35072643, "comment_id": 57870357, "body": "I added a subclass to Array. I do not claim to know what I am doing. This will most likely blow in your face as soon as you use infinite lists and/or promises (that are infinite lists until they are not). That you can bend Perl 6 to your will does not mean it wont bite you."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 3, "creation_date": 1454022136, "post_id": 35072643, "comment_id": 57870641, "body": "I have read and hereby accept all terms of the Unpredictable Software User License Agreement"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5854207"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1454075204, "post_id": 35072643, "comment_id": 57893695, "body": "The lack of stacktrace is actually a bug. It&#39;s even in the instance of Failure, just not displayed."}, {"owner": {"reputation": 4159, "user_id": 804005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03be16b1311b73194e81ab62c3c8c241?s=128&d=identicon&r=PG", "display_name": "timotimo", "link": "https://stackoverflow.com/users/804005/timotimo"}, "edited": false, "score": 0, "creation_date": 1454295538, "post_id": 35072643, "comment_id": 57965332, "body": "The NonvivArray won&#39;t allow you to hold any undefined values. It&#39;d be better if it checked for EXISTS-POS instead of working just with the return value of AT-POS."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5854207"}, "is_accepted": false, "score": 9, "last_activity_date": 1471188300, "last_edit_date": 1471188300, "creation_date": 1454017351, "answer_id": 35072643, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception/35072643#35072643", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<p>This will do what you want.</p>\n\n<pre><code>my @a is default(Failure.new('IndexError'));\n@a[0] = 1;\nsay @a[1];\nsay 'alive';\n\noutput:\n\n===SORRY!===\nIndexError\n</code></pre>\n\n<p>If you want a stacktrace you either have to run <code>perl6 --ll-exception</code> or create your own container with <code>Proxy</code>. (This is a bug, reported as: <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=127414\" rel=\"nofollow\">RT#127414</a>)</p>\n\n<pre><code>see: https://doc.perl6.org/type/Failure\nsee: https://doc.perl6.org/routine/is%20default\nsee: https://perl6advent.wordpress.com/2015/12/02/day-2-2-bind-or-2-bind/\n</code></pre>\n\n<p>Oh, and please don't listen to the naysayers who want to tell you to adapt to Perl 6. The whole point of Perl 6 is that you can mend it and bend it to your will.</p>\n\n<pre><code>class NonvivArray is Array {\n    multi method AT-POS(NonvivArray:D: Int:D $pos) is raw {\n        say 'foo';\n        my $val = callsame;\n        X::OutOfRange.new(got=&gt;$pos, range=&gt;0..self.elems-1).throw unless $val;\n        $val;\n    }\n\n    multi method AT-POS(NonvivArray:D: int $ipos) is raw {\n        say 'foo';\n        my $val = callsame;\n        X::OutOfRange.new(got=&gt;$ipos, range=&gt;0..self.elems-1).throw unless $val;\n        $val;\n    }\n}\n\nmy NonvivArray $a;\n$a.push: 1;\ndd $a;\nsay $a[1];\n</code></pre>\n\n<p>There is more then two ways to do it. Here is the third.</p>\n\n<pre><code>try { \n    my Int:D @a; \n    say @a[0]; \n    CATCH { default { say .^name } } \n}\n# OUTPUT\u00abX::Method::NotFound\u2424\u00bb\n</code></pre>\n\n<p>One can argue that the exception thrown is LTA or that this should actually be special cased. However, it does what the OP asked for without fiddling with implementation details of <code>Array</code> as implemented by Rakudo.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1454313930, "creation_date": 1454313930, "answer_id": 35125604, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception/35125604#35125604", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<p>You can get inspired by <a href=\"http://p3rl.org/Acme::Array::MaxSize\" rel=\"nofollow\">Acme::Array::MaxSize</a> - i.e. you can use <a href=\"http://p3rl.org/Tie::Array\" rel=\"nofollow\">Tie::Array</a> to intercept the array operations.</p>\n"}], "owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 1, "accepted_answer_id": 35029130, "answer_count": 5, "score": 6, "last_activity_date": 1576091001, "creation_date": 1453866385, "last_edit_date": 1576091001, "question_id": 35028504, "link": "https://stackoverflow.com/questions/35028504/can-i-please-have-an-arrayoutofboundsexception", "title": "Can I please have an ArrayOutOfBoundsException?", "body": "<p>In Python, if you index a collection structure with a out-of-bounds key/index, you get a slap in the face:</p>\n\n<pre><code>&gt;&gt;&gt; [1, 2, 3][9]\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIndexError: list index out of range\n</code></pre>\n\n<p>That's an Exception; it derives from BaseException, and failing to handle one will <strong>crash my program, which is almost always what I want</strong>.</p>\n\n<hr>\n\n<p>Perl 5 and 6's list indexing seems to not care about out-of-bounds indexing:</p>\n\n<pre><code>$ perl6\n&gt; my @l = (1..4);\n[1 2 3 4]\n&gt; say @l[2];\n3\n&gt; say @l[9];\n(Any)\n&gt; print @l[9];                                                                                                          \nUse of uninitialized value @l of type Any in string context\n&lt;snip&gt;    \nTrue\n&gt; my $x = @l[9]; # even assignment doesn't error! who decided this was okay!?\n&gt; say $x; print $x;\n(Any)\nUse of uninitialized value $x of type Any in string context\n&lt;snip&gt;    \n</code></pre>\n\n<p><sup>it's basically the same thing in Perl 5, except you don't get a value returned, but execution continues as normal.</sup></p>\n\n<p>I don't understand why out-of-bounds accessing should ever be <strong>silent</strong>. The only warnings you get that value may be \"uninitialised\" (but we all know it really means <strong>non-existent</strong>) are when you give it to certain functions.</p>\n\n<p>Can I fix this somehow? I could implement my own post-circumfix indexing operator to override the default one that dies on junk index, but there's no way to tell the difference between an uninitialised value and the type <code>Any</code>. The only way to do that <em>I</em> can see is to check if the requested index is in the range <code>List.elems()</code>.</p>\n\n<p>What (preferably minimal, simple, clean, readable, etc) solution can I use to remedy this?</p>\n\n<hr>\n\n<p>Before anyone says \"yes, but the variable is uninitialised, like <code>my $x;</code>!\": in C you get a segfault if you access memory you didn't allocate; why can't I have that sort of safety?</p>\n\n<hr>\n\n<p>I've tagged this as both Perl and Perl 6 because, while I'm learning Perl 6 and the particulars of this question apply mostly to 6, the main idea seems to be a shared aspect of both 5 and 6.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3712656, "user_type": "registered", "profile_image": "https://graph.facebook.com/544123725/picture?type=large", "display_name": "Matt.0", "link": "https://stackoverflow.com/users/3712656/matt-0"}, "edited": false, "score": 0, "creation_date": 1453873163, "post_id": 35027939, "comment_id": 57785231, "body": "Thank you very much Ikegami! Your answer works great.   So just to be clear, the <code>(.*)</code> captures as many character in the ASCII table following <code>Scaffold</code>. My <i>error</i> was including the <code>.+</code> after if as this works sort of like a <b>subtraction</b>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1453887949, "post_id": 35027939, "comment_id": 57792542, "body": "<code>.+</code> means match one or more of any character. The regex is invalid if it can&#39;t, so it backtracks a bit - takes one character from the load matched by the <code>.*</code> and lets <code>.+</code> match it instead."}, {"owner": {"reputation": 11, "user_id": 3712656, "user_type": "registered", "profile_image": "https://graph.facebook.com/544123725/picture?type=large", "display_name": "Matt.0", "link": "https://stackoverflow.com/users/3712656/matt-0"}, "edited": false, "score": 0, "creation_date": 1453927658, "post_id": 35027939, "comment_id": 57819565, "body": "Thank you for helping me understand that in greater depth. I really appreciate it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1453862918, "creation_date": 1453862918, "answer_id": 35027939, "question_id": 35027884, "link": "https://stackoverflow.com/questions/35027884/regular-expression-issue-cat/35027939#35027939", "title": "Regular Expression Issue - cat", "body": "<p>The first problem is that <code>\\.</code> only matches a period (<code>.</code>). You want to use it unescaped. <code>\\d+</code> would also be fine.</p>\n\n<p>The second problem is that the <code>.+</code> is forcing the <code>.*</code> to match one less character than it would otherwise. Get rid of it.</p>\n\n<pre><code>perl -pe's/^&gt;Scaffold(.*)/Scaffold$1\\tisogroup$1/' test.fasta &gt;output.tab\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3712656, "user_type": "registered", "profile_image": "https://graph.facebook.com/544123725/picture?type=large", "display_name": "Matt.0", "link": "https://stackoverflow.com/users/3712656/matt-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453872664, "creation_date": 1453862490, "last_edit_date": 1453872664, "question_id": 35027884, "link": "https://stackoverflow.com/questions/35027884/regular-expression-issue-cat", "title": "Regular Expression Issue - cat", "body": "<p>Given an input file that looks like this:</p>\n\n<pre><code>&gt;Scaffold1\nAACTGTGCCTATTTGGGCATCCGTCAGGAAAATATTGTCGCCCTCGGTGCATAAACCCATCGGCTGACCAAAGGCTGCAAAGCTGCCAGAACCGTTCCTGTTTCCTTCTTCTCCGGTACCAGCAATGACTGTAACAGTGCCGTTTCTGTCAAGGTGCATTACTTGACGCCTTGTCTGGTCGGTGAAAGCTACTTTCCCGTCTGAAAGTGGGGCAACTGCCTGTATACCGGAACTTGCTTGCCCTGCATCAGCCATGGCGTACTCTTTCACCTCCTGATTTGTTATTTTGACTTTGGTGATGCCTTTGTTGTGTGCCATAACAAGATATCCATCGGTAGATAAGCACATGCTTCGAACCTTACCTCATAGCGGTGTAAAATCACAAAACTTAGTGACTGTT\n&gt;Scaffold2\nCTTTATAGAGTTTATCGATATCATGGCCGTACAAAGAAGCGCTTAATTTCTAAGGTCATCTTAGAAGCTTCGTAAACACACATTAATGTTAATGAGCTTCCTCGCCTGACAGCATCCTCGCTGCAGGACCCAACAGTGGAGGGGAAGCGGCACAGACCTTGAGGTATGGGTGCGTATGGGTGCACAATGACCTAATACGTGAATATTGATCAAATTCTAAAAAGTTACCATGAATTGAGTGTTTATTCGTATAGGGTGTTTCCTCTCAAACACGGCACCGTTATAAAACAAACAATTTCAGTTCAAATAGTTAAAAAGC\n&gt;Scaffold3\nTGTTGCTTTTTCTCCTTGGTGGATGCTGCAGTTACAGACTTTCTTTTCCGGCAACAATTTAAATAATGTTCTGTGGAAAAAACGACATGTAATTATTTTGATTCGAGGTCAAACGTTGACCCAGTATTTAGTCCAGTATGACTAATTATCAATACTTTAACAAATTTACGTCATTTCTTCATGCGTCTGTCCTGTTATTGTTCATGAATTTCGTCAAAACATTGTCCGCAGACTGCTTG\n</code></pre>\n\n<p>I desire output that looks like this:</p>\n\n<pre><code>Scaffold1        isogroup1\nAACTGTGCCTATTTGGGCATCCGTCAGGAAAATATTGTCGCCCTCGGTGCATAAACCCATCGGCTGACCAAAGGCTGCAAAGCTGCCAGAACCGTTCCTGTTTCCTTCTTCTCCGGTACCAGCAATGACTGTAACAGTGCCGTTTCTGTCAAGGTGCATTACTTGACGCCTTGTCTGGTCGGTGAAAGCTACTTTCCCGTCTGAAAGTGGGGCAACTGCCTGTATACCGGAACTTGCTTG\nScaffold2        isogroup2\nCTTTATAGAGTTTATCGATATCATGGCCGTACAAAGAAGCGCTTAATTTCTAAGGTCATCTTAGAAGCTTCGTAAACAACACATTAATGTTAATGAGCTTCCTCGCCTGACAGCATCCTCGCTGCAGGACCCAACAGTGGAGGGGAAGCGGCACAGACCTTGAGGTATGGGTGCGTATGGGTGCACAATGACCTAATACGTGAATATTGATCAAATTCTAAAAAGTTACCATGAATTGAGTGTTTATTCGTATAGGGTGTTTCCTCTCAAACACGGCACCGTTATAAAACAAACAATTTCAGTTCAAATAGTTAAAAAGC\nScaffold3        isogroup3\nTGTTGCTTTTTCTCCTTGGTGGATGCTGCAGTTACAGACTTTCTTTTCCGGCAACAATTTAAATAATGTTCTGTGGAAAAAACGACATGTAATTATTTTGATTCGAGGTCAAACGTTGACCCAGTATTTAGTCCAGTATGACTAATTATCAATACTTTAACAAATTTACGTCATTTCTTCATGCGTCTGTCCTGTTATTGTTCATGAATTTCGTCAAAACATTGTCCGCAGACTGCTTG\n</code></pre>\n\n<p>I can't quite seem to figure out the regular expression to make this work.</p>\n\n<p>1st I tried: </p>\n\n<pre><code>cat test.fasta | perl -pe  's/&gt;Scaffold(\\.*).+/Scaffold$1$2\\tisogroup$1/' &gt;transcriptome_seq2iso.tab\n</code></pre>\n\n<p>But this just outputs:</p>\n\n<pre><code>Scaffold        isogroup\nAACTGTGCCTATTTGGGCATCCGTCAGGAAAATATTGTCGCCCTCGGTGCATAAACCCATCGGCTGACCAAAGGCTGCAAAGCTGCCAGAACCGTTCCTGTTTCCTTCTTCTCCGGTACCAGCAATGACTGTAACAGTGCCGTTTCTGTCAAGGTGCATTACTTGACGCCTTGTCTGGTCGGTGAAAGCTACTTTCCCGTCTGAAAGTGGGGCAACTGCCTGTATACCGGAACTTGCTTGCCCTGCATCAGCCATGGCGTACTCTTTCACCTCCTGATTTGTTATTTTGACTTTGGTGATGCCTTTGTTGTGTGCCATAA\nScaffold        isogroup\nCTTTATAGAGTTTATCGATATCATGGCCGTACAAAGAAGCGCTTAATTTCTAAGGTCATCTTAGAAGCTTCGTAAACACACATTAATGTTAATGAGCTTCCTCGCCTGACAGCATCCTCGCTGCAGGACCCAACAGTGGAGGGGAAGCGGCACAGACCTTGAGGTATGGGTGCGTATGGGTGCACAATGACCTAATACGTGAATATTGATCAAATTCTAAAAAGTTACCATGAATTGAGTGTTTATTCGTATAGGGTGTTTCCTCTCAAACACGGCACCGTTATAAAACAAACAATTTCAGTTCAAATAGTTAAAAAGC\nScaffold        isogroup\nTGTTGCTTTTTCTCCTTGGTGGATGCTGCAGTTACAGACTTTCTTTTCCGGCAACAATTTAAATAATGTTCTGTGGAAAAAACGACATGTAATTATTTTGATTCGAGGTCAAACGTTGACCCAGTATTTAGTCCAGTATGACTAATTATCAATACTTTAACAAATTTACGTCATTTCTTCATGCGTCTGTCCTGTTATTGTTCATGAATTTCGTCAAAACATTGTCCGCAGACTGCTTG\n</code></pre>\n\n<p>Next I thought I could use <code>(\\d+)</code> in the place of <code>(\\.*)</code> as character <code>\\d</code> can be used in place of any digit from 0 to 9. The <code>+</code> means one or more repitions.  However the output looks like:</p>\n\n<pre><code>&gt;Scaffold1\nAACTGTGCCTATTTGGGCATCCGTCAGGAAAATATTGTCGCCCTCGGTGCATAAACCCATCGGCTGACCAAAGGCTGCAAAGCTGCCAGAACCGTTCCTGTTTCCTTCTTCTCCGGTACCAGCAATGACTGTAACAGTGCCGTTTCTGTCAAGGTGCTTACTTGACGCCTTGTCTGGTCGGTGAAAGCTACTTTCCCGTCTGAAAGTGGGGCAACTGCCTGTATACCGGAACTTGCTG\n&gt;Scaffold2\nCTTTATAGAGTTTATCGATATCATGGCCGTACAAAGAAGCGCTTAATTTCTAAGGTCATCTTAGAAGCTTCGTAAACACACATTAATGTTAATGAGCTTCCTCGCCTGACAGCATCCTCGCTGCAGGACCCAACAGTGGAGGGGAAGCGGCACAGACCTTGAGGTATGGGTGCGTATGGGTGCACAATGACCTAATACGTGAATATTGATCAAATTCTAAAAAGTTACCATGAATTGAGTGTTTATTCGTATAGGGTGTTTCCTCTCAAACACGGCACCGTTATAAAACAAACAATTTCAGTTCAAATAGTTAAAAAGC\n&gt;Scaffold3\nTGTTGCTTTTTCTCCTTGGTGGATGCTGCAGTTACAGACTTTCTTTTCCGGCAACAATTTAAATAATGTTCTGTGGAAAAAACGACATGTAATTATTTTGATTCGAGGTCAAACGTTGACCCAGTATTTAGTCCAGTATGACTAATTATCAATACTTTAACAAATTTACGTCATTTCTTCATGCGTCTGTCCTGTTATTGTTCATGAATTTCGTCAAAACATTGTCCGCAGACTGCTTG\n</code></pre>\n\n<p>Can anyone suggest why this is not working and what a work around would be?</p>\n"}, {"tags": ["python", "perl", "time"], "comments": [{"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1453860260, "post_id": 35027488, "comment_id": 57781402, "body": "Where does <code>::strftime</code> come from?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1453862480, "post_id": 35027488, "comment_id": 57782050, "body": "@cuonglm, It&#39;s surely an alias to <code>POSIX::strftime</code>. As a whole, it returns the current local time in the specified format."}, {"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453862694, "post_id": 35027488, "comment_id": 57782108, "body": "@ikegami: Yes, I know <code>POSIX::strftime</code>, but not sure how can it be used like that, It confused me, why don&#39;t the OP use <code>return POSIX::strftime( ... )</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 2, "creation_date": 1453862798, "post_id": 35027488, "comment_id": 57782147, "body": "@cuonglm, <code>::foo</code> is the same as <code>main::foo</code>. Simply using <code>use POSIX;</code> from the main namespace will create <code>::strftime</code>."}, {"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453863321, "post_id": 35027488, "comment_id": 57782296, "body": "@ikegami: ... And also any user defined function in main namespace, too. And which one defined last will overwrite the other. Just want to notice the OP what confusion this code can be."}], "answers": [{"comments": [{"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1453859865, "post_id": 35027502, "comment_id": 57781303, "body": "then just supply time.time() to the function?"}, {"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1453859880, "post_id": 35027502, "comment_id": 57781310, "body": "or does python have localtime built-in?"}, {"owner": {"reputation": 11620, "user_id": 386221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f91ca8acbec85001364d635c044dee9?s=128&d=identicon&r=PG", "display_name": "Derek Kwok", "link": "https://stackoverflow.com/users/386221/derek-kwok"}, "reply_to_user": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1453859916, "post_id": 35027502, "comment_id": 57781320, "body": "python has a class called <code>datetime</code>. You can do<code>datetime.now()</code> to get current time. See <a href=\"https://docs.python.org/2/library/datetime.html#datetime-objects\" rel=\"nofollow noreferrer\">docs.python.org/2/library/datetime.html#datetime-objects</a>"}], "tags": [], "owner": {"reputation": 11620, "user_id": 386221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f91ca8acbec85001364d635c044dee9?s=128&d=identicon&r=PG", "display_name": "Derek Kwok", "link": "https://stackoverflow.com/users/386221/derek-kwok"}, "is_accepted": true, "score": 1, "last_activity_date": 1453860053, "last_edit_date": 1453860053, "creation_date": 1453859838, "answer_id": 35027502, "question_id": 35027488, "link": "https://stackoverflow.com/questions/35027488/python-equivalent-of-perl-timestamp/35027502#35027502", "title": "Python equivalent of perl timestamp", "body": "<p>I believe this would be the equivalent in python:</p>\n\n<pre><code>from datetime import datetime\n\ndef print_ts():\n    return datetime.now().strftime('%Y%m%d %H:%M:%S')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2519, "user_id": 3291269, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UaV3Z.png?s=128&g=1", "display_name": "Jacky1205", "link": "https://stackoverflow.com/users/3291269/jacky1205"}, "is_accepted": false, "score": 1, "last_activity_date": 1453859964, "creation_date": 1453859964, "answer_id": 35027521, "question_id": 35027488, "link": "https://stackoverflow.com/questions/35027488/python-equivalent-of-perl-timestamp/35027521#35027521", "title": "Python equivalent of perl timestamp", "body": "<pre><code>from datetime import datetime\n\ndef print_ts():\n    return datetime.now().strftime('%Y%m%d %H:%M:%S')\n</code></pre>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 35027502, "answer_count": 2, "score": 2, "last_activity_date": 1453860053, "creation_date": 1453859746, "question_id": 35027488, "link": "https://stackoverflow.com/questions/35027488/python-equivalent-of-perl-timestamp", "title": "Python equivalent of perl timestamp", "body": "<p>I have a function in perl:</p>\n\n<pre><code>sub print_ts {\n    return ::strftime( '%Y%m%d %H:%M:%S', localtime);\n}\n</code></pre>\n\n<p>What would be python equivalent of that?</p>\n"}, {"tags": ["perl", "hash", "associative-array"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453857175, "post_id": 35026952, "comment_id": 57780480, "body": "What is your specific question? It looks like you&#39;re struggling with the input, the output, and everything in between. Short of doing the entire assignment for you, how can I be of assistance?"}, {"owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453857376, "post_id": 35026952, "comment_id": 57780550, "body": "&quot;write a Perl program that will allow the user to read some data from a file, and then give the user the option of modifying the price of an item, and then store the information back to a file that can be read again later. &quot;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453857596, "post_id": 35026952, "comment_id": 57780638, "body": "Again, I&#39;m not going to do the entire thing for you, so what, specifically, would you like help with?"}, {"owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453857805, "post_id": 35026952, "comment_id": 57780709, "body": "my issue is that I feel I have the parts here but I am not putting them together properly, like how do I get the input after the file prints. I need inputs to change the list that was opened."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1453865975, "post_id": 35026952, "comment_id": 57783126, "body": "You would be able to use <a href=\"https://metacpan.org/pod/Storable\" rel=\"nofollow noreferrer\">Storable</a> which was first released with perl v5.7.3  You would need &#39;store&#39; and &#39;retrieve&#39;. There is an example using them at the top of the description."}, {"owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "edited": false, "score": 0, "creation_date": 1453866441, "post_id": 35026952, "comment_id": 57783263, "body": "I am not sure if my professor would let us do that, I have been working on it and I came up with a way to read the file turn the text in the file into a hash but I am having trouble making it so the user can change the hash from the file."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453874092, "post_id": 35026952, "comment_id": 57785584, "body": "The code you posted won&#39;t even compile, so I&#39;m still unsure what exactly you need help with. If you have some different, working code now, you should update your question with the changes."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1453896526, "post_id": 35026952, "comment_id": 57798260, "body": "For a start try adding <code>use strict;</code> and <code>use warnings;</code> to your code and fixing all of the problems they reveal."}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1454258987, "last_edit_date": 1454258987, "creation_date": 1454257352, "answer_id": 35116120, "question_id": 35026952, "link": "https://stackoverflow.com/questions/35026952/perl-file-writing-and-reading-using-hashes-or-associative-arrays/35116120#35116120", "title": "Perl File Writing and Reading using Hashes or Associative Arrays", "body": "<p>Ok, I don't want to be mean. I remember the days I learned perl and saw a co-worker's script. He said <em>\"It took me 1/2 an hour to write that single line, so it's ok if it takes you 1/2 an hour to read it.\"</em>.\nPerl can be quite hard to read, so I kept the code simple.</p>\n\n<p>Suppose this is your input file, say <code>menu.txt</code>:</p>\n\n<pre><code>Hamburgers - 1.79\nCheeseburgers - 2.00\nFries - 1.50\n</code></pre>\n\n<p>You can read it like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %menu;\nopen(my $input, \"&lt;menu.txt\" ) || or die \"cannot open menu.txt: $!\\n\";\nwhile( my $line = &lt;$input&gt; ) {\n    chomp($line);\n    my ($item, $price) = split( / - /, $line );\n    $menu{$item} = $price;\n} \nclose($input);\n</code></pre>\n\n<p>Now you have the hash <code>%menu</code> filled with the menu, \ni.e. <code>$menu{'Hamburgers'}</code> is <code>1.79</code> and so on.</p>\n\n<p>How to change these values is left as an excercise. ;-)    </p>\n\n<p>After you have changed the values you can write them back to the (same or another) file:    </p>\n\n<pre><code>open(my $output, \"&gt;new-menu.txt\" ) || or die \"cannot open new-menu.txt: $!\\n\";\nforeach my $item ( keys %menu ) {\n    print $output \"$item - $menu{$item}\\n\";\n} \nclose($output);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1198, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1454258987, "creation_date": 1453856289, "question_id": 35026952, "link": "https://stackoverflow.com/questions/35026952/perl-file-writing-and-reading-using-hashes-or-associative-arrays", "title": "Perl File Writing and Reading using Hashes or Associative Arrays", "body": "<p>So I am working on this homework assignment and we have to read a text file of menu items in this case the text file reads -\nHamburgers - 1.79\nCheeseburgers - 2.00\nFries - 1.50\nI need to be able to print out the text in the file and then take input to change the prices while putting them in an associative array or hash. I am honestly pretty suck at the moment here is what I have. I know about > means to write the file but I was not sure if it should be used since I want to view the original files first.</p>\n\n<pre><code>#!/usr/bin/perl\nopen(FH, \"gp1data.txt\") || die(\"Cannot open the file.\");\nprint \"$_\";\nwhile (&lt;FH&gt;){\n    print \"$_\";\n}\nmy %menu;\nwhile (my $line2 = &lt;$prices&gt;) {\n    chomp $line2;\n    my @row = split(/-/, $line2);\n    $menu{$row[0]} = $row[1];\n}\n\n&lt;&gt;;\n</code></pre>\n\n<p>What I am thinking is that the file gets opened and then prints whats in the file then I should be able to take what is printed and put it through the while loop while making it into a hash. </p>\n\n<p>I wrote an associative array that contains what is in the text file to try using it in my code I have had no luck so far. here is the array I wrote.</p>\n\n<pre><code>%x = (\"Hamburger\" =&gt; 1.50, =&gt; \"Cheeseburger\" 2.00, \"Fries\" =&gt; 1.79);\n$x[0] = \"Hamburger 1.50\";\n$x[1] = \"Cheeseburger 2.00\";\n$x[2] = \"Fries 1.79\";\nfor ($i=0; $i&lt;3; $i++)\n{\n   $x[$i] =~ /-/;       \n   $before = $`;          \n   $after  = $';          \n   $x{$before} = $after;  \n}\nforeach $item (keys %x)\n{\n    print \"A $item costs \\$$x{$item}\\n\"\n}\n&lt;&gt;;\n</code></pre>\n\n<p>What this does is it prints what comes before the \"-\" and after \"-\" so you can see what is being sold and how much. Below is the exact problem word for word I was given.</p>\n\n<p>\"write a Perl program that will allow the user to read some data from a file, and then give the user the option of modifying the price of an item, and then store the information back to a file that can be read again later. \"</p>\n"}, {"tags": ["linux", "perl", "nfs"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1453886690, "post_id": 35026752, "comment_id": 57791658, "body": "This is an ugly thing to do. What are you actually trying to accomplish? It is likely there is a much better way. NFS caches by design for efficiency. Non-cached filesystem IO can be done, but it&#39;s a lot slower than you might imagine. Usually, the answer is - try doing it a different way."}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1454030102, "post_id": 35026752, "comment_id": 57873251, "body": "@Sobrique, I am not looking for ways to disable NFS cache or recache for all files, just for a few important files in program, for the the particular file in a particular directory. I cannot think of an alternative ways to accomplish this. I can only offer this much for the reputation I have so far. thanks for your attention"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1454042067, "post_id": 35026752, "comment_id": 57876276, "body": "Here&#39;s <a href=\"http://serverfault.com/q/278349/131167\">a more straightforward approach</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1454052534, "post_id": 35026752, "comment_id": 57880094, "body": "My point is, this may be an XY problem. Something that is best solved by taking s step back and looking at what you are trying to accomplish"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 2, "creation_date": 1454053169, "post_id": 35026752, "comment_id": 57880374, "body": "You <i>might</i> be able to use <code>sysopen</code> with <code>O_RDWR|O_CREAT|O_EXCL</code> to force NFS cache refresh - if the call succeeds then the file didn&#39;t exist (but not all NFS implementations handle O_EXCL correctly). I used such technique in python (I&#39;m NULL at perl). See my answer to <a href=\"http://stackoverflow.com/questions/29979624/can-i-prevent-a-script-from-launching-twice-using-open2-with-o-creat-and-flock/29986073#29986073\" title=\"can i prevent a script from launching twice using open2 with o creat and flock\">stackoverflow.com/questions/29979624/&hellip;</a>"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1454113221, "post_id": 35026752, "comment_id": 57914523, "body": "@DanCornilescu, are you sure <code>sysopen</code> can open a file that <code>-e $file</code> does not exist?"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 1, "creation_date": 1454125236, "post_id": 35026752, "comment_id": 57916963, "body": "yes, trying to <i>write</i> the file will make the NFS client contact the server right away, while <code>-e $file</code>, being a read operation, will likely use the cache."}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1454199915, "post_id": 35026752, "comment_id": 57938728, "body": "@DanCornilescu, I changed to include python, a python answer is fine with me."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1454262759, "post_id": 35026752, "comment_id": 57954748, "body": "Perhaps this is worth a try: <a href=\"http://unix.stackexchange.com/a/207383\">unix.stackexchange.com/a/207383</a>. He does an <code>opendir&#47;closedir</code> on the parent directory."}], "answers": [{"comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1454540576, "post_id": 35162336, "comment_id": 58096055, "body": "The answer is good enough for me, I will just check the exit code of the writing function, it the exit code of out of reach, I will just leave as is, waiting systems to be updated. Thanks"}], "tags": [], "owner": {"reputation": 18991, "user_id": 319204, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ac798dda7d9e0f89955e82961156912?s=128&d=identicon&r=PG", "display_name": "TheCodeArtist", "link": "https://stackoverflow.com/users/319204/thecodeartist"}, "is_accepted": true, "score": 15, "last_activity_date": 1454446212, "last_edit_date": 1492085627, "creation_date": 1454441757, "answer_id": 35162336, "question_id": 35026752, "link": "https://stackoverflow.com/questions/35026752/howto-force-refresh-nfs-cache-when-checking-newly-created-file/35162336#35162336", "title": "howto force refresh NFS cache when checking newly created file?", "body": "<p><sub>\nThis solution belongs to the <strong>Category B : exit_code or return code of writing function</strong>  </p>\n\n<blockquote>\n  <p>...only <code>open()</code> and <code>fopen()</code> need to guarantee that they get a consistent handle to a particular file for reading and writing. <code>stat</code> and friends are not required to retrieve fresh attributes. Thus, for the sake of <strong>close-to-open cache coherence</strong>, only <code>open()</code> and <code>fopen()</code> are considered an \"open event\" where fresh attributes need to be fetched immediately from the server<sup><a href=\"http://www.citi.umich.edu/projects/nfs-perf/results/cel/dnlc.html\" rel=\"noreferrer\">[1]</a></sup>.</p>\n</blockquote>\n\n<hr>\n\n<p></sub>\n<sub>\nThe following solutions belong to the <strong>Category A : NFS clients setting</strong><br>\n<em>i.e. if you do NOT expect cached file/dir entries to be served to the client, disable caching.</em>\n</sub></p>\n\n<h3>Setup a shared cache</h3>\n\n<blockquote>\n  <p>If the file in the NFS mount (whose existence is being checked) is created by another application on the same client (possibly using another mount point to the same NFS export) the consider using a single shared NFS cache on the client.</p>\n</blockquote>\n\n<p>Use the <code>sharecache</code> option to setup the NFS mounts on the client.</p>\n\n<p>This option determines how the client's data-cache and attribute-cache are shared when mounting the same export more than once concurrently. <strong>Using the same cache reduces memory requirements on the client and presents identical file contents to applications when the same remote file is accessed via different mount points.</strong></p>\n\n<hr>\n\n<h3>Setting-up a NFS-mount without caching</h3>\n\n<blockquote>\n  <p>Disable attribute caching. </p>\n</blockquote>\n\n<p>Mount the NFS share on the client with the <code>noac</code> option.</p>\n\n<blockquote>\n  <p>Alternately, disable cached directory attributes from being served.</p>\n</blockquote>\n\n<p>Use <code>acdirmin=0,acdirmax=0</code> to set the cache timeouts to 0 (effectively disabling caching).</p>\n\n<hr>\n\n<h3>Setting-up a NFS-mount to ignore lookup caches</h3>\n\n<blockquote>\n  <p>Use <code>lookupcache=positive</code> OR <code>lookupcache=none</code>  </p>\n</blockquote>\n\n<p>(available options : <code>all</code>, <code>positive</code> and <code>none</code>)</p>\n\n<p>When attempting to access a directory entry over a NFS mount,<br>\nif the requested directory entry exists on the server, the result is referred to as <code>positive</code>.<br>\nif the requested directory entry does not exist on the server, the result is referred to as <code>negative</code>. </p>\n\n<p>If the <code>lookupcache</code> option is not specified, or if <code>all</code> is specified, the client assumes both types of directory cache entries are valid until their parent directory's cached attributes expire.</p>\n\n<p>If <code>pos</code> or <code>positive</code> is specified, the client assumes positive entries are valid until their parent directory's cached attributes expire, but always revalidates negative entires before an application can use them.</p>\n\n<p>If <code>none</code> is specified, the client revalidates both types of directory cache entries before an application can use them. This permits quick detection of files that were created or removed by other clients, but can impact application and server performance.</p>\n\n<hr>\n\n<p><sub>\nReferences:<br>\n<a href=\"http://www.citi.umich.edu/projects/nfs-perf/results/cel/dnlc.html\" rel=\"noreferrer\">1. Close-To-Open Cache Consistency in the Linux NFS Client</a><br>\n<a href=\"https://serverfault.com/a/278380\">2. NFS - Detecting remotely created files programmatically?</a><br>\n<a href=\"https://serverfault.com/a/382728\">3. NFS cache : file content not updated on client when modified on server</a><br>\n<a href=\"http://linux.die.net/man/5/nfs\" rel=\"noreferrer\">4. NFS man page</a>. Especially the <strong>\"Data And Metadata Coherence\"</strong> section.<br>\n</sub></p>\n"}], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17126, "favorite_count": 2, "accepted_answer_id": 35162336, "answer_count": 1, "score": 14, "last_activity_date": 1454520489, "creation_date": 1453855066, "last_edit_date": 1454520489, "question_id": 35026752, "link": "https://stackoverflow.com/questions/35026752/howto-force-refresh-nfs-cache-when-checking-newly-created-file", "title": "howto force refresh NFS cache when checking newly created file?", "body": "<p>When a file is created on a Linux NFS shared mount, the client is either Linux o                                          r mac machines. The existence or absence of a file is the key for what to do next, but the checking is not always return the right result:</p>\n\n<p>e.g I am doing this in perl, this still not working well, esp with mac machines</p>\n\n<pre><code>write_key_file();  # write a file that must be checked before proceeding\n</code></pre>\n\n<p>The following checks cannot always return true when the file does exist</p>\n\n<p>Issue - this command in perl did not return correct status in NFS system:</p>\n\n<pre><code>if( -e $file){}\n</code></pre>\n\n<p>Overheared solution that did not work:</p>\n\n<pre><code> sleep(5);   # wait 5 seconds\n system(\"ls -ltr\"); # force to cache?\n if(-e $file){}\n</code></pre>\n\n<p>I do not intend to check every file like this, but there are a few key places where it is important to get the proper file status.</p>\n\n<p>Do we have better ways to force refresh nfs cache on a specific file on a specific directory? Thanks.</p>\n\n<p>I am not sure that this is a XY problem, but there are a few weakest points that can all be solutions. </p>\n\n<blockquote>\n  <p>A -- NFS clients setting </p>\n</blockquote>\n\n<p>If there is a solution at this stage, it would be great!</p>\n\n<blockquote>\n  <p>B -- exit_code or return code of writing function</p>\n</blockquote>\n\n<pre><code>$exit_code = write_key_file();\n</code></pre>\n\n<p>The problem with it, not all writing are within the scope of the code block. this only solve part of the problem.</p>\n\n<blockquote>\n  <p>C -- Disable NFS cache for the specific file or directory for file checking</p>\n</blockquote>\n\n<p>I need to make sure is this possible and how? if no and why?</p>\n\n<p>and I am open to all possible solutions, no solution or other possibilities.</p>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1453849382, "post_id": 35025623, "comment_id": 57778006, "body": "<a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">You generally can&#39;t use placeholders for column names.</a>"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1453853251, "post_id": 35025623, "comment_id": 57779347, "body": "As noted above, you can&#39;t use placeholders for column names, or table names for that matter.  You can only use placeholders for values."}, {"owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1453865624, "post_id": 35025623, "comment_id": 57783006, "body": "I thought you can use quote_identifier for tables and columns."}, {"owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1453867468, "post_id": 35025623, "comment_id": 57783557, "body": "I see what I did wrong, Embarrassingly, I failed to realize that <code>WHERE</code> is looking for a column and I assumed it was a value. It works now once I also used <code>quote_identifier()</code> on the column. Thanks guys!"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1453850943, "last_edit_date": 1453850943, "creation_date": 1453849958, "answer_id": 35025852, "question_id": 35025623, "link": "https://stackoverflow.com/questions/35025623/cant-figure-out-placeholders-in-perl-dbi/35025852#35025852", "title": "Can&#39;t figure out placeholders in perl DBI", "body": "<p>If you copied your code correctly.</p>\n\n<pre><code>my $sql = sprintf(qq(SELECT %s FROM %s WHERE ?=?),\n                    $dbh-&gt;quote_identifier=$col,\n                    $dbh-&gt;quote_identifier=$table);\n</code></pre>\n\n<p>looks funny. I'll bet you meant to say</p>\n\n<pre><code>my $sql = sprintf(qq(SELECT %s FROM %s WHERE ?=?),\n                    $dbh-&gt;quote_identifier($col),\n                    $dbh-&gt;quote_identifier($table));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1453866312, "post_id": 35026298, "comment_id": 57783216, "body": "You are right, I was just using <code>count(1)</code> because I saw that code on a thread relating to finding one instance of an entry. Regarding breaking up the two functions, I need to see if an entry exists and if it does what row is it in. I guess I could just check for the row and if it throws an error then I know it doesn&#39;t exist?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1453874344, "post_id": 35026298, "comment_id": 57785681, "body": "My point wasn&#39;t so much about <code>count(*)</code> vs. something else, but rather that your logic was strange. Your query boiled down to <code>select foo from bar where foo=1</code>---if the record exists, there&#39;s a pretty good chance (like 100%) that your return value will be exactly what you passed in. Are you trying to fetch a row&#39;s primary key based on some <i>other</i> column?"}, {"owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1453905959, "post_id": 35026298, "comment_id": 57805182, "body": "Oh thank you. I see what I did, but yes I am trying to return the primary key if the entry does exist. I guess in the second query I am not selecting for the primary key. This would only work if I was only searching the primary key column. Now I see it would be better to split it up into two functions. Sorry I must be too tired."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1453852485, "creation_date": 1453852485, "answer_id": 35026298, "question_id": 35025623, "link": "https://stackoverflow.com/questions/35025623/cant-figure-out-placeholders-in-perl-dbi/35026298#35026298", "title": "Can&#39;t figure out placeholders in perl DBI", "body": "<p>I think you would benefit from simplifying your code and making it do what the subroutine name <em>says</em> it does (i.e., check existence of a record). Your second query does a needless lookup to get a value that is already known to you, <strong>because you passed it to the subroutine</strong> in the first place.</p>\n\n<p>Why not just do a simple <code>count(*)</code>, which is optimized in every popular database out there today? A zero/falsy return value means the record doesn't exist, and a non-zero/truthy return value means it does. Simple.</p>\n\n<pre><code>sub check_exists {\n    my ($table, $col, $val) = @_;\n\n    my $sql = sprintf(\n        q{select count(*) from %s where %s = ?},\n        $dbh-&gt;quote_identifier($table),\n        $dbh-&gt;quote_identifier($col)\n    );\n\n    return $dbh-&gt;selectrow_array($sql, undef, $val);\n}\n\nif (check_exists('foo', 'bar', 42)) {\n    # do something ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 4880521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d886f28133c30b5739b82bbf636fcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Tarbet", "link": "https://stackoverflow.com/users/4880521/cole-tarbet"}, "is_accepted": false, "score": 1, "last_activity_date": 1453852914, "creation_date": 1453852914, "answer_id": 35026371, "question_id": 35025623, "link": "https://stackoverflow.com/questions/35025623/cant-figure-out-placeholders-in-perl-dbi/35026371#35026371", "title": "Can&#39;t figure out placeholders in perl DBI", "body": "<p>Don't use placeholders or variables for table or column names.</p>\n\n<p>Instead, use if statements to choose between complete SQL queries.</p>\n\n<p>For example:</p>\n\n<pre><code>if($option eq 'name'){\n    $sql = 'SELECT name FROM users WHERE id = ?';\n} elsif {$option eq 'id'){\n    $sql = 'SELECT age from users WHERE name = ?';\n} else {\n    // STUFF\n}\n</code></pre>\n\n<p>This will generate more lines of code, but your code will be much more readable.</p>\n"}], "owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453852914, "creation_date": 1453848833, "last_edit_date": 1453849948, "question_id": 35025623, "link": "https://stackoverflow.com/questions/35025623/cant-figure-out-placeholders-in-perl-dbi", "title": "Can&#39;t figure out placeholders in perl DBI", "body": "<p>I am getting a strange error in my code that seems to only happen when I am trying to query with placeholders and quote identifier. I wrote the following subroutine to check if an entry exists and it'll return the key if it exists or <code>null</code> if it doesn't:</p>\n\n<pre><code>sub check_exists {\n    my $table=$_[0];    #table\n    my $col=$_[1];\n    my $check=$_[2];   #query for item  \n    #check if value exists\n    my $sql=sprintf(qq(SELECT COUNT(1) FROM %s WHERE ?=?),\n                    $dbh-&gt;quote_identifier($table));\n    my $sth = $dbh-&gt;prepare($sql);\n    $sth-&gt;execute($col,$check);     \n    my $result=$sth-&gt;fetch()-&gt;[0];\n    $sth-&gt;finish();        \n    #if value exists find the row and return the primary key\n    if ($result){   \n        my $sql = sprintf(qq(SELECT %s FROM %s WHERE ?=?),\n                    $dbh-&gt;quote_identifier=$col,\n                    $dbh-&gt;quote_identifier=$table);\n        my $sth2=$dbh-&gt;prepare($sql);\n        $sth2-&gt;execute($col,$check);          \n        return ($sth2-&gt;fetch()-&gt;[0]); #return key\n    }\n    else {\n        return 0;   #else value does not exist and return null\n    }    \n}\n</code></pre>\n\n<p>I even tried:</p>\n\n<pre><code>my $result=$dbh-&gt;selectrow_array(sprintf(qq(SELECT COUNT(1) FROM %s WHERE ?=?),$dbh-&gt;quote_identifier($table)),undef, $col, $check);\n</code></pre>\n\n<p>Unfortunately, it always always returns zero. If I don't use placeholders it seems to work.</p>\n\n<pre><code>my $test=$dbh-&gt;selectrow_array(qq(SELECT COUNT(1) FROM ORF1 WHERE idORF1=?),undef,$orf1_crc32)\n</code></pre>\n\n<p>Can someone please explain what I have done wrong? </p>\n"}, {"tags": ["regex", "perl", "raku", "quantifiers"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1453844948, "post_id": 35024489, "comment_id": 57776002, "body": "There&#39;s currently <a href=\"http://meta.stackoverflow.com/q/315419/176646\">a discussion on Meta</a> about whether the <code>perl</code> tag can also be added to Perl 6 questions, but please <i>always</i> include the <code>perl6</code> tag. Otherwise you&#39;ll confuse all the Perl 5 developers who will wonder why your code looks so funny."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453844976, "post_id": 35024489, "comment_id": 57776017, "body": "@ThisSuitIsBlackNot ahh, okay."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453845395, "post_id": 35024489, "comment_id": 57776235, "body": "You need to double the pipe: <code>^((.)(?1)\\2||.?)$</code>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453845533, "post_id": 35024489, "comment_id": 57776302, "body": "@WiktorStribi\u017cew same error, no change."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1453846308, "post_id": 35024489, "comment_id": 57776659, "body": "<code>(?1)</code> isn&#39;t a valid construct in Perl 6. Perl 6 regex isn&#39;t even remotely PCRE."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453847317, "post_id": 35024489, "comment_id": 57777199, "body": "<code>(?1)</code> is a <a href=\"http://perldoc.perl.org/perlre.html#%28%3f_PARNO_%29-%28%3f-_PARNO_%29-%28%3f%2b_PARNO_%29-%28%3fR%29-%28%3f0%29\" rel=\"nofollow noreferrer\">recursive subpattern</a> in Perl 5 regex, not a named capturing group. I&#39;m not sure how to translate that into a Perl 6 regex (or if it can be done with a regex), but here are the <a href=\"https://doc.perl6.org/language/regexes\" rel=\"nofollow noreferrer\">Perl 6 regex docs</a>. Be aware that the vast majority of Perl questions on SO ask about Perl 5, and trying to run Perl 5 code with Perl 6 will probably not work most of the time."}, {"owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "edited": false, "score": 2, "creation_date": 1453848460, "post_id": 35024489, "comment_id": 57777654, "body": "According to <a href=\"https://design.perl6.org/S05.html\" rel=\"nofollow noreferrer\">this page</a>, it&#39;s <code>&lt;~~&gt;</code> to match the whole regex recursively, or you can specify a numbered ( <code>&lt;~~0&gt;</code>) or named ( <code>&lt;~~foo&gt;</code>) subpattern."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453848919, "post_id": 35024489, "comment_id": 57777828, "body": "Well, backreferences like <code>\\1</code> are also <a href=\"https://design.perl6.org/S05.html#Backslash_reform\" rel=\"nofollow noreferrer\">gone</a>. Well, try <code>^((.)&lt;~~1&gt;$2||.?)$</code>. Or <code>^&lt;(&lt;(.)&gt;&lt;~~1&gt;$2||.?)&gt;$</code> (<i>You may also capture a subset of the match using the <code>&lt;(...)&gt;</code> construct</i>)"}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1453849305, "post_id": 35024489, "comment_id": 57777976, "body": "@WiktorStribi\u017cew: capture group indices are 0-based, and <code>~~</code> assertions for capture groups are not implemented..."}], "answers": [{"comments": [{"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453850389, "post_id": 35025824, "comment_id": 57778385, "body": "this considers every word a palindrome."}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1453851676, "post_id": 35025824, "comment_id": 57778845, "body": "@cat: not for me; what&#39;s your Rakudo version?"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453851887, "post_id": 35025824, "comment_id": 57778922, "body": "<code>This is Rakudo version 2015.12-219-gd67cb03 built on MoarVM version 2015.12-29-g8079ca5 implementing Perl 6.c.</code> Full disclosure: I ran it on <code>&#47;usr&#47;share&#47;dict&#47;words</code> and piped its output to a file, then <code>diff</code>ed the files and there were no differences."}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453852232, "post_id": 35025824, "comment_id": 57779026, "body": "I&#39;m still on 2015.12-113, so I&#39;ll update and see what happens; could it be the problem lies elsewhere in your code?"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1453852573, "post_id": 35025824, "comment_id": 57779137, "body": "This definitely matches every string, and it&#39;s not just my code because the same goes for <code>perl6 -e</code> and the REPL."}, {"owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "reply_to_user": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1453852640, "post_id": 35025824, "comment_id": 57779167, "body": "<code>$ perl6 -e &#39;my regex palindrome { (.) &lt;~~&gt; $0 || .? }; say &quot;ab&quot; ~~ &#47;^&lt;palindrome&gt;$&#47;&#39; # Nil</code>"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 3, "creation_date": 1453853254, "post_id": 35025824, "comment_id": 57779350, "body": "Oh! I had missed the <code>^</code> and <code>$</code> in the application of the regex. My mistake, you&#39;re right."}], "tags": [], "owner": {"reputation": 148928, "user_id": 48015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b722a5f7d2d809629ee40c63cc8576b?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/48015/christoph"}, "is_accepted": true, "score": 6, "last_activity_date": 1453849745, "creation_date": 1453849745, "answer_id": 35025824, "question_id": 35024489, "link": "https://stackoverflow.com/questions/35024489/quantifier-quantifies-nothing-but-i-never-asked-for-a-quantifier/35025824#35025824", "title": "&quot;Quantifier quantifies nothing&quot; but I never asked for a quantifier", "body": "<p>One way to do it is this:</p>\n\n<pre><code>my regex palindrome { (.) &lt;~~&gt; $0 || .? }\nsay \"aba\" ~~ /^&lt;palindrome&gt;$/;\n</code></pre>\n"}], "owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 35025824, "answer_count": 1, "score": 3, "last_activity_date": 1453849745, "creation_date": 1453844300, "last_edit_date": 1495535278, "question_id": 35024489, "link": "https://stackoverflow.com/questions/35024489/quantifier-quantifies-nothing-but-i-never-asked-for-a-quantifier", "title": "&quot;Quantifier quantifies nothing&quot; but I never asked for a quantifier", "body": "<p>Consider the following Perl-flavoured?? (i suppose not?) <a href=\"https://stackoverflow.com/questions/22349358/finding-palindrome-using-regex\">regex to test if a string is a palindrome</a>:</p>\n\n<pre><code>^((.)(?1)\\2|.?)$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/cL5sE8/1\" rel=\"nofollow noreferrer\">try it here</a>.</p>\n\n<p>the following </p>\n\n<pre><code>my regex palindrome {\n    ^((.)(?1)\\2|.?)$\n}\n\nsay \"$word is a palindrome\"\n    if $word ~~ /&lt;palindrome&gt;/\n    &amp;&amp; $word.chars &gt; 1;\n</code></pre>\n\n<p>gives an error</p>\n\n<pre><code>===SORRY!===\nQuantifier quantifies nothing\nat /home/cat/projects/perl6/code/misc/words.pl6:6\n------&gt;   ^((.)(?\u23cf1)\\2|.?)$\nUnrecognized backslash sequence (did you mean $1?)\nat /home/cat/projects/perl6/code/misc/words.pl6:6\n------&gt;   ^((.)(?1)\\2\u23cf|.?)$\n</code></pre>\n\n<p>I have a working knowledge of (Python) regexes, and I get what it means when it says \"Quantifier quantifies nothing\", but I don't get <em>why</em> it says this when I was asking for recursion, not a quantification.</p>\n\n<p>I don't have enough knowledge of Perl to know why it doesn't like the backslash (the other error).</p>\n\n<p>I <em>did</em> try messing around with the syntax and searching around, but as far as I and the internet are concerned, this regex works, and fiddling with it generates various other errors I don't get.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453834459, "post_id": 35021376, "comment_id": 57769652, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5885794/how-do-i-determine-the-number-of-elements-in-an-array-reference\">How do I determine the number of elements in an array reference?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 0, "creation_date": 1453838207, "post_id": 35021445, "comment_id": 57771887, "body": "What about <code>my $nbViews = scalar @{$data-&gt;{views}}</code> wouldn&#39;t that work as well?"}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453838362, "post_id": 35021445, "comment_id": 57771994, "body": "@Borodin Point taken."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 3, "creation_date": 1453838579, "post_id": 35021445, "comment_id": 57772140, "body": "@dev-null: That <code>scalar</code> is unnecessary, so I would choose <code>my $nbViews = @{ $data-&gt;{views} }</code> if I didn&#39;t need to access the array elsewhere, but in practice that&#39;s very unlikely"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453839480, "post_id": 35021445, "comment_id": 57772655, "body": "@jcaron: I think you should make it clear that your <i>Alternatively</i> makes a duplicate of the array, which is often unnecessary and may be devastating if <code>@$data</code> is very large. It is certainly not something to do if you just need a count of elements in the array"}], "tags": [], "owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "is_accepted": true, "score": 4, "last_activity_date": 1453848576, "last_edit_date": 1495540731, "creation_date": 1453833964, "answer_id": 35021445, "question_id": 35021376, "link": "https://stackoverflow.com/questions/35021376/perljson-getting-size-of-an-array/35021445#35021445", "title": "perl+json getting size of an array", "body": "<pre><code>my $views = $data-&gt;{views};\nmy $nbViews = scalar @$views;\n</code></pre>\n\n<p><code>$data-&gt;{views}</code> is a reference to an array, not an array. Store the reference, and dereference it when needed.</p>\n\n<p>Alternatively:</p>\n\n<pre><code>my @views = @{$data-&gt;{views}};\nmy $nbViews = scalar @views;\n</code></pre>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/questions/35021376/perljson-getting-size-of-an-array/35021445?noredirect=1#comment57772655_35021445\">Borodin</a>, note that this alternative makes a <strong>copy</strong> of the original array (potentially using a lot of memory). In some cases that may be what you actually want to do (if you need to modify it while leaving the original one intact, though note this would not be a deep copy), but most often (especially if you just want to count the items or iterate over them), you probably don't want to do that and just stick to keeping a <strong>reference</strong> (as in the first code snippet above).</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5843132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b3ca287124804b6c1c5efe6957cc14?s=128&d=identicon&r=PG&f=1", "display_name": "lulutreizequinze", "link": "https://stackoverflow.com/users/5843132/lulutreizequinze"}, "edited": false, "score": 0, "creation_date": 1453897718, "post_id": 35022412, "comment_id": 57799157, "body": "perfect.just a note ,  \t I wouldn&#39;t use my $data = $wrapper-&gt;{data}; as it overwrites the original $data and I need it later."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 5843132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b3ca287124804b6c1c5efe6957cc14?s=128&d=identicon&r=PG&f=1", "display_name": "lulutreizequinze", "link": "https://stackoverflow.com/users/5843132/lulutreizequinze"}, "edited": false, "score": 0, "creation_date": 1453903939, "post_id": 35022412, "comment_id": 57803568, "body": "@lulutreizequinze: It doesn&#39;t \u201coverwrite\u201d the original <code>$data</code>. It introduces a new <code>$data</code> that disappears at the end of the enclosing block -- the <code>for</code> loop. After that the old <code>$data</code> and its original value are accessible once again. You shouldn&#39;t need the outermost value of <code>$data</code> inside the loop -- that is the point of <i>scoping</i>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1467625212, "last_edit_date": 1467625212, "creation_date": 1453837098, "answer_id": 35022412, "question_id": 35021376, "link": "https://stackoverflow.com/questions/35021376/perljson-getting-size-of-an-array/35022412#35022412", "title": "perl+json getting size of an array", "body": "<p>When you write this</p>\n\n<pre><code>my $data = decode_json($json);\n\nmy @tmp = $data-&gt;{'views'};\n</code></pre>\n\n<p>you are creating a Perl array with a single element <code>$tmp[0]</code> that is <em>identical</em> to <code>$data-&gt;{'views'}</code>.</p>\n\n<p>Your <code>$data-&gt;{'views'}</code> is spot on, so you have correctly understood how to access the <code>views</code> element of the hash referred to by your <code>$data</code> variable, and as long as the hash key <code>views</code> looks like a Perl identifier you can forget the quotes around it</p>\n\n<p>But the values of Perl hashes and arrays are always scalar, so you must <em>dereference</em> them if you need to access the array, and the same applies to any substructures that you need to access</p>\n\n<p>If you are dealing with complex data structures, it is usually best to keep a temporary scalar variable that tracks where you are within the structure. For instance, I would write</p>\n\n<pre><code>my $views = $data-&gt;{views};\n</code></pre>\n\n<p>Now I have a simple <em>array reference</em> to code with. I can dereference it to an array with <code>@$views</code>, and I can access its elements with <code>$views-&gt;[0]</code> etc.</p>\n\n<p>Here's a rewrite of your own code that does what I have described. I have also used <a href=\"http://metacpan.org/module/Data::Dump\" rel=\"nofollow\"><code>Data::Dump</code></a> to reformat the data that you show. It is generally far more concise and readable than the output from <code>Data::Dumper</code>, but it isn't a core module so you will probably have to install it</p>\n\n<p>I pull out <code>$value-&gt;{ptr_wrapper}</code> as a lexical variable <code>$wrapper</code>, and in turn <code>$wrapper-&gt;{data}</code> as lexical variable <code>$data</code>. The rest of the code becomes so much simpler, as I could otherwise be writing stuff like</p>\n\n<pre><code>say $data-&gt;{views}[0]{value}{ptr_wrapper}{data}{filename}\n</code></pre>\n\n<p><br/></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $data = {\n  views =&gt; [\n    {\n      key =&gt; 0,\n      value =&gt; {\n        ptr_wrapper =&gt; {\n          data =&gt; {\n            filename     =&gt; \"000118800_15821618907.jpg\",\n            height       =&gt; 1024,\n            id_intrinsic =&gt; 13,\n            id_pose      =&gt; 0,\n            id_view      =&gt; 0,\n            local_path   =&gt; \"/\",\n            width        =&gt; 776,\n          },\n          id =&gt; 2147483649,\n        },\n      },\n    },\n    {\n      key =&gt; 1,\n      value =&gt; {\n        ptr_wrapper =&gt; {\n          data =&gt; {\n            filename     =&gt; \"000132800_22050281512.jpg\",\n            height       =&gt; 1024,\n            id_intrinsic =&gt; 11,\n            id_pose      =&gt; 1,\n            id_view      =&gt; 1,\n            local_path   =&gt; \"/\",\n            width        =&gt; 850,\n          },\n          id =&gt; 2147483650,\n        },\n      },\n    },\n  ],\n};\n\nmy $views = $data-&gt;{views};\nmy $nviews = scalar @$views;\n\nprint \"nviews : $nviews\\n\\n\";\n\nfor my $view ( @$views ) {\n\n    my $key     = $view-&gt;{key};\n    my $value   = $view-&gt;{value};\n    my $wrapper = $value-&gt;{ptr_wrapper};\n    my $data    = $wrapper-&gt;{data};\n\n    say \"key      = $key\";\n    say \"ID       = $wrapper-&gt;{id}\";\n    say \"filename = $data-&gt;{filename}\";\n    say \"height   = $data-&gt;{height}\";\n    say \"width    = $data-&gt;{width}\";\n    print \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>nviews : 2\n\nkey      = 0\nID       = 2147483649\nfilename = 000118800_15821618907.jpg\nheight   = 1024\nwidth    = 776\n\nkey      = 1\nID       = 2147483650\nfilename = 000132800_22050281512.jpg\nheight   = 1024\nwidth    = 850\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5843132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b3ca287124804b6c1c5efe6957cc14?s=128&d=identicon&r=PG&f=1", "display_name": "lulutreizequinze", "link": "https://stackoverflow.com/users/5843132/lulutreizequinze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2051, "favorite_count": 0, "accepted_answer_id": 35021445, "answer_count": 2, "score": 0, "last_activity_date": 1467625212, "creation_date": 1453833769, "last_edit_date": 1453981945, "question_id": 35021376, "link": "https://stackoverflow.com/questions/35021376/perljson-getting-size-of-an-array", "title": "perl+json getting size of an array", "body": "<p>I'm reading a json file in perl and having trouble using the results.</p>\n\n<p>I want to know how many views are present in the json file.\nthere should be 2</p>\n\n<pre><code>my $data = decode_json($json);\nprint Dumper($data);\n\nmy @tmp=$data-&gt;{'views'};\nmy $nviews=scalar @tmp;\nprint \"nviews : $nviews\\n\";\n</code></pre>\n\n<p>gives me</p>\n\n<pre><code>$VAR1 = {\n    'views' =&gt; [\n        {\n            'key' =&gt; 0,\n            'value' =&gt; {\n                'ptr_wrapper' =&gt; {\n                     'data' =&gt; {\n                         'width'    =&gt; 776,\n                         'height'   =&gt; 1024,\n                         'id_view'  =&gt; 0,\n                         'filename' =&gt; '000118800_15821618907.jpg',\n                         'id_pose'  =&gt; 0,\n                         'id_intrinsic' =&gt; 13,\n                         'local_path' =&gt; '/'\n                     },\n                     'id' =&gt; 2147483649\n                 }\n             }\n        },\n        {\n             'key'   =&gt; 1,\n             'value' =&gt; {\n                 'ptr_wrapper' =&gt; {\n                      'data' =&gt; {\n                          'id_pose'      =&gt; 1,\n                          'id_intrinsic' =&gt; 11,\n                          'filename'     =&gt;  '000132800_22050281512.jpg',\n                          'id_view'      =&gt; 1,\n                          'local_path'   =&gt; '/',\n                          'width'        =&gt; 850,\n                          'height'       =&gt; 1024\n                      },\n                      'id' =&gt; 2147483650\n                  }\n             }\n         }\n    ]\n};\nnviews : 1\n</code></pre>\n\n<p>thanks in advance for any help.luc</p>\n"}, {"tags": ["string", "perl", "bioinformatics", "matching", "fuzzy"], "owner": {"reputation": 153, "user_id": 5692653, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BGVHmZWZx2w/AAAAAAAAAAI/AAAAAAAAAH4/dV3ZOfxrHjo/photo.jpg?sz=128", "display_name": "Matthew Snyder", "link": "https://stackoverflow.com/users/5692653/matthew-snyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1453898413, "creation_date": 1453829633, "last_edit_date": 1453898413, "question_id": 35020142, "link": "https://stackoverflow.com/questions/35020142/multiple-fuzzy-matches-with-stringapprox", "title": "Multiple fuzzy matches with String::Approx", "body": "<p>I want to use perl to find fuzzy matches in a file of sequences and return the character number in the string at which the match is found with a given number of substitutions (lets say S=2). For example if my input file is:</p>\n\n<pre><code>Name1\nACTGTGACCTTT\nName2\nACCTTTACTGTG\nName3\nGACCTTTCTGTG\nName4\nGCACCTTTTGTG\nName5\nGCTACCTTTGTG\nName6\nACTGACCTTTTG\nName7\nACTGTACCTTTG\nName8\nACCTTTACCTTT\nName9\nACTGTGACTGTG\n</code></pre>\n\n<p>and my search query is \"ACCTTT\".</p>\n\n<p>Then I want my output to be something like:</p>\n\n<pre><code>Name1\n6\nName2\n0\nName3\n1\nName4\n2\nName5\n3\nName6\n4\nName7\n5\nName8\n0    6\n</code></pre>\n\n<p>I've tried doing this with String::Approx, but this module only returns the first index for each element of the array I am matching the query with. Also this module seems to be buggy and even when I set the number of Insertions and Deletions to 0, and allow for 2 substitutions, it still returns indexes for matches with many more than 2 substitutions.</p>\n\n<p>Here is the code I was using (in case there is something I don't understand about this module).</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse String::Approx 'aindex';\n\nmy $input_fasta=$ARGV[0];\nopen(IN,\"&lt;$input_fasta\") || die (\"Error opening $input_fasta $!\");\nmy $l = 0;\nmy @names;\nmy @seqs;\nwhile (&lt;IN&gt;){\n    if ($l % 2 == 0 ){\n    push (@names, $_);\n    }\n    elsif ($l % 2 ==1) {\n    push (@seqs, $_);\n    }\n    $l++;\n}\n\nmy @hits = aindex(\"ACCTTT\", [\"I0\", \"D0\", \"S2\"], @seqs);\n\n$hl=0;\n\nforeach (@hits){\n    if ($_ != -1){\n    print \"$names[$hl]$_\\n\";\n    $hl++\n    }\n    else {\n    $hl++;\n    }\n} \n</code></pre>\n\n<p>But this just returns:</p>\n\n<pre><code>Name1\n6\nName2\n0\nName3\n1\nName4\n1\nName5\n1\nName6\n0\nName7\n5\nName8\n0\n</code></pre>\n"}, {"tags": ["perl", "pdf"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 4, "creation_date": 1453820721, "post_id": 35016831, "comment_id": 57760577, "body": "Please, indent your code properly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453823610, "post_id": 35016831, "comment_id": 57762808, "body": "I&#39;ve added a properly laid-out version of your program. I hope it&#39;s clear now what the problem is? I can&#39;t be certain exactly what you intended so I haven&#39;t  written a solution"}, {"owner": {"reputation": 628, "user_id": 2657875, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/40690e8e76fcc4af11b19b4a2f4a3072?s=128&d=identicon&r=PG", "display_name": "menteith", "link": "https://stackoverflow.com/users/2657875/menteith"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453825265, "post_id": 35016831, "comment_id": 57763994, "body": "@Borodin Thanks for this. I hope that I will now be more clear. I cannot deal with the following part: the script, when the &#39;go&#39; command line argument is given should split each pdf in a current directory. The split procedure is in <code>elsif ( -f $cmd ) {</code> part and it works fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453827163, "post_id": 35016831, "comment_id": 57765296, "body": "It&#39;s very simple. A hint \u2014 look at the program that I&#39;ve formatted to see what you&#39;re doing in the <code>foreach my $file</code> loop"}, {"owner": {"reputation": 628, "user_id": 2657875, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/40690e8e76fcc4af11b19b4a2f4a3072?s=128&d=identicon&r=PG", "display_name": "menteith", "link": "https://stackoverflow.com/users/2657875/menteith"}, "edited": false, "score": 0, "creation_date": 1453832354, "post_id": 35016831, "comment_id": 57768428, "body": "It&#39;s seems that I look but I don&#39;t see. The error is related to <code>Global symbol &quot;$oldpdf&quot; requires explicit package name</code> and I have googled this time of error but without luck."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453834075, "post_id": 35016831, "comment_id": 57769432, "body": "@menteith All the stuff that needs to be within the scope of the loop... is not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453849575, "post_id": 35016831, "comment_id": 57778084, "body": "@menteith: Your loop <code>foreach my $file (@files) { ... }</code> uselessly assigns three variables and then ends. I&#39;m sure you wanted to do something constructive inside that loop?"}, {"owner": {"reputation": 628, "user_id": 2657875, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/40690e8e76fcc4af11b19b4a2f4a3072?s=128&d=identicon&r=PG", "display_name": "menteith", "link": "https://stackoverflow.com/users/2657875/menteith"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453912831, "post_id": 35016831, "comment_id": 57810319, "body": "@Borodin. I&#39;m stuck. Tried and tried but I can&#39;t deal with this. Could you correct the code, please?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1453888770, "creation_date": 1453888770, "answer_id": 35034091, "question_id": 35016831, "link": "https://stackoverflow.com/questions/35016831/perl-split-pages-of-each-file-into-two/35034091#35034091", "title": "Perl: split pages of each file into two", "body": "<p>If you get a Perl error or warning that you don't understand, then you can always (temporarily) add <code>use diagnostics</code> to your code. This will give more details of the problem. In this case it will say something like this:</p>\n\n<blockquote>\n  <p>(F) You've said \"use strict\" or \"use strict vars\", which indicates that all > variables must either be lexically scoped (using \"my\" or \"state\"), \n  declared beforehand using \"our\", or explicitly qualified to say which \n  package the global variable is in (using \"::\").</p>\n</blockquote>\n\n<p>Of course, you have made an effort to declare your variables with <code>my</code>, but it seems you haven't quite got the scoping right. Variables declared with <code>my</code> are scoped to only exist within the current block of code. So it seems that you are trying to use variables outside of the scope where they are declared.</p>\n\n<p>Line 21 is this:</p>\n\n<pre><code>$page = $newpdf-&gt;importpage($oldpdf, $page_nb);\n</code></pre>\n\n<p>This uses both <code>$oldpdf</code> and $newpdf<code>. But neither of of these variables exist at this point. You declared them both within you</code>foreach my $file (@files) { ... }` block, but those declarations only have an effect inside that block. When you try to use the variables outside of that block, Perl (quite rightly) complains.</p>\n\n<p>You need to think a little more deeply about where your variables are used and then you need to declare them in the correct scope.</p>\n"}, {"comments": [{"owner": {"reputation": 628, "user_id": 2657875, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/40690e8e76fcc4af11b19b4a2f4a3072?s=128&d=identicon&r=PG", "display_name": "menteith", "link": "https://stackoverflow.com/users/2657875/menteith"}, "edited": false, "score": 0, "creation_date": 1453981864, "post_id": 35044058, "comment_id": 57844058, "body": "Dear @Borodin, thank you very much. I would have never came across a solution like yours."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467625227, "last_edit_date": 1467625227, "creation_date": 1453915546, "answer_id": 35044058, "question_id": 35016831, "link": "https://stackoverflow.com/questions/35016831/perl-split-pages-of-each-file-into-two/35044058#35044058", "title": "Perl: split pages of each file into two", "body": "<p>What I was trying to get at is that your loop</p>\n\n<pre><code>foreach my $file (@files) {\n\n    my $filename = $file;\n    my $oldpdf   = PDF::API2-&gt;open($filename);\n    my $newpdf   = PDF::API2-&gt;new;\n}\n</code></pre>\n\n<p>just sets the values of three variables and then discards them over and over again, once for each file. You're trying to use those values in the next loop</p>\n\n<pre><code>for my $page_nb ( 1 .. $oldpdf-&gt;pages ) { ... }\n</code></pre>\n\n<p>but by now <code>$oldpdf</code> no longer exists so the program dies</p>\n\n<p>Here you go. I've added a few things, in particular I've put the process of splitting a file into a subroutine to avoid duplicating the code</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse PDF::API2;\nuse Cwd 'getcwd';\n\nSTDOUT-&gt;autoflush;\n\n@ARGV == 1 or die qq{Command line should be either \"go\" or a filename!\\n};\n\nmy ($cmd) = @ARGV;\n\nif ( -f $cmd ) {\n    split_file($cmd);\n}\nelsif ( lc($cmd) eq 'go' ) {\n\n    printf \"Current folder: %s\\n\", getcwd;\n\n    split_file($_) for glob '*.pdf';\n}\nelse {\n    print \"Bad parameter!\\n\";\n}\n\n\nsub split_file {\n\n    my ($file) = @_;\n    ( my $newfile = $file ) =~ s/(.+)\\./$1-crop./x;\n\n    printf qq{Processing \"%s\" =&gt; \"%s\"\\n}, $file, $newfile;\n\n    my $oldpdf = PDF::API2-&gt;open($file);\n    my $newpdf = PDF::API2-&gt;new;\n\n    for my $page_nb ( 1 .. $oldpdf-&gt;pages ) {\n\n        for my $i ( 2, 0 ) {\n            my $page      = $newpdf-&gt;importpage( $oldpdf, $page_nb );\n            my @mediabox  = $page-&gt;get_mediabox;    # Left X, Bottom Y, Right X, Top Y\n            $mediabox[$i] = $mediabox[2] / 2;\n            $page-&gt;cropbox(@mediabox);\n            $page-&gt;trimbox(@mediabox);\n            $page-&gt;mediabox(@mediabox);\n        }\n    }\n\n    $newpdf-&gt;saveas($newfile);\n}\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 2657875, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/40690e8e76fcc4af11b19b4a2f4a3072?s=128&d=identicon&r=PG", "display_name": "menteith", "link": "https://stackoverflow.com/users/2657875/menteith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 1, "accepted_answer_id": 35044058, "answer_count": 2, "score": 0, "last_activity_date": 1467625227, "creation_date": 1453820231, "last_edit_date": 1592644375, "question_id": 35016831, "link": "https://stackoverflow.com/questions/35016831/perl-split-pages-of-each-file-into-two", "title": "Perl: split pages of each file into two", "body": "<p>I have written a code which should do the following:</p>\n<ol>\n<li>If command line arguments != 1, then the script exits. If a filename as a command line argument is given, then the script splits this file.</li>\n<li>If the 'go' command line argument is given, then the script gets the current directory, and then tries to split each pdf file in this directory. This procedure fails. I will give more details later.</li>\n<li>If a command line argument is neither a filename nor 'go', then the script shows a suitable message.</li>\n</ol>\n<p>As to the 2nd point, the errors read:</p>\n<blockquote>\n<p>Global symbol &quot;$oldpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 21.\nGlobal symbol &quot;$newpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 24.\nGlobal symbol &quot;$oldpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 24.\nGlobal symbol &quot;$newpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 31.\nGlobal symbol &quot;$oldpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 31.\nGlobal symbol &quot;$filename&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 39.\nGlobal symbol &quot;$newpdf&quot; requires explicit package name at C:\\strawberry\\perl\\bin\\current.pl line 40.\nExecution of C:\\strawberry\\perl\\bin\\current.pl aborted due to compilation errors.</p>\n</blockquote>\n<p>The script is as follows (I know it is ugly - I'm completely newbie):</p>\n<pre><code>use strict; \nuse warnings;\nuse PDF::API2;\nuse Cwd;\n\nif ( @ARGV != 1 ) {\ndie &quot;Command line should be either \\&quot;go\\&quot; or a filename!\\n&quot;;\n}\n\nmy $cmd = $ARGV[0];\n\nif ($cmd eq &quot;go&quot;) {\n    my $current = getcwd();\n    print &quot;Current folder: $current\\n&quot;;\n    my @files = glob(&quot;*.pdf&quot;);\n    foreach my $file (@files) {\n        my $filename = $file;\n        my $oldpdf = PDF::API2-&gt;open($filename);\n        my $newpdf = PDF::API2-&gt;new;\n}\nfor my $page_nb (1..$oldpdf-&gt;pages) {\nmy ($page, @cropdata);\n \n$page = $newpdf-&gt;importpage($oldpdf, $page_nb);\n@cropdata = $page-&gt;get_mediabox;\n$cropdata[2] /= 2;\n$page-&gt;cropbox(@cropdata);\n$page-&gt;trimbox(@cropdata);\n$page-&gt;mediabox(@cropdata);\n \n$page = $newpdf-&gt;importpage($oldpdf, $page_nb);\n@cropdata = $page-&gt;get_mediabox;\n$cropdata[0] = $cropdata[2] / 2;\n$page-&gt;cropbox(@cropdata);\n$page-&gt;trimbox(@cropdata);\n$page-&gt;mediabox(@cropdata);\n}\n \n(my $newfilename = $filename) =~ s/(.*)\\.(\\w+)$/$1-crop.$2/;\n$newpdf-&gt;saveas(&quot;$newfilename&quot;);\n}\n\nelsif   (-f $cmd) {\n    my $oldpdf = PDF::API2-&gt;open($cmd);\n    my $newpdf = PDF::API2-&gt;new;\n    for my $page_nb (1..$oldpdf-&gt;pages) {\n    my ($page, @cropdata);\n     \n    $page = $newpdf-&gt;importpage($oldpdf, $page_nb);\n    @cropdata = $page-&gt;get_mediabox;\n    $cropdata[2] /= 2;\n    $page-&gt;cropbox(@cropdata);\n    $page-&gt;trimbox(@cropdata);\n    $page-&gt;mediabox(@cropdata);\n     \n    $page = $newpdf-&gt;importpage($oldpdf, $page_nb);\n    @cropdata = $page-&gt;get_mediabox;\n    $cropdata[0] = $cropdata[2] / 2;\n    $page-&gt;cropbox(@cropdata);\n    $page-&gt;trimbox(@cropdata);\n    $page-&gt;mediabox(@cropdata);\n}\n \n(my $newfilename = $cmd) =~ s/(.*)\\.(\\w+)$/$1-crop.$2/;\n$newpdf-&gt;saveas(&quot;$newfilename&quot;);\n}\n\nelse {\n    print &quot;Bad parameter!\\n&quot;;\n}\n</code></pre>\n<br/>\n<hr />\n<h3>Updated</h3>\n<pre><code>use strict;\nuse warnings;\n\nuse PDF::API2;\nuse Cwd;\n\nif ( @ARGV != 1 ) {\n    die &quot;Command line should be either \\&quot;go\\&quot; or a filename!\\n&quot;;\n}\n\nmy $cmd = $ARGV[0];\n\nif ( $cmd eq &quot;go&quot; ) {\n\n    my $current = getcwd();\n    print &quot;Current folder: $current\\n&quot;;\n    my @files = glob(&quot;*.pdf&quot;);\n    \n    foreach my $file (@files) {\n\n        my $filename = $file;\n        my $oldpdf   = PDF::API2-&gt;open($filename);\n        my $newpdf   = PDF::API2-&gt;new;\n    }\n\n    for my $page_nb ( 1 .. $oldpdf-&gt;pages ) {\n\n        my ( $page, @cropdata );\n\n        $page = $newpdf-&gt;importpage( $oldpdf, $page_nb );\n        @cropdata = $page-&gt;get_mediabox;\n        $cropdata[2] /= 2;\n        $page-&gt;cropbox(@cropdata);\n        $page-&gt;trimbox(@cropdata);\n        $page-&gt;mediabox(@cropdata);\n\n        $page        = $newpdf-&gt;importpage( $oldpdf, $page_nb );\n        @cropdata    = $page-&gt;get_mediabox;\n        $cropdata[0] = $cropdata[2] / 2;\n        $page-&gt;cropbox(@cropdata);\n        $page-&gt;trimbox(@cropdata);\n        $page-&gt;mediabox(@cropdata);\n    }\n\n    ( my $newfilename = $filename ) =~ s/(.*)\\.(\\w+)$/$1-crop.$2/;\n    $newpdf-&gt;saveas(&quot;$newfilename&quot;);\n}\n\nelsif ( -f $cmd ) {\n\n    my $oldpdf = PDF::API2-&gt;open($cmd);\n    my $newpdf = PDF::API2-&gt;new;\n\n    for my $page_nb ( 1 .. $oldpdf-&gt;pages ) {\n        my ( $page, @cropdata );\n\n        $page = $newpdf-&gt;importpage( $oldpdf, $page_nb );\n        @cropdata = $page-&gt;get_mediabox;\n        $cropdata[2] /= 2;\n        $page-&gt;cropbox(@cropdata);\n        $page-&gt;trimbox(@cropdata);\n        $page-&gt;mediabox(@cropdata);\n\n        $page        = $newpdf-&gt;importpage( $oldpdf, $page_nb );\n        @cropdata    = $page-&gt;get_mediabox;\n        $cropdata[0] = $cropdata[2] / 2;\n        $page-&gt;cropbox(@cropdata);\n        $page-&gt;trimbox(@cropdata);\n        $page-&gt;mediabox(@cropdata);\n    }\n\n    ( my $newfilename = $cmd ) =~ s/(.*)\\.(\\w+)$/$1-crop.$2/;\n    $newpdf-&gt;saveas(&quot;$newfilename&quot;);\n}\n\nelse {\n    print &quot;Bad parameter!\\n&quot;;\n}\n</code></pre>\n"}, {"tags": ["perl", "http", "post", "web"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453834315, "post_id": 35016113, "comment_id": 57769576, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11088538/how-to-get-post-values-in-perl\">how to get POST values in perl</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5585984"}, "edited": false, "score": 0, "creation_date": 1453819233, "post_id": 35016387, "comment_id": 57759470, "body": "I am beginner in Perl/CGI, so thanks for these links and explanations, I&#39;ll read them all."}, {"owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "edited": false, "score": 0, "creation_date": 1453819433, "post_id": 35016387, "comment_id": 57759638, "body": "@Lazar, are you using Apache? If you are, then you might think about <a href=\"https://perl.apache.org/docs/tutorials/\" rel=\"nofollow noreferrer\">mod_perl</a>, which makes web apps more &quot;appy&quot;. My last perl job, was a Apache-mod_perl/CGI/Template stack."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5585984"}, "edited": false, "score": 0, "creation_date": 1453819522, "post_id": 35016387, "comment_id": 57759692, "body": "Yes I am using Apache."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1453819614, "post_id": 35016387, "comment_id": 57759750, "body": "@Lazar: Just for info,You don&#39;t have to take care of GET/POST, the sames methods apply for both."}, {"owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1453819734, "post_id": 35016387, "comment_id": 57759843, "body": "@Toto, I was thinking about mentioning that, but I thought the tutorial would probably fill that in."}], "tags": [], "owner": {"reputation": 29164, "user_id": 11289, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a82922f943c2ed9dac3f2b00343a6a3b?s=128&d=identicon&r=PG", "display_name": "Axeman", "link": "https://stackoverflow.com/users/11289/axeman"}, "is_accepted": true, "score": 2, "last_activity_date": 1453820078, "last_edit_date": 1453820078, "creation_date": 1453819013, "answer_id": 35016387, "question_id": 35016113, "link": "https://stackoverflow.com/questions/35016113/getting-data-from-http-post-request-with-perl/35016387#35016387", "title": "Getting data from HTTP POST request with Perl", "body": "<p>So you're writing Perl scripts for a web server? And you want to know a quick way to get data from the request? </p>\n\n<pre><code>use CGI;\n</code></pre>\n\n<p>This was such a core Perl standard 20 years ago. Whole sites consisted of just Perl-CGI scripts.</p>\n\n<pre><code>my $q = CGI-&gt;new();\nif ( $q-&gt;param()) { \n    my $name_value = $q-&gt;param( 'name' );\n}\n</code></pre>\n\n<p>More <a href=\"http://www.tutorialspoint.com/perl/perl_cgi.htm\" rel=\"nofollow\">here</a>, <a href=\"https://www.cs.tut.fi/~jkorpela/perl/cgi.html\" rel=\"nofollow\">here</a> and <a href=\"http://search.cpan.org/perldoc?CGI\" rel=\"nofollow\">here</a>.</p>\n\n<p>You can probably look at <a href=\"http://search.cpan.org/perldoc?Template\" rel=\"nofollow\">Template</a> and there are more up-to-date web application platforms. But, if you just want post parameters from a form, <code>use CGI;</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5585984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1337, "favorite_count": 0, "accepted_answer_id": 35016387, "answer_count": 1, "score": 0, "last_activity_date": 1453820078, "creation_date": 1453818298, "question_id": 35016113, "link": "https://stackoverflow.com/questions/35016113/getting-data-from-http-post-request-with-perl", "title": "Getting data from HTTP POST request with Perl", "body": "<p>How we can fetch data sent via POST request in Perl? Is it similar and easy as in PHP, for instance <strong>$_POST[\"name\"])</strong>? If someone could point me to the websites which will help me to solve this, I will be thankful.</p>\n\n<p>I found <a href=\"http://www.perl.com/pub/2002/08/20/perlandlwp.html\" rel=\"nofollow\">this</a> but I cannot find nothing like 'receive/fetch HTTP POST data', just 'Posting Form Data', which is not what I need now.</p>\n"}, {"tags": ["perl", "powershell"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1453823016, "last_edit_date": 1453823016, "creation_date": 1453819527, "answer_id": 35016572, "question_id": 35015875, "link": "https://stackoverflow.com/questions/35015875/perl-variable-to-powershell-script/35016572#35016572", "title": "Perl variable to Powershell script", "body": "<p>You can give system a list of arguments so for you it would be something like </p>\n\n<pre><code>@cmd = ();\npush(@cmd,\"c:\\\\windows\\\\system32\\\\windowspowershell\\\\v1.0\\\\powershell.exe\");\npush(@cmd,\"c:\\\\Strawberry\\\\unzipper.ps1\");\npush(@cmd,$saisie);\nsystem(@cmd);\n</code></pre>\n\n<p>Take a look at <a href=\"http://perlmaven.com/running-external-programs-from-perl\" rel=\"nofollow\">http://perlmaven.com/running-external-programs-from-perl</a></p>\n\n<p>Or you can roll your own command as below, and not use system</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy $test = command(\"ls -l\");\nprint $test;\n\nsub command($) {\n\n        undef $/;\n\n        my $command = shift;\n\n        open(COMMAND, \"| $command\");\n        my $content = &lt;COMMAND&gt;;\n        close(COMMAND);\n\n        return $content;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103376, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "is_accepted": true, "score": 0, "last_activity_date": 1453826492, "creation_date": 1453826492, "answer_id": 35019085, "question_id": 35015875, "link": "https://stackoverflow.com/questions/35015875/perl-variable-to-powershell-script/35019085#35019085", "title": "Perl variable to Powershell script", "body": "<p>Inside your PowerShell script, declare <code>$base</code> as a parameter with a default value of <code>$(Read-Host)</code>:</p>\n\n<pre><code>param(\n  [Parameter(Position=0)]\n  $base = $(Read-Host \"Saisir l'adresse repertoire de la base \u00e0 traiter\")\n)\nWrite-Host \"UNZIPPER `n\"\n\n#Recuperation listes de document de la base\n$documents = Get-ChildItem $base\n</code></pre>\n\n<p>When you invoke it with <code>system()</code> and pass the argument, it'll automatically get bound to the <code>$base</code> parameter.</p>\n"}], "owner": {"reputation": 73, "user_id": 5841961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-jMZtRXZSink/AAAAAAAAAAI/AAAAAAAAAcs/b_AvdaPH6cg/photo.jpg?sz=128", "display_name": "Sebastien Ternisien", "link": "https://stackoverflow.com/users/5841961/sebastien-ternisien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 35019085, "answer_count": 2, "score": 1, "last_activity_date": 1453826492, "creation_date": 1453817650, "question_id": 35015875, "link": "https://stackoverflow.com/questions/35015875/perl-variable-to-powershell-script", "title": "Perl variable to Powershell script", "body": "<p>I want to use a variable from my perl script to my powershell script to avoid two manipulations similar but i don't know how do that ... </p>\n\n<p>Perl : </p>\n\n<pre><code>#\n# main\n#\n\n\n### KeyPress ###\nprint \"Indiquer l'adresse repertoire de la base a traiter :\";\nchomp(my $saisie = &lt;STDIN&gt;);\n\n#script dezippage powershell\nmy $powershellPath =\"c:\\\\windows\\\\system32\\\\windowspowershell\\\\v1.0\\\\powershell.exe\";\nmy $filePath =\"c:\\\\Strawberry\\\\unzipper.ps1\";\nsystem(\"$powershellPath $filePath\",$saisie);\n</code></pre>\n\n<p>Powershell : </p>\n\n<pre><code>Write-Host \"UNZIPPER `n\"\n$base = Read-Host \"Saisir l'adresse repertoire de la base \u00e0 traiter\" # i want to replace by $saisie\n\n#Recuperation listes de document de la base\n$documents = Get-ChildItem $base\n</code></pre>\n\n<p>Can you help me please for fix my problem.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "perl", "jsp", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "edited": false, "score": 0, "creation_date": 1453882947, "post_id": 35015531, "comment_id": 57789544, "body": "im trying Selenium but I got stuck on running the server   &gt;&gt; java -jar selenium-server-standalone-2.44.0.jar                       03:05:27.879 INFO - Started org.openqa.jetty.jetty.Server@2a5330"}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1569535212, "post_id": 35015531, "comment_id": 102638838, "body": "Just for future viewers, don&#39;t try  WWW::Mechanize::Firefox and WWW::Selenium, both projects are eol"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1453816731, "creation_date": 1453816731, "answer_id": 35015531, "question_id": 35015320, "link": "https://stackoverflow.com/questions/35015320/scraping-js-contents-of-a-site-using-perl/35015531#35015531", "title": "Scraping JS contents of a site using perl", "body": "<p>As documented, <a href=\"http://p3rl.org/WWW::Mechanize\" rel=\"nofollow\">WWW::Mechanize</a> doesn't handle JavaScript. Try <a href=\"http://p3rl.org/WWW::Mechanize::Firefox\" rel=\"nofollow\">WWW::Mechanize::Firefox</a>, <a href=\"http://p3rl.org/WWW::Scripter\" rel=\"nofollow\">WWW::Scripter</a>, <a href=\"http://p3rl.org/WWW::Selenium\" rel=\"nofollow\">WWW::Selenium</a>, <a href=\"http://p3rl.org/WWW::Mechanize::PhantomJS\" rel=\"nofollow\">WWW::Mechanize::PhantomJS</a>, or similar.</p>\n"}], "owner": {"reputation": 83, "user_id": 5634392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K9mh4.jpg?s=128&g=1", "display_name": "BashingPerl", "link": "https://stackoverflow.com/users/5634392/bashingperl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1453816731, "creation_date": 1453816131, "question_id": 35015320, "link": "https://stackoverflow.com/questions/35015320/scraping-js-contents-of-a-site-using-perl", "title": "Scraping JS contents of a site using perl", "body": "<p>I'm scrapping this <a href=\"http://global.krx.co.kr/contents/GLB/02/0203/0203000000/GLB0203000000.jsp\" rel=\"nofollow\">site</a> and am looking for code examples to help me figure out how to retrieve the information inside of this JSP control (it's a lot harder than with regular text!). I don't seem to be finding anything with the HTTP headers. Here's my code so far:</p>\n\n<pre><code> my $mech_r = new WWW::Mechanize();\n\n my $uri = 'http://global.krx.co.kr/contents/GLB/02/0203/0203000000/GLB0203000000.jsp';\n print \"Getting '$uri'\\n\";\n my $page = $mech_r-&gt;get($uri);\n\n print \"Parsing data...\";\n my $root = HTML::TreeBuilder-&gt;new_from_content($mech_r-&gt;content());\n\n my ($news_table) = $root-&gt;look_down(\n     sub {\n         defined($_[0]-&gt;tag()) and\n         $_[0]-&gt;tag() eq 'ul' and\n         defined($_[0]-&gt;attr('class')) and\n         $_[0]-&gt;attr('class') eq 'board-list'\n     }\n );\n\n if (!defined($news_table)) {\n     print Dumper($root);\n\n     croak \"Could not get the news table\";\n }\n</code></pre>\n\n<p>I would like to get the title, date and the link.</p>\n\n<p>But is not getting any data as it is being loaded by javascript.</p>\n"}, {"tags": ["git", "perl", "haskell", "configuration", "mercurial"], "comments": [{"owner": {"reputation": 126842, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1453855677, "post_id": 35015051, "comment_id": 57780080, "body": "I don&#39;t really know anything about myrepos, but &quot;the repo is found, but a blank line is printed&quot; sounds to me like <code>SYNCTL</code> isn&#39;t being exported properly. Can you double-check (e.g. with <code>env | grep SYNCTL</code>, assuming that&#39;s actually the <code>env</code> program and not a shell built-in for your shell) that it is being exported and not just defined local to your shell?"}, {"owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "reply_to_user": {"reputation": 126842, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1454326701, "post_id": 35015051, "comment_id": 57978869, "body": "It was as simple as that. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 126842, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 2, "last_activity_date": 1454356364, "creation_date": 1454356364, "answer_id": 35139113, "question_id": 35015051, "link": "https://stackoverflow.com/questions/35015051/passing-environment-variables-to-myrepos-mr/35139113#35139113", "title": "Passing environment variables to myrepos (mr)", "body": "<p>Make sure that you export the <code>SYNCTL</code> environment variable. For example, in <code>bash</code>-alikes, instead of</p>\n\n<pre><code>SYNCTL=$HOME/reponame\n</code></pre>\n\n<p>which only defines a shell-local variable, use</p>\n\n<pre><code>export SYNCTL=$HOME/reponame\n</code></pre>\n\n<p>to make an environment variable that will be inherited by spawned processes.</p>\n"}], "owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454356364, "creation_date": 1453815323, "question_id": 35015051, "link": "https://stackoverflow.com/questions/35015051/passing-environment-variables-to-myrepos-mr", "title": "Passing environment variables to myrepos (mr)", "body": "<p>I'm using joey hess' myrepos tool to manage multiple repos.</p>\n\n<p>At some point, I'd like to pass environment variables to actions and sections so that they get expanded. In particular, I'm passing things like <code>$SYNCTL</code>, which should point to the top level directory where repositores are mounted.</p>\n\n<p>(Note that this has nothing to do with the top-level dir as refered to by myrepos: that's the top level dir above which everything should be ignored, which is different.)</p>\n\n<p>Unfortunately, those variables are not being expanded.</p>\n\n<p>For instance, if I export <code>SYNCTL=/home/myuser</code> and then define the repo:</p>\n\n<pre><code>[$SYNCTL/myrepo]\n</code></pre>\n\n<p>in <code>.mrconfig</code></p>\n\n<p>that is never actually found. <code>$SYNCTL</code> is expanded to nothing, which results in myrepos looking for <code>/myrepo</code>, which obviously does not exist, so myrepos just ignores that section.</p>\n\n<p>I also tried to expand the variable inside the repo section, like so:</p>\n\n<pre><code>[myrepo]\nstatus = echo $SYNCTL\n</code></pre>\n\n<p>but that does not print anything either. In this case, the repo is found, but a blank line is printed.</p>\n\n<p>There are some variables that can be expanded (like <code>HOME</code>), but not all seem to work. I thought it had something to do with <code>--force-env</code>, but running <code>mr --force-env status</code> does not print anything either.</p>\n\n<p>Is there any way to work around this problem? Should there be?</p>\n"}, {"tags": ["perl", "shell", "logging", "cygwin"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 7, "creation_date": 1453810353, "post_id": 35013528, "comment_id": 57753811, "body": "Please provide the text of your script instead of a screen shot.  A shell loop like that is extremely inefficient, but this looks like it could be very easily done in a few lines of Awk."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453814077, "post_id": 35013528, "comment_id": 57755950, "body": "It would help a lot if you explained the results you wanted in English, rather than have us reverse-engineer your requirement from a shell script"}, {"owner": {"reputation": 117, "user_id": 5601649, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4f58460dee9fed350177f942d91c8362?s=128&d=identicon&r=PG&f=1", "display_name": "learning J", "link": "https://stackoverflow.com/users/5601649/learning-j"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453837031, "post_id": 35013528, "comment_id": 57771115, "body": "@tripleee: I I have updated my question. Any suggestions please?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453875045, "post_id": 35013528, "comment_id": 57785924, "body": "The script you show now is different from the one in your screen shot before.  Not hugely different, but you were looking for AND and OR and the number of occurrences."}], "answers": [{"tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 0, "last_activity_date": 1453893137, "last_edit_date": 1453893137, "creation_date": 1453812652, "answer_id": 35014274, "question_id": 35013528, "link": "https://stackoverflow.com/questions/35013528/best-scripting-tool-to-profile-a-log-file/35014274#35014274", "title": "Best scripting tool to profile a log file", "body": "<p>Problems with your script:</p>\n\n<ol>\n<li>The main problem: you append to a file in every statement. This means the file has to be opened and closed in every statement, which is extremely inefficient.</li>\n<li>You hardcode the name of the output file in your script. This is a bad practice. Your script will be much more versatile if it just writes its output to stdout. Leave it to the call to specify where to direct the output. That will also get rid of the previous problem.</li>\n<li><code>bash</code> is interpreted and not optimized for text manipulation: it is bound to be slow, and complex text filtering won't be very readable. Using <code>awk</code> instead will probably make it more concise and more readable (once you know the language); however, if you don't know it yet, I advise learning Perl instead, which is good at what <code>awk</code> is good at but is also general-purpose language: it makes you much far more flexible, allows you to make it even more readable (those who complain about Perl being hard to read have never seen nontrivial shell scripts), and probably makes it a lot faster, because <code>perl</code> compiles scripts prior to running them.  If you'd rather invest your efforts into a more popular language than Perl, try Python.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453876798, "post_id": 35030215, "comment_id": 57786593, "body": "I&#39;m also holding back on doing a Perl version because your question looks too much like &quot;write this in Perl please&quot; and this is not a free coding service."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 1, "last_activity_date": 1453876372, "last_edit_date": 1453876372, "creation_date": 1453876044, "answer_id": 35030215, "question_id": 35013528, "link": "https://stackoverflow.com/questions/35013528/best-scripting-tool-to-profile-a-log-file/35030215#35030215", "title": "Best scripting tool to profile a log file", "body": "<p>Like @reinerpost already pointed out, the loop-internal redirection is probably the #1 killer issue here.  You might be able to reap significant gains already by switching from</p>\n\n<pre><code>while read line; do\n    something &gt;&gt;file\n    something else too &gt;&gt;file\ndone &lt;input\n</code></pre>\n\n<p>to instead do a single redirection after <code>done</code>:</p>\n\n<pre><code>while read line; do\n    something\n    something else too\ndone &lt;input &gt;file\n</code></pre>\n\n<p>Notice how this also simplifies the loop body, and allows you to overwrite the file when you (re)start the script, instead of separately needing to clean out any old results.  As also suggested by @reinerpost, not hard-coding the output file would also make your script more general; simply print to standard output, and let the invoker decide what to do with the results.  So maybe just remove the redirections altogether.</p>\n\n<p>(Incidentally, you should switch to <code>read -r</code> unless you specifically want the shell to interpret backslashes and other slightly weird legacy behavior.)</p>\n\n<p>Additionally, collecting results and doing a single <code>print</code> at the end would probably be a lot more efficient than the repeated unbuffered <code>echo -n -e</code> writes.  (And again, <code>printf</code> would probably be preferrable to <code>echo</code> for both portability and usability reasons.)</p>\n\n<p>The current script could be reimplemented in <code>sed</code> quite easily. You collect portions of the input URL and write each segment to a separate field.  This is easily done in <code>sed</code> with the following logic: Save the input to the hold space.  Swap the hold space and the current pattern space, perform the substitution you want, append to the hold space, and swap back the input into the pattern space.  Repeat as necessary.</p>\n\n<p>Because your earlier script was somewhat more involved, I'm suggesting to use Awk instead.  Here is a crude skeleton for doing things you seem to be wanting to do with your data.</p>\n\n<pre><code>awk '# Make output tab-delimited\n    BEGIN { OFS=\"\\t\" }\n    { xyz_ms = $0; sub(\"^.*XYX:\", \" \", xyz_ms); sub(\"ms.*$\", \"\", xyz_ms);\n      xyz_abc = $0; sub(\"^.*XYZ:\", \" \", xyz_abc); sub(\"ABC.*$\", \"\", xyz_abc);\n      q = $0; sub(\"^.*?q=\", \" \", q); sub(\"AUTH_TYPE:.*$\", \"\", q);\n      # ....\n      # Demonstration of how to count something\n      n = split($0, _, \"&amp;\"); ampersand_count = n-1;\n      # ...\n      # Done: Now print\n      print xyz_mx, xyz_abc, q, \" \" }' queries.csv\n</code></pre>\n\n<p>Notice how we collect stuff in variables and print only at the end.  This is less crucial here than it would have been in your earlier shell script, though.</p>\n\n<p>The big savings here is avoiding to spawn a large number of subprocesses for each input line.  Awk is also better optimized for doing this sort of processing quickly.</p>\n\n<p>If Perl is more convenient for you, converting the entire script to Perl should produce similar benefits, and be somewhat more compatible with the <code>sed</code>-centric syntax you have already.  Perl is bigger and sometimes slower than Awk, but in the grand scheme of things, not by much.  If you really need to optimize, do both and measure.</p>\n"}], "owner": {"reputation": 117, "user_id": 5601649, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4f58460dee9fed350177f942d91c8362?s=128&d=identicon&r=PG&f=1", "display_name": "learning J", "link": "https://stackoverflow.com/users/5601649/learning-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453893137, "creation_date": 1453810107, "last_edit_date": 1453875014, "question_id": 35013528, "link": "https://stackoverflow.com/questions/35013528/best-scripting-tool-to-profile-a-log-file", "title": "Best scripting tool to profile a log file", "body": "<p>I have extracted log files from servers based on my date and time requirement and after extraction it has hundreds of HTTP requests (URLs). Each request may or may not contain various parameters a,b,c,d,e,f,g etc.,</p>\n\n<p>For example:</p>\n\n<pre><code>http:///abcd.com/blah/blah/blah%20a=10&amp;b=20ORC\nhttp:///abcd.com/blah/blah/blahsomeotherword%20a=30&amp;b=40ORC%26D\nhttp:///abcd.com/blah/blah/blahORsomeORANDworda=30%20b=40%20C%26D\nhttp:///abcd.com/blah/blah/\"blah\"%20b=40ORCANDD%20G%20F\n</code></pre>\n\n<p>I wrote a shell script to profile this log file in a while loop, grep for different parameters a,b,c,d,e. If they contain respective parameter then what is the value for that parameter, or TRUE or FALSE.</p>\n\n<pre><code>while read line ; do\n    echo -n -e $line | sed 's/^.*XYZ:/ /;s/ms.*//' &gt;&gt; output.txt\n    echo -n -e \"\\t\" &gt;&gt; output.txt\n    echo -n -e $line | sed 's/^.*XYZ:/ /;s/ABC.*//' &gt;&gt; output.txt\n    echo -n -e \"\\t\" &gt;&gt; output.txt\n    echo -n -e $line | sed 's/^.*?q=/ /;s/AUTH_TYPE:.*//'&gt;&gt; output.txt\n    echo -n -e \"\\t\" &gt;&gt; output.txt\n    echo \" \" &gt;&gt; output.txt\ndone &lt; queries.csv\n</code></pre>\n\n<p>My question is, my cygwin is taking lot of time (an hour or so) to execute on a log file containing 70k-80k requests. Is there a best way to write this script so that it executes asap? I'm okay with perl too. But my concern is, the script is flexible enough to execute and extract parameters.</p>\n"}, {"tags": ["perl", "api", "rt"], "comments": [{"owner": {"reputation": 6743, "user_id": 3392762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3tFTt.gif?s=128&g=1", "display_name": "Progrock", "link": "https://stackoverflow.com/users/3392762/progrock"}, "edited": false, "score": 1, "creation_date": 1453802188, "post_id": 35010993, "comment_id": 57749330, "body": "You are not executing the shell command (see: shell_exec).  Alternatively you could use the php curl api or file_get_contents.  The latter being easiest."}, {"owner": {"reputation": 611, "user_id": 120094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8230d23952353b311cd9a43626a3aeb?s=128&d=identicon&r=PG", "display_name": "Jim Brandt", "link": "https://stackoverflow.com/users/120094/jim-brandt"}, "edited": false, "score": 0, "creation_date": 1453901309, "post_id": 35010993, "comment_id": 57801653, "body": "Request Tracker is written in Perl, including actions in scrips, but I see you tagged your question with PHP. Typo?"}, {"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "edited": false, "score": 0, "creation_date": 1454056291, "post_id": 35010993, "comment_id": 57881976, "body": "sorry forgot to remove i was about to include a question about the php api but already solved it. i will just remove the php from tag. thanks."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "edited": false, "score": 0, "creation_date": 1454056201, "post_id": 35038667, "comment_id": 57881916, "body": "thanks for this. do you have any example? sorry its just that i have no idea :P thanks in advance."}], "tags": [], "owner": {"reputation": 611, "user_id": 120094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8230d23952353b311cd9a43626a3aeb?s=128&d=identicon&r=PG", "display_name": "Jim Brandt", "link": "https://stackoverflow.com/users/120094/jim-brandt"}, "is_accepted": false, "score": 0, "last_activity_date": 1453901215, "creation_date": 1453901215, "answer_id": 35038667, "question_id": 35010993, "link": "https://stackoverflow.com/questions/35010993/calling-an-api-from-replying-to-requestor-request-tracker/35038667#35038667", "title": "Calling an API from replying to requestor [Request Tracker]", "body": "<p>Rather than calling out to the shell to run curl, I would recommend using a module like <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow\">LWP::UserAgent</a>. You can see in the Synopsis the few lines of code to call an external resource. You can <code>use</code> modules in a scrip.</p>\n"}], "owner": {"reputation": 31, "user_id": 3712604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/318f462b361d16d2cb8e6451a1bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "vher", "link": "https://stackoverflow.com/users/3712604/vher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454056314, "creation_date": 1453801931, "last_edit_date": 1454056314, "question_id": 35010993, "link": "https://stackoverflow.com/questions/35010993/calling-an-api-from-replying-to-requestor-request-tracker", "title": "Calling an API from replying to requestor [Request Tracker]", "body": "<p>I was trying to make a custom action where in I have to call a URL and pass parameter upon replying to a ticket from request tracker.</p>\n\n<p>Tried to put this but did not call the URL</p>\n\n<pre><code>my $command = \"curl -X GET 'http://www.example.com/test.php?m=1&amp;msg=testing+1234'\";\n\nmy $output = `$command`;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3103058, "user_type": "registered", "profile_image": "https://graph.facebook.com/1506341568/picture?type=large", "display_name": "Jason Chiang", "link": "https://stackoverflow.com/users/3103058/jason-chiang"}, "edited": false, "score": 0, "creation_date": 1453952385, "post_id": 35014305, "comment_id": 57829069, "body": "Thanks for your answer, too. Your answer also teach me a lot."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 29, "user_id": 3103058, "user_type": "registered", "profile_image": "https://graph.facebook.com/1506341568/picture?type=large", "display_name": "Jason Chiang", "link": "https://stackoverflow.com/users/3103058/jason-chiang"}, "edited": false, "score": 0, "creation_date": 1453955369, "post_id": 35014305, "comment_id": 57829907, "body": "I think the answer you picked is poorly written and doesn&#39;t even answer your question. It hints at Windows portability, but that&#39;s nonsense."}, {"owner": {"reputation": 29, "user_id": 3103058, "user_type": "registered", "profile_image": "https://graph.facebook.com/1506341568/picture?type=large", "display_name": "Jason Chiang", "link": "https://stackoverflow.com/users/3103058/jason-chiang"}, "edited": false, "score": 0, "creation_date": 1454050555, "post_id": 35014305, "comment_id": 57879239, "body": "After reviewing both answer again, I agreed that your answer is better."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1453955471, "last_edit_date": 1453955471, "creation_date": 1453812763, "answer_id": 35014305, "question_id": 35010672, "link": "https://stackoverflow.com/questions/35010672/what-exactly-does-line270-open-m-exec-usr-lib-sendmail-f-from/35014305#35014305", "title": "What exactly does line:270 open (M, &quot;|-&quot;) || exec(&quot;/usr/lib/sendmail&quot;,&quot;-f&quot;,$from,$to) do in smokeping 2.6.11", "body": "<p>The following is the solution you suggest:</p>\n\n<pre><code>open(M, \"| $sendmail -f $from $to\");\n</code></pre>\n\n<p>Switching to this would not be a good idea. It introduces bugs that did not exist in the original due to improper interpolation. Imagine if <code>$sendmail</code> contained a space. Imagine if <code>$to</code> was <code>Foo Bar &lt;foobar@example.com&gt;</code>. To build the shell command properly, you'd have to use</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nopen(M, \"|\" . shell_quote($sendmail, \"-f\", $from, $to));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nopen(M, \"|-\", shell_quote($sendmail, \"-f\", $from, $to));\n</code></pre>\n\n<p>I think they wanted to avoid having to depend on String::ShellQuote, and they wanted to avoid the work of writing the equivalent code.</p>\n\n<hr>\n\n<p>However, there is something better they could have used. They could simply have used the following:</p>\n\n<pre><code>open(M, \"|-\", $sendmail, \"-f\", $from, $to);\n</code></pre>\n\n<p>This does not use a shell. Aside from being simpler and more efficient, this saves us from having to build a shell command. It launches <code>sendmail</code> directly (without going through a shell), and passed the list of arguments to it as-is.</p>\n\n<p>So to answer your question, they use what they used because your version is buggy, and either they didn't know about this version or they wanted compatibility with version of Perl that from before 2000 when this was introduced.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 3103058, "user_type": "registered", "profile_image": "https://graph.facebook.com/1506341568/picture?type=large", "display_name": "Jason Chiang", "link": "https://stackoverflow.com/users/3103058/jason-chiang"}, "edited": false, "score": 0, "creation_date": 1453894934, "post_id": 35030258, "comment_id": 57797146, "body": "It&#39;s b that I was asking."}], "tags": [], "owner": {"reputation": 1, "user_id": 5845187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b5628f49971425c477b351531fbeb5?s=128&d=identicon&r=PG&f=1", "display_name": "user5845187", "link": "https://stackoverflow.com/users/5845187/user5845187"}, "is_accepted": false, "score": 0, "last_activity_date": 1453876210, "creation_date": 1453876210, "answer_id": 35030258, "question_id": 35010672, "link": "https://stackoverflow.com/questions/35010672/what-exactly-does-line270-open-m-exec-usr-lib-sendmail-f-from/35030258#35030258", "title": "What exactly does line:270 open (M, &quot;|-&quot;) || exec(&quot;/usr/lib/sendmail&quot;,&quot;-f&quot;,$from,$to) do in smokeping 2.6.11", "body": "<p>The answers depend considering the question is a little bit vague.</p>\n\n<p>a) if you are asking why the author wrote <code>open (M, \"|-\") || exec(\"bin\")</code> instead of <code>open (M, | bin)</code></p>\n\n<p>The reason might be they cannot make sure where is the executable binary located, meanwhile the alternative will make more duplicate codes.</p>\n\n<p>i.e.</p>\n\n<pre><code>open (M, \"|-\") || exec(\"bin1\" || \"bin2\")\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>open (M, \"| bin1\") or open(M, \"| bin2\")\n</code></pre>\n\n<p>Not to mention that there are some extra parameters for the program.</p>\n\n<p>b) if you are asking the differences between <code>open(M, \"|-\") || exec(\"bin\")</code> and <code>open(M, \"| bin\")</code></p>\n\n<p>AFAIK, there's no differences between them according to the perl's document.</p>\n\n<p>And I would like to add that it would be better if the the focus of this question can be clarified by the author.</p>\n"}], "owner": {"reputation": 29, "user_id": 3103058, "user_type": "registered", "profile_image": "https://graph.facebook.com/1506341568/picture?type=large", "display_name": "Jason Chiang", "link": "https://stackoverflow.com/users/3103058/jason-chiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 35014305, "answer_count": 2, "score": 0, "last_activity_date": 1453955471, "creation_date": 1453800801, "last_edit_date": 1453812413, "question_id": 35010672, "link": "https://stackoverflow.com/questions/35010672/what-exactly-does-line270-open-m-exec-usr-lib-sendmail-f-from", "title": "What exactly does line:270 open (M, &quot;|-&quot;) || exec(&quot;/usr/lib/sendmail&quot;,&quot;-f&quot;,$from,$to) do in smokeping 2.6.11", "body": "<p>line 269@smokeping-2.6.11/lib/Somkeping.pm from <a href=\"http://oss.oetiker.ch/smokeping/pub/smokeping-2.6.11.tar.gz\" rel=\"nofollow\">http://oss.oetiker.ch/smokeping/pub/smokeping-2.6.11.tar.gz</a> shown below,</p>\n\n<pre><code>} elsif ($cfg-&gt;{General}{sendmail} or -x \"/usr/lib/sendmail\"){\n        open (M, \"|-\") || exec (($cfg-&gt;{General}{sendmail} || \"/usr/lib/sendmail\"),\"-f\",$from,$to);\n        print M $body;\n        close M;\n</code></pre>\n\n<p>I am really wondering why not use open instead?</p>\n\n<pre><code>open (M,\"| /usr/lib/sendmail -f $from $to\");\n</code></pre>\n\n<p>What are pros &amp; cons with both method, and when to using them?</p>\n\n<p>I have read <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/open.html</a> already, but I still do not understanding what's actually going on inside this piece of code.</p>\n\n<p>Thanks in advance.</p>\n\n<p>PS. I'm asking open (M, \"|-\") || exec(\"/bin/program\") , I do not need the explanation of cfg sendmail path/hardcode sendmail path </p>\n"}, {"tags": ["perl", "ssh", "rsync"], "comments": [{"owner": {"reputation": 403, "user_id": 3881672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47b10fd6274c1d6e83308fa1dd375007?s=128&d=identicon&r=PG&f=1", "display_name": "Doopy", "link": "https://stackoverflow.com/users/3881672/doopy"}, "edited": false, "score": 0, "creation_date": 1547750832, "post_id": 35010385, "comment_id": 95309170, "body": "How exactly were you trying to connect? In my case, I tried to connect via ssh just to check if I could still login, and received that same error. The reason was that ssh connected without any command to execute remotely, but rrsync prevents that with that strange error message. Executing <code>ssh ... user@server date</code> worked as intended (command denied)."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6313321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34c8984db907385b5dff059c3e2606d7?s=128&d=identicon&r=PG&f=1", "display_name": "LanceB98", "link": "https://stackoverflow.com/users/6313321/lanceb98"}, "is_accepted": false, "score": -1, "last_activity_date": 1462897935, "creation_date": 1462897935, "answer_id": 37144224, "question_id": 35010385, "link": "https://stackoverflow.com/questions/35010385/cant-connect-to-my-server-with-restric-rsync-rrsync/37144224#37144224", "title": "Can&#39;t connect to my server with restric RSYNC (RRSYNC)", "body": "<p>As far as I can tell, this message appears when you try to access the server with the restricted key without using rsync. It may be possible to edit the script to allow other programs, but I'm not skilled enough to attempt that.</p>\n"}], "owner": {"reputation": 55, "user_id": 5817759, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bc6ffca8ee33fd6cd53a992f56cc88c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperTumn", "link": "https://stackoverflow.com/users/5817759/supertumn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462898844, "creation_date": 1453799806, "last_edit_date": 1462898844, "question_id": 35010385, "link": "https://stackoverflow.com/questions/35010385/cant-connect-to-my-server-with-restric-rsync-rrsync", "title": "Can&#39;t connect to my server with restric RSYNC (RRSYNC)", "body": "<p>I explain my problem:</p>\n\n<p>I used backuppc for remote some database on an other server and for saving my data I used rsync which uses ssh. On my remote server I put the ssh key of backuppc and it worked. </p>\n\n<p>But I wanted to secure this connexion, so I used <code>rrsync</code> (a perl script for restrict the access), for a \"read-only\" access with copy.</p>\n\n<p>So now, in the remote server I have in root/ssh/authorized_keys</p>\n\n<pre><code>command=\"/usr/local/bin/rrsync -ro /\" ssh-rsa \n</code></pre>\n\n<p>But when I try to connect I have this message: </p>\n\n<pre><code>/usr/local/bin/rrsync: Not invoked via sshd\n</code></pre>\n\n<p>It's a message from the perl script, but I don't know what it means or what can I do for this to work.</p>\n"}, {"tags": ["perl", "unicode", "character-encoding", "ascii"], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1453830288, "last_edit_date": 1495542207, "creation_date": 1453787793, "answer_id": 35007796, "question_id": 35006716, "link": "https://stackoverflow.com/questions/35006716/unexpected-behavior-of-htmlentities/35007796#35007796", "title": "Unexpected behavior of HTML::Entities", "body": "<p>The difference between your first and second example is that the first one does not contain any code points above 255, while the second one does. So, the first string can be displayed according to the native 8-bit character set of your system (most likely ISO 8859-1/Latin 1), but the second cannot. The reason for this, according to <a href=\"http://perldoc.perl.org/perlunicode.html\" rel=\"nofollow noreferrer\">perlunicode</a>, is that \"using a code point above 255 implies Unicode for the whole string\". </p>\n\n<p>Since you now have Unicode characters in your string, you'll need to properly encode your text for output, otherwise you'll see \"strange characters\" (just like the ones in your example!). Since you didn't provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>, I'm not sure what your output method is, but let's just assume <code>STDOUT</code> to make things easy. There are a couple different ways to encode your text into an octet stream:</p>\n\n<ol>\n<li>Manually, using the <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow noreferrer\">Encode</a> module</li>\n<li>Automatically, using the correct I/O layer</li>\n</ol>\n\n<p>I prefer the second option because it's less tedious. To do that, we'll just call <a href=\"http://perldoc.perl.org/functions/binmode.html\" rel=\"nofollow noreferrer\"><code>binmode()</code></a> on <code>STDOUT</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::Entities;\n\nmy $str = 'Big changes could be coming to Utah&amp;#8217;s criminal justice&amp;nbsp;system';\nmy $decoded = decode_entities($str);\n\nbinmode(STDOUT, ':encoding(UTF-8)');\nprintf(\"%s\\n%vx\\n\", $decoded, $decoded);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl foo.pl\nBig changes could be coming to Utah\u2019s criminal justice\u00a0system\n42.69.67.20.63.68.61.6e.67.65.73.20.63.6f.75.6c.64.20.62.65.20.63.6f.6d.69.6e.67.20.74.6f.20.55.74.61.68.2019.73.20.63.72.69.6d.69.6e.61.6c.20.6a.75.73.74.69.63.65.a0.73.79.73.74.65.6d\n</code></pre>\n\n<p>You can see that there's code point <code>2019</code> (<a href=\"http://www.codetable.net/hex/2019\" rel=\"nofollow noreferrer\">right single quotation mark</a>) between characters <code>68</code> and <code>73</code> (<em>h</em> and <em>s</em>, respectively), and also an <code>a0</code> (<a href=\"http://www.codetable.net/hex/a0\" rel=\"nofollow noreferrer\">non-breaking space</a>) between <code>65</code> and <code>73</code>, which would be <em>e</em> and <em>s</em>.</p>\n\n<p>In addition to the aforementioned <a href=\"http://perldoc.perl.org/perlunicode.html\" rel=\"nofollow noreferrer\">perlunicode</a> reference, you should also read <a href=\"http://perldoc.perl.org/perluniintro.html\" rel=\"nofollow noreferrer\">perluniintro</a>, <a href=\"http://perldoc.perl.org/perlunitut.html\" rel=\"nofollow noreferrer\">perlunitut</a> (short!), and <a href=\"http://perldoc.perl.org/perlunifaq.html\" rel=\"nofollow noreferrer\">perlunifaq</a> if you're interested in learning more about how Perl handles Unicode and character encoding in general.</p>\n"}], "owner": {"reputation": 9, "user_id": 3733701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b92350dac99514bc6674008fe7413e?s=128&d=identicon&r=PG&f=1", "display_name": "user3733701", "link": "https://stackoverflow.com/users/3733701/user3733701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453830945, "creation_date": 1453779664, "last_edit_date": 1453830945, "question_id": 35006716, "link": "https://stackoverflow.com/questions/35006716/unexpected-behavior-of-htmlentities", "title": "Unexpected behavior of HTML::Entities", "body": "<p>I'm a newbie user of Perl's HTML::Entities routine <code>decode_entities()</code> to\nconvert headlines scraped from news media websites. </p>\n\n<p>Here's a good result:  </p>\n\n<p>Before: <code>Texas grand jury clears Planned Parenthood, indicts its&amp;nbsp;accusers</code><br>\nAfter: <code>Texas grand jury clears Planned Parenthood, indicts its accusers</code></p>\n\n<p>But here's a puzzling result:</p>\n\n<p>Before: <code>Big changes could be coming to Utah&amp;#8217;s criminal justice&amp;nbsp;system</code><br>\nAfter: <code>Big changes could be coming to Utah\u00e2s criminal justice\u00c2\u00a0system</code></p>\n\n<p>Notice that not only was the <code>&amp;#8217;</code> code not converted to a single quote, the <code>&amp;nbsp;</code> wasn't decoded into a space, unlike in the first example. </p>\n\n<p>What's going on?</p>\n"}, {"tags": ["perl", "unit-testing", "mocking"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1453798865, "post_id": 35005884, "comment_id": 57747420, "body": "Can you explain a bit more detailed what you are trying to do, and why?"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453853564, "post_id": 35005884, "comment_id": 57779446, "body": "@simbabque, I am new to mock as most of my unittests cannot proceed without mock. It seems to me that mocking a parameter is similar to mocking a variable inside a sub, but mocking a parameter now seems to be unnecessary after your asking why. I have no idea how to do it in perl. thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1453881352, "post_id": 35005884, "comment_id": 57788721, "body": "You don&#39;t mock a variable. You mock a dependency. That can be a sub, or an object, or even a whole RDBMS. You should read up on dependency injection. Show your program and explain which part you want to write the test for, and I will help."}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453937724, "post_id": 35005884, "comment_id": 57824787, "body": "@simbabque, I think your comments is the answer that I am looking for, I had the wrong concept about mocking, If you copy the comment to the answer, I will mark it as the accepted answer. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453976288, "post_id": 35058612, "comment_id": 57840338, "body": "Oops. This thing turned out longer than I intended... I hope it&#39;s useful to someone. :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1453987384, "post_id": 35058612, "comment_id": 57848005, "body": "Wow, mocking seems fun.. Thanks for the nice introduction."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1453989109, "post_id": 35058612, "comment_id": 57849276, "body": "@H&#229;konH&#230;gland yes, it&#39;s very useful. Unfortunately there are no really good guides for modern testing of more complicated programs available online. It&#39;s all very small things, or just documentation. Maybe someone should write one as a blog.perl.org post... Sounds like I&#39;m volunteering... :D"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 1, "creation_date": 1454111834, "post_id": 35058612, "comment_id": 57914092, "body": "my goal is to benefit 10 readers for your answer, There are not many perl mocking posts around."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1454113581, "post_id": 35058612, "comment_id": 57914607, "body": "@g thank you for being so happy about my answer. I&#39;m really flattered. But remember that it&#39;s for the community as well. One day you might be the random guy on the Internet that invests half an hour of their time to help a total stranger. It&#39;s great having those people, but it&#39;s also fun to be that guy once in a while. Learn and participate here. And maybe watch <a href=\"https://youtu.be/CjOQZf0Ad74\" rel=\"nofollow noreferrer\">youtu.be/CjOQZf0Ad74</a>, you might enjoy it. :-)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1453976797, "last_edit_date": 1495541716, "creation_date": 1453976268, "answer_id": 35058612, "question_id": 35005884, "link": "https://stackoverflow.com/questions/35005884/is-it-possible-to-mock-or-patch-a-input-parameter-in-perl/35058612#35058612", "title": "Is it possible to mock or patch a input parameter in perl?", "body": "<p>You cannot mock a variable, you have to mock a dependency. That dependency can be a sub, an object, or maybe even a whole RDBMS. The code in the question looks like it's a test to prove that the mocking works, so I will try to stick with that in my examples.</p>\n\n<p>When you mock an object, that is called <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">dependency injection</a>. I will talk about that later on in the answer. </p>\n\n<p>For reasons of space and <a href=\"http://threevirtues.com/\" rel=\"nofollow noreferrer\">laziness</a>, please assume every single piece of code in this answer starts with: </p>\n\n<pre><code>use strict; \nuse warnings;\n</code></pre>\n\n<h2>Mocking a single sub</h2>\n\n<p>Sometimes that's not possible because of the way the code is designed. In that case, you need to mock a function (which is a sub in Perl) or two, or maybe a whole module. The latter is hardly ever needed.</p>\n\n<p>The easiest way to override a single sub (or several) is <a href=\"https://metacpan.org/pod/Sub::Override\" rel=\"nofollow noreferrer\">Sub::Override</a>. It's useful for unit testing, but not limited to it.</p>\n\n<pre><code>use Test::More;\nuse Sub::Override;\nuse DateTime;\n\nmy $dt = DateTime-&gt;now;\n\n{   # scoped in this block\n    my $override = Sub::Override-&gt;new( 'DateTime::year', sub { 2015 } );\n    is $dt-&gt;year, 2015, 'Year is 2015';\n}\n\nisnt $dt-&gt;year, 2015, 'Year is NOT 2015';\n\ndone_testing;\n\n__END__\nok 1 - Year is 2015\nok 2 - Year is NOT 2015\n1..2\n</code></pre>\n\n<p>As we can see, the sub was overridden, but only in the given scope. That is pretty useful, because it is quick, easy to remember and also easy to read, which is a very important factor to consider. Here is a made-up example.</p>\n\n<pre><code>package Foo;\nrequire Weird::Legacy::Dependency;\n\nsub hello {\n    my $name = shift;\n    my $hi = Weird::Legacy::Dependency::rnd_salutation();\n    return \"$hi, $name\";\n}\n</code></pre>\n\n<p>In this code that we need to test, there is a horrible legacy dependency that we cannot yet refactor. The author was fond of spagetti, and the stuff is pretty illegible. It might return stuff like this:</p>\n\n<pre><code>Hi, Bob\nHallo, Bob\nGood Afternoon, Bob\n\u0532\u0561\u0580\u0565\u0582, Bob\n</code></pre>\n\n<p>So how do we deal with that? Of course, we override the sub <code>rnd_salutation</code>.</p>\n\n<pre><code>use Test::More;\nuse Sub::Override;\n\n{   # scoped in this block\n    my $override = Sub::Override-&gt;new(\n      'Weird::Legacy::Dependency::rnd_salutation', sub { 'Hi' } );\n    is Foo::hello('Joe'), 'Hi, Joe', 'Say hi to Joe';\n}\n</code></pre>\n\n<p>Now we can make sure that <code>hello</code> does exactly <code>&lt;given_salutation&gt;, $name</code>  although we don't know what kind of random stuff is coming out of the legacy function.</p>\n\n<h2>Mocking an object</h2>\n\n<p>If your code is object-oriented, you can make every dependency injectable. That way, you can controll even more. A very typical example of that is a database connection, or an LWP object. Here is a simplified example. This code could be a full-blown client for some API.</p>\n\n<pre><code>package My::WebserviceClient;\nuse Moose;\nuse LWP::UserAgent;\n\nhas ua =&gt; (\n    is      =&gt; 'ro',\n    isa     =&gt; 'LWP::UserAgent',\n    default =&gt; sub { LWP::UserAgent-&gt;new },\n);\n\nsub call {\n    my ($self, $url) = @_;\n\n    my $res = $self-&gt;ua-&gt;get($url);\n    return $res-&gt;content if $res-&gt;is_success;\n}\n\npackage main;\n\nmy $client = My::WebserviceClient-&gt;new;\nprint length $client-&gt;call('http://www.example.org');\n</code></pre>\n\n<p>Now to test that, we don't want it to actually go and fetch something. So we need to mock it. Let's make a <a href=\"https://metacpan.org/pod/Test::MockObject\" rel=\"nofollow noreferrer\">mock object</a> that has a <code>get</code> method and returns a fixed <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">HTTP::Response</a>.</p>\n\n<pre><code>use Test::More;\nuse Test::MockObject;\nuse HTTP::Response;\nuse My::WebserviceClient;\n\n# prepare the mock object\nmy $mock = Test::MockObject-&gt;new;\n$mock-&gt;set_isa('LWP::UserAgent');\n\n# set up a response object\nmy $res = HTTP::Response-&gt;new( 200, 'OK', [], 'Hello' );\n$mock-&gt;set_always( 'get', $res );\n\n# here we INJECT the DEPENDENCY\nmy $client = My::WebserviceClient-&gt;new( ua =&gt; $mock );\n\nis $client-&gt;call('http://www.example.org/'), 'Hello', \n  'Just the content is returned';\n\ndone_testing;\n\n__END__\nok 1 - Just the content is returned\n</code></pre>\n\n<p>This will work, because the <code>get</code> method in the mocked user agent now always returns our prepared HTTP::Response object. This way, we can also test whether the program handles 404 repsonses correctly.</p>\n\n<h2>Mocking both at the same time</h2>\n\n<p>But sometimes it's not possible to inject the dependency. What if the author of the program was too lazy<sup>1</sup> to set up a property for the user agent and did this instead?</p>\n\n<pre><code>package My::WebserviceClient;\nuse Moose;\nuse LWP::UserAgent;\n\nsub call {\n    my ( $self, $url ) = @_;\n\n    my $res = LWP::UserAgent-&gt;new-&gt;get($url);\n    return $res-&gt;content if $res-&gt;is_success;\n}\n</code></pre>\n\n<p>Now the injection does not work any more. We need to do something else. Test::MockObject discourages the use of its <code>fake_module</code> method, because Test::MockModule can do a better job. We need to use it to mock the <code>new</code> method in LWP::UserAgent, so it returns our mocked user agent object that we did in the test before.</p>\n\n<pre><code>use Test::More;\nuse Test::MockObject;\nuse Test::MockModule;\nuse HTTP::Response;\nuse My::WebserviceClient;\n\n# prepare the mock object\nmy $mock_ua = Test::MockObject-&gt;new;\n$mock_ua-&gt;set_isa('LWP::UserAgent');\n\n# set up a response object\nmy $res = HTTP::Response-&gt;new( 200, 'OK', [], 'Hello' );\n$mock_ua-&gt;set_always( 'get', $res );\n\n# Now we need to mock LWP::UserAgent's new to return our\n# mocked object\n{\n    my $module = Test::MockModule-&gt;new('LWP::UserAgent');\n    $module-&gt;mock( 'new', sub { return $mock_ua } );\n\n    my $client = My::WebserviceClient-&gt;new;\n    # inside of call, it will now use our mocked LWP::UA::new\n    is $client-&gt;call('http://www.example.org/'), 'Hello', \n      'Just the content is returned';\n}\n\ndone_testing;\n\n__END__\nok 1 - Just the content is returned\n</code></pre>\n\n<p>Of course in this case we could have used Sub::Override as well. I think this is a matter of preference.</p>\n\n<p>Also note that there is <a href=\"https://metacpan.org/pod/Test::LWP::UserAgent\" rel=\"nofollow noreferrer\">Test::LWP::UserAgent</a>, which provides a lot of nice features for the specific case of mocking a user agent. I just picked LWP as a quick example. For real code, I would prefer Test::LWP::UserAgent.</p>\n\n<h1>Mocking other stuff</h1>\n\n<p>If you need to deal with a database (like MySQL), it's nice to use <a href=\"https://metacpan.org/pod/DBD::sqlite\" rel=\"nofollow noreferrer\">DBD::sqlite</a> and dependency injection to just supply a fake complete database, but a real <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a>. That even works with <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow noreferrer\">DBIx::Class</a>. On the other hand, if the database code is part of what you want to test, to verify e.g. if the code inserts the right stuff, you can use <a href=\"https://metacpan.org/pod/Test::DatabaseRow\" rel=\"nofollow noreferrer\">Test::DatabaseRow</a>. In general, it's good to just look at the Test:: namespace on CPAN. There are some fun things on there. You can <a href=\"https://metacpan.org/pod/Test::Time\" rel=\"nofollow noreferrer\">mock the <code>time</code></a>, or a <a href=\"https://metacpan.org/pod/Test::URI\" rel=\"nofollow noreferrer\">URI</a>, or <a href=\"https://metacpan.org/pod/Test::Cmd\" rel=\"nofollow noreferrer\">the output of external scripts</a>, or even <a href=\"https://metacpan.org/pod/Test::Class::Moose\" rel=\"nofollow noreferrer\">wrap all your tests in individual Moose classes</a> to organize your test suite in a nice way.</p>\n\n<p>I suggest taking a look at <em>Perl Testing: A Developer's Notebook</em> by Ian Langworth, which gives a pretty broad introduction to the matter. Another good resource is <a href=\"https://stackoverflow.com/users/8003/ovid\">Ovid</a>'s <a href=\"https://github.com/Ovid/example-test-training-material\" rel=\"nofollow noreferrer\">free test training on github</a>.</p>\n\n<hr>\n\n<p><sup><sup>1)</sup> Note that this is the bad kind of lazy!</sup></p>\n"}], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 2, "accepted_answer_id": 35058612, "answer_count": 1, "score": 2, "last_activity_date": 1453984289, "creation_date": 1453773725, "last_edit_date": 1453984289, "question_id": 35005884, "link": "https://stackoverflow.com/questions/35005884/is-it-possible-to-mock-or-patch-a-input-parameter-in-perl", "title": "Is it possible to mock or patch a input parameter in perl?", "body": "<p>It seems that in python, mock.patch can patch an input</p>\n\n<p>Is it possible to mock a input parameter in perl? and how? Here is the output:</p>\n\n<pre><code>not ok 1 - expect: 59, got: 1\n</code></pre>\n\n<p>The code I had so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Test::More;\nuse Test::MockObject;\nuse Date::Calc;\n\n# scope of mocked Date::Calc\n{\n    my $import;\n    my $mock = Test::MockObject-&gt;new();\n    $mock-&gt;fake_module('Date::Calc', import =&gt; sub { $import = caller} );\n    $mock-&gt;fake_new('Date::Calc');\n    $mock-&gt;mock('Days_in_Year', sub {print \"how to mock parameter - month to be 2\\n\"});\n    # is it possible to mock a parameter? how if possible?\n    my $days_mock = $mock-&gt;Days_in_Year(2015,6);\n    ok($days_mock == 59, \"expect: 59, got: $days_mock\\n\");\n}\n\n# unmocked module and methods\nmy $days_in_year = Date::Calc::Days_in_Year(2015,6);\nok($days_in_year == 181, \"expect: 181, got: $days_in_year\\n\");\ndone_testing(2);\n</code></pre>\n"}, {"tags": ["perl", "ssh", "cgi", "net-ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1453796233, "post_id": 35005534, "comment_id": 57746132, "body": "Net::SSH::Perl does not support doing that. <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a> does, through the <code>proxy_command</code> feature or the never-released-to-CPAN-but-functional <a href=\"https://github.com/salva/p5-Net-OpenSSH-Gateway\" rel=\"nofollow noreferrer\">Net::OpenSSH::Gateway</a> module."}], "owner": {"reputation": 77, "user_id": 3757788, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1a25c287c12638346d66ea744cf65eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Vamshi", "link": "https://stackoverflow.com/users/3757788/vamshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453808285, "creation_date": 1453771287, "last_edit_date": 1453781877, "question_id": 35005534, "link": "https://stackoverflow.com/questions/35005534/how-can-i-ssh-to-a-remote-host-from-another-remote-ssh-session-using-perl-cgi", "title": "How can I ssh to a remote host from another remote ssh session using perl cgi?", "body": "<p>Here is my cgi script using which I can login to ssh1 session but unable to login to another session ssh2 from the remote session ssh1.</p>\n\n<pre><code>my $host1=xxx;  \nmy $host2=xxx;  \nmy $user=xxx;  \nmy $pass=xxx;  \n\n//two sessions  \nmy $ssh1 = Net::SSH::Perl-&gt;new($host1);   \nmy $ssh2 = Net::SSH::Perl-&gt;new($host2);\n\n\n$ssh1-&gt;login($user, $pass); \n//using this, I am able to login to ssh session1 and execute my commands\n\n\n$ssh1-&gt;cmd($ssh2-&gt;login($user, $pass));\n//I am unable to login the session2($ssh2) from session1($ssh1)\n</code></pre>\n"}, {"tags": ["perl", "if-statement", "optimization"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 7, "creation_date": 1453767298, "post_id": 35004542, "comment_id": 57737664, "body": "You shouldn&#39;t try to optimise your code until you have a working program and found it to be too slow. In any case there are many other places to look that are far more likely to reward you with improved speed than switching the <code>if</code> and the <code>else</code> clauses of a conditional statement"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 11, "creation_date": 1453767301, "post_id": 35004542, "comment_id": 57737666, "body": "If this micro-optimization speeds up your program in any meaningful way, you don&#39;t have enough real problems to solve."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1453772824, "post_id": 35004542, "comment_id": 57739373, "body": "I was surprised when I benchmarked this and saw a significant (relative) difference. <code>$a = &quot;abc&quot;; if ($a eq &quot;abc&quot;) ...</code> and <code>$a = &quot;not abc&quot;; if ($a ne &quot;abc&quot;) ...</code> were both ~100% faster than the alternatives (on my machine, with my possibly flawed benchmark). This is interesting, but when you consider that even the slower of the two executes more than <i>11 million times per second</i>, it should become obvious that it&#39;s a waste of your time to optimize this. The key to optimization is optimizing bottlenecks; this will not be the bottleneck for any real program."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1453798745, "post_id": 35004542, "comment_id": 57747353, "body": "<code>$a</code> and <code>$b</code> are reserved for use in <code>sort</code> blocks. Don&#39;t use them for other stuff."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453823098, "post_id": 35004542, "comment_id": 57762407, "body": "And as even more evidence of why you shouldn&#39;t bother: my previous benchmark had no-ops in the <code>if</code> and <code>else</code> blocks; I ran a new benchmark that actually did something, and the results were reversed (and the differences much less pronounced)."}, {"owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453826402, "post_id": 35004542, "comment_id": 57764781, "body": "@ThisSuitIsBlackNot: What do you mean no-ops?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453826725, "post_id": 35004542, "comment_id": 57765013, "body": "@Bijan <code>1;</code>, which does nothing and in this particular case is optimized away entirely from the <code>if</code> block (although not the <code>else</code> block, apparently)."}], "answers": [{"tags": [], "owner": {"reputation": 1109, "user_id": 4585960, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153097867072505/picture?type=large", "display_name": "Kenny Grage", "link": "https://stackoverflow.com/users/4585960/kenny-grage"}, "is_accepted": true, "score": 1, "last_activity_date": 1453854940, "creation_date": 1453854940, "answer_id": 35026729, "question_id": 35004542, "link": "https://stackoverflow.com/questions/35004542/perl-if-else-optimization/35026729#35026729", "title": "Perl If/Else Optimization", "body": "<p>If you are typically going to go to the else block in the first example, then yes, the second example would be a little bit faster. However, when I say a little bit, I mean a very small amount of optimization that you probably won't notice unless you are running the code millions of times.</p>\n"}], "owner": {"reputation": 5913, "user_id": 2893712, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba3bea502f3cde271b0d8d9a0b957afc?s=128&d=identicon&r=PG", "display_name": "Bijan", "link": "https://stackoverflow.com/users/2893712/bijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 35026729, "answer_count": 1, "score": 0, "last_activity_date": 1453854940, "creation_date": 1453765118, "question_id": 35004542, "link": "https://stackoverflow.com/questions/35004542/perl-if-else-optimization", "title": "Perl If/Else Optimization", "body": "<p>Suppose I have a string <code>$a = \"abc\";</code></p>\n\n<p>In terms of optimization and speed, would it be faster if I ran</p>\n\n<pre><code>if ($a ne \"abc\") {\n    print \"Not abc\";\n} else {\n    print \"abc\";\n}\n</code></pre>\n\n<p>Versus</p>\n\n<pre><code>if ($a eq \"abc\") {\n    print \"abc\";\n} else {\n    print \"Not abc\";\n}\n</code></pre>\n\n<p>? I am asking  because I have a loop that will typically enter the <code>else</code> statement and I wanted to know if I could make it run more efficiently by switching the if/else clauses</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453760764, "post_id": 35003462, "comment_id": 57735291, "body": "So the difference between the two is the syntax we use to call the text within the parentheses?"}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": false, "score": 2, "last_activity_date": 1453760186, "creation_date": 1453760186, "answer_id": 35003462, "question_id": 35003212, "link": "https://stackoverflow.com/questions/35003212/difference-between-parentheses-for-capturing-and-back-references-in-perl/35003462#35003462", "title": "Difference between Parentheses for Capturing and Back References in Perl", "body": "<p>There is no difference.  Parentheses capture (unless it's one of the <code>(?...)</code> constructs).  You can use the captured text as a backreference or with capture variables (<code>$1</code>) (or both).</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1453771772, "creation_date": 1453771772, "answer_id": 35005602, "question_id": 35003212, "link": "https://stackoverflow.com/questions/35003212/difference-between-parentheses-for-capturing-and-back-references-in-perl/35005602#35005602", "title": "Difference between Parentheses for Capturing and Back References in Perl", "body": "<p>A part of a regex pattern enclosed in parentheses will be <em>captured</em> if the pattern as a whole matches. It is irrelevant how that captured substring is used. Captures are numbered starting from 1 from left to right in the order that their opening parenthesis appear in the regex pattern</p>\n\n<ul>\n<li><p>It may be used as a <em>back-reference</em> later on inside the same pattern by using the sequence <code>\\1</code> etc. or (preferably) <code>\\g1</code> etc.</p></li>\n<li><p>It may be used <em>outside</em> the pattern as a simple string value <code>$1</code> etc. either in the replacement part of a substitution or in subsequent Perl code</p></li>\n</ul>\n\n<p>You can use the captured string in both ways at once, for instance</p>\n\n<pre><code>say $1 if $str =~ /(.)\\g1/;\n</code></pre>\n\n<p>Note that if the pattern fails to match, the value of <code>$1</code> will be <em>unchanged</em> from the most recent successful match, so any use of <code>$1</code> etc. should be conditional on the successful match of the pattern from which it is to be drawn</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1454710417, "last_edit_date": 1454710417, "creation_date": 1453826612, "answer_id": 35019126, "question_id": 35003212, "link": "https://stackoverflow.com/questions/35003212/difference-between-parentheses-for-capturing-and-back-references-in-perl/35019126#35019126", "title": "Difference between Parentheses for Capturing and Back References in Perl", "body": "<p>There is no difference. There aren't even two things two compare. There's just <code>(...)</code>.</p>\n\n<p>It can be used to backreference. <code>\\1</code> is a regular expression atom that matches what the first capture captured. This can only be used in regular expression patterns.</p>\n\n<p>It can be used to capture. <code>$1</code> is a Perl variable that contains what the first capture captured. This can only be in used in Perl code.</p>\n"}], "owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 35005602, "answer_count": 3, "score": 2, "last_activity_date": 1454710417, "creation_date": 1453759118, "question_id": 35003212, "link": "https://stackoverflow.com/questions/35003212/difference-between-parentheses-for-capturing-and-back-references-in-perl", "title": "Difference between Parentheses for Capturing and Back References in Perl", "body": "<p>I'm just starting to learn Perl, and I wanted to know the difference between parentheses for capturing and back references in Perl, and what situations where each one would be more useful?</p>\n\n<p>When I say parentheses for capturing, I'm referring to something like the following:</p>\n\n<pre><code>if ($email =~ /([^@]+)@(.+)/) {\n    print \"Username is $1\\n\";\n    print \"Hostname is $2\\n\";\n}\n</code></pre>\n\n<p>When I say back referencing, I'm refering to something like the following:</p>\n\n<pre><code># (.)\\1\n# (.) = capture group; \\1 = reference group\n# (.)(.)\\2\\1; This pattern has 2 capture groups\n# (.)(.)\\g{2}\\g{1}; This pattern is safer. Can't be confused w/ digits\n</code></pre>\n\n<p>If my syntax is incorrect w\\ the back referencing, please let me know because I'm not 100% sure how the syntax works for back referencing. </p>\n"}, {"tags": ["bash", "perl", "loops", "logfile"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1453745162, "post_id": 34997256, "comment_id": 57726411, "body": "Are they dates sorted in reverse order like that?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5640126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b5e73cadfbb3d042e7fae82414226a?s=128&d=identicon&r=PG&f=1", "display_name": "Simona", "link": "https://stackoverflow.com/users/5640126/simona"}, "edited": false, "score": 0, "creation_date": 1453739507, "post_id": 34997312, "comment_id": 57723039, "body": "Tried this, it prints the lines over and over (like in a loop) too. What could be causing this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453741862, "post_id": 34997312, "comment_id": 57724566, "body": "Your first solution doesn&#39;t work if there&#39;s 0 records with the later date, if there&#39;s 0 records with the earlier date, or if there are 2+ records with the earlier date."}], "tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 2, "last_activity_date": 1453740187, "last_edit_date": 1453740187, "creation_date": 1453738922, "answer_id": 34997312, "question_id": 34997256, "link": "https://stackoverflow.com/questions/34997256/how-do-i-output-data-between-two-dates-in-bash/34997312#34997312", "title": "How do I output data between two dates in bash?", "body": "<p>If the lines are sorted by date, you could simply use the Perl's <code>..</code> <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow\">range operator</a>:</p>\n\n<pre><code>perl -ne 'print if /2014-12-31/ .. /2014-12-23/' file.txt\n</code></pre>\n\n<p>To fix your one-liner, swap the <code>le</code> and <code>ge</code> operators to set the range correctly:</p>\n\n<pre><code>perl -ne 'if ( m/^([0-9-]+)/ ) { $date = $1; print if ( $date le \"2014-12-31\" and $date ge \"2014-12-23\" ) }' file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1453828258, "last_edit_date": 1453828258, "creation_date": 1453742120, "answer_id": 34998352, "question_id": 34997256, "link": "https://stackoverflow.com/questions/34997256/how-do-i-output-data-between-two-dates-in-bash/34998352#34998352", "title": "How do I output data between two dates in bash?", "body": "<p>You're printing the records with dates <em>before</em> your start date and <em>after</em> your end date.<br>\nYou should be printing the records with dates <em>after</em> your start date and <em>before</em> your end date.<br>\nTo fix, just flip the dates around:</p>\n\n<pre><code>perl -ne'if ( m/^([0-9-]+)/ ) { $date = $1; print if ( $date ge \"2014-12-23\" and $date le \"2014-12-31\" ) }'\n</code></pre>\n\n<p>Shorter version:</p>\n\n<pre><code>perl -ane'print if $F[0] ge \"2014-12-23\" &amp;&amp; $F[0] le \"2014-12-31\"'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453745028, "post_id": 34999189, "comment_id": 57726339, "body": "What a waste! String comparisons are perfectly fine."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1453744988, "creation_date": 1453744988, "answer_id": 34999189, "question_id": 34997256, "link": "https://stackoverflow.com/questions/34997256/how-do-i-output-data-between-two-dates-in-bash/34999189#34999189", "title": "How do I output data between two dates in bash?", "body": "<p>I have to say - I'd probably tackle it by parsing the time and date stamps into epoch times, then comparing those. </p>\n\n<p>So something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Time::Piece;\nmy $end = Time::Piece-&gt;strptime( \"2014-12-31\", \"%Y-%m-%d\" );\nmy $start = Time::Piece-&gt;strptime( \"2014-12-23\", \"%Y-%m-%d\" );\n\nwhile ( &lt;DATA&gt; ) {\n    my $t = Time::Piece-&gt;strptime( (split)[0], \"%Y-%m-%d\" );\n    print if $t &gt; $start and $t &lt; $end;\n}\n\n__DATA__\n2014-12-31 531.252429 532.602384 525.802363 526.402397 1368200 526.402397\n2014-12-30 528.092396 531.152424 527.132366 530.422394 876300 530.422394\n2014-12-29 532.192446 535.482414 530.013375 530.332426 2278500 530.332426\n2014-12-26 528.772422 534.252417 527.312364 534.032454 1036000 534.032454\n2014-12-24 530.512424 531.761394 527.022384 528.772422 705900 528.772422\n2014-12-23 527.00237 534.56241 526.292354 530.592416 2197600 530.592416\n</code></pre>\n\n<p>It's converting your date stamp into an epoch (second since 1970) as you would get from <code>time()</code>. </p>\n\n<p>You could probably collapse this down to a one liner:</p>\n\n<pre><code>perl -MTime::Piece -ane 'BEGIN{@R=map { Time::Piece-&gt;strptime($_, \"%Y-%m-%d\") } qw ( 2014-12-23 2014-12-31 )} $t = Time::Piece-&gt;strptime($F[0],\"%Y-%m-%d\"); print if $t &gt; $R[0] and $t &lt; $R[1]'\n</code></pre>\n\n<p>Now, I know that's a bit heavyweight for your use case, but the advantage of doing this is that it can quite easily support different date formats. </p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1453745711, "creation_date": 1453745711, "answer_id": 34999435, "question_id": 34997256, "link": "https://stackoverflow.com/questions/34997256/how-do-i-output-data-between-two-dates-in-bash/34999435#34999435", "title": "How do I output data between two dates in bash?", "body": "<p>Since your dates are ISO 8601, you can compare lexicographically. </p>\n\n<p>You do not need a regex; just use awk like auto split.</p>\n\n<p>Given:</p>\n\n<pre><code>$ echo \"$dates\"\n2014-12-31 531.252429 532.602384 525.802363 526.402397 1368200 526.402397\n2014-12-30 528.092396 531.152424 527.132366 530.422394 876300 530.422394\n2014-12-29 532.192446 535.482414 530.013375 530.332426 2278500 530.332426\n2014-12-26 528.772422 534.252417 527.312364 534.032454 1036000 534.032454\n2014-12-24 530.512424 531.761394 527.022384 528.772422 705900 528.772422\n2014-12-23 527.00237 534.56241 526.292354 530.592416 2197600 530.592416\n</code></pre>\n\n<p>You can do:</p>\n\n<pre><code>$ echo \"$dates\" | perl -lane 'print if $F[0] gt \"2014-12-28\" &amp;&amp; $F[0] lt \"2014-12-31\"'\n2014-12-30 528.092396 531.152424 527.132366 530.422394 876300 530.422394\n2014-12-29 532.192446 535.482414 530.013375 530.332426 2278500 530.332426\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5640126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b5e73cadfbb3d042e7fae82414226a?s=128&d=identicon&r=PG&f=1", "display_name": "Simona", "link": "https://stackoverflow.com/users/5640126/simona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1453828258, "creation_date": 1453738740, "question_id": 34997256, "link": "https://stackoverflow.com/questions/34997256/how-do-i-output-data-between-two-dates-in-bash", "title": "How do I output data between two dates in bash?", "body": "<p>I have a file like this:</p>\n\n<pre><code>2014-12-31 531.252429 532.602384 525.802363 526.402397 1368200 526.402397\n2014-12-30 528.092396 531.152424 527.132366 530.422394 876300 530.422394\n2014-12-29 532.192446 535.482414 530.013375 530.332426 2278500 530.332426\n2014-12-26 528.772422 534.252417 527.312364 534.032454 1036000 534.032454\n2014-12-24 530.512424 531.761394 527.022384 528.772422 705900 528.772422\n2014-12-23 527.00237 534.56241 526.292354 530.592416 2197600 530.592416\n</code></pre>\n\n<p>and want to echo each line between 2014-12-31 and 2014-12-23 in a bash script.</p>\n\n<p>I tried this before, but it ended up showing me the lines I wanted but in a never-ending loop.</p>\n\n<pre><code>perl -ne 'if ( m/^([0-9-]+)/ ) { $date = $1; print if ( $date ge \"2014-12-31\" and $date le \"2014-12-23\" ) }' file.txt\n</code></pre>\n\n<p>What went wrong and how can I fix the code?</p>\n"}, {"tags": ["perl", "repository", "citations"], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 1173350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/520cecc23b2ff667746eb67170fb1ab8?s=128&d=identicon&r=PG", "display_name": "Andrew Krizhanovsky", "link": "https://stackoverflow.com/users/1173350/andrew-krizhanovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1453734190, "creation_date": 1453734190, "answer_id": 34995693, "question_id": 34995692, "link": "https://stackoverflow.com/questions/34995692/how-to-calculate-number-of-authors-in-eprints-repository-like-dspace/34995693#34995693", "title": "How to calculate number of authors in EPrints (repository like DSpace)?", "body": "<p>After several ours of try-and-fail attempts... The big problem is that EPrints is not pure Perl, and there are not too much documentation...</p>\n\n<p>We need to edit the <strong>citations</strong> file /eprints/cfg/citations/eprint/default.xml). There is the following solution:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Monograph: if &lt; 4 authors then print 'authors' before title --&gt;\n&lt;when test=\"type = 'monograph'\"&gt;\n\n      &lt;if test=\"is_set(creators_name)\"&gt; \n\n          &lt;set name='authors' expr=\"creators_name\"&gt;\n              (Debug information) Number of authors: \n              &lt;print expr=\"$authors.length()\"/&gt;.\n\n              &lt;set name='authors_len' expr=\"$authors.length()\"&gt;\n\n                  &lt;if test=\"$authors_len lt 4\"&gt;\n                      &lt;print expr=\"creators_name\"/&gt;\n                  &lt;/if&gt;\n              &lt;/set&gt;\n          &lt;/set&gt;\n      &lt;/if&gt; \n&lt;/when&gt;\n\n&lt;!-- Title --&gt;\n&lt;cite:linkhere&gt;&lt;xhtml:em&gt;&lt;print expr=\"title\"/&gt;:&lt;/xhtml:em&gt;&lt;/cite:linkhere&gt;\n\n\n&lt;!-- \"/ authors\" after Title for monography if len(authors)&gt;3 --&gt;\n&lt;choose&gt;\n  &lt;when test=\"type = 'monograph'\"&gt;\n\n      &lt;if test=\"is_set(creators_name)\"&gt; \n\n          &lt;set name='authors' expr=\"creators_name\"&gt;\n              &lt;set name='authors_len' expr=\"$authors.length()\"&gt;\n\n                  &lt;if test=\"$authors_len gt 3\"&gt;\n                     / &lt;print expr=\"creators_name\"/&gt;\n                  &lt;/if&gt;\n\n              &lt;/set&gt;\n          &lt;/set&gt;\n      &lt;/if&gt;\n  &lt;/when&gt;\n\n  &lt;otherwise&gt;\n  &lt;/otherwise&gt;\n&lt;/choose&gt;\n</code></pre>\n\n<p>It works, but... I calculated twice the same variable \"authors_len\". And I don't know how to reuse this variable and calculate it only once. </p>\n\n<p>I tried the EPrints function \"is_set(authors_len)\" and I tried \"is_set($authors_len)\", but EPrints throws different error messages o_O</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 2455451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8naQT.jpg?s=128&g=1", "display_name": "jesusbagpuss", "link": "https://stackoverflow.com/users/2455451/jesusbagpuss"}, "is_accepted": false, "score": 1, "last_activity_date": 1473254715, "creation_date": 1473254715, "answer_id": 39371161, "question_id": 34995692, "link": "https://stackoverflow.com/questions/34995692/how-to-calculate-number-of-authors-in-eprints-repository-like-dspace/39371161#39371161", "title": "How to calculate number of authors in EPrints (repository like DSpace)?", "body": "<p>I would use the following, checking for the creators_name being set, and how many creators there are:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;when test=\"type = 'monograph'\"&gt;\n  &lt;choose&gt;\n    &lt;when test=\"is_set(creators_name) and length(creators_name) lt 4\"&gt;\n      &lt;print expr=\"creators_name\" /&gt;\n      / \n      &lt;print expr=\"title\" /&gt;\n    &lt;/when&gt;\n    &lt;when test=\"is_set(creators_name) and length(creators_name) gt 3\"&gt;\n      &lt;print expr=\"title\" /&gt;\n      /\n      &lt;print expr=\"creators_name\" /&gt;\n    &lt;/when&gt;\n    &lt;otherwise&gt;\n      &lt;print expr=\"title\" /&gt;\n    &lt;/otherwise&gt;\n  &lt;/choose&gt;\n&lt;/when&gt;\n</code></pre>\n\n<p>When using XML comments in an EPrints citation file, they will appear in the HTML source of the page. To make comments in the citation file that do not appear in the html source, you can use:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;comment&gt;This will not appear in the html source&lt;/comment&gt;\n</code></pre>\n\n<p>The language used for EPrints citations is documented on the EPrints Wiki:</p>\n\n<ul>\n<li><a href=\"https://wiki.eprints.org/w/EPScript\" rel=\"nofollow\">https://wiki.eprints.org/w/EPScript</a></li>\n<li><a href=\"https://wiki.eprints.org/w/EPrints_Control_Format\" rel=\"nofollow\">https://wiki.eprints.org/w/EPrints_Control_Format</a></li>\n</ul>\n\n<p>Some XML configuration files use different default namespaces - so you may see the elements prefixed with a namespace e.g.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;cite:citation xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns=\"http://eprints.org/ep3/control\" xmlns:cite=\"http://eprints.org/ep3/citation\" &gt;\n  ...\n  &lt;epc:comment&gt;This is a comment&lt;/epc:comment&gt;\n  ...\n&lt;/cite:citation&gt;\n</code></pre>\n\n<p>The best place for assistance with EPrints is their Mailing list - search the wiki (linked above) for details (I don't have enough reputation to post another link!).</p>\n"}], "owner": {"reputation": 590, "user_id": 1173350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/520cecc23b2ff667746eb67170fb1ab8?s=128&d=identicon&r=PG", "display_name": "Andrew Krizhanovsky", "link": "https://stackoverflow.com/users/1173350/andrew-krizhanovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1473254715, "creation_date": 1453734190, "last_edit_date": 1453755917, "question_id": 34995692, "link": "https://stackoverflow.com/questions/34995692/how-to-calculate-number-of-authors-in-eprints-repository-like-dspace", "title": "How to calculate number of authors in EPrints (repository like DSpace)?", "body": "<p>EPrints is a perl-based repository, see <a href=\"https://en.wikipedia.org/wiki/EPrints\" rel=\"nofollow\">EPrints in WP</a></p>\n\n<p>My librarian asked me to setup EPrins in the following way (only for the \"monograph\" type of documents):</p>\n\n<ol>\n<li>If there are 3 or less authors then print 'authors' before title of the monograph;</li>\n<li>If there more than 3 authors then print '$title / $authors'.</li>\n</ol>\n\n<p>For example, 7 authors in first publication and 2 authors in second publication:</p>\n\n<ol>\n<li><em>Analysis of the quotation corpus of the Russian Wiktionary</em> / <strong>Smirnov A., Levashova T., Karpov A., Kipyatkova I., Ronzhin A., Krizhanovsky A., Krizhanovsky N.</strong> Research in Computing Science. 2012</li>\n<li><em>Meyer C. M., Gurevych I.</em> <strong>Worth its Weight in Gold or Yet Another Resource - A Comparative Study of Wiktionary, OpenThesaurus and GermaNet</strong>. 2010.</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453737989, "post_id": 34994708, "comment_id": 57722029, "body": "Where did you find this? The code makes a number of requests to <code>http:&#47;&#47;89.248.171.138&#47;v.php</code>, an <a href=\"https://www.google.com/?gws_rd=ssl#q=89.248.171.138\" rel=\"nofollow noreferrer\">IP apparently associated with spammers</a>. You have to pass a list of URLs to &quot;exploit&quot; as one of the parameters to the script, so I&#39;m guessing you&#39;re not using this for benign purposes."}, {"owner": {"reputation": 1, "user_id": 4964942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a8529e0568d5db2bf04479264af47?s=128&d=identicon&r=PG&f=1", "display_name": "user4964942", "link": "https://stackoverflow.com/users/4964942/user4964942"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453744896, "post_id": 34994708, "comment_id": 57726266, "body": "so &gt;&gt; How could I decode this code?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453745149, "post_id": 34994708, "comment_id": 57726403, "body": "I&#39;ll be the third person to say this, but read ikegami&#39;s answer. He explains how in the last sentence."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453747513, "post_id": 34994708, "comment_id": 57727882, "body": "@user4964942 Do you know anything at all about Perl?"}, {"owner": {"reputation": 1, "user_id": 4964942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a8529e0568d5db2bf04479264af47?s=128&d=identicon&r=PG&f=1", "display_name": "user4964942", "link": "https://stackoverflow.com/users/4964942/user4964942"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453753910, "post_id": 34994708, "comment_id": 57731626, "body": "A little bit @Matt Jacob"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453758053, "post_id": 34994708, "comment_id": 57733930, "body": "@user4964942 Ok, so what part of the <a href=\"http://stackoverflow.com/a/34994820/82262\">answer</a> don&#39;t you understand?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1453733280, "post_id": 34994820, "comment_id": 57718692, "body": "&quot;Why don&#39;t you pass it to print instead...&quot;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453756317, "post_id": 34994820, "comment_id": 57732998, "body": "@ikegami My guess would be that the OP wasn&#39;t happy about having to do a very minimal amount of work on his own."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1453753058, "last_edit_date": 1453753058, "creation_date": 1453731573, "answer_id": 34994820, "question_id": 34994708, "link": "https://stackoverflow.com/questions/34994708/i-found-this-code-and-i-think-its-encoded-i-tried-to-understand-how-its-encod/34994820#34994820", "title": "I found this code and I think it&#39;s encoded. I tried to understand how it&#39;s encoded or how can read it. Does anyone have an idea to decode this code?", "body": "<p>Its's a string literal that builds a string. The string is passed to a function of <code>unpack</code> that decodes uuencoded strings, so it's presumable a uuencoded string. The decoded string is then passed to <code>eval</code>. To see the decoded string, pass it to <code>print</code> instead of <code>eval</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4964942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a8529e0568d5db2bf04479264af47?s=128&d=identicon&r=PG&f=1", "display_name": "user4964942", "link": "https://stackoverflow.com/users/4964942/user4964942"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1453753058, "creation_date": 1453731239, "last_edit_date": 1453733838, "question_id": 34994708, "link": "https://stackoverflow.com/questions/34994708/i-found-this-code-and-i-think-its-encoded-i-tried-to-understand-how-its-encod", "title": "I found this code and I think it&#39;s encoded. I tried to understand how it&#39;s encoded or how can read it. Does anyone have an idea to decode this code?", "body": "<p>I found this code and I think it's encoded. I tried to understand how it's encoded or how I can read it. </p>\n\n<pre><code>eval unpack u=&gt;q{_(W5S92!W87)N:6YG&lt;SL*=7-E($Q74#HZ57-E&lt;D%G96YT.PHC=7-E($Q74#HZ4')O=&amp;]C;VPZ.FAT='!S.PHC_=7-E($YE=#HZ4U-,.PIM&gt;2`D57-E&lt;B`](\"1!4D=66S!=.PIM&gt;2`D;6%X7W!R;V-E&lt;W-E&lt;R`](\"1!4D=66S%=_.PIM&gt;2!`&lt;&amp;ED&lt;SL*;7D@)&amp;YP:61S/3`[\"B!O&lt;&amp;5N*\"!54T524RP@(\")&lt;&gt;#-#)%5S97(B*2!\\?\"!D:64@(EQX_,C!&lt;&gt;#0S7'@V,5QX-D5&lt;&gt;#9%7'@V1EQX-S1&lt;&gt;#(P7'@V1EQX-S!&lt;&gt;#8U7'@V15QX,C!&lt;&gt;#&lt;T7'@V.%QX-C5&lt;_&gt;#(P7'@R,%QX-S=&lt;&gt;#9&amp;7'@W,EQX-C1&lt;&gt;#(P7'@V-EQX-CE&lt;&gt;#9#7'@V-5QX,C!&lt;&gt;#-!7'@R,\"1B&lt;G5T97EF_:6QE7'@R,%QX,C%&lt;&gt;#(P7&amp;XB.PH@(\"`@(\"`@(&amp;-H;VUP*$!B&lt;G5T969I;&amp;4Q(#T@/%5315)3/BD[\"F-L;W-E_*%5315)3*3L*(\"`@(\"`@(\"!F;W)E86-H(\"1/4#$@*$!B&lt;G5T969I;&amp;4Q*0H@(\"`@(\"`@('L*\"B`@(\"`@(\"`@_;7D@)'!I9#L*(\"`@(\"`@(\"`D&lt;&amp;ED/69O&lt;FLH*3L*(\"`@(\"`@(\"!I9B@D&lt;&amp;ED/C`I&gt;PH@(\"`@(\"`@(\"`@(\"`@_(\"`@)&amp;YP:61S*RL[\"B`@(\"`@(\"`@(\"`@(\"`@(\"`C&lt;')I;G0@(B!0&lt;F]C97-S97,@87)E.B`D;G!I9'-&lt;;B(@_.PH@(\"`@(\"`@(\"`@(\"`@(\"`@:68H)&amp;YP:61S/CTD;6%X7W!R;V-E&lt;W-E&lt;RE[\"B`@(\"`@(\"`@(\"`@(\"`@(\"`@_(\"`@(\"`@(&amp;9O&lt;B@Q+BXH)&amp;UA&gt;%]P&lt;F]C97-S97,I*7L*(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@_(\"!M&gt;2`D=V%I=%]R970]=V%I=\"@I.PH@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(&amp;EF*\"1W86ET_7W)E=#XP*7L*(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"1N&lt;&amp;ED&lt;RTM.PH@(\"`@_(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@('T*(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@(\"`@?0H@(\"`@(\"`@_(\"`@(\"`@(\"`@?0H@(\"`@(\"`@(\"`@(\"`@(\"`@;F5X=#L*(\"`@(\"`@(\"!]96QS:68H=6YD968@)'!I9\"E[\"B`@_(\"`@(\"`@(\"`@(\"`@(\"!P&lt;FEN=\"`B7'@R,%QX-#9&lt;&gt;#9&amp;7'@W,EQX-D)&lt;&gt;#(P7'@V-5QX-S)&lt;&gt;#&lt;R7'@V1EQX_-S)&lt;&gt;#(Q7&amp;XB.PH@(\"`@(\"`@(\"`@(\"`@(\"`@97AI=\"@P*3L*(\"`@(\"`@(\"!]96QS97L*(\"`@(\"`@(\"`@(\"`@_(\"`@(&amp;QO8V%L(\"1324=[(EQX-#%&lt;&gt;#1#7'@U,EQX-$0B?2`]('-U8B![(&amp;5X:70H,\"D[('T[\"B`@(\"`@(\"`@_(\"`@(\"`@(\"!A;&amp;%R;2`P.PH*(\"`@(\"`@(\"!E=F%L('L*(\"`@(\"`@(\"`@(\"`@(\"`@('!R:6YT(\")&lt;&gt;#0U7'@W_.%QX-S!&lt;&gt;#9#7'@V1EQX-CE&lt;&gt;#&lt;T7'@V.5QX-D5&lt;&gt;#8W7'@R,\"1/4#%&lt;&lt;EQN(CL*(\"`@(\"`@(\"`@(\"`@(\"`@_(&amp;5L82@D3U`Q*3L*(\"`@(\"`@(\"!].PH*\"B`@(\"`@(\"`@(\"`@(\"`@(\"!E&gt;&amp;ET*#`I.PH@(\"`@(\"`@('T*?0H*_9F]R*#$N+B1N&lt;&amp;ED&lt;RE[\"B`@(\"`@(\"`@;7D@)'=T/7=A:70H*3L*(\"`@(\"`@(\"!I9B@D=W0]/2TQ*7L*(\"`@_(\"`@(\"`@(\"`@(\"`@('!R:6YT(\")&lt;&gt;#(P7'@V.5QX-S-&lt;&gt;#(P7'@R,\"0A7&amp;XB.PH@(\"`@(\"`@(\"`@(\"`@(\"`@_&lt;F5D;SL*(\"`@(\"`@(\"!]\"GT*&lt;W5B(&amp;5L82![\"FUY($!C:&amp;%R&lt;R`](\"@B7'@T,2(N+B)&lt;&gt;#5!(BP@(EQX-C$B_+BXB7'@W02(L(\"(P(BXN(EQX,SDB*3L*;7D@)'-T&lt;FEN9SL*)'-T&lt;FEN9R`N/2`D8VAA&lt;G-;&lt;F%N9\"!`8VAA_&lt;G-=(&amp;9O&lt;B`Q+BXQ,#L*(W!R:6YT(\"(D&lt;W1R:6YG7&amp;XB.PH@;7D@)$]0,2`]&lt;VAI9G0[\"FUY(\"1F=6QL(#T@_(EQX,T9&lt;&gt;#&lt;S7'@W.5QX,T0D3U`Q7'@R-EQX-D5&lt;&gt;#8Q7'@S1\"1S=')I;F&lt;B.PH@;7D@)'5R;\"`](\")&lt;&gt;#8X_7'@W-%QX-S1&lt;&gt;#&lt;P7'@S05QX,D9&lt;&gt;#)&amp;7'@S.%QX,SE&lt;&gt;#)%7'@S,EQX,S1&lt;&gt;#,X7'@R15QX,S%&lt;&gt;#,W7'@S_,5QX,D5&lt;&gt;#,Q7'@S,UQX,SA&lt;&gt;#)&amp;7'@W-EQX,D5&lt;&gt;#&lt;P7'@V.%QX-S`B.PIM&gt;2`D8G)O=W-E&lt;B`]($Q74#HZ_57-E&lt;D%G96YT+3YN97&lt;H&lt;W-L7V]P=',@/3X@&gt;R!V97)I9GE?:&amp;]S=&amp;YA;64@/3X@,\"!]+\"D[\"B1B&lt;F]W&lt;V5R_+3YT:6UE;W5T*#,P*3L*\"FUY(\"1R97-P;VYS92`](\"1B&lt;F]W&lt;V5R+3YG970H(B1U&lt;FPD9G5L;\"(I.PIM&gt;2`D_:&amp;5A9\"`](\"1R97-P;VYS92T^87-?&lt;W1R:6YG*\"D[\"FEF*\"1H96%D(#U^(&amp;TO*\"XJ*4-O;G1E;G0M3&amp;5N9W1H_.B`U,C8H+BHI+VDI('L*;7D@)&amp;QI;FL@/2`B)$]0,5QX,D8D&lt;W1R:6YG7'@R15QX-S!&lt;&gt;#8X7'@W,\"([\"G!R_:6YT(\")&lt;&gt;#0X7'@V,5QX-C-&lt;&gt;#9\"7'@V-5QX-C1&lt;&gt;#(P)&amp;QI;FM&lt;;B([\"F]P96XH3U544%54+\")&lt;&gt;#-%7'@S_15QX-S-&lt;&gt;#8X7'@V-5QX-D-&lt;&gt;#9#7'@R15QX-S1&lt;&gt;#&lt;X7'@W-\"(I.PIP&lt;FEN=\"!/5510550@(B1L:6YK7')&lt;H;B([\"F-L;W-E(\"A/5510550I.PH*?0IE;'-E&gt;PIE&gt;&amp;ET.PH@?0H@?0}\n</code></pre>\n\n<p>How could I decode this code?</p>\n"}, {"tags": ["perl", "shell", "awk"], "answers": [{"tags": [], "owner": {"reputation": 557, "user_id": 2604088, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7edc3c47905e743436cfe0a36f03e189?s=128&d=identicon&r=PG&f=1", "display_name": "biotech", "link": "https://stackoverflow.com/users/2604088/biotech"}, "is_accepted": false, "score": 0, "last_activity_date": 1453727738, "creation_date": 1453727738, "answer_id": 34993583, "question_id": 34993022, "link": "https://stackoverflow.com/questions/34993022/add-sequence-numbers-to-fasta-headers/34993583#34993583", "title": "Add sequence numbers to FASTA headers", "body": "<pre><code>sed 's/&gt;/&gt; /' output_3.fasta &gt; output_4.fasta\nperl -pe 'BEGIN { our $i = 1; } s/&gt;/\"&gt;Seq\".($i++)/ge;' &lt; output_4.fasta\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1453744154, "post_id": 34993687, "comment_id": 57725837, "body": "This can be simplified to: <code>awk &#39;&#47;^&gt;&#47;{sub(&#47;^&gt;&#47;,&quot;&gt;Seq&quot;++i&quot; &quot;);}1&#39; file</code>; using GNU awk, you can also perform an &quot;in-place&quot; edit using the &quot;-i inplace&quot; option."}], "tags": [], "owner": {"reputation": 14615, "user_id": 1684868, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab2875ba0868842943b778ecd75c588?s=128&d=identicon&r=PG", "display_name": "Guru", "link": "https://stackoverflow.com/users/1684868/guru"}, "is_accepted": true, "score": 2, "last_activity_date": 1453728072, "creation_date": 1453728072, "answer_id": 34993687, "question_id": 34993022, "link": "https://stackoverflow.com/questions/34993022/add-sequence-numbers-to-fasta-headers/34993687#34993687", "title": "Add sequence numbers to FASTA headers", "body": "<p>One awk:</p>\n\n<pre><code>awk '/^&gt;/{gsub(/^&gt;/,\"&gt;Seq\"i++\" \");}1' i=1 file\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 2604088, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7edc3c47905e743436cfe0a36f03e189?s=128&d=identicon&r=PG&f=1", "display_name": "biotech", "link": "https://stackoverflow.com/users/2604088/biotech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 34993687, "answer_count": 2, "score": -4, "last_activity_date": 1453744530, "creation_date": 1453726064, "last_edit_date": 1453744530, "question_id": 34993022, "link": "https://stackoverflow.com/questions/34993022/add-sequence-numbers-to-fasta-headers", "title": "Add sequence numbers to FASTA headers", "body": "<p>I have a file of FASTA sequences, each starting with a different header. I need to add sequence numbers starting with 1 (Seq1, Seq2, Seqn...) for each sequence header. Here are the first three:</p>\n\n<p>input:</p>\n\n<pre><code>&gt;[organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n&gt;[organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n&gt;[organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&gt;Seq1 [organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n&gt;Seq2 [organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n&gt;Seq3 [organism=Fowl Adenovirus] Fowl Adenovirus FAdV hexon gene, isolate FAdV/SP/1184/2013\nAACTGGATCGCGGAAGACGGTAACAAGACAACCATCACCGGACAAATGTCTAA\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "reply_to_user": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1453727146, "post_id": 34993148, "comment_id": 57714837, "body": "You can browse the old documentation at <a href=\"http://search.cpan.org/~mongodb/MongoDB/\" rel=\"nofollow noreferrer\">CPAN</a>"}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": true, "score": 3, "last_activity_date": 1453726416, "creation_date": 1453726416, "answer_id": 34993148, "question_id": 34992947, "link": "https://stackoverflow.com/questions/34992947/cant-locate-object-method-new-via-package-mongodbmongoclient/34993148#34993148", "title": "Can&#39;t locate object method &quot;new&quot; via package &quot;MongoDB::MongoClient&quot;", "body": "<p>Back then the function to connect was</p>\n\n<pre><code>$conn = MongoDB::Connection-&gt;new(\"host\" =&gt; \"localhost:27017\");\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 34993148, "answer_count": 1, "score": 2, "last_activity_date": 1453726416, "creation_date": 1453725819, "question_id": 34992947, "link": "https://stackoverflow.com/questions/34992947/cant-locate-object-method-new-via-package-mongodbmongoclient", "title": "Can&#39;t locate object method &quot;new&quot; via package &quot;MongoDB::MongoClient&quot;", "body": "<p>server - Ubuntu 12.04 LTS</p>\n\n<p>perl -MMongoDB -wle 'print for MongoDB->VERSION' - 0.45</p>\n\n<p>db.version() - 2.0.6</p>\n\n<pre><code>my $dbh = MongoDB::MongoClient-&gt;new(host =&gt; 'localhost', port =&gt; 27017);\n</code></pre>\n\n<p>How can i solve this problem without any upgrade on the server?</p>\n\n<p>Method \"connect\" also doesn't work.</p>\n\n<pre><code>my $dbh = MongoDB::MongoClient-&gt;connect(host =&gt; 'localhost', port =&gt; 27017);\n</code></pre>\n"}, {"tags": ["json", "perl", "awk", "large-files", "data-manipulation"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453723573, "post_id": 34992163, "comment_id": 57712451, "body": "We need some better sample data - doesn&#39;t have to be a dump of your data, but illustrative of the problem at hand. Also - have you considered using a parser?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 1, "creation_date": 1453724023, "post_id": 34992163, "comment_id": 57712765, "body": "The basic problem, I think, is that all 3 of those tools read line-at-a-time and thus get hosed by the &quot;single huge line&quot;. Try pre-processing first with something like <code>tr &#39;,&#39; &#39;\\012&#39;</code> to replace commas with newlines. Then the line-at-a-time tools will work better."}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1453724403, "post_id": 34992163, "comment_id": 57712974, "body": "Try again with perl but set $/ to &quot;,&quot;. Also try the &quot;-u&quot; parameter for sed (--unbuffered)."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1453724797, "post_id": 34992163, "comment_id": 57713263, "body": "The proper fix would be to show us the Awk and Perl programs you used, and help us help you fix them."}, {"owner": {"reputation": 1543, "user_id": 970731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/63619e22cf802d23051be01074521f53?s=128&d=identicon&r=PG", "display_name": "dat789", "link": "https://stackoverflow.com/users/970731/dat789"}, "edited": false, "score": 0, "creation_date": 1453725772, "post_id": 34992163, "comment_id": 57713901, "body": "My perl level is, admittedly, beginner. But the perl mentioned can be found here -- <a href=\"http://pastebin.com/8EeXmbMT\" rel=\"nofollow noreferrer\">pastebin.com/8EeXmbMT</a> . How should I modify with your suggestion? Willing to try everything so long as it works!"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1453725961, "post_id": 34992163, "comment_id": 57714024, "body": "Your sample data is not valid JSON. Please include something closer to real data for testing."}, {"owner": {"reputation": 1543, "user_id": 970731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/63619e22cf802d23051be01074521f53?s=128&d=identicon&r=PG", "display_name": "dat789", "link": "https://stackoverflow.com/users/970731/dat789"}, "edited": false, "score": 0, "creation_date": 1453727050, "post_id": 34992163, "comment_id": 57714777, "body": "I have added a valid JSON. If you find and delete the following &quot;...&quot; (without quotes), then you will have a valid one."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453728732, "post_id": 34992163, "comment_id": 57715793, "body": "Trivial problem: your Pastebin link shows code which reads the entire file into memory before processing it. Using a custom record separator - like in @choroba&#39;s answer, but perhaps with more frills - would allow you to process the file piecemeal."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1453740576, "post_id": 34992163, "comment_id": 57723729, "body": "@dat789 ... ick. When I suggested <a href=\"http://stackoverflow.com/a/34993192/1072112\">in my answer</a> that you could use perl, I didn&#39;t mean that you should use it like sed. I was referring to things like <a href=\"https://metacpan.org/pod/JSON#decode_json\" rel=\"nofollow noreferrer\"><code>decode_json()</code></a>. If you&#39;re in a language that can actually understand your data structure, then use those tools!"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1455804966, "post_id": 34992163, "comment_id": 58661135, "body": "Your example desired output has some major braces issues."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1453725057, "last_edit_date": 1453725057, "creation_date": 1453724536, "answer_id": 34992523, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file/34992523#34992523", "title": "Search and replace string in a very big file", "body": "<p>Try using <code>}</code> as the record separator, e.g. in Perl:</p>\n\n<pre><code>perl -l -0175 -ne 'print $_, $/' &lt; input\n</code></pre>\n\n<p>You might need to glue back lines containing only <code>}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": false, "score": 2, "last_activity_date": 1453725946, "creation_date": 1453725946, "answer_id": 34992986, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file/34992986#34992986", "title": "Search and replace string in a very big file", "body": "<p>This avoids the memory problem by not looking at the data as a single record, but may go too far the other way with respect to performance (processing a single character at a time). Also note that it requires gawk for the built-in <code>RT</code> variable (value of the current record separator):</p>\n\n<pre><code>$ cat j.awk\nBEGIN { RS=\"[[:print:]]\" }\nRT == \"{\" { bal++}\nRT == \"}\" { bal-- }\n{ printf \"%s\", RT }\nRT == \",\" &amp;&amp; bal == 2 { print \"\" }\nEND { print \"\" }\n\n$ gawk -f j.awk j.txt\n{\"RomanCharacters\":{\"Alphabet\":[{\"RecordId\":\"1\",...]},\n{\"RecordId\":\"2\",...},\n{\"RecordId\":\"3\",...},\n{\"RecordId\":\"4\",...},\n{\"RecordId\":\"5\",...} }}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1453786501, "post_id": 34993192, "comment_id": 57742728, "body": "Note that jq&#39;s -c option can be used to advantage here.  In the example using data.json, <code>jq -c &#39;.[][][]&#39; &lt; data.json</code> produces the results obtained above using <code>awk</code> as a post-processor.  In fact, I suspect that if we had a better idea of what the OP is trying to accomplish, the whole thing could easily be done in jq quite economically."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "reply_to_user": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1453786821, "post_id": 34993192, "comment_id": 57742810, "body": "@peak - brilliant, thank you for that, for some reason that never occurred to me.  :-)  I&#39;ve added it to my answer."}], "tags": [], "owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "is_accepted": false, "score": 4, "last_activity_date": 1453786807, "last_edit_date": 1453786807, "creation_date": 1453726528, "answer_id": 34993192, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file/34993192#34993192", "title": "Search and replace string in a very big file", "body": "<p>Since you've tagged your question with sed, awk AND perl, I gather that what you really need is a recommendation for a tool.  While that's kind of off-topic, I believe that <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow\"><em>jq</em></a> is something you could use for this. It will be better than sed or awk because it actually <em>understands JSON</em>. Everything shown here with jq could also be done in perl with a bit of programming.</p>\n\n<p>Assuming content like the following (based on your sample):</p>\n\n<pre><code>{\"RomanCharacters\":{\"Alphabet\": [ {\"RecordId\":\"1\",\"data\":\"data\"},{\"RecordId\":\"2\",\"data\":\"data\"},{\"RecordId\":\"3\",\"data\":\"data\"},{\"RecordId\":\"4\",\"data\":\"data\"},{\"RecordId\":\"5\",\"data\":\"data\"} ] }}\n</code></pre>\n\n<p>You can easily reformat this to \"prettify\" it:</p>\n\n<pre><code>$ jq '.' &lt; data.json\n{\n  \"RomanCharacters\": {\n    \"Alphabet\": [\n      {\n        \"RecordId\": \"1\",\n        \"data\": \"data\"\n      },\n      {\n        \"RecordId\": \"2\",\n        \"data\": \"data\"\n      },\n      {\n        \"RecordId\": \"3\",\n        \"data\": \"data\"\n      },\n      {\n        \"RecordId\": \"4\",\n        \"data\": \"data\"\n      },\n      {\n        \"RecordId\": \"5\",\n        \"data\": \"data\"\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p>And we can dig in to the data to retrieve only the records you're interested in (regardless of what they're wrapped in):</p>\n\n<pre><code>$ jq '.[][][]' &lt; data.json\n{\n  \"RecordId\": \"1\",\n  \"data\": \"data\"\n}\n{\n  \"RecordId\": \"2\",\n  \"data\": \"data\"\n}\n{\n  \"RecordId\": \"3\",\n  \"data\": \"data\"\n}\n{\n  \"RecordId\": \"4\",\n  \"data\": \"data\"\n}\n{\n  \"RecordId\": \"5\",\n  \"data\": \"data\"\n}\n</code></pre>\n\n<p>This is much more readable, both by humans and by tools like awk which process content line-by-line.  If you want to join your lines for processing per your question, the awk becomes much more simple:</p>\n\n<pre><code>$ jq '.[][][]' &lt; data.json | awk '{printf(\"%s \",$0)} /}/{printf(\"\\n\")}'\n{   \"RecordId\": \"1\",   \"data\": \"data\" }\n{   \"RecordId\": \"2\",   \"data\": \"data\" }\n{   \"RecordId\": \"3\",   \"data\": \"data\" }\n{   \"RecordId\": \"4\",   \"data\": \"data\" }\n{   \"RecordId\": \"5\",   \"data\": \"data\" }\n</code></pre>\n\n<p>Or, as @peak suggested in comments, eliminate the <code>awk</code> portion of thie entirely by using jq's <code>-c</code> (compact output) option:</p>\n\n<pre><code>$ jq -c '.[][][]' &lt; data.json\n{\"RecordId\":\"1\",\"data\":\"data\"}\n{\"RecordId\":\"2\",\"data\":\"data\"}\n{\"RecordId\":\"3\",\"data\":\"data\"}\n{\"RecordId\":\"4\",\"data\":\"data\"}\n{\"RecordId\":\"5\",\"data\":\"data\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1543, "user_id": 970731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/63619e22cf802d23051be01074521f53?s=128&d=identicon&r=PG", "display_name": "dat789", "link": "https://stackoverflow.com/users/970731/dat789"}, "edited": false, "score": 1, "creation_date": 1453888490, "post_id": 34993355, "comment_id": 57792909, "body": "This has proven to work swiftly. I have modified your script to have found the solution to the problem. I will share it shortly."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453893921, "post_id": 34993355, "comment_id": 57796456, "body": "Might be worth taking a look at the <code>-n</code> and <code>-p</code> flags. I think you could write that as: <code>perl -pe &#39;BEGIN{$&#47;=&quot;},&quot;} print &quot;\\n&quot;; }</code>"}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": true, "score": 3, "last_activity_date": 1453727059, "creation_date": 1453727059, "answer_id": 34993355, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file/34993355#34993355", "title": "Search and replace string in a very big file", "body": "<p>Regarding perl: Try setting the input line separator <code>$/</code> to <code>},</code> like this:</p>\n\n<pre><code>#!/usr/bin/perl\n$/= \"},\"; \nwhile (&lt;&gt;){\n   print \"$_\\n\"; \n}'\n</code></pre>\n\n<p>or, as a one-liner:</p>\n\n<pre><code>$ perl -e '$/=\"},\";while(&lt;&gt;){print \"$_\\n\"}' sample.dat \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1543, "user_id": 970731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/63619e22cf802d23051be01074521f53?s=128&d=identicon&r=PG", "display_name": "dat789", "link": "https://stackoverflow.com/users/970731/dat789"}, "is_accepted": false, "score": 0, "last_activity_date": 1453893571, "last_edit_date": 1453893571, "creation_date": 1453889162, "answer_id": 35034262, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file/35034262#35034262", "title": "Search and replace string in a very big file", "body": "<p>Using the sample data provided here (the one that begins with {Accounts:{Customer... ), the solution to this problem is one that reads in the file and as it is reading it is counting the number of delimiters defined in $/. For every count of 10,000 delimiters, it will write out to a new file. And for each delimiter found, it gives it a new line. Here is how the script looks like:</p>\n\n<pre><code>#!/usr/bin/perl\n\n$base=\"/home/dat789/incoming\";\n#$_=\"sample.dat\";\n\n$/= \"}]},\";   # delimiter to find and insert new line after\n$n = 0;\n$match=\"\";\n$filecount=0;\n$recsPerFile=10000;   # set number of records in a file\n\nprint \"Processing \" . $_ .\"\\n\";\n\nwhile (&lt;&gt;){\n   if ($n &lt; $recsPerFile) {\n      $match=$match.$_.\"\\n\";\n      $n++;\n      print \".\"; #This is so that we'd know it has done something\n   }    \n   else {\n      my $newfile=\"partfile\".$recsPerFile.\"-\".$filecount . \".dat\";\n      open ( OUTPUT,'&gt;', $newfile );\n      print OUTPUT $match;\n      $match=\"\";\n      $filecount++;   \n      $n=0;\n     print \"Wrote file \" .  $newfile . \"\\n\";\n   }\n}\n\nprint \"Finished\\n\\n\";\n</code></pre>\n\n<p>I've used this script against the big 2.8 GB file where it's content is an unformatted one-liner JSON. The resulting output files would be missing the correct JSON headers and footers but this can be easily fixed.</p>\n\n<p>Thank you so much guys for contributing!</p>\n"}], "owner": {"reputation": 1543, "user_id": 970731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/63619e22cf802d23051be01074521f53?s=128&d=identicon&r=PG", "display_name": "dat789", "link": "https://stackoverflow.com/users/970731/dat789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 34993355, "answer_count": 5, "score": 6, "last_activity_date": 1453893571, "creation_date": 1453723435, "last_edit_date": 1453893402, "question_id": 34992163, "link": "https://stackoverflow.com/questions/34992163/search-and-replace-string-in-a-very-big-file", "title": "Search and replace string in a very big file", "body": "<p>I have a preference for shell commands to get things done. I have a very, very big file -- about 2.8 GB and the content is that of JSON. Everything is on one line, and I was told there are at least 1.5 million records in there.</p>\n\n<p>I must prepare the file for consumption. Each record must be on its own line. Sample:</p>\n\n<pre><code>{\"RomanCharacters\":{\"Alphabet\":[{\"RecordId\":\"1\",...]},{\"RecordId\":\"2\",...},{\"RecordId\":\"3\",...},{\"RecordId\":\"4\",...},{\"RecordId\":\"5\",...} }}\n</code></pre>\n\n<p>Or, use the following...</p>\n\n<pre><code>{\"Accounts\":{\"Customer\":[{\"AccountHolderId\":\"9c585258-c94c-442b-a2f0-1ebbcc274795\",\"Title\":\"Mrs\",\"Forename\":\"Tina\",\"Surname\":\"Wright\",\"DateofBirth\":\"1988-01-01\",\"Contact\":[{\"Contact_Info\":\"9168777943\",\"TypeId\":\"Mobile Number\",\"PrimaryFlag\":\"No\",\"Index\":\"1\",\"Superseded\":\"No\" },{\"Contact_Info\":\"9503588153\",\"TypeId\":\"Home Telephone\",\"PrimaryFlag\":\"Yes\",\"Index\":\"2\",\"Superseded\":\"Yes\" },{\"Contact_Info\":\"acne.pimple@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"No\",\"Index\":\"3\",\"Superseded\":\"No\" },{\"Contact_Info\":\"swati.singh@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"Yes\",\"Index\":\"4\",\"Superseded\":\"Yes\" }, {\"Contact_Info\":\"christian.bale@hollywood.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"No\",\"Index\":\"5\",\"Superseded\":\"NO\" },{\"Contact_Info\":\"15482475584\",\"TypeId\":\"Mobile_Phone\",\"PrimaryFlag\":\"No\",\"Index\":\"6\",\"Superseded\":\"No\" }],\"Address\":[{\"AddressPtr\":\"5\",\"Line1\":\"Flat No.14\",\"Line2\":\"Surya Estate\",\"Line3\":\"Baner\",\"Line4\":\"Pune \",\"Line5\":\"new\",\"Addres_City\":\"pune\",\"Country\":\"India\",\"PostCode\":\"AB100KP\",\"PrimaryFlag\":\"No\",\"Superseded\":\"No\"},{\"AddressPtr\":\"6\",\"Line1\":\"A-602\",\"Line2\":\"Viva Vadegiri\",\"Line3\":\"Virar\",\"Line4\":\"new\",\"Line5\":\"banglow\",\"Addres_City\":\"Mumbai\",\"Country\":\"India\",\"PostCode\":\"AB10V6T\",\"PrimaryFlag\":\"Yes\",\"Superseded\":\"Yes\"}],\"Account\":[{\"Field_A\":\"6884133655531279\",\"Field_B\":\"887.07\",\"Field_C\":\"A Loan Product\",...,\"FieldY_\":\"2015-09-18\",\"Field_Z\":\"24275627\"}]},{\"AccountHolderId\":\"92a5788f-cd8f-423d-ae5f-4eb0ceb457fd\",\"_Title\":\"Dr\",\"_Forename\":\"Christopher\",\"_Surname\":\"Carroll\",\"_DateofBirth\":\"1977-02-02\",\"Contact\":[{\"Contact_Info\":\"9168777943\",\"TypeId\":\"Mobile Number\",\"PrimaryFlag\":\"No\",\"Index\":\"7\",\"Superseded\":\"No\" },{\"Contact_Info\":\"9503588153\",\"TypeId\":\"Home Telephone\",\"PrimaryFlag\":\"Yes\",\"Index\":\"8\",\"Superseded\":\"Yes\" },{\"Contact_Info\":\"acne.pimple@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"No\",\"Index\":\"9\",\"Superseded\":\"No\" },{\"Contact_Info\":\"swati.singh@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"Yes\",\"Index\":\"10\",\"Superseded\":\"Yes\" }],\"Address\":[{\"AddressPtr\":\"11\",\"Line1\":\"Flat No.14\",\"Line2\":\"Surya Estate\",\"Line3\":\"Baner\",\"Line4\":\"Pune \",\"Line5\":\"new\",\"Addres_City\":\"pune\",\"Country\":\"India\",\"PostCode\":\"AB11TXF\",\"PrimaryFlag\":\"No\",\"Superseded\":\"No\"},{\"AddressPtr\":\"12\",\"Line1\":\"A-602\",\"Line2\":\"Viva Vadegiri\",\"Line3\":\"Virar\",\"Line4\":\"new\",\"Line5\":\"banglow\",\"Addres_City\":\"Mumbai\",\"Country\":\"India\",\"PostCode\":\"AB11O8W\",\"PrimaryFlag\":\"Yes\",\"Superseded\":\"Yes\"}],\"Account\":[{\"Field_A\":\"4121879819185553\",\"Field_B\":\"887.07\",\"Field_C\":\"A Loan Product\",...,\"Field_X\":\"2015-09-18\",\"Field_Z\":\"25679434\"}]},{\"AccountHolderId\":\"4aa10284-d9aa-4dc0-9652-70f01d22b19e\",\"_Title\":\"Dr\",\"_Forename\":\"Cheryl\",\"_Surname\":\"Ortiz\",\"_DateofBirth\":\"1977-03-03\",\"Contact\":[{\"Contact_Info\":\"9168777943\",\"TypeId\":\"Mobile Number\",\"PrimaryFlag\":\"No\",\"Index\":\"13\",\"Superseded\":\"No\" },{\"Contact_Info\":\"9503588153\",\"TypeId\":\"Home Telephone\",\"PrimaryFlag\":\"Yes\",\"Index\":\"14\",\"Superseded\":\"Yes\" },{\"Contact_Info\":\"acne.pimple@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"No\",\"Index\":\"15\",\"Superseded\":\"No\" },{\"Contact_Info\":\"swati.singh@microchimerism.com\",\"TypeId\":\"Email Address\",\"PrimaryFlag\":\"Yes\",\"Index\":\"16\",\"Superseded\":\"Yes\" }],\"Address\":[{\"AddressPtr\":\"17\",\"Line1\":\"Flat No.14\",\"Line2\":\"Surya Estate\",\"Line3\":\"Baner\",\"Line4\":\"Pune \",\"Line5\":\"new\",\"Addres_City\":\"pune\",\"Country\":\"India\",\"PostCode\":\"AB12SQR\",\"PrimaryFlag\":\"No\",\"Superseded\":\"No\"},{\"AddressPtr\":\"18\",\"Line1\":\"A-602\",\"Line2\":\"Viva Vadegiri\",\"Line3\":\"Virar\",\"Line4\":\"new\",\"Line5\":\"banglow\",\"Addres_City\":\"Mumbai\",\"Country\":\"India\",\"PostCode\":\"AB12BAQ\",\"PrimaryFlag\":\"Yes\",\"Superseded\":\"Yes\"}],\"Account\":[{\"Field_A\":\"3288214945919484\",\"Field_B\":\"887.07\",\"Field_C\":\"A Loan Product\",...,\"Field_Y\":\"2015-09-18\",\"Field_Z\":\"66264768\"}]}]}}\n</code></pre>\n\n<p>Final outcome should be:</p>\n\n<pre><code>{\"RomanCharacters\":{\"Alphabet\":[{\"RecordId\":\"1\",...]},\n{\"RecordId\":\"2\",...},\n{\"RecordId\":\"3\",...},\n{\"RecordId\":\"4\",...},\n{\"RecordId\":\"5\",...} }}\n</code></pre>\n\n<p>Attempted commands:</p>\n\n<ul>\n<li><code>sed -e 's/,{\"RecordId\"/}]},\\n{\"RecordId\"/g' sample.dat</code></li>\n<li><code>awk '{gsub(\",{\\\"RecordId\\\"\",\",\\n{\\\"RecordId\\\"\",$0); print $0}' sample.dat</code></li>\n</ul>\n\n<p>The attempted commands works perfectly fine for small files. But it does not work for the 2.8 GB file that I must manipulate. Sed quits midway after 10 mins without reason and nothing was done. Awk errored with a Segmentation Fault (core dump) reason after many hours in. I tried perl's search and replace and got an error saying \"Out of memory\".</p>\n\n<p>Any help/ ideas would be great!</p>\n\n<p>Additional info on my machine:</p>\n\n<ul>\n<li>More than 105 GB disk space available.</li>\n<li>8 GB memory</li>\n<li>4 cores CPU</li>\n<li>Running Ubuntu 14.04</li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453716904, "post_id": 34987902, "comment_id": 57708086, "body": "You have added a second question to your question. Please don&#39;t - asking questions is free, ask a separate one. (Which doesn&#39;t invalidate existing answers)."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 4, "creation_date": 1453717844, "post_id": 34987902, "comment_id": 57708784, "body": "I have rolled back to the version before the massive re-edit. Please accept one of the answers below, so as to prevent this question from showing up as unresolved, and post a new question if you need help with a different problem. (Do provide a link back here if it makes sense for context.)"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453717945, "post_id": 34988280, "comment_id": 57708852, "body": "Maybe also explain why a <code>while</code> loop is much better -- it only keeps one line in memory at a time, instead of reading the whole file into memory and then trickling it back out."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1453718856, "post_id": 34988280, "comment_id": 57709474, "body": "Why <code>chomp()</code> if you&#39;re just going to add the newline back in the <code>print()</code>?"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1453721015, "post_id": 34988280, "comment_id": 57710930, "body": "Just showed, in case OP is going to do some other operation instead of direct printing."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453746065, "post_id": 34988280, "comment_id": 57726989, "body": "Although technically valid, it&#39;s confusing to have a scalar <code>$lines</code> and an array <code>@lines</code>, especially when <code>$lines</code> only contains one line!"}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 2, "last_activity_date": 1453712154, "last_edit_date": 1453712154, "creation_date": 1453711425, "answer_id": 34988280, "question_id": 34987902, "link": "https://stackoverflow.com/questions/34987902/in-perl-delete-a-specific-lines-from-a-file/34988280#34988280", "title": "In perl delete a specific lines from a file", "body": "<p>Always use three arguments and lexical filehandle to perform a file operation.<br>\nIf you want delete all the lines start from 'HPOM', you can write your code as:</p>\n\n<pre><code>open my $fh, \"&lt;\", \"/tmp/agentstas.dat\" or die $!;\n\nmy @lines = &lt;$fh&gt;;\n\nforeach my $lines (@lines)\n{\n    next if ($lines =~ m/^HPOM/i);\n    print \"$lines\";\n}\n</code></pre>\n\n<p>Or better use a <code>while loop</code>:</p>\n\n<pre><code>while (my $lines = &lt;$fh&gt;)\n{\n    chomp $lines;\n    next if ($lines =~ m/^HPOM/i);\n    print \"$lines\\n\";\n}\n</code></pre>\n\n<p>Or in your code change this line:</p>\n\n<pre><code>if ($lines =~ $string || $lines !=~ $badstring)  { print \"$lines\"; }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if ($lines =~ /^$string/i || $lines !~ /^$badstring/i)  { print \"$lines\"; }\n</code></pre>\n\n<p><code>^</code> = matching the start of the string.<br>\n<code>i</code> = Do case-insensitive pattern matching.</p>\n\n<p><code>i</code> because you have taken <code>$badstring</code> in small letters and in input file it is in capital letters.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1453716856, "creation_date": 1453716856, "answer_id": 34989976, "question_id": 34987902, "link": "https://stackoverflow.com/questions/34987902/in-perl-delete-a-specific-lines-from-a-file/34989976#34989976", "title": "In perl delete a specific lines from a file", "body": "<p>Your initial code is far too complicated. Try this instead:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \n\nopen (my $input, '&lt;', \"/tmp/agentstas.dat\") or die $!;\n\nwhile ( &lt;$input&gt; ) {\n   print if m/^Node/i;\n}\nclose ( $input );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453732535, "post_id": 34990681, "comment_id": 57718189, "body": "Well, I guess he could even do something like <code>map { print unless &#47;^HPOM&#47; } &lt;&gt;</code> then, if he wanted a one-liner :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453732638, "post_id": 34990681, "comment_id": 57718262, "body": "Using <code>map</code> in void context isn&#39;t a good idea. Perhaps you wanted <code>print grep { ! &#47;^HPOM&#47; } &lt;&gt;</code> :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1453718783, "creation_date": 1453718783, "answer_id": 34990681, "question_id": 34987902, "link": "https://stackoverflow.com/questions/34987902/in-perl-delete-a-specific-lines-from-a-file/34990681#34990681", "title": "In perl delete a specific lines from a file", "body": "<p>Hard-coding a filename is often a bad idea. Your programs are more flexible if you use the Unix filter model (read from STDIN, write to STDOUT).</p>\n\n<pre><code>#!/usr/bin/perl\n\nwhile (&lt;&gt;) {\n  print unless /^HPOM/;\n}\n</code></pre>\n\n<p>Run it as:</p>\n\n<pre><code>$ ./your_filter.pl &lt; /tmp/agentstas.dat &gt; output_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1453723511, "last_edit_date": 1453723511, "creation_date": 1453722975, "answer_id": 34992010, "question_id": 34987902, "link": "https://stackoverflow.com/questions/34987902/in-perl-delete-a-specific-lines-from-a-file/34992010#34992010", "title": "In perl delete a specific lines from a file", "body": "<p>You are on the right track. The bug is in the <code>if</code> condition.</p>\n\n<pre><code>if ($lines =~ $string || $lines !=~ $badstring)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if ($lines =~ $string &amp;&amp; $lines !=~ $badstring)\n</code></pre>\n\n<p>because you want <strong>both</strong> conditions to be true (AND, not OR).</p>\n\n<p>Using perl's <code>-n</code> switch we can solve this as a nice one-liner:</p>\n\n<pre><code>$ perl -ne '/Node/ &amp;&amp; ! /hpom/ &amp;&amp; print' /tmp/agentstas.dat\n</code></pre>\n\n<p>You don't even have to use perl, you can just use </p>\n\n<pre><code>$ grep -e ^Node /tmp/agentstas.dat\n</code></pre>\n\n<p>to only list lines beginning with \"Node\" (which seems to be what you are trying to achieve).</p>\n"}], "owner": {"reputation": 51, "user_id": 5832492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8751756c4cc1268ea5f7ffaaa831e7b2?s=128&d=identicon&r=PG&f=1", "display_name": "Opal Koren", "link": "https://stackoverflow.com/users/5832492/opal-koren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3239, "favorite_count": 1, "accepted_answer_id": 34988280, "answer_count": 4, "score": 3, "last_activity_date": 1453723511, "creation_date": 1453709876, "last_edit_date": 1453717781, "question_id": 34987902, "link": "https://stackoverflow.com/questions/34987902/in-perl-delete-a-specific-lines-from-a-file", "title": "In perl delete a specific lines from a file", "body": "<p>I want to delete the the line with HPOM, and keep only the line node:</p>\n\n<p>my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n\nopen (FILE, \"/tmp/agentstas.dat\");\n\nmy @lines = &lt;FILE&gt;;\n\nmy $lines;\n\nmy $string = \"Node\";\n\nmy $badstring = \"hpom\";\n\nforeach $lines (@lines) {\n\n    if ($lines =~ $string || $lines !=~ $badstring)  { print \"$lines\"; }\n\n}\n</code></pre>\n\n<p>the results:</p>\n\n<pre><code>Node atum1:\nHPOM Managed Node status :\nNode vmatum3:\nHPOM Managed Node status :\nNode ls_sfda-new:\nHPOM Managed Node status :\nNode risto4:\nHPOM Managed Node status :\nNode jzn18z1:\nHPOM Managed Node status :\nNode sqlcatom:\nHPOM Managed Node status :\nNode new-sspc-as:\nHPOM Managed Node status :\nNode dafna:\nHPOM Managed Node status :\nNode adonis:\nHPOM Managed Node status :\nNode hydra:\nHPOM Managed Node status :\nNode kukuad:\nHPOM Managed Node status :\nNode janus1:\nHPOM Managed Node status :\nNode janus2:\nHPOM Managed Node status :\nNode zubin.extranet.gov.il:\nHPOM Managed Node status :\nNode nyx-as:\nHPOM Managed Node status :\nNode keto1:\nHPOM Managed Node status :\nNode sql12ao1:\nHPOM Managed Node status :\nNode keto2:\nHPOM Managed Node status :\nNode durge:\nHPOM Managed Node status :\nNode vcmanage:\nHPOM Managed Node status :\nNode vcmobile:\nNode vishnu:\nHPOM Managed Node status :\nNode ram:\nHPOM Managed Node status :\nNode brizo.iaadom:\nHPOM Managed Node status :\nNode krishna:\nHPOM Managed Node status :\nNode mars1:\nHPOM Managed Node status :\nNode mars2:\nHPOM Managed Node status :\nNode rasas:\nHPOM Managed Node status :\nNode hypons.iaadom:\nHPOM Managed Node status :\nNode nnm-as.iaadom:\nHPOM Managed Node status :\nNode risto3:\nHPOM Managed Node status :\nNode ivrmanage.iaadom:\nHPOM Managed Node status :\nNode mpsair01:\nHPOM Managed Node status :\nNode mpsland01:\nHPOM Managed Node status :\nNode atum2.iaadom:\nHPOM Managed Node status :\nNode vmatum4.iaadom:\nHPOM Managed Node status :\nNode rastas:\nHPOM Managed Node status :\nNode nnm-ls.iaadom:\nHPOM Managed Node status :\nNode rasls:\nHPOM Managed Node status :\nNode ask1:\nHPOM Managed Node status :\nNode ask2:\nHPOM Managed Node status :\nNode grid2:\nHPOM Managed Node status :\nNode grid1:\nHPOM Managed Node status :\nNode ivrdb:\nHPOM Managed Node status :\nNode dafn:\nHPOM Managed Node status :\nNode mist1:\nHPOM Managed Node status :\nNode mist2:\nHPOM Managed Node status :\nNode amun:\nHPOM Managed Node status :\nNode amun1:\nHPOM Managed Node status :\nNode dagon:\nHPOM Managed Node status :\nNode dagon1:\nNode davlin2:\nHPOM Managed Node status :\nNode cet:\nHPOM Managed Node status :\nNode sdns:\nHPOM Managed Node status :\nNode pdns:\nHPOM Managed Node status :\nNode hermes1.iaadom:\nHPOM Managed Node status :\nNode tyr2:\nHPOM Managed Node status :\nNode tyr1:\nHPOM Managed Node status :\nNode new_sspcls:\nNode hapy1:\nNode geb:\nNode saga:\nNode indra:\nNode yama:\n</code></pre>\n"}, {"tags": ["macos", "perl", "macports", "cpan", "rex"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453716979, "post_id": 34987068, "comment_id": 57708149, "body": "Check your path on both."}, {"owner": {"reputation": 591, "user_id": 5835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qOBq.jpg?s=128&g=1", "display_name": "slbteam08", "link": "https://stackoverflow.com/users/5835675/slbteam08"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453717228, "post_id": 34987068, "comment_id": 57708315, "body": "What path do you mean? On the working machine, rex can be found in /usr/local/bin/. But not on the one I got problems. I could not find any ways to uninstall / reinstall yet."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453717470, "post_id": 34987068, "comment_id": 57708509, "body": "Clearly <code>Rex</code> has been installed somewhere other than you were expecting. But that installer you&#39;ve just run - makes my head hurt. I would suggest that you check <code>perl -v</code> and which perl version and install locations it&#39;s using. But otherwise - there&#39;s really insufficient detail here to solve the problem."}], "answers": [{"tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": false, "score": 2, "last_activity_date": 1453728329, "last_edit_date": 1453728329, "creation_date": 1453727982, "answer_id": 34993663, "question_id": 34987068, "link": "https://stackoverflow.com/questions/34987068/rex-command-not-found/34993663#34993663", "title": "Rex command not found", "body": "<p>You need to find out where the perl modules are installed on your system using </p>\n\n<pre><code>perl -e 'print join \"\\n\", @INC;'\n</code></pre>\n\n<p>You will find <code>rex</code> in one of the perl module directories in the subdirectory \"bin\".</p>\n\n<p>Try this:</p>\n\n<pre><code>for PERLINC in $(perl -e 'print join \"\\n\", @INC;') \ndo ls -l $PERLINC/Rex-1.3.3/bin/rex; done\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 5835675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qOBq.jpg?s=128&g=1", "display_name": "slbteam08", "link": "https://stackoverflow.com/users/5835675/slbteam08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454435235, "creation_date": 1453706385, "last_edit_date": 1454435235, "question_id": 34987068, "link": "https://stackoverflow.com/questions/34987068/rex-command-not-found", "title": "Rex command not found", "body": "<p>I am trying to install Rex on Mac OS X (El Capitan), following the instructions at <a href=\"https://www.rexify.org/get.html\" rel=\"nofollow\">https://www.rexify.org/get.html</a></p>\n\n<p>I have installed XCode and MacPorts.</p>\n\n<p>Below are the responses I got from the installation commands now</p>\n\n<pre><code>$ sudo port install libssh2 perl5\n---&gt;  Computing dependencies for libssh2\n---&gt;  Cleaning libssh2\n---&gt;  Computing dependencies for perl5\n---&gt;  Cleaning perl5\n---&gt;  Scanning binaries for linking errors\n---&gt;  No broken files found.\n\n$ curl -L https://get.rexify.org | perl - --sudo -n Rex\n% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                             Dload  Upload   Total   Spent    Left  Speed\n100  294k  100  294k    0     0    99k      0  0:00:02  0:00:02 --:--:--   99k\nRex is up to date. (1.3.3)\n</code></pre>\n\n<p>Although the install scripts told me it's up to date, I cannot run the command:</p>\n\n<pre><code>$ rex\n-bash: rex: command not found\n</code></pre>\n\n<p>I have tried on another Mac OS X machine and there was no problems. Could someone help me to fix this weird situation?</p>\n\n<p><strong><em>Update:</em></strong></p>\n\n<p>Doing a <code>$ find / -name rex</code>, I found one instance in <code>/opt/local/libexec/perl5.22/sitebin/</code>. Did the installer make some mistakes when creating the bin folder?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1453704619, "post_id": 34986548, "comment_id": 57701655, "body": "Please post what have you tried so far?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1453706343, "post_id": 34986548, "comment_id": 57702411, "body": "Is the input a filehandle? An array of lines? A single string?"}, {"owner": {"reputation": 733, "user_id": 1025192, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/134f2acc9c6343574969a9fa937175c1?s=128&d=identicon&r=PG", "display_name": "Magicloud", "link": "https://stackoverflow.com/users/1025192/magicloud"}, "edited": false, "score": 0, "creation_date": 1453706909, "post_id": 34986548, "comment_id": 57702697, "body": "mkHun, added. ysth, a file or a single string."}], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 1025192, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/134f2acc9c6343574969a9fa937175c1?s=128&d=identicon&r=PG", "display_name": "Magicloud", "link": "https://stackoverflow.com/users/1025192/magicloud"}, "edited": false, "score": 0, "creation_date": 1453707660, "post_id": 34987261, "comment_id": 57703066, "body": "What if there are some other lines between Status and Printer?"}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1453707097, "creation_date": 1453707097, "answer_id": 34987261, "question_id": 34986548, "link": "https://stackoverflow.com/questions/34986548/how-to-match-a-string-not-containing-a-word/34987261#34987261", "title": "How to match a string not containing a word?", "body": "<p>I am assuming you have a input file. Try this:</p>\n\n<pre><code>my $preline;\n\nwhile (&lt;&gt;)\n{\n    chomp;\n    if (/^Status: Bad/)\n    {\n        my $printer = $preline, scalar &lt;&gt;;\n        $printer =~ m/^Printer:\\s+(.*)/;\n        print \"$1\\n\";\n        last;\n    }\n    $preline = $_;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>B\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5383, "user_id": 3664960, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fbcd9ff6662774ee78e2026b3671a4e1?s=128&d=identicon&r=PG&f=1", "display_name": "davejal", "link": "https://stackoverflow.com/users/3664960/davejal"}, "edited": false, "score": 0, "creation_date": 1453857461, "post_id": 34988883, "comment_id": 57780586, "body": "try explaining how this fixes the OP&#39;s problem"}], "tags": [], "owner": {"reputation": 89, "user_id": 5835722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TWRsLC4nXpQ/AAAAAAAAAAI/AAAAAAAAAqk/voah1E7EFKg/photo.jpg?sz=128", "display_name": "Neyaz Ahmad", "link": "https://stackoverflow.com/users/5835722/neyaz-ahmad"}, "is_accepted": false, "score": 1, "last_activity_date": 1453713564, "creation_date": 1453713564, "answer_id": 34988883, "question_id": 34986548, "link": "https://stackoverflow.com/questions/34986548/how-to-match-a-string-not-containing-a-word/34988883#34988883", "title": "How to match a string not containing a word?", "body": "<p>Try this:</p>\n\n<pre><code>    undef $/;\n$_=&lt;DATA&gt;;\nif($_=~/Printer:\\s+([^\\n]+)((?:(?!Status:\\s+[\\w]+)(?!Printer:\\s+\\1).)*?)(Status:\\s+bad\\b)/si){\n  print \"Result: $1\";\n}\n\n__DATA__\nPrinter: A\nSome other lines.\nStatus: good\nPrinter: C\nSome other lines.\nStatus: badboy\nPrinter: B\nSome other lines.\nStatus: bad\nPrinter: D\nStatus: better\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1453716105, "creation_date": 1453716105, "answer_id": 34989692, "question_id": 34986548, "link": "https://stackoverflow.com/questions/34986548/how-to-match-a-string-not-containing-a-word/34989692#34989692", "title": "How to match a string not containing a word?", "body": "<p>I would probably tackle the problem like this:</p>\n\n<ul>\n<li>Select printer and status into a hash, using a regexp and map. </li>\n<li>Filter the results, looking for a particular key.</li>\n</ul>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \nuse Data::Dumper; \n\n#traverse all of &lt;DATA&gt; extracting pairs of values, that make hash keys. \nmy %printer_status = map { m/(?:Printer|Status): (\\w+)/ } &lt;&gt;; \n#for debug, print\nprint Dumper \\%printer_status; \n\n#print the keys of that hash that are 'bad'. \nprint join \"\\n\", grep { $printer_status{$_} eq \"bad\" } keys %printer_status;\n</code></pre>\n\n<p>Now, this is written out in a longer form for illustrative purposes - note, it assumes that the ordering of 'Printer' and 'Status' is consistent, and there's no dupes. (Of either key or value). </p>\n\n<p>This either reads piped data from <code>STDIN</code> or a file specified as an argument. Given your example this prints:</p>\n\n<pre><code>B\n</code></pre>\n\n<p>Now, as you say you want a one liner that condenses down to:</p>\n\n<pre><code>perl -e '%p=map {m/(?:Printer|Status): (\\w+)/}&lt;&gt;; print join \"\\n\", grep {$p{$_} eq \"bad\"} keys %p'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 1441609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a513961a59733a2184f75859f1d499?s=128&d=identicon&r=PG", "display_name": "user1441609", "link": "https://stackoverflow.com/users/1441609/user1441609"}, "is_accepted": false, "score": 0, "last_activity_date": 1453722517, "creation_date": 1453722517, "answer_id": 34991858, "question_id": 34986548, "link": "https://stackoverflow.com/questions/34986548/how-to-match-a-string-not-containing-a-word/34991858#34991858", "title": "How to match a string not containing a word?", "body": "<p>You could try something like this</p>\n\n<pre><code>#!perl -w\n\nuse strict;\nuse warnings;\n\nmy $printerName = \"\";\nwhile (&lt;DATA&gt;) {\n  if (/Printer: (\\w+)/) {\n    $printerName = $1;\n    next;\n  }\n  if (/Status: (\\w+)/){\n    my $status = $1;\n    print \"$printerName, $status\\n\" if ($status =~ /bad/i);\n    next;\n  }\n}\n\n__DATA__\nPrinter: A\nSome other lines.\nSome more other lines.\nStatus: good\nPrinter: B\nSome other lines.\nanother line\nyet another line\nStatus: bad\n</code></pre>\n"}], "owner": {"reputation": 733, "user_id": 1025192, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/134f2acc9c6343574969a9fa937175c1?s=128&d=identicon&r=PG", "display_name": "Magicloud", "link": "https://stackoverflow.com/users/1025192/magicloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1453722517, "creation_date": 1453704229, "last_edit_date": 1453713354, "question_id": 34986548, "link": "https://stackoverflow.com/questions/34986548/how-to-match-a-string-not-containing-a-word", "title": "How to match a string not containing a word?", "body": "<p>Say I have this input:</p>\n\n<pre><code>Printer: A\nSome other lines.\nStatus: good\nPrinter: B\nSome other lines.\nStatus: bad\n</code></pre>\n\n<p>I want to use one match to get the printer name in bad status, 'B' in this case. How do I do it? I have tried a few but I kept getting both names. For example:</p>\n\n<pre><code>$ perl -e 'undef $/; $_=&lt;&gt;; /^Printer: (?:\\n|.)+?^Status: bad$/; print' input\n\nPrinter: A\nSome other lines.\nStatus: good\nPrinter: B\nSome other lines.\nStatus: bad\n</code></pre>\n"}, {"tags": ["perl", "unicode", "utf-8", "character-encoding", "file-handling"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 2556921, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I8IvB.jpg?s=128&g=1", "display_name": "Haifa Warda", "link": "https://stackoverflow.com/users/2556921/haifa-warda"}, "edited": false, "score": 0, "creation_date": 1453729002, "post_id": 34986239, "comment_id": 57715973, "body": "thanks, i thought &quot;binmode&quot; would set the input stream already on utf8 but obviously didn&#39;t :)"}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 115, "user_id": 2556921, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I8IvB.jpg?s=128&g=1", "display_name": "Haifa Warda", "link": "https://stackoverflow.com/users/2556921/haifa-warda"}, "edited": false, "score": 0, "creation_date": 1453734817, "post_id": 34986239, "comment_id": 57719874, "body": "<code>binmode</code> sets UTF-8 for the filehandle you call it on.  When you open a file explicitly, its encoding has nothing to do with what STDIN or STDOUT is using."}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 3, "last_activity_date": 1453702653, "creation_date": 1453702653, "answer_id": 34986239, "question_id": 34986151, "link": "https://stackoverflow.com/questions/34986151/perl-output-failing-in-printing-utf8-text-files-correctly/34986239#34986239", "title": "perl output - failing in printing utf8 text files correctly", "body": "<p>You told Perl that your source code was UTF-8, and that STDIN, STDOUT, &amp; STDERR are UTF-8, but you didn't say that the file you're reading contains UTF-8.</p>\n\n<pre><code>open(GT,\"&lt;:utf8\", \"$dir/$first/$t\") or die \"Could not open GT, $!\";\n</code></pre>\n\n<p>Without that, Perl assumes the file is encoded in ISO-8859-1, since that's Perl's default charset if you don't specify a different one.  It helpfully transcodes those ISO-8859-1 characters to UTF-8 for output, since you've told it that STDOUT uses UTF-8.  Since the file was actually UTF-8, not ISO-8859-1, you get incorrect output.</p>\n"}], "owner": {"reputation": 115, "user_id": 2556921, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I8IvB.jpg?s=128&g=1", "display_name": "Haifa Warda", "link": "https://stackoverflow.com/users/2556921/haifa-warda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 34986239, "answer_count": 1, "score": 2, "last_activity_date": 1453702653, "creation_date": 1453702250, "question_id": 34986151, "link": "https://stackoverflow.com/questions/34986151/perl-output-failing-in-printing-utf8-text-files-correctly", "title": "perl output - failing in printing utf8 text files correctly", "body": "<p>so i have utf8 text files, which i want to read in, put the lines into an array, and print it out. But the output however doesn't print the signs correctly, for example the output line looks like following: </p>\n\n<blockquote>\n  <p>\"arn\u00c5\u00bftein geh\u00c3\u00b6rt gr\u00c3\u00a4flichen \"</p>\n</blockquote>\n\n<p>So i tried testing the script by one line, pasted directly into the perl script, without reading it from file. And there the output is perfectly fine. I checked the files, which are in utf8 unicode.  Still the files must cause the output problem (?). </p>\n\n<p>Because the script is too long, i just cut it down to the relevant:\n( goes to directory, opens files, leads the input to the function &amp;align, anaylse it, add it to an array, print the array)</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nuse utf8;\nbinmode(STDIN,\":utf8\");\nbinmode(STDOUT,\":utf8\");\nbinmode(STDERR,\":utf8\");\n\n#opens directory\n#opens file from directory\n if (-d \"$dir/$first\"){\n  opendir (UDIR, \"$dir/$first\") or die \"could not open: $!\";\n  foreach my $t (readdir(UDIR)){\n   next if $first eq \".\";\n   next if $first eq \"..\";\n\n   open(GT,\"$dir/$first/$t\") or die \"Could not open GT, $!\";\n   my $gt= &lt;GT&gt;;\n   chomp $gt;\n\n   #directly pasted lines in perl   - creates correct output\n   &amp;align(\"det man die Profe\u017f\u017fores der Philo\u017fophie re- \");\n\n    #lines from file    - output not correct\n    #&amp;align($gt);\n    close GT;\n    next;\n\n  }closedir UDIR;\n}\n</code></pre>\n\n<p>Any idea ? </p>\n"}, {"tags": ["linux", "perl", "pipe", "signals", "alarm"], "answers": [{"tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 2, "last_activity_date": 1453701779, "creation_date": 1453701779, "answer_id": 34986063, "question_id": 34985690, "link": "https://stackoverflow.com/questions/34985690/perl-closing-subprocess-pipe-in-signal-handler-hangs/34986063#34986063", "title": "Perl: closing subprocess pipe in signal handler hangs?", "body": "<p>Using <code>POSIX::_exit()</code> directly like the man page suggests seems to work around this particular issue. But this smells of an A-B problem. Are you sure that your real problem is not better solved by using a more sophisticated way of handling subprocesses than plain pipes, like for example <code>IPC::Run</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 891, "user_id": 1883178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e7ea841ff110275fae97f93e729473f?s=128&d=identicon&r=PG", "display_name": "lemonsqueeze", "link": "https://stackoverflow.com/users/1883178/lemonsqueeze"}, "edited": false, "score": 1, "creation_date": 1453715069, "post_id": 34986158, "comment_id": 57706894, "body": "Of course you&#39;re quite right, silly me ! The confusing part was that an early <code>exit</code> actually works but only because it creates a race condition (the child isn&#39;t ready yet). Thanks !"}], "tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": true, "score": 10, "last_activity_date": 1453739630, "last_edit_date": 1453739630, "creation_date": 1453702281, "answer_id": 34986158, "question_id": 34985690, "link": "https://stackoverflow.com/questions/34985690/perl-closing-subprocess-pipe-in-signal-handler-hangs/34986158#34986158", "title": "Perl: closing subprocess pipe in signal handler hangs?", "body": "<p>The signal handler is a red herring, <a href=\"http://perldoc.perl.org/functions/close.html\">close</a> will block regardless:</p>\n\n<pre><code>open my $foo, \"tail -f foo |\" or die \"Can't open process: $!\";\n\nclose $foo;     # &lt;--- will block\n</code></pre>\n\n<p>One way to fix this is to capture the sub process id via <a href=\"http://perldoc.perl.org/functions/open.html\">open</a> and then <a href=\"http://perldoc.perl.org/functions/kill.html\">kill</a> that child:</p>\n\n<pre><code>my $subprocess = open my $foo, \"tail -f foo |\" or die \"Can't open process: $!\";\n\nsay \"subprocess=$subprocess\";\n\nkill 'KILL', $subprocess;\n\nclose $foo;     # &lt;--- happy now\n</code></pre>\n"}], "owner": {"reputation": 891, "user_id": 1883178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e7ea841ff110275fae97f93e729473f?s=128&d=identicon&r=PG", "display_name": "lemonsqueeze", "link": "https://stackoverflow.com/users/1883178/lemonsqueeze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "accepted_answer_id": 34986158, "answer_count": 2, "score": 8, "last_activity_date": 1453739630, "creation_date": 1453699657, "question_id": 34985690, "link": "https://stackoverflow.com/questions/34985690/perl-closing-subprocess-pipe-in-signal-handler-hangs", "title": "Perl: closing subprocess pipe in signal handler hangs?", "body": "<p>I need to timeout on a script that's doing blocking io.<br>\nSurprisingly it turns out <code>exit</code> hangs if there is an open pipe to a subprocess:</p>\n\n<pre><code>#!/usr/bin/perl                                                                                             \n(-f \"foo\") || die \"file foo doesn't exist\";\nopen(IN, \"tail -f foo |\");\n\n$SIG{ALRM} = sub\n{\n    print \"trying to exit...\\n\";\n    exit 0;     # Hangs with above open() call\n};\nalarm 1;\n\nwhile (1)\n{   \n    sleep 5;   # Do stuff ...\n}\n</code></pre>\n\n<p>With no <code>open</code> call it works, unfortunately removing it is not an option in this case the script needs it. </p>\n\n<p>Looks like <code>exit</code> is trying to close the filehandle and this is what is hanging:</p>\n\n<pre><code>$SIG{ALRM} = sub\n{\n    print \"trying to close...\\n\";\n    close(IN);            # Hangs ...\n    print \"ok\\n\";\n    exit 0;\n};\n</code></pre>\n\n<p>I guess it's not too happy about reaping the child from inside a signal handler...  </p>\n\n<p>Does anyone know a good way around this ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 3, "creation_date": 1453695096, "post_id": 34984901, "comment_id": 57698785, "body": "Can you please post your code as part of the question (in text) rather than as a screen shot?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453695261, "post_id": 34984901, "comment_id": 57698825, "body": "If you&#39;re asking for a code review, this belongs on the <a href=\"http://codereview.stackexchange.com/\">Code Review</a> site."}, {"owner": {"reputation": 11, "user_id": 5785954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3761aff381520055936f60d0b7bbd91a?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/5785954/steve"}, "edited": false, "score": 0, "creation_date": 1453695994, "post_id": 34984901, "comment_id": 57699010, "body": "I am unable to edit it properly, I guess and hence, it is not accepting the code."}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1453696068, "post_id": 34984901, "comment_id": 57699036, "body": "I don&#39;t understand your question. Your code <i>does</i> decrease the number of beers by 1. What do you mean you don&#39;t &quot;get&quot; it? (Is this not actually your code?)"}, {"owner": {"reputation": 11, "user_id": 5785954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3761aff381520055936f60d0b7bbd91a?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/5785954/steve"}, "edited": false, "score": 0, "creation_date": 1453696709, "post_id": 34984901, "comment_id": 57699217, "body": "Well, the actual lyrics are &quot;99 bottles of beer on the wall, 99 bottles of beer. Take one down and pass it around, 98 bottles of beer on the wall.&quot;  The number in the second line should decrease by 1, with my code it isn&#39;t?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453697618, "post_id": 34984901, "comment_id": 57699481, "body": "If <code>$i</code> is 99, then <code>$i - 1</code> is 98. If I had no idea how to program in Perl, I would start by replacing the second <code>$i</code> with <code>$i - 1</code>. But that wouldn&#39;t work. So I would try to figure out a way to evaluate mathematical expressions inside a string. That&#39;s the kind of process you should be going through to solve problems like this. And if you can show us the steps you took along the way, it makes it much easier for us to gauge your current level of understanding so we can write better answers for you."}, {"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453711634, "post_id": 34984901, "comment_id": 57704899, "body": "@MattJacob Broken code is off-topic on Code Review. Please read the <a href=\"http://meta.codereview.stackexchange.com/q/5777\">guide to Code Review for Stack Overflow users</a>, and avoid making inappropriate referrals."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 3, "last_activity_date": 1453701301, "creation_date": 1453701301, "answer_id": 34985978, "question_id": 34984901, "link": "https://stackoverflow.com/questions/34984901/i-am-a-beginner-in-perl-how-to-go-forward-please-check-the-code/34985978#34985978", "title": "I am a beginner in Perl, How to go forward? Please, check the code", "body": "<pre><code>for ($i = 99 ; $i &gt; 0; ) {\n    print \"$i bottles of beer on the wall, $i bottles of beer\nTake one down and pass it around, \", --$i, \" bottles of beer on the wall.\\n\";\n}\n</code></pre>\n\n<p>I leave it as an exercise for you to switch from \"bottles\" to \"bottle\" when you reach the last one...</p>\n"}], "owner": {"reputation": 11, "user_id": 5785954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3761aff381520055936f60d0b7bbd91a?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/5785954/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 34985978, "answer_count": 1, "score": -3, "last_activity_date": 1453713878, "creation_date": 1453694826, "last_edit_date": 1453695911, "question_id": 34984901, "link": "https://stackoverflow.com/questions/34984901/i-am-a-beginner-in-perl-how-to-go-forward-please-check-the-code", "title": "I am a beginner in Perl, How to go forward? Please, check the code", "body": "<p>This is the code I wrote, I am unable to get the part where I decrease the no of beers by 1</p>\n\n<pre><code>#!/usr/bin/perl\n# your code goes here\n\nfor($i =99; $i &gt;= 0; $i--)\n{\n    print \"$i bottles of beer on the wall, $i bottles of beer\nTake one down and pass it around, $i bottles of beer on the wall.\\n\";\n    }\n</code></pre>\n"}, {"tags": ["c++", "regex", "perl", "boost"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453684141, "post_id": 34983407, "comment_id": 57696368, "body": "Python makes the same distinction between <i>match</i> and <i>search</i>. Unless you&#39;re validating a string (generally you can trust your input because it is machine-generated) it is a <i>search</i> that you want. It is easy enough to add start and end of line anchors <code>^</code> and <code>$</code> if you need to verify the whole string"}], "tags": [], "owner": {"reputation": 151, "user_id": 4059334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e495ac2d3f6cb35fadebb92ba15b8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Aladdin", "link": "https://stackoverflow.com/users/4059334/aladdin"}, "is_accepted": true, "score": 5, "last_activity_date": 1453682032, "creation_date": 1453682032, "answer_id": 34983407, "question_id": 34983344, "link": "https://stackoverflow.com/questions/34983344/boost-regex-pattern-syntax-confusion/34983407#34983407", "title": "boost regex pattern syntax confusion", "body": "<p>From boost documentation the function regex_match</p>\n\n<blockquote>\n  <p>The algorithm regex_match determines whether a given regular expression matches <strong>all</strong> of a given character sequence denoted by a pair of bidirectional-iterators, the algorithm is defined as follows, the main use of this function is data input validation.</p>\n</blockquote>\n\n<p>In case you want to use 'bb' to match, you will need to use boost::regex_search instead</p>\n"}], "owner": {"reputation": 43, "user_id": 5787133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16ce0f413d9746b3d8936802c381200?s=128&d=identicon&r=PG&f=1", "display_name": "ethandu7", "link": "https://stackoverflow.com/users/5787133/ethandu7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 34983407, "answer_count": 1, "score": 2, "last_activity_date": 1453682032, "creation_date": 1453681516, "question_id": 34983344, "link": "https://stackoverflow.com/questions/34983344/boost-regex-pattern-syntax-confusion", "title": "boost regex pattern syntax confusion", "body": "<p>I am using boost regex, but I am confused about the syntax used by boost regex. If I want to use pattern \"bb\" to match the string \"aabbcc\", I have to make the pattern \"bb\" to \".*bb.*\" so that the string would be matched. This is wired because in perl you don't need to add \".*\" at the front and the end of \"bb\". Did I miss something about boost regex or this is just the flavor of boost regex? Below are my simple source code for this question:</p>\n\n<pre><code>#include &lt;boost/regex.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nint main() {\n    boost::regex regex_bb01(\"bb\");\n    boost::regex regex_bb02(\".*bb\");\n    boost::regex regex_bb03(\"bb.*\");\n    boost::regex regex_bb04(\".*bb.*\");\n\n    if(boost::regex_match(\"aabbcc\", regex_bb01))\n        std::cout&lt;&lt;\"the regex_bb01 is matched\\n\";\n    else\n        std::cout&lt;&lt;\"the regex_bb01 is Not matched\\n\";\n    if(boost::regex_match(\"aabbcc\", regex_bb02))\n        std::cout&lt;&lt;\"the regex_bb02 is matched\\n\";\n    else\n        std::cout&lt;&lt;\"the regex_bb02 is Not matched\\n\";\n    if(boost::regex_match(\"aabbcc\", regex_bb03))\n        std::cout&lt;&lt;\"the regex_bb03 is matched\\n\";\n    else\n        std::cout&lt;&lt;\"the regex_bb03 is Not matched\\n\";\n    if(boost::regex_match(\"aabbcc\", regex_bb04))\n        std::cout&lt;&lt;\"the regex_bb04 is matched\\n\";\n    else\n        std::cout&lt;&lt;\"the regex_bb04 is Not matched\\n\";\n}\n</code></pre>\n\n<p>the result looks like this:</p>\n\n<p>[root@localhost BoostCase]# ./regex_test</p>\n\n<p>the regex_bb01 is Not matched</p>\n\n<p>the regex_bb02 is Not matched</p>\n\n<p>the regex_bb03 is Not matched</p>\n\n<p>the regex_bb04 is matched</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1497, "user_id": 4987223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0850ea3162cafc96ef345404cf7dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "vmachan", "link": "https://stackoverflow.com/users/4987223/vmachan"}, "edited": false, "score": 0, "creation_date": 1453681494, "post_id": 34983282, "comment_id": 57695693, "body": "What is your expected output?"}, {"owner": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "reply_to_user": {"reputation": 1497, "user_id": 4987223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0850ea3162cafc96ef345404cf7dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "vmachan", "link": "https://stackoverflow.com/users/4987223/vmachan"}, "edited": false, "score": 0, "creation_date": 1453681533, "post_id": 34983282, "comment_id": 57695703, "body": "I&#39;ll edit an additional section into the post"}, {"owner": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "edited": false, "score": 0, "creation_date": 1453682024, "post_id": 34983282, "comment_id": 57695819, "body": "Open it in <code>vim</code> and issue the command <code>:set list</code> to see if you might have other unprinted characters in the way, <i>e.g.</i> Windows-style newlines, <code>\\r\\n</code>."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1453682124, "post_id": 34983282, "comment_id": 57695856, "body": "Try to slurp the file with <code>-0777</code>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1467624925, "last_edit_date": 1467624925, "creation_date": 1453682221, "answer_id": 34983429, "question_id": 34983282, "link": "https://stackoverflow.com/questions/34983282/regex-in-perl-match-newline-and-first-word-of-next-line/34983429#34983429", "title": "Regex in perl, match newline AND first word of next line", "body": "<p>Your substitution</p>\n\n<pre><code>s/title=\"(.*?)\"\\n//ig\n</code></pre>\n\n<p>is replacing any line that looks like <code>title=\"xxx\"</code> with nothing. It is deleting those lines.</p>\n\n<p>It's unclear what you want, but if your requirement is to remove the <code>title=</code> and the quotes then you should use</p>\n\n<pre><code>perl -pe 's/title=\"(.*?)\"/$1/i' myfile\n</code></pre>\n\n<p>The <code>/g</code> modifier is superfluous unless you expect many titles in a one line from the file</p>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>If you want to pair titles with artists then you really need a script file. This should do what you need. The data is taken directly from your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $title;\n\nwhile ( &lt;DATA&gt; ) {\n\n    if ( /title=\"([^\"]*)\"/ ) {\n        $title = $1;\n    }\n    elsif ( /artist=\"([^\"]*)\"/ ) {\n        say \"$1 - $title\";\n    }\n}\n\n\n__DATA__\ntitle=\"title1\"\nartist=\"artist1\"\ntitle=\"title2\"\nartist=\"artis2\"\ntitle=\"title3\"\nartist=\"artist3\"\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>artist1 - title1\nartis2 - title2\nartist3 - title3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453683537, "post_id": 34983505, "comment_id": 57696213, "body": "Sorry fixed this a minute ago. Guess you can&#39;t see it yet. Just missed the end of the line when I copied the text."}], "tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 1, "last_activity_date": 1453683433, "last_edit_date": 1453683433, "creation_date": 1453682740, "answer_id": 34983505, "question_id": 34983282, "link": "https://stackoverflow.com/questions/34983282/regex-in-perl-match-newline-and-first-word-of-next-line/34983505#34983505", "title": "Regex in perl, match newline AND first word of next line", "body": "<p>You never mentioned what you're trying to do. If you want to extract the titles and artists, you 'll want something like this:</p>\n\n<pre><code>our $s = q|\ntitle=\"title1\"\nartist=\"artist1\"\ntitle=\"title2\"\nartist=\"artis2\"\ntitle=\"title3\"\nartist=\"artist3\"\n|;\n\nmy @matches = $s =~ /^title=\"(.*?)\".*?^artist=\"(.*?)\"/smg;\n\nprint join(';', @matches);\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>title1;artist1;title2;artis2;title3;artist3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "edited": false, "score": 0, "creation_date": 1453709379, "post_id": 34983690, "comment_id": 57703887, "body": "Slurp mode looks like it does what I want, and my original regex looks like it will work, I used this regex: &#39;s/title=&quot;(.*?)&quot;\\nartist=&quot;(.*?)&quot;(?:\\n|$)/\\2 - \\1\\n/ig&#39;"}, {"owner": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "edited": false, "score": 0, "creation_date": 1453709491, "post_id": 34983690, "comment_id": 57703943, "body": "(To add to that last comment, I didn&#39;t need to do the modification you did to negate the &quot;, as I used ? on the .* to make it lazy."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "edited": false, "score": 0, "creation_date": 1453731769, "post_id": 34983690, "comment_id": 57717680, "body": "Great. You may want to consider two modifications: 1) Use <code>\\R</code> or <code>$</code> rather than <code>\\n</code> in the regex. The <code>\\R</code> is a metacharacter for any sequence of line endings (windows, etc) and 2) you may want to add <code>\\h*</code> or <code>\\s*</code> after the closing quotes to catch invisible trailing line endings like you had in your example. So like this: <code>^title=&quot;(.*?)&quot;\\h*\\R^artist=&quot;(.*?)&quot;\\h*$</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453828557, "post_id": 34983690, "comment_id": 57766167, "body": "<i>&quot;I didn&#39;t need to do the modification you did to negate the <code>&quot;</code>&quot;</i> Non-greedy matches can be fickle, and I highly recommend that you stick with <code>&quot;([^&quot;]*)&quot;</code>. There are many posts on Stack Overflow like <a href=\"http://stackoverflow.com/questions/8971608/non-greedy-regex-acts-greedily\"><i>Non-greedy regex acts greedily</i></a> where people have misunderstood what a non-greedy match does"}, {"owner": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453911141, "post_id": 34983690, "comment_id": 57809135, "body": "@Borodin Normally I&#39;d agree, but in my case, lazy matching works here since the file is in a specific format, and won&#39;t ever have a case that doesn&#39;t work in this manner since I&#39;m generating the data it&#39;s processing.  (Dawg, it wasn&#39;t from me, no idea he did since he&#39;s agreeing with your original comment)"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 2, "last_activity_date": 1453684838, "last_edit_date": 1453684838, "creation_date": 1453684468, "answer_id": 34983690, "question_id": 34983282, "link": "https://stackoverflow.com/questions/34983282/regex-in-perl-match-newline-and-first-word-of-next-line/34983690#34983690", "title": "Regex in perl, match newline AND first word of next line", "body": "<p>For a <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow\">\"slurp\"</a> approach, you can use this regex:</p>\n\n<pre><code>(^title=\"([^\"]+)\")\\s*\\R(^artist=\"([^\"]+)\")\\s*(?:\\R|\\z)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/uB4kN1/1\" rel=\"nofollow\">Demo</a></p>\n\n<p>Then given your example:</p>\n\n<pre><code>$ echo \"$art\" \ntitle=\"title1\"  \nartist=\"artist1\"  \ntitle=\"title2\"  \nartist=\"artis2\"  \ntitle=\"title3\"  \nartist=\"artist3\"\n</code></pre>\n\n<p>Just \"slurp\" the file with <code>-0777</code> and print <code>$2</code> and <code>$4</code>:</p>\n\n<pre><code>$ echo \"$art\" | perl -0777 -lne 'while (/(^title=\"([^\"]+)\")\\s*\\R(^artist=\"([^\"]+)\")\\s*(?:\\R|\\z)/gm) { print \"$4 - $2\\n\"}'\nartist1 - title1\nartis2 - title2\nartist3 - title3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1453687641, "last_edit_date": 1453687641, "creation_date": 1453685076, "answer_id": 34983764, "question_id": 34983282, "link": "https://stackoverflow.com/questions/34983282/regex-in-perl-match-newline-and-first-word-of-next-line/34983764#34983764", "title": "Regex in perl, match newline AND first word of next line", "body": "<p>IF your file is exactly as you describe it, you can use this command that reads two lines at once. In this way you avoid the slurp mode:</p>\n\n<pre><code>perl -pe '$_.=&lt;&gt;;s/.*?\"(.*?)\".*?\"(.*?)\"/$2 - $1/s' file\n</code></pre>\n\n<p>if you need something more explicit, you can use:</p>\n\n<pre><code>perl -pe 'if (/^title=\"/){$_.=&lt;&gt;;s/^.*?\"(.*?)\"\\h*\\Rartist=\"(.*?)\"\\h*/$2 - $1/}' file\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 4588910, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/039aebc65b2fe3ec07773d9249f890c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trel", "link": "https://stackoverflow.com/users/4588910/trel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2165, "favorite_count": 0, "accepted_answer_id": 34983690, "answer_count": 4, "score": 3, "last_activity_date": 1467624925, "creation_date": 1453681036, "last_edit_date": 1453681734, "question_id": 34983282, "link": "https://stackoverflow.com/questions/34983282/regex-in-perl-match-newline-and-first-word-of-next-line", "title": "Regex in perl, match newline AND first word of next line", "body": "<p>I have a file that looks like</p>\n\n<pre><code>title=\"title1\"  \nartist=\"artist1\"  \ntitle=\"title2\"  \nartist=\"artis2\"  \ntitle=\"title3\"  \nartist=\"artist3\"\n</code></pre>\n\n<p>And so on</p>\n\n<p>this command<br>\n<code>perl -pe 's/title=\"(.*?)\"\\n//ig' list.txt</code></p>\n\n<p>Is not working as I'd hope.  If I do that alone, I get just the artist lines, BUT if I do this  </p>\n\n<p><code>perl -pe 's/title=\"(.*?)\"\\nartist//ig' list.txt</code></p>\n\n<p>It doesn't match at all.<br>\nI've tried with and without the /g and tried with the addition of a /m\nI've look at the file in nano, and I don't see any additional characters between the final \" in each line and the \"artist\" in the next.</p>\n\n<p>Anyone know what I'm doing wrong?  (I'm using perl rather than sed, because the regex that generates this list uses a negative lookahead).</p>\n\n<p>My goal is to be able to use a line like below<br>\n<code>perl -pe 's/title=\"(.*?)\"\\nartist=\"(.*?)\"(?:\\n|$)/\\2 - \\1/ig' list.txt</code>  </p>\n\n<p>That would output something like  </p>\n\n<pre><code>artist1 - title1  \nartist2 - title2  \nartist3 - title3\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453669571, "post_id": 34980725, "comment_id": 57692052, "body": "You <i>must always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program that you write"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453671437, "post_id": 34980725, "comment_id": 57692704, "body": "I have tried to improve your question, but the paragraph starting <i>&quot;This is my test file&quot;</i> doesn&#39;t make sense. Please will you fix it?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453669703, "post_id": 34980946, "comment_id": 57692104, "body": "You should explain that you have assumed the input to be HTML"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453669751, "post_id": 34980946, "comment_id": 57692127, "body": "Rather a combination of TeX, php and something :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453673904, "post_id": 34980946, "comment_id": 57693497, "body": "@choroba: I&#39;m talking specifically about <code># Not \\p!</code>. It&#39;s always dangerous to alter anything but white space from the OP&#39;s post. But I agree, and I&#39;m worried about the bigger question that&#39;s sure to come ..."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1453676810, "last_edit_date": 1453676810, "creation_date": 1453666602, "answer_id": 34980946, "question_id": 34980725, "link": "https://stackoverflow.com/questions/34980725/backslash-not-working-in-regex-when-stored-in-an-array-in-perl/34980946#34980946", "title": "Backslash not working in regex when stored in an array in Perl", "body": "<p>Strings in double quotes are \"interpolated\" in Perl. Backslash has a special meaning here. If you want to store regular expressions in an array, it's better to use the <code>qr//</code> construct:</p>\n\n<pre><code>my @PATTERNS = ( qr/\\\\begin/,\n                 qr/\\\\end/,\n                 qr/{/,\n                 qr/}/,\n                 qr/&lt;\\d+(\\.\\d+)?&gt;/,\n                 qr/&lt;p&gt;/,\n                 qr(&lt;/p&gt;), # I assumed HTML/PHP, so replaced \\p.\n                 qr/.*/,\n                 qr/%%+/,\n                 qr/&lt;%/,\n                 qr/%&gt;/,\n               ) ;\n</code></pre>\n\n<p>You should use <a href=\"http://p3rl.org/warnings\" rel=\"nofollow\">warnings</a>, they would warn you against some mistakes you made:</p>\n\n<pre><code>Unrecognized escape \\d passed through at /home/choroba/1.pl line 5.\nUnrecognized escape \\d passed through at /home/choroba/1.pl line 5.\nmain::test() called too early to check prototype at /home/choroba/1.pl line 10.\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4338249, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2_rurkJRS-s/AAAAAAAAAAI/AAAAAAAACz0/T4VSvzsNKlI/photo.jpg?sz=128", "display_name": "darthhiggy", "link": "https://stackoverflow.com/users/4338249/darthhiggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 34980946, "answer_count": 1, "score": 1, "last_activity_date": 1454329043, "creation_date": 1453665454, "last_edit_date": 1454329043, "question_id": 34980725, "link": "https://stackoverflow.com/questions/34980725/backslash-not-working-in-regex-when-stored-in-an-array-in-perl", "title": "Backslash not working in regex when stored in an array in Perl", "body": "<p>I'm working on a simple lexical analyser for a project and I'm using an array to store regex patterns as strings.</p>\n\n<p>I test each regex pattern individually to make sure I get the correct output when checking a line of a file.</p>\n\n<p>The problem is, once I stored these strings in an array I started getting several errors. Mainly when searching for strings that start with backslash <code>\\</code>.</p>\n\n<p>This is my Perl code</p>\n\n<pre><code>#!/usr/bin/perl\n\n@PATTERNS = (\"\\\\begin\", \"\\\\end\", \"{\", \"}\", \"&lt;\\d+(\\.\\d+)?&gt;\", \"&lt;p&gt;\", \"&lt;\\\\p&gt;\", \".*\", \"%%+\", \"&lt;%\", \"%&gt;\") ;\n\nprint \"Enter some text: \";\nchomp( $input = &lt;&gt; );\n\nprint test();\n\nsub test() {\n\n    my $arrSize = @PATTERNS;\n\n    for ( my $i = 0; $i &lt; $arrSize; $i++ ) {\n\n        if ( $input =~ /$PATTERNS[$i]/gi ) {\n            print \"good input\\n\";\n        }\n        else {\n            print \"bad input\\n\";\n        }\n    }\n\n}\n</code></pre>\n\n<p>This above is my test file to read lines I manually type in to check regex expression and give me a good input if it matches or bad input if it doesn't.</p>\n\n<p>Perl continues to skip over my backslashes no matter how I use it in each string.</p>\n\n<p>I'm using the default Perl v5.18.2 that is installed with Ubuntu 14.04.</p>\n"}, {"tags": ["perl", "string-length"], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453655471, "post_id": 34977680, "comment_id": 57686831, "body": "My apologies for that oversight on $F[2] - had forgotten to adjust my script for the sample data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453665377, "post_id": 34977680, "comment_id": 57690507, "body": "Please don&#39;t apologise for mistakes, but you should always post the <i>exact</i> input data, code, and results that have caused your problem"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1453649927, "creation_date": 1453649927, "answer_id": 34977680, "question_id": 34977629, "link": "https://stackoverflow.com/questions/34977629/character-count-length-within-specific-column/34977680#34977680", "title": "Character count (length) within specific column", "body": "<p>It seems that you were close. Perl array indices start at zero, so how about using the length of <code>$F[1]</code>? You will also need some sort of separator</p>\n\n<pre><code>perl -lape '$_ .= \"\\t\". length($F[1])' input\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1   AA  2\n2   BBB 3\n3   CCCCC       5\n4   EE  2\n5   DDD 3\n6   AAA 3\n7   FFFFF       5\n8   AA  2\n9   BBB 3\n10  NNN 3\n</code></pre>\n\n<p>If you want the output <em>exactly</em> as you show, then you will need to use <code>printf</code> like this</p>\n\n<pre><code>perl -lane 'printf qq{%-4d%-8s%d\\n}, @F, length($F[1])' input\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1   AA      2\n2   BBB     3\n3   CCCCC   5\n4   EE      2\n5   DDD     3\n6   AAA     3\n7   FFFFF   5\n8   AA      2\n9   BBB     3\n10  NNN     3\n</code></pre>\n"}], "owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 34977680, "answer_count": 1, "score": 1, "last_activity_date": 1453649927, "creation_date": 1453649659, "question_id": 34977629, "link": "https://stackoverflow.com/questions/34977629/character-count-length-within-specific-column", "title": "Character count (length) within specific column", "body": "<p>Is there a one-line method to obtain character length for strings held within a specific column of a tab-delimited .txt file and then append these counts onto the final column (number of columns may be variable)?</p>\n\n<p><strong>Sample Data:</strong></p>\n\n<pre><code>1   AA\n2   BBB\n3   CCCCC\n4   EE\n5   DDD\n6   AAA\n7   FFFFF\n8   AA\n9   BBB\n10  NNN\n</code></pre>\n\n<p>To get the counts, I have attempted to use:</p>\n\n<pre><code>perl -lane 'print length $F[2]' in &gt; out\n\nperl -F, -Mopen=:locale -lane 'print length $F[2]' in &gt; out\n</code></pre>\n\n<p>However, the results are empty. </p>\n\n<p>I have also tried:</p>\n\n<pre><code>perl -lane '$_.=$F[2]; print length $_'\n</code></pre>\n\n<p>But this, as I now realise, prints the number of characters for the entire line rather than a specific column. </p>\n\n<p>I am not sure how I would then append the final column. </p>\n\n<p><strong>Desired Output (when counting column 2):</strong></p>\n\n<pre><code>1   AA      2   \n2   BBB     3\n3   CCCCC   5\n4   EE      2\n5   DDD     3\n6   AAA     3\n7   FFFFF   5\n8   AA      2\n9   BBB     3\n10  NNN     3\n</code></pre>\n"}, {"tags": ["perl", "hash", "subroutine", "subroutine-prototypes"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1453598000, "post_id": 34970871, "comment_id": 57672050, "body": "The <code>%</code> prototype is the same as the <code>@</code> prototype. <code>%</code> just has extra implications to the reader."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453598103, "post_id": 34970871, "comment_id": 57672073, "body": "If you casted a pointer to an array into a pointer to a hash in C, you&#39;d get segfault when you&#39;d try to use that pointer."}], "answers": [{"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 2, "creation_date": 1453611335, "post_id": 34971079, "comment_id": 57674518, "body": "<a href=\"http://meta.stackexchange.com/questions/35211/adding-someone-elses-answer-to-your-own-to-make-a-better-answer\">Adding someone else&#39;s answer to your own to make a better answer</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1453612108, "post_id": 34971079, "comment_id": 57674640, "body": "@cdlane, Technically, I just re-added information that was originally in my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1453609318, "last_edit_date": 1453609318, "creation_date": 1453597897, "answer_id": 34971079, "question_id": 34970871, "link": "https://stackoverflow.com/questions/34970871/subroutine-arguments-as-key-value-pairs-without-a-temp-variable/34971079#34971079", "title": "Subroutine arguments as key-value pairs without a temp variable", "body": "<p>You can't perform a hash lookup (<code>${...}{...}</code>) without having a hash. But you could create an anonymous hash.</p>\n\n<pre><code>my $apples  = ${ { @_ } }{apples};\nmy $oranges = ${ { @_ } }{oranges};\n</code></pre>\n\n<p>You could also use the simpler post-dereference syntax</p>\n\n<pre><code>my $apples  = { @_ }-&gt;{apples};\nmy $oranges = { @_ }-&gt;{oranges};\n</code></pre>\n\n<p>That would be very inefficient though. You'd be creating a new hash for each parameter. That's why a named hash is normally used.</p>\n\n<pre><code>my %args = @_;\nmy $apples  = $args{apples};\nmy $oranges = $args{oranges};\n</code></pre>\n\n<p>An alternative, however, would be to use a hash slice.</p>\n\n<pre><code>my ($apples, $oranges) = @{ { @_ } }{qw( apples oranges )};\n</code></pre>\n\n<p>The following is the post-derefence version, but it's only available in 5.24+<sup>[1]</sup>:</p>\n\n<pre><code>my ($apples, $oranges) = { @_ }-&gt;@{qw( apples oranges )};\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p>It's available in 5.20+ if you use the following:</p>\n\n<pre><code>use feature qw( postderef );\nno warnings qw( experimental::postderef );\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453612172, "post_id": 34971228, "comment_id": 57674652, "body": "@ikegami Very interesting - I&#39;d like to add that <code>{@_}-&gt;{apples}</code> also seems to conflict with the beginning of a new block, if it&#39;s on a line without a function name preceding it. It won&#39;t compile anyway. I never knew about the unary <code>+</code> operator - good stuff."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 1, "creation_date": 1453612428, "post_id": 34971228, "comment_id": 57674688, "body": "@iPherian, Unary <code>+</code> literally does nothing. It&#39;s not present at run-time; it doesn&#39;t even force scalar context. But it&#39;s useful in cases like this. A common place that needs disambiguation is <code>map</code>&#39;s arguments. <code>map +{ ... }, LIST</code> is used to force the <code>map EXPR, LIST</code> syntax, and <code>map {; ... } LIST</code> is used to force the <code>map BLOCK LIST</code> syntax."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 4, "last_activity_date": 1453609069, "last_edit_date": 1453609069, "creation_date": 1453599304, "answer_id": 34971228, "question_id": 34970871, "link": "https://stackoverflow.com/questions/34970871/subroutine-arguments-as-key-value-pairs-without-a-temp-variable/34971228#34971228", "title": "Subroutine arguments as key-value pairs without a temp variable", "body": "<p>If you're more concerned about compactness than efficiency, you can do it this way:</p>\n\n<pre><code>sub fruit {\n    print( +{@_}-&gt;{apples}, \"\\n\" );\n\n    my $y = {@_}-&gt;{pears};\n\n    print(\"$y\\n\");\n}\n\nfruit(apples =&gt; 'red', pears =&gt; 'green');\n</code></pre>\n\n<p>The reason <code>+{@_}-&gt;{apples}</code> was used instead of <code>{@_}-&gt;{apples}</code> is that it conflicts with the <code>print BLOCK LIST</code> syntax of <code>print</code> without it (or some other means of disambiguation).</p>\n"}], "owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 1, "accepted_answer_id": 34971079, "answer_count": 2, "score": 6, "last_activity_date": 1453609318, "creation_date": 1453596104, "last_edit_date": 1453596530, "question_id": 34970871, "link": "https://stackoverflow.com/questions/34970871/subroutine-arguments-as-key-value-pairs-without-a-temp-variable", "title": "Subroutine arguments as key-value pairs without a temp variable", "body": "<p>In Perl, I've always liked the key-value pair style of argument passing,</p>\n\n<p><code>fruit( apples =&gt; red );</code></p>\n\n<p>I do this a lot:</p>\n\n<pre><code>sub fruit {\n    my %args = @_;\n    $args{apples}\n}\n</code></pre>\n\n<p>Purely for compactness and having more than one way to do it, is there a way to either: </p>\n\n<ul>\n<li><p>access the key-value pairs without assigning <code>@_</code> to a hash? I.e. in a single statement?</p></li>\n<li><p>have the subroutine's arguments automatically become a hash reference, perhaps via a subroutine prototype?</p></li>\n</ul>\n\n<h3>Without:</h3>\n\n<ul>\n<li><p>assigning to a temp variable <code>my %args = @_;</code></p></li>\n<li><p>having the caller pass by reference i.e. <code>fruit({ apples =&gt; red });</code>  <em>purely for aesthetics</em></p></li>\n</ul>\n\n<p><br/></p>\n\n<h2>Attempted</h2>\n\n<ul>\n<li><p><code>${%{\\@_}}{apples}</code></p>\n\n<p>Trying to reference <code>@_</code>, interpret that as a hash ref, and access a value by key.</p>\n\n<p>But I get an error that it's not a hash reference. (Which it isn't ^.^ ) I'm thinking of C where you can cast pointers, amongst other things, and avoid explicit reassignment.</p></li>\n<li><p>I also tried subroutine prototypes</p>\n\n<p><code>sub fruit (%) { ... }</code></p>\n\n<p>...but the arguments get collapsed into <code>@_</code> as usual.</p></li>\n</ul>\n"}, {"tags": ["perl", "datetime", "encoding", "cldr"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453593269, "post_id": 34970184, "comment_id": 57670901, "body": "You define <code>$locale2</code> but use <code>$locale</code>. Do you <code>use strict;</code> and <code>use warnings;</code> ?"}, {"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453593556, "post_id": 34970184, "comment_id": 57670979, "body": "@glennjackman: You are right. Unfortunately, it still fails even after fixing this."}], "answers": [{"comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1453616735, "post_id": 34971649, "comment_id": 57675449, "body": "OK, but the first test I have posted is not using anything outside ASCII."}, {"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1453641296, "post_id": 34971649, "comment_id": 57681845, "body": "I apparently suck at my own mother tongue more than I thought! I also suck at making proper SO questions. :) I would give you 10 upvotes if I could. You were right on all accounts in the end. The genitive form of the month <i>is</i> actually used in the source where I am taking the date from."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1453649095, "post_id": 34971649, "comment_id": 57684412, "body": "No worries. That executable bit you added was awesome :) I wish all questions were executable."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1453618113, "last_edit_date": 1453618113, "creation_date": 1453603512, "answer_id": 34971649, "question_id": 34970184, "link": "https://stackoverflow.com/questions/34970184/datetimeformatcldr-issues-parsing-long-czech-dates/34971649#34971649", "title": "DateTime::Format::CLDR issues parsing long Czech dates", "body": "<h2>17. listopad 1989</h2>\n\n<p><code>print(Dumper($self-&gt;_build_pattern()));</code> gives a peek into what the module expects. It outputs the following in this case.</p>\n\n<pre><code>$VAR1 = [\n          [\n            qr/(3[01]|[12]\\d|0?[1-9])/,\n            'd',\n            1\n          ],\n          '\\\\.',\n          '\\\\s+',\n          [\n            \"(listopadu|\\x{10d}ervence|prosince|b\\x{159}ezna|kv\\x{11b}tna|\\x{10d}ervna|ledna|\\x{fa}nora|dubna|srpna|\\x{159}\\x{ed}jna|z\\x{e1}\\x{159}\\x{ed})\",\n            'M',\n            4\n          ],\n          '\\\\s+',\n          [\n            qr/(-?\\d{1,4})/,\n            'y',\n            1\n          ]\n        ];\n</code></pre>\n\n<p>It expects <code>listopadu</code>, but not <code>listopad</code>. I don't know anything about Czech, but the module's behaviour appears to be <a href=\"https://en.wikiversity.org/wiki/Czech_Language/Months_and_Dates\" rel=\"nofollow\">correct</a>. You could \"fix up\" the dates before parsing them.</p>\n\n<pre><code>$date_string =~ s/\\blistopad\\b\\K/u/;\n</code></pre>\n\n<h2>19. z\u00e1\u0159\u00ed 1979</h2>\n\n<p>You're not actually passing <code>z\u00e1\u0159\u00ed</code> (<code>\"z\\x{e1}\\x{159}\\x{ed}\"</code>). You're passing its UTF-8 encoding (<code>\"z\\x{c3}\\x{a1}\\x{c5}\\x{99}\\x{c3}\\x{ad}\"</code>). Add <code>use utf8;</code> to tell Perl the source code is encoded using UTF-8.</p>\n"}], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 34971649, "answer_count": 1, "score": 2, "last_activity_date": 1453618113, "creation_date": 1453591333, "last_edit_date": 1453603549, "question_id": 34970184, "link": "https://stackoverflow.com/questions/34970184/datetimeformatcldr-issues-parsing-long-czech-dates", "title": "DateTime::Format::CLDR issues parsing long Czech dates", "body": "<p>I am trying to parse Czech dates using CLDR long format as specified by <code>DateTime::Locale::cs_CZ</code>. I see no obvious reason why it should fail.</p>\n\n<pre><code>my $locale2 = DateTime::Locale-&gt;load('cs_CZ');\nmy $cldr5 = DateTime::Format::CLDR-&gt;new(\n    pattern     =&gt; $locale2-&gt;date_format_long,\n    locale      =&gt; $locale2,\n    );\n\nprint $cldr5-&gt;pattern, \"\\n\";\nprint $cldr5-&gt;parse_datetime('17. listopad 1989');\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>d. MMMM y\n\nUse of uninitialized value in print at ./test-cldr.pl line 54.\n</code></pre>\n\n<p>What am I doing wrong? Why does it not parse the date?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This is what I have actually been using to test this on command line:</p>\n\n<pre><code>perl -MData::Dumper -MDateTime -MDateTime::Format::CLDR -wle'\n    local $SIG{__DIE__} = sub { print( Carp::longmess (shift) ); };\n    $x=\"19. z\u00e1\u0159\u00ed 1979\";\n    my $loc = DateTime::Locale-&gt;load(\"cs_CZ\");\n    print Dumper($loc), \"\\n\";\n    my $cldr = DateTime::Format::CLDR-&gt;new(\n       pattern=&gt;$loc-&gt;date_format_long, locale=&gt;$loc, on_error =&gt; \"croak\");\n    print Dumper($cldr-&gt;parse_datetime($x));\n'\n</code></pre>\n\n<p>This is the output I get:</p>\n\n<pre><code>$VAR1 = bless( {\n                 'en_language' =&gt; 'Czech',\n                 'native_territory' =&gt; \"\\x{10c}esk\\x{e1} republika\",\n                 'en_territory' =&gt; 'Czech Republic',\n                 'native_language' =&gt; \"\\x{10d}e\\x{161}tina\",\n                 'default_time_format_length' =&gt; 'medium',\n                 'id' =&gt; 'cs_CZ',\n                 'native_complete_name' =&gt; \"\\x{10d}e\\x{161}tina \\x{10c}esk\\x{e1} republika\",\n                 'default_date_format_length' =&gt; 'medium',\n                 'en_complete_name' =&gt; 'Czech Czech Republic'\n               }, 'DateTime::Locale::cs_CZ' );\n\n\nCould not get datetime for 19. z\u00e1\u0159\u00ed 1979 (Error marked by 'HERE--&gt;'): '19.  HERE--&gt;z\u00e1\u0159\u00ed 1979' at -e line 7.\n at /usr/share/perl5/DateTime/Format/CLDR.pm line 965.\n    DateTime::Format::CLDR::_local_croak(DateTime::Format::CLDR=HASH(0x166bcd8), \"Could not get datetime for 19. z\\x{c3}\\x{a1}\\x{c5}\\x{99}\\x{c3}\\x{ad} 1979 (Error marked by \"...) called at /usr/share/perl5/DateTime/Format/CLDR.pm line 558\n    DateTime::Format::CLDR::__ANON__(\"z\\x{c3}\\x{a1}\\x{c5}\\x{99}\\x{c3}\\x{ad} 1979\") called at /usr/share/perl5/DateTime/Format/CLDR.pm line 582\n    DateTime::Format::CLDR::parse_datetime(DateTime::Format::CLDR=HASH(0x166bcd8), \"19. z\\x{c3}\\x{a1}\\x{c5}\\x{99}\\x{c3}\\x{ad} 1979\") called at -e line 7\n\nCould not get datetime for 19. z\u00e1\u0159\u00ed 1979 (Error marked by 'HERE--&gt;'): '19.  HERE--&gt;z\u00e1\u0159\u00ed 1979' at -e line 7.\n</code></pre>\n"}, {"tags": ["java", "perl", "recursion", "boolean", "combinations"], "comments": [{"owner": {"reputation": 679, "user_id": 5792507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-QVSJS0a07tQ/AAAAAAAAAAI/AAAAAAAAAVs/fkPegmIZ_9k/photo.jpg?sz=128", "display_name": "ostrichofevil", "link": "https://stackoverflow.com/users/5792507/ostrichofevil"}, "edited": false, "score": 0, "creation_date": 1453585802, "post_id": 34969275, "comment_id": 57668720, "body": "Why can&#39;t you use binary?"}, {"owner": {"reputation": 929, "user_id": 4065876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ae9c927dd498aa6700455afd3e0f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Luis", "link": "https://stackoverflow.com/users/4065876/jose-luis"}, "edited": false, "score": 0, "creation_date": 1453586115, "post_id": 34969275, "comment_id": 57668799, "body": "Perhaps this helps:  <a href=\"http://stackoverflow.com/questions/8374079/fastest-way-to-generate-all-binary-strings-of-size-n-into-a-boolean-array?rq=1\" title=\"fastest way to generate all binary strings of size n into a boolean array\">stackoverflow.com/questions/8374079/&hellip;</a>"}, {"owner": {"reputation": 560, "user_id": 451370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66840f94bdda425bcf9aa9aaa4c37546?s=128&d=identicon&r=PG", "display_name": "Mr Rho", "link": "https://stackoverflow.com/users/451370/mr-rho"}, "edited": false, "score": 0, "creation_date": 1453586164, "post_id": 34969275, "comment_id": 57668812, "body": "@user752637 The code is sound - what do you mean you can&#39;t use binary magic? If you don&#39;t want to use the Math.pow function you can simply do <code>(0x01 &lt;&lt; n)</code> but you still have to traverse the possible states..."}, {"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "reply_to_user": {"reputation": 560, "user_id": 451370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66840f94bdda425bcf9aa9aaa4c37546?s=128&d=identicon&r=PG", "display_name": "Mr Rho", "link": "https://stackoverflow.com/users/451370/mr-rho"}, "edited": false, "score": 0, "creation_date": 1453590050, "post_id": 34969275, "comment_id": 57669985, "body": "@MrRho: I cannot use binary because I am porting this to a system where there are no binary types / functions."}, {"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "reply_to_user": {"reputation": 929, "user_id": 4065876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ae9c927dd498aa6700455afd3e0f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Luis", "link": "https://stackoverflow.com/users/4065876/jose-luis"}, "edited": false, "score": 0, "creation_date": 1453591561, "post_id": 34969275, "comment_id": 57670375, "body": "@JoseLuis: Unfortunately it uses binary and I can&#39;t use it, but it is a great solution! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453590279, "post_id": 34969464, "comment_id": 57670044, "body": "This is AWESOME! Great recursion! Thanks a lot!!! I wish I could write something like this out of the top of my head."}, {"owner": {"reputation": 1079, "user_id": 4186749, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEuqsQRu-DQ/AAAAAAAAAAI/AAAAAAAAALI/Rw0qMFNKh7k/photo.jpg?sz=128", "display_name": "Tommaso Pasini", "link": "https://stackoverflow.com/users/4186749/tommaso-pasini"}, "reply_to_user": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453623401, "post_id": 34969464, "comment_id": 57676743, "body": "You have to do a lot of exercise to handle recursion is not something that you just do at first attempt! So just keep coding and exercise! :)"}, {"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453640295, "post_id": 34969464, "comment_id": 57681512, "body": "Yes, it&#39;s like you have to grow it, the recursion comprehension :) I should get a book on recursion or something."}], "tags": [], "owner": {"reputation": 1079, "user_id": 4186749, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEuqsQRu-DQ/AAAAAAAAAAI/AAAAAAAAALI/Rw0qMFNKh7k/photo.jpg?sz=128", "display_name": "Tommaso Pasini", "link": "https://stackoverflow.com/users/4186749/tommaso-pasini"}, "is_accepted": true, "score": 2, "last_activity_date": 1453586764, "creation_date": 1453586764, "answer_id": 34969464, "question_id": 34969275, "link": "https://stackoverflow.com/questions/34969275/print-all-possible-boolean-states-of-n-variables-in-perl-java-w-o-binary/34969464#34969464", "title": "Print all possible boolean states of n variables in Perl/Java w/o binary", "body": "<p>what about something like this? Add a comment if something is not clear! </p>\n\n<pre><code>void allConfigurations(int n, int[] config, int index)\n{\n    if(index == n)// base case, the whole config has been filled\n    {\n        printConfiguration(config);\n        return;\n    }\n    config[index] = 0; //create config with 0 at index\n    allConfigurations(n, config, index + 1);\n    config[index] = 1; //create config with 1 at index\n    allConfigurations(n, config, index + 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "is_accepted": false, "score": 1, "last_activity_date": 1453590963, "creation_date": 1453590963, "answer_id": 34970131, "question_id": 34969275, "link": "https://stackoverflow.com/questions/34969275/print-all-possible-boolean-states-of-n-variables-in-perl-java-w-o-binary/34970131#34970131", "title": "Print all possible boolean states of n variables in Perl/Java w/o binary", "body": "<p>Just posting the Perl version of the great solution above, in case somebody needs it.\n@TommasoPasini thanks again!</p>\n\n<pre><code>sub allConfigurations{\n    my ($n, $index, @config) = @_;\n\n    if($index == $n) #base case, the whole config has been filled\n    {\n        &amp;printConfiguration(@config);\n        return;\n    }\n    $config[$index] = 0; #create config with 0 at index\n    allConfigurations($n, $index + 1, @config);\n\n    $config[$index] = 1; #create config with 1 at index\n    allConfigurations($n, $index + 1, @config);\n}\n\nsub printConfiguration{\n    my @config = @_;\n\n    print \"@config\";\n    print \"\\n\";\n}\n\n\n&amp;allConfigurations(3, my $index=0, my @conf);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453638701, "post_id": 34971150, "comment_id": 57681031, "body": "This is also a great solution, the one with the artificial binaries :) Thanks! But I still preffer the first solution above, because it gives me the  opportunity to parametrize also the quantity of states. At some point I can say - now I don&#39;t have only boolean states, but I have let&#39;s say 4 states - true, false, half-true and half-false. I know it sounds like &quot;just a little pregnant&quot; but for me it makes sense :)"}, {"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453639979, "post_id": 34971150, "comment_id": 57681410, "body": "OK, I just did that with your solution also. Many paths lead to Rome I guess :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453649196, "post_id": 34971150, "comment_id": 57684450, "body": "If you want ternary, just replace 2** with 3**, %2 with %3, and /2 with /3."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1453657760, "post_id": 34971150, "comment_id": 57687584, "body": "Added an optimized version."}, {"owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1454270134, "post_id": 34971150, "comment_id": 57957711, "body": "Thanks! But still the best option, performance wise is the one with the recursion above. It delivers the result almost twice as fast."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "edited": false, "score": 0, "creation_date": 1454271537, "post_id": 34971150, "comment_id": 57958307, "body": "@user752637, What? No,that&#39;s not true. Mine is 30% faster for n=3 and 50% faster for n=10. In fact, if you inline <code>get_next</code>, mine is the one that&#39;s twice as fast (n=3) or even faster (2.4x for n=10). Subroutine calls are very expensive in Perl. Benchmarks added to answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1454271475, "last_edit_date": 1454271475, "creation_date": 1453598599, "answer_id": 34971150, "question_id": 34969275, "link": "https://stackoverflow.com/questions/34969275/print-all-possible-boolean-states-of-n-variables-in-perl-java-w-o-binary/34971150#34971150", "title": "Print all possible boolean states of n variables in Perl/Java w/o binary", "body": "<p>The states are</p>\n\n<pre><code>sub bits {\n   my ($n, $i) = @_;\n   return map { my $bit = $i &amp; 1; $i &gt;&gt;= 1; $bit } 0..$n-1;\n}\n\nmy $n = 3;\nfor my $i (0 .. (1&lt;&lt;$n)-1) {\n   my @bits = bits($n, $i);\n   print(\"@bits\\n\");\n}\n</code></pre>\n\n<p>If you don't have <code>&amp;</code>, <code>&lt;&lt;</code> and <code>&gt;&gt;</code> (which would be really really weird as all CPUs have these), or if you want more than two states, you can use the following:</p>\n\n<pre><code>sub bits {\n   my ($b, $n, $i) = @_;\n   return map { my $bit = $i % $b; $i = ($i-$bit)/$b; $bit } 0..$n-1;\n}\n\nmy $n = 3;\nmy $b = 2;\nfor my $i (0 .. ($b**$n)-1) {\n   my @bits = bits($b, $n, $i);\n   print(\"@bits\\n\");\n}\n</code></pre>\n\n<p>Optimized:</p>\n\n<pre><code>sub get_next {\n   my ($b, $bits) = @_;\n   for (@$bits) {\n      return 1 if ++$_ != $b;\n      $_ = 0;\n   }\n   return 0;\n}\n\nmy $n = 3;\nmy $b = 2;\nmy @bits = (0) x $n;\nwhile (1) {\n   print(\"@bits\\n\");\n   last if !get_next($b, \\@bits);\n}\n</code></pre>\n\n<hr>\n\n<p>Benchmark results for n=3,</p>\n\n<pre><code>                  Rate tommaso_pasini        ikegami ikegami_inline\ntommaso_pasini 34462/s             --           -23%           -49%\nikegami        44612/s            29%             --           -34%\nikegami_inline 68061/s            97%            53%             --\n</code></pre>\n\n<p>Benchmark results for n=10,</p>\n\n<pre><code>                Rate tommaso_pasini        ikegami ikegami_inline\ntommaso_pasini 271/s             --           -33%           -58%\nikegami        403/s            48%             --           -38%\nikegami_inline 644/s           138%            60%             --\n</code></pre>\n\n<p>Benchmarking code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Benchmark qw( cmpthese );\n\nsub _tommaso_pasini {\n    my ($n, $bits, $i) = @_;\n\n    if ($i == $n) {\n    # ...\n        return;\n    }\n\n    $bits-&gt;[$i] = 0;\n    _tommaso_pasini($n, $bits, $i+1);\n    $bits-&gt;[$i] = 1;\n    _tommaso_pasini($n, $bits, $i+1);\n}\n\nsub tommaso_pasini {\n   my ($n) = @_;\n   _tommaso_pasini($n, [], 0);\n}\n\nsub ikegami_next {\n   my ($bits) = @_;\n   for (@$bits) {\n      return 1 if ++$_ != 2;\n      $_ = 0;\n   }\n   return 0;\n}\n\nsub ikegami {\n   my ($n) = @_;\n   my $bits = [ (0) x $n ];\n   while (1) {\n      # ...\n      last if !ikegami_next($bits);\n   }\n}\n\nsub ikegami_inline {\n   my ($n) = @_;\n   my $bits = [ (0) x $n ];\n   OUTER: while (1) {\n      # ...\n\n      for (@$bits) {\n         next OUTER if ++$_ != 2;\n         $_ = 0;\n      }\n\n      last;\n   }\n}\n\nfor my $n (3, 10) {\n   cmpthese(-3, {\n      ikegami        =&gt; sub { ikegami($n)        },\n      ikegami_inline =&gt; sub { ikegami_inline($n) },\n      tommaso_pasini =&gt; sub { tommaso_pasini($n) },\n   });\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 752637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea70ec65daf8106589d1288d236879de?s=128&d=identicon&r=PG", "display_name": "user752637", "link": "https://stackoverflow.com/users/752637/user752637"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 34969464, "answer_count": 3, "score": 1, "last_activity_date": 1454271475, "creation_date": 1453585634, "last_edit_date": 1495542214, "question_id": 34969275, "link": "https://stackoverflow.com/questions/34969275/print-all-possible-boolean-states-of-n-variables-in-perl-java-w-o-binary", "title": "Print all possible boolean states of n variables in Perl/Java w/o binary", "body": "<p>I need to generate all possible boolean states (2^n) of n variables. For example for n=3 it should look like this:</p>\n\n<pre><code>0 0 0  \n1 0 0  \n0 1 0  \n0 0 1  \n1 1 0  \n1 0 1  \n0 1 1  \n1 1 1  \n</code></pre>\n\n<p>Unfortunately I cannot use binary magic, like it is shown <a href=\"https://stackoverflow.com/questions/10923601/java-generator-of-trues-falses-combinations-by-giving-the-number-n\">here</a> so this (master)piece of simplicity is unusable for me :(</p>\n\n<pre><code>final int n = 3;\nfor (int i = 0; i &lt; Math.pow(2, n); i++) {\n    String bin = Integer.toBinaryString(i);\n        while (bin.length() &lt; n)\n        bin = \"0\" + bin;\n    System.out.println(bin);\n} \n</code></pre>\n\n<p>I need to do this in a simple yet efficient way using plain cycles without special things like binary or list functions as shown in the answer above. </p>\n\n<p>Any help would be much appreciated!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453588309, "post_id": 34969119, "comment_id": 57669452, "body": "Or <code>split &#47;[\\r\\n]+&#47;</code> or <code>split &#47;\\R&#47;</code>"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453591029, "post_id": 34969119, "comment_id": 57670233, "body": "Yes, the <code>[\\r\\n]+</code> version obviously has different behaviour with regard to blank lines, but that might suit the OP better anyway. I wasn&#39;t aware of <code>\\R</code>."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 5, "last_activity_date": 1453584816, "creation_date": 1453584816, "answer_id": 34969119, "question_id": 34969059, "link": "https://stackoverflow.com/questions/34969059/print-line-by-line/34969119#34969119", "title": "Print Line By Line", "body": "<p>Your call to <code>split</code> looks suspicious. In particular the regex <code>\"\\n\\r\"</code>.  Note, the first argument to <a href=\"http://perldoc.perl.org/functions/split.html\">split</a> is always interpreted as a regex regardless of whether you supply a quoted string.</p>\n\n<p>On Unix systems the line ending is typically <code>\"\\n\"</code>.  On DOS/Windows it's <code>\"\\r\\n\"</code> (the reverse of what you have).  On ancient Macs it was <code>\"\\r\"</code>.  To match all thre you could do:</p>\n\n<pre><code>my @lines = split(/\\r\\n|\\n|\\r/, $lyrics);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453590824, "post_id": 34969712, "comment_id": 57670186, "body": "Isn&#39;t STDOUT to a TTY effectively autoflushed (output on each print) anyway?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453630025, "post_id": 34969712, "comment_id": 57678406, "body": "@GrantMcLean: No, only STDERR is autoflushed by default"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453661882, "post_id": 34969712, "comment_id": 57689089, "body": "I re-read the doc for $| and I think I was using the wrong terminology. It says STDOUT to a TTY will typically be line buffered - which was what I meant. As long as your print ends with <code>&quot;\\n&quot;</code> it will be output immediately."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1453588698, "last_edit_date": 1453588698, "creation_date": 1453588230, "answer_id": 34969712, "question_id": 34969059, "link": "https://stackoverflow.com/questions/34969059/print-line-by-line/34969712#34969712", "title": "Print Line By Line", "body": "<p>You will need to enable <code>autoflush</code>, otherwise the lines will just be buffered and printed when the buffer is full or when the program terminates</p>\n\n<pre><code>STDOUT-&gt;autoflush;\n</code></pre>\n\n<p>You can use the regex <em>generic newline</em> pattern <code>\\R</code> to split on <em>any</em> line ending, whether your data contains CR, LF, or CR LF. This feature is available only in Perl v5.10 or better</p>\n\n<pre><code>my @lines = split /\\R/, $lyrics;\n</code></pre>\n\n<p>And you will need to print a newline after each line of lyrics, because the <code>split</code> will have removed them</p>\n\n<pre><code>print $line, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 2524169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1304c798c6cfeef204c962d90f76f5a?s=128&d=identicon&r=PG", "display_name": "user2524169", "link": "https://stackoverflow.com/users/2524169/user2524169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 34969119, "answer_count": 2, "score": 3, "last_activity_date": 1453588698, "creation_date": 1453584481, "question_id": 34969059, "link": "https://stackoverflow.com/questions/34969059/print-line-by-line", "title": "Print Line By Line", "body": "<p>I've been trying to work on a lyrical bot for my server, but before I started to work on it, I wanted to give it a test so I came up with this script using the Lyrics::Fetcher module.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Lyrics::Fetcher;\n\nmy ($artist, $song) = ('Coldplay', 'Adventures Of A Lifetime');\n\nmy $lyrics = Lyrics::Fetcher-&gt;fetch($artist, $song, [qw(LyricWiki AstraWeb)]);\n\nmy @lines = split(\"\\n\\r\", $lyrics);\n\nforeach my $line (@lines) {\n        sleep(10);\n        print $line;\n}\n</code></pre>\n\n<p>This script works fine, it grabs the lyrics and prints it out in a whole(which is not what I'm looking for).</p>\n\n<p>I was hoping to achieve a line by line print of the lyrics every 10 seconds. Help please?</p>\n"}, {"tags": ["perl", "error-handling", "die"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453559651, "post_id": 34964638, "comment_id": 57659830, "body": "The way you have your code, it will try to call a function <code>DCMFReport()</code> and a function <code>txt()</code> and concatenate the return values of both, then use that value as the first argument to <code>seek</code>. Always <code>use strict</code> and <code>use warnings</code>!"}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453559671, "post_id": 34964638, "comment_id": 57659836, "body": "that worked. what did the quotes add to that line if i may ask. thanks."}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453559739, "post_id": 34964638, "comment_id": 57659857, "body": "i do have use strict and use warnings"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453560703, "post_id": 34964638, "comment_id": 57660157, "body": "That shouldn&#39;t have worked... <code>seek</code> expects a filehandle as its first argument."}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453561051, "post_id": 34964638, "comment_id": 57660272, "body": "that did work, now the die is getting executed and i see the &quot;Report seek...&quot;"}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453561579, "post_id": 34964638, "comment_id": 57660430, "body": "when i try seek $filename, $offset, 0 or die &quot;Report seek error, offset:$offset - $!&quot;;  - it doesnt work either. It works if i put &quot;$filename&quot; in quotes"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453567682, "post_id": 34965542, "comment_id": 57662443, "body": "@st well that&#39;s definitely better than bare wording it;-)"}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453568119, "post_id": 34965542, "comment_id": 57662594, "body": "That didn&#39;t work though,                                                                                                                    I tried open                                                                                                       my $file, &#39;&lt;&#39;, $filename or die $!;"}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453568460, "post_id": 34965542, "comment_id": 57662724, "body": "That didn&#39;t work though,                                                                                                                    I tried open  my $file, &#39;&lt;&#39;, $filename or die $!; followed by the seek   seek $file, $offset, 0 or die &quot;Report...   - this doesn&#39;t go to the die, actually the problem was the offset, it was a non numeric value that was coming in. If i pass a numeric value in the offset, the script runs fine. If passed a non-numeric, the error doesn&#39;t go to the die, the entire script gets executed. Only time this works is if i put a quote around the file name in the seek"}, {"owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453569416, "post_id": 34965542, "comment_id": 57663046, "body": "or rather a quote around the file handle as you mentioned. This works seek &quot;$file&quot;, $offset, 0 or die &quot;Report...  - even though i have the open my $file as a previous statement and open the file and then pass that FH to the next seek command as you mentioned, it only works when i put a quote around the FH. I am confused."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "edited": false, "score": 0, "creation_date": 1453635425, "post_id": 34965542, "comment_id": 57679968, "body": "@md1980 I showed code here that compiles, and will catch runtime errors. Usually one would want the code to work and only catch runtime errors <i>if they occur</i>. If you actually <b>want to force a runtime error</b>, you still need <i>working</i> code. Since your code was <i>not even working</i>, I fixed that. Now why do you want <i>the operation to fail</i>? Do you want to test whether the <code>or die</code> part works correctly? Are you writing a unit test? Give more details what what you need please."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1453567712, "last_edit_date": 1453567712, "creation_date": 1453564519, "answer_id": 34965542, "question_id": 34964638, "link": "https://stackoverflow.com/questions/34964638/perl-doesnt-go-to-error-section/34965542#34965542", "title": "Perl doesn&#39;t go to error section", "body": "<p>Because <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow\"><code>seek</code></a> expects a file handle you need to <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>open</code></a> the file first. The file name is not the same as a file handle.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $offset = 1;\n\nopen my $fh, '&lt;', 'DCMFReport.txt' or die $!;\nseek $fh, $offset, 0 or die \"Report seek error, offset:$offset - $!\";\n</code></pre>\n\n<hr>\n\n<p>It will give you the <code>or die</code> error message if you use a string as the first argument, because the <code>seek</code> operation fails as the value is not a file handle. That's something else as passing something that does not exist.</p>\n\n<p>The documentation says:</p>\n\n<blockquote>\n  <p>FILEHANDLE may be an expression whose value gives the name of the filehandle.</p>\n</blockquote>\n\n<p>A string is an expression, so it tries to operate on a file handle with that name.</p>\n"}], "owner": {"reputation": 269, "user_id": 4489854, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5ab5dad201459b70c608b9e3b340348a?s=128&d=identicon&r=PG&f=1", "display_name": "md1980", "link": "https://stackoverflow.com/users/4489854/md1980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453569140, "creation_date": 1453559075, "last_edit_date": 1453569140, "question_id": 34964638, "link": "https://stackoverflow.com/questions/34964638/perl-doesnt-go-to-error-section", "title": "Perl doesn&#39;t go to error section", "body": "<p>I have a Perl statement like the one below</p>\n\n<pre><code>seek DCMFReport.txt, $offset, 0 or die \"Report seek error, offset:$offset - $!\";\n</code></pre>\n\n<p>When it hits the above line, I get an \"argument error\" but I don't see the text in the die printed out. I expected to see the \"Report seek error...\" printed out. Does that mean the code did not go to the die section even though the statement threw an error?</p>\n"}, {"tags": ["bash", "perl", "signals", "sh"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453582125, "post_id": 34966797, "comment_id": 57667565, "body": "<code>errno</code> 4 is <code>EINTR</code>, &quot;Interrupted system call&quot;. <code>sleep</code> set this when it the signal came in."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 6, "last_activity_date": 1453756424, "last_edit_date": 1495535275, "creation_date": 1453571708, "answer_id": 34966797, "question_id": 34963555, "link": "https://stackoverflow.com/questions/34963555/return-value-from-system-when-using-sigint-default-handler/34966797#34966797", "title": "Return value from system() when using SIGINT default handler", "body": "<p>This question is very similar to <a href=\"https://stackoverflow.com/q/34795478/2766176\">Propagation of signal to parent when using system</a> that you asked earlier.</p>\n\n<p>From my bash docs:</p>\n\n<blockquote>\n  <p>When a command terminates on a fatal signal N, bash uses the value of 128+N as the exit status.</p>\n</blockquote>\n\n<p>SIGINT is typically 2, so 128 + 2 give you 130.</p>\n\n<p>Perl's <a href=\"http://perldoc.perl.org/functions/die.html\" rel=\"nofollow noreferrer\">die</a> figures out its exit code by inspecting <code>$!</code> or <code>$?</code> for an uncaught exception (so, not the case where you use <code>eval</code>):</p>\n\n<pre><code>exit $! if $!;              # errno\nexit $? &gt;&gt; 8 if $? &gt;&gt; 8;    # child exit status\nexit 255;                   # last resort\n</code></pre>\n\n<p>Notice that in this case, Perl exits with the value as is, not shifted up 8 bits.</p>\n\n<p>The errno value happens to be 4 (see <a href=\"http://www.virtsync.com/c-error-codes-include-errno\" rel=\"nofollow noreferrer\">errno.h</a>). The <code>$!</code> variable is a dualvar with different string and numeric values. Use it numerically (like adding zero) to get the number side:</p>\n\n<pre><code>use v5.10;\n\nlocal $SIG{INT}=sub{\n    say \"numeric errno is \", $!+0;\n    die\n    };\nsleep 10;\nprint q(timed out);\nexit 1;\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>$ bash -c \"perl errno.pl\"\n^Cnumeric errno is 4\nDied at errno.pl line 6.\n$ echo $?\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120931, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1453571816, "creation_date": 1453571816, "answer_id": 34966808, "question_id": 34963555, "link": "https://stackoverflow.com/questions/34963555/return-value-from-system-when-using-sigint-default-handler/34966808#34966808", "title": "Return value from system() when using SIGINT default handler", "body": "<p>Taking your questions out of order:</p>\n\n<blockquote>\n  <p>Also, it would be nice to know exactly what the \"DEFAULT\" signal handler does in this case.</p>\n</blockquote>\n\n<p>Setting the handler for a given signal to <code>\"DEFAULT\"</code> affirms or restores the default signal handler for the given signal, whose action depends on the signal.  Details are available from <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">the signal(7) manual page</a>.  The default handler for <code>SIGINT</code> terminates the process.</p>\n\n<blockquote>\n  <p>Now, I would like to know why I get a return value of 130 for case 1, and a return value of 4 for case 2.</p>\n</blockquote>\n\n<p>Your child1 explicitly sets the default handler for <code>SIGINT</code>, so that signal causes it to terminate abnormally.  <em>Such a process has no exit code</em> in the conventional sense.  The shell also receives the <code>SIGINT</code>, but it traps and ignores it.  The exit status it reports for the child process (and therefore for itself) reflects the signal (number 2) that killed the child.</p>\n\n<p>Your other two child processes, on the other hand, <em>catch</em> <code>SIGINT</code> and terminate normally in response.  These do produce exit codes, which the shell passes on to you (after trapping and ignoring the <code>SIGINT</code>).  <a href=\"http://perldoc.perl.org/functions/die.html\" rel=\"nofollow\">The documentation for <code>die()</code></a> describes how the exit code is determined in this case, but the bottom line is that if you want to exit with a specific code then you should use <code>exit</code> instead of <code>die</code>.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 34966797, "answer_count": 2, "score": 4, "last_activity_date": 1453756424, "creation_date": 1453552727, "last_edit_date": 1495540751, "question_id": 34963555, "link": "https://stackoverflow.com/questions/34963555/return-value-from-system-when-using-sigint-default-handler", "title": "Return value from system() when using SIGINT default handler", "body": "<p>I am experiencing some strange return values from <code>system()</code> when a child process receives a SIGINT from the terminal. To explain, from a Perl script <code>parent.pl</code> I used <code>system()</code> to run another Perl script as a child process, but I also needed to run the child through the shell, so I used the <code>system 'sh', '-c', ...</code> form.. So the parent of the child became the <code>sh</code> process and the parent of the <code>sh</code> process became <code>parent.pl</code>. Also, to avoid having the <code>sh</code> process receiving the <code>SIGINT</code> signal, I trapped it. </p>\n\n<p>For example, <code>parent.pl</code>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nfor (1..3) {\n    my $res = system 'sh', '-c', \"trap '' INT; child$_.pl\";\n    say \"Parent received return value: \" . ($res &gt;&gt; 8);\n}\n</code></pre>\n\n<p>where <code>child1.pl</code>:</p>\n\n<pre><code>local $SIG{INT} = \"DEFAULT\";\nsleep 10;\nsay \"Child timed out..\";\nexit 1;\n</code></pre>\n\n<p><code>child2.pl</code>:</p>\n\n<pre><code>local $SIG{INT} = sub { die };\nsleep 10;\nsay \"Child timed out..\";\nexit 1;\n</code></pre>\n\n<p>and <code>child3.pl</code> is:</p>\n\n<pre><code>eval {\n    local $SIG{INT} = sub { die };\n    sleep 10;\n};\nif ( $@ ) {\n    print $@;\n    exit 2;\n}\nsay \"Child timed out..\";\nexit 0;\n</code></pre>\n\n<p>If I run <code>parent.pl</code> (from the command line) and press CTRL-C to abort each child process, the output is:</p>\n\n<pre><code>^CParent received return value: 130\n^CDied at ./child2.pl line 7.\nParent received return value: 4\n^CDied at ./child3.pl line 8.\nParent received return value: 2\n</code></pre>\n\n<p>Now, I would like to know why I get a return value of 130 for case 1, and a return value of 4 for case 2.</p>\n\n<p>Also, it would be nice to know exactly what the <code>\"DEFAULT\"</code> signal handler does in this case.</p>\n\n<p>Note: the same values are returned if I replace <code>sh</code> with <code>bash</code> ( and trap <code>SIGINT</code> instead of <code>INT</code> in <code>bash</code> ).</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/34795478/propagation-of-signal-to-parent-when-using-system\">Propagation of signal to parent when using system</a></li>\n<li><a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a></li>\n<li>Chapter 15, in <a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow noreferrer\">Programming Perl, 4th Edition</a></li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1453548719, "post_id": 34962769, "comment_id": 57656383, "body": "I am trying to understand what the script is doing. Then I need to modify/extend the script. What the script does is:  1.) my $dir = File::Spec-&gt;curdir(); 2.) my $path = File::Spec-&gt;canonpath($dir); I just don&#39;t get those steps."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "edited": false, "score": 0, "creation_date": 1453550651, "post_id": 34963070, "comment_id": 57657023, "body": "I tried it and I still don&#39;t get the purpose. my $dir = File::Spec-&gt;curdir(); my $path = File::Spec-&gt;canonpath($dir);  print &quot;$dir\\n&quot;; print &quot;$path\\n&quot;;  Both prints give me the dot."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "edited": false, "score": 0, "creation_date": 1453553173, "post_id": 34963070, "comment_id": 57657786, "body": "@paperazzo79: Yes, as <code>.</code> doesn&#39;t contain successive slashes, double dots, nor triple dots, <code>canonpath</code> on it is rather a no-op."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1453553224, "last_edit_date": 1453553224, "creation_date": 1453549729, "answer_id": 34963070, "question_id": 34962769, "link": "https://stackoverflow.com/questions/34962769/perl-how-filespec-canonpathpath-works/34963070#34963070", "title": "Perl: How File::Spec-&gt;canonpath($path) works", "body": "<p><code>curdir</code> returns the symbol of the current working directory. <code>canonpath</code> does different things on different OSes, check for example <a href=\"http://p3rl.org/File::Spec::Unix\" rel=\"nofollow\">File::Spec::Unix</a> or \n<a href=\"http://p3rl.org/File::Spec::Win32\" rel=\"nofollow\">File::Spec::Win32</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1453569926, "creation_date": 1453569926, "answer_id": 34966500, "question_id": 34962769, "link": "https://stackoverflow.com/questions/34962769/perl-how-filespec-canonpathpath-works/34966500#34966500", "title": "Perl: How File::Spec-&gt;canonpath($path) works", "body": "<p>A call to <code>canonpath</code> returns the <em>canonical</em> path that is equivalent to the passed parameter. That means it will</p>\n\n<ul>\n<li><p>Change all path separators to the platforms conventional path separator character</p></li>\n<li><p>Compress multiple path separators to a single one</p></li>\n<li><p>Remove trailing path separators</p></li>\n<li><p>Remove any superfluous <code>.</code> and <code>..</code> path elements</p></li>\n</ul>\n\n<p>This is best demonstrated with a Windows path like</p>\n\n<pre><code>C:/a/b/../c///d/.//\n</code></pre>\n\n<p>This Perl code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse File::Spec;\n\nsay File::Spec-&gt;canonpath('C:/a/b/../c///d/.//');\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>C:\\a\\c\\d\n</code></pre>\n\n<p>Unfortunately I can't explain the code you show</p>\n\n<pre><code>my $dir  = File::Spec-&gt;curdir();\nmy $path = File::Spec-&gt;canonpath($dir);\n</code></pre>\n\n<p>because the <code>curdir</code> method returns <code>.</code> on Windows and Linux systems, and <code>canonpath</code> leaves this unchanged. If you wanted to discover the absolute path to the current directory then you would use</p>\n\n<pre><code>my $path = File::Spec-&gt;rel2abs(File::Spec-&gt;curdir());\n</code></pre>\n\n<p>However this is better done with the <a href=\"http://metacpan.org/module/Cwd\" rel=\"nofollow\"><code>Cwd</code></a> module like this</p>\n\n<pre><code>use Cwd ();\n\nmy $path = Cwd::cwd;\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 0, "accepted_answer_id": 34966500, "answer_count": 2, "score": -2, "last_activity_date": 1453569926, "creation_date": 1453547919, "question_id": 34962769, "link": "https://stackoverflow.com/questions/34962769/perl-how-filespec-canonpathpath-works", "title": "Perl: How File::Spec-&gt;canonpath($path) works", "body": "<p>What is this method doing?</p>\n\n<p>I simply don't understand it's purpose, and the explanation in perldoc is not helping me.</p>\n\n<p>Now I need to update a Script that uses this method, so it would be good to understand what it is doing.</p>\n\n<p>Is there a simple tutorial to understand the method?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 2, "creation_date": 1453521944, "post_id": 34959456, "comment_id": 57650110, "body": "Minus the typo (?) it&#39;s preference. And if there is one thing perl is pretty opinionated about, it is about not having an.."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453527282, "post_id": 34959456, "comment_id": 57651036, "body": "A and B are identical except for whitespace, C is wrong (almost certainly not what you intended), and D, E, and F are identical except for whitespace or syntactical sugar. So the question is really: A or D? And the answer is: if none of your elements contain spaces, D is perfectly fine, otherwise A."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1453540913, "post_id": 34959456, "comment_id": 57654151, "body": "C is syntactically valid, so not &quot;wrong&quot; in that sense, but, because it&#39;s almost certainly not what is intended, Perl will warn of &quot;Possible attempt to separate words with commas&quot; if warnings are enabled. And warnings <i>are</i> enabled, aren&#39;t they? (If not, they almost certainly should be!)"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1453557617, "post_id": 34959456, "comment_id": 57659162, "body": "My force of habit was using <code>push</code> or <code>cat $file</code>, the real thihg is a similar bug like C in mac <code>foreach my $ele qw(a,b)</code> , took a while to figure out."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1453613002, "post_id": 34959456, "comment_id": 57674791, "body": "<code>qw</code> has the downside that it doesn&#39;t allow comments (unless you use <code>use syntax qw( qw_comments );</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453547009, "post_id": 34959481, "comment_id": 57655890, "body": "But don&#39;t forget the <code>my</code> because none of the above have them (and you really should be using <code>strict</code>)."}], "tags": [], "owner": {"reputation": 12098, "user_id": 3095, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5e9b86bbe0805dfaf5d07146d2a69956?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/3095/dave"}, "is_accepted": true, "score": 7, "last_activity_date": 1453527315, "last_edit_date": 1453527315, "creation_date": 1453521854, "answer_id": 34959481, "question_id": 34959456, "link": "https://stackoverflow.com/questions/34959456/preferred-ways-to-define-array-in-perl/34959481#34959481", "title": "Preferred ways to define array in perl", "body": "<p>They are all the same except for example C which produces an array with element 0 equal to <code>abc,</code> (note the comma).  I use <code>qw()</code> when it makes the code more readable, which is most of the time if you are defining a large array with \"configuration\" data.</p>\n"}], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1453564306, "accepted_answer_id": 34959481, "answer_count": 1, "score": 0, "last_activity_date": 1453527315, "creation_date": 1453521575, "question_id": 34959456, "link": "https://stackoverflow.com/questions/34959456/preferred-ways-to-define-array-in-perl", "closed_reason": "Opinion-based", "title": "Preferred ways to define array in perl", "body": "<p>Is the any difference in the following ways to define array in perl?</p>\n\n<p>Which is the preferred way? Thanks</p>\n\n<p>A</p>\n\n<pre><code>my @eles = (\n    \"abc\",\n    \"bbc\"\n);\n</code></pre>\n\n<p>B</p>\n\n<pre><code>@eles = (\"abc\", \"bbc\");\n</code></pre>\n\n<p>C</p>\n\n<pre><code>@eles = qw(abc, bbc);\n</code></pre>\n\n<p>D</p>\n\n<pre><code>@eles = qw(\nabc\nbbc\n);\n</code></pre>\n\n<p>E</p>\n\n<pre><code>@eles = qw{\nabc\nbbc\n};\n</code></pre>\n\n<p>F</p>\n\n<pre><code>@eles = qw(abc bbc);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 1, "creation_date": 1453508509, "post_id": 34958077, "comment_id": 57647911, "body": "What tool are you using?"}, {"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "reply_to_user": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1453508676, "post_id": 34958077, "comment_id": 57647949, "body": "@e0k i&#39;ll be using PERL"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227915"}, "edited": false, "score": 0, "creation_date": 1453510731, "post_id": 34958077, "comment_id": 57648339, "body": "Why would <code>AA</code> and <code>B</code> return line 2? Also, does <code>AA C and O</code> means <code>AA</code> and <code>C</code> and <code>O</code>?"}, {"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453511450, "post_id": 34958077, "comment_id": 57648493, "body": "Fixed the question to remove the 2.  Yes AA C and O, the string would need to have all 3"}, {"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453511599, "post_id": 34958077, "comment_id": 57648522, "body": "What I am struggling with is how to capture the entire string and do a substring match"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 2, "creation_date": 1453511686, "post_id": 34958077, "comment_id": 57648539, "body": "The trick is not to try to &quot;build a regex&quot; to solve the problem. If you take away that constraint, it&#39;s easily done in a few lines of code."}, {"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453512008, "post_id": 34958077, "comment_id": 57648607, "body": "I suppose it could, it just seems like a good candidate for regex, and could get done in 1 line of code."}, {"owner": {"reputation": 8009, "user_id": 679733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbed7e3f04c5b4697831ca4bfda9de7c?s=128&d=identicon&r=PG", "display_name": "Wh1T3h4Ck5", "link": "https://stackoverflow.com/users/679733/wh1t3h4ck5"}, "edited": false, "score": 0, "creation_date": 1453512198, "post_id": 34958077, "comment_id": 57648647, "body": "Even I don&#39;t understand what are you trying and if your substrings must be in that order try something like <a href=\"http://rubular.com/r/Hh7ZgTVFaA\" rel=\"nofollow noreferrer\">this</a> just make sure that you have <code>.*</code> at the beginning, at the end, and between substrings, and test all of your array elements against your pattern. All combinations from your example return correct rows (if I&#39;m not wrong)."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453513469, "post_id": 34958077, "comment_id": 57648881, "body": "Unless I&#39;m missing something (which is entirely possible), this isn&#39;t any more difficult than <code>split</code> on <code>&#47;,&#47;</code> and correctly using the start and end anchors <code>^</code> and <code>$</code>. Have you tried that yet? What <i>have</i> you tried so far? (Banging your head for hours doesn&#39;t count.)"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453519665, "post_id": 34958951, "comment_id": 57649758, "body": "With a few tweaks, it worked brilliantly.  It almost looks comically easy once you see it.  But I know better!  Thank-you!"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 3, "last_activity_date": 1453516079, "creation_date": 1453516079, "answer_id": 34958951, "question_id": 34958077, "link": "https://stackoverflow.com/questions/34958077/assistance-with-building-regex/34958951#34958951", "title": "Assistance with building regex", "body": "<p>You want the regex</p>\n\n<pre><code>/^.*?,(?=[^,]*AAA)(?=[^,]*O).*?,AB.*O$/\n</code></pre>\n\n<p>with commentary</p>\n\n<pre><code>/ \n    ^.*?,           # consume the first field\n    (?=[^,]*AAA)    # look ahead in the 2nd field for AAA\n    (?=[^,]*O)      # look ahead in the 2nd field for O\n    .*?,            # consume the 2nd field\n    AB.*O$          # the 3rd field starts with AB and ends with O\n/x\n</code></pre>\n\n<p>which you can generate like this</p>\n\n<pre><code>sub gen_regex {\n    my ($begins, $ends, @contains) = @_;\n    my $regex = \"^.*?,\" \n              . join(\"\", map {\"(?=[^,]*$_)\"} @contains) \n              . \".*?,$begins.*$ends\\$\";\n    return qr/$regex/;\n}\n\nmy $re = gen_regex('AB', 'O', qw(AAA O));\n</code></pre>\n\n<p>and then use it like this:</p>\n\n<pre><code>while (&lt;&gt;) { say $. if /$re/ }\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34958951, "answer_count": 1, "score": 2, "last_activity_date": 1453516079, "creation_date": 1453508039, "last_edit_date": 1453511411, "question_id": 34958077, "link": "https://stackoverflow.com/questions/34958077/assistance-with-building-regex", "title": "Assistance with building regex", "body": "<p>I hate doing this but I've banged my head for hours just trying to figure out regexes, so I am finally resorting to asking the experts.</p>\n\n<pre><code>-1,AAABO,ABOAO\n-2,ABBBO,BABBO\n-3,AAACO,ACAAO\n-4,ABDDO,BADDO\n-5,AAABF,ABFAA\n-6,BBBGO,BGBBO\n</code></pre>\n\n<p>I am looking to match multiple substrings but only between the commas.</p>\n\n<p>For example:  </p>\n\n<pre><code>AA and B would return rows 1,5\nBB and O would return 2 and 6\nBBB and G would return row 6\nAA C and O would return row 3\n</code></pre>\n\n<p>I would build this dynamically as needed.</p>\n\n<p>The 2nd step would be filtering on the beginning or end of the string after the 2nd comma</p>\n\n<p>For example (start):</p>\n\n<pre><code>AB would return row 1 and 5\n</code></pre>\n\n<p>For example (end):</p>\n\n<pre><code>BO would return row 2 and 6\n</code></pre>\n\n<p>and then I need to combine all 3 filters.</p>\n\n<p>For example </p>\n\n<pre><code>AAA O (contains from 2nd column)\nAB    (begins with)\nO     (ends with)\n</code></pre>\n\n<p>returns row 1</p>\n\n<p>I could do multiple passes if required.</p>\n\n<p>I would be delighted with any guidance.  </p>\n"}, {"tags": ["perl", "input"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1453506203, "post_id": 34957786, "comment_id": 57647296, "body": "If it&#39;s in the same folder, shouldn&#39;t you be using <code>&quot;.&#47;ioFile.txt&quot;</code> instead? (<code>..</code> refers to previous folder in the directory tree)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453506214, "post_id": 34957786, "comment_id": 57647300, "body": "if the file is in the same directory as the script, remove the <code>..&#47;</code>, so the file path appears as <code>&quot;ioFile.txt&quot;</code>"}, {"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453506402, "post_id": 34957786, "comment_id": 57647369, "body": "I&#39;ve tried both those methods previously and both give the same error, <code>can&#39;t open input.txt: No such file or directory at C:\\filepath line 303, &lt;STDIN&gt; line 1</code>, but I&#39;ve removed the <code>..&#47;</code>, so no one else assumes that was the mistake causing the problem. Thanks for the input"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453506614, "post_id": 34957786, "comment_id": 57647437, "body": "if you do a <code>dir</code> on the command line from within the directory, do the script and the file appear? Also, your error you have <code>input.txt</code>... are you sure that&#39;s not the file in the same directory instead of <code>iofile.txt</code>?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453506801, "post_id": 34957786, "comment_id": 57647489, "body": "Also, how are you running this script? What&#39;s the rest of the code? I don&#39;t think <code>&lt;STDIN&gt;</code> should be appearing in your <code>die()</code> output... normally that&#39;s where the script name is displayed."}, {"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453506965, "post_id": 34957786, "comment_id": 57647526, "body": "Wow, when I ran <code>dir</code> it said the file name was <code>ioFile.txt.txt</code>. My stupid mistake. I changed it back to <code>ioFile.txt</code>, but I&#39;m still not able to open the file with <code>open(my $in,  &quot;&lt;&quot;,  &quot;ioFile.txt&quot;)  or die &quot;Can&#39;t open input.txt: $!&quot;;</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453507068, "post_id": 34957786, "comment_id": 57647557, "body": "see my previous comment"}, {"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453507100, "post_id": 34957786, "comment_id": 57647567, "body": "The rest of the script is really simple print and arithmetic statements. I wasn&#39;t getting any errors until I got to the File I/O part of my script. I&#39;ve been going through <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlintro.html</a> and essentially just writing down the code they have there, so I can get a hang for Perl"}, {"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453507178, "post_id": 34957786, "comment_id": 57647584, "body": "I checked with <code>DIR</code> and the name of the file is <code>ioFile.txt</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453507424, "post_id": 34957786, "comment_id": 57647646, "body": "show the command line you&#39;re using to run the script. Are you in the CLI, in the same directory as the script calling it like <code>perl script.pl</code>, or are you in another directory, running <code>perl path\\to\\script.pl</code>? If the latter, <code>cd</code> into the directory the script is in, and then try it the former way"}, {"owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "edited": false, "score": 0, "creation_date": 1453507529, "post_id": 34957786, "comment_id": 57647674, "body": "I&#39;m using <code>perl C:\\path\\to\\script\\script.pl</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1453507682, "post_id": 34957786, "comment_id": 57647712, "body": "you <i>must</i> be in the directory the script is in to run it, or it will not find the file. Otherwise, change the path to the file to <code>&quot;c:\\\\path\\\\to\\\\file\\\\ioFile.txt&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1453557129, "post_id": 34958038, "comment_id": 57659029, "body": "Don&#39;t those double backslashes look ugly. Why not switch to a single-quoted string and lose them - <code>&#39;c:\\path\\to\\ioFile.txt&#39;</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1453559587, "post_id": 34958038, "comment_id": 57659814, "body": "don&#39;t know what I was thinking. I&#39;m almost always on nix, so I normally use forward slashes, which never need to be escaped (even on windows, so I don&#39;t know why I didn&#39;t do that anyway."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1453559311, "last_edit_date": 1453559311, "creation_date": 1453507788, "answer_id": 34958038, "question_id": 34957786, "link": "https://stackoverflow.com/questions/34957786/open-file-to-read-from-in-perl/34958038#34958038", "title": "Open File to Read from in Perl", "body": "<p>If you're not running the script while you are in the directory the script and the file you want to <code>open</code> are in, then you have to specify the full path to the file:</p>\n\n<pre><code>open my $in, '&lt;', 'c:\\path\\to\\ioFile.txt' or die \"Can't open input.txt: $!\";\n</code></pre>\n\n<p><code>perl</code> will look for the input file from the location you are running the script <em>from</em>, not in the directory the script is <em>in</em> (again, unless you are in that directory when you are running the script).</p>\n"}], "owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34958038, "answer_count": 1, "score": 0, "last_activity_date": 1453559311, "creation_date": 1453506088, "last_edit_date": 1453506423, "question_id": 34957786, "link": "https://stackoverflow.com/questions/34957786/open-file-to-read-from-in-perl", "title": "Open File to Read from in Perl", "body": "<p>I just started learning Perl today. I'm on the section of file input and output. This is a very basic question, and I've been searching on the internet for a couple of hours as to what I'm doing wrong, but I can't seem to find out why. I'm sure some of you think this question should be voted down, but if I could find the answer by myself through internet searching and troubleshooting, I wouldn't be asking it here.</p>\n\n<p>My question is why can't I open the file that I'm referring to in my filepath? </p>\n\n<pre><code>open(my $in,  \"&lt;\",  \"ioFile.txt\")  or die \"Can't open input.txt: $!\";\n</code></pre>\n\n<p>The <code>ioFile.txt</code> is in the same directory as my Perl script. I've used multiple different filepaths to see which worked, and none have for me so far. I've tried using forward slashes instead of backslashes as well.</p>\n\n<p>Any tips about opening this specific file or files in general in Perl would be greatly appreciated.</p>\n\n<p>After Edit:</p>\n\n<p>It could be permissions on the file, but I do have <code>read</code> and <code>write</code> permissions on the file, but not <code>full control</code> permissions. I'm on Windows 7 btw. </p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453501607, "post_id": 34956957, "comment_id": 57645577, "body": "Almost certainly. Sample data would help massively though."}], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453502116, "post_id": 34957045, "comment_id": 57645756, "body": "This is returning <code>Substitution replacement not terminated at -e line 1.</code> What is causing that?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453502141, "post_id": 34957045, "comment_id": 57645763, "body": "A missing <code>&#47;</code>. Edited"}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453502202, "post_id": 34957045, "comment_id": 57645788, "body": "It now runs without error but only acts on the first line of the .txt file - or at least only replaces the first &#39;A&#39; it finds in column-2."}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453502399, "post_id": 34957045, "comment_id": 57645872, "body": "Sorry - issues with the .txt file caused by hidden characters. Now it works."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "edited": false, "score": 0, "creation_date": 1453502453, "post_id": 34957045, "comment_id": 57645900, "body": "Given you don&#39;t have any other whitespace, you could probably just <code>split;</code> which defaults to any whitespace."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1453503011, "post_id": 34957045, "comment_id": 57646114, "body": "You can shorten that up a bit by using the <code>-a</code> flag: <code>perl -anE &#39;$F[1] =~ s&#47;A&#47;B&#47;; say join &quot;\\t&quot;, @F&#39; in.txt</code>. Search for it in <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>"}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453503166, "post_id": 34957045, "comment_id": 57646169, "body": "@stevieb Thanks! Is there a shorter way to perform multiple search/replacements other than simply chaining them together e.g. <code>perl -anE &#39;$F[1] =~ s&#47;A&#47;B&#47;; $F[1] =~ s&#47;D&#47;F&#47;; say join &quot;\\t&quot;, @F&#39;</code>?"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1453504236, "post_id": 34957045, "comment_id": 57646571, "body": "You could say <code>$F[1] =~ tr&#47;AD&#47;BF&#47;;</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1453502421, "last_edit_date": 1453502421, "creation_date": 1453501847, "answer_id": 34957045, "question_id": 34956957, "link": "https://stackoverflow.com/questions/34956957/find-and-replace-confined-to-a-specific-column-one-liner/34957045#34957045", "title": "Find and replace confined to a specific column (one-liner)", "body": "<p>Something like this will transform the second field of a tab separated row. </p>\n\n<pre><code>perl -lne '@row = split /\\t/; $row[1] =~ s/A/B/; print join ( \"\\t\", @row );' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 2, "last_activity_date": 1453510519, "creation_date": 1453510519, "answer_id": 34958372, "question_id": 34956957, "link": "https://stackoverflow.com/questions/34956957/find-and-replace-confined-to-a-specific-column-one-liner/34958372#34958372", "title": "Find and replace confined to a specific column (one-liner)", "body": "<p>You can write this:</p>\n\n<pre><code>perl -lane '$F[1]=~tr/A/B/;print join(\"\\t\", @F)' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1453537647, "last_edit_date": 1453537647, "creation_date": 1453525792, "answer_id": 34959863, "question_id": 34956957, "link": "https://stackoverflow.com/questions/34956957/find-and-replace-confined-to-a-specific-column-one-liner/34959863#34959863", "title": "Find and replace confined to a specific column (one-liner)", "body": "<h3>A sed one-liner</h3>\n\n<pre><code>$ sed 'h;s/^.*\\t\\(.*\\)\\t.*$/\\1/;y/A/B/;G;s/\\(.*\\)\\n\\(.*\\t\\).*\\(\\t.*\\)/\\2\\1\\3/' infile\n1       B       A2\n2       B       A\n3       B       B1\n4       B       B\n5       B       A\n6       B       A3\n7       B       A\n8       C       A\n9       E       B\n10      D       B\n11      B       C6\n12      B       G\n13      B       L\n14      B       E\n15      B       A\n16      B       A\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code># Copy pattern space to hold space\nh\n\n# Remove first and third column from pattern space\ns/^.*\\t\\(.*\\)\\t.*$/\\1/\n\n# Transliterate A to B (can use s/// for more complex substitutions)\ny/A/B/\n\n# Append hold space to pattern space\nG\n\n# Replace second column with transliterated value\ns/\\(.*\\)\\n\\(.*\\t\\).*\\(\\t.*\\)/\\2\\1\\3/\n</code></pre>\n\n<h3>A sed-free alternative</h3>\n\n<pre><code>$ paste &lt;(cut -f 1 infile) &lt;(cut -f 2 infile | tr A B) &lt;(cut -f 3 infile)\n</code></pre>\n\n<p>This uses <code>paste</code> , <code>cut</code> and <code>tr</code> with process substitution. The <code>tr</code> can of course be replaced by a sed substitution for more complex changes.</p>\n"}], "owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 1, "accepted_answer_id": 34957045, "answer_count": 3, "score": 0, "last_activity_date": 1453537647, "creation_date": 1453501512, "last_edit_date": 1453501785, "question_id": 34956957, "link": "https://stackoverflow.com/questions/34956957/find-and-replace-confined-to-a-specific-column-one-liner", "title": "Find and replace confined to a specific column (one-liner)", "body": "<p>Is there a way (in a one-liner) to confine find and replace to within a specific column of a tab-delimited .txt file?</p>\n\n<p>For example:</p>\n\n<pre><code>perl -pe 's/A/B/g;'\n</code></pre>\n\n<p>But which only finds and replaces 'A' with 'B' within column-2 and ignores all other instances of A, converting this:</p>\n\n<pre><code>1   A   A2\n2   A   A\n3   B   B1\n4   A   B\n5   A   A\n6   B   A3\n7   A   A\n8   C   A\n9   E   B\n10  D   B\n11  A   C6\n12  A   G\n13  B   L\n14  A   E\n15  B   A\n16  A   A\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>1   B   A2\n2   B   A\n3   B   B1\n4   B   B\n5   B   A\n6   B   A3\n7   B   A\n8   C   A\n9   E   B\n10  D   B\n11  B   C6\n12  B   G\n13  B   L\n14  B   E\n15  B   A\n16  B   A\n</code></pre>\n"}, {"tags": ["linux", "perl", "redhat"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 2, "creation_date": 1453496144, "post_id": 34955707, "comment_id": 57643088, "body": "Why exactly does the script need to care?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 2, "creation_date": 1453496226, "post_id": 34955707, "comment_id": 57643138, "body": "Check whether <code>getpgrp()</code> returns 0 in the firstboot case and nonzero otherwise; I suspect it does, and you can replace all of your code with that."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1453499170, "post_id": 34955707, "comment_id": 57644560, "body": "This sounds like an XY problem. There may be solutions that don&#39;t involve checking the parent process. What are you trying to solve here?"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1453503205, "post_id": 34955707, "comment_id": 57646184, "body": "Thank you all for your comments so far! This Perl script is normally run from cron.  It is collects a bunch of info about the server and sends it via http to a central server.  Overtime the number of host that run the script got a point where too many hosts were try to report at once.  So someone put in a bit of code that make the script sleep from 0 to 16 hrs. (not my idea) Then someone from the OS team figures they need to run this script from the systems firstboot script so now the firstboot script hangs for 0 to 16 hours.  Anyways a lot of bad decisions have been made (see next comment)"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1453503447, "post_id": 34955707, "comment_id": 57646288, "body": "A lot of bad decisions have been made along the way and I been told to shut up and fix they way I have been told to fix it :) Personally I&#39;d replace the whole script with a <code>curl ... facter</code> and I wouldn&#39;t do the randomized delay in the script but inside the cron file, but hey it pays the bills ;)"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1453503544, "post_id": 34955707, "comment_id": 57646339, "body": "So the script needs to NOT sleep for a 0 to 16 hours if firstboot called it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453504758, "post_id": 34955707, "comment_id": 57646738, "body": "Why not just use <code>@reboot</code> in your crontab instead of using firstboot? (assuming <code>@reboot</code> is supported in your version of cron)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453504986, "post_id": 34955707, "comment_id": 57646830, "body": "^-- Ah, re-reading your comment, I guess &quot;I been told to shut up and fix they way I have been told to fix it&quot; is why."}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1453505265, "post_id": 34955707, "comment_id": 57646945, "body": "yep ;)  and there is arguments for doing things the way we do.  Mostly because it&#39;s a large organization and the only thing my group has control over is this script.  We cannot get everyone to set up their cron jobs the right way and we cannot prevent other groups from invoking our script."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1453569365, "post_id": 34955707, "comment_id": 57663029, "body": "I think my first tactic would be to look at the difference between the cron and first boot environments. Only sleep if you detect the cron environment."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1453698621, "post_id": 34955707, "comment_id": 57699772, "body": "Not directly to your question, but <code>ps -p $PID -o ppid=</code> would be more efficient than your first <i>ps</i> loop.  (<code>ps -q $PID -o ...</code> if your <i>ps</i> supports it.)  On my system, your <i>tail/sed/cut</i> line fails on low-numbered PIDs, which are space padded.  <code>ps -p $PID -o comm=</code> is probably what you want."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1453584072, "creation_date": 1453584072, "answer_id": 34969007, "question_id": 34955707, "link": "https://stackoverflow.com/questions/34955707/is-there-a-better-way-to-detect-that-my-perl-script-was-called-from-firstboot/34969007#34969007", "title": "Is there a better way to detect that my Perl script was called from &quot;firstboot&quot;?", "body": "<p>Can I offer an alternative approach - from the comments, the problem you are trying to solve is a startup script stalling because it's waiting for this one to return. </p>\n\n<p>So can I suggest that <code>fork()</code> is probably your friend here?</p>\n\n<pre><code> my $pid = fork(); \n if ( $pid ) { \n     exit; \n }\n sleep $delay_time; \n do_stuff(); \n</code></pre>\n\n<p>What will happen is - your script will be called, and the caller will return immediately, but a parallel instance will spawn and delay the random delay interval - and for bonus points, this will work the same in <code>cron</code> too. </p>\n\n<p>But as you seem to note in the comments - the 'good' solution is not to do it that way at all - I would suggest that looking at say, <code>anacron</code> which is available on most Linux systems would be exactly the tool for this particular job. </p>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 34969007, "answer_count": 1, "score": 2, "last_activity_date": 1453584072, "creation_date": 1453495779, "question_id": 34955707, "link": "https://stackoverflow.com/questions/34955707/is-there-a-better-way-to-detect-that-my-perl-script-was-called-from-firstboot", "title": "Is there a better way to detect that my Perl script was called from &quot;firstboot&quot;?", "body": "<p>I have a Perl script that needs to act in a particular way if it was invoked by the firstboot script or invoked by a process that firstboot spawned.  I have this routine <code>handleFirstBoot</code> and it seems to work ok, but there is probably better way to write this routine.  So please take a look ... </p>\n\n<pre><code>sub handleFirstBoot {\n    my $child_id = shift || $$;\n    my $parent_id;\n    foreach (`ps -ef`) {\n        my ($uid,$pid,$ppid) = split;\n        next unless ($pid eq $child_id);\n        $parent_id = $ppid;\n        last;\n    }    \n    if ( $parent_id == 0 ) {\n        debug \"firstboot is NOT an ancestor.\\n\";\n        return;\n    }    \n    my $psout = `ps -p $parent_id | tail -1 |sed -e's/^ //g'| sed -e's/  */ /g'|cut -d' ' -f4`;\n    if ( $psout =~ /firstboot/ ) {\n        debug \"firstboot IS an ancestor. Set post option.\\n\";\n        $opt{'post'} = 1; \n        return;\n    } else {\n        # recursive case\n        handleFirstBoot($parent_id);\n    }    \n}\n</code></pre>\n"}, {"tags": ["string", "perl", "loops", "equality"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1453494831, "post_id": 34955371, "comment_id": 57642419, "body": "Young padawan, your string has a newline. Use the <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a>, you must."}, {"owner": {"reputation": 1230, "user_id": 3166498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbc18f10b502469dfdec70ffeb98c6d4?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3166498/sam"}, "edited": false, "score": 0, "creation_date": 1453501439, "post_id": 34955371, "comment_id": 57645513, "body": "Matt is right. chomp ($cmd = &lt;STDIN&gt;) is what you want"}], "owner": {"reputation": 91, "user_id": 5828093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fd601d81e7f40e450ce160a3aa42e98e?s=128&d=identicon&r=PG&f=1", "display_name": "cjhutton", "link": "https://stackoverflow.com/users/5828093/cjhutton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1453500094, "answer_count": 0, "score": 0, "last_activity_date": 1453494439, "creation_date": 1453494439, "question_id": 34955371, "link": "https://stackoverflow.com/questions/34955371/string-comparrison-not-working", "closed_reason": "Duplicate", "title": "String Comparrison not working", "body": "<p>I have an until loop which is supposed to display a menu for someone to enter commands until \"x\" is entered, exiting the loop. Problem is, that never happens. Anyone know why?  </p>\n\n<pre><code>until($cmd eq 'x'){\n    system('clear');\n    main_menu();\n\n    print \"Enter a command choice from above, or \\'x\\' to exit the program\\n\";\n    $cmd = &lt;STDIN&gt;;\n\n    if ($cmd ne 'x'){\n        process_cmd($cmd);\n    }\n}\n</code></pre>\n\n<p>The process_cmd function should only be called if a command other than \"x\" is entered, then the until loop shouldn't iterate again, as that condition becomes satisfied. </p>\n"}, {"tags": ["regex", "perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453483594, "post_id": 34951681, "comment_id": 57636709, "body": "@Borodin I&#39;ve added some explanation - do let me know if you think it could be improved upon."}], "tags": [], "owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "is_accepted": true, "score": 4, "last_activity_date": 1453483554, "last_edit_date": 1453483554, "creation_date": 1453480763, "answer_id": 34951681, "question_id": 34951643, "link": "https://stackoverflow.com/questions/34951643/split-values-from-variable-into-two-fields/34951681#34951681", "title": "Split values from variable into two fields", "body": "<p>There is absolutely no need to involve any external tool here. Use perl!</p>\n\n<pre><code>my $firstField = (split(/;/, $line))[0];\n</code></pre>\n\n<p>The outer parentheses are required because of Perl's rule <a href=\"http://perldoc.perl.org/perlfunc.html\" rel=\"nofollow\">\"If it looks like a function call, it's a function call\"</a>. Without the extra parentheses, The <code>[0]</code> is interpreted as a subscript of the function call (which is invalid), rather than as a subscript of the list that is returned.</p>\n\n<p>Or if you prefer:</p>\n\n<pre><code>my ($firstField) = split /;/, $line;\n</code></pre>\n\n<p>This assigns the first value of the list returned by <code>split</code> to the variable.</p>\n"}, {"tags": [], "owner": {"reputation": 376, "user_id": 2945873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1126c40b32aef4503ca53f1bdf05fb83?s=128&d=identicon&r=PG&f=1", "display_name": "T G", "link": "https://stackoverflow.com/users/2945873/t-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1453693118, "creation_date": 1453693118, "answer_id": 34984712, "question_id": 34951643, "link": "https://stackoverflow.com/questions/34951643/split-values-from-variable-into-two-fields/34984712#34984712", "title": "Split values from variable into two fields", "body": "<p>You can get as many as you want with one split call:\nif you want them in scalar variables, use</p>\n\n<pre><code>    my ($a, $b) = split(\";\", $inputstring); # add $c, $d, etc as you like to the list\n</code></pre>\n\n<p>or to get a variable number into an array use:</p>\n\n<pre><code>    my @parts = split(\";\", $inputsring);\n</code></pre>\n"}], "owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34951681, "answer_count": 2, "score": 1, "last_activity_date": 1453693118, "creation_date": 1453480667, "question_id": 34951643, "link": "https://stackoverflow.com/questions/34951643/split-values-from-variable-into-two-fields", "title": "Split values from variable into two fields", "body": "<p>I have a variable that has two values in it separated by a semicolon. I want to get one of these values into one variable, and the other into another variable. I'm trying to do so using:</p>\n\n<pre><code>my $firstField = `echo $line | awk -F; '{print $1}'`;\n</code></pre>\n\n<p>But it's getting interpreted extremely oddly. How best would I do this?</p>\n"}, {"tags": ["linux", "bash", "perl", "sorting", "awk"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 7, "creation_date": 1453479970, "post_id": 34951311, "comment_id": 57634326, "body": "Hmm. I can think of some various algorithms for this -- one is to generate a 44-million-long list of random numbers or UUIDs, and use that list as the sort key; could sort individual splitfiles with that key (indexing into the full list for appropriate offsets) and then do a merge-sort pass after. However, before getting into the details -- what&#39;s the actual use case? How random does it actually need to be?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 12, "creation_date": 1453480200, "post_id": 34951311, "comment_id": 57634500, "body": "What are you trying to accomplish by doing this? This looks like an XY problem to me."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1453480360, "post_id": 34951311, "comment_id": 57634620, "body": "You could download the file from the hoster and do it locally. Probably the biggest problem will be the RAM usage. 7GB is quite a large file."}, {"owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "edited": false, "score": 0, "creation_date": 1453480740, "post_id": 34951311, "comment_id": 57634890, "body": "if I load the file into sqlite3, will that help?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1453480891, "post_id": 34951311, "comment_id": 57634998, "body": "As Sobrique says, this can be optimised best by knowing your end purpose. A <i>shuffle</i> is never an end in itself, and is usually used to pick a random subset from a sample. What are you using your shuffle for?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 1, "creation_date": 1453481325, "post_id": 34951311, "comment_id": 57635288, "body": "You need an &quot;external&quot; shuffle. Some ideas already here: <a href=\"http://stackoverflow.com/questions/14628072/external-shuffle-shuffling-large-amount-of-data-out-of-memory\" title=\"external shuffle shuffling large amount of data out of memory\">stackoverflow.com/questions/14628072/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1453492144, "post_id": 34951311, "comment_id": 57641060, "body": "@JeffY: That link would solve different question, but the OP is asking for a way to shuffle a 44M record file faster that <code>shuf</code>"}, {"owner": {"reputation": 684, "user_id": 180574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a42b8244c2e18ea377c4bf02bf20fb?s=128&d=identicon&r=PG", "display_name": "Locoluis", "link": "https://stackoverflow.com/users/180574/locoluis"}, "edited": false, "score": 1, "creation_date": 1453495917, "post_id": 34951311, "comment_id": 57642981, "body": "Excuse me, but I think that <code>shuf</code> died because it ran out of memory at the Bluehost virtual machine, not killed because it took too long. You all are focused on looking for a real fast solution while ignoring the issue of the system resources it&#39;s going to take while shuffling the file. I also think that you should first find something that does the job (<code>shuf</code> didn&#39;t) before going all the way into optimizing it. (Besides, my <i>rejected</i> python program only took slightly twice the time it takes to copy the file)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 6, "creation_date": 1453496429, "post_id": 34951311, "comment_id": 57643225, "body": "Your edit completely changes the problem. All you need to do is select 10,000 lines at random from the file; you don&#39;t need to shuffle the entire 44 million lines. This is what @Sobrique meant about &quot;XY problem.&quot;"}, {"owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "edited": false, "score": 0, "creation_date": 1453496515, "post_id": 34951311, "comment_id": 57643263, "body": "Yes I want 10000 random lines from a 44M-line file"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1453497924, "post_id": 34951311, "comment_id": 57643948, "body": "Then post a question saying that, not that you have to shuffle a 44M line file! Additionally post an example with a file that&#39;s, say, 10 lines long and asking how to print, say, 4 lines from that and show the expected output."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1453501112, "post_id": 34951311, "comment_id": 57645383, "body": "Does it have to be exactly 10,000 results?"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "reply_to_user": {"reputation": 684, "user_id": 180574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a42b8244c2e18ea377c4bf02bf20fb?s=128&d=identicon&r=PG", "display_name": "Locoluis", "link": "https://stackoverflow.com/users/180574/locoluis"}, "edited": false, "score": 0, "creation_date": 1453541235, "post_id": 34951311, "comment_id": 57654238, "body": "I agree with @Locoluis, testing <code>shuf</code> shows that it&#39;s peak RSS is something like size of file * 2.  On a small rented vm this is likely to be too much"}], "answers": [{"comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1453506178, "post_id": 34956611, "comment_id": 57647285, "body": "Did you read the whole 7GB file twice so that you could get the number of records on the first pass? That&#39;s very diligent :-)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1453553547, "post_id": 34956611, "comment_id": 57657913, "body": "Turned out using <code>wc -l</code> to count the number of lines in advance made the script significantly faster (17 secs instead of 31 secs execution time) so I updated my answer. Thanks for the hint."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1453553471, "last_edit_date": 1453553471, "creation_date": 1453499741, "answer_id": 34956611, "question_id": 34951311, "link": "https://stackoverflow.com/questions/34951311/how-to-select-10-thousand-random-lines-from-a-44-million-lines-file/34956611#34956611", "title": "How to select 10 thousand random lines from a 44 million lines file", "body": "<p>Given your new requirement to print some fixed number of random lines from a file:</p>\n\n<pre><code>$ cat tst.awk\nNR==1 {\n    srand()\n    for (i=1;i&lt;=outNum;i++) {\n        if (tgts[int(rand()*inNum)+1]++) {\n            i--\n        }\n    }\n}\nNR in tgts\n\n$ seq 44000000 &gt; file44m\n\n$ time awk -v inNum=$(wc -l &lt; file44m) -v outNum=10000 -f tst.awk file44m &gt; file10k\nreal    0m17.676s\nuser    0m17.238s\nsys     0m0.404s\n\n$ sort -u file10k | wc -l\n10000\n</code></pre>\n\n<p>The above only stores <code>outNum</code> line numbers in memory so there should be no memory issues. See below for how it works on a small file:</p>\n\n<pre><code>$ cat file\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n$ awk -v inNum=$(wc -l &lt; file) -v outNum=4 -f tst.awk file\n6\n8\n9\n10\n\n$ awk -v inNum=$(wc -l &lt; file) -v outNum=4 -f tst.awk file\n1\n6\n7\n9\n\n$ awk -v inNum=$(wc -l &lt; file) -v outNum=3 -f tst.awk file\n3\n7\n8\n\n$ awk -v inNum=$(wc -l &lt; file) -v outNum=3 -f tst.awk file\n4\n5\n6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 3, "last_activity_date": 1507305678, "last_edit_date": 1507305678, "creation_date": 1453501431, "answer_id": 34956936, "question_id": 34951311, "link": "https://stackoverflow.com/questions/34951311/how-to-select-10-thousand-random-lines-from-a-44-million-lines-file/34956936#34956936", "title": "How to select 10 thousand random lines from a 44 million lines file", "body": "<p>The key is to use \"shuf\" with the -n (\u201coutput at most COUNT lines\u201d) option.</p>\n\n<p>Compare:</p>\n\n<pre><code>$ time (seq 1 44000000 | shuf &gt; /tmp/shuffled)\nuser  0m58.234s\nsys   0m4.394s\n\n$ time (seq 1 44000000 | shuf -n 10000 &gt; /tmp/shuffled)\nuser   0m25.493s\nsys    0m1.771s\n</code></pre>\n\n<p>(These timings were taken on a sadly old 2.53GHz Mac.)</p>\n\n<p>NOTE: in some environments, \"shuf\" might be available as \"gshuf\".</p>\n"}, {"tags": [], "owner": {"reputation": 927, "user_id": 5714068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ce6dd182cf429251eab22f284417cb5?s=128&d=identicon&r=PG&f=1", "display_name": "tomc", "link": "https://stackoverflow.com/users/5714068/tomc"}, "is_accepted": false, "score": 0, "last_activity_date": 1453504831, "last_edit_date": 1453504831, "creation_date": 1453503895, "answer_id": 34957410, "question_id": 34951311, "link": "https://stackoverflow.com/questions/34951311/how-to-select-10-thousand-random-lines-from-a-44-million-lines-file/34957410#34957410", "title": "How to select 10 thousand random lines from a 44 million lines file", "body": "<p>I wrote this up a year or so ago. please let me know how it goes in your tests. If your input is sorted but you do not want the results sorted then shuf the output.  </p>\n\n<p>It looks to me like your input to output size is large enough you will want to get the progressive skip part uncommented and working. I did not need it and so it is untested as far as I recall.</p>\n\n<pre><code>#! /usr/bin/awk -F\n\n# reservoir_sample.awk\n\n# the basic reservoir algorithm is due to Alan Waterman (according to Knuth) \n# Vitter (85) improved timing and made sampling uniform\n# http://www.cs.umd.edu/~samir/498/vitter.pdf\n# \n# Expect a K parameter which is the size of the intended sample\n# \n# reservoir_sample.awk -v K=1000   population.list\n\n\nBEGIN {\n    # give srand a fixed seed for reproducubility\n    # or a variable for diversity    \n    srand(systime() + PROCINFO[\"pid\"]); \n\n    # 23 is a magic number between 10 &amp; 40 as per Vitter  \n    threshold = 23 * K; \n}\n\n# fill the reservoir\nNR &lt;= K {   reservoir[NR] = $0 }\n\n# replace item in resovior with current item \n# on probability of K / (NR) \nNR &gt; K {\n    uniform_probability = int(rand() * NR + 0.5);\n    if (uniform_probability  &lt;= K) \n        reservoir[uniform_probability] = $0\n\n    # when the population is large with respect to sample size K\n    # test fewer items from the population for inclusion in the reservoir   \n    #if(NR &lt; threshold){\n    #   skip = \n    #   for (i=0 ; i &lt; skip; i++) getline()  \n    #}\n}\n\n# and Bobs yer uncle\nEND {   for(item in reservoir) {print reservoir[item]} }\n\n# without the progressivly larger steps through the population\n# this would not approach uniform since for larger the populations \n# more earlier candidates are replaced more than later candidates.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453598763, "post_id": 34969202, "comment_id": 57672186, "body": "&quot;I want a Ferrari, but all I have is a 1983 Datsun. How can I drive my Datsun differently to achieve the same level of performance as a Ferrari?&quot; Throwing more hardware at a problem isn&#39;t always the right solution, but this time it is."}, {"owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453657099, "post_id": 34969202, "comment_id": 57687381, "body": "not even a Datsun, it&#39;s an old 1990s bike, sweetheart !"}, {"owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "edited": false, "score": 0, "creation_date": 1453672074, "post_id": 34969202, "comment_id": 57692905, "body": "$ cat /proc/meminfo MemTotal:       32946460 kB MemFree:          818016 kB Buffers:         2797180 kB Cached:         19553908 kB SwapCached:       427952 kB Active:         15633248 kB Inactive:       11417452 kB Active(anon):    5170372 kB Inactive(anon):  3517568 kB Active(file):   10462876 kB Inactive(file):  7899884 kB Unevictable:       25856 kB Mlocked:           25880 kB SwapTotal:       8388604 kB SwapFree:        5296460 kB Dirty:              3272 kB Writeback:             0 kB AnonPages:       4305652 kB Mapped:           384584 kB Shmem:           3984020 kB"}, {"owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "edited": false, "score": 0, "creation_date": 1453672230, "post_id": 34969202, "comment_id": 57692966, "body": "It&#39;s a shared server, so I only get a slice, probably a kernel demon will kick me out when certain threshold is reached"}], "tags": [], "owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "is_accepted": false, "score": 1, "last_activity_date": 1453587629, "last_edit_date": 1453587629, "creation_date": 1453585185, "answer_id": 34969202, "question_id": 34951311, "link": "https://stackoverflow.com/questions/34951311/how-to-select-10-thousand-random-lines-from-a-44-million-lines-file/34969202#34969202", "title": "How to select 10 thousand random lines from a 44 million lines file", "body": "<p>I have decided to use:</p>\n\n<pre><code>perl -ne 'print if (rand() &lt; .001)' MMM.csv &gt; MMM.out\n</code></pre>\n\n<p>and get a subset of 10000 from it</p>\n\n<p>But I still want solution to shuffle a 44M-line file under 10 seconds, is this even possible on a shared hosting account ?</p>\n"}], "owner": {"reputation": 2218, "user_id": 2955361, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/D9Fi3.jpg?s=128&g=1", "display_name": "Cindy Turlington", "link": "https://stackoverflow.com/users/2955361/cindy-turlington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1507305678, "creation_date": 1453479715, "last_edit_date": 1453500731, "question_id": 34951311, "link": "https://stackoverflow.com/questions/34951311/how-to-select-10-thousand-random-lines-from-a-44-million-lines-file", "title": "How to select 10 thousand random lines from a 44 million lines file", "body": "<p>I tried to use <code>shuf</code> to shuffle the file but it's taking too long; the process was killed by the hosting admin.  I have the cheapest Linux Bluehost plan.</p>\n\n<pre><code>shuf MMM.csv\n</code></pre>\n\n<p>file has 44M lines, file size is 7439641823 bytes, using <code>sort -R</code> even worse, thinking about splitting the file into 44 files, but it's going to be not very random, any ideas would be much appreciated</p>\n\n<p>What I want is to shuffle the file, then extract the first 10000 lines</p>\n\n<p>The file was sorted, for business reason, the 10000 lines cannot be sorted</p>\n"}, {"tags": ["regex", "perl", "pcre", "pcregrep"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1453467868, "post_id": 34947404, "comment_id": 57626002, "body": "What tag is really relevant? Try <code>\\b\\d+\\b</code> (should work with PCRE at least). BTW, regex engines only return one match, it is up to a concrete language to implement multiple matching. So, if you use appropriate method, only the first match will be returned."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453469008, "post_id": 34947404, "comment_id": 57626741, "body": "If your requirement is to match first occurrence of an 8 digit number which 89320394 is try <code>\\d{8}</code> with <code>global</code> turned off otherwise what @WiktorStribi\u017cew suggested is also correct."}, {"owner": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "edited": false, "score": 0, "creation_date": 1453469456, "post_id": 34947404, "comment_id": 57627034, "body": "For getting the first number after a word boundary try <code>^.*?\\b\\K\\d+</code> <a href=\"https://regex101.com/r/vT1uT8/2\" rel=\"nofollow noreferrer\">like this</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453480465, "post_id": 34947404, "comment_id": 57634690, "body": "Are you looking for the first isolated digit string after <code>ZTFN00</code>? <code>print &#47; (?: ZTFN00 ){1}+ .*? \\b (\\d+) \\b &#47;x</code>. Although much of that may be removed, depending on your live data format. You should always post some real-life data so that we can test our solutions before posting them"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "edited": false, "score": 0, "creation_date": 1453469418, "post_id": 34947769, "comment_id": 57627010, "body": "What&#39;s the purpose of using group expression around <code>\\d+</code> ?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453469558, "post_id": 34947769, "comment_id": 57627117, "body": "@noob: Because Perl does not work well/at all with <code>\\g&lt;0&gt;</code>/<code>\\0</code>/<code>$0</code> like all other languages."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1453469774, "post_id": 34947769, "comment_id": 57627258, "body": "@Wiktor Stribi\u017cew, Perl does have that. It&#39;s called <code>$&amp;</code>. It&#39;s also not what&#39;s needed here."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453469856, "post_id": 34947769, "comment_id": 57627313, "body": "@ikegami: I forgot to list that one. When I used that <code>$&amp;</code> backreference in <a href=\"http://stackoverflow.com/a/32661739/3832970\">one of my Perl answers</a> I was heavily downvoted (<a href=\"http://stackoverflow.com/questions/32661517/how-to-find-a-line-of-text-that-does-not-contain-the-colon-symbol-using-perl-reg/32661739#comment53171515_32661739\">direct link to the comment</a>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453470069, "post_id": 34947769, "comment_id": 57627463, "body": "@Wiktor Stribi\u017cew, Prior to 5.20, it could slow down other parts of your program, but the variable has existed and worked since ancient times. Perl also has <code>${^MATCH}</code>, which doesn&#39;t have that problem."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453470155, "post_id": 34947769, "comment_id": 57627521, "body": "I know <code>$&amp;</code> existed, it is also available in C#, JavaScript, I just forgot to list it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1453470267, "post_id": 34947769, "comment_id": 57627613, "body": "&quot;Perl does not work well/at all with <code>\\g&lt;0&gt;</code>/<code>\\0</code>/<code>$0</code> like all other languages&quot;. That statement is completely false, even if you add <code>$&amp;</code> to the list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1453470325, "post_id": 34947769, "comment_id": 57627648, "body": "@WiktorStribi\u017cew: For a long time the use of <code>$&amp;</code> anywhere in your code put an overhead on every pattern match in the program. There have been various half-hearted fixes, but Perl 5 v20 finally solved the problem. Unless you don&#39;t care about performance, or you can guarantee that your program will always be run under Perl 5 v20 or better. you should still avoid using <code>$&amp;</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453470360, "post_id": 34947769, "comment_id": 57627666, "body": "@Borodin: Thank you very much for clarification. I also think that using one capturing group does not hurt performance :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453470418, "post_id": 34947769, "comment_id": 57627708, "body": "@Borodin, Not all matches; just those without captures. Captures already impose the same penalty as <code>$&amp;</code> to a match."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453470926, "post_id": 34947769, "comment_id": 57628035, "body": "@WiktorStribi\u017cew: I agree that the issue of the penalty of using <code>$&amp;</code> has been way over-dramatised. For any program that is disk-bound, internet-bound, or keyboard-bound it represents an infinitesimal loss of performance. I think the problem is more to do with this inefficiency in Perl&#39;s interpreter being very obvious"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1453469043, "creation_date": 1453469043, "answer_id": 34947769, "question_id": 34947404, "link": "https://stackoverflow.com/questions/34947404/regular-expression-to-find-the-first-occurance-of-a-number-from-a-given-keyword/34947769#34947769", "title": "regular expression to find the first occurance of a number from a given keyword", "body": "<p>This should do it:</p>\n\n<pre><code>perl -ne '/ZTFN00\\D+(\\d+)/ &amp;&amp; print $1,\"\\n\"' yourfile\n</code></pre>\n\n<p>If your 'number' is always separated by whitespace ( where there 00 after ZTFN isn't) then you can use that as your test:</p>\n\n<pre><code>perl -ne 'print m/\\b(\\d+)\\b/,\"\\n\"' yourfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1453475103, "creation_date": 1453475103, "answer_id": 34949757, "question_id": 34947404, "link": "https://stackoverflow.com/questions/34947404/regular-expression-to-find-the-first-occurance-of-a-number-from-a-given-keyword/34949757#34949757", "title": "regular expression to find the first occurance of a number from a given keyword", "body": "<pre><code>grep -Po 'ZTFN00.*?\\K\\b\\d+\\b'\n</code></pre>\n\n<p>Returns the first number that's a between word boundaries in a line where <code>ZTFN00</code> is seen before that number. <code>\\K</code> is a variable length look-behind: \"match what's to the left of me, but don't retain it\".</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5826390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uAOEGvLjY0A/AAAAAAAAAAI/AAAAAAAAAAA/ij13zPXputg/photo.jpg?sz=128", "display_name": "Abhik Ghosh", "link": "https://stackoverflow.com/users/5826390/abhik-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1454900753, "creation_date": 1454900753, "answer_id": 35261810, "question_id": 34947404, "link": "https://stackoverflow.com/questions/34947404/regular-expression-to-find-the-first-occurance-of-a-number-from-a-given-keyword/35261810#35261810", "title": "regular expression to find the first occurance of a number from a given keyword", "body": "<p>Thanks guys !\nIn simple term, what I am looking for is this\nIf there is a string, which has a keyword ZTFN00, then the regex shall be able to return the closest 9 to 11 digit number to the left or right side of the string.</p>\n\n<p>I want to do this in REGEXP_REPLACE function of oracle.</p>\n\n<p>Below are some of the sample strings</p>\n\n<ol>\n<li>The following error occurred in the SAP UPDATE_BP service as part of the combine (error:653, R11:186:Number 867278489 Already Exists for ID Type ZTFN00)</li>\n</ol>\n\n<p>In the above, the regex shall return 867278489</p>\n\n<ol start=\"2\">\n<li>The following error occurred in the SAP UPDATE_BP service as part of the combine (error:653, R11:186:Number ZTFN00 identification number 123456778 already exist)</li>\n</ol>\n\n<p>In the above, the regex shall return 123456778 </p>\n\n<p>Many thanks for sharing your expertise and guidance</p>\n"}], "owner": {"reputation": 9, "user_id": 5826390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uAOEGvLjY0A/AAAAAAAAAAI/AAAAAAAAAAA/ij13zPXputg/photo.jpg?sz=128", "display_name": "Abhik Ghosh", "link": "https://stackoverflow.com/users/5826390/abhik-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1454900753, "creation_date": 1453467840, "last_edit_date": 1454679199, "question_id": 34947404, "link": "https://stackoverflow.com/questions/34947404/regular-expression-to-find-the-first-occurance-of-a-number-from-a-given-keyword", "title": "regular expression to find the first occurance of a number from a given keyword", "body": "<p>I have a string</p>\n\n<blockquote>\n  <p>\"ZTFN00 identification number is 89320394 and mobile number is +918017828848\"</p>\n</blockquote>\n\n<p>and I want to identify the first occurrence of a number (<strong>89320394</strong> in this case) from the keyword ZTFN. Also, the expression shall not return 00 with the ZTFN and only return the first occurrence of the number.</p>\n\n<p>I tried <code>\\d+(?!ZTFN00)</code> but it does not work !!</p>\n\n<p>Please suggest</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1453470601, "post_id": 34947149, "comment_id": 57627833, "body": "What did your search of <a href=\"http://perldoc.perl.org/\" rel=\"nofollow noreferrer\">the Perl documentation</a> reveal to you?"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1525225874, "post_id": 34947268, "comment_id": 87270203, "body": "You don&#39;t need &quot;don&#39;t need&quot; for this ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1601259173, "post_id": 34947268, "comment_id": 113341330, "body": "The point was readability. A simple regex like <code>^\\s</code> should be very easy to understand, and work a lot better than <code>substr($str, 0, 1) eq &quot; &quot;</code> or <code>ord($str) == 32</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1525225954, "last_edit_date": 1525225954, "creation_date": 1453467335, "answer_id": 34947268, "question_id": 34947149, "link": "https://stackoverflow.com/questions/34947149/how-to-check-if-string-starts-with-space-in-perl/34947268#34947268", "title": "How to check if string starts with space in Perl?", "body": "<p>You don't need <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\"><code>substr</code></a> or <a href=\"http://perldoc.perl.org/functions/ord.html\" rel=\"nofollow noreferrer\"><code>ord</code></a> for this. Keep it simple with</p>\n\n<pre><code>$str =~ /^ /\n</code></pre>\n\n<p>Better yet, the following checks if it starts with any whitespace characters:</p>\n\n<pre><code>$str =~ /^\\s/\n</code></pre>\n\n<p>It's better to be correct and readable rather than the fastest.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 5, "last_activity_date": 1453473041, "creation_date": 1453473041, "answer_id": 34949086, "question_id": 34947149, "link": "https://stackoverflow.com/questions/34947149/how-to-check-if-string-starts-with-space-in-perl/34949086#34949086", "title": "How to check if string starts with space in Perl?", "body": "<p>Don't need regular expressions for this:</p>\n\n<pre><code>substr($str, 0, 1) eq \" \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 6, "last_activity_date": 1453479018, "creation_date": 1453479018, "answer_id": 34951053, "question_id": 34947149, "link": "https://stackoverflow.com/questions/34947149/how-to-check-if-string-starts-with-space-in-perl/34951053#34951053", "title": "How to check if string starts with space in Perl?", "body": "<p>You don't need <code>substr</code> <em>or</em> regular expressions for this!</p>\n\n<pre><code>ord($str) == 32\n</code></pre>\n\n<p>And, if you're doing a billion of these comparisons, you should notice a handsome performance increase as well:</p>\n\n<pre><code>use Benchmark qw(cmpthese);\n\nmy $str = \"       hello\";\n\ncmpthese(0, {\n    regex  =&gt; sub { $str =~ /^ / }, \n    substr =&gt; sub { substr($str, 0, 1) eq ' ' },\n    ord    =&gt; sub { ord($str) == 32 },\n});\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>             Rate  regex substr    ord\nregex   6473675/s     --   -43%   -70%\nsubstr 11300632/s    75%     --   -48%\nord    21653474/s   234%    92%     --\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5289987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849d7488d4516e34db18a87a7e23e875?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/5289987/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8772, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1525225954, "creation_date": 1453466980, "last_edit_date": 1453467190, "question_id": 34947149, "link": "https://stackoverflow.com/questions/34947149/how-to-check-if-string-starts-with-space-in-perl", "title": "How to check if string starts with space in Perl?", "body": "<p>I have a string which has a lot of spaces in it in the beginning.</p>\n\n<pre><code>my $str=\"       hello\";\n</code></pre>\n\n<p>What is the condition to check if line starts with space?</p>\n"}, {"tags": ["html", "perl", "sparql", "rdf", "microdata"], "comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1453715283, "post_id": 34943821, "comment_id": 57707026, "body": "In the end I have ended up using <code>HTML::Microdata</code> instead. It works for what I want to do with it. However, I am still interested in hearing about how to make the <code>HTML::HTML5::Microdata::Parser</code> plus SPARQL way work."}], "answers": [{"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 2, "last_activity_date": 1453867249, "creation_date": 1453867249, "answer_id": 35028650, "question_id": 34943821, "link": "https://stackoverflow.com/questions/34943821/querying-metadata-from-html-page-with-sparql-returns-nothing/35028650#35028650", "title": "querying metadata from HTML page with SPARQL returns nothing", "body": "<p>Just use <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow\">Mojo::UserAgent</a> and <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow\">Mojo::DOM</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse v5.10;\n\nBEGIN {\n    binmode *STDOUT, ':utf8';\n    binmode *STDERR, ':utf8';\n}\n\nuse Mojo::UserAgent;\n\nmy $url = \"http://zpravy.idnes.cz/zacinaji-zapisy-do-prvnich-trid-dn3-/domaci.aspx?c=A160114_171615_domaci_zt\";\n\nmy $dom = Mojo::UserAgent-&gt;new-&gt;get($url)-&gt;res-&gt;dom;\n\n# Process all authors\nfor my $span ($dom-&gt;find('span[itemprop=author]')-&gt;each) {\n    say $span-&gt;all_text;\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Zde\u0148ka Trachtov\u00e1\nsan Sabina Netrvalov\u00e1\n</code></pre>\n\n<p>For a short 8 minute tutorial on these modules, just check out <a href=\"http://mojocasts.com/e5\" rel=\"nofollow\">Mojocast episode 5</a>.</p>\n"}], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1453867249, "creation_date": 1453456775, "last_edit_date": 1453457835, "question_id": 34943821, "link": "https://stackoverflow.com/questions/34943821/querying-metadata-from-html-page-with-sparql-returns-nothing", "title": "querying metadata from HTML page with SPARQL returns nothing", "body": "<p>I seem to be having some issue either using <code>HTML::HTML5::Microdata::Parser</code> or <code>RDF::Query</code> or with SPARQL syntax and semantics. I am interested in this bit from a <a href=\"http://zpravy.idnes.cz/zacinaji-zapisy-do-prvnich-trid-dn3-/domaci.aspx?c=A160114_171615_domaci_zt\">news site page</a>.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"authors\"&gt;\nAuto\u0159i: &lt;span itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\"&gt;&lt;a rel=\"author\" itemprop=\"url\" class=\"name\" href=\"http://vice.idnes.cz/novinari.aspx?idnov=2504\" &gt;&lt;span itemprop=\"name\"&gt;Zde\u0148ka Trachtov\u00e1&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n,\n&lt;span itemprop=\"author\" itemscope itemtype=\"http://schema.org/Person\"&gt;&lt;a rel=\"author\" itemprop=\"url\"  href=\"http://vice.idnes.cz/novinari.aspx?idnov=3495\" &gt;&lt;span itemprop=\"additionalName\"&gt;san&lt;/span&gt;&lt;/a&gt;&lt;span class=\"h\" itemprop=\"name\"&gt;Sabina Netrvalov\u00e1&lt;/span&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is my test code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! env perl\n\nuse strict;\nuse Data::Dumper;\nuse HTML::HTML5::Microdata::Parser;\nuse RDF::Query;\nuse IO::Handle;\nuse LWP::Simple;\n\n\nSTDOUT-&gt;binmode(\":utf8\");\nSTDERR-&gt;binmode(\":utf8\");\n\nmy $htmldoc = LWP::Simple::get(\n    \"http://zpravy.idnes.cz/zacinaji-zapisy-do-prvnich-trid-dn3-/domaci.aspx?c=A160114_171615_domaci_zt\");\ndie \"Could not fetch URL. $@\" unless defined $htmldoc;\n\nmy $microdata = HTML::HTML5::Microdata::Parser-&gt;new (\n    $htmldoc, $ARGV[0],\n    {auto_config =&gt; 1, tdb_service =&gt; 1, xhtml_meta =&gt; 1, xhtml_rel =&gt; 1});\nprint STDERR \"microdata-&gt;graph:\\n\", Dumper($microdata-&gt;graph), \"\\n\";\n\nmy $query = RDF::Query-&gt;new(&lt;&lt;'SPARQL');\nPREFIX schema: &lt;http://schema.org/&gt;\nSELECT *\nWHERE {\n   ?author a schema:Person .\n}\nSPARQL\n\nmy $people = $query-&gt;execute($microdata-&gt;graph);\nprint STDERR \"authors from RDF:\\n\", Dumper($people), \"\\n\";\nwhile (my $person = $people-&gt;next) {\n    print STDERR \"people: \", $person, \"\\n\";\n}\n</code></pre>\n\n<p>The options to the <code>HTML::HTML5::Microdata::Parser</code> were just my last ditch effort to make this work. (I\u00a0have basically zero idea what I\u00a0am doing.)</p>\n\n<p>Any ideas how to make this work and get the authors' names?</p>\n"}, {"tags": ["regex", "perl", "sed"], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 5, "last_activity_date": 1453456789, "creation_date": 1453456789, "answer_id": 34943830, "question_id": 34943644, "link": "https://stackoverflow.com/questions/34943644/search-and-replace-regexp-gives-two-different-outputs-if-grouping-metacharacters/34943830#34943830", "title": "search and replace regexp gives two different outputs if grouping metacharacters are used", "body": "<p>You are using <code>\"</code> to wrap your perl code, but doing so means the shell can and will interpolate <code>$1</code>.\nUse <code>'</code> instead and everything will work as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "is_accepted": false, "score": -1, "last_activity_date": 1453456798, "creation_date": 1453456798, "answer_id": 34943834, "question_id": 34943644, "link": "https://stackoverflow.com/questions/34943644/search-and-replace-regexp-gives-two-different-outputs-if-grouping-metacharacters/34943834#34943834", "title": "search and replace regexp gives two different outputs if grouping metacharacters are used", "body": "<p>The problem is that I've used in #UNEXPECTED case double quotes which makes expanding <code>$1</code> variable. Sometimes one need to write down the questions before realized the case.</p>\n"}], "owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 34943830, "answer_count": 2, "score": 2, "last_activity_date": 1453456798, "creation_date": 1453456259, "question_id": 34943644, "link": "https://stackoverflow.com/questions/34943644/search-and-replace-regexp-gives-two-different-outputs-if-grouping-metacharacters", "title": "search and replace regexp gives two different outputs if grouping metacharacters are used", "body": "<p>I get different outputs from search and replace regexp in perl depending whether I use in place replace (<a href=\"http://bright-green.com/blog/2003_06_08/perl_inplace_editing_howto.html\" rel=\"nofollow\">sed alternative</a>) or regular search replace and also depending on whether I use <code>\\1</code> or <code>$1</code>:</p>\n\n<pre><code>\u2500\u2500&gt; cat test1.txt \norig.avg.10\n\n\u2500\u2500&gt; cat test2.txt \norig.avg.10\n\n# EXPECTED\n\u2500\u2500&gt; cat test1.txt | perl -lne '$_ =~ s/(avg\\.[0-9]+)/$1\\.vec/; print $_'\norig.avg.10.vec\n\n# EXPECTED\n\u2500\u2500&gt; cat test1.txt | perl -lne '$_ =~ s/(avg\\.[0-9]+)/\\1\\.vec/; print $_'\norig.avg.10.vec\n\n# EXPECTED\n\u2500\u2500&gt; perl -p -i.bak -e \"s/(avg\\.[0-9]+)/\\1\\.vec/\" test2.txt\n\u2500\u2500&gt; cat test2.txt\norig.avg.10.vec\n\n# UNEXPECTED\n\u2500\u2500&gt; perl -p -i.bak -e \"s/(avg\\.[0-9]+)/$1\\.vec/\" test1.txt\n\u2500\u2500&gt; cat test1.txt\norig..vec\n</code></pre>\n\n<p>Why this happens?</p>\n"}, {"tags": ["javascript", "perl", "cross-domain", "cors", "dancer"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1453447110, "post_id": 34940895, "comment_id": 57613913, "body": "I think you&#39;re misunderstanding how the pieces fit together. The same-origin policy only applies to the browser. Backend processes can make cross-domain requests without any restrictions."}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1453525884, "creation_date": 1453525884, "answer_id": 34959873, "question_id": 34940895, "link": "https://stackoverflow.com/questions/34940895/is-there-a-way-to-make-a-cross-origin-request-using-perl-dancer/34959873#34959873", "title": "Is there a way to make a cross-origin request using perl dancer?", "body": "<p>Your question didn't make sense 100% as mentioned by the other commenters.</p>\n\n<p>However if you're trying to grant cross-origin access in a Dancer route, as mentioned by part of your question, this is how you do it:</p>\n\n<pre><code>get '...' =&gt; sub {\n  ...\n  header('Access-Control-Allow-Origin' =&gt; '*');\n  ...\n  };\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3781480, "user_type": "registered", "profile_image": "https://graph.facebook.com/1701003414/picture?type=large", "display_name": "rhyvl", "link": "https://stackoverflow.com/users/3781480/rhyvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453525884, "creation_date": 1453446383, "question_id": 34940895, "link": "https://stackoverflow.com/questions/34940895/is-there-a-way-to-make-a-cross-origin-request-using-perl-dancer", "title": "Is there a way to make a cross-origin request using perl dancer?", "body": "<p>I'm trying to get a response from a service from another domain > \"<a href=\"http://another.domain.com/service/\" rel=\"nofollow\">http://another.domain.com/service/</a>\" which uses CORS module, cross-origin headers are already existing.\nThe response can already be obtained in JS using</p>\n\n<pre><code>return $.ajax({\n    url: url,\n    xhrFields: { withCredentials: true }\n});\n</code></pre>\n\n<p>But I'm try to make this possible within a dancer 'get' route.</p>\n\n<p>Is this possible? Is making the request within Dancer better?</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["regex", "perl", "shell", "grep"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1453440353, "post_id": 34939259, "comment_id": 57611366, "body": "Please add your desire output."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453441466, "post_id": 34939259, "comment_id": 57611728, "body": "In a one-line command? Why is that important? How important is it?"}, {"owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "edited": false, "score": 0, "creation_date": 1453441772, "post_id": 34939259, "comment_id": 57611832, "body": "we have big shell script that handles report comparison and excel generate.. so wanted to add one line command before it starts comparison. So Wanted to redirect failures to file and send to team, It will be useful for team members to look only for failed tests."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453441890, "post_id": 34939259, "comment_id": 57611884, "body": "Ok, but so far, I haven&#39;t heard any reason as to why it needs to be a single command..."}, {"owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "edited": false, "score": 0, "creation_date": 1453442160, "post_id": 34939259, "comment_id": 57611975, "body": "I don&#39;t want to mess the shell script becz i&#39;m not expert at shell scripts. so planning to have one line command so that i can just place it in shell script before it starts the excel generation."}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "edited": false, "score": 0, "creation_date": 1453452840, "post_id": 34940598, "comment_id": 57616673, "body": "It&#39;s not printing as you showed above, it prints only the <code>Test path: (whitespace) path&#47;to_tests&#47;t1</code> and cursor wont come out of execution mode."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1453475174, "post_id": 34940598, "comment_id": 57630970, "body": "It&#39;s very rare to need to pipe <code>sed</code> to <code>sed</code>. You&#39;ll want to refactor that to a single <code>sed</code> script, probably also factoring in the <code>grep</code>. See <a href=\"http://www.iki.fi/era/unix/award.html#grep\" rel=\"nofollow noreferrer\">iki.fi/era/unix/award.html#grep</a>"}], "tags": [], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "is_accepted": false, "score": 0, "last_activity_date": 1453454565, "last_edit_date": 1453454565, "creation_date": 1453445092, "answer_id": 34940598, "question_id": 34939259, "link": "https://stackoverflow.com/questions/34939259/how-to-use-grep-match-string-then-look-for-other-string/34940598#34940598", "title": "How to use grep match string then look for other string", "body": "<p>Use this:</p>\n\n<pre><code>find . -name \"*concat.txt\" | (read file &amp;&amp; egrep 'Test path:[ \\t]*path/to_tests/t1' $file &amp;&amp; grep 'FAIL' $file)\n</code></pre>\n\n<p>I'm not sure about the whitespace in the line <code>Test path; (...)</code>, so I added the pattern <code>[ \\t]*</code> to match any whitespace you might encounter there.</p>\n\n<p>This will print:</p>\n\n<pre><code>Test path: (whitespace) path/to_tests/t1   \nAMEND_1/Sec3/E30013.c,          ;               FAIL;     ;\nAMEND_1/Sec3/E30015.c,          ;               FAIL;     ;\n</code></pre>\n\n<p>If you need exactly the output as stated in your question, you will need more than one line, to do it eloquently and probably need to use other commands, like <code>sed</code>, <code>awk</code> or <em>perl regexps</em>.</p>\n\n<p>A version with some <code>sed</code> to better format the output.</p>\n\n<pre><code>find . -name \"*concat.txt\" | (read file &amp;&amp; egrep 'Test path:[ \\t]*path/to_tests/t1' $file | sed 's/^[ \\t]*//' &amp;&amp; grep 'FAIL' $file | sed 's/^[ \\t]*//' | sed 's/[ \\t]*;[ \\t]*//' | sed 's/,\\(FAIL\\).*/ \\1/')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "edited": false, "score": 0, "creation_date": 1453694640, "post_id": 34948713, "comment_id": 57698683, "body": "thank you triplee, it works perfectly. i will try to insert this line in shell script."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 1, "last_activity_date": 1453471865, "creation_date": 1453471865, "answer_id": 34948713, "question_id": 34939259, "link": "https://stackoverflow.com/questions/34939259/how-to-use-grep-match-string-then-look-for-other-string/34948713#34948713", "title": "How to use grep match string then look for other string", "body": "<p>Simple with Awk.</p>\n\n<pre><code>awk '/Test path:/ { t=$0; next }\n    $3 == \"FAIL;\" ( print t, $2, $3 }' **/*concat.txt\n</code></pre>\n\n<p>If your shell is too old to support the <code>**</code> wildcard, or you genuinely have matches on this wildcard which are not plain files, you might want to keep your <code>find</code> command, and pipe that to Awk.</p>\n\n<p>This will retain the semicolon after <code>FAIL</code>. It's easy to get rid of before printing if that's a problem; <code>sub(\";\", \"\", $3):</code></p>\n\n<p>The regex on the first line just looks for \"Test path:\" -- if you want to look for a specific path, you'll need to escape the backslashes.</p>\n"}], "owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453471865, "creation_date": 1453438431, "last_edit_date": 1453441010, "question_id": 34939259, "link": "https://stackoverflow.com/questions/34939259/how-to-use-grep-match-string-then-look-for-other-string", "title": "How to use grep match string then look for other string", "body": "<p>Is it possible to look for 'string1' if its true then look for 'string2' using grep.\nHere is my situation. i have many txt report files in that i need to search for 'FAIL' based on test path 'Test path: path/to/test'\nsample report file:</p>\n\n<pre><code>     Test path:          path/to_tests/t1 \n     Host name:                   testpc1\n                  AMEND_1/Sec3/E30012.c,          ;               PASS;     ;              ;             ;          ;\n                  AMEND_1/Sec3/E30013.c,          ;               FAIL;     ;              ;             ;          ;\n                  AMEND_1/Sec3/E30014.c,          ;               PASS;     ;              ;             ;          ;\n                  AMEND_1/Sec3/E30015.c,          ;               FAIL;     ;              ;             ;          ;\n</code></pre>\n\n<p>I'm trying following command, but it prints only FAIL lines but not test path, also i want to remove ';' in the lines.</p>\n\n<pre><code> find . -name \"*concat.txt\" | xargs grep -E 'Test path: path/to_tests/t1' grep -e 'FAIL'\n</code></pre>\n\n<p>Please guide me how can i achieve this using one line command.</p>\n\n<p>desire output:</p>\n\n<pre><code> Test path:          path/to_tests/t1   AMEND_1/Sec3/E30013.c  FAIL\n Test path:          path/to_tests/t1   AMEND_1/Sec3/E30015.c  FAIL\n</code></pre>\n"}, {"tags": ["python", "perl", "awk", "duplicates"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453426683, "post_id": 34937407, "comment_id": 57607566, "body": "Please show a few sample rows. I&#39;m curious about your field separator"}, {"owner": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453427227, "post_id": 34937407, "comment_id": 57607724, "body": "Im having trouble copying the table.. it&#39;s tab delimited though."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453427325, "post_id": 34937407, "comment_id": 57607752, "body": "Well, if it&#39;s tab delimited, your field separator is wrong. Try <code>awk -F&quot;\\t&quot;</code> and <code>sort -t $&#39;\\t&#39;</code> (awk understands the 2 character string <code>&quot;\\&quot; &quot;t&quot;</code> to mean a tab, but sort does not -- you need to give a literal tab to sort&#39;s -t)"}, {"owner": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1453427537, "post_id": 34937407, "comment_id": 57607794, "body": "ahah Oh man, that was a stupid mistake.. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "edited": false, "score": 0, "creation_date": 1453427954, "post_id": 34937697, "comment_id": 57607891, "body": "Thanks man. After fixing the &quot;\\t&quot; issue, both codes give me the same result!"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "edited": false, "score": 0, "creation_date": 1453428555, "post_id": 34937697, "comment_id": 57608031, "body": "I&#39;m curious about which one is faster. Can you time them?"}, {"owner": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "edited": false, "score": 0, "creation_date": 1454346705, "post_id": 34937697, "comment_id": 57992578, "body": "Would it be possible to adapt this code to leave the highest value within two columns? lets say $9 and $11?"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 2, "last_activity_date": 1453427493, "creation_date": 1453427493, "answer_id": 34937697, "question_id": 34937407, "link": "https://stackoverflow.com/questions/34937407/deleting-duplicates-but-leaving-one-according-to-sorting-in-a-different-column/34937697#34937697", "title": "Deleting duplicates but leaving one according to sorting in a different column", "body": "<p>Your code looks ok, it certainly is a clever way to do it. I would write</p>\n\n<pre><code>awk -F\"\\t\" '\n    !($4 in max) || $9 &gt; max[$4] {max[$4] = $9; line[$4] = $0} \n    END {for (key in line) print line[key]}\n' myfile.txt\n</code></pre>\n\n<p>That approach should be pretty easy to translate to another language.</p>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 1, "last_activity_date": 1453456885, "last_edit_date": 1453456885, "creation_date": 1453445712, "answer_id": 34940737, "question_id": 34937407, "link": "https://stackoverflow.com/questions/34937407/deleting-duplicates-but-leaving-one-according-to-sorting-in-a-different-column/34940737#34940737", "title": "Deleting duplicates but leaving one according to sorting in a different column", "body": "<p>Since the input file is so large, it would make sense to avoid requiring awk to store more information than necessary, so assuming sort is not prohibitively slow, you may wish to consider the following optimized variant of the sort/awk program, provided at least that the id is never the empty string:</p>\n\n<pre><code>sort -t $'\\t' -k4,4 -rnk 9,9 | awk -F\\\\t 'key!=$4 {key=$4; print}'\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5682479, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c8b729cd608dedf7d3fe5f2e6d34a307?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/5682479/ale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34937697, "answer_count": 2, "score": 1, "last_activity_date": 1453456885, "creation_date": 1453425481, "last_edit_date": 1453444636, "question_id": 34937407, "link": "https://stackoverflow.com/questions/34937407/deleting-duplicates-but-leaving-one-according-to-sorting-in-a-different-column", "title": "Deleting duplicates but leaving one according to sorting in a different column", "body": "<p>I have a huge table with hundreds of thousands of rows and ten columns. I'd like to remove those duplicates according to column 4 (ID) but at the same time leaving the one that has the highest value on column 9 (score).</p>\n\n<p>I tried this simple code in awk but it's apparently removing more lines than it should and even not picking all the duplicates.. </p>\n\n<pre><code>sort -rnk 9 myfile.txt | awk -F\"[. ]\" '!a[$4]++' &gt;filtered.txt\n</code></pre>\n\n<p>I'd appreciate any advice; I'd love to get this working on python or perl but I'm not very good at it (yet).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "google-bigquery"], "comments": [{"owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "edited": false, "score": 0, "creation_date": 1453418570, "post_id": 34936241, "comment_id": 57605155, "body": "have you tried adding flattenResults? another option  - check naming - projectId, datasetId; flattenResults is optional, so most likely latter"}, {"owner": {"reputation": 3163, "user_id": 4001094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8vxl.png?s=128&g=1", "display_name": "Danny Kitt", "link": "https://stackoverflow.com/users/4001094/danny-kitt"}, "edited": false, "score": 0, "creation_date": 1453418878, "post_id": 34936241, "comment_id": 57605264, "body": "My guess is that you either want to consistently camel-case the fields within <code>destinationTable</code> as <code>projectId</code>, <code>datasetId</code>, and <code>tableId</code>, or consistently underscore them as <code>project_id</code>, etc."}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 3688176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1581212251/picture?type=large", "display_name": "user3688176", "link": "https://stackoverflow.com/users/3688176/user3688176"}, "edited": false, "score": 0, "creation_date": 1453420233, "post_id": 34936523, "comment_id": 57605684, "body": "Thanks; that was it. I found it accidentally right after I posted it. It only took me 3 hours of frustration &amp;@#$&amp;!$%. I am royally annoyed at google for not even providing decent error messages. Forget about coding examples."}, {"owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "reply_to_user": {"reputation": 317, "user_id": 3688176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1581212251/picture?type=large", "display_name": "user3688176", "link": "https://stackoverflow.com/users/3688176/user3688176"}, "edited": false, "score": 0, "creation_date": 1453420343, "post_id": 34936523, "comment_id": 57605718, "body": "understood :o) you still can vote or accept the answer if you think it answers your question (which i think it is) - so later users can see the right answer. totally up to you though! thanks for update"}, {"owner": {"reputation": 317, "user_id": 3688176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1581212251/picture?type=large", "display_name": "user3688176", "link": "https://stackoverflow.com/users/3688176/user3688176"}, "edited": false, "score": 0, "creation_date": 1453549776, "post_id": 34936523, "comment_id": 57656748, "body": "I wonder if I can do the same, i.e., point the output to a destination table, if instead of a query I just list the table. The difference is, the list command is free..."}], "tags": [], "owner": {"reputation": 115571, "user_id": 5221944, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iqXab.png?s=128&g=1", "display_name": "Mikhail Berlyant", "link": "https://stackoverflow.com/users/5221944/mikhail-berlyant"}, "is_accepted": true, "score": 3, "last_activity_date": 1453419710, "creation_date": 1453419710, "answer_id": 34936523, "question_id": 34936241, "link": "https://stackoverflow.com/questions/34936241/bigquery-in-perl-append-query-data-to-table/34936523#34936523", "title": "BigQuery in Perl: append query data to table", "body": "<p>Try:</p>\n\n<pre><code>    destinationTable =&gt; {\n        projectId =&gt; $project_id,\n        datasetId =&gt; $dataset_id,\n        tableId =&gt; $table_id,\n    },\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 3688176, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1581212251/picture?type=large", "display_name": "user3688176", "link": "https://stackoverflow.com/users/3688176/user3688176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 34936523, "answer_count": 1, "score": 2, "last_activity_date": 1453419710, "creation_date": 1453418248, "question_id": 34936241, "link": "https://stackoverflow.com/questions/34936241/bigquery-in-perl-append-query-data-to-table", "title": "BigQuery in Perl: append query data to table", "body": "<p>I am using Perl to drive BigQuery and I am trying to insert a job that will populate a table from the results of a query. The error I am getting is \"Required parameter is missing\". Which parameter is that? (it would be nice if the error message was more specific)</p>\n\n<p>Here is the code:</p>\n\n<pre><code>$response = $bq-&gt;request(\nresource =&gt; 'jobs',\nmethod =&gt; 'insert',\ncontent =&gt; {\n    configuration =&gt; { \n        query =&gt; {\n        query =&gt; $query,\n        destinationTable =&gt; {\n            project_id =&gt; $project_id,\n            dataset_id =&gt; $dataset_id,\n            tableId =&gt; $table_id,\n        },\n        createDisposition =&gt; \"CREATE_IF_NEEDED\",\n        writeDisposition =&gt; \"WRITE_APPEND\",\n        allowLargeResults =&gt;\"TRUE\",\n        },\n    },\n},\nasync =&gt; $async,\n);\n</code></pre>\n\n<p>Note that if I skip the destinationTable part, the code works fine, but it puts the results in a temporary table. So this works:</p>\n\n<pre><code>$response = $bq-&gt;request(\nresource =&gt; 'jobs',\nmethod =&gt; 'insert',\ncontent =&gt; {\n    configuration =&gt; { \n        query =&gt; {\n        query =&gt; $query,\n        createDisposition =&gt; \"CREATE_IF_NEEDED\",\n        writeDisposition =&gt; \"WRITE_APPEND\",\n        },\n    },\n},\nasync =&gt; $async,\n);\n</code></pre>\n\n<p>Any ideas? Don't be put off by the fact this is Perl, it behaves the same way as Python, only the format is different.</p>\n"}, {"tags": ["forms", "perl"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1453450507, "post_id": 34935899, "comment_id": 57615423, "body": "1) use <code>$mech-&gt;dump_forms();</code> to double check fields&#39; names 2)  use <code>$mech-&gt;submit_form(with_fields=&gt;{ ...} )</code>.  Something like &quot;it requires javascript support&quot; may turn true."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5823511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf89bce04b2ba3df71aecfac2886f018?s=128&d=identicon&r=PG&f=1", "display_name": "Rim", "link": "https://stackoverflow.com/users/5823511/rim"}, "edited": false, "score": 0, "creation_date": 1453479152, "post_id": 34937149, "comment_id": 57633740, "body": "Thanks for the response.  I&#39;ll look into that."}, {"owner": {"reputation": 135, "user_id": 5823511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf89bce04b2ba3df71aecfac2886f018?s=128&d=identicon&r=PG&f=1", "display_name": "Rim", "link": "https://stackoverflow.com/users/5823511/rim"}, "edited": false, "score": 0, "creation_date": 1453840437, "post_id": 34937149, "comment_id": 57773286, "body": "I wasn&#39;t able to successfully install Mozilla::Mechanize on our Ubuntu server - got stuck in &quot;dll hell&quot; (or whatever it&#39;s called these days). I was able to install one of its two prereqs via apt-get but the other one wasn&#39;t so easy and I was quickly going down the cpan rabbit hole. I appreciate the response, nonetheless."}], "tags": [], "owner": {"reputation": 4120, "user_id": 9719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EIDSQ.png?s=128&g=1", "display_name": "darch", "link": "https://stackoverflow.com/users/9719/darch"}, "is_accepted": false, "score": 1, "last_activity_date": 1453423707, "creation_date": 1453423707, "answer_id": 34937149, "question_id": 34935899, "link": "https://stackoverflow.com/questions/34935899/perl-wwwmechanize-cant-seem-to-find-the-right-form-or-assign-fields-or-click/34937149#34937149", "title": "perl WWW::Mechanize can&#39;t seem to find the right form or assign fields or click submit", "body": "<p>In this age of DOM and Javascript, there's lots of things that can go wrong with Web automation.  From your results, it looks like maybe the form is built in browser space, which can be really hard to deal with programmatically.</p>\n\n<p>The way to be sure is to dump the original response and look at the form code it contains.</p>\n\n<p>If that turns out to be your problem, your simplest recourse is something like <a href=\"http://search.cpan.org/~slanning/Mozilla-Mechanize-0.06/lib/Mozilla/Mechanize.pm\" rel=\"nofollow\"><code>Mozilla::Mechanize</code></a>. </p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 5823511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf89bce04b2ba3df71aecfac2886f018?s=128&d=identicon&r=PG&f=1", "display_name": "Rim", "link": "https://stackoverflow.com/users/5823511/rim"}, "edited": false, "score": 0, "creation_date": 1453479208, "post_id": 34939989, "comment_id": 57633781, "body": "Thanks for the response.  I&#39;m gonna try the Mozilla::Mechanize suggestion first and see how far I get with that."}], "tags": [], "owner": {"reputation": 11, "user_id": 5824614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b802c30689d546f07752802b3b6688?s=128&d=identicon&r=PG&f=1", "display_name": "gmori", "link": "https://stackoverflow.com/users/5824614/gmori"}, "is_accepted": false, "score": 1, "last_activity_date": 1453442429, "creation_date": 1453442429, "answer_id": 34939989, "question_id": 34935899, "link": "https://stackoverflow.com/questions/34935899/perl-wwwmechanize-cant-seem-to-find-the-right-form-or-assign-fields-or-click/34939989#34939989", "title": "perl WWW::Mechanize can&#39;t seem to find the right form or assign fields or click submit", "body": "<p>When dealing with forms, it can sometimes be easier to replicate the request the form generates than to try to work with the form through Mechanize. </p>\n\n<p>Try using your browser's developer tools to monitor what happens when you log into the site manually (in Firefox or Chrome it'll be under the Network tab), and then generate the same request with Mechanize.</p>\n\n<p>For example, the resulting code MIGHT look something like:</p>\n\n<pre><code>my $post_data =&gt; {\n    '_id2:logon:CMS' =&gt; \"MYSERVER:6400\",\n    '_id2:logon:SAP_SYSTEM' =&gt; \"\",\n    '_id2:logon:SAP_CLIENT' =&gt; \"\",\n    '_id2:logon:USERNAME' =&gt; \"MYUSER\",\n    '_id2:logon:PASSWORD' =&gt; \"MYPWD\",\n    '_id2:logon:AUTH_TYPE' =&gt; \"secEnterprise\",\n};\n\n$mech-&gt;post($url, $post_data);\nunless ($mech-&gt;success()){\n    warn \"Failed to post to $url: \" . $mech-&gt;response()-&gt;status_line() . \"\\n\";\n}\nprint $mech-&gt;content();\n</code></pre>\n\n<p>Where %post_data should match exactly the data that's passed in the manual post to the site and not just what's in the HTML--the keys or data could be transformed by javascript before the actual post is made.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 5823511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf89bce04b2ba3df71aecfac2886f018?s=128&d=identicon&r=PG&f=1", "display_name": "Rim", "link": "https://stackoverflow.com/users/5823511/rim"}, "is_accepted": true, "score": 1, "last_activity_date": 1453840108, "creation_date": 1453840108, "answer_id": 35023327, "question_id": 34935899, "link": "https://stackoverflow.com/questions/34935899/perl-wwwmechanize-cant-seem-to-find-the-right-form-or-assign-fields-or-click/35023327#35023327", "title": "perl WWW::Mechanize can&#39;t seem to find the right form or assign fields or click submit", "body": "<p>I had someone more knowledgeable than me give me help.  The main hurdle was how the page was constructed in frames and how it operated.  Here are the details:</p>\n\n<ul>\n<li>The URL of the frame that contained the login page is \"<a href=\"http://myserver:8080/BOE/CMC/0000000000/myuser/logon.faces\" rel=\"nofollow\">http://myserver:8080/BOE/CMC/0000000000/myuser/logon.faces</a>\".  The main frame of the page had a form in it, but it wasn't the logon form, which explains why the form from my original code didn't have the logon fields I was expecting.</li>\n<li>The other \"gotcha\" that I ran into was that after a successful logon, the site redirects you to a different URL: \"<a href=\"http://myserver:8080/BOE/CMC/0000000000/myuser/App/home.faces?service=%2Fmyuser%2FApp%2F\" rel=\"nofollow\">http://myserver:8080/BOE/CMC/0000000000/myuser/App/home.faces?service=%2Fmyuser%2FApp%2F</a>\".  So to check a successful login, I had to get this URL and check for whatever text I decided to look for.</li>\n<li>I also had to refer to the logon form by id and not by name (since the form did not have a name).</li>\n</ul>\n\n<p>Here's the working code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse WWW::Mechanize;\nuse HTTP::Cookies;\n\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;cookie_jar(HTTP::Cookies-&gt;new());\n$mech-&gt;get(\"http://myserver:8080/BOE/CMC/0000000000/myuser/logon.faces\");\n$mech-&gt;form_id(\"_id2\");\n$mech-&gt;field(\"_id2:logon:CMS\", \"MYSERVER:6400\");\n$mech-&gt;field(\"_id2:logon:SAP_SYSTEM\", \"\");\n$mech-&gt;field(\"_id2:logon:SAP_CLIENT\", \"\");\n$mech-&gt;field(\"_id2:logon:USERNAME\", \"MyUser\");\n$mech-&gt;field(\"_id2:logon:PASSWORD\", \"MyPwd\");\n$mech-&gt;field(\"_id2:logon:AUTH_TYPE\", \"secEnterprise\");\n$mech-&gt;click;\n$mech-&gt;get(\"http://myserver:8080/BOE/CMC/0000000000/myuser/App/home.faces?service=%2Fmyuser%2FApp%2FappService.jsp&amp;appKind=CMC\");\n$output_page = $mech-&gt;content();\nif (index($output_page, \"Welcome:\") != -1)\n{\n        print \"\\n\\n+++++ Successful login! ++++++\\n\\n\";\n}\nelse\n{\n        print \"\\n\\n----- Login failed!-----\\n\\n\";\n}\n</code></pre>\n\n<p>For validating that I had successfully logged in, I kept it very simple and just searched for the \"Welcome:\" text (as in \"Welcome: MyUser\").</p>\n"}], "owner": {"reputation": 135, "user_id": 5823511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf89bce04b2ba3df71aecfac2886f018?s=128&d=identicon&r=PG&f=1", "display_name": "Rim", "link": "https://stackoverflow.com/users/5823511/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 2, "accepted_answer_id": 35023327, "answer_count": 3, "score": 3, "last_activity_date": 1453840108, "creation_date": 1453416689, "last_edit_date": 1453422318, "question_id": 34935899, "link": "https://stackoverflow.com/questions/34935899/perl-wwwmechanize-cant-seem-to-find-the-right-form-or-assign-fields-or-click", "title": "perl WWW::Mechanize can&#39;t seem to find the right form or assign fields or click submit", "body": "<p>So I'm trying to create a perl script that logs in to SAP BusinessObjects Central Management Console (CMC) page but it doesn't even look like it's finding the right form or finding the right field or even clicking Submit.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse WWW::Mechanize;\nuse HTTP::Cookies;\n\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;cookie_jar(HTTP::Cookies-&gt;new());\n$mech-&gt;get(\"http://myserver:8080/BOE/CMC\");\n$mech-&gt;form_name(\"_id2\");\n$mech-&gt;field(\"_id2:logon:CMS\", \"MYSERVER:6400\");\n$mech-&gt;field(\"_id2:logon:SAP_SYSTEM\", \"\");\n$mech-&gt;field(\"_id2:logon:SAP_CLIENT\", \"\");\n$mech-&gt;field(\"_id2:logon:USERNAME\", \"MYUSER\");\n$mech-&gt;field(\"_id2:logon:PASSWORD\", \"MYPWD\");\n$mech-&gt;field(\"_id2:logon:AUTH_TYPE\", \"secEnterprise\");\n$mech-&gt;click;\nprint $mech-&gt;content();\n</code></pre>\n\n<p>When I run it, I don't get any errors but the output I get is the login page again.  Even more puzzling, it doesn't seem to be accepting the field values I send it (the output would display default values instead of the values I assign it).  Putting in a wrong user or password doesn't change anything - no error but I just get the login page back with default values</p>\n\n<p>I think the script itself is fine since I changed the necessary fields and I was able to log in to our Nagios page (the output page definitely shows Nagios details).  I think the CMC page is not so simple, but I need help in figuring out how to make it work.</p>\n\n<p>What I've tried:</p>\n\n<h1>1</h1>\n\n<pre><code>use Data::Dumper;\nprint $mech-&gt;forms;\nprint Dumper($mech-&gt;forms());\n</code></pre>\n\n<p>What that gave me is:\n    Current form is: WWW::Mechanize=HASH(0x243d828)</p>\n\n<p>Part of the Dumper output is:</p>\n\n<pre><code>'attr' =&gt; {\n         'target' =&gt; 'servletBridgeIframe',\n         'style' =&gt; 'display:none;',\n         'method' =&gt; 'post'\n       },\n'inputs' =&gt; []\n</code></pre>\n\n<p>I'm showing just that part of the Dumper output because it seems that's the relevant part.  When I tried the same thing with our Nagios page, the 'attr' section had a 'name' field which the above doesn't.  The Nagios page also had entries for 'inputs' such as 'useralias' and 'password' but the above doesn't have any entries.</p>\n\n<h1>2</h1>\n\n<pre><code>$mech-&gt;form_number(1);\n</code></pre>\n\n<p>Since I wasn't sure I was referencing the form correctly, I just had it try using the first form it finds (the page only has one form anyway).  My result was the same - no error and the output is the login page with default values.</p>\n\n<h1>3</h1>\n\n<p>I messed around with escaping (with '\\') the underscore (_) and colon (:) in the field names.</p>\n\n<p>I've searched and didn't find anything that said I had to escape any characters but it was worth a shot.  All I know is, the Nagios page field names only contained letters and it worked.</p>\n\n<p>I got field names from Chrome's developer tool.  For example, the User Name form field showed:</p>\n\n<pre><code>&lt;input type=\"text\" id=\"_id2:logon:USERNAME\" name=\"_id2:logon:USERNAME\" value=\"Administrator\"&gt;\n</code></pre>\n\n<p>I don't know if Mechanize has a problem with names starting with underscore or names containing colons.</p>\n\n<h1>4</h1>\n\n<pre><code>$mech-&gt;click(\"_id2:logon:logonButton\");\n</code></pre>\n\n<p>Since I wasn't sure the \"Log On\" button was being clicked I tried to specify it but it gave me an error:</p>\n\n<pre><code>No clickable input with name _id2:logon:logonButton at /usr/share/perl5/WWW/Mechanize.pm line 1676\n</code></pre>\n\n<p>That's probably because there is no name defined on the button (I used the id instead) but I thought it was worth a shot.  Here's the code of the button:</p>\n\n<pre><code>&lt;input type=\"submit\" id=\"_id2:logon:logonButton\" value=\"Log On\" class=\"logonButtonNoHover logon_button_no_hover\" onmouseover=\"this.className = 'logonButtonHover logon_button_hover';\" onmouseout=\"this.className = 'logonButtonNoHover logon_button_no_hover';\"&gt;\n</code></pre>\n\n<p>There's only one button on the form anyway so I shouldn't have needed to specify it (I didn't need to for the Nagios page)</p>\n\n<h1>5</h1>\n\n<p>The interactive shell of Mechanize</p>\n\n<p>Here's the output when I tried to retrieve all forms on the page:</p>\n\n<pre><code>$ perl -MWWW::Mechanize::Shell -eshell\n(no url)&gt;get http://myserver:8080/BOE/CMC\nRetrieving http://myserver:8080/BOE/CMC(200)\nhttp://myserver:8080/BOE/CMC&gt;forms\nForm [1]\nPOST http://myserver:8080/BOE/CMC/1412201223/admin/logon.faces\n</code></pre>\n\n<h1>Help!</h1>\n\n<p>I don't really know perl so I don't know how to troubleshoot this further - especially since I'm not seeing errors.  If someone can direct me to other things to try, it would be helpful.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1453416599, "post_id": 34935849, "comment_id": 57604413, "body": "Perl has some great built-in documentation. If you have perldoc installed on your system, you can run <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>perldoc -f map</code></a> and <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>perldoc -f grep</code></a> to see the docs for each function. (I added links to the online version of the docs for your convenience.)"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453417951, "post_id": 34935849, "comment_id": 57604910, "body": "Thanks, will go through this, map was confusing to me, will read it again (and again) till I understand."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453418393, "post_id": 34935849, "comment_id": 57605076, "body": "Essentially, <code>map</code> takes an input list and transforms it into an output list. In your example, <code>map</code> transforms the list containing <code>use set_marvel;</code>, <code>use set_caprion;</code> into a list containing <code>set_marvel</code>, <code>set_caprion</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1453466430, "post_id": 34935849, "comment_id": 57625126, "body": "By the way, you could also have used: <code>my @sets = map { &#47;^use (\\w+)&#47; ? $1 : () } &lt;FILE&gt;;</code> or even just <code>my @sets = map { &#47;^use (\\w+)&#47;g } &lt;FILE&gt;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5582694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0519e66ec41f78c716e43d83e82ba8db?s=128&d=identicon&r=PG&f=1", "display_name": "Chad", "link": "https://stackoverflow.com/users/5582694/chad"}, "is_accepted": false, "score": 0, "last_activity_date": 1453418309, "last_edit_date": 1453418309, "creation_date": 1453417674, "answer_id": 34936113, "question_id": 34935849, "link": "https://stackoverflow.com/questions/34935849/how-do-map-and-grep-work/34936113#34936113", "title": "How do map and grep work?", "body": "<p>The <code>grep</code> takes the <code>&lt;FILE&gt;</code> as input and uses the regular expression <code>^use</code> to copy all of the lines that start with <code>use</code> into an array that is passed to <code>map</code>.</p>\n\n<p>The <code>map</code> loops through each array entry and puts each entry in <code>$_</code>, then calls <code>chomp</code> on <code>$_</code> implicitly. Then <code>$_ =~ m/use (\\w+)/;</code> performs a regular expression on $_ that captures the word after the <code>use</code> and puts it into <code>$1</code>. Then the <code>$1</code> is called to put it in <code>@set</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1453418807, "post_id": 34936249, "comment_id": 57605243, "body": "thanks for the explanation, and sorry for the dumb question :("}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1453418997, "post_id": 34936249, "comment_id": 57605307, "body": "@Krish Does it at least make sense now? Because if it doesn&#39;t, now is the time to ask any follow-up questions."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1453449455, "post_id": 34936249, "comment_id": 57614959, "body": "I don&#39;t think <code>map</code> is particularly newbie friendly. But both made considerably more sense when I thought about <a href=\"http://stackoverflow.com/q/31046327/2566198\">functional programming</a> which was when they started to click.  Both iterate an array (like for) but transform it and return the result."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 6, "last_activity_date": 1453423195, "last_edit_date": 1453423195, "creation_date": 1453418293, "answer_id": 34936249, "question_id": 34935849, "link": "https://stackoverflow.com/questions/34935849/how-do-map-and-grep-work/34936249#34936249", "title": "How do map and grep work?", "body": "<p>Despite the fact that your question doesn't show any research effort, I'm going to answer it anyway, because it might be helpful for future readers who come across this page.</p>\n\n<p>According to <a href=\"http://perldoc.perl.org/functions/map.html\">perldoc</a>, <code>map</code>:</p>\n\n<blockquote>\n  <p>Evaluates the BLOCK or EXPR for each element of LIST (locally setting\n  <code>$_</code> to each element) and returns the list value composed of the results\n  of each such evaluation. In scalar context, returns the total number\n  of elements so generated. Evaluates BLOCK or EXPR in list context, so\n  each element of LIST may produce zero, one, or more elements in the\n  returned value.</p>\n</blockquote>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/grep.html\">definition</a> for <code>grep</code>, on the other hand:</p>\n\n<blockquote>\n  <p>Evaluates the BLOCK or EXPR for each element of LIST (locally setting\n  <code>$_</code> to each element) and returns the list value consisting of those\n  elements for which the expression evaluated to true. In scalar\n  context, returns the number of times the expression was true.</p>\n</blockquote>\n\n<p>So they're similar in their input values, their return values, and the fact that they both localize <code>$_</code>.</p>\n\n<p>In your specific code, going from right to left:</p>\n\n<ul>\n<li><code>&lt;FILE&gt;</code> slurps the lines in the file pointed to by the <code>FILE</code> filehandle and returns a list</li>\n<li>In the context of <code>grep</code>, <code>/^use/</code> looks at each line and returns true for the ones that match the regular expression. The return value of <code>grep</code>, therefore, is a list of lines that that start with <code>use</code>.</li>\n<li>In the BLOCK of your <code>map</code> (which is only considering lines that passed the earlier <code>grep</code> test):\n\n<ul>\n<li><code>chomp</code> removes any trailing string from <code>$_</code> that corresponds to the current value of <code>$/</code> (i.e., the newline). This is unnecessary, because as you'll see below, <code>\\w</code> will never match a newline.</li>\n<li><code>$_ =~ m/use (\\w+)/</code> is a regular expression that looks for <code>use</code> followed by a space, followed by one or more word characters (<code>[0-9a-zA-Z_]</code>) in a capture group. The <code>$_ =~</code> is redundant, since the match operator <code>m//</code> binds to <code>$_</code> by default.</li>\n<li><code>$1</code> is the first matching capture group from the previous expression. Since it's the last expression in the BLOCK, it bubbles up as the return value for each list item that was evaluated.</li>\n</ul></li>\n<li>The end result is stored in an array named <code>@sets</code>, which should contain <code>'set_marvel', 'set_caprion', etc.</code></li>\n</ul>\n\n<p>Equivalently, your code could be rewritten without <code>map</code> and <code>grep</code> like this, which may make it easier for you to understand:</p>\n\n<pre><code>my @sets;\n\nwhile (&lt;FILE&gt;) {\n    next unless /^use (\\w+)/;\n    push(@sets, $1);\n}\n</code></pre>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 34936249, "answer_count": 2, "score": -5, "last_activity_date": 1453423195, "creation_date": 1453416469, "last_edit_date": 1453419402, "question_id": 34935849, "link": "https://stackoverflow.com/questions/34935849/how-do-map-and-grep-work", "title": "How do map and grep work?", "body": "<p>I came across this code in a script, can you please explain what <code>map</code> and <code>grep</code> does here?</p>\n\n<pre><code>open FILE, '&lt;', $file or die \"Can't open file $file: $!\\n\";\nmy @sets = map {\n                  chomp;\n                  $_ =~ m/use (\\w+)/;\n                  $1;\n                }\ngrep /^use/, ( &lt;FILE&gt; );\n\nclose FILE;\n</code></pre>\n\n<p>The file pointed by <code>$file</code> has:</p>\n\n<pre><code>use set_marvel;\nuse set_caprion;\nand so on...\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 528, "user_id": 1815811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OdnDK.jpg?s=128&g=1", "display_name": "vitas", "link": "https://stackoverflow.com/users/1815811/vitas"}, "is_accepted": true, "score": 2, "last_activity_date": 1458198501, "creation_date": 1458198501, "answer_id": 36053723, "question_id": 34935367, "link": "https://stackoverflow.com/questions/34935367/serve-static-directory-from-mojolicious-other-than-public/36053723#36053723", "title": "serve static directory from mojolicious other than /public", "body": "<p>Possibly simplest way is use plugin <a href=\"http://search.cpan.org/~koorchik/Mojolicious-Plugin-RenderFile-0.03/README.pod\" rel=\"nofollow\">RenderFile</a>:</p>\n\n<pre><code>package ExampleServer;\nuse Mojo::Base 'Mojolicious';\nuse Mojolicious::Static;\n\n# This method will run once at server start\nsub startup {\n   my $self = shift;\n\n   $self-&gt;plugin('RenderFile');\n\n   $ENV{MOJO_REVERSE_PROXY} = 1;\n\n   # TODO: generalize\n   my $static_path = '/www/example/docroot/.well-known/acme-challenge/';\n\n   # Router\n   my $r = $self-&gt;routes;\n\n   # Normal route to controller\n   $r-&gt;get('/')-&gt;to('example#welcome');\n\n   # serve static directory\n   $r-&gt;get('/.well-known/acme-challenge/*filename' =&gt; sub {\n       my $self = shift;\n       my $filename = $self-&gt;stash('filename');\n       my $fqfn = $static_path . $filename;\n       $self-&gt;app-&gt;log-&gt;debug($fqfn);\n       $self-&gt;render_file(filepath=&gt; $fqfn, format =&gt; 'txt', content_disposition =&gt; 'inline' );\n   });\n}\n</code></pre>\n\n<p>Or you can get inspiration from <a href=\"http://cpansearch.perl.org/src/KOORCHIK/Mojolicious-Plugin-RenderFile-0.03/lib/Mojolicious/Plugin/RenderFile.pm\" rel=\"nofollow\">source</a>.</p>\n"}], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 36053723, "answer_count": 1, "score": 4, "last_activity_date": 1458198501, "creation_date": 1453414407, "last_edit_date": 1453419942, "question_id": 34935367, "link": "https://stackoverflow.com/questions/34935367/serve-static-directory-from-mojolicious-other-than-public", "title": "serve static directory from mojolicious other than /public", "body": "<p>I have looked at a <a href=\"https://alisterwest.com/code/perl-mojolicious-serve-static\" rel=\"nofollow\">variety</a> of <a href=\"http://blogs.perl.org/users/revlin_john/2013/03/re-simple-webserver---serve-static-files-with-mojolicious.html\" rel=\"nofollow\">places</a> to find the best way to serve a directory of static files from within a <a href=\"/questions/tagged/mojolicious\" class=\"post-tag\" title=\"show questions tagged &#39;mojolicious&#39;\" rel=\"tag\">mojolicious</a> app and this is as close as I've been able to get:</p>\n\n<pre><code>package ExampleServer;\nuse Mojo::Base 'Mojolicious';\nuse Mojolicious::Static;\n\n# This method will run once at server start\nsub startup {\n    my $self = shift;\n\n    $ENV{MOJO_REVERSE_PROXY} = 1;\n\n    # TODO: generalize\n    my $static_path = '/www/example/docroot/.well-known/acme-challenge/';\n\n    # Router\n    my $r = $self-&gt;routes;\n\n    # Normal route to controller\n    $r-&gt;get('/')-&gt;to('example#welcome');\n\n    # serve static directory\n    $r-&gt;get('/.well-known/acme-challenge/*filename' =&gt; sub {\n        my $self = shift;\n        my $filename = $self-&gt;stash('filename');\n        my $fqfn = $static_path . $filename;\n        $self-&gt;app-&gt;log-&gt;debug($fqfn);\n        my $static = Mojolicious::Static-&gt;new( paths =&gt; [ $static_path ] );\n\n        $static-&gt;serve($self, $fqfn);\n        $self-&gt;rendered;\n    });\n}\n\n1;\n</code></pre>\n\n<p>This is pulling out the filename correctly and it only effects the URL's I want it to, but it serves empty files regardless of whether they exist in that directory or not.  What am I missing?</p>\n"}, {"tags": ["ruby", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453402281, "post_id": 34931915, "comment_id": 57596742, "body": "It looks like you might be trying to implement a dispatch table. If so, it would be good to mention that in your question to avoid the XY problem. There might be a better way to do it in Ruby that takes a completely different approach than Perl."}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 1, "creation_date": 1453402493, "post_id": 34931915, "comment_id": 57596862, "body": "Can you explain in common words(not perl code) what do you want to do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1453403094, "post_id": 34931915, "comment_id": 57597222, "body": "<code>&amp;{ $codes-&gt;{ $next_code } }</code> is best written <code>$codes-&gt;{ $next_code }-&gt;()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1453406168, "post_id": 34932123, "comment_id": 57598979, "body": "One thing interesting about procs is that they can be called in (at least?) five ways. Suppose <code>f = -&gt;s { puts &quot;Say #{s}!&quot; }</code>. Then <code>f.call(&#39;hey&#39;)</code>, <code>f[&#39;hey&#39;]</code>, <code>f.(&#39;hey&#39;)</code>, <code>f.yield(&#39;hey&#39;)</code> and <code>f === &quot;hey&quot;</code> all print <code>&quot;Say hey!&quot;</code>."}, {"owner": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1453409957, "post_id": 34932123, "comment_id": 57601076, "body": "Although the &quot;normal&quot; way is to use <code>call</code> or its syntactic sugar <code>.()</code>. <code>[]</code> is an outdated alias for <code>call</code> that was used to make calling a <code>Proc</code> more like a method call by using the brackets as fake parentheses. As of Ruby 1.9, we have the <code>.()</code> notation, which serves this purpose better, IMO. <code>yield</code> I didn&#39;t know about, I suppose it is for API compatibility with <code>Fibre</code>s? <code>===</code> is useful for using <code>Proc</code>s in <code>case</code> expressions and <code>Enumerable#grep</code>, but probably shouldn&#39;t be called directly. Note: all of them are aliases for <code>call</code>, except <code>()</code>, which is syntax sugar for <code>call</code>."}], "tags": [], "owner": {"reputation": 335869, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 7, "last_activity_date": 1453403101, "last_edit_date": 1453403101, "creation_date": 1453402730, "answer_id": 34932123, "question_id": 34931915, "link": "https://stackoverflow.com/questions/34931915/perl-like-anonymous-subroutines-in-ruby/34932123#34932123", "title": "Perl like anonymous subroutines in ruby", "body": "<p>Ruby has <a href=\"http://ruby-doc.org/core/Proc.html\"><code>Proc</code></a>s as anonymous first-class subroutine objects. <code>Proc</code>s can be created by passing a block to <a href=\"http://ruby-doc.org/core/Proc.html#method-c-new\"><code>Proc::new</code></a>, <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-proc\"><code>Kernel#proc</code></a>, or <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-lambda\"><code>Kernel#lambda</code></a>, or with the \"stabby lambda\" lambda literal syntax.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\n# Make a reference to a subroutine\ncodes = {\n  one: -&gt; {\n    puts \"This is code block one\"\n    puts \"And this is code block one's line two\"\n  }\n}\n\ncodes.each do |name, code|\n  # Execute anonymous subroutine\n  code.()\nend\n</code></pre>\n\n<p>The most widely-used form of anonymous code block in Ruby is a construct called a <em>block</em>, which is actually <em>not</em> an object, but just a syntactic construct. Every method in Ruby takes exactly one optional block argument, which can be passed either in curly braces or using a <code>do</code>/<code>end</code> keyword pair after the normal method arguments. You can see a block in action in the code above, being passed to the <a href=\"http://ruby-doc.org/core/Hash.html#method-i-each\"><code>Hash#each</code></a> iteration method.</p>\n\n<p>In case you are interested, here is a small toy project of mine that demonstrates the use of first-class closures in a variety of languages, including Perl5 and Perl6, Ruby, PHP, Python, ECMAScript, Smalltalk, Clojure, Scheme, and many others: <a href=\"http://joergwmittag.github.io/lambdaconscarcdr/\">http://joergwmittag.github.io/lambdaconscarcdr/</a></p>\n"}], "owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 34932123, "answer_count": 1, "score": 3, "last_activity_date": 1453403101, "creation_date": 1453402065, "last_edit_date": 1453402595, "question_id": 34931915, "link": "https://stackoverflow.com/questions/34931915/perl-like-anonymous-subroutines-in-ruby", "title": "Perl like anonymous subroutines in ruby", "body": "<p>I'm new to ruby and trying to duplicate this perl, that calls anonymous subroutines, in ruby:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\n# Make a reference to a subroutine\nmy $codes = {\n   one =&gt; sub {\n      say \"This is code block one\";\n      say \"And this is code block one's line two\"\n   },\n};\n\nfor my $next_code ( keys %{ $codes } ) {\n   # Execute anonymous subroutine\n   &amp;{ $codes-&gt;{ $next_code } };\n}\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>#!/usr/bin/ruby -w\n\ncodes = {\n   one: puts \"This is code block one\"\n        puts \"And this is code block one's line two\",\n }\ncodes.each do |next_code|\n   next_code\nend\n</code></pre>\n\n<p>But, I get syntax errors. Is this possible, or is there another preferred ruby way?</p>\n\n<p>UPDATE: Yes, this is like a dispatch table. I store code in a hash and run that code later.</p>\n"}, {"tags": ["xml", "perl", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453398794, "post_id": 34930692, "comment_id": 57594681, "body": "Is that suppose to be an XPath? If so, you want <code>&#47;&#47;site&#47;supported-locales&#47;locale&#47;@id</code>"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1453398860, "post_id": 34930692, "comment_id": 57594724, "body": "I don&#39;t think Mojo::DOM supports XPath, only CSS selectors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453401254, "post_id": 34930692, "comment_id": 57596124, "body": "It&#39;s fine to publish \u201cmock\u201d data as long as it displays the error your&#39;e asking about. In this case your sample is too small and isn&#39;t even valid XML. Likewise, the CSS selector <code>site[defaultDomain</code> in your code is incorrect. Is this the real code that you&#39;ve shown us?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453401296, "post_id": 34930692, "comment_id": 57596145, "body": "Does it have to be <code>Mojo::DOM</code>? Because both <code>XML::Twig</code> and <code>XML::LibXML</code> are excellent."}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453414158, "post_id": 34930692, "comment_id": 57603294, "body": "@Borodin, thanks, it is meant to be an excerpt of the XML, not the whole file; also <code>site[defaultDomain</code> was a typo"}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453414361, "post_id": 34930692, "comment_id": 57603405, "body": "@Sobrique, no but I tried those first and couldn&#39;t &quot;grok&quot; their docs as easily"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1453398849, "post_id": 34930867, "comment_id": 57594718, "body": "Ah selectors! Thanks Hunter, I will give this a try."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1453399125, "post_id": 34930867, "comment_id": 57594872, "body": "Take a look at <a href=\"https://metacpan.org/pod/Mojo::DOM::CSS#SELECTORS\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::DOM::CSS#SELECTORS</a> for more documentation on CSS selectors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1453402660, "post_id": 34930867, "comment_id": 57596963, "body": "@sqldoug: <i>&quot;selectors!&quot;</i> indeed. I would use <i>Mojolicious</i> all the time if it supported XPath expressions as well. But CSS selectors are essential for locating HTML elements of a given class, which may look like <code>&lt;div class=&quot;abc ba c d&quot;&gt;</code>. CSS allows just <code>div.c</code> whereas in XPath 1.0 even <code>div[contains(@class, &quot;c&quot;)]</code> doesn&#39;t work because it will pick up the <code>c</code> in <code>abc</code>"}, {"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453417716, "post_id": 34930867, "comment_id": 57604835, "body": "@Borodin, thanks; indeed that is interesting. Mojo seems simpler, for what I need."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1453398735, "creation_date": 1453398735, "answer_id": 34930867, "question_id": 34930692, "link": "https://stackoverflow.com/questions/34930692/how-to-filter-narrow-xml-in-perl-to-ignore-unwanted-child-elements/34930867#34930867", "title": "How to filter/narrow XML in Perl to ignore unwanted child elements?", "body": "<p>You can look for <code>locale</code> tags that are underneath <code>site</code> and <code>supported-locales</code> tags directly using the child selector:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse feature qw(say);\nuse Mojo::DOM;\n\nmy $xml = q{\n&lt;site defaultDomain=\"www.somedomain.com\"&gt;\n    &lt;supported-locales&gt;\n        &lt;locale id=\"sometext\"/&gt;\n    &lt;/supported-locales&gt;\n    &lt;next-child-of-site&gt;\n&lt;/site&gt;\n};\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml);\n\nfor my $e ($dom-&gt;find('site &gt; supported-locales &gt; locale')-&gt;each) {\n   say $e-&gt;{id};\n}\n# output: sometext\n</code></pre>\n\n<p>As always, you should <code>use strict;</code> and <code>use warnings;</code></p>\n"}, {"comments": [{"owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "edited": false, "score": 0, "creation_date": 1453417631, "post_id": 34931843, "comment_id": 57604797, "body": "Thanks, yes that was a typo."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467890060, "last_edit_date": 1467890060, "creation_date": 1453401873, "answer_id": 34931843, "question_id": 34930692, "link": "https://stackoverflow.com/questions/34930692/how-to-filter-narrow-xml-in-perl-to-ignore-unwanted-child-elements/34931843#34931843", "title": "How to filter/narrow XML in Perl to ignore unwanted child elements?", "body": "<p>The main problem seems to be that you have an invalid CSS selector <code>site[defaultDomain</code>. It doesn't have balanced square brackets so it's not even a legitimate XPath expression</p>\n\n<p>Here's a program that uses your own data to provide what I think you're asking for</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Mojo;\n\nmy $xml = do {\n    local $/;\n    &lt;DATA&gt;;\n};\n\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1);\n\n$dom-&gt;parse($xml);\n\nfor my $e ($dom-&gt;find('supported-locales &gt; locale')-&gt;each) {\n    say $e-&gt;attr('id');\n}\n\n__DATA__\n&lt;site defaultDomain=\"www.somedomain.com\"&gt;\n  &lt;supported-locales&gt;\n    &lt;locale id=\"sometext\"/&gt;\n  &lt;/supported-locales&gt;\n  &lt;next-child-of-site&gt;\n  &lt;/next-child-of-site&gt;\n&lt;/site&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>sometext\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 4263868, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-bGy7BUtOACk/AAAAAAAAAAI/AAAAAAAAACk/otP0ryPeKp0/photo.jpg?sz=128", "display_name": "sqldoug", "link": "https://stackoverflow.com/users/4263868/sqldoug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1467890060, "creation_date": 1453398170, "last_edit_date": 1453401142, "question_id": 34930692, "link": "https://stackoverflow.com/questions/34930692/how-to-filter-narrow-xml-in-perl-to-ignore-unwanted-child-elements", "title": "How to filter/narrow XML in Perl to ignore unwanted child elements?", "body": "<p>Say I have the following XML structure (mock) that begins:</p>\n\n<pre><code>&lt;site defaultDomain=\"www.somedomain.com\"&gt;\n    &lt;supported-locales&gt;\n        &lt;locale id=\"sometext\"/&gt;\n    &lt;/supported-locales&gt;\n    &lt;next-child-of-site&gt;\n    ...\n&lt;/site&gt;\n</code></pre>\n\n<p>I am using <a href=\"http://metacpan.org/module/Mojo::DOM\" rel=\"nofollow\"><code>Mojo::DOM</code></a> and trying to get only the <code>id</code> text of <code>&lt;locale&gt;</code> elements that are children of <code>&lt;supported-locales&gt;</code> elements and ignore all other children of <code>&lt;site&gt;</code></p>\n\n<pre><code># Parse XML\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($xml);\n\nfor my $e ($dom-&gt;find('site[defaultDomain')-&gt;each) {\n    say $e-&gt;children-&gt;join();\n}\n</code></pre>\n\n<p>So I get this far, but am stuck on how to filter the children to <code>&lt;supported-locales&gt;</code> and then <code>&lt;locale&gt;</code> only. Suggestions? I'm new to XML processing with <code>Mojo::DOM</code>.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453398981, "post_id": 34930181, "comment_id": 57594789, "body": "<i>&quot;At first I thought Perl would be better but a friend of me suggested awk. It was my first time with awk.&quot;</i> Perl will do everything that awk can, with the exception that it is tougher to write terse one-liners in Perl. You should stick with what you know. Anyone who recommends awk over Perl is a fan"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453399349, "post_id": 34930561, "comment_id": 57595011, "body": "This ignores the possibility that an ID may repeat for a given data pair"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453399889, "post_id": 34930561, "comment_id": 57595347, "body": "@Borodin An <i>id</i> is usually unique. That&#39;s the purpose."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453400848, "post_id": 34930561, "comment_id": 57595907, "body": "Yes, an ID should be unique for each record in a set of data. But we have no knowledge of the structure of this data and, unless every record consists only of the two columns shown, it may well be that IDs are duplicated in this subset"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453405821, "post_id": 34930561, "comment_id": 57598793, "body": "Well, if this should really matter, we could simply add a conditional before adding the id to <code>ids</code> and check if it has already been added. But the question does not reflect that atm."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1453410706, "post_id": 34930561, "comment_id": 57601492, "body": "That would fail if one of the first terms evaluated to zero, and the unparenthesized ternary expression could cause a syntax error on some awks and there&#39;s a little redundancy. Use <code>ids[terms]=(terms in ids ? ids[terms]&quot;,&quot; : &quot;&quot;) $1</code>."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1453411893, "post_id": 34930561, "comment_id": 57602171, "body": "@EdMorton Your suggestion looks nice. Let me play around with that tomorrow and possibly add that. I&#39;m afk for today..."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1453398100, "last_edit_date": 1453398100, "creation_date": 1453397760, "answer_id": 34930561, "question_id": 34930181, "link": "https://stackoverflow.com/questions/34930181/find-lines-with-the-same-columns-pairs-in-one-file/34930561#34930561", "title": "Find lines with the same columns&#39; pairs in one file", "body": "<p>You can use <code>awk</code>:</p>\n\n<pre><code>awk -f script.awk input.file\n</code></pre>\n\n<p>Where <em>script.awk</em> looks like this:</p>\n\n<pre><code>{\n    # Select and count the terms combination\n    terms=$2\" \"$3\n    count[terms]++\n\n    # Concatenate ids by `,` - except if it\n    # is the first occurrence\n    ids[terms]=ids[terms] ? ids[terms]\",\"$1 : $1\n}\nEND{\n    # At the end print the desired results\n    for(terms in count){\n        print terms,count[terms],ids[terms]\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1453405964, "post_id": 34930822, "comment_id": 57598873, "body": "One up for showing an implementation in Perl. You are right, <i>a friend told that</i> is not a reason to choose <code>awk</code> over <code>perl</code>. A reason to use <code>awk</code> is that such algorithms can be pretty nicely and shortly expressed in <code>awk</code> and it is <code>damn!</code> fast."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1453408145, "post_id": 34930822, "comment_id": 57600140, "body": "Short algorithms aren&#39;t a virtue"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453410907, "post_id": 34930822, "comment_id": 57601604, "body": "@Sobrique is correct. Conciseness is a virtue, not brevity alone."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1453411325, "post_id": 34930822, "comment_id": 57601866, "body": "Hmm. If you care about 80 chars per line in code files, often a few chars can make the difference. However, I would not say that is <i>the</i> rule over all, of course. For example this problem is not a one liner at all so it doesn&#39;t matter in this case."}, {"owner": {"reputation": 151, "user_id": 4900025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7520a6589c667f76ee114001b705bd?s=128&d=identicon&r=PG", "display_name": "Vangelis Theodorakis", "link": "https://stackoverflow.com/users/4900025/vangelis-theodorakis"}, "edited": false, "score": 0, "creation_date": 1453412961, "post_id": 34930822, "comment_id": 57602689, "body": "Wow thanks! It is even more than i asked for!  The only thing that i am curious are these:  <code>$pairs{$pair}{count}</code>  i understand what you are doing, and that is works, but is this normal? I mean can you do such things with hash tables?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1453399043, "last_edit_date": 1453399043, "creation_date": 1453398576, "answer_id": 34930822, "question_id": 34930181, "link": "https://stackoverflow.com/questions/34930181/find-lines-with-the-same-columns-pairs-in-one-file/34930822#34930822", "title": "Find lines with the same columns&#39; pairs in one file", "body": "<p>This solution does as you ask</p>\n\n<p>The array <code>@pairs</code> only purpose is to retain the order of the input data. If that isn't necessary then the code can be reduced substantially</p>\n\n<p>I have assumed that given pair of column 2 / column 3 values may appear more than once with the same ID. That means I had to count the occurrences of the pair separately from accumulating the related IDs. If that isn't true then the count is simply the number of IDs for each pair</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy %pairs;\nmy @pairs;\n\nwhile ( &lt;&gt; ) {\n\n    chomp;\n    my ($id, $pair) = split \"\\t\", $_, 2;\n\n    push @pairs, $pair unless $pairs{$pair};\n\n    ++$pairs{$pair}{count};\n    $pairs{$pair}{ids}{$id} = 1;\n}\n\nfor my $pair ( @pairs ) {\n    my ($n, $ids) = @{ $pairs{$pair} }{qw/ count ids /};\n    say join \"\\t\", $pair, $n, join(',', keys %$ids);\n}\n</code></pre>\n\n<h2>output</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>term1 term2 2   id1,id2\ntern2 term3 1   id3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1453410806, "creation_date": 1453410806, "answer_id": 34934458, "question_id": 34930181, "link": "https://stackoverflow.com/questions/34930181/find-lines-with-the-same-columns-pairs-in-one-file/34934458#34934458", "title": "Find lines with the same columns&#39; pairs in one file", "body": "<p>WIth GNU awk for true 2D arrays:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { FS=OFS=\"\\t\" }\n{ ids[$2 FS $3][$1] }\nEND {\n    for (key in ids) {\n        printf \"%s\\t%s\", key, length(ids[key])\n        sep = OFS\n        for (i in ids[key]) {\n            printf \"%s%s\", sep, i\n            sep = \",\"\n        }\n        print \"\"\n    }\n}\n$ awk -f tst.awk file\ntern2   term3   1       id3\nterm1   term2   2       id1,id2\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4900025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7520a6589c667f76ee114001b705bd?s=128&d=identicon&r=PG", "display_name": "Vangelis Theodorakis", "link": "https://stackoverflow.com/users/4900025/vangelis-theodorakis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 34930822, "answer_count": 3, "score": 2, "last_activity_date": 1453410806, "creation_date": 1453396711, "last_edit_date": 1453398795, "question_id": 34930181, "link": "https://stackoverflow.com/questions/34930181/find-lines-with-the-same-columns-pairs-in-one-file", "title": "Find lines with the same columns&#39; pairs in one file", "body": "<p>Let's say I have this tab-delimited file</p>\n\n<pre><code>id1 term1 term2\nid2 term1 term2\nid3 tern2 term3\n</code></pre>\n\n<p>What I want to do is to count the number of the same column2 column3 occurrences alongside the IDs they refer to.</p>\n\n<p>So the new tab-delimited file will look like this:</p>\n\n<pre><code>term1 term2 2 id1,id2\nterm2 term3 1 id3\n</code></pre>\n\n<p>I have tried this one-liner, which is the closest I have come to the desired solution</p>\n\n<pre><code>awk '{count[$2,$3]++;} END {for (word in count) printf(\"%s\\t%s\\n\", word,count[word])}'\n</code></pre>\n\n<p>But what I get is this:</p>\n\n<pre><code>term1 term2 2\nterm2 term3 1\n</code></pre>\n\n<p>and between the terms a rectangle.</p>\n\n<p>Any ideas with Perl or awk or anything else would be lovely.</p>\n\n<p>At first I thought Perl would be better but a friend of me suggested awk. It was my first time with awk.</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1453397286, "post_id": 34930153, "comment_id": 57593738, "body": "The Tutorial Point tutorial you linked to makes no mention of strict or warnings, at least in the first 8 pages or so that I skimmed through. That makes it a bad tutorial. Run far away! Here&#39;s a list of <a href=\"http://perl-tutorial.org/\" rel=\"nofollow noreferrer\">more modern tutorials</a>."}, {"owner": {"reputation": 267, "user_id": 5490716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc5c4f219753e2eda596ebf72d78437c?s=128&d=identicon&r=PG&f=1", "display_name": "Emma Geller-Green", "link": "https://stackoverflow.com/users/5490716/emma-geller-green"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453397501, "post_id": 34930153, "comment_id": 57593878, "body": "@ThisSuitIsBlackNot - That page you linked to said that tutorialpoint shouldn&#39;t be trusted"}, {"owner": {"reputation": 267, "user_id": 5490716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc5c4f219753e2eda596ebf72d78437c?s=128&d=identicon&r=PG&f=1", "display_name": "Emma Geller-Green", "link": "https://stackoverflow.com/users/5490716/emma-geller-green"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453397532, "post_id": 34930153, "comment_id": 57593896, "body": "@ThisSuitIsBlackNot - I guess the perl documentation from the official site is the best way to go then."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453397726, "post_id": 34930153, "comment_id": 57594007, "body": "Have you seen <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a>? It&#39;s the official tutorial on Perl OO (part of the official documentation). If you have perldoc installed on your system, you can view it by running <code>perldoc perlootut</code>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453398819, "post_id": 34930153, "comment_id": 57594700, "body": "The two methods of <code>bless</code>-ing are equivalent. Perl has enough syntax to make it possible to do the same thing 100 different ways. See: <a href=\"https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">TMTOWTDI</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453399844, "post_id": 34931130, "comment_id": 57595328, "body": "What about the other 2/3 of the question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453399931, "post_id": 34931130, "comment_id": 57595376, "body": "@Matt Jacob, What&#39;s the best way of doing two equivalent things? They&#39;re equivalent!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453400030, "post_id": 34931130, "comment_id": 57595437, "body": "No, points 1 and 2: best practices for creating classes, and throwing exceptions from the constructor."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453400239, "post_id": 34931130, "comment_id": 57595551, "body": "1 and 3) As I just said, there&#39;s no best way of doing two equivalent things. 2) I missed that one. Added to answer."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453400497, "post_id": 34931130, "comment_id": 57595689, "body": "Ehhh... are 1 and 3 the same thing? I don&#39;t really think so. <code>bless</code> creates objects, but people create classes."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1453400186, "last_edit_date": 1453400186, "creation_date": 1453399690, "answer_id": 34931130, "question_id": 34930153, "link": "https://stackoverflow.com/questions/34930153/creating-a-class-in-perl/34931130#34931130", "title": "Creating a Class in Perl", "body": "<p>Perl doesn't have object constructors. <code>new</code> is just a method like any other, and methods can throw exceptions.</p>\n\n<hr>\n\n<p><code>bless</code> returns its first argument, so</p>\n\n<pre><code>bless($ref, $class);\nreturn $ref;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>return bless($ref, $class);\n</code></pre>\n\n<p>are equivalent. Both are proper.</p>\n\n<hr>\n\n<p>Personally, I create the object first, then add to it. This creates a parallel between the constructor in the base class</p>\n\n<pre><code>sub new {\n   my ($class, ...) = @_;\n   my $self = bless({}, $class);\n   $self-&gt;{...} = ...;\n   return $self;\n}\n</code></pre>\n\n<p>and constructors in child classes</p>\n\n<pre><code>sub new {\n   my ($class, ...) = @_;\n   my $self = $class-&gt;SUPER::new(...);\n   $self-&gt;{...} = ...;\n   return $self;\n}\n</code></pre>\n\n<p>But that's just my personal preference.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1453453617, "creation_date": 1453453617, "answer_id": 34942781, "question_id": 34930153, "link": "https://stackoverflow.com/questions/34930153/creating-a-class-in-perl/34942781#34942781", "title": "Creating a Class in Perl", "body": "<blockquote>\n  <ol>\n  <li>With that in mind, is the above code from Tutorial Point, the proper\n  best practice when creating a class in Perl?</li>\n  </ol>\n</blockquote>\n\n<p>There is nothing inherently wrong with the code from Tutorial Point. It creates a perfectly adequate class. However, as others have pointed out, the Tutorial Point site is not highly regarded and you would be well advised to look elsewhere for better tutorials.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>In other OO languages you can throw exceptions from inside the\n  constructor when a value is not set, could do you this as well\n  inside Perl?</li>\n  </ol>\n</blockquote>\n\n<p>In Perl code, you throw an exception by calling <a href=\"http://perldoc.perl.org/functions/die.html\" rel=\"nofollow\"><code>die()</code></a>. You catch an exception using <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\"><code>eval</code></a> and looking at the value of <code>$@</code>. Modules like <a href=\"https://metacpan.org/pod/Try::Tiny\" rel=\"nofollow\">Try::Tiny</a> can make this process look more like other languages.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Which is the proper way to bless?</li>\n  </ol>\n</blockquote>\n\n<p>The Perl slogan is \"There's More Than One Way To Do It\". Both of your code examples do the same thing. The only reasons to choose one over the other would be personal preference and in-house style.</p>\n\n<p>However, many Perl programmers have moved away from this style of OO programming and are, instead, using <a href=\"https://metacpan.org/pod/Moose\" rel=\"nofollow\">Moose</a> (or its cut-down relation <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow\">Moo</a>) for all of their OO code. You may well find that looking at these options makes your life easier.</p>\n"}], "owner": {"reputation": 267, "user_id": 5490716, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc5c4f219753e2eda596ebf72d78437c?s=128&d=identicon&r=PG&f=1", "display_name": "Emma Geller-Green", "link": "https://stackoverflow.com/users/5490716/emma-geller-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 34942781, "answer_count": 2, "score": 2, "last_activity_date": 1453453617, "creation_date": 1453396639, "question_id": 34930153, "link": "https://stackoverflow.com/questions/34930153/creating-a-class-in-perl", "title": "Creating a Class in Perl", "body": "<pre><code>package Person;\nsub new\n{\n    my $class = shift;\n    my $self = {\n        _firstName =&gt; shift,\n        _lastName  =&gt; shift,\n        _ssn       =&gt; shift,\n    };\n    # Print all the values just for clarification.\n    print \"First Name is $self-&gt;{_firstName}\\n\";\n    print \"Last Name is $self-&gt;{_lastName}\\n\";\n    print \"SSN is $self-&gt;{_ssn}\\n\";\n    bless $self, $class;\n    return $self;\n}\n</code></pre>\n\n<p>I got the above code from this <a href=\"http://www.tutorialspoint.com/perl/perl_oo_perl.htm\" rel=\"nofollow\">site</a>. </p>\n\n<p>From the official Perl site on Classes:</p>\n\n<blockquote>\n  <p>Perl does not provide any special syntax for class definitions. A\n  package is simply a namespace containing variables and subroutines.</p>\n</blockquote>\n\n<ol>\n<li><p>With that in mind, is the above code from Tutorial Point, the proper best practice when creating a class in Perl?</p></li>\n<li><p>In other OO languages you can throw exceptions from inside the constructor when a value is not set, could do you this as well inside Perl?</p></li>\n<li><p>Which is the proper way to bless?</p></li>\n</ol>\n\n<p>The code in tutorial point does this:</p>\n\n<pre><code>bless $self, $class;\n</code></pre>\n\n<p>But from the perl documentation:</p>\n\n<pre><code>  my $self = bless {\n      path =&gt; $path,\n      data =&gt; $data,\n  }, $class;\n  return $self;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "csv", "file-io"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453393113, "post_id": 34928693, "comment_id": 57590932, "body": "Your example does not have a case where there is no customer with a <b>Y</b>. Since there is only one label column, which customer column does it refrence? Please <a href=\"https://stackoverflow.com/posts/34928693/edit\">edit</a> your question and specify the requirements and add expected output. Also ammend your code to <code>use strict</code> and <code>use warnings</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1453393140, "post_id": 34928693, "comment_id": 57590953, "body": "How is the question different to <a href=\"http://stackoverflow.com/q/34809165/1030675\">stackoverflow.com/q/34809165/1030675</a> ?"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453394037, "post_id": 34928693, "comment_id": 57591606, "body": "I was referring there to a specific problem involving errors in syntax and semantics of an array of hashes of hashes. Apart from the data in the CSV file being the same, how else is it similar to this question? Do excuse my ignorance."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1453394354, "post_id": 34928693, "comment_id": 57591848, "body": "This feels like an XY problem."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453394552, "post_id": 34928693, "comment_id": 57591990, "body": "I wouldn&#39;t outright deny that. You&#39;re probably right. I have possibly fallen into that trap - I&#39;ll try to find a way out of it and make relevant edits when I can. Until then, any suggestions would be appreciated."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453395504, "post_id": 34928693, "comment_id": 57592618, "body": "Well, in Excel I&#39;d be looking at adding a column and just doing a <code>IF(B3=&quot;Y&quot;, B2, &quot;&quot;)</code> type logic. But it seems odd to be duplicating the data like this."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453396834, "post_id": 34929616, "comment_id": 57593463, "body": "Exactly what I need. Thank you!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467890079, "last_edit_date": 1467890079, "creation_date": 1453395106, "answer_id": 34929616, "question_id": 34928693, "link": "https://stackoverflow.com/questions/34928693/perl-inserting-values-into-specific-columns-of-csv-file/34929616#34929616", "title": "Perl: Inserting values into specific columns of CSV file", "body": "<p>It is always much better to post some usable test data than write a <em>something like this</em> question</p>\n\n<p>However, it looks like your data has no quoted fields or escaped characters, so it looks like you can just use <code>split</code> and <code>join</code> to process the CSV data</p>\n\n<p>Here's a sample Perl program that fulfils your requirement. The example output uses your data as it is. Each line of data has to be processed backwards so that the insertions don't affect the indices of elements that are yet to be processed</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nwhile ( &lt;DATA&gt; ) {\n\n    chomp;\n    my @fields = split /,/;\n\n    for ( my $i = $#fields; $i &gt; 1; --$i ) {\n\n        my $newval = \n            $. == 1               ? $fields[$i] :\n            lc $fields[$i] eq 'y' ? $fields[1] :\n            '';\n\n        splice @fields, $i, 0, $newval;\n    }\n\n    say join ',', @fields;\n}\n\n__DATA__\nS.No,Label,Customer1,Customer2,Customer3...\n1,label1,Y,N,Y\n2,label2,N,Y,N\n</code></pre>\n\n<h2>output</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>S.No,Label,Customer1,Customer1,Customer2,Customer2,Customer3...,Customer3...\n1,label1,label1,Y,,N,label1,Y\n2,label2,,N,label2,Y,,N\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453395336, "post_id": 34929683, "comment_id": 57592510, "body": "LOL @ <i>fruity</i>! List assignment is good. <code>split &#47;,&#47;</code> is better than <code>split &quot;,&quot;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453395553, "post_id": 34929683, "comment_id": 57592654, "body": "Your solution doesn&#39;t produce the <i>expected output</i>. Did I miss something?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453395680, "post_id": 34929683, "comment_id": 57592738, "body": "Trailing comma. Have opted to leave empty fields completely empty rather than blank strings, because I&#39;m pretty sure Excel doesn&#39;t care."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453395698, "post_id": 34929683, "comment_id": 57592753, "body": "Wha&#39;s the difference between the two modes of <code>split</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453395803, "post_id": 34929683, "comment_id": 57592827, "body": "There are no <i>two modes</i>. It&#39;s just that the first parameters is compiled as a regex pattern, and using slashes for delimiters best self-documents that. Imagine <code>split &#39;.&#39;, $string</code> which produces an empty list unless there are newlines in <code>$string</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453396054, "post_id": 34929683, "comment_id": 57593001, "body": "Technically, there are two &quot;modes&quot; with the special case of <code>split &#39; &#39;, $foo</code>, which is different than <code>split &#47; &#47;, $foo</code>. What Borodin said applies to every other case, though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453396189, "post_id": 34929683, "comment_id": 57593084, "body": "@ThisSuitIsBlackNot: Indeed. I cringe whenever I see <code>split &#47;\\s+&#47;, $string</code> as is almost always meant to be <code>split &#39; &#39;, $string</code>, which is identical to <code>$string =~ &#47;\\S+&#47;g</code>"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453396712, "post_id": 34929683, "comment_id": 57593405, "body": "Thank you. There are indeed no fruity characters, so this works fine! Much appreciated."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453396795, "post_id": 34929683, "comment_id": 57593439, "body": "@Borodin: Thank you for the information about the two &quot;modes&quot; (okay, not - two ways anyway) of <code>split</code>. That was interesting."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1453395930, "last_edit_date": 1453395930, "creation_date": 1453395298, "answer_id": 34929683, "question_id": 34928693, "link": "https://stackoverflow.com/questions/34928693/perl-inserting-values-into-specific-columns-of-csv-file/34929683#34929683", "title": "Perl: Inserting values into specific columns of CSV file", "body": "<p>Something like this maybe?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n#read the header row\nchomp( my ( $sn, $label, @customers ) = split( /,/, &lt;DATA&gt; ) );\n#double the 'customers' column headings (one is suffixed \"_label\")\nprint join( \",\", $sn, $label, map { $_ . \"_label\", $_ } @customers ), \"\\n\";\n\n#iterate data\nwhile (&lt;DATA&gt;) {\n   #strip trailing linefeed\n   chomp;\n   #extract fields with split - note breaks if you've quoted commas inline. \n   my ( $sn, $label, @row ) = split /,/;\n   print \"$sn,$label,\";\n   #iterate Y/N values, and either prints \"Y\" + label, or anything else + blank. \n   foreach my $value (@row) {\n      print join( \",\", $value eq \"Y\" ? $label : \"\", $value ),\",\";\n   }\n   print \"\\n\";\n}\n\n\n__DATA__\nS.No,Label,Customer1,Customer2,Customer3\n1,label1,Y,N,Y\n2,label2,N,Y,N\n</code></pre>\n\n<p>Assumes you don't have any fruity special characters (e.g. commas) in the fields, because it'll break if you do, and you might want to consider <code>Text::CSV</code> instead. </p>\n"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 1, "accepted_answer_id": 34929683, "answer_count": 2, "score": 1, "last_activity_date": 1467890079, "creation_date": 1453392636, "last_edit_date": 1453394234, "question_id": 34928693, "link": "https://stackoverflow.com/questions/34928693/perl-inserting-values-into-specific-columns-of-csv-file", "title": "Perl: Inserting values into specific columns of CSV file", "body": "<p>I have CSV data of the form:</p>\n\n<pre><code>S.No,Label,Customer1,Customer2,Customer3...\n1,label1,Y,N,Y\n2,label2,N,Y,N\n...\n</code></pre>\n\n<p>I need to reproduce the \"label\" to the <em>left</em> of \"customer\" columns marked with <strong>Y</strong> - and have nothing (<code>\"\"</code>) to the left of columns marked with <strong>N</strong>. </p>\n\n<p>Expected output:</p>\n\n<pre><code>S.No,Label,Customer1,Customer1,Customer2,Customer2,Customer3,Customer3...\n1,label1,label1,Y,\"\",N,label1,Y\n2,label2,\"\",N,label2,Y,\"\",N\n</code></pre>\n\n<p>When opened using Excel, it would look like this:</p>\n\n<pre><code>S.No   Label      Customer1   Customer1   Customer2   Customer2   Customer3   Customer3...\n   1   label1      label1        Y                       N        label1          Y\n   2   label2                    N         label2        Y                        N\n</code></pre>\n\n<p>The two leftmost columns, referring to S.No and the original \"Label\" column, are <strong>constant</strong>. </p>\n\n<p>What is the simplest way to do this? I tried the following code:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $nonIncludesFile = \"nonIncludes.csv\";\nopen(my $xfh, \"+&gt;\", $nonIncludesFile) or warn \"Unable to open $nonIncludesFile, $!\";\nchomp( my $header = &lt;$xfh&gt; );\nmy @names = split \",\", $header;\nmy @names1;\nmy @fields;\nmy @fields1;\nfor(my $j=0; $j&lt; scalar(@names); $j++)\n{\n    $names1[$j] = $names[$j];\n}\nwhile(&lt;$xfh&gt;)\n{\n    my $nonIncLine = $_;\n    $nonIncLine = chomp($nonIncLine);\n    @fields = split \",\", $nonIncLine;\n    next if $. == 1;                      #skip the first line\n\n    for(my $i = 0; $i &lt; scalar(@fields) -2; $i++)   #Number of \"customers\" = scalar(@fields) -2\n    {\n        $fields1[0] = $fields[0];\n        $fields1[1] = $fields[1];\n        if('Y' eq $fields[ $i + 2 ])\n        {\n            $fields1[$i+2] = 'Y';\n            substr(@fields1, $i + 1, 0, $fields[1]);   #insert the label to the left - HERE\n        }\n        else\n        {\n            $fields1[$i+2] = 'N';\n            substr(@fields1, $i + 1, 0, \"\");\n        }\n    }\n}\n\nprint $xfh @names1;\nprint $xfh @fields1;\n\nclose($xfh);\n</code></pre>\n\n<p>This however complains of \"substr outside of string\" at the line marked by \"HERE\".</p>\n\n<p>What am I doing wrong? And is there any simpler (and better) way to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453392545, "post_id": 34928143, "comment_id": 57590554, "body": "Where do you guys get the idea to call Perl subroutines with <code>&amp;</code>? That must be some ancient tutorial, as it hasn&#39;t been correct since the summer of 2002 when Perl v5.8 came out"}], "answers": [{"tags": [], "owner": {"reputation": 6727, "user_id": 2485624, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/dNes0.jpg?s=128&g=1", "display_name": "Harkirat Saluja", "link": "https://stackoverflow.com/users/2485624/harkirat-saluja"}, "is_accepted": false, "score": 0, "last_activity_date": 1453392443, "creation_date": 1453392443, "answer_id": 34928617, "question_id": 34928143, "link": "https://stackoverflow.com/questions/34928143/perl-read-every-line-of-a-text-file-search-for-a-content-and-if-not-found-replac/34928617#34928617", "title": "Perl Read every line of a text file search for a content and if not found replace it with new value", "body": "<p>Did you try using <strong>sed</strong> command for global search and replace? Just one line of shell command can change matched texts globally in the file.</p>\n\n<pre><code>sed -i \"s/text_to_change/text_to_put/g\" filename\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467563503, "last_edit_date": 1467563503, "creation_date": 1453393497, "answer_id": 34929023, "question_id": 34928143, "link": "https://stackoverflow.com/questions/34928143/perl-read-every-line-of-a-text-file-search-for-a-content-and-if-not-found-replac/34929023#34929023", "title": "Perl Read every line of a text file search for a content and if not found replace it with new value", "body": "<p>As far as I ca tell, you want to check whether a value for the given parameter already exists  in the file, and add it if not</p>\n\n<p>The main problem is that you are testing <em>every line</em> of the input file, and declaring that the parameter doesn't exist anywhere in the file each time it isn't found in one of the lines</p>\n\n<p>You should read through the <em>whole file</em> and test whether the parameter exists anywhere. If not then you need to rewrite the whole file with the new line added</p>\n\n<p>This should be close to what you need</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy $filepath = 'D:\\Perl Docs and installers\\Platform.log';\n\ndr_backup_configuration( $filepath, 'DRCOPY', 1000 );\n\nsub dr_backup_configuration {\n\n    my ( $filepath, $parameter, $value ) = @_;\n\n    my @log = do {\n        open my $fh, $filepath or die qq{Unable to open \"$filepath\" for input: $!};\n        &lt;$fh&gt;;\n    };\n    chomp @log;\n\n    my $found = grep { $_ =~ /^$parameter=(.+)/ } @log;\n\n    if ( $found ) {\n        warn qq{Parameter \"$parameter\" already exists with value \"$1\". No changes made.\\n};\n    }\n    else {\n\n        print qq{The initial parameter is \"$parameter\"\\n};\n        print qq{The initial value is \"$value\"\\n};\n\n        my $newline = \"$parameter=$value\";\n\n        open my $fh, '&gt;', $filepath or die qq{Unable to open \"$filepath\" for output: $!};\n        print $fh \"$_\\n\" for @log, $newline;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 5821944, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6a7951a617c081e5cecffe14665c0a5c?s=128&d=identicon&r=PG&f=1", "display_name": "stangada", "link": "https://stackoverflow.com/users/5821944/stangada"}, "is_accepted": false, "score": 0, "last_activity_date": 1453895215, "creation_date": 1453895215, "answer_id": 35036512, "question_id": 34928143, "link": "https://stackoverflow.com/questions/34928143/perl-read-every-line-of-a-text-file-search-for-a-content-and-if-not-found-replac/35036512#35036512", "title": "Perl Read every line of a text file search for a content and if not found replace it with new value", "body": "<p>Thank you all for your suggestions. Below is the code snippet that served my purpose;</p>\n\n<pre><code>             #!/usr/bin/perl\n\n            use strict;\n            use warnings;\n            use Config;\n            use Socket;\n            use POSIX qw(strftime);\n            use IO::Socket::INET;\n\n            my $filepath = 'D:\\Perl Docs and installers\\test.log';\n            my $parameter=\"\";\n            my $value=\"\";\n\n            dr_backup_configuration( $filepath, 'DRCOPY', '20');\n\n            sub dr_backup_configuration \n            {\n\n                my ( $filepath, $parameter, $value ) = @_;    \n                open my $file, $filepath or die \"Could not open file: $!\";\n                my @arrayTemp;\n                my $i=0;   \n                while (my $line=&lt;$file&gt;)\n                {\n                    if ($line=~/$parameter.*=/)\n                    {\n                        print \"The parameter is $parameter \\n\";\n                        my $expectedline=\"$parameter\".\"=\".\"$value\";         \n                        $line =~s/^\\s+|s+$//g;\n                        $expectedline =~s/^\\s+|s+$//g;\n                        chomp($line);\n                        chomp($expectedline);\n                        if ($line eq $expectedline)\n                        {\n                            print \"Paramter passed and the parameter available in the file is same \\n\";\n                            last;\n                        }\n                        else\n                        {\n                        print \"Paramter passed and the parameter available in the file are not same. Hence replacing the value \\n\";\n                        $line = \"$expectedline\\n\" ;\n                        }\n                    }        \n                      $arrayTemp[$i]=$line;   \n                      $i++;        \n                      print \"$line \\n\";                \n                }\n                open(my $fileWrite, \"&gt; $filepath\") or die \"$filepath\";\n                print $fileWrite @arrayTemp;\n                close $fileWrite;\n                close $file;              \n             }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5821944, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6a7951a617c081e5cecffe14665c0a5c?s=128&d=identicon&r=PG&f=1", "display_name": "stangada", "link": "https://stackoverflow.com/users/5821944/stangada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1467563503, "creation_date": 1453391223, "last_edit_date": 1453392428, "question_id": 34928143, "link": "https://stackoverflow.com/questions/34928143/perl-read-every-line-of-a-text-file-search-for-a-content-and-if-not-found-replac", "title": "Perl Read every line of a text file search for a content and if not found replace it with new value", "body": "<p>I want to write a Perl script to search for a line in a file. If the line is found the user can exit, and if not he has to replace the line with the value given.</p>\n\n<p>Below is the code. Everything is working fine, but the code is not replacing the content in the file.</p>\n\n<p>Can you please correct where I am going wrong?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Config;\nuse Socket;\nuse POSIX qw(strftime);\nuse IO::Socket::INET;\nuse FileHandle;\n\nmy $filepath = \"D\\:\\\\Perl Docs and installers\\\\Platform\\.log\";\n\n&amp;DRbackupconfiguration( $filepath, \"DRCOPY\", \"1000\" );\n\nsub DRbackupconfiguration {\n    my ( $filepath, $parameter, $value ) = @_;\n\n    my $status = \"True\";\n\n    open my $info, $filepath or die \"Could not open $filepath: $!\";\n\n    foreach ( my $line = &lt;$info&gt; ) {\n\n        if ( $line =~ /$parameter/ ) {\n\n            if ( $line ne $parameter . \"/=\" . $value ) {\n\n                print \"The initial parameter is $parameter \\n\";\n                print \"The initial value is $value \\n\";\n\n                $line = $parameter . \"=\" . $value;\n\n                open( FH, $filepath ) || die(\"-E- Unable to open \\n\");\n                print( FH $line );\n\n                print \"The parameter is $parameter \\n\";\n                print \"the line is $line \\n\";\n                close $info;\n\n                print \"$value \\n\";\n                print \"Value Changed \\n\";\n            }\n            else {\n                print \"Configuration already exists. Hence no changes made. /n\";\n            }\n        }\n        else {\n            print \"Parameter does not exist in the file \\n\";\n            my $status = \"False\";\n        }\n    }\n    close FH;\n}\n</code></pre>\n"}, {"tags": ["perl", "unpack"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453391342, "post_id": 34928095, "comment_id": 57589657, "body": "check the size of the packet?"}, {"owner": {"reputation": 1031, "user_id": 497669, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/306Pv.jpg?s=128&g=1", "display_name": "crsuarezf", "link": "https://stackoverflow.com/users/497669/crsuarezf"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453391601, "post_id": 34928095, "comment_id": 57589875, "body": "@choroba, I can&#39;t find doc for that, pelase, can you point me to the documentation."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1453392164, "last_edit_date": 1453392164, "creation_date": 1453391526, "answer_id": 34928264, "question_id": 34928095, "link": "https://stackoverflow.com/questions/34928095/unpack-function-requirement-in-perl/34928264#34928264", "title": "Unpack function requirement in Perl", "body": "<p>If those four fields are <em>all</em> that the packet contains then you can check the length of <code>$contents</code></p>\n\n<ul>\n<li><p>If the format is <code>nnnN</code> then the length will be 2 + 2 + 2 + 4 = 10 bytes</p></li>\n<li><p>If the format is <code>nNnN</code> then the length will be 2 + 4 + 2 + 4 = 12 bytes</p></li>\n</ul>\n\n<p>However, if there is data following those four fields then you must try the most common<code>unpack</code> template and check the result for sanity, using the alternative template if it fails</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1453403427, "last_edit_date": 1453403427, "creation_date": 1453398963, "answer_id": 34930934, "question_id": 34928095, "link": "https://stackoverflow.com/questions/34928095/unpack-function-requirement-in-perl/34930934#34930934", "title": "Unpack function requirement in Perl", "body": "<p>When the protocol changed in an incompatible manner, the version should have been changed as well. If so, you can use the following:</p>\n\n<pre><code>sub read_packet {\n  my $contents = shift;\n  (my $version, $contents) = unpack('na*', $contents);\n\n  if ($version &lt; X) {\n     return ( $version, unpack('nnN', $rest) );\n  } else {\n     return ( $version, unpack('NnN', $rest) );\n  }\n}\n</code></pre>\n\n<p>Otherwise, you'll have the base it on the size of the packet. However, that requires the size of the packet to be communicated, and not always the case. Fortunately, it does appear to be the case here, so you can use the following:</p>\n\n<pre><code>sub read_packet {\n  my $contents = shift;\n  return unpack(length($contents) &lt; 12 ? 'nnnN' : 'nNnN', $contents);\n}\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 497669, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/306Pv.jpg?s=128&g=1", "display_name": "crsuarezf", "link": "https://stackoverflow.com/users/497669/crsuarezf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 34928264, "answer_count": 2, "score": 2, "last_activity_date": 1497816558, "creation_date": 1453391123, "last_edit_date": 1497816558, "question_id": 34928095, "link": "https://stackoverflow.com/questions/34928095/unpack-function-requirement-in-perl", "title": "Unpack function requirement in Perl", "body": "<p>I have a function in Perl that reads a packet from a template in this way:</p>\n\n<pre><code>sub read_packet {\n  my $contents = shift;\n  my @decode = unpack('nnnN', $contents);\n\n  my $version = $decode[0];\n  my $identifier = $decode[1];\n  my $type = $decode[2];\n  my $size = $decode [3];\n\n  @contents = ($version, $identifier, $type, $size);\n\n  return (@contents);\n}\n</code></pre>\n\n<p>A change was required to the template in the unpack function. Now <strong>$identifier</strong> must support 32 bits, so according to PerlMonks: <em><a href=\"http://www.perlmonks.org/?node_id=224666\" rel=\"nofollow noreferrer\">Pack/Unpack Tutorial (aka How the System Stores Data)</a></em> (N) -> n,N    A 16/32 bit value in \"network\" (big-endian) order.</p>\n\n<p>So the function was rewritten doing this small change. Now, the program that sends the \"packet\" could be sending 16/32 bit values.\nThe customer required from me to support both 16/32 bit. What can I do to know when a packet contains an 16 or 32 bit identifier?</p>\n"}, {"tags": ["perl", "selenium", "centos", "headless"], "answers": [{"comments": [{"owner": {"reputation": 5616, "user_id": 1477299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rQIK0.jpg?s=128&g=1", "display_name": "rlib", "link": "https://stackoverflow.com/users/1477299/rlib"}, "edited": false, "score": 0, "creation_date": 1453398617, "post_id": 34929938, "comment_id": 57594573, "body": "I&#39;ll check Selenium::Firefox. But how do I set DISPLAY in the server?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 5616, "user_id": 1477299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rQIK0.jpg?s=128&g=1", "display_name": "rlib", "link": "https://stackoverflow.com/users/1477299/rlib"}, "edited": false, "score": 0, "creation_date": 1453399102, "post_id": 34929938, "comment_id": 57594862, "body": "You export it in the shell before you run the standalone server so that the standalone server gets it set in its environment."}, {"owner": {"reputation": 5616, "user_id": 1477299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rQIK0.jpg?s=128&g=1", "display_name": "rlib", "link": "https://stackoverflow.com/users/1477299/rlib"}, "edited": false, "score": 0, "creation_date": 1453399849, "post_id": 34929938, "comment_id": 57595332, "body": "Solved the problem. export DISPLAY=:99 &amp;&amp; java -jar selenium-server-standalone-2.49.0.jar"}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": true, "score": 2, "last_activity_date": 1453399953, "last_edit_date": 1453399953, "creation_date": 1453395993, "answer_id": 34929938, "question_id": 34928043, "link": "https://stackoverflow.com/questions/34928043/selenium-headless-does-not-run-on-centos-7-with-perl-no-display-specified/34929938#34929938", "title": "Selenium headless does not run on CentOS 7 with Perl, &quot;no display specified&quot;", "body": "<p>Is python using the standalone server or running firefox itself?</p>\n\n<p>If perl is using the server and the server is spawning firefox then you need <code>$DISPLAY</code> set in the server processes environment not the script's environment. (By running <code>export DISPLAY=:99; java -jar selenium-server-standalone-2.49.0.jar</code>or similar.)</p>\n\n<p>If you don't want to use the standalone server at all then <a href=\"http://search.cpan.org/~gempesaw/Selenium-Remote-Driver-0.2701/lib/Selenium/Firefox.pm\" rel=\"nofollow\">Selenium::Firefox</a> looks like it might be interesting.</p>\n"}], "owner": {"reputation": 5616, "user_id": 1477299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rQIK0.jpg?s=128&g=1", "display_name": "rlib", "link": "https://stackoverflow.com/users/1477299/rlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1583, "favorite_count": 0, "accepted_answer_id": 34929938, "answer_count": 1, "score": 1, "last_activity_date": 1453399953, "creation_date": 1453390978, "last_edit_date": 1453393612, "question_id": 34928043, "link": "https://stackoverflow.com/questions/34928043/selenium-headless-does-not-run-on-centos-7-with-perl-no-display-specified", "title": "Selenium headless does not run on CentOS 7 with Perl, &quot;no display specified&quot;", "body": "<p>I try to run headless Selenium on CentOS7:</p>\n\n<pre><code># cat /etc/os-release \nNAME=\"Red Hat Enterprise Linux Server\"\nVERSION=\"7.2 (Maipo)\"\n</code></pre>\n\n<p>I installed Xvfb and run it as</p>\n\n<pre><code># /usr/bin/Xvfb :99\n</code></pre>\n\n<p>I installed firefox:</p>\n\n<pre><code># firefox -v\nMozilla Firefox 38.5.0\n</code></pre>\n\n<p>and run it to check if it can be run at all:</p>\n\n<pre><code># export DISPLAY=:99\n# firefox\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code># firefox\nXlib:  extension \"RANDR\" missing on display \":99\".\nconsole.error: \n  [CustomizableUI]\n  Custom widget with id loop-button does not return a valid node\nconsole.error: \n  [CustomizableUI]\n  Custom widget with id loop-button does not return a valid node\nGLib-GIO-Message: Using the 'memory' GSettings backend.  Your settings will not be saved or shared with other applications.\n</code></pre>\n\n<p>Firefox seems to be running after that command:</p>\n\n<pre><code># ps aux | grep firefox\nroot     29476  7.3 14.9 852356 152256 pts/3   Sl+  10:30   0:03 /usr/lib64/firefox/firefox\n</code></pre>\n\n<p><strong>EDIT</strong>\nYes, it's running. Taking screenshot from the Xvfb by </p>\n\n<pre><code>DISPLAY=:99 import -window root -crop 1264x948+0+0  /tmp/screenshot.jpg\n</code></pre>\n\n<p>I can see\n<a href=\"https://i.stack.imgur.com/rVQnU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rVQnU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Now the problematic part. </p>\n\n<p>I installed Selenium Remote Driver for perl</p>\n\n<pre><code># cpanm Selenium::Remote::Driver\n</code></pre>\n\n<p>Then I ran standalone selenium driver:</p>\n\n<pre><code># java -jar selenium-server-standalone-2.49.0.jar \n</code></pre>\n\n<p>Now I run test script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Selenium::Remote::Driver;\nmy $driver = Selenium::Remote::Driver-&gt;new(browser_name=&gt;'firefox');\n$driver-&gt;get('http://www.google.com');\nprint $driver-&gt;get_title();\n$driver-&gt;quit();\n</code></pre>\n\n<p>After 45 second I get error from the driver:</p>\n\n<pre><code>Could not create new session: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:\nError: no display specified\n at (eval 89) line 510.\n</code></pre>\n\n<p>Seems like firefox launched by the driver does not see DISPLAY environment variable. I try to add it from the script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Selenium::Remote::Driver;\n$ENV{DISPLAY}=\":99\";\nmy $driver = Selenium::Remote::Driver-&gt;new(browser_name=&gt;'firefox');\n$driver-&gt;get('http://www.google.com');\nprint $driver-&gt;get_title();\n$driver-&gt;quit();\n</code></pre>\n\n<p>It does not help, the previous error remains. \nWhat do I do?</p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>I tried the current setup with Python. All works.</p>\n\n<pre><code># pip install selenium\n</code></pre>\n\n<p>And used the following test script:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\ndriver = webdriver.Firefox()\ndriver.get(\"http://www.python.org\")\nf = open('ptn-sel.txt', 'w')\nf.write(driver.title)\ndriver.close()\nf.close()\n</code></pre>\n\n<p>I understand it's problem of Perl driver.... Any suggestions?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453385631, "post_id": 34926109, "comment_id": 57585569, "body": "Pretty much everywhere you said list, you meant array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1453385780, "post_id": 34926109, "comment_id": 57585674, "body": "You shouldn&#39;t be using prototypes, and if you had <code>use strict</code> and <code>use warnings &#39;all&#39;</code> in place as you should you would have seen <code>main::myfunc() called too early to check prototype</code>"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453386873, "post_id": 34926251, "comment_id": 57586509, "body": "Wow! That makes such a huge difference.  Nailed all the issues in about 5 minutes afterwards."}, {"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453386907, "post_id": 34926251, "comment_id": 57586539, "body": "Only thing to note was that i had to prototype before myfunc because of the recursion."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453390331, "post_id": 34926251, "comment_id": 57588989, "body": "@ChristenDen: You shouldn&#39;t be prototyping at all. As it stands you are saying that <code>myfunc</code> takes no parameters at all, so if you prototype it like that you will get fatal compilation errors <code>Too many arguments for main::myfunc</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453390332, "post_id": 34926251, "comment_id": 57588990, "body": "I think you&#39;re confusing &quot;declaring a function&quot; (<code>sub myfunc;</code>) and &quot;using a prototype&quot; (<code>()</code>). You shouldn&#39;t use prototypes, and you woudn&#39;t have to declare it if you hadn&#39;t used a prototype."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453402135, "post_id": 34926251, "comment_id": 57596639, "body": "@ikegami: A prototype must be applied as part of a subroutine declaration, and I think your comment is misleading. <i>Using a prototype</i> isn&#39;t just <code>()</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453403536, "post_id": 34926251, "comment_id": 57597485, "body": "Ah but it is. Remove the <code>()</code>, and you&#39;re no longer using a prototype."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1453386035, "creation_date": 1453386035, "answer_id": 34926251, "question_id": 34926109, "link": "https://stackoverflow.com/questions/34926109/perl-pointers-issue-with-list-of-list/34926251#34926251", "title": "Perl Pointers Issue with List of List", "body": "<p>Put your main code after your sub definitions, or least wrap it in curlies to limit the scope of the variables declared therein. (I do both.)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings qw( all );                 &lt;-- You should always use this.\n\n{                                       &lt;-- Added this.\n    my @listylist;\n    my @list = (0..50);\n    push @listylist,\\@list;\n    my @list2 = (0..100);\n    push @listylist,\\@list2;\n    myfunc(\\@listylist);\n}                                       &lt;-- Added this.\n\nsub myfunc()\n{\n    my ($listgroup) = @_;\n    my $f = &lt;&gt;;\n    my @newlistoflists;\n    foreach my $list (@$listgroup)\n    {\n        my $size = scalar @list;\n        my $half = int($size/2);\n        print \"Size of Array -&gt; {\".$size.\"}\\n\";\n        my @left = grep {$_ &lt; $half} @list;\n        $size = scalar @left;\n        print \"Size of Halved Array -&gt; {\".$size.\"}\\n\";\n        push @newlistoflists, \\@left;\n    }\n    myfunc(\\@newlistoflists);\n}\n</code></pre>\n\n<p><code>perl</code> will now spot your error.</p>\n\n<pre><code>main::myfunc() called too early to check prototype at a.pl line 10.\nGlobal symbol \"@list\" requires explicit package name at a.pl line 20.\nGlobal symbol \"@list\" requires explicit package name at a.pl line 23.\nExecution of a.pl aborted due to compilation errors.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467563605, "last_edit_date": 1467563605, "creation_date": 1453386337, "answer_id": 34926362, "question_id": 34926109, "link": "https://stackoverflow.com/questions/34926109/perl-pointers-issue-with-list-of-list/34926362#34926362", "title": "Perl Pointers Issue with List of List", "body": "<p>It's not clear what result you want, as you're looking only at the <code>@left</code> side of each subarray</p>\n\n<p>Here are the main problems with your code</p>\n\n<ul>\n<li><p>You're using a prototype for <code>myfunc</code> that says the subroutine takes no parameters. But you have coded a call to that subroutine first, so the prototype is ignored. With <code>use warnings 'all'</code> in place you would have seen</p>\n\n<blockquote>\n  <p>main::myfunc() called too early to check prototype         </p>\n</blockquote></li>\n<li><p>Using <code>@list</code>, which is the globally-declared array defined at the top of your program. I think you must mean the dereferenced array <code>@$list</code></p></li>\n<li><p>Using <code>grep {$_ &lt; $half} @list</code>, which filters according to the <em>contents</em> of the array, rather than the indexes of the elements. Initially those are the same in your arrays <code>@list</code> and <code>@list2</code>, but as soon as you have split them once, the second half of <code>@list</code> contains 25 to 50, which is different from the indexes</p></li>\n<li><p>There is no exit to your recursion. Halving an array size of one will result in an empty array which is still passed back into the subroutine for more processing</p></li>\n</ul>\n\n<p>Here's what I think you meant to write. I have added a call to <a href=\"http://metacpan.org/module/Data::Dump\" rel=\"nofollow\"><code>Data::Dump</code></a> to show the parameter that is being passed at each level of recursion</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse Data::Dump;\n\nmy @listylist = ( [ 0 .. 50 ], [ 0 .. 100 ] );\n\nmyfunc(\\@listylist);\n\nsub myfunc {\n\n    my ($listgroup) = @_;\n\n    dd $listgroup;\n\n    my @newlistoflists;\n\n    for my $list (@$listgroup) {\n\n        my $size = scalar @$list;\n        print \"Size of Array -&gt; {$size}\\n\";\n\n        my $half = int($size/2);\n\n        my @left = @{$list}[0 .. $half-1];\n        $size = scalar @left;\n        print \"Size of Halved Array -&gt; {$size}\\n\";\n\n        push @newlistoflists, \\@left if $size &gt; 0;\n    }\n\n    myfunc(\\@newlistoflists) if @newlistoflists;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[[0 .. 50], [0 .. 100]]\nSize of Array -&gt; {51}\nSize of Halved Array -&gt; {25}\nSize of Array -&gt; {101}\nSize of Halved Array -&gt; {50}\n[[0 .. 24], [0 .. 49]]\nSize of Array -&gt; {25}\nSize of Halved Array -&gt; {12}\nSize of Array -&gt; {50}\nSize of Halved Array -&gt; {25}\n[[0 .. 11], [0 .. 24]]\nSize of Array -&gt; {12}\nSize of Halved Array -&gt; {6}\nSize of Array -&gt; {25}\nSize of Halved Array -&gt; {12}\n[[0 .. 5], [0 .. 11]]\nSize of Array -&gt; {6}\nSize of Halved Array -&gt; {3}\nSize of Array -&gt; {12}\nSize of Halved Array -&gt; {6}\n[[0, 1, 2], [0 .. 5]]\nSize of Array -&gt; {3}\nSize of Halved Array -&gt; {1}\nSize of Array -&gt; {6}\nSize of Halved Array -&gt; {3}\n[[0], [0, 1, 2]]\nSize of Array -&gt; {1}\nSize of Halved Array -&gt; {0}\nSize of Array -&gt; {3}\nSize of Halved Array -&gt; {1}\n[[0]]\nSize of Array -&gt; {1}\nSize of Halved Array -&gt; {0}\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34926251, "answer_count": 2, "score": -1, "last_activity_date": 1467563605, "creation_date": 1453385592, "question_id": 34926109, "link": "https://stackoverflow.com/questions/34926109/perl-pointers-issue-with-list-of-list", "title": "Perl Pointers Issue with List of List", "body": "<p>I am trying to loop through a list of lists always taking the middle and then halving the list and doing this over and over.  </p>\n\n<p>(There will be way more to it than this, but I made this up to illustrate my struggle)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\n\nmy @listylist;\nmy @list = (0..50);\npush @listylist,\\@list;\nmy @list2 = (0..100);\npush @listylist,\\@list2;\nmyfunc(\\@listylist);\n\nsub myfunc()\n{\n    my ($listgroup) = @_;\n    my $f = &lt;&gt;;\n    my @newlistoflists;\n    foreach my $list (@$listgroup)\n    {\n        my $size = scalar @list;\n        my $half = int($size/2);\n        print \"Size of Array -&gt; {\".$size.\"}\\n\";\n        my @left = grep {$_ &lt; $half} @list;\n        $size = scalar @left;\n        print \"Size of Halved Array -&gt; {\".$size.\"}\\n\";\n        push @newlistoflists, \\@left;\n    }\n    myfunc(\\@newlistoflists);\n}\n</code></pre>\n\n<p>The Output is as Follows:</p>\n\n<p>First Iteration:</p>\n\n<pre><code>Size of Array -&gt; {51}\nSize of Halved Array -&gt; {25}\nSize of Array -&gt; {51}            \"I am expecting to see 101\"\nSize of Halved Array -&gt; {25}     \"I am expecting 50\"\n</code></pre>\n\n<p>Second Iteration</p>\n\n<pre><code>Size of Array -&gt; {51}            \"Should be 25 (half of 51)\"\nSize of Halved Array -&gt; {25}     \"Should then be 12\"\nSize of Array -&gt; {51}            \"Should be 51 (half of 101\"\nSize of Halved Array -&gt; {25}     \"Should then be 25\"\n</code></pre>\n\n<p>I am thinking it is the pointer syntax in the foreach line, but every variation I try either gives the same result or an error.</p>\n\n<p>What really confuses me is why the 2nd iteration is the same as the first.</p>\n\n<p>Thank-you in advance.</p>\n"}, {"tags": ["perl", "field", "separator"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1453382108, "post_id": 34924513, "comment_id": 57583026, "body": "How can you tell if something other than a tab is a field separator?"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1453521890, "post_id": 34924513, "comment_id": 57650101, "body": "I agree with ikegami -- please define what are not acceptable field separators.  After those are defined, you can search the file to make sure those unacceptable field separators do not exist."}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453530784, "post_id": 34924513, "comment_id": 57651767, "body": "semicolon(;),comma(,)"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453530240, "post_id": 34924946, "comment_id": 57651653, "body": "Thanks a lot.if ($line !~ /^[^\\t]+\\t[^\\t]+$/) it works...But I have another issue. If I have more than one tab means number of field grater than 2  I should display error message incorrect number of field.Since I am checking  for one tab it doesn&#39;t satisfy my  else  part when I am trying to show the number of field greater than 2.If am giving condition if my array contain less than two field then it should do all the validation for field else should display incorrect number of field"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "reply_to_user": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453532562, "post_id": 34924946, "comment_id": 57652181, "body": "@puspa, the above regex only matches if there is <i>exactly one tab in the line</i>, so it should cover that case, too."}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453532962, "post_id": 34924946, "comment_id": 57652260, "body": "Please let me know if no of field separator grater than one tab then I should display the error message in correct number of field."}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453533031, "post_id": 34924946, "comment_id": 57652274, "body": "But I want to display the error message incorrect number of field ...Not invalid separator if tab more than 1"}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453625820, "post_id": 34924946, "comment_id": 57677314, "body": "Hi Dan really great help and thanks a lot for hep....Sorry to disturb you again.Instead of find exactly one  tab I would like to find out exactly one semicolon(;).If semicolon found then I would like to mark as invalid record.If you will be  able to help me it will be great.I have to deliver this script on Thursday."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "reply_to_user": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1453655851, "post_id": 34924946, "comment_id": 57686964, "body": "It should be easy to replace <code>\\t</code> with semicolon in the above regex.  If you appreciate the help, you could upvote/accept the answer.  Thanks."}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1454409085, "post_id": 34924946, "comment_id": 58020346, "body": "Thanks.I didn&#39;t replace I just use your first line which is finding out exactly one tab."}, {"owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1454587190, "post_id": 34924946, "comment_id": 58116817, "body": "Hi dan,If you know about this please help me.My input file having so many record.Some of the record which is failing due to database check I am inserting into  a temp table and setting the flag=1.I want to get the line number of those record I am inserting into temp table.The record I am not inserting into temp table I am getting line number easily since I am splitting the file using same function.For database insert I am using different function.How  I will get line number for the record I am inserting into temp  table."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "reply_to_user": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "edited": false, "score": 0, "creation_date": 1454746880, "post_id": 34924946, "comment_id": 58192007, "body": "I answered your question.  If you have new question(s) they should be posted as new questions, not asked in the comments.  Also, people will be more likely to help you if you upvote and accept helpful answers to your previous questions."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "is_accepted": false, "score": 0, "last_activity_date": 1453382303, "creation_date": 1453382303, "answer_id": 34924946, "question_id": 34924513, "link": "https://stackoverflow.com/questions/34924513/regarding-the-validation-of-the-input-file-separator-in-perl/34924946#34924946", "title": "Regarding the validation of the input file separator in Perl", "body": "<p>A simple way to validate the file would be to check that each line had a single tab.</p>\n\n<pre><code>while (my $line = &lt;$file&gt;)\n{\n    if ($line !~ /^[^\\t]+\\t[^\\t]+$/)\n    { \n        #Handle malformed line.\n    }\n}\n</code></pre>\n\n<p>If you plan to split the line into elements anyway, you could use the split output for error checking:</p>\n\n<pre><code>while (my $line = &lt;$file&gt;)\n{\n    my @fields = split \"\\t\", $line;\n\n    if (@fields != 2)\n    {\n       #Line did not split into two elements, indicating improperly formed line.\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5005716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/044fdeda43b8b0c5f53f000376f0e8a9?s=128&d=identicon&r=PG&f=1", "display_name": "puspa", "link": "https://stackoverflow.com/users/5005716/puspa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1453382303, "creation_date": 1453381095, "last_edit_date": 1453381968, "question_id": 34924513, "link": "https://stackoverflow.com/questions/34924513/regarding-the-validation-of-the-input-file-separator-in-perl", "title": "Regarding the validation of the input file separator in Perl", "body": "<p>I have csv input file in Perl which is tab separated.\nI would like to add a check if it find anything other than tab as field separator then it  should through error message. I am new to perl I don't know how to check.</p>\n\n<p>Example of my input file, my file having only two field:</p>\n\n<pre><code>10001027^I1000102713921-1274^M$\n10010121^I1001012113921-1234^M$\n10000104^I10010126139211-9999^M$\n10010119^I10010126139211-9999^M$\n</code></pre>\n"}, {"tags": ["perl", "proxy", "lwp"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453384386, "post_id": 34922965, "comment_id": 57584637, "body": "Look at the credentials method in LWP"}, {"owner": {"reputation": 21, "user_id": 5341827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbb00d96ddb44dbecd84e3d0a4a1935?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/5341827/alex"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453386831, "post_id": 34922965, "comment_id": 57586479, "body": "$ua-&gt;credentials(   &#39;uri:80&#39;,   &#39;web_server_usage_reports&#39;,   &#39;_login&#39; =&gt; &#39;_pass&#39; ); tried - no luck"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453391010, "post_id": 34922965, "comment_id": 57589422, "body": "What URL are you using in Chrome? Is it the same as <code>$url</code> in your Perl code? Please show the Chrome proxy configuration. I suggest you show the IT department a wget command line that doesn&#39;t work for you. They are likely to be able to spot the problem"}, {"owner": {"reputation": 21, "user_id": 5341827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbb00d96ddb44dbecd84e3d0a4a1935?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/5341827/alex"}, "edited": false, "score": 0, "creation_date": 1453447538, "post_id": 34922965, "comment_id": 57614098, "body": "url in Chrome is exactly the same as in Perl, curl, wget. IT would not co-operate as they don\u2019t want to get involved in something which is not a standard setup.  proxy setting in Chrome/IE is <a href=\"http://autoproxy.xxx.xxx.xxx/yyy.pac\" rel=\"nofollow noreferrer\">autoproxy.xxx.xxx.xxx/yyy.pac</a> but in Perl I am using proxy url given to me by IT"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1453463034, "post_id": 34922965, "comment_id": 57623121, "body": "Have you tried to hide/fake browser info? <code>$ua-&gt;agent(&#39;&#39;);</code>  [A wild guess/try]"}, {"owner": {"reputation": 21, "user_id": 5341827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbb00d96ddb44dbecd84e3d0a4a1935?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/5341827/alex"}, "edited": false, "score": 0, "creation_date": 1453721620, "post_id": 34922965, "comment_id": 57711282, "body": "$ua-&gt;agent(&#39;&#39;); - still same problem.."}], "owner": {"reputation": 21, "user_id": 5341827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbb00d96ddb44dbecd84e3d0a4a1935?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/5341827/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453390861, "creation_date": 1453376813, "last_edit_date": 1592644375, "question_id": 34922965, "link": "https://stackoverflow.com/questions/34922965/getting-a-page-via-lwpuseragent-with-proxy-also-fails-with-wget-and-curl-bro", "title": "Getting a page via LWP::UserAgent with proxy. Also fails with wget and curl. Browser works fine", "body": "<p>I had a very simply script (see sample) downloading my report from our internal server  for months. Then IT made some changes to the infrastructure, and ever since I can not get this script working any more.</p>\n<p>I can fetch the file using Chrome or Internet Explorer, but not with Perl or Python. Even wget and curl fail.</p>\n<ul>\n<li><p>If I provide incorrect proxy credential then I rightfully get <code>407 Proxy Authentication</code>.</p>\n</li>\n<li><p>If I set the timeout to 60 seconds then I get <code>500 read timeout</code>.</p>\n</li>\n<li><p>If I set the timeout to 90 seconds, I get <code>503 Service Unavailable</code>. Curl returns <code>network timeout</code>.</p>\n</li>\n</ul>\n<p>The IT department insist that if a browser works then there is no problem. Am I missing something else?</p>\n<h2>Perl sample</h2>\n<pre><code>require LWP::UserAgent;\n\nmy $url =  &quot;http://xxx.xxx.xxx.xxx/StandardReport.aspx?itemid=yyyy&amp;date=dd-mm-yyyy&amp;adjustments&amp;xml=1&quot;;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(90);\n$ua-&gt;proxy(['http', 'ftp'], 'http://my_user:my_password@proxy_uri:8080');\n\nmy $response = $ua-&gt;get($url);\n \nif ( $response-&gt;is_success ) {\n    print $response-&gt;decoded_content;  \n}\nelse {\n    die $response-&gt;status_line;\n}\n</code></pre>\n"}, {"tags": ["perl", "imap"], "comments": [{"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1453377977, "post_id": 34922871, "comment_id": 57580149, "body": "&quot;our&quot; is not what you want, leave that out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1453378753, "post_id": 34922871, "comment_id": 57580632, "body": "But is inside a block scope. If i turn into <code>my</code> i cant use anywhere unless i declare them at the start of the script"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453378911, "post_id": 34922871, "comment_id": 57580737, "body": "How many lines do you have in the file? If just one, no loop is needed, just <code>my $line = &lt;$FH&gt;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "edited": false, "score": 0, "creation_date": 1453379731, "post_id": 34922871, "comment_id": 57581296, "body": "Right now, there is only one line, but the intent as i said at the start of my question is to create a bulk downloader. Our company have many emails with different domains."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1453383905, "post_id": 34922871, "comment_id": 57584269, "body": "@nwildner, why exactly would you need to use them outside this loop? Right now your code is doing something you&#39;re hardly intended - detailed in answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1453390668, "post_id": 34922871, "comment_id": 57589204, "body": "@OlegV.Volkov. I&#39;ll put everything inside the loop to make things easy. Since the file have just one line, it will not matter. I will edit my question also to keep things more clear"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "edited": false, "score": 0, "creation_date": 1453390541, "post_id": 34925474, "comment_id": 57589123, "body": "No. Problem still persists even after adding this block inside the <code>foreach</code>"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1453392571, "post_id": 34925474, "comment_id": 57590568, "body": "@nwildner, well post related source with line numbers then. Right now I don&#39;t know what exactly line 43 is."}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1453383810, "creation_date": 1453383810, "answer_id": 34925474, "question_id": 34922871, "link": "https://stackoverflow.com/questions/34922871/using-a-global-variable-as-parameter-to-mailimapclient/34925474#34925474", "title": "Using a global variable as parameter to Mail::IMAPClient", "body": "<p>I suspect that there's an empty line at end your file. This loop you have in question loops over all lines and file, remembers <em>only</em> last one and then constructs <code>IMAPClient</code> with that data. If you construct it with empty account/password you are likely to get errors like those you've mentioned.</p>\n\n<p>Drop <code>our</code> and use <code>my</code> and move processing into the loop to, because I understand that's exactly what you want - do IMAP processing with every account.</p>\n\n<pre><code>foreach my $line ( @lines ) {\n    my @credentials = split( /\\s+/, $line );\n    my  $domain = $credentials[0];\n    my  $account = $credentials[1];\n    my  $password = $credentials[2];\n\n    my $imap = Mail::IMAPClient-&gt;new(\n        Server   =&gt; 'mail.example.com',\n        User     =&gt; $account,\n        Password =&gt; $password,\n        Uid      =&gt; 1,\n    )\n\n    # Rest of code for each mailbox\n    # ....\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "is_accepted": true, "score": 0, "last_activity_date": 1453479601, "creation_date": 1453479601, "answer_id": 34951265, "question_id": 34922871, "link": "https://stackoverflow.com/questions/34922871/using-a-global-variable-as-parameter-to-mailimapclient/34951265#34951265", "title": "Using a global variable as parameter to Mail::IMAPClient", "body": "<p>Weird. Problem solved on <code>el5</code>(CentOS) after upgrading perl to <code>pel-5.8.8-43.el5_11</code> and the libs to <code>perl-Mail-IMAPClient-3.37-1.el5</code> and <code>perl-Email-MIME-1.903-2.el5.rf</code>. Don\u00b4t know witch of them was causing the problem but, it solved.</p>\n\n<p>Code still the same:</p>\n\n<pre><code>  # Faz a conex\u00e3o com a conta. Se n\u00e3o der certo passa pra pr\u00f3xima\n  my $imap = Mail::IMAPClient-&gt;new(\n    Server   =&gt; $mailserver,\n    User     =&gt; $account,\n    Password =&gt; $password,\n    Uid      =&gt; 1) or ($log_script-&gt;log(\"$hora: Erro de autentica\u00e7\u00e3o na conta $account. Verifique as credenciais\") and next);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2231796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 34951265, "answer_count": 2, "score": 1, "last_activity_date": 1453479601, "creation_date": 1453376549, "last_edit_date": 1453391144, "question_id": 34922871, "link": "https://stackoverflow.com/questions/34922871/using-a-global-variable-as-parameter-to-mailimapclient", "title": "Using a global variable as parameter to Mail::IMAPClient", "body": "<p>I'm trying to make a mail bulk downloader with perl, that will connect on multiple accounts and download it\u00b4s attachments, but i\u00b4m still learning this language. I\u00b4m having an issue with credentials stored in a text file reading. Whenever i pass the parameters as string, i can connect to my account and retrieve information about unread emails. Snippet:</p>\n\n<pre><code>my $imap = Mail::IMAPClient-&gt;new(\n  Server   =&gt; 'mail.example.com',\n  User     =&gt; 'nicolas',\n  Password =&gt; 'password',\n  Uid      =&gt; 1,\n) or die \"Erro ao conectar na conta\";\n</code></pre>\n\n<p>It connects, and using <code>my @mails = ($imap-&gt;unseen);</code> with a <code>foreach</code> loop i can get all my unseen mails on a list.</p>\n\n<p>However, if i try to get my credentials from a file and assign to a variable and further use this variable as credentials to <code>$imap</code> it fails:</p>\n\n<pre><code>foreach my $line ( @lines ) {\n  my @credentials = split( /\\s+/, $line );\n  my $domain = $credentials[0];\n  my $account = $credentials[1];\n  my $password = $credentials[2];\n\nmy $imap = Mail::IMAPClient-&gt;new(\n  Server   =&gt; 'mail.example.com',\n  User     =&gt; $account,\n  Password =&gt; $password,\n  Uid      =&gt; 1,) \n}\n</code></pre>\n\n<p>When i run the script i get this message:</p>\n\n<pre><code>$ ./folder_list.pl\nCan't call method \"select\" on an undefined value at ./folder_list.pl line 43.\n</code></pre>\n\n<p>If i <code>print \"$account\", \"$password\";</code> i can check its values, but cant use them as parameters of <code>$imap</code>. What am i missing here?</p>\n"}]