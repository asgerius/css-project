[{"tags": ["xml", "perl", "mixed-content"], "answers": [{"tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": false, "score": 2, "last_activity_date": 1572472016, "creation_date": 1572472016, "answer_id": 58634099, "question_id": 58633129, "link": "https://stackoverflow.com/questions/58633129/analyse-xml-file-for-mixed-content-assuming-no-xsd-schema-file-available/58634099#58634099", "title": "Analyse XML file for mixed content assuming no XSD/Schema file available", "body": "<p>The XPath query <code>boolean(//*[text()[normalize-space()] and *])</code> returns true if there is an element that has both element and non-whitespace text children.</p>\n\n<p>For a streamed algorithm you'll need a stack; at every level in the stack you need to track whether you have encountered non-whitespace text children and/or element children at that level. Not too difficult to achieve with a SAX-like API, though I wouldn't know where to start in Perl.</p>\n\n<p>With XSLT 3.0 streaming I think it can be done with xsl:iterate:</p>\n\n<pre><code>&lt;xsl:mode streamable=\"yes\"/&gt;\n&lt;xsl:template match=\"*\"&gt;\n  &lt;xsl:iterate select=\"node()\"&gt;\n    &lt;xsl:param name=\"found-element\" select=\"false()\"/&gt;\n    &lt;xsl:param name=\"found-text\" select=\"false()\"/&gt;\n    &lt;xsl:on-completion&gt;\n      &lt;xsl:if test=\"$found-element and $found-text\"&gt;\n        &lt;out&gt;Found mixed content!!&lt;/out&gt;\n      &lt;/xsl:if&gt;\n    &lt;/xsl:on-completion&gt;\n    &lt;xsl:apply-templates select=\".\"/&gt;\n    &lt;xsl:next-iteration&gt;\n      &lt;xsl:with-param name=\"found-element\" select=\"$found-element or self::*\"/&gt;\n      &lt;xsl:with-param name=\"found-text\" select=\"$found-text or self::text()[normalize-space()]\"/&gt;\n    &lt;/xsl:next-iteration&gt;\n  &lt;xsl:iterate&gt;\n&lt;/xsl:template&gt;\n</code></pre>\n\n<p>There's plenty of room for improving this; currently it will give you lots of messages if there's lots of mixed content.</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572472016, "creation_date": 1572467058, "question_id": 58633129, "link": "https://stackoverflow.com/questions/58633129/analyse-xml-file-for-mixed-content-assuming-no-xsd-schema-file-available", "title": "Analyse XML file for mixed content assuming no XSD/Schema file available", "body": "<p>A simple question, but I can't seem to find the answer anywhere... Is there any existing method in perl (or perhaps a command line tool) to check if a given XML file contains mixed content?</p>\n\n<p>I just need something that tells me if mixed content is present our not. Although any details if mixed content found would be a bonus. If anything exists then processing the file without loading it completely in memory would also be better as the files I need to analyse are 100's of MBs and even in some cases a few GBs. If nothing exists then I'll start looking at writing something myself.</p>\n\n<p>All the above assumes that an XSD/Schema file is not available for the given XML file.</p>\n"}, {"tags": ["perl", "compilation"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1572460409, "post_id": 58631609, "comment_id": 103570506, "body": "It&#39;s not an internal function - it&#39;s accessible globally as <code>Foo::bar</code>, but the <code>use Foo</code> will run both the compilation phase (redefining bar if anything was previously defined there) and the runtime phase of Foo. The only thing I can think of would be a deeply hacky <code>@INC</code> hook to modify how Foo is loaded."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1572461413, "post_id": 58631609, "comment_id": 103570949, "body": "You want to redefine the function altogether, yes?  (Not just change part of its operation, like that print?)  Are there specific reasons for redefining before runtime?  The title asks for that but the question body doesn&#39;t say/elaborate.  Sure you can do that but I am not sure of the purpose so whether it would fit."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1572461806, "post_id": 58631609, "comment_id": 103571103, "body": "@zdim yes there are reasons. I want be able to redefine a function used in another module before the runtime phase of that module. Exactly what Grinnz suggested."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572461889, "post_id": 58631609, "comment_id": 103571135, "body": "@Grinnz Is that title better?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572464655, "post_id": 58631609, "comment_id": 103572258, "body": "Tried another revision to the title..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1572465123, "post_id": 58631609, "comment_id": 103572468, "body": "A hack is required. <code>require</code> (and thus <code>use</code>) both compiles and executes the module before returning. Same goes for <code>eval</code>. <code>eval</code> can&#39;t be used to compile code without also executing it."}], "answers": [{"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 3, "creation_date": 1572461742, "post_id": 58631900, "comment_id": 103571070, "body": "Wellll that&#39;s a hack if I&#39;ve ever seen one."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 2, "creation_date": 1572461938, "post_id": 58631900, "comment_id": 103571153, "body": "This isn&#39;t possible without a hack. If the subroutine were called in another subroutine, it would be much easier."}, {"owner": {"reputation": 139, "user_id": 1277321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002797767106/picture?type=large", "display_name": "szr", "link": "https://stackoverflow.com/users/1277321/szr"}, "edited": false, "score": 0, "creation_date": 1572476266, "post_id": 58631900, "comment_id": 103576327, "body": "That will only work if the module being loaded has warnings enabled; Foo.pm doesn&#39;t enable warnings and thus this will never be called."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 139, "user_id": 1277321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002797767106/picture?type=large", "display_name": "szr", "link": "https://stackoverflow.com/users/1277321/szr"}, "edited": false, "score": 0, "creation_date": 1572478381, "post_id": 58631900, "comment_id": 103576856, "body": "@szr: So call it with <code>perl -w</code>."}, {"owner": {"reputation": 139, "user_id": 1277321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002797767106/picture?type=large", "display_name": "szr", "link": "https://stackoverflow.com/users/1277321/szr"}, "edited": false, "score": 0, "creation_date": 1572626606, "post_id": 58631900, "comment_id": 103628837, "body": "@choroba: Yes, that would work, as -w will enable warnings everywhere, iirc. But my point is that you can&#39;t be sure how a user will run that. For example, one-liners typically run sans strictures or warnings."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1572461111, "creation_date": 1572461111, "answer_id": 58631900, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58631900#58631900", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>This will emit some warnings, but prints 7:</p>\n\n<pre><code>sub Foo::bar {}\nBEGIN {\n    $SIG{__WARN__} = sub {\n        *Foo::bar = sub { 7 };\n    };\n}\n</code></pre>\n\n<p>First, we define <code>Foo::bar</code>. It's value will be redefined by the declaration in Foo.pm, but the \"Subroutine Foo::bar redefined\" warning will be triggered, which will call the signal handler that redefines the subroutine again to return 7.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 8, "last_activity_date": 1572464866, "last_edit_date": 1572464866, "creation_date": 1572464088, "answer_id": 58632509, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58632509#58632509", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>Since the only options here are going to be deeply hacky, what we really want here is to run code after the subroutine has been added to the <code>%Foo::</code> stash:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# bless a coderef and run it on destruction\npackage RunOnDestruct {\n  sub new { my $class = shift; bless shift, $class }\n  sub DESTROY { my $self = shift; $self-&gt;() }\n}\n\nuse Variable::Magic 0.58 qw(wizard cast dispell);\nuse Scalar::Util 'weaken';\nBEGIN {\n  my $wiz;\n  $wiz = wizard(store =&gt; sub {\n    return undef unless $_[2] eq 'bar';\n    dispell %Foo::, $wiz; # avoid infinite recursion\n    # Variable::Magic will destroy returned object *after* the store\n    return RunOnDestruct-&gt;new(sub { no warnings 'redefine'; *Foo::bar = sub { 7 } }); \n  });\n  cast %Foo::, $wiz;\n  weaken $wiz; # avoid memory leak from self-reference\n}\n\nuse lib::relative '.';\nuse Foo;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 9, "last_activity_date": 1572583904, "last_edit_date": 1572583904, "creation_date": 1572468397, "answer_id": 58633412, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58633412#58633412", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>A hack is required because <code>require</code> (and thus <code>use</code>) both compiles and executes the module before returning.</p>\n\n<p>Same goes for <code>eval</code>. <code>eval</code> can't be used to compile code without also executing it.</p>\n\n<p>The least intrusive solution I've found would be to override <code>DB::postponed</code>. This is called before evaluating a compiled required file. Unfortunately, it's only called when debugging (<code>perl -d</code>).</p>\n\n<p>Another solution would be to read the file, modify it and evaluate the modified file, kinda like the following does:</p>\n\n<pre><code>use File::Slurper qw( read_binary );\n\neval(read_binary(\"Foo.pm\") . &lt;&lt;'__EOS__')  or die $@;\npackage Foo {\n   no warnings qw( redefine );\n   sub bar { 7 }\n}\n__EOS__\n</code></pre>\n\n<p>The above doesn't properly set <code>%INC</code>, it messes up the file name used by warnings and such, it doesn't call <code>DB::postponed</code>, etc. The following is a more robust solution:</p>\n\n<pre><code>use IO::Unread  qw( unread );\nuse Path::Class qw( dir );\n\nBEGIN {     \n   my $preamble = '\n      UNITCHECK {\n         no warnings qw( redefine );\n         *Foo::bar = sub { 7 };\n      }\n   ';    \n\n   my @libs = @INC;\n   unshift @INC, sub {\n      my (undef, $fn) = @_;\n      return undef if $_[1] ne 'Foo.pm';\n\n      for my $qfn (map dir($_)-&gt;file($fn), @libs) {\n         open(my $fh, '&lt;', $qfn)\n            or do {\n               next if $!{ENOENT};\n               die $!;\n            };\n\n         unread $fh, \"$preamble\\n#line 1 $qfn\\n\";\n         return $fh;\n      }\n\n      return undef;\n   };\n}\n\nuse Foo;\n</code></pre>\n\n<p>I used <code>UNITCHECK</code> (which is called after compilation but before execution) because I prepended the override (using <code>unread</code>) rather than reading in the whole file in and appending the new definition. If you want to use that approach, you can get a file handle to return using</p>\n\n<pre><code>open(my $fh_for_perl, '&lt;', \\$modified_code);\nreturn $fh_for_perl;\n</code></pre>\n\n<p>Kudos to @Grinnz for mentioning <code>@INC</code> hooks.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572479877, "post_id": 58635167, "comment_id": 103577168, "body": "<code>BEGIN { *Foo::bar = sub () { 7 } }</code> is better written as <code>sub Foo::bar() { 7 }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1572480132, "post_id": 58635167, "comment_id": 103577225, "body": "Re &quot;<i>Perl won&#39;t redefine a &quot;constant&quot; subroutine</i>&quot;, That&#39;s not true either. The sub does get redefined to 42 even when it&#39;s a constant sub. The reason it works here is because the call gets inlined before the redefinition. If Evan had used the more common <code>sub bar { 42 } my $baz = bar();</code> instead of <code>my $baz = bar(); sub bar { 42 }</code>, it wouldn&#39;t work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572480166, "post_id": 58635167, "comment_id": 103577240, "body": "Even in the very narrow situation it works, this is very noisy when warnings are used. (<code>Prototype mismatch: sub Foo::bar () vs none at Foo.pm line 5.</code> and <code>Constant subroutine bar redefined at Foo.pm line 5.</code>)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1572479902, "last_edit_date": 1572479902, "creation_date": 1572479589, "answer_id": 58635167, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58635167#58635167", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>If the <code>sub bar</code> inside <code>Foo.pm</code> has a different prototype than an existing <code>Foo::bar</code> function, Perl won't overwrite it? That seems to be the case, and makes the solution pretty simple:</p>\n\n<pre><code># test.pl\nBEGIN { *Foo::bar = sub () { 7 } }\nuse Foo;\n</code></pre>\n\n<p>or kind of the same thing</p>\n\n<pre><code># test.pl\npackage Foo { use constant bar =&gt; 7 };\nuse Foo;\n</code></pre>\n\n<hr>\n\n<p>Update: no, the reason this works is that Perl won't redefine a \"constant\" subroutine (with prototype <code>()</code>), so this is only a viable solution if your mock function is constant.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 12300527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6896aa098064dbbf8572b95cc065cfb2?s=128&d=identicon&r=PG&f=1", "display_name": "gordonfish", "link": "https://stackoverflow.com/users/12300527/gordonfish"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1572547309, "post_id": 58635645, "comment_id": 103603690, "body": "@ikegami Thanks, I have made the changes that you recommended. Good catch."}], "tags": [], "owner": {"reputation": 83, "user_id": 12300527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6896aa098064dbbf8572b95cc065cfb2?s=128&d=identicon&r=PG&f=1", "display_name": "gordonfish", "link": "https://stackoverflow.com/users/12300527/gordonfish"}, "is_accepted": false, "score": 5, "last_activity_date": 1572553707, "last_edit_date": 1572553707, "creation_date": 1572484056, "answer_id": 58635645, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58635645#58635645", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>Here is a solution that combines hooking the module loading process with the readonly-making capabilities of the Readonly module:</p>\n\n<pre><code>$ cat Foo.pm \npackage Foo {\n  my $baz = bar();\n  sub bar { 42 };  ## Overwrite this\n  print $baz;      ## Before this is executed\n}\n\n\n$ cat test.pl \n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse lib qw(.);\n\nuse Path::Tiny;\nuse Readonly;\n\nBEGIN {\n    my @remap = (\n        '$Foo::{bar} =&gt; \\&amp;mybar'\n    );\n\n    my $pre = join ' ', map \"Readonly::Scalar $_;\", @remap;\n\n    my @inc = @INC;\n\n    unshift @INC, sub {\n        return undef if $_[1] ne 'Foo.pm';\n\n        my ($pm) = grep { $_-&gt;is_file &amp;&amp; -r } map { path $_, $_[1] } @inc\n           or return undef;\n\n        open my $fh, '&lt;', \\($pre. \"#line 1 $pm\\n\". $pm-&gt;slurp_raw);\n        return $fh;\n    };\n}\n\n\nsub mybar { 5 }\n\nuse Foo;\n\n\n$ ./test.pl   \n5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 12300527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6896aa098064dbbf8572b95cc065cfb2?s=128&d=identicon&r=PG&f=1", "display_name": "gordonfish", "link": "https://stackoverflow.com/users/12300527/gordonfish"}, "is_accepted": false, "score": 3, "last_activity_date": 1572847480, "last_edit_date": 1572847480, "creation_date": 1572561939, "answer_id": 58652059, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58652059#58652059", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>I have revised my solution here, so that it no longer relies on <code>Readonly.pm</code>, after learning that I had missed a very simple alternative, based on <a href=\"https://stackoverflow.com/a/58653080/1277321\">m-conrad's answer</a>, which I have reworked into the modular approach that I had started here.</p>\n\n<p><strong>Foo.pm</strong> (<em>Same as in the opening post</em>)</p>\n\n<pre><code>package Foo {\n  my $baz = bar();\n  sub bar { 42 };  ## Overwrite this\n  print $baz;      ## Before this is executed\n}\n# Note, even though print normally returns true, a final line of 1; is recommended.\n</code></pre>\n\n<p><strong>OverrideSubs.pm</strong> <em>Updated</em></p>\n\n<pre><code>package OverrideSubs;\n\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\nuse List::Util qw(first);\n\nsub import {\n    my (undef, %overrides) = @_;\n    my $default_pkg = caller; # Default namespace when unspecified.\n\n    my %remap;\n\n    for my $what (keys %overrides) {\n        ( my $with = $overrides{$what} ) =~ s/^([^:]+)$/${default_pkg}::$1/;\n\n        my $what_pkg  = $what =~ /^(.*)\\:\\:/ ? $1 : $default_pkg;\n        my $what_file = ( join '/', split /\\:\\:/, $what_pkg ). '.pm';\n\n        push @{ $remap{$what_file} }, \"*$what = *$with\";\n    }\n\n    my @inc = grep !ref, @INC; # Filter out any existing hooks; strings only.\n\n    unshift @INC, sub {\n        my $remap = $remap{ $_[1] } or return undef;\n        my $pre = join ';', @$remap;\n\n        my $pm = first { $_-&gt;is_file &amp;&amp; -r } map { path $_, $_[1] } @inc\n            or return undef;\n\n        # Prepend code to override subroutine(s) and reset line numbering.\n        open my $fh, '&lt;', \\( $pre. \";\\n#line 1 $pm\\n\". $pm-&gt;slurp_raw );\n        return $fh;\n   };\n}\n\n1;\n</code></pre>\n\n<p><strong>test-run.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse lib qw(.); # Needed for newer Perls that typically exclude . from @INC by default.\n\nuse OverrideSubs\n    'Foo::bar' =&gt; 'mybar';\n\nsub mybar { 5 } # This can appear before or after 'use OverrideSubs', \n                # but must appear before 'use Foo'.\n\nuse Foo;\n</code></pre>\n\n<p><strong><em>Run and output:</em></strong></p>\n\n<pre><code>$ ./test-run.pl \n5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 12300527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6896aa098064dbbf8572b95cc065cfb2?s=128&d=identicon&r=PG&f=1", "display_name": "gordonfish", "link": "https://stackoverflow.com/users/12300527/gordonfish"}, "edited": false, "score": 0, "creation_date": 1572836200, "post_id": 58653080, "comment_id": 103672104, "body": "Very nice solution. I had initially tried something like this when I first started, but was missing the injection part + BEGIN aspect that you nicely had connected. I was able to nicely incorporate this into the <a href=\"https://stackoverflow.com/a/58652059/1277321\">modular version</a> of my answer that I had posted previously."}, {"owner": {"reputation": 381, "user_id": 1959394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a84eeac201c5311ef058b26ac24ae7a?s=128&d=identicon&r=PG", "display_name": "dataless", "link": "https://stackoverflow.com/users/1959394/dataless"}, "edited": false, "score": 0, "creation_date": 1572928526, "post_id": 58653080, "comment_id": 103704139, "body": "Your module is the clear winner for design, but I like it when stackoverflow also provides a minimalist answer as well."}], "tags": [], "owner": {"reputation": 131, "user_id": 4569694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n-pcBs_Pl3M/AAAAAAAAAAI/AAAAAAAAAE0/LP134Jfywxo/photo.jpg?sz=128", "display_name": "M Conrad", "link": "https://stackoverflow.com/users/4569694/m-conrad"}, "is_accepted": false, "score": 1, "last_activity_date": 1572595896, "last_edit_date": 1572595896, "creation_date": 1572571829, "answer_id": 58653080, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase/58653080#58653080", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>Lets have a Golf contest!</p>\n\n<pre><code>sub _override { 7 }\nBEGIN {\n  my ($pm)= grep -f, map \"$_/Foo.pm\", @INC or die \"Foo.pm not found\";\n  open my $fh, \"&lt;\", $pm or die;\n  local $/= undef;\n  eval \"*Foo::bar= *main::_override;\\n#line 1 $pm\\n\".&lt;$fh&gt; or die $@;\n  $INC{'Foo.pm'}= $pm;\n}\nuse Foo;\n</code></pre>\n\n<p>This just prefixes the module's code with a replacement of the method, which will be the first line of code that runs after the compilation phase and before the execution phase.</p>\n\n<p>Then, fill in the <code>%INC</code> entry so that future loads of <code>use Foo</code> don't pull in the original.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 3, "answer_count": 7, "score": 21, "last_activity_date": 1572847480, "creation_date": 1572459860, "last_edit_date": 1572464574, "question_id": 58631609, "link": "https://stackoverflow.com/questions/58631609/overwriting-a-function-defined-in-a-module-but-before-used-in-its-runtime-phase", "title": "Overwriting a function defined in a module but before used in its runtime phase?", "body": "<p>Let's take something very simple,</p>\n\n<pre><code># Foo.pm\npackage Foo {\n  my $baz = bar();\n  sub bar { 42 };  ## Overwrite this\n  print $baz;      ## Before this is executed\n}\n</code></pre>\n\n<p>Is there anyway that I can from <code>test.pl</code> run code that changes what <code>$baz</code> is set to and causes <code>Foo.pm</code> to print something else to the screen?</p>\n\n<pre><code># maybe something here.\nuse Foo;\n# maybe something here\n</code></pre>\n\n<p>Is it possible with the compiler phases to force the above to print <code>7</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 5, "creation_date": 1572449067, "post_id": 58628622, "comment_id": 103564688, "body": "<code>$w</code> will never equal <code>$wMax</code> because you are setting <code>$wMax</code> to a random float value between 5 and 20. You may want <code>int rand $limit</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1572449146, "post_id": 58628622, "comment_id": 103564745, "body": "Always use strict and warnings (not -w)."}, {"owner": {"reputation": 693, "user_id": 564870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/119f774b39fce2072d94530a83ea1617?s=128&d=identicon&r=PG&f=1", "display_name": "slashlos", "link": "https://stackoverflow.com/users/564870/slashlos"}, "edited": false, "score": 0, "creation_date": 1572451638, "post_id": 58628622, "comment_id": 103566191, "body": "Arrgh; darn floats; I think that&#39;s it!  Yup; wrapping rand result with int() did the trick: <code>C l l l l l l l l l l l l l l l l.  C l l l l l l l l l.  C l l l l l l l l l l l l l l l l l.  C l l l l l l l l l l l l l l l l l l. Cllllllllllllllll. Clllllllll. Clllllllllllllllll. Cllllllllllllllllll.</code> `"}], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 7129042, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IYO8pUufKSk/AAAAAAAAAAI/AAAAAAAAArc/SRi4pdCFxpI/photo.jpg?sz=128", "display_name": "Hiren Raj", "link": "https://stackoverflow.com/users/7129042/hiren-raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1572495331, "creation_date": 1572495331, "answer_id": 58636832, "question_id": 58628622, "link": "https://stackoverflow.com/questions/58628622/perl-paragraph-generator-losing-punctuation/58636832#58636832", "title": "Perl paragraph generator losing punctuation", "body": "<p>you have forgot to do type conversion </p>\n\n<pre><code>int(rand $limit);\n</code></pre>\n\n<p>this should fix your issue. \nwithout this your code will never execute for </p>\n\n<pre><code>$w == $wMax\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 564870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/119f774b39fce2072d94530a83ea1617?s=128&d=identicon&r=PG&f=1", "display_name": "slashlos", "link": "https://stackoverflow.com/users/564870/slashlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 58636832, "answer_count": 1, "score": 0, "last_activity_date": 1572495331, "creation_date": 1572448849, "question_id": 58628622, "link": "https://stackoverflow.com/questions/58628622/perl-paragraph-generator-losing-punctuation", "title": "Perl paragraph generator losing punctuation", "body": "<p>I need to generate paragraph(s) of random text. At the end of each sentence I'd like to add punctuation, and as a sentence the starting word should be capitalized. I have this so far:</p>\n\n<pre><code>#!/usr/local/bin/perl -w -U\nuse English;\n\nsub cWord {\n  return \"C\";\n}\nsub lWord {\n  return \"l\";\n}\n\n  my $paras = 3;\n  my $limit = 15;\n  my ($w, $wMax);\n  my @words;\n\n  my $pMax = 3 + rand $paras;\n  for (my $p=0; $p&lt;$pMax; $p++)\n  {\n    $wMax = 5 + rand $limit;\n    for ($w=0; $w&lt;=$wMax; $w++)\n    {\n      push @words, (!$w ? &amp;cWord : &amp;lWord) . ($w == $wMax ? '. ' : '');\n    }\n  }\n\n  print join ' ', @words;\n\n  print \"\\n\";\n\n  print @words;\n</code></pre>\n\n<p>It seems the '.' sentence trailer is getting clipped?</p>\n\n<pre><code>2% perl ./f.pl\nC l l l l l l l l l C l l l l l l l l l l C l l l l l l l l l l l C l l l l l l l l l l \nl l C l l l l l l l l l l l l l l l l l l C l l l l l l l l\n\nClllllllllCllllllllllClllllllllllCllllllllllllCllllllllllllllllllCllllllll2% \n</code></pre>\n"}, {"tags": ["r", "regex", "perl"], "comments": [{"owner": {"reputation": 43983, "user_id": 5635580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/00uoL.jpg?s=128&g=1", "display_name": "Sotos", "link": "https://stackoverflow.com/users/5635580/sotos"}, "edited": false, "score": 1, "creation_date": 1572446500, "post_id": 58627760, "comment_id": 103563139, "body": "add word boundaries...? (<code>\\\\b table \\\\b</code>)"}], "owner": {"reputation": 1409, "user_id": 1892957, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f850d9fac4c65721d539188d598ef651?s=128&d=identicon&r=PG&f=1", "display_name": "val", "link": "https://stackoverflow.com/users/1892957/val"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1572446571, "answer_count": 0, "score": 2, "last_activity_date": 1572448488, "creation_date": 1572446163, "last_edit_date": 1572448488, "question_id": 58627760, "link": "https://stackoverflow.com/questions/58627760/r-grepl-matches-with-perl-and-spaces", "closed_reason": "Duplicate", "title": "r - grepl matches with perl and spaces", "body": "<p>this example from here (<a href=\"https://stackoverflow.com/questions/44152970/r-grepl-to-find-multiple-strings-exists/44153507\">r- grepl to find multiple strings exists</a>)  helps me match combinations of words:</p>\n\n<pre><code>pat &lt;- c(\"instance\", \"percentage\", \"element\", \"character\")\n\nlongperl &lt;- grepl(paste0(\"(?=.*\", pat, \")\", collapse=\"\"), Text2, perl=TRUE)\n</code></pre>\n\n<p>However I'm trying to match the word <code>table</code> (along with other words) and using the above is also returning words that contain the pattern <code>table</code>, e.g., <code>marketable</code>. \nHow do I force the grepl snippet to only include the whole word <code>table</code> and not where <code>table</code> is part of another word?</p>\n\n<p>I've tried these without success:</p>\n\n<pre><code>pat &lt;- c(\" table\", \"instance\", \"percentage\", \"element\", \"character\") # add literal space before `table`\n\npat &lt;- c(\"\\\\stable\", \"instance\", \"percentage\", \"element\", \"character\") # add whitespace regex before `table`\n</code></pre>\n"}, {"tags": ["oracle", "docker", "perl"], "comments": [{"owner": {"reputation": 2463, "user_id": 1423507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352121cf562146b074ef3860dedcf4ca?s=128&d=identicon&r=PG", "display_name": "masseyb", "link": "https://stackoverflow.com/users/1423507/masseyb"}, "edited": false, "score": 1, "creation_date": 1572440658, "post_id": 58625849, "comment_id": 103559577, "body": "Ref. the <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">doc</a>: &quot;If the database is defined in a <code>TNSNAMES.ORA</code> file, you can use the service name given in the file&quot; i.e.: <code>$dbh = DBI-&gt;connect(&#39;dbi:Oracle:host=foobar;sid=DB;port=1521&#39;, &#39;scott&#47;tiger&#39;, &#39;&#39;);</code>. Ref. your  <code>tnsnames.ora</code> configuration the <code>SID</code> is <code>ORAC</code>."}, {"owner": {"reputation": 2463, "user_id": 1423507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352121cf562146b074ef3860dedcf4ca?s=128&d=identicon&r=PG", "display_name": "masseyb", "link": "https://stackoverflow.com/users/1423507/masseyb"}, "edited": false, "score": 0, "creation_date": 1572520833, "post_id": 58625849, "comment_id": 103589815, "body": "Cool, will add it as an answer, might help someone else someday."}], "answers": [{"tags": [], "owner": {"reputation": 2463, "user_id": 1423507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352121cf562146b074ef3860dedcf4ca?s=128&d=identicon&r=PG", "display_name": "masseyb", "link": "https://stackoverflow.com/users/1423507/masseyb"}, "is_accepted": true, "score": 2, "last_activity_date": 1572520947, "creation_date": 1572520947, "answer_id": 58642296, "question_id": 58625849, "link": "https://stackoverflow.com/questions/58625849/how-can-i-check-connection-to-oracle-db-12c-using-a-perl-script/58642296#58642296", "title": "how can i check connection to oracle db 12c using a perl script", "body": "<p>Ref. the <a href=\"https://metacpan.org/pod/DBD::Oracle\" rel=\"nofollow noreferrer\">doc</a>: \"If the database is defined in a <code>TNSNAMES.ORA</code> file, you can use the service name given in the file.\"</p>\n\n<p>For example: <code>$dbh = DBI-&gt;connect('dbi:Oracle:host=foobar;sid=DB;port=1521', 'scott/tiger', '');</code></p>\n\n<p>The service identifier is <code>ORAC</code> referring to your <code>tnsnames.ora</code> entry.</p>\n"}], "owner": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 58642296, "answer_count": 1, "score": 2, "last_activity_date": 1573464034, "creation_date": 1572440091, "last_edit_date": 1573464034, "question_id": 58625849, "link": "https://stackoverflow.com/questions/58625849/how-can-i-check-connection-to-oracle-db-12c-using-a-perl-script", "title": "how can i check connection to oracle db 12c using a perl script", "body": "<p>I have an oracle db 12c running in a container. \nWhat i am trying do is check connection to a oracle db  using a perl script running in another container using the following code</p>\n\n<pre><code>#!/usr/bin/perl\nuse DBI;\n\n$\\=\"\\n\";\n\nprint \"Connecting to DB..\";\n\n\nmy $dbh = DBI-&gt;connect('dbi:Oracle:ORCLCDB',  'books_admin', 'MyPassword') or\n          die \"Cannot connect to DB =&gt; \" . DBI-&gt;errstr;\n</code></pre>\n\n<p>where books_admin is my username and MyPassword is my password ORCLCDB is my database name \nBut when i ran this script im getting the following error </p>\n\n<pre><code>\"ORA-12154: TNS:could not resolve the connect identifier specifiedenter\"\n</code></pre>\n\n<p>This is my tnsname.ora file place in perl container.</p>\n\n<pre><code>ORAC =\n (DESCRIPTION =\n(ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1522))\n(CONNECT_DATA =\n  (SERVER = DEDICATED)\n  (SERVICE_NAME = ORCLCDB)\n)\n )\n\nLISTENER_ORAC =\n(ADDRESS = (PROTOCOL = TCP)(HOST = oracle)(PORT = 1522))\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "edited": false, "score": 0, "creation_date": 1572440643, "post_id": 58625509, "comment_id": 103559567, "body": "It&#39;s called <code>reference</code>. <a href=\"https://www.tutorialspoint.com/perl/perl_references.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/perl/perl_references.htm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572446230, "post_id": 58627733, "comment_id": 103562977, "body": "Neither of these are references; it&#39;s a constant string, and so Perl reuses the constant string. This optimization is normally invisible since you can&#39;t change a constant string."}, {"owner": {"reputation": 756, "user_id": 1973791, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26980772186955ff1b476b11e3097ca3?s=128&d=identicon&r=PG", "display_name": "Ecuador", "link": "https://stackoverflow.com/users/1973791/ecuador"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572449421, "post_id": 58627733, "comment_id": 103564903, "body": "They are references to strings. The &#39;\\&#39; in front... Perl doesn&#39;t &quot;reuse the constant string&quot;, I am not even sure what you mean by that."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1572452813, "post_id": 58627733, "comment_id": 103566875, "body": "It doesn&#39;t seem Data::Dumper does this for constant strings - it&#39;s more likely the OP is incorrectly written."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572479667, "post_id": 58627733, "comment_id": 103577128, "body": "Re &quot;<i>The default behavior is more useful for visual inspection.</i>&quot;, The default output is usually harder to read. However, the default output more accurately represents the data structure, and it more accurately recreates the data structure if <code>eval</code>ed."}, {"owner": {"reputation": 756, "user_id": 1973791, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26980772186955ff1b476b11e3097ca3?s=128&d=identicon&r=PG", "display_name": "Ecuador", "link": "https://stackoverflow.com/users/1973791/ecuador"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1573124725, "post_id": 58627733, "comment_id": 103783272, "body": "@Grinnz ah, you were talking about the OP. I switched the example to use references as I assumed the OP messed up the example a bit - as what he posted can&#39;t actually happen."}], "tags": [], "owner": {"reputation": 756, "user_id": 1973791, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26980772186955ff1b476b11e3097ca3?s=128&d=identicon&r=PG", "display_name": "Ecuador", "link": "https://stackoverflow.com/users/1973791/ecuador"}, "is_accepted": true, "score": 2, "last_activity_date": 1572446077, "creation_date": 1572446077, "answer_id": 58627733, "question_id": 58625509, "link": "https://stackoverflow.com/questions/58625509/why-does-datadumper-show-values-that-link-to-other-values/58627733#58627733", "title": "Why does Data::Dumper show values that link to other values?", "body": "<p>No need to be confused, the value of param2 is simply a reference that was encountered before in the structure, so Data::Dumper by default shows it as the reference it is. You can set <code>$Data::Dumper::Deepcopy = 1;</code> and have Data::Dumper print the actual values instead if you need it for something.\nE.g.</p>\n\n<pre><code>my $foo = 'foo';\n\nmy $test = {\n   param1 =&gt; \\$foo,\n   param2 =&gt; \\$foo\n};\n\nprint Dumper($test);\n</code></pre>\n\n<p>will print out</p>\n\n<pre><code>$VAR1 = {\n          'param2' =&gt; \\'foo',\n          'param1' =&gt; $VAR1-&gt;{'param2'}\n        };\n</code></pre>\n\n<p>But if you start with something like:</p>\n\n<pre><code>use Data::Dumper;\n$Data::Dumper::Deepcopy = 1;\n</code></pre>\n\n<p>Your output will be:</p>\n\n<pre><code>$VAR1 = {\n          'param1' =&gt; \\'foo',\n          'param2' =&gt; \\'foo'\n        };\n</code></pre>\n\n<p>The default behavior is more useful for visual inspection.</p>\n"}], "owner": {"reputation": 57, "user_id": 11367206, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_XbNUArcr4E/AAAAAAAAAAI/AAAAAAAAelE/m9lKPkQR36Y/photo.jpg?sz=128", "display_name": "Steve S.", "link": "https://stackoverflow.com/users/11367206/steve-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58627733, "answer_count": 1, "score": 0, "last_activity_date": 1572446340, "creation_date": 1572438836, "last_edit_date": 1572446340, "question_id": 58625509, "link": "https://stackoverflow.com/questions/58625509/why-does-datadumper-show-values-that-link-to-other-values", "title": "Why does Data::Dumper show values that link to other values?", "body": "<p>using Data Dumper after parsing some JSON data, I got something like this:</p>\n\n<pre><code>$VAR1 = {\n   param1 =&gt; 'foo',\n   param2 =&gt; $VAR1-&gt;{param1}\n};\n</code></pre>\n\n<p>Do I get it right, that param2 is a linked to param1 value?</p>\n\n<p>What is this called? Dynamic hash? </p>\n\n<p>Thanks in Advance, Steve</p>\n"}, {"tags": ["regex", "perl", "replace", "raku"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1572428328, "post_id": 58622217, "comment_id": 103552819, "body": "Do you want a solution for perl5 or perl6?"}, {"owner": {"reputation": 18795, "user_id": 7424470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7234043bdcf2c31017de8acd72b52f6b?s=128&d=identicon&r=PG", "display_name": "Elizabeth Mattijsen", "link": "https://stackoverflow.com/users/7424470/elizabeth-mattijsen"}, "edited": false, "score": 1, "creation_date": 1572428647, "post_id": 58622217, "comment_id": 103553002, "body": "The <code>Str</code>, the <code>s:g</code>, the <code>$0</code> and the <code>spurt</code> give away that a Raku solution is wanted, I think.  :-)"}, {"owner": {"reputation": 9550, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1572431325, "post_id": 58622217, "comment_id": 103554478, "body": "I&#39;m new to both perls, but slightly drawn to perl6."}], "answers": [{"comments": [{"owner": {"reputation": 9550, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1572431619, "post_id": 58622965, "comment_id": 103554644, "body": "Thanks. Why do you prefer the method form?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "reply_to_user": {"reputation": 9550, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 1, "creation_date": 1572433698, "post_id": 58622965, "comment_id": 103555775, "body": "Methods can be chained. Also the method form makes it more clear the replacement is &quot;just a string&quot;."}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 5, "last_activity_date": 1572430511, "last_edit_date": 1572430511, "creation_date": 1572430172, "answer_id": 58622965, "question_id": 58622217, "link": "https://stackoverflow.com/questions/58622217/conditional-subexpression-replacement-using-regular-expressions/58622965#58622965", "title": "Conditional subexpression replacement using regular expressions", "body": "<p>One possible way that keeps the regexing to a minimum:</p>\n\n<pre><code>sub repl ($input) \n{ \n    $input.Str\n    .split(';', :skip-empty)\n    .map( 'auto ' ~ * ~ ';')\n    .join('')\n };\n\n my $foo = 'kywrd a=b;c=d;d=e;'; \n $foo ~~ s:g /kywrd \\s+ (.+)/kywrds2 { repl($0) }/; \n $foo.say;\n</code></pre>\n\n<p>Personally I'd prefer the method form <code>subst</code> over the <code>s//</code> operator though.</p>\n\n<pre><code>$foo .= subst(/ kywrd \\s+ (.+) /, \"kywrds2 { repl($0) }\", :g); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "is_accepted": false, "score": 5, "last_activity_date": 1573070527, "last_edit_date": 1573070527, "creation_date": 1572455422, "answer_id": 58630545, "question_id": 58622217, "link": "https://stackoverflow.com/questions/58622217/conditional-subexpression-replacement-using-regular-expressions/58630545#58630545", "title": "Conditional subexpression replacement using regular expressions", "body": "<p>One way:</p>\n\n<pre><code># Create a separate named regex that captures an `x=y;` pair:\nmy regex pair { (\\w+) \\= (\\w+) \\; (\\s*) }\n# (Capture `(\\s*)` so formatting between pairs is retained)\n\n# Generate and return 'auto'-ized replacement of a captured pair: \nsub auto-ize ($/) { \"auto $0=$1;$2\" }\n\n$x ~~ s:g { kywrd \\s+ &lt;pair&gt;+ } = \"kywrd2 $&lt;pair&gt;\u00bb.&amp;auto-ize.join()\";\n</code></pre>\n\n<p>All the code I've shown would be simple to understand for someone a little familiar with Raku but I'll explain it anyway.</p>\n\n<ul>\n<li><p>I've broken out a named regex to match a pair. (See <a href=\"https://stackoverflow.com/a/58158918/1077672\">my answer to <strong>Difference in capturing and non-capturing regex scope in Perl 6 / Raku</strong></a> for details about why/how <code>&lt;pair&gt;</code> calls the <code>pair</code> regex.)</p></li>\n<li><p>The <code>auto-ize</code> sub routine uses <a href=\"https://docs.perl6.org/language/variables#index-entry-match_variable\" rel=\"nofollow noreferrer\">the match variable</a> (<code>$/</code>) as its argument. This is convenient because <code>$0</code> etc. are then automatically aliased to the numbered captures associated with the passed match object.</p></li>\n<li><p>I've used syntax of the form <code>s [ ... ] = \" ... \"</code> because I think it's more readable for this use case. (See mention of \"different delimiters\" in <a href=\"https://docs.perl6.org/syntax/s$SOLIDUS$SOLIDUS$SOLIDUS\" rel=\"nofollow noreferrer\"><code>s///</code> doc</a>.)</p></li>\n<li><p>The \"kywrd2 ...\" string will be repeatedly evaluated and become a replacement of a match, once for each match of the multiple <code>s:g</code> matches.</p></li>\n<li><p>The <code>$&lt;pair&gt;\u00bb.&amp;auto-ize.join()</code> bit is code being <a href=\"https://docs.perl6.org/language/101-basics#index-entry-interpolation\" rel=\"nofollow noreferrer\">interpolated</a> under double quoted string rules.</p></li>\n<li><p><code>$&lt;pair&gt;</code> is short for <code>$/&lt;pair&gt;</code>, i.e. the <code>&lt;pair&gt;</code> key of <code>$/</code>. It refers to the <code>pair</code> named capture associated with <a href=\"https://docs.perl6.org/language/variables#index-entry-match_variable\" rel=\"nofollow noreferrer\">the match variable</a>. The latter will correspond to each match of the multiple <code>s:g</code> matches in turn.</p></li>\n<li><p>The <code>+</code> quantifier in the regex expression <code>&lt;pair&gt;+</code> means that, if it matches, it produces a <em><code>List</code></em> of capture (match) objects rather than just one (as would be the case if the expression was instead just <code>&lt;pair&gt;</code> or <code>&lt;pair&gt;?</code>).</p></li>\n<li><p><a href=\"https://docs.perl6.org/language/operators#Hyper_operators\" rel=\"nofollow noreferrer\"><code>\u00bb</code></a> treats its LHS operand as a tree or list (in this case a list of one or more capture/match objects, one per <code>foo=bar;...</code> pair) and walks over its elements. For each \"leaf\" element the <code>\u00bb</code> does the operation on its right. (<code>\u00bb</code> is a powerful operator but has nice simple use cases such as this one where it's just a notationally convenient and compact equivalent of a <code>for</code> loop. You can write it as <code>&gt;&gt;</code> if you prefer ASCII.)</p></li>\n<li><p><code>.&amp;auto-ize</code> calls the <code>auto-ize</code> sub routine as if it were a method, using the operand to its left as the first argument.</p></li>\n</ul>\n\n<p>The test input data from @PolarBear's answer:</p>\n\n<pre><code>kywrd a=b;c=d;\ne=f;\nfnctn z;\ng=h;\nk=m;\nfnctn y;\nkywrd m=n;\nk=j;\nkywrd z=a;b=i;\nkywrd c=x;e=i;\nz=q;\nfnctn o;\n</code></pre>\n\n<p>Putting that into <code>in.q</code> and <code>say</code>ing the resulting <code>out.q</code> displays:</p>\n\n<pre><code>kywrd2 auto a=b;auto c=d;\nauto e=f;\nfnctn z;\ng=h;\nk=m;\nfnctn y;\nkywrd2 auto m=n;\nauto k=j;\nkywrd2 auto z=a;auto b=i;\nkywrd2 auto c=x;auto e=i;\nauto z=q;\nfnctn o;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 3, "last_activity_date": 1572769387, "last_edit_date": 1572769387, "creation_date": 1572766891, "answer_id": 58678290, "question_id": 58622217, "link": "https://stackoverflow.com/questions/58622217/conditional-subexpression-replacement-using-regular-expressions/58678290#58678290", "title": "Conditional subexpression replacement using regular expressions", "body": "<p>Not very elegant but workable code (ancient way)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nOUTER: while(&lt;DATA&gt;) {\n    if( s/kywrd /kywrd2 / ) {\n        do {\n            if( ! s/(\\w+)=(\\w+)/auto $1=$2/g ) {\n                print;\n                next OUTER;\n            }\n            print;\n        } while ( &lt;DATA&gt; );\n    } else {\n        print;\n    }\n}\n\n__DATA__\nkywrd a=b;c=d;\ne=f;\nfnctn z;\ng=h;\nk=m;\nfnctn y;\nkywrd m=n;\nk=j;\nkywrd z=a;b=i;\nkywrd c=x;e=i;\nz=q;\nfnctn o;\n</code></pre>\n\n<p>I need to look at Raku - what kind of <em>animal</em> it is.</p>\n"}], "owner": {"reputation": 9550, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1573070527, "creation_date": 1572427775, "last_edit_date": 1572445827, "question_id": 58622217, "link": "https://stackoverflow.com/questions/58622217/conditional-subexpression-replacement-using-regular-expressions", "title": "Conditional subexpression replacement using regular expressions", "body": "<p>I have text input similar to that shown below. I'd like to add the word <code>auto</code> before each 'a=b' pattern, but only if it is part of a sequence following the keyword <code>kywrd</code> (separated by semicolons).</p>\n\n<pre><code>kywrd a=b;c=d;\ne=f;\nfnctn z;\ng=h;\n</code></pre>\n\n<p>So the output I'm looking for here is:</p>\n\n<pre><code>kywrd2 auto a=b;auto c=d;\nauto e=f;\nfnctn z;\ng=h;\n</code></pre>\n\n<p>The Perl6 (Raku?) code below uses a regular expression to add the <code>auto</code> keyword, but only before the <em>first</em> <code>a=b</code> pattern. Is there a simple way to perform the substitution for all patterns in the sequence; leaving <code>g=h;</code> unmodified?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my Str $x = slurp \"in.q\";\n$x ~~ s:g /kywrd\\s+(\\w+)\\=(\\w+)\\;/kywrd2 auto $0=$1\\;/;\nspurt \"out.q\", $x;\n</code></pre>\n"}, {"tags": ["php", "perl"], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 7129042, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IYO8pUufKSk/AAAAAAAAAAI/AAAAAAAAArc/SRi4pdCFxpI/photo.jpg?sz=128", "display_name": "Hiren Raj", "link": "https://stackoverflow.com/users/7129042/hiren-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475704, "creation_date": 1572475704, "answer_id": 58634652, "question_id": 58622083, "link": "https://stackoverflow.com/questions/58622083/ocs-inventory-2-6-myserveurip-ocsreports-page-gives-http-error-500/58634652#58634652", "title": "OCS Inventory 2.6 myserveurIP/ocsreports page gives HTTP error 500", "body": "<p>There is very vague information given. It would be great if you can provide more info like where is the installation path, what web server are you using etc?</p>\n\n<p>most likely you get 500 when either that page or script doesn't exist where it is expected? so make sure your web server home directory is pointing to right folder.</p>\n"}], "owner": {"reputation": 11, "user_id": 12296147, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-75uOUw5e2ek/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrCJ9vdrzCvD4q_wY-QDUl48d2EQ/photo.jpg?sz=128", "display_name": "Ren&#233; Nsayi", "link": "https://stackoverflow.com/users/12296147/ren%c3%a9-nsayi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572475704, "creation_date": 1572427304, "last_edit_date": 1572427823, "question_id": 58622083, "link": "https://stackoverflow.com/questions/58622083/ocs-inventory-2-6-myserveurip-ocsreports-page-gives-http-error-500", "title": "OCS Inventory 2.6 myserveurIP/ocsreports page gives HTTP error 500", "body": "<p>I have just made a fresh installation of OCS Inventory 2.6 on a Centos7 VM and everything seems fine. But when I launch the home page at http://<strong>myserverIP</strong>/ocsreports, I got the following message :</p>\n\n<p>\"This page isn\u2019t working\n<strong>myserverIP</strong> is currently unable to handle this request.\nHTTP ERROR 500\"</p>\n\n<p>But I've checked almost all config files and I'm unable to figure out where's the issue.</p>\n\n<p>Can someone help me get rid of this trouble ?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": true, "score": 6, "last_activity_date": 1572419262, "last_edit_date": 1572419262, "creation_date": 1572418926, "answer_id": 58620098, "question_id": 58619994, "link": "https://stackoverflow.com/questions/58619994/perl-stdin-to-subroutine/58620098#58620098", "title": "perl STDIN to subroutine", "body": "<p>When reading from STDIN, you have also the \\n character at the end or your variable. So you have to remove it before match the regexpr. This is easy with the help of <a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"noreferrer\">chomp</a> function:</p>\n\n<pre><code>chomp $string;\n</code></pre>\n\n<p>For debugging purposes, change the print statement to <code>print \"[$string]\\n\";</code> to see this effect.</p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 5500213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/undDQ.png?s=128&g=1", "display_name": "Danilo Mercado Oudalova", "link": "https://stackoverflow.com/users/5500213/danilo-mercado-oudalova"}, "is_accepted": false, "score": -3, "last_activity_date": 1572420377, "creation_date": 1572420377, "answer_id": 58620376, "question_id": 58619994, "link": "https://stackoverflow.com/questions/58619994/perl-stdin-to-subroutine/58620376#58620376", "title": "perl STDIN to subroutine", "body": "<p><strong>Option 1.-</strong></p>\n\n<hr>\n\n<p>use <strong>/^[[:alnum:]]+$/</strong></p>\n\n<pre><code>sub Verify\n{\n    my $string = ($_[0]);\n    print \"$string\\n\";\n    if ($string =~ /^[[:alnum:]]+$/)\n    {\n        print \"ok\";\n    }\n    else\n    {\n        print \"bad\";\n    }\n}\n\n$message = &lt;STDIN&gt;;\nVerify ($message)\n</code></pre>\n\n<p><strong>Option 2.-</strong></p>\n\n<hr>\n\n<p>use <strong>/^[a-zA-Z0-9]+$/</strong></p>\n\n<pre><code>sub Verify\n{\n    my $string = ($_[0]);\n    print \"$string\\n\";\n    if ($string =~ /^[a-zA-Z0-9]+$/)\n    {\n        print \"ok\";\n    }\n    else\n    {\n        print \"bad\";\n    }\n}\n\n$message = &lt;STDIN&gt;;\nVerify ($message)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8315381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eb4671b36935201d0359887d89cd86?s=128&d=identicon&r=PG&f=1", "display_name": "VicKy", "link": "https://stackoverflow.com/users/8315381/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58620098, "answer_count": 2, "score": 0, "last_activity_date": 1572420377, "creation_date": 1572418398, "question_id": 58619994, "link": "https://stackoverflow.com/questions/58619994/perl-stdin-to-subroutine", "title": "perl STDIN to subroutine", "body": "<p>I was writing a code to just find any non-alpha numeric characters in the input line. I tried the following code:</p>\n\n<pre><code>sub Verify\n{\n    my $string = ($_[0]);\n    print \"$string\\n\";\n    if ($string =~ /[^a-zA-Z0-9]/)\n    {\n        print \"The string contains non-alphanumeric characters\\n\";\n    }\n    else\n    {\n        print \"No invalid characters\";\n    }\n}\n\n$message = &lt;STDIN&gt;;\nVerify ($message);\n</code></pre>\n\n<p>I tried with different inputs but the output is always <code>\"The string contains non-alphanumeric characters\"</code>. What is wrong in this code?</p>\n"}, {"tags": ["oracle", "docker", "perl"], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 4440494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9cee6e2873cfe38c18a951d76501e8?s=128&d=identicon&r=PG&f=1", "display_name": "Gorav Singal", "link": "https://stackoverflow.com/users/4440494/gorav-singal"}, "is_accepted": true, "score": 2, "last_activity_date": 1572416794, "creation_date": 1572416794, "answer_id": 58619693, "question_id": 58619529, "link": "https://stackoverflow.com/questions/58619529/which-port-do-i-need-to-open-in-perl-container-for-connecting-oracle-db-containe/58619693#58619693", "title": "which port Do i need to open in Perl container for connecting oracle db container", "body": "<p>If I understand your problem.\nYou have an Oracle instance exposed to some port.\nYou have a perl code, and want to access Oracle.</p>\n\n<p>You dont need to expose any port on perl container (unless it is exposing any service which you want to access outside this container). If you just want to talk to oracle container, there is no need to expose any port on it.</p>\n\n<p>In your perl container, you just need to prepare your db-connection string. As you are using LINKS strategy, you should be able to connect to it, by using name: \"oracle\" as hostname.</p>\n"}], "owner": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58619693, "answer_count": 1, "score": 2, "last_activity_date": 1573464062, "creation_date": 1572415648, "last_edit_date": 1573464062, "question_id": 58619529, "link": "https://stackoverflow.com/questions/58619529/which-port-do-i-need-to-open-in-perl-container-for-connecting-oracle-db-containe", "title": "which port Do i need to open in Perl container for connecting oracle db container", "body": "<p>I am running oracle db in a container with port 1521 exposed.I have another perl container.\nThis is what <code>docker ps</code> shows:</p>\n\n<pre><code>CONTAINER ID   NAME        IMAGE             COMMAND                  CREATED             STATUS                    PORTS\nbb8686d87c66    perl      perl:5.16         \"/usr/bin/supervisor\u2026\"   5 minutes ago       Up 5 minutes  \n9e37dff4c19e    oracle    oracle:12.2.0.1   \"/bin/sh -c 'exec $O\u2026\"   41 hours ago        Up 41 hours (healthy)   0.0.0.0:1521-&gt;1521/tcp , 5500/tcp   oracle        \n</code></pre>\n\n<p>I am able to ping from perl container to oracle container. But I can't do the same from oracle to perl.\nI am not exposing ports in perl image. Do I need to expose any port for this ??</p>\n\n<p>I have a <code>link.conf</code> file for perl conatiner which connect oracle db with perl</p>\n\n<pre><code> LINKS=' --link oracle:oracle'\n</code></pre>\n\n<p>Finally I want to use a perl script in perl container to connect to the schema. Can I do it with my present configurations? </p>\n"}, {"tags": ["perl", "sftp", "filemtime", "data-dumper"], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 1, "creation_date": 1572417984, "post_id": 58619718, "comment_id": 103548366, "body": "Thanks for suggestion @Miguel. I have modified the script by adding these lines. <code>my $a1 = Net::SFTP::Foreign::Attributes-&gt;new();  foreach my $file( @files ){\t\t  \tmy $a2 = $a1-&gt;stat($file) \t\tor die &quot;remote stat command failed: &quot;.$sftp-&gt;status; \t  \tmy $size  = $a2-&gt;size; \tmy $mtime = $a2-&gt;mtime;  \tprint &quot;file:$file, size:$size, mtime:$mtime\\n&quot;; }</code>. But this throws me the error <code>Can&#39;t locate object method &quot;stat&quot; via package &quot;Net::SFTP::Foreign::Attributes&quot; at sftp_test.pl line 31.</code>. Any idea?"}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 1, "creation_date": 1572419792, "post_id": 58619718, "comment_id": 103548987, "body": "Don&#39;t call <code>stat</code> that way. You don&#39;t have to create a <code>Net::SFTP::Foreign::Attributes</code> instance. Get it from <code>$sftp-&gt;stat($path_or_fh)</code> call, like I wrote."}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 3, "last_activity_date": 1572416911, "creation_date": 1572416911, "answer_id": 58619718, "question_id": 58619414, "link": "https://stackoverflow.com/questions/58619414/print-remote-servers-filename-mtime-in-the-screen-using-netsftpforeign-perl/58619718#58619718", "title": "Print remote servers FILENAME, MTIME in the screen using Net::SFTP::Foreign Perl Module", "body": "<p>According to the documentation of <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign#$sftp-%3Estat($path_or_fh)\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a>, there is a <code>stat</code> method you can call to get a <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign::Attributes\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign::Attributes</a> instance:</p>\n\n<pre><code>my $attrs = $sftp-&gt;stat($path_or_fh)\n</code></pre>\n\n<p>And then ask for the <code>mtime</code>, or the one you need.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572416911, "creation_date": 1572414810, "question_id": 58619414, "link": "https://stackoverflow.com/questions/58619414/print-remote-servers-filename-mtime-in-the-screen-using-netsftpforeign-perl", "title": "Print remote servers FILENAME, MTIME in the screen using Net::SFTP::Foreign Perl Module", "body": "<p>I am writing a code which need to get the file from remote server using <code>Net::SFTP::Foreign</code> Perl module.</p>\n\n<p>Here is the script.</p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new(\n                host=&gt;$host, \n                user=&gt;$user, \n                password=&gt;$pass\n            );\n$sftp-&gt;die_on_error(\"Unable to establish SFTP connection\");\n\n$sftp-&gt;setcwd($path) or die \"unable to change cwd: \" . $sftp-&gt;error;\n\nmy @files = $sftp-&gt;ls($path);\nprint Dumper(\\@files);\n</code></pre>\n\n<p>Remote server connection works fine. When I print <code>$sftp-&gt;status</code> gives <code>0</code> as value which means its success.</p>\n\n<p>Even in the Dumper I could see the files from the remote server in below format.</p>\n\n<pre><code>$VAR1 = [\n          {\n            'filename' =&gt; 'script.py',\n            'a' =&gt; bless( {\n                            'perm' =&gt; 33204,\n                            'size' =&gt; 25,\n                            'gid' =&gt; 1001,\n                            'flags' =&gt; 15,\n                            'mtime' =&gt; 1571147796,\n                            'uid' =&gt; 1001,\n                            'atime' =&gt; 1571655805\n                          }, 'Net::SFTP::Foreign::Attributes' ),\n            'longname' =&gt; '-rw-rw-r--    1 test_vk  test_vk        25 Oct 15 13:56 script.py'\n          },\n          {\n            'a' =&gt; bless( {\n                            'flags' =&gt; 15,\n                            'mtime' =&gt; 1571417934,\n                            'atime' =&gt; 1571655769,\n                            'uid' =&gt; 1001,\n                            'gid' =&gt; 1001,\n                            'size' =&gt; 369,\n                            'perm' =&gt; 33204\n                          }, 'Net::SFTP::Foreign::Attributes' ),\n            'longname' =&gt; '-rw-rw-r--    1 test_vk  test_vk       369 Oct 18 16:58 script.pl',\n            'filename' =&gt; 'script.pl'\n          },\n          {\n            'longname' =&gt; '-rw-r--r--    1 root     root            0 Oct 30 04:32 script123.pl',\n            'a' =&gt; bless( {\n                            'gid' =&gt; 0,\n                            'size' =&gt; 0,\n                            'perm' =&gt; 33188,\n                            'flags' =&gt; 15,\n                            'mtime' =&gt; 1572409960,\n                            'uid' =&gt; 0,\n                            'atime' =&gt; 1572409960\n                          }, 'Net::SFTP::Foreign::Attributes' ),\n            'filename' =&gt; 'script123.pl'\n          },\n          {\n        ];\n</code></pre>\n\n<p>What I need is take out the modification time of each of the file. \nThis needs to be printed like <code>\"filename, modification_time\"</code>. How can I take these values from the Dumper.</p>\n"}, {"tags": ["perl", "embperl"], "answers": [{"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 1, "last_activity_date": 1572422253, "last_edit_date": 1572422253, "creation_date": 1572420361, "answer_id": 58620373, "question_id": 58618030, "link": "https://stackoverflow.com/questions/58618030/foreach-loop-in-embperl/58620373#58620373", "title": "Foreach Loop in EmbPerl", "body": "<p>Change the <code>print $myVar</code> sentence to <code>print OUT $myVar;</code>\nOUT filehandle is tied to Embperl's output stream. You can use also a <code>[+ $myVar +]</code> block instead of printing to OUT.</p>\n"}], "owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572422253, "creation_date": 1572403377, "last_edit_date": 1572407185, "question_id": 58618030, "link": "https://stackoverflow.com/questions/58618030/foreach-loop-in-embperl", "title": "Foreach Loop in EmbPerl", "body": "<p>Seems like variables declared outside foreach, initialized inside foreach will not persist its data.</p>\n\n<p>Consider this example : </p>\n\n<pre><code>[-\n$myVar;\n\nforeach my $item (qw/item1 item2 item3/) {\n    $myVar = $item;\n}\n\nprint $myVar # This will print undef, I expect it to print item3\n-]\n</code></pre>\n\n<p>How do I make this work with foreach loop?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572413122, "post_id": 58614660, "comment_id": 103547152, "body": "ALWAYS use <code>use strict; use warnings;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1572381597, "creation_date": 1572381597, "answer_id": 58615104, "question_id": 58614660, "link": "https://stackoverflow.com/questions/58614660/declaring-sets-of-anonymous-arrays-in-perl/58615104#58615104", "title": "Declaring sets of anonymous arrays in perl", "body": "<p>The second form creates 9 copies of the same array reference. The third form creates a single array element consisting of a string like \"ARRAY(0x221f488)\" concatenated together 9 times. Either create 9 individual arrays with e.g. push @row, [] for 1..9; or rely on autovivification.</p>\n"}, {"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 3, "last_activity_date": 1585068331, "last_edit_date": 1585068331, "creation_date": 1572381939, "answer_id": 58615171, "question_id": 58614660, "link": "https://stackoverflow.com/questions/58614660/declaring-sets-of-anonymous-arrays-in-perl/58615171#58615171", "title": "Declaring sets of anonymous arrays in perl", "body": "<p>Answer in two parts: first part is a simple view of what is happening and what you should do to fix it. Second part tries to explain this weird behavior you're getting.</p>\n\n<hr>\n\n<p>Part 1 - simple explanations</p>\n\n<p>All forms are legal; they are just not equivalent and probably don't do what you expect. In such case, <code>Data::Dumper</code> or <code>Data::Printer</code> are your friends:</p>\n\n<pre><code>use Data::Printer;\nmy @a1 = ( [] x 9 );\np @1;\n</code></pre>\n\n<p>Prints something like</p>\n\n<pre><code>[\n    [0] \"ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)ARRAY(0x1151f30)\"\n]\n</code></pre>\n\n<p>Quoting the doc of <code>x</code> (the \"repetition operator\", if you need to search for it):</p>\n\n<blockquote>\n  <p>In scalar context, or if the left operand is neither enclosed in parentheses nor a qw// list, it performs a string repetition.</p>\n</blockquote>\n\n<p>(<code>[] x 9</code> calls <code>x</code> in scalar context)</p>\n\n<p>On the other hand, when you do <code>([]) x 9</code>, you get something like:</p>\n\n<pre><code>[\n    [0] [],\n    [1] var[0],\n    [2] var[0],\n    [3] var[0],\n    [4] var[0],\n    [5] var[0],\n    [6] var[0],\n    [7] var[0],\n    [8] var[0]\n]\n</code></pre>\n\n<p>Quoting the doc again:</p>\n\n<blockquote>\n  <p>If the x is in list context, and the left operand is either enclosed in parentheses or a qw// list, it performs a list repetition. In that case it supplies list context to the left operand, and returns a list consisting of the left operand list repeated the number of times specified by the right operand.</p>\n</blockquote>\n\n<p>What happens here, is that <code>[]</code> is evaluated before <code>x</code> is applied. It creates an arrayref, and <code>x 9</code> then duplicates it 9 times.</p>\n\n<p>Correct ways to achieve what you want would be either your first solution, or maybe, if you prefer something more concise (but still readable):</p>\n\n<pre><code>my @row = map { [] } 1 .. 9;\n</code></pre>\n\n<p>(since the body of the map is evaluated at each iteration, it creates indeed 9 distinct references)</p>\n\n<p>Or, you could just not initialize <code>@row</code>, <code>@col</code> and <code>@box</code> and let autovivification creates the arrays when needed.</p>\n\n<hr>\n\n<p>Part 2 - advanced explanation</p>\n\n<p>You have some weird behavior with your program when you use <code>([] x 9)</code>. For simplicity, let me reproduce it with a simpler example:</p>\n\n<pre><code>use feature 'say';\n\n@x = ([] x 5);\n@y = ([] x 5);\n@z = ([] x 5);\n\npush @{$x[0]}, 1;\npush @{$y[0]}, 1;\npush @{$z[0]}, 1;\n\nsay \"@{$x[0]}\";\nsay \"@{$y[0]}\";\nsay \"@{$z[0]}\";\n</code></pre>\n\n<p>This program outputs:</p>\n\n<pre><code>1 1\n1\n1 1\n</code></pre>\n\n<p>Interestingly, removing the definition of <code>@y</code> (<code>@y = ([] x 5)</code>) from this programs produces the output:</p>\n\n<pre><code>1\n1\n1\n</code></pre>\n\n<p>Something fishy is going on. I'll explain it with two points.</p>\n\n<p>First, let's consider the following example:</p>\n\n<pre><code>use Data::Printer;\nuse feature 'say';\n\nsay \"Before:\";\n@x = \"abcd\";\np @x;\nsay \"@{$x[0]}\";\n\nsay \"After:\";\npush @{$x[0]}, 5;\np @x;\nsay \"@{$x[0]}\";\nsay $abcd[0];\n</code></pre>\n\n<p>Which outputs </p>\n\n<pre><code>Before:\n[\n    [0] \"abcd\"\n]\n\nAfter:\n[\n    [0] \"abcd\"\n]\n5\n5\n</code></pre>\n\n<p>When we do <code>push @{$x[0]}, 5</code>, <code>@{$x[0]}</code> becomes @{\"abcd\"}, which creates the arrays <code>@abcd</code>, and pushes <code>5</code> into it. <code>$x[0]</code> is still a string (<code>abcd</code>), but this string is also the name of an array.</p>\n\n<p>Second*, let's look at the following program:</p>\n\n<pre><code>use Data::Printer;\n\n@x = ([] x 5);\n@y = ([] x 5);\n@z = ([] x 5);\n\np @x;\np @y;\np @z;\n</code></pre>\n\n<p>We get the output:</p>\n\n<pre><code>[\n    [0] \"ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)\"\n]\n[\n    [0] \"ARRAY(0x19b0188)ARRAY(0x19b0188)ARRAY(0x19b0188)ARRAY(0x19b0188)ARRAY(0x19b0188)\"\n]\n[\n    [0] \"ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)ARRAY(0x19aff30)\"\n]\n</code></pre>\n\n<p><code>@x</code> and <code>@z</code> contain the same reference. While this is surprising, I <em>think</em> that this is explainable: line 1, <code>[] x 5</code> creates an arrayref, then converts it into a string to do <code>x 5</code>, and then it doesn't use the arrayref anymore. This means that the garbage collector is free to reclaim its memory, and Perl is free to reallocate something else at this address. For some reason, this doesn't happen right away (<code>@y</code> doesn't contain the same thing as <code>@x</code>), but only when allocating <code>@z</code>. This is probably just the result of the implementation of the garbage collector / optimizer, and I suspect it might change from a version to another.</p>\n\n<p>In the end, what happens is this: <code>@x</code> and <code>@z</code> contains a single element, a string, which is identical. When you dereference <code>$x[0]</code> and <code>$z[0]</code>, you therefore get the same array. Therefore, pushing into either <code>$x[0]</code> or <code>$z[0]</code> pushes into the same array.</p>\n\n<p>This would have been caught with <code>use strict</code>, which would have said something like:</p>\n\n<pre><code>Can't use string (\"ARRAY(0x2339f30)ARRAY(0x2339f30)\"...) as an ARRAY ref while \"strict refs\" in use at repl1.pl line 11.\n</code></pre>\n\n<hr>\n\n<p>* <em>note that for this second part, I am not sure that this is what happens, and this is only my (somewhat educated) guess. Please, don't take my word for it, and feel free to correct me if you know better.</em></p>\n"}], "owner": {"reputation": 83, "user_id": 8097742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849a0ee5422892a6af5cb60055ca4535?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisW", "link": "https://stackoverflow.com/users/8097742/chrisw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1585068331, "creation_date": 1572379667, "last_edit_date": 1572382521, "question_id": 58614660, "link": "https://stackoverflow.com/questions/58614660/declaring-sets-of-anonymous-arrays-in-perl", "title": "Declaring sets of anonymous arrays in perl", "body": "<p>I'm trying to generate arrays for each of the agregations of cells in suduko. I seem to have fixed the problem, but don't understand what my earlier alternatives are doing.</p>\n\n<p>I get the answer I expected if I write for instance:</p>\n\n<pre><code>@row = ( [], [], [], [], [], [], [], [], [] ) ;\n</code></pre>\n\n<p>I had expected</p>\n\n<pre><code>@row = ( [] ) x 9 ;\n</code></pre>\n\n<p>to behave the same. I also tried, which did better</p>\n\n<pre><code>@row = ( [] x 9 ) ;\n</code></pre>\n\n<p>Only the first element comes out strange with this, in two of the arrays. With the first rejected form I get all 81 elements in each array</p>\n\n<p>I did wonder if the last form was actually legal?</p>\n\n<pre><code># prob.pl - Show problem with repeat anonymous arrays\n#\n# ###################################################\n\n@row = ( [] x 9 ) ;\n@col = ( [] x 9 ) ;\n@box = ( [] x 9 ) ;\n\nfor ( $i = 0 ; $i &lt; 81 ; $i ++ ) {\n   push( @{$row[ row($i) ]}, $i ) ;\n   push( @{$col[ col($i) ]}, $i ) ;\n   push( @{$box[ box($i) ]}, $i ) ;\n}\n\nfor ( $i = 0 ; $i &lt; 9 ; $i ++ ) {\n   print STDERR \"\\@{\\$row[$i]} = @{$row[$i]}\\n\" ;\n   print STDERR \"\\@{\\$col[$i]} = @{$col[$i]}\\n\" ;\n   print STDERR \"\\@{\\$box[$i]} = @{$box[$i]}\\n\" ;\n}\n\nsub row {\n   my( $i ) = @_ ;\n\n   int( $i / 9 ) ;\n}\n\nsub col {\n   my( $i ) = @_ ;\n\n   $i % 9 ;\n}\n\nsub box {\n   my( $i ) = @_ ;\n\n   int( col( $i ) / 3 ) + 3 * int( row( $i ) / 3 ) ;\n}\n</code></pre>\n"}, {"tags": ["perl", "sftp", "file-transfer"], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1572412878, "post_id": 58612600, "comment_id": 103547090, "body": "I have modified the code:  <code>my $a1 = Net::SFTP::Foreign::Attributes-&gt;new();  foreach my $file( @files ){ my $a2 = $a1-&gt;stat($file) or die &quot;remote stat command failed: &quot;.$sftp-&gt;status;   $size  = $a2-&gt;size; $mtime = $a2-&gt;mtime;  print &quot;file:$file, size:$size, mtime:$mtime\\n&quot;; }</code> But this throws an error <code>Can&#39;t locate object method &quot;stat&quot; via package &quot;Net::SFTP::Foreign::Attributes&quot; at sftp_test.pl line 33.</code>. Do you think I am writing wrong syntax for <code>stat</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 9154464, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hfdpUv8Uqfs/AAAAAAAAAAI/AAAAAAAAQt4/k4Bsi9ivpTM/photo.jpg?sz=128", "display_name": "Jerry Arnold", "link": "https://stackoverflow.com/users/9154464/jerry-arnold"}, "is_accepted": false, "score": 2, "last_activity_date": 1572370002, "creation_date": 1572370002, "answer_id": 58612600, "question_id": 58612029, "link": "https://stackoverflow.com/questions/58612029/perl-netsftpforeign-to-get-latest-file-from-remote-server/58612600#58612600", "title": "Perl Net::SFTP::Foreign to get latest file from remote server", "body": "<p>Have a look at the $sftp->stat($path_or_fh) method of the <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign#$sftp-%3Estat($path_or_fh)\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<p>It returns a list of attributes about the file, including mtime.  You'll have to get the mtime for each file you pull and make a decision via code on the latest file.</p>\n"}, {"tags": [], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "is_accepted": true, "score": 1, "last_activity_date": 1572500700, "creation_date": 1572500700, "answer_id": 58637484, "question_id": 58612029, "link": "https://stackoverflow.com/questions/58612029/perl-netsftpforeign-to-get-latest-file-from-remote-server/58637484#58637484", "title": "Perl Net::SFTP::Foreign to get latest file from remote server", "body": "<p>I found following solution. Posting my answer here, so it could help people looking for similar kind of requirement.</p>\n\n<p>Below is the code which is continuation of above (questioned) script.</p>\n\n<pre><code>my %filehash;\n\nforeach (@$files){\n    my $file = $_-&gt;{filename};\n    next unless($file =~ m/test(.*)\\.csv/);\n\n    my $stat_attr = $sftp-&gt;stat($file) or die \"remote stat command failed: \".$sftp-&gt;status;\n\n    my $size  = $stat_attr-&gt;size;\n    my $mtime = $stat_attr-&gt;mtime;\n\n    $filehash{$file}{'MTIME'} = $mtime;\n}\n\nmy $recent_file = List::Util::reduce { $filehash{$b} &gt; $filehash{$a} ? $b : $a } keys %filehash;\nprint \"Recent FILE:$recent_file, TIME:$filehash{$recent_file}{'MTIME'}\\n\";\n\n$sftp-&gt;mget(\"$path$recent_file\", $local_dir); \n$sftp-&gt;disconnect;\n</code></pre>\n\n<p>System should support <code>List::Util;</code> perl module which should be used in the begining of the script.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "accepted_answer_id": 58637484, "answer_count": 2, "score": 2, "last_activity_date": 1572500700, "creation_date": 1572367889, "last_edit_date": 1572396956, "question_id": 58612029, "link": "https://stackoverflow.com/questions/58612029/perl-netsftpforeign-to-get-latest-file-from-remote-server", "title": "Perl Net::SFTP::Foreign to get latest file from remote server", "body": "<p>I am trying to transfer file from remote server to local server using Perl <code>Net::SFTP::Foreign</code> module.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Net::SFTP::Foreign;\n\nmy $host = \"host.ip.address.here\";\nmy $user = \"username\";\nmy $pass = \"password\";\n\nmy $path      = \"/path/to/the/remote/server/directory\";\nmy $local_dir = \"/local/dir/path/\";\n\nmy $sftp = Net::SFTP::Foreign-&gt;new(host=&gt;$host , user=&gt;$user , password=&gt;$pass);\n$sftp-&gt;die_on_error(\"Unable to establish SFTP connection\");\n$sftp-&gt;setcwd($path) or die \"unable to change cwd: \" . $sftp-&gt;error;\n\nmy @file = $sftp-&gt;ls($path);\nprint Dumper(\\@file);\n\n$sftp-&gt;mget(\"$path/test*.csv\", $local_dir); \n</code></pre>\n\n<p>I have list of files in my remote server - </p>\n\n<pre><code>test123.csv\ntest234.csv\ntest341.csv\ntest890.csv\ntest765.csv\ntest110.csv\n</code></pre>\n\n<p>The thing here is I want to get the latest file from <code>$path</code> directory, which is based on modification date.\n(I am unable to find the solution)</p>\n\n<p>Is there any command which can achieve this? </p>\n\n<p>Other method I found is loop through <code>@files</code> array but how do I get the latest file? Moreover I don't want to loop through, because <code>$path</code> have lots of files which will take much time to execute.</p>\n\n<p>So I wanted to get the remote file using a single command. Any idea?</p>\n"}, {"tags": ["perl", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1572365253, "post_id": 58610090, "comment_id": 103532893, "body": "Could you recommend wrapper redirecting to <b>UNIX socket</b> (filesystem based) instead of TCP socket? [I hope for even better fit answer]"}], "tags": [], "owner": {"reputation": 186, "user_id": 4685758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6459711581ed5aef648fae9d8070cad6?s=128&d=identicon&r=PG", "display_name": "Bernhard M.", "link": "https://stackoverflow.com/users/4685758/bernhard-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1572361367, "creation_date": 1572361367, "answer_id": 58610090, "question_id": 58608317, "link": "https://stackoverflow.com/questions/58608317/perl-as-transparent-proxy-for-child-process-app/58610090#58610090", "title": "Perl as transparent proxy for child process/app", "body": "<p>The socksify wrapper usually expects to redirect traffic to a SOCKS proxy, so you can use the <a href=\"https://metacpan.org/pod/IO::Socket::Socks\" rel=\"nofollow noreferrer\">IO::Socket::Socks</a> module to implement a SOCKS5-server in perl and handle the incoming application network traffic any way you want.</p>\n\n<p><a href=\"https://metacpan.org/pod/POE::Component::Proxy::SOCKS\" rel=\"nofollow noreferrer\">POE::Component::Proxy::SOCKS</a> with SOCKS4a might be an alternative.</p>\n"}], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572361367, "creation_date": 1572355460, "question_id": 58608317, "link": "https://stackoverflow.com/questions/58608317/perl-as-transparent-proxy-for-child-process-app", "title": "Perl as transparent proxy for child process/app", "body": "<p>How to make perl script transparent proxy for sub-process (non perl app) it starts?</p>\n\n<p>There are a few programs to \"socksify\" applications via custom libraries and LD_PRELOAD.<br>\nIt seems to be closest thing to what I want.</p>\n\n<p>I DO NOT want to run any kind of permanent server/service.</p>\n"}, {"tags": ["perl", "aws-cli"], "comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1572352824, "post_id": 58605586, "comment_id": 103526031, "body": "The superuser flag gets passed down to child processes, doesn&#39;t it? So you can just <code>sudo</code> your script."}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1572345451, "creation_date": 1572345451, "answer_id": 58605752, "question_id": 58605586, "link": "https://stackoverflow.com/questions/58605586/how-to-run-command-with-sudo-in-perl/58605752#58605752", "title": "How to run command with sudo in perl", "body": "<p>Try to change</p>\n\n<pre><code>system  ('aws', 's3','cp', $ogg_file, \"s3://recordings\")\n</code></pre>\n\n<p>...into one of these:</p>\n\n<pre><code>system(qq(sudo aws s3 cp \"$ogg_file\" \"s3://recordings\"))\nsystem(\"sudo aws s3 cp '$ogg_file' s3://recordings\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7129042, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IYO8pUufKSk/AAAAAAAAAAI/AAAAAAAAArc/SRi4pdCFxpI/photo.jpg?sz=128", "display_name": "Hiren Raj", "link": "https://stackoverflow.com/users/7129042/hiren-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1572439952, "creation_date": 1572439952, "answer_id": 58625816, "question_id": 58605586, "link": "https://stackoverflow.com/questions/58605586/how-to-run-command-with-sudo-in-perl/58625816#58625816", "title": "How to run command with sudo in perl", "body": "<p>you can also do following for better readability </p>\n\n<pre><code>my $cmd = 'sudo aws s3 ';\n$cmd .= 'cp $ogg_file ';\n$cmd .= 's3://recordings';\nsystem($cmd);\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 10949692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LE3M.jpg?s=128&g=1", "display_name": "Debugger", "link": "https://stackoverflow.com/users/10949692/debugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58605752, "answer_count": 2, "score": 0, "last_activity_date": 1572439952, "creation_date": 1572344883, "question_id": 58605586, "link": "https://stackoverflow.com/questions/58605586/how-to-run-command-with-sudo-in-perl", "title": "How to run command with sudo in perl", "body": "<p>I have below code and aws command only work with sudo </p>\n\n<pre><code>   #!/usr/bin/perl\n    use strict;\n    use warnings;\n\n    my $ogg_file = '20191220-104756_4301_1571528872-480639.ogg';\n\n\n    unless (system  ('aws', 's3','cp', $ogg_file, \"s3://recordings\")==0) {\n            print STDERR \"Failed to upload   '$ogg_file': $!\\n\";\n           next;\n    }\n</code></pre>\n\n<p>I tried to run with sudo but its not working. Can anyone suggest me a better way  </p>\n"}, {"tags": ["perl", "asynchronous", "middleware", "deferred-execution", "plack"], "comments": [{"owner": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "edited": false, "score": 0, "creation_date": 1572347069, "post_id": 58605156, "comment_id": 103523236, "body": "all the code on your web server can be divided into two parts: servicing the response and related work. usually having queue service for related work is the best solution. so... why you don&#39;t want to add a queue?"}, {"owner": {"reputation": 127, "user_id": 8829074, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/68020c7f6d7b51878ac8f28e8cf20a39?s=128&d=identicon&r=PG&f=1", "display_name": "Suresh Shetiar", "link": "https://stackoverflow.com/users/8829074/suresh-shetiar"}, "edited": false, "score": 0, "creation_date": 1572347813, "post_id": 58605156, "comment_id": 103523591, "body": "you can use hooks, after sending response you can do your background process in another hook by simply calling next() in your function."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1572349859, "post_id": 58605156, "comment_id": 103524616, "body": "The event hook is optional in Plack because the base implementation must be abstract enough to run on many types of servers. Use <code>Plack::Handler::Net::Async::HTTP::Server</code> to expose <code>$env-&gt;{&#39;io.async.loop&#39;}</code>, for example."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 5775568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFBan.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/5775568/aaron"}, "edited": false, "score": 0, "creation_date": 1572371655, "post_id": 58608383, "comment_id": 103536057, "body": "I see your running plack with a Net::Async::HTTP::Server server.  Is it not possible to do do logging post-response in a pre-fork server like Starman?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 163, "user_id": 5775568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFBan.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/5775568/aaron"}, "edited": false, "score": 1, "creation_date": 1572422565, "post_id": 58608383, "comment_id": 103550049, "body": "Many more possibilities: 1. Employ a simple process fork and pipe loglines into it, e.g. <a href=\"http://p3rl.org/Proc::Fork\" rel=\"nofollow noreferrer\">Proc::Fork</a>. 2. Put the logger code into an external logger program; spawn it as background process when needed. 3. Use a job queue, e.g. <a href=\"http://p3rl.org/Minion\" rel=\"nofollow noreferrer\">Minion</a>."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1572355723, "creation_date": 1572355723, "answer_id": 58608383, "question_id": 58605156, "link": "https://stackoverflow.com/questions/58605156/how-do-i-write-a-plack-middleware-that-runs-after-the-http-response-is-sent-to-t/58608383#58608383", "title": "How do I write a Plack middleware that runs after the HTTP response is sent to the client?", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/u/1069726\">LeoNerd</a> and ilmari for their debugging help in <a href=\"http://irc.perl.org\" rel=\"nofollow noreferrer\">MagNET</a> <code>#io-async</code>.</p>\n\n<pre><code>#!/usr/bin/env -S plackup -s Net::Async::HTTP::Server\nuse Future::AsyncAwait;\nuse Time::HiRes qw(time);\nuse Future::IO qw();\nuse Future::IO::Impl::IOAsync qw();\n\nasync sub mylogger {\n    # simulate expensive run-time\n    await Future::IO-&gt;sleep(1);\n    open my $log, '&gt;&gt;', '/tmp/so-58605156.log';\n    $log-&gt;say(time);\n}\n\nmy $app = sub {\n    my ($env) = @_;\n    mylogger-&gt;retain;\n    return [200, ['Content-Type' =&gt; 'text/plain'], [time]];\n};\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 5775568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFBan.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/5775568/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572394610, "creation_date": 1572343371, "last_edit_date": 1572345091, "question_id": 58605156, "link": "https://stackoverflow.com/questions/58605156/how-do-i-write-a-plack-middleware-that-runs-after-the-http-response-is-sent-to-t", "title": "How do I write a Plack middleware that runs after the HTTP response is sent to the client?", "body": "<p>My Plack web service logs via a TCP connection to fluentD, and I'd like to execute my logging code <em>after</em> I've sent the response back to the client.  This would reduce response time (assume this is a high request volume service where such a performance optimization is worth doing).</p>\n\n<p>At least one other web framework, express for nodejs, supports this by enabling middlewares to add an <a href=\"https://stackoverflow.com/questions/17761814/express-connect-middleware-which-executes-after-the-response-is-sent-to-the-clie\">on-end event handler to the request object</a>.\nI've looked at the <a href=\"http://p3rl.org/Plack::Request\" rel=\"nofollow noreferrer\">Plack::Request</a> and <a href=\"http://p3rl.org/Plack::Response\" rel=\"nofollow noreferrer\">Plack::Response</a> interfaces, and I didn't see a similar event hook.</p>\n\n<p>I think I could probably do a local override of the <a href=\"http://p3rl.org/Plack::Response#finalize\" rel=\"nofollow noreferrer\">finalize</a> method in my middleware to force the framework to do my logging after the response is finalized, but I'd like to avoid tinkering with the Plack internals if possible.</p>\n\n<p>Is there a better way to defer execution of some code until after a response has been sent to the client?</p>\n"}, {"tags": ["string", "perl", "sed", "replace", "hp-ux"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4291851, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce2dd49d5b0d382b36f4d167eba44f3?s=128&d=identicon&r=PG&f=1", "display_name": "Kostas75", "link": "https://stackoverflow.com/users/4291851/kostas75"}, "edited": false, "score": 0, "creation_date": 1572950030, "post_id": 58598788, "comment_id": 103712862, "body": "Can this be done for all special characters I mentioned together and not only dash, meaning all the following:  underscore, dash, dot, double-underscore ??  Moreover, I want to replace only the EXACT string every time.  But using perl, at least with my version (v5.8.3 built for IA64.ARCHREV_0-thread-multi), I could understand that there is problem to replace string that contains dash (or other special character) at the end of the string, it just does nothing, i.e. no replacement, for this string with the new string."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 151, "user_id": 4291851, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce2dd49d5b0d382b36f4d167eba44f3?s=128&d=identicon&r=PG&f=1", "display_name": "Kostas75", "link": "https://stackoverflow.com/users/4291851/kostas75"}, "edited": false, "score": 0, "creation_date": 1572999125, "post_id": 58598788, "comment_id": 103735260, "body": "@Kostas: well, you can expand the list of stop characters by using a character class (surrounded with brackets), like <code>s&#47;^([^,]*,[^,]*,[^,]*)[_-.],&#47;$1,&#47;</code> (underscore, dash, dot)."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 2, "last_activity_date": 1572298999, "creation_date": 1572298999, "answer_id": 58598788, "question_id": 58598604, "link": "https://stackoverflow.com/questions/58598604/replace-sub-string-with-last-special-character-being-3rd-part-of-comma-separa/58598788#58598788", "title": "replace sub-string with last special character, being (3rd part) of comma separated string", "body": "<p>You could use the following regex:</p>\n\n<pre><code>s/^([^,]*,[^,]*,[^,]*)-,/$1,/\n</code></pre>\n\n<p>This defined csv fields as series of characters other than a comma (empty fields are allowed). We are looking for a dash at the very end of the third csv field. The regex captures everything until there, and then replaces it while omitting the dash.</p>\n\n<pre><code>$ cat t.txt\n742108,SOME-STRING_A_-BLAHBLAH_1-4MP0RTTYE,SOME-STRING_A_-BLAHBLAH_1-4MP0-,,,\n]$ perl -p -e 's/^([^,]*,[^,]*,[^,]*)-,/$1,/' t.txt\n742108,SOME-STRING_A_-BLAHBLAH_1-4MP0RTTYE,SOME-STRING_A_-BLAHBLAH_1-4MP0,,,\n]$\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4291851, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9ce2dd49d5b0d382b36f4d167eba44f3?s=128&d=identicon&r=PG&f=1", "display_name": "Kostas75", "link": "https://stackoverflow.com/users/4291851/kostas75"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572299691, "creation_date": 1572297846, "question_id": 58598604, "link": "https://stackoverflow.com/questions/58598604/replace-sub-string-with-last-special-character-being-3rd-part-of-comma-separa", "title": "replace sub-string with last special character, being (3rd part) of comma separated string", "body": "<p>I have a string with comma separated values, like:</p>\n\n<pre><code>742108,SOME-STRING_A_-BLAHBLAH_1-4MP0RTTYE,SOME-STRING_A_-BLAHBLAH_1-4MP0-,,,\n</code></pre>\n\n<p>As you can see, the 3rd comma separated value has sometimes special character, like the dash (-), in the end. I want to used sed, or preferably perl command to replace this string (with the -i option, so as to replace at existing file), with same string at the same place (i.e. 3rd comma separated value) but without the special character (like the dash (-)) at the end of the string. So, result at above example string should be:</p>\n\n<pre><code>742108,SOME-STRING_A_-BLAHBLAH_1-4MP0RTTYE,SOME-STRING_A_-BLAHBLAH_1-4MP0,,,\n</code></pre>\n\n<p>Since such multiple lines like the above are inside a file, I am using while loop at shell/bash script to loop and manipulate all lines of the file. And I have assigned the above string values to variables, so as to replace them using perl. So, my while loop is:</p>\n\n<pre><code>while read mystr\ndo\nmyNEWstr=$(echo $mystr | sed s/[_.-]$// | sed s/[__]$// | sed s/[_.-]$//)\nperl -pi -e \"s/\\b$mystr\\b/$myNEWstr/g\" myFinalFile.txt\ndone &lt; myInputFile.txt\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>$mystr is the \"SOME-STRING_A_-BLAHBLAH_1-4MP0-\"\n$myNEWstr result is the \"SOME-STRING_A_-BLAHBLAH_1-4MP0\"\n</code></pre>\n\n<p>Note that the myInputFile.txt is a file that contains the 3rd comma separated values of the myFinalFile.txt, so that those EXACT string values ($mystr) will be checked for special characters in the end, like underscore, dash, dot, double-underscore, and if they exist to be removed and form the new string ($myNEWstr), then finally that new string ($myNEWstr) to be replaced at the myFinalFile.txt, so as to have the resulting strings like the example final string shown above, i.e. with the 3rd comma separated sub-string value WITHOUT the special character in the end (which is dash (-) at above example).</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1473, "user_id": 1506086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MaFbv.png?s=128&g=1", "display_name": "Rob Streeting", "link": "https://stackoverflow.com/users/1506086/rob-streeting"}, "edited": false, "score": 1, "creation_date": 1572261106, "post_id": 58589831, "comment_id": 103492842, "body": "Can you include your code in your question? The issue might potentially lie there."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1572264075, "post_id": 58589831, "comment_id": 103494129, "body": "The full error message should display the contents of INC. is DateTime.pm in one of those directories? Does the process running your script have read access to that pm file and search permissions on all the directories in INC before and including that directory?"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572265464, "post_id": 58589831, "comment_id": 103494790, "body": "No, i indeed cannot find it. But I do have it in other strange dirs, that the CPAN and CPANM did it for me. (Those dirs were made when installing from command prompt), but I supposed the should work as well?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1572288696, "post_id": 58589831, "comment_id": 103506254, "body": "You either have more than one build of Perl (installing for one and then trying to use another one), or the installer was instructed to install the module in a non-standard location and <code>perl</code> wasn&#39;t told to look there. What&#39;s the output of <code>set | grep ^PERL; which cpan; head -n 1 `which cpan`; which cpanm; head -n 1 `which cpanm`; echo &#39;o conf&#39; | cpan</code>"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572345008, "post_id": 58589831, "comment_id": 103522270, "body": "<code>which cpan</code> = /usr/bin/cpan     <code>head -n  1 `which cpan`</code> = usr/bin/perl     <code>which cpanm</code> = /usr/bin/cpanm     <code>head -n 1 `which cpanm`</code> = usr/bin/perl.            Still dont get it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572367095, "post_id": 58589831, "comment_id": 103533894, "body": "1) You need to use <code>@ikegami</code> if you want me to be notified. 2) You should be providing that information in you question. (Fixed) 3) Pretty sure that isn&#39;t the output you actually got from two of those commands. 4) You left out the output of the most important commands! Please provide the requested information 5) Provide the output of <code>&#47;usr&#47;bin&#47;perl -V:&#39;inst.*lib&#39;</code> too"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572383340, "post_id": 58589831, "comment_id": 103540692, "body": "@ikegami why is the config vars of inst* needed? There they are:          <code>installarchlib=&#39;&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;perl&#47;5.28&#39;;</code> <code>installprivlib=&#39;&#47;usr&#47;share&#47;perl&#47;5.28&#39;;</code> <code>installsitelib=&#39;&#47;usr&#47;local&#47;share&#47;perl&#47;5.28.1&#39;;</code> <code>installvendorlib=&#39;&#47;usr&#47;share&#47;perl5&#39;;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572412608, "post_id": 58589831, "comment_id": 103547018, "body": "Still waiting on the outputs of <code>set | grep ^PERL</code> and <code>echo &#39;o conf&#39; | cpan</code>. /// If you don&#39;t override the installation location, we&#39;ll need to check the permissions of the default installation location."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572425881, "post_id": 58589831, "comment_id": 103551478, "body": "@ikegami the command  <code>set | grep  ^PERL</code> echoes nothing, i&#39;ve tried <code>set | grep -i perl</code> but just was mentioned in some if statements, like this: <code>if type perl &amp;&gt; &#47;dev&#47;null; then</code>. And the second command <code>echo &#39;o conf&#39; | cpan</code> is this: <code>Loading internal logger. Log::Log4perl recommended for better logging  There seems to be running another CPAN process (pid 2023).  Contacting... Other job not responding. Shall I overwrite the lockfile &#39;&#47;home&#47;shepherd&#47;.cpan&#47;.lock&#39;? (Y&#47;n) [y] Ok, bye</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1572428952, "post_id": 58589831, "comment_id": 103553170, "body": "It would be far easier to follow this if you could <a href=\"https://stackoverflow.com/posts/58589831/edit\">edit your question</a> and add all of this information there."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1572463395, "post_id": 58589831, "comment_id": 103571739, "body": "@DaveCross sorry, it is updated now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572464499, "post_id": 58589831, "comment_id": 103572202, "body": "<code>cpan</code> didn&#39;t properly exit last time. Could you launch <code>cpan</code>, say yes to overwriting the lock file, exit (<code>quit</code>), and run the command again?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572464522, "post_id": 58589831, "comment_id": 103572215, "body": "<code>set | grep ^PERL</code> echoing nothing is fine."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572287273, "post_id": 58591069, "comment_id": 103505666, "body": "ok, here are all commands I&#39;ve tried: <code>sudo apt-get install libdatetime-perl</code> <code>cpan DateTime</code> <code>cpanm DateTime</code>. And As saw the output, lot of dependecies missing, but I suppose these commands <code>cpan DateTime</code> should establish those dependencies for me, otherwise I have no idea."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572287459, "post_id": 58591069, "comment_id": 103505773, "body": "Similarly i found other question here, that seems to be similar to my question: <a href=\"https://serverfault.com/questions/54297/cpan-fails-to-install-datetime-module?newreg=34b4170617c94546872f8853f11f8b35\" title=\"cpan fails to install datetime module\">serverfault.com/questions/54297/&hellip;</a>   -- but that is server error"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572289328, "post_id": 58591069, "comment_id": 103506489, "body": "@Herdsman: Any one of those commands should have worked. The first one would be the one I would use. But without seeing the output, it&#39;s impossible to be any more help."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1572266246, "creation_date": 1572266246, "answer_id": 58591069, "question_id": 58589831, "link": "https://stackoverflow.com/questions/58589831/datetime-already-installed-from-cpan-and-cpanm-but-still-cant-locate-in-inc/58591069#58591069", "title": "DateTime already installed from cpan and cpanm but still cant locate in @INC", "body": "<p>The directories where you can see <code>DateTime</code> (under <code>/home/shepherd/.cpan</code>) are working directories that <code>cpan</code> and <code>cpanm</code> use when installing your modules. You wouldn't expect to actually load modules from there once they have been installed - as other copies of the modules should be installed somewhere more permanent.</p>\n\n<p>But where have they been installed? That's the question. By default, they should be installed somewhere on your default <code>@INC</code> path, but they're clearly not there - otherwise you wouldn't get that error message.</p>\n\n<p>So I'm led to suspect that either there was an error when installing the modules or they somehow got installed in a non-standard place on your system. And it's impossible to give much more useful help without seeing exactly what commands you ran to install the modules and what output was produced.</p>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1572384455, "post_id": 58606260, "comment_id": 103541063, "body": "Yes I got the same output and yes I do have my permissions. But dont get the point, even if I did what you said"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1572347261, "creation_date": 1572347261, "answer_id": 58606260, "question_id": 58589831, "link": "https://stackoverflow.com/questions/58589831/datetime-already-installed-from-cpan-and-cpanm-but-still-cant-locate-in-inc/58606260#58606260", "title": "DateTime already installed from cpan and cpanm but still cant locate in @INC", "body": "<p>I think I've had the same problem. Many times. When you <code>sudo apt-get install libsomething-perl</code> the DateTime.pm file, or one of the directories it resides under, might not be readable to your normal user. (Depending on <code>umask</code> or <code>g+s</code> settings I think)</p>\n\n<p>To check this out, see if it's available as root (sudo) and where it's located by running:</p>\n\n<pre><code>sudo perl -le'use DateTime; print $INC{\"DateTime.pm\"}'\n</code></pre>\n\n<p>Then run:</p>\n\n<pre><code>sudo ls -ld $(sudo perl -E'use DateTime;@p=split\"/\",$INC{\"DateTime.pm\"};say join\"/\",@p and pop@p while@p&gt;1')\n</code></pre>\n\n<p>And you might see something like this:</p>\n\n<pre><code>drwxr-xr-x  root root   4096 Aug 30  2016 /usr\ndrwxr-xr-x  root root  12288 Oct  9 10:22 /usr/lib\ndrwxr-xr-x  root root  69632 Oct 23 06:35 /usr/lib/x86_64-linux-gnu\ndrwxr-xr-x  root root   4096 Aug 30  2016 /usr/lib/x86_64-linux-gnu/perl5\ndrwxr-xr-x  root root   4096 Oct  9 10:22 /usr/lib/x86_64-linux- gnu/perl5/5.22\n-rw-r--r--  root root 123586 Dec 18  2015 /usr/lib/x86_64-linux-gnu/perl5/5.22/DateTime.pm\n</code></pre>\n\n<p>If your current user don't have the permissions needed to read the DateTime.pm file or a directory it's in, try using either <code>sudo chown $(whoami) /usr/lib/x86_64-linux-gnu/perl5/5.22/</code> or <code>sudo chmod a+rx /usr/lib/x86_64-linux-gnu/perl5/5.22/DateTime.pm</code> or similar to change that. (The directories in my examples here should of course be changed into what you got from the <code>ls</code> command above)</p>\n"}], "owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572463240, "creation_date": 1572260809, "last_edit_date": 1572463240, "question_id": 58589831, "link": "https://stackoverflow.com/questions/58589831/datetime-already-installed-from-cpan-and-cpanm-but-still-cant-locate-in-inc", "title": "DateTime already installed from cpan and cpanm but still cant locate in @INC", "body": "<p>How is possible to not locate DateTime.pm even though I have installed it from cpan and cpanm? But still get the error it cannot find it in @INC? It is not duplicate because I don ask about who to donwload modul - as I said I tried to install it from 2 sources and i did, but still the error <code>Can't locate DateTime.pm in @INC</code>. I have no idea what I am doing wrong.</p>\n\n<p>the code is simple:</p>\n\n<pre><code>#!/usr/bin/perl\nuse DateTime;\nmy $t = localtime;\nmy $now = DateTime-&gt;new(\nyear =&gt; $t-&gt;year,\nmonth =&gt; $t-&gt;mon,\nday =&gt; $t-&gt;mday,\n);\nprint $now\n</code></pre>\n\n<p>and error:</p>\n\n<pre><code>Can't locate DateTime.pm in @INC (you may need to install the DateTime module) (@INC contains:\n    /etc/perl\n    /usr/local/lib/x86_64-linux-gnu/perl/5.28.1\n    /usr/local/share/perl/5.28.1\n    /usr/lib/x86_64-linux-gnu/perl5/5.28\n    /usr/share/perl5\n    /usr/lib/x86_64-linux-gnu/perl/5.28\n    /usr/share/perl/5.28\n    /usr/local/lib/site_perl\n    /usr/lib/x86_64-linux-gnu/perl-base\n) at ./a line 2.\n</code></pre>\n\n<p>Seems i cant find DateTime.pm but I do have them here:</p>\n\n<pre><code>/home/shepherd/.cpan/build/DateTime-1.51-0/blib/lib/DateTime.pm\n/home/shepherd/.cpan/build/DateTime-1.51-0/lib/DateTime.pm\n/home/shepherd/.cpan/build/DateTime-TimeZone-2.37-0/t/lib/T/RequireDateTime.pm\n/home/shepherd/.cpanm/work/1572257193.20577/DateTime-1.51/lib/DateTime.pm\n/home/shepherd/.cpanm/work/1572257193.20577/DateTime-TimeZone-2.37/t/lib/T/RequireDateTime.pm\n/home/shepherd/.cpanm/work/1572257544.21848/DateTime-1.51/lib/DateTime.pm\n/home/shepherd/.cpanm/work/1572257544.21848/DateTime-TimeZone-2.37/t/lib/T/RequireDateTime.pm\n</code></pre>\n\n<p>What the hell is going on?</p>\n\n<hr>\n\n<p>Some information that might be useful:</p>\n\n<pre><code>$ which cpan\n/usr/bin/cpan\n\n$ head -n 1 `which cpan`\nusr/bin/perl\n\n$ which cpanm\n/usr/bin/cpanm\n\n$ head -n 1 `which cpanm`\nusr/bin/perl\n\n$ /usr/bin/perl -V:'inst.*lib'\ninstallarchlib='/usr/lib/x86_64-linux-gnu/perl/5.28';\ninstallprivlib='/usr/share/perl/5.28'\ninstallsitelib='/usr/local/share/perl/5.28.1'\ninstallvendorlib='/usr/share/perl5'\n\n@INC (when 'use DateTime;')\n/etc/perl\n/usr/local/lib/x86_64-linux-gnu/perl/5.28.1\n/usr/local/share/perl/5.28.1\n/usr/lib/x86_64-linux-gnu/perl5/5.28\n/usr/share/perl5\n/usr/lib/x86_64-linux-gnu/perl/5.28\n/usr/share/perl/5.28\n/usr/local/lib/site_perl\n/usr/lib/x86_64-linux-gnu/perl-base\n</code></pre>\n\n<p>the command <code>set | grep ^PERL</code> echoes nothing, i've tried <code>set | grep -i perl</code> but just was mentioned in some if statements, like this: <code>if type perl &amp;&gt; /dev/null; then</code>. And the second command <code>echo 'o conf' | cpan</code> is this: <code>Loading internal logger. Log::Log4perl recommended for better logging There seems to be running another CPAN process (pid 2023). Contacting... Other job not responding. Shall I overwrite the lockfile '/home/shepherd/.cpan/.lock'? (Y/n) [y] Ok, bye</code></p>\n"}, {"tags": ["regex", "perl", "ubuntu"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1572259973, "post_id": 58589579, "comment_id": 103492376, "body": "Maybe the environment variable is not exported into the <code>sudo</code> environment? See also <a href=\"https://stackoverflow.com/q/8633461/2173773\">How to keep environment variables when using sudo?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1572260163, "creation_date": 1572260163, "answer_id": 58589673, "question_id": 58589579, "link": "https://stackoverflow.com/questions/58589579/issue-with-perl-regex-search-and-replace-with-environment-variable/58589673#58589673", "title": "Issue with perl regex search and replace with environment variable", "body": "<p>By default (and by design), <code>sudo</code> doesn't pass the current user's environment on to the new process.</p>\n\n<p>You can override this behaviour with the <code>-E</code> command line flag.</p>\n\n<pre><code>echo \"set \\$ip_addr_priv \\\"{my_ip_address}\\\"\" | sudo perl -n -e 's/(\\$ip_addr_priv) +\"\\{([a-zA-Z0-9_]+)\\}\"/\\1 \"$ENV{ip_addr}\"/g; print;'\nset $ip_addr_priv \"\"\n</code></pre>\n\n<p>Vs:</p>\n\n<pre><code>echo \"set \\$ip_addr_priv \\\"{my_ip_address}\\\"\" | sudo -E perl -n -e 's/(\\$ip_addr_priv) +\"\\{([a-zA-Z0-9_]+)\\}\"/\\1 \"$ENV{ip_addr}\"/g; print;'\nset $ip_addr_priv \"127.0.1.1\"\n</code></pre>\n"}], "owner": {"reputation": 10300, "user_id": 310139, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c68996c1e03f3c2e93cb7d9bc43e2d13?s=128&d=identicon&r=PG&f=1", "display_name": "BannerMan", "link": "https://stackoverflow.com/users/310139/bannerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 58589673, "answer_count": 1, "score": 1, "last_activity_date": 1572260163, "creation_date": 1572259831, "question_id": 58589579, "link": "https://stackoverflow.com/questions/58589579/issue-with-perl-regex-search-and-replace-with-environment-variable", "title": "Issue with perl regex search and replace with environment variable", "body": "<p>I'm running a GCE VM with Ubuntu 18, and having an issue with a perl command.</p>\n\n<pre><code>export ip_addr=`hostname -i`\necho \"set \\$ip_addr_priv \\\"{my_ip_address}\\\"\" | sudo perl -n -e 's/(\\$ip_addr_priv) +\"\\{([a-zA-Z0-9_]+)\\}\"/\\1 \"$ENV{ip_addr}\"/g; print;'\n</code></pre>\n\n<p>When I run this in the command line, I get the following output:</p>\n\n<pre><code>set $ip_addr_priv \"\"\n</code></pre>\n\n<p>Instead of something like this:</p>\n\n<pre><code>set $ip_addr_priv \"127.0.0.1\"\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["bash", "perl", "find", "counter"], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 1, "creation_date": 1572252262, "post_id": 58585353, "comment_id": 103489105, "body": "Success! There&#39;s a small typo in your code -- &quot;Find::File::Rule&quot; should be &quot;File::Find::Rule&quot;. Once I changed that, everything worked perfectly! I appreciate your help greatly. I also savored the elegant approach of actually parsing the XML, rather than using a regex, as I had been doing. Quite the lesson!"}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572257300, "post_id": 58585353, "comment_id": 103491247, "body": "Two quick questions: (1) This script inserts <code>&lt;?xml version=&quot;1.0&quot;?&gt;</code> at the beginning of each file. Is there any way to suppress that? And (2) the script also converts non-ASCII Unicode characters like <code>&#243;</code> into entities such as <code>&amp;#xF3;</code>, which may be proper XML, but it is incompatible with the next software these files are processed by. Can this conversion be prevented? I&#39;ve tried <code>expand_entities =&gt; 0</code>, <code>complete_attributes =&gt; 0</code>, <code>no_defdtd =&gt; 1</code>, and some other settings to no avail."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572273683, "post_id": 58585353, "comment_id": 103498902, "body": "@GilWilliams You could try <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a> which is less XML-strict: <code>my $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse(read_text $qfn); $dom-&gt;find(&#39;tag&#39;)-&gt;each(sub { $_-&gt;{count} = ++$counter }); write_text $qfn, $dom-&gt;to_string;</code> (I used File::Slurper for reading and writing the file, you could also use Path::Tiny or Mojo::File but make sure to decode/encode UTF-8 or the proper encoding as Mojo::DOM will not do this.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1572289762, "post_id": 58585353, "comment_id": 103506653, "body": "1) You shouldn&#39;t have to do so, but you could print the root element instead. It&#39;s a little trickier because it&#39;s a silly thing to do. You&#39;ll need to encode the output of <code>$doc-&gt;documentElement-&gt;toString</code> and place it in a file. 2) libxml is extra careful when an encoding isn&#39;t explicitly specified in the document.  Specifying an encoding (e.g. by adding <code>$doc-&gt;setEncoding(&quot;UTF-8&quot;);</code>) will resolve this."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572293067, "post_id": 58585353, "comment_id": 103507958, "body": "@ikegami Thanks again for your help! Setting the encoding did the trick!"}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572301942, "post_id": 58585353, "comment_id": 103510986, "body": "With the new code suggested by @ikegami, everything is working, but I have four input files that fail for some reason. They have the same permissions as the files that can be processed, and their sizes are in the same range as other files. Any idea what could be causing this?"}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572304566, "post_id": 58585353, "comment_id": 103511569, "body": "<code>Error processing &quot;&#47;file&#47;path&#47;filename&quot;: </code> with nothing after the colon."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572308100, "post_id": 58585353, "comment_id": 103512217, "body": "woops, should be <code>$@</code>, not <code>$!</code>."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1572334578, "post_id": 58585353, "comment_id": 103517517, "body": "@ikegami That does indeed do the trick. The errors are <code>PCDATA invalid Char value 28</code> and <code>PCDATA invalid Char value 29</code>, so it seems I have a handful of problematic characters in the source files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572381555, "post_id": 58585353, "comment_id": 103539986, "body": "Certain characters are not allowed in XML. If you need to transmit binary data, you could encode it (e.g. using base64)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1572308108, "last_edit_date": 1572308108, "creation_date": 1572232087, "answer_id": 58585353, "question_id": 58584929, "link": "https://stackoverflow.com/questions/58584929/findperl-how-to-add-a-continuous-counter-to-all-cases-of-a-certain-tag-in-dire/58585353#58585353", "title": "FIND+PERL: How to add a continuous counter to all cases of a certain tag in directory full of files", "body": "<p><code>find -exec perl</code> may launch <code>perl</code> any number of times, so that's no good. We need to ensure that only one <code>perl</code> process is launched (unless we somehow store the counter somewhere persistent like in a file).</p>\n\n<p>We could have <code>find</code> print the file names and read them in <code>perl</code>, but there's not much point in doing that when it's just as easy to get the list of file names in Perl.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::Find::Rule qw( );\nuse XML::LibXML      qw( );\n\nmy $counter = 0;\nmy $parser = XML::LibXML-&gt;new();\n\nfor my $qfn (\n   File::Find::Rule\n      -&gt;file\n      -&gt;name(\"*.xml\")\n      -&gt;in(\".\")\n) {\n   eval {\n      my $doc = $parser-&gt;parse_file($qfn);\n      $_-&gt;setAttribute(\"count\", ++$counter) for $doc-&gt;findnodes(\"//tag\");\n      $doc-&gt;toFile($qfn, 0);\n      return 1;\n   }\n      or warn(\"Error processing \\\"$qfn\\\": $@\\n\");\n}\n</code></pre>\n\n<p>You  may store that in a file you can simply execute, or you can wrap within <code>perl -e'...'</code>.</p>\n"}], "owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 58585353, "answer_count": 1, "score": 0, "last_activity_date": 1572308108, "creation_date": 1572227476, "last_edit_date": 1572227788, "question_id": 58584929, "link": "https://stackoverflow.com/questions/58584929/findperl-how-to-add-a-continuous-counter-to-all-cases-of-a-certain-tag-in-dire", "title": "FIND+PERL: How to add a continuous counter to all cases of a certain tag in directory full of files", "body": "<p>I have thousands of XML files and I need to add a continuous incremental counter to each occurrence of a certain tag in all of them. In other words, if there are 10 files and 50 cases of the tag in each, the counter should go from 1 to 500, with 1-50 being in the first file, 51-100 in the second, and so on.</p>\n\n<p>I'm using <code>find</code> to get all the files and Perl to do the search and replace operations inside each file. The base code I'm working with is this:</p>\n\n<pre><code>#!/bin/bash\nfind . -type f -name \"*.xml\" -exec perl -i -p0e \"s#&lt;tag&gt;#&lt;tag count=${COUNTER}&gt;#gm\" {} +`\n</code></pre>\n\n<p>This should take each occurrence of <code>&lt;tag&gt;</code> and add the current counter value, e.g. <code>&lt;tag counter=000001924&gt;</code>.</p>\n\n<p>The problem is that I can't figure out how to maintain the counter values between files. If I put <code>COUNTER=COUNTER+1</code> before <code>find</code>, the counter obviously never increments. If I put it inside the Perl code, it resets to 0 for each file.</p>\n\n<p>And unfortunately, all the answers I can find are for adding a counter number to <em>filenames</em> rather than to <em>something within files</em>, which is a different problem. </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572235301, "post_id": 58584270, "comment_id": 103485165, "body": "Please post a minimal, runnable demonstration of the problem. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1572235308, "post_id": 58584270, "comment_id": 103485166, "body": "<code>m!$_$! eq m!$Address$!</code> makes no sense."}, {"owner": {"reputation": 522, "user_id": 2274551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4656c3e678e7ba30f513b7be9c0de770?s=128&d=identicon&r=PG", "display_name": "Simon S.", "link": "https://stackoverflow.com/users/2274551/simon-s"}, "edited": false, "score": 0, "creation_date": 1572248859, "post_id": 58584270, "comment_id": 103487861, "body": "Maybe I&#39;m getting this wrong but it seems like you&#39;re returning in the loop while you iterate over your mapping between URLs and titles. After you check whatever it is you want to with your, just return the mapped value with <code>$LocalAddressTitlePairs{$_}</code>"}, {"owner": {"reputation": 9, "user_id": 1221195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d644c41d2b16b4f3e0298fee4eab73e1?s=128&d=identicon&r=PG&f=1", "display_name": "bp163", "link": "https://stackoverflow.com/users/1221195/bp163"}, "edited": false, "score": 0, "creation_date": 1572276241, "post_id": 58584270, "comment_id": 103500363, "body": "I used php to generate the hash, but used the wrong dynamic page name of item.html. When changed to the correct name, the script returns the desired results. Sorry for wasting anyone&#39;s time."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "is_accepted": false, "score": 2, "last_activity_date": 1572258385, "creation_date": 1572258385, "answer_id": 58589243, "question_id": 58584270, "link": "https://stackoverflow.com/questions/58584270/how-would-i-match-the-correct-hash-pair-based-on-a-specific-string/58589243#58589243", "title": "How would I match the correct hash pair based on a specific string?", "body": "<p><code>m!$Address$!</code> does not work as expected, because the expression contains special characters such as <code>?</code>\nYou need to add escape sequences <code>\\Q</code> and <code>\\E</code></p>\n\n<pre><code>m!\\Q$Address\\E$!\n</code></pre>\n\n<p>it\u2019s even better to add a check at the beginning of the line, otherwise</p>\n\n<pre><code>my $url = \"https://www.mywebsite.com/?foo=bar\"\nmy $bad_url = \"https://bad.com?u=https://www.mywebsite.com/?foo=bar\"\n$bad_url =~ m!\\Q$url\\E$! ? 1 : 0 # 1, pass\n$bad_url =~ m!^\\Q$url\\E$! ? 1 : 0 # 0, fail\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 1221195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d644c41d2b16b4f3e0298fee4eab73e1?s=128&d=identicon&r=PG&f=1", "display_name": "bp163", "link": "https://stackoverflow.com/users/1221195/bp163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572276224, "creation_date": 1572219248, "last_edit_date": 1572276224, "question_id": 58584270, "link": "https://stackoverflow.com/questions/58584270/how-would-i-match-the-correct-hash-pair-based-on-a-specific-string", "title": "How would I match the correct hash pair based on a specific string?", "body": "<p>I have a simple page hit tracking script that allows for the output to display friendly names instead of urls by using a hash. </p>\n\n<p><strong>UPDATE:</strong> I used php to generate the hash below, but used the wrong dynamic page name of item.html. When changed to the correct name, the script returns the desired results. Sorry for wasting anyone's time.</p>\n\n<pre><code>my %LocalAddressTitlePairs = (\n'https://www.mywebsite.com/index.html' =&gt; 'HOME', \n'https://www.mywebsite.com/art_gallery.html' =&gt; 'GALLERY', \n'https://www.mywebsite.com/cart/item.html?itemID=83&amp;cat=26' =&gt; 'Island Life',\n'https://www.mywebsite.com/cart/item.html?itemID=11&amp;cat=22' =&gt; 'Castaways',\n'https://www.mywebsite.com/cart/item.html?itemID=13&amp;cat=29' =&gt; 'Pelicans',\nand so on..\n);\n</code></pre>\n\n<p>The code for returning the page hits:</p>\n\n<pre><code>sub url_format {\nlocal $_ = $_[0] || '';\nif ((m!$PREF{'My_Web_Address'}!i) and  (m!^https://(.*)!i)    ) {\n    if ($UseLocalAddressTitlePairs == 1) {\n    foreach my $Address (keys %LocalAddressTitlePairs) {\n    return \"&lt;a title=\\\"$Address\\\" href=\\\"$_\\\"&gt;$LocalAddressTitlePairs{$Address}&lt;/A&gt;\" if (m!$_$! eq m!$Address$!);\n    }\n    }\n    my $stub =$1;\n    return $stub;\n    } \n}\n</code></pre>\n\n<p>Displaying the log hits will show\nHOME with the correct link, GALLERY with the correct url link, but <code>https://www.mywebsite.com/cart/item.html?itemID=83&amp;cat=26</code>\nwill display a random name instead of what it should be, Island Life for this page.. it has the correct link,-- a different name displays every time the page is loaded. \nAnd, the output for all pages with query strings will display the exact same name. I know the links are correct by clicking thru site pages and checking the log script for my own page visits. \nI tried -</p>\n\n<pre><code>while (my($mykey, $Value) = each %LocalAddressTitlePairs) {\nreturn \"&lt;a title=\\\"$mykey\\\" href=\\\"$_\\\"&gt;$Value&lt;/a&gt;\" if(m!$_$! eq m!$mykey$!);\n</code></pre>\n\n<p>but again, the link is correct but the mykey/Value associated is random too. Way too new to perl to figure this out but I'm doing a lot of online research. </p>\n"}, {"tags": ["r", "perl", "search", "merge", "extract"], "comments": [{"owner": {"reputation": 73863, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "edited": false, "score": 0, "creation_date": 1572199198, "post_id": 58581730, "comment_id": 103478256, "body": "Please do not post an image of code/data/errors: it cannot be copied or searched (SEO), it breaks screen-readers, and it may not fit well on some mobile devices. Ref: <a href=\"https://meta.stackoverflow.com/a/285557/3358272\">meta.stackoverflow.com/a/285557/3358272</a> (and <a href=\"https://xkcd.com/2116/\" rel=\"nofollow noreferrer\">xkcd.com/2116</a>). Please just include the code or data (e.g., <code>dput(head(x))</code> or <code>data.frame(...)</code>) directly."}, {"owner": {"reputation": 73863, "user_id": 3358272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gteVQ.jpg?s=128&g=1", "display_name": "r2evans", "link": "https://stackoverflow.com/users/3358272/r2evans"}, "edited": false, "score": 0, "creation_date": 1572199521, "post_id": 58581730, "comment_id": 103478322, "body": "Additionally, it is not clear how your <code>Keyword.txt</code> values are supposed to fit in with the image of your data. Please make this question <i>reproducible</i>. This includes sample code (including listing non-base R packages), sample <i>unambiguous</i> data (e.g., <code>dput(head(x))</code> or <code>data.frame(x=...,y=...)</code>), and expected output. Refs: <a href=\"https://stackoverflow.com/questions/5963269\">stackoverflow.com/questions/5963269</a>, <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>, and <a href=\"https://stackoverflow.com/tags/r/info\">stackoverflow.com/tags/r/info</a>."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 8364971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tBxFZ.jpg?s=128&g=1", "display_name": "Bill Ash", "link": "https://stackoverflow.com/users/8364971/bill-ash"}, "is_accepted": false, "score": 1, "last_activity_date": 1572239088, "last_edit_date": 1572239088, "creation_date": 1572202652, "answer_id": 58582390, "question_id": 58581730, "link": "https://stackoverflow.com/questions/58581730/using-a-list-of-keywords-to-extract-complete-rows-form-a-datatable/58582390#58582390", "title": "Using a List of keywords to extract Complete rows form a datatable", "body": "<p>Not much to go on here but you could do something like this: </p>\n\n<pre><code>library(tidyverse)\n\nset.seed(10)\n\nkeywords &lt;- c(\"a\", \"c\", \"d\", \"e\", \"f\")\nkey_vec &lt;- str_c(keywords, collapse = \"|\")\n\ndat &lt;- tibble(z = seq(1, 100, 1), \n              y = runif(100, 0, 50), \n              x = sample(letters, 100, replace = T))\n\ndat %&gt;% \n  filter(str_detect(x, key_vec))\n\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12037034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdfc0ae34c117f350db487a5bee762fb?s=128&d=identicon&r=PG&f=1", "display_name": "shahzad", "link": "https://stackoverflow.com/users/12037034/shahzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572239088, "creation_date": 1572197373, "last_edit_date": 1572209515, "question_id": 58581730, "link": "https://stackoverflow.com/questions/58581730/using-a-list-of-keywords-to-extract-complete-rows-form-a-datatable", "title": "Using a List of keywords to extract Complete rows form a datatable", "body": "<p>I need to extract a subset of large dataset using a list of keywords. \nLarge dataset(gene_infoNCBI) is shown here contains keywords </p>\n\n<pre><code>&gt; head(gene_infoNCBI)\n  X.tax_id  GeneID   Symbol  LocusTag Synonyms dbXrefs chromosome map_location\n1        7 5692769 NEWENTRY         -        -       -          -            -\n2        9 1246500    At1g00930 pLeuDn_01        -       -          -            -\n3        9 1246501    repA2 At1g13580        -       -          -            -\n4        9 1246502     leuA pLeuDn_04        -       -          -            -\n5        9 1246503     leuB pLeuDn_05        -       -          -            -\n6        9 1246504     leuC pLeuDn_06        -       -          -            -\n                                                                                                                                                                                                 description\n1 Record to support submission of GeneRIFs for a gene not in Gene (Azotirhizobium caulinodans.  Use when strain, subtype, isolate, etc. is unspecified, or when different from all specified ones in Gene.).\n2                                                                                                                                                                    putative replication-associated protein\n3                                                                                                                                                                    putative replication-associated protein\n4                                                                                                                                                                                 2-isopropylmalate synthase\n5                                                                                                                                                                            3-isopropylmalate dehydrogenase\n6                                                                                                                                                                    isopropylmalate isomerase large subunit\n    type_of_gene Symbol_from_nomenclature_authority Full_name_from_nomenclature_authority\n1          other                                  -                                     -\n2 protein-coding                                  -                                     -\n3 protein-coding                                  -                                     -\n4 protein-coding                                  -                                     -\n5 protein-coding                                  -                                     -\n6 protein-coding                                  -                                     -\n  Nomenclature_status Other_designations Modification_date Feature_type\n1                   -                  -          20190202            -\n2                   -                  -          20180129            -\n3                   -                  -          20180129            -\n4                   -                  -          20180129            -\n5                   -                  -          20180129            -\n6                   -                  -          20180129            -\n</code></pre>\n\n<p>keyword.txt has the keyword which match the column values of \"Symbol\" and \"LocusTag\" values of gene_infoNCBI file. </p>\n\n<pre><code>1              At1g00930          NA NA\n2              At1g00930          NA NA\n3              At1g00930          NA NA\n4              At1g00930          NA NA\n5              At1g00930          NA NA\n6              At1g13580          NA NA\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "mojolicious"], "comments": [{"owner": {"reputation": 745, "user_id": 1144542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2WInU.jpg?s=128&g=1", "display_name": "Chuck Adams", "link": "https://stackoverflow.com/users/1144542/chuck-adams"}, "edited": false, "score": 1, "creation_date": 1572752489, "post_id": 58581367, "comment_id": 103655301, "body": "<code>$tx-&gt;db-&gt;dbh-&gt;do(&quot;SET TRANSACTION REPEATABLE READ&quot;);</code>"}], "owner": {"reputation": 1349, "user_id": 1982385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1513f529c521607e875fdfaa18de8efd?s=128&d=identicon&r=PG", "display_name": "Daniel Gray", "link": "https://stackoverflow.com/users/1982385/daniel-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572471700, "creation_date": 1572194473, "last_edit_date": 1572471700, "question_id": 58581367, "link": "https://stackoverflow.com/questions/58581367/how-can-i-set-the-transaction-isolation-level-of-a-mojopgtransaction", "title": "How can I set the transaction isolation level of a Mojo::Pg::Transaction?", "body": "<p>I'm writing a small application using Mojolicious, and I would like to implement some sort of optimistic locking for updates of a table.</p>\n\n<p>I want to set <a href=\"https://www.postgresql.org/docs/10/transaction-iso.html#XACT-REPEATABLE-READ\" rel=\"nofollow noreferrer\">\"Repeatable Read\"</a> transaction isolation level to the transaction I have, so that any concurrent updates fail (rollback) and only the first one goes through.</p>\n\n<p>How can I set this on a <code>Mojo::Pg::Transaction</code> object? The documentation on that part seems a bit sparse (<a href=\"https://mojolicious.org/perldoc/Mojo/Pg/Transaction\" rel=\"nofollow noreferrer\">https://mojolicious.org/perldoc/Mojo/Pg/Transaction</a>), focusing mainly on creating and committing a transaction.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1572143958, "post_id": 58576161, "comment_id": 103468211, "body": "<i>Always</i> have <code>use warnings;</code> and <code>use strict;</code> at the beginning"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1572143977, "post_id": 58576161, "comment_id": 103468215, "body": "( btw, you can generate that string by <code>my $mystr = join &#39;&#39;, &#39;a&#39;..&#39;z&#39;;</code> )"}, {"owner": {"reputation": 43, "user_id": 1090947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ae35f9acfb250af660e80ba42e714f?s=128&d=identicon&r=PG", "display_name": "odbdux", "link": "https://stackoverflow.com/users/1090947/odbdux"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1572158070, "post_id": 58576161, "comment_id": 103469651, "body": "Thanks. When I used them I caught a bug and made it work."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1090947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ae35f9acfb250af660e80ba42e714f?s=128&d=identicon&r=PG", "display_name": "odbdux", "link": "https://stackoverflow.com/users/1090947/odbdux"}, "edited": false, "score": 0, "creation_date": 1572154006, "post_id": 58576220, "comment_id": 103469250, "body": "Thanks. What happens if I want to use a modifier such as m or s? With the delimiters its m/xxx/ and s/xxx/yyy/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 43, "user_id": 1090947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ae35f9acfb250af660e80ba42e714f?s=128&d=identicon&r=PG", "display_name": "odbdux", "link": "https://stackoverflow.com/users/1090947/odbdux"}, "edited": false, "score": 1, "creation_date": 1572160881, "post_id": 58576220, "comment_id": 103470016, "body": "@odbdux, Use <code>(?s)pat</code>, <code>(?m)pat</code> or <code>(?sm)pat</code>; or <code>(?s:pat)</code>, <code>(?m:pat)</code> or <code>(?sm:pat)</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572161408, "post_id": 58576220, "comment_id": 103470113, "body": "@ikegami I wonder if he meant a leading <code>m</code> or <code>s</code> (i.e. match/substitute), not the trailing <code>m</code> or <code>s</code> modifiers?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1572161642, "post_id": 58576220, "comment_id": 103470145, "body": "Accepting Perl code (as opposed to a regex pattern) from the user is probably quite unwise. If you&#39;re right about what they meant, they&#39;d be better off accepting a choice of operation, a pattern, and a replacement string (when appropriate) as separate inputs."}, {"owner": {"reputation": 43, "user_id": 1090947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ae35f9acfb250af660e80ba42e714f?s=128&d=identicon&r=PG", "display_name": "odbdux", "link": "https://stackoverflow.com/users/1090947/odbdux"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572268867, "post_id": 58576220, "comment_id": 103496375, "body": "@ikegami, I agree. So long as I am running the program I can sort of confine the risk to me. The bigger problem is how to avoid code changes during production. The regular expressions I am using are fairly complicated and change frequently so I want to keep them out of the code of possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572289514, "post_id": 58576220, "comment_id": 103506560, "body": "Re &quot;<i>The bigger problem is how to avoid code changes during production.</i>&quot;, Then you DEFINITELY don&#39;t want to accept Perl code as arguments."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 3, "last_activity_date": 1572143499, "creation_date": 1572143499, "answer_id": 58576220, "question_id": 58576161, "link": "https://stackoverflow.com/questions/58576161/can-i-input-regular-expressions-at-run-time/58576220#58576220", "title": "Can I input regular expressions at run time", "body": "<p>The <code>/</code>s are only needed to quote an expression as a regex literal. The value of a regex itself never needs to be enclosed in <code>/</code>s. So you can simply input <code>abc</code> or <code>a.*z</code> instead to find a match.</p>\n"}], "owner": {"reputation": 43, "user_id": 1090947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ae35f9acfb250af660e80ba42e714f?s=128&d=identicon&r=PG", "display_name": "odbdux", "link": "https://stackoverflow.com/users/1090947/odbdux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572172196, "creation_date": 1572142709, "last_edit_date": 1572143531, "question_id": 58576161, "link": "https://stackoverflow.com/questions/58576161/can-i-input-regular-expressions-at-run-time", "title": "Can I input regular expressions at run time", "body": "<p>I wish to input a regular expression from a file or STDIN at run-time</p>\n\n<p>I have tried the code below.</p>\n\n<pre><code>$mystr = \"abcdefghijklmnopqrstuvwxyz\";\nwhile ($regexp = &lt;STDIN&gt;) {\n    chomp $regexp;\n    if ($mystr =~ $regexp) {\n        print \"pattern matched\\n\";\n    } else {\n        print \"pattern did NOT match\\n\";\n    }\n</code></pre>\n\n<p>Regardless of the regular expression I input there is no match.\nI am inputting <code>m/abc/</code> for example.</p>\n"}, {"tags": ["rest", "perl", "software-design", "multitasking", "dancer"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572119836, "post_id": 58573575, "comment_id": 103464685, "body": "It might be best/simplest to output the job&#39;s status (e.g. to a JSON file) to be used by an independent web server."}, {"owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572120486, "post_id": 58573575, "comment_id": 103464842, "body": "@ikegami: Thank you very much for the suggestion. Actually, most data that should be returned to the client is already available in files, so that would work well. On the other side, this would still not allow any &quot;interaction&quot; in the sense that the HTTP request cancels the sleep or causes different data to be processed in the next loop iteration?"}, {"owner": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "edited": false, "score": 0, "creation_date": 1572261510, "post_id": 58573575, "comment_id": 103492989, "body": "dunno about <code>dancer</code> but in the old days we solve a problem like this with <a href=\"https://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\">select</a> because it cans listening (http) handlers and takes the last parameter as the timeout"}, {"owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "reply_to_user": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "edited": false, "score": 1, "creation_date": 1572271790, "post_id": 58573575, "comment_id": 103497872, "body": "@T&#39;East: Thank you very much. I think <code>select</code> may work in this case. I will need to have a look into how I can avoid writing &quot;my own webserver&quot; in the end (just for a few endpoints :) ), but that should be doable :). Thinking of it, while the main loop processes data, a select-based server will likely not answer any requests? Could be acceptable as of now, but I still think there should be a better solution?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572273202, "post_id": 58573575, "comment_id": 103498629, "body": "<a href=\"https://mojolicious.org\" rel=\"nofollow noreferrer\">Mojolicious</a> is ideal for combining a web server with your own non-blocking tasks, through its integrated event loop. Though I would still recommend two different services that communicate via a database."}, {"owner": {"reputation": 81, "user_id": 5305573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iac8F.jpg?s=128&g=1", "display_name": "djtsheps", "link": "https://stackoverflow.com/users/5305573/djtsheps"}, "edited": false, "score": 0, "creation_date": 1572274343, "post_id": 58573575, "comment_id": 103499270, "body": "@linux-fan do you have access to any caching (e.g.Redis) or any other lite DB that you can use to keep state. The script can sleep and/or skip sleep, scan filesystem and perform actions based on the state stored in the cache. Your rest actions can update/set the state in the cache"}, {"owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "edited": false, "score": 0, "creation_date": 1572276694, "post_id": 58573575, "comment_id": 103500605, "body": "Thanks all for the good suggestions. I will have a look into Mojolicious and think of how complex it is to integrate a database (there are no hard restrictions against it really, I am just trying to keep the design as simple as possible :) )."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "edited": false, "score": 0, "creation_date": 1572366321, "post_id": 58610365, "comment_id": 103533479, "body": "Thank you very much for the suggestion. I think I now have a lot of things to try :) . Once I know how it worked in the end, I will report the results here and &quot;accept&quot; an answer. Two things immediately come to my mind thinking of implementing this with Threads: (1) I know that Dancer provides an integrated logging mechanism. Can I still use that logging mechanism (for custom logs from my thread) by just calling the log routines from the separate thread (I woudl think the answer is no, but maybe I have overlooked something?), (2) Is there any specific reason for using <code>shared</code> over queues?"}, {"owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "edited": false, "score": 0, "creation_date": 1585341047, "post_id": 58610365, "comment_id": 107735398, "body": "In recent times, I finally managed to work out a solution. And in the end it was exactly this: The processing loop is now in a background thread, taking requests through a queue. Additionally, the periodic check is in a separate loop -- performing checks at regular intervals and finally, the REST interface is implemented with Dancer2. Thanks all :)"}], "tags": [], "owner": {"reputation": 186, "user_id": 4685758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6459711581ed5aef648fae9d8070cad6?s=128&d=identicon&r=PG", "display_name": "Bernhard M.", "link": "https://stackoverflow.com/users/4685758/bernhard-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1572362267, "creation_date": 1572362267, "answer_id": 58610365, "question_id": 58573575, "link": "https://stackoverflow.com/questions/58573575/perl-script-running-a-periodic-main-task-and-providing-a-rest-interface/58610365#58610365", "title": "Perl script running a periodic (main) task and providing a REST interface", "body": "<p>You could try to launch your processing loop in a background thread, before you run <code>start;</code>.</p>\n\n<p>See <code>man perlthrtut</code></p>\n\n<p>You probably want <code>use threads::shared;</code> to declare some variables shared between the REST part and the background thread. Or use dedicated queues/event mechanisms.</p>\n"}], "owner": {"reputation": 321, "user_id": 11959417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6ZzrJ.png?s=128&g=1", "display_name": "linux-fan", "link": "https://stackoverflow.com/users/11959417/linux-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 58610365, "answer_count": 1, "score": 1, "last_activity_date": 1572362267, "creation_date": 1572114701, "question_id": 58573575, "link": "https://stackoverflow.com/questions/58573575/perl-script-running-a-periodic-main-task-and-providing-a-rest-interface", "title": "Perl script running a periodic (main) task and providing a REST interface", "body": "<p>I am working on a Perl script which does some periodic processing based on file-system contents.\nThe overall structure is like this:</p>\n\n<pre><code># ... initialization...\n\nwhile(1) {\n    # ... scan filesystem, perform actions depending on changes detected ...\n    sleep 5;\n}\n</code></pre>\n\n<p>I would like to add the ability to input some data into this process by means of exposing an interface through HTTP. E.g. I would like to add an endpoint to skip the sleep, but also some means to input data that is processed in the next iteration. Additionally, I would like to be able to query some of the program's status through HTTP (i.e. a simple <code>fork()</code> to run the webserver-part in a separate process is insufficient?)</p>\n\n<p>So far I have already used the <code>Dancer2</code> framework once but it has a <code>start;</code> call that blocks and thus does not allow any other tasks (like my loop) to run. Additionally, I could of course move the code which is currently inside the loop to an endpoint exposed through <code>Dancer2</code> but then I would need to call that periodically (though an external program?) which seems to be quite an obscure indirection compared to just having the webserver-part running in background.</p>\n\n<p>Is it possible to unobtrusively (i.e. without blocking the program) add a REST-server capability to a Perl script? If yes: Which modules would be used for the purpose? If no: Should I really implement an external process to periodically invoke a certain endpoint or pursue a different solution altogether?</p>\n\n<p>(I have tried to add a <code>dancer2</code> tag, but could not do so due to insufficient reputation. Do not be mislead by this: I have so far only tried with <code>Dancer2</code> not the <code>Dancer</code> (v.1))</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "edited": false, "score": 0, "creation_date": 1572109513, "post_id": 58572840, "comment_id": 103462299, "body": "Exactly what I need. Thank you."}, {"owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "edited": false, "score": 0, "creation_date": 1572110347, "post_id": 58572840, "comment_id": 103462490, "body": "So, $psnr_Y will hold the whole line like this  P=65535.000000 MSE=304531.729854 PSNR=41.493141dB. Which is fine for now. But do you know how to  parse the line to get only PSNR value stored in perl variable? For example, to have $psnr_final = 41.493141 to be used later by the script?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "edited": false, "score": 0, "creation_date": 1572111035, "post_id": 58572840, "comment_id": 103462681, "body": "@MilosR.: I updated my answer with a regex solution to parse the result of the command."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 3, "last_activity_date": 1572110999, "last_edit_date": 1572110999, "creation_date": 1572109167, "answer_id": 58572840, "question_id": 58572804, "link": "https://stackoverflow.com/questions/58572804/how-to-get-variable-calculated-inside-simple-program-to-be-used-inside-perl-scri/58572840#58572840", "title": "How to get variable calculated inside simple program to be used inside perl script?", "body": "<p>I think that you are looking for the backticks operator:</p>\n\n<pre><code>$psnr_Y = `$psnr_command_line`;\n</code></pre>\n\n<p>Unlike function <code>system()</code>, which returns the system exit code of the command, the backticks operator return the output of the program (ie what it sent to <code>STDOUT</code>).</p>\n\n<p>Once the command is executed, you can parse the result with a regex, like:</p>\n\n<pre><code>my ($val) = ($psnr_Y =~ m/PSNR=(\\S+)/);\n</code></pre>\n\n<hr>\n\n<p>Reference: <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>perlop</code> - Quote-Like-Operators</a>:</p>\n\n<blockquote>\n  <p><code>STRING</code>\n  A string which is (possibly) interpolated and then executed as a system command with <code>/bin/sh</code> or its equivalent. Shell wildcards, pipes, and redirections will be honored. <strong>The collected standard output of the command is returned</strong>; standard error is unaffected.</p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 6077470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209079461209527/picture?type=large", "display_name": "MilosR.", "link": "https://stackoverflow.com/users/6077470/milosr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58572840, "answer_count": 1, "score": 3, "last_activity_date": 1572110999, "creation_date": 1572108932, "question_id": 58572804, "link": "https://stackoverflow.com/questions/58572804/how-to-get-variable-calculated-inside-simple-program-to-be-used-inside-perl-scri", "title": "How to get variable calculated inside simple program to be used inside perl script?", "body": "<p>Within the perl script I have to call simple program that calculates psnr. I do it by:</p>\n\n<pre><code>$psnr_command_line = '';\n$psnr_command_line = \"/snr file1 file2 width height\"\n</code></pre>\n\n<p>After I created command line, I simply call the system in perl:</p>\n\n<pre><code>$psnr_Y = system ($psnr_command_line);\n</code></pre>\n\n<p>In this case system returns 0 if command is successfully executed. But I need something else to be stored in $psnr_Y. Of course I need actual value of the psnr that has been calculated inside the program.</p>\n\n<p>So, till now I have the following. Inside simple snr program I print result of the calculations (psnr in this case), so on command line after I run perl script I get printed something like these:\nP=65535.000000 MSE=304531.729854 PSNR=41.493141dB</p>\n\n<p>I was wandering if somehow I can get PSNR value to $psnr_Y value in perl? Maybe somehow to redirect print to perl's variable and than simple parse that line to get PSNR?</p>\n\n<p>Any ideas? Any other approaches are welcome.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 0, "last_activity_date": 1572097373, "last_edit_date": 1572097373, "creation_date": 1572096854, "answer_id": 58571254, "question_id": 58570891, "link": "https://stackoverflow.com/questions/58570891/perl-reference-in-array-why-deference-create-a-new-reference-value/58571254#58571254", "title": "Perl reference in array why deference create a new reference value", "body": "<p>This line</p>\n\n<pre><code>my @pusharray=@$ref;\n</code></pre>\n\n<p>creates a copy.</p>\n"}, {"comments": [{"owner": {"reputation": 788, "user_id": 8446934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-O3VXiD4ddPA/AAAAAAAAAAI/AAAAAAAABDg/Iv83w53heE8/photo.jpg?sz=128", "display_name": "Vipin", "link": "https://stackoverflow.com/users/8446934/vipin"}, "edited": false, "score": 0, "creation_date": 1572100755, "post_id": 58571551, "comment_id": 103460177, "body": "I was try to understand why it was not printing my complete array. Thanks, I understood now....."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1572100182, "last_edit_date": 1572100182, "creation_date": 1572099236, "answer_id": 58571551, "question_id": 58570891, "link": "https://stackoverflow.com/questions/58570891/perl-reference-in-array-why-deference-create-a-new-reference-value/58571551#58571551", "title": "Perl reference in array why deference create a new reference value", "body": "<p>You get a different value in <code>pushdata</code> because you print something different. <code>print \\$example;</code> prints a reference to the scalar <code>$example</code>, not the reference to the array it contains. To print the reference to the array like you did inside of <code>pushdata</code>, you should have used <code>print $example;</code>.</p>\n\n<p>(When printing a reference to a scalar, it uses <code>REF</code> if the scalar contains a reference, <code>GLOB</code> if it contains a glob, and <code>SCALAR</code> otherwise.)</p>\n\n<p>While you didn't ask this, the reason your code doesn't work is because you are adding to <code>@pusharray</code>, not the array referenced by <code>$example</code> and <code>$ref</code>. <code>@pusharray = @$ref;</code> copies the contents of the array.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nsub pushdata{\n   my ($ref, $value) = @_;\n\n   print(\"\\$ref:       $ref\\n\");\n   push(@$ref, $value*2);                    # Adds to @$ref aka @$example\n\n   my @local = @$ref;\n   print(\"\\\\\\@local:    \", \\@local, \"\\n\");\n   push(@local, $value*3);                   # Adds to @local.\n}\n\nmy $example = [ 1, 1, 1, 1 ];\nprint(\"\\$example:   $example\\n\");\nprint(\"\\\\\\@\\$example: \", \\@$example, \"\\n\");\n\npushdata($example, 10) for 1..4;\nprint(Dumper($example));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$example:   ARRAY(0x1ea5e0)\n\\@$example: ARRAY(0x1ea5e0)\n$ref:       ARRAY(0x1ea5e0)\n\\@local:    ARRAY(0x6d0470)\n$ref:       ARRAY(0x1ea5e0)\n\\@local:    ARRAY(0x6d0470)\n$ref:       ARRAY(0x1ea5e0)\n\\@local:    ARRAY(0x6d0470)\n$ref:       ARRAY(0x1ea5e0)\n\\@local:    ARRAY(0x6d0470)\n$VAR1 = [\n          1,\n          1,\n          1,\n          1,\n          20,\n          20,\n          20,\n          20\n        ];\n</code></pre>\n"}], "owner": {"reputation": 788, "user_id": 8446934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-O3VXiD4ddPA/AAAAAAAAAAI/AAAAAAAABDg/Iv83w53heE8/photo.jpg?sz=128", "display_name": "Vipin", "link": "https://stackoverflow.com/users/8446934/vipin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58571551, "answer_count": 2, "score": 0, "last_activity_date": 1572100182, "creation_date": 1572094058, "question_id": 58570891, "link": "https://stackoverflow.com/questions/58570891/perl-reference-in-array-why-deference-create-a-new-reference-value", "title": "Perl reference in array why deference create a new reference value", "body": "<p>I am learning perl script. I was using below example code to understand referencing in perl</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\n\nmy $example;\n\nsub pushdata{\n  my ($ref,$value)=@_;\n  print 'Reference of array received in pushdata sub  @{$example} ', $ref,\"\\n\";\n  my @pusharray=@$ref;\n  print 'Reference of array passed to the push sub @pusharray',\\@pusharray,\"\\n\";\n  push(@pusharray,$value);\n}\n\nprint 'Before creating array Reference of $example ', \\$example,\"\\n\";\n$example-&gt;[0]=1;\n$example-&gt;[1]=1;\n$example-&gt;[2]=1;\n$example-&gt;[3]=1;\nprint 'After creating array Reference of $example ', \\$example,\"\\n\";\npushdata(\\@{$example},10);\npushdata(\\@{$example},10);\npushdata(\\@{$example},10);\npushdata(\\@{$example},10);\npushdata(\\@{$example},10);\nprint Dumper($example),\"\\n\";\n</code></pre>\n\n<p>And the output of this code is </p>\n\n<pre><code>1.Before creating array Reference of $example SCALAR(0x561e878b47f8)\n2.After creating array Reference of $example REF(0x561e878b47f8)\n3.Reference of array received in pushdata sub  @{$example} ARRAY(0x561e87888470)\n4.Reference of array passed to the push sub @pusharrayARRAY(0x561e878b4960)\n5.Reference of array received in pushdata sub  @{$example} ARRAY(0x561e87888470)\n6.Reference of array passed to the push sub @pusharrayARRAY(0x561e878b4960)\n7.Reference of array received in pushdata sub  @{$example} ARRAY(0x561e87888470)\n8.Reference of array passed to the push sub @pusharrayARRAY(0x561e878b4960)\n9.Reference of array received in pushdata sub  @{$example} ARRAY(0x561e87888470)\n10.Reference of array passed to the push sub @pusharrayARRAY(0x561e878b4960)\n11.Reference of array received in pushdata sub  @{$example} ARRAY(0x561e87888470)\n12.Reference of array passed to the push sub @pusharrayARRAY(0x561e878b4960)\n13.$VAR1 = [\n          1,\n          1,\n          1,\n          1\n        ];\n</code></pre>\n\n<p>Q1.Here <strong>outputline1</strong> the scalar value is SCALAR0x561e878b47f8. After assigning array to scalar value it change from SCALAR to Ref type <strong>outputline2</strong>. Is it due i did an operation on this scalar value and assigned array?</p>\n\n<p>Q2. If we see <strong>outputline3</strong> i tried to print the ref value which is received here .It is not same as the \\$example reference why?</p>\n"}, {"tags": ["perl", "mojolicious", "dbix-class"], "comments": [{"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1572112762, "post_id": 58568732, "comment_id": 103463060, "body": "Please show us the code which outputs the ordered usernames as there is no problem with your function."}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1572126578, "post_id": 58568732, "comment_id": 103466028, "body": "This should work... Can you <a href=\"https://metacpan.org/pod/distribution/DBIx-Class/lib/DBIx/Class/Manual/Troubleshooting.pod#Tracing-SQL\" rel=\"nofollow noreferrer\">enable SQL tracing</a> by setting environment variable <code>DBIC_TRACE</code> (<code>export DBIC_TRACE=1</code>)? Then you can check the text of the SQL queries in your console or logs. Is the <code>order by</code> clause always the same?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1572297633, "post_id": 58568732, "comment_id": 103509619, "body": "Thanks for the trace. You can see that the <code>order by</code> clause in the query matches your code: <code>ORDER BY date_begin DESC, username ASC</code>. Did you get the results with the correct ordering in your code that time?"}, {"owner": {"reputation": 31, "user_id": 12272536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mApggj3kLjSfFGzaTW5ZuG3yYyPw4UdDAktpry-uA=k-s128", "display_name": "Alex G", "link": "https://stackoverflow.com/users/12272536/alex-g"}, "edited": false, "score": 0, "creation_date": 1572328637, "post_id": 58568732, "comment_id": 103515885, "body": "Sometimes I get the right answer sometimes I don&#39;t, is flaky.It must to display user1 and user2, but were displayed user5 and user1.Also I saw that order by work properly."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 12272536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mApggj3kLjSfFGzaTW5ZuG3yYyPw4UdDAktpry-uA=k-s128", "display_name": "Alex G", "link": "https://stackoverflow.com/users/12272536/alex-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1572337614, "creation_date": 1572337614, "answer_id": 58603655, "question_id": 58568732, "link": "https://stackoverflow.com/questions/58568732/sorting-existing-users-in-the-database-by-multiple-columns/58603655#58603655", "title": "Sorting existing users in the database by multiple columns", "body": "<p>This is because user5 is added a second later in the database compared to users who have level 1 and because of this they were displayed in that order, because they are sorted descending with order by function by data_begin.</p>\n"}], "owner": {"reputation": 31, "user_id": 12272536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mApggj3kLjSfFGzaTW5ZuG3yYyPw4UdDAktpry-uA=k-s128", "display_name": "Alex G", "link": "https://stackoverflow.com/users/12272536/alex-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58603655, "answer_count": 1, "score": 3, "last_activity_date": 1572337614, "creation_date": 1572073186, "last_edit_date": 1572297482, "question_id": 58568732, "link": "https://stackoverflow.com/questions/58568732/sorting-existing-users-in-the-database-by-multiple-columns", "title": "Sorting existing users in the database by multiple columns", "body": "<p>I used the sort function</p>\n\n<pre><code>sub sort_users {\n  my $self = shift;\n  return $self-&gt;search(undef, { order_by =&gt; [{ -desc =&gt; 'data_begin' },\n    { -asc =&gt; 'username' }]});\n}\n</code></pre>\n\n<p>to filter users according to the start date, and in case of equality to be sorted by username, the database looks as follows:</p>\n\n<pre><code>user1 2019-09-26 00:00:00\nuser2 2019-09-26 00:00:00\nuser3 2019-09-26 00:00:00\nuser4 2019-09-26 00:00:00\n</code></pre>\n\n<p>following sortings sometimes users are displayed in the following mode </p>\n\n<pre><code>user2, user3, user1, user4\n</code></pre>\n\n<p>other times</p>\n\n<pre><code>user1, user2, user3, user4.\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>I ran with <code>DBIC_TRACE = 1</code> and I got:</p>\n\n<pre><code>SELECT COUNT( * ) FROM user_access_rights me WHERE ( ( access_rights_id = ? AND date_end &gt;= ? ) ): 'level1', '2019-10-28 07:43:30+0000'\nSELECT access_rights_recipient.username, access_rights_recipient.last_login, me.access_rights_id FROM user_access_rights me  JOIN users access_rights_recipient ON access_rights_recipient.username = me.username WHERE ( ( access_rights_id = ? AND date_end &gt;= ? ) ) ORDER BY date_begin DESC, username ASC LIMIT ?: 'level1', '2019-10-28 07:43:30+0000', '2'\n\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level1', '2019-10-28T07:43:29', '2019-10-29T07:43:29', 'user1'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level1', '2019-10-28T07:43:29', '2019-10-29T07:43:29', 'user2'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level1', '2019-10-28T07:43:29', '2019-10-29T07:43:29', 'user3'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level1', '2019-10-28T07:43:29', '2019-10-29T07:43:29', 'user4'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level1', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user5'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user6'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user7'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user8'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user9'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user10'\nINSERT INTO user_access_rights ( access_rights_id, date_begin, date_end, username) VALUES ( ?, ?, ?, ? ) RETURNING id: 'level2', '2019-10-28T07:43:30', '2019-10-29T07:43:30', 'user11'\n</code></pre>\n\n<p>Requires user1 and user2 to be displayed, instead are displayed user5 and user1</p>\n"}, {"tags": ["regex", "csv", "perl", "split"], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "edited": false, "score": 0, "creation_date": 1572072290, "post_id": 58568631, "comment_id": 103454894, "body": "How would I then print that to a CSV? 1 column for field 1 and another column for field 2?"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "edited": false, "score": 0, "creation_date": 1572246090, "post_id": 58568631, "comment_id": 103487057, "body": "Instead of printing it to the terminal, print it to a filehandle...simply wrap your code around this..."}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1572071976, "creation_date": 1572071976, "answer_id": 58568631, "question_id": 58568516, "link": "https://stackoverflow.com/questions/58568516/split-single-long-line-from-text-file-into-multiple-lines-csv/58568631#58568631", "title": "Split single long line from text file into multiple lines (CSV)", "body": "<p>This code will get you a tab separated CSV:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line = 'JACOB2345@gmail.com:YdjfkoweU, LUKE453@gmail.com:YdjfkoweU, WESLEY233@gmail.com:YdjfkoweU, Bruce2423@gmail.com:YdjfkoweU, Angel@gmail.com:YdjfkoweU, Lukder@gmail.com:YdjfkoweU';\n\nprint \"Field 1\\tField 2\\n\";\n\nforeach my $rec (split(/,\\s*/,$line)) {\n    chomp($rec);\n    $rec =~ s/:/\\t/;\n\n    print $rec,\"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "is_accepted": false, "score": 1, "last_activity_date": 1572118646, "last_edit_date": 1572118646, "creation_date": 1572108622, "answer_id": 58572769, "question_id": 58568516, "link": "https://stackoverflow.com/questions/58568516/split-single-long-line-from-text-file-into-multiple-lines-csv/58572769#58572769", "title": "Split single long line from text file into multiple lines (CSV)", "body": "<pre><code>use strict;\nuse warnings;\n\nwhile(my $line = &lt;DATA&gt;) {\n  chomp($line);\n  my @rows = split/,\\s{1}/, $line;\n  foreach my $row (@rows) {\n    my ($field_1, $filed_2) = split/:/, $row;\n    print \"$field_1&lt;=&gt;$filed_2\\n\";\n  }\n}\n\n\n\n__DATA__\nJACOB2345@gmail.com:YdjfkoweU, LUKE453@gmail.com:YdjfkoweU, WESLEY233@gmail.com:YdjfkoweU, Bruce2423@gmail.com:YdjfkoweU, Angel@gmail.com:YdjfkoweU, Lukder@gmail.com:YdjfkoweU,\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 8786131, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ee5e6ad5dea4c2eb078e306cb070d2e7?s=128&d=identicon&r=PG", "display_name": "Chris Simmons", "link": "https://stackoverflow.com/users/8786131/chris-simmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572212915, "creation_date": 1572070465, "last_edit_date": 1572212915, "question_id": 58568516, "link": "https://stackoverflow.com/questions/58568516/split-single-long-line-from-text-file-into-multiple-lines-csv", "title": "Split single long line from text file into multiple lines (CSV)", "body": "<p>I have a text file that is a long single line, which I need to split into multiple lines that I can print to a CSV file. I have tried multiple methods, and I'm super close, but my data output is incorrect. I'm stuck on splitting the string into array. </p>\n\n<p>I've tried the code below and, while it is splitting the lines semi-properly, the data is not split into array. </p>\n\n<pre><code>open (INPUT, '&lt;', $proxy_file ) or die \"Cannot open proxy file\\n\";\nopen(OUTPUT, '&gt;', $complete) or die \"Cannot create $complete.'\\n'\";\nwhile(my $line = &lt;INPUT&gt;){\n    chomp $line;\n    $line =~ s/,//g;\n    $line =~ s/://g;\n    my @fields = split /(?&lt;=\\.com)/, $line;\n\n    print OUTPUT $_, \"\\n\" for @fields;\n</code></pre>\n\n<p>This is the example data</p>\n\n<pre><code>JACOB2345@gmail.com:YdjfkoweU, LUKE453@gmail.com:YdjfkoweU, WESLEY233@gmail.com:YdjfkoweU, Bruce2423@gmail.com:YdjfkoweU, Angel@gmail.com:YdjfkoweU, Lukder@gmail.com:YdjfkoweU, \n</code></pre>\n\n<p>I want to split it to: </p>\n\n<pre><code>FIELD 1             FIELD2\nJACOB2345@gmail.com YdjfkoweU\nLUKE453@gmail.com YdjfkoweU\n</code></pre>\n\n<p>etc</p>\n"}, {"tags": ["perl", "outlook", "msg"], "answers": [{"comments": [{"owner": {"reputation": 2901, "user_id": 227779, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/04b9cea001c22cc62e650a3180a1123a?s=128&d=identicon&r=PG", "display_name": "Per Lundberg", "link": "https://stackoverflow.com/users/227779/per-lundberg"}, "reply_to_user": {"reputation": 13, "user_id": 12275551, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCFk_IwxGmqhXXQ1vf4rg01ESjfol4QoGQ3lHJc=k-s128", "display_name": "Christoph", "link": "https://stackoverflow.com/users/12275551/christoph"}, "edited": false, "score": 0, "creation_date": 1572118697, "post_id": 58565721, "comment_id": 103464439, "body": "Glad to hear! :) Feel free to use the green checkmark to &quot;mark as answer&quot; if you would like to give me some more points. ;)"}], "tags": [], "owner": {"reputation": 2901, "user_id": 227779, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/04b9cea001c22cc62e650a3180a1123a?s=128&d=identicon&r=PG", "display_name": "Per Lundberg", "link": "https://stackoverflow.com/users/227779/per-lundberg"}, "is_accepted": true, "score": 1, "last_activity_date": 1572037492, "creation_date": 1572037492, "answer_id": 58565721, "question_id": 58565590, "link": "https://stackoverflow.com/questions/58565590/reading-and-text-matching-outlook-msg-file-in-perl/58565721#58565721", "title": "Reading and text matching Outlook .msg file in Perl", "body": "<p>I don't have any <code>.msg</code> file handy to test with but how about replacing this line:</p>\n\n<pre><code>print $mime-&gt;as_string;\n</code></pre>\n\n<p>...with a statement like this?</p>\n\n<pre><code>print $mime-&gt;as_string if $mime-&gt;as_string =~ /test_string/;\n</code></pre>\n\n<p>This should do the trick as far as \"print its contents if it contains test_string\" is concerned.</p>\n\n<p>If you also want to loop over the whole list of <code>*.msg</code> files, try something like this:</p>\n\n<pre><code>my @files = glob \"C:/temp\";\n\nforeach my $file (@files) {\n    open_msg($file);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12275551, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCFk_IwxGmqhXXQ1vf4rg01ESjfol4QoGQ3lHJc=k-s128", "display_name": "Christoph", "link": "https://stackoverflow.com/users/12275551/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58565721, "answer_count": 1, "score": 1, "last_activity_date": 1572041303, "creation_date": 1572036742, "last_edit_date": 1572041303, "question_id": 58565590, "link": "https://stackoverflow.com/questions/58565590/reading-and-text-matching-outlook-msg-file-in-perl", "title": "Reading and text matching Outlook .msg file in Perl", "body": "<p>I am having trouble text matching .msg files using Perl. The first block of code works to print the entire message, but I just need the file name if it contains a certain string. </p>\n\n<pre><code>    use warnings;\n    use strict;\n    use Email::Outlook::Message;\n    use Email::MIME;\n\n    my $sourceDir = \"c:/temp\";\n\n    open_msg(\"test.msg\");\n\n    sub open_msg {\n       my $verbose = 0;\n       my $msgFile = shift;\n       my $origMsg = new Email::Outlook::Message \"$sourceDir/$msgFile\", $verbose or die \"$!\";\n       my $mime = $origMsg-&gt;to_email_mime;\n       print $mime-&gt;as_string;\n       return ($origMsg);\n    }\n</code></pre>\n\n<p>The .msg files are in a folder (on Windows). I have used below code to print the file names of .txt files, but I need to use something similar for .msg files.  </p>\n\n<pre><code>#works for .txt files\nmy @files = glob \"C:/temp\";\n\nforeach my $file (@files) {\nopen   (FILE, \"$file\");\nwhile(my $line= &lt;FILE&gt; ){\n    print \"$file\" if $line =~ /test_string/;\n}\nclose FILE; \n} \n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "is_accepted": true, "score": 1, "last_activity_date": 1572031128, "creation_date": 1572031128, "answer_id": 58564523, "question_id": 58563544, "link": "https://stackoverflow.com/questions/58563544/combining-two-different-multi-row-strings-into-one-using-perl/58564523#58564523", "title": "Combining two different multi-row strings into one using Perl", "body": "<p>Would be good to have a minimal example to see how you're approaching this problem.  Additionally, there are a lot of things about your input file that are not clear.  For example, are <code>TMS</code> and <code>TDI</code> always paired in the file, or do you have to check for that?  Will you always take the next <code>TDI</code> instance to pair with the preceeding <code>TMS</code> event, or can they be more disjointed?  Does <code>TMS</code> always preceed <code>TDI</code> or can they be reversed?</p>\n\n<p>One simple way to do this assuming that the data look just like you've indicated in your example, might be to read each line and store the data in one array for the <code>TMS</code> string and one array for the <code>TDI</code> string.  If both arrays are full, then we have a pair to output, so output the pair and clear the arrays for the next events.  Otherwise, read the next line to get the <code>TDI</code> data:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy (@first, @second);\nwhile (my $elem = &lt;DATA&gt;) {\n    ($elem =~ /^TMS/)\n        ? (@first = read_string($elem))\n        : (@second = read_string($elem));\n    if (@second) {\n        for my $index (0..$#first) {\n            print \"$first[$index]$second[$index]\\n\";\n        }\n        print \"\\n\";\n        @first = @second = ();\n    }\n}\n\nsub read_string {\n    my $string = shift;\n    my @bits = grep {/\\d/} split('', $string);\n    return reverse(@bits);\n}\n\n\n__DATA__\nTMS: xxxxxxx11110000\nTDI: xxxxxxx00001111\nTMS: xxxx00001111\nTDI: xxxx11110000\n</code></pre>\n\n<p>Output from this would be:</p>\n\n<pre><code>01\n01\n01\n01\n10\n10\n10\n10\n\n10\n10\n10\n10\n01\n01\n01\n01\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 1, "last_activity_date": 1572034671, "creation_date": 1572034671, "answer_id": 58565222, "question_id": 58563544, "link": "https://stackoverflow.com/questions/58563544/combining-two-different-multi-row-strings-into-one-using-perl/58565222#58565222", "title": "Combining two different multi-row strings into one using Perl", "body": "<p>What you want is a zip operation. Conveniently <a href=\"https://metacpan.org/pod/List::MoreUtils#zip-ARRAY1-ARRAY2-[-ARRAY3-...-]\" rel=\"nofollow noreferrer\">List::MoreUtils</a> provides one for you.</p>\n\n<pre><code>@x = qw/a b c d/;\n@y = qw/1 2 3 4/;\n\n# returns [a, 1], [b, 2], [c, 3], [d, 4]\n@z = zip6 @x, @y;         \n</code></pre>\n\n<p>To get the input for zip either put your resultants into an array in the first place, or split your input string.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1572038348, "creation_date": 1572038348, "answer_id": 58565862, "question_id": 58563544, "link": "https://stackoverflow.com/questions/58563544/combining-two-different-multi-row-strings-into-one-using-perl/58565862#58565862", "title": "Combining two different multi-row strings into one using Perl", "body": "<p>hobbs answer from <a href=\"https://stackoverflow.com/questions/1480023/code-golf-lasers/1480251#1480434\">Code Golf: Lasers</a> was solving quite a different problem, but part of the solution was about how to \"rotate\" a multi-line string, and it could be useful here.</p>\n\n<p>First, don't put each bit on its own line, just separate bits from different rows of input on different lines. Put the multi-line string into <code>$_</code>.</p>\n\n<pre><code>$_ = '0000111111110000\n1111000000001111';\n</code></pre>\n\n<p>Now execute the following code:</p>\n\n<pre><code>$_ = do {\n    my $o;\n    $o .= \"\\n\" while s/^./$o.=$&amp;,\"\"/meg;\n    $o };\n</code></pre>\n\n<p>(the substitution in hobbs's algorithm started with <code>s/.$/.../</code>. By using <code>s/^./.../</code>, it becomes an algorithm for transposition rather than for rotation)</p>\n\n<p>Input:</p>\n\n<pre><code>$_ = '0000111111110000\n1111000000001111';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01\n01\n01\n01\n10\n10\n10\n10\n10\n10\n10\n10\n01\n01\n01\n01\n</code></pre>\n\n<p>This algorithm easily generalizes to any number of rows and columns in the input.</p>\n\n<p>Input:</p>\n\n<pre><code>$_='ABCDE\n12345\nFGHIJ\n67890';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A1F6\nB2G7\nC3H8\nD4I9\nE5J0\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12275235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a43d76294043cae9660fe700570295?s=128&d=identicon&r=PG&f=1", "display_name": "DesignEngineer8756", "link": "https://stackoverflow.com/users/12275235/designengineer8756"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58564523, "answer_count": 3, "score": -1, "last_activity_date": 1572038348, "creation_date": 1572026539, "question_id": 58563544, "link": "https://stackoverflow.com/questions/58563544/combining-two-different-multi-row-strings-into-one-using-perl", "title": "Combining two different multi-row strings into one using Perl", "body": "<p>I'm having some issues trying to combine two multi-row strings into one after performing regular expression manipulations on those strings. As an example, I start with data in this form:</p>\n\n<p>TMS: xxxxxxx11110000</p>\n\n<p>TDI: xxxxxxx00001111</p>\n\n<p>TMS: xxxx00001111</p>\n\n<p>TDI: xxxx11110000</p>\n\n<p>To get it in the form I need, I search the file for the key word \"TMS: \", extract just the data, use regular expressions to remove the \"x's\", reverse the data, and then place each bit on its own line and store it in a string. Resultant string would look like this:</p>\n\n<pre><code>0\n0\n0\n0\n1\n1\n1\n1\n</code></pre>\n\n<p>I then search the file for \"TDI: \" and repeat that same process. The last step would be to concatenate the first string with the second string to get the following output (given the example above):</p>\n\n<pre><code>01\n01\n01\n01\n10\n10\n10\n10\n\n10\n10\n10\n10\n01\n01\n01\n01\n</code></pre>\n\n<p>However, when I concatenate the two strings, what I'm getting as an output right now is </p>\n\n<pre><code>0\n0\n0\n0\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n1\n1 \n</code></pre>\n\n<p>Is there a way to get the result I'm looking for without changing too much about my process? I've tried using the split command, chomp command, etc. without any luck. </p>\n"}, {"tags": ["perl", "latex"], "comments": [{"owner": {"reputation": 11157, "user_id": 2777074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XukTI.png?s=128&g=1", "display_name": "samcarter_is_at_topanswers.xyz", "link": "https://stackoverflow.com/users/2777074/samcarter-is-at-topanswers-xyz"}, "edited": false, "score": 0, "creation_date": 1572024088, "post_id": 58562209, "comment_id": 103444824, "body": "I&#39;m not sure what exactly you are trying to do, but maybe have a look at the <code>datatool</code> package? This might be easier than doing this with perl"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1572030513, "post_id": 58562209, "comment_id": 103447344, "body": "Please provide an example of expected output"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1572032467, "creation_date": 1572032467, "answer_id": 58564781, "question_id": 58562209, "link": "https://stackoverflow.com/questions/58562209/perltex-how-to-output-to-a-latexfile/58564781#58564781", "title": "Perltex: How to output to a latexfile?", "body": "<p>Here is an example of how you can create a table. This sorts the columns of <code>verfile</code> according to the content of the first column, and then creates a LaTeX table:</p>\n\n<pre><code>\\documentclass{article}\n\\usepackage{perltex}\n\\begin{document}\n\\perlnewcommand{\\verfile}[0]{\n  open (my $VF, '&lt;', 'verfile') or die \"$!\";\n  my @lines;\n  while (my $line = &lt;$VF&gt;) {\n      chomp $line;\n      my @fields = split /&amp;/, $line;\n      push @lines, \\@fields;\n  }\n  close $VF;\n  my @sorted = sort {$a-&gt;[0] cmp $b-&gt;[0]} @lines;\n  my $result = '\n    \\begin{table}\n    \\centering\n    \\begin{tabular}{cccccc}\n  ';\n  for my $line (@sorted) {\n      $result .= (join ' &amp; ', @$line) . \"\\n\";\n  }\n  $result .= '\\end{tabular}\n  \\end{table}\n  ';\n  return $result;\n} % done\n\n\\verfile\n\\end{document}\n</code></pre>\n\n<p>Compile this file using <code>perltex --nosafe test.tex</code></p>\n"}], "owner": {"reputation": 167, "user_id": 12119142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c373d1177260d45078f9faac5fc4d77?s=128&d=identicon&r=PG", "display_name": "gizeh", "link": "https://stackoverflow.com/users/12119142/gizeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58564781, "answer_count": 1, "score": 2, "last_activity_date": 1572032467, "creation_date": 1572020136, "last_edit_date": 1572026239, "question_id": 58562209, "link": "https://stackoverflow.com/questions/58562209/perltex-how-to-output-to-a-latexfile", "title": "Perltex: How to output to a latexfile?", "body": "<p>I want to:</p>\n\n<ul>\n<li><p>Read a text file line by line. </p></li>\n<li><p>Structure given in mwe. </p></li>\n<li><p>Store in an array and sort them by one of its columns. </p></li>\n<li><p>Sorted array should appear in a latexfile as normal for perltex.</p></li>\n</ul>\n\n<p>Far away from this aim, I struggle with the handing over from Perl variables to the latex output.   </p>\n\n<p>I had found no analog code in docs and net. Also tag \"perltex\" is missing here, nevertheless I hope that someone can help.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>     \\documentclass[]{scrartcl}\n     \\usepackage{perltex}\n      % content of text file \"verfile\" in same dir\n      % die &amp; Vers\\\"ohnung &amp; tr. &amp; vers\\\"ohnen    &amp; in alle R. gehend &amp;     fehlt                 \\\\\n      % die &amp; Vergoldung &amp; tr. &amp; vergolden    &amp; in alle R. gehend &amp;     fehlt                 \\\\\n      % die &amp; Vergeudung &amp; tr. &amp; vergeuden    &amp; in alle R. gehend &amp;          fehlt            \\\\\n\n      \\begin{document}\n\n\n      \\perlnewcommand{\\setline}[1]{$line = $_[0]; return \"\"} %cp perltex doc p.5\n      \\perlnewcommand{\\getline}{$line;}\n      \\perldo{  \n             $verfile = \"verfile\";\n             open (VF,\"$verfile\") || die \"$!\";\n             while (&lt;VF&gt;) {\n                $line = $_; # works: print \"$line\\n\";\n             }\n             print \"after loop: $line\\n\";\n             return \"\\\\setline{$line}\";\n            }\n\n       \\getline\n\n       \\end{document}\n</code></pre>\n\n<p>At the moment I expect only one line to see in the output pdf file for the array work lacks. So the problem remains, Why setline doesn't work?</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1572013921, "post_id": 58560515, "comment_id": 103440062, "body": "Please add sample input (no descriptions, no images, no links) and your desired output for that sample input to your question (no comment)."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1572013992, "post_id": 58560515, "comment_id": 103440096, "body": "With GNU sed, you may use <code>sed -z &quot;s&#47;.\\{2000\\}&#47;&amp;&#39;\\n || &#39;&#47;g&quot; file</code>. However, newline will be counted as a separate char."}, {"owner": {"reputation": 59, "user_id": 11596521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6d9a656fb2a61dfde0e99c5abbf1c4?s=128&d=identicon&r=PG&f=1", "display_name": "bryansoftdev", "link": "https://stackoverflow.com/users/11596521/bryansoftdev"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1572018086, "post_id": 58560515, "comment_id": 103442352, "body": "Added sample input. @WiktorStribi\u017cew solution works perfectly but sadly my gnu sed version is 4.2.1, support for -z was added in 4.2.2."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 0, "creation_date": 1572018545, "post_id": 58560515, "comment_id": 103442556, "body": "Updated my solution.  PS you do miss a <code>b</code> in your output (should be 6 <code>b</code>)  Why do you get <code>aa\\nb&#39;\\n</code> there are no 4 letter?"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 0, "creation_date": 1572018957, "post_id": 58560515, "comment_id": 103442734, "body": "Can you explain what should happen on new line.  Should counting start from 0, or from the left over number from previous line?"}, {"owner": {"reputation": 59, "user_id": 11596521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6d9a656fb2a61dfde0e99c5abbf1c4?s=128&d=identicon&r=PG&f=1", "display_name": "bryansoftdev", "link": "https://stackoverflow.com/users/11596521/bryansoftdev"}, "edited": false, "score": 0, "creation_date": 1572020169, "post_id": 58560515, "comment_id": 103443271, "body": "Added an explanation for output. On new line counting should continue from the count from the previous line."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 0, "creation_date": 1572025672, "post_id": 58560515, "comment_id": 103445428, "body": "I do not understand &#180;2.&#180;, why only on &#180;b&#180;. Your question was <code>2000</code> character, should it then still start with one character on the new line.  Why so complicated."}, {"owner": {"reputation": 59, "user_id": 11596521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6d9a656fb2a61dfde0e99c5abbf1c4?s=128&d=identicon&r=PG&f=1", "display_name": "bryansoftdev", "link": "https://stackoverflow.com/users/11596521/bryansoftdev"}, "reply_to_user": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 0, "creation_date": 1572029767, "post_id": 58560515, "comment_id": 103447055, "body": "Sorry @Jotne my question was with 2000, but I changed it to every 4 characters in the sample input/output section since I didn&#39;t want to put extremely long input in the post."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1572030125, "post_id": 58560515, "comment_id": 103447190, "body": "Various posted solutions will produce the posted expected output given the posted sample input but will handle other input differently from each other. For example try each of the solutions <code>echo &#39;aaa&#39; | solution</code> and <code>echo &#39;aaa&#39; | solution</code>. Your question doesn&#39;t address how to handle those and other edge cases which are the only non-trivial part of solving this problem so you should think about what the edge cases are and include sample input/output for those in your question otherwise you&#39;re likely to get a solution that works for your one sample but not for your real data."}], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1572028980, "post_id": 58560708, "comment_id": 103446749, "body": "Use octal <code>\\047</code> instead of hex <code>\\x27</code> to represent <code>&#39;</code>. See <a href=\"http://awk.freeshell.org/PrintASingleQuote\" rel=\"nofollow noreferrer\">awk.freeshell.org/PrintASingleQuote</a>. Also, compared to the posted expected output, that final script is missing <code>\\nb</code> after the <code>&#39;aa</code> and shows an extra <code>b&#39;\\n || &#39;</code> at the end of the output."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1572029246, "post_id": 58560708, "comment_id": 103446875, "body": "@EdMorton Thanks for the \\047 tip.  The OP changed the request so many times, that I have given up to solve it."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1572029298, "post_id": 58560708, "comment_id": 103446889, "body": "You&#39;re welcome and yeah I had a feeling that might&#39;ve been the case!"}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 1, "last_activity_date": 1572018487, "last_edit_date": 1572018487, "creation_date": 1572014563, "answer_id": 58560708, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58560708#58560708", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>This <code>gnu awk</code> may do:</p>\n\n<pre><code>echo \"abcdefghijkl\" | awk -v FS= -v OFS= '{for (i=1;i&lt;=NF;i++) if (i&gt;1 &amp;&amp; i%3==1)  $i=\"\\n ||\"$i}1'\nabc\n ||def\n ||ghi\n ||jkl\n</code></pre>\n\n<p>For your file, with every 1000 characters.</p>\n\n<pre><code>awk -v FS= -v OFS= '{for (i=1;i&lt;=NF;i++) if (i&gt;1 &amp;&amp; i%1000==1)  $i=\"\\n ||\"$i}1' file\n</code></pre>\n\n<p>Updated solution:</p>\n\n<pre><code>awk -v FS= -v OFS= '{for (i=1;i&lt;=NF;i++) if (i&gt;1 &amp;&amp; i%4==1)  $i=\"\\x27\\\\n || \\x27\"$i;printf \"%s\\x27\\\\n || \\x27\",$0} END {print \"\"}' file\naaaa'\\n || 'aa'\\n || 'bbbb'\\n || 'bb'\\n || '\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1572020944, "creation_date": 1572020944, "answer_id": 58562396, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58562396#58562396", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>There is a special Linux command for splitting files by specified parameters.</p>\n\n<p>Read more about <code>csplit</code> command <a href=\"https://www.computerhope.com/unix/ucsplit.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": true, "score": 3, "last_activity_date": 1572099910, "last_edit_date": 1572099910, "creation_date": 1572023563, "answer_id": 58562951, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58562951#58562951", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p><code>perl -0777pe \"s/(.{2000})/\\$1'\\n || '/gs\" file</code></p>\n\n<ul>\n<li><code>-0777</code> to process entire file as one line</li>\n<li><code>\\$1</code> to allow reference to capture group w/o shell making it null because I have to use double quotes</li>\n<li><code>s///gs</code> uses <code>g</code> to repeat more than once, and <code>s</code> to ensure <code>.{4}</code> can straddle newlines.</li>\n</ul>\n\n<pre>\n$ printf \"aaaaaa\\nbbbbbb\\n\" |  perl -0777pe \"s/(.{4})/\\$1'\\n || '/gs\"\naaaa'\n || 'aa\nb'\n || 'bbbb'\n || 'b\n</pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1572025086, "last_edit_date": 1572025086, "creation_date": 1572023937, "answer_id": 58563026, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58563026#58563026", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>Here is a Generic approach where we can give number of characters after which you want to insert string. Using GNU <code>awk</code>'s <code>RS</code>, <code>FS</code>, <code>gsub</code> features. Tested with GNU <code>awk</code> and with only provided samples.(Ok, I just now tested for inserting NEW character after 5 characters also it worked pretty well :) )</p>\n\n<pre><code>awk -v noc=\"4\" -v char=\"\\047\\n || \\047\" -v RS=\"\" -v FS=\"\\n\" '{num=num==noc?(noc-1):noc;gsub(\".{\"num\"}\",\"&amp;\" char)} 1' Input_file\n</code></pre>\n\n<p><strong><em>Adding a non-one liner form of solution:</em></strong></p>\n\n<pre><code>awk -v noc=\"4\" -v char=\"\\047\\n || \\047\" -v RS=\"\" -v FS=\"\\n\" '\n{\n  num=num==noc?(noc-1):noc\n  gsub(\".{\"num\"}\",\"&amp;\" char)\n}\n1\n'  Input_file\n</code></pre>\n\n<p><strong><em>Output will be as follows:</em></strong></p>\n\n<pre><code>aaaa'\n || 'aa\nb'\n || 'bbbb'\n || 'b\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p><strong><em>Explanation of above code:</em></strong> Adding complete explanation of above code.</p>\n\n<pre><code>awk -v noc=\"4\" -v char=\"\\047\\n || \\047\" -v RS=\"\" -v FS=\"\\n\" '  ##Mentioning noc=4 for number of characters after which we want to insert new character\\\n                                                               ## , mentioning char variable with value which OP wants to insert. \\\n                                                               ##  Making RS NULL here, making FS as new line here for all lines of Input_file\n{\n  num=num==noc?(noc-1):noc                                     ##Creating variable num whose value is noc-1 when it is 4 and 4 when it is NOT 4.\n  gsub(\".{\"num\"}\",\"&amp;\" char)                                    ##Using gsub function to give number of characters which need to be substitutes with new char here.\n}\n1                                                              ##Mentioning 1 will print edited/non-edited line of Input_file.\n'  Input_file                                                  ##Mentioning Input_file name here.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1572099820, "post_id": 58563906, "comment_id": 103459964, "body": "Nice, vs <code>perl -0777</code> or <code>sed -z</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1572101312, "post_id": 58563906, "comment_id": 103460325, "body": "or <code>awk -v RS=&quot;&quot;</code> when there&#39;s no blank lines in the file (that approach would fail if there were) or <code>gawk -v RS=&#39;^$&#39;</code> which I don&#39;t see in any answers so far but might be coming."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1572029386, "last_edit_date": 1572029386, "creation_date": 1572028214, "answer_id": 58563906, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58563906#58563906", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>With GNU awk for multi-char RS and only reading 4 chars into memory at a time (as opposed to reading the whole file into memory at once as some of the other solutions require):</p>\n\n<pre><code>$ awk -v RS='.{4}' '{printf \"%s\", (RT==\"\" ? $0 : RT \"\\047\\n || \\047\")}' file\naaaa'\n || 'aa\nb'\n || 'bbbb'\n || 'b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1572029604, "post_id": 58564159, "comment_id": 103446996, "body": "With that approach of double quoting the script you&#39;d also need to escape the <code>!</code> in some shells with some history options set. Always use single quotes around strings and scripts unless you <b>need</b> double quotes to avoid falling into &quot;escaping&quot; hell - <code>sed &#39;H;1h;$!d;x;s&#47;.\\{4\\}&#47;&amp;&#39;\\&#39;&#39;\\n || &#39;\\&#39;&#39;&#47;g&#39; file</code>. Not that I&#39;m recommending you actually use sed for this of course."}], "tags": [], "owner": {"reputation": 8780, "user_id": 318716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Jwj3.png?s=128&g=1", "display_name": "Joseph Quinsey", "link": "https://stackoverflow.com/users/318716/joseph-quinsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1572031080, "last_edit_date": 1572031080, "creation_date": 1572029415, "answer_id": 58564159, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines/58564159#58564159", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>The following sed solution will work (using four characters rather than 2000):</p>\n\n<pre><code>  sed \"H;1h;\\$!d;x;s/.\\{4\\}/&amp;'\\n || '/g\"\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>H;1h;\\$!d;x</code> read entire file into pattern buffer (see  <a href=\"//unix.stackexchange.com/q/182153\">sed: read whole file into pattern space without failing on single-line input</a>)</li>\n<li><code>s/.\\{4\\}/&amp;'\\n || '/g</code> add the desired text after every four characters</li>\n</ul>\n\n<p>In bash, we need to escape the dollar sign, <code>\\$</code>, because as the replace pattern contains single quotes, it is easier to use double-quotes to enclose the sed string.</p>\n\n<p><strong>Edit:</strong> As note by Ed Morton in a comment, rather than using double-quotes and escaping the <code>$</code>, an alternative is to use single quotes and replace each embedded single quote <code>'</code> with <code>'\\''</code>, to get:</p>\n\n<pre><code>  sed 'H;1h;$!d;x;s/.\\{4\\}/&amp;'\\''\\n || '\\''/g'\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11596521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f6d9a656fb2a61dfde0e99c5abbf1c4?s=128&d=identicon&r=PG&f=1", "display_name": "bryansoftdev", "link": "https://stackoverflow.com/users/11596521/bryansoftdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 2, "accepted_answer_id": 58562951, "answer_count": 6, "score": 2, "last_activity_date": 1572099910, "creation_date": 1572013821, "last_edit_date": 1572022118, "question_id": 58560515, "link": "https://stackoverflow.com/questions/58560515/how-to-insert-a-pattern-every-n-characters-with-input-that-may-have-new-lines", "title": "How to insert a pattern every n characters with input that may have new lines?", "body": "<p>I am trying to use sed to insert a pattern into a file every 2000 characters. I'm using this sed command, but it doesn't work if the file has multiple lines in it, because the count resets on every new line.</p>\n\n<p>Pattern: <code>'\n || '</code></p>\n\n<pre><code>sed \"s/.\\{2000\\}/&amp;'\\n || '/g\" file\n</code></pre>\n\n<p>How do I make this command work with input that may or may not have new lines? I'm okay with a non-sed solution.</p>\n\n<p>Here is an example inserting the pattern every 4 characters instead of 2000.</p>\n\n<p>Example input:</p>\n\n<pre><code>aaaaaa\nbbbbbb\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>aaaa'\n || 'aa\nb'\n || 'bbbb'\n || 'b\n</code></pre>\n\n<ol>\n<li>Count 4 characters (4 a's), insert pattern.</li>\n<li>Count 4 characters (2 a's, new line character, and 1 b), insert pattern.</li>\n<li>Count 4 characters (4 b's), insert pattern.</li>\n<li>Only 1 character left (1 b)</li>\n</ol>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572012991, "post_id": 58560211, "comment_id": 103439554, "body": "Sorry, maybe I wasn&#39;t clear in my original question. The value of $msg is not set to a string constant - that&#39;s why I enclosed the text in single-quote characters. The message needs to be evaluated at the time that it is used, not at the time that the string is assigned."}], "tags": [], "owner": {"reputation": 13, "user_id": 9016494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e05134b2f59f5bba70654f92757400f?s=128&d=identicon&r=PG", "display_name": "Zerta", "link": "https://stackoverflow.com/users/9016494/zerta"}, "is_accepted": false, "score": 1, "last_activity_date": 1572012677, "creation_date": 1572012677, "answer_id": 58560211, "question_id": 58560123, "link": "https://stackoverflow.com/questions/58560123/how-to-substitute-a-non-simple-variable-references-in-string/58560211#58560211", "title": "How to substitute a non-simple variable references in string", "body": "<p>It works when you declare the hash first.\nBe sure to use double quotes:</p>\n\n<pre><code>my $person={ name=&gt;'Peter', gender=&gt;'Male' };\nmy $msg=\"My name is $person-&gt;{name}.\";\n\nprint $msg;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572013172, "post_id": 58560287, "comment_id": 103439666, "body": "Yes, I know. I was really trying to understand whether there was a way to specify the substitution using actual perl syntax."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1572013965, "post_id": 58560287, "comment_id": 103440081, "body": "There is, but only if the variable exists already when you create the double-quoted string. Otherwise you are talking about templating and should use a templating module. Some other options: <a href=\"https://metacpan.org/pod/Text::Template\" rel=\"nofollow noreferrer\">Text::Template</a>, <a href=\"https://metacpan.org/pod/Mojo::Template\" rel=\"nofollow noreferrer\">Mojo::Template</a>, <a href=\"https://metacpan.org/pod/Text::Xslate\" rel=\"nofollow noreferrer\">Text::Xslate</a>"}, {"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572015223, "post_id": 58560287, "comment_id": 103440809, "body": "Ah, but there&#39;s also eval - and now, thanks to @mob, I now know why it wasn&#39;t working for me. Thanks for pointing me at Text::Template, though - it might come in useful some time."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1572012961, "creation_date": 1572012961, "answer_id": 58560287, "question_id": 58560123, "link": "https://stackoverflow.com/questions/58560123/how-to-substitute-a-non-simple-variable-references-in-string/58560287#58560287", "title": "How to substitute a non-simple variable references in string", "body": "<p>You're inventing a templating system. Fortunately, it already exists: <a href=\"http://p3rl.org/Template\" rel=\"nofollow noreferrer\">Template</a>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Template;\n\nmy $msg='My name is [% person.name %].';\nmy $person={ name=&gt;'Peter', gender=&gt;'Male' };\n\nmy $template = 'Template'-&gt;new;\n$template-&gt;process( \\$msg, { person =&gt; $person }, \\ my $output );\nprint $output;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1572014082, "post_id": 58560466, "comment_id": 103440150, "body": "I would add a heavy caveat that string eval is a bad idea, and the input variables should at the very least be passed through quotemeta."}, {"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572014616, "post_id": 58560466, "comment_id": 103440457, "body": "This is what I wanted. Thanks for the info re $@ storing the errors too. Very useful to know."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572016328, "post_id": 58560466, "comment_id": 103441409, "body": "@Grinnz: Interestingly, <code>$person</code> can contain anything and will still be safe. <code>$msg</code>, on the other hand, is dangerous."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1572017418, "post_id": 58560466, "comment_id": 103442011, "body": "To be specific why it&#39;s a bad idea, <code>$msg = &#39;@{[system rm ~&#47;.bashrc]}&#39;;</code>"}, {"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572026988, "post_id": 58560466, "comment_id": 103445921, "body": "It is dangerous. The example I gave was a simplification of what I am actually trying to do. Rest assured, the <code>$msg</code> string will not be derived from user input (or any other uncontrolled data)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1572013635, "creation_date": 1572013635, "answer_id": 58560466, "question_id": 58560123, "link": "https://stackoverflow.com/questions/58560123/how-to-substitute-a-non-simple-variable-references-in-string/58560466#58560466", "title": "How to substitute a non-simple variable references in string", "body": "<p>When <code>eval</code> \"does not work\", it sets the special variable <code>$@</code> with the error Perl encountered while evaluating the expression. In your case, that message is</p>\n\n<pre><code>syntax error at (eval 1) line 2, at EOF\n</code></pre>\n\n<p>because the literal text</p>\n\n<pre><code>My name is $person-&gt;{name}.\n</code></pre>\n\n<p>can not be parsed as Perl code. But an easy fix is to enclose that text in quotes.</p>\n\n<pre><code>my $msg='\"My name is $person-&gt;{name}.\"';\nmy $person={ name=&gt;'Peter', gender=&gt;'Male' };\n\nprint eval $msg;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>My name is Peter.\n</code></pre>\n\n<p>Other ways to fix this program are to send quoted text to <code>eval</code>:</p>\n\n<pre><code>my $msg='My name is $person-&gt;{name}.';\nprint eval \"\\\"$msg\\\"\";\nprint eval qq/\"$msg\"/;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572026685, "post_id": 58560904, "comment_id": 103445804, "body": "Of course it is. But in this case, I did and it didn&#39;t provide the answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572193924, "post_id": 58560904, "comment_id": 103476971, "body": "@pdac: But it does. The question I linked to gives exactly the information you need."}, {"owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572283007, "post_id": 58560904, "comment_id": 103503819, "body": "I don&#39;t think so (unless I missed something). This explains how to use regex substitution to evaluate simple names like <code>$name</code>, not how to deal with a hash ref like<code>$person-&gt;{name}</code>. That method will also destroy my original template. Using <code>eval</code> is the solution here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "edited": false, "score": 0, "creation_date": 1572289069, "post_id": 58560904, "comment_id": 103506389, "body": "@pdac: The second example in that FAQ uses a hash. And switching that to a hash reference is a trivial syntax change. And you can stop destroying the original variable by either copying it or using the <code>&#47;r</code> option on the substitution operator. This approach is far safer than using <code>eval</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1572015202, "creation_date": 1572015202, "answer_id": 58560904, "question_id": 58560123, "link": "https://stackoverflow.com/questions/58560123/how-to-substitute-a-non-simple-variable-references-in-string/58560904#58560904", "title": "How to substitute a non-simple variable references in string", "body": "<p>It's always worth checking the Perl FAQ for answers to questions like this.</p>\n\n<p><a href=\"https://perldoc.perl.org/perlfaq4.html#How-can-I-expand-variables-in-text-strings%3f\" rel=\"nofollow noreferrer\">How can I expand variables in text strings?\n</a></p>\n"}], "owner": {"reputation": 3, "user_id": 12274309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa24829e18619fbb08d65af8252d9fe4?s=128&d=identicon&r=PG&f=1", "display_name": "pdac", "link": "https://stackoverflow.com/users/12274309/pdac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58560466, "answer_count": 4, "score": 0, "last_activity_date": 1572015202, "creation_date": 1572012330, "question_id": 58560123, "link": "https://stackoverflow.com/questions/58560123/how-to-substitute-a-non-simple-variable-references-in-string", "title": "How to substitute a non-simple variable references in string", "body": "<p>Consider the following code:</p>\n\n<pre><code>my $msg='My name is $person-&gt;{name}.';\nmy $person={ name=&gt;'Peter', gender=&gt;'Male' };\n</code></pre>\n\n<p>So I want to print $msg. I've seen examples that resolve simple variable substitutions like '$name', but I haven't seen how to resolve my problem. I tried:</p>\n\n<pre><code>print eval $msg;\n</code></pre>\n\n<p>but that did not work (printed nothing). How can I print <code>My name is Peter.</code>?</p>\n"}, {"tags": ["perl", "cpanm"], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 0, "creation_date": 1572009414, "post_id": 58558626, "comment_id": 103437573, "body": "Hi @Steffen Ullrich . This method requires LWP::Protocol::https .Due to my firewall  I can&#39;t install it through cpanm"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 1, "creation_date": 1572009777, "post_id": 58558626, "comment_id": 103437758, "body": "@xaglez: Then maybe you should get a Perl which has this already installed? There is nothing known about your system but on Windows there is strawberry Perl which includes all of this and on the various Linux distributions the necessary modules are also prepackaged and available through apt or rpm. Of course you can also download all of these modules with the browser and install these then locally."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 3, "creation_date": 1572013412, "post_id": 58558626, "comment_id": 103439793, "body": "@xaglez You can pass the --no-lwp option to force cpanm to use curl or wget which should be able to handle https."}, {"owner": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 0, "creation_date": 1572017588, "post_id": 58558626, "comment_id": 103442107, "body": "HI @Steffen Ullrich  i am using RHEL 7.7 Docker container"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 1, "creation_date": 1572019505, "post_id": 58558626, "comment_id": 103442964, "body": "@xaglez: there is an rpm for perl-LWP-Protocol-https"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "edited": false, "score": 0, "creation_date": 1572020279, "post_id": 58558626, "comment_id": 103443307, "body": "@xaglez, Feel free to download <a href=\"https://metacpan.org/release/LWP-Protocol-https\" rel=\"nofollow noreferrer\">LWP-Protocol-https</a> by some other means"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1572006784, "creation_date": 1572006784, "answer_id": 58558626, "question_id": 58558538, "link": "https://stackoverflow.com/questions/58558538/how-to-force-cpanm-to-use-https-insted-of-using-http-for-installing-dependencies/58558626#58558626", "title": "How to force cpanm to use HTTPS insted of Using HTTP for installing dependencies", "body": "<p>From <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n<pre><code>cpanm --from https://cpan.metacpan.org/ Plack    # use only the HTTPS mirror\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 387, "user_id": 12249903, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iG1n9avc_TI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcagZBFTq-iyeUh83mZhSQFOvACI1A/mo/photo.jpg?sz=128", "display_name": "Pratheesh", "link": "https://stackoverflow.com/users/12249903/pratheesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 58558626, "answer_count": 1, "score": 0, "last_activity_date": 1572006784, "creation_date": 1572006439, "question_id": 58558538, "link": "https://stackoverflow.com/questions/58558538/how-to-force-cpanm-to-use-https-insted-of-using-http-for-installing-dependencies", "title": "How to force cpanm to use HTTPS insted of Using HTTP for installing dependencies", "body": "<p>Hi I am trying to install perl modules using cpanm.But my firewall is not letting the cpanm to use http.\nEven when I am forcing it to use https using the --mirror option, its still uses http to install the dependencies. How can i force cpanm to use only <a href=\"https://mirror-address\" rel=\"nofollow noreferrer\">https://mirror-address</a> .</p>\n\n<pre><code>Perl Version 5.16.3\nCpanm Version 1.6922\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 3, "creation_date": 1572002593, "post_id": 58557557, "comment_id": 103434276, "body": "Make the first quantifier reluctant (non-greedy). Adding <code>&quot;PHP &quot;</code> before is also a good idea."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1572004962, "post_id": 58557557, "comment_id": 103435374, "body": "If you simplify the regex, it seems to work - <code>&#47;(\\d+\\.\\d+\\.\\d+)&#47;</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1572006524, "post_id": 58557557, "comment_id": 103436118, "body": "I don&#39;t understand why you thought you needed <code>^.*</code> at the start of your regex and <code>.*$</code> at the end. You don&#39;t need to match your whole string - just look for the bits you&#39;re interested in."}, {"owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 1, "creation_date": 1572017722, "post_id": 58557557, "comment_id": 103442183, "body": "Try this $php =~ s/^.*PHP (\\d+\\.\\d+\\.\\d+).*$/$1/; since php is common starting point"}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "edited": false, "score": 0, "creation_date": 1572266521, "post_id": 58557557, "comment_id": 103495274, "body": "Thank you Srihari for your answer. I tried your solution, which works as for displaying the PHP-version. But... It also adds everything behind, for example: 7.2.19-0ubuntu0.18.0 (Ubuntu server) and 7.3.10-1+0~20191008 (Debian server). Is there a way to resolve this also?"}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "reply_to_user": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1572334942, "post_id": 58557557, "comment_id": 103517657, "body": "@Srihari Karanth forgot to use @."}, {"owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 1, "creation_date": 1572369351, "post_id": 58557557, "comment_id": 103535070, "body": "@Joanne, thats not possible as the content in bracket only has dot and digits. It cant show - in it. Are you sure you have used it correctly? Can you paste what you have used?"}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "reply_to_user": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1572433545, "post_id": 58557557, "comment_id": 103555694, "body": "@Srihari Karanth, I only changed the last line to: $php =~ s/^.*PHP (\\d+\\.\\d+\\.\\d+).*$/$1/;"}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "reply_to_user": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1573042795, "post_id": 58557557, "comment_id": 103750672, "body": "@Srihari Karanth no clue but it&#39;s not working. But I will leave it like this I guess. No clue why it&#39;s taking the Ubuntu information into it."}, {"owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1573043158, "post_id": 58557557, "comment_id": 103750840, "body": "Can you paste the whole code after update ? You can update your question with the new code maybe."}, {"owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1573043605, "post_id": 58557557, "comment_id": 103751094, "body": "I tested your above code and it works perfectly. Looks like you are not using the variable properly? You might be using the wrong variable for display."}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "edited": false, "score": 0, "creation_date": 1573046122, "post_id": 58557557, "comment_id": 103752485, "body": "I will check it once again and redo it completely. Maybe a typo somewhere (which I doubt) or the wrong variable indeed, as you say."}, {"owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "reply_to_user": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1573545527, "post_id": 58557557, "comment_id": 103906666, "body": "@Srihari Karanth I finally found the issue!! Apparently there are 2 similar scripts which do the same action (getting PHP information and such). I only modified one! I discovered this just now. I replaced it also in the other script and now it&#39;s working correctly! Thank you again!!"}, {"owner": {"reputation": 1561, "user_id": 1447507, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/f14xA.jpg?s=128&g=1", "display_name": "Srihari Karanth", "link": "https://stackoverflow.com/users/1447507/srihari-karanth"}, "edited": false, "score": 0, "creation_date": 1573571754, "post_id": 58557557, "comment_id": 103920068, "body": "Good to know. \ud83d\udc4d"}], "owner": {"reputation": 610, "user_id": 1171331, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/62ce41800c82f8bcfa54ac60f47d8ea8?s=128&d=identicon&r=PG", "display_name": "Joanne", "link": "https://stackoverflow.com/users/1171331/joanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "closed_date": 1572004589, "answer_count": 0, "score": 1, "last_activity_date": 1572002376, "creation_date": 1572002376, "question_id": 58557557, "link": "https://stackoverflow.com/questions/58557557/regex-expression-is-killing-me-in-perl-when-getting-the-correct-php-version-g", "closed_reason": "Duplicate", "title": "Regex expression is killing me (in perl) when getting the correct PHP-version (grabbing OS version instead of PHP version)", "body": "<p>I run a cron job (perl script) which fetches the PHP-version from servers and stores them in a database. This has always worked with CentOS PHP versions. I had to modify it a little in order to make it work with Debian. So far all is good. However it's getting the wrong version / information with Ubtuntu PHP.</p>\n\n<p>This is the code snippet:</p>\n\n<pre><code>@temp = `/usr/sbin/vzctl exec $server 'php -v 2&gt;/dev/null | /bin/grep \"built\\\\|cgi\\\\|cli\" 2&gt;&amp;1'`;\nchomp(@temp);\n@temp = split /\\s+/,$temp[0];\n$php = $temp[1];\n$php =~ s/^.*(\\d+\\.\\d+\\.\\d+).*$/$1/;\n</code></pre>\n\n<p>Below are 3 examples from different PHP-versions on different operating systems:</p>\n\n<p><strong>CentOS 7</strong></p>\n\n<pre><code>php -v outputs: PHP 7.0.33 (cli) (built: Oct 22 2019 10:24:41) ( NTS )\nResult in database: 7.0.33 (= correct)\n</code></pre>\n\n<p><strong>Debian 9</strong></p>\n\n<pre><code>php -v outputs: PHP 7.3.10-1+0~20191008.45+debian9~1.gbp365209 (cli) (built: Oct  8 2019 05:48:14) ( NTS )\nResult in database: 7.3.10 (= correct)\n</code></pre>\n\n<p><strong>Ubuntu 18.04</strong></p>\n\n<pre><code>php -v outputs: PHP 7.2.19-0ubuntu0.18.04.2 (cli) (built: Aug 12 2019 19:34:28) ( NTS )\nResult in database: 8.04.2 (= incorrect)\n</code></pre>\n\n<p>I think the current regex expression is considering the last part as the PHP version, hence it's storing 8.04.2 in the database.</p>\n\n<p>How can the current code:</p>\n\n<pre><code>$php =~ s/^.*(\\d+\\.\\d+\\.\\d+).*$/$1/;\n</code></pre>\n\n<p>Be modified so it reads the correct PHP version for all operating systems?</p>\n\n<p>I checked a few older servers with dates operating systems, but they don't differ much from the above 3 examples. So I am guessing if the current code can be tweaked to also work with Ubuntu, I am set for now and the near future.</p>\n\n<p>Please keep in mind that I want to be able to use the current code (as displayed above) but with a modified regex obviously.</p>\n\n<p>So two questions (both also for learning):</p>\n\n<ol>\n<li>Is it possible to adjust the current regex to match PHP versions for all OS as shown above?</li>\n<li>isn't it better to make the regex search the text PHP and then grab the version somehow?</li>\n</ol>\n\n<p>I know the code is old, but it's from our technician who unfortunately is not amongst us anymore.</p>\n\n<p>Maybe someone cares to take a look and come up with a working solution based on it's current form?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "tcl", "cpan", "strawberry-perl", "tclsh"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1572011910, "post_id": 58556585, "comment_id": 103438928, "body": "Clearly there&#39;s a dependency. Go install Tcl: <a href=\"https://www.activestate.com/products/tcl/\" rel=\"nofollow noreferrer\">activestate.com/products/tcl</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1598221318, "last_edit_date": 1598221318, "creation_date": 1572504757, "answer_id": 58638163, "question_id": 58556585, "link": "https://stackoverflow.com/questions/58556585/strawberry-perl-v5-30-0-not-able-to-install-tcl-windows-10/58638163#58638163", "title": "Strawberry Perl v5.30.0 not able to install Tcl (Windows 10)", "body": "<p>You can build the missing dependency <code>tclsh</code> by downloading the source distribution from <a href=\"https://prdownloads.sourceforge.net/tcl/tcl8420-src.zip\" rel=\"nofollow noreferrer\">https://prdownloads.sourceforge.net/tcl/tcl8420-src.zip</a>. To compile the source you need a C compiler. I tried the community edition of visual studio:\n<a href=\"https://visualstudio.microsoft.com/vs/\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/vs/</a></p>\n<ul>\n<li><p>Click download community edition..</p>\n</li>\n<li><p>Then choose what to install</p>\n</li>\n<li><p>Then click &quot;Install&quot;</p>\n</li>\n</ul>\n<p>After installation, go to menu &quot;Tools-&gt;Command Line-&gt;Developer Command Prompt&quot; and run</p>\n<pre><code>nmake -f makefile.vc\n</code></pre>\n<p>from the <code>win</code> sub folder of the extracted Tcl source distribution (on my computer it was located at <code>C:\\Users\\Bruker\\tcl\\tcl8.4.20\\win</code>)</p>\n<p>The above <code>nmake</code> command creates a new folder <code>Release_VC13</code> with an executable file <code>tclsh84.exe</code>. Note that the name of the executable is not <code>tclsh.exe</code>.</p>\n<p>Now add the folder of the executable to the system <code>PATH</code> environment variable:\n<code>C:\\Users\\Bruker\\tcl\\tcl8.4.20\\win\\Release_VC13</code>, then close the command prompt and reopen again to refresh the path settings.</p>\n<p>Try type <code>tclsh84</code>, and you should get a tcl shell command prompt with a leading <code>%</code> prompt. Then type <code>exit</code> to exit the tcl shell.</p>\n<p>The next problem is to install the <code>Tcl</code> module using Strawberry perl. Trying first to run:</p>\n<pre><code>&gt; cpan Tcl\n[...]\n'tclsh' is not recognized as an internal or external command,\noperable program or batch file.\nerror starting tclsh: $?=256; $!=\nNo 'Makefile' created  VKON/Tcl-1.27.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- NOT OK\nStopping: 'install' failed for 'Tcl'.\n</code></pre>\n<p>The problem is that the executable is not called <code>tclsh</code> but <code>tclsh84</code> (see above).</p>\n<p>The next thing I did was to download the source distribution for the <code>Tcl</code> module:</p>\n<pre><code>&gt; cpan -g Tcl\n</code></pre>\n<p>Then extracted the downloaded file <code>Tcl-1.27.tar.gz</code> and changed to the source distribution directory. By inspecting the <code>Makefile.PL</code> I found that the <code>Makefile.PL</code> took a command line argument <code>--tclsh</code> that gave the name of the tcl shell command. So I tried:</p>\n<pre><code>&gt; perl Makefile.PL --tclsh=tclsh84\n</code></pre>\n<p>and this worked fine now. Then I tried to compile with <code>gmake</code> (which comes with the Strawberry Perl distribution):</p>\n<pre><code>&gt; gmake\n</code></pre>\n<p>This also worked, but running <code>gmake test</code> failed, and also installing and testing the module:</p>\n<pre><code>&gt; gmake install  \n&gt; perl -MTcl -e1\nfailed dlopen(C:/Users/Bruker/tcl/tcl8.4.20/win/Release_VC13/tcl84.dll,...);\nfailed dlopen(./tcl84.dll,...);\nfailed dlopen(tcl84.dll,...);\ntrying dlopen(tcl89.dll,...)\ntrying dlopen(tcl88.dll,...)\ntrying dlopen(tcl87.dll,...)\ntrying dlopen(tcl86.dll,...)\ntrying dlopen(tcl85.dll,...)\ntrying dlopen(tcl84.dll,...)\ntrying dlopen(tcl83.dll,...)\ntrying dlopen(tcl82.dll,...)\ntrying dlopen(tcl81.dll,...)\ntrying dlopen(tcl80.dll,...)\nfailed all posible tcl vers 8.x from 9 down to 0 at C:/Strawberry/perl/lib/XSLoader.pm line 111.\nFailed to load Tcl dll! at C:/Strawberry/perl/lib/XSLoader.pm line 111.\nUnable to initialize Tcl at C:/Strawberry/perl/lib/XSLoader.pm line 111.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n</code></pre>\n<p>I plan to come back to this problem later and investigate further.</p>\n"}], "owner": {"reputation": 11, "user_id": 12273223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318ad229d06e61512e295a33ca4083f?s=128&d=identicon&r=PG&f=1", "display_name": "andre___11", "link": "https://stackoverflow.com/users/12273223/andre-11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1598221318, "creation_date": 1571998619, "last_edit_date": 1572471729, "question_id": 58556585, "link": "https://stackoverflow.com/questions/58556585/strawberry-perl-v5-30-0-not-able-to-install-tcl-windows-10", "title": "Strawberry Perl v5.30.0 not able to install Tcl (Windows 10)", "body": "<p>I downloaded and installed strawberry-perl-5.30.0.1-64bit.msi from <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">strawberryperl.com</a> on my Windows 10 and tried to install Tcl module using cpan, but it fails for missing tclsh. What could be the problem?</p>\n\n<pre><code>C:\\Strawberry&gt;cpan Tcl\nLoading internal logger. Log::Log4perl recommended for better logging\nCPAN: CPAN::SQLite loaded ok (v0.217)\nDatabase was generated on Thu, 24 Oct 2019 12:40:15 GMT\nRunning install for module 'Tcl'\nCPAN: Digest::SHA loaded ok (v6.02)\nCPAN: Compress::Zlib loaded ok (v2.086)\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\V\\VK\\VKON\\Tcl-1.27.tar.gz ok\nCPAN: Archive::Tar loaded ok (v2.32)\nCPAN: YAML::XS loaded ok (v0.78)\nCPAN: CPAN::Meta::Requirements loaded ok (v2.140)\nCPAN: Parse::CPAN::Meta loaded ok (v2.150010)\nCPAN: CPAN::Meta loaded ok (v2.150010)\nCPAN: Module::CoreList loaded ok (v5.20190522)\nConfiguring V/VK/VKON/Tcl-1.27.tar.gz with Makefile.PL\n'tclsh' is not recognized as an internal or external command,\noperable program or batch file.\nerror starting tclsh: $?=256; $!=\nNo 'Makefile' created  VKON/Tcl-1.27.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- NOT OK\nStopping: 'install' failed for 'Tcl'.\n\nC:\\Strawberry&gt;dir C:\\Strawberry\\cpan\\build\\Tcl-1.27-0\n Volume in drive C is OSDisk\n Volume Serial Number is BCC0-703E\n\n Directory of C:\\Strawberry\\cpan\\build\\Tcl-1.27-0\n\n25.10.2019  13.05    &lt;DIR&gt;          .\n25.10.2019  13.05    &lt;DIR&gt;          ..\n14.07.2018  11.00             5\u00a0207 Changes\n22.08.2018  11.21            10\u00a0139 Makefile.PL\n22.08.2018  11.45             1\u00a0723 MANIFEST\n22.08.2018  11.45             1\u00a0140 META.json\n22.08.2018  11.44               617 META.yml\n14.07.2018  20.26             1\u00a0246 README\n25.10.2019  13.05    &lt;DIR&gt;          t\n25.10.2019  13.05    &lt;DIR&gt;          tcl-core\n22.08.2018  11.43            43\u00a0540 Tcl.pm\n22.08.2018  10.57            46\u00a0049 Tcl.xs\n16.06.2018  15.18               439 tclcfg.tcl\n16.06.2018  15.18                48 typemap\n              10 File(s)        110\u00a0148 bytes\n               4 Dir(s)  316\u00a0953\u00a0681\u00a0920 bytes free\n</code></pre>\n"}, {"tags": ["perl", "sockets", "ssl", "imapclient"], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1571999232, "post_id": 58556166, "comment_id": 103432714, "body": "Or: <code>perl -MIO::Socket::SSL -le &quot;IO::Socket::SSL-&gt;new()&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1572023905, "post_id": 58556166, "comment_id": 103444748, "body": "@Dave Cross, The point was to show what the OP needed to add to their script. Golfing doesn&#39;t help"}], "tags": [], "owner": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "is_accepted": false, "score": 3, "last_activity_date": 1571997092, "creation_date": 1571997092, "answer_id": 58556166, "question_id": 58555542, "link": "https://stackoverflow.com/questions/58555542/cant-locate-object-method-new-via-package-iosocketssl-perhaps-you-forg/58556166#58556166", "title": "Can&#39;t locate object method &quot;new&quot; via package &quot;IO::Socket::SSL&quot; (perhaps you forgot to load &quot;IO::Socket::SSL&quot;?)", "body": "<p>Usually, this means that you forgot line with \"use PackageName;\"</p>\n\n<pre><code>$ perl -le \"IO::Socket::SSL-&gt;new()\"\nCan't locate object method \"new\" via package \"IO::Socket::SSL\" (perhaps you forgot to load \"IO::Socket::SSL\"?) at -e line 1.\n</code></pre>\n\n<p>and without error</p>\n\n<pre><code>$ perl -le \"use IO::Socket::SSL; IO::Socket::SSL-&gt;new()\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 12272996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ca154c7cc57fadfd185f4a5e58dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/12272996/deepak"}, "edited": false, "score": 0, "creation_date": 1573119557, "post_id": 58556770, "comment_id": 103780472, "body": "This Dave, thanks for your input,  I have mentioned the same in the perl script however its still giving error as below ,"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 12272996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ca154c7cc57fadfd185f4a5e58dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/12272996/deepak"}, "edited": false, "score": 0, "creation_date": 1573120954, "post_id": 58556770, "comment_id": 103781268, "body": "@Deepak: You might want to double-check the spelling of your <code>use</code> line. That error usually means the module is not loaded. Please cut and paste (don&#39;t retype) the line from your code into your question."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1571999298, "creation_date": 1571999298, "answer_id": 58556770, "question_id": 58555542, "link": "https://stackoverflow.com/questions/58555542/cant-locate-object-method-new-via-package-iosocketssl-perhaps-you-forg/58556770#58556770", "title": "Can&#39;t locate object method &quot;new&quot; via package &quot;IO::Socket::SSL&quot; (perhaps you forgot to load &quot;IO::Socket::SSL&quot;?)", "body": "<blockquote>\n  <p>Can't locate object method \"new\" via package \"IO::Socket::SSL\" (perhaps you forgot to load \"IO::Socket::SSL\")</p>\n</blockquote>\n\n<p>Did you forget to load <code>IO::Socket::SSL</code>?</p>\n\n<pre><code>use IO::Socket::SSL;\n</code></pre>\n\n<p>It's even there in the example in <a href=\"https://metacpan.org/pod/Mail::IMAPClient#Socket\" rel=\"noreferrer\">the documentation</a>:</p>\n\n<pre><code>use IO::Socket::SSL;\nmy $imap = Mail::IMAPClient-&gt;new\n ( User     =&gt; 'your-username',\n   Password =&gt; 'your-password',\n   Socket   =&gt; IO::Socket::SSL-&gt;new\n   (  Proto    =&gt; 'tcp',\n      PeerAddr =&gt; 'some.imap.server',\n      PeerPort =&gt; 993, # IMAP over SSL standard port\n   ),\n);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12272996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ca154c7cc57fadfd185f4a5e58dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/12272996/deepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573131378, "creation_date": 1571994836, "last_edit_date": 1573131378, "question_id": 58555542, "link": "https://stackoverflow.com/questions/58555542/cant-locate-object-method-new-via-package-iosocketssl-perhaps-you-forg", "title": "Can&#39;t locate object method &quot;new&quot; via package &quot;IO::Socket::SSL&quot; (perhaps you forgot to load &quot;IO::Socket::SSL&quot;?)", "body": "<p>We are using Perl 5, version 18, subversion 1 (v5.18.1) built. </p>\n\n<p>Earlier we were connecting outlook 2007 to connect through Mail::IMAPClient Module using user and password as it wasn't required to use SSL or TLS. Now we have migrated outlook to 2016, and in this version is necessary to introduce SSL or TLS.</p>\n\n<p>I have tried to add SSL code in the Perl script, and it's failing as below:</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"IO::Socket::SSL\" (perhaps you forgot to load \"IO::Socket::SSL\"?)</p>\n</blockquote>\n\n<hr>\n\n<p>My code: </p>\n\n<pre><code>$client = Mail::IMAPClient-&gt;new(\n   server   =&gt; $Eserver,\n   User     =&gt; $Euser,\n   Password =&gt; $Epassword,\n   ssl      =&gt; 1,\n   port     =&gt; 993,\n   Socket   =&gt; IO::Socket::SSL-&gt;new\n   (  Proto    =&gt; 'tcp',\n      PeerAddr =&gt; $Eserver,\n      PeerPort =&gt; 993, # IMAP over SSL standard port\n   ),\n</code></pre>\n\n<p>Can someone please help if its right way to add the ssl module in IMAP client. Is it required to upgrade Perl 5 to the latest to use SSL or TLS  (using starttls method?).</p>\n\n<p>Also, how can we know which IMAPclient module we are using?</p>\n\n<p>I'm sure something is missing. Not sure as I am naive in working in Perl.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1571991948, "post_id": 58554716, "comment_id": 103429170, "body": "Bizarre copy is a reference to something that was on the stack but was removed. The stack is not ref-counted, so it&#39;s possible to still have a reference after the removal. See <a href=\"https://github.com/perl/perl5/issues/10612\" rel=\"nofollow noreferrer\">#77706</a>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1571991959, "post_id": 58554716, "comment_id": 103429177, "body": "Can you please <a href=\"https://stackoverflow.com/posts/58554716/edit\">edit your question</a> and fix the indentation of your code so it&#39;s readable."}, {"owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "edited": false, "score": 0, "creation_date": 1571998960, "post_id": 58554716, "comment_id": 103432566, "body": "you&#39;re using XS code and it&#39;s not doing the right thing <a href=\"https://perldoc.perl.org/perldiag.html#Bizarre-copy-of-%s-in-%s\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldiag.html#Bizarre-copy-of-%s-in-%s</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1572024016, "post_id": 58554716, "comment_id": 103444787, "body": "Re &quot;<i>And whose fault is it?</i>&quot;, Bad XS code (or, unlikely, a bug in Perl). In this case, it&#39;s surely <code>ars_CreateEntry</code> (or something it calls)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1572024123, "post_id": 58554716, "comment_id": 103444836, "body": "@choroba, Re &quot;<i>Bizarre copy is a reference to something that was on the stack but was removed.</i>&quot;, That might be the meaning of &quot;Bizarre copy of UNKNOWN&quot;, but that&#39;s not what bizarre copy in general means. For example, if a sub puts an AV on the stack, it will result in &quot;Bizarre copy of ARRAY&quot;"}], "owner": {"reputation": 505, "user_id": 6556472, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7f757612a859544a6a92c997e4ba40c8?s=128&d=identicon&r=PG&f=1", "display_name": "georgetovrea", "link": "https://stackoverflow.com/users/6556472/georgetovrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1571992677, "creation_date": 1571991399, "last_edit_date": 1571992677, "question_id": 58554716, "link": "https://stackoverflow.com/questions/58554716/bizarre-copy-of-unknown-in-subroutine-entry-by-perl", "title": "Bizarre copy of UNKNOWN in subroutine entry by perl", "body": "<p>I'm hitting a bug in the perl when run the code using \"/home/andrew/bin/chroot32.sh  /home/andrew/arscode.plx\"</p>\n\n<pre><code>Bizarre copy of UNKNOWN in subroutine entry at /home/andrew/arscode.plx line 94.\n</code></pre>\n\n<p>And I'm not quite sure if this is a perl bug or others  bug. This is the relevant part:</p>\n\n<pre><code>sub record {\n      (my $ctrl = ars_Login($server, $username,$password,undef,undef,$port )) || die \"ars_Login:$ars_errstr\";\n      if (!$ctrl) {print(\"Could not connect  ($ars_errstr)\\n\");exit(1);}\n      else\n      {\n           print \"login sucess\\n\";\n      }\n      (my $entry_id = ars_CreateEntry($ctrl, 'eventCreate',   # &lt;&lt;&lt;&lt; line 94\n        '2','ht',\n        '7','0', \n        '8','.', \n        '1000000000',encode(\"big5\",decode(\"utf8\",\"Test\"))\n\n        )\n        ) or die \"Create: $ars_errstr\";\n        ars_Logoff($ctrl);\n  }\n</code></pre>\n\n<p>What is a \"Bizarre copy\"? And whose fault is it?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1571959268, "last_edit_date": 1571959268, "creation_date": 1571958808, "answer_id": 58550279, "question_id": 58550273, "link": "https://stackoverflow.com/questions/58550273/how-to-add-backslash-into-perl/58550279#58550279", "title": "How to add backslash into perl", "body": "<p><code>\\</code> has a special meaning in double-quote string literals. As you know, <code>\\n</code> resulting in a line feed is an example of this. You can use <code>\\\\</code> to produce a backslash.</p>\n\n<pre><code>print \"Olive Garden \\\\ Lina's\\n\";\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">Quote and Quote-like Operators</a> in <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a> for more details.</p>\n"}], "owner": {"reputation": 33, "user_id": 12104874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77deec6f3395198cb6267b5311e95375?s=128&d=identicon&r=PG&f=1", "display_name": "kaitcrawford", "link": "https://stackoverflow.com/users/12104874/kaitcrawford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58550279, "answer_count": 1, "score": 0, "last_activity_date": 1571987651, "creation_date": 1571958760, "last_edit_date": 1571987651, "question_id": 58550273, "link": "https://stackoverflow.com/questions/58550273/how-to-add-backslash-into-perl", "title": "How to add backslash into perl", "body": "<p>I am trying to figure out how to have backslashes in my perl that will show up along with my words. \nWhen I perl my file the backslash is not there.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>print \"Olive Garden \\ Lina's\\n\";\n</code></pre>\n\n<p>I want the output to look like this:</p>\n\n<pre><code>Olive Garden \\ Lina's\n</code></pre>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1571952592, "post_id": 58549275, "comment_id": 103419679, "body": "In the first line, the <code>stat</code> (last group) matches <code>Deferred: Connection reset by mail-company.com</code>, isn&#39;t it expected? I can&#39;t see any specific issues with the third line either, see <a href=\"https://regex101.com/r/SOpL99/2\" rel=\"nofollow noreferrer\">your regex demo</a>"}, {"owner": {"reputation": 95, "user_id": 4271535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de3be5b5f99e349cd9b7c60002e9fef?s=128&d=identicon&r=PG&f=1", "display_name": "tleif", "link": "https://stackoverflow.com/users/4271535/tleif"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1571953341, "post_id": 58549275, "comment_id": 103419887, "body": "It does match correctly in the tester, but when I try printing it out with the above code, or if I try printing &quot;$1 $2 $3 $4 $5 $6 $7\\n&quot; I come out with the same errors and problems as above."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4271535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de3be5b5f99e349cd9b7c60002e9fef?s=128&d=identicon&r=PG&f=1", "display_name": "tleif", "link": "https://stackoverflow.com/users/4271535/tleif"}, "edited": false, "score": 0, "creation_date": 1571953715, "post_id": 58549441, "comment_id": 103420007, "body": "Awesome, changing : to | worked perfectly.  Thank you."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1571953517, "last_edit_date": 1571953517, "creation_date": 1571953046, "answer_id": 58549441, "question_id": 58549275, "link": "https://stackoverflow.com/questions/58549275/perl-regex-non-capturing-group-with-alternative-capturing-within-the-group/58549441#58549441", "title": "Perl RegEx non-capturing group with alternative capturing within the group", "body": "<p>You have two alternatives in the <code>relay</code> field:</p>\n\n<pre><code>relay=(?:(?:\\S+ )?\\[(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\]|(\\S+)\\.)\n                    ^    ----      $6         ----     ^  | ^$7^ \n</code></pre>\n\n<p>If it doesn't follow the first pattern but matches the second one, the relay ends up in <code>$7</code> and <code>$stat</code>. <code>$stat</code> is never populated correctly as it needs $8, not $7.</p>\n\n<p>You can use the branch reset pattern that uses the same capture number for all alternatives:</p>\n\n<pre><code>(?|(?:\\S+ )?\\[(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\]|(\\S+)\\.)\n  ^\n</code></pre>\n\n<p>Or, use the original regex and populate two variables:</p>\n\n<pre><code>    my ($month, $day, $time, $id, $addy, $relay, $relay_alt, $stat) = $line =~ m/$topat/;\n    $relay //= $relay_alt;\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4271535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de3be5b5f99e349cd9b7c60002e9fef?s=128&d=identicon&r=PG&f=1", "display_name": "tleif", "link": "https://stackoverflow.com/users/4271535/tleif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58549441, "answer_count": 1, "score": 4, "last_activity_date": 1571953517, "creation_date": 1571952056, "question_id": 58549275, "link": "https://stackoverflow.com/questions/58549275/perl-regex-non-capturing-group-with-alternative-capturing-within-the-group", "title": "Perl RegEx non-capturing group with alternative capturing within the group", "body": "<p>I'm trying to parse out some mail logs that have the three following possible formats for the relay.</p>\n\n<pre><code>Oct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=mail-company.com. [0.0.0.0], tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\nOct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=[0.0.0.0], tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\nOct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=mail-company.com., tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\n</code></pre>\n\n<p>With the this code:</p>\n\n<pre><code>my $topat    = '^(\\w{3})\\s{1,2}(\\d{1,2}) (\\d{2}:\\d{2}:\\d{2}).+ sendmail\\[\\d.+\\]: (\\w+): to=&lt;(\\S+)&gt;(?:,|, \\[more\\],) delay.+, relay=(?:(?:\\S+ )?\\[(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\]|(\\S+)\\.), .+, stat=(.+)';\n\nforeach my $line(@i) {\n  if($line =~ /$topat/){\n    my ($month, $day, $time, $id, $addy, $relay, $stat) = ($line =~ m/$topat/);\n     print $line;\n     print \"$addy $relay $stat\\n\";\n  }\n}\n</code></pre>\n\n<p>I get the following errors:</p>\n\n<pre><code>Oct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=mail-company.com. [0.0.0.0], tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\nUse of uninitialized value $stat in concatenation (.) or string at ./reg_test line 26.\nemail@company.com 0.0.0.0 \n\nOct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=[0.0.0.0], tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\nUse of uninitialized value $stat in concatenation (.) or string at ./reg_test line 26.\nemail@company.com 0.0.0.0 \n\nOct 24 03:49:10 mxout/mxout/1.1.1.1 sendmail[4642]: x9NA4Wbp011336: to=&lt;email@company.com&gt;, delay=1+00:44:37, xdelay=00:00:00, mailer=esmtp, pri=459, relay=mail-company.com., tls=no, dsn=4.0.0, stat=Deferred: Connection reset by mail-company.com\nUse of uninitialized value $relay in concatenation (.) or string at ./reg_test line 26.\nemail@company.com  mail-company.com\n</code></pre>\n\n<p>In the first two cases it properly grabs the address and relay but not the stat.  And in the third it grabs the address and relay but it thinks that $relay is blank and the $stat is the relay.</p>\n\n<p>I've tried a number of different configurations and groups and I can't seem to find the right solution. any pointers would be much appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1571936663, "post_id": 58546023, "comment_id": 103413165, "body": "Seems like <code>$arrHosts{solaris}{10}{DEV}</code> is not an array, still you are trying to access it as an array"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7481848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af377d9fc97429c51b5c746e8788c04?s=128&d=identicon&r=PG&f=1", "display_name": "carclubadmin", "link": "https://stackoverflow.com/users/7481848/carclubadmin"}, "edited": false, "score": 0, "creation_date": 1571938528, "post_id": 58546128, "comment_id": 103413968, "body": "Yes, that does make a lot more sense. And now I know what push does. Thanks x 2 for that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1571936957, "creation_date": 1571936957, "answer_id": 58546128, "question_id": 58546023, "link": "https://stackoverflow.com/questions/58546023/cant-use-string-as-an-array-ref-while-strict-refs-in-use/58546128#58546128", "title": "Can&#39;t use string as an ARRAY ref while strict refs in use", "body": "<p>You have the following:</p>\n\n<pre><code>$arrHosts{$strOS}{$strVer}{$strEnv} = $strHostname;\n</code></pre>\n\n<p>That means the following contains a string:</p>\n\n<pre><code>$arrHosts{solaris}{10}{DEV}\n</code></pre>\n\n<p>You are treating it as if it contains a reference to an array. To group the hosts by OS+ver+env, replace</p>\n\n<pre><code>$arrHosts{$strOS}{$strVer}{$strEnv} = $strHostname;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>push @{ $arrHosts{$strOS}{$strVer}{$strEnv} }, $strHostname;\n</code></pre>\n\n<p>Iterating over <code>@{ $arrHosts{solaris}{10}{DEV} }</code> will then make sense.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7481848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af377d9fc97429c51b5c746e8788c04?s=128&d=identicon&r=PG&f=1", "display_name": "carclubadmin", "link": "https://stackoverflow.com/users/7481848/carclubadmin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571939556, "creation_date": 1571939556, "answer_id": 58546746, "question_id": 58546023, "link": "https://stackoverflow.com/questions/58546023/cant-use-string-as-an-array-ref-while-strict-refs-in-use/58546746#58546746", "title": "Can&#39;t use string as an ARRAY ref while strict refs in use", "body": "<p>My previous code also had the obvious problem whereby if the combo of OS, Version, and Environment were the same it wrote over previous data. Blunderful. Push is the trick</p>\n"}], "owner": {"reputation": 41, "user_id": 7481848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af377d9fc97429c51b5c746e8788c04?s=128&d=identicon&r=PG&f=1", "display_name": "carclubadmin", "link": "https://stackoverflow.com/users/7481848/carclubadmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 58546128, "answer_count": 2, "score": 2, "last_activity_date": 1571939556, "creation_date": 1571936531, "question_id": 58546023, "link": "https://stackoverflow.com/questions/58546023/cant-use-string-as-an-array-ref-while-strict-refs-in-use", "title": "Can&#39;t use string as an ARRAY ref while strict refs in use", "body": "<p>Getting an error when I attempt to dump out part of a multi dimensional hash array. Perl spits out</p>\n\n<p>Can't use string (\"somedata\") as an ARRAY ref while \"strict refs\" in use at ./myscript.pl </p>\n\n<p>I have tried multiple ways to access part of the array I want to see but I always get an error. I've used Dumper to see the entire array and it looks fine.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper qw(Dumper);\nuse String::Util qw(trim);\n\nmy %arrHosts;\n\nopen(my $filehdl, \"&lt;textfile.txt\") || die \"Cannot open or find file textfile.txt: $!\\n\";\n\nwhile( my $strInputline = &lt;$filehdl&gt; ) {\n  chomp($strInputline);\n  my ($strHostname,$strOS,$strVer,$strEnv) = split(/:/, $strInputline);\n  $strOS = lc($strOS);\n  $strVer = trim($strVer);\n  $strEnv = trim($strEnv);\n  $strOS = trim($strOS);\n  $arrHosts{$strOS}{$strVer}{$strEnv} = $strHostname;\n}\n\n# If you want to see the entire database, remove the # in front of Dumper\nprint Dumper \\%arrHosts;\n\nforeach my $machine (@{$arrHosts{solaris}{10}{DEV}}) {\n  print \"$machine\\n\";\n}\n\nclose($filehdl);\n</code></pre>\n\n<p>The data is in the form\nmachine:OS:OS version:Environment</p>\n\n<p>For example</p>\n\n<pre><code>bigserver:solaris:11:PROD\nsmallerserver:solaris:11:DEV\n</code></pre>\n\n<p>I want to print out only the servers that are solaris, version 11, in DEV. Using hashes seems the easiest way to store the data but alas, Perl barfs when attempting to print out only a portion of it. Dumper works great but I don't want to see everything. Where did I go wrong??</p>\n"}, {"tags": ["perl", "inline-c"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1571930683, "post_id": 58542232, "comment_id": 103410371, "body": "Re &quot;<i>Any idea where the default comes from</i>&quot;, It uses what was used to build the <code>perl</code> being used, as returned by <code>perl -V:ccflags</code> and <code>use Config qw( %Config ); $Config{ccflags}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 1973791, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26980772186955ff1b476b11e3097ca3?s=128&d=identicon&r=PG", "display_name": "Ecuador", "link": "https://stackoverflow.com/users/1973791/ecuador"}, "edited": false, "score": 0, "creation_date": 1571929137, "post_id": 58543595, "comment_id": 103409550, "body": "You are correct, thanks! Any idea where the default is pulled from and is different on each machine?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1571930396, "post_id": 58543595, "comment_id": 103410214, "body": "The Inline::C docs refer to the MakeMaker <a href=\"https://perldoc.pl/ExtUtils::MakeMaker#CCFLAGS\" rel=\"nofollow noreferrer\">ccflags</a> and <a href=\"https://perldoc.pl/ExtUtils::MakeMaker#OPTIMIZE\" rel=\"nofollow noreferrer\">optimize</a> settings. These are the same except they have different defaults and are positioned differently in the resulting argument list."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1571930802, "post_id": 58543595, "comment_id": 103410447, "body": "On my system, it appears this default comes from <code>$Config{optimize}</code>, which is stored as a read-only default at the time perl was compiled/built on the system."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 6, "last_activity_date": 1571957141, "last_edit_date": 1571957141, "creation_date": 1571927452, "answer_id": 58543595, "question_id": 58542232, "link": "https://stackoverflow.com/questions/58542232/perl-inlinec-default-flags/58543595#58543595", "title": "Perl Inline::C default flags", "body": "<p>It appears as though adding the <code>optimize</code> configuration option may do what you want. Here's a very short example with the output before adding <code>optimize =&gt; '-O3'</code> and after:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Inline 'C';\n\nuse Inline C =&gt; 'Config',\n    build_noisy =&gt; 1,\n    force_build =&gt; 1,\n    optimize =&gt; '-O3',\n;\n\nprint add(5, 6);\n\n__END__\n__C__\n\nint add (int x, int y){\n    return(x + y);\n}\n</code></pre>\n\n<p>Here's the output (snipped for brevity):</p>\n\n<p>Before:</p>\n\n<p><code>cc -c  -I\"/home/steve/scratch/inline\" -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2</code></p>\n\n<p>After:</p>\n\n<p><code>cc -c  -I\"/home/steve/scratch/inline\" -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O3</code></p>\n\n<p>...on Linux Mint 18.3.</p>\n\n<p><strong>The default</strong> comes from <code>$Config{optimize}</code>, which is stored as a read-only default at the time <code>perl</code> was compiled/built on the system.</p>\n"}], "owner": {"reputation": 756, "user_id": 1973791, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26980772186955ff1b476b11e3097ca3?s=128&d=identicon&r=PG", "display_name": "Ecuador", "link": "https://stackoverflow.com/users/1973791/ecuador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 58543595, "answer_count": 1, "score": 7, "last_activity_date": 1571957141, "creation_date": 1571922980, "question_id": 58542232, "link": "https://stackoverflow.com/questions/58542232/perl-inlinec-default-flags", "title": "Perl Inline::C default flags", "body": "<p>I made a module using Inline::C and I noticed some unexpected performance discrepancies between running it on the host MacOS vs a guest Linux VM. Looking into it, it was due to the default C compiler flags being different.\nOn MacOS they appear to be:</p>\n\n<pre><code>-fno-common -DPERL_DARWIN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -O3   -DVERSION=\\\"0.00\\\" -DXS_VERSION=\\\"0.00\\\"\n</code></pre>\n\n<p>Vs on Centos 7:</p>\n\n<pre><code> -fPIC -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -O2   -DVERSION=\\\"0.00\\\" -DXS_VERSION=\\\"0.00\\\"\n</code></pre>\n\n<p>The main difference for my code is O3 vs O2, so I looked into the Inline docs and used:</p>\n\n<pre><code>use Inline (C =&gt; Config =&gt; ccflags =&gt; '-O3');\n</code></pre>\n\n<p>To explicitly specify <code>-O3</code>. Well, the result is that <code>-O3 -O2</code> is applied that way, so specifying ccflags does not overwrite the default, it just adds <em>before</em> them, which in the end does not have any effect.\nAny idea where the default comes from and/or how to overwrite it to specify the optimization level that I want.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1571933200, "post_id": 58538495, "comment_id": 103411675, "body": "I tried to install ActivePerl 5.28 on a Windows 10 laptop now. I chose the typical setup type (not the custom or complete options). After the installer completed I opened the Command Prompt window and typed <code>ppm</code>, and got the same error as you got: <code>&#39;ppm&#39; is not recognized as an internal or external command</code>"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "edited": false, "score": 0, "creation_date": 1571985941, "post_id": 58546853, "comment_id": 103426678, "body": "Like you said ppm works now but dmake still doesn&#39;t work. Think I&#39;ll just give up and get another OpenSSL client"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "edited": false, "score": 0, "creation_date": 1571987596, "post_id": 58546853, "comment_id": 103427337, "body": "Ok, but I think it would be nice to dig a little bit more here. Which packages are you now not able to install? I can have a try at it if you tell me where to start?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 8, "last_activity_date": 1571949933, "last_edit_date": 1571949933, "creation_date": 1571939976, "answer_id": 58546853, "question_id": 58538495, "link": "https://stackoverflow.com/questions/58538495/ppm-doesnt-work-after-installing-activestate-perl/58546853#58546853", "title": "ppm doesn&#39;t work after installing ActiveState Perl", "body": "<p>Seems like you need to add the <code>ActivePerl-PPM</code> package to the Active Platform perl project before downloading the installer <code>.exe</code>.</p>\n\n<ul>\n<li><p>First, remove the old installation of ActivePerl (I am not sure if this is necessary though). Double-Click the installer <code>.exe</code>, typically something like: <code>ActivePerl-5.28.1.0000-MSWin32-x64-832ee6ab.exe</code>, then click \"Next\" and then click \"Remove\".</p></li>\n<li><p>Now, go to the Active Platform page of the forked perl project:\n<a href=\"https://platform.activestate.com\" rel=\"noreferrer\">https://platform.activestate.com</a></p></li>\n<li><p>Click the configuration tab of the project and click \"Add packages\"</p></li>\n<li><p>Add the package \"ActivePerl-PPM\", click \"Add\" and then \"Done\". </p></li>\n<li><p>Still in the configuration tab, click \"Commit changes\"</p></li>\n<li><p>From the \"Overview\" tab, click the download button for the new build.</p></li>\n</ul>\n\n<p>After installing the new build, I get the following output from the Command Prompt:</p>\n\n<pre><code>C:\\Users\\Bruker&gt;ppm\nppm gui failed: Can't locate Win32/OLE.pm in @INC (you may need to install the Win32::OLE module) (@INC contains: C:/Perl64/lib C:/Perl64/site/lib)\n</code></pre>\n\n<p>So at least now it finds the <code>ppm</code> executable, but there are still missing modules.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>After also adding two more packages to the build: <code>Win32-Console</code>, and <code>Win32-OLE</code>. Then rebuilding and reinstalling, the <code>ppm</code> command finally worked:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3oB1v.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3oB1v.png\" alt=\"enter image description here\"></a></p>\n\n<p>The command <code>cpan dmake</code> still fails though, see also <a href=\"https://stackoverflow.com/q/56972534/2173773\">How to install dmake with perl?</a></p>\n"}], "owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7491, "favorite_count": 0, "accepted_answer_id": 58546853, "answer_count": 1, "score": 3, "last_activity_date": 1571949933, "creation_date": 1571909905, "last_edit_date": 1571913638, "question_id": 58538495, "link": "https://stackoverflow.com/questions/58538495/ppm-doesnt-work-after-installing-activestate-perl", "title": "ppm doesn&#39;t work after installing ActiveState Perl", "body": "<p>I'm trying to install OpenSSL for a mongodb example, but can't install some perl packages</p>\n\n<p>I installed ActivePerl 5.28, restarted the computer, added path variable, and ppm still doesn't work</p>\n\n<p><img src=\"https://i.imgur.com/3ce0GUv.png\" alt=\"PathVariables\"></p>\n\n<p>When i type ppm into cmd it returns</p>\n\n<pre><code>'ppm' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n\n<p>Cpan works but I can't install some packages like dmake</p>\n\n<p><img src=\"https://i.imgur.com/rVxPNri.png\" alt=\"dmakeCmd\"></p>\n"}, {"tags": ["perl", "iso8601"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1571909370, "creation_date": 1571909370, "answer_id": 58538316, "question_id": 58537597, "link": "https://stackoverflow.com/questions/58537597/how-to-get-date-format-from-iso8601-datei-and-time-in-perl/58538316#58538316", "title": "How to get date format from iso8601 datei and time in perl", "body": "<p>There are two subroutines called <code>strftime()</code> here and I think that's slightly confusing you.</p>\n\n<p>You are (accidentally?) calling the <code>strftime()</code> function from the <a href=\"https://perldoc.perl.org/POSIX.html\" rel=\"noreferrer\"><code>POSIX</code></a> module and, as your error message tells you, that subroutine expects very specific arguments (basically the list of values you get back from <code>localtime()</code> or <code>gmtime()</code>).</p>\n\n<p>But you don't need to do that. Your <code>$dt</code> variable is an object of the class <code>DateTime</code>. And <code>DateTime</code> objects have their own <code>strftime()</code> method that you can call on the object.</p>\n\n<pre><code>$dt-&gt;strftime('%Y-%m-%d'); # 2018-07-03\n</code></pre>\n\n<p>It's also worth mentioning that the <code>strftime()</code> method is really only intended for creating strings in more obscure date and time formats. For common formats, the <code>DateTime</code> class has other methods that you can use. For example, the date format that you want can be produced using the <code>ymd()</code> method.</p>\n\n<pre><code>$dt-&gt;ymd; # 2018-07-03\n</code></pre>\n\n<p>This all means that you can remove the <code>use POSIX</code> line from your code. You won't be using that module at all. Everything you need is in the <code>DateTime</code> class.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1571910458, "post_id": 58538475, "comment_id": 103399349, "body": "The OP is not looking for a parser, they want to format their output. And that&#39;s all already available in the <code>DateTime</code> class."}], "tags": [], "owner": {"reputation": 79, "user_id": 10391212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qYyry.png?s=128&g=1", "display_name": "T&#39;East", "link": "https://stackoverflow.com/users/10391212/teast"}, "is_accepted": false, "score": 1, "last_activity_date": 1571909857, "creation_date": 1571909857, "answer_id": 58538475, "question_id": 58537597, "link": "https://stackoverflow.com/questions/58537597/how-to-get-date-format-from-iso8601-datei-and-time-in-perl/58538475#58538475", "title": "How to get date format from iso8601 datei and time in perl", "body": "<p>You can build flexible DateTime parser with <strong>DateTime::Format::Builder</strong>. As example you can see source code from <strong>DateTime::Format::MySQL</strong>.\nFor example:</p>\n\n<pre><code>package MyTimeParser;\nuse strict;\nuse warnings;\n\nuse DateTime;\nuse DateTime::Format::Builder\n(\n    parsers =&gt; {\n        parse_datetime =&gt; [\n            {\n                # 20180703T230600\n                regex =&gt; qr/^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})$/,\n                params =&gt; [qw( year month day hour minute second )],\n            },\n            # here you can describe another format\n        ],\n    }\n);\n1;\n\npackage main;\nuse strict;\nuse warnings;\n\nmy $dt_str = 'Frank_Gibson.20180703T230600.Program_Manager.New_York.doc';\nmy @perl_time_array = split /\\./, $dt_str;\n\n# 2018-07-03\nprint MyTimeParser-&gt;parse_datetime( $perl_time_array[1] )-&gt;ymd('-');\n\nexit;\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58538316, "answer_count": 2, "score": 1, "last_activity_date": 1571909857, "creation_date": 1571906873, "question_id": 58537597, "link": "https://stackoverflow.com/questions/58537597/how-to-get-date-format-from-iso8601-datei-and-time-in-perl", "title": "How to get date format from iso8601 datei and time in perl", "body": "<p>I am parsing data and getting a date.  I then convert that to iso8601 object.  However I am stuck trying to get just the year month date format.</p>\n\n<pre><code>use DateTime::Format::ISO8601;\nuse POSIX qw(strftime);\nmy $dt_str = 'Frank_Gibson.20180703T230600.Program_Manager.New_York.doc';\nmy @perl_time_array = split /\\./, $dt_str;\nmy $dt = DateTime::Format::ISO8601-&gt;parse_datetime($perl_time_array[1]);\n</code></pre>\n\n<p>prints <code>2018-07-03T23:06:00</code>\nHow do I get just the date? I have tried to use </p>\n\n<pre><code>$dt = strftime('%Y-%m-%d',$dt);\n</code></pre>\n\n<p>But I am getting the following error.</p>\n\n<pre><code>Usage: POSIX::strftime(fmt, sec, min, hour, mday, mon, year, wday = -1, yday = -1, isdst = -1) at /home/pi/code/perl/perl_regex_lookahead.pl line 26.\n</code></pre>\n\n<p>Do I just use a regex to get what I am looking for or is there a way to format using using <code>DateTime::Format::ISO8601</code> or <code>strftime</code></p>\n"}]