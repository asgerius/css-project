[{"tags": ["regex", "string", "perl", "text", "text-parsing"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1459414137, "post_id": 36321720, "comment_id": 60279170, "body": "Why are you trying to use a regex for this? It looks an awful lot like a job for <code>split</code>"}, {"owner": {"reputation": 57, "user_id": 2348235, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc1998b00f3fb4358fe4b28a298cb1fe?s=128&d=identicon&r=PG", "display_name": "user2348235", "link": "https://stackoverflow.com/users/2348235/user2348235"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1459478943, "post_id": 36321720, "comment_id": 60315707, "body": "Well I have simplified the question for explanation propose but since I&#39;m parcing large text strings I think this is the correct way to go"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2348235, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc1998b00f3fb4358fe4b28a298cb1fe?s=128&d=identicon&r=PG", "display_name": "user2348235", "link": "https://stackoverflow.com/users/2348235/user2348235"}, "edited": false, "score": 0, "creation_date": 1459383586, "post_id": 36321879, "comment_id": 60267263, "body": "Oooh now I understand how it is used... Thanks! :)"}], "tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": true, "score": 2, "last_activity_date": 1459387255, "last_edit_date": 1459387255, "creation_date": 1459382366, "answer_id": 36321879, "question_id": 36321720, "link": "https://stackoverflow.com/questions/36321720/how-to-define-a-regex-that-matches-4-3-or-2-word-with-that-hierarchic-order/36321879#36321879", "title": "How to define a regex that matches 4, 3 or 2 word with that hierarchic order?", "body": "<p>Don't capture the space. Use non-capturing groups for the optional:</p>\n\n<pre><code>(?:([A-Z]+) )?(?:([A-Z]+) )?([A-Z]+) \\b(\\d{2,5})\\b\n</code></pre>\n\n<p><code>(?:...)</code> creates a non-capturing group, which is a group for the purposes of bracketing up expressions, but does't create a group in the match result.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 2348235, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc1998b00f3fb4358fe4b28a298cb1fe?s=128&d=identicon&r=PG", "display_name": "user2348235", "link": "https://stackoverflow.com/users/2348235/user2348235"}, "edited": false, "score": 0, "creation_date": 1459383531, "post_id": 36321890, "comment_id": 60267241, "body": "Interesting alternative approach but the previous answer does get it with only one regex as asked so I&#39;m selecting his answer as the correct one... Thanks for answering :)"}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1459405312, "post_id": 36321890, "comment_id": 60273817, "body": "You could even not bother with the regex if you know the structure of the data, and just split on space, with the last element being the number.  <code>my (@words, $num) = split(&#39; &#39;, $line);</code>"}, {"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1459451821, "post_id": 36321890, "comment_id": 60305588, "body": "@AdamMillerchip Small bug in your code: The array on the LHS will consume all the elements from the split, leaving $num as undef."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1459678745, "post_id": 36321890, "comment_id": 60385400, "body": "@Miller good spot, should&#39;ve known better than to post untested code! Looks like there isn&#39;t a way to write it cleanly in one statement as I&#39;d hoped. The best I came up with is <code>my ($tail, @head) = (pop @list, @list);</code>, but that&#39;s kind of confusing. Or <code>my ($tail, @head) = ($list[-1], @list[0..$#list-1]);</code> :-("}], "tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": false, "score": 5, "last_activity_date": 1459382401, "creation_date": 1459382401, "answer_id": 36321890, "question_id": 36321720, "link": "https://stackoverflow.com/questions/36321720/how-to-define-a-regex-that-matches-4-3-or-2-word-with-that-hierarchic-order/36321890#36321890", "title": "How to define a regex that matches 4, 3 or 2 word with that hierarchic order?", "body": "<p>Just do it in two steps:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nwhile (&lt;DATA&gt;) {\n    if (/\\b((?:[A-Z]+\\s+){1,3})\\b(\\d+)\\b/) {\n        my @words = split ' ', $1;\n        my $num = $2;\n\n        say \"Words = \" . join ', ', @words;\n        say \"Num   = $num\";\n    }\n}\n\n__DATA__\nBULDING ROBERT SMITH 362\nBULDING STEVENSON 7255\nBULDING 15\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Words = BULDING, ROBERT, SMITH\nNum   = 362\nWords = BULDING, STEVENSON\nNum   = 7255\nWords = BULDING\nNum   = 15\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 2348235, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc1998b00f3fb4358fe4b28a298cb1fe?s=128&d=identicon&r=PG", "display_name": "user2348235", "link": "https://stackoverflow.com/users/2348235/user2348235"}, "edited": false, "score": 0, "creation_date": 1459479052, "post_id": 36325085, "comment_id": 60315742, "body": "Thanks but the program requires later use of matched groups that&#39;s why a regex was asked. Also, long strings will be parsed... Lots of junk elements would be added to the array in such implementation"}], "tags": [], "owner": {"reputation": 51, "user_id": 4910370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d9cac8fbf0fcdad414e7779fecb86a?s=128&d=identicon&r=PG&f=1", "display_name": "shalk", "link": "https://stackoverflow.com/users/4910370/shalk"}, "is_accepted": false, "score": 0, "last_activity_date": 1459403131, "creation_date": 1459403131, "answer_id": 36325085, "question_id": 36321720, "link": "https://stackoverflow.com/questions/36321720/how-to-define-a-regex-that-matches-4-3-or-2-word-with-that-hierarchic-order/36325085#36325085", "title": "How to define a regex that matches 4, 3 or 2 word with that hierarchic order?", "body": "<p>ans\uff1a</p>\n\n<pre><code> ([A-Z]+) ([A-Z]+)? ([A-Z]+)? (\\d{2,5})\n</code></pre>\n\n<p>This regular express can satify\u3002\n\nI thought you can use <code>split()</code> function instead; </p>\n\n<pre><code>use strict;\nuse 5.010;\nmy $str=\"BULDING ROBERT SMITH 362\";\nmy @array = split(\" \",$str);\nmy $num = pop(@array);\nmy ($str1,$str2,$str3) = @array;\nsay $str1;\nsay $str2 if $str2;\nsay $str3 if $str3; \n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2348235, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fc1998b00f3fb4358fe4b28a298cb1fe?s=128&d=identicon&r=PG", "display_name": "user2348235", "link": "https://stackoverflow.com/users/2348235/user2348235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 36321879, "answer_count": 3, "score": 1, "last_activity_date": 1459403131, "creation_date": 1459381412, "question_id": 36321720, "link": "https://stackoverflow.com/questions/36321720/how-to-define-a-regex-that-matches-4-3-or-2-word-with-that-hierarchic-order", "title": "How to define a regex that matches 4, 3 or 2 word with that hierarchic order?", "body": "<p>To be more precise, I need a regex to match 3, 2 or 1 consecutive uppercase words and a number of 2 to 5 digits... and save each word and number in a capturing group... For example:</p>\n\n<pre><code>BULDING ROBERT SMITH 362 ---&gt; Should be matched and the following should \n                              be valid: $1=\"BULDING\"; $2=\"ROBERT\"; $3=\"SMITH\"; $4=\"362\";\n\nBULDING STEVENSON 7255 ---&gt; Should be matched and the following should \n                              be valid: $1=\"BULDING\"; $2=\"STEVENSON\"; $3=\"7255\";\n\nBULDING 15 ---&gt; Should be matched and the following should \n                              be valid: $1=\"BULDING\"; $2=\"15\";\n</code></pre>\n\n<p>Until now I came up with following</p>\n\n<pre><code>([A-Z]+ )?([A-Z]+ )?([A-Z]+) \\b(\\d{2,5})\\b\n</code></pre>\n\n<p>but doesn't satisfy my needs since it matches also the \" \" that are immediately after the first and second optional matches... Can you help get it?</p>\n"}, {"tags": ["testing", "perl", "installation"], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459382842, "post_id": 36379137, "comment_id": 60375647, "body": "Yeah, it looks like you&#39;re right. I cleared the hard coding in most places with <code>&#47;usr&#47;bin&#47;env perl</code> (about 120 of them), but that damn makefile has it hard coded, too. I needed a <code>make test PERL=&#47;usr&#47;local&#47;bin&#47;perl</code>."}], "tags": [], "owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": true, "score": 2, "last_activity_date": 1459379416, "creation_date": 1459379416, "answer_id": 36379137, "question_id": 36379136, "link": "https://stackoverflow.com/questions/36379136/alternate-perl-environment-for-testing/36379137#36379137", "title": "Alternate Perl environment for testing", "body": "<p>Debugging these is never fun...</p>\n\n<p>Your problem is that when you <code>make test</code> it eventually does <code>/usr/bin/perl .././test/run_tests.pl</code> which is going to pull in the old Perl and not the new Perl you created.</p>\n\n<p>You need to either figure out where it gets that /usr/bin/perl from, or to put your new Perl there instead.  A natural guess is that you began installing with your old Perl, installed a new one, went back to your old one, and it has the original configuration.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1459633850, "question_id": 314301}, "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 36379137, "answer_count": 1, "score": 1, "last_activity_date": 1459633850, "creation_date": 1459372679, "last_edit_date": 1491982281, "question_id": 36379136, "link": "https://stackoverflow.com/questions/36379136/alternate-perl-environment-for-testing", "title": "Alternate Perl environment for testing", "body": "<p>My <a href=\"https://softwareengineering.stackexchange.com/help/on-topic\">testing environment</a> includes some older platforms. I'm trying to test OpenSSL on an older Debian 6 platform, and the OpenSSL test scripts are having trouble with Perl 5.10. So I am trying to fix a <em>\"Test::More version 0.96 required...\"</em> when running OpenSSL's test suite.</p>\n\n<p>I downloaded Perl 5.22.1, built it from sources, and installed it in <code>/opt/perl</code> with <code>./configure -des -Dprefix=/opt/perl</code>:</p>\n\n<pre><code>$ ls /opt/perl/\nbin  lib\n\n$ ls -Al /opt/perl/bin/ | grep perl\n-rwxr-xr-x 2 root root 1879707 Mar 30 12:01 perl\n-rwxr-xr-x 2 root root 1879707 Mar 30 12:01 perl5.22.1\n-rwxr-xr-x 2 root root   45365 Mar 30 12:01 perlbug\n...\n\n$ ls /opt/perl/lib\n5.22.1  site_perl\n</code></pre>\n\n<p>I created a script to forward calls into the new Perl:</p>\n\n<pre><code>$ which perl\n/usr/local/bin/perl\n\n$ cat /usr/local/bin/perl\n#!/usr/bin/env bash\n\nLD_LIBRARY_PATH=\"/opt/perl/lib:$LD_LIBRARY_PATH\"; PERL5LIB=\"/opt/perl/lib/5.22.1:$PERL5LIB\"; \\\n/opt/perl/bin/perl5.22.1 \"$@\"\n</code></pre>\n\n<p>However, when I run the OpenSSL test script I continue to encounter <em>\"Test::More version 0.96 required...\"</em> (both with and without <code>PERL5LIB</code>):</p>\n\n<pre><code>$ make test\n( cd test; \\\n      SRCTOP=../. \\\n      BLDTOP=../. \\\n      EXE_EXT= \\\n      OPENSSL_ENGINES=.././engines \\\n        /usr/bin/perl .././test/run_tests.pl  )\n../test/recipes/01-test_abort.t ........... Test::More version 0.96 required--this is only version 0.92 \n...\n</code></pre>\n\n<p>I'm obviously doing something wrong with the new Perl on this testing machine.</p>\n\n<p>What's wrong with the Perl installation?</p>\n\n<hr>\n\n<p><code>Test::More</code> is available:</p>\n\n<pre><code>$ find /opt/perl -name '*More*'\n/opt/perl/lib/5.22.1/Test/More.pm\n</code></pre>\n\n<p>And it seems to be a version that meets requirements:</p>\n\n<pre><code>$ cat /opt/perl/lib/5.22.1/Test/More.pm | grep VERSION\nour $VERSION = '1.001014';\n$VERSION = eval $VERSION;    ## no critic (BuiltinFunctions::ProhibitStringyEval)\n</code></pre>\n\n<hr>\n\n<p>Related, I'm not experienced with Perl, so I have lots of gaps. I thought it had to do with <code>PERL5LIB</code> since <code>Test::More</code> seems to be related to it. Perl's INSTALL has this to say:</p>\n\n<blockquote>\n  <p>When using the newer perl, you can add these paths again in the\n  PERL5LIB environment variable or with perl's -I runtime option.</p>\n</blockquote>\n\n<p>I don't quite understand why the new PM files would not be included with the new Perl by default. And I don't understand why adding them via <code>PERL5LIB</code> does not resolve the issue. So I guess it means <code>PERL5LIB</code> is not part of the problem.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1459375428, "post_id": 36319624, "comment_id": 60264432, "body": "<code>printf out1 &quot;%03b %s %s\\n&quot;, split &#39; &#39;, $line;</code>  Note that global filehandles are by convention uppercase (TF, OUT1), but lexical filehandles are preferred: <code>open( my $tf, ... ); while (my $line = &lt;$tf&gt;)...</code>.  Also, 3-arg open is preferred: <code>open( my $out1, &#39;&gt;&#39;, &#39;bin.txt&#39; )</code> and some builtins will give you trouble if you parenthesize but leave a space between the builtin name and the <code>(</code>, so avoid doing that.  Lastly, <code>use autodie;</code> is your friend."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459434004, "post_id": 36319714, "comment_id": 60293988, "body": "<code>s&#47;^(\\d).*&#47;$1&#47;</code> can also be written as <code>s&#47;^\\d\\K.*&#47;&#47;</code>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1459433937, "last_edit_date": 1459433937, "creation_date": 1459371884, "answer_id": 36319714, "question_id": 36319624, "link": "https://stackoverflow.com/questions/36319624/how-to-replace-every-first-decimal-number-of-line-with-binary-number-w-o-effecti/36319714#36319714", "title": "how to replace every first decimal number of line with binary number w/o effecting other words", "body": "<pre><code>perl -pe 's/^(\\d+)/sprintf(\"%03b\",$1)/e' inputfile.txt\n</code></pre>\n\n<p><code>s///e</code> will execute the replacement as Perl code and replace the match with the result, leaving the rest unchanged.</p>\n\n<pre><code>perl -pe 's/^(\\d).*/$1/' inputfile.txt\n</code></pre>\n\n<p>for the first character, but there are easier non-regex ways:</p>\n\n<pre><code>cut -c1 inputfile.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6136784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feedb6d360f2f5461a7c1353e07d0e8c?s=128&d=identicon&r=PG&f=1", "display_name": "akp", "link": "https://stackoverflow.com/users/6136784/akp"}, "edited": false, "score": 0, "creation_date": 1459425178, "post_id": 36319749, "comment_id": 60287268, "body": "Thanks a lot for all your comments. most of them are worked for me."}, {"owner": {"reputation": 515, "user_id": 1181562, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c068e0a4a006e7cdced3f7d77ce0a387?s=128&d=identicon&r=PG", "display_name": "russdot", "link": "https://stackoverflow.com/users/1181562/russdot"}, "reply_to_user": {"reputation": 13, "user_id": 6136784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feedb6d360f2f5461a7c1353e07d0e8c?s=128&d=identicon&r=PG&f=1", "display_name": "akp", "link": "https://stackoverflow.com/users/6136784/akp"}, "edited": false, "score": 0, "creation_date": 1459520206, "post_id": 36319749, "comment_id": 60336902, "body": "I&#39;m not sure why this answer is getting voted down. Is there a problem with it?"}], "tags": [], "owner": {"reputation": 515, "user_id": 1181562, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c068e0a4a006e7cdced3f7d77ce0a387?s=128&d=identicon&r=PG", "display_name": "russdot", "link": "https://stackoverflow.com/users/1181562/russdot"}, "is_accepted": false, "score": -1, "last_activity_date": 1459371990, "creation_date": 1459371990, "answer_id": 36319749, "question_id": 36319624, "link": "https://stackoverflow.com/questions/36319624/how-to-replace-every-first-decimal-number-of-line-with-binary-number-w-o-effecti/36319749#36319749", "title": "how to replace every first decimal number of line with binary number w/o effecting other words", "body": "<p>You can use <a href=\"http://www.regular-expressions.info/anchors.html\" rel=\"nofollow\">regex anchors</a> to achieve what you want. A regular expression like <code>^\\d</code> would match a single digit at the beginning of a line.</p>\n\n<p>If you need to support multi-digit numbers (like 15 or 123, for example) you can add a repetition operator: <code>^\\d+</code> will match any multi-digit number at the beginning of a line.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1459381181, "creation_date": 1459381181, "answer_id": 36321680, "question_id": 36319624, "link": "https://stackoverflow.com/questions/36319624/how-to-replace-every-first-decimal-number-of-line-with-binary-number-w-o-effecti/36321680#36321680", "title": "how to replace every first decimal number of line with binary number w/o effecting other words", "body": "<p>Use <code>-a</code> (autosplit mode) to split on whitespace, but only modify the first column with your conversion and print the other columns unchanged:</p>\n\n<pre><code>$ perl -wane '$F[0] = sprintf(\"%03b\", $F[0]); print \"@F\\n\";' input.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>011 4 5\n110 7 2\n001 2 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5043419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGtks.jpg?s=128&g=1", "display_name": "velz", "link": "https://stackoverflow.com/users/5043419/velz"}, "is_accepted": false, "score": 0, "last_activity_date": 1459399690, "creation_date": 1459399690, "answer_id": 36324392, "question_id": 36319624, "link": "https://stackoverflow.com/questions/36319624/how-to-replace-every-first-decimal-number-of-line-with-binary-number-w-o-effecti/36324392#36324392", "title": "how to replace every first decimal number of line with binary number w/o effecting other words", "body": "<pre><code>you can split to get the first column and use sprintf to convert decimal  to binary number\n\nuse lexical filehandle so that u can avoid closing the filehandle. \n\nselect is used to write the content to a new file.\n\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;',\"num.txt\" || die \"$!\";\nopen my $wh , '&gt;',\"op.txt\" || die \"$!\";\nselect ($wh);\nwhile (my $line = &lt;$fh&gt;)\n{\n   chomp($line);\n   my @aRR = split (/\\s/,$line);\n   my $bin = sprintf(\"%03b\",$aRR[0]);\n   print $bin,\" \",$aRR[1],\" \", $aRR[2],\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6136784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feedb6d360f2f5461a7c1353e07d0e8c?s=128&d=identicon&r=PG&f=1", "display_name": "akp", "link": "https://stackoverflow.com/users/6136784/akp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1459433937, "creation_date": 1459371552, "last_edit_date": 1459374884, "question_id": 36319624, "link": "https://stackoverflow.com/questions/36319624/how-to-replace-every-first-decimal-number-of-line-with-binary-number-w-o-effecti", "title": "how to replace every first decimal number of line with binary number w/o effecting other words", "body": "<p>I am trying to convert a first decimal word of every line to binary without affecting any other words.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>use strict;\n\nuse warnings;\n\nopen (tf, \"dec.txt\");\nopen (out1, \" &gt; bin.txt\");\nwhile (my $line = &lt;tf&gt;){\n    my $binary_number = sprintf(\"%03b\", $line); \n    print out1 \" $binary_number\\n\";\n}\nclose (tf);\n</code></pre>\n\n<p><strong><em>input file example:</em></strong></p>\n\n<pre><code>3 4 5 \n6 7 2\n1 2 3\n</code></pre>\n\n<p><strong><em>expected output:</em></strong></p>\n\n<pre><code>011 4 5\n110 7 2\n001 2 3\n</code></pre>\n\n<p><strong><em>o/p from the code:</em></strong></p>\n\n<pre><code>011\n110\n001\n</code></pre>\n\n<hr>\n\n<p>Is there any suggestion to achieve o/p file as per expected output? I am missing other words in the line here. those words I want to print as it is.</p>\n\n<p>and also another question:\nis there a way to read a single column (not line)?</p>\n\n<p>for example in above o/p 1st column ...</p>\n\n<pre><code>0\n1\n0\n</code></pre>\n"}, {"tags": ["perl", "mechanize", "www-mechanize-firefox"], "answers": [{"comments": [{"owner": {"reputation": 1169, "user_id": 1160838, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7cb3f2847bb5f43b838a6ffab73828a?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1160838/bill"}, "edited": false, "score": 0, "creation_date": 1459433268, "post_id": 36323950, "comment_id": 60293489, "body": "using find_all_links_dom how do I loop through the links and see data on them?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1169, "user_id": 1160838, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7cb3f2847bb5f43b838a6ffab73828a?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1160838/bill"}, "edited": false, "score": 0, "creation_date": 1459447269, "post_id": 36323950, "comment_id": 60302937, "body": "@Bill  <code>find_all_links_dom()</code> returns an array of DOM objects, on which you can invoke suitable methods.  So you set up a normal loop, like <code>for my $dobj (@links) {}</code> and call whatever is suitable for each, depending on how you need to disambiguate them. I&#39;ll update the answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1169, "user_id": 1160838, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7cb3f2847bb5f43b838a6ffab73828a?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1160838/bill"}, "edited": false, "score": 0, "creation_date": 1459449296, "post_id": 36323950, "comment_id": 60304165, "body": "@Bill  Updated the answer."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1459449701, "last_edit_date": 1495541272, "creation_date": 1459397166, "answer_id": 36323950, "question_id": 36317763, "link": "https://stackoverflow.com/questions/36317763/going-to-a-javascript-link-with-mechanize-firefox/36323950#36323950", "title": "going to a javascript link with mechanize-firefox", "body": "<p>Without the page and its HTML and JS one can only guess. Note that the <code>follow_link()</code> methods don't work with JS links. The method below does, but of course I cannot test without the page.</p>\n\n<p>Probably the best bet is to get link(s) as DOM object(s) for the <code>click</code> method</p>\n\n<pre><code>use WWW::Mechanize::Firefox;\n# Get to your page with the link(s)\nmy $link = find_link_dom( text_regex =&gt; 'abc' );   # Or use find_all_links_dom()\n$link-&gt;click();  \n# $mech-&gt;click( { dom =&gt; $link } )  # works as well\n</code></pre>\n\n<p>There are also <code>text</code> and <code>text_contains</code> relevant options (instead of <code>text_regex</code>), along with a number of others. Note that <code>click</code> method will wait, on a list of events, before returning. See for example <a href=\"https://stackoverflow.com/questions/36243320/how-to-use-synchronize-method-with-wwwmechanizefirefox/36258748#36258748\">this recent post</a>. This is critical for pages that take longer to complete.  </p>\n\n<p>See docs for <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm#$mech-%3Efind_link_dom%28_%options_%29\" rel=\"nofollow noreferrer\"><code>find_link_dom()</code></a> and <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm#$mech-%3Eclick%28_$name_[,$x_,$y]_%29\" rel=\"nofollow noreferrer\"><code>click</code></a> methods.  They aren't very detailed or rich in examples but do provide enough to play with and figure it out. </p>\n\n<p>If you need to interrogate links use <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm#$mech-%3Efind_all_links_dom_%options\" rel=\"nofollow noreferrer\"><code>find_all_links_dom()</code></a>, which returns an array or a reference to array (depending on context) of Firefox's DOM as <a href=\"http://search.cpan.org/~corion/MozRepl-RemoteObject-0.39/lib/MozRepl/RemoteObject.pm\" rel=\"nofollow noreferrer\"><code>MozRepl::RemoteObject</code></a> instances.</p>\n\n<pre><code>my @links_dom = find_all_links_dom( text_contains =&gt; 'abc' );\n\n# Example from docs for find_link_dom()\nfor my $ln (@links_dom) {\n    print $ln-&gt;{innerHTML} . \"\\n\"\n}\n</code></pre>\n\n<p>See the page for <a href=\"http://search.cpan.org/~corion/MozRepl-RemoteObject-0.39/lib/MozRepl/RemoteObject.pm\" rel=\"nofollow noreferrer\">MozRepl::RemoteObject</a> to see what you can do with it. If you only need to find out which link to click the options for <code>find_link_dom()</code> should be sifficient.</p>\n\n<hr>\n\n<p>This has been tested only with a toy page, that uses <code>__doPostBack</code> link, with <code>&lt;span&gt;</code> in the link.</p>\n"}], "owner": {"reputation": 1169, "user_id": 1160838, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7cb3f2847bb5f43b838a6ffab73828a?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1160838/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 36323950, "answer_count": 1, "score": 0, "last_activity_date": 1459449701, "creation_date": 1459365407, "question_id": 36317763, "link": "https://stackoverflow.com/questions/36317763/going-to-a-javascript-link-with-mechanize-firefox", "title": "going to a javascript link with mechanize-firefox", "body": "<p>There is a link on a page, and I want to go to it but it just a javascript command. How with mechanize do I go to the link?</p>\n\n<pre><code>&lt;a href=\"javascript:__doPostBack(&amp;#21;ctl54$cphMainContent$resultsGrid$ctl54$ctl25$ctl62$ctl13&amp;#24;,&amp;#56;&amp;#56;)\"&gt;&lt;span&gt;abc&lt;/span&gt;&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["sql-server", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459363867, "post_id": 36317151, "comment_id": 60257930, "body": "Please don&#39;t post the <a href=\"http://stackoverflow.com/questions/36308862/cant-execute-command-update-in-perl-file\">same question</a> multiple times."}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459364333, "post_id": 36317151, "comment_id": 60258221, "body": "@ThisSuitIsBlackNot Sorry for that"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459364311, "post_id": 36317296, "comment_id": 60258208, "body": "OMG! That&#39;s it. I spent 5 hours trying solve it. Many many thanks."}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459364365, "post_id": 36317296, "comment_id": 60258243, "body": "No worries, I miss the simple stuff all the time too, sometimes helps to get another set of eyes on something."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1459366748, "post_id": 36317296, "comment_id": 60259793, "body": "Rather than marking code in bold, you should use <a href=\"http://stackoverflow.com/editing-help\">Markdown code formatting</a>"}], "tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": true, "score": 0, "last_activity_date": 1459367639, "last_edit_date": 1459367639, "creation_date": 1459363810, "answer_id": 36317296, "question_id": 36317151, "link": "https://stackoverflow.com/questions/36317151/update-mssql-set-date-in-perl-file/36317296#36317296", "title": "update mssql set date in Perl file", "body": "<p>Looks like you're missing a comma between </p>\n\n<pre><code>Databasedate = ? DatabaseVersion = ?\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code>Databasedate = ? ,DatabaseVersion = ?\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 36317296, "answer_count": 1, "score": -3, "last_activity_date": 1459367639, "creation_date": 1459363333, "question_id": 36317151, "link": "https://stackoverflow.com/questions/36317151/update-mssql-set-date-in-perl-file", "title": "update mssql set date in Perl file", "body": "<p>I want to set date in mssql from Perl file.\nHere is my code:</p>\n\n<pre><code>my $date = strftime \"%Y%m%d\", localtime();         \nmy $sql = $dbh-&gt;prepare(\"update BlastDatabaseDim set Databasedate = ? DatabaseVersion = ? where DatabaseName = ?\");\n$sql-&gt;execute($date,$DatabaseVersion,$db_name); \n</code></pre>\n\n<p>What is the problem with this code?</p>\n\n<p>I got this error:</p>\n\n<pre><code>Can't Execute Command 'update BlastDatabaseDim set Databasedate = ? DatabaseVersion = ? where DatabaseName = ?'\nDescription : Incorrect syntax near 'DatabaseVersion'.\n</code></pre>\n"}, {"tags": ["perl", "file", "io"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459357216, "post_id": 36315192, "comment_id": 60253726, "body": "<a href=\"http://stackoverflow.com/q/36315124/176646\">ikegami beat you to it.</a>"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459357411, "post_id": 36315192, "comment_id": 60253847, "body": "Once I get a good answer from him I&#39;ll post a response here :-D"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1459357536, "post_id": 36315192, "comment_id": 60253931, "body": "You should post your answer on his question and delete this one since these are duplicate questions."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1459358080, "post_id": 36315192, "comment_id": 60254305, "body": "I was just about to post: <i>It appears to me that Stream::Reader supports streams with <code>:encoding</code> layers. As such, it can&#39;t use <code>sysread</code>.</i>"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1459358516, "post_id": 36315192, "comment_id": 60254543, "body": "OK so maybe  the reason it returned the same results was because the data in that case was somewhat unusually boring or  because  I was using <code>Mode =&gt; &quot;UB&quot; </code> in the constructor ..."}], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1459358021, "answer_count": 0, "score": 0, "last_activity_date": 1459357257, "creation_date": 1459357168, "last_edit_date": 1495540787, "question_id": 36315192, "link": "https://stackoverflow.com/questions/36315192/when-to-use-read-or-sysread", "closed_reason": "Duplicate", "title": "When to use read() or sysread()", "body": "<p>When is <code>sysread</code> better than <code>read</code> for fetching data in perl? The <a href=\"http://perldoc.perl.org/perlfunc.html\" rel=\"nofollow noreferrer\"><code>perlfunc</code></a> sections on <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\"><code>sysread</code></a> and <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow noreferrer\"><code>read</code></a> give advice that is not entirely clear on when to choose which. </p>\n\n<p>In a response to <a href=\"https://stackoverflow.com/a/36208336/2019415\">another question</a> I used <a href=\"https://metacpan.org/pod/Stream::Reader\" rel=\"nofollow noreferrer\"><code>Stream::Reader</code></a>. As an experiment I replaced <code>read</code> with <code>sysread</code> in <code>Reader.pm</code> and gained 9-10% throughput.  This seems too simple and - other than what I can glean from <code>perlfunc</code> - I am not clear on what the trade offs might be.</p>\n"}, {"tags": ["perl", "io", "system-calls"], "comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1459357308, "post_id": 36315124, "comment_id": 60253778, "body": "grrr :-) that&#39;s a good question"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 4, "creation_date": 1459357349, "post_id": 36315124, "comment_id": 60253802, "body": "Credit to @G. Cito for prompting this question."}], "answers": [{"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1459357819, "post_id": 36315125, "comment_id": 60254122, "body": "Great summary. - should be in perlfunc. This: &quot;<code>read</code> should be faster for small reads, while <code>sysread</code> should be faster for large reads.&quot; is exactly what is needed. Of course, given the infinite possibilities of the real word, it may not <b>always</b> be true but a mostly truthy perlish guideline is what I want."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1459358390, "post_id": 36315125, "comment_id": 60254485, "body": "In a response to <a href=\"http://stackoverflow.com/a/36208336/2019415\">another question</a> I used <a href=\"https://metacpan.org/pod/Stream::Reader\" rel=\"nofollow noreferrer\"><code>Stream::Reader</code></a>. As an experiment I replaced <code>read</code> with <code>sysread</code> in <code>Reader.pm</code> and gained 9-10% throughput - it seemed too easy.  Besides the obvious bits (buffering, encoding,) is it just a question of benchmarking and testing?  Can you speak to any data integrity, failover/robustness elements of this?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1459368636, "post_id": 36315125, "comment_id": 60260852, "body": "@G.Cito in reusable code such as Stream::Reader, you have to assume filehandles may have layers, so sysread is not an option."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1459370089, "post_id": 36315125, "comment_id": 60261664, "body": "@G. Cito, Talk of &quot;UTF-8 mode&quot; implies it&#39;s not just a possibility that they have layers, but that it&#39;s a supported mode of operation. That prevents <code>sysread</code> from being a valid option."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1459371109, "post_id": 36315125, "comment_id": 60262256, "body": "Also, you can <code>read</code> from things that aren&#39;t actually files (perhaps you opened a filehandle to a scalarref or <code>TIEHANDLE</code>d something), but you can only <code>sysread</code> something with a positive <code>fileno()</code>."}, {"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1459495552, "post_id": 36315125, "comment_id": 60321376, "body": "@ikegami: How about <code>write</code> and <code>syswrite</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1459785154, "post_id": 36315125, "comment_id": 60430577, "body": "@cuonglm, They&#39;re not even similar. I think you mean <code>print</code> and <code>syswrite</code>. Of the two, I&#39;ve only ever used <code>print</code> because it&#39;s easier to use. I don&#39;t know if there are any other differences."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 24, "last_activity_date": 1550931953, "last_edit_date": 1550931953, "creation_date": 1459356951, "answer_id": 36315125, "question_id": 36315124, "link": "https://stackoverflow.com/questions/36315124/what-is-the-difference-between-read-and-sysread/36315125#36315125", "title": "What is the difference between `read` and `sysread`?", "body": "<p>About <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow noreferrer\"><code>read</code></a>:</p>\n\n<ul>\n<li><code>read</code> supports PerlIO layers.</li>\n<li><code>read</code> works with any Perl file handle<sup>[1]</sup>.</li>\n<li><code>read</code> buffers.</li>\n<li><code>read</code> obtains data from the system in fixed sized blocks of 8 KiB<sup>[2]</sup>.</li>\n<li><code>read</code> may block if less data than requested is available<sup>[3]</sup>.</li>\n</ul>\n\n<p>About <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\"><code>sysread</code></a>:</p>\n\n<ul>\n<li><code>sysread</code> doesn't support PerlIO layers (meaning it requires a raw a.k.a. binary handle).</li>\n<li><code>sysread</code> only works with Perl file handles that map to a system file handle/descriptor<sup>[4]</sup>.</li>\n<li><code>sysread</code> doesn't buffer.</li>\n<li><code>sysread</code> performs a single system call.</li>\n<li><code>sysread</code> returns immediately if data is available to be returned, even if the amount of data is less than the amount requested.</li>\n</ul>\n\n<p>Summary and conclusions:</p>\n\n<ul>\n<li><code>read</code> works with any Perl file handle, while <code>sysread</code> is limited to Perl file handles mapped to a system file handle/descriptor.</li>\n<li><code>read</code> isn't compatible with <a href=\"http://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\"><code>select</code></a><sup>[5]</sup>, while <code>sysread</code> is compatible with <code>select</code>.</li>\n<li><code>read</code> can perform decoding for you, while <code>sysread</code> requires that you do your own decoding.</li>\n<li><code>read</code> should be faster for very small reads, while <code>sysread</code> should be faster for very large reads.</li>\n</ul>\n\n<hr>\n\n<p>Notes:</p>\n\n<ol>\n<li><p>These include, for example, tied file handles and those created using <code>open(my $fh, '&lt;', \\$var)</code>.</p></li>\n<li><p>Before 5.14, Perl read in 4 KiB blocks. Since 5.14, the size of the blocks is configurable when you build <code>perl</code>, with a default of 8 KiB.</p></li>\n<li><p>In my experience, <code>read</code> will return exactly the amount requested (if possible) when reading from a plain file, but may return less when reading from a pipe. These results are by no means guaranteed.</p></li>\n<li><p><a href=\"http://perldoc.perl.org/functions/fileno.html\" rel=\"nofollow noreferrer\"><code>fileno</code></a> returns a non-negative number for these. These include, for example, handles that read from plain files, from pipes and from sockets, but not those mentioned in [1].</p></li>\n<li><p>I'm referring to the 4-argument one called by <a href=\"http://search.cpan.org/perldoc?IO::Select\" rel=\"nofollow noreferrer\">IO::Select</a>.</p></li>\n</ol>\n"}], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2571, "favorite_count": 7, "accepted_answer_id": 36315125, "answer_count": 1, "score": 20, "last_activity_date": 1550931953, "creation_date": 1459356951, "question_id": 36315124, "link": "https://stackoverflow.com/questions/36315124/what-is-the-difference-between-read-and-sysread", "title": "What is the difference between `read` and `sysread`?", "body": "<p><a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"noreferrer\"><code>read</code></a> and <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"noreferrer\"><code>sysread</code></a> have very similar documentation. What are the differences between the two?</p>\n"}, {"tags": ["linux", "perl", "packages"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1459354090, "post_id": 36313202, "comment_id": 60251666, "body": "On RHEL 7 you have to install the <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Developer_Guide/lib.details.html#libraries.perl\" rel=\"nofollow noreferrer\">perl and perl-core packages</a> (the perl package should be installed by default). CPAN isn&#39;t even included in the perl package! And yet Red Hat pretends that this is no big deal (it&#39;s a <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1110564\" rel=\"nofollow noreferrer\">&quot;documented feature&quot;</a>). \u0ca0_\u0ca0"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459384458, "post_id": 36313202, "comment_id": 60267512, "body": "Thanks for the link. Since RHEL is mainly for servers, it could be that the missing core models might have something to do with possible security issues. However, I can&#39;t see how that would be an issue with <code>Data::Dumper</code>. I was looking for some package to install, but there were over 100 Perl RPM packages. <code>perl-core</code> was lost in the middle. Change between RHEL 6 and 7 threw us."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459386511, "post_id": 36313202, "comment_id": 60267999, "body": "The logic behind the split is explained here: <a href=\"https://lwn.net/Articles/348090/\" rel=\"nofollow noreferrer\">lwn.net/Articles/348090</a>"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459421336, "post_id": 36313202, "comment_id": 60284455, "body": "So it was someone deciding what constituted the minimal Perl experience. I guess I can see why <code>Data::Dumper</code> didn&#39;t make the cut. I think it would have been better calling them <code>perl-minimum</code> and <code>perl-complete</code> and completely eliminate <code>perl</code>. RHEL is mainly a server install and you rather install more than have services that break."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1459376380, "creation_date": 1459376380, "answer_id": 36320755, "question_id": 36313202, "link": "https://stackoverflow.com/questions/36313202/making-sure-all-core-perl-modules-are-installed-on-oracle-linux/36320755#36320755", "title": "Making sure all CORE Perl Modules are Installed on Oracle Linux", "body": "<p>On RHEL 7, you have to install <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Developer_Guide/lib.details.html#libraries.perl\" rel=\"nofollow\">these packages</a>:</p>\n\n<ul>\n<li><p><code>perl</code>: includes the Perl interpreter, perldoc, and a subset of the core modules</p></li>\n<li><p><code>perl-core</code>: the rest of the core modules</p></li>\n</ul>\n\n<p>I'm guessing Oracle Linux 7 is the same because there's a perl-core-5.16.3-286.el7.x86_64.rpm in the <a href=\"http://public-yum.oracle.com/repo/OracleLinux/OL7/latest/x86_64/index.html\" rel=\"nofollow\">public yum repo</a>.</p>\n\n<hr>\n\n<p>If you want to be doubly sure, you can check what <code>perl-core</code> provides by installing <code>yum-utils</code> and running:</p>\n\n<pre><code>repoquery --requires perl-core\n</code></pre>\n\n<p>(<code>perl-core</code> is just a meta package that lists a bunch of other <code>perl-*</code> packages as dependencies)</p>\n"}], "owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2897, "favorite_count": 0, "accepted_answer_id": 36320755, "answer_count": 1, "score": 5, "last_activity_date": 1459376380, "creation_date": 1459351476, "question_id": 36313202, "link": "https://stackoverflow.com/questions/36313202/making-sure-all-core-perl-modules-are-installed-on-oracle-linux", "title": "Making sure all CORE Perl Modules are Installed on Oracle Linux", "body": "<p>I am pretty careful to use CORE Perl modules  -- the modules that  are documented in <a href=\"http://perldoc.perl.org\" rel=\"noreferrer\">http://perldoc.perl.org</a> -- whenever I can. For example, I use <code>Time::Piece</code> rather than <code>DateTime</code> or <code>IO::Uncompress</code> rather than <code>Archive::Zip</code>.</p>\n\n<p>We have thousands of Chef managed servers, and we can guarantee a particular version of Perl is installed, but it becomes a nightmare to guarantee that particular CPAN modules are also installed.</p>\n\n<p>Imagine my surprise when a script failed on a new server because <code>Data::Dumper</code> wasn't installed. That module had been part of the CORE modules since the very earliest versions of Perl 5.</p>\n\n<p>I found out that Oracle Linux Release 7 (which is modeled after RHEL 7) divided up the standard Perl packages, so the base Perl no longer installs all of the CORE modules.</p>\n\n<p>What RPM packages do I need to install on Oracle Linux Release 7 (and probably RHEL 7) to guarantee all CORE Perl modules are installed?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459375700, "post_id": 36313427, "comment_id": 60264551, "body": "Some narrative would make this a better solution"}, {"owner": {"reputation": 3093, "user_id": 1316396, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/d8Md1.jpg?s=128&g=1", "display_name": "Eric Hepperle - CodeSlayer2010", "link": "https://stackoverflow.com/users/1316396/eric-hepperle-codeslayer2010"}, "edited": false, "score": 0, "creation_date": 1487014344, "post_id": 36313427, "comment_id": 71585351, "body": "This doesn&#39;t work in GitBash on Windows 10. I get error <code>Use of uninitialized value in print at line 7&#47;8</code>. Any ideas how to make it work?"}], "tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": true, "score": 4, "last_activity_date": 1459352008, "creation_date": 1459352008, "answer_id": 36313427, "question_id": 36312891, "link": "https://stackoverflow.com/questions/36312891/getting-the-path-of-appdata-in-perl-script/36313427#36313427", "title": "Getting the path of %AppData% in perl script", "body": "<p>Use the following</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy $localConfPath = $ENV{localappdata};\nmy $appdata = $ENV{appdata}; \n\nprint $localConfPath;  #will print the app path - C:\\users\\xxx\\AppData\\local\nprint $appdata; #prints - C:\\users\\xxx\\AppData\\Roaming\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 1, "accepted_answer_id": 36313427, "answer_count": 1, "score": 2, "last_activity_date": 1459352008, "creation_date": 1459350661, "question_id": 36312891, "link": "https://stackoverflow.com/questions/36312891/getting-the-path-of-appdata-in-perl-script", "title": "Getting the path of %AppData% in perl script", "body": "<p>Could anyone can help on this one: </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Cwd;\nuse File::Copy;\nuse Win32;\nuse Config;\nuse Backticks;\n\n\n#print \"$^O\\n\";\n#print \"$Config{osname}\\n\";\n#print \"$Config{archname}\\n\";\n\n#Win7Professional (32-bit) Service Pack 1\n#Win8Professional (64-bit)\n#print \"\\nOS: \", $osversion;\n\nmy $osversion = Win32::GetOSName();\n#my $localConfPath = `\\%localappdata\\%`;\nmy $localConfPath = system(\"\\%localappdata\\%\");\nmy $localConfPath = system(`\\%localappdata\\%`);\n\n#print \"$env:APPDATA\\n\";\nexec(`\\%localappdata\\%`); if($@) {  print \"$@\\n\";  }\n\n#print \"PO: $localConfPath\\n\";\n</code></pre>\n\n<p>I need to get the \"localappdata\" path using perl script. And also Windows OS based output it would be better.</p>\n\n<p>\"C:\\Users\\laser\\AppData\\Local\"\n\"C:\\Users\\laser\\AppData\\Roaming\"</p>\n"}, {"tags": ["perl", "unit-testing", "object", "hash", "hash-of-hashes"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459364685, "post_id": 36316790, "comment_id": 60258456, "body": ".This method works. But would you mind explaining what happens in the message subroutine. Does is just return the message key from whatever is passed into it as an argument? Thanks."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 1, "creation_date": 1459365271, "post_id": 36316790, "comment_id": 60258806, "body": "Subroutine arguments are stored in the <code>@_</code> array and <code>$_[0]</code> is the first element of <code>@_</code>. When you call a method, the class name or object is automatically passed as the first argument. For example, when you call <code>$foo-&gt;bar(&#39;baz&#39;);</code>, <code>@_</code> contains <code>$foo</code> and <code>&#39;baz&#39;</code>. So <code>$_[0]-&gt;{message}</code> returns the value corresponding to the <code>message</code> key in the object. It would be clearer to write <code>my $self = shift; return $self-&gt;{message};</code>"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459536398, "post_id": 36316790, "comment_id": 60346735, "body": "I am trying to test the other values of the hash as well like code,tt and wiki_page, but the test returns hash references and not the actual values for each of the keys. How should I edit the methods for each of them in order to recognize the value?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459539349, "post_id": 36316790, "comment_id": 60348298, "body": "I don&#39;t quite understand what you&#39;re asking. Did you actually write methods for each of those attributes?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459778329, "post_id": 36316790, "comment_id": 60425716, "body": "yes I did sorry , but I will include some of them in my question. I didn&#39;t realize they wern&#39;t included."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459779647, "post_id": 36316790, "comment_id": 60426626, "body": "Your edit should really be a new question, but <code>return $self-&gt;{tt} || {$_[0]-&gt;{tt} };</code> doesn&#39;t make sense. That returns the value of the <code>tt</code> attribute, unless the value is zero, the empty string, or something else that evaluates to false; in that case, it returns a hashref containing a single key (which will be either zero, the empty string, etc.), and a value of <code>undef</code>."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459780275, "post_id": 36316790, "comment_id": 60427068, "body": "okay. Yeah I removed the or condition <code>$self-&gt;tt</code> and just <code>return { $_[0]-&gt;{tt} }</code> .. with tt it returns a hash ref.. When I apply the same return for the message method.. I get <code>undef</code> . I shall create a new question I suppose. Quite confused at the moment."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459780493, "post_id": 36316790, "comment_id": 60427238, "body": "Returning a hashref doesn&#39;t make sense either. The point of an accessor/getter method is to just get the value. So if you create an object <code>$foo</code> with a string attribute <code>myString</code>, <code>$foo-&gt;myString()</code> should return a string, not a hashref. Have you read <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a>? If you&#39;re still confused after reading that, start a chat room and I&#39;d be happy to explain a little more."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459782075, "post_id": 36316790, "comment_id": 60428445, "body": "And I just realized that <code>tt</code> actually <i>is</i> a hashref in your code, so ignore my previous comment. Sorry if I confused you even more. All the other attributes you have are simple strings or numbers, so those methods should not be returning hashrefs."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1459794229, "post_id": 36316790, "comment_id": 60436039, "body": "Yeah I realized I had the mdeclared as hash refs. I have it working now. Thanks"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1459363547, "last_edit_date": 1459363547, "creation_date": 1459362350, "answer_id": 36316790, "question_id": 36312581, "link": "https://stackoverflow.com/questions/36312581/unit-testing-an-object-in-perl-checking-that-it-contains-specific-hash-values/36316790#36316790", "title": "Unit testing an object in Perl. Checking that it contains specific hash values", "body": "<p>You're on the right track with your first test: <code>new</code> should return a valid object. But you should use <a href=\"https://metacpan.org/pod/Test::More#isa_ok\" rel=\"nofollow\"><code>isa_ok</code></a> instead of checking the return of <code>ref</code> because <code>isa_ok</code> will also work with inheritance.</p>\n\n<p>Change:</p>\n\n<pre><code>my $error_in = ASC::Builder::Error-&gt;new($error);\nis(ref $error_in eq ASC::Builder::Error, 'It is an Error object');\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>my $abe = ASC::Builder::Error-&gt;new($error); # less confusing variable name\nisa_ok( $abe, 'ASC::Builder::Error' );\n</code></pre>\n\n<p>There's also <a href=\"https://metacpan.org/pod/Test::More#new_ok\" rel=\"nofollow\"><code>new_ok</code></a>, which is a shortcut:</p>\n\n<pre><code>my $abe = new_ok( ASC::Builder::Error =&gt; [ $error ] );\n</code></pre>\n\n<hr>\n\n<p>Your second test is a little off. <code>$error_in</code> is an object, but <code>$exp_out_A</code> is a string; it doesn't make sense to compare them.</p>\n\n<p>You should write a method to get the error message string from your object:</p>\n\n<pre><code># In package ASC::Builder::Error\nsub message {\n    return $_[0]-&gt;{message};\n}\n</code></pre>\n\n<p>Now you should test that your object can call the <code>message()</code> method. You can do this with <a href=\"https://metacpan.org/pod/Test::More#can_ok\" rel=\"nofollow\"><code>can_ok</code></a>:</p>\n\n<pre><code>can_ok( $abe, 'message' );\n</code></pre>\n\n<p>Finally, you should test that the <code>message()</code> method returns the same message that you initialized your object with:</p>\n\n<pre><code>is( $abe-&gt;message(), $error-&gt;{message}, 'message() returns correct message' );\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 36316790, "answer_count": 1, "score": 0, "last_activity_date": 1459778941, "creation_date": 1459349832, "last_edit_date": 1459778941, "question_id": 36312581, "link": "https://stackoverflow.com/questions/36312581/unit-testing-an-object-in-perl-checking-that-it-contains-specific-hash-values", "title": "Unit testing an object in Perl. Checking that it contains specific hash values", "body": "<p>I have created an error object from an error hash and I'm trying to create unit tests that check the objects contain all the correct keys.</p>\n\n<p>ErrorLibrary.pm</p>\n\n<pre><code>use constant {\n\n    CABLING_ERROR =&gt; {\n    errorCode =&gt; 561,\n    message =&gt; \"cabling is not correct at T1\",\n    tt =&gt; { template =&gt; 'disabled'},\n    fatal =&gt; 1,\n    link =&gt;'http://www.e-solution.com/CABLING_ERROR',\n    },\n};\n</code></pre>\n\n<p>Error.pm - new subroutine. (Takes error hash as arg &amp; creates a new error object)</p>\n\n<pre><code>package ASC::Builder:Error;\nsub new {\n\n    my ($package, $first_param) = (shift, shift);\n\n\n    if (ref $first_param eq 'HASH') {\n        my %params = @_;\n        return bless { message =&gt; $first_param-&gt;{message}, %params}, $package;\n    }\n    else {\n        my %params = @_; \n        return bless {message =&gt; $first_param, %params}, $package;\n\n}   \n}\n</code></pre>\n\n<p>I'm not sure what I should be testing as my expected output. The specific message key in the hash or an Error object itself. I've been trying to test if a certain key of the hash is contained in the error object, but I don't think I'm going about it the right way. Anyway here is what I've been messing around with:</p>\n\n<p>error_test.t</p>\n\n<pre><code>my $error = CABLING_ERROR;\n#is(ref $error, 'HASH', 'error is a hashref');\n\n\nmy $error_in = ASC::Builder::Error-&gt;new($error);\n\nmy $exp_out_A = ($error-&gt;{message}); # is this the right expected output????\n\nis(ref $error_in eq ASC::Builder::Error, 'It is an Error object'); #seen something like this online\n\n#is(defined $error-&gt;{errorCode}, 1, \"Error object contains key errorCode\"); #these only test that the error hash contains these keys\n#is(defined $error-&gt;{message}, 1, \"Error object contains key message\");\n\n\nis($error_in, $exp_out_A, 'Correct message output');\n</code></pre>\n\n<p>The test file is a bit messy, just because I've been trying various attempts. I hope all the code is free of syntax errors :). Any help would be much appreciated!</p>\n\n<p>These are the other methods contained in the Error.pm file that I want to be able to access , the way I am accessing the error message from the hash. I am not sure if I they are correct, but I think they are pretty close.</p>\n\n<pre><code>    sub tt {\n        my $self = shift;\n        return $self-&gt;{tt} || {$_[0]-&gt;{tt} };\n    }\n\nsub code {\n    my $self = shift;\n    return $self-&gt;{code} || {$_[0]-&gt;{code} };\n}\n\nsub wiki_page {\n    my $self = shift;\n    return $self-&gt;{wiki_page} || {$_[0]-&gt;{wiki_page} };\n}\n</code></pre>\n\n<p>The or condition in the return is suppose is so the error can be handled id its just a string or error hash.. I'm also not sure if this is correct.</p>\n\n<p>When I run my unit test on for example the tt method I get the hash value returned instead of the value of tt which is 'disabled'.</p>\n\n<p>Here is the unit test I ran on it:</p>\n\n<pre><code>my $error = CABLING_ERROR;\n\nmy $error_in = ASC::Builder::Error-&gt;new($error);\n\nisa_ok($error_in, 'ASC::Builder::Error');\n\ncan_ok( $error_in, 'tt');\nis($error_in-&gt;tt(), ( $error || $error-&gt;{tt} ), 'Returns correct template');\n</code></pre>\n"}, {"tags": ["php", "perl", "hash"], "comments": [{"owner": {"reputation": 2847, "user_id": 5049185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f0d2dc8ee06f428e43d0d115a57c4f?s=128&d=identicon&r=PG&f=1", "display_name": "syck", "link": "https://stackoverflow.com/users/5049185/syck"}, "edited": false, "score": 0, "creation_date": 1459350297, "post_id": 36312579, "comment_id": 60248711, "body": "What is that <code>$ref</code> array in the PHP code? If you set the value of <code>$hash[&#39;A&#39;][&#39;TOP&#39;][1]</code>, you get it back in the same way. References are automatically dereferenced in PHP, so for example iterating over an array or an array of references will be just the same."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3872809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5cb015e1f498bafb09ba336fe2033?s=128&d=identicon&r=PG&f=1", "display_name": "user3872809", "link": "https://stackoverflow.com/users/3872809/user3872809"}, "edited": false, "score": 0, "creation_date": 1459410065, "post_id": 36313313, "comment_id": 60276600, "body": "Thanks for the input that got it working. Sorry for the typos in the original post."}], "tags": [], "owner": {"reputation": 91690, "user_id": 4833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0d3bf653c44af90ef09711d538bee6a?s=128&d=identicon&r=PG", "display_name": "VolkerK", "link": "https://stackoverflow.com/users/4833/volkerk"}, "is_accepted": true, "score": 1, "last_activity_date": 1459352215, "last_edit_date": 1459352215, "creation_date": 1459351766, "answer_id": 36313313, "question_id": 36312579, "link": "https://stackoverflow.com/questions/36312579/how-to-convert-perl-hash-of-hash-of-hash-to-php/36313313#36313313", "title": "How to convert perl hash of hash of hash to php", "body": "<p>That would be </p>\n\n<pre><code>while( $ref=somefetchingfunction_or_method() ) {\n    $hash[$ref['NODE']][$ref['Switch']][$ref['Interface']]=$ref['Bytes'];\n</code></pre>\n\n<p>(i.e. just replacing all <code>{</code> by <code>[</code>, <code>}</code> by <code>]</code> and fixing the missing last <code>]</code>.)</p>\n\n<p>edit: <a href=\"http://sscce.org/\" rel=\"nofollow\">sscce</a>:</p>\n\n<pre><code>&lt;?php\n$hash = [];\nforeach( gen_fetch() as $ref ) {\n    $hash[$ref['NODE']][$ref['Switch']][$ref['Interface']]=$ref['Bytes'];\n}\necho $hash['A']['TOP'][1];\n\n// generator requires php version &gt;= 5.5, see http://php.net/language.generators.overview\nfunction gen_fetch() {\n    $keys = ['NODE','Switch','Interface','Bytes'];\n    foreach( [['A','TOP',1,997],['B','MIDDLE',1,998],['A','MIDDLE',2,999]] as $r) {\n        yield array_combine($keys,$r);\n    }\n}\n</code></pre>\n\n<p>prints <code>997</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 3872809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5cb015e1f498bafb09ba336fe2033?s=128&d=identicon&r=PG&f=1", "display_name": "user3872809", "link": "https://stackoverflow.com/users/3872809/user3872809"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 36313313, "answer_count": 1, "score": 0, "last_activity_date": 1459352215, "creation_date": 1459349829, "last_edit_date": 1459350426, "question_id": 36312579, "link": "https://stackoverflow.com/questions/36312579/how-to-convert-perl-hash-of-hash-of-hash-to-php", "title": "How to convert perl hash of hash of hash to php", "body": "<p>I am currently looking a rewriting some perl cgi scripts into php, mainly in order so I can learn php. Everything is going well, except I can't get my head round how to convert a perl hash of hash of hash into a php array.\nTake this scenario (not real, but the idea is the same)\nI have 5 network nodes called A,B,C,D,E.\nEach node is actually a stack of 3 switches called TOP, MIDDLE, BOTTOM\nEach switch has 10 interfaces called 1 to 10.</p>\n\n<p>I have a script that polls round every interface and record the input bytes in a database like this:-</p>\n\n<pre><code>node   switch   interface  bytes\n A      TOP       1         999\n B     MIDDLE     1         999\n A     MIDDLE     2         999\n</code></pre>\n\n<p>etc</p>\n\n<p>I can read the database in php, but then I come unstuck. In perl I just read the data and store it in a hash of hashes by looping though the query of the database</p>\n\n<pre><code>`While $ref fetchrow_hashref() {\n    $hash{$ref{'NODE'}}{$ref{'Switch'}}{$ref{'Interface'}=$ref{'Bytes'}\n}`\n</code></pre>\n\n<p>So now I can access any value in my cgi code using the names\n<code>$hash{A}{Top}{1}</code> would return 999</p>\n\n<p>But when I try and do something similar in php with associative array of arrays, it go wrong. I've used</p>\n\n<pre><code>$hash[]=[$ref[\"NODE\"}=&gt;\n    [$ref[\"Switch\"]=&gt;\n        [$ref[\"Interface\"]=&gt;\n            $ref[\"Bytes\"]\n        ]\n    ]\n];\n</code></pre>\n\n<p>A var_dump of the hash looks correct, but I don't appear to be able to print a value out of the array using\n<code>print $hash[A][TOP][1];</code></p>\n\n<p>Please can I have pointers to my mistakes</p>\n"}, {"tags": ["mysql", "regex", "bash", "perl"], "comments": [{"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 0, "creation_date": 1459347321, "post_id": 36310844, "comment_id": 60246296, "body": "Have you considered doing it all in perl, say with <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6135029, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153968651336145/picture?type=large", "display_name": "Gary Bagley", "link": "https://stackoverflow.com/users/6135029/gary-bagley"}, "edited": false, "score": 0, "creation_date": 1459349290, "post_id": 36312212, "comment_id": 60247957, "body": "Thanks, i will try that. one question though, im kindve a perl noob, so what exactly does the $#files mean? Ive only used # for comments so far, and google searches for symbolic operators kinda suck."}, {"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "reply_to_user": {"reputation": 1, "user_id": 6135029, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153968651336145/picture?type=large", "display_name": "Gary Bagley", "link": "https://stackoverflow.com/users/6135029/gary-bagley"}, "edited": false, "score": 0, "creation_date": 1459349377, "post_id": 36312212, "comment_id": 60248014, "body": "With an array <code>$#&lt;name&gt;</code> will get the last index used in the array, so in this case <code>$files[$#files]</code> will get the value at the last index in the <code>@files</code> array"}], "tags": [], "owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "is_accepted": false, "score": 0, "last_activity_date": 1459348890, "creation_date": 1459348890, "answer_id": 36312212, "question_id": 36310844, "link": "https://stackoverflow.com/questions/36310844/getting-specific-filename-from-bash/36312212#36312212", "title": "getting specific filename from bash", "body": "<p>Though I think this would be better done all in perl, to answer your specific question about how to get <code>event_*</code> but not <code>event_extra*</code>, you could of course add that to your <code>grep</code> to filter out, or you could use a different glob, like <code>$table_[0-9]*</code> if there's always an <code>_</code> then a digit after the table name.</p>\n\n<p>In perl you could do it something like the following though:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>opendir( DIR, '/var/lib/mysql/sfsnort/' );\nmy @files = sort grep { /$table_\\d/ } readdir( DIR );\nclosedir( DIR );\n\n$files[$#files] =~ /(^[^.]+)/;\nmy $value = $1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1459350155, "last_edit_date": 1459350155, "creation_date": 1459349383, "answer_id": 36312395, "question_id": 36310844, "link": "https://stackoverflow.com/questions/36310844/getting-specific-filename-from-bash/36312395#36312395", "title": "getting specific filename from bash", "body": "<p>Don't parse <code>ls</code> - there's no point, and it's prone to causing problems.</p>\n\n<p>I would point out this - the <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\"><code>glob</code></a> function within perl allows you to do to a limited number of \"regex-like\" patterns. (Note - they <em>aren't</em> regex, so don't get them mixed up).</p>\n\n<pre><code>foreach my $filename ( glob \"event_[0-9]*\" ) { \n     #do something with $filename\n}\n</code></pre>\n\n<p>If you're just after the last - when sorted numerically:</p>\n\n<pre><code>my ( $last ) = reverse sort glob \"event_[0-9]*\";\n</code></pre>\n\n<p>Given you have a single path, then you should be able to:</p>\n\n<pre><code>my ( $last ) = reverse sort glob \"/var/lib/mysql/sfsnort/event_[0-9]*.MYI\"; \n</code></pre>\n\n<p>Note - that this works, assuming you're working with <code>time()</code> numeric values - it's doing an alphanumeric sort (and on directory names too). </p>\n\n<p>If that isn't a valid assumption, you'll need a custom sort - which is quite easy, you can feed sort a subroutine to sort by.</p>\n\n<p>Either:</p>\n\n<pre><code>sort { my ($a1) = $a =~ /(\\d+)/; my ($b1) = $b =~ /(\\d+)/; $b1 &lt;=&gt; $a1 }\n</code></pre>\n\n<p>To extract the first 'string of digits' from the path. (note - also includes directories). </p>\n\n<p>Or use the <code>-M</code> <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\">file test</a>:</p>\n\n<pre><code>sort { -M $a &lt;=&gt; -M $b } \n</code></pre>\n\n<p>Which will read modification time from the file (technically <code>-M</code> is age in days). </p>\n\n<p>You can remove the <code>reverse</code> if you custom sort, just by swapping <code>$a</code> and <code>$b</code>. </p>\n"}], "owner": {"reputation": 1, "user_id": 6135029, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153968651336145/picture?type=large", "display_name": "Gary Bagley", "link": "https://stackoverflow.com/users/6135029/gary-bagley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459350155, "creation_date": 1459345795, "last_edit_date": 1459347443, "question_id": 36310844, "link": "https://stackoverflow.com/questions/36310844/getting-specific-filename-from-bash", "title": "getting specific filename from bash", "body": "<p>So I have a perl module that uses a bash command to obtain the file(s) with certain \"table\" names. In my specific case, it is looking for tables with the name \"event\", but I need this to work with all names too.</p>\n\n<p>Currently, I have the following code in my perl script to obtain MYI files with the name table, and I am receiving not only <code>event_*</code> but also <code>event_extra_data_*</code> as well. For my example, I only need the 2nd table that exists in my database for event_. As my test info, I have, currently, </p>\n\n<pre><code>event_1459161160_0\nevent_1459182760_0\nevent_extra_data_1459182745_0\nevent_extra_data_1459182760_0\n</code></pre>\n\n<p>which are partitioned tables from tables \"event\" and event_extra_data which is the value that the <code>$table</code> variable sees below. </p>\n\n<p>Anyways, my question is, how do i limit this to only receiving <code>event_1459182760_0.MYI</code> and not <code>event_extra_data_1459182760_0.MYI</code> which it is currently getting?</p>\n\n<pre><code>elsif ($sql =~ /\\{LAST\\}/i )\n{\n    $cmd  = 'ls -1 /var/lib/mysql/sfsnort/'.$table.'_*MYI | grep -v template | tail -n1 | cut -d\"/\" -f6 | cut -d\".\" -f1';\n    $value = `$cmd`;\n    print \"Search Value: $value\\n\";\n    if ($value eq \"\")\n    {\n        $sql = \"\"; # same as with FIRST\n    }\n    else\n    {\n        $sql =~ s/\\{LAST\\}/$value/g;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "edited": false, "score": 0, "creation_date": 1459408224, "post_id": 36310818, "comment_id": 60275439, "body": "when I store the file url in a variable, it throws this error <code>empty XPath found at &#47;usr&#47;lib&#47;perl5&#47;XML&#47;LibXML.pm line 1317</code>. Why this error is occurred."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "edited": false, "score": 0, "creation_date": 1459417518, "post_id": 36310818, "comment_id": 60281749, "body": "@sharon: This seems unrelated. Ask a new question, show the code."}, {"owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "edited": false, "score": 0, "creation_date": 1459420360, "post_id": 36310818, "comment_id": 60283770, "body": "I fixed the bug. And to read the file I used LWP::UserAgent package and I did it. ;-) Thanks for ur help."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1459345704, "creation_date": 1459345704, "answer_id": 36310818, "question_id": 36310346, "link": "https://stackoverflow.com/questions/36310346/how-to-get-the-file-sent-in-xml-response-in-perl/36310818#36310818", "title": "how to get the file sent in xml response in perl?", "body": "<p>Use a parser to extract the information. I used <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>, but I had to remove the closing <code>br</code> tags that made the parser fail.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $html = '&lt;html&gt;\n      &lt;head&gt;\n      &lt;title&gt;Download Files&lt;/title&gt;\n      &lt;meta http-equiv=\\'Content-Type\\' content=\\'text/html; charset=utf-8\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'http://res.mytoday.com/css/main.css\\' type=\\'text/css\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'http://res.mytoday.com/css/Menu.css\\' type=\\'text/css\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'/statsdoc/freeze.css\\' type=\\'text/css\\'&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n      &lt;table border=1&gt;\n      &lt;tr class=\\'rightTableData\\'&gt;\n      &lt;th&gt;No.&lt;/th&gt;\n      &lt;th&gt;File Name&lt;/th&gt; \n      &lt;th&gt;File Size&lt;/th&gt;\n      &lt;/tr&gt;&lt;tr class=\\'rightTableData\\'&gt;\n      &lt;td&gt;1&lt;/td&gt;&lt;td&gt;\n      &lt;a href=\\'/dlr_download?file=/mnt/dell6/SRM_DATA/data/API_FILE     /20160329/LSUZisbZahtHNeImZJm_1-1.csv.zip\\'&gt;1-1.csv.zip&lt;/a&gt;\n     &lt;/td&gt;&lt;td&gt;487 bytes&lt;/td&gt;  &lt;/tr&gt;\n     &lt;/table&gt;\n     &lt;!-- &lt;/br&gt;&lt;/br&gt; I had to comment this out! --&gt;\n     &lt;center&gt;&lt;a href=\\'/dlr_download?file=/mnt/dell6/SRM_DATA/data/API_FILE/20160329/LSUZisbZahtHNeImZJm-csv.zip\\'&gt;Download all&lt;/a&gt;&lt;/center&gt;                                                         \n    &lt;/body&gt;&lt;/html&gt;';\n\nuse XML::LibXML;\nmy $dom = 'XML::LibXML'-&gt;load_html( string =&gt; $html );\nprint $dom-&gt;findvalue('/html/body/table/tr[2]/td[2]/a/@href');\n</code></pre>\n\n<p>You could also use the <code>recover</code> flag to parse invalid HTML:</p>\n\n<pre><code>my $dom = 'XML::LibXML'-&gt;load_html( string =&gt; $html, recover =&gt; 1 );\n</code></pre>\n"}], "owner": {"reputation": 718, "user_id": 3775102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c76df4c37ad5f7bd0ca7fd93777efac?s=128&d=identicon&r=PG&f=1", "display_name": "sharon", "link": "https://stackoverflow.com/users/3775102/sharon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 36310818, "answer_count": 1, "score": 0, "last_activity_date": 1459345704, "creation_date": 1459344595, "question_id": 36310346, "link": "https://stackoverflow.com/questions/36310346/how-to-get-the-file-sent-in-xml-response-in-perl", "title": "how to get the file sent in xml response in perl?", "body": "<p>Using the LWP user agent I am sending the request and getting the response. \nI will get the response in html format and a file attached in it.</p>\n\n<p>eg:      </p>\n\n<pre><code>     `&lt;html&gt;\n      &lt;head&gt;\n      &lt;title&gt;Download Files&lt;/title&gt;\n      &lt;meta http-equiv=\\'Content-Type\\' content=\\'text/html; charset=utf-8\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'http://res.mytoday.com/css/main.css\\' type=\\'text/css\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'http://res.mytoday.com/css/Menu.css\\' type=\\'text/css\\'&gt;\n      &lt;link rel=\\'stylesheet\\' href=\\'/statsdoc/freeze.css\\' type=\\'text/css\\'&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n      &lt;table border=1&gt;\n      &lt;tr class=\\'rightTableData\\'&gt;\n      &lt;th&gt;No.&lt;/th&gt;\n      &lt;th&gt;File Name&lt;/th&gt; \n      &lt;th&gt;File Size&lt;/th&gt;\n      &lt;/tr&gt;&lt;tr class=\\'rightTableData\\'&gt;\n      &lt;td&gt;1&lt;/td&gt;&lt;td&gt;\n      &lt;a href=\\'/dlr_download?file=/mnt/dell6/SRM_DATA/data/API_FILE     /20160329/LSUZisbZahtHNeImZJm_1-1.csv.zip\\'&gt;1-1.csv.zip&lt;/a&gt;\n     &lt;/td&gt;&lt;td&gt;487 bytes&lt;/td&gt;  &lt;/tr&gt;\n     &lt;/table&gt;\n     &lt;/br&gt;&lt;/br&gt;  \n     &lt;center&gt;&lt;a href=\\'/dlr_download?file=/mnt/dell6/SRM_DATA/data/API_FILE/20160329/LSUZisbZahtHNeImZJm-csv.zip\\'&gt;Download all&lt;/a&gt;&lt;/center&gt;                                                         \n    &lt;/body&gt;&lt;/html&gt;`\n</code></pre>\n\n<p>From this response I need to get the file. Can anyone help me to get the file from response.</p>\n"}, {"tags": ["regex", "perl", "perl-module"], "comments": [{"owner": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1459336785, "post_id": 36305741, "comment_id": 60238076, "body": "it is reversed.. it is to specify that the output file is not required to be in order..."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "edited": false, "score": 0, "creation_date": 1459336348, "post_id": 36306487, "comment_id": 60237758, "body": "Actual code contains special characters in the line name and content."}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "edited": false, "score": 0, "creation_date": 1459337870, "post_id": 36306487, "comment_id": 60238852, "body": "@SumathiGokul Okay, then change the <code>line\\d+</code> part to <code>.*?</code>?"}], "tags": [], "owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1459334663, "creation_date": 1459334663, "answer_id": 36306487, "question_id": 36305741, "link": "https://stackoverflow.com/questions/36305741/perl-script-to-remove-next-line-with-duplicate-words/36306487#36306487", "title": "perl script to remove next line with duplicate words", "body": "<p>Try this RegEx:</p>\n\n<pre><code>((line\\d+)\\s*:.*\\n)\\2\n</code></pre>\n\n<p><kbd><a href=\"https://regex101.com/r/kX7vB6/1\" rel=\"nofollow\"><strong>Live Demo on Regex101</strong></a></kbd></p>\n\n<hr>\n\n<p>How it works:</p>\n\n<pre><code>(          # Capture line to be removed\n  (line\\d+)  # Capture Line Name / Number (Group #2)\n  \\s*        # Optional Whitespace\n  :          # : (Colon)\n  .*         # Line Data\n  \\n         # Newline Character at end of Line\n)\n\\2           # Next line starts with this Line Name (stored in Group #2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1459337414, "last_edit_date": 1459337414, "creation_date": 1459336282, "answer_id": 36307092, "question_id": 36305741, "link": "https://stackoverflow.com/questions/36305741/perl-script-to-remove-next-line-with-duplicate-words/36307092#36307092", "title": "perl script to remove next line with duplicate words", "body": "<p>Use hash for to do it.</p>\n\n<p>While iterate the loop try to split the line by using the <code>:</code>, So split the line with pattern matching like this <code>^.+?\\K\\s:</code> </p>\n\n<p><code>^</code> for the beginning of the match</p>\n\n<p><code>+?</code> helps to avoid the greed of the <code>+</code>.</p>\n\n<p><code>\\K</code> for keep the word from splitting. </p>\n\n<p>Then store the two data in <code>$first</code> and <code>$second</code>. The create the hash key by <code>$first</code> values. It helps to remove the duplicate.  Then finally the uniq values is stored into the <code>%hash</code> then format the hash by using <code>grep</code>.</p>\n\n<pre><code>open my $fh,\"&lt;\",\"one.txt\";\nmy %hash;\nwhile (&lt;$fh&gt;)\n{   \n    ($first,$second) = split(/^.+?\\K\\s:/);\n    $hash{$first} = \" : $second\";\n\n}\n\nmy @ar = grep{ $_ =$_.$hash{$_} }keys %hash;\nprint @ar;\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 36307092, "answer_count": 2, "score": 3, "last_activity_date": 1459337414, "creation_date": 1459332655, "last_edit_date": 1459336274, "question_id": 36305741, "link": "https://stackoverflow.com/questions/36305741/perl-script-to-remove-next-line-with-duplicate-words", "title": "perl script to remove next line with duplicate words", "body": "<p>input:</p>\n\n<pre><code>DFF_2 : dff_0_2 port map(READY_c =&gt; READY_c, CT0 =&gt;CT0);\n\\DFF_0\\ : dff_0 port map(un1_CT1 =&gt; un1_CT1, CT2 =&gt;CT2);\nDFF_10 : dff_0_10 port map(MRVQN1 =&gt; MRVQN1, un1_CT2_1 =&gt;GSMC_un1_CT2_1);\nDFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;GSMC_un1_CT2_1);\nDFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;un1_CT2_1);\n</code></pre>\n\n<p>expected output1:</p>\n\n<pre><code>DFF_2 : dff_0_2 port map(READY_c =&gt; READY_c, CT0 =&gt;CT0);\n\\DFF_0\\ : dff_0 port map(un1_CT1 =&gt; un1_CT1, CT2 =&gt;CT2);\nDFF_10 : dff_0_10 port map(MRVQN1 =&gt; MRVQN1, un1_CT2_1 =&gt;GSMC_un1_CT2_1);\nDFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;un1_CT2_1);\n</code></pre>\n\n<p>expected output2: (no need to be in order, but updated line should be resumed)</p>\n\n<pre><code>DFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;un1_CT2_1);    \nDFF_10 : dff_0_10 port map(MRVQN1 =&gt; MRVQN1, un1_CT2_1 =&gt;GSMC_un1_CT2_1);\n\\DFF_0\\ : dff_0 port map(un1_CT1 =&gt; un1_CT1, CT2 =&gt;CT2);    \nDFF_2 : dff_0_2 port map(READY_c =&gt; READY_c, CT0 =&gt;CT0);\n</code></pre>\n\n<p>I can't use duplicate line removal perl script for this situation as the string word8 is updated with new string word10. I tried like reverse the content and apply line with duplicate word to be removed.but, could not achieve it by my code.</p>\n\n<pre><code>open (IN, \"&lt;input.txt\") or die;\nopen (OUT, \"&gt;output.txt\") or die;\nmy @reverse = reverse &lt;IN&gt;;\nforeach (@reverse){\nprint OUT \"@reverse\\n\"; }\nclose (IN);\nclose (OUT);  \n\noutput:\n\nDFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;un1_CT2_1);    \nDFF_1 : dff_0_1 port map(un1_CT2_1 =&gt;GSMC_un1_CT2_1);\nDFF_10 : dff_0_10 port map(MRVQN1 =&gt; MRVQN1, un1_CT2_1 =&gt;GSMC_un1_CT2_1);\n\\DFF_0\\ : dff_0 port map(un1_CT1 =&gt; un1_CT1, CT2 =&gt;CT2);    \nDFF_2 : dff_0_2 port map(READY_c =&gt; READY_c, CT0 =&gt;CT0);\n\n\n\n\nopen (IN1, \"&lt;output.txt\") or die;\nopen (OUT1, \"&gt;output1.txt\") or die;\nwhile (&lt;IN1&gt;){\nmy $save = \"$1\" if /(.+)\\s\\:/;\nnext if /$save\\s/;\nprint OUT1 $_;}\nclose (IN1);\nclose (OUT1;\n</code></pre>\n\n<p>But it is not generating the output file as expected. Kindly help me out.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "edited": false, "score": 0, "creation_date": 1459332735, "post_id": 36305709, "comment_id": 60235207, "body": "Check here :- <a href=\"https://regex101.com/r/jQ0oZ1/1\" rel=\"nofollow noreferrer\">regex101.com/r/jQ0oZ1/1</a>   You can use <code>$1</code> to retrieve the first captured group"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6133806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e488406d592de5a173b481179b2136cc?s=128&d=identicon&r=PG&f=1", "display_name": "max", "link": "https://stackoverflow.com/users/6133806/max"}, "edited": false, "score": 0, "creation_date": 1459346325, "post_id": 36306793, "comment_id": 60245401, "body": "thanks for your answer. I tried your regex and I got the correct substring without .dat. i can just concatenate .dat on a latter part of my code."}, {"owner": {"reputation": 631, "user_id": 2532388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f36529bfd03515462331695824deaa0?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Castro", "link": "https://stackoverflow.com/users/2532388/jos%c3%a9-castro"}, "reply_to_user": {"reputation": 3, "user_id": 6133806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e488406d592de5a173b481179b2136cc?s=128&d=identicon&r=PG&f=1", "display_name": "max", "link": "https://stackoverflow.com/users/6133806/max"}, "edited": false, "score": 0, "creation_date": 1459350961, "post_id": 36306793, "comment_id": 60249214, "body": "I thought you didn&#39;t need the <code>.dat</code>. If you want it you can move the <code>)</code> to after <code>.dat</code>, as in <code>&#47;(\\S+\\.dat)&#47;</code>. It&#39;s the parenthesis that are capturing the match into the special variable."}], "tags": [], "owner": {"reputation": 631, "user_id": 2532388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f36529bfd03515462331695824deaa0?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Castro", "link": "https://stackoverflow.com/users/2532388/jos%c3%a9-castro"}, "is_accepted": false, "score": 1, "last_activity_date": 1459335473, "creation_date": 1459335473, "answer_id": 36306793, "question_id": 36305709, "link": "https://stackoverflow.com/questions/36305709/how-to-extract-a-substring-in-perl/36306793#36306793", "title": "How to extract a substring in perl", "body": "<p>I think you'll be better with something like:</p>\n\n<pre><code>while (&lt;$jobprofile&gt;) {\n  if ( /(\\S+)\\.dat/ ) {\n    print \"$1\\n\";\n  }\n}\n</code></pre>\n\n<p>(the <code>while</code> is there to make sure you parse every single line)</p>\n\n<p>The regular expressions looks for a sequence of non-white-space characters (<code>\\S</code>) followed by <code>.dat</code>.</p>\n\n<p>The parenthesis surrounding <code>\\S+</code> capture the match of that part into the special variable <code>$1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6133806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e488406d592de5a173b481179b2136cc?s=128&d=identicon&r=PG&f=1", "display_name": "max", "link": "https://stackoverflow.com/users/6133806/max"}, "edited": false, "score": 0, "creation_date": 1459346615, "post_id": 36309538, "comment_id": 60245662, "body": "thanks for answering. i tried your regex for $match and it worked just fine."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1459343878, "last_edit_date": 1459343878, "creation_date": 1459342534, "answer_id": 36309538, "question_id": 36305709, "link": "https://stackoverflow.com/questions/36305709/how-to-extract-a-substring-in-perl/36309538#36309538", "title": "How to extract a substring in perl", "body": "<p>Try this</p>\n\n<pre><code>open my $fh,\"&lt;\",\"file.txt\";\n\nwhile (&lt;$fh&gt;)\n{   \n    next if /^\\s+/; #skip the loop for empty line \n    ($match) = /\\s(\\w+\\.dat)/g; # group the matching word and store the input into the $match\n    print \"$match\\n\";\n}\n</code></pre>\n\n<p>or simply try the perl one liner </p>\n\n<pre><code>perl -ne'    print $1,\"\\n\" if (m/(\\w+\\.dat)/)    ' file.txt\n</code></pre>\n\n<p>Or you are working in linux try the linux command for to do it</p>\n\n<pre><code>grep -ohP '\\w+\\.dat' one.txt\n</code></pre>\n\n<p><code>o</code>  display the matched element only</p>\n\n<p><code>h</code> for display the output without filename</p>\n\n<p><code>P</code> for perl regex</p>\n"}], "owner": {"reputation": 3, "user_id": 6133806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e488406d592de5a173b481179b2136cc?s=128&d=identicon&r=PG&f=1", "display_name": "max", "link": "https://stackoverflow.com/users/6133806/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 36309538, "answer_count": 2, "score": 0, "last_activity_date": 1459343878, "creation_date": 1459332582, "last_edit_date": 1459336385, "question_id": 36305709, "link": "https://stackoverflow.com/questions/36305709/how-to-extract-a-substring-in-perl", "title": "How to extract a substring in perl", "body": "<p>I am new in perl and need your help.</p>\n\n<p>I am reading the contents of files in a directory.\nI need to extract the substring from the files containing <code>*.dat</code></p>\n\n<p>Sample strings:</p>\n\n<pre><code>1) # **   Template Name: IFDOS_ARCHIVE.dat\n\n2) # **  profile for IFNEW_UNIX_CMD.dat template  **\n\n3) # ** Template IFWIN_MV.dat **\n</code></pre>\n\n<p>Need to Extract:</p>\n\n<pre><code>1) IFDOS_ARCHIVE.dat\n\n2) IFNEW_UNIX_CMD.dat\n\n3) IFWIN_MV.dat\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>if(open(my $jobprofile, \"./profiles/$vitem[0].profile\")) {\n   my @jobprofiletemp = &lt;$jobprofile&gt;;\n   close($jobprofile);\n   @proftemplates = grep /.dat/,@jobprofiletemp;\n\n   my $strproftemp = $proftemplates[0];\n   my ($tempksh) = $strproftemp =~ / ([^_]*)./;\n   print \"tempksh: $tempksh\",\"\\n\";\n} else { warn  \"problem opening ./$_\\n\\n\"; }\n</code></pre>\n\n<p>my regex is not working.\nwhat do you suggest?</p>\n"}, {"tags": ["excel", "perl"], "comments": [{"owner": {"reputation": 17, "user_id": 6133960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59dc2150da8dfc2ef01dfe4cd4d9a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakssman", "link": "https://stackoverflow.com/users/6133960/lakssman"}, "reply_to_user": {"reputation": 1589, "user_id": 2363706, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yscEN.png?s=128&g=1", "display_name": "Ravid Goldenberg", "link": "https://stackoverflow.com/users/2363706/ravid-goldenberg"}, "edited": false, "score": 0, "creation_date": 1459423802, "post_id": 36305506, "comment_id": 60286217, "body": "Just posted it petric.."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6133960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59dc2150da8dfc2ef01dfe4cd4d9a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakssman", "link": "https://stackoverflow.com/users/6133960/lakssman"}, "edited": false, "score": 0, "creation_date": 1459424161, "post_id": 36305745, "comment_id": 60286468, "body": "I am getting this Error  Can&#39;t call method &quot;row_range&quot; on unblessed reference"}, {"owner": {"reputation": 631, "user_id": 2532388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f36529bfd03515462331695824deaa0?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Castro", "link": "https://stackoverflow.com/users/2532388/jos%c3%a9-castro"}, "reply_to_user": {"reputation": 17, "user_id": 6133960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59dc2150da8dfc2ef01dfe4cd4d9a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakssman", "link": "https://stackoverflow.com/users/6133960/lakssman"}, "edited": false, "score": 0, "creation_date": 1459435458, "post_id": 36305745, "comment_id": 60295152, "body": "That means that whatever you&#39;re trying to call <code>row_range</code> on isn&#39;t an object. If you&#39;re doing <code>$worksheet-&gt;row_range()</code>, try something like <code>print ref($worksheet)</code> to see what it is."}], "tags": [], "owner": {"reputation": 631, "user_id": 2532388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f36529bfd03515462331695824deaa0?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Castro", "link": "https://stackoverflow.com/users/2532388/jos%c3%a9-castro"}, "is_accepted": false, "score": 1, "last_activity_date": 1459332659, "creation_date": 1459332659, "answer_id": 36305745, "question_id": 36305506, "link": "https://stackoverflow.com/questions/36305506/using-a-perl-script-how-to-sum-values-in-one-column-based-on-another-column-in-e/36305745#36305745", "title": "Using a Perl script how to sum values in one column based on another column in Excel?", "body": "<p>Start by using <a href=\"http://search.cpan.org/~dougw/Spreadsheet-ParseExcel-0.65/lib/Spreadsheet/ParseExcel.pm\" rel=\"nofollow\">Spreadsheet::ParseExcel</a> and <a href=\"http://search.cpan.org/dist/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm\" rel=\"nofollow\">Spreadsheet::WriteExcel</a> (to get the results into the Excel file again).</p>\n\n<p>Going line by line, add the values to a hash; Something like this should do the trick:</p>\n\n<pre><code>    for (2 .. $worksheet-&gt;row_range()) {\n      $total{ $worksheet-&gt;get_cell($_, 1) } += $worksheet-&gt;get_cell($_, 2);\n    }\n</code></pre>\n\n<p>This means that in the end your hash <code>%total</code> should have the results you're looking for:</p>\n\n<pre><code>    {\n      100 =&gt; 980,\n      137 =&gt; 450,\n      150 =&gt; 375\n    }\n</code></pre>\n\n<p>You just have to fill in the parsing and the writing of the file.</p>\n"}], "owner": {"reputation": 17, "user_id": 6133960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59dc2150da8dfc2ef01dfe4cd4d9a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakssman", "link": "https://stackoverflow.com/users/6133960/lakssman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1459448535, "creation_date": 1459332110, "last_edit_date": 1459423754, "question_id": 36305506, "link": "https://stackoverflow.com/questions/36305506/using-a-perl-script-how-to-sum-values-in-one-column-based-on-another-column-in-e", "title": "Using a Perl script how to sum values in one column based on another column in Excel?", "body": "<p>I am new to Perl programming. Let's say we have 2 columns in a sheet <code>A</code> of an Excel workbook.</p>\n\n<pre><code>AB      Volume\n100     280\n137     250\n150     375\n100     100\n100     600\n137     200\n</code></pre>\n\n<p>Now, I want the output in another sheet. Let's say <code>B</code>. I want to sum up <code>Volume</code>s based on <code>AB</code>.</p>\n\n<p>The output should be like:</p>\n\n<pre><code>AB      Volume\n100     980\n137     450\n150     375\n</code></pre>\n\n<p>Please help me in achieving this.</p>\n\n<p><strong>This is the code I had written for this</strong></p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nuse Spreadsheet::Read;\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::Worksheet;\nuse Excel::Writer::XLSX;\n\nmy $workbook  = ReadData (\"Book1.xlsx\");\nmy $worksheet = $workbook-&gt;[1];\n\nmy $max_rows = $worksheet-&gt;{'maxrow'};\nmy $max_cols = $worksheet-&gt;{'maxcol'};\nmy $C1;\nmy $total = 0;\nmy $sum;\n\nmy $workbook_new = Excel::Writer::XLSX-&gt;new('New.xlsx');\nmy $worksheet2 = $workbook_new-&gt;add_worksheet();\n\nfor my $row_num (1..($max_rows))\n\n{\n\n  if ($row_num&gt;1) \n\n  {\n\n   my $temp1 = 'A'.$row_num;\n   $C1 = $workbook-&gt;[1]{$temp1};\n\n   for $row_num (1..($max_rows))\n\n     {\n        if ($row_num&gt;1) \n\n           {\n             my $D1 = 'A'.$row_num;\n\n             my $D2 = $workbook-&gt;[1]{$D1};\n\n\n             if ($C1 = $D2) \n\n              {\n                 my $Z2 = 'B'.$row_num; \n\n                 $sum = $workbook-&gt;[1]{$Z2};\n\n                 $total= $sum + $total;\n\n              }\n           }\n      }\n\n  print \"value of C :\".$C1 \"SUM :\".$total.\"\\n\"; \n\n  }\n\n }\n</code></pre>\n\n<p>I am not getting the output correct as well as not able to figure out how to write the output to the Excel file New.xlsx.</p>\n"}, {"tags": ["perl", "shell", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 2470, "user_id": 5832518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cKPiUtKxJvw/AAAAAAAAAAI/AAAAAAAAAmQ/egOpZRu_8Bk/photo.jpg?sz=128", "display_name": "Raju", "link": "https://stackoverflow.com/users/5832518/raju"}, "edited": false, "score": 0, "creation_date": 1459337690, "post_id": 36304271, "comment_id": 60238728, "body": "does <a href=\"http://stackoverflow.com/a/36305467/5832518\">this answer</a> resolves your issue?"}], "answers": [{"tags": [], "owner": {"reputation": 2470, "user_id": 5832518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cKPiUtKxJvw/AAAAAAAAAAI/AAAAAAAAAmQ/egOpZRu_8Bk/photo.jpg?sz=128", "display_name": "Raju", "link": "https://stackoverflow.com/users/5832518/raju"}, "is_accepted": false, "score": 0, "last_activity_date": 1459332358, "last_edit_date": 1459332358, "creation_date": 1459332030, "answer_id": 36305467, "question_id": 36304271, "link": "https://stackoverflow.com/questions/36304271/how-to-convert-a-ascii-null-nul-into-single-spacing-in-a-text-file-using-unix/36305467#36305467", "title": "How to convert a ASCII NULL (NUL) into single spacing in a text file using Unix command?", "body": "<p>it can be done quite easily with <code>perl</code></p>\n\n<pre><code>cat -v inputfile.txt\nabc^@def^@ghij^@klmnop^@qrstuv^@wxyz\n\nperl -np -e 's/\\0/ /g' &lt;inputfile.txt &gt;outputfile.txt\n\ncat -v outputfile.txt\nabc def ghij klmnop qrstuv wxyz \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4887, "user_id": 897295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kql9J.png?s=128&g=1", "display_name": "mauro", "link": "https://stackoverflow.com/users/897295/mauro"}, "is_accepted": false, "score": 1, "last_activity_date": 1459428916, "creation_date": 1459428916, "answer_id": 36334133, "question_id": 36304271, "link": "https://stackoverflow.com/questions/36304271/how-to-convert-a-ascii-null-nul-into-single-spacing-in-a-text-file-using-unix/36334133#36334133", "title": "How to convert a ASCII NULL (NUL) into single spacing in a text file using Unix command?", "body": "<p>This is an easy job for sed. Let's start creating a test file as you didn't provide one:</p>\n\n<pre><code>$ echo -e \"one,\\x00,two,\\x00,three\" &gt; a\n$ echo -e \"four,\\x00,five,\\x00,six\" &gt;&gt; a\n</code></pre>\n\n<p>As you can see it contains ASCII 0:</p>\n\n<pre><code>$ od -c a\n0000000   o   n   e   ,  \\0   ,   t   w   o   ,  \\0   ,   t   h   r   e\n0000020   e  \\n   f   o   u   r   ,  \\0   ,   f   i   v   e   ,  \\0   ,\n0000040   s   i   x  \\n\n0000044\n</code></pre>\n\n<p>Now let's run sed:</p>\n\n<pre><code>$ sed 's/\\x00/ /g' a &gt; b\n</code></pre>\n\n<p>And check the output:</p>\n\n<pre><code>$ cat b\none, ,two, ,three\nfour, ,five, ,six\n$ od -c b\n0000000   o   n   e   ,       ,   t   w   o   ,       ,   t   h   r   e\n0000020   e  \\n   f   o   u   r   ,       ,   f   i   v   e   ,       ,\n0000040   s   i   x  \\n\n0000044\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 1, "last_activity_date": 1459501340, "last_edit_date": 1592644375, "creation_date": 1459501340, "answer_id": 36352135, "question_id": 36304271, "link": "https://stackoverflow.com/questions/36304271/how-to-convert-a-ascii-null-nul-into-single-spacing-in-a-text-file-using-unix/36352135#36352135", "title": "How to convert a ASCII NULL (NUL) into single spacing in a text file using Unix command?", "body": "<p>The usual approach to this would be using <code>tr</code>.  However, solutions with <code>tr</code> and <code>sed</code> are not portable.  (The question is tagged &quot;unix&quot;, so only portable solutions are interesting).</p>\n<p>Here is a simple demo script</p>\n<pre><code>#!/bin/sh\ndate\ntr '\\000' ' ' &lt;$0.in\ndate\nsed -e 's/\\x00/ /g' &lt;$0.in\n</code></pre>\n<p>which I named <code>foo</code>, and its input (with the ASCII NUL shown here as <code>^@</code>):</p>\n<pre><code>this is a null: &quot;^@&quot;\n</code></pre>\n<p>Running with GNU <code>tr</code> and <code>sed</code>:</p>\n<pre><code>Fri Apr  1 04:41:15 EDT 2016\nthis is a null: &quot; &quot;\nFri Apr  1 04:41:15 EDT 2016\nthis is a null: &quot; &quot;\n</code></pre>\n<p>With OSX:</p>\n<pre><code>Fri Apr  1 04:41:53 EDT 2016\nthis is a null: &quot; &quot;\nFri Apr  1 04:41:53 EDT 2016\nthis is a null: &quot;^@&quot;\n</code></pre>\n<p>With Solaris 10 (and 11, though there may be a recent change):</p>\n<pre><code>Fri Apr  1 04:38:08 EDT 2016\nthis is a null: &quot;&quot;\nFri Apr  1 04:38:08 EDT 2016\nthis is a null: &quot;&quot;\n</code></pre>\n<p>Bear in mind that <code>sed</code> is line-oriented, and that ASCII NUL is considered a binary (<em>non</em>-line) character.  If you want a portable solution, then other tools such as Perl (which do not have that limitation) are useful.  For that case one could add this to the script:</p>\n<pre><code>perl -np -e 's/\\0/ /g' &lt;$0.in\n</code></pre>\n<p>The intermediate tool <code>awk</code> is no better in this instance.  Going to Solaris again, with these lines:</p>\n<pre><code>for awk in awk nawk mawk gawk\ndo\necho &quot;** $awk:&quot;\n$awk '{ gsub(&quot;\\0&quot;,&quot; &quot;); print; }' &lt;$0.in\ndone\n</code></pre>\n<p>I see this output:</p>\n<pre><code>** awk:\nawk: syntax error near line 1\nawk: illegal statement near line 1\n** nawk:\nnawk: empty regular expression\n source line number 1\n context is\n        { gsub(&quot;\\0&quot;,&quot; &gt;&gt;&gt;  &quot;) &lt;&lt;&lt;\n** mawk:\nthis is a null: &quot; &quot;\n** gawk:\nthis is a null: &quot; &quot;\n</code></pre>\n<p>Further reading:</p>\n<ul>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html\" rel=\"nofollow noreferrer\">sed - stream editor</a> (POSIX)</li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tr.html\" rel=\"nofollow noreferrer\">tr - translate characters</a> (POSIX), which notes</li>\n</ul>\n<blockquote>\n<p>Unlike some historical implementations, this definition of the tr utility correctly processes NUL characters in its input stream. NUL characters can be stripped by using:</p>\n<p><code>tr -d '\\000'</code></p>\n</blockquote>\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun - how to execute the Perl interpreter</a></li>\n</ul>\n"}], "owner": {"reputation": 43, "user_id": 5852247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/635e0a72a31337a1198ae6a882f3cc5e?s=128&d=identicon&r=PG&f=1", "display_name": "John Christopher", "link": "https://stackoverflow.com/users/5852247/john-christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 1, "accepted_answer_id": 36352135, "answer_count": 3, "score": 1, "last_activity_date": 1459502193, "creation_date": 1459328823, "last_edit_date": 1459502193, "question_id": 36304271, "link": "https://stackoverflow.com/questions/36304271/how-to-convert-a-ascii-null-nul-into-single-spacing-in-a-text-file-using-unix", "title": "How to convert a ASCII NULL (NUL) into single spacing in a text file using Unix command?", "body": "<p>When I BCP the data in sql server<a href=\"https://i.stack.imgur.com/kNgdr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kNgdr.png\" alt=\"Output file after BCP\"></a></p>\n\n<p>In the output file I am getting a NUL like character in the output file, and i want to replace this with the single blank space.</p>\n\n<p>When I used the below <code>sed</code> command it removes the NUL character but between those 2 delimiter we don't have single space.</p>\n\n<p>sed 's/\\x0/ /g' output file name</p>\n\n<p>Example: After sed command i am getting output file like below</p>\n\n<pre><code>PHMO||P00000005233\nPHMO||P00000005752\n</code></pre>\n\n<p>But i need a single spacing in between those delimiter as</p>\n\n<pre><code>PHMO| |P00000005233\nPHMO| |P00000005752\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1459371927, "last_edit_date": 1495542231, "creation_date": 1459331236, "answer_id": 36305161, "question_id": 36303916, "link": "https://stackoverflow.com/questions/36303916/perl-how-to-check-if-a-mathematical-expression-contains-alphanumeric-parts/36305161#36305161", "title": "Perl: How to check if a mathematical expression contains alphanumeric parts", "body": "<p>I don't see how to process the whole hash in one statement, given that you need to filter by value but also exclude the key. This only excludes <code>[a-zA-Z]</code>, as requested.</p>\n\n<pre><code>my %valid_expr;\nwhile ( my ($key, $val) = each %testhash ) {\n    $valid_expr{$key} = $val  if not (\n        $val =~ / [a-df-z] | e(?!([+-]\\d)) /xi or \n        $val =~ / (?:E[-+]\\d)? .* [a-df-z] /xi\n    );\n}\n</code></pre>\n\n<p>Regex: disallow a value that has any letter(s) coming either before, or after, (an optional) <code>E[+-]\\d+</code> -- E followed by either + or - and digit(s). The <code>.*</code> in between allow for numbers/period, operators.</p>\n\n<p>The <code>e(?!([+-]\\d))</code> is a <em>negative look-ahead assertion</em>: letter <code>e</code> <em>if not followed by</em> <code>[+-]\\d</code>.</p>\n\n<p>If you only need to check the value the regex itself is</p>\n\n<pre><code>$val !~ /[a-df-z]|(?!([+-]\\d))/i and $val !~ /(?:E[-+]\\d)?.*[a-df-z]/i\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong> &nbsp; Adding <code>A-Z</code> to the original post disallowed <code>E</code>, corrected. Changed to <code>/i</code> to allow for <code>e</code>.</p>\n\n<p><strong>Update</strong> &nbsp; Needed to add look-ahead to bar <code>e</code> strings but allow <code>e-02</code> exponents.</p>\n\n<p>This correctly assesses all examples, along with a few others.  </p>\n\n<p><em>However, it ended up converging to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> solution.</em></p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6133582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd32a8bd8aa4928bc414fecdf47e25fb?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6133582/alex"}, "edited": false, "score": 0, "creation_date": 1459338123, "post_id": 36306947, "comment_id": 60238999, "body": "I thought using <code>eval</code> is not safe when the expression is not analysed first (for example <code>$val</code> contains system commandos)? Besides from that i like this solution, since wrong syntax would also be detected."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459338571, "post_id": 36306947, "comment_id": 60239330, "body": "Your first solution says that all three of the OP&#39;s solution are valid (unless <code>use strict;</code> is used. It says that <code>2 * time</code> is valid even with <code>use strict;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459338632, "post_id": 36306947, "comment_id": 60239363, "body": "(Why use <code>&#47; *&#47;</code> instead of <code>&#47;\\s*&#47;</code>?)"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459343028, "post_id": 36306947, "comment_id": 60242632, "body": "Yeah, eval is probably not the best idea. Answer edited. @ikegami: about the / */ and /\\s*/ : I guess \\s makes more sence, but when I wrote it I thought maybe not allowing \\n or \\t could make sence.."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 0, "last_activity_date": 1459342871, "last_edit_date": 1459342871, "creation_date": 1459335875, "answer_id": 36306947, "question_id": 36303916, "link": "https://stackoverflow.com/questions/36303916/perl-how-to-check-if-a-mathematical-expression-contains-alphanumeric-parts/36306947#36306947", "title": "Perl: How to check if a mathematical expression contains alphanumeric parts", "body": "<p>EDIT: as pointed out in the comment, <strong>don't use the eval solution</strong>, since other things than mathematical expression could be evaluated and accepted (actually, any perl code could be executed, which is quite an issue). If you still want to use eval, you need to add <code>use strict</code>.<br>\nSo the best idea might be to use the regex. By the way, you can replace all the <code>/ */</code> by <code>/\\s*/</code> if you want to allow \\n, \\t, etc. and not just regular spaces.</p>\n\n<hr>\n\n<p>If you want to evaluate, you'll probably have to use either some kind of a parser or a eval, and both of them can tell you if something is wrong in the mathematical expression you've just read.<br>\nFor instance, you could do something like that :  </p>\n\n<pre><code>while (my ($name, $expr) = each %testhash) {\n    if (defined(my $val = eval($expr))) {\n        say \"$name =&gt; $expr =&gt; $val\"\n    } else {\n        print \"$name invalide =&gt; $@\"\n    }\n}\n</code></pre>\n\n<p>It will also allow you to detect syntax error (for instance, <code>3 + 5 2</code> wouldn't be accepted, which is probably a good news).<br>\n<br><br>\nAnother way to detect errors would be a regex to check if the expression is valid, and not if it isn't :  </p>\n\n<pre><code>while (my ($name, $expr) = each %testhash) {\n    if ($expr !~ m/^ *(\\d+(\\.\\d+)?(E([+-])\\d+)?)( *[+*\\/-] *(\\d+(\\.\\d+)?(E([+-])\\d+)?))* *$/) {\n        say \"$name: invalide expr\";\n    }\n}\n</code></pre>\n\n<p>The regexp search for a number (possibly with a decimal part or an exponent) with that part : <code>(\\d+(\\.\\d+)?(E([+-])\\d+)?)</code>. Then it looks for a list (0 or more thanks to the the <code>*</code>) of one operator (<code>[+*\\/-]</code>) followed by one digit. And spaces are allowed where they sould be.<br>\nBut if you add parenthesis to your grammar, then it becomes slightly more complicated, and you might need a reccursive regex for instance.  </p>\n"}, {"comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1459371586, "post_id": 36307731, "comment_id": 60262551, "body": "For future readers, can you give a quick overview on how this matches the desired inputs (and not the undesirable ones)?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1459390404, "last_edit_date": 1459390404, "creation_date": 1459337985, "answer_id": 36307731, "question_id": 36303916, "link": "https://stackoverflow.com/questions/36303916/perl-how-to-check-if-a-mathematical-expression-contains-alphanumeric-parts/36307731#36307731", "title": "Perl: How to check if a mathematical expression contains alphanumeric parts", "body": "<p>An expression is valid if</p>\n\n<ul>\n<li>None of its character are letters other than \"E\",</li>\n<li>Every \"E\" is preceded by a digit, and</li>\n<li>Every \"E\" is followed by a sign and a digit.</li>\n</ul>\n\n<p>Therefore<sup>[1]</sup>, an expression is invalid if</p>\n\n<ul>\n<li>One of its character is a letter other than \"E\",</li>\n<li>There's an \"E\" that isn't preceded by a digit, or</li>\n<li>There's an \"E\" that isn't followed by a sign and digit.</li>\n</ul>\n\n<p>This gives us the following:</p>\n\n<pre><code>/ [A-DF-Z] | (?&lt;![0-9])E | E(?![+-][0-9]) /ix\n</code></pre>\n\n<hr>\n\n<ol>\n<li><p>Remember,</p>\n\n<ul>\n<li>the negation of \"<em>A</em> and <em>B</em>\" is \"(not <em>A</em>) or (not <em>B</em>)\",</li>\n<li>the negation of \"all are <em>A</em>\" is \"at least one isn't <em>A</em>\", and</li>\n<li>the negation of \"none are <em>A</em>\" is \"at least one is <em>A</em>\".</li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 33, "user_id": 6133582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd32a8bd8aa4928bc414fecdf47e25fb?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6133582/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 36307731, "answer_count": 3, "score": 3, "last_activity_date": 1459390404, "creation_date": 1459327736, "last_edit_date": 1459340030, "question_id": 36303916, "link": "https://stackoverflow.com/questions/36303916/perl-how-to-check-if-a-mathematical-expression-contains-alphanumeric-parts", "title": "Perl: How to check if a mathematical expression contains alphanumeric parts", "body": "<p>I have a <strong>hash</strong> which contains some mathematical expressions and it looks like this:</p>\n\n<pre><code>    my %testhash = (\"ABC\" =&gt; \"0.05 + 1 + foo\",\n                    \"DEF\" =&gt; \"2E+5 -3\",\n                    \"GHJ\" =&gt; \"2E+5 -3 * bar);\n</code></pre>\n\n<p>In my code I want to evaluate each of the <code>%testhash</code> values, but only the valid ones <strong>(in this example only <code>\"DEF\"</code> since <code>foo</code>and <code>bar</code>are not defined)</strong>.</p>\n\n<p>Therefore I need to identify, which <code>keys %testhash</code> contain <code>[a-zA-Z]</code>with the exception of the exponential sign.</p>\n\n<p>Is there a way to check this with an elegant single regex line, without having to cut each value and analyze separately?</p>\n\n<p>Thanks in advance!\nAlex</p>\n\n<p><strong>EDIT</strong>: like so often a newbie posts a question and doesnt provide essential example data(sorry for that), so i will update the <strong>hash</strong>:</p>\n\n<pre><code>    my %testhash = (\"invalid1\" =&gt; \"0.05 + 1 + foo\",\n                    \"invalid2\" =&gt; \"2E+5 -3 * bar\",\n                    \"valid1\"   =&gt; \"1.0e-03 + ( 42)\",\n                    \"valid2\"   =&gt; \"((3.0) / 3) * 5\",\n                    \"valid3\"   =&gt; \"2E+5 + 1\");\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 477, "user_id": 2083642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfHMb.jpg?s=128&g=1", "display_name": "Manu Mathew", "link": "https://stackoverflow.com/users/2083642/manu-mathew"}, "edited": false, "score": 0, "creation_date": 1459327179, "post_id": 36303651, "comment_id": 60231189, "body": "your previous version is the correct way to do it."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1459327965, "post_id": 36303651, "comment_id": 60231704, "body": "What is the problem? Your script is working fine."}], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 2083642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfHMb.jpg?s=128&g=1", "display_name": "Manu Mathew", "link": "https://stackoverflow.com/users/2083642/manu-mathew"}, "is_accepted": false, "score": 0, "last_activity_date": 1459327615, "creation_date": 1459327615, "answer_id": 36303867, "question_id": 36303651, "link": "https://stackoverflow.com/questions/36303651/perl-transfer-scalar-to-subroutine-by-parameter-passing/36303867#36303867", "title": "Perl transfer scalar to subroutine by parameter passing", "body": "<p>You can use any of the following methods...</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse Math::Trig ':pi';\n\nmy $radius = 0;  #####\nsub get_radius {\n     print \"Enter the radius of the circle: \\n\";\n     $radius = &lt;STDIN&gt;;\n}\n\nsub area_circle {\n     get_radius();  #####\n     my $area = 0;\n     $area = pi * ($radius **2);\n     return $area;\n}\n\nmy $area = area_circle;\nprint \"The area is: $area \\n\";\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse Math::Trig ':pi';\n\nsub get_radius {\n     print \"Enter the radius of the circle: \\n\";\n     my $radius = &lt;STDIN&gt;;\n     return $radius\n}\n\nsub area_circle {\n     my $radius = get_radius();\n     my $area = 0;\n     $area = pi * ($radius **2);\n     return $area;\n}\n\nmy $area = area_circle;\nprint \"The area is: $area \\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1003, "user_id": 615982, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f0be626806a146529a4b2cd684be0db4?s=128&d=identicon&r=PG", "display_name": "Dave W", "link": "https://stackoverflow.com/users/615982/dave-w"}, "is_accepted": true, "score": 0, "last_activity_date": 1459331722, "creation_date": 1459331722, "answer_id": 36305344, "question_id": 36303651, "link": "https://stackoverflow.com/questions/36303651/perl-transfer-scalar-to-subroutine-by-parameter-passing/36305344#36305344", "title": "Perl transfer scalar to subroutine by parameter passing", "body": "<p>subs take their parameters from the @_ array, like this:</p>\n\n<pre><code>sub whatever {\n    my ($param1, $param2) = @_;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub whatever {\n    my $param1 = $_[0];\n    my $param2 = $_[1];\n}\n</code></pre>\n\n<p>In the context of your code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse Math::Trig ':pi';\n\nsub get_radius {\n    print \"Enter the radius of the circle: \\n\";\n    my $radius = &lt;STDIN&gt;;\n    return $radius; \n}\n\nsub area_circle {\n    my ($radius) = @_;\n\n    my $area = 0;\n    $area = pi * ($radius **2);\n    return $area;\n}\n\nmy $radius = get_radius;\nmy $area = area_circle( $radius );\nprint \"The area is: $area \\n\";\n</code></pre>\n\n<p>Note how the radius is now being passed in to area_circle, so that area_circle is now no longer tied to the get_radius sub and can now calculate the area of a circle no matter where the radius is fetched from.</p>\n"}], "owner": {"reputation": 5, "user_id": 6133555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1d5248e42d81ae0384a9a054879009?s=128&d=identicon&r=PG&f=1", "display_name": "557365726e616d65", "link": "https://stackoverflow.com/users/6133555/557365726e616d65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 36305344, "answer_count": 2, "score": 0, "last_activity_date": 1459331722, "creation_date": 1459326970, "question_id": 36303651, "link": "https://stackoverflow.com/questions/36303651/perl-transfer-scalar-to-subroutine-by-parameter-passing", "title": "Perl transfer scalar to subroutine by parameter passing", "body": "<p>How do I transfer a scalar to a subroutine by parameter passing? I have written the following code and want to pass the <code>$radius</code> from <code>sub get_radius</code> to <code>sub area_circle</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse Math::Trig ':pi';\n\n\nsub get_radius {\n     print \"Enter the radius of the circle: \\n\";\n     my $radius = &lt;STDIN&gt;;\n\n}\n\nsub area_circle {\n     my $radius = get_radius();\n     my $area = 0;\n     $area = pi * ($radius **2);\n     return $area;\n}\n\nmy $area = area_circle;\nprint \"The area is: $area \\n\";\n</code></pre>\n"}, {"tags": ["perl", "variables", "input", "putty", "execute"], "comments": [{"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1459322243, "post_id": 36302028, "comment_id": 60228245, "body": "take the list in a file and iterate it over your code to get the job done"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1459326522, "post_id": 36302028, "comment_id": 60230801, "body": "I don&#39;t understand how you are &quot;<i>not entirely sure where/what to search for</i>&quot; ... how about &quot;Perl user input?&quot; It&#39;s all over the place.  It is also not clear what you mean by mentioning &quot;putty&quot; -- that is a program used to connect.  With all that, if you run your script in a terminal: print out a message seeking input and then read it in: <code>print &quot;Enter the name: &quot;; $name = &lt;STDIN&gt;; chomp($name);</code>.  See, for example, <a href=\"http://stackoverflow.com/questions/9661379/how-to-prompt-for-input-and-exit-if-the-user-entered-an-empty-string\">this post</a>, or any one of the many tutorials or books."}, {"owner": {"reputation": 19, "user_id": 4229748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OLJ0z.jpg?s=128&g=1", "display_name": "DKru", "link": "https://stackoverflow.com/users/4229748/dkru"}, "edited": false, "score": 0, "creation_date": 1459328346, "post_id": 36302028, "comment_id": 60231971, "body": "zdmin, as I said, I only started with perl less than a month ago so my knowledge on this subject is incerdibly limited. I was under the impression putty is used to do the editing in - apologies if I made the wrong assumption. I found several links for using &lt;STDIN&gt;, I probably should have mentioned this and that I have tried it, but was not able to execute it outside of the editing program - running the .pm program directly from my file directory does not give me a prompt for input, only when running from inside the editor (putty). Is it then only possible to run from inside the editor?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4229748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OLJ0z.jpg?s=128&g=1", "display_name": "DKru", "link": "https://stackoverflow.com/users/4229748/dkru"}, "edited": false, "score": 0, "creation_date": 1459324782, "post_id": 36302218, "comment_id": 60229803, "body": "Thank you for your advice. Problem is the list keeps growing/changing and I would like to be able to run them one by one. Is there no way to request a prompt where you enter the name beforehand?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1459332592, "post_id": 36302218, "comment_id": 60235103, "body": "Think twice about doing that. It&#39;s theoretically possible, but actually a terrible idea."}], "tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": true, "score": 2, "last_activity_date": 1459327779, "last_edit_date": 1459327779, "creation_date": 1459322655, "answer_id": 36302218, "question_id": 36302028, "link": "https://stackoverflow.com/questions/36302028/coding-for-external-user-input-in-perl/36302218#36302218", "title": "Coding for external user input in perl", "body": "<pre><code>use strict;\nuse warnings; \n\nopen(IN,$ARGV[0]) or die \"Cannot open $ARGV[0]:$!\\n\";\nmy @in = &lt;IN&gt;;\nclose(IN);\n\nmy $name='';\nforeach my $in(@in){\n   chomp($in);   \n   $name = $in;\n   ###your code here\n }\n</code></pre>\n\n<p><strong>your fle sample</strong></p>\n\n<p>name1</p>\n\n<p>name2</p>\n\n<p>name3</p>\n\n<p><strong>Run your programs as</strong> </p>\n\n<blockquote>\n  <p>perl program.pl filename.txt</p>\n</blockquote>\n\n<p><strong>Update:(after OP's comment)</strong></p>\n\n<pre><code>my $name = &lt;STDIN&gt;;\n</code></pre>\n\n<p>this will prompt for a user input.</p>\n"}], "owner": {"reputation": 19, "user_id": 4229748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OLJ0z.jpg?s=128&g=1", "display_name": "DKru", "link": "https://stackoverflow.com/users/4229748/dkru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 36302218, "answer_count": 1, "score": -1, "last_activity_date": 1459327779, "creation_date": 1459322012, "question_id": 36302028, "link": "https://stackoverflow.com/questions/36302028/coding-for-external-user-input-in-perl", "title": "Coding for external user input in perl", "body": "<p>I am new to perl and coding and not entirely sure where/what to search for so this question may have been asked before.</p>\n\n<p>I finnished writing a program in perl and would like to know what code to use that allows me to enter a variable (name) outside the program without needing to specify it in the coding - I was told there is a way to execute the program outside of putty (I use putty) and that it asks me to enter the variable/s beforehand. </p>\n\n<p>in the coding the variable is specified in the beginning as:</p>\n\n<p>my $name='xxx';</p>\n\n<p>after which the name is used for specifying which files to use etc. I have over 30 different names that I need to run individually so it would be much easier if I can just type it in as part of the program instead of changing the coding each time in putty.</p>\n\n<p>Hope my question is clear - I'm still learning the different terms and syntax.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 2380603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7d3723d0385c8c40bb2f44f06db0e5?s=128&d=identicon&r=PG", "display_name": "Yudu Ban", "link": "https://stackoverflow.com/users/2380603/yudu-ban"}, "edited": false, "score": 0, "creation_date": 1459316976, "post_id": 36300663, "comment_id": 60225556, "body": "you should also break the inter-loop on success."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 3, "creation_date": 1459318933, "post_id": 36300663, "comment_id": 60226501, "body": "Try to use lexical file handle it is no need to close the file :)"}], "tags": [], "owner": {"reputation": 403, "user_id": 2380603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7d3723d0385c8c40bb2f44f06db0e5?s=128&d=identicon&r=PG", "display_name": "Yudu Ban", "link": "https://stackoverflow.com/users/2380603/yudu-ban"}, "is_accepted": false, "score": 0, "last_activity_date": 1459316881, "creation_date": 1459316881, "answer_id": 36300663, "question_id": 36300185, "link": "https://stackoverflow.com/questions/36300185/perl-script-to-sort-a-file-in-the-same-order-as-listed-in-another-file/36300663#36300663", "title": "perl script to sort a file in the same order as listed in another file?", "body": "<p>You have lots of errors in your code.</p>\n\n<ol>\n<li>You declare my @input_<strong>f</strong>ile2 array but chomp @input_<strong>F</strong>ile2</li>\n<li>Is your <code>while (&lt;input_file1&gt;) {</code> 's \"input_file1\" a file handle?</li>\n<li>You foreach $#input_File2, but use $input_File1 in regular expression.</li>\n<li>You should loop file1 inside loop of file2</li>\n</ol>\n\n<p>I edited your code with a little change:</p>\n\n<pre><code>            #!/usr/bin/perl\n\n            open (IN33, \"&lt;1.txt\") or die \"can't open file 1.txt\";\n            open (IN43, \"&lt;2.txt\") or die \"can't open file 2.txt\";\n            open (OUT43, \"&gt;out.txt\") or die \"can't open file out.txt\";\n\n            my @input_file2 = &lt;IN43&gt;;\n            my @input_file1 = &lt;IN33&gt;;\n\n            chomp @input_file2;\n\n\n            foreach my $i (@input_file2){\n            foreach (@input_file1) {\n\n            print OUT43 if /(.+)\\:\\Q$i\\E/;\n\n            }\n\n            }\n\n            close (IN33);\n\n            close (IN43);\n\n            close (OUT43);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 0, "last_activity_date": 1459362140, "last_edit_date": 1459362140, "creation_date": 1459327360, "answer_id": 36303782, "question_id": 36300185, "link": "https://stackoverflow.com/questions/36300185/perl-script-to-sort-a-file-in-the-same-order-as-listed-in-another-file/36303782#36303782", "title": "perl script to sort a file in the same order as listed in another file?", "body": "<p>Use  <code>grep</code> for to do it. <code>grep</code> returns the matched element from an array, then construct the list for to store output of the grep. use <code>select</code> to write content of the print statement to a new file.</p>\n\n<p>When using lexical file handler there is no need to close the file</p>\n\n<pre><code>open my $fh1, \"&lt;\", \"one.txt\";\nopen my $fh2 , \"&lt;\",\"two.txt\";\nopen my $wh, \"&gt;\",\"output.txt\";\nmy @data1 = &lt;$fh1&gt;;\nselect ($wh);\n\nwhile (my $line = &lt;$fh2&gt;)\n{\n    chomp $line;\n    my ($sort_data) = grep{/$line$/} @data1;\n    print \"$sort_data\";\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6081887, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-wZD3YTSqC5Q/AAAAAAAAAAI/AAAAAAAAAIw/OYcItnJXZek/photo.jpg?sz=128", "display_name": "Sumathi Gokul", "link": "https://stackoverflow.com/users/6081887/sumathi-gokul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36303782, "answer_count": 2, "score": 0, "last_activity_date": 1459362140, "creation_date": 1459314634, "question_id": 36300185, "link": "https://stackoverflow.com/questions/36300185/perl-script-to-sort-a-file-in-the-same-order-as-listed-in-another-file", "title": "perl script to sort a file in the same order as listed in another file?", "body": "<p>I want to sort a file content in a specific order that is followed in another file.For example,</p>\n\n<p>Input File1:</p>\n\n<p>dff_0_1:G11</p>\n\n<p>dff_0_5:N_25</p>\n\n<p>dff_0:G10</p>\n\n<p>dff_0_3:G13</p>\n\n<p>dff_0_2:G12</p>\n\n<p>Input File2:</p>\n\n<p>G13</p>\n\n<p>G11</p>\n\n<p>G12</p>\n\n<p>G10</p>\n\n<p>N_25</p>\n\n<p>output File1:</p>\n\n<p>dff_0_3:G13</p>\n\n<p>dff_0_1:G11</p>\n\n<p>dff_0_2:G12</p>\n\n<p>dff_0:G10</p>\n\n<p>dff_0_5:N_25</p>\n\n<p>Here is the perl code i wrote, but its not working as i wish.</p>\n\n<pre><code>my @input_file2 = &lt;IN2&gt;;\n\nchomp @input_File2;\n\nwhile (&lt;input_file1&gt;) {\n\nforeach my $i (0..$#input_File2){\n\nprint OUT43 if /(.+)\\:\\Q$input_File1[$i]\\E/; \n\n}\n\n}\n\nclose (IN33);\n\nclose (IN43);\n\nclose (OUT43);\n</code></pre>\n"}, {"tags": ["perl", "regex-negation"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459310250, "post_id": 36298677, "comment_id": 60223081, "body": "<code>[^0-9]</code> matches <i>a single character</i> that is not 0-9. <code>sda</code> and <code>sdb</code> only contain 3 characters each, but your regex matches 4."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459307627, "creation_date": 1459307627, "answer_id": 36298961, "question_id": 36298677, "link": "https://stackoverflow.com/questions/36298677/how-to-exclude-0-9-in-perl-regex/36298961#36298961", "title": "How to exclude 0-9 in perl regex", "body": "<p>For once the answer is simple for a regular expression question!</p>\n\n<p>Your expression <code>/sd.[^0-9]/</code> will return a <em>match</em> if <code>sd</code>, followed by any character except newline, followed by any character except ASCII <code>0</code> through <code>9</code> appears <em>anywhere in the string</em></p>\n\n<p>You must <em>anchor</em> your pattern to the start and end of the string to insist that <code>sd</code> appears at the beginning, and the non-digit character appears at the end. You should also use <code>.*</code> to allow for <em>zero or more</em> intermediate characters</p>\n\n<p>This program shows the result</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @drives = qw/ sda sda1 sda2 sdb sdb1 dm dm-0 /;\n\nfor my $part ( @drives ) {\n\n    if ( $part =~ /^sd.*[^0-9]$/ ) {\n        print \"\\tBase: $part\\n\";\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Base: sda\n    Base: sdb\n</code></pre>\n\n<p>Please note that it may well be easier and clearer to write the test like this</p>\n\n<pre><code>if ( $part =~ /^sd/ and $part =~ /[^0-9]$/ ) {\n    print \"\\tBase: $part\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1459314204, "post_id": 36299456, "comment_id": 60224411, "body": "<code>grep</code> is for returning the elements in a list that match a condition; calling <code>s&#47;&#47;&#47;</code> inside <code>grep</code> introduces side effects that most people wouldn&#39;t expect (i.e. changing the original array), and is less readable than a <code>for</code> loop."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": -1, "last_activity_date": 1459311485, "last_edit_date": 1459311485, "creation_date": 1459310555, "answer_id": 36299456, "question_id": 36298677, "link": "https://stackoverflow.com/questions/36298677/how-to-exclude-0-9-in-perl-regex/36299456#36299456", "title": "How to exclude 0-9 in perl regex", "body": "<p>Your regex won't work because of your regex try to match four character.</p>\n\n<p>Use negative look ahead for to do it</p>\n\n<pre><code>@drives = (\"sda\", \"sda1\", \"sda2\", \"sdb\", \"sdb1\", \"dm\", \"dm-0\");\nfor $part (@drives)\n{\n    if ($part =~m/sd.(?!\\d+)/)\n    {\n    print \"\\tBase: $part\\n\";\n    }\n}\n</code></pre>\n\n<p>Use grep with substitution  instead of for </p>\n\n<pre><code>@drives = (\"sda\", \"sda1\", \"sda2\", \"sdb\", \"sdb1\", \"dm\", \"dm-0\");\nmy @ac = grep{ s/(sd.)(?!\\d)/\\tBase : $1\\n/; } @drives;\nprint @ac;\nprint \"\\n\"; \n</code></pre>\n"}], "owner": {"reputation": 2209, "user_id": 883572, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2df953841a456c642ce0d2a66b8cb919?s=128&d=identicon&r=PG", "display_name": "Danny", "link": "https://stackoverflow.com/users/883572/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 36298961, "answer_count": 2, "score": 0, "last_activity_date": 1459311485, "creation_date": 1459305506, "question_id": 36298677, "link": "https://stackoverflow.com/questions/36298677/how-to-exclude-0-9-in-perl-regex", "title": "How to exclude 0-9 in perl regex", "body": "<p>In a comparison, I'm trying to exclude strings ending in a single numeric digit but can't get it to work.</p>\n\n<p>Given:</p>\n\n<pre><code>@drives = (\"sda\", \"sda1\", \"sda2\", \"sdb\", \"sdb1\", \"dm\", \"dm-0\");\nfor $part (@drives)\n{\n    if ($part =~ /sd.[^0-9]/)\n    {\n        print \"\\tBase: $part\\n\";\n    }\n}\n</code></pre>\n\n<p>The regex <code>/sd.[^0-9]/</code> should only match on sda and sdb.  The output should be:</p>\n\n<pre><code>   Base: sda\n   Base: sdb\n</code></pre>\n\n<p>The regex looks ok.... why doesn't it work?</p>\n"}, {"tags": ["perl", "mojolicious", "mojo-useragent"], "answers": [{"comments": [{"owner": {"reputation": 2326, "user_id": 1152633, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wbORw.jpg?s=128&g=1", "display_name": "skippr", "link": "https://stackoverflow.com/users/1152633/skippr"}, "edited": false, "score": 0, "creation_date": 1459380238, "post_id": 36314938, "comment_id": 60266174, "body": "Thanks for the simple, straight-forward answer, and readability suggestions."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1459356367, "creation_date": 1459356367, "answer_id": 36314938, "question_id": 36296197, "link": "https://stackoverflow.com/questions/36296197/how-to-user-mojouseragents-connect-timeout/36314938#36314938", "title": "How to user Mojo::UserAgent&#39;s connect_timeout", "body": "<p>The <a href=\"https://metacpan.org/pod/Mojo::UserAgent#connect_timeout\" rel=\"nofollow\">documentation</a> shows that <code>connect_timeout</code> can be used as both a getter and a setter:</p>\n\n<pre><code>my $timeout = $ua-&gt;connect_timeout;    # getter\n$ua         = $ua-&gt;connect_timeout(5); # setter\n</code></pre>\n\n<p>The setter returns the Mojo::UserAgent object it's called on so that it can be chained with other methods.</p>\n\n<p>So you <em>could</em> do:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\n\nmy $api_data = decode_json( $ua-&gt;connect_timeout(42)-&gt;get($url)-&gt;res-&gt;body );\n</code></pre>\n\n<p>But you're not required to chain methods, so I would recommend a more readable version:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\n$ua-&gt;connect_timeout(42);\n\nmy $api_data = decode_json( $ua-&gt;get($url)-&gt;res-&gt;body );\n</code></pre>\n"}], "owner": {"reputation": 2326, "user_id": 1152633, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wbORw.jpg?s=128&g=1", "display_name": "skippr", "link": "https://stackoverflow.com/users/1152633/skippr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 36314938, "answer_count": 1, "score": 4, "last_activity_date": 1459356367, "creation_date": 1459290350, "last_edit_date": 1459290685, "question_id": 36296197, "link": "https://stackoverflow.com/questions/36296197/how-to-user-mojouseragents-connect-timeout", "title": "How to user Mojo::UserAgent&#39;s connect_timeout", "body": "<p>Perl newbie here. I have a line of code:</p>\n\n<pre><code>my $api_data = decode_json( $ua-&gt;get($url)-&gt;res-&gt;body );\n</code></pre>\n\n<p>where <code>$ua = Mojo::UserAgent-&gt;new</code>. On occasion, the request may hang (indefinitely) and I'd like to specify a connection timeout.</p>\n\n<p>The <a href=\"http://mojolicious.org/perldoc/Mojo/UserAgent#connect_timeout\" rel=\"nofollow\">documentation</a> provides an example, but I'm not exactly sure how to incorporate it correctly into my statement. </p>\n\n<p>How should I use <code>connect_timeout</code> in this case? I understand that Mojo specifies a default connection timeout value (10), but I'd rather specify it explicitly in the code.</p>\n"}, {"tags": ["arrays", "perl", "reference"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1459277217, "post_id": 36292435, "comment_id": 60210433, "body": "It looks fine, <a href=\"https://eval.in/544496\" rel=\"nofollow noreferrer\">eval.in/544496</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1459277436, "post_id": 36292435, "comment_id": 60210590, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can copy and paste verbatim and run on our own machines. The code you&#39;ve shown isn&#39;t enough to reproduce your problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459308249, "post_id": 36292435, "comment_id": 60222525, "body": "What are <code>$line</code> and <code>@row</code> for?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459278493, "post_id": 36292981, "comment_id": 60211206, "body": "(As an aside, it could also be written <code>$sum += $row[$indexes[$i]];</code>)"}, {"owner": {"reputation": 3, "user_id": 6130752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3287ced6b0b1c7d3fac76c7fff102442?s=128&d=identicon&r=PG&f=1", "display_name": "Frida Jacobson", "link": "https://stackoverflow.com/users/6130752/frida-jacobson"}, "edited": false, "score": 0, "creation_date": 1459352855, "post_id": 36292981, "comment_id": 60250794, "body": "Thank you! Yes, I&#39;m just learning how to use local variables, this is the problem here! :D"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 4, "last_activity_date": 1459278272, "creation_date": 1459278272, "answer_id": 36292981, "question_id": 36292435, "link": "https://stackoverflow.com/questions/36292435/passing-both-array-and-scalar-to-subroutine/36292981#36292981", "title": "Passing both array and scalar to subroutine", "body": "<p><code>my $sum = $sum + $row[$indexes[$i]];</code> should not have the <code>my</code> declaration in the loop.</p>\n\n<p>You are creating a new <code>$sum</code> for each iteration of the <code>for</code> loop (in the scope of the <code>for</code> loop). When the loop ends, the <code>$sum</code> created there goes out of scope and the program uses the <code>$sum</code> you created before the loop (which is equal to 0).</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": 1, "last_activity_date": 1459281618, "creation_date": 1459281618, "answer_id": 36294034, "question_id": 36292435, "link": "https://stackoverflow.com/questions/36292435/passing-both-array-and-scalar-to-subroutine/36294034#36294034", "title": "Passing both array and scalar to subroutine", "body": "<p>Another way you could pass the array to a sub function is as followed</p>\n\n<pre><code>calc_average($line,\\@GC_indexes);\n\nsub calc_average{\n    my ($line,$index) = @_;\n    my @indexes = @{$index};\n    print scalar(@indexes); #should print the length of your array\n</code></pre>\n\n<p>}</p>\n\n<p>You can fill in the rest, just thought I'd share.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459311082, "last_edit_date": 1495535392, "creation_date": 1459310683, "answer_id": 36299473, "question_id": 36292435, "link": "https://stackoverflow.com/questions/36292435/passing-both-array-and-scalar-to-subroutine/36299473#36299473", "title": "Passing both array and scalar to subroutine", "body": "<p>Instead of solutions you got <em>it looks fine to me</em> comments. Your question should have included a verifiable example. Please read <a href=\"https://stackoverflow.com/help/mcve\"><em>How to create a Minimal, Complete, and Verifiable example</em></a></p>\n\n<p>Commenting out the code you know doesn't work won't help you find a solution: it leaves us nothing to work from. In this case all I had to do was remove your comments</p>\n\n<p>Here's the MCVE for your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump;\n\nmy $line = join \"\\t\", 1 .. 100;\nmy @GC_indexes = (7, 14, 42);\n\nprint calc_average($line, \\@GC_indexes), \"\\n\";\n\nsub calc_average {\n\n    my @indexes = @{$_[1]};\n    print @indexes.\"\\n\"; #test only\n    my $line = $_[0];\n    my $sum = 0;\n    my @row=split(/\\t/,$line);\n    for (my $i=0; $i&lt;@indexes; $i++){\n        my $sum = $sum + $row[$indexes[$i]];\n    }\n    my $average = $sum/scalar(@indexes);\n    print $average.\"\\n\"; #test only\n    return $average;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>3\n0\n0\n</code></pre>\n\n<p>As you have been told, the main problem is that you have declared a <em>new</em> <code>$sum</code> within your <code>for</code> loop. Each time around the loop the inner <code>$sum</code> is declared and starts with the value <code>undef</code>, then it is incremented by <code>$row[$indexes[$i]]</code> and it is discarded at the end of the loop block. You meant to use the <em>outer</em> <code>$sum</code> that you declared a few lines earlier</p>\n\n<p>Please also note the following points</p>\n\n<ul>\n<li><p>You <em>must always</em> start every Perl program with <code>use strict</code> and <code>use warnings 'all'</code>. That will help immensely with a large number of trivial errors that you may otherwise overlook, and espceially should be in place before you ask others for help</p></li>\n<li><p>Use much more whitespace to make it clear to the eye where the fundamental units of your program start and stop. For instance, operators should be separated from their operands, and blocks should stand out distinctly from their surrounding code</p></li>\n<li><p>Arrays in scalar context evaluate to the number of elements in the array; when interpolated into a string they form a string separated by the contents of the built-in variable <code>$\"</code> which is normally as single space, and in list context (as in the parameters to a subroutine call) they evaluate as a list of their elements</p>\n\n<p>That means <code>print @indexes.\"\\n\"</code> will print the number of elements in <code>@indexes</code> followed by a newline, whereas <code>print \"@indexes\\n\"</code> will print the <em>contents</em> of <code>@indexes</code> with a newline, and <code>print @indexes, \"\\n\"</code> will print all of the elements of the array (with no separator) and a newline</p>\n\n<p>I'm unsure which you meant here</p></li>\n<li><p>The C-style <code>for</code> loop is very rarely necessary. Usually you just need to iterate over a list. So <code>for (my $i=0; $i&lt;@indexes; $i++)</code> is almost certainly better as <code>for my $i ( 0 .. $#indexes )</code></p>\n\n<p>You should almost never need <code>$i++</code>. The form has been popularised by the name of the C++ language, but as well as incrementing <code>$i</code> is also has the burden of returning the value <em>before it was incremented</em>. Most modern languages will optimise that away but you shouldn't rely on it, and it also breaks the rule of putting the <em>verb</em> before the <em>noun</em></p>\n\n<p>The expression <code>$#array</code> evaluates to the last index of <code>@array</code>. It was designed to be used for instances like this</p></li>\n<li><p>The expression <code>$sum/scalar(@indexes)</code> doesn't need the <code>scalar</code> operator. As disacussed before, <code>@array</code> in scalar context (provided by the division <code>/</code> operator) evaluates to the number of elements in <code>@array</code>, so all you need is <code>$sum/@indexes</code></p></li>\n</ul>\n\n<p>I've written this solution. Your own subroutine (with the comments removed) is <code>calc_average0</code>, while how I would write it is <code>calc_average1</code>. As I described, your own subroutine prints the number of elements in the array <code>@GC_indexes</code> passed by reference, followed by zero, because the outer <code>$sum</code> is never changed from its initialisation</p>\n\n<p>I hope this helps</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dump;\n\nmy $line = join \"\\t\", 1 .. 100;\nmy @GC_indexes = ( 7, 14, 42 );\n\ncalc_average0( $line, \\@GC_indexes );\ncalc_average1( $line, \\@GC_indexes );\n\nsub calc_average0 {\n\n    my @indexes = @{ $_[1] };\n    print @indexes . \"\\n\";    #test only\n    my $line = $_[0];\n    my $sum  = 0;\n    my @row  = split( /\\t/, $line );\n    for ( my $i = 0; $i &lt; @indexes; $i++ ) {\n        my $sum = $sum + $row[ $indexes[$i] ];\n    }\n    my $average = $sum / scalar(@indexes);\n    print $average. \"\\n\";     #test only\n    return $average;\n}\n\nsub calc_average1 {\n\n    my ( $line, $indexes ) = @_;\n\n    my @line = split /\\t/, $line;\n\n    my $sum = 0;\n    $sum += $line[ $indexes-&gt;[$_] ] for 0 .. $#{$indexes};\n\n    my $average = $sum / @$indexes;\n    print \"calc_average1: $average\\n\";    #test only\n\n    return $average;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>3\n0\ncalc_average1: 22\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6130752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3287ced6b0b1c7d3fac76c7fff102442?s=128&d=identicon&r=PG&f=1", "display_name": "Frida Jacobson", "link": "https://stackoverflow.com/users/6130752/frida-jacobson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "closed_date": 1459866674, "accepted_answer_id": 36292981, "answer_count": 3, "score": 0, "last_activity_date": 1459311082, "creation_date": 1459276574, "last_edit_date": 1459276916, "question_id": 36292435, "link": "https://stackoverflow.com/questions/36292435/passing-both-array-and-scalar-to-subroutine", "closed_reason": "Not suitable for this site", "title": "Passing both array and scalar to subroutine", "body": "<p>First time posting here, hope that someone can help me. Im new with programming and perl, and currently taking a course at the university.</p>\n\n<p>My question is about the following subroutine that takes an array and a scalar (string) as arguments. I call the subroutine with a reference to the array, and dereference in the subroutine.</p>\n\n<p>The length of the array whose reference I pass as argument to the subroutine is not 0. The length of the array that I get after dereferencing in the subroutine is 0. I don't understand why.</p>\n\n<pre><code>sub calc_average {\n\n    my @indexes = @{$_[1]};\n    print @indexes.\"\\n\"; #test only\n    my $line = $_[0];\n    #my $sum = 0;\n    #my @row=split(/\\t/,$line);\n    #for (my $i=0; $i&lt;@indexes; $i++){\n    #    my $sum = $sum + $row[$indexes[$i]];\n    #}\n    #my $average = $sum/scalar(@indexes);\n    #print $average.\"\\n\"; #test only\n    #return $average;\n}\n</code></pre>\n\n<p>This prints 0. The subroutine is called with: </p>\n\n<pre><code>calc_average($line, \\@GC_indexes).\"\\n\";\n</code></pre>\n\n<p><code>@GC_indexes</code> is not empty. <code>$line</code> is a line of text in a file.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "teradata", "bison", "flex-lexer", "sql-parser"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1459279584, "post_id": 36291770, "comment_id": 60211894, "body": "What database? Microsoft SQLServer, for one, has customized tools for doing this kind of analysis."}, {"owner": {"reputation": 59, "user_id": 4245974, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae5b886ee391cb7778b29093863e8b27?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Aryan", "link": "https://stackoverflow.com/users/4245974/raj-aryan"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1459282170, "post_id": 36291770, "comment_id": 60213493, "body": "@mob : the database is Teradata"}], "answers": [{"tags": [], "owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "is_accepted": false, "score": 2, "last_activity_date": 1459294208, "creation_date": 1459294208, "answer_id": 36296956, "question_id": 36291770, "link": "https://stackoverflow.com/questions/36291770/parsing-sql-to-determine-complexity-level/36296956#36296956", "title": "Parsing SQL to determine complexity level", "body": "<p>Teradata has many non ANSI features and you're considering re-implementing the parser for it.</p>\n\n<p>Instead use the database server and put an 'explain' in front of your statements and process the result.</p>\n\n<pre><code>explain select * from dbc.dbcinfo;\n\n  1) First, we lock a distinct DBC.\"pseudo table\" for read on a RowHash\n     to prevent global deadlock for DBC.DBCInfoTbl.\n  2) Next, we lock DBC.DBCInfoTbl in view dbcinfo for read.\n  3) We do an all-AMPs RETRIEVE step from DBC.DBCInfoTbl in view\n     dbcinfo by way of an all-rows scan with no residual conditions\n     into Spool 1 (group_amps), which is built locally on the AMPs.\n     The size of Spool 1 is estimated with low confidence to be 432\n     rows (2,374,272 bytes).  The estimated time for this step is 0.01\n     seconds.\n  4) Finally, we send out an END TRANSACTION step to all AMPs involved\n     in processing the request.\n  -&gt; The contents of Spool 1 are sent back to the user as the result of\n     statement 1.  The total estimated time is 0.01 seconds.\n</code></pre>\n\n<p>This will also validate your SQL.</p>\n"}], "owner": {"reputation": 59, "user_id": 4245974, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae5b886ee391cb7778b29093863e8b27?s=128&d=identicon&r=PG&f=1", "display_name": "Raj Aryan", "link": "https://stackoverflow.com/users/4245974/raj-aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459294237, "creation_date": 1459274429, "last_edit_date": 1459294237, "question_id": 36291770, "link": "https://stackoverflow.com/questions/36291770/parsing-sql-to-determine-complexity-level", "title": "Parsing SQL to determine complexity level", "body": "<p>I have to determine the complexity level (simple/medium/complex etc) of a sql by counting number of occurrences of specific keywords, sub-queries, derived tables, functions etc that constitute the sql. Additionally, I have to syntactically validate the sql.</p>\n\n<p>I searched on the net and found that Perl has 2 classes named <code>SQL::Statement</code> and <code>SQL::Parser</code> which could be leveraged to achieve the same. However, I found that these classes have several limitations (such as <code>CASE WHEN</code> constructs not supported etc). </p>\n\n<p>That been said, is it better to build a custom concise sql parser with Lex/Yacc or Flex/Bison instead ? Which approach would be better and quick ?</p>\n\n<p>Please share your thoughts on this. Also, can anyone point me to any resources online that discusses the same.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "rt"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 120094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8230d23952353b311cd9a43626a3aeb?s=128&d=identicon&r=PG", "display_name": "Jim Brandt", "link": "https://stackoverflow.com/users/120094/jim-brandt"}, "edited": false, "score": 1, "creation_date": 1459340951, "post_id": 36290609, "comment_id": 60241000, "body": "Good digging to sort that out. The other approach is to look at the source of the generated page, note the classes and ids, and do it all in CSS. You don&#39;t say which version you&#39;re running, but RT adds more classes and ids to the markup with each release to make this easier."}], "tags": [], "owner": {"reputation": 65, "user_id": 892693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50f7a18c9b78678f24e24f93ea4239bd?s=128&d=identicon&r=PG", "display_name": "Kibbles", "link": "https://stackoverflow.com/users/892693/kibbles"}, "is_accepted": true, "score": 1, "last_activity_date": 1459272580, "last_edit_date": 1459272580, "creation_date": 1459270976, "answer_id": 36290609, "question_id": 36290261, "link": "https://stackoverflow.com/questions/36290261/request-tracker-changing-queue-color/36290609#36290609", "title": "Request Tracker - Changing Queue Color", "body": "<p>After some more trial and error, I found the issue! Queue references the internal number of the queues, QueueName references the actual string in the table. In addition, you have to call the name via \"QueueObj\" to get the Name attribute. Here's the working block:</p>\n\n<pre><code>&lt;%INIT&gt;\n      # Set the queue color.\n      sub QueueInColor {\n        my $Ticket = shift;\n        my $queue = $Ticket-&gt;QueueObj-&gt;Name;\n        my $colors = \"#FF0000\";\n        $queue = \"&lt;div style=\\\"color: $colors;\\\"&gt;$queue&lt;/div&gt;\";\n        return \\\"&lt;b&gt;$queue&lt;/b&gt;\";\n      }\n      $COLUMN_MAP-&gt;{QueueName}-&gt;{value} = \\&amp;QueueInColor;\n&lt;/%INIT&gt;\n\n&lt;%ARGS&gt;\n        $COLUMN_MAP =&gt; undef\n&lt;/%ARGS&gt;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 892693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50f7a18c9b78678f24e24f93ea4239bd?s=128&d=identicon&r=PG", "display_name": "Kibbles", "link": "https://stackoverflow.com/users/892693/kibbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 36290609, "answer_count": 1, "score": 1, "last_activity_date": 1459272580, "creation_date": 1459269852, "question_id": 36290261, "link": "https://stackoverflow.com/questions/36290261/request-tracker-changing-queue-color", "title": "Request Tracker - Changing Queue Color", "body": "<p>I'd like to change the ticket table in RT to have a custom \"Queue\" color. I am using this guide as a reference:</p>\n\n<p><a href=\"http://requesttracker.wikia.com/wiki/ShowStatusInColor\" rel=\"nofollow noreferrer\">http://requesttracker.wikia.com/wiki/ShowStatusInColor</a></p>\n\n<p>... which works. The following code in a Callback will update all \"Priority\" fields to be red:</p>\n\n<pre><code>&lt;%INIT&gt;\n      # Set the priority color.\n      sub PriorityInColor {\n        my $Ticket = shift;\n        my $priority = $Ticket-&gt;Priority;\n        my $colors = \"#FF0000\";\n        $priority = \"&lt;div style=\\\"color: $colors;\\\"&gt;$priority&lt;/div&gt;\";\n        return \\\"&lt;b&gt;$priority&lt;/b&gt;\";\n      }\n\n      $COLUMN_MAP-&gt;{Priority}-&gt;{value} = \\&amp;PriorityInColor;\n&lt;/%INIT&gt;\n\n&lt;%ARGS&gt;\n    $COLUMN_MAP =&gt; undef\n&lt;/%ARGS&gt;\n</code></pre>\n\n<p>Looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w5hfX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w5hfX.jpg\" alt=\"Priority shows up red\"></a></p>\n\n<p>This also holds true for most other fields except the Queue. When applied to Queue, it has no result at all:</p>\n\n<pre><code>&lt;%INIT&gt;\n      # Set the queue color.\n      sub QueueInColor {\n        my $Ticket = shift;\n        my $queue = $Ticket-&gt;Queue;\n        my $colors = \"#FF0000\";\n        $queue = \"&lt;div style=\\\"color: $colors;\\\"&gt;$queue&lt;/div&gt;\";\n        return \\\"&lt;b&gt;$queue&lt;/b&gt;\";\n      }\n      $COLUMN_MAP-&gt;{Queue}-&gt;{value} = \\&amp;QueueInColor;\n&lt;/%INIT&gt;\n\n&lt;%ARGS&gt;\n    $COLUMN_MAP =&gt; undef\n&lt;/%ARGS&gt;\n</code></pre>\n\n<p>I feel like I'm missing some additional arguments for Queue, but I can't for the life of me make sense of the structure if that's the case. Thanks in advance for any help!</p>\n"}, {"tags": ["python", "c", "perl", "parallel-processing", "fork"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1459268304, "post_id": 36289414, "comment_id": 60204763, "body": "Why are you asking us to rewrite one of the perfectly good modules you listed? How is that going to provide a better experience!?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1459268334, "post_id": 36289414, "comment_id": 60204785, "body": "&quot;I am very hesitant to use external libraries/packages/modules, as I&#39;ve had bad experiences with them in the past&quot; Your hesitation is understandable, but you&#39;re throwing the baby out with the bath water. Commonly-used, well-maintained modules like the ones you&#39;ve listed are generally going to be much more robust than your own hand-rolled code. Don&#39;t re-invent the wheel."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1459268760, "post_id": 36289414, "comment_id": 60205076, "body": "...in general, if you&#39;re going to write a library or utility to accomplish thing-X, you want to have a deep understanding of the existing implementations <b>first</b>. If you can&#39;t get the implementations that already exist to work the way you intend, you probably don&#39;t understand the problem space well enough to build your own."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1459267802, "creation_date": 1459267802, "answer_id": 36289565, "question_id": 36289414, "link": "https://stackoverflow.com/questions/36289414/how-to-pool-shell-processes-in-perl-and-or-c/36289565#36289565", "title": "How to Pool Shell Processes in Perl and/or C", "body": "<p><a href=\"http://metacpan.org/pod/Forks::Super\" rel=\"nofollow\"><code>Forks::Super</code></a> author here:</p>\n\n<pre><code>use Forks::Super MAX_PROC =&gt; 8;\nsub Job { ... }    # function to perform task\nmy @DATA = (...);  # details about 28 tasks to perform\nforeach my $task (@DATA) {\n    fork { cmd =&gt; 'Job', args =&gt; $task };\n}\nwaitall;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1459268419, "creation_date": 1459268419, "answer_id": 36289782, "question_id": 36289414, "link": "https://stackoverflow.com/questions/36289414/how-to-pool-shell-processes-in-perl-and-or-c/36289782#36289782", "title": "How to Pool Shell Processes in Perl and/or C", "body": "<p><a href=\"http://search.cpan.org/perldoc?Parallel::ForkManager\" rel=\"nofollow\">Parallel::ForkManager</a>.</p>\n\n<pre><code>use Parallel::ForkManager qw( );\nmy $pm = Parallel::ForkManager-&gt;new(8);\nfor my $cmd (@cmds) {\n   $pm-&gt;start and next;\n   exec($cmd)\n      or die;\n}\n</code></pre>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 36289782, "answer_count": 2, "score": -1, "last_activity_date": 1459268419, "creation_date": 1459267385, "question_id": 36289414, "link": "https://stackoverflow.com/questions/36289414/how-to-pool-shell-processes-in-perl-and-or-c", "title": "How to Pool Shell Processes in Perl and/or C", "body": "<p>I am looking for a Perl equivalent to Python's </p>\n\n<pre><code>from multiprocessing import Pool\n...\nif __name__=='__main__':\n    pool = Pool(processes =2)\n    pool.map(Job,DATA)\n</code></pre>\n\n<p>in order to run 8 shell commands at once from a list of 28, but I don't want to use the entire machine and hurt my colleagues' jobs. I have found perl's</p>\n\n<pre><code>use Thread::Queue;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>use Parallel::ForkManager;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>use Forks::Super;\n</code></pre>\n\n<p>but I am very hesitant to use external libraries/packages/modules, as I've had bad experiences with them in the past.  I'm also having a hard time getting minimal working examples from these packages to work.</p>\n\n<p>Could someone please provide a standard (no external libraries/packages/modules) way of doing python's pool processing in either C or Perl without calling external libraries?</p>\n\n<p>-DC</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1459269453, "post_id": 36289208, "comment_id": 60205583, "body": "I&#39;m not sure I love the 2nd &amp; 3rd solutions.  If <code>%ID_Gene</code> is large enough, re-initializing it with a list made of it&#39;s own contents might be a tad inefficient."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1459270943, "post_id": 36289208, "comment_id": 60206563, "body": "@tjd Agreed. I prefer <code>foreach my $target (@targets) { my ($k, $v) = split &#47;\\t&#47;, $target; $ID_Gene{$k} = $v; }</code> for an existing hash."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459271407, "post_id": 36289208, "comment_id": 60206831, "body": "@ThisSuitIsBlackNot agreed, sometimes that&#39;s better, but OP specifically asked for not that solution :)"}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1459274684, "post_id": 36289208, "comment_id": 60208833, "body": "Yup, you&#39;ve faithfully fulfilled OP&#39;s request for more rope, but &lt;shudder&gt;.  Let&#39;s hope it&#39;s used wisely."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1459266857, "creation_date": 1459266857, "answer_id": 36289208, "question_id": 36289115, "link": "https://stackoverflow.com/questions/36289115/pushing-a-list-of-key-value-pairs-in-perl-hash/36289208#36289208", "title": "Pushing a list of key/value pairs in Perl Hash", "body": "<p>You're almost there, you just have the assignment in the wrong place, so you end up blowing away the entire hash each time you add an item. As a general rule, it usually doesn't make sense to do things with side-effects in <code>map</code>. You can simply do:</p>\n\n<pre><code>my %ID_Gene = map { split /\\t/, $_ } @targets;\n</code></pre>\n\n<p>if you already have some stuff in <code>%ID_Gene</code> and you want to add to it, you can do</p>\n\n<pre><code>%ID_Gene = (%ID_Gene, map { split /\\t/, $_ } @targets);\n</code></pre>\n\n<p>or if you think that's too much going on in one line:</p>\n\n<pre><code>my %to_add = map { split /\\t/, $_ } @targets;\n%ID_Gene = (%ID_Gene, %to_add);\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 1825360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa94eaa60d040abf40b5ab8249d0f6b5?s=128&d=identicon&r=PG", "display_name": "The August", "link": "https://stackoverflow.com/users/1825360/the-august"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 36289208, "answer_count": 1, "score": 1, "last_activity_date": 1459266857, "creation_date": 1459266606, "question_id": 36289115, "link": "https://stackoverflow.com/questions/36289115/pushing-a-list-of-key-value-pairs-in-perl-hash", "title": "Pushing a list of key/value pairs in Perl Hash", "body": "<p>I'm trying to 'push' a list of key/value pairs into a perl hash as follows. I thought it would work like the key-value pairs are assigned when an array is assigned to a hash. <code>@targets</code> contains tab separated strings for each elements. However for every iteration of the map loop, the hash is overwitten and at the end I only got one key-value pair in the hash which corresponds to the last element of the <code>@targets</code>. I'm trying to avoid the usual <code>$ID_Gene{$key}=$value</code> type assignments. </p>\n\n<p>How to push a list as a key-value pair to the hash?</p>\n\n<p>Alternatively, is there any way I can build an anonymous hash and then push that hash to the original hash?Like:  <code>%ID_Gene = (%ID_Gene, %AnonyHash);</code></p>\n\n<pre><code>my %ID_Gene;\nmap{ %ID_Gene= (split /\\t/,$_) ;\n}@targets;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "edited": false, "score": 0, "creation_date": 1459259483, "post_id": 36286211, "comment_id": 60198367, "body": "It should be <code>$sql-&gt;fetchrow_array();</code> not just <code>$sql-&gt;fetchrow_array</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "reply_to_user": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459260056, "post_id": 36286467, "comment_id": 60198836, "body": "So? What is update_blastdb.pl? It is/should be your code after all."}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459260193, "post_id": 36286467, "comment_id": 60198955, "body": "&quot;$db_name&quot; was defined in a block. I define it globally. It is working now. Thank you."}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459261890, "post_id": 36286467, "comment_id": 60200244, "body": "Could you please chek the second part in my post? thanks"}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "reply_to_user": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 1, "creation_date": 1459262030, "post_id": 36286467, "comment_id": 60200356, "body": "<code>if (defined $value) {   Do that } else {   Do this }</code>"}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "reply_to_user": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459262067, "post_id": 36286467, "comment_id": 60200393, "body": "Any reasonable Perl Tutorial would have given you this."}], "tags": [], "owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "is_accepted": true, "score": 0, "last_activity_date": 1459259729, "creation_date": 1459259729, "answer_id": 36286467, "question_id": 36286211, "link": "https://stackoverflow.com/questions/36286211/select-statement-from-mssql-in-perl-file/36286467#36286467", "title": "select statement from mssql in Perl file", "body": "<p>You should change at least these lines:</p>\n\n<pre><code>    my $sql = $dbh-&gt;prepare(\"SELECT DatabaseVersion FROM BlastDatabaseDim WHERE DatabaseName = ?\");\n    $sql-&gt;execute($db_name);\n    my @row = $sql-&gt;fetchrow_array();\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1459262317, "accepted_answer_id": 36286467, "answer_count": 1, "score": 0, "last_activity_date": 1459261850, "creation_date": 1459259148, "last_edit_date": 1459261850, "question_id": 36286211, "link": "https://stackoverflow.com/questions/36286211/select-statement-from-mssql-in-perl-file", "closed_reason": "Not suitable for this site", "title": "select statement from mssql in Perl file", "body": "<p>Simply, I use Perl to select a value from mssql database and print it.</p>\n\n<p>here is my code:</p>\n\n<pre><code>my $serverName = \"Alaa\";\n    my $database=\"blasti2b2\";\n    my $user=\"i2b2blast\";\n    my $pass=\"demouser\";\n\n    my $dsn  = \"Provider=sqloledb;Trusted Connection=yes;\";\n    $dsn .= \"Server=$serverName;Database=$database\";\n    my $dbh = DBI-&gt;connect(\"dbi:ADO:$dsn\",$user,$pass,{ RaiseError =&gt; 1, AutoCommit =&gt; 1}) || die \"Database connection not made: $DBI::errstr\";\n\n    my $sql = $dbh-&gt;prepare(\"SELECT DatabaseVersion FROM BlastDatabaseDim WHERE DatabaseName = $db_name\");\n    $sql-&gt;execute();\n    my @row\n    @row = $sql-&gt;fetchrow_array\n    my $DatabaseVersion= $row[0];\n    print \"$DatabaseVersion\\n\";\n</code></pre>\n\n<p>I have error in $DatabaseVersion, $db_name, and @row.</p>\n\n<p>Any right way please?</p>\n\n<p>+</p>\n\n<p>How to check Null value?\nI try:</p>\n\n<pre><code>if ($DatabaseVersion eq undef)\nif ($DatabaseVersion == undef)\nif ($DatabaseVersion eq '')\nif ($DatabaseVersion eq \"\")\n</code></pre>\n\n<p>all give me an error.\nThanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 1, "creation_date": 1459251679, "post_id": 36282971, "comment_id": 60192344, "body": "It doesn&#39;t when I try. My file results in the first line being <code>&#47;&#47;LICENSE#ifndef GAGA</code> as expected. Are you sure your <code>file.hpp</code> is still the original file? (I.e. you haven&#39;t already modified it with garbage using Perl in-place modifications?) Also, your result lacks the leading <code>&#47;&#47;</code> before <code>LICENSE</code>. Does that bother you at all?"}, {"owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "reply_to_user": {"reputation": 2880, "user_id": 1540600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv9jm.jpg?s=128&g=1", "display_name": "sferencik", "link": "https://stackoverflow.com/users/1540600/sferencik"}, "edited": false, "score": 0, "creation_date": 1459251748, "post_id": 36282971, "comment_id": 60192391, "body": "This is so strange: This happens, when ever the encoding of <code>file.hpp</code> is UTF8 with Unicode BOM. (when I do that then the above applies)  Does somebody know what the problem is?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459274636, "post_id": 36282971, "comment_id": 60208795, "body": "Re &quot;<i>-0: reads the file into ram</i>&quot;, That&#39;s not what <code>-0</code> does. That&#39;s what <code>-0777</code> does, which is what should have been used."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 4, "last_activity_date": 1459255339, "creation_date": 1459255339, "answer_id": 36284609, "question_id": 36282971, "link": "https://stackoverflow.com/questions/36282971/perl-regex-ungreedy-match-somehow-not-respected/36284609#36284609", "title": "perl regex, ungreedy match somehow not respected?", "body": "<p>To make the problem easier to reproduce, here's a test case with the file contents as a string:</p>\n\n<pre><code>$_ = \"\\xef\\xbb\\xbf#ifndef GAGA\\n#define GAGA\\nasd\\nasd\\n#ifndef NDEBUG\\n\";\ns@(.*\\n)*?#ifndef@//LICENSE#ifndef@;\nprint $_\n</code></pre>\n\n<p>It outputs this:</p>\n\n<pre><code>//LICENSE#ifndef NDEBUG\n</code></pre>\n\n<p>indicating that the regexp matched a large portion of the string: <code>\"\\xef\\xbb\\xbf#ifndef GAGA\\n#define GAGA\\nasd\\nasd\\n#ifndef\"</code></p>\n\n<p>Why that match and not some other? First, note that the regexp can't match just <code>\"\\xef\\xbb\\xbf#ifndef\"</code> because:</p>\n\n<ul>\n<li>If the parenthesized group matches 0 times, there is nothing that can match the <code>\"\\xef\\xbb\\xbf\"</code> part.</li>\n<li>If the parenthesized group matches at least 1 time, the match must include a <code>\"\\n\"</code></li>\n</ul>\n\n<p>Second, the regexp matches this long string starting with the <code>\"\\xef\\xbb\\xbf\"</code> instead of some shorter string starting later in the input because regexps prefer to start the match <strong>as close to the beginning of the input string as possible</strong> and this preference is <strong>stronger than greediness/non-greediness</strong> of any individual quantifier. If a match is found at the beginning of the string, the regexp engine doesn't keep looking. It won't find the other possible match, starting later in the string, that makes the non-greedy quantifier \"happier\".</p>\n\n<p>So overall, the regexp starts with the beginning of the string, tries to match the non-greedy parenthesized group 0 times, finds that it doesn't work, (because the <code>\"\\xef\"</code> isn't a <code>\"#\"</code>), tries to match it 1 time, finds that doesn't work (because the <code>\"#define\"</code> isn't <code>\"#ifndef\"</code>), and so on until it eventually finds that matching it 4 times works, and stops. 4 was the minimum number of repetitions of the non-greedy part that resulted in a match at the beginning of the string.</p>\n\n<p>My preferred strategy for dealing with the curse of the UTF-8 BOM is to strip it off separately before doing anything else.</p>\n\n<pre><code>$_ = \"\\xef\\xbb\\xbf#ifndef GAGA\\n#define GAGA\\nasd\\nasd\\n#ifndef NDEBUG\\n\";\ns/^\\xef\\xbb\\xbf//;\ns@(.*\\n)*?#ifndef@//LICENSE#ifndef@;\nprint $_\n</code></pre>\n\n<p>You could merge those substitutions into a single operation, but I like the simple <code>s/^\\xef\\xbb\\xbf//;</code> because I can drop it in to almost any script - at almost any line! - and it will at worst do nothing, at best fix a bug.</p>\n\n<p>Side note: you should use <code>-0777</code> for whole-file slurping. <code>-0</code> alone changes the separator to <code>\"\\0\"</code> so it wouldn't do what you wanted if the file contained NULs.</p>\n"}], "owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36284609, "answer_count": 1, "score": 1, "last_activity_date": 1459255339, "creation_date": 1459250830, "last_edit_date": 1459251814, "question_id": 36282971, "link": "https://stackoverflow.com/questions/36282971/perl-regex-ungreedy-match-somehow-not-respected", "title": "perl regex, ungreedy match somehow not respected?", "body": "<p>What is the reason why this regex to add a license infront of the code in <code>file.hpp</code>:</p>\n\n<pre><code>perl -i -0pe 's@(.*\\n)*?#ifndef@//LICENSE#ifndef@' file.hpp\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>    # -0: reads the file into ram (changes file spereator)\n    # -p: reads line by line\n    # -e: command execution\n    # -i: modifiy input directly\n</code></pre>\n\n<p>file.hpp (utf-8 with Unicode BOM): </p>\n\n<pre><code>#ifndef GAGA\n#define GAGA\nasd\nasd\n#ifndef NDEBUG\n</code></pre>\n\n<p>results in </p>\n\n<pre><code>LICENSE#ifndef NDEBUG\n</code></pre>\n\n<p>I dont understand why the non-greedy <code>(.*\\n)*?</code> matches  till the line NDEBUG?\nWhy?</p>\n"}, {"tags": ["mysql", "perl", "stored-procedures"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1459263180, "last_edit_date": 1459263180, "creation_date": 1459261772, "answer_id": 36287275, "question_id": 36281627, "link": "https://stackoverflow.com/questions/36281627/facing-issue-while-creating-mysql-stored-procedure-using-perl-script/36287275#36287275", "title": "Facing issue while creating mysql stored procedure using perl script", "body": "<p><code>qq{}</code> interpolates backslash escape sequences; <code>\\\\</code> is an escape sequence that generates a single backslash.</p>\n\n<p>So this:</p>\n\n<pre><code>qq{A=REPLACE(A, '\\\\', ''),}\n</code></pre>\n\n<p>generates the string:</p>\n\n<pre><code>A=REPLACE(A, '\\', ''),\n</code></pre>\n\n<p><a href=\"http://dev.mysql.com/doc/refman/5.7/en/string-literals.html\" rel=\"nofollow\">MySQL also interprets backslash escape sequences</a>, so the second argument to <code>REPLACE</code> is <code>', \u200b</code> (single quote, comma, space). This is obviously not what you want.</p>\n\n<hr>\n\n<p>If you use <code>qq{}</code>, you need to escape all backslashes:</p>\n\n<pre><code>$sqlStmt = qq(\n    CREATE PROCEDURE xyz()\n    BEGIN\n\n    update myTable set\n    A=REPLACE(A, '\\\\\\\\', ''),\n    B=REPLACE(B, '\\\\\\\\\\\\\\\\', ''),\n    C=REPLACE(C, '\\\\\\\\\\\\\\\\', '')\n    where A LIKE '[\"[%';\n\n    commit;\n    END\n);\n</code></pre>\n\n<p>But it would be better to use a <a href=\"http://perldoc.perl.org/perlop.html#%3C%3C_EOF_\" rel=\"nofollow\">here-doc</a>, which does no interpolation:</p>\n\n<pre><code>$sqlStmt = &lt;&lt;'SQL';\n    CREATE PROCEDURE xyz()\n    BEGIN\n\n    update myTable set\n    A=REPLACE(A, '\\\\', ''),\n    B=REPLACE(B, '\\\\\\\\', ''),\n    C=REPLACE(C, '\\\\\\\\', '')\n    where A LIKE '[\"[%';\n\n    commit;\n    END\nSQL\n</code></pre>\n"}], "owner": {"reputation": 1105, "user_id": 646210, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/osWJG.jpg?s=128&g=1", "display_name": "paper.plane", "link": "https://stackoverflow.com/users/646210/paper-plane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36287275, "answer_count": 1, "score": 0, "last_activity_date": 1459263180, "creation_date": 1459247102, "last_edit_date": 1459249705, "question_id": 36281627, "link": "https://stackoverflow.com/questions/36281627/facing-issue-while-creating-mysql-stored-procedure-using-perl-script", "title": "Facing issue while creating mysql stored procedure using perl script", "body": "<pre><code>sub callSP()\n{\n    my $db_handle = new MP::ATCA::SQLExec(\n                                         MYSQL_DB,\n                                         MYSQL_PORT,\n                                         AUTO_COMMIT\n                                        );\n   if (!defined($db_handle))\n   {\n       # Connection/Validation error\n       return 1;\n   }\n\n   my $sqlStmt = qq(DROP PROCEDURE IF EXISTS xyz);\n   my $errStr = $db_handle-&gt;Execute($sqlStmt);\n   if ($errStr ne \"\")\n   {\n     print(\"DROP PROCEDURE failed\\n\");\n     return 0;\n   }\n\n   $sqlStmt = qq(CREATE PROCEDURE xyz()\n    BEGIN\n\n    update myTable set\n    A=REPLACE(A, '\\\\', ''),\n    B=REPLACE(B, '\\\\\\\\', ''),\n    C=REPLACE(C, '\\\\\\\\', '')\n    where A LIKE '[\"[%';\n\n    commit;\nEND);\n   print $sqlStmt . \"\\n\";\n   $errStr = $db_handle-&gt;Execute($sqlStmt);\n   if ($errStr ne \"\")\n   {\n     print(\"CREATE PROCEDURE failed\\n\");\n     return 0;\n   }\n\n   $sqlStmt = \"CALL xyz()\";\n   $errStr = $db_handle-&gt;Execute($sqlStmt);\n   if ($errStr ne \"\")\n   {\n     print(\"EXECUTE PROCEDURE failed\\n\");\n     return 0;\n   }\n}\n</code></pre>\n\n<p>The above function drops stored procedure xyz if exists then creates it and executes the same. The stored procedure has only one update statement. But the procedure creation is failing for me. However the fault seems to be in the line <code>A=REPLACE(A, '\\\\', ''),</code> which is a part of the update statement. If I remove this line then everything works fine. </p>\n\n<p>The intention of the update statement is to remove \\(backslash) and \\\\(double backslashes) from the values of the columns A and B,C respectively.</p>\n\n<p>However if I copy the same definition from the <code>$sqlStmt = qq(procedure_definition);</code> from the above perl function to a text file say xyz.txt and do a <code>mysql &gt; source xyz.txt</code> on my mysql prompt then also it gets created successfully and I am able to execute it. But I need to create the procedure from perl script. Please help.</p>\n"}, {"tags": ["regex", "perl", "date"], "comments": [{"owner": {"reputation": 10272, "user_id": 1996394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bb7cf5d8bf03c5335a0ece8f6673541d?s=128&d=identicon&r=PG", "display_name": "rock321987", "link": "https://stackoverflow.com/users/1996394/rock321987"}, "edited": false, "score": 0, "creation_date": 1459246663, "post_id": 36281447, "comment_id": 60188972, "body": "Show your code that you have attempted"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6011162"}, "edited": false, "score": 0, "creation_date": 1459246817, "post_id": 36281447, "comment_id": 60189082, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8675706/how-can-i-change-the-date-formats-in-perl\">How can I change the date formats in Perl?</a>"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1459247180, "post_id": 36281447, "comment_id": 60189317, "body": "show what code you have tried, then people will be willing to help you"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2452689, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3e025aca39b97ad6a15593255b2bfdf?s=128&d=identicon&r=PG", "display_name": "Bastian", "link": "https://stackoverflow.com/users/2452689/bastian"}, "edited": false, "score": 0, "creation_date": 1459250249, "post_id": 36281988, "comment_id": 60191357, "body": "Thanks for the inputs"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 129, "user_id": 2452689, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3e025aca39b97ad6a15593255b2bfdf?s=128&d=identicon&r=PG", "display_name": "Bastian", "link": "https://stackoverflow.com/users/2452689/bastian"}, "edited": false, "score": 0, "creation_date": 1459250316, "post_id": 36281988, "comment_id": 60191402, "body": "You&#39;re welcome. Please accept my answer if it solved your problem."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1459249951, "last_edit_date": 1459249951, "creation_date": 1459248042, "answer_id": 36281988, "question_id": 36281447, "link": "https://stackoverflow.com/questions/36281447/date-format-conversion-in-perl/36281988#36281988", "title": "Date format conversion in Perl", "body": "<p>You don't really need regex. This will do the trick, but you need to ensure your input format will consistently be <code>d/m/yyyy</code></p>\n\n<pre><code>my ( $d, $m, $y ) = split( '/', '1/2/2015' );\nmy $ymd = sprintf( '%d-%02d-%02d', $y, $m, $d );\nprint $ymd; # OUTPUT: 2015-02-01\n</code></pre>\n\n<p>If you want to do it in one line (and make your code less readable at the same time) you could do this.... though I generally would not recommend it.</p>\n\n<pre><code>print join( '-', reverse map { sprintf( '%02d', $_ ) } split( '/', '1/2/2015' ) );\n</code></pre>\n\n<p>You could compact this line by removing all rounded brackets <code>()</code> and most spaces, but that would further impact the readability of this expression.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1459268886, "creation_date": 1459268886, "answer_id": 36289938, "question_id": 36281447, "link": "https://stackoverflow.com/questions/36281447/date-format-conversion-in-perl/36289938#36289938", "title": "Date format conversion in Perl", "body": "<p>A better approach would be to use a module that's designed for date parsing and formatting, e.g., <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> or <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow\">DateTime</a>. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\n\nmy $str = '1/2/2015';\nmy $tp  = Time::Piece-&gt;strptime($str, '%m/%d/%Y');\n\nsay $tp-&gt;strftime('%Y-%m-%d');\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2015-01-02\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 2452689, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3e025aca39b97ad6a15593255b2bfdf?s=128&d=identicon&r=PG", "display_name": "Bastian", "link": "https://stackoverflow.com/users/2452689/bastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 36289938, "answer_count": 2, "score": -2, "last_activity_date": 1459268886, "creation_date": 1459246620, "last_edit_date": 1459247608, "question_id": 36281447, "link": "https://stackoverflow.com/questions/36281447/date-format-conversion-in-perl", "title": "Date format conversion in Perl", "body": "<p>Am new to Perl, I need a help to achieve below requirement with date format conversion.</p>\n\n<p>Input date value --> 1/2/2015 (ie d/m/yyyy)</p>\n\n<p>Output date value --> 2015-02-01  (ie yyyy-mm-dd)</p>\n\n<p>What i tried so far is ,\nFirst extract data , month and year values and do the proper formatting like pad zero(0) if date or month value is a single digit</p>\n\n<pre><code>$time = join '-', sprintf('%02d', substr ('1/2/2015'.'0'x2,0,4)) =~ /../g;\nprintf $time;\n</code></pre>\n\n<p>and concatenate these values with <code>-</code> to get the output. Is there any better approach to achieve this?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["oracle", "perl"], "comments": [{"owner": {"reputation": 19654, "user_id": 92837, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1375f202e61682cc4963295f4b0430dc?s=128&d=identicon&r=PG", "display_name": "Sathyajith Bhat", "link": "https://stackoverflow.com/users/92837/sathyajith-bhat"}, "edited": false, "score": 0, "creation_date": 1459247531, "post_id": 36281271, "comment_id": 60189530, "body": "Seems like mzdb works only on MySQL or PostgreSQL. You&#39;re out of luck on Oracle"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5614637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-fOsv9MwpAO0/AAAAAAAAAAI/AAAAAAAAB-U/tdPMUmMdtFY/photo.jpg?sz=128", "display_name": "SunSun", "link": "https://stackoverflow.com/users/5614637/sunsun"}, "edited": false, "score": 0, "creation_date": 1459292916, "post_id": 36284176, "comment_id": 60218295, "body": "Thank you. So if I install MySQL, I can import the database and use it?"}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "reply_to_user": {"reputation": 129, "user_id": 5614637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-fOsv9MwpAO0/AAAAAAAAAAI/AAAAAAAAB-U/tdPMUmMdtFY/photo.jpg?sz=128", "display_name": "SunSun", "link": "https://stackoverflow.com/users/5614637/sunsun"}, "edited": false, "score": 0, "creation_date": 1459343151, "post_id": 36284176, "comment_id": 60242739, "body": "I&#39;m not experienced in SQL, but that should work. You may have to configure something in the file, but it should give you a descriptive error message to post back here. And by the way, you did install Perl. That was step 1."}], "tags": [], "owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "is_accepted": true, "score": 1, "last_activity_date": 1459254184, "creation_date": 1459254184, "answer_id": 36284176, "question_id": 36281271, "link": "https://stackoverflow.com/questions/36281271/how-to-configure-this-pl-file/36284176#36284176", "title": "How to configure this .pl file", "body": "<p>I've never used MBZDB before, but I looked through the settings.pl and I don't believe for a standard install you should need to change anything. You should be able to move on to step 6.</p>\n\n<p>Edit: I was incorrect: I failed to notice you are using an Oracle database. As a commenter posted, it looks like it will work best with MySQL. If you install that, though, you should be good to go.</p>\n"}], "owner": {"reputation": 129, "user_id": 5614637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-fOsv9MwpAO0/AAAAAAAAAAI/AAAAAAAAB-U/tdPMUmMdtFY/photo.jpg?sz=128", "display_name": "SunSun", "link": "https://stackoverflow.com/users/5614637/sunsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 36284176, "answer_count": 1, "score": 0, "last_activity_date": 1459254184, "creation_date": 1459246103, "question_id": 36281271, "link": "https://stackoverflow.com/questions/36281271/how-to-configure-this-pl-file", "title": "How to configure this .pl file", "body": "<p>I'm trying to import or install <a href=\"https://github.com/elliotchance/mbzdb\" rel=\"nofollow\">MusicBrainz' database</a> and I'm following <a href=\"https://github.com/elliotchance/mbzdb/wiki/Installation\" rel=\"nofollow\">this</a> instruction.</p>\n\n<p>My OS is Windows so I'm following Windows instruction. I've done up to number 4, but when I opened to configure settings.pl file(<a href=\"https://github.com/elliotchance/mbzdb/blob/master/settings.pl\" rel=\"nofollow\">link</a>) I couldn't understand what that file wants me to configure. </p>\n\n<p>I think the lines looking like this</p>\n\n<pre><code>$g_schema_url   = \"$schema_base/admin/sql/CreateTables.sql\";\n</code></pre>\n\n<p>is the part I need to change for the file to work, but I don't think I understand these lines. </p>\n\n<p>I googled and found out that .pl files are the files written in a language called Perl. But I didn't download or install the language because the instruction didn't require me to. Should I? I really am a beginner so even I sound stupid I hope you can understand.</p>\n\n<p>I'm working on Oracle 11. </p>\n"}, {"tags": ["perl", "rabbitmq"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459264059, "post_id": 36280609, "comment_id": 60201901, "body": "Check the RabbitMQ server&#39;s logs. I bet your connection is dropping due to a missed heartbeat."}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 6104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbGf0.png?s=128&g=1", "display_name": "Marco Munari", "link": "https://stackoverflow.com/users/6104068/marco-munari"}, "is_accepted": false, "score": 0, "last_activity_date": 1459250709, "creation_date": 1459250709, "answer_id": 36282933, "question_id": 36280609, "link": "https://stackoverflow.com/questions/36280609/rabbitfoot-rejects-a-message-when-not-acked-in-3-minutes/36282933#36282933", "title": "RabbitFoot rejects a message when not acked in 3 minutes", "body": "<p>Three minutes are a long time, a part that you don't seem to have any condition implying the ack (so you might switch the last two statements according also to the documentation of the protocol you are using:\n<a href=\"https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf\" rel=\"nofollow\">https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf</a> (same for 0.8.0):</p>\n\n<pre><code>The client layers can themselves implement explicit acknowledgements in\ndifferent ways, e.g. as soon as a message is received,\nor when the application indicates that it has processed it.\nThese differences do not affect AMQP or interoperability.\n...\nFlow control\n... message acknowledgements ... usually means using transactions.\n</code></pre>\n\n<p>) or you might preprocess the operability of the message in a stage before acting on it for three minutes and ack it if you operability test suceeds</p>\n\n<p>on the other end this 3 minute timeout shouldn't happen, tcp established is recommended 2 hours</p>\n"}], "owner": {"reputation": 2005, "user_id": 328977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3610fa6c9f38e6f252d19e918632b8ba?s=128&d=identicon&r=PG", "display_name": "buff", "link": "https://stackoverflow.com/users/328977/buff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459250709, "creation_date": 1459244441, "question_id": 36280609, "link": "https://stackoverflow.com/questions/36280609/rabbitfoot-rejects-a-message-when-not-acked-in-3-minutes", "title": "RabbitFoot rejects a message when not acked in 3 minutes", "body": "<p>I am using <code>Net::RabbitFoot</code> library to read a message from a RabbitMQ queue. Processing the message takes some time and I want to <code>ack</code> the message <strong>after</strong> the processing is successful. My code is the following:</p>\n\n<pre><code>my $rf = Net::RabbitFoot-&gt;new()-&gt;load_xml_spec()-&gt;connect(%opts);\nmy $ch = $rf-&gt;open_channel();\n\nmy $msg = $ch-&gt;get(queue =&gt; 'my_queue', no_ack =&gt; 0);\nfrobnicate($msg); # this takes more than 3 minutes\n$ch-&gt;ack(); # this has no effect, $msg is already back in queue.\n</code></pre>\n\n<p>After around 3 minutes, the (yet) un-acked message is returned back to the queue and the <code>ack</code> call has then no effect.</p>\n\n<p>I don't set <code>timeout</code> or <code>tune</code> options while connecting.</p>\n\n<p>Is there any way how to change the behavior so that my message is never returned back to queue unless I explicitly <code>reject</code> it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1459237559, "post_id": 36278219, "comment_id": 60183036, "body": "Maybe remove the <code>tail -n +5 | head -n -1</code> part to actually process the rest of your file..."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1459237712, "post_id": 36278219, "comment_id": 60183121, "body": "your code metnions &quot;BayName&quot; but theoutput of your cat is &quot;Bay Name&quot; so you never actually set the bay variable since you never match it. you should use data dumper to check your variables"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "edited": false, "score": 0, "creation_date": 1459239142, "post_id": 36278688, "comment_id": 60183924, "body": "Thank. I want change elseif include &quot;All&quot; content and &quot;Number&quot;. How can make?"}, {"owner": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "edited": false, "score": 0, "creation_date": 1459239197, "post_id": 36278688, "comment_id": 60183962, "body": "<code>elsif (&#47;(Number)\\s+:\\s+(\\d+)&#47;){         print &quot;$bay_name $1 : $2\\n&quot;;     } elsif (&#47;(All)\\s+:\\s+(\\S+)&#47;) {         print &quot;$bay_name $1 : $2\\n&quot;;     }</code>"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "reply_to_user": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "edited": false, "score": 0, "creation_date": 1459239503, "post_id": 36278688, "comment_id": 60184163, "body": "you would need to use <code>elsif (&#47;(Number.*)\\s+:\\s+(\\d+)&#47;){</code> and <code>elsif (&#47;(All.*)\\s+:\\s+(\\S+)&#47;) {</code> that will match lines which contain All and Number. However, i am not sure why you would want to do that, unless your file contains other lines you have not shown that you are also trying to capture."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "reply_to_user": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "edited": false, "score": 0, "creation_date": 1459243388, "post_id": 36278688, "comment_id": 60186669, "body": "Sorry i didnt understand what you are asking."}, {"owner": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "edited": false, "score": 0, "creation_date": 1459314117, "post_id": 36278688, "comment_id": 60224375, "body": "I change quistion. for your understanding"}], "tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": true, "score": 1, "last_activity_date": 1459238647, "creation_date": 1459238647, "answer_id": 36278688, "question_id": 36278219, "link": "https://stackoverflow.com/questions/36278219/how-can-make-script-run/36278688#36278688", "title": "How can make script run?", "body": "<p>without using all the shell pipes and functions you could achieve this with a little bit of perl on its own.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $bay_name;\nwhile (&lt;DATA&gt;) {\n    chomp();\n    if (/^\\s+Bay Name\\s+:\\s+(\\S+)$/){\n        $bay_name = $1;\n    } elsif (/(Number of Standby Power Supplies)\\s+:\\s+(\\d+)/){\n        print \"$bay_name $1 : $2\\n\";\n    } elsif (/(All Standby Power Supplies|All Enclosures)\\s+:\\s+(\\S+)/) {\n        print \"$bay_name $1 : $2\\n\";\n    }\n}\n\n\n__DATA__\nSystem Bay\n\n  Bay Name                             :    SB-1\n  Number of Standby Power Supplies     :    4\n\n  Summary Status of Contained Modules\n    All Standby Power Supplies         :    Normal\n\nDrive Bays\n\n  Bay Name                             :    DB-1A\n  Number of Standby Power Supplies     :    8\n\n  Summary Status of Contained Modules\n    All Enclosures                     :    Normal\n</code></pre>\n\n<p>This produces the following output based on your example data</p>\n\n<pre><code>SB-1 Number of Standby Power Supplies : 4\nSB-1 All Standby Power Supplies : Normal\nDB-1A Number of Standby Power Supplies : 8\nDB-1A All Enclosures : Normal\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9272, "user_id": 241544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d27ca4e9a9a41ec8732046e6a272f091?s=128&d=identicon&r=PG", "display_name": "Matthew Walton", "link": "https://stackoverflow.com/users/241544/matthew-walton"}, "is_accepted": false, "score": 1, "last_activity_date": 1459238783, "creation_date": 1459238783, "answer_id": 36278721, "question_id": 36278219, "link": "https://stackoverflow.com/questions/36278219/how-can-make-script-run/36278721#36278721", "title": "How can make script run?", "body": "<p>The actual question you asked is fixed by adding</p>\n\n<pre><code>my $bay_name;\n</code></pre>\n\n<p>inside your <code>for</code> loop. You've got <code>use strict</code> turned on, which is good practice and requires declaration of variables, but no declaration of <code>$bay_name</code>, which is what the error message refers to.</p>\n\n<p>However, others have pointed out that calling a pipeline from Perl is entirely unnecessary and you can improve the code in various other ways.</p>\n"}], "owner": {"reputation": 9, "user_id": 5271639, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3185bb01c38634347786b6f638f66125?s=128&d=identicon&r=PG&f=1", "display_name": "ZXC", "link": "https://stackoverflow.com/users/5271639/zxc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 36278688, "answer_count": 2, "score": -1, "last_activity_date": 1459314063, "creation_date": 1459237068, "last_edit_date": 1459314063, "question_id": 36278219, "link": "https://stackoverflow.com/questions/36278219/how-can-make-script-run", "title": "How can make script run?", "body": "<p>I make below script But script running result has error\n\"Use of uninitialized value $bay_name in concatenation (.) or string at test.pl line 92.\"</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse JSON;\nuse Getopt::Long;\nuse POSIX qw/strftime/;\n\n\n## perl time variable\nmy $dt = strftime('%Y%m%d%H%M%S',localtime);\n\n\n## Variable reset\nmy ($key, $value, $bay_name, $dot) = '';\n$dot = ' ';\n\nfor (`cat test | awk 'NF' | awk /:/ | sed -e 's/  \\+/ /g' -e 's/ : /:/g' | egrep \"All|Bay|Number\"`)\n    {\n        ($key, $value) = m/(.*?):(.*?)$/g\n            or next;\n\n        if ($key eq 'BayName') {\n            $bay_name = $value;\n        }\n        else {\n            $key = $bay_name . $dot . $key;\n        }\n\n        if ($key eq 'BayName') {\n            undef $key;\n        }\n        else {\n        print \"\\t,\\n\";\n        print \"\\t{\\n\";\n        print \"\\t\\t\\\"{#HWNAMES}\\\":\\\"$key\\\",\\n\";\n        print \"\\t\\t\\\"{#HWSTATUS}\\\":\\\"$value\\\"\\n\";\n        print \"\\t}\\n\";\n    }\n    }\n</code></pre>\n\n<p>I want Fix it</p>\n\n<p>test file has below content</p>\n\n<pre><code>System Bay\n\n  Bay Name                             :    SB-1\n  Number of Standby Power Supplies     :    4\n  Number of Drive Enclosures           :    0\n  Number of Enclosure Slots            :    2\n  Number of MIBE Enclosures            :    2\n\n  Summary Status of Contained Modules\n    All Standby Power Supplies         :    Normal\n    All Enclosures                     :    Normal\n    All Link Control Cards             :    Normal\n    All Power Supplies                 :    Normal\n    All Enclosure Slots                :    Normal\n    All Power Supplies                 :    Normal\n    All Fans                           :    Normal\n    All Management Modules             :    Normal\n    All IO Module Carriers             :    Normal\n    All Directors                      :    Normal\n    All MIBE Enclosures                :    Normal\n    All Power Supplies                 :    Normal\n\nDrive Bays\n\n  Bay Name                             :    DB-1A\n  Number of Standby Power Supplies     :    8\n  Number of Drive Enclosures           :    16\n\n  Summary Status of Contained Modules\n    All Enclosures                     :    Normal\n    All Link Control Cards             :    Normal\n    All Power Supplies                 :    Normal\n    All Standby Power Supplies         :    Normal\n</code></pre>\n\n<p>I want below result\nBay Name row is delete in out put\nall content change blow format</p>\n\n<pre><code>    {\n            \"{#HWNAMES}\":\"SB-1 All Standby Power Supplies\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Enclosures\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Link Control Cards\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Power Supplies\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Enclosure Slots\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Power Supplies\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Fans\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Management Modules\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All IO Module Carriers\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Directors\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All MIBE Enclosures\",\n            \"{#HWSTATUS}\":\"Normal\"\n    },\n    {\n            \"{#HWNAMES}\":\"SB-1 All Power Supplies\",\n            \"{#HWSTATUS}\":\"Normal\"\n    }\n</code></pre>\n\n<p>Below is my script</p>\n\n<pre><code>for (`/opt/emc/SYMCLI/bin/symcfg -sid $sid list -env_data`) {\n\n        if (/^\\s+Bay Name\\s+:\\s+(\\S+)$/){\n                $bay_name = $1;\n\n        } elsif (/(Number.*)\\s+:\\s+(\\d+)/){\n                print \"\\t{\\n\";\n                print \"\\t\\t\\\"{#HWNAMEC}\\\":\\\"$bay_name $1\\\",\\n\";\n                print \"\\t\\t\\\"{#HWCOUNT}\\\":\\\"$2\\\"\\n\";\n                print \"\\t},\\n\";\n\n\n        } elsif (/(All.*)\\s+:\\s+(\\S+)/) {\n                print \"\\t{\\n\";\n                print \"\\t\\t\\\"{#HWNAMES}\\\":\\\"$bay_name $1\\\",\\n\";\n                print \"\\t\\t\\\"{#HWSTATUS}\\\":\\\"$2\\\"\\n\";\n                print \"\\t},\\n\";\n        }\n}\n</code></pre>\n"}, {"tags": ["perl", "scripting", "grep"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1459235765, "post_id": 36277577, "comment_id": 60181943, "body": "In your approach, you would have to store the result of your grep command in a Perl variable. This means that you can&#39;t use <code>system(&quot;grep...&quot;)</code>, but something like <code>qx(grep....)</code>.  But why do you create a childprocess only for grepping the line? You could easily do this entirely within Perl."}, {"owner": {"reputation": 871, "user_id": 5932866, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-8dC2pqt9Y_c/AAAAAAAAAAI/AAAAAAAAADE/285MpDe1lWA/photo.jpg?sz=128", "display_name": "Suraj Bhatia", "link": "https://stackoverflow.com/users/5932866/suraj-bhatia"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1459236120, "post_id": 36277577, "comment_id": 60182190, "body": "I am not aware of the qx syntax. How do I save the output of grep command into a variable?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1459236528, "post_id": 36277577, "comment_id": 60182410, "body": "<code>my $output = qx(...)</code>. See the <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">perlop</a> manpage."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1459263733, "post_id": 36277577, "comment_id": 60201668, "body": "I&#39;ve fixed the formatting for your csv file sample. Edit it yourself if I got it wrong."}], "answers": [{"tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1459237160, "creation_date": 1459237160, "answer_id": 36278254, "question_id": 36277577, "link": "https://stackoverflow.com/questions/36277577/use-grep-command-to-find-a-word-and-then-print-the-entire-column-in-perl-script/36278254#36278254", "title": "Use grep command to find a word and then print the entire column in perl script", "body": "<p>You are writing a Perl script, there is no need to spawn a child process out to the shell to then call some other shell function. Perl has grep built in. Below as an example to demonstrate how you can achieve the same result entirely in Perl. I have also included comments to explain the script.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n#set the column name, this could be changed to accept input from user, \n#also read from the data file handle, this could also be changed to read from any other file\nmy $column = \"ELECTRICIANS\";\nmy @headers = split(',',&lt;DATA&gt;);\n\n#Check for the column name rom the headers just read from the file handle, if not found then exit\nunless (grep {$_ eq \"$column\"} @headers){\n    print \"Column name $column not found, try again!\\n\";\n    exit 1;\n}\n\nprint $column, \"\\n\";\n\n#if we got to hear then the CSV file must have the column we are insterested in so start looping though the lines\n#split each line into fields then for each lin make a hash using the headers and the fields. then we can print the column\n#we are interested in\nwhile(&lt;DATA&gt;){\n    chomp();\n    my @fields = split(',');\n    my %data;\n    @data{@headers}=@fields;\n    print $data{$column}, \"\\n\";\n}\n\n__DATA__\nWEEK,SITE ENGINEERS,SITE ENGINEERS 2,ELECTRICIANS,ELECTRICIANS 2 \nONE,13,28,17,29 \nTWO,13,30,18,27 \nTHREE,13,30,14,23 \nFOUR,15,30,12,29 \nFIVE,15,22,16,24 \nSIX,16,30,20,30 \nSEVEN,12,27,13,29 \nEIGHT,19,22,16,29 \nNINE,19,21,19,30 \nTEN,12,22,14,30,13\n</code></pre>\n\n<p>This produces the output </p>\n\n<pre><code>ELECTRICIANS\n17\n18\n14\n12\n16\n20\n13\n16\n19\n14\n</code></pre>\n\n<p>As each line is read and put into a hash, you could also print other columns as you know the columns name for each field.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1459237682, "creation_date": 1459237682, "answer_id": 36278423, "question_id": 36277577, "link": "https://stackoverflow.com/questions/36277577/use-grep-command-to-find-a-word-and-then-print-the-entire-column-in-perl-script/36278423#36278423", "title": "Use grep command to find a word and then print the entire column in perl script", "body": "<p>The last line of your sample data seems to have an extra column.</p>\n\n<p>But this does what you want.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\n# read header\nmy @cols = split /,/, &lt;DATA&gt;;\n\n# Process the rest of the data\nwhile (&lt;DATA&gt;) {\n  my %data;\n  @data{@cols} = split /,/;\n  say $data{ELECTRICIANS};\n}\n\n__DATA__\nWEEK,SITE ENGINEERS,SITE ENGINEERS 2,ELECTRICIANS,ELECTRICIANS 2\nONE,13,28,17,29\nTWO,13,30,18,27\nTHREE,13,30,14,23\nFOUR,15,30,12,29\nFIVE,15,22,16,24\nSIX,16,30,20,30\nSEVEN,12,27,13,29\nEIGHT,19,22,16,29\nNINE,19,21,19,30\nTEN,12,22,14,30,13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1459264188, "creation_date": 1459264188, "answer_id": 36288192, "question_id": 36277577, "link": "https://stackoverflow.com/questions/36277577/use-grep-command-to-find-a-word-and-then-print-the-entire-column-in-perl-script/36288192#36288192", "title": "Use grep command to find a word and then print the entire column in perl script", "body": "<p>I often get criticized for my one-liners, but here's one:</p>\n\n<pre><code>perl -F, -slane '\n    if ($. == 1) {\n        for ($i=0; $i&lt;@F; $i++) {\n            if ($F[$i] eq $colname) {\n                $colno = $i;\n                last;\n            }\n        }\n        die \"cannot find $colname column\" unless defined $colno;\n    }\n    print $F[$colno]\n' -- -colname=ELECTRICIANS file.csv\n</code></pre>\n"}], "owner": {"reputation": 871, "user_id": 5932866, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-8dC2pqt9Y_c/AAAAAAAAAAI/AAAAAAAAADE/285MpDe1lWA/photo.jpg?sz=128", "display_name": "Suraj Bhatia", "link": "https://stackoverflow.com/users/5932866/suraj-bhatia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459264188, "creation_date": 1459235073, "last_edit_date": 1459263803, "question_id": 36277577, "link": "https://stackoverflow.com/questions/36277577/use-grep-command-to-find-a-word-and-then-print-the-entire-column-in-perl-script", "title": "Use grep command to find a word and then print the entire column in perl script", "body": "<p>I have a .csv file in which I want to look for a specific word 'ELECTRICIANS' which is the first entry in the column. I want to print the entire column with the name ELECTRICIANS and if I grep any other word, should print an error.</p>\n\n<p>I have performed grep operation as follows:</p>\n\n<pre><code>my $exit = system(\"grep -q $column_name $file_name\");\nif ($exit == 0)\n{\n        print \"Entered column name $column_name found in file $file_name\\n\";\n}\nelse {\n        print \"Column name not found, try again!\\n\";\n        exit;\n}\n</code></pre>\n\n<p>Now how do I print the column inside the file under 'ELECTRICIANS'?</p>\n\n<p>Content of the .csv file is as follows:</p>\n\n<pre><code>WEEK,SITE ENGINEERS,SITE ENGINEERS 2,ELECTRICIANS,ELECTRICIANS 2\nONE,13,28,17,29   \nTWO,13,30,18,27 \nTHREE,13,30,14,23  \nFOUR,15,30,12,29 \nFIVE,15,22,16,24  \nSIX,16,30,20,30 \nSEVEN,12,27,13,29  \nEIGHT,19,22,16,29 \nNINE,19,21,19,30  \nTEN,12,22,14,30,13\n</code></pre>\n"}, {"tags": ["perl", "csv", "data-dumper"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459185737, "post_id": 36267225, "comment_id": 60162022, "body": "Could you show the 4-record input sample and how you&#39;d like to have it formatted on output? Perhaps we have other ideas on how to achieve that..."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1459185809, "post_id": 36267225, "comment_id": 60162061, "body": "You should use a proper CSV module (i.e., <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>) to handle composition and decomposition of CSV data. There are plenty of examples on the page I linked that will show you exactly what you need to do."}, {"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459186621, "post_id": 36267225, "comment_id": 60162552, "body": "@PerlDog - added the four lines above."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1459196191, "post_id": 36267225, "comment_id": 60167826, "body": "@MattJacob: There is nothing wrong with <code>split &#47;,&#47;</code> if there are no quoted fields"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459196220, "post_id": 36267225, "comment_id": 60167842, "body": "@BigRedEO: and how you&#39;d like to have it formatted on output?"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1459188672, "post_id": 36267346, "comment_id": 60163712, "body": "Overwhelmed at all the great answers at once!  I do have to see if Text::CSV_XS is available on our server or not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "edited": false, "score": 0, "creation_date": 1459191404, "post_id": 36267346, "comment_id": 60165317, "body": "If it&#39;s not, just install it. It&#39;s not like special permissions are needed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1459186981, "last_edit_date": 1459186981, "creation_date": 1459185755, "answer_id": 36267346, "question_id": 36267225, "link": "https://stackoverflow.com/questions/36267225/perl-use-datadumper-to-write-back-to-a-file/36267346#36267346", "title": "Perl - Use Data::Dumper to write back to a file", "body": "<p>You don't have to rebuild the line if you just store it in <code>@data</code> too!</p>\n\n<pre><code>my @data;\nwhile(my $line = &lt;$FH&gt;) {\n    chomp($line);\n    my @fields = split(/,/, $line);\n    push @data, [ \"$line\\n\", join('_', @fields[0..2]), @fields[19, 22, 25] ];\n}\n\n@data = sort {\n    $a-&gt;[1] cmp $b-&gt;[1] ||\n    $a-&gt;[2] cmp $b-&gt;[2] ||\n    $a-&gt;[3] cmp $b-&gt;[3] ||\n    $a-&gt;[4] cmp $b-&gt;[4]\n} @data;\n\nprint($OFH $_-&gt;[0]) for @data;\n</code></pre>\n\n<p>If your input didn't contain NULs, you could even use the following faster approach:</p>\n\n<pre><code>print $OFH\n   map { /[^\\0]*\\z/g }\n   sort\n   map {\n      chomp;\n      my @fields = split /,/;\n      join(\"\\0\", join('_', @fields[0..2]), @fields[19, 22, 25], \"$_\\n\")\n   }\n   &lt;$FH&gt;;\n</code></pre>\n\n<hr>\n\n<p>But yeah, you should probably use a legit CSV parser.</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 1 });\n\nmy @data;\nwhile (my $row = $csv-&gt;getline($FH)) {\n    push @data, [ join('_', @$row[0..2]), $row ];\n}\n\n@data = sort {\n    $a-&gt;[0]     cmp $b-&gt;[0]     ||\n    $a-&gt;[1][19] cmp $b-&gt;[1][19] ||\n    $a-&gt;[1][22] cmp $b-&gt;[1][22] ||\n    $a-&gt;[1][25] cmp $b-&gt;[1][25]\n} @data;\n\n$csv-&gt;say($OFH, $_-&gt;[1]) for @data;\n</code></pre>\n\n<p>The following is the fast approach using a CSV parser:</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nprint $OFH\n   map { /[^\\0]*\\z/g }\n   sort\n   map {\n      $csv-&gt;parse($_);\n      my @fields = $csv-&gt;fields();\n      join(\"\\0\", join('_', @fields[0..2]), @fields[19, 22, 25], $_)\n   }\n   &lt;$FH&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "is_accepted": false, "score": 3, "last_activity_date": 1459187389, "last_edit_date": 1459187389, "creation_date": 1459186174, "answer_id": 36267467, "question_id": 36267225, "link": "https://stackoverflow.com/questions/36267225/perl-use-datadumper-to-write-back-to-a-file/36267467#36267467", "title": "Perl - Use Data::Dumper to write back to a file", "body": "<p><code>Data::Dumper</code> outputs a format that is valid perl, and is good for debugging, but not for writing a CSV file.\nYou could write the CSV by hand:</p>\n\n<pre><code>foreach my $row (@data) {\n    print $OFG join(',', @$row), \"\\n\";\n}\n</code></pre>\n\n<p>but you really should use a specialized module, in this case <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\">Text::CSV</a>, both for reading and writing the CSV \u2013 it will handle all the border cases (such as fields with embedded commas).</p>\n\n<p>The synopsis contains a good example of both reading and writing; I won't repeat that here.</p>\n"}, {"comments": [{"owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "edited": false, "score": 0, "creation_date": 1459198733, "post_id": 36268883, "comment_id": 60169164, "body": "Not using a (proven) module and writing your own (potentially buggy) code just because it isn&#39;t installed on your server, is not the way to do perl development.  Find some way to get it installed on your server."}], "tags": [], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1459190738, "creation_date": 1459190738, "answer_id": 36268883, "question_id": 36267225, "link": "https://stackoverflow.com/questions/36267225/perl-use-datadumper-to-write-back-to-a-file/36268883#36268883", "title": "Perl - Use Data::Dumper to write back to a file", "body": "<p>Was unable to use the Text::CVS_XS because it was not available on our server, unfortunately - but did find adding this single \"print\" line worked - </p>\n\n<pre><code>open my $OFH, '&gt;', '/swpkg/shared/batch_processing/mistints/parsedTest.csv'; \nprint $OFH join(',', @$_), $/ for @data; \nclose $OFH; \n</code></pre>\n\n<p>Tested out fine with the small file, now to test on the actual file!</p>\n"}], "owner": {"reputation": 637, "user_id": 1921826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/590a37833c2b2844cdecf0a96a3cc740?s=128&d=identicon&r=PG", "display_name": "BigRedEO", "link": "https://stackoverflow.com/users/1921826/bigredeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1459190738, "creation_date": 1459185296, "last_edit_date": 1459186594, "question_id": 36267225, "link": "https://stackoverflow.com/questions/36267225/perl-use-datadumper-to-write-back-to-a-file", "title": "Perl - Use Data::Dumper to write back to a file", "body": "<p>I have a large .csv file (2 - 3 million records).  I need to concatenate the first three fields (with underscores) and append it to each record, then I need to sort file based on that new field and three other fields.  I am able to do that (am testing it with a 4 record file for now) - but I'm not sure how to write it back to the file in the same .csv form - instead of the way Data::Dumper formats each line as a separate variable.  Here is the code I have so far - I have a couple of Print (to screen) lines to see what it's doing -</p>\n\n<pre><code>#!/usr/bin/perl/\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $filename = '/testpath/test.csv';\n#$filename = 'test.csv';\n\nopen my $FH, $filename\n  or die \"Could not read from $filename &lt;$!&gt;, program halting.\";\n\n# Read the header line.\nchomp(my $line = &lt;$FH&gt;);\nmy @fields = split(/,/, $line);\n#print \"Field Names:\\n\", Dumper(@fields), $/;\nprint Dumper(@fields), $/;\n\nmy @data;\n# Read the lines one by one.\nwhile($line = &lt;$FH&gt;) {\n\n# split the fields, concatenate the first three fields,\n# and add it to the beginning of each line in the file\n    chomp($line);\n    my @fields = split(/,/, $line);\n    unshift @fields, join '_', @fields[0..2];\n    push @data, \\@fields;\n}\nclose $FH;\nprint \"Unsorted:\\n\", Dumper(@data); #, $/;\n\n@data = sort {\n    $a-&gt;[0] cmp $b-&gt;[0] ||\n    $a-&gt;[20] cmp $b-&gt;[20] ||\n    $a-&gt;[23] cmp $b-&gt;[23] ||\n    $a-&gt;[26] cmp $b-&gt; [26]\n} @data;\n\n\nopen my $OFH, '&gt;', '/testpath/parsedTest.csv';\nprint $OFH Dumper(@data);\nclose $OFH;\n\nexit;\n</code></pre>\n\n<p>I'm assuming it's in the \"print $OFH Dumper(@data);\" line that I need to re-format it back to its original form.</p>\n\n<p>And please be kind as I am a novice.</p>\n\n<p>__________EDIT__________________________________</p>\n\n<p>Here are the four lines from the test .csv file - first line is the header record:</p>\n\n<pre><code>STORE_NBR,CONTROL_NBR,LINE_NBR,SALES_NBR,QTY_MISTINT,REASON_CODE,MISTINT_COMM,SZ_CDE,TINTER_MODEL,TINTER_SERL_NBR,SPECTRO_MODEL,SPECTRO_SERL_NBR,EMP_NBR,TRAN_DATE,TRAN_TIME,CDS_ADL_FLD,PROD_NBR,PALETTE,COLOR_ID,INIT_TRAN_DATE,GALLONS_MISTINTED,UPDATE_EMP_NBR,UPDATE_TRAN_DATE,GALLONS,FORM_SOURCE,UPDATE_TRAN_TIME,SOURCE_IND,CANCEL_DATE,COLOR_TYPE,CANCEL_EMP_NBR,NEED_EXTRACTED,MISTINT_MQ_XTR,DATA_SOURCE,GUID,QUEUE_NAME,BROKER_NAME,MESSAGE_ID,PUT_TIME,CREATED_TS\n1334,53927,1,100551589,1,6,Bad Shercolor Match,16,IFC 8112NP,01DX8005513,,,77,10/23/2015,95816,,OV0020001,,MANUAL,10/21/2015,1,0,,1,MAN,,CUST,,CUSTOM MATCH,0,TRUE,TRUE,O,5394A0E67FFF4D01A0D9AD16FA29ABB1,POS.MISTINT.V0000.UP.Q,PROD_SMISC_BK,414D512050524F445F504F533133333464EB2956052C0020,10/23/2015 10:45,10/23/2015 10:45\n2525,67087,1,650462328,1,4,Tinted Wrong Product,14,IFC 8012NP,Standalone-5,,,11,10/23/2015,104314,,A91W00353,,,10/20/2015,0.25,0,,0.25,,,COMP,,CUSTOM MATCH,0,TRUE,TRUE,O,1AC5D8742D47435EA05343D57372AD32,POS.MISTINT.V0000.UP.Q,PROD_SMISC_BK,414D512050524F445F504F533235323531C2295605350020,10/23/2015 10:46,10/23/2015 10:47\n1350,163689,1,650462302,1,3,Tinted Wrong Color,14,IFC 8012NP,06DX8006805,,,1,10/23/2015,104907,,A91W00351,COLOR,6233,10/23/2015,0.25,0,,0.5,ENG,,SW,,PALETTE,0,TRUE,TRUE,O,F1A072BCC548412FA22052698B5B0C28,POS.MISTINT.V0000.UP.Q,PROD_SMISC_BK,414D512050524F445F504F53313335307BC12956053C0020,10/23/2015 10:52,10/23/2015 10:52\n</code></pre>\n\n<p>Hope that's not too convoluted to read.</p>\n"}, {"tags": ["regex", "perl", "ack"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1459184733, "post_id": 36267039, "comment_id": 60161494, "body": "yes ;) this is possible with the <code>grep</code> too. isn&#39;t possible in one ack run? - e.g. perl-regexes doesn&#39;t knows something as <code>AND</code>?"}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 1, "creation_date": 1459202045, "post_id": 36267039, "comment_id": 60170715, "body": "@cajwine: Regular expressions do patterns, not logic. To be a bit pedantic: inside a regex the <code>|</code> means &quot;alternation,&quot; not &quot;or.&quot; There&#39;s no meta-character for an &quot;and&quot; because that&#39;s the implicit default. e.g. the pattern <code>ab</code> requires matching the character &quot;a&quot; and the character &quot;b&quot; (in that order, and adjacent to each other). Matching multiple patterns requires either multiple matches (as in amphetamachine&#39;s answer) or merging the patterns into a single one (as in ikegami&#39;s answer)."}], "tags": [], "owner": {"reputation": 23042, "user_id": 237955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/402503866b52d010376cad6756dd8c46?s=128&d=identicon&r=PG", "display_name": "amphetamachine", "link": "https://stackoverflow.com/users/237955/amphetamachine"}, "is_accepted": false, "score": 3, "last_activity_date": 1459184628, "creation_date": 1459184628, "answer_id": 36267039, "question_id": 36266965, "link": "https://stackoverflow.com/questions/36266965/ack-search-for-multiple-patterns-logical-and/36267039#36267039", "title": "ack - search for multiple patterns (logical AND)", "body": "<p>Simplest solution is to apply progressive filtering via chained calls to <code>ack</code>:</p>\n\n<pre><code>$ ack pattern1 | ack pattern2 | ack pattern3 | ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2073, "user_id": 2305193, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ec7d790ea93c24aee9d6bf75897aabe5?s=128&d=identicon&r=PG", "display_name": "user2305193", "link": "https://stackoverflow.com/users/2305193/user2305193"}, "edited": false, "score": 0, "creation_date": 1616199901, "post_id": 36268728, "comment_id": 117936948, "body": "Thanks! Also: Is there <i>really</i> no easier option?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1459190202, "creation_date": 1459190202, "answer_id": 36268728, "question_id": 36266965, "link": "https://stackoverflow.com/questions/36266965/ack-search-for-multiple-patterns-logical-and/36268728#36268728", "title": "ack - search for multiple patterns (logical AND)", "body": "<pre><code> /foo/s &amp;&amp; /bar/s &amp;&amp; /baz/s\n</code></pre>\n\n<p>can be written as</p>\n\n<pre><code> /^(?=.*?foo)(?=.*?bar)(?=.*?baz)/s\n</code></pre>\n\n<p>We don't actually need a look ahead for the last one.</p>\n\n<pre><code> /^(?=.*?foo)(?=.*?bar).*?baz/s\n</code></pre>\n\n<p>And since we don't care which instance of the pattern is matched if there are more than one, we can simplify that to</p>\n\n<pre><code> /^(?=.*foo)(?=.*bar).*baz/s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 129686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9af4cb49c97162d6be3ea8c6ca90a46?s=128&d=identicon&r=PG", "display_name": "Tyler Szabo", "link": "https://stackoverflow.com/users/129686/tyler-szabo"}, "is_accepted": false, "score": 1, "last_activity_date": 1540581962, "creation_date": 1540581962, "answer_id": 53015152, "question_id": 36266965, "link": "https://stackoverflow.com/questions/36266965/ack-search-for-multiple-patterns-logical-and/53015152#53015152", "title": "ack - search for multiple patterns (logical AND)", "body": "<p>I had a similar use case where I wanted to find files that contained multiple patterns but (possibly) on different lines.</p>\n\n<p><code>ack -l 'pattern1' | ack -xl 'pattern2'</code></p>\n\n<p>This allowed me to find files that were using 2 libraries together.</p>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 1, "accepted_answer_id": 36268728, "answer_count": 3, "score": 4, "last_activity_date": 1540581962, "creation_date": 1459184371, "last_edit_date": 1459185991, "question_id": 36266965, "link": "https://stackoverflow.com/questions/36266965/ack-search-for-multiple-patterns-logical-and", "title": "ack - search for multiple patterns (logical AND)", "body": "<p>How to search file with the <code>ack</code> to find lines containing <strong>ALL</strong>  (nor any) of defined patterns?</p>\n\n<p>the <em>ANY (OR)</em> is easy, like:</p>\n\n<pre><code>ack 'pattern1|pattern2|pattern3'\n</code></pre>\n\n<p>but how to write the <strong>AND (ALL)</strong> ? e.g. how to write the following:</p>\n\n<pre><code>if( $line =~ /pattern1/ &amp;&amp; $line =~ /pattern2/ &amp;&amp; $line =~ /pattern3/ ) {\n    say $line\n}\n</code></pre>\n\n<p>using <code>ack</code>?</p>\n\n<p>Or more precisely, is possible create an regex with <code>logical and</code>?</p>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1459183698, "creation_date": 1459183698, "answer_id": 36266801, "question_id": 36266403, "link": "https://stackoverflow.com/questions/36266403/how-to-delete-multiple-lines-between-patterns-in-a-file-in-perl/36266801#36266801", "title": "How to delete multiple lines between patterns in a file in Perl", "body": "<p>You can put your patterns into a list, then use a regex with non-greedy match to remove lines enclosed by curly braces:</p>\n\n<pre><code>my @patterns = qw/\n  pattern1\n  pattern2\n  pattern3\n/;\n\nforeach my $pattern (@patterns)\n{\n    $file_contents =~ s/^$pattern \\{.*?\\}/$pattern {\\n}/ms;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1459184392, "creation_date": 1459184392, "answer_id": 36266973, "question_id": 36266403, "link": "https://stackoverflow.com/questions/36266403/how-to-delete-multiple-lines-between-patterns-in-a-file-in-perl/36266973#36266973", "title": "How to delete multiple lines between patterns in a file in Perl", "body": "<pre><code>my @keywords = qw( pattern1 pattern2 pattern3 );\n\nmy $keywords_pat = \"(?:\\b(?:\" . join(\"|\", map quotemeta, @keywords) . \")\\b)\";\n\ns/ $keywords_pat \\s* \\{ [^{}]* (?= \\} )//xg;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s/ $keywords_pat \\s* \\{ \\K ( [^{}]* (?: \\{ (?1) \\} [^{}]* )* ) (?= \\} )//xg;\n</code></pre>\n\n<p>The second version handles nested <code>{...}</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 5184091, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155986147735121/picture?type=large", "display_name": "Ravi Raj", "link": "https://stackoverflow.com/users/5184091/ravi-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1459184392, "creation_date": 1459182266, "last_edit_date": 1459184112, "question_id": 36266403, "link": "https://stackoverflow.com/questions/36266403/how-to-delete-multiple-lines-between-patterns-in-a-file-in-perl", "title": "How to delete multiple lines between patterns in a file in Perl", "body": "<p>Question >> I need to delete lines which are mentioned \"line to be deleted\" between the \"pattern1/2/3 {\" and \"}\", using Perl!\nThanks</p>\n\n<pre><code>Line 1 of code to keep\nLine 2 of code to keep\n}\n\npattern1 {\nline to be deleted\nline to be deleted\n\n}\n\npattern2 {\nline to be deleted\nline to be deleted\n\n}\n\npattern3 {\nline to be deleted\nline to be deleted\n\n}\n\nLine 3 of code to keep\nLine 4 of code to keep\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html", "perl"], "owner": {"reputation": 63, "user_id": 3089170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69782426f694cdbfa66316c4aa3670a?s=128&d=identicon&r=PG&f=1", "display_name": "Jdun", "link": "https://stackoverflow.com/users/3089170/jdun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459182232, "creation_date": 1459182232, "question_id": 36266398, "link": "https://stackoverflow.com/questions/36266398/perl-mechanize-firefox-onchange-event-or-click", "title": "Perl Mechanize Firefox onchange event or click", "body": "<p>I've been struggling with this for hours.  I'm trying to perform a click inside a selection list and there appears to be an onchange event involved.  I don't know Javascript at all.</p>\n\n<p>Basically, I'm logging into the following website: www.guidestar.org</p>\n\n<p>To use the Advanced Search, you need to register.  So I did that with a throw away email account/password.  I automated the login so far, and then go to the Adv Search page and select my values and get to the results of my search.</p>\n\n<p>It's at this results page where I'm having issues clicking on one of the \"Refine By Category\", \"By income\" selection options.  I can mechanize and get the first value selected, for example: $100k - $500k (2), but selecting is probably not what I want, I need to somehow click the value.  If I manually (without the script) click on the value, it advances the page properly.</p>\n\n<p>Here's the code I have so far and commented out various attempts.</p>\n\n<p>Any help greatly appreciated.</p>\n\n<pre><code> use strict;\n use warnings;\n use Data::Dumper;\n use WWW::Mechanize::Firefox;\n use HTML::TreeBuilder 5 -weak; # Ensure weak references in use\n\nbinmode(STDOUT, \":utf8\");\n\nmy $log         = 'c:\\perl_script_logs\\script_log';\nmy $log_errors  = 'c:\\perl_script_logs\\script_errors_log';\n\nopen STDOUT, '&gt;', $log or die \"Can't write to $!\";\nopen STDERR, '&gt;', $log_errors or die \"Can't write to $!\";\n\n# login\nmy $login_page  = 'https://www.guidestar.org/Login.aspx';\nmy $user        = 'email@somewhere.com';\nmy $pw          = '********';\n\n\nmy $mech = WWW::Mechanize::Firefox-&gt;new();\n$mech-&gt;allow( javascript =&gt; 1 );\n$mech-&gt;get($login_page); \n$mech-&gt;field('ctl00$phMainBody$LoginMainsite$UserName', $user);\n$mech-&gt;field('ctl00$phMainBody$LoginMainsite$Password', $pw);\n$mech-&gt;click_button( value =&gt; 'Sign In', );\n\nif ( $mech-&gt;success() ) {\n    print \"Successful login\\n\";\n} else {\n    print \"Not a successful login\\n\";\n}\n\n# go to adv search page\nmy $adv_search = 'http://www.guidestar.org/AdvancedSearch.aspx';\n\n$mech-&gt;get($adv_search);\n\n$mech-&gt;select('ctl00$phMainBody$orgSearchConfiguration_state$gslbList', 'CA' );\n$mech-&gt;select('ctl00$phMainBody$orgSearchConfiguration_categorydesc$gslbList', ['3', '4x19', '5', '6', '8x44']);\n$mech-&gt;field('ctl00$phMainBody$orgSearchConfiguration_incometotal$tbMin', '500k');\n$mech-&gt;click({ xpath =&gt; '//*[@id=\"ctl00_phMainBody_ctl08\"]' });\n\n# selecting fine, but need to click it somehow or click after select, or execute some JS here... or something.\n#$mech-&gt;select('ctl00$phMainBody$incomenavigator$listNavValues', '[100001;500001&gt;' );\n\n# tried:\n#$mech-&gt;click({ xpath =&gt; '//*[@id=\"ctl00_phMainBody_incomenavigator_listNavValues\"]' });\n#$mech-&gt;click({ xpath =&gt; '//*[@id=\"ctl00_phMainBody_incomenavigator_listNavValues\"]/option[1]' });\n#$mech-&gt;click({ xpath =&gt; '//*[@id=\"ctl00_phMainBody_incomenavigator_listNavValues\"]/option[1]', synchonize =&gt; 0});\n\n#my $click_here = $mech-&gt;xpath('//*[@id=\"ctl00_phMainBody_incomenavigator_listNavValues\"]/option[1]', single =&gt; 1);\n#$mech-&gt;click($click_here);\n\n# maybe selector?\n#my $select = $mech-&gt;selector('#ctl00_phMainBody_incomenavigator_listNavValues', single =&gt; 1);\n#$select-&gt;__click();\n</code></pre>\n\n<p>Here's the HTML that may be of some assistance:</p>\n\n<pre><code>&lt;/p&gt;&lt;p id=\"ctl00_phMainBody_incomenavigator_divNavigator\"&gt;\n  &lt;label&gt;\n    By\n    Income\n  &lt;/label&gt;\n  &lt;br /&gt;\n  &lt;select size=\"6\" name=\"ctl00$phMainBody$incomenavigator$listNavValues\" onchange=\"javascript:setTimeout(&amp;#39;__doPostBack(\\&amp;#39;ctl00$phMainBody$incomenavigator$listNavValues\\&amp;#39;,\\&amp;#39;\\&amp;#39;)&amp;#39;, 0)\" id=\"ctl00_phMainBody_incomenavigator_listNavValues\" OnClick=\"MPNav(this)\"&gt;\n    &lt;option value=\"[100001;500001&gt;\" nameonly=\"$100K - $500K\"&gt;$100K - $500K  (2)&lt;/option&gt;\n    &lt;option value=\"[500001;1e+006&gt;\" nameonly=\"$500K - $1M\"&gt;$500K - $1M  (2140)&lt;/option&gt;\n    &lt;option value=\"[1e+006;2.5e+006&gt;\" nameonly=\"$1M - $2.5M\"&gt;$1M - $2.5M  (1946)&lt;/option&gt;\n    &lt;option value=\"[2.5e+006;5e+006&gt;\" nameonly=\"$2.5M - $5M\"&gt;$2.5M - $5M  (908)&lt;/option&gt;\n    &lt;option value=\"[5e+006;1e+007&gt;\" nameonly=\"$5M - $10M\"&gt;$5M - $10M  (591)&lt;/option&gt;\n    &lt;option value=\"[1e+007;&gt;\" nameonly=\"Greater than $10M\"&gt;Greater than $10M  (623)&lt;/option&gt;\n\n&lt;/select&gt;\n  &lt;input name=\"ctl00$phMainBody$incomenavigator$txtNavName\" type=\"hidden\" id=\"ctl00_phMainBody_incomenavigator_txtNavName\" value=\"incomenavigator\" /&gt;\n  &lt;input name=\"ctl00$phMainBody$incomenavigator$txtNavModifier\" type=\"hidden\" id=\"ctl00_phMainBody_incomenavigator_txtNavModifier\" value=\"incometotal\" /&gt;\n  &lt;input name=\"ctl00$phMainBody$incomenavigator$txtFieldName\" type=\"hidden\" id=\"ctl00_phMainBody_incomenavigator_txtFieldName\" value=\"Income\" /&gt;\n  &lt;script type=\"text/javascript\"&gt;\n    function MPNav(listbox) {\n      var navName = listbox.name;\n      var nameSplit = navName.split('$');\n      if (nameSplit.length &gt;= 2) {\n        navName = nameSplit[nameSplit.length - 2];\n      }\n      var navSelection = listbox.options[listbox.selectedIndex].innerHTML;\n      var selSplit = navSelection.split(' (');\n      if (selSplit.length &gt;= 1) {\n        navSelection = selSplit[0];\n      }\n      switch(navName)\n      {\n        case 'statenavigator':\n          mixpanel.track('Navigator', { 'State' : navSelection });\n          break;\n        case 'citynavigator':\n          mixpanel.track('Navigator', { 'CitySearched': navSelection });\n          break;\n        case 'incomenavigator':\n          mixpanel.track('Navigator', { 'Income': navSelection });\n          break;\n        case 'assetsnavigator':\n          mixpanel.track('Navigator', { 'Assets': navSelection });\n          break;\n      }\n    }\n&lt;/script&gt;\n&lt;/p&gt;&lt;/fieldset&gt;\n</code></pre>\n"}, {"tags": ["windows", "perl", "scheduled-tasks", "taskscheduler"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459193507, "post_id": 36268555, "comment_id": 60166426, "body": "Kindly, see Edit 1 in my post."}], "tags": [], "owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "is_accepted": true, "score": 1, "last_activity_date": 1459216756, "last_edit_date": 1459216756, "creation_date": 1459189609, "answer_id": 36268555, "question_id": 36266075, "link": "https://stackoverflow.com/questions/36266075/start-perl-script-in-win-task-sceduler/36268555#36268555", "title": "start perl script in Win task sceduler", "body": "<p>You want the Scheduled Task executable to simply be \"perl\", and ALL the rest (including the Perl script) goes into the Arguments.  Args are specified differently depending on the Windows version, so you'll need to look that part up, but it's all right there in the Task GUI.</p>\n\n<p>A couple other suggestions:</p>\n\n<ol>\n<li>Make a DOS batch script \"wrapper\" around your command.  BAT scripts are easier to specify in the Task GUI, and easier for the admin to launch manually too.</li>\n<li>Also consider redirecting standard output and standard error to a log file, so you can monitor what's going on.  Sometimes this is required just to debug a problem with launching the Task (like a problem with Perl or the Perl script).</li>\n<li>For bonus points, monitor the log file(s) in a separate program, so you can be notified immediately if something is wrong.</li>\n</ol>\n\n<p>Edit: Adding details about the Task setup, per the op's edit.</p>\n\n<p>Do all the redirection in the Task setup, not inside the BAT script.  I don't find it necessary to include <code>call</code> in mt BAT wrappers, nor to even explicitly include perl.exe.</p>\n\n<p>Here's an example Task setup:\n<a href=\"https://i.stack.imgur.com/fiaDg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fiaDg.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Here's an example BAT wrapper:</p>\n\n<pre><code>@echo off\n\ndate/t\ntime/t\n\necho.\ndisk_space.pl C:\ndisk_space.pl D:\n\necho.\necho Done.\nexit/b\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 36268555, "answer_count": 1, "score": 0, "last_activity_date": 1459233868, "creation_date": 1459181049, "last_edit_date": 1459233868, "question_id": 36266075, "link": "https://stackoverflow.com/questions/36266075/start-perl-script-in-win-task-sceduler", "title": "start perl script in Win task sceduler", "body": "<p>I want to schedule task to run perl script every week in Win task sceduler.\nThe perl script is running manually from command line using:</p>\n\n<pre><code>perl update_blastdb.pl --passive --decompress refseq_rna\n</code></pre>\n\n<p>How can I pass the above 3 arguments:</p>\n\n<pre><code>--passive --decompress refseq_rna\n</code></pre>\n\n<p><strong>Edit1:</strong>\nI wrote a bat file that contains:</p>\n\n<pre><code>@echo off\ncd \"C:\\inetpub\\wwwroot\\webclient\\db\\nucleotide\"\ncall \"C:\\Strawberry\\perl\\bin\\perl.exe\" \"C:\\inetpub\\wwwroot\\webclient\\db\\nucleotide\\update_blastdb.pl\" --passive --decompress gss_annot&gt; C:\\perl_out.log 2&gt;&amp;1\n</code></pre>\n\n<p>I schedule task in Win task scheduler to run the bat file. \nFirst, when I specify a time to run it, the time come and go and the task doesn't run (status: Ready).\nSecond, when I run the task manually by right click the task and click run, the status change to (Running) but, it seems that it doesn't run because I check the error log I create,perl_out.log, and a found it doesn't created.</p>\n\n<p>Any clarification please?</p>\n\n<p><strong>Edit3:</strong>\nit ran successfully when I create the task as \"basic task\".\nThanks</p>\n"}, {"tags": ["perl", "sdk", "vmware"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5189022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/737ea30946ec7848bdec709f3ad1ba68?s=128&d=identicon&r=PG&f=1", "display_name": "Akhilesh Kumar", "link": "https://stackoverflow.com/users/5189022/akhilesh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1461042671, "creation_date": 1461042671, "answer_id": 36709099, "question_id": 36264832, "link": "https://stackoverflow.com/questions/36264832/how-to-get-cluster-datasotre-via-vmware-perl-sdk/36709099#36709099", "title": "How to get cluster datasotre via VMware perl sdk?", "body": "<p>Yes its possible to get datastore list in a cluster</p>\n\n<pre><code>my $cluster_view = Vim::find_entity_view(view_type =&gt; 'ClusterComputeResource',\n                                            filter =&gt; { name =&gt; $cluster_name });\n########## Error trap: verify if the cluster_view variable was set in the previous command\n##########             if it was not set, the Cluster Name is incorrect\nif (!$cluster_view) {\n   die  \"\\nERROR: '\" . $cluster_name . \"' was not found in the VMware Infrastructure\\n\\n\";\n}\n\n########## Print the table header\nprint \"\\n\";\nprint \"|--------------------------------------------------------------------------|\\n\";\nprint \"| VMware Cluster: \" . $cluster_view-&gt;name . \"\\n\";\nprint \"|--------------------------------------------------------------------------|\\n\";\n\n########## Get a view of the ESX Hosts in the specified Cluster\nmy $host_views = Vim::find_entity_views(view_type =&gt; 'HostSystem',\n                                        begin_entity =&gt; $cluster_view);\n\nforeach (@$host_views) {\n#       print \"\\n\", $_-&gt;name;\n        print \"\\n|--------------------------------------------------------------------------|\\n\";\n        print \"| Datastore in ESXI Host(s) in \" . $_-&gt;name . \"\\n\";\n        print \"|--------------------------------------------------------------------------|\\n\";\n        print \"\\n\";\n        my $datastores = Vim::get_views(mo_ref_array =&gt; $_-&gt;datastore);\n        foreach(@$datastores) {\n                print \"\\n\" . $_-&gt;summary-&gt;name;\n       }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6124768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59c8c60321d80c98d7efad22b5be133d?s=128&d=identicon&r=PG&f=1", "display_name": "dika ye", "link": "https://stackoverflow.com/users/6124768/dika-ye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 789, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1461042671, "creation_date": 1459176770, "last_edit_date": 1459528887, "question_id": 36264832, "link": "https://stackoverflow.com/questions/36264832/how-to-get-cluster-datasotre-via-vmware-perl-sdk", "title": "How to get cluster datasotre via VMware perl sdk?", "body": "<p>Is it possible to list all datastores' name, Capacity space, dunesId that are related to a cluster using VMware perl sdk in Linux?</p>\n\n<p>I try to use <code>Vim::find_entity_views</code> to get <code>ComputeResource</code> and know that it has Properties: <code>datastore, host</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1459170548, "post_id": 36262540, "comment_id": 60154019, "body": "See also <a href=\"http://stackoverflow.com/questions/21468106/python-tkinter-recovering-original-default-key-binding\">Python Tkinter - recovering original default key binding</a>"}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1459171427, "post_id": 36262540, "comment_id": 60154558, "body": "@H&#229;konH&#230;gland: is the link desribing perl or python? i am looking into perl.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459175553, "post_id": 36262540, "comment_id": 60156756, "body": "@NirMH: The link uses the Python language. But the Tk API is pretty uniform and you should be able to interpret what is written there in Perl terms. Or did you want the exact code written for you?"}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459180025, "post_id": 36262540, "comment_id": 60159265, "body": "@Borodin: i just wanted to confirm exactly what you&#39;ve said. that Tk API is not different for Python. thanks - i can handle the language translation"}], "answers": [{"tags": [], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "is_accepted": true, "score": 2, "last_activity_date": 1462266276, "creation_date": 1462266276, "answer_id": 36999929, "question_id": 36262540, "link": "https://stackoverflow.com/questions/36262540/how-to-bind-tab-key-press-in-perl-tk/36999929#36999929", "title": "How to bind &lt;Tab&gt; key press in Perl Tk?", "body": "<p>After digging with this issue for a while, and exploring all good advice provided in the comments. I've found out the best way to achieve my purpose is to derive the Widget and create my own custom widget, and use OOP override techniques to control the behavior.</p>\n\n<p>This works like charm.</p>\n\n<p>So for <code>Tk::Text</code>, for example, the native <code>&lt;Tab&gt;</code> event is bind to </p>\n\n<pre><code>$mw-&gt;bind($class,'&lt;Tab&gt;', 'insertTab');\n\nsub insertTab\n{\n     my ($w) = @_;\n     $w-&gt;Insert(\"\\t\");\n     $w-&gt;focus;\n     $w-&gt;break\n}\n</code></pre>\n\n<p>And by deriving from <code>Tk::Text</code> widget to my own <code>Tk::myText</code> widget, I was able to override the <code>insertTab</code> method as follows:</p>\n\n<pre><code>sub insertTab\n{\n    my ($w) = @_;\n\n    // &lt;-- place my stuff here \n    // &lt;-- to be executed first\n\n    $w-&gt;SUPER::insertTab();  // &lt;-- then call the original &lt;Tab&gt; handler from the parent\n}       \n</code></pre>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 36999929, "answer_count": 1, "score": 1, "last_activity_date": 1462266276, "creation_date": 1459168886, "question_id": 36262540, "link": "https://stackoverflow.com/questions/36262540/how-to-bind-tab-key-press-in-perl-tk", "title": "How to bind &lt;Tab&gt; key press in Perl Tk?", "body": "<p>I am looking for the code syntax to bind a <code>&lt;Tab</code>> keypress event to a Perl Tk Widget.</p>\n\n<p>Reading through the documentation, I saw i can bind <code>&lt;Control&gt;</code> and <code>&lt;Alt&gt;</code> (and any combination), but couldn't find the <code>&lt;Tab&gt;</code> key binding.</p>\n\n<p>I've tried <code>...-&gt;bind('&lt;Tab&gt;', sub{...});</code> but it didn't work.</p>\n\n<p>How to bind it?</p>\n"}, {"tags": ["perl", "serialization", "deserialization", "eval", "data-dumper"], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 1443563, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/YcZiU.jpg?s=128&g=1", "display_name": "gsinha", "link": "https://stackoverflow.com/users/1443563/gsinha"}, "edited": false, "score": 0, "creation_date": 1459177258, "post_id": 36261727, "comment_id": 60157714, "body": "Thanks for your time. Currently, i am using pattern match and replace to change the leading and trailing curly braces with round brackets. Could we do it in any other way too ? Also, I have removed the stars. I should have put them behind the #."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1459194020, "post_id": 36261727, "comment_id": 60166711, "body": "You don&#39;t need to change all that data. Merely change how you make the assignments."}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 2, "last_activity_date": 1459165873, "creation_date": 1459165873, "answer_id": 36261727, "question_id": 36261280, "link": "https://stackoverflow.com/questions/36261280/perl-eval-datadumper-inconsistency/36261727#36261727", "title": "Perl eval Data::Dumper inconsistency", "body": "<p>First of all, please don't put comments that result in syntax errors (<code>**</code>).</p>\n\n<p>Notice that the string you provided in the first code block produces different data structure than the Dumper function. In the first block you are creating a hash, but you don't assign it to any variable. In case of the Dumper function, anonymous hash is created and it's reference is passed to the <code>$VAR</code> variable.</p>\n\n<p>To make the first code work, you should replace <code>(</code> with <code>{</code> to create anonymous hash and then assign it to a variable, for example:</p>\n\n<pre><code>my $r2 = \"$VAR = { \n    'w' =&gt; {\n           'k2' =&gt; 5,\n           'k1' =&gt; 'key',\n           'k3' =&gt; [\n                     'a',\n                     'b',\n                     2,\n                     '3'\n                   ]\n         },\n  'q' =&gt; 2 \n}\"; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1459194028, "last_edit_date": 1459194028, "creation_date": 1459193477, "answer_id": 36269657, "question_id": 36261280, "link": "https://stackoverflow.com/questions/36261280/perl-eval-datadumper-inconsistency/36269657#36269657", "title": "Perl eval Data::Dumper inconsistency", "body": "<p>Don't use Data::Dumper to serialize data. Having said that...</p>\n\n<p>This is a problem of scalar and list context. In the second eval, you have:</p>\n\n<pre><code>my $answer = ...;\n</code></pre>\n\n<p>Since you are assigning to a scalar, the right side is evaluated in scalar context. That means the <code>eval</code> is in scalar context. That value is:</p>\n\n<pre><code>(\n'w' =&gt; {\n           'k2' =&gt; 5,\n           'k1' =&gt; 'key',\n           'k3' =&gt; [\n                     'a',\n                     'b',\n                     2,\n                     '3'\n                   ]\n         },\n  'q' =&gt; 2\n)\n</code></pre>\n\n<p>That looks like a list, but it's really the comma operator in scalar context. That evaluates the left hand side, discards that result, and returns the righthand side. So, <code>my $x = ( 'left', 'right' )</code> assigns <code>right</code> to <code>$x</code>. This is covered in <a href=\"http://perldoc.perl.org/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array%3f\" rel=\"nofollow\">What is the difference between a list and an array?</a> in <a href=\"http://perldoc.perl.org/perlfaq4.html\" rel=\"nofollow\">perlfaq4</a>.</p>\n\n<p>In your question, you see that <code>$r</code> gets the value <code>2</code>. That's the rightmost value in the comma chain, so that's the value you get back in scalar context. Change that to another value (perhaps <code>'duck'</code>), and that's the value that you'll get back:</p>\n\n<pre><code>my $r2 = \"(\n    'w' =&gt; {\n               'k2' =&gt; 5,\n             },\n      'q' =&gt; 'duck'\n    )\";\n\nmy $answer = eval \"$r2\";\n\nuse Data::Dumper;\nprint \"Evaled =\\n\" . Dumper($answer);\n</code></pre>\n\n<p>It's not a number, which confuses people because they think it's some sort of count:</p>\n\n<pre><code>Evaled =\n$VAR1 = 'duck';\n</code></pre>\n\n<p>Change that to assign in list context (that hash assignment is a list assignment) and you get the right answer:</p>\n\n<pre><code>my $r2 = \"(\n    'w' =&gt; {\n               'k2' =&gt; 5,\n             },\n      'q' =&gt; 'duck'\n    )\";\n\nmy @answer = eval \"$r2\";\n\nuse Data::Dumper;\nprint \"Evaled =\\n\" . Dumper(\\@answer);\n</code></pre>\n\n<p>Now it's the data structure you thought it should be:</p>\n\n<pre><code>Evaled =\n$VAR1 = [\n          'w',\n          {\n            'k2' =&gt; 5\n          },\n          'q',\n          'duck'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 1073, "user_id": 1443563, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/YcZiU.jpg?s=128&g=1", "display_name": "gsinha", "link": "https://stackoverflow.com/users/1443563/gsinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 36261727, "answer_count": 2, "score": 1, "last_activity_date": 1459194028, "creation_date": 1459163979, "last_edit_date": 1459177121, "question_id": 36261280, "link": "https://stackoverflow.com/questions/36261280/perl-eval-datadumper-inconsistency", "title": "Perl eval Data::Dumper inconsistency", "body": "<p>I have to serialize and deserialize in Perl. I am aware that <code>Data::Dumper</code> and <code>eval</code> are not the best suited ones for this job but I am not allowed to modify this aspect in the legacy scripts which I am working on.<br>\nBelow are two ways ( <strong>CODE 1</strong> and <strong>CODE 2</strong> ) to use <code>eval</code>.<br>\nIn <strong>CODE 1</strong>, the hash is available as a string before being deserialized via <code>eval</code>.<br>\nIn <strong>CODE 2</strong>, the hash is serialized using <code>Dumper</code> before being deserialized via <code>eval</code>.  </p>\n\n<p>In both the code samples, one of two attempted ways to deserialize works.  Why does the other way to deserialize not work ? </p>\n\n<p><strong>CODE 1</strong> </p>\n\n<pre><code>my $r2 = \"( \n'w' =&gt; {\n           'k2' =&gt; 5,\n           'k1' =&gt; 'key',\n           'k3' =&gt; [\n                     'a',\n                     'b',\n                     2,\n                     '3'\n                   ]\n         },\n  'q' =&gt; 2 \n)\"; \n\nmy %z; \neval \"\\%z = $r2\";          ####### Works. \nprint \"\\%z = [\".Data::Dumper::Dumper (\\%z).\"] \"; \n\nmy $answer = eval \"$r2\";   #### Does NOT work. \nprint \"\\n\\nEvaled = [\".Dumper($answer).\"] \"; \n</code></pre>\n\n<p><strong>Output</strong> </p>\n\n<pre><code>%z = [$VAR1 = {\n          'w' =&gt; {\n                   'k2' =&gt; 5,\n                   'k1' =&gt; 'key',\n                   'k3' =&gt; [\n                             'a',\n                             'b',\n                             2,\n                             '3'\n                           ]\n                 },\n          'q' =&gt; 2\n        };\n]\n\nEvaled = [$VAR1 = 2;\n]\n</code></pre>\n\n<p>But below code works in reverse manner :<br>\n<strong>CODE 2</strong> </p>\n\n<pre><code>my %a = ( \"q\" =&gt;2, \"w\"=&gt;{ \"k1\"=&gt;\"key\", \"k2\"=&gt;5, k3=&gt;[\"a\", \"b\", 2, \"3\",], }, );  **# Same hash as above example.** \n$Data::Dumper::Terse=1; \n$Data::Dumper::Purity = 1; \nmy $r2 = Dumper(\\%a); \n\nmy %z; \neval '\\%z = $r2'; \nprint \"\\n\\n\\%z = [\".Dumper(\\%z).\"] \";         #### Does NOT work. \n\nmy $answer = eval $r2; \nprint \"\\n\\nEvaled = [\".Dumper($answer).\"] \";  ####### Works.\n</code></pre>\n\n<p><strong>Output</strong> </p>\n\n<pre><code>%z = [$VAR1 = {};\n]\n\nEvaled = [$VAR1 = {\n          'w' =&gt; {\n                   'k2' =&gt; 5,\n                   'k1' =&gt; 'key',\n                   'k3' =&gt; [\n                             'a',\n                             'b',\n                             2,\n                             '3'\n                           ]\n                 },\n          'q' =&gt; 2\n        };\n]\n</code></pre>\n"}, {"tags": ["perl", "docker", "docker-compose"], "answers": [{"comments": [{"owner": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "edited": false, "score": 0, "creation_date": 1459190742, "post_id": 36264073, "comment_id": 60164944, "body": "Sure, I&#39;ve added the Dockerfile as well. The web container has already been built by this point."}, {"owner": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "edited": false, "score": 0, "creation_date": 1459204275, "post_id": 36264073, "comment_id": 60171516, "body": "Can you expand on what you mean by the volumes definition? The library artefacts are installed under the code directory so this sounds like the right area.."}, {"owner": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "edited": false, "score": 0, "creation_date": 1459204419, "post_id": 36264073, "comment_id": 60171567, "body": "Okay, I&#39;ve commented out the <code>volumes</code> definition and it now does start. I think I copied that from a Django or Rails example, I&#39;ll need to look up what it does but I&#39;m a step further now! How I actually view my application in a browser will be the next challenge. Thanks."}, {"owner": {"reputation": 329, "user_id": 4971075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FbRA6.png?s=128&g=1", "display_name": "ThatsNinja", "link": "https://stackoverflow.com/users/4971075/thatsninja"}, "reply_to_user": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "edited": false, "score": 1, "creation_date": 1459212254, "post_id": 36264073, "comment_id": 60174052, "body": "Definition, meaning where you had <code>volumes:</code> defined in the docker-compose.yml. That has the effect of mounting a location at or below the level of your docker-compose.yml into the container when docker-compose starts it. In this case, mounting <code>.</code> to <code>&#47;code</code> was replacing the built project with your project root from outside the container, presumably sans build artifacts."}], "tags": [], "owner": {"reputation": 329, "user_id": 4971075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FbRA6.png?s=128&g=1", "display_name": "ThatsNinja", "link": "https://stackoverflow.com/users/4971075/thatsninja"}, "is_accepted": true, "score": 2, "last_activity_date": 1459200341, "last_edit_date": 1459200341, "creation_date": 1459174151, "answer_id": 36264073, "question_id": 36259498, "link": "https://stackoverflow.com/questions/36259498/why-does-this-docker-compose-command-fail-while-docker-run-command-succeeds/36264073#36264073", "title": "Why does this docker-compose command fail while docker run command succeeds?", "body": "<p>Can we see the Dockerfile that's being built, please? (I lack the reputation to ask in a comment. <em>Edit: Thanks!</em> )</p>\n\n<p><strong>(Edit:)</strong></p>\n\n<p>One difference I notice is that you're mounting <code>.</code> to <code>/code</code> in your docker-compose file, but you're not when running the command manually. I'm not familiar with Carton specifically, but if it's creating artifacts inside <code>/code</code> when you're executing <code>carton install</code> in the Dockerfile, you might be losing them as a result of your docker-compose <code>volumes</code> definition.</p>\n"}], "owner": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 1, "accepted_answer_id": 36264073, "answer_count": 1, "score": 6, "last_activity_date": 1459200341, "creation_date": 1459157424, "last_edit_date": 1459190695, "question_id": 36259498, "link": "https://stackoverflow.com/questions/36259498/why-does-this-docker-compose-command-fail-while-docker-run-command-succeeds", "title": "Why does this docker-compose command fail while docker run command succeeds?", "body": "<p>I have the following <code>docker-compose.yml</code>:</p>\n\n<pre><code>db:\n    image: postgres\nsearch:\n    image: elasticsearch\nweb:\n    build: .\n    working_dir: /code\n    environment:\n        CATALYST_CONFIG_LOCAL_SUFFIX: development\n    volumes:\n        - .:/code\n    ports:\n        - \"8000:8000\"\n    links:\n        - db\n        - search\n    command: carton exec plackup -E development bicycleevents_web.psgi -p 8000\n</code></pre>\n\n<p>Edit: and the following Dockerfile:</p>\n\n<pre><code>FROM ubuntu:latest\n\nRUN apt-get update\nRUN apt-get install -y --force-yes build-essential curl libssl-dev postgresql-client libpq-dev perl-doc\nRUN apt-get clean\n\nRUN curl -L https://cpanmin.us | perl - --sudo App::cpanminus\nRUN cpanm Carton\nRUN mkdir /code\nWORKDIR /code\nADD . /code/\nRUN rm -rf /code/local/\nRUN carton install\n</code></pre>\n\n<p>If I run <code>docker-compose up</code> the <code>carton exec ...</code> command fails:</p>\n\n<pre><code>$ docker-compose up\n...\nStarting bicycleeventsweb_web_1\nweb_1    | Error while loading /code/bicycleevents_web.psgi: Can't locate Moose.pm in @INC (you may need to install the Moose module) (@INC contains: /code/lib /code/local/lib/perl5 /etc/perl /usr/local/lib/perl/5.18.2 /usr/local/share/perl/5.18.2 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.18 /usr/share/perl/5.18 /usr/local/lib/site_perl .) at /code/lib/BicycleEvents/Web.pm line 2.\nweb_1    | BEGIN failed--compilation aborted at /code/lib/BicycleEvents/Web.pm line 2.\nweb_1    | Compilation failed in require at /code/bicycleevents_web.psgi line 6.\nweb_1    | BEGIN failed--compilation aborted at /code/bicycleevents_web.psgi line 6.\nbicycleeventsweb_web_1 exited with code 2\n...\n</code></pre>\n\n<p>However, if I run the same command manually on the container, it succeeds:</p>\n\n<pre><code>$ docker run -i -t -e \"CATALYST_CONFIG_LOCAL_SUFFIX=development\" bicycleeventsweb_web carton exec plackup -E development bicycleevents_web.psgi -p 8000\n...\nHTTP::Server::PSGI: Accepting connections at http://0:8000/\n</code></pre>\n\n<p>Any thoughts on what is different between the two commands?</p>\n\n<p>For reference <a href=\"https://metacpan.org/pod/Carton\" rel=\"nofollow\">carton</a> is like Bundler for Perl. Using <code>carton exec</code> should setup the Perl environment so that the appropriate library paths are included that contain all the application specific dependencies - as works with the <code>docker run</code> command.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459148449, "post_id": 36257502, "comment_id": 60143881, "body": "That line doesn&#39;t have a syntax error"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1459149101, "post_id": 36257502, "comment_id": 60144119, "body": "@Arnab i think you get the syntax error from line number 1. Because you missed the semi colon."}, {"owner": {"reputation": 2508, "user_id": 2235839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/he00m.jpg?s=128&g=1", "display_name": "A Nice Guy", "link": "https://stackoverflow.com/users/2235839/a-nice-guy"}, "edited": false, "score": 0, "creation_date": 1459149165, "post_id": 36257502, "comment_id": 60144146, "body": "Oh Yes, The syntax error was in a earlier line because I had a extra &quot;)&quot;. But the $script_piece1 is coming as null unlike you said in your answer below. Anyways I am trying out your solution and will post back here soon"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459150233, "post_id": 36257502, "comment_id": 60144595, "body": "@Arnab: Those two statements result in <code>$script_piece1</code> being set to 1. You real code must be different"}], "answers": [{"comments": [{"owner": {"reputation": 2508, "user_id": 2235839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/he00m.jpg?s=128&g=1", "display_name": "A Nice Guy", "link": "https://stackoverflow.com/users/2235839/a-nice-guy"}, "edited": false, "score": 0, "creation_date": 1459152465, "post_id": 36257602, "comment_id": 60145438, "body": "Just for the future readers , the  &lt;   /(.*?)mapping=(.*)/;    &gt; above should be &lt; m/(.*?)mapping=(.*)/;    &gt;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2508, "user_id": 2235839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/he00m.jpg?s=128&g=1", "display_name": "A Nice Guy", "link": "https://stackoverflow.com/users/2235839/a-nice-guy"}, "edited": false, "score": 2, "creation_date": 1459161798, "post_id": 36257602, "comment_id": 60149490, "body": "@Arnab: No, it shouldn&#39;t. The <code>m</code> is optional and is usually omitted"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1459150253, "last_edit_date": 1459150253, "creation_date": 1459148680, "answer_id": 36257602, "question_id": 36257502, "link": "https://stackoverflow.com/questions/36257502/extract-strings-before-and-after-the-occurance-of-a-key-string/36257602#36257602", "title": "Extract strings before and after the occurance of a key string", "body": "<p>Your statement is perfectly valid, but it will set <code>$script_piece1</code> to a <em>true</em> or <em>false</em> value according to whether <code>$script</code> contains the string <code>mapping=</code></p>\n\n<p>You need to put the regex test in <em>list context</em> to get it to return the contents of any <em>captures</em> in the pattern, and you may as well grab both parts at once like this</p>\n\n<pre><code>my ($piece1, $piece2) = $script =~ /(.*?)mapping=(.*)/;\n</code></pre>\n\n<p>But it's neater as a <code>split</code>, like this</p>\n\n<pre><code>my ($piece1, $piece2) = split /mapping=/, $script, 2;\n</code></pre>\n"}], "owner": {"reputation": 2508, "user_id": 2235839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/he00m.jpg?s=128&g=1", "display_name": "A Nice Guy", "link": "https://stackoverflow.com/users/2235839/a-nice-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 36257602, "answer_count": 1, "score": 1, "last_activity_date": 1459150253, "creation_date": 1459148249, "question_id": 36257502, "link": "https://stackoverflow.com/questions/36257502/extract-strings-before-and-after-the-occurance-of-a-key-string", "title": "Extract strings before and after the occurance of a key string", "body": "<p>I have a string like</p>\n\n<pre><code>$script = \"mycommand param1=arnab user=user1 mapping=arn1:schema1,arn2:schema2\"\n</code></pre>\n\n<p>I want to extract everything before <code>mapping=</code> and also everything after it in two variables.\n<br>To extract everything before <code>mapping=</code> I tried:</p>\n\n<pre><code>$script_piece1 = $script =~ m/(.*)mapping=/;\n</code></pre>\n\n<p>However I am getting syntax error at this line.\n<br>How to do this correctly?</p>\n"}, {"tags": ["perl", "artifactory"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459159332, "post_id": 36258299, "comment_id": 60148273, "body": "Thanks @fundeldman, I am able to access all the repositories now using &quot;ANY&quot; and &quot;ANY LOCAL&quot; the way you have mentioned."}], "tags": [], "owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "is_accepted": true, "score": 5, "last_activity_date": 1459152054, "creation_date": 1459152054, "answer_id": 36258299, "question_id": 36256506, "link": "https://stackoverflow.com/questions/36256506/selecting-all-the-repositories-in-artifactory/36258299#36258299", "title": "Selecting all the Repositories in Artifactory", "body": "<p>You can always try and see for yourself, create a demo permission target containing all repositories in the UI and then call <code>GET artifactory/api/security/permissions/$permission_target_name</code> you will see it outputs: </p>\n\n<pre><code>\"repositories\": [\n   \"ANY\"\n],\n</code></pre>\n\n<p>There's also <code>ANY LOCAL</code> and <code>ANY REMOTE</code> respectively.</p>\n\n<p>Calling <code>PUT artifactory/api/security/permissions/$permission_target_name</code> with the same <a href=\"https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON\">json</a> will that you changed let you modify that target.</p>\n"}], "owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 36258299, "answer_count": 1, "score": 0, "last_activity_date": 1459152054, "creation_date": 1459142854, "question_id": 36256506, "link": "https://stackoverflow.com/questions/36256506/selecting-all-the-repositories-in-artifactory", "title": "Selecting all the Repositories in Artifactory", "body": "<p>I have a requirement to give global read permission on all repositories in Artifactory through REST API and PERL scripting. For this I believe that I need to create a permission target with all the repository names listed <a href=\"https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON\" rel=\"nofollow\">here</a> next to repository tag. But is there any special character or a path available using which I can select all the repositories at once? Or do I have to go fetch the repository names and embed them here in the required format?</p>\n\n<p>Please help me out with this information guys!</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1459133842, "post_id": 36259313, "comment_id": 60147066, "body": "The first 2 lines of a perl script, after the shebang, should always be <code>use strict;</code> and <code>use warnings;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459293370, "post_id": 36259313, "comment_id": 60218418, "body": "You have three answers with several upvotes. Please read <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 137158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UlJ6L.jpg?s=128&g=1", "display_name": "cas", "link": "https://stackoverflow.com/users/137158/cas"}, "edited": false, "score": 0, "creation_date": 1459131630, "post_id": 36259314, "comment_id": 60147067, "body": "In other words, fix by adding a <code>;</code> to the end of the lines with only <code>print</code> on them.  As a general rule, all <code>perl</code> statements need a <code>;</code> to terminate them unless they are the last statement of a block or the last statement of a file."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 626, "user_id": 137158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UlJ6L.jpg?s=128&g=1", "display_name": "cas", "link": "https://stackoverflow.com/users/137158/cas"}, "edited": false, "score": 0, "creation_date": 1459209521, "post_id": 36259314, "comment_id": 60173261, "body": "@cas: That doesn&#39;t help. A statement like <code>print;</code> is the same as <code>print $_;</code>. In this case it would have printed nothing because the &quot;it&quot; variable <code>$_</code> has never been defined. If you want a blank line then you must <code>print &quot;\\n&quot;</code>"}, {"owner": {"reputation": 626, "user_id": 137158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UlJ6L.jpg?s=128&g=1", "display_name": "cas", "link": "https://stackoverflow.com/users/137158/cas"}, "edited": false, "score": 0, "creation_date": 1459210119, "post_id": 36259314, "comment_id": 60173435, "body": "my goal was not to fix every minor problem with the OP&#39;s script (if it was, i&#39;d start by using a single multi-line print statement, not multiple <code>print &quot;...&quot;</code>s and <code>print &quot;\\n&quot;;</code>s).  It was to highlight the fact that the missing <code>&#39;;</code> was the source of the problem, and to let them know that perl statements need to be terminated with <code>;</code>s."}], "tags": [], "owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "is_accepted": false, "score": 9, "last_activity_date": 1471623933, "last_edit_date": 1471623933, "creation_date": 1459127550, "answer_id": 36259314, "question_id": 36259313, "link": "https://stackoverflow.com/questions/36259313/perl-sqrt-cube-issue-1-showing-up-after-each-line/36259314#36259314", "title": "Perl sqrt, cube issue: 1 showing up after each line", "body": "<p>Your lines just saying</p>\n\n<pre><code>print\n</code></pre>\n\n<p>are not statements in themselves as they are not terminated by a <code>;</code>. Instead they are part of statements of the form</p>\n\n<pre><code>print print \"text\";\n</code></pre>\n\n<p>The inner print has an argument of \"text\" and prints that, the outer print has an argument of <code>print \"text\"</code> and print the value of that, and when succesful print returns a value of 1 (perldoc only says it returns true, so don't rely it being 1) - so a 1 is printed.</p>\n\n<p>If the point was to format your output nicely, you should explicitly print <code>\"\\n\"</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user14373232"}, "is_accepted": false, "score": 0, "last_activity_date": 1459139771, "creation_date": 1459139771, "answer_id": 36259315, "question_id": 36259313, "link": "https://stackoverflow.com/questions/36259313/perl-sqrt-cube-issue-1-showing-up-after-each-line/36259315#36259315", "title": "Perl sqrt, cube issue: 1 showing up after each line", "body": "<p>As Henrik states in his answer, the lines with <code>print</code> and no <code>;</code> are the problem.</p>\n\n<p>An alternate way to get Perl to print a blank line between the main lines of output is to add an addition new line character, <code>\\n</code>, at the end of each of the print lines. The code would become:</p>\n\n<pre><code>#!/usr/bin/perl\n# Provide a sum, cube of the sum, and square root of the sum of three set variables\n# Set variables\n$v1=10;\n$v2=9;\n$v3=8;\n$val=$v1+$v2+$v3;\n$cube=$val ** (1/3);\n$square= sqrt($val);\nprint \"Sum of 10, 9, 8: $val\\n\\n\";\nprint\nprint \"Cube of Sum: $cube\\n\\n\";\nprint\nprint \"Square of Sum: $square\\n\\n\";\nprint\nprint \"Thanks for using this script!\"\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Sum of 10, 9, 8: 27\n\nCube of Sum: 3\n\nSquare of Sum: 5.19615242270663\n</code></pre>\n\n<p>By the way, your equation for calculating the cube of the sum calculates the cubed root. To calculate the cube of the sum you need,</p>\n\n<pre><code>$cube=$val ** (3);\n</code></pre>\n\n<p>Likewise, your equation to find the square of the sum is calculating the square root, not the square. To find the square of the sum you need to raise the sum to the power of 2.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467624715, "last_edit_date": 1467624715, "creation_date": 1459168317, "answer_id": 36262372, "question_id": 36259313, "link": "https://stackoverflow.com/questions/36259313/perl-sqrt-cube-issue-1-showing-up-after-each-line/36262372#36262372", "title": "Perl sqrt, cube issue: 1 showing up after each line", "body": "<p>As has been explained, half of your <code>print</code> calls are printing the return value of the following <code>print</code> statement because you are missing a semicolon at the end of the line to terminate the statement</p>\n\n<p>Also, <code>print</code> on its own will print the value of the default variable <code>$_</code>, not a newline as you expected. You need to write <code>print \"\\n\";</code> to achieve what you intend</p>\n\n<p>It's also <em>very important</em> to add <code>use strict</code> and <code>use warnings 'all'</code> to the top of every Perl program you write. You will also need to declare all of your variables using <code>my</code></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings 'all';\n\n# Provide a sum, cube of the sum, and square root of the sum of three set variables\n# Set variables\n\nmy $v1     = 10;\nmy $v2     = 9;\nmy $v3     = 8;\nmy $val    = $v1 + $v2 + $v3;\nmy $cube   = $val**( 1 / 3 );\nmy $square = sqrt($val);\n\nprint \"Sum of 10, 9, 8: $val\\n\";\nprint \"\\n\";\nprint \"Cube root of Sum: $cube\\n\";\nprint \"\\n\";\nprint \"Square root of Sum: $square\\n\";\nprint \"\\n\";\nprint \"Thanks for using this script!\\n\";\nprint \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Sum of 10, 9, 8: 27\n\nCube root of Sum: 3\n\nSquare root of Sum: 5.19615242270663\n\nThanks for using this script!\n</code></pre>\n\n<p>It's also worth pointing out that there's a construct called a <em>here document</em> that will let you do this more neatly and clearly. If you change those print statements to just one, like this, then the intention is clear and the output is identical to that of the original code</p>\n\n<pre><code>print &lt;&lt;END;\nSum of 10, 9, 8: $val\n\nCube root of Sum: $cube\n\nSquare root of Sum: $square\n\nThanks for using this script!\n\nEND\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1459156624, "question_id": 272538}, "owner": {"reputation": 21, "user_id": 5648238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2a2e818af18406f7fcb9ca6442429c?s=128&d=identicon&r=PG&f=1", "display_name": "Mister123", "link": "https://stackoverflow.com/users/5648238/mister123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1471623933, "creation_date": 1459124089, "question_id": 36259313, "link": "https://stackoverflow.com/questions/36259313/perl-sqrt-cube-issue-1-showing-up-after-each-line", "title": "Perl sqrt, cube issue: 1 showing up after each line", "body": "<p>I am having a tiny issue with a small perl script using arithmetic operators. After my cube root, and square root operators, a 1 shows up. I was testing this script on an openSUSE 42.1 VM.</p>\n\n<p>I'm just not too certain what the 1 after each line is, I have tried looking it up, but am not too certain. I mainly script in bash, and ksh, so this perl syntax is a bit new to me.</p>\n\n<p>Script:</p>\n\n<pre><code>#!/usr/bin/perl\n# Provide a sum, cube of the sum, and square root of the sum of three set variables\n# Set variables\n$v1=10;\n$v2=9;\n$v3=8;\n$val=$v1+$v2+$v3;\n$cube=$val ** (1/3);\n$square= sqrt($val);\nprint \"Sum of 10, 9, 8: $val\\n\";\nprint\nprint \"Cube of Sum: $cube\\n\";\nprint\nprint \"Square of Sum: $square\\n\";\nprint\nprint \"Thanks for using this script!\"\n</code></pre>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 2278, "user_id": 533242, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5b24e6436c9e8795b2682e712ef38436?s=128&d=identicon&r=PG", "display_name": "ub3rst4r", "link": "https://stackoverflow.com/users/533242/ub3rst4r"}, "edited": false, "score": 2, "creation_date": 1459110674, "post_id": 36252265, "comment_id": 60134274, "body": "See <a href=\"http://stackoverflow.com/questions/2105092/how-can-i-encode-a-string-for-html\" title=\"how can i encode a string for html\">stackoverflow.com/questions/2105092/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1034, "user_id": 3080003, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/44d452fc56bec22a28feb6c0671a3581?s=128&d=identicon&r=PG&f=1", "display_name": "Sophia_ES", "link": "https://stackoverflow.com/users/3080003/sophia-es"}, "edited": false, "score": 0, "creation_date": 1459112382, "post_id": 36252406, "comment_id": 60134856, "body": "Okay --- it doesn&#39;t HTML-substitute the newline character -- but at least it does everything else I want."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1459130288, "post_id": 36252406, "comment_id": 60139337, "body": "Wrap it in a pre element (or equivalent CSS) to preserve newlines and multiple whitespace"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467625068, "last_edit_date": 1467625068, "creation_date": 1459111261, "answer_id": 36252406, "question_id": 36252265, "link": "https://stackoverflow.com/questions/36252265/generating-html-code-in-perl-to-display-starting-html-code/36252406#36252406", "title": "Generating HTML code in Perl to display starting HTML code?", "body": "<p>Your best choice is probably the <a href=\"https://p3rl.org/HTML::Escape\" rel=\"nofollow\"><code>HTML::Escape</code></a> module</p>\n\n<p>Use it like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse HTML::Escape 'escape_html';\n\nmy $html = &lt;&lt;END_HTML;\n&lt;p&gt;This is &lt;em&gt;really&lt;/em&gt;\nwhat I call \"awesome\" &amp; then some.&lt;/p&gt;\nEND_HTML\n\nprint escape_html($html);\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&amp;lt;p&amp;gt;This is &amp;lt;em&amp;gt;really&amp;lt;/em&amp;gt;\nwhat I call &amp;quot;awesome&amp;quot; &amp;amp; then some.&amp;lt;/p&amp;gt;\n</code></pre>\n"}], "owner": {"reputation": 1034, "user_id": 3080003, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/44d452fc56bec22a28feb6c0671a3581?s=128&d=identicon&r=PG&f=1", "display_name": "Sophia_ES", "link": "https://stackoverflow.com/users/3080003/sophia-es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 36252406, "answer_count": 1, "score": 0, "last_activity_date": 1467625068, "creation_date": 1459110415, "question_id": 36252265, "link": "https://stackoverflow.com/questions/36252265/generating-html-code-in-perl-to-display-starting-html-code", "title": "Generating HTML code in Perl to display starting HTML code?", "body": "<p>Is there a function in PERL (don't care if it's a built-in function or a module-provided function) that will accept a string containing a section of HTML code as it's argument --- and as it's return value provide a string of newly-generated HTML code that, when sent to the browser, will show the user the same HTML code that <em>originally</em> was provided to this function as an <em>argument</em>?</p>\n\n<p>For example, if the argument provided to this function is</p>\n\n<pre><code>&lt;p&gt;This is &lt;em&gt;really&lt;/em&gt;\nwhat I call \"awesome\" &amp; then some.&lt;/p&gt;\n</code></pre>\n\n<p>I would like the return-value to be something alone the lines of</p>\n\n<pre><code>&amp;lt;p&amp;gt;This is &amp;lt;em&amp;gt;really&amp;lt;/em&amp;gt;&lt;br/&gt;what\nI call &amp;quot;awesome&amp;quot; &amp;amp; then some.&amp;lt;/p&amp;gt;\n</code></pre>\n\n<p>So - does there exist a function in Perl that will do this for me?</p>\n"}, {"tags": ["regex", "perl", "newline"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459094404, "post_id": 36249358, "comment_id": 60128453, "body": "A <code>.</code> matches any character with an <code>&#47;s</code> modifier. Not <code>[.\\n]</code> that matches a dot and a line feed."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1459095650, "post_id": 36249358, "comment_id": 60128892, "body": "Do not use regexp to parse HTML/XML.  That way lies madness and extreme code brittleness.  Use a real HTML/XML parser to extract the data you want."}, {"owner": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459096724, "post_id": 36249358, "comment_id": 60129290, "body": "Thank you for the answers. One more question... I need to write code with a maximum length of 160 characters, do you think it is possible if I use a parser for extracting the data I need?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459097483, "post_id": 36249358, "comment_id": 60129548, "body": "Please say more about what you&#39;re trying to do. Why are you limited to 160 characters?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459097510, "post_id": 36249358, "comment_id": 60129561, "body": "Why can your code only be 160 characters? Is this code golf?"}, {"owner": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459098082, "post_id": 36249358, "comment_id": 60129795, "body": "It is a home assignment..."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459104115, "post_id": 36250759, "comment_id": 60131941, "body": "Thanks, but the problem is that I don&#39;t know exactly the number of newlines, it can be 0 or more. I tried to write * and {0,} too instead of the {7} like you did.  <a href=\"https://regex101.com/r/vH9tY4/3\" rel=\"nofollow noreferrer\">here is the sample data</a>"}, {"owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "reply_to_user": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459110792, "post_id": 36250759, "comment_id": 60134320, "body": "Now the capturing group is in $1. Is that okay?"}, {"owner": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459111419, "post_id": 36250759, "comment_id": 60134526, "body": "I used a part of the original version and this one and it&#39;s okay now, thank you."}, {"owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "reply_to_user": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "edited": false, "score": 0, "creation_date": 1459111562, "post_id": 36250759, "comment_id": 60134575, "body": "I also made version 7 for unknown number of new lines. Please check if it helps"}], "tags": [], "owner": {"reputation": 3886, "user_id": 5741681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2d7159467a096cf7569ff7d9197b78?s=128&d=identicon&r=PG&f=1", "display_name": "Quinn", "link": "https://stackoverflow.com/users/5741681/quinn"}, "is_accepted": true, "score": 1, "last_activity_date": 1459110729, "last_edit_date": 1459110729, "creation_date": 1459101911, "answer_id": 36250759, "question_id": 36249358, "link": "https://stackoverflow.com/questions/36249358/regex-for-any-characters-including-new-lines-in-perl/36250759#36250759", "title": "Regex for any characters including new lines in Perl", "body": "<p>I did not find <code>~m</code> and <code>@ARGV</code> in your test string. So, I made another pattern:</p>\n\n<pre><code>&lt;td&gt;((?:&lt;span.*\\n*){3})&lt;/td&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/vH9tY4/6\" rel=\"nofollow\"><strong>REGEX 101 DEMO.</strong></a></p>\n"}], "owner": {"reputation": 33, "user_id": 6120825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6f2b03b11a6f5124bffd48f0d39e7a?s=128&d=identicon&r=PG&f=1", "display_name": "kata", "link": "https://stackoverflow.com/users/6120825/kata"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "closed_date": 1459107586, "accepted_answer_id": 36250759, "answer_count": 1, "score": 0, "last_activity_date": 1459110729, "creation_date": 1459093965, "question_id": 36249358, "link": "https://stackoverflow.com/questions/36249358/regex-for-any-characters-including-new-lines-in-perl", "closed_reason": "Duplicate", "title": "Regex for any characters including new lines in Perl", "body": "<p>I need a regular expression like <code>([.\\n]*)</code> but that doesn't work. I have tried the <code>s</code> modifier also...</p>\n\n<p>I want to get data from a table and the regular expression which is working in a few cases is:</p>\n\n<pre><code>~m/&gt;(@ARGV)&lt;\\/.*\\n(&lt;td.*\\n*.*\\/td&gt;\\n){3}&lt;td(.*\\n*.*\\n*)&lt;\\/td&gt;/\n</code></pre>\n\n<p>I need to use the <code>$3</code>, but the number of newlines is not  defined and I have no idea how could I solve this problem. Can someone please help me?</p>\n"}, {"tags": ["perl", "filenames", "pathname"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459092725, "post_id": 36249057, "comment_id": 60127857, "body": "Are you talking about generating paths for use in shell commands?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459092973, "post_id": 36249057, "comment_id": 60127925, "body": "@ThisSuitIsBlackNot - they are used in two ways. First, it is sometimes used to call another program, like NSAM. In this case, there are no option; I&#39;m only asking PERL to build the pathname correctly for me. I&#39;ll handle the options. Second, its adding include directories and libraries directories for a Makefile. This is the case that is causing me the most trouble. Currently logic splits on the space, so a path like <code>C:\\Program Files\\My Program</code> is being tokenized into <code>-IC:\\Program</code> and <code>-IFiles\\My</code> and <code>-IProgram</code>. This is the case I am actively working."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459097418, "post_id": 36249057, "comment_id": 60129527, "body": "As far as I know you need to do nothing more than enclose the path in double quotes. Unless the path contains quotes or dollar signs that will work everywhere I can think of"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459100332, "post_id": 36249057, "comment_id": 60130580, "body": "@Borodin - PERL does not concatenate quoted path and filename properly. I&#39;m guessing it probably won&#39;t handle two quoted paths."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459104076, "post_id": 36249057, "comment_id": 60131915, "body": "@jww: That depends on the context. You should build your path string correctly and <i>then</i> enclose it in quotes to pass it to whatever. You should always use <a href=\"https://p3rl.org/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a>  or <a href=\"https://p3rl.org/File::Spec::Functions\" rel=\"nofollow noreferrer\">File::Spec::Functions</a> to work with file paths. You need to say more about what you&#39;re doing"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459105659, "post_id": 36249057, "comment_id": 60132491, "body": "Oh, and it&#39;s <b><i>Perl</i></b>, like <i>Python</i> and <i>Ruby</i>. It&#39;s not an acronym, even though you will read about people having invented one for it after the fact. It was originally going to be called <i>Pearl</i> but there was already a language called <i>PEARL</i> (which <i>is</i> an acronym!)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459182247, "post_id": 36249057, "comment_id": 60160446, "body": "File::Spec::Win32 and File::Spec::Unix do no validation in <code>catdir</code>, <code>catfile</code>, and <code>canonpath</code>; they simply do a series of substitutions on what you pass them. If you pass an invalid path component (e.g. one containing a null byte on *nix or <a href=\"https://msdn.microsoft.com/en-us/library/aa365247\" rel=\"nofollow noreferrer\">a double quote on Windows</a>, I think), you&#39;ll get an invalid result: garbage in, garbage out. I agree that File::Spec should warn about this; it&#39;s been in core for a long time, so maybe there&#39;s a reason it doesn&#39;t warn. I would file a bug report/feature request."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459182639, "post_id": 36249057, "comment_id": 60160640, "body": "Ah, thanks ThisSuitIsBlackNot. I presumed Perl knew what it was doing. It suited me well because the quoted path came in as a command line argument, and the baked output needed it, too. Perl did not produce an error, so I thought it knew what it was doing. I presumed I was lacking a call to a function that normalizes or canonicalizes. Live and learn... (I&#39;m going to try some of the other, more egregious characters, like <code>+</code> and <code>*</code>, to see if they are mishandled, too)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459182793, "post_id": 36249057, "comment_id": 60160723, "body": "@ThisSuitIsBlackNot - perhaps you should answer since you seem to have the complete picture. Others will likely land here through a search, and it will likely benefit the to know the handling behaviors."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459184435, "post_id": 36249057, "comment_id": 60161334, "body": "I&#39;ll throw together an answer if I get some time, although I think Borodin&#39;s answer shows how you have to do this. As for <code>+</code> and <code>*</code>, you can pass any characters you want and File::Spec::Win32 and File::Spec::Unix will happily pass them through; see the <a href=\"https://metacpan.org/source/RJBS/PathTools-3.62/lib/File/Spec/Unix.pm#L102\" rel=\"nofollow noreferrer\">source</a> for the pure-Perl version of <code>File::Spec::Unix::cat_dir</code>, for example, which just does a <code>join</code> on <code>&#47;</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459332689, "post_id": 36249057, "comment_id": 60235171, "body": "Borodin - sorry, I have no idea what you are talking about."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459374197, "post_id": 36249057, "comment_id": 60263878, "body": "Thinking about this more, <code>catdir</code>, <code>catfile</code>, etc. probably don&#39;t warn about this because which characters are valid in filenames <a href=\"https://en.wikipedia.org/wiki/Filename#Comparison_of_filename_limitations\" rel=\"nofollow noreferrer\">depends on the underlying filesystem</a>. <code>catdir</code> and <code>catfile</code> don&#39;t examine the filesystem, so there&#39;s no way they could generate an accurate warning."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459143479, "post_id": 36251381, "comment_id": 60142259, "body": "@jww: You may be right, but the usual response is for you to add more explanation. You seem to be hoping for a library that will let you use path segments whether or not they are already quoted? If you gave a better example of the problem then I am sure we could help. Why does your <code>C:\\Program Files</code> string contain quotes and where did they come from? Where is your compound string <code>$testcat</code> destined for?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459144195, "post_id": 36251381, "comment_id": 60142450, "body": "@jww: You also mention <i>\u201cPerl ignoring the directory separator for the platform\u201d</i> which seems only tenuously related to the main thrust of your question. The usual solution is to push path strings through <code>canonpath</code> to normalise them. An explanation of this, too, wouldn&#39;t hurt"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459147830, "post_id": 36251381, "comment_id": 60143628, "body": "@jww: All of that is what <code>File::Spec</code> does. But you are convolving the building of a path string with processing it so that it is represented unambiguously in a variety of circumstances. In some cases it may simply need wrapping in quotes, and I think that may be all that&#39;s necessary here. But just as you would <i>decode</i> a Unicode character string on input before processing it and then <i>encode</i> it on output, you need to <i>unquote</i> your path segments on input, work with them, and then <i>quote</i> them before output"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459147985, "post_id": 36251381, "comment_id": 60143685, "body": "@jww: The precise nature of that quoting and unquoting depends on the rules and requirements of the intended environment, and it would be nonsense to pick a random style of quoting and default to that in, say, <code>File::Spec</code>. I think all you need is <code>s&#47;\\A&quot;(.*)&quot;\\z&#47;$1&#47;</code> on everything on input, and <code>qq{&quot;$path&quot;}</code> on output. I need to elaborate on that, but it&#39;s the basic idea"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1459161737, "post_id": 36251381, "comment_id": 60149456, "body": "@jww: No, that&#39;;s wrong. <code>File::Spec</code> will do that for you. The canonical form of a file path doesn&#39;t involve escaping characters or enclosing it in quotes on any platform"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467625506, "last_edit_date": 1467625506, "creation_date": 1459105437, "answer_id": 36251381, "question_id": 36249057, "link": "https://stackoverflow.com/questions/36249057/perl-function-to-normalize-path-with-spaces/36251381#36251381", "title": "Perl function to normalize path with spaces?", "body": "<p>I'm not sure why you think you need a library function to wrap something in double quotes?</p>\n\n<p>You're mixing in the quotes/escapes far too early. They're only needed in certain circumstances when they are part of a longer string that will be treated as a space-separated list of substrings. The most obvious example being a command line for cmd/bash</p>\n\n<p>While you're working with the string in your program you need <em>just</em> the plain path string without any decoration. Once you've built your path, create your command line (or whatever) with quotes around it, and it should all work</p>\n\n<p>I've never been able to get the escape character for Windows cmd (which is circumflex <code>^</code>) to work reliably, so I always wrap any strings that contain space characters in double quotes. That works on Windows and any flavour of Unix, including OSX</p>\n\n<p>Here's an example using the code in your question. Note that there's no need to be so careful about using <code>catdir</code> and <code>catfile</code> appropriately: unless you're building a root directory like <code>C:\\</code> they behave identically on systems where there is no syntactical distinction between files and directories () which includes all the platforms you mention in your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Spec::Functions qw/ catfile /;\n\nmy $testcat = catfile('C:\\Program Files', 'My Program', 'test.txt');\n\nprint qq{Test cat: \"$testcat\"\\n};\n\nsystem qq{type \"$testcat\"};\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Test cat: \"C:\\Program Files\\My Program\\test.txt\"\nTESTCAT CONTENTS\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Here's another example showing how path segments that have reached your program can be <em>unquoted</em> before they're used. I've defined three scalar variables. Some or all of those may have originated outside your program, while others may be defined like this, as string literals. The point is that <code>$root</code> is enclosed in unwanted double quotes; it is an invalid path segment and won't work if you pass it to <code>catfile</code></p>\n\n<p>So I've written a little subroutine <code>unquote</code> and applied it to <em>all three</em> as we're pretending we don't know which of the segments are quoted and which are not. As you can see from the output, it removes the quotes from <code>$root</code> but leaves the other two strings untouched. Now they're all valid and okay to pass to <code>catfile</code></p>\n\n<p>The output shows that <code>catfile</code> returns <code>Test cat: C:\\Program Files\\My Program\\test.txt</code> which is what we want. Now suppose we want to <em>type</em> it, so we need to create the command line</p>\n\n<pre><code>type \"C:\\Program Files\\My Program\\test.txt\"\n</code></pre>\n\n<p>In the context of the command line, the double quotes are necessary to delimit the path string, but they <em>not part of the path</em></p>\n\n<p>Again, as you can see, the call to <code>system</code> works fine. My file contains <code>TESTCAT CONTENTS</code>, and that is what my program prints</p>\n\n<p>I hope that helps?</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse File::Spec::Functions qw/ catfile /;\n\nmy ($root, $dir, $file) = ( '\"C:\\Program Files\"', 'My Program', 'test.txt');\n\nprint &lt;&lt;END;\nOriginal:\nRoot: $root\nDir:  $dir\nFile: $file\n\nEND\n\n\nunquote($_) for $root, $dir, $file;\n\n\nprint &lt;&lt;END;\nUnquoted:\nRoot: $root\nDir:  $dir\nFile: $file\n\nEND\n\n\nmy $testcat = catfile($root, $dir, $file);\n\nsay \"Full path: $testcat\";\n\nmy $cmd = qq{type \"$testcat\"};\nsay \"Command is:\\n$cmd\\n\";\n\nsystem $cmd;\n\n\nsub unquote {\n    $_[0] =~ s/\\A\"([^\"]*)\"\\z/$1/;\n    $_[0];\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Original:\nRoot: \"C:\\Program Files\"\nDir:  My Program\nFile: test.txt\n\nUnquoted:\nRoot: C:\\Program Files\nDir:  My Program\nFile: test.txt\n\nFull path: C:\\Program Files\\My Program\\test.txt\nCommand is:\ntype \"C:\\Program Files\\My Program\\test.txt\"\n\nTESTCAT CONTENTS\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459231393, "post_id": 36274916, "comment_id": 60179590, "body": "<i>&quot;I&#39;m not sure how you managed to get the output you describe...&quot;</i> - I literally took the MCVE, and plugged it into OpenSSL&#39;s <a href=\"http://github.com/openssl/openssl/blob/master/Configure#L157\" rel=\"nofollow noreferrer\"><code>Configure</code></a> script at line 165. And I ran it on Windows 7 x64 with Strawberry Perl 5.22."}, {"owner": {"reputation": 19444, "user_id": 1438, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8989210e0bee8c33c698cfbb79a2afe7?s=128&d=identicon&r=PG", "display_name": "Jon Ericson", "link": "https://stackoverflow.com/users/1438/jon-ericson"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1459232190, "post_id": 36274916, "comment_id": 60179980, "body": "That&#39;s a fairly random thing to do. Is that the script you are maintaining? What, exactly, are you trying to accomplish? Are you sure the output is <i>exactly</i> as you included in the question?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459232569, "post_id": 36274916, "comment_id": 60180209, "body": "<i>This is where things get funky. catdir expects a list of directories...</i> - yeah, this is what got me. Microsoft runtimes and scripts will reject an <a href=\"http://msdn.microsoft.com/en-us/library/fyy7a5kt%28v=vs.110%29.aspx\" rel=\"nofollow noreferrer\">invalid path</a> during path building. When Perl did not reject, I presumed it was happy and mostly knew what it was doing. That was a colossal mistake..."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459232841, "post_id": 36274916, "comment_id": 60180364, "body": "<i>&quot;That&#39;s a fairly random thing to do. Is that the script you are maintaining?&quot;</i> - It&#39;s not random; its the script causing the problems. Its choking on paths with spaces. Also see, for example, <a href=\"https://rt.openssl.org/Ticket/Display.html?id=4486&amp;user=guest&amp;pass=guest\" rel=\"nofollow noreferrer\">Issue 4466: NMAKE fatal error U1073: &quot;don&#39;t know how to make &#39;LNAME\\openssl</a>. Its not limited to Windows. On *nix, I can duplicate it with <i><code>cd &#47;tmp; git clone git:&#47;&#47;git.openssl.org&#47;openssl.git &quot;openssl workspace&quot;</code></i>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459235253, "post_id": 36274916, "comment_id": 60181635, "body": "Now open for the Linux and Unix world: <a href=\"https://rt.openssl.org/Ticket/Display.html?id=4492&amp;user=guest&amp;pass=guest\" rel=\"nofollow noreferrer\">Issue 4492: Configure, Unix and Linux, and malformed command line when path includes spaces</a>. I lack the Perl skills to go any further with it. The mainstream devs will have to handle it."}, {"owner": {"reputation": 19444, "user_id": 1438, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8989210e0bee8c33c698cfbb79a2afe7?s=128&d=identicon&r=PG", "display_name": "Jon Ericson", "link": "https://stackoverflow.com/users/1438/jon-ericson"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1459268701, "post_id": 36274916, "comment_id": 60205032, "body": "@jww: When debugging perl scripts, I rarely find the .NET documentation as useful as Perl documentation. I&#39;m not sure about 4466, but the problem in 4492 is almost certainly with Makefile.in, so you are barking up the wrong tree. You should read: <a href=\"http://stackoverflow.com/questions/7039130/bash-iterate-over-list-of-files-with-spaces\" title=\"bash iterate over list of files with spaces\">stackoverflow.com/questions/7039130/&hellip;</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459334358, "post_id": 36274916, "comment_id": 60236344, "body": "Thanks Jon. <i>&quot;I rarely find the .NET documentation as useful as Perl documentation...&quot;</i> - absolutely, agreed. The problem is, on Windows, there are some reserved characters that cannot be used in filenames. For whatever reason, Perl did not reject them. When Perl did not reject the quote, I presumed it knew how to handle paths with spaces and quoted paths. I&#39;m guessing it will allow other illegal characters, like <code>:</code> on Apple&#39;s HFS. It seems like some of Perl&#39;s file functions are just dumb string functions repackaged."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1459356430, "post_id": 36274916, "comment_id": 60253198, "body": "Thanks again Jon. <i>&quot;... the problem in 4492 is almost certainly with Makefile.in&quot;</i> - I&#39;m familiar with makefiles, so I was able to follow up on it. I don&#39;t believe <code>Makefile.in</code> is the culprit. <code>find</code> is used regularly, and the few uses of <code>ls</code> are limited to building the tarball. Also, the include directories are built by the confgure script and Perl. By the time they hit the makefile they are already mis-processed. Thanks for the tip, though."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459364812, "post_id": 36274916, "comment_id": 60258540, "body": "@Borodin This is kind of a lame workaround, but you can make an edit to unlock your vote. I just edited so you should be able to change your vote now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459370401, "post_id": 36274916, "comment_id": 60261837, "body": "@ThisSuitIsBlackNot: Hah! I was aware that an edit would unlock the vote but it never occurred to do it myself. Or perhaps it wouldn&#39;t have worked if it was my edit. Anyway it&#39;s fixed. Thank you"}], "tags": [], "owner": {"reputation": 19444, "user_id": 1438, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8989210e0bee8c33c698cfbb79a2afe7?s=128&d=identicon&r=PG", "display_name": "Jon Ericson", "link": "https://stackoverflow.com/users/1438/jon-ericson"}, "is_accepted": false, "score": 2, "last_activity_date": 1459364716, "last_edit_date": 1592644375, "creation_date": 1459222371, "answer_id": 36274916, "question_id": 36249057, "link": "https://stackoverflow.com/questions/36249057/perl-function-to-normalize-path-with-spaces/36274916#36274916", "title": "Perl function to normalize path with spaces?", "body": "<p>I'm not sure how you managed to get the output you describe. On Windows I get:</p>\n<blockquote>\n<p>Test cat: &quot;C:\\Program Files&quot;\\My Program\\test.txt</p>\n</blockquote>\n<p>On OSX, I get:</p>\n<blockquote>\n<p>Test cat: &quot;C:\\Program Files&quot;/My Program/test.txt</p>\n</blockquote>\n<p>Which OS and version of Perl are you using? Is it possible you left out some relevant parts of your script.</p>\n<hr />\n<p>Your <a href=\"https://stackoverflow.com/help/mcve\">example</a> shows confusion about quoting and escaping strings in Perl. It might help to break it down into smaller pieces to see what's going on and put the pieces together later:</p>\n<pre><code>print &quot;\\&quot;C:\\\\Program Files\\&quot;&quot;\n</code></pre>\n<blockquote>\n<p>&quot;C:\\Program Files&quot;</p>\n</blockquote>\n<p>This is probably what you expected. It uses raw interpolation to build the string you want to use. Note: you can simplify this statement by using non-interpolated strings:</p>\n<pre><code>print '&quot;C:\\Program Files&quot;'\n</code></pre>\n<p>Appending the directory, you start using File::Spec:</p>\n<pre><code>use File::Spec::Functions;\nprint catdir('&quot;C:\\Program Files&quot;', &quot;My Program&quot;)\n</code></pre>\n<blockquote>\n<p>&quot;C:\\Program Files&quot;\\My Program</p>\n</blockquote>\n<p>This is where things get funky. <a href=\"http://perldoc.perl.org/File/Spec.html#catdir\" rel=\"nofollow noreferrer\">catdir expects a list of directories</a>, but you provided a string that is almost certainly <em>not</em> a directory as the first item in the list.</p>\n<p>Given you prepended the directory with the <code>C:\\</code> volume, there's a good chance you actually want to use the <a href=\"http://perldoc.perl.org/File/Spec.html#catpath%28%29\" rel=\"nofollow noreferrer\">catpath function</a>:</p>\n<blockquote>\n<ul>\n<li><p>catpath()</p>\n<p>Takes volume, directory and file portions and returns an entire path. Under Unix, $volume is ignored, and directory and file are concatenated. A '/' is inserted if need be. On other OSes, $volume is significant.</p>\n<pre><code>  $full_path = File::Spec-&gt;catpath( $volume, $directory, $file );\n</code></pre>\n</li>\n</ul>\n</blockquote>\n<p>The resulting string would not be directly useable on the command line if there are spaces because Perl makes some rather Unixish assumptions. But as answers to the <a href=\"https://stackoverflow.com/q/4285989/1438\">related question</a> point out, you can insert double quotes <em>after</em> constructing the path. As it turns out double quotes escape protect spaces on OSX and Linux; you don't need to escape each individual space.</p>\n<p>Alternatively, use a module designed for accomplishing whatever you are trying to do. <a href=\"http://search.cpan.org/perldoc?File::Copy\" rel=\"nofollow noreferrer\">File::Copy</a> does a good job of addressing cross-platform concerns, for instance.</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1467625506, "creation_date": 1459092256, "last_edit_date": 1495539855, "question_id": 36249057, "link": "https://stackoverflow.com/questions/36249057/perl-function-to-normalize-path-with-spaces", "title": "Perl function to normalize path with spaces?", "body": "<p>I'm in maintenance mode and I'm working with a Perl script that is run on Apple, Linux, Windows and Unix. Some Apple and Linux and most Windows have spaces in the path. On Windows, the long file name needs quotes. On Apple and Linux the space needs a backslash. If there's no space, then nothing needs to be done.</p>\n\n<p>Perl's <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\"><code>File::Copy</code></a> and <a href=\"http://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\"><code>File::Spec</code></a> are aware of system differences and it abstracts them for different file systems. Looking through the other <code>File</code> functions, I don't see what is used to normalize or canonicalize a pathname which adds quotes, slashes, moves quotes around, etc. as required.</p>\n\n<p>Perl version requirements are v5.10. So I should be able to expect at least v5.10 without any trouble.</p>\n\n<p>What is the Perl function to normalize or canonicalize path with spaces?</p>\n\n<hr>\n\n<p>Here's an oversimplified example on Windows:</p>\n\n<pre><code>my $testcat = catfile(catdir(\"\\\"C:\\\\Program Files\\\"\", \"My Program\"), \"test.txt\");\nprint \"Test cat: $testcat\\n\";\n</code></pre>\n\n<p>The result is the following. Notice the quoting is not right and the path separator is wrong.</p>\n\n<pre><code>Test cat: \"C:/Program Files\"/My Program/test.txt\n</code></pre>\n\n<p>Here is what I expert on a Windows system (or an error):</p>\n\n<pre><code>Test cat: \"C:\\Program Files\\My Program\\test.txt\"\n</code></pre>\n\n<hr>\n\n<p>There are similar questions, but they all seem to be one-off. For example <a href=\"https://stackoverflow.com/q/4285989/608639\">How to handle filenames with spaces?</a> says to manually add quotes for Windows. I'm looking for the Perl routines to do it.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 6, "last_activity_date": 1459090500, "creation_date": 1459090500, "answer_id": 36248736, "question_id": 36248433, "link": "https://stackoverflow.com/questions/36248433/download-cpan-module-distribution-archive-i18nlanginfo/36248736#36248736", "title": "Download CPAN module distribution archive: I18N::Langinfo", "body": "<p>I18N::Langinfo is a core module that isn't released separately on CPAN (i.e. it's not a \"dual-life\" module like Data::Dumper, for example). To get the source for the module, you have to get the entire Perl source tree.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlsource.html#Core-modules\" rel=\"noreferrer\">perlsource</a>:</p>\n\n<blockquote>\n  <p>Modules shipped as part of the Perl core live in four subdirectories. Two of these directories contain modules that live in the core, and two contain modules that can also be released separately on CPAN. Modules which can be released on cpan are known as \"dual-life\" modules.</p>\n  \n  <p>...</p>\n  \n  <ul>\n  <li><p>ext/</p>\n  \n  <p>Like lib/, this directory contains modules which are only released as part of the core. Unlike lib/, however, a module under ext/ generally has a CPAN-style directory- and file-layout and its own Makefile.PL. There is no expectation that a module under ext/ will work with earlier versions of Perl 5. Hence, such a module may take full advantage of syntactical and other improvements in Perl 5 blead.</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36248736, "answer_count": 1, "score": 2, "last_activity_date": 1459090500, "creation_date": 1459088633, "question_id": 36248433, "link": "https://stackoverflow.com/questions/36248433/download-cpan-module-distribution-archive-i18nlanginfo", "title": "Download CPAN module distribution archive: I18N::Langinfo", "body": "<p>I am trying to download the module distribution archive for <a href=\"https://metacpan.org/pod/I18N::Langinfo\" rel=\"nofollow\"><code>I18N::Langinfo</code></a>:</p>\n\n<pre><code>cpan -g I18N::Langinfo\n</code></pre>\n\n<p>which gives me a 14 megabyta file <code>perl-5.22.1.tar.bz2</code>. This archive contains 5633 files, where the subfolder <code>ext/I18N-Langinfo</code> contains the 4 files I am interested in. </p>\n\n<p>Why do I get all the other files also? When I download a modules distribution archive I would expect to get the files in that distribution, I am not interested in the 5629 other files.</p>\n"}, {"tags": ["text-processing", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "siri"}, "reply_to_user": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "edited": false, "score": 0, "creation_date": 1459085403, "post_id": 36251467, "comment_id": 60132561, "body": "Here the numerical data refers to a sequence of digits like 1947 ."}, {"owner": {"user_type": "does_not_exist", "display_name": "siri"}, "edited": false, "score": 0, "creation_date": 1459085563, "post_id": 36251467, "comment_id": 60132562, "body": "sample input: \u0c2e\u0c4b\u0c24\u0c40\u0c32\u0c3e\u0c32\u0c4d \u0c28\u0c46\u0c39\u0c4d\u0c30\u0c42 (\u0c06\u0c02\u0c17\u0c4d\u0c32\u0c02 : Motilal Nehru) (\u0c2e\u0c47 6, 1861 \u2013 \u0c2b\u0c3f\u0c2c\u0c4d\u0c30\u0c35\u0c30\u0c3f 6, 1931). \u0c2d\u0c3e\u0c30\u0c24\u0c40\u0c2f \u0c38\u0c4d\u0c35\u0c3e\u0c24\u0c02\u0c24\u0c4d\u0c30\u0c4d\u0c2f \u0c38\u0c2e\u0c30 \u0c2f\u0c4b\u0c27\u0c41\u0c21\u0c41 \u0c2e\u0c30\u0c3f\u0c2f\u0c41 \u0c2d\u0c3e\u0c30\u0c24 \u0c1c\u0c3e\u0c24\u0c40\u0c2f \u0c15\u0c3e\u0c02\u0c17\u0c4d\u0c30\u0c46\u0c38\u0c4d \u0c28\u0c3e\u0c2f\u0c15\u0c41\u0c21\u0c41. \u0c07\u0c24\u0c28\u0c41, \u0c2c\u0c32\u0c40\u0c2f\u0c2e\u0c48\u0c28 \u0c30\u0c3e\u0c1c\u0c15\u0c40\u0c2f \u0c15\u0c41\u0c1f\u0c41\u0c02\u0c2c \u0c38\u0c4d\u0c25\u0c3e\u0c2a\u0c15\u0c41\u0c21\u0c41.                                   output: 4 (8,1861,6,1931)"}, {"owner": {"reputation": 5469, "user_id": 350713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2b37134235e21817f74cd8c47eb0538d?s=128&d=identicon&r=PG", "display_name": "Faheem Mitha", "link": "https://stackoverflow.com/users/350713/faheem-mitha"}, "edited": false, "score": 0, "creation_date": 1459099100, "post_id": 36251467, "comment_id": 60132563, "body": "Please put additional information in the question, not in comments. Also, the question is unclear. Are you asking for the number of characters in your line which are numeric? Or are you asking for the number of distinct numeric substrings that are contained in a line?"}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 4316166, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jszIp.jpg?s=128&g=1", "display_name": "kos", "link": "https://stackoverflow.com/users/4316166/kos"}, "is_accepted": false, "score": 1, "last_activity_date": 1459088383, "creation_date": 1459088383, "answer_id": 36251468, "question_id": 36251467, "link": "https://stackoverflow.com/questions/36251467/how-to-find-number-of-numerical-data-for-each-and-every-line-in-a-file/36251468#36251468", "title": "How to find number of numerical data for each and every line in a file", "body": "<p>You could do something like this:</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>perl -ne 'BEGIN{my $x} $x += () = /[0-9]+/g; END{print($x . \"\\n\")}' file\n</code></pre>\n\n<ul>\n<li><p><code>-n</code>: causes Perl to assume the following loop around your program, which makes it iterate over filename arguments somewhat like sed -n or awk:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>LINE:\n  while (&lt;&gt;) {\n      ...             # your program goes here\n  }\n</code></pre></li>\n<li><p><code>-e</code>: may be used to enter one line of program;</p></li>\n<li><code>()</code> will make <code>/[0-9]+/g</code> be evaluated in list context (i.e. <code>() = /[0-9]+/g</code> will return an array containing the sequences of one or more digits found in the default input), while <code>$x +=</code> will make the result be evaluated again in scalar context (i.e. <code>$x += () = /[0-9]+/g</code> will add the number of sequences of one or more digits found in the default input to <code>$x</code>); <code>END{print($x . \"\\n\")</code> will print <code>$x</code> after the whole file has been processed.</li>\n</ul>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>% cat file\nstring 123 string 1 string string string\n456 string\n% perl -ne 'BEGIN{my $x} $x += () = /[0-9]+/g; END{print($x . \"\\n\")}' file\n3\n% \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": 0, "last_activity_date": 1459109176, "creation_date": 1459109176, "answer_id": 36252035, "question_id": 36251467, "link": "https://stackoverflow.com/questions/36251467/how-to-find-number-of-numerical-data-for-each-and-every-line-in-a-file/36252035#36252035", "title": "How to find number of numerical data for each and every line in a file", "body": "<p>I'd do something like this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy $file = 'num.txt';\n\nopen my $fh, '&lt;', $file or die \"Failed to open $file: $!\\n\";\n\nwhile (my $line = &lt;$fh&gt;){\n    chomp $line;\n    my @num = $line =~ /([0-9.]+)/g;\n    print \"On this line --- \" .scalar(@num) . \"\\n\";\n}\nclose ($fh);\n</code></pre>\n\n<p>The input file I tested --</p>\n\n<pre><code>This should say 1\nLine 2 should say 2\nI want this line to say 5 so I have added 4 other numbers like 0.02 -1 and 5.23\n</code></pre>\n\n<p>The output as tested ----</p>\n\n<pre><code>On this line --- 1\nOn this line --- 2\nOn this line --- 5\n</code></pre>\n\n<p>Using the regex match ([0-9.]+) will match ANY number and include any decimals (I guess really you could use just ([0-9]+) since you are only counting them and not using the actually number represented.)</p>\n\n<p>Hope it helps.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1459105811, "question_id": 272449}, "owner": {"user_type": "does_not_exist", "display_name": "siri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1459109176, "creation_date": 1459084821, "question_id": 36251467, "link": "https://stackoverflow.com/questions/36251467/how-to-find-number-of-numerical-data-for-each-and-every-line-in-a-file", "title": "How to find number of numerical data for each and every line in a file", "body": "<p>Please help me to count the numerical data in each line of a file,\nand also to find the line length. The code has to written in Perl.\nFor example if I have a line such as:</p>\n\n<pre><code>INPUT:I was born on 24th october,1994.\nOutput:2\n</code></pre>\n"}, {"tags": ["windows", "perl", "genetic"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2570380"}, "edited": false, "score": 1, "creation_date": 1459066695, "post_id": 36245158, "comment_id": 60120395, "body": "Since the files are large, they cannot be loaded into memory. I think the best way would be to use the <code>rdiff</code> utility using PHP. Although, I&#39;m not sure if the generated delta file would suit your purposes of step 4."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459068428, "post_id": 36245158, "comment_id": 60120802, "body": "@user2570380: Is there an rdiff build for WIndows?"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 1, "creation_date": 1459068672, "post_id": 36245158, "comment_id": 60120849, "body": "Are differences to be determined by a line-by-line comparison? If yes: where is the problem? If no: The way the files must be compared will dictate how to do it, and it needs to be known in order to find &quot;the best way&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2570380"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459068794, "post_id": 36245158, "comment_id": 60120889, "body": "@Borodin No, Cygwin must be used."}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459070771, "post_id": 36245158, "comment_id": 60121370, "body": "@user2570380 Can you please expalin more about rdiff utility using PHP?"}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1459071407, "post_id": 36245158, "comment_id": 60121554, "body": "@user2570380 Do you mean diff utility of cygwin?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2570380"}, "edited": false, "score": 0, "creation_date": 1459094088, "post_id": 36245158, "comment_id": 60128346, "body": "@Alaa: You can read more abour <code>rdiff</code> here: <a href=\"https://librsync.sourcefrog.net/rdiff.html\" rel=\"nofollow noreferrer\">librsync.sourcefrog.net/rdiff.html</a>. But you may also find answers to this question helpful: <a href=\"http://stackoverflow.com/questions/688504/binary-diff-tool-for-very-large-files\" title=\"binary diff tool for very large files\">stackoverflow.com/questions/688504/&hellip;</a>"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1459070281, "creation_date": 1459065719, "last_edit_date": 1459070281, "question_id": 36245158, "link": "https://stackoverflow.com/questions/36245158/how-to-compare-two-big-text-files-without-keeping-both-in-memory", "title": "How to compare two big text files without keeping both in memory", "body": "<p>I am working on developing a genetic application. The user will select database file to search against. </p>\n\n<p>The system should do:</p>\n\n<ol>\n<li>find the previous version of the database file.</li>\n<li>find differences between the 2 database files.</li>\n<li>put the differences in a third file.</li>\n<li>then perform the search against the new file (third one). </li>\n</ol>\n\n<p>The database file is large (300 GB genomics data). I am using Windows as operating system, my application was written in js, PHP, Perl and HTML.</p>\n\n<p>What is the best way to find the differences between those files?</p>\n"}, {"tags": ["perl", "www-mechanize-firefox"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1459048991, "post_id": 36243320, "comment_id": 60117219, "body": "<code>DOMConentLoaded</code> should be <code>DOMContentLoaded</code>. Also, note that the callback that you supply should generally be an action (such as a call to <code>click</code>) that will give rise to the given event. Clearly a simple <code>print</code> statement won&#39;t do that. What are you trying to achieve?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459049825, "post_id": 36243320, "comment_id": 60117352, "body": "I want to wait for the page to load before taking the next action without a <code>sleep</code> command."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1459052002, "post_id": 36243320, "comment_id": 60117684, "body": "The next action is to check the title of the page to see if the login was successful. If I don&#39;t <code>sleep</code> it returns the title of the login page."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459053476, "post_id": 36243320, "comment_id": 60117912, "body": "@StevieD: Try putting the call to <code>submit_form</code> inside the anonymous subroutine and moving the <code>print</code> to after the <code>synchronize</code> call. That&#39;s at least the way it&#39;s supposed to work. I can&#39;t write the code for you as I&#39;m on a tablet"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467025077, "post_id": 36243320, "comment_id": 63543027, "body": "@StevieD What came out of this? I&#39;d be curious to know whether the answers work, as they do for me."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1459073890, "post_id": 36245219, "comment_id": 60122206, "body": "This is something I have already tried and the same thing happens: the new page gets loaded and then the script just hangs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1459075684, "post_id": 36245219, "comment_id": 60122677, "body": "@StevieD: Then it&#39;s really hard to know what to suggest. Can you tell us the name of the site so that I can test?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1459080003, "post_id": 36245219, "comment_id": 60123766, "body": "It&#39;s just a generic WordPress site. I can&#39;t give you the login credentials for it, however."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459066213, "creation_date": 1459066213, "answer_id": 36245219, "question_id": 36243320, "link": "https://stackoverflow.com/questions/36243320/how-to-use-synchronize-method-with-wwwmechanizefirefox/36245219#36245219", "title": "How to use synchronize method with WWW::Mechanize::Firefox?", "body": "<p>The subroutine that you pass to <code>synchronize</code> is meant to do something that kicks off an update to the browser page. <code>synchronize</code> calls it and then waits for the event you have specified before it returns</p>\n\n<p>Clearly your <code>print</code> statement won't change the web page at all, so no events will fire and your code will be suspended indefinitely</p>\n\n<p>I suggest you put the call to <code>submit_form</code> in the subroutine you pass to <code>synchronize</code>. That at least stands a chance of causing <code>DOMContentLoaded</code> to fire</p>\n\n<p>It would look like this</p>\n\n<pre><code>$mech-&gt;get('http://example.com/wp-login.php');\n\n$mech-&gt;synchronize('DOMContentLoaded', sub {\n    $mech-&gt;submit_form( with_fields =&gt; { log =&gt; 'admin', pwd =&gt; 'password' });  \n});\n\nprint Dumper $self-&gt;title;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1538761940, "last_edit_date": 1538761940, "creation_date": 1459154106, "answer_id": 36258748, "question_id": 36243320, "link": "https://stackoverflow.com/questions/36243320/how-to-use-synchronize-method-with-wwwmechanizefirefox/36258748#36258748", "title": "How to use synchronize method with WWW::Mechanize::Firefox?", "body": "<p><strong>Short</strong> &nbsp; Two solutions below -- Don't specify the event to wait for (so that its default list is used), or use <code>click</code> method which does wait on its own, instead of <code>submit_form</code>.</p>\n\n<hr>\n\n<p>I see the same problem with <code>form_submit</code>, and with the <code>synchronize</code> method. Either the next call still gets the page being submitted, or the script hangs with <code>synchronize</code> (used, correctly, as in <a href=\"https://stackoverflow.com/a/36245219/4653379\">Borodin's answer</a>). I test with a site which does a bit of work as a form is submitted.</p>\n\n<p>Wrapping calls in <code>synchronize</code> is borne with some subtleties.  What events are fired or not is not clear and can also be affected (earlier in the code). I found that the code works when no events are specified in the call, and the default list of <code>events()</code> is thus checked for.</p>\n\n<pre><code>mech-&gt;synchronize( sub { \n    $mech-&gt;submit_form( with_fields =&gt; { log =&gt; 'admin', pwd =&gt; 'password' } );\n});\n$mech-&gt;save_content('after_submit.html');\n</code></pre>\n\n<p>The following call gets the correct page.</p>\n\n<hr>\n\n<p>The documentation never mentions waiting with <code>form</code> methods, so some synchronization is needed. However, the <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox/lib/WWW/Mechanize/Firefox.pm#$mech-click_$name_[,$x_,$y]_)\" rel=\"nofollow noreferrer\"><code>click</code></a> method <em>does wait</em>, by default (one can change that with <code>synchronize</code> option). </p>\n\n<p>So I found this to solve the problem as well: Fill the form and <code>click</code> it.</p>\n\n<pre><code># Get the page with the form\n$mech-&gt;fields( log =&gt; 'admin', pwd =&gt; 'password' );\n$mech-&gt;click( name =&gt; 'Login' );  # whatever the name is  \n$mech-&gt;save_content('after_submit.html');\n</code></pre>\n\n<p>The next call after <code>click</code> gets the actual next page.</p>\n\n<p>In case the form has no name on <code>&lt;input&gt;</code>, for example, this works as well</p>\n\n<pre><code>$mech-&gt;click_button(input =&gt; 'submit');\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1538761940, "creation_date": 1459046874, "last_edit_date": 1459074242, "question_id": 36243320, "link": "https://stackoverflow.com/questions/36243320/how-to-use-synchronize-method-with-wwwmechanizefirefox", "title": "How to use synchronize method with WWW::Mechanize::Firefox?", "body": "<p>I'm using <a href=\"https://p3rl.org/WWW::Mechanize::Firefox\" rel=\"nofollow\"><code>WWW::Mechanize::Firefox</code></a> and am trying to use the <code>synchronize</code> method like so:</p>\n\n<pre><code>$mech-&gt;get('http://example.com/wp-login.php');\n$mech-&gt;submit_form( with_fields =&gt; {log =&gt; 'admin', pwd =&gt; 'password'});\n$self-&gt;synchronize( 'DOMContentLoaded', sub {print Dumper($self-&gt;title()); });\nexit;\n</code></pre>\n\n<p>The title of the newly loaded page prints but then the script just hangs. It never exits. What am I missing?</p>\n"}, {"tags": ["html", "regex", "perl"], "comments": [{"owner": {"reputation": 1, "user_id": 3081129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c9dd8aa5a6b40a8f44ca3d17b5f01f5?s=128&d=identicon&r=PG&f=1", "display_name": "user3081129", "link": "https://stackoverflow.com/users/3081129/user3081129"}, "edited": false, "score": 0, "creation_date": 1459021874, "post_id": 36240080, "comment_id": 60110350, "body": "by the way, I&#39;ve seen the multitude of suggestions  on other HTML cpan modules to use in lieu of regex, but got a boss that wants regex..."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 3, "creation_date": 1459025230, "post_id": 36240080, "comment_id": 60111542, "body": "Never parse XML/HTML/CSV files using regex. Use the existing modules, they are usually mature, stable and well tested. You can&#39;t achieve this with regex."}, {"owner": {"reputation": 1, "user_id": 3081129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c9dd8aa5a6b40a8f44ca3d17b5f01f5?s=128&d=identicon&r=PG&f=1", "display_name": "user3081129", "link": "https://stackoverflow.com/users/3081129/user3081129"}, "edited": false, "score": 0, "creation_date": 1459028261, "post_id": 36240080, "comment_id": 60112572, "body": "sln -  I got nothing on that regex... I tried that version before... it gets neither...."}, {"owner": {"reputation": 1, "user_id": 3081129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c9dd8aa5a6b40a8f44ca3d17b5f01f5?s=128&d=identicon&r=PG&f=1", "display_name": "user3081129", "link": "https://stackoverflow.com/users/3081129/user3081129"}, "edited": false, "score": 0, "creation_date": 1459028323, "post_id": 36240080, "comment_id": 60112596, "body": "sln -  the regex in my provided code works, but only returns the 1st multi-line comment..."}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1459029860, "post_id": 36241119, "comment_id": 60113058, "body": "For scripts that should run on both Windows and Unix/Linux, <code>#!&#47;usr&#47;bin&#47;perl</code> shebang is useful."}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1459069402, "post_id": 36241119, "comment_id": 60121049, "body": "HTML5 has a concise definition for &quot;comment&quot;, e.g. forbidding white space between <code>--</code> and <code>&gt;</code>. HTML 4 has a rather slovenly definition."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467625530, "last_edit_date": 1467625530, "creation_date": 1459027809, "answer_id": 36241119, "question_id": 36240080, "link": "https://stackoverflow.com/questions/36240080/trying-to-get-perl-regex-to-find-multi-line-and-single-line-html-comments/36241119#36241119", "title": "Trying to get perl regex to find multi-line AND single-line HTML comments", "body": "<p>I presume this is production code, in which case your manager is a scary man as this sort of practice can result in hard-to-find bugs. That's acceptable if the code is only for yourself, but inflicting that on others is unfair</p>\n\n<p>Some notes on your code</p>\n\n<ul>\n<li><p>The shebang line <code>#!</code> is unnecessary on Windows systems, and in fact does nothing unless you specify command-line options there. It's best to drop it altogether</p></li>\n<li><p><em>Always</em> <code>use strict</code> and <code>use warnings 'all'</code>, and fix the bugs rather than disabling warnings with <code>no warnings 'uninitialized'</code></p></li>\n<li><p><code>BEGIN {  unshift @INC, 'C:\\rmhperl' }</code> is best written <code>use lib 'C:\\rmhperl'</code> but you're not using libraries in this case so it will have no effect</p></li>\n<li><p>You should use <em>lexical</em> file handles with the <em>three-parameter</em> form of <code>open</code></p></li>\n<li><p>There is no need for <code>(?s)</code> in the regex pattern as well as the <code>/s</code> modifier. Unless you are doing something fancy like enabling options for only part of the pattern (which you're not) then people will understand you better if you use the modifier <code>/s</code></p></li>\n</ul>\n\n<p>The reason you're only finding one comment is that you're only asking for one. In scalar context a global regex pattern match will iterate through all the matches in the target string one at a time. You only call it once so it finds only the first. You can fix that by using a <code>while</code> in place of <code>if</code></p>\n\n<p>I've improved your regex pattern somewhat by making sure that the opening <code>&lt;--</code> isn't followed by <code>&gt;</code> or by <code>-&gt;</code> which would form an illegal HTML comment. There may also be optional space after the closing <code>--</code> and the <code>&gt;</code> so I've allowed for that. And you are insisting on a newline after the end of the comment which may not be there, so I've removed that</p>\n\n<p>This code seems to work with your data</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $text = do {\n    open my $fh, '&lt;', 'test.html' or print qq{Unable to open file \"test.html\" for input: $!};\n    local $/;\n    &lt;$fh&gt;;\n};\n\nwhile ( $text =~ /(&lt;!--(?!-?&gt;).*?--\\s*&gt;)/sg ) {\n    my $comment = $1;\n    print $comment, \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;!--\na:link {color: #0000ff;}\n a:visited {color: #3563a8;} \n a:active {color: #000000;}\n a:hover {background-color: #000000;}\n a {text-decoration: none;}\n --&gt;\n&lt;!-- &lt;li&gt;&lt;a href=\"xyz.com\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n --&gt;\n&lt;!--1st drop down menu\n--&gt;\n&lt;!--2nd drop down menu --&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3081129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c9dd8aa5a6b40a8f44ca3d17b5f01f5?s=128&d=identicon&r=PG&f=1", "display_name": "user3081129", "link": "https://stackoverflow.com/users/3081129/user3081129"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467629096, "creation_date": 1459021621, "last_edit_date": 1592644375, "question_id": 36240080, "link": "https://stackoverflow.com/questions/36240080/trying-to-get-perl-regex-to-find-multi-line-and-single-line-html-comments", "title": "Trying to get perl regex to find multi-line AND single-line HTML comments", "body": "<p>I'm trying to find both single and multi-line comments in an HTML file. I've stripped it down to just a few examples, and some other content just to have something there.</p>\n<p>I've read a lot of the entries here but can't get a definitive answer to this. I'm reading in the HTML file in &quot;slurp&quot; mode, and doing a match of my pattern. This code runs now and prints only the first match.</p>\n<pre><code>#!C:\\Perl\\bin\\perl.exe \n\nBEGIN {  unshift @INC, 'C:\\rmhperl'; } \n\nuse warnings;\nno warnings 'uninitialized';\n\nchdir 'c:\\watts\\html'; \n\nopen FILE, &quot;test.html&quot; or print 'error opening file &quot;test.html&quot; ';\nmy $text = do { local $/; &lt;FILE&gt; };\nclose(FILE);\n\nif ($text =~ m/(?s)(&lt;!--.*?)(--&gt;\\n)/sg) {\n    print &quot;1 = $1  2= $2\\n&quot;;\n}\n\nexit;\n</code></pre>\n<p>I've set up single and multi-line comments in the HTML file. I can get one or the other printed but not both (at least in &quot;slurp&quot; mode).</p>\n<p>I'm told I should be able to accomplish this with a single regex, so the objective is <em>&quot;find all HTML comments, regardless of their being single/multi-line comments&quot;</em>.</p>\n<p>I built the regex to find both, but finds only the first match -- a multi-line comment.</p>\n<p>I'm trying to find a way to find <em>every</em> match, whether it occurs on one line or multiple lines. I can find one or the other, but I can't get them to work with one regex.</p>\n<p>I can do non-slurp mode, and find the <code>&lt;!--</code> tag, then loop until I see the <code>--&gt;</code> tag, but wanted to see if I can get it to work with a single regex.</p>\n<p>I've been reading about this, and trying to find relevant examples. can't see what I'm missing. Here's the HTML file snippet I have been using for the regex:</p>\n<h3>HTML file</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n \n&lt;script type=&quot;text/javascript&quot; src=&quot;fadeslideshow.js&quot;&gt;&lt;/script&gt;\n&lt;style&gt;\n\n.divTable {\n    display: block;\n    width: 100%;\n}\n\n.divTableBody, .divTableRow{ clear: both; }\n\n.divTableCell {\n    border: 1px solid #999999;\n    float: left;\n    overflow: hide;\n    padding: 2%;\n    width: 45%; }\n\n.divTable:after {\n    display: block;\n    font-size: 0;\n    content: &quot; &quot;;\n    clear: both;\n    height: 100px; }\n&lt;/style&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n&lt;!--\na:link {color: #0000ff;}\n a:visited {color: #3563a8;} \n a:active {color: #000000;}\n a:hover {background-color: #000000;}\n a {text-decoration: none;}\n --&gt;\n &lt;/style&gt; \n&lt;/head&gt;\n    &lt;body class=&quot;home&quot;&gt;\n\n &lt;div id=&quot;white_back&quot;&gt;\n&lt;div style=&quot;text-align: center&quot;&gt;\n&lt;/div&gt;\n&lt;div class=&quot;chromestyle&quot; id=&quot;chromemenu&quot;&gt;\n&lt;ul&gt;\n&lt;!-- &lt;li&gt;&lt;a href=&quot;xyz.com&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;\n --&gt;\n &lt;li&gt;&lt;a href=&quot;#&quot; rel=&quot;dropmenu0&quot;&gt;About Us&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;#&quot; rel=&quot;dropmenu5&quot;&gt;Publications&lt;/a&gt;&lt;/li&gt;   \n&lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;!--1st drop down menu\n--&gt;                                                   \n&lt;div id=&quot;dropmenu0&quot; class=&quot;dropmenudiv&quot;&gt;\n&lt;/div&gt;\n\n&lt;!--2nd drop down menu --&gt;\n&lt;div id=&quot;dropmenu1&quot; class=&quot;dropmenudiv&quot;&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["string", "perl", "integer", "word"], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1459019024, "post_id": 36238993, "comment_id": 60109247, "body": "You should check the return value of the regex before trusting <code>$1</code>. Or better: <code>my ($days) = $SENTENCE =~ &#47;(\\d+) days?&#47;</code>"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1459016086, "creation_date": 1459016086, "answer_id": 36238993, "question_id": 36238920, "link": "https://stackoverflow.com/questions/36238920/in-perl-how-to-get-the-number-that-occurs-before-a-specific-word/36238993#36238993", "title": "In Perl, how to get the number that occurs BEFORE a specific word?", "body": "<p>Use a regex with a capture group:</p>\n\n<pre><code>$SENTENCE =~ /(\\d+) days?/;\nmy $days = $1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1459049147, "creation_date": 1459049147, "answer_id": 36243509, "question_id": 36238920, "link": "https://stackoverflow.com/questions/36238920/in-perl-how-to-get-the-number-that-occurs-before-a-specific-word/36243509#36243509", "title": "In Perl, how to get the number that occurs BEFORE a specific word?", "body": "<p>Use regex to capture the digit</p>\n\n<pre><code>my ($day) = $sentence =~ /(\\d+)Days?/g;\n</code></pre>\n\n<p>Or else another way for group the word with in pattern match by using <code>(?{})</code></p>\n\n<pre><code>$Sentence =~ /(\\d+)Days?(?{my $day = $1})/g:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5043419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGtks.jpg?s=128&g=1", "display_name": "velz", "link": "https://stackoverflow.com/users/5043419/velz"}, "is_accepted": false, "score": 0, "last_activity_date": 1459141467, "creation_date": 1459141467, "answer_id": 36256277, "question_id": 36238920, "link": "https://stackoverflow.com/questions/36238920/in-perl-how-to-get-the-number-that-occurs-before-a-specific-word/36256277#36256277", "title": "In Perl, how to get the number that occurs BEFORE a specific word?", "body": "<p>use Look-ahead property and get your number of days </p>\n\n<pre><code>my $SENTENCE = \"get schwifty for 7 days\";\n($num) = $SENTENCE =~m/(\\d+)(?=\\s+days?)/;\nprint $num;\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5164527, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10153040192953595/picture?type=large", "display_name": "driedupsharpie", "link": "https://stackoverflow.com/users/5164527/driedupsharpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459141467, "creation_date": 1459015754, "question_id": 36238920, "link": "https://stackoverflow.com/questions/36238920/in-perl-how-to-get-the-number-that-occurs-before-a-specific-word", "title": "In Perl, how to get the number that occurs BEFORE a specific word?", "body": "<p>suppose I have the string:</p>\n\n<p><code>my $SENTENCE = \"get schwifty for 7 days\"</code></p>\n\n<p>-...and I want to figure out the number of days. how could I get the number 7 from this if i know it will ALWAYS come before the word day/days?</p>\n"}, {"tags": ["perl", "datetime", "dst"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1459009122, "post_id": 36237607, "comment_id": 60105718, "body": "Not a programming question."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459009204, "post_id": 36237607, "comment_id": 60105746, "body": "I wouldn&#39;t let the user enter invalid dates, i.e. reject them, and internally only use UTC."}, {"owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459009600, "post_id": 36237607, "comment_id": 60105894, "body": "@PerlDog In this scenario users can not input a valid date because they have to select them but they can type the time in many different ways which they are parsed. Of course if they type 53:69 it is rejected, but if they type 02:10 during a DST change, how can we know that such a time does not exist? Use UTC internally is helpful for operations with dates but the problem here is that the input is directly wrong because of the mentioned reason."}, {"owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1459009672, "post_id": 36237607, "comment_id": 60105922, "body": "@mob what type of question is this if not programming related?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1459009837, "post_id": 36237607, "comment_id": 60105996, "body": "I meant <i>time</i>, not <i>date</i>, sorry for that. But <i>who</i> rejects times like <code>53:69</code>? Can&#39;t you make that party also reject <code>02:30</code>?"}, {"owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459010742, "post_id": 36237607, "comment_id": 60106317, "body": "@PerlDog the thing is that 53:69 is always a non-valid time that can be easily detected because of a wrong format (for example with a regex). In the 02:30 case the format is correct but it does not exists because of the fact that once in a year in many locations around the world the clock moves forward e.g. from 02:00 to 03:00."}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 1, "creation_date": 1459012078, "post_id": 36237607, "comment_id": 60106772, "body": "Just to add a little pepper to the dish: What do you do with the &quot;backing up&quot; hour when the TZ returns from DST? - Moral of the story: any input of a local time is subject to doubt unless it is made with a well-understood convention of the underlying TZ. This specification includes the times when the DS switches occur, and can be used to validate and, ultimately, convert user input into UTC."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1459013197, "post_id": 36237607, "comment_id": 60107146, "body": "@laune You&#39;re so mean! ;-) But right. Perhaps one should have thought about this problem not just the night before it arises."}, {"owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1459015169, "post_id": 36237607, "comment_id": 60107820, "body": "@laune In this scenario the user input data (including date and time) is not used anymore much before the TZ returns from DST"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1459015442, "post_id": 36237607, "comment_id": 60107925, "body": "@Zillo I thought this is about detecting and refusing incorrect time-of-day entries. What has the time of the use of this data got to do with telling right from wrong? Ot are you just worried about booking wake-up calls?"}, {"owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "reply_to_user": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1459024479, "post_id": 36237607, "comment_id": 60111296, "body": "@laune In my previous comment I was just trying to answer your question about the &quot;backing up&quot; hour when the TZ returns from DST. Actually a booking wake-up calls app from where the user (which can use any TZ) can select a day from a 10 days calendar but they freely type the time in a textfield (parsed afterwards) does not seem to be a bad example of the real case. As said before the problem arise when the user choose to receive the call a correct day but in a time that does not exist because of time is moved forward X hours/minute (generally 1 hour) due to DST related changes."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1459046412, "post_id": 36237607, "comment_id": 60116808, "body": "&quot;how should we deal wih a non-existent time because of DST clock forward&quot; Inform the user that the time they entered is invalid and ask them to enter a valid time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1459048012, "post_id": 36237607, "comment_id": 60117050, "body": "How to handle bad inputs depends a lot on context, of which you provided none. Most of the time, the action is aborted and an error message is provided."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459085843, "post_id": 36244969, "comment_id": 60125494, "body": "This doesn&#39;t really answer the question. Also, the 3 seconds around the DST change would be 01:59:59 ATZ, 03:00:00 ADZ, 03:00:01 ADZ when entering and 01:59:59 ADZ, 01:00:00 ATZ, 01:00:01 ATZ when leaving."}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459099090, "post_id": 36244969, "comment_id": 60130133, "body": "That was careless of me - thanks for the tip.  That is what I meant to type but I copied each line and focussed not the zone, offset and seconds and forgot the hours.  Why doesn&#39;tit aanswer the question?  When calling the constructor, you have to always supply the zone."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459099587, "post_id": 36244969, "comment_id": 60130280, "body": "The question is, what should I do when a user enters an invalid time? (e.g. 02:00:00 ADZ on the first day of DST in your example) The OP is already passing the time zone in the constructor."}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459100882, "post_id": 36244969, "comment_id": 60130768, "body": "Ive tried to make it clearer.  Thank you for your constructive, useful and accurate criticism."}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 0, "last_activity_date": 1459113902, "last_edit_date": 1459113902, "creation_date": 1459064184, "answer_id": 36244969, "question_id": 36237607, "link": "https://stackoverflow.com/questions/36237607/perl-datetime-and-non-existent-time-user-input-because-of-dst-clock-forward/36244969#36244969", "title": "perl DateTime and non-existent time user input because of DST clock forward", "body": "<p>As you go into Daylight Savings, there's no problem.  Assuming DLS starts at 2am on a given day in the fictitious time zone, ATZ (a timezone) with an offset of N hrs, then the three seconds commencing one second before 2am are timestamped;</p>\n\n<pre><code>1:59:59 ATZ +N\n3:00:00 ADZ +(N+1)\n3:00:01 ADZ +(N+1)\n</code></pre>\n\n<p>...and when coming out of Daylight savings ...</p>\n\n<pre><code>2:00:00 ADZ +(N+1)\n2:00:01 ADZ +(N+1)\n...\n... about an hour later\n...\n2:59:59 ADZ +(N+1)\n2:00:00 ATZ +N\n2:00:01 ATZ\n</code></pre>\n\n<p>There appears to have been an earlier \"2:00:01\" but that included an offset of (N+1)  - or was in the timezone ADZ - whereas this one is in ATZ (N).  The DateTime module raises the issue like this:</p>\n\n<h2>Ambiguous Local Times</h2>\n\n<p><em>Because of Daylight Saving Time, it is possible to specify a local time that is ambiguous. For example, in the US in 2003, the transition from to saving to standard time occurred on October 26, at 02:00:00 local time. The local clock changed from 01:59:59 (saving time) to 01:00:00 (standard time). This means that the hour from 01:00:00 through 01:59:59 actually occurs twice, though the UTC time continues to move forward.</em></p>\n\n<p>To avoid the issue, you are going to have to always include the timezone or offset when creating time objects. To do that, you need to use the date (you said you had it) to detect that it is end-of-DLS day and, if the user has chosen a time within the critical hour, you're going to have to prompt for \"is that 2:30am ADZ or 2:30am ATZ?\" or something similar.  Likewise, if it's start-of-DLS, your interface has to refuse entries referencing the critical hour.</p>\n\n<p>Earlier in the doco for DateTime, there's the suggestion - for performance reasons - of determining the local timezone once and then using it throughout your app;</p>\n\n<pre><code>our $App::LocalTZ = DateTime::TimeZone-&gt;new( name =&gt; 'local' );\n\n... # then everywhere else\n\nmy $dt = DateTime-&gt;new( ..., time_zone =&gt; $App::LocalTZ );\n</code></pre>\n\n<p>... but this is going to leave you vulnerable to the issue again.  Since your interface is going to have to know its start-of-DLS day or end-of-DLS day, you can set and use $App::LocalTZ as advised and then override with the specific, prompted-for Timezone if it's end-of-DLS day.</p>\n"}], "owner": {"reputation": 91, "user_id": 1175573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8828a3cd7ef42f059ed8435cc0f942cf?s=128&d=identicon&r=PG", "display_name": "Zillo", "link": "https://stackoverflow.com/users/1175573/zillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1459113902, "creation_date": 1459008757, "last_edit_date": 1459009836, "question_id": 36237607, "link": "https://stackoverflow.com/questions/36237607/perl-datetime-and-non-existent-time-user-input-because-of-dst-clock-forward", "title": "perl DateTime and non-existent time user input because of DST clock forward", "body": "<p>In a scenario where we know the timezone of the user and the date but the time is input by the user in a textbox (i.e. a calendar where an user selects the date but types the time), after it is properly parsed and we know the hours and minutes, how should we deal wih a non-existent time because of DST clock forward (eg. 02:00 does not exist because of clocks are turned forward 1 hour) in order to pass it -at least an existent hour- to DateTime->new();?</p>\n\n<pre><code>use DateTime;\n$dt = DateTime-&gt;new(\n    year   =&gt; $year_userinput,  #2016\n    month  =&gt; $month_userinput,  #03\n    day    =&gt; $day_userinput,  #27\n    hour   =&gt; $hour_userinput,  #02\n    minute =&gt; $minute_userinput,  #30\n    second =&gt; 0,\n    time_zone =&gt; $timezone_userinput,  #Europe/Berlin\n);\n</code></pre>\n\n<blockquote>\n  <p>Error: Invalid local time for date in time zone: Europe/Berlin</p>\n</blockquote>\n"}, {"tags": ["closures", "perl"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1459021677, "post_id": 36239183, "comment_id": 60110277, "body": "How did you determine the prototype of <code>reduce</code>? I tried to determine it from the <a href=\"https://metacpan.org/source/PEVANS/Scalar-List-Utils-1.45/lib/List/Util.pm\" rel=\"nofollow noreferrer\">source code</a> at <a href=\"https://metacpan.org/\" rel=\"nofollow noreferrer\">metacpan.org</a> but it gives me no prototypes ( it just calls <code>XSLoader::load()</code> )."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1459025815, "post_id": 36239183, "comment_id": 60111739, "body": "@H&#229;konH&#230;gland: The module&#39;s coded in C so it&#39;s in <a href=\"http://cpansearch.perl.org/src/PEVANS/Scalar-List-Utils-1.45/ListUtil.xs\" rel=\"nofollow noreferrer\">the XS file <code>ListUtil.xs</code></a> at line 369"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1459025870, "last_edit_date": 1459025870, "creation_date": 1459017074, "answer_id": 36239183, "question_id": 36237274, "link": "https://stackoverflow.com/questions/36237274/how-to-use-a-nested-closure-as-the-first-argument-to-listutilreduce/36239183#36239183", "title": "How to use a nested closure as the first argument to List::Util::reduce?", "body": "<p><code>List::Util::reduce</code> uses a Perl <em>prototype</em> which specifies a <em>compile-time</em> check on the parameters passed in a call. Passing a scalar variable that contains a subroutine reference cannot be verified at compile time so Perl disallows it</p>\n\n<p>This is also the route to the the solution. It is usually considered bad practice to call a subroutine using an ampersand character <code>&amp;</code> but in this case it will defeat the prototype checking, which is what is required</p>\n\n<pre><code>sub foo {\n\n  my ( $x, $y ) = @_;\n\n  my $z = sub {\n    our ( $a, $b );\n    return exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a;\n  };\n\n  return &amp;List::Util::reduce( $z, 0, 0 .. $#{ $y } ); # Defeat prototype\n}\n</code></pre>\n\n<p>Note that this isn't possible in general, as a prototype can do such things as force an array or hash to be passed by reference, or force scalar context on an expression, and calling such a subroutine using <code>&amp;</code> will disable these behaviours as well. But <code>reduce</code> has a prototype of <code>&amp;@</code> which means a block or <code>sub { }</code> (the <code>sub</code> part is optional here) followed by a list of scalars, which is the normal behaviour for a subroutine without a prototype, so the only effect is to allow <code>$z</code> to be passed for the subroutine reference</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1459069177, "post_id": 36243487, "comment_id": 60120987, "body": "How to use the last form <code>reduce \\&amp;BLOCK, LIST</code> ? I tried the following: <code>perl -mList::Util -E &#39;say List::Util::reduce \\&amp;{ $a &gt; $b ? $a : $b }, 1..10&#39;</code> and I got segmentation fault."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1459099712, "post_id": 36243487, "comment_id": 60130316, "body": "The block is evaluated on the spot and must return a ref to a sub, such as <code>\\&amp;{ $z }</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1459100119, "last_edit_date": 1459100119, "creation_date": 1459048972, "answer_id": 36243487, "question_id": 36237274, "link": "https://stackoverflow.com/questions/36237274/how-to-use-a-nested-closure-as-the-first-argument-to-listutilreduce/36243487#36243487", "title": "How to use a nested closure as the first argument to List::Util::reduce?", "body": "<p><code>reduce</code> has a prototype of <code>&amp;@</code>. That means calls must use one of the following syntax:</p>\n\n<pre><code>reduce BLOCK LIST\nreduce sub BLOCK, LIST  # The first form is short for this.\nreduce \\&amp;NAME, LIST\nreduce \\&amp;$NAME, LIST    # Same as third form, but via reference (short form)\nreduce \\&amp;BLOCK, LIST    # Same as third form, but via reference (long form)\n</code></pre>\n\n<p>You could use any of the following equivalent statements:</p>\n\n<pre><code>return reduce { exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a } 0, 0 .. $#$y;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code># Long way of writing the first.\nreturn reduce(sub { exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a }, 0, 0 .. $#$y);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my $z = sub { exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a };\nreturn reduce(\\&amp;$z, 0, 0 .. $#$y);\n</code></pre>\n\n<p>You also have the option of overriding the prototype.</p>\n\n<pre><code>my $z = sub { exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a };\nreturn &amp;reduce($z, 0, 0 .. $#$y);\n</code></pre>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 36243487, "answer_count": 2, "score": 5, "last_activity_date": 1459100119, "creation_date": 1459007055, "last_edit_date": 1459010546, "question_id": 36237274, "link": "https://stackoverflow.com/questions/36237274/how-to-use-a-nested-closure-as-the-first-argument-to-listutilreduce", "title": "How to use a nested closure as the first argument to List::Util::reduce?", "body": "<p>NB: the closure featured in this question is just a convenient example; the one I'm actually working with is substantially more complex than this.  IOW, please disregard the details of this closure; all that matters, AFAICT, is that it refers to lexical variables in the parent scope.</p>\n\n<hr>\n\n<p>I want to redefine the sub <code>foo</code> below so that the first argument in the call to <code>List::Util::reduce</code> is replaced with a reference to a nested closure.</p>\n\n<pre><code>use strict;\nuse warnings FATAL =&gt; 'all';\nuse List::Util;\n\nsub foo {\n  my ( $x, $y ) = @_;\n  return List::Util::reduce { $y-&gt;[ $b ]{ $x } ? $a + ( 1 &lt;&lt; $b ) : $a } 0, 0 .. $#$y;\n}\n</code></pre>\n\n<p>My first attempt was this:</p>\n\n<pre><code>sub foo {\n  my ( $x, $y ) = @_;\n  sub z {\n    our ( $a, $b );\n    return exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a;\n  }\n  return List::Util::reduce \\&amp;z, 0, 0 .. $#{ $y };\n}\n</code></pre>\n\n<p>...but this results in a warning saying that <code>Variable \"$y\" will not stay shared</code>.</p>\n\n<p>I've seen this sort of error before, and the only way I know around it is to replace the nested <code>sub</code> definition with an anonymous sub assigned to a variable.  Therefore, I tried this instead:</p>\n\n<pre><code>sub foo {\n  my ( $x, $y ) = @_;\n  my $z = sub {\n    our ( $a, $b );\n    return exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a;\n  };\n  return List::Util::reduce( $z, 0, 0 .. $#{ $y } );\n}\n</code></pre>\n\n<p>Now the error says <code>Type of arg 1 to List::Util::reduce must be block or sub {} (not private variable)</code>.</p>\n\n<p>This I really don't understand.  Why would passing a subref as the first argument to <code>reduce</code> not be supported?</p>\n\n<hr>\n\n<p>PS: The following does work:</p>\n\n<pre><code>sub foo {\n  my ( $x, $y ) = @_;\n  my $z = sub {\n    our ( $a, $b );\n    return exists $y-&gt;[ $b ]{ $x } ? $a | ( 1 &lt;&lt; $b ) : $a;\n  };\n  return List::Util::reduce { $z-&gt;( $a, $b ) } 0, 0 .. $#{ $y };\n}\n</code></pre>\n\n<p>...but I really would like to know (a) what's wrong with using a subref as the first argument to <code>List::Util::reduce</code> (e.g. is there some technical impediment to supporting this variant?); and (b) is there a more direct approach (than <code>{ $z-&gt;( $a, $b ) }</code>) to passing to <code>List::Util::reduce</code> a nested closure?</p>\n"}, {"tags": ["windows", "perl", "command-line", "scheduled-tasks"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459008605, "post_id": 36234421, "comment_id": 60105519, "body": "Is your problem that you don&#39;t know how to pass the parameters to your script or how to run it at all? Parameter passing is explained <a href=\"https://social.technet.microsoft.com/Forums/office/en-US/0e12e4bc-b8f2-45b9-97be-e768f3bca2dd/how-to-pass-parameters-to-a-windows-scheduled-task?forum=winservergen\" rel=\"nofollow noreferrer\">here</a>, for example."}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1459025592, "post_id": 36234421, "comment_id": 60111666, "body": "@Perl Dog my problem is both how to pass parameters and how to run it. As I said, I am new to all these concepts."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1458997009, "post_id": 36235343, "comment_id": 60101598, "body": "do you mean to write a perl script that contains just this line? and schedule task to run it?"}, {"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1458997131, "post_id": 36235343, "comment_id": 60101636, "body": "How about :at 05:00 /every:M,T,W,Th,F cmd /cd C:\\Program Files\\NCBI\\blast-2.3.0+\\bin, cmd perl update_blastdb.pl databaseName --passive?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1458995636, "creation_date": 1458995636, "answer_id": 36235343, "question_id": 36234421, "link": "https://stackoverflow.com/questions/36234421/schedule-task-to-run-perl-script-from-command-line/36235343#36235343", "title": "schedule task to run perl script from command line", "body": "<p>I would have thought it was as simple as this</p>\n\n<pre><code>at 05:00 /every:M,T,W,Th,F cmd /c perl update_blastdb.pl databaseName --passive\n</code></pre>\n\n<p>The only problem might be that the current directory isn't what you expect. Scheduled tasks run under the <em>System</em> account with their current directory set to <em>SYSTEMROOT</em>, which is generally <code>C:\\Windows</code></p>\n"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458995636, "creation_date": 1458989551, "last_edit_date": 1458994958, "question_id": 36234421, "link": "https://stackoverflow.com/questions/36234421/schedule-task-to-run-perl-script-from-command-line", "title": "schedule task to run perl script from command line", "body": "<p>I hope I can explain my problem clearly.</p>\n\n<p>I have a Perl script that I run from the command line like this</p>\n\n<pre><code>perl update_blastdb.pl databaseName --passive\n</code></pre>\n\n<p>As you see, I must add parameters in the command line.</p>\n\n<p>I want to automate the running of this script weekly with an parameter.</p>\n\n<p>The task manager in Windows can schedule a task to run automatically, but I think if I give the Perl file path to the task scheduler, it will be run without any parameters.</p>\n\n<p>What is the best way to do what I want? I thought of creating a new Perl file that has:</p>\n\n<ul>\n<li>Arguments in variables fields</li>\n<li>A command variable that sends the parameter with <code>update_blastdb.pl</code> to the command prompt. </li>\n</ul>\n\n<p>But I am just thinking and I don't know whether this is possible.</p>\n\n<p>Can anyone help me find the right direction please?</p>\n"}, {"tags": ["perl", "unicode", "filesystems"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1458984707, "post_id": 36233493, "comment_id": 60098042, "body": "Common file systems in UNIX don&#39;t have a file name encoding, i.e. they treat the file name as octets and not characters. Interpretation as characters is in your case done by the terminal and depends on the locale."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1458984827, "post_id": 36233493, "comment_id": 60098076, "body": "See also <a href=\"http://stackoverflow.com/questions/31371257/creating-filenames-with-unicode-characters\">Creating filenames with unicode characters</a> and <a href=\"http://stackoverflow.com/questions/31383690/could-filefindrule-be-patched-to-automatically-handle-filename-character-enc\">Could File::Find::Rule be patched to automatically handle filename character encoding/decoding?</a>"}, {"owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1458985159, "post_id": 36233493, "comment_id": 60098154, "body": "@SteffenUllrich, I guess they work because my locale specifies UTF8 both for perl (<code>encode(&#39;locale&#39;)</code>) and in find/ls. Still I expected some ugly thing, as the result of <code>encode(&#39;utf-8&#39;, encode(&#39;utf-8&#39;, ...))</code>"}, {"owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1458985896, "post_id": 36233493, "comment_id": 60098366, "body": "@H&#229;konH&#230;gland, so you would say that <code>encode</code> is the good thing to do, and I do agree on this. But it is not clear from the documentation (of both <code>mkdir</code> and <code>File::Path</code>) if they would internally do an encoding for me or not. The <code>File::Find::Rule</code> question is indeed very related!"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "edited": false, "score": 0, "creation_date": 1458986678, "post_id": 36233493, "comment_id": 60098607, "body": "On a UNIX system you might as well omit all encode and decode, and still get the same result. The unicode characters you type are encoded accpording to the locale, and then it&#39;s just octets. (<code>echo a\u2192b\u2190c  | wc -c</code>). - But <i>doing it right</i> depends on your requirements: Is the code just for your system? Do you need portability across windows/mac/unix and perhaps VMS? - Seeing the result of <code>echo a\u2192b\u2190c</code> on my terminal and due to other, weightier reasons, I would avoid filenames that aren&#39;t made up from US-ASCII. :-)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1459001812, "post_id": 36233493, "comment_id": 60103168, "body": "@Dacav Yes, I think <code>encode()</code> should be used before passing argument to <code>mkdir</code> or <code>File::Path::make_path()</code>. The reason why it works without encoding first is described in <code>@ikegami</code>&#39;s answer <a href=\"http://stackoverflow.com/a/31371612/2173773\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": true, "score": 2, "last_activity_date": 1475644204, "creation_date": 1475644204, "answer_id": 39865841, "question_id": 36233493, "link": "https://stackoverflow.com/questions/36233493/unicode-in-perl-mkdir-exercise/39865841#39865841", "title": "Unicode in perl, mkdir exercise", "body": "<blockquote>\n  <ol start=\"3\">\n  <li>How can <code>mkdir</code> and <code>make_path</code> figure out and fix the wrong one?</li>\n  </ol>\n</blockquote>\n\n<p>Perl strings have a \"UTF-8 flag\" that indicates whether the \"characters\" they contain are Unicode characters, vs. octets (eight-bit bytes). You can use the <code>utf8::is_utf8</code> function (see <a href=\"http://perldoc.perl.org/utf8.html\" rel=\"nofollow\">http://perldoc.perl.org/utf8.html</a>) to check if the UTF-8 flag is set for a given string; or you can use <code>Dump</code> from the <code>Devel::Peek</code> module, which prints out all the guts of a scalar, including the list of flags that are set.</p>\n\n<p>So <code>mkdir</code> and <code>make_path</code> don't need to do anything too crazy; they can handle Unicode strings by encoding them as octet strings, just as you're doing when you call <code>encode</code>.</p>\n\n<p>(Unfortunately, the UTF-8 flag thing has a lot of quirks, and not all functions honor it; for example, <code>encode</code> doesn't care whether its argument has that flag set, it just trusts that you wouldn't be calling it on a string unless the string was supposed to be interpreted as a sequence of Unicode characters. But if you use modern, Unicode-aware libraries, and <code>use utf8</code>, and just do everything Unicode-ishly except when specifically interacting with byte-oriented external systems (which you use <code>Encode::encode</code> and <code>Encode::decode</code> for), you should be fine.)</p>\n\n<blockquote>\n  <ol>\n  <li>Am I doing it right code-wise ('course not)?</li>\n  <li>Am I doing it right filesystem-wise?</li>\n  </ol>\n</blockquote>\n\n<p>Yes, except I think you should pay more attention to error cases. What if your input can't be represented in the locale character set? What if it can, but the result isn't a valid filename in your operating system or filesystem?</p>\n\n<p>To address this, you should make two or three changes:</p>\n\n<ul>\n<li>You should provide an explicit third argument to <code>Encode::encode</code> to specify how it should handle non-encodable characters. (The default behavior is to replace them with a replacement character, such as <code>?</code> for US-ASCII; that's probably not what you want.)</li>\n<li>You should examine the return-value of <code>mkdir</code>.</li>\n<li>You may want to use the <code>error</code> option to <code>make_path</code>, and examine the resulting arrayref; or, alternatively, you may want to wrap <code>make_path</code> in an <code>eval</code> block.</li>\n</ul>\n"}], "owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 39865841, "answer_count": 1, "score": 4, "last_activity_date": 1475644204, "creation_date": 1458983182, "question_id": 36233493, "link": "https://stackoverflow.com/questions/36233493/unicode-in-perl-mkdir-exercise", "title": "Unicode in perl, mkdir exercise", "body": "<p>I'm currently learning the art of Unicode Programming, and applying it to a personal project. Soon I realized how it is really difficult to get it right, and even to understand if you did it correctly: if the tool is wrong, you can be mistaken in evaluating the results of your work.</p>\n\n<p>My small goal in this exercise is to understand what I should pass to <code>mkdir</code> versus what is good for <code>File::Path::make_path</code>. In other words: what do they expect? Will they handle the encoding depending on the locale, or should I do it for them?</p>\n\n<p>I wrote the following scripts, which takes arguments from <code>@ARGV</code> and for each of them creates the directory <code>$_</code>, using both functions and both encoded and decoded froms.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse utf8;\nuse v5.16;\n\nuse Encode;\nuse Encode::Locale;\n\nuse File::Path qw/make_path/;\nuse File::Spec;\n\n# Everything under the './tree' directory\nmkdir 'tree';\nmkdir File::Spec-&gt;catdir('tree', $_)\n    for ('mkdir', 'mkdir_enc', 'make_path', 'make_path_enc');\n\nforeach (map decode(locale =&gt; $_) =&gt; @ARGV) {\n    mkdir File::Spec-&gt;catdir('tree', 'mkdir', $_);\n    mkdir encode(locale_fs =&gt; File::Spec-&gt;catdir('tree', 'mkdir_enc', $_));\n\n    make_path(File::Spec-&gt;catdir('tree', 'make_path', $_));\n    make_path(encode(locale_fs =&gt; File::Spec-&gt;catdir('tree', 'make_path_enc', $_)));\n}\n</code></pre>\n\n<p>I executed the script as follows:</p>\n\n<pre><code>./unicode_mkdir.pl a\u2192b\u2190c\n</code></pre>\n\n<p>What I would expect is:</p>\n\n<ul>\n<li>Either <code>tree/mkdir</code> [x]or <code>tree/mkdir_enc</code> contain directories named gibberish;</li>\n<li>Either <code>tree/make_path</code> [x]or <code>tree/make_path_enc</code> contain directories named gibberish;</li>\n</ul>\n\n<p>With great surprise I found out that all version work properly. I verified it with <code>find</code>:</p>\n\n<pre><code>$ find tree\ntree\ntree/mkdir_enc\ntree/mkdir_enc/a\u2192b\u2190c\ntree/mkdir\ntree/mkdir/a\u2192b\u2190c\ntree/make_path_enc\ntree/make_path_enc/a\u2192b\u2190c\ntree/make_path\ntree/make_path/a\u2192b\u2190c\n</code></pre>\n\n<p>I realized that the <code>tree</code> command makes it so wrong\u2026 (a quite common disease) but at least I could see that the results are all the same:</p>\n\n<pre><code>$ tree tree\ntree\n\u251c\u2500\u2500 make_path\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 a\\342\\206\\222b\\342\\206\\220c\n\u251c\u2500\u2500 make_path_enc\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 a\\342\\206\\222b\\342\\206\\220c\n\u251c\u2500\u2500 mkdir\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 a\\342\\206\\222b\\342\\206\\220c\n\u2514\u2500\u2500 mkdir_enc\n    \u2514\u2500\u2500 a\\342\\206\\222b\\342\\206\\220c\n\n8 directories, 0 files\n</code></pre>\n\n<p>A <code>ls -R</code> command seems to confirm it.</p>\n\n<pre><code>$ ls -R tree\ntree:\nmake_path  make_path_enc  mkdir  mkdir_enc\n\ntree/make_path:\na\u2192b\u2190c\n\ntree/make_path/a\u2192b\u2190c:\n\ntree/make_path_enc:\na\u2192b\u2190c\n\ntree/make_path_enc/a\u2192b\u2190c:\n\ntree/mkdir:\na\u2192b\u2190c\n\ntree/mkdir/a\u2192b\u2190c:\n\ntree/mkdir_enc:\na\u2192b\u2190c\n\ntree/mkdir_enc/a\u2192b\u2190c:\n</code></pre>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Am I doing it right code-wise ('course not)?</p></li>\n<li><p>Am I doing it right filesystem-wise?</p></li>\n<li><p>How can <code>mkdir</code> and <code>make_path</code> figure out and fix the wrong one?</p></li>\n<li><p>Or maybe I was just \"reverse-lucky\" (the kind of lucky which doesn't allow you to realize your error, since <em>in your case</em> it? In that case, how I can test it out effectively?</p></li>\n</ol>\n\n<p>Any hint?</p>\n"}, {"tags": ["perl", "plack", "psgi"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 2, "creation_date": 1459039373, "post_id": 36230563, "comment_id": 60115490, "body": "So is the code base the same for each site you will serve probably with different data? Possible you could add a <a href=\"https://en.wikipedia.org/wiki/Reverse_proxy\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Reverse_proxy</a> in front of your server to serve all the addresses"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1459206498, "post_id": 36230563, "comment_id": 60172315, "body": "You probably don&#39;t want to use Plack::Builder for mounting hundreds of different PSGI apps. According to the <a href=\"https://metacpan.org/pod/Plack::App::URLMap#PERFORMANCE\" rel=\"nofollow noreferrer\">Plack::App::URLMap docs</a>: &quot;If you map (or mount with Plack::Builder) N applications, Plack::App::URLMap will need to at most iterate through N paths to match incoming requests. It is a good idea to use map only for a known, limited amount of applications, since mounting hundreds of applications could affect runtime request performance.&quot;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1459206858, "post_id": 36230563, "comment_id": 60172430, "body": "Having said that, you can select which config file to use in a Dancer2 app via an environment variable, and you can mount the same Dancer2 app multiple times, although I haven&#39;t figured out how to do both of these at once. Maybe try asking if it&#39;s possible on the <a href=\"http://lists.preshweb.co.uk/mailman/listinfo/dancer-users\" rel=\"nofollow noreferrer\">dancer-users mailing list</a>."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1459794989, "post_id": 36230563, "comment_id": 60436457, "body": "What about using a single instance of <code>Some::PsgiFramework::MyApp</code> and using <code>$env-&gt;{HTTP_HOST}</code> (or the framework&#39;s equivalent) to customize each site? That&#39;s what I do for some multilingual sites."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1459797169, "post_id": 36230563, "comment_id": 60437664, "body": "@nwellnhof So, is short: what i should use in place of the <code>Some::PsgiFramework:</code>? Which one suports the multi-site mounting on the framework level (build in support - not my own &quot;hacking&quot;)?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1459798313, "post_id": 36230563, "comment_id": 60438357, "body": "Every PSGI app can be mounted multiple times, framework or not. It seems that your actual question is &quot;Which PSGI frameworks support reading different config files depending on the HTTP host?&quot;"}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1459809017, "post_id": 36230563, "comment_id": 60443579, "body": "@nwellnhof No, the question is as above. Youre talking about some &quot;reading config values runtime&quot; - which is an different thing. I want create many <code>instances</code> of the same app. (Please read the code above). When the app is instantiated it knows <i>nothing</i> about the <code>$env-&gt;{HTTP_HOST}</code>. (because the request handling doesn&#39;t even started)."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1486689839, "creation_date": 1486689839, "answer_id": 42149989, "question_id": 36230563, "link": "https://stackoverflow.com/questions/36230563/multi-site-aware-psgi-application-development/42149989#42149989", "title": "Multi-site aware PSGI application development", "body": "<h2>Building the dispatcher in Plack</h2>\n\n<p>There is an alternative to Plack::App::URLMap called <a href=\"https://metacpan.org/pod/Plack::App::HostMap\" rel=\"nofollow noreferrer\">Plack::App::HostMap</a> that does the lookups way faster because it uses a hash internally, not an array. So there is no iterating going on. It just does a hash lookup, and those are really fast in Perl.</p>\n\n<p>The trade-off is that now you can only use constant host names. So if your list is something like this:</p>\n\n<pre><code>example.org\nexample.com\nexample.de\nexample.am\nexample.cx\n</code></pre>\n\n<p>Or with sub-domains like:</p>\n\n<pre><code>one.example.org\ntwo.example.org\nthree.example.org\nfour.example.org\nfive.example.org\nsix.example.org\n</code></pre>\n\n<p>Then this is perfect. On the other hand I am not sure if it supports URLs that also have a constant path part, like <code>http://foo.example.org/bar</code>, where there are lots of <code>foo</code>s, but all of them share the same <code>/bar</code> path where the app is mounted. The module does not have any tests at all, and I couldn't try it. If you look at the changes, there has at least been one person suggesting additional features, so someone other than the author is using it.</p>\n\n<p>To use it, you would switch from Plack::Builder to using the the Plack::App::HostMap as an app that you call methods on.</p>\n\n<pre><code>use Plack::App::HostMap;\n\n# set up %apps (e.g. foo.example.org, bar.example.org)\n\nmy $host_map = Plack::App::HostMap-&gt;new;\n\nfor my $site (@sites) {\n    $host_map-&gt;map( $site =&gt; $apps-&gt;{$site} );\n}\n</code></pre>\n\n<p>You're not telling us what the <code>/</code> route should do, but essentially it also needs a host. If your server has a lot of hostnames then all of them will respond to this request. That's the whole idea of what you want to do. But what hostname is for <code>/</code>? So the best thing to do would be to include an additional line for the <code>sub { ... }</code> slash-app with the <em>real</em> hostname. Maybe that's a control panel or something. So hook it up to the actual URL.</p>\n\n<pre><code> $host_map-&gt;map( \"example.org\" =&gt; sub { ... } );\n</code></pre>\n\n<h2>A web framework to do this with</h2>\n\n<p>The singleton is not really the problem here. It seems not possible to get Dancer2 to load different configs or environments with the same one. I have not tried Mojo, Web::Simple or Catalyst for this use case.</p>\n\n<p>I did try a lot with D2, and the closest I got was having a <code>/</code> route in MyApp, and this PSGI app. Note this <strong>does not work</strong>.</p>\n\n<pre><code>use Plack::Builder;\n\nmy $builder = Plack::Builder-&gt;new;\nforeach my $name (qw/development production/) {\n    $builder-&gt;mount(\n        \"/$name\" =&gt; builder {\n            eval &lt;&lt;\"APP\";\npackage MyApp::$name {\n    use Dancer2;\n    use MyApp with =&gt; { environment =&gt; \"$name\" };\n}\nAPP\n\n            \"MyApp::$name\"-&gt;to_app;\n        }\n    );\n}\n\n$builder-&gt;to_app;\n</code></pre>\n\n<p>It uses the default skeleton generated with <code>dancer2 -a MyApp</code> and unchanged environment files. The dispatching from Plack works, but Dancer2 gets confused.</p>\n\n<pre><code>HTTP::Server::PSGI: Accepting connections at http://0:5000/\n[MyApp::production:4896] core @2017-02-10 02:14:42&gt; looking for get / in /home/julien/perl5/perlbrew/perls/perl-5.20.1/lib/site_perl/5.20.1/Dancer2/Core/App.pm l. 35\n[MyApp::production:4896] core @2017-02-10 02:14:42&gt; Entering hook core.error.init in (eval 49) l. 1\n[MyApp::production:4896] core @2017-02-10 02:14:42&gt; Entering hook core.error.before in (eval 49) l. 1\n[MyApp::production:4896] core @2017-02-10 02:14:42&gt; Entering hook core.error.after in (eval 49) l. 1\n127.0.0.1 - - [10/Feb/2017:02:14:42 +0100] \"GET /production/ HTTP/1.1\" 404 456 \"-\" \"curl/7.47.0\"\n[MyApp::development:4896] core @2017-02-10 02:18:06&gt; looking for get  in /home/julien/perl5/perlbrew/perls/perl-5.20.1/lib/site_perl/5.20.1/Dancer2/Core/App.pm l. 35\n[MyApp::development:4896] core @2017-02-10 02:18:06&gt; Entering hook core.error.init in (eval 49) l. 1\n[MyApp::development:4896] core @2017-02-10 02:18:06&gt; Entering hook core.error.before in (eval 49) l. 1\n[MyApp::development:4896] core @2017-02-10 02:18:06&gt; Entering hook core.error.after in (eval 49) l. 1\n127.0.0.1 - - [10/Feb/2017:02:18:06 +0100] \"GET /development HTTP/1.1\" 404 457 \"-\" \"curl/7.47.0\"\n</code></pre>\n\n<p>The idea was to use the same <em>package file</em> and subclass it to get the different config in via <code>with</code>.</p>\n\n<p>However, it is possible to just define the same app in the loop, over and over again. You could probably move the route handler out use a code ref like <code>get '/' =&gt; \\&amp;main::get_slash</code>, where <code>sub get_slash</code> is not in the <code>eval</code>.</p>\n\n<pre><code>use Plack::Builder;\n\nmy $builder = Plack::Builder-&gt;new;\nforeach my $name (qw/development production/) {\n    $builder-&gt;mount(\n        \"/$name\" =&gt; builder {\n            eval &lt;&lt;\"APP\";\npackage MyApp::$name {\nuse Dancer2;\n    use Data::Printer;\n\n    set environment =&gt; \"$name\";\n\n    get \"/\" =&gt; sub { np(config) }\n}\nAPP\n\n            \"MyApp::$name\"-&gt;to_app;\n        }\n    );\n}\n\n$builder-&gt;to_app;\n</code></pre>\n\n<p>The string <code>eval</code> is not as evil as it looks here as that code only gets run at startup. D2 will internally keep track of all the apps that you created programmatically here. But I have no idea how performant that is.</p>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 172627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e4f593c295278eb258729579ccbbf0?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/172627/steven"}, "is_accepted": false, "score": 1, "last_activity_date": 1487337100, "creation_date": 1487337100, "answer_id": 42298871, "question_id": 36230563, "link": "https://stackoverflow.com/questions/36230563/multi-site-aware-psgi-application-development/42298871#42298871", "title": "Multi-site aware PSGI application development", "body": "<p>I believe that quoted documentation is intended more for Plack::Request and not Plack::Builder.</p>\n\n<p>It is perfectly acceptable to mount various applications (e.g. Dancer/Catalyst/Mojolicious/homegrown app) using Plack::Builder and indeed this is quite common.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 3, "answer_count": 2, "score": 10, "last_activity_date": 1487337100, "creation_date": 1458955301, "last_edit_date": 1459177679, "question_id": 36230563, "link": "https://stackoverflow.com/questions/36230563/multi-site-aware-psgi-application-development", "title": "Multi-site aware PSGI application development", "body": "<p>The <a href=\"https://metacpan.org/pod/Plack::Builder\" rel=\"noreferrer\">Plack::Builder</a> allows mount multiple hosts, e.g. something as the following snippet:</p>\n\n<pre><code>my @sites = load_site_names();\nmy $apps;\nfor my $site (@sites) {\n    $apps-&gt;{$site} = Some::PsgiFramework::MyApp-&gt;new( config =&gt; get_config($site) );\n}\n\nuse Plack::Builder;\nbuilder {\n    for my $site (@sites) {\n        mount \"$site\" =&gt; $apps-&gt;{$site};\n    }\n    mount '/' =&gt; sub { ... };\n}\n</code></pre>\n\n<p>e.g.</p>\n\n<ul>\n<li>the <code>load_site_names</code> returns a list of sites like <code>http://example.com</code> , <code>http://some.other.site.com</code>, ...</li>\n<li>every \"virtual-host\" will use the same <code>Some::PsgiFramework::MyApp</code></li>\n<li>just their config is different</li>\n</ul>\n\n<p>I need exactly the above - need develop one simple web-app which should be deployed for hunderts of different (low-traffic) sites and don't want setup an different PSGI server for each site. </p>\n\n<p>However, the author of the Plack itself says (in the <a href=\"https://metacpan.org/pod/Plack::Request\" rel=\"noreferrer\">Plack::Request</a>)</p>\n\n<blockquote>\n  <p>Note that this module is intended to be used by Plack middleware\n  developers and web application framework developers rather than\n  application developers (end users).</p>\n  \n  <p>Writing your web application directly using Plack::Request is\n  certainly possible but not recommended: it's like doing so with\n  mod_perl's Apache::Request: yet too low level.</p>\n  \n  <p>If you're writing a web application, not a framework, then you're\n  encouraged to use one of the web application frameworks that support\n  PSGI (<a href=\"http://plackperl.org/#frameworks\" rel=\"noreferrer\">http://plackperl.org/#frameworks</a>), or see modules like\n  HTTP::Engine to provide higher level Request and Response API on top\n  of PSGI.</p>\n</blockquote>\n\n<p>And this is the problem.</p>\n\n<p>I checked many of different PSGI based frameworks in the MetaCPAN. And <strong>AFAIK</strong> each is singleton based, e.g. doesn't allows write applications which could be shared (mounted) many times for different sites in the same <code>app.psgi</code>.</p>\n\n<p>So the questions are:</p>\n\n<ul>\n<li>missed I something in the MetaCPAN (or in the docs), and here <strong>exists</strong> <strong>any</strong> (lighweight) web-framework which allows develop applications mountable many times in the <code>app.psgi</code>?</li>\n<li>or i'm forced to develop <code>Just Another My Own PSGI Framework</code>? (To be honest, I not checked the catalyst - as it is too heavy-weight)</li>\n<li>or just badly understand the \"mounting\"?</li>\n</ul>\n"}, {"tags": ["perl", "moo"], "answers": [{"tags": [], "owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "is_accepted": true, "score": 2, "last_activity_date": 1503686771, "last_edit_date": 1503686771, "creation_date": 1503554480, "answer_id": 45854012, "question_id": 36228739, "link": "https://stackoverflow.com/questions/36228739/run-coercions-inside-a-typetiny-custom-constraint/45854012#45854012", "title": "Run coercions inside a Type::Tiny custom constraint?", "body": "<p>With lots of help from <a href=\"https://metacpan.org/pod/distribution/Type-Tiny/lib/Type/Tiny/Manual/Coercions.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/Type-Tiny/lib/Type/Tiny/Manual/Coercions.pod</a> </p>\n\n<p>Library.pm:</p>\n\n<pre><code>package Library;\nuse Type::Library -base, -declare =&gt; qw(Datetime);\nuse Type::Utils -all;\nuse Types::Standard -all;\nuse DateTime::Format::ISO8601;\n\nclass_type Datetime, { class =&gt; 'DateTime' };\ncoerce Datetime,\n  from Str, via { DateTime::Format::ISO8601-&gt;parse_datetime($_) };\n\ndeclare 'MyType', as Dict[ name =&gt; Str, date =&gt; Datetime ], coercion =&gt; 1;\n</code></pre>\n\n<p>MyObj.pm:</p>\n\n<pre><code>package MyObj;\nuse Moo;\nuse Library -all;\n\nhas 'whatsis' =&gt; ( is =&gt; 'ro', isa =&gt; MyType, coerce =&gt; 1 );\n</code></pre>\n\n<p>tester.pl:</p>\n\n<pre><code>#!perl\nuse MyObj;\nmy $obj = MyObj-&gt;new( whatsis =&gt; { name =&gt; 'Something', date =&gt; '2016-01-01' } );\nuse Data::Dumper; print Dumper $obj;\n</code></pre>\n"}], "owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 45854012, "answer_count": 1, "score": 3, "last_activity_date": 1503686771, "creation_date": 1458943225, "question_id": 36228739, "link": "https://stackoverflow.com/questions/36228739/run-coercions-inside-a-typetiny-custom-constraint", "title": "Run coercions inside a Type::Tiny custom constraint?", "body": "<p>I have a custom DateTime type that has a coercion defined on it from string to DateTime, like so:</p>\n\n<pre><code>package Library;\nuse Type::Library -base, -declare =&gt; qw(DateTime);\nuse DateTime::Format::ISO8601;\n\nclass_type DateTime, { class =&gt; 'DateTime' };\n\ncoerce DateTime, from Str, via { DateTime::Format::ISO8601-&gt;parse_datetime($_) };\n</code></pre>\n\n<p>I'd like to use that DateTime type in a Dict, like so:</p>\n\n<pre><code>package MyObj;\nuse Moo;\n$constraint = declare MyType, as Dict[ name =&gt; Str, date =&gt; DateTime ];\n\nhas 'whatsis' =&gt; ( is =&gt; 'ro', isa =&gt; $constraint );\n</code></pre>\n\n<p>And then call it as:</p>\n\n<pre><code>use MyObj;\nmy $obj = MyObj-&gt;new( whatsis =&gt; { name =&gt; 'Something', date =&gt; '2016-01-01' } );\n</code></pre>\n\n<p>I've tried adding <code>coerce =&gt; 1</code> to the declaration of <code>whatsis</code>, but that did no good.</p>\n\n<p>How do I create a custom type that inherits from Dict and runs the type coercions defined on the member types?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1458941614, "post_id": 36227813, "comment_id": 60088021, "body": "Is this the entire file? Are the lines always in the same place in the file?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1458941750, "post_id": 36227813, "comment_id": 60088074, "body": "Also, my advice would be to not try a one-liner until you at least know the basic syntax of the language. The &quot;best way&quot; is irrelevant if you can&#39;t even produce something that runs."}], "answers": [{"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 0, "last_activity_date": 1458939383, "creation_date": 1458939383, "answer_id": 36227893, "question_id": 36227813, "link": "https://stackoverflow.com/questions/36227813/print-specific-lines-from-text-file-using-perl/36227893#36227893", "title": "print specific lines from text file using perl", "body": "<pre><code>perl -ne 'print if $.==5 || $.==6 || $.==7 || $.==10' file.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1458939736, "post_id": 36227919, "comment_id": 60087146, "body": "Obligatory FYI...as of 5.18.0, <a href=\"http://perldoc.perl.org/perl5180delta.html#The-smartmatch-family-of-features-are-now-experimental\" rel=\"nofollow noreferrer\">smartmatch is experimental</a>: &quot;It is clear that smartmatch is almost certainly either going to change or go away in the future. Relying on its current behavior is not recommended.&quot;"}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458939921, "post_id": 36227919, "comment_id": 60087240, "body": "@ThisSuitIsBlackNot Thanks for the information. In 99% of cases I use it as &quot;element exists in the list&quot; operator. Do you think that behavior might change?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458941017, "post_id": 36227919, "comment_id": 60087767, "body": "Yes, there was <a href=\"http://markmail.org/message/u22titrq5ljclz4b\" rel=\"nofollow noreferrer\">talk</a> of removing that aspect of smartmatch entirely. A <a href=\"http://www.nntp.perl.org/group/perl.perl5.porters/2015/09/msg230881.html\" rel=\"nofollow noreferrer\">more recent revival</a> of the smartmatch work doesn&#39;t mention &quot;exists in&quot; either."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1458942807, "post_id": 36227919, "comment_id": 60088460, "body": "Instead of <code>~~</code> you should <code>use List::Util &#39;any&#39;</code> and <code>print if any { $. == $_ } @n</code>"}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1458943081, "post_id": 36227919, "comment_id": 60088578, "body": "Unless you are using a little older Perl distribution: <code>$ perl -le &#39;use List::Util; print $List::Util::VERSION&#39;</code> <code>1.23</code> Accoring to CPAN, <code>any</code> was added to <code>List::Util</code> in version 1.33."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1458943583, "post_id": 36227919, "comment_id": 60088767, "body": "Update List::Util or use List::MoreUtils. If you can&#39;t update and absolutely have to have something from core that&#39;s future-proof, just use <code>grep</code>, since that&#39;s roughly equivalent. (Although <code>any</code> is better for long lists since it bails out on the first match.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458944394, "post_id": 36227919, "comment_id": 60089077, "body": "@bart: If you must hang on to a module that&#39;s over three years old then you can use <code>first</code> in place of <code>any</code>. Or you can do it without a module at all and use <code>print if grep $. == $_, @n</code>. Just <i>please</i> don&#39;t recommend smart match"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": true, "score": 1, "last_activity_date": 1458939508, "creation_date": 1458939508, "answer_id": 36227919, "question_id": 36227813, "link": "https://stackoverflow.com/questions/36227813/print-specific-lines-from-text-file-using-perl/36227919#36227919", "title": "print specific lines from text file using perl", "body": "<p>You can use 'smartmatch' operator for this task:</p>\n\n<pre><code>perl -ne 's/^#//; @n = (5, 6, 7, 10); print if $. ~~ @n'  file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1458944498, "last_edit_date": 1458944498, "creation_date": 1458943265, "answer_id": 36228751, "question_id": 36227813, "link": "https://stackoverflow.com/questions/36227813/print-specific-lines-from-text-file-using-perl/36228751#36228751", "title": "print specific lines from text file using perl", "body": "<p>Rather than specifying the numbers of the lines you want to retain, it's much clearer to identify them by the text they contain</p>\n\n<p>Like this</p>\n\n<pre><code>perl -ne 'print $1 if /^#((Display Name|identifier|Gender|Quality).*)/is' myfile\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Display Name= XXXXX\nidentifier = xxxxxx\nGender = xxxxx\nQuality = X.XXXXXX\n</code></pre>\n\n<p>I don't understand what you mean by the comment on the last line of data <em>\"keep this field without the # and X.XXX\"</em>. Do you mean \"without the # <strong><em>or</em></strong> the X.XXX\"? It's strange if you just want <code>Quality =</code> here</p>\n"}], "owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "accepted_answer_id": 36227919, "answer_count": 3, "score": 1, "last_activity_date": 1458944498, "creation_date": 1458939030, "last_edit_date": 1458943368, "question_id": 36227813, "link": "https://stackoverflow.com/questions/36227813/print-specific-lines-from-text-file-using-perl", "title": "print specific lines from text file using perl", "body": "<p>I am trying to print a few lines from a file in which the lines are in separate rows.  I don't think the below <code>perl</code> is the best way but hopefully it is a start</p>\n\n<pre><code>perl -ne 'if ($. == 5) ($. == 6) ($. == 7) ($. == 10) {print;exit}' file.txt\n</code></pre>\n\n<p><strong>file</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#Sample = xxxxx\n#Sample Type = xxxxxx\n#Build = xxxxxxx\n#Platform = xxxxxxx\n#Display Name= XXXXX  (keep this field without the #)\n#identifier = xxxxxx  (keep this field without the #)\n#Gender = xxxxx       (keep this field without the #)\n#Control Gender = xxxxx\n#Control Sample = xxxxx\n#Quality = X.XXXXXX   (keep this field without the # and X.XXX)\n</code></pre>\n\n<p><strong>desired output</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Display Name= XXXXX  (keep this field without the #)\nidentifier = xxxxxx  (keep this field without the #)\nGender = xxxxx       (keep this field without the #)\nQuality = X.XXXXXX   (keep this field without the # and X.XXX)\n</code></pre>\n"}, {"tags": ["regex", "perl", "perl-module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458937923, "post_id": 36224020, "comment_id": 60086235, "body": "Would it be accurate to say that you want the content of all second-level braces removed?"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458938763, "post_id": 36224020, "comment_id": 60086630, "body": "@Borodin Some blah to be removed is also at level one."}, {"owner": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "edited": false, "score": 0, "creation_date": 1458983110, "post_id": 36224020, "comment_id": 60097563, "body": "I want the first level content(name) as well... Just some blahs to be removed"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "edited": false, "score": 0, "creation_date": 1458985315, "post_id": 36227718, "comment_id": 60098199, "body": "thanks, the regexs you posted work quite well in most cases. But it stopped working when there is {} inside of &quot;blah blah&quot;. I&#39;ve modified the question to include {}"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "reply_to_user": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "edited": false, "score": 0, "creation_date": 1458986979, "post_id": 36227718, "comment_id": 60098699, "body": "Then, I suppose, braces may also occur inside <code>subfunc...(){ here: {} ...}</code>?"}, {"owner": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "edited": false, "score": 0, "creation_date": 1458991910, "post_id": 36227718, "comment_id": 60100084, "body": "your solution is brilliant! I made minor changes and accepted it! Happy Easter! :)"}, {"owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "reply_to_user": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "edited": false, "score": 0, "creation_date": 1458992373, "post_id": 36227718, "comment_id": 60100185, "body": "@JieLi Thanks for adding the additional <code>}</code> - somehow I lost that in the last round."}], "tags": [], "owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "is_accepted": true, "score": 2, "last_activity_date": 1458992422, "last_edit_date": 1458992422, "creation_date": 1458938607, "answer_id": 36227718, "question_id": 36224020, "link": "https://stackoverflow.com/questions/36224020/perl-get-nested-functions-and-parameters-textbalanced-or-plain-perl/36227718#36227718", "title": "perl get nested functions and parameters (text::balanced or plain perl)", "body": "<p>Assuming that <code>subfunc</code> is a keyword, you can use a  regular expression. I've split it into two s///, but it can be combined. </p>\n\n<pre><code>sub squeeze {\n    my( $s ) = @_;\n    $s =~ s/(?&lt;=\\{\\n)[^(){}]*?(?= *subfunc)//sg;\n    $s =~ s/(?&lt;=\\{)[^(){}]*?(?=\\})//sg;\n    return $s;\n}\n</code></pre>\n\n<p>If there are nested braces then Text::Balanced can be used in combination with regexes:</p>\n\n<pre><code>sub squeeze {\n    my( $s ) = @_;\n    my $out = '';\n    while( $s =~ s/^(\\s*rootfunc[^{]*\\{).*?(?=\\s*subfunc)//s ){\n        $out .= $1 ;\n        while( $s =~ s/^(\\s*subfunc[^)]+\\)\\s*).*?(?=\\{)//s ){\n            $out .= $1;\n            my( $ext, $rem ) = extract_bracketed( $s, '{' );\n            $out .= \"{}\";\n            $s = $rem;\n        }\n        $out .= \"}\";\n        if( $s =~ s/^(\\s+\\})//s ){\n            $s .= $1;\n        }\n    } \n    return $out;\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5795980, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008437908447/picture?type=large", "display_name": "Jie Li", "link": "https://stackoverflow.com/users/5795980/jie-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 36227718, "answer_count": 1, "score": 3, "last_activity_date": 1458992422, "creation_date": 1458923719, "last_edit_date": 1458985457, "question_id": 36224020, "link": "https://stackoverflow.com/questions/36224020/perl-get-nested-functions-and-parameters-textbalanced-or-plain-perl", "title": "perl get nested functions and parameters (text::balanced or plain perl)", "body": "<p>I have a text file with the following content and would like to extract nested functions (including rootfunc) in an array or other data structure with perl.</p>\n\n<p>INPUT FILE CONTENT:</p>\n\n<pre><code>rootfunc aaa with string1 {\n    blah blah\n    subfunc bbb (different parameters) {\n        blah blah\n    }\n    subfunc others_in_aaa (different parameters) {\n        blah blah\n    }\n}\n\nrootfunc ccc with string2 {\n    blah blah\n    if (blah) {\n        blah blah\n    } else {\n        blah blah\n    }\n    subfunc others_in_ccc (different parameters) {\n        blah blah\n    }\n}\n\nrootfunc others with stringothers {\n    blah blah\n    subfunc others_in_others (different parameters) {\n        blah blah\n    }\n}\n</code></pre>\n\n<p>I would like to extract all the rootfunc and subfunc with the output like below:</p>\n\n<p>INTENDED OUTPUT FILE (not, the if/else are also stripped out):</p>\n\n<pre><code>rootfunc aaa with string1 {\n    subfunc bbb (different parameters) {\n    }\n    subfunc others_in_aaa (different parameters) {\n    }\n}\n\nrootfunc ccc with string2 {\n    subfunc others_in_ccc (different parameters) {\n    }\n}\n\nrootfunc others with stringothers {\n    subfunc others_in_others (different parameters) {\n    }\n}\n</code></pre>\n\n<p>With the perl script as follow I can only extract whatever is in the bracket of rootfunc and then get whatever is in subfunc, but the rootfunc name/parameters and subfunc name/parameters are lost:</p>\n\n<p>PERL SCRIPT:</p>\n\n<pre><code>use Text::Balanced qw(extract_multiple extract_bracketed);\n\nopen(FILE, \"/tmp/a\") || die \"Unable to open /tmp/a: $!\\n\";\n{\n    local $/=undef;\n    my $file = &lt;FILE&gt;;\n}\nclose(FILE);\nmy @array = extract_multiple($file, [sub{extract_bracketed($_[0], '{}')},], undef, 1);\n</code></pre>\n\n<p>Is there any method to get the desired output? Thanks,</p>\n"}, {"tags": ["perl", "argv"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1458991849, "post_id": 36223890, "comment_id": 60100067, "body": "<code>$ARGV</code> is a predefined variable, which contains the name of the current filehandle while reading from <code>&lt;&gt;</code>. <a href=\"http://perldoc.perl.org/perlvar.html#$ARGV\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html#$ARGV</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1458937802, "post_id": 36224003, "comment_id": 60086169, "body": "<code>$#pathAllSuites = -1</code> is an unnecessarily arcane way of writing <code>@pathAllSuites = ()</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1458942239, "post_id": 36224003, "comment_id": 60088261, "body": "And better would be just declaring it in the for loop: <code>foreach $ARGV (@ARGV) {  my @pathallSuites; ...</code>"}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 1, "last_activity_date": 1458923617, "creation_date": 1458923617, "answer_id": 36224003, "question_id": 36223890, "link": "https://stackoverflow.com/questions/36223890/get-directories-using-argv-for-perl/36224003#36224003", "title": "get directories using ARGV for perl", "body": "<p>You never reset the <code>@pathAllSuites</code> variable. At the beginning of your foreach loop, you need to do this yourself.</p>\n\n<pre><code>foreach $ARGV (@ARGV)\n{\n$#pathAllSuites = -1; # Set the 'last index' to -1, effectively clearing it.\n$guitestsDir = \"v:\\\\stuf\\\\comment\\\\logs\\\\$ARGV\\\\\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467624891, "last_edit_date": 1592644375, "creation_date": 1458937468, "answer_id": 36227457, "question_id": 36223890, "link": "https://stackoverflow.com/questions/36223890/get-directories-using-argv-for-perl/36227457#36227457", "title": "get directories using ARGV for perl", "body": "<p>The immediate problem is that you aren't emptying <code>@pathallSuites</code> between executions of the <code>foreach</code> loop, but behind that is the issue that you don't have <code>use strict</code> and <code>use warnings 'all'</code> in place, which <em>must always</em> appear at the top of every Perl program you write. Then Perl will reset the array for you if you declare it within the loop</p>\n<p>I suggest that you make use of <a href=\"https://p3rl.org/glob\" rel=\"nofollow noreferrer\"><code>glob</code></a> to search for files and directories, and use the <a href=\"https://p3rl.org/File::Spec::Functions\" rel=\"nofollow noreferrer\"><code>File::Spec::Functions</code></a> library to manipulate file paths instead of basic string functions which are more prone to mistakes</p>\n<p>The result is much more concise code, as shown here. The call to <a href=\"https://p3rl.org/grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> filters the result of <code>glob</code> so that it contains only directory names without any file names</p>\n<p>Note that this program differs from your own in that the output is the <em>full path</em> to each subdirectory instead of just the name of the subdirectory. If you really want just then name then it's trivial to change, but I thought it was more likely that you really needed the whole thing. Do let me know if I'm wrong</p>\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Spec::Functions 'catdir';\n\nuse constant ROOT_DIR =&gt; 'V:/stuf/comment/logs';\n\nfor my $subdir ( @ARGV ) {\n\n    my @path_all_suites = grep -d, glob catdir(ROOT_DIR, $subdir, '*');\n\n    print &quot;$_\\n&quot; for @path_all_suites;\n    print &quot;\\n&quot;;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "is_accepted": false, "score": 2, "last_activity_date": 1458983966, "creation_date": 1458983966, "answer_id": 36233614, "question_id": 36223890, "link": "https://stackoverflow.com/questions/36223890/get-directories-using-argv-for-perl/36233614#36233614", "title": "get directories using ARGV for perl", "body": "<p>Here's a condensed version, with all going into a single line of output:</p>\n\n<pre><code>print map( \"$_ \", map( glob( \"$_/*/\" ), @ARGV )), \"\\n\";\n</code></pre>\n\n<p>Or a single column:</p>\n\n<pre><code>print map( \"$_\\n\", map( glob( \"$_/*/\" ), @ARGV ));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3858383, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000809471624/picture?type=large", "display_name": "Popescu Emanuel", "link": "https://stackoverflow.com/users/3858383/popescu-emanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 36224003, "answer_count": 3, "score": 1, "last_activity_date": 1467624891, "creation_date": 1458923208, "question_id": 36223890, "link": "https://stackoverflow.com/questions/36223890/get-directories-using-argv-for-perl", "title": "get directories using ARGV for perl", "body": "<pre><code>   $args = @ARGV;\n\nforeach $ARGV (@ARGV)\n{\n$guitestsDir = \"v:\\\\stuf\\\\comment\\\\logs\\\\$ARGV\\\\\";\n\n############################open logs folder#########################   \nif ( -d $guitestsDir ) {\n    opendir( DIR, $guitestsDir );\n    while ( defined( $pathofdir = readdir(DIR) ) ) {\n        next if ( $pathofdir eq \".\" );\n        next if ( $pathofdir eq \"..\" );\n        next unless (-d \"$guitestsDir/$pathofdir\");\n        push (@pathallSuites, $pathofdir);\n    }\n    closedir(DIR);\n}\n\n\nprint \"@pathallSuites\\n\";\n</code></pre>\n\n<p>hi, I will give directory 1 and 2 as argument. in dir 1 will be <strong>dir a and b</strong> in dir 2 <strong>c and d</strong> \n when I run it for  <code>print \"@pathallSuites\\n\";</code> the output will be:</p>\n\n<pre><code>a b\na b c d\n</code></pre>\n\n<p>and should be</p>\n\n<pre><code>a b\nc d\n</code></pre>\n\n<p>what am I doing wrong?\nthanks</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 1571829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8fc1f3ac6c44788c5221b8f75df4bd?s=128&d=identicon&r=PG", "display_name": "TaterTots", "link": "https://stackoverflow.com/users/1571829/tatertots"}, "edited": false, "score": 0, "creation_date": 1458918711, "post_id": 36222256, "comment_id": 60076445, "body": "Thank you for the help!  This makes sense, but unfortunately, I can&#39;t get the code to pull the zip code.  I&#39;m extracting data from text files.  I look through each file and then execute the following code:  <code>if ($_=~&#47;BUSINESS\\s*ADDRESS:.*?ZIP:\\s*(\\d+)&#47;){$Zip=$1;}</code>"}, {"owner": {"reputation": 89, "user_id": 1571829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8fc1f3ac6c44788c5221b8f75df4bd?s=128&d=identicon&r=PG", "display_name": "TaterTots", "link": "https://stackoverflow.com/users/1571829/tatertots"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1458920874, "post_id": 36222256, "comment_id": 60077600, "body": "@toolic: I didn&#39;t have it in the original code.  I just added it to the new code and the reference still isn&#39;t pulling. <code>if ($_=~&#47;BUSINESS\\s*ADDRESS:.*?ZIP:\\s*(\\d+)&#47;s){$Zip=$1;}</code>"}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": true, "score": 2, "last_activity_date": 1458917548, "creation_date": 1458917548, "answer_id": 36222256, "question_id": 36222179, "link": "https://stackoverflow.com/questions/36222179/using-regex-to-capture-content-after-first-occurrence-of-a-string/36222256#36222256", "title": "Using Regex to capture content after first occurrence of a string", "body": "<p>Well, in your example you just need to add question mark to (.*?) and specify that zip consists only digits:</p>\n\n<pre><code>BUSINESS\\s*ADDRESS:.*?ZIP:\\s*(\\d+)\n</code></pre>\n\n<p>By default asterisk and plus are greedy. \nAnd no need to capture things other than zip code</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 1571829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8fc1f3ac6c44788c5221b8f75df4bd?s=128&d=identicon&r=PG", "display_name": "TaterTots", "link": "https://stackoverflow.com/users/1571829/tatertots"}, "edited": false, "score": 0, "creation_date": 1458919167, "post_id": 36222472, "comment_id": 60076712, "body": "Thanks!  I&#39;ve never used awk.  If I&#39;m planning to do a lot of text processing, would it be good for me to learn more about this language?"}, {"owner": {"reputation": 2087, "user_id": 6010343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3z4z.jpg?s=128&g=1", "display_name": "Jay jargot", "link": "https://stackoverflow.com/users/6010343/jay-jargot"}, "reply_to_user": {"reputation": 89, "user_id": 1571829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8fc1f3ac6c44788c5221b8f75df4bd?s=128&d=identicon&r=PG", "display_name": "TaterTots", "link": "https://stackoverflow.com/users/1571829/tatertots"}, "edited": false, "score": 1, "creation_date": 1458919293, "post_id": 36222472, "comment_id": 60076781, "body": "AWK was designed for this. There is a famous tutorial, if your are looking for something to start with: <a href=\"http://www.grymoire.com/Unix/Awk.html\" rel=\"nofollow noreferrer\">grymoire.com/Unix/Awk.html</a>"}], "tags": [], "owner": {"reputation": 2087, "user_id": 6010343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3z4z.jpg?s=128&g=1", "display_name": "Jay jargot", "link": "https://stackoverflow.com/users/6010343/jay-jargot"}, "is_accepted": false, "score": 1, "last_activity_date": 1458921746, "last_edit_date": 1458921746, "creation_date": 1458918243, "answer_id": 36222472, "question_id": 36222179, "link": "https://stackoverflow.com/questions/36222179/using-regex-to-capture-content-after-first-occurrence-of-a-string/36222472#36222472", "title": "Using Regex to capture content after first occurrence of a string", "body": "<p>For those about to awk...</p>\n\n<p>There is a tested version below, given that the file is named test.txt in current directory:</p>\n\n<pre><code>awk '{if ($0 ~ /BUSINESS ADDRESS:/) { inzone=1; } if (inzone) {if ($0 ~ /ZIP:/) { print $2; } else if ($0 ~ /MAIL ADDRESS:/) { inzone=0; }}}' test.txt\n</code></pre>\n\n<p>It will print the second field for all lines containing <strong>ZIP:</strong>, but only the lines encountered in a block between a line containing BUSINESS ADDRESS: and another line containing MAIL ADDRESS:</p>\n\n<p>The test is below:</p>\n\n<pre><code>awk '{if ($0 ~ /BUSINESS ADDRESS:/) { inzone=1; } if (inzone) {if ($0 ~ /ZIP:/) { print $2; } else if ($0 ~ /MAIL ADDRESS:/) { inzone=0; }}}' test.txt\n77027\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1383, "user_id": 5578714, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/mufAl.png?s=128&g=1", "display_name": "David White", "link": "https://stackoverflow.com/users/5578714/david-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1458920257, "creation_date": 1458920257, "answer_id": 36223007, "question_id": 36222179, "link": "https://stackoverflow.com/questions/36222179/using-regex-to-capture-content-after-first-occurrence-of-a-string/36223007#36223007", "title": "Using Regex to capture content after first occurrence of a string", "body": "<p>The match operator running in list context will return all the matching values that were found.  So you could do something like this:</p>\n\n<pre><code>my $data = '\nBUSINESS ADDRESS:   \n    STREET 1:       101 AWESOME DRIVE\n    STREET 2:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77027\n    BUSINESS PHONE: 7138675309\n\nMAIL ADDRESS:   \n    STREET 1:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77001\n';\n\nmy @allzips = ($data =~ /ZIP:\\s*(\\d+)/g);\n\nforeach my $zip (@allzips) {   \n    print \"Found ZIP: $zip\\n\";\n}\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>Found ZIP: 77027\nFound ZIP: 77001\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 2, "last_activity_date": 1458921281, "creation_date": 1458921281, "answer_id": 36223320, "question_id": 36222179, "link": "https://stackoverflow.com/questions/36222179/using-regex-to-capture-content-after-first-occurrence-of-a-string/36223320#36223320", "title": "Using Regex to capture content after first occurrence of a string", "body": "<p>Given:</p>\n\n<pre><code>my $tgt=\"BUSINESS ADDRESS:   \n    STREET 1:       101 AWESOME DRIVE\n    STREET 2:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77027\n    BUSINESS PHONE: 7138675309\n\nMAIL ADDRESS:   \n    STREET 1:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77001\";\n</code></pre>\n\n<p>You can do:</p>\n\n<pre><code>print \"$1: $2\\n\" while $tgt=~/^(\\S[^:]+):[^\\R]*\\R.*?^\\s+ZIP:\\s+(\\d+)/gms;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>BUSINESS ADDRESS: 77027\nMAIL ADDRESS: 77001\n</code></pre>\n\n<p>Same method you can construct a hash mapping the address to the zip for each block. </p>\n"}], "owner": {"reputation": 89, "user_id": 1571829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8fc1f3ac6c44788c5221b8f75df4bd?s=128&d=identicon&r=PG", "display_name": "TaterTots", "link": "https://stackoverflow.com/users/1571829/tatertots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 36222256, "answer_count": 4, "score": -1, "last_activity_date": 1458921746, "creation_date": 1458917229, "question_id": 36222179, "link": "https://stackoverflow.com/questions/36222179/using-regex-to-capture-content-after-first-occurrence-of-a-string", "title": "Using Regex to capture content after first occurrence of a string", "body": "<p>I've done some research and I'm struggling to figure out how to answer this question.  I have the following text and I want to extract the zip code in the business address field:</p>\n\n<pre><code>BUSINESS ADDRESS:   \n    STREET 1:       101 AWESOME DRIVE\n    STREET 2:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77027\n    BUSINESS PHONE: 7138675309\n\nMAIL ADDRESS:   \n    STREET 1:       P O BOX 144\n    CITY:           HOUSTON\n    STATE:          TX\n    ZIP:            77001\n</code></pre>\n\n<p>This code captures the last instance (77001):</p>\n\n<pre><code>(BUSINESS\\s*ADDRESS:)(.*)(ZIP:\\s*)(.*)\n</code></pre>\n\n<p>How can I capture the first zip code (77027)?</p>\n\n<p>Thanks for helping a noob.</p>\n"}, {"tags": ["html", "sql", "perl", "shell", "cgi"], "comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1458914636, "post_id": 36221396, "comment_id": 60074279, "body": "I&#39;m pretty new here and i thought it&#39;s a place where ppl asking questions, not looking for free labor, but may be I&#39;m wrong"}, {"owner": {"reputation": 5, "user_id": 3510848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6633a8023c9e95fd63abf1630b4190c?s=128&d=identicon&r=PG&f=1", "display_name": "user3510848", "link": "https://stackoverflow.com/users/3510848/user3510848"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458915316, "post_id": 36221396, "comment_id": 60074602, "body": "Hi sorry, for that @Alexandr Evstigneev , i will update the question with my existing code which i tried through Perl script"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458935990, "post_id": 36221396, "comment_id": 60085323, "body": "@user3510848: It&#39;s not clear whether your &quot;database&quot; is just a text file or a relational database like MySQL. Which is it please?"}, {"owner": {"reputation": 5, "user_id": 3510848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6633a8023c9e95fd63abf1630b4190c?s=128&d=identicon&r=PG&f=1", "display_name": "user3510848", "link": "https://stackoverflow.com/users/3510848/user3510848"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459240139, "post_id": 36221396, "comment_id": 60184565, "body": "@Borodin , Its a Mysql Database"}], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 0, "last_activity_date": 1458935871, "last_edit_date": 1458935871, "creation_date": 1458918089, "answer_id": 36222425, "question_id": 36221396, "link": "https://stackoverflow.com/questions/36221396/to-read-database-values-in-horizontal-format-with-server-names-intact/36222425#36222425", "title": "To read database values in horizontal format with server names intact", "body": "<p><code>$sth</code> is a statement handle, not a result. You should read the data first with </p>\n\n<pre><code> $ary_ref = $dbh-&gt;selectall_arrayref($statement, {Slice=&gt;{}});\n</code></pre>\n\n<p>Then in <code>$ary_ref</code> you'll have a reference to an array of hash references. Every hash represents row of data. Just iterate over them and print the contents as you want.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 3510848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6633a8023c9e95fd63abf1630b4190c?s=128&d=identicon&r=PG&f=1", "display_name": "user3510848", "link": "https://stackoverflow.com/users/3510848/user3510848"}, "edited": false, "score": 0, "creation_date": 1459240278, "post_id": 36226361, "comment_id": 60184657, "body": "That does work for relatively small number of servers and timings. But when I have Timings like 24 hrs , the hours are coming line by line in text file or web page after going till end of page.  like below:"}, {"owner": {"reputation": 5, "user_id": 3510848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6633a8023c9e95fd63abf1630b4190c?s=128&d=identicon&r=PG&f=1", "display_name": "user3510848", "link": "https://stackoverflow.com/users/3510848/user3510848"}, "edited": false, "score": 0, "creation_date": 1459240580, "post_id": 36226361, "comment_id": 60184836, "body": "00:01:00\t02:00:00\t03:00:00\t04:0:00\t\t05:00:00\t06:00:00\t 07:00:00\t08:00:00  9:00:00        10:00:00        11:00:00\t12:00:00\t13:00:00\t14:00:00\t15:00:00"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 0, "last_activity_date": 1459296547, "last_edit_date": 1459296547, "creation_date": 1458933038, "answer_id": 36226361, "question_id": 36221396, "link": "https://stackoverflow.com/questions/36221396/to-read-database-values-in-horizontal-format-with-server-names-intact/36226361#36226361", "title": "To read database values in horizontal format with server names intact", "body": "<p>To print this to a text file, you could do the following script.</p>\n\n<p>For this example, I created a test database with your data to see how to set up the results.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse DBI;\n\nmy $dbh = DBI-&gt;connect(qq{DBI:CSV:});\n$dbh-&gt;{'csv_tables'}-&gt;{'data'} = { 'file' =&gt; 'junk.txt',\n        'col_names' =&gt; [qw/Hostname Status Time_Stamp/]};\n\n\nmy $sth = $dbh-&gt;prepare(qq{\n                SELECT Hostname, Status, Time_Stamp\n                FROM data\n                });\n\n$sth-&gt;execute() or die \"Cannot execute: \", $sth-&gt;errstr();\n\nmy %data;\nmy %time;\n\nwhile (my $href = $sth-&gt;fetchrow_hashref) {\n    $data{ $href-&gt;{Hostname} }{ $href-&gt;{Time_Stamp} } = $href-&gt;{Status};\n    $time{ $href-&gt;{Time_Stamp} }++;\n}\n\nmy @times = sort keys %time;\nmy $fmt = \"%-10s\" . \"%-10s\" x @times . \"\\n\";\n\nprintf $fmt, 'Server', @times;\nprint \"-\" x (10 * (1+@times)), \"\\n\";\n\nfor my $server (sort keys %data) {\n    printf $fmt, $server, @{ $data{$server} }{@times};  \n}\n</code></pre>\n\n<p>The output was:</p>\n\n<pre><code>Server    00:00:00  01:00:00\n------------------------------\nAAA       InUse     NotInUse\nBBB       NotInUse  InUse\n</code></pre>\n\n<p><strong>Update:</strong> To get only (for example) 8 time columns per line, you could make the following change to the code.</p>\n\n<pre><code>use POSIX 'ceil';\nmy $col = 8;\nmy @times = sort keys %time;\n@times = map{ [splice @times, 0, $col] } 1..ceil(@times/$col);\nmy $date = 'WHATEVER_DATE';\n\nfor my $aref (@times) {\n    my $fmt = \"%-10s\" . \"%-10s\" x @$aref . \"\\n\";\n\n    print $date, \"\\n\";\n    printf $fmt, 'Server', @$aref;\n    print \"-\" x (10 * (1+@$aref)), \"\\n\";\n\n    for my $server (sort keys %data) {\n        printf $fmt, $server, @{ $data{$server} }{@$aref};  \n    }\n\n    print \"\\n\\n\";\n}\n</code></pre>\n\n<p>I'm assuming there should only be 24 time columns - <code>00:00:00 01:00:00 .. 23:00:00</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 3510848, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6633a8023c9e95fd63abf1630b4190c?s=128&d=identicon&r=PG&f=1", "display_name": "user3510848", "link": "https://stackoverflow.com/users/3510848/user3510848"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 36226361, "answer_count": 2, "score": -4, "last_activity_date": 1459296547, "creation_date": 1458914363, "last_edit_date": 1458936072, "question_id": 36221396, "link": "https://stackoverflow.com/questions/36221396/to-read-database-values-in-horizontal-format-with-server-names-intact", "title": "To read database values in horizontal format with server names intact", "body": "<h3>Present scenario</h3>\n\n<p>I have a database table with the entries as below which tell the status of the server whether it is being used or not based on some condition for every one hour in a day . For sample I have given only two servers and their status for two hours. :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ServerName  status     Time          \nAAA         InUse      00:00:00   \nBBB         NotInUse   00:00:00    \nAAA         NotInUse   01:00:00    \nBBB         InUse      01:00:00    \n</code></pre>\n\n<h3>Required Result</h3>\n\n<p>I am looking out for a script preferably Shell or Perl to read these database entries and display the result as below in a text file or web. So that server names come only once and only the status and time gets changed horizontally. Thanks in advance for you suggestions and help in this regard.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  ServerName          Time/Status                  \n               00:00:00      01:00:00          \n   AAA         InUse         NotInUse\n   BBB         NotInUse      InUse\n</code></pre>\n\n<h3>Work done so far</h3>\n\n<p>I am using Perl/CGI code as below and data is diplayed on a web page as told under Present Scenario:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT Hostname ,Time_Stamp,Status FROM table WHERE Date ='$date' \");\n$sth-&gt;execute() or die $DBI::errstr;\n\nprint $cgi-&gt;table({-border=&gt;1});\n\n# table headings are SQL column names\n\nprint \"&lt;tr&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[0]&lt;/th&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[1]&lt;/th&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[2]&lt;/th&gt;&lt;th&gt;$sth-&gt;{NAME}-&gt;[3]&lt;/th&gt;&lt;/tr&gt;\";\nwhile (my @row = $sth-&gt;fetchrow_array) {\n    print \"&lt;tr&gt;&lt;td&gt;$row[0]&lt;/td&gt;&lt;td&gt;$row[1]&lt;/td&gt;&lt;td&gt;$row[2]&lt;/td&gt;\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1458904719, "post_id": 36218672, "comment_id": 60069233, "body": "The script should work if there are no empty lines, and all items are separated by two tabs. The warnings you get indicate that that is not the case."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458907390, "post_id": 36218821, "comment_id": 60070496, "body": "Thank you for your answer, What should i do if i want total number of items calculated but only get 11111 instead of 5?"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458907755, "post_id": 36218821, "comment_id": 60070653, "body": "Not sure i understand what you want. Make counter and increment it on each valid entry."}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 2, "last_activity_date": 1458904325, "creation_date": 1458904325, "answer_id": 36218821, "question_id": 36218672, "link": "https://stackoverflow.com/questions/36218672/perl-simple-filehandling-of-text/36218821#36218821", "title": "Perl simple filehandling of text", "body": "<p>This is too complicated and not clear what are you doing in foreach loop and you are not skipping empty lines. Keep it simple:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse v5.10;\n\n&lt;&gt;; # skip header\nwhile(my $line = &lt;&gt;)\n{\n    chomp $line;\n    next unless ($line);\n\n    my ($title, $price ) = split /\\s+/, $line;\n    if( $title &amp;&amp; defined $price )\n    {\n        $price *= 0.75;\n        say \"$title\\t\\t$price\";\n    }\n}\n</code></pre>\n\n<p>and run like </p>\n\n<pre><code>perl script.pl &lt;input.txt &gt;output.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458922185, "post_id": 36221282, "comment_id": 60078274, "body": "Thank you for your answer but to be honest i try to avoid regex as much as possible because i find it so confusing but it may also be because i&#39;ve started recently."}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458922431, "post_id": 36221282, "comment_id": 60078403, "body": "I know the feeling, When I started using perl I did the same but since then I find regex to be super power and very useful and I use it all the time.  In your example personally I prefer using regex in case your shop file decides to change or some one uses 4 spaces in stead of using a tab (which would be ignored with split(&#39;\\t\\t&#39;) but in any case it looks like you&#39;ve gotten enough help on this thread to get you going."}, {"owner": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458922800, "post_id": 36221282, "comment_id": 60078588, "body": "Yes thanks again, do you know how i can print out total number of items from my .txt files? Let&#39;s say i have 10 items with prices in the text file so i want 10 to be printed out but i don&#39;t know how"}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458923358, "post_id": 36221282, "comment_id": 60078872, "body": "I made a change to my above code to give you 2 examples of how you could print out a count total.  Both ways work fine with the counter method being a little bit more robust.  Hope it helps"}, {"owner": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "edited": false, "score": 0, "creation_date": 1458927226, "post_id": 36221282, "comment_id": 60080893, "body": "Thank you very much for all the effort"}], "tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": 0, "last_activity_date": 1458923296, "last_edit_date": 1458923296, "creation_date": 1458913936, "answer_id": 36221282, "question_id": 36218672, "link": "https://stackoverflow.com/questions/36218672/perl-simple-filehandling-of-text/36221282#36221282", "title": "Perl simple filehandling of text", "body": "<p>I'd use this approach</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %items;\nmy $filename  = 'shop.txt';\nmy $discount = 'discount.txt';\n\nopen my $in, '&lt;', $filename or die \"Failed to open file! : $!\\n\";\nopen my $out, \"&gt;\", $discount  or die \"Can't open output file for writing:    $!\";\n\nprint $out \"Item\\t\\tPrice\\n\";\nmy $cnt = 0;\nwhile (my $line = &lt;$in&gt;) {\n    chomp $line;\n    if (my ($item,$price) = $line =~ /(\\w.+)\\s+([0-9.]+)/){\n        $price = $price * (0.75);\n        print $out \"$item\\t\\t$price\\n\";\n        $items{$item} = $price;\n        $cnt++;\n    }\n}\nclose($in);\nclose($out);\n\nmy $total = keys %items;\n\nprint \"Total items - $total \\n\";\nprint \"Total items - $cnt\\n\";\n</code></pre>\n\n<p>Using regex capture groups to capture the item and price (using \\w.+ in case the item is 2 words like apple sauce), this will also prevent empty lines from printing to file.  </p>\n\n<p>I also hard coded the Item and Price header, probably a good idea if you are going to be using a consistent header.  </p>\n\n<p>Hope it helps</p>\n\n<p>---<b>Update</b> ----</p>\n\n<p>I added 2 examples of a total count in my script.  The first one is using a hash and printing out the hash size, the second method is using a counter.  The hash option is good except if your list has 2 items that are the same in which case the key of the hash will be overridden with the last item found which shares the same name.  The counter is a simple solution.</p>\n"}, {"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1458928763, "post_id": 36223235, "comment_id": 60081649, "body": "Some explanation of what you did would be helpful. Answers that are just code dumps and &quot;try this&quot; or &quot;hope this helps&quot; are less useful."}, {"owner": {"reputation": 145, "user_id": 5436341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3xhK0.jpg?s=128&g=1", "display_name": "Mounika", "link": "https://stackoverflow.com/users/5436341/mounika"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1459000533, "post_id": 36223235, "comment_id": 60102710, "body": "Yeah sure! :) Instead of storing it in an array (@items), there is a way to store both item and price variables separately, as shown:  ($item, $price) = split(/\\t\\t/); The argument given in split is the separator by which the strings are separated. In this case it is double tab. hence \\t\\t. Then the operation you need to perform can be done on price easily."}], "tags": [], "owner": {"reputation": 145, "user_id": 5436341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/3xhK0.jpg?s=128&g=1", "display_name": "Mounika", "link": "https://stackoverflow.com/users/5436341/mounika"}, "is_accepted": false, "score": 1, "last_activity_date": 1458921020, "creation_date": 1458921020, "answer_id": 36223235, "question_id": 36218672, "link": "https://stackoverflow.com/questions/36218672/perl-simple-filehandling-of-text/36223235#36223235", "title": "Perl simple filehandling of text", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $filename  = 'shop.txt';\nif (-e $filename){\n    open (IN, $filename);\n}\nelse{\n    die \"Can't open input file for reading: $!\";\n}\nopen (OUT,\"&gt;\",\"discount.txt\") or die \"Can't open output file for writing:    $!\";\n\nmy $header = &lt;IN&gt;;\nmy $item;\nmy $price;\n\nprint OUT $header;\n\nwhile (&lt;IN&gt;) {\n  chomp;\n  ($item, $price) = split(/\\t\\t/);\n\n  my $discount = $price*0.75;\n  print OUT \"$item $discount\\n\";\n\n}\n</code></pre>\n\n<p>This should help! :)</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1458923146, "creation_date": 1458923146, "answer_id": 36223869, "question_id": 36218672, "link": "https://stackoverflow.com/questions/36218672/perl-simple-filehandling-of-text/36223869#36223869", "title": "Perl simple filehandling of text", "body": "<p>If the total item count isn't very important to you:</p>\n\n<pre><code>$ perl -wane '$F[1] *= 0.75 if $. &gt; 1; print join(\"\\t\", @F), \"\\n\";' input.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Item    Price\napple   15\norange  37.5\nlime    22.5\n</code></pre>\n\n<p>If you really need the total item count:</p>\n\n<pre><code>$ perl -we 'while (&lt;&gt;) { @F = split; if ($. &gt; 1) { $F[1] *= 0.75; $i++ } print join(\"\\t\", @F), \"\\n\"; } print \"$i items\\n\";' input.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Item    Price\napple   15\norange  37.5\nlime    22.5\n3 items\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2940923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82eb5cf4ee5b155fd734abe0ecedfb22?s=128&d=identicon&r=PG&f=1", "display_name": "BSileNTz", "link": "https://stackoverflow.com/users/2940923/bsilentz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1458923296, "creation_date": 1458903581, "question_id": 36218672, "link": "https://stackoverflow.com/questions/36218672/perl-simple-filehandling-of-text", "title": "Perl simple filehandling of text", "body": "<p>What this program is meant to do is that it reads a text file which looks like:  </p>\n\n<p>Item \\t\\t Price</p>\n\n<p>apple \\t\\t 20</p>\n\n<p>orange \\t\\t 50</p>\n\n<p>lime \\t\\t 30</p>\n\n<p>I'm using split function to split these 2 columns and then i should apply a -25% discount on all items and print it out to a new file. My code so far does what i want but the new text file has a '0' value under my last number in price column. I also get 2 errors if i run it with \"use warnings\" which are:</p>\n\n<p>Use of uninitialized value $item in multiplication * ...</p>\n\n<p>Use of uninitialized value $item[0] in concatenation (.) ...</p>\n\n<p>I should also tell total number of items calculated but i get like 5 1's instead of 5. (11111 instead of 5)</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename  = 'shop.txt';\nif (-e $filename){\n    open (IN, $filename);\n}\nelse{\n    die \"Can't open input file for reading: $!\";\n}\nopen (OUT,\"&gt;\",\"discount.txt\") or die \"Can't open output file for writing:    $!\";\n\nmy $header = &lt;IN&gt;;\n\nprint OUT $header;\n\nwhile (&lt;IN&gt;) {\n    chomp;\n    my @items = split(/\\t\\t/);\n    foreach my $item ($items[1]){\n        my $discount = $item * (0.75);\n        print OUT \"$items[0]\\t\\t$discount\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "artifactory"], "comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458901554, "post_id": 36218103, "comment_id": 60067884, "body": "what about <a href=\"https://metacpan.org/pod/Artifactory::Client\" rel=\"nofollow noreferrer\">metacpan.org/pod/Artifactory::Client</a> ?"}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458909011, "post_id": 36218103, "comment_id": 60071300, "body": "Thank you for the link @AlexandrEvstigneev, I think these methods are PERL implementations of Artifactory documentation and I cannot find any method to add users to the group in both the places. I am actually new to both Artifactory and PERL, so can you please help me content in &quot;file.xml&quot;. Also I need to provide global privileges on all the repositories! How to access all the repositories while creating a permission target are there any group of special chars like we use &quot;select * ....&quot; in DB to do this?. Please help me with this information."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458909120, "post_id": 36218103, "comment_id": 60071361, "body": "It is not implementation of documentation, as it said: &quot;Perl client for Artifactory REST API&quot;. So if there is an api for this - should be there. If there is not - you should address your question to the Artifactory devs."}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458910656, "post_id": 36218103, "comment_id": 60072065, "body": "Thanks for the information @AlexandrEvstigneev, will reach out to the Artifactory devs. Could you also provide me with the blog or discussion form for posting my question!"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459143366, "post_id": 36244971, "comment_id": 60142227, "body": "Thank you @fundeldman for the info, we have actually gone through this REST API methods for group creation and permission targets, but what we are unable to find is how to add the users to these groups once they have been created! Please let us know if you know a way we can do this using REST API after we have created a group."}, {"owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "reply_to_user": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459149874, "post_id": 36244971, "comment_id": 60144426, "body": "That&#39;s actually done via the <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-UpdateUser\" rel=\"nofollow noreferrer\">update user</a> api - see the json for it <a href=\"https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459159711, "post_id": 36244971, "comment_id": 60148476, "body": "Actually  I have an LDAP user integration, because of which I wont be able to get/ specify the password of the user, which is a mandatory field for updating the profile. Also if I have to create a group called reader with all users added in it is there a way I can do through REST API directly or I will have to go and update all the users&#39; profiles through the above way(which I am sceptical about). Please help me with this info. Thanks in advance"}, {"owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "reply_to_user": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459165937, "post_id": 36244971, "comment_id": 60151457, "body": "The user&#39;s password is mandatory, yes, but an admin user can achieve this as well so you only need one password - not all of them"}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459169784, "post_id": 36244971, "comment_id": 60153551, "body": "Thank you @fundeldman, one more thing, is there a way other than going and fetching every user we want to add to the group and then modifying his json file to add him to the group, is this the only option available? Or is there any other way we can achieve this? Because I need to create a group with every user in Artifactory, in this case fetching and modifying every user profile is not an efficient way considering the user base we have! And we also have certain scenarios where we have to create a group with around quarter personnel from our user base. Please suggest me on this."}, {"owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "reply_to_user": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459175148, "post_id": 36244971, "comment_id": 60156555, "body": "Not through the API, no - you are welcome to submit a <a href=\"https://www.jfrog.com/jira\" rel=\"nofollow noreferrer\">feature request</a>.  As an alternative to your use case you can either modify the security.xml descriptor with everything you want, or better yet, use LDAP groups <a href=\"https://www.jfrog.com/confluence/display/RTF/LDAP+Groups#LDAPGroups-SynchronizingLDAPGroupswithArtifactory\" rel=\"nofollow noreferrer\">import</a> to do all the work for you."}, {"owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "reply_to_user": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459175211, "post_id": 36244971, "comment_id": 60156580, "body": "It&#39;s too bad you only mentioned LDAP now as groups import is probably what you&#39;re looking for - after the LDAP groups are synced with Artifactory you can assign them permission targets as you&#39;d like."}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459236380, "post_id": 36244971, "comment_id": 60182320, "body": "Thanks for the information @fundeldman, though I have to say I am disappointed that there is no way of doing this using REST API."}, {"owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "reply_to_user": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 0, "creation_date": 1459237837, "post_id": 36244971, "comment_id": 60183205, "body": "Why do you need REST if LDAP group sync does exactly what you need..?"}, {"owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "edited": false, "score": 1, "creation_date": 1459242278, "post_id": 36244971, "comment_id": 60185926, "body": "Actually we have to create certain groups at Artifactory level after the LDAP integration is done, for which we want to add the users. Anyways I just am thinking, what is the use of creating groups using REST API if you are unable to add any users to them using the same REST API. Doesn&#39;t it feel like something is missing?"}], "tags": [], "owner": {"reputation": 2504, "user_id": 1391901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOoiC.jpg?s=128&g=1", "display_name": "danf", "link": "https://stackoverflow.com/users/1391901/danf"}, "is_accepted": false, "score": 4, "last_activity_date": 1459064201, "creation_date": 1459064201, "answer_id": 36244971, "question_id": 36218103, "link": "https://stackoverflow.com/questions/36218103/adding-users-to-groups-in-jfrogs-artifactory-using-rest-api/36244971#36244971", "title": "Adding Users to Groups in Jfrog&#39;s Artifactory using REST API", "body": "<p>The REST API you're looking for is <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-UpdateGroup\" rel=\"nofollow\">here</a> - it uses a json descriptor for operations as specified <a href=\"https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON\" rel=\"nofollow\">here</a>.\nIf you want to see an example of such descriptor use the <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-GetGroupDetails\" rel=\"nofollow\">get group details</a> on the specific group you're after (use <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-GetGroups\" rel=\"nofollow\">get groups</a> for a list of all your groups).</p>\n\n<p>To add users to specific permission targets you can use <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-GetPermissionTargets\" rel=\"nofollow\">get permission tragets</a>, <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-GetPermissionTargetDetails\" rel=\"nofollow\">get permission target details</a> and <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CreateorReplacePermissionTarget\" rel=\"nofollow\">create or replace permission target</a> respectively - <a href=\"https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON\" rel=\"nofollow\">This</a>  is the json it uses.</p>\n\n<p>As for client usage - any simple REST client implementation will do of course, you don't have to use an Artifactory specific client for that.</p>\n\n<p>Admin permissions are required for such operations - ask your system admin for these if you are not the admin - it's always better to use the <a href=\"https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-Authentication\" rel=\"nofollow\">API key</a> but basic auth will work as well.</p>\n"}], "owner": {"reputation": 69, "user_id": 6039446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZJpG.jpg?s=128&g=1", "display_name": "TechSavvy", "link": "https://stackoverflow.com/users/6039446/techsavvy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1459064201, "creation_date": 1458901317, "question_id": 36218103, "link": "https://stackoverflow.com/questions/36218103/adding-users-to-groups-in-jfrogs-artifactory-using-rest-api", "title": "Adding Users to Groups in Jfrog&#39;s Artifactory using REST API", "body": "<p>I need to add users to the groups in Artifactory using REST API. I cannot find any REST API methods available for doing this.I am using PERL scripting to automate Artifactory's REST API calls. Could you please suggest me some ways of doing this? \nThanks in Advance!</p>\n"}, {"tags": ["perl", "soap", "content-type"], "comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1458901241, "post_id": 36217751, "comment_id": 60067751, "body": "What library you are using for SOAP servcie?"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458909938, "post_id": 36217751, "comment_id": 60071698, "body": "I am using SOAP::Lite"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1458911922, "post_id": 36217751, "comment_id": 60072727, "body": "As far as i understand, customer means that you should send proper headers, like &quot;text/xml; charset=utf-8&quot; and it&#39;s default behavior, unless you&#39;ve specified &quot; $SOAP::Constants::DO_NOT_USE_CHARSET = 1;&quot;. You may clarify what your customer mean and use debug/trace to check if everything is right."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458912551, "post_id": 36217751, "comment_id": 60073099, "body": "I am client. Customer is server. Web service is called by me and customer returns data to me. But data returned by customer as response includes illegal characters which gives Parser error at my code. When I called at debug mode, I saw that content-type of response is without UTF-8. I requested customer to add UTF-8 to content-type. But they said they can not do it. I told them that, because response is sent by them it should be done by them. Because I am only calling their web service without any parameter and they return data to me."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458912686, "post_id": 36217751, "comment_id": 60073174, "body": "As a result, my header is &quot;text/xml; charset=utf-8&quot; which is default but header of response is &quot;text/xml;&quot;. As a client, can I add &quot;charset=utf-8&quot; to value of content-type of response? Is this possible? I think I can determine only my header not server&#39;s but customer claims opposite"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458913093, "post_id": 36217751, "comment_id": 60073442, "body": "You can&#39;t modify headers sent to you by remote server. You may try to ask them to use specific charset with Accetp-Charset for example. But again, it&#39;s better to ask them what they mean by &quot;you may do it yourself&quot;"}, {"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1458922642, "post_id": 36217751, "comment_id": 60078508, "body": "Also, can you show us the exact error message and some of the illegal characters? I&#39;d also support trying &quot;$SOAP::Constants::DO_NOT_USE_CHARSET = 1;&quot; as an experiment."}, {"owner": {"reputation": 122, "user_id": 6104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbGf0.png?s=128&g=1", "display_name": "Marco Munari", "link": "https://stackoverflow.com/users/6104068/marco-munari"}, "edited": false, "score": 0, "creation_date": 1458975521, "post_id": 36217751, "comment_id": 60095962, "body": "Does your request has Accept-Charset: utf-8 ?"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458986625, "post_id": 36217751, "comment_id": 60098584, "body": "@AlexandrEvstigneev I asked them to set content-type to &quot;UTF-8&quot; before sending response but they say that web service has been written with PL-SQL and there is no option to set it with code. It can be set at database level only and they say that their database character set is &quot;UTF-8&quot;. But when I call web service at debug mode and with SOAP-UI, I don&#39;t see UTF-8 at content-type value"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1458987208, "post_id": 36217751, "comment_id": 60098764, "body": "@HughBarnard   Following is error message:  not well-formed (invalid token) at line 10, column 27, byte 371 at /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/XML&zwnj;&#8203;/Parser.pm line 187  Illegal characters are lile geometric shapes: triangle, square. But these are for only Turkish characters  I tried $SOAP::Constants::DO_NOT_USE_CHARSET = 1 but did not work"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 122, "user_id": 6104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbGf0.png?s=128&g=1", "display_name": "Marco Munari", "link": "https://stackoverflow.com/users/6104068/marco-munari"}, "edited": false, "score": 0, "creation_date": 1458987275, "post_id": 36217751, "comment_id": 60098783, "body": "@MarcoMunari how do I set it? I am using same code for other customers and I don&#39;t have problems at characters"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 122, "user_id": 6104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbGf0.png?s=128&g=1", "display_name": "Marco Munari", "link": "https://stackoverflow.com/users/6104068/marco-munari"}, "edited": false, "score": 0, "creation_date": 1458987614, "post_id": 36217751, "comment_id": 60098890, "body": "@MarcoMunari I asked them to set content-type to &quot;UTF-8&quot; before sending response but they say that web service has been written with PL-SQL and there is no option to set it with code. They say that It can be set at database level only and they say that their database character set is &quot;UTF-8&quot;. But when I call web service at debug mode with Perl and with SOAP-UI, I don&#39;t see UTF-8 at content-type value of response. Even at SOAP-UI which is independent from language. But at SOAP-UI, Raw data is correct, XML data is incorrect."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458987724, "post_id": 36217751, "comment_id": 60098929, "body": "@AlexandrEvstigneev with the comment  &quot;you may do it yourself&quot; they mean that it should be done by me with the API I used (SOAP::Lite). They say that I can determine content-type of their response."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458990883, "post_id": 36217751, "comment_id": 60099837, "body": "All you can do is to send header, like Accept-Encoding or send charset for your request. You should use debugging mode to see if they are set."}, {"owner": {"reputation": 322, "user_id": 300113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2e2857243a00c807abd5e6b5d9e3a6?s=128&d=identicon&r=PG", "display_name": "Hugh Barnard", "link": "https://stackoverflow.com/users/300113/hugh-barnard"}, "edited": false, "score": 0, "creation_date": 1459015988, "post_id": 36217751, "comment_id": 60108098, "body": "This: <a href=\"https://community.oracle.com/thread/2508641?tstart=0\" rel=\"nofollow noreferrer\">community.oracle.com/thread/2508641?tstart=0</a> on the Oracle website looks like a related problem and the &#39;seeds&#39; of the solution at the server end. As an architectural matter, it should be fixed at that end, if at all possible. Sorry to be vague!"}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 6104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbGf0.png?s=128&g=1", "display_name": "Marco Munari", "link": "https://stackoverflow.com/users/6104068/marco-munari"}, "is_accepted": false, "score": 0, "last_activity_date": 1458951923, "last_edit_date": 1458951923, "creation_date": 1458946954, "answer_id": 36229452, "question_id": 36217751, "link": "https://stackoverflow.com/questions/36217751/perl-change-content-type-of-response/36229452#36229452", "title": "Perl Change Content Type Of Response", "body": "<p>PS: I noticed that the cited RFC2376 is obsolete by RFC3023 (conservative enough) and then RFC7303 that I'm omitting to evaluate now in involved current use and content, so the relevance of the following might not be that definitive, I'm feeling to delete it.</p>\n\n<p>You have everything formal in <a href=\"https://tools.ietf.org/html/rfc2376#section-3.1\" rel=\"nofollow\">RFC2376 XML Media Types: Section 3.1 text/xml Registration</a><br>\nSee also <em>Section 6 Examples</em> of that RFC, particularly <a href=\"https://tools.ietf.org/html/rfc2376#section-6.8\" rel=\"nofollow\">Section 6.4 text/xml with Omitted Charset</a></p>\n\n<p>The server side (your customer) is <code>STRONGLY RECOMMENDED</code> to use <code>charset</code> parameter that they are not currently using.\nAnd if <code>charter</code> is omitted <code>XML processors MUST use the default charset value of \"us-ascii\"</code></p>\n\n<p>You are right asking the customer to specify charset, the \"MUST\" in the RFC is a strong requirement that limits also your adaptability from client side when they are not sending us-ascii.</p>\n"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458951923, "creation_date": 1458899931, "last_edit_date": 1458909988, "question_id": 36217751, "link": "https://stackoverflow.com/questions/36217751/perl-change-content-type-of-response", "title": "Perl Change Content Type Of Response", "body": "<p>I am calling a SOAP web service as client.\nFollowing is content-type value of response</p>\n\n<pre><code>Content-Type: text/xml\n</code></pre>\n\n<p>I requested customer to add UTF-8 to response as follow:</p>\n\n<pre><code>Content-Type: text/xml;charset=utf-8\n</code></pre>\n\n<p>But customer says that it can be from client side. Is this possible? Can I determine content type of server as client?</p>\n"}, {"tags": ["perl", "web"], "comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1458898384, "post_id": 36217224, "comment_id": 60066497, "body": "i&#39;m afraid this question is not related to perl, but to windows. using start url  seems ignores credentials in url in user:pass@ format. From the perl&#39;s perspective you are doing everything right. Just try to achieve what you want from cmd and then put it to system call"}, {"owner": {"reputation": 79, "user_id": 2483640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30da7d33d2decf0b14f4ca33b140c0b5?s=128&d=identicon&r=PG", "display_name": "Jacob Sokol", "link": "https://stackoverflow.com/users/2483640/jacob-sokol"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1458899873, "post_id": 36217224, "comment_id": 60067194, "body": "Referring to to Perl maybe there is any method providing such functionality?"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 1, "creation_date": 1458901468, "post_id": 36217224, "comment_id": 60067849, "body": "Perl is just proxy here. Let&#39;s say: it&#39;s just typing it in cmd instead of you. You could try to investigate different browsers approach, may be they have special cmd line options to pass credentials. As far as I understand the process, there is no simple over table approach."}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 2, "last_activity_date": 1458901456, "creation_date": 1458901456, "answer_id": 36218134, "question_id": 36217224, "link": "https://stackoverflow.com/questions/36217224/authorization-on-website-in-perl/36218134#36218134", "title": "Authorization on website in PERL", "body": "<p>You might want to try <a href=\"http://search.cpan.org/~corion/WWW-Mechanize-Firefox-0.78/lib/WWW/Mechanize/Firefox.pm\" rel=\"nofollow\">WWW::Mechanize::Firefox</a> module, which allows you to control Firefox browser with Perl.</p>\n\n<p>The documentation is quite good, and there are a lot of methods, so you should be able to find what you want by yourself on the CPAN documentation.</p>\n\n<p>I've never used it on Windows, but I think it should work fine. (It's based on Firefox Mozrepl module, which works on Windows)</p>\n"}], "owner": {"reputation": 79, "user_id": 2483640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30da7d33d2decf0b14f4ca33b140c0b5?s=128&d=identicon&r=PG", "display_name": "Jacob Sokol", "link": "https://stackoverflow.com/users/2483640/jacob-sokol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 36218134, "answer_count": 1, "score": 0, "last_activity_date": 1458901456, "creation_date": 1458897729, "question_id": 36217224, "link": "https://stackoverflow.com/questions/36217224/authorization-on-website-in-perl", "title": "Authorization on website in PERL", "body": "<p>How to open website on Internet browser (i.e. Firefox) with authorization in Perl?  </p>\n\n<p>In example?</p>\n\n<pre><code>my $url = \"http://www.google.com/\";\nsystem(qq{start \"\" \"$url\"});\n</code></pre>\n\n<p>Above code opens website www.google.com, but how to open it when website requires authorization?</p>\n"}, {"tags": ["perl", "ssh", "perlnetssh"], "comments": [{"owner": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 0, "creation_date": 1459047469, "post_id": 36216757, "comment_id": 60116951, "body": "It looks like <code>Net::SSH::Perl</code> does not implement support for partial/multiple authentication methods.  Maybe request this on its <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=Net-SSH-Perl\" rel=\"nofollow noreferrer\">CPAN bug tracker</a>?"}, {"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "edited": false, "score": 0, "creation_date": 1459085167, "post_id": 36216757, "comment_id": 60125268, "body": "This works for me. What version are you using?"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1459260470, "post_id": 36216757, "comment_id": 60199156, "body": "All verion numbers are visible in the log above."}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1458895633, "creation_date": 1458895633, "question_id": 36216757, "link": "https://stackoverflow.com/questions/36216757/perl-netsshperl-authentication-with-password-and-pubkey", "title": "Perl: Net::SSH::Perl, authentication with password AND pubkey", "body": "<p>I am using Net::SSH::Perl and it works well with password or publiey-key authentication. But if i try to use both it struggles.</p>\n\n<p>But if I try it with OpenSSH clients ssh or sftp it is working well.</p>\n\n<p>Heres code and log.</p>\n\n<pre><code>my $ssh = Net::SSH::Perl-&gt;new(\"test.int\", port =&gt; 22, debug =&gt; 1);\n$ssh-&gt;login($usr, $pwd);\n</code></pre>\n\n<hr>\n\n<pre><code>debian: Connecting to test.int, port 22.\ndebian: Remote version string: SSH-2.0-OpenSSH_5.3\ndebian: Remote protocol version 2.0, remote software version OpenSSH_5.3\ndebian: Net::SSH::Perl Version 1.38, protocol version 2.0.\ndebian: No compat match: OpenSSH_5.3\ndebian: Connection established.\ndebian: Sent key-exchange init (KEXINIT), wait response.\ndebian: Algorithms, c-&gt;s: 3des-cbc hmac-sha1 none\ndebian: Algorithms, s-&gt;c: 3des-cbc hmac-sha1 none\ndebian: Entering Diffie-Hellman Group 1 key exchange.\ndebian: Sent DH public key, waiting for reply.\ndebian: Received host key, type 'ssh-dss'.\ndebian: Host 'test.int' is known and matches the host key.\ndebian: Computing shared secret key.\ndebian: Verifying server signature.\ndebian: Waiting for NEWKEYS message.\ndebian: Send NEWKEYS.\ndebian: Enabling encryption/MAC/compression.\ndebian: Sending request for user-authentication service.\ndebian: Service accepted: ssh-userauth.\ndebian: Trying empty user-authentication request.\ndebian: Authentication methods that can continue: publickey,password.\ndebian: Next method to try is publickey.\ndebian: Next method to try is password.\ndebian: Trying password authentication.\ndebian: Authentication methods that can continue: publickey.\ndebian: Next method to try is publickey.\nPermission denied at test.pl line 38.\n</code></pre>\n\n<p>Thats the debug-log of the console-client sftp which is working fine.</p>\n\n<pre><code>...\ndebug1: Authentications that can continue: publickey,password\ndebug1: Next authentication method: publickey\ndebug1: Offering RSA public key: /home/test/.ssh/id_rsa\ndebug1: Server accepts key: pkalg ssh-rsa blen 279\nAuthenticated with partial success.\ndebug1: Authentications that can continue: password\ndebug1: Next authentication method: password\ntest@test.int password:\ndebug1: Authentication succeeded (password).\nAuthenticated to test.int ([192.168.1.10]:22). \n...\n</code></pre>\n\n<p>Any help or advise is welcome, thanks!</p>\n"}, {"tags": ["windows", "perl", "sftp"], "comments": [{"owner": {"reputation": 11, "user_id": 6112709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d64ba6d6cf6fb5d26190bcb7dc53244?s=128&d=identicon&r=PG&f=1", "display_name": "user6112709", "link": "https://stackoverflow.com/users/6112709/user6112709"}, "edited": false, "score": 0, "creation_date": 1458886787, "post_id": 36215018, "comment_id": 60062472, "body": "plink method can work now. but transport still cannot work after more tries"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6112709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d64ba6d6cf6fb5d26190bcb7dc53244?s=128&d=identicon&r=PG&f=1", "display_name": "user6112709", "link": "https://stackoverflow.com/users/6112709/user6112709"}, "edited": false, "score": 0, "creation_date": 1459125042, "post_id": 36216692, "comment_id": 60138262, "body": "But how can I open pipe to the remote SFTP host? can you show me some code about this? thanks in advance"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 11, "user_id": 6112709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d64ba6d6cf6fb5d26190bcb7dc53244?s=128&d=identicon&r=PG&f=1", "display_name": "user6112709", "link": "https://stackoverflow.com/users/6112709/user6112709"}, "edited": false, "score": 0, "creation_date": 1459152923, "post_id": 36216692, "comment_id": 60145585, "body": "Never used it before. The point is that you should use connection information to make module connect to host, or pipes if you did it yourself. no sense to use them both."}, {"owner": {"reputation": 11, "user_id": 6112709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d64ba6d6cf6fb5d26190bcb7dc53244?s=128&d=identicon&r=PG&f=1", "display_name": "user6112709", "link": "https://stackoverflow.com/users/6112709/user6112709"}, "edited": false, "score": 0, "creation_date": 1459300610, "post_id": 36216692, "comment_id": 60220414, "body": "I am still confused. An example should be better. What I care is: when there are no plink can be invoked, how can I connect to remote SFTP server using Net-SFTP-Foreign. From the  module documentation available on CPAN, transport can be used. but I don&#39;t know how to use it."}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 0, "last_activity_date": 1458895311, "creation_date": 1458895311, "answer_id": 36216692, "question_id": 36215018, "link": "https://stackoverflow.com/questions/36215018/netsftpforeign-new-failed-with-transport/36216692#36216692", "title": "Net::SFTP::Foreign new failed with transport", "body": "<p>According to module documentation available on CPAN: <a href=\"http://search.cpan.org/~salva/Net-SFTP-Foreign-1.81/lib/Net/SFTP/Foreign.pm#API\" rel=\"nofollow\">http://search.cpan.org/~salva/Net-SFTP-Foreign-1.81/lib/Net/SFTP/Foreign.pm#API</a></p>\n\n<pre><code>transport =&gt; [$in_fh, $out_fh, $pid]\nallows one to use an already open pipe or socket as the transport for the SFTP protocol.\n</code></pre>\n\n<p>So you don't need host. Pipes will be used.</p>\n"}], "owner": {"reputation": 11, "user_id": 6112709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d64ba6d6cf6fb5d26190bcb7dc53244?s=128&d=identicon&r=PG&f=1", "display_name": "user6112709", "link": "https://stackoverflow.com/users/6112709/user6112709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458895311, "creation_date": 1458886663, "last_edit_date": 1458887042, "question_id": 36215018, "link": "https://stackoverflow.com/questions/36215018/netsftpforeign-new-failed-with-transport", "title": "Net::SFTP::Foreign new failed with transport", "body": "<p>When I use transport API of Net::SFTP::Foreign to connect to remote server on windows, It reports error </p>\n\n<blockquote>\n  <p>\"Invalid option 'host' or bad combination of options\" after\n  Net::SFTP::Foreign->new is invoked</p>\n</blockquote>\n\n<p>code is below:  </p>\n\n<pre><code>pipe $pR,$pW;\n  $sftp = Net::SFTP::Foreign-&gt;new(\"$user\\@$ip\",transport=&gt;[$pR,$pW]) or \n  $rdyTCE{$city1} = 1;\n</code></pre>\n"}, {"tags": ["regex", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458901942, "post_id": 36216497, "comment_id": 60068048, "body": "Looks pretty, but wouldn&#39;t that for example <code>eval {param1 + param2}</code> instead of <code>eval {$param1 + $param2}</code> (without the <code>$</code>s?)"}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458902020, "post_id": 36216497, "comment_id": 60068079, "body": "regex replaces terms with their values if they were previously defined"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458902235, "post_id": 36216497, "comment_id": 60068176, "body": "Ah, now I see. Even prettier. Your code doesn&#39;t do <code>eval {param1+param2}</code>, but instead <code>eval {5+10}</code>. Cool."}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": false, "score": 1, "last_activity_date": 1458894442, "creation_date": 1458894442, "answer_id": 36216497, "question_id": 36213076, "link": "https://stackoverflow.com/questions/36213076/read-a-file-and-apply-the-operation-and-store-it/36216497#36216497", "title": "Read a file and apply the operation and store it", "body": "<p>Well simple way is using regex with perl code and eval:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\nuse Data::Dumper;\n\nmy %ns = ();\n\nwhile( my $line = &lt;&gt; )\n{\n    chomp($line);\n    next unless ($line);\n\n    my ($term, $expr) = split m/\\s*=\\s*/, $line;\n\n    if( $term &amp;&amp; $expr )\n    {\n        $expr =~ s/(\\w+)/exists $ns{$1} ? $ns{$1}: $1/ge;\n        $ns{$term} = eval $expr;\n        warn $@ if $@;\n    }\n}\n\nsay Dumper(\\%ns);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6112250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85cb4900cf487e6fd948450f859fa650?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh U", "link": "https://stackoverflow.com/users/6112250/dinesh-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1458902813, "answer_count": 1, "score": -1, "last_activity_date": 1458894442, "creation_date": 1458872559, "last_edit_date": 1458873682, "question_id": 36213076, "link": "https://stackoverflow.com/questions/36213076/read-a-file-and-apply-the-operation-and-store-it", "closed_reason": "Not suitable for this site", "title": "Read a file and apply the operation and store it", "body": "<p>Say I have a file called param.txt. It contains,</p>\n\n<pre><code>param1 = 5;\nparam2 = 10;\nparam3 = 12;\nparam4 = 5;\nparam5 = param1 + param2;\nparam6 = param2 * param1;\nparam7 = param5 - param2;\nparam8 = param1 * param2 - param4;\n</code></pre>\n\n<p>I am reading this file in a perl script and storing all the parameter values till param4 in a hash. </p>\n\n<p>How will I store param5,param6,param7,param8 by applying the intended operation of just by reading file and build the hash?</p>\n"}, {"tags": ["perl", "recursion", "recursive-datastructures", "nested-reference"], "answers": [{"tags": [], "owner": {"reputation": 30226, "user_id": 2107876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/975e7190aac72397465126f04f46f3f6?s=128&d=identicon&r=PG", "display_name": "laune", "link": "https://stackoverflow.com/users/2107876/laune"}, "is_accepted": false, "score": 0, "last_activity_date": 1458900165, "creation_date": 1458900165, "answer_id": 36217813, "question_id": 36212899, "link": "https://stackoverflow.com/questions/36212899/perl-nested-structure-recursive-function/36217813#36217813", "title": "Perl nested structure: recursive function", "body": "<p>I'd use a somewhat different approach:</p>\n\n<pre><code>sub prindent {\n  my( $ref, $ind ) = @_;\n  if( ref( $ref ) eq 'HASH' ){\n    for my $key (sort keys %{$ref}){\n      print '  ' x $ind, $key;\n      my $val = $ref-&gt;{$key};\n      if( ref( $val ) ){\n        print \"\\n\";\n        prindent( $val, $ind + 1 );\n      } else {\n        print \" =&gt; $val\\n\";\n      }\n    }\n  } elsif( ref( $ref ) eq 'ARRAY' ){\n    for my $el ( @{$ref} ){\n      if( ref( $el ) ){\n        prindent( $el, $ind + 1 );\n      } else {\n        print '  ' x $ind, \"$el\\n\";\n      }\n    }\n  }\n}\nsub prindent2 {\n  my( $key, $val ) = @_;\n  if( defined $val ){\n    print \"$key\\n\";\n    prindent( $val, 1 );\n  } else {\n    prindent( $key, 0 );\n  }\n}\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>hash\n  d1\n    a =&gt; 123\n    b =&gt; 234\n  d2\n    1\n    2\n    3\n  d3 =&gt; hello\n\na\nb\n  c =&gt; 123\nd\n</code></pre>\n\n<p>You may not like the output for multidimensional arrays: all elements are in one column.</p>\n"}], "owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458900165, "creation_date": 1458870898, "last_edit_date": 1495541725, "question_id": 36212899, "link": "https://stackoverflow.com/questions/36212899/perl-nested-structure-recursive-function", "title": "Perl nested structure: recursive function", "body": "<p>As a follow up to my previous post <a href=\"https://stackoverflow.com/questions/36211176/indent-and-recursively-print-data-structure-in-perl\">here</a>!</p>\n\n<p>I tested the algorithm with nested hash references:</p>\n\n<p>Algorithm:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n&amp;expand_references2([a,b,{c=&gt;123},d]);\n\nsub expand_references2 {\n  my $indenting = -1;\n  my $inner; $inner = sub {\n    my $ref = $_[0];\n    my $key = $_[1];\n    $indenting++;\n    if(ref $ref eq 'ARRAY'){\n      print '  ' x $indenting;\n      printf(\"%s\\n\",($key) ? $key : '');\n      $inner-&gt;($_) for @{$ref};\n    }elsif(ref $ref eq 'HASH'){\n      print '  ' x $indenting;\n      printf(\"%s\\n\",($key) ? $key : '');\n      for my $k(sort keys %{$ref}){\n        $inner-&gt;($ref-&gt;{$k},$k);\n      }\n    }else{\n      if($key){\n        print '  ' x $indenting,$key,' =&gt; ',$ref,\"\\n\";\n      }else{\n        print '  ' x $indenting,$ref,\"\\n\";\n      }\n    }\n    $indenting--;\n  };\n  $inner-&gt;($_) for @_;\n}\n</code></pre>\n\n<p>In some cases, the indentation and the newline character do not display as expected:</p>\n\n<p>Example1:</p>\n\n<pre><code>expand_references2(hash=&gt;{\n                          d1=&gt;{a=&gt;123,\n                               b=&gt;234},\n                          d2=&gt;[1,2,3],\n                          d3=&gt;'hello'});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Hash\n&lt;newline&gt;                 # not required                                                                                                                                                                                                               \n  d1                                                                                                                                                                                                           \n    a =&gt; 123                                                                                                                                                                                                   \n    b =&gt; 234                                                                                                                                                                                                   \n  d2                                                                                                                                                                                                           \n    1                                                                                                                                                                                                          \n    2                                                                                                                                                                                                          \n    3                                                                                                                                                                                                          \n  d3 =&gt; hello\n</code></pre>\n\n<p>Instead I would prefer an output something like this:</p>\n\n<pre><code>Hash\n  d1                                                                                                                                                                                                           \n    a =&gt; 123                                                                                                                                                                                                   \n    b =&gt; 234                                                                                                                                                                                                   \n  d2                                                                                                                                                                                                           \n    1                                                                                                                                                                                                          \n    2                                                                                                                                                                                                          \n    3                                                                                                                                                                                                          \n  d3 =&gt; hello\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>Hash\n  d1                                                                                                                                                                                                           \n    a =&gt; 123                                                                                                                                                                                                   \n    b =&gt; 234                                                                                                                                                                                                   \n\n  d2                                                                                                                                                                                                           \n    1                                                                                                                                                                                                          \n    2                                                                                                                                                                                                          \n    3                                                                                                                                                                                                          \n\n  d3 =&gt; hello\n</code></pre>\n\n<p>Example2:</p>\n\n<pre><code>expand_references2([a,b,{c=&gt;123},d]);\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a\nb\n  c=&gt;123           # indentation not required\nd\n</code></pre>\n\n<p>Any guidance on how to achieve the above to scenario or indenting it right without extra newlines?</p>\n\n<p>Appreciate any help.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "recursion"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1458859494, "post_id": 36211176, "comment_id": 60055642, "body": "This question is based on a false premise. <code>[a,b,c=&gt;&#39;d&#39;,e]</code> will compile only without <code>use strict &#39;subs&#39;</code> in place, and even then will raise a warning <i>Unquoted string may clash with future reserved word</i>. It is <i>identical</i> to <code>[ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ]</code>. The only difference between <code>=&gt;</code> and an ordinary comma is that it will implcitly quote its first parameter if it is a bareword"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1458859929, "post_id": 36211176, "comment_id": 60055820, "body": "You <i>must always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program you write. It is also wrong to call subroutines with an ampersand character <code>&amp;</code>; that hasn&#39;t been good practice since Perl 5 arrived twenty-two years ago. Whatever tutorial you are using to learn Perl you should drop it and find a more recent one"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458859968, "post_id": 36211176, "comment_id": 60055841, "body": "Borodin: Thanks, you are right. It did consider [a,b,c=&gt;&#39;d&#39;,e] as [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ] and did not indent. Also, It did not use strict subs which is why it compiled and predicted the result as  a b c d e"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1458860120, "post_id": 36211176, "comment_id": 60055900, "body": "Data::Dumper does exactly this; you can use it to show you what the output <i>should</i> look like. <code>perl -MData::Dumper -e&#39;print Dumper [aa,xx=&gt;&quot;yy&quot;,rr]&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1458860709, "post_id": 36211176, "comment_id": 60056099, "body": "Please don&#39;t add more questions to your post. If you have a new problem then you should open a new question"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1458860940, "post_id": 36211176, "comment_id": 60056171, "body": "Borodin: Sure, I will open a new question next time on."}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458861943, "post_id": 36211176, "comment_id": 60056459, "body": "@Borodin: Could you please clarify why it adds an extra newline after every key?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1458860543, "creation_date": 1458860543, "answer_id": 36211444, "question_id": 36211176, "link": "https://stackoverflow.com/questions/36211176/indent-and-recursively-print-data-structure-in-perl/36211444#36211444", "title": "Indent and recursively print data structure in Perl", "body": "<p>This question is based on a false premise: <code>[a, b, c =&gt; 'd', e]</code> will compile only without <code>use strict 'subs'</code> in place, and even then will raise a warning</p>\n\n<blockquote>\n  <p>Unquoted string may clash with future reserved word</p>\n</blockquote>\n\n<p>It is identical to <code>[ 'a', 'b', 'c', 'd', 'e' ]</code></p>\n\n<p>The only difference between a <em>fat comma</em> <code>=&gt;</code> and an ordinary comma is that it will implicitly quote its first parameter if it is a bareword</p>\n\n<p>You <em>must always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program you write. It is also wrong to call subroutines with an ampersand character <code>&amp;</code>; that hasn't been good practice since Perl 5 arrived twenty-two years ago. Whatever tutorial you are using to learn Perl you should drop it and find a more recent one</p>\n"}], "owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 1, "accepted_answer_id": 36211444, "answer_count": 1, "score": 1, "last_activity_date": 1458875439, "creation_date": 1458859149, "last_edit_date": 1495535373, "question_id": 36211176, "link": "https://stackoverflow.com/questions/36211176/indent-and-recursively-print-data-structure-in-perl", "title": "Indent and recursively print data structure in Perl", "body": "<p>I am working on a function which should recursively parse through the data structure passed into it and then print it out with indentation. Something like:</p>\n\n<pre><code>indent(foo=&gt;{bar=&gt;'baz'})\nshould print like:\nfoo\n  bar : baz\n\nindent(foo=&gt;[a,b,c=&gt;'d',e])\nshould print like\nfoo\n  a\n  b\n  c:d\n  e\n</code></pre>\n\n<p>I came across a <a href=\"https://stackoverflow.com/questions/1038271/recursively-printing-data-structures-in-perl\">post</a> here on Stack Overflow with a very similar scenario using depth-first recursion, as well as <a href=\"http://perldesignpatterns.com/?DepthFirstRecursion\" rel=\"nofollow noreferrer\">this page</a> about how to recurse through a Perl data structure.</p>\n\n<p>However, I am unable to follow how the the inner sub works. Also, it does not indent/print for certain scenarios like:</p>\n\n<pre><code>[aa,xx=&gt;'yy',rr]\nOutput:\n  aa\n  xx\n  yy\n  rr\n</code></pre>\n\n<p>This is the code I am trying to work with:</p>\n\n<pre><code>&amp;expand_references2([aa,xx=&gt;'yy',rr]);\n\nsub expand_references2 {\n  my $indenting = -1;\n  my $inner; $inner = sub {\n    my $ref = $_[0];\n    my $key = $_[1];\n    $indenting++;\n    if(ref $ref eq 'ARRAY'){\n      print '  ' x $indenting;\n      printf(\"%s\\n\",($key) ? $key : '');\n      $inner-&gt;($_) for @{$ref};\n    }elsif(ref $ref eq 'HASH'){\n      print '  ' x $indenting;\n      printf(\"%s\\n\",($key) ? $key : '');\n      for my $k(sort keys %{$ref}){\n        $inner-&gt;($ref-&gt;{$k},$k);\n      }\n    }else{\n      if($key){\n        print '  ' x $indenting,$key,' =&gt; ',$ref,\"\\n\";\n      }else{\n        print '  ' x $indenting,$ref,\"\\n\";\n      }\n    }\n    $indenting--;\n  };\n  $inner-&gt;($_) for @_;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1458855540, "post_id": 36210341, "comment_id": 60054137, "body": "See this <a href=\"http://ideone.com/ZOfyWR\" rel=\"nofollow noreferrer\">IDEONE demo</a>. You are quantifying a capture group (1) and you are placing a capture group on a single character pattern then quantify it (2)."}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "edited": false, "score": 0, "creation_date": 1458855953, "post_id": 36210504, "comment_id": 60054288, "body": "my regex works fine with the dates as i also have different dates format and different regex. My problem relays on perl and the output i get when i use these regex. Also i actually tested this regex using similar website and i got the expected matches ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "reply_to_user": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "edited": false, "score": 0, "creation_date": 1458856250, "post_id": 36210504, "comment_id": 60054417, "body": "@FahadAlkamli: I have added what was happening with your regex and also added a solution which does not uses capturing groups."}, {"owner": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "edited": false, "score": 2, "creation_date": 1458856545, "post_id": 36210504, "comment_id": 60054537, "body": "OMG i was trying to cover as many formates as possible and i end up doing something really stupid ! Thanks man you saved my life !"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "is_accepted": true, "score": 2, "last_activity_date": 1458858415, "last_edit_date": 1458858415, "creation_date": 1458855789, "answer_id": 36210504, "question_id": 36210341, "link": "https://stackoverflow.com/questions/36210341/strange-ouput-from-regex-in-perl/36210504#36210504", "title": "strange ouput from regex in perl", "body": "<blockquote>\n  <p>Where did this value come from 12-2-5 ? </p>\n</blockquote>\n\n<p>Since you are using <strong>nested capturing groups</strong> It's capturing individual parts.</p>\n\n<p>From <code>10-12-2015</code> it's capturing <code>12-</code> <code>2</code> <code>-</code> <code>5</code> which is reflected in your result after <strong>complete capture</strong> of <code>10-12-2015</code>. Same goes for every instance.</p>\n\n<p>To extract only dates you can use this regex.</p>\n\n<p><strong>Regex:</strong> <code>(?:\\d{2}|\\d{4})[-\\/\\.\\s]\\d{2}[-\\/\\.\\s](?:\\d{4}|\\d{2})</code></p>\n\n<p>This regex does not use <strong>capturing groups</strong>.</p>\n\n<p><strong><a href=\"https://regex101.com/r/vM6qU2/3\" rel=\"nofollow\">Regex101 Demo</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "edited": false, "score": 1, "creation_date": 1458856601, "post_id": 36210636, "comment_id": 60054558, "body": "Yeah seems like i was trying to be smart but instead i was being stupid ,Thanks man !"}], "tags": [], "owner": {"reputation": 3845, "user_id": 5982110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3697e0ab47bfe2f56ade505b61527f23?s=128&d=identicon&r=PG&f=1", "display_name": "rpy", "link": "https://stackoverflow.com/users/5982110/rpy"}, "is_accepted": false, "score": 0, "last_activity_date": 1458856348, "creation_date": 1458856348, "answer_id": 36210636, "question_id": 36210341, "link": "https://stackoverflow.com/questions/36210341/strange-ouput-from-regex-in-perl/36210636#36210636", "title": "strange ouput from regex in perl", "body": "<p>You should not be using so much grouping with your regexp when you are not interested in the values.</p>\n\n<p>Every opening <code>(</code> is contributing a value into the result list.</p>\n\n<p>You might use the following slightly resexp to minimize the groupings and only have to deal with 2 values per match:</p>\n\n<pre><code>$_ =~ /((\\d{1,4}[\\s.\\\\-]){1,3}\\d{2,4})/g\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "edited": false, "score": 0, "creation_date": 1459024736, "post_id": 36212171, "comment_id": 60111369, "body": "Actually your code helped me to solve another problem ! so nothing is too late ! thanks man"}], "tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": 1, "last_activity_date": 1458864996, "creation_date": 1458864996, "answer_id": 36212171, "question_id": 36210341, "link": "https://stackoverflow.com/questions/36210341/strange-ouput-from-regex-in-perl/36212171#36212171", "title": "strange ouput from regex in perl", "body": "<p>Probably too late but using noobs regex capture group your code could look like this</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nmy $filename=\"file.txt\";\n\nmy $data;\nopen($data,$filename) or die \"couldn't open the file\";\nwhile (my $line = &lt;$data&gt;){\n    chomp($line);\n    my (@count) = $line =~ /((?:\\d{2}|\\d{4})[-\\/\\.\\s]\\d{2}[-\\/\\.\\s](?:\\d{4}|\\d{2}))/g;\n\n    print join(\" : \", @count);\n\n    print \"\\n\";\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>10-12-2015\n10 12 2015 : 10.12.2015 : 11-23-2014\n10-12-2015\n10/12/2015\n10.12.2015\n10.12.15\n10.12.1412 : 10.12.1412\n1992.12.30\n22/04/96\n1996-04-22\n22.04.96\n10.12.1412\n1992.12.30 : 10.12.2015\n22/04/96\n04/22/96\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 3126202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7013f6927065677780cb14fcae0b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Alkamli", "link": "https://stackoverflow.com/users/3126202/fahad-alkamli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 36210504, "answer_count": 3, "score": 0, "last_activity_date": 1458864996, "creation_date": 1458855110, "question_id": 36210341, "link": "https://stackoverflow.com/questions/36210341/strange-ouput-from-regex-in-perl", "title": "strange ouput from regex in perl", "body": "<p>So am trying to get all the matches for a regex in perl but the output is mixed with strange values?\nThis is my perl code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nmy $filename=\"test.txt\";\n\nmy $data;\nopen($data,$filename) or die \"couldn't open the file\";\nwhile(&lt;$data&gt;)\n{\nchomp($_);\n\n\nmy @count = ($_ =~ /(((\\d){1,4}(\\s|\\-|\\.|\\/)){1,3}(\\d){2,4})/g);\n\nprint @count;\n\nprint \"\\n\";\n}\n</code></pre>\n\n<p>And the content of my text file is as following :</p>\n\n<pre><code>content 10-12-2015\ncontent 10 12 2015\ncontent 10-12-2015\ncontent 10/12/2015\ncontent 10.12.2015\ncontent 10.12.15\ncontent 10.12.1412\ncontent 1992.12.30\ncontent 22/04/96\ncontent 1996-04-22\ncontent 22.04.96\ncontent 10.12.1412\ncontent 1992.12.30\ncontent 22/04/96\ncontent 04/22/96\n</code></pre>\n\n<p>the really weird output am getting is the matched regex and other values? in the array.</p>\n\n<pre><code>10-12-201512-2-5\n10 12 201512 2 5\n10-12-201512-2-5\n10/12/201512/2/5\n10.12.201512.2.5\n10.12.1512.2.5\n10.12.141212.2.2\n1992.12.3012.2.0\n22/04/9604/4/6\n1996-04-2204-4-2\n22.04.9604.4.6\n10.12.141212.2.2\n1992.12.3012.2.0\n22/04/9604/4/6\n04/22/9622/2/6\n</code></pre>\n\n<p>An example of a normal output would be : 10-12-2015 but where did this value come from 12-2-5 ? \nThe problem is that in my other text file i have more than one date in a line which means i can't only get the first match from the array .</p>\n\n<p>pls help . . . . ! am new to Perl and this is killing me !</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 3059096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d12ffc0cd9482e260f377fa9a3c0f3bb?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixJay", "link": "https://stackoverflow.com/users/3059096/phoenixjay"}, "edited": false, "score": 1, "creation_date": 1458847511, "post_id": 36208182, "comment_id": 60050186, "body": "Thank you, I see where my mistake was now."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 0, "last_activity_date": 1458846535, "creation_date": 1458846535, "answer_id": 36208182, "question_id": 36207755, "link": "https://stackoverflow.com/questions/36207755/perl-my-find-on-a-certain-column/36208182#36208182", "title": "Perl my find on a certain column", "body": "<p>You can try,</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy $find = qr/(?:M0|MT|H0|HT|J0|JT)/;\nmy $header;\n\n# open (my $NEW, \"&gt;\", \"output.txt\" );\n# open (my $FILE, \"&lt;\", \"input.txt\");\nmy $FILE = \\*DATA;\nmy $NEW = \\*STDOUT;\n\nwhile (&lt;$FILE&gt;) {\n    if ( /^\\s*(TRANSACTION[^\\r\\n]+)/ ) {\n        $header = $1;\n    }\n    elsif (/^\\h{0,4}$find/) {\n        print $NEW \"$header\\t\", $_;\n    }\n}\nclose ($FILE);\nclose ($NEW);\n\n__DATA__\n                     REMOTE: 00000  TYPE: GENERAL    PAYER NAME: PAYER\n                        ISA(1000000)   GS(100000000)   ST(10000000)\n                            TRANSACTION SET STATUS - A (Accepted)\n\nPATIENT         CLAIM        BILL  STATEMENT   STATEMENT                                  FILE   \nACCOUNT #       AMOUNT       TYPE  FROM DATE   THRU DATE   NUMBER              DATE    CREATE DATE\n--------------------------------------------------------------------------------------------------\nMT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n\n<p>output</p>\n\n<pre><code>TRANSACTION SET STATUS - A (Accepted)   MT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nTRANSACTION SET STATUS - A (Accepted)   MT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nTRANSACTION SET STATUS - A (Accepted)   MT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458859023, "post_id": 36208215, "comment_id": 60055466, "body": "The <code>elsif</code> is appropriate here because a line that matches the <code>TRANSACTION</code> pattern will never match the <code>$find</code> pattern. Removing the <code>elsif</code> makes the code do two tests on every line instead of just one"}], "tags": [], "owner": {"reputation": 867, "user_id": 6110034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b271ad1c75bb5be85ca57fda337aff0?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6110034/j-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1458846656, "creation_date": 1458846656, "answer_id": 36208215, "question_id": 36207755, "link": "https://stackoverflow.com/questions/36207755/perl-my-find-on-a-certain-column/36208215#36208215", "title": "Perl my find on a certain column", "body": "<p>Well there are several issues - your <code>/(TRANSACTION\\w+)/</code> pattern will never match - <code>elsif (/^\\h{4}/$find/) {</code> is a syntax error so your code doesn't run at all.</p>\n\n<p>Finally you don't need an <code>elsif</code> at all - you can just set the header then do a separate test for your record matching e.g.</p>\n\n<pre><code>while (&lt;FILE&gt;) {\n    $header = $1 if /^\\s*(TRANSACTION .+)(?=\\s+|$)/;\n    if (/$find/) {\n        print NEW \"$header\\t\", $_;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467563557, "last_edit_date": 1467563557, "creation_date": 1458859228, "answer_id": 36211188, "question_id": 36207755, "link": "https://stackoverflow.com/questions/36207755/perl-my-find-on-a-certain-column/36211188#36211188", "title": "Perl my find on a certain column", "body": "<p>I would write this. It's not very different from your own code or either of the solutions, but it's a little more concise and I think it is clearer</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $find = qr/[MHJ][0T]/;\n\nmy $header;\n\nwhile ( &lt;DATA&gt; ) {\n\n    if ( /^\\s*(TRANSACTION.*\\S)/ ) {\n        $header = $1;\n    }\n    elsif ( $header and /^\\s*$find/ ) {\n        print \"$header\\t$_\";\n    }\n}\n\n__DATA__\n                     REMOTE: 00000  TYPE: GENERAL    PAYER NAME: PAYER\n                        ISA(1000000)   GS(100000000)   ST(10000000)\n                            TRANSACTION SET STATUS - A (Accepted)\n\nPATIENT         CLAIM        BILL  STATEMENT   STATEMENT                                  FILE   \nACCOUNT #       AMOUNT       TYPE  FROM DATE   THRU DATE   NUMBER              DATE    CREATE DATE\n--------------------------------------------------------------------------------------------------\nMT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>TRANSACTION SET STATUS - A (Accepted)   MT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nTRANSACTION SET STATUS - A (Accepted)   MT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nTRANSACTION SET STATUS - A (Accepted)   MT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3059096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d12ffc0cd9482e260f377fa9a3c0f3bb?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixJay", "link": "https://stackoverflow.com/users/3059096/phoenixjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36208182, "answer_count": 3, "score": 0, "last_activity_date": 1467563557, "creation_date": 1458845017, "last_edit_date": 1458858511, "question_id": 36207755, "link": "https://stackoverflow.com/questions/36207755/perl-my-find-on-a-certain-column", "title": "Perl my find on a certain column", "body": "<p>I am trying to get my <code>elsif</code> to work with regard to copying the lines after my header is captured. Can someone help me and tell me what I am doing wrong? </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $find = \"^(M0|MT|H0|HT|J0|JT)\";\nmy $header;\n\nopen (NEW, \"&gt;\", \"output.txt\" ) or die \"could not open:$!\";\n\nopen (FILE, \"&lt;\", \"input.txt\") or die \"could not open:$!\";\n\nwhile (&lt;FILE&gt;) {\n\n    if ( /^\\s*TRANSACTION/ ) {\n        ($header) = /(TRANSACTION\\w+)/;\n    }\n    elsif ( /^\\h{4}/$find/ ) {\n        print NEW \"$header\\t\", $_;\n    }\n}\nclose (FILE);\nclose (NEW);\n</code></pre>\n\n<p>Input file example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>                     REMOTE: 00000  TYPE: GENERAL    PAYER NAME: PAYER\n                        ISA(1000000)   GS(100000000)   ST(10000000)\n                            TRANSACTION SET STATUS - A (Accepted)\n\nPATIENT         CLAIM        BILL  STATEMENT   STATEMENT                                  FILE   \nACCOUNT #       AMOUNT       TYPE  FROM DATE   THRU DATE   NUMBER              DATE    CREATE DATE\n--------------------------------------------------------------------------------------------------\nMT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16  \nMT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n\n<p>Expected output file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TRANSACTION SET STATUS - A (Accepted)     MT000000000     $14,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\nTRANSACTION SET STATUS - A (Accepted)     MT000000000     $11,000.00   111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\nTRANSACTION SET STATUS - A (Accepted)     MT000000000     $5,000.00    111   01/01/16    02/01/16    XXXXXXXXX         01/01/01    03/21/16\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1458844457, "post_id": 36207539, "comment_id": 60048484, "body": "Please format your sample input and code by indenting it with four spaces and putting newline before the block."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1458844963, "post_id": 36207539, "comment_id": 60048809, "body": "Why do you need hash if you can just print/not print string to output file right away, depending on your condition?"}], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1458844984, "creation_date": 1458844984, "answer_id": 36207747, "question_id": 36207539, "link": "https://stackoverflow.com/questions/36207539/removing-lines-from-a-hash-in-perl-to-a-new-file-if-value-meets-certain-require/36207747#36207747", "title": "Removing lines from a hash in Perl to a new file, if value meets certain requirements", "body": "<p>You don't need hash for this task, as you are not comparing values of different keys. To read all lines from a file you can use <code>while (my $line = &lt;$in_fh&gt;)</code>. Additionally, using bareword filehandle names is discouraged, use scalar instead: <code>open (my $in_fh, 'sample.txt') ...</code>. Putting it all together:</p>\n\n<pre><code>open (my $in_fh, 'sample.txt') or die \"Cannot open INFILE1: $!\\n\";\nopen (my $out_fh, '&gt;output.txt') or die \"Cannot open OUTFILE: $!\\n\";\n\nwhile (my $line = &lt;$in_fh&gt;)\n{\n    chomp $line;\n    my ($k, $v) = split /\\s+/, $line;\n\n    if ($v &gt; 20)\n    {\n        print $out_fh $line . \"\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458847809, "post_id": 36208405, "comment_id": 60050347, "body": "The OP also wants to delete matches from the input file."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458848105, "post_id": 36208405, "comment_id": 60050516, "body": "@ThisSuitIsBlackNot If/when the OP clarifies the question, I will certainly update my answer."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": -1, "last_activity_date": 1458847298, "creation_date": 1458847298, "answer_id": 36208405, "question_id": 36207539, "link": "https://stackoverflow.com/questions/36207539/removing-lines-from-a-hash-in-perl-to-a-new-file-if-value-meets-certain-require/36208405#36208405", "title": "Removing lines from a hash in Perl to a new file, if value meets certain requirements", "body": "<pre><code>$ perl -wane 'print if $F[1] &lt;= 20' input.txt &gt; output.txt\n</code></pre>\n\n<p>The <code>-w</code> switch turns on warnings. </p>\n\n<p>The <code>-n</code> switch creates a <code>while (&lt;&gt;) { ... }</code> loop around the program.</p>\n\n<p>The <code>-a</code> switch turns on autosplit mode, which splits <code>$_</code> into <code>@F</code> for each line.</p>\n\n<p>The <code>-e</code> switch specifies our short little filter program.</p>\n"}], "owner": {"reputation": 1, "user_id": 6110874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8052f09b16035b755535f13499ee2b15?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6110874/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458847298, "creation_date": 1458844262, "last_edit_date": 1458844896, "question_id": 36207539, "link": "https://stackoverflow.com/questions/36207539/removing-lines-from-a-hash-in-perl-to-a-new-file-if-value-meets-certain-require", "title": "Removing lines from a hash in Perl to a new file, if value meets certain requirements", "body": "<p>Perl newbie, could use some help. Using a hash in Perl, trying to remove a line from the original file into a new file, if the value is less than or equal to 20.</p>\n\n<p>So original file:</p>\n\n<pre><code>apple       30\norange      45\npear        2\n</code></pre>\n\n<p>Resulting two files would be:</p>\n\n<pre><code>apple       30\norange      45\n\npear        2\n</code></pre>\n\n<p>This is my code so far:</p>\n\n<pre><code>use strict; use warnings;\nuse Data::Dumper;\n\nopen (INFILE1, 'sample.txt') or die \"Cannot open INFILE1: $!\\n\";\nopen (OUTFILE, '&gt;output.txt') or die \"Cannot open OUTFILE: $!\\n\";\n\nmy %Hash;\n\nwhile(&lt;INFILE1&gt;){\n   chomp;\n   my ($k, $v) = split(/\\s+/);\n   push @{$Hash{'INFILE1'}{$k}},$v;\n}\n</code></pre>\n\n<p>I think I have to use a foreach loop next, but I have no idea where to go from here.</p>\n"}, {"tags": ["perl", "reference", "operator-overloading", "copy-constructor"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1458845567, "post_id": 36207529, "comment_id": 60049151, "body": "Perl doesn&#39;t have constructors, copy or otherwise. Convention is to create a method called <code>clone</code>. // You can use <a href=\"http://search.cpan.org/perldoc?overload#Copy_Constructor\" rel=\"nofollow noreferrer\">this</a> to do copy-on-write if your object is immutable except through overloaded operators. But that&#39;s not the case here."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1458845940, "post_id": 36207529, "comment_id": 60049358, "body": "I think I may make my object immutable except for overloaded operators.  That looks like it may be the most elegant approach."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1458885944, "post_id": 36207529, "comment_id": 60062225, "body": "Please treat Perl as Perl and not as C++. If you try to somehow enforce semantics you&#39;ve used with other languages you will never have a happy relationship with the language."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1458893992, "post_id": 36207529, "comment_id": 60064833, "body": "Storable dclone? <a href=\"http://perldoc.perl.org/Storable.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Storable.html</a>"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1458908377, "post_id": 36207529, "comment_id": 60070967, "body": "In Perl, objects are implemented as blessed <i>references</i>, so they have reference semantics."}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1458903102, "creation_date": 1458903102, "answer_id": 36218550, "question_id": 36207529, "link": "https://stackoverflow.com/questions/36207529/how-can-i-make-invoke-a-copy-constructor-in-perl/36218550#36218550", "title": "How can I make &#39;=&#39; invoke a copy constructor in Perl?", "body": "<p>To clone data you may use <a href=\"http://search.cpan.org/~garu/Clone-0.38/Clone.pm\" rel=\"nofollow\">Clone</a> module. </p>\n\n<p>Example:</p>\n\n<pre><code>package Foo;\nuse parent 'Clone';\nsub new { bless {}, shift }\n\npackage main;\n\nmy $obj = Foo-&gt;new;\nmy $copy = $obj-&gt;clone;\n</code></pre>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 36218550, "answer_count": 1, "score": 2, "last_activity_date": 1458903102, "creation_date": 1458844239, "last_edit_date": 1458844906, "question_id": 36207529, "link": "https://stackoverflow.com/questions/36207529/how-can-i-make-invoke-a-copy-constructor-in-perl", "title": "How can I make &#39;=&#39; invoke a copy constructor in Perl?", "body": "<p>I know '=' can't be directly overloaded in Perl, but I want to be able to use '=' to call the copy constructor for one of my objects.</p>\n\n<p>example:</p>\n\n<pre><code>my $object1 = Object-&gt;new('value' =&gt; 1);\n\n# I want this to invoke the copy constructor of \"$object1\" instead of copying a reference\nmy $object2 = $object1;\n\n# This should not modify \"$object1\"\n$object2-&gt;set_value(12);\n\nprint $object1-&gt;get_value().\"\\n\";\nprint $object2-&gt;get_value().\"\\n\";\n</code></pre>\n\n<p>I want the output to be:</p>\n\n<pre><code>1\n12\n</code></pre>\n\n<p>How can I make this work?</p>\n"}, {"tags": ["perl", "pegex"], "answers": [{"comments": [{"owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 1, "creation_date": 1458849574, "post_id": 36208731, "comment_id": 60051389, "body": "Ah YES!  The main trick is the <code>(!macro-start)</code> - really cool. Somehow - i understand every pegex grammar what i read - but i&#39;m unable invent them myself. Really thanx, for the other comments too! +10 if i could - especially for the new StackOverflow user ;) :)."}, {"owner": {"reputation": 36, "user_id": 6111231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ac44e36ed742caf521594cb0b4e3aa?s=128&d=identicon&r=PG", "display_name": "vicash", "link": "https://stackoverflow.com/users/6111231/vicash"}, "reply_to_user": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 0, "creation_date": 1458858637, "post_id": 36208731, "comment_id": 60055314, "body": "If you have further <code>Pegex</code> questions please visit <b>#pegex</b> channel on Freenode IRC."}], "tags": [], "owner": {"reputation": 36, "user_id": 6111231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ac44e36ed742caf521594cb0b4e3aa?s=128&d=identicon&r=PG", "display_name": "vicash", "link": "https://stackoverflow.com/users/6111231/vicash"}, "is_accepted": true, "score": 2, "last_activity_date": 1458848879, "last_edit_date": 1458848879, "creation_date": 1458848508, "answer_id": 36208731, "question_id": 36206728, "link": "https://stackoverflow.com/questions/36206728/pegex-grammar-design/36208731#36208731", "title": "Pegex grammar design", "body": "<p>Here is a possible solution. It is tricky since your text is arbitrary, so you have to use the <code>got_*</code> methods in your <code>Rec</code> receiver class to work through it. You can see my comment on how to debug Pegex grammars too. I use the <code>XXX</code> module to dump the data neatly as should you for Pegex debugging. Here is the sample code that works:</p>\n\n<pre><code>#!/usr/bin/env perl\npackage Rec {\n    use 5.014;\n    use warnings;\n    use Pegex::Base;\n    extends 'Pegex::Tree';\n\n    use XXX;\n\n    sub got_comment {}\n\n    sub got_text {\n        my ($self, $got) = @_;\n        return $self-&gt;flatten($got);\n    }\n    sub got_macro {\n        my ($self, $got) = @_;\n        return $got;\n    }\n    sub final {\n        my($self, $got) = @_;\n        XXX $got;\n    }\n}\n\nuse 5.014;\nuse warnings;\nuse XXX;\nuse Pegex::Parser;\nuse Pegex::Grammar;\n\nmy $source = &lt;&lt;'EOF';\nfree text\n@somemacro1( optional free text\n    @somemacro2(SOME TEXT)@ or other optional free text\n)@\nanother free text\nEOF\n\nmy $grammar_text = do {local $/; &lt;DATA&gt;};\nmy $grammar = Pegex::Grammar-&gt;new(text =&gt; $grammar_text);\nmy $receiver = Rec-&gt;new;\nmy $parser = Pegex::Parser-&gt;new( grammar =&gt; $grammar, \n       receiver =&gt; $receiver,\n       debug =&gt; 1); ### NOTE USE THIS FOR DEBUGGING\nmy $ret = $parser-&gt;parse($source);\n__DATA__\n%grammar test\n%version 0.0.1\n\nstart: seq* end-of-seq\n\nend-of-seq: - EOS\nseq: comment | macro | text\n\ncomment: blank-line\nmacro-stop: - / RPAREN AT / -\nmacro-start: - macro-name -\nmacro: macro-start macro-content* macro-stop\nmacro-content: (comment | macro | text)\nmacro-name: / AT ( WORD+ ) LPAREN /\ntext: - / (!macro-start) ([ WORDS ]+) / -\nblank-line: /- EOL/\n</code></pre>\n"}], "owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 36208731, "answer_count": 1, "score": 2, "last_activity_date": 1458848879, "creation_date": 1458841609, "last_edit_date": 1458841780, "question_id": 36206728, "link": "https://stackoverflow.com/questions/36206728/pegex-grammar-design", "title": "Pegex grammar design", "body": "<p>Need parse text like the following:</p>\n\n<pre><code>optional free text\n@somemacro1( optional free text\n        @somemacro2(SOME TEXT)@ or other optional free text\n)@\nanother free text\n</code></pre>\n\n<p>e.g. it is basically very simple:</p>\n\n<ul>\n<li>the source is an free text</li>\n<li>which could contain some macros in a form <code>@MACRONAME(</code> <em>some content</em> <code>)@</code></li>\n<li>the <em>some content</em> is again an free text which could contain some macro - e.g. the macros could be nested (see the above example)</li>\n<li>the result of the parsed macro is some string (based on the macro name)</li>\n</ul>\n\n<p>I want learn <a href=\"https://metacpan.org/pod/distribution/Pegex/lib/Pegex.pod\" rel=\"nofollow\">Pegex</a> so decided to use it for this task.</p>\n\n<p><strong>The question is: could someone help me with the Pegex-grammar for the above?</strong></p>\n\n<p>Is someone wondering what i already tried, here is my test source - isn't working. :(</p>\n\n<pre><code>package Rec {\n    use 5.014;\n    use warnings;\n    use base 'Pegex::Receiver';\n    use Data::Dumper;\n\n    sub gotrule {\n        my($self, $got) = @_;\n        say \"Got rule:\", $self-&gt;{rule};\n        return \"GOT\" . $self-&gt;{rule} . \"RULE\";\n    }\n}\n\nuse 5.014;\nuse warnings;\nuse Data::Dumper;\nuse Pegex::Parser;\nuse Pegex::Grammar;\n\nmy $source = &lt;&lt;'EOF';\nfree text\n@somemacro1( optional free text\n    @somemacro2(SOME TEXT)@ or other optional free text\n)@\nanother free text\nEOF\n\nmy $grammar_text = do {local $/; &lt;DATA&gt;};\nmy $grammar = Pegex::Grammar-&gt;new(text =&gt; $grammar_text);\nmy $receiver = Rec-&gt;new;\nmy $parser = Pegex::Parser-&gt;new( grammar =&gt; $grammar, receiver =&gt; $receiver);\nmy $input = Pegex::Input-&gt;new(string =&gt; $source);\nmy $ret = $parser-&gt;parse($input);\n\n__DATA__\n%grammar test\n%version 0.0.1\n\nstart:      seq*\n\nseq:        | macro\n        | text\n\nmacro:      / AT macro-name LPAREN content RPAREN AT /\nmacro-name: / WORD+ /\ntext:       / ALL* /\ncontent:    / ALL* /\n</code></pre>\n"}, {"tags": ["perl", "caching", "hash"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1458843074, "last_edit_date": 1458843074, "creation_date": 1458842309, "answer_id": 36206935, "question_id": 36206676, "link": "https://stackoverflow.com/questions/36206676/modify-mutidimensional-hash-passed-by-reference-in-perl/36206935#36206935", "title": "Modify mutidimensional hash passed by reference in PERL", "body": "<p>First of all, you didn't pass a hash by reference; you passed a reference to a hash.</p>\n\n<p>While <code>$VAR1</code>, <code>$_[2]</code> and <code>$cacheref</code> all reference the same hash, it's not <code>%cache</code>. Changing <code>%cache</code> won't affect the hash referenced by those (though changing variables referenced by values of <code>%cache</code> may change variables referenced by values of <code>%$cacheref</code>).</p>\n\n<p>Simplest solution: Stop doing all those wasteful copies!</p>\n\n<pre><code>sub computeConceptsUntilLevel{\n\n    my $emailWords    = shift;\n    my $conceptsArray = shift;\n    my $cache         = shift;\n    my $deepLevel     = shift;\n\n    my @toret = ();\n\n    for (my $i=0;$i&lt;$deepLevel;$i++){\n        my %conceptsMap = ();\n        foreach my $concept (@{$conceptsArray-&gt;[$i]}){\n            foreach my $word (keys %$emailWords) {\n                print \"[$i]-&gt;Palabra: $word - Concepto: $concept\\n\";\n                if (wordHasConcept($cache,$word,$concept,$i)){\n                    push @{$conceptsMap{$concept}}, $word;\n                }else{\n                    if (defined($word) and belongsTo($word,$concept)){\n                        push @{$conceptsMap{$concept}}, $word;\n                        push @{$cache-&gt;{$word}{$i}}, $concept;\n                    }\n                }\n            }\n        }\n        $toret[$i] = \\%conceptsMap;\n    }\n    return @toret;\n}\n</code></pre>\n\n<hr>\n\n<p>If you want to allow</p>\n\n<pre><code>computeConceptsUntilLevel(..., ..., my $cache, ...)\n</code></pre>\n\n<p>Change</p>\n\n<pre><code>my $cache = shift;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my $cache = ( shift //= {} );\n</code></pre>\n\n<p>This is possible because arguments are (always) passed by reference in Perl.</p>\n\n<hr>\n\n<pre><code>for my $i (0 .. $deepLevel-1)\n</code></pre>\n\n<p>is clearer and more efficient than</p>\n\n<pre><code>for (my $i=0;$i&lt;$deepLevel;$i++){\n</code></pre>\n\n<hr>\n\n<pre><code>push @toret, \\%conceptsMap;\n</code></pre>\n\n<p>is clearer than</p>\n\n<pre><code>$toret[$i] = \\%conceptsMap;\n</code></pre>\n\n<hr>\n\n<pre><code>my @toret;\nmy %conceptsMap;\n</code></pre>\n\n<p>are less wasteful and cluttered versions of</p>\n\n<pre><code>my @toret = ();\nmy %conceptsMap = ();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1458904108, "last_edit_date": 1495542687, "creation_date": 1458904108, "answer_id": 36218770, "question_id": 36206676, "link": "https://stackoverflow.com/questions/36206676/modify-mutidimensional-hash-passed-by-reference-in-perl/36218770#36218770", "title": "Modify mutidimensional hash passed by reference in PERL", "body": "<p>To understand better how to work with perl data structures look <a href=\"https://stackoverflow.com/a/35792849/4632019\">here</a></p>\n\n<p>The problem in your program lives here:</p>\n\n<pre><code>my %cache = %{$cacheRef};\n</code></pre>\n\n<p>Here you create copy of cache inside your sub. So any keys you add at this sub will live only at %cache and %$cacheRef will intact.</p>\n\n<p>In modern perl you may do:</p>\n\n<pre><code>my \\%cache = $cacheRef;\n</code></pre>\n\n<p>This will alias %cache to $cacheRef.<br>\nOr do some replaces in your code:  </p>\n\n<ol>\n<li>Remove this <code>my %cache = %{$cacheRef};</code></li>\n<li>Instead of <code>\\%cache</code> use <code>$cacheRef</code></li>\n<li>Instead of <code>$cache{$word}{$i}</code> use <code>$cacheRef-&gt;{$word}{$i}</code>\n<code>\\%cache</code></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 5908488, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-baZD_W56S0U/AAAAAAAAAAI/AAAAAAAAB3E/jWQqc0PfKnM/photo.jpg?sz=128", "display_name": "David Ruano Ord&#225;s", "link": "https://stackoverflow.com/users/5908488/david-ruano-ord%c3%a1s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458904108, "creation_date": 1458841425, "question_id": 36206676, "link": "https://stackoverflow.com/questions/36206676/modify-mutidimensional-hash-passed-by-reference-in-perl", "title": "Modify mutidimensional hash passed by reference in PERL", "body": "<p>I'm trying to do a function in Perl (see below) able verify the existence of each word in the hash (%emailWords) over the hash (%cache). If the word from %emailWords is not in the %cache but the method belongsTo returns true %cache hashmap must be updated with the new $word. However, altough I pass the %cache hashmap as reference, the value outside the function is empty.  </p>\n\n<pre><code>sub computeConceptsUntilLevel{\n\n    my $hashRef = shift;\n    my $wordnetRef = shift;\n    my $cacheRef = shift;\n    my $deepLevel = shift;\n\n    my %emailWords = %{$hashRef};\n    my @conceptsArray = @{$wordnetRef};\n    my %cache = %{$cacheRef};\n\n    my @toret = ();\n\n    for (my $i=0;$i&lt;$deepLevel;$i++){\n        my %conceptsMap = ();\n        foreach my $concept (@{$conceptsArray[$i]}){\n            foreach my $word (keys %emailWords) {\n                print \"[$i]-&gt;Palabra: $word - Concepto: $concept\\n\";\n                if (wordHasConcept(\\%cache,$word,$concept,$i)){\n                    push @{$conceptsMap{$concept}}, $word;\n                }else{\n                    if (defined($word) and belongsTo($word,$concept)){\n                        push @{$conceptsMap{$concept}}, $word;\n                        push @{$cache{$word}{$i}}, $concept;\n                    }\n                }\n            }\n        }\n        $toret[$i] = \\%conceptsMap;\n    }\n    return @toret;\n}\n</code></pre>\n\n<p>Inside the function the %cache looks like:</p>\n\n<pre><code>$VAR1 = {\n          'cat' =&gt; {\n                     '1' =&gt; [\n                              'physical_entity#n#1'\n                            ],\n                     '0' =&gt; [\n                              'entity#n#1'\n                            ]\n                   },\n          'duck' =&gt; {\n                      '1' =&gt; [\n                               'physical_entity#n#1'\n                             ],\n                      '0' =&gt; [\n                               'entity#n#1'\n                             ]\n                    }\n        };\n</code></pre>\n\n<p>But outside is $VAR1={}.</p>\n\n<p>What I'm doing wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458841335, "post_id": 36206512, "comment_id": 60046519, "body": "You seem looking for <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a>. With <code>eval</code> you can execute arbitrary strings as Perl code."}, {"owner": {"reputation": 43, "user_id": 5596685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bac09db57788018944fdd5d29608c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Tropin", "link": "https://stackoverflow.com/users/5596685/nikita-tropin"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458841649, "post_id": 36206512, "comment_id": 60046719, "body": "Is it possible to do without eval?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1458841669, "post_id": 36206512, "comment_id": 60046737, "body": "@PerlDog That would be pretty dangerous since the OP is accepting arguments from the command line. A dispatch table (and possibly AUTOLOAD) would be better."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458841895, "post_id": 36206512, "comment_id": 60046891, "body": "@ThisSuitIsBlackNot Good point; I didn&#39; think about that. I focused on how to run arbitrary code. I&#39;m currently writing an answer. If I&#39;ll post it, I&#39;ll consider that."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1458842851, "post_id": 36206512, "comment_id": 60047465, "body": "See <a href=\"http://stackoverflow.com/q/1915616/176646\">How can I elegantly call a Perl subroutine whose name is held in a variable?</a>"}, {"owner": {"reputation": 43, "user_id": 5596685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bac09db57788018944fdd5d29608c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Tropin", "link": "https://stackoverflow.com/users/5596685/nikita-tropin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458845580, "post_id": 36206512, "comment_id": 60049160, "body": "@ThisSuitIsBlackNot I can&#39;t build dispatch table because I can&#39;t get reference to sub in different package when package name is in variable. Is it possible without eval?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458846032, "post_id": 36206512, "comment_id": 60049405, "body": "You don&#39;t build a dispatch table dynamically with user input, so it doesn&#39;t matter that the package name is in a variable: <code>my %dispatch = (&#39;Foo::bar&#39; =&gt; \\&amp;Baz::qux);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5596685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bac09db57788018944fdd5d29608c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Tropin", "link": "https://stackoverflow.com/users/5596685/nikita-tropin"}, "edited": false, "score": 0, "creation_date": 1458844878, "post_id": 36207335, "comment_id": 60048757, "body": "Cool approach but that was an example script and I can&#39;t apply it in a real code. Can you help? I have such line of code in LendingClub package: <code>$nmzed-&gt;$field( $Wrapper::LendingClub::{&quot;${nmz}::&quot;}{from_string}($lc-&gt;{$lc_f&zwnj;&#8203;ield}) );</code> and it fails to execute with message <i>&quot;Can&#39;t use an undefined value as a subroutine reference at lib/Wrapper/LendingClub.pm line 140.&quot;</i> $nmz contains correct package name."}, {"owner": {"reputation": 43, "user_id": 5596685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bac09db57788018944fdd5d29608c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Tropin", "link": "https://stackoverflow.com/users/5596685/nikita-tropin"}, "edited": false, "score": 0, "creation_date": 1458847124, "post_id": 36207335, "comment_id": 60049979, "body": "I got an idea, thanks"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1458849372, "last_edit_date": 1458849372, "creation_date": 1458843618, "answer_id": 36207335, "question_id": 36206512, "link": "https://stackoverflow.com/questions/36206512/using-string-to-execute-class-subroutine/36207335#36207335", "title": "Using string to execute class subroutine", "body": "<pre><code>$main::{\"${mod}::\"}{some_sub}();\n\n$main::{\"${mod}::\"}{$meth}();\n</code></pre>\n\n<p>%Mod1:: is a top level hash but is also a key/value in %main:: so we just need to make up the key and index the hash.  No <code>eval()</code> needed.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I tried a deeply nested package example and the same basic idea seems to work:</p>\n\n<pre><code>% perl\nuse ExtUtils::CBuilder::Platform::darwin;\n$nmz = 'darwin';\n$ExtUtils::CBuilder::Platform::{\"${nmz}::\"}{compile}();\nCan't call method \"SUPER::compile\" on unblessed reference at /System/Library/Perl/5.16/ExtUtils/CBuilder/Platform/darwin.pm line 18.\n</code></pre>\n\n<p>The error is due to my not calling the function with what it expects, but the point is I managed to call the function.</p>\n"}], "owner": {"reputation": 43, "user_id": 5596685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bac09db57788018944fdd5d29608c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Tropin", "link": "https://stackoverflow.com/users/5596685/nikita-tropin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1458884955, "accepted_answer_id": 36207335, "answer_count": 1, "score": 1, "last_activity_date": 1458849372, "creation_date": 1458840884, "question_id": 36206512, "link": "https://stackoverflow.com/questions/36206512/using-string-to-execute-class-subroutine", "closed_reason": "Duplicate", "title": "Using string to execute class subroutine", "body": "<p>I working with a bunch of packages that shares the same interface. I need to execute the same subroutine on different class names and want to make it dynamic, i.e. something like in this example:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Modern::Perl;\nuse Data::Dumper;\n\nuse Mod1;\nuse Mod2;\n\nmy $mod = $ARGV[0];\nmy $meth = $ARGV[1];\n\n${mod}::some_sub;\n${mod}::${meth};\n</code></pre>\n\n<p>I need to call exactly subroutine and not a class' method. How I can achieve this?\nWhen I'm executing script above from CLI with arguments 'Mod1 some_sub' I'm getting script execution error with next message:</p>\n\n<pre><code>Bad name after :: at ./test.pl line 13.\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Bareword found where operator expected at ./test.pl line 12, near \"${mod}::some_sub\"\n    (Missing operator before ::some_sub?)\nsyntax error at ./test.pl line 12, near \"${mod}::some_sub\"\nExecution of ./test.pl aborted due to compilation errors.\n</code></pre>\n\n<p>for last 2 lines</p>\n\n<p>Mod1.pm looks like this:</p>\n\n<pre><code>package Mod1;\n\nuse Modern::Perl;\nuse Data::Dumper;\n\nsub some_sub {\n    say Dumper(\\@_);\n    say 'in some_meth';\n}\n\n1;\n</code></pre>\n\n<p>And Mod2.pm code is next:</p>\n\n<pre><code>package Mod2;\n\nuse Modern::Perl;\nuse Data::Dumper;\n\nsub other_meth {\n    say Dumper(\\@_);\n    say 'other';\n}\n\n1;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 1, "creation_date": 1458837087, "post_id": 36204374, "comment_id": 60043791, "body": "Every time you sucessfully sent a letter, save user name you&#39;ve already processed to hash and serialize it to some file/DB. On next run read it and ignore users already in this hash."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1458904574, "post_id": 36204374, "comment_id": 60069160, "body": "May you clarify: You parse log and check if user made change. If so you send mail. May you clarify what is problem and what you mean: &#39;But I am interested only in new real-time entries&#39;"}, {"owner": {"reputation": 11, "user_id": 6110182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae778b2fa8859b315cc5cbf493a93e7?s=128&d=identicon&r=PG&f=1", "display_name": "new2perl2016", "link": "https://stackoverflow.com/users/6110182/new2perl2016"}, "edited": false, "score": 0, "creation_date": 1459192017, "post_id": 36204374, "comment_id": 60165664, "body": "So if a particular user makes a change, the id, userid and partyid would get written to a file and then contents sent to an email alert. Since the script is run on a cron every minute, if the log file does not change on next run a duplicate email alert will be sent out for the previous user id making those changes."}, {"owner": {"reputation": 11, "user_id": 6110182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae778b2fa8859b315cc5cbf493a93e7?s=128&d=identicon&r=PG&f=1", "display_name": "new2perl2016", "link": "https://stackoverflow.com/users/6110182/new2perl2016"}, "edited": false, "score": 0, "creation_date": 1459192036, "post_id": 36204374, "comment_id": 60165680, "body": "I&#39;m trying to avoid this happening by if the log does not change and if it&#39;s the same user id who made the change to do nothing. I&#39;ve been reading about using a hash but I&#39;m still very new to perl and struggling for a solution."}, {"owner": {"reputation": 11, "user_id": 6110182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae778b2fa8859b315cc5cbf493a93e7?s=128&d=identicon&r=PG&f=1", "display_name": "new2perl2016", "link": "https://stackoverflow.com/users/6110182/new2perl2016"}, "edited": false, "score": 0, "creation_date": 1459192046, "post_id": 36204374, "comment_id": 60165686, "body": "open($cmd, &quot;tail -n 23 /raid/logs/date +%H |&quot;);"}], "owner": {"reputation": 11, "user_id": 6110182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae778b2fa8859b315cc5cbf493a93e7?s=128&d=identicon&r=PG&f=1", "display_name": "new2perl2016", "link": "https://stackoverflow.com/users/6110182/new2perl2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458838381, "creation_date": 1458834377, "last_edit_date": 1458838381, "question_id": 36204374, "link": "https://stackoverflow.com/questions/36204374/how-to-exclude-or-not-print-previous-found-entries-in-script", "title": "How to exclude or not print previous found entries in script", "body": "<p>Can someone shed some light on how to have my script kick off only if new entries are found for the current hour? Our logs are based in 00 01 02, etc.</p>\n\n<p>When this runs it will look for any accounts specified within my <code>for</code> loop and send an email if this particular user made a cert change for the hour. If a match is found then everything is fine.</p>\n\n<p>But I am interested only in new real-time entries which I can't figure out.</p>\n\n<p>This will be run from a cron, and I can't have it repeating the same entry.  I am new to Perl and can't seem to figure this out.</p>\n\n<p>I have tried the <a href=\"https://p3rl.org/File::Tail\" rel=\"nofollow\"><code>File::Tail</code></a> module and other CPAN mods but due to company policies some mods are not allowed.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy $flag = 0;\nmy $few = shift || 1;\nmy $id;\nmy $newline;\nmy $partyId;\nmy $userid;\nmy $tid;\nmy $infile;\nmy @Takeraccounts = ( 'SCN', 'CX' );\nmy $mail_dest = 'xxxxx@cx.com';\n\nmy %TIME;\n\n(\n    $TIME{SEC},  $TIME{MIN},  $TIME{HOUR}, $TIME{MDAY}, $TIME{MON},\n    $TIME{YEAR}, $TIME{WDAY}, $TIME{YDAY}, $TIME{ISDST}\n) = localtime(time);\n\nmy $OLD_MIN  = $TIME{MIN};\nmy $OLD_HOUR = $TIME{HOUR};\n\nmy $cmd      = \"cat /raid/logs/`date +%H`\";\nmy $out_file = \"/home/resource/certchange.txt\";\n\nopen FF, \"$cmd |\";\nopen( OUT, \"&gt;&gt; $out_file\" ) || die \"Cannot open $out_file\";    # temp file to which to write the formated output\n\nwhile ( &lt;FF&gt; ) {\n\n    my $line = $_;\n\n    #chomp ($now_time);\n    $line =~ s/\\n/ /;\n    if ( /Updating cert/ .. /,permissions/ ) {\n\n        $newline = \"$line\";\n\n        if ( $line =~ /Updating cert.*updated by (\\w+)/ ) {\n            $id = $1;\n        }\n\n        if ( $newline =~ /UPDATE.*id:(\\w+).*partyId:(\\w+),perm:/ ) {\n\n            $userid  = $1;\n            $partyId = $2;\n\n            foreach (@Takeraccounts) {\n\n                if ( $partyId =~ /$_/ ) {\n                    print OUT \"Certificate cert Updated by $id for userid $userid, PartyID $partyId\\n\";\n                    open ML, \"| mutt -e\\\"set realname='Support'; set use_from=yes; set from='support\\@cx.com'; set envelope_from=yes\\\" -s ' Alert! cert CHANGED' -i $out_file -- $mail_dest\";\n                    close ML;\n                }\n            }\n        }\n    }\n}\n\nclose FF;\nclose(OUT);\n\nunlink $out_file;\n</code></pre>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458837370, "post_id": 36204032, "comment_id": 60043972, "body": "Please use <i>markdown</i> to format your questions. It will help you to read <a href=\"http://stackoverflow.com/help/formatting\"><i>How do I format my posts using Markdown or HTML?</i></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1458837776, "post_id": 36204032, "comment_id": 60044271, "body": "Is your perl executable built for 64-bit addressing? Check the output from <code>perl -MConfig -E&#39;say $Config{ptrsize} * 8&#39;</code> if you&#39;re not sure"}, {"owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1459080426, "post_id": 36204032, "comment_id": 60123872, "body": "I found the problem in the script. Either way, I don&#39;t know why users here decreased my question... :("}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "edited": false, "score": 0, "creation_date": 1459080690, "post_id": 36205689, "comment_id": 60123938, "body": "Thank you for your answer @ikegami. I already figure it out. I found the problem in my script. I was using warnings there and got lots of warnings which probably overflow the error stream and stuck the script while I was waiting in my Java code on the read() of the inputstream."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1458838212, "creation_date": 1458838212, "answer_id": 36205689, "question_id": 36204032, "link": "https://stackoverflow.com/questions/36204032/perl-process-reaching-30mb-and-stuck/36205689#36205689", "title": "Perl process reaching 30MB and stuck", "body": "<p>No, Perl does not impose limit on how much memory the program can allocate.</p>\n\n<p>The architecture imposes limits (32-bit processes have 2GB to 3GB of addressable memory), and the system can impose further limit (e.g. using <code>ulimit</code>), but that's not the issue here because Perl dies when it runs out of memory.</p>\n\n<p>Your program blocked for reasons unrelated to the amount of memory it was using at the time.</p>\n"}], "owner": {"reputation": 339, "user_id": 1632560, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c88eeef0ac0a74a3dd227ad15df556c8?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/1632560/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1458838212, "creation_date": 1458833515, "last_edit_date": 1458837819, "question_id": 36204032, "link": "https://stackoverflow.com/questions/36204032/perl-process-reaching-30mb-and-stuck", "title": "Perl process reaching 30MB and stuck", "body": "<p>I have a Perl script that is started by a Java process. When the process reaches 30MB it is stuck forever. I noticed that less then 27MB the script finished successfully.</p>\n\n<p>My Java <code>-Xmx</code> and <code>-Xms</code> are 1500MB</p>\n\n<p>The OS is Windows Server 2008 R2 64bit with 4G RAM.</p>\n\n<p>I am using ActivePerl 5.18.4</p>\n\n<p>Is there a limitation on memory of Perl process?</p>\n"}, {"tags": ["perl", "memory", "substring", "large-files"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1458828060, "post_id": 36201884, "comment_id": 60037338, "body": "The main thing to remember is that after you&#39;ve read the first block, you need to keep the last k-1 characters from the previous block available for use in building k-mers with the first few characters of the next block.  There isn&#39;t going to be anything notably different in memory efficiency than <code>substr</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1458828104, "post_id": 36201884, "comment_id": 60037371, "body": "I think this question would benefit from a bit more explanation - please bear in mind that not all of us know what you&#39;re talking about when you refer to &quot;k-mers&quot; so can&#39;t really figure out what you&#39;re trying to accomplish."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1458828142, "post_id": 36201884, "comment_id": 60037395, "body": "Re &quot;<i>this seems to be a very memory expensive way of doing things</i>&quot;, What do you mean, &quot;seems&quot;? Are you having memory issues or not?"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 1, "creation_date": 1458828942, "post_id": 36201884, "comment_id": 60037978, "body": "use <code>read FILEHANDLE,SCALAR,LENGTH</code> to get 4 meg (or something moderately small) chunks, do your existing for loop scan, save the last seq_length -1 bytes and append them onto the next chunk.  Repeat to EOF and then output your most frequent"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1458832683, "post_id": 36201884, "comment_id": 60040667, "body": "@ikegami - I&#39;m trying to find a solution that would be as efficient with a 1GB file as it would be with a 100GB file. My solution would perform very slowly on larger files"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1458832964, "post_id": 36201884, "comment_id": 60040884, "body": "I&#39;ll post something when I can. // Does the file consist of a small set of different characters?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1458833268, "post_id": 36201884, "comment_id": 60041123, "body": "@ikegami it&#39;s nucleotide data (A, G, C, T, N) only"}], "answers": [{"comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 1, "creation_date": 1458840728, "post_id": 36204524, "comment_id": 60046130, "body": "Excellent - thanks. So does the <code>$chunk = substr $chunk, -(SEQ_LENGTH-1);</code> ensure that k-mers spanning 2 chunks get counted correctly?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 2, "creation_date": 1458841391, "post_id": 36204524, "comment_id": 60046558, "body": "@fugu: Pretty much, yes. <code>SEQ_LENGTH</code> is 5, so <code>SEQ_LENGTH-1</code> is 4, and <code>$chunk = substr $chunk, -4</code> will remove all but the last four characters from the current chunk, and the next <code>read</code> will append the next <code>CHUNK_SIZE</code> bytes from the file to it. The search will then continue starting with the last 4 of the old characters plus the first of the new, then the last three of the old characters plus the first two of the new, etc."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458841426, "post_id": 36204524, "comment_id": 60046576, "body": "Is this <code>while(read ...){ for } </code> approach the standard efficient &quot;idiom&quot; for reading input a &quot;sip at a time&quot; in perl?  @fugu clarified whether the application was supposed to read a <code>$chunk</code> at a time sequentially or slide a window of length 5 along the sequence looking for strings (as @Jonathan Lethler. noted) and I thought of lazy lists. But a really long string would first have to be made into a list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1458841664, "post_id": 36204524, "comment_id": 60046733, "body": "@G.Cito: It&#39;s the way I&#39;ve chosen to write it. There is no <i>&quot;the standard efficient &quot;idiom&quot; for this&quot;</i> and, true to Perl&#39;s roots, there are many ways to do the same thing. My algorithm creates a window of size <code>CHUNK_SIZE + SEQ_LENGTH - 1</code> characters and generally  steps it on by <code>CHUNK_SIZE</code> characters at a time. I don&#39;t know what you mean by <i>&quot;a really long string would first have to be made into a list&quot;</i>. It can&#39;t be true as my code doesn&#39;t create a list"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1458843593, "post_id": 36204524, "comment_id": 60047956, "body": "@Borodin - I was seeing the input data as one very long string (as you were?).  Rather than use the sample provided I created a (still small) data file with 20k characters in one big long string. To lazy list shift a five character &quot;window&quot; along the string I then read it in and made it into a list.  I will add a response that illustrates."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458902552, "post_id": 36204524, "comment_id": 60068293, "body": "@Borodin - Just to check: As file size increases, my version will become slower and slower for 2 reasons: 1) reading a file into a string becomes expensive with increasing file size and 2) the expense of building a hash with long k-mers increases with k-mer size. Your version will suffer the 2nd problem, but not the first. Is that the case?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458904628, "post_id": 36204524, "comment_id": 60069186, "body": "@Borodin - I&#39;m confused, because I&#39;ve just run our programs side by side on the same data (1GB) for 10-mers and they both finished in almost exactly the same time. Should I only expect to see efficiency increases at much greater file sizes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 1, "creation_date": 1458912218, "post_id": 36204524, "comment_id": 60072907, "body": "@fugu: The process is probably disk-bound, which means it&#39;s primarily limited by the speed you can read from a disk drive. The advantage my solution has over yours is that reading a 100GB file into memory in one shot is impossible, which is why I have focused on reading in 1MB chunks. How long did the programs take for the 1GB data? Please describe the <i>&quot;incorrect results&quot;</i>"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458914963, "post_id": 36204524, "comment_id": 60074433, "body": "@Borodin - On my  8GB MBP both took around 25 mins."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 3, "creation_date": 1458917118, "post_id": 36204524, "comment_id": 60075595, "body": "@fugu I think you&#39;re confusing the terms &quot;efficiency&quot;, &quot;speed&quot;, and &quot;memory usage&quot;. Borodin&#39;s solution is <i>efficient</i> because it reads each chunk of the file only once (just like your solution). Which solution is <i>faster</i> depends on whether <code>readline</code> is faster than a series of <code>read</code> calls, among other things. The difference in speed may not be huge because I/O will be the bottleneck in both cases. Borodin&#39;s solution uses much less <i>memory</i>, so it will work for files of any length; your solution won&#39;t even run for large files, which has nothing to do with efficiency."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1458917325, "post_id": 36204524, "comment_id": 60075679, "body": "@ThisSuitIsBlackNot - Appreciate the clarification. I&#39;m not from a computer science background, and I&#39;ve never worked on a program where I&#39;ve actually thought in terms of memory usage etc."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 1, "creation_date": 1458918392, "post_id": 36204524, "comment_id": 60076275, "body": "@fugu You&#39;re welcome. You usually don&#39;t have to think about performance and resource utilization too much, but when you do, it&#39;s important to be clear with your terminology. &quot;Efficient&quot; is kind of a vague term, so it&#39;s better to specify your memory and time constraints. By the way, switching <code>read</code> to <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\"><code>sysread</code></a> might make Borodin&#39;s solution run a little faster."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1459259372, "post_id": 36204524, "comment_id": 60198276, "body": "@Borodin I think you should add the explanation of <code>SEQ_LENGTH</code> so <code>SEQ_LENGTH-1</code> in the second comment to the body of the question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1467625551, "last_edit_date": 1467625551, "creation_date": 1458834838, "answer_id": 36204524, "question_id": 36201884, "link": "https://stackoverflow.com/questions/36201884/count-subsequences-in-hundreds-of-gb-of-data/36204524#36204524", "title": "Count subsequences in hundreds of GB of data", "body": "<p>From your own code it's looking like your data file has just a single line of data -- not broken up by newline characters -- so I've assumed that in my solution below. Even if it's possible that the line has one newline character at the end, the selection of the five most frequent subsequences at the end will throw this out as it happens only once</p>\n\n<p>This program uses <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow\"><code>sysread</code></a> to fetch an arbitrarily-sized chunk of data from the file and append it to the data we already have in memory</p>\n\n<p>The body of the loop is mostly similar to your own code, but I have used the list version of <code>for</code> instead of the C-style one as it is much clearer</p>\n\n<p>After processing each chunk, the in-memory data is truncated to the last <code>SEQ_LENGTH-1</code> bytes before the next cycle of the loop pulls in more data from the file</p>\n\n<p>I've also use constants for the K-mer size and the chunk size. They are constant after all!</p>\n\n<p>The output data was produced with <code>CHUNK_SIZE</code> set to 7 so that there would be many instances of cross-boundary subsequences. It matches your own required output except for the last two entries with a count of 1. That is because of the inherent random order of Perl's hash keys, and if you require a specific order of sequences with equal counts then you must specify it so that I can change the sort</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse constant SEQ_LENGTH =&gt; 5;           # K-mer length\nuse constant CHUNK_SIZE =&gt; 1024 * 1024; # Chunk size - say 1MB\n\nmy $in_file = shift // 'in.txt';\n\nopen my $in_fh, '&lt;', $in_file or die qq{Unable to open \"$in_file\" for input: $!};\n\nmy %data;\nmy $chunk;\nmy $length = 0;\n\nwhile ( my $size = sysread $in_fh, $chunk, CHUNK_SIZE, $length ) {\n\n    $length += $size;\n\n    for my $offset ( 0 .. $length - SEQ_LENGTH ) {\n         my $kmer = substr $chunk, $offset, SEQ_LENGTH;\n         ++$data{$kmer};\n    }\n\n    $chunk = substr $chunk, -(SEQ_LENGTH-1);\n    $length = length $chunk;\n}\n\nmy @kmers = sort { $data{$b} &lt;=&gt; $data{$a} } keys %data;\nprint \"$_ $data{$_}\\n\" for @kmers[0..4];\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>ebfeb 3\nfebfe 2\nbfebf 2\ngbacb 1\nacbde 1\n</code></pre>\n\n<p>Note the line: <code>$chunk = substr $chunk, -(SEQ_LENGTH-1);</code> which sets <code>$chunk</code> as we pass through the <code>while</code> loop. This ensures that strings spanning 2 chunks get counted correctly. </p>\n\n<p>The <code>$chunk = substr $chunk, -4</code> statement removes all but the last four characters from the current chunk so that the next read appends <code>CHUNK_SIZE</code> bytes from the file to those remaining characters. This way the search will continue, but starts with the last 4 of the previous chunk's characters in addition to the next chunk: data doesn't fall into a \"crack\" between the chunks.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1458864413, "post_id": 36208336, "comment_id": 60057144, "body": "The OP talks about file sizes of between 10GB and 1000GB. You are reading all of that into memory at once, copying it to a list of individual characters, and then creating another list of five-character substrings. That accounts for between 70GB and 7000GB of memory in use all at once, without allowing for Perl&#39;s overhead on each data item. I would be very surprised if the OP has a system with capabilities like that"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458865043, "post_id": 36208336, "comment_id": 60057304, "body": "@Borodin Yup just tried it on a 32Gb system with 4 cores and an 800MB (NB <b>MB</b>) file.  My script gets killed, yours never finishes ... trying to figure that out. On a million character string of nucleotides your script takes 0.33 seconds .. min 2.0 seconds.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458866384, "post_id": 36208336, "comment_id": 60057606, "body": "How long did you wait to decide that my code <i>&quot;never finishes&quot;</i>? I would expect it to take around five or ten minutes to process 800MB"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1458919134, "post_id": 36208336, "comment_id": 60076689, "body": "@Borodin  I waited over 10 minutes and killed the process because my CPU was overheating!  So this morning I killed a number of other processes switched <code>read</code> to <code>sysread</code> and tried again and it finished in 6 minutes. Cheers!"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458938425, "post_id": 36208336, "comment_id": 60086477, "body": "@Borodin I definitely want to learn more about how to how to handle large (1Tb)  files more effectively, conserving memory and other resources. For now, setting <code>$&#47; = \\1048575;</code> allowed my approach to work with large files but it was very slow :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458940986, "post_id": 36208336, "comment_id": 60087750, "body": "That won&#39;t make it work. It will just read the first 1MB-1 (why not use a whole megabyte -- 1,048,576 bytes?) of the file and process that, ignoring the rest of the data. And if your CPU is overheating then you have a cooling problem; either the heatsink isn&#39;t properly thermally connected to the CPU of you don&#39;t have any fans. Perhaps the fan grilles are clogged with dust. You should be able to run you CPU at full speed continuously."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458944788, "post_id": 36208336, "comment_id": 60089225, "body": "Really? I used <code>split</code>  to break up the 850Mb file into ~ 80Mb pieces and your script and mine both produce the same results ... except for speed :-\\  See changes above. I will remove the answer if it s not helpful."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458946965, "post_id": 36208336, "comment_id": 60090006, "body": "Sorry, I was reading your first code fragment which has only a single read in <code>chomp ( $seq = &lt;&gt; ) </code>"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 2, "last_activity_date": 1459603832, "last_edit_date": 1459603832, "creation_date": 1458847073, "answer_id": 36208336, "question_id": 36201884, "link": "https://stackoverflow.com/questions/36201884/count-subsequences-in-hundreds-of-gb-of-data/36208336#36208336", "title": "Count subsequences in hundreds of GB of data", "body": "<p>The most straightforward approach is to use the <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow\"><code>substr()</code></a> function:</p>\n\n<pre><code>% time perl -e '$/ = \\1048576; \n           while ($s = &lt;&gt;) { for $i (0..length $s) { \n             $hash{ substr($s, $i, 5) }++ } }  \n           foreach my $k (sort { $hash{$b} &lt;=&gt; $hash{$a} } keys %hash) {\n             print \"$k $hash{$k}\\n\"; $it++; last if $it == 5;}' nucleotide.data  \nNNCTA 337530\nGNGGA 337362\nNCACT 337304\nGANGN 337290\nACGGC 337210\n      269.79 real       268.92 user         0.66 sys    \n</code></pre>\n\n<p>The <em>Perl Monks</em> node on <a href=\"http://www.perlmonks.org/?node_id=873068\" rel=\"nofollow\">iterating along a string </a> was a useful resource, as were the responses and comments from @Jonathan Leffler, @\u00c6varArnfj\u00f6r\u00f0Bjarmason, @Vorsprung, @ThisSuitIsBlackNotm @borodin and @ikegami here in this SO posting. As was pointed out, the issue with very large files is memory, which in turn requires that files be read in chunks. When reading from a file in chunks, if your code is iterating through the data it has to properly handle switching from one chunk/source to the next without dropping any bytes. </p>\n\n<p>As a simplistic example, <code>next unless length $kmer == 5;</code> will get checked during each <code>1048576</code> byte/character iteration in the script above, meaning strings that exist at the end of one chunk and the beginning of another will be missed (<em>cf.</em> @ikegami's and @Borodin's solutions). This will alter the resulting count, though perhaps not in a statistically significant way<sup>[1]</sup>.  Both @borodin and @ikegami address the issue of missing/overlapping strings between chunks by appending each chunk to the remaining characters of the previous chunk as they <code>sysread</code> in their <code>while()</code> loops. See Borodin's response and comments for an explanation of how it works. </p>\n\n<hr>\n\n<p><strong>Using <code>Stream::Reader</code></strong></p>\n\n<p>Since perl has been around for quite a while and has collected a lot of useful code, another perfectly valid approach is to look for a CPAN module that achieves the same end. <a href=\"https://metacpan.org/pod/Stream::Reader\" rel=\"nofollow\"><code>Stream::Reader</code></a> can create a \"stream\" interface to a file handle that wraps the solution to the chunking issue behind a set of convenient functions for accessing the data.</p>\n\n<pre><code>use Stream::Reader; \nuse strict;\nuse warnings;\n\nopen( my $handler, \"&lt;\", shift ); \nmy $stream = Stream::Reader-&gt;new( $handler, { Mode =&gt; \"UB\" } ); \n\nmy %hash;\nmy $string;\nwhile ($stream-&gt;readto(\"\\n\", { Out =&gt; \\$string }) ) { \n    foreach my $i (0..length $string) { \n       $hash{ substr($string, $i, 5) }++ \n    } \n} \n\nmy $it;\nforeach my $k (sort { $hash{$b} &lt;=&gt; $hash{$a} } keys %hash ) { \n       print \"$k $hash{$k}\\n\"; \n       $it++; last if $it == 5;\n}\n</code></pre>\n\n<p>On a test data file <code>nucleotide.data</code>, both Borodin's script and the <a href=\"https://metacpan.org/pod/Stream::Reader\" rel=\"nofollow\"><code>Stream::Reader</code></a> approach shown above produced the same top five results. Note the small difference compared to the results from the shell command above. This illustrates the need to properly handle reading data in chunks.</p>\n\n<pre><code>NNCTA 337530\nGNGGA 337362\nNCACT 337305\nGANGN 337290\nACGGC 337210\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/Stream::Reader\" rel=\"nofollow\"><code>Stream::Reader</code></a> based script was significantly faster:</p>\n\n<pre><code>time perl sequence_search_stream-reader.pl nucleotide.data   \n252.12s\ntime perl sequence_search_borodin.pl nucleotide.data     \n350.57s\n</code></pre>\n\n<p>The file <code>nucleotide.data</code> was a 1Gb in size, consisting of single string of approximately 1 billion characters:</p>\n\n<pre><code>% wc nucleotide.data\n       0       0 1048576000 nucleotide.data\n% echo `head -c 20 nucleotide.data`\nNCCANGCTNGGNCGNNANNA\n</code></pre>\n\n<p>I used this command to create the file:</p>\n\n<pre><code>perl -MString::Random=random_regex -e '\n open (my $fh, \"&gt;&gt;\", \"nucleotide.data\");\n for (0..999) { print $fh random_regex(q|[GCNTA]{1048576}|) ;}'\n</code></pre>\n\n<hr>\n\n<p><strong>Lists and Strings</strong></p>\n\n<p>Since the application is supposed to read a chunk at a time and move this <code>$seq_length</code> sized window along the length of the data building a hash for tracking string frequency, I thought a \"lazy list\" approach might work here. But, to move a window through a collection of data (or <a href=\"https://metacpan.org/pod/List::Gen#slide-CODE-WINDOW-LIST\" rel=\"nofollow\"><code>slide</code></a> as with <a href=\"https://metacpan.org/pod/List::Gen#slide-CODE-WINDOW-LIST\" rel=\"nofollow\"><code>List::Gen</code></a>) reading elements <a href=\"https://metacpan.org/pod/List::MoreUtils#natatime-EXPR-LIST\" rel=\"nofollow\"><code>natatime</code></a>, one needs a list.  </p>\n\n<p>I was seeing the data as one very long string which would first have to be made into a list for this approach to work. I'm not sure how efficient this can be made. Nevertheless, here is my attempt at a \"lazy list\" approach to the question:</p>\n\n<pre><code>use List::Gen 'slide';\n\n$/ = \\1048575; # Read a million character/bytes at a time.\nmy %hash;\n\nwhile (my $seq = &lt;&gt;) {\n  chomp $seq;\n  foreach my $kmer (slide { join(\"\", @_) } 5 =&gt; split //, $seq) {\n    next unless length $kmer == 5;\n    $hash{$kmer}++;\n  }\n}\n\nforeach my $k (sort { $hash{$b} &lt;=&gt; $hash{$a} } keys %hash) {\n  print \"$k $hash{$k}\\n\";\n  $it++; last if $it == 5;\n}\n</code></pre>\n\n<p>I'm not sure this is \"typical perl\" (TIMTOWDI of course) and I suppose there are other techniques (<em>cf.</em> <code>gather/take</code>) and utilities suitable for this task. I like the response from @Borodin best since it seems to be the most common way to take on this task and is more efficient for the potentially large file sizes that were mentioned (100Gb). </p>\n\n<p>Is there a fast/best way to turn a string into a list or object?  Using an incremental <code>read()</code> or <code>sysread()</code> with <code>substr</code> wins on this point, but even with <code>sysread</code> a 1000Gb string would require a lot of memory just for the resulting hash. Perhaps a technique that serialized/cached the hash to disk as it grew beyond a certain size would work with very, very large strings that were liable to create very large hashes.</p>\n\n<hr>\n\n<p><strong>Postscript and Results</strong></p>\n\n<p>The <code>List::Gen</code> approach was consistently between 5 and 6 times slower than @Borodin's approach. The fastest script used the <code>Stream::Reader</code> module. Results were consistent and each script selected the same top five strings with the two smaller files:</p>\n\n<p><strong>1 million character nucleotide string</strong></p>\n\n<pre><code>sequence_search_stream-reader.pl :     0.26s\nsequence_search_borodin.pl       :     0.39s\nsequence_search_listgen.pl       :     2.04s\n</code></pre>\n\n<p><strong>83 million character nucleotide string</strong></p>\n\n<p>With the data in file <code>xaa</code>:</p>\n\n<pre><code>wc xaa\n       0       1 83886080 xaa\n\n% time perl sequence_search_stream-reader.pl xaa\nGGCNG 31510\nTAGNN 31182\nAACTA 30944\nGTCAN 30792\nANTAT 30756\n       21.33 real        20.95 user         0.35 sys\n\n% time perl sequence_search_borodin.pl xaa     \nGGCNG 31510\nTAGNN 31182\nAACTA 30944\nGTCAN 30792\nANTAT 30756\n       28.13 real        28.08 user         0.03 sys\n\n% time perl sequence_search_listgen.pl xaa \nGGCNG 31510\nTAGNN 31182\nAACTA 30944\nGTCAN 30792\nANTAT 30756\n      157.54 real       156.93 user         0.45 sys      \n</code></pre>\n\n<p><strong>1 billion character nucleotide string</strong></p>\n\n<p>In a larger file the differences were of similar magnitude but, because as written it does not correctly handle sequences spanning chunk boundaries, the <code>List::Gen</code> script had the same discrepancy as the shell command line at the beginning of this post. The larger file meant a number of chunk boundaries and a discrepancy in the count.</p>\n\n<pre><code>sequence_search_stream-reader.pl :   252.12s\nsequence_search_borodin.pl       :   350.57s\nsequence_search_listgen.pl       :  1928.34s\n</code></pre>\n\n<p>The chunk boundary issue can of course be resolved, but I'd be interested to know about other potential errors or bottlenecks that are introduced using a \"lazy list\" approach. If there were any benefit in terms of CPU usage from using <code>slide</code> to \"lazily\" move along the string, it seems to be rendered moot by the need to make a list out of the string before starting.  </p>\n\n<p>I'm not surprised that reading data across chunk boundaries is left as an implementation exercise (perhaps it cannot be handled \"magically\") but I wonder what other CPAN modules or well worn subroutine style solutions might exist. </p>\n\n<hr>\n\n<p><strong>1.</strong> Skipping four characters - and thus four 5 character string combinations - at the end of each megabyte read of a terabyte file would mean the results would not include <code>3/10000</code> of <code>1%</code> from the final count.</p>\n\n<pre><code>echo \"scale=10; 100 *  (1024^4/1024^2 ) * 4 / 1024^4 \" | bc\n.0003814697\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1458949618, "post_id": 36229536, "comment_id": 60090866, "body": "66s running this against the 83million char string file I made :-)  Nice ++"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1458950171, "post_id": 36229536, "comment_id": 60091022, "body": "@G.Cito: I&#39;d like to see your code: I chose <code>substr</code> for a reason. I <i>did</i> benchmark it and <code>substr</code> came out 3 times faster than a more simple regex solution. This technique of doing it in five passes comes out 400 times slower than using <code>substr</code>. I&#39;m using a 500KB string."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458950632, "post_id": 36229536, "comment_id": 60091143, "body": "<i>&quot;I bet something like this is a much more viable way to do this&quot;</i> and <i>&quot;I&#39;m just offloading that to <code>|sort|uniq -c</code> in this implementation, which is probably faster&quot;</i> It doesn&#39;t really help to post wild guesses like that, and you have a strange idea of what makes things faster. Spawning multiple processes and passing the data as text via pipes is really going to struggle compared with an in-memory <code>uniq</code> and <code>sort</code> within the same process. And <code>substr</code> being far less flexible than regexes is likely to make it faster. My test shows your method to be <i>vastly</i> slower by two orders of magnitiude"}, {"owner": {"reputation": 149, "user_id": 350187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57332d67a86eb51e06bf78d2baf42c3c?s=128&d=identicon&r=PG", "display_name": "&#198;var Arnfj&#246;r&#240; Bjarmason", "link": "https://stackoverflow.com/users/350187/%c3%86var-arnfj%c3%b6r%c3%b0-bjarmason"}, "edited": false, "score": 1, "creation_date": 1458951942, "post_id": 36229536, "comment_id": 60091446, "body": "This brings it within the same order of magnitude. On my test dataset your version takes ~2.2s, mine ~3.2s:  <code>perl -wE &#39;my $str = &lt;&gt;; my %occur; for my $pos (0..4) { my $cp = $str; substr($cp, 0, $pos) = &quot;&quot; if $pos; $cp =~ s&#47;(.{5})&#47;$1\\n&#47;g; ++$occur{$_} for split &#47;\\n&#47;, $cp } my @kmers = sort { $occur{$b} &lt;=&gt; $occur{$a} } keys %occur; print &quot;$_ $occur{$_}\\n&quot; for @kmers[0..4];&#39; &lt;&#47;tmp&#47;words.txt</code>  Yours is still faster. Anyway, I wasn&#39;t trying to say mine <i>was</i> faster, but I was pointing out generally that if you can turn a problem like this into something you can process with a regex it&#39;s ...."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458952162, "post_id": 36229536, "comment_id": 60091500, "body": "@Borodin I used a very slightly modified version of what @&#198;var Arnfj&#246;r&#240; Bjarmason  posted earlier: <code>&#47;usr&#47;bin&#47;time  perl -wE &#39;chomp( my $str =  &lt;&gt; ) ; my %occur; for my $pos (0..4) { $str =~ s&#47;^.&#47;&#47; if $pos; no warnings &quot;void&quot;; $str =~ s&#47;(.{5})&#47;++$occur{$1}&#47;gero }; for my $k (sort { $occur{$b} &lt;=&gt; $occur{$a} } keys %occur) { state $i=0; $i++; last if $i == 5 ; say &quot;$occur{$k} $k&quot; }&#39; xaa</code>"}, {"owner": {"reputation": 149, "user_id": 350187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57332d67a86eb51e06bf78d2baf42c3c?s=128&d=identicon&r=PG", "display_name": "&#198;var Arnfj&#246;r&#240; Bjarmason", "link": "https://stackoverflow.com/users/350187/%c3%86var-arnfj%c3%b6r%c3%b0-bjarmason"}, "edited": false, "score": 0, "creation_date": 1458952222, "post_id": 36229536, "comment_id": 60091514, "body": "Sorry, stupid SO comment limits, generally faster. In this case piping to <code>sort|uniq</code> was also slower, but in many cases it isn&#39;t, because if you&#39;re CPU limited and your perl process is at a 100% on one core it makes more sense to offload processing to other cores."}, {"owner": {"reputation": 149, "user_id": 350187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57332d67a86eb51e06bf78d2baf42c3c?s=128&d=identicon&r=PG", "display_name": "&#198;var Arnfj&#246;r&#240; Bjarmason", "link": "https://stackoverflow.com/users/350187/%c3%86var-arnfj%c3%b6r%c3%b0-bjarmason"}, "edited": false, "score": 0, "creation_date": 1458952463, "post_id": 36229536, "comment_id": 60091567, "body": "And generally speaking regexes aren&#39;t slower than the likes of substr because they&#39;re more general, on the contrary they&#39;re usually faster because they can avoid perl&#39;s runloop."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1458954871, "post_id": 36229536, "comment_id": 60092094, "body": "You really shouldn&#39;t throw these notions around as facts without a benchmark to support them. Regexes are <i>not</i> faster than <code>substr</code> in a loop; you&#39;ve just done a test yourself and found that a basic <code>for</code> loop plus <code>substr</code> is faster (I measured twice as fast) than your own global regex match. Since you&#39;ve already optimised your code by doing five passes I doubt if you can make it go any faster, and I can&#39;t imagine what circumstances could be more advantageous to a regex solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1458954881, "post_id": 36229536, "comment_id": 60092095, "body": "Likewise, it&#39;s a strange idea that serialising and deserialising the data several times to pass it through multiple pipes to new child processes is faster because it gains access to more CPU cores. Again, it is hard to imagine why Perl hashes are faster than a shell command chain in just this if they are slower in general: that really doesn&#39;t make sense. If you can come up with a demonstration of any of these assertions then please write them up put them here."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1459053899, "post_id": 36229536, "comment_id": 60117982, "body": "I think you&#39;re ignoring the fact that the OP is asking how to do this for input files of 10-1000GB."}], "tags": [], "owner": {"reputation": 149, "user_id": 350187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57332d67a86eb51e06bf78d2baf42c3c?s=128&d=identicon&r=PG", "display_name": "&#198;var Arnfj&#246;r&#240; Bjarmason", "link": "https://stackoverflow.com/users/350187/%c3%86var-arnfj%c3%b6r%c3%b0-bjarmason"}, "is_accepted": false, "score": 2, "last_activity_date": 1458948524, "last_edit_date": 1458948524, "creation_date": 1458947416, "answer_id": 36229536, "question_id": 36201884, "link": "https://stackoverflow.com/questions/36201884/count-subsequences-in-hundreds-of-gb-of-data/36229536#36229536", "title": "Count subsequences in hundreds of GB of data", "body": "<p>Generally speaking Perl is really slow at character-by-character processing solutions like those posted above, it's <em>much</em> faster at something like regular expressions since essentially your overhead is mainly how many operators you're executing.</p>\n\n<p>So if you can turn this into a regex-based solution that's much better.</p>\n\n<p>Here's an attempt to do that:</p>\n\n<pre><code>$ perl -wE 'my $str = \"abcdefabcgbacbdebdbbcaebfebfebfeb\"; for my $pos (0..4) { $str =~ s/^.// if $pos; say for $str =~ m/(.{5})/g }'|sort|uniq -c|sort -nr|head -n 5\n  3 ebfeb\n  2 febfe\n  2 bfebf\n  1 gbacb\n  1 fabcg\n</code></pre>\n\n<p>I.e. we have our string in $str, and then we pass over it 5 times generating sequences of 5 characters, after the first pass we start chopping off a character from the front of the string. In a lot of languages this would be <em>really</em> slow since you'd have to re-allocate the entire string, but perl cheats for this special case and just sets the index of the string to 1+ what it was before.</p>\n\n<p>I haven't benchmarked this but I bet something like this is a much more viable way to do this than the algorithms above, you could also do the uniq counting in perl of course by incrementing a hash (with the /e regex option is probably the fastest way), but I'm just offloading that to |sort|uniq -c in this implementation, which is probably faster.</p>\n\n<p>A slightly altered implementation that does this all in perl:</p>\n\n<pre><code>$ perl -wE 'my $str = \"abcdefabcgbacbdebdbbcaebfebfebfeb\"; my %occur; for my $pos (0..4) { substr($str, 0, 1) = \"\" if $pos; $occur{$_}++ for $str =~ m/(.{5})/gs }; for my $k (sort { $occur{$b} &lt;=&gt; $occur{$a} } keys %occur) { say \"$occur{$k} $k\" }'\n3 ebfeb\n2 bfebf\n2 febfe\n1 caebf\n1 cgbac\n1 bdbbc\n1 acbde\n1 efabc\n1 aebfe\n1 ebdbb\n1 fabcg\n1 bacbd\n1 bcdef\n1 cbdeb\n1 defab\n1 debdb\n1 gbacb\n1 bdebd\n1 cdefa\n1 bbcae\n1 bcgba\n1 bcaeb\n1 abcgb\n1 abcde\n1 dbbca\n</code></pre>\n\n<p>Pretty formatting for the code behind that:</p>\n\n<pre><code>my $str = \"abcdefabcgbacbdebdbbcaebfebfebfeb\";\nmy %occur;\nfor my $pos (0..4) {\n    substr($str, 0, 1) = \"\" if $pos;\n    $occur{$_}++ for $str =~ m/(.{5})/gs;\n}\n\nfor my $k (sort { $occur{$b} &lt;=&gt; $occur{$a} } keys %occur) {\n    say \"$occur{$k} $k\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458984990, "post_id": 36231261, "comment_id": 60098109, "body": "I ran a lot of tests yesterday, and realised that increasing the k-mer length (<code>SEQ_LENGTH</code>) drastically reduces the performance. On my machine, with a 1GB test file, and a k-mer length set to 20 I run out of memory. I realised that this is because, as you say, if every sequence is unique then it builds a very large hash."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1458985088, "post_id": 36231261, "comment_id": 60098135, "body": "Note - In my question, I arbitrarily set the k-mer length to 5. I should have corrected @Borodin when he assumed it was a constant in my program - it&#39;s not."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1459072230, "post_id": 36231261, "comment_id": 60121755, "body": "I will ask another question tomorrow, but assume that input files will be smaller than 10GB. Thanks for your suggestions so far!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1459130041, "post_id": 36231261, "comment_id": 60139275, "body": "Updated my answer."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1459176155, "post_id": 36231261, "comment_id": 60157078, "body": "Doesn&#39;t this create a huge <code>sequences.txt</code> file though?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1459182255, "post_id": 36231261, "comment_id": 60160452, "body": "A 10 GiB <code>in.txt</code> produces a 210 GiB (without the compression I mentioned) or 90 GiB (with the compression I mentioned) <code>sequences.txt</code>. Hardly problematic."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1459355412, "post_id": 36231261, "comment_id": 60252478, "body": "@borodin and ikegami ... is <code>sysread</code> just always better than <code>read</code>  for raw fetching of data?  <code>perlfunc</code> gives advice that is not entirely clear on when to choose which.  For example with the <code>Stream::Reader</code> script from my answer I replaced <code>read</code> with <code>sysread</code> in <code>Reader.pm</code> (line 271 I think) and gained 9-10%  But I am not clear on what the tradeoffs might be."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1459356578, "post_id": 36231261, "comment_id": 60253285, "body": "@G. Cito, That&#39;s not really related, and it would make a good question. Got an answer for you if you ask it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1459182513, "last_edit_date": 1459182513, "creation_date": 1458962583, "answer_id": 36231261, "question_id": 36201884, "link": "https://stackoverflow.com/questions/36201884/count-subsequences-in-hundreds-of-gb-of-data/36231261#36231261", "title": "Count subsequences in hundreds of GB of data", "body": "<p>Even if you don't read the entire file into memory before processing it, you could still run out of memory. </p>\n\n<p>A 10 GiB file contains almost 11E9 sequences.</p>\n\n<p>If your sequences are sequences of 5 characters chosen from a set of 5 characters, there are only 5<sup>5</sup> = 3,125 unique sequences, and this would  easily fit in memory.</p>\n\n<p>If your sequences are sequences of 20 characters chosen from a set of 5 characters, there are 5<sup>20</sup> = 95E12 unique sequences, so the all 11E9 sequences of a 10 GiB file could unique. That does not fit in memory.</p>\n\n<p>In that case, I suggest doing the following:</p>\n\n<ol>\n<li><p>Create a file that contains all the sequences of the original file.</p>\n\n<p>The following reads the file in chunks rather than all at once. The tricky part is handling sequences that span two blocks. The following program uses <code>sysread</code><sup>[1]</sup> to fetch an arbitrarily-sized chunk of data from the file and append it to the last few character of the previously read block. This last detail allows sequences that span blocks to be counted.</p>\n\n<pre><code>perl -e'\n   use strict;\n   use warnings qw( all );\n\n   use constant SEQ_LENGTH =&gt; 20;\n   use constant CHUNK_SIZE =&gt; 1024 * 1024;\n\n   my $buf = \"\";\n   while (1) {\n      my $size = sysread(\\*STDIN, $buf, CHUNK_SIZE, length($buf));\n      die($!) if !defined($size);\n      last if !$size;\n\n      for my $offset ( 0 .. length($buf) - SEQ_LENGTH ) {\n         print(substr($buf, $offset, SEQ_LENGTH), \"\\n\");\n      }\n\n      substr($buf, 0, -(SEQ_LENGTH-1), \"\");\n   }\n' &lt;in.txt &gt;sequences.txt\n</code></pre></li>\n<li><p>Sort the sequences.</p>\n\n<pre><code>sort sequences.txt &gt;sorted_sequences.txt\n</code></pre></li>\n<li><p>Count the number of instances of each sequeunces, and store the count along with the sequences in another file.</p>\n\n<pre><code>perl -e'\n   use strict;\n   use warnings qw( all );\n\n   my $last = \"\";           \n   my $count;\n   while (&lt;&gt;) {\n      chomp;\n      if ($_ eq $last) {\n         ++$count;\n      } else {\n         print(\"$count $last\\n\") if $count;\n         $last = $_;\n         $count = 1;\n      }\n   }\n' sorted_sequences.txt &gt;counted_sequences.txt\n</code></pre></li>\n<li><p>Sort the sequences by count.</p>\n\n<pre><code>sort -rns counted_sequences.txt &gt;sorted_counted_sequences.txt\n</code></pre></li>\n<li><p>Extract the results.</p>\n\n<pre><code>perl -e'\n   use strict;\n   use warnings qw( all );\n\n   my $last_count;\n   while (&lt;&gt;) {\n      my ($count, $seq) = split;\n      last if $. &gt; 5 &amp;&amp; $count != $last_count;\n      print(\"$seq $count\\n\");\n      $last_count = $count;\n   }\n' sorted_counted_sequences.txt\n</code></pre>\n\n<p>This also prints ties for 5th place.</p></li>\n</ol>\n\n<p>This can be optimized by tweaking the parameters passed to <code>sort</code><sup>[2]</sup>, but it should offer decent performance.</p>\n\n<hr>\n\n<ol>\n<li><p><code>sysread</code> is faster than previously suggested <code>read</code> since the latter performs a series of 4 KiB or 8 KiB reads (depending on your version of Perl) internally.</p></li>\n<li><p>Given the fixed-length nature of the sequence, you could also compress the sequences into ceil(log<sub>256</sub>(5<sup>20</sup>)) = 6 bytes then base64-encode them into ceil(6 * 4/3) = 8 bytes. That means 12 fewer bytes would be needed per sequence, greatly reducing the amount to read and to write.</p></li>\n</ol>\n\n<hr>\n\n<p><sub>Portions of this answer was adapted from content by user:622310 licensed under <a href=\"https://creativecommons.org/licenses/by-sa/3.0/\" rel=\"nofollow\">cc by-sa 3.0</a>.</sub></p>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 3, "accepted_answer_id": 36204524, "answer_count": 4, "score": 3, "last_activity_date": 1467625551, "creation_date": 1458827692, "last_edit_date": 1462975588, "question_id": 36201884, "link": "https://stackoverflow.com/questions/36201884/count-subsequences-in-hundreds-of-gb-of-data", "title": "Count subsequences in hundreds of GB of data", "body": "<p>I'm trying to process a very large file and tally the frequency of all sequences of a certain length in the file. </p>\n\n<p>To illustrate what I'm doing, consider a small input file containing the sequence <code>abcdefabcgbacbdebdbbcaebfebfebfeb</code></p>\n\n<p>Below, the code reads the whole file in, and takes the first substring of length n (below I set this to 5, although I want to be able to change this) and counts its frequency:  </p>\n\n<pre><code>abcde =&gt; 1\n</code></pre>\n\n<p>Next line, it moves one character to the right and does the same: </p>\n\n<pre><code>bcdef =&gt; 1\n</code></pre>\n\n<p>It then continues for the rest of the string and prints the 5 most frequent sequences:</p>\n\n<pre><code>open my $in, '&lt;', 'in.txt' or die $!; # 'abcdefabcgbacbdebdbbcaebfebfebfeb'\n\nmy $seq = &lt;$in&gt;; # read whole file into string\nmy $len = length($seq);\n\nmy $seq_length = 5; # set k-mer length\nmy %data;\n\nfor (my $i = 0; $i &lt;= $len - $seq_length; $i++) {\n     my $kmer = substr($seq, $i, $seq_length);\n     $data{$kmer}++;\n}\n\n# print the hash, showing only the 5 most frequent k-mers\nmy $count = 0;\nforeach my $kmer (sort { $data{$b} &lt;=&gt; $data{$a} } keys %data ){\n    print \"$kmer $data{$kmer}\\n\";\n    $count++;\n    last if $count &gt;= 5;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>ebfeb 3\nfebfe 2\nbfebf 2\nbcaeb 1\nabcgb 1\n</code></pre>\n\n<hr>\n\n<p>However, I would like to find a more efficient way of achieving this. If the input file was 10GB or 1000GB, then reading the whole thing into a string would be very memory expensive. </p>\n\n<p>I thought about reading in blocks of characters, say 100 at a time and proceeding as above, but here, sequences that span 2 blocks would not be tallied correctly. </p>\n\n<p>My idea then, is to only read in n number of characters from the string, and then move onto the next n number of characters and do the same, tallying their frequency in a hash as above. </p>\n\n<ul>\n<li>Are there any suggestions about how I could do this? I've had a look a <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow\">read</a> using an offset, but can't get my head around how I could incorporate this here</li>\n<li>Is <code>substr</code> the most memory efficient tool for this task? </li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1458828428, "post_id": 36201570, "comment_id": 60037601, "body": "What is <code>$req</code>? Is it a HTTP::Request object?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1458834555, "last_edit_date": 1458834555, "creation_date": 1458829237, "answer_id": 36202433, "question_id": 36201570, "link": "https://stackoverflow.com/questions/36201570/perl-http-request-content-issue/36202433#36202433", "title": "Perl HTTP Request content() issue", "body": "<p>This seems to be something that you could easily test for yourself rather than asking us. What happened when you tried it?</p>\n\n<p>(I'm going to assume that <code>$req</code> is an HTTP::Request object - I don't know why you wouldn't include that information in your question).</p>\n\n<p>In short, no, it's not valid. And it's not valid for a number of reasons.</p>\n\n<p>It's not valid because <code>file.img</code> would be interpreted as the bareword <code>file</code> concatenated with the bareword <code>img</code> - which would give the string <code>fileimg</code>. </p>\n\n<p>It's not valid because <code>use strict</code> makes barewords illegal, so if you're using <code>use strict</code> (and you really should be) your code won't even compile.</p>\n\n<p>It's not valid because <code>HTTP::Request::content</code> expects a sequence of bytes. So even if you didn't use <code>use strict</code> all this code would do would be to add the string <code>fileimg</code> to the request body.</p>\n\n<p>If you want to add the contents of the file to the body, then you need to open the file, read in the data and then pass that data to <code>content</code>.</p>\n\n<p>This is all explained in the documentation for <a href=\"https://metacpan.org/pod/HTTP::Request\" rel=\"nofollow\">HTTP::Request</a>.</p>\n"}], "owner": {"reputation": 183, "user_id": 5979529, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/100e54235deb1daa4cb3070c90fcab38?s=128&d=identicon&r=PG", "display_name": "mric750", "link": "https://stackoverflow.com/users/5979529/mric750"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458834555, "creation_date": 1458826753, "question_id": 36201570, "link": "https://stackoverflow.com/questions/36201570/perl-http-request-content-issue", "title": "Perl HTTP Request content() issue", "body": "<p>I want to put a file (file.img) as a POST data content, so if the file is in the same folder as the script, is <code>$req-&gt;content(file.img);</code> valid ?</p>\n\n<p>Cheers</p>\n"}, {"tags": ["html", "perl", "iframe", "perl-html-template"], "comments": [{"owner": {"reputation": 1262, "user_id": 3880255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mKJ8y.jpg?s=128&g=1", "display_name": "Clemens Himmer", "link": "https://stackoverflow.com/users/3880255/clemens-himmer"}, "edited": false, "score": 0, "creation_date": 1458822510, "post_id": 36200049, "comment_id": 60033658, "body": "You need to print the variable to the code before you serve it to a client, are you prcocessing that variable in perl?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458823307, "post_id": 36200049, "comment_id": 60034175, "body": "Can you please <a href=\"https://stackoverflow.com/posts/36200049/edit\">edit</a> your question and make it a bit more clear what you want? I think that you want to embed the source of the file behind the <code>docviewer_url</code> variable directly into your HTML without wrapping it in an iframe. So you would have to download that file and output its content. Is that what you want to do?"}, {"owner": {"reputation": 3, "user_id": 2444409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337fac180f7ca07b04c113fedfc106f?s=128&d=identicon&r=PG", "display_name": "user2444409", "link": "https://stackoverflow.com/users/2444409/user2444409"}, "edited": false, "score": 0, "creation_date": 1458824258, "post_id": 36200049, "comment_id": 60034756, "body": "I want to output that php file , sorry i can&#39;t add more info since i&#39;m not coder :) here is my website landing page example : <a href=\"http://pdfcrawler.com/50vj1xhqyzd7/UWE_residents_handbook-free-isueu9hrrp.pdf.html\" rel=\"nofollow noreferrer\">pdfcrawler.com/50vj1xhqyzd7/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 2444409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337fac180f7ca07b04c113fedfc106f?s=128&d=identicon&r=PG", "display_name": "user2444409", "link": "https://stackoverflow.com/users/2444409/user2444409"}, "reply_to_user": {"reputation": 1262, "user_id": 3880255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mKJ8y.jpg?s=128&g=1", "display_name": "Clemens Himmer", "link": "https://stackoverflow.com/users/3880255/clemens-himmer"}, "edited": false, "score": 0, "creation_date": 1458824925, "post_id": 36200049, "comment_id": 60035193, "body": "@ClemensHimmer, iframe executes php file and outputs it , but yes it&#39;s served last using &lt;iframe&gt; when page loads , it&#39;s local file from another folder."}, {"owner": {"reputation": 3, "user_id": 2444409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337fac180f7ca07b04c113fedfc106f?s=128&d=identicon&r=PG", "display_name": "user2444409", "link": "https://stackoverflow.com/users/2444409/user2444409"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458826451, "post_id": 36200049, "comment_id": 60036263, "body": "@simbabque I can&#39;t download and put file content since it i php and perl generated html won&#39;t parse it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458827043, "post_id": 36200049, "comment_id": 60036656, "body": "HTML cannot parse anything. You are not supposed to download the php file. But you can make Perl download the website that the php code on the server generates (doesn&#39;t matter if that is done by php or if it&#39;s a static file). That would be the same thing the user&#39;s browser does in the iframe."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458827178, "post_id": 36200049, "comment_id": 60036751, "body": "You really need to make an effort to describe your requirements or we cannot help you. I still don&#39;t understand what you want to do. That link only confused me more."}, {"owner": {"reputation": 3, "user_id": 2444409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337fac180f7ca07b04c113fedfc106f?s=128&d=identicon&r=PG", "display_name": "user2444409", "link": "https://stackoverflow.com/users/2444409/user2444409"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1458827621, "post_id": 36200049, "comment_id": 60037038, "body": "@simbabque , alright lets leave it as it is , just simply can&#39;t tell more about whole mechanism , i&#39;m internet marketer , not coder , i thought it will be easer. Thanks for trying me to help."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458827710, "post_id": 36200049, "comment_id": 60037104, "body": "Fair enough. The key to finding this kind of thing if you&#39;re not a technical person in my experience is to try to be as precise as possible. But that&#39;s not always easy. I would struggle to find any specific SEO related stuff probably. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1458829164, "post_id": 36201139, "comment_id": 60038120, "body": "While this code may answer the question, it would be better to include some <i>context</i>, explaining <i>how</i> it works and <i>when</i> to use it. Code-only answers are not useful in the long run."}], "tags": [], "owner": {"reputation": 153, "user_id": 5730761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hkyPh.jpg?s=128&g=1", "display_name": "SnakeFoot", "link": "https://stackoverflow.com/users/5730761/snakefoot"}, "is_accepted": false, "score": 0, "last_activity_date": 1458825392, "creation_date": 1458825392, "answer_id": 36201139, "question_id": 36200049, "link": "https://stackoverflow.com/questions/36200049/iframe-visible-in-page-source/36201139#36201139", "title": "Iframe visible in page source", "body": "<p>something like this:</p>\n\n<pre><code>&lt;script&gt;\n$('#buttonID').click(function(){\nvar value  = $('#document_viewer').contents().find('body').html();\n$(\"#divID\").load(value); \n});\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2444409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b337fac180f7ca07b04c113fedfc106f?s=128&d=identicon&r=PG", "display_name": "user2444409", "link": "https://stackoverflow.com/users/2444409/user2444409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458825392, "creation_date": 1458821893, "last_edit_date": 1458823225, "question_id": 36200049, "link": "https://stackoverflow.com/questions/36200049/iframe-visible-in-page-source", "title": "Iframe visible in page source", "body": "<p>I have such code :</p>\n\n<pre><code>&lt;iframe id=\"document_viewer\" src=\"&lt;TMPL_VAR docviewer_url&gt;\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>The variable  is PHP URL with pdf converted to text and embed in perl generated HTML using  that iframe.</p>\n\n<p>For SEO reasons i need to make it visible in page source , like it would regular text. Help will be truly appreciated. </p>\n"}, {"tags": ["excel", "perl", "date"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1458821640, "post_id": 36199547, "comment_id": 60033131, "body": "Well spotted. Welcome to the Perl tag. :)"}, {"owner": {"reputation": 531, "user_id": 797685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/516d3f932c7262811ef37fb37cb9bd29?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/797685/zak"}, "edited": false, "score": 0, "creation_date": 1458824290, "post_id": 36199547, "comment_id": 60034781, "body": "I told you that it doesn&#39;t work... so your answers is wrong.  typo corrected."}, {"owner": {"reputation": 311, "user_id": 5607474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mrii6.jpg?s=128&g=1", "display_name": "Thomas De Wilde", "link": "https://stackoverflow.com/users/5607474/thomas-de-wilde"}, "reply_to_user": {"reputation": 531, "user_id": 797685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/516d3f932c7262811ef37fb37cb9bd29?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/797685/zak"}, "edited": false, "score": 0, "creation_date": 1458825604, "post_id": 36199547, "comment_id": 60035667, "body": "@Zak did you give the plain &#39;write&#39; method a try? <code>$worksheet-&gt;write( &#39;A1&#39;, &#39;2013-10-27T&#39;, $date_format_1 );</code>"}, {"owner": {"reputation": 311, "user_id": 5607474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mrii6.jpg?s=128&g=1", "display_name": "Thomas De Wilde", "link": "https://stackoverflow.com/users/5607474/thomas-de-wilde"}, "reply_to_user": {"reputation": 531, "user_id": 797685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/516d3f932c7262811ef37fb37cb9bd29?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/797685/zak"}, "edited": false, "score": 0, "creation_date": 1458858794, "post_id": 36199547, "comment_id": 60055376, "body": "@Zak Did you play around with the examples of the Excel::Writer Module? There are two files you should take a look at: <i>date_time.pl</i> and <i>formats.pl</i> . I&#39;ve used the module before, just never did use it for dates. If I got time I&#39;ll give it a go during the weekend."}], "tags": [], "owner": {"reputation": 311, "user_id": 5607474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mrii6.jpg?s=128&g=1", "display_name": "Thomas De Wilde", "link": "https://stackoverflow.com/users/5607474/thomas-de-wilde"}, "is_accepted": false, "score": 2, "last_activity_date": 1458820388, "creation_date": 1458820388, "answer_id": 36199547, "question_id": 36199205, "link": "https://stackoverflow.com/questions/36199205/perl-excelwriter-how-to-format-a-cell-with-date-category/36199547#36199547", "title": "Perl Excel::Writer, how to format a cell with date category", "body": "<p>This should work according to the <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#DATES_AND_TIME_IN_EXCEL\" rel=\"nofollow\">documentation</a>, but</p>\n\n<pre><code>my $date_format_2 = $workbook-&gt;add_format( num_format =&gt; 'dd/mm/yy' );\n$worksheet-&gt;write_date_time( 'A1', '2013-10-27T', $date_format_1 );\n</code></pre>\n\n<p>contains a typo.</p>\n\n<p>You are actually using <code>$date_format_1</code> instead of <code>$date_format_2</code> .</p>\n"}], "owner": {"reputation": 531, "user_id": 797685, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/516d3f932c7262811ef37fb37cb9bd29?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/797685/zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458824335, "creation_date": 1458819285, "last_edit_date": 1458824335, "question_id": 36199205, "link": "https://stackoverflow.com/questions/36199205/perl-excelwriter-how-to-format-a-cell-with-date-category", "title": "Perl Excel::Writer, how to format a cell with date category", "body": "<p>I need to make a cell in date format (for italians it's Data category).\nI've searched around but everyone tell:</p>\n\n<pre><code>my $date_format_1 = $workbook-&gt;add_format( num_format =&gt; 'dd/mm/yy' );\n$worksheet-&gt;write_date_time( 'A1', '2013-10-27T', $date_format_1 );\n</code></pre>\n\n<p>but this is not true: this one make the cell as \"format: personalized\"... i need \"format: date\".</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "perl", "serialization", "deserialization"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1458817852, "post_id": 36198614, "comment_id": 60030834, "body": "What about JSON? Or <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow noreferrer\">developers.google.com/protocol-buffers</a>"}, {"owner": {"reputation": 1317, "user_id": 2066474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f445bbda5c5e7b3cde0dc13abf53b575?s=128&d=identicon&r=PG", "display_name": "rbennett485", "link": "https://stackoverflow.com/users/2066474/rbennett485"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458828574, "post_id": 36198614, "comment_id": 60037711, "body": "I don&#39;t think protocol buffers have official support for Perl, so I&#39;ll probably give that a miss. A good shout for people with similar issues though"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1458832987, "post_id": 36198614, "comment_id": 60040901, "body": "There are CPAN modules for both <a href=\"http://search.cpan.org/~saxjazman/Google-ProtocolBuffers-0.11/lib/Google/ProtocolBuffers.pm\" rel=\"nofollow noreferrer\">Protocol Buffers</a> and <a href=\"http://search.cpan.org/~syohex/Data-MessagePack-0.49/lib/Data/MessagePack.pm\" rel=\"nofollow noreferrer\">MessagePack</a> but neither Google nor MessagePack declare them as official. At least at first glance. However, I would both give a try and then compare performance and useability."}], "answers": [{"comments": [{"owner": {"reputation": 1317, "user_id": 2066474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f445bbda5c5e7b3cde0dc13abf53b575?s=128&d=identicon&r=PG", "display_name": "rbennett485", "link": "https://stackoverflow.com/users/2066474/rbennett485"}, "edited": false, "score": 0, "creation_date": 1458828328, "post_id": 36198902, "comment_id": 60037524, "body": "Cheers for the pointers, I may go down the JSON-ish route with <a href=\"http://msgpack.org/\" rel=\"nofollow noreferrer\">MessagePack</a> I think"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1458818630, "last_edit_date": 1458818630, "creation_date": 1458818285, "answer_id": 36198902, "question_id": 36198614, "link": "https://stackoverflow.com/questions/36198614/sharing-data-structures-between-perl-and-cpp/36198902#36198902", "title": "Sharing data structures between perl and cpp", "body": "<p><code>Storable</code> is one way to dump and load perl data structures. I wouldn't actually recommend it for general usage though - it's handy in that it's part of core and easy to use. </p>\n\n<p>But for multi-platform (and language) portability, it's far better to use a standard data representation. Which you choose is probably a matter of what sort of data you're holding in your structure, but core contenders are:</p>\n\n<ul>\n<li><a href=\"http://search.cpan.org/~makamaka/JSON-2.90/lib/JSON.pm\" rel=\"nofollow\">JSON</a> - good for arrays and hashes (key-value). </li>\n<li><a href=\"http://search.cpan.org/~ingy/YAML-1.15/lib/YAML.pod\" rel=\"nofollow\">YAML</a> - Excellent for 'config file' style data (but extends in ways similar to JSON)</li>\n<li>And if you must, <a href=\"http://search.cpan.org/dist/XML-Twig/Twig.pm\" rel=\"nofollow\">XML</a> - but bear in mind that XML is <em>designed</em> for documents-with-metadata, and so IMO isn't suitable for most of the applications it's used for. </li>\n</ul>\n\n<p>As standards, they've got documented formatting and parsers are widely available. And implementing your own isn't too hard, if that's the route you want to go. Just make sure you follow the spec and you're good. </p>\n\n<p>Note - that because XML and JSON (and I think YAML?) are recursive, you can parse as a stream, rather than a standalone object. (Trap, process and discard as you hit 'close brackets' in JSON, or 'close tags' in XML). </p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 7244144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618cc888fab8376fa4477fadb94573a1?s=128&d=identicon&r=PG&f=1", "display_name": "tlqtangok", "link": "https://stackoverflow.com/users/7244144/tlqtangok"}, "is_accepted": false, "score": -1, "last_activity_date": 1488952558, "creation_date": 1488952558, "answer_id": 42663991, "question_id": 36198614, "link": "https://stackoverflow.com/questions/36198614/sharing-data-structures-between-perl-and-cpp/42663991#42663991", "title": "Sharing data structures between perl and cpp", "body": "<p>easy job.</p>\n\n<p>I like perl , and I also like C/C++. To make the best of both,\nI wrote a github project to solve this issue.</p>\n\n<p>please see:\n    <a href=\"https://github.com/tlqtangok/perlcpp\" rel=\"nofollow noreferrer\">https://github.com/tlqtangok/perlcpp</a></p>\n\n<p>a short example is here :</p>\n\n<pre><code>P_eval(\"$a=2;$a=$a**10;\"); \nInt(\"a\") ;   // a= 1024\n</code></pre>\n"}], "owner": {"reputation": 1317, "user_id": 2066474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f445bbda5c5e7b3cde0dc13abf53b575?s=128&d=identicon&r=PG", "display_name": "rbennett485", "link": "https://stackoverflow.com/users/2066474/rbennett485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 36198902, "answer_count": 2, "score": 0, "last_activity_date": 1488952558, "creation_date": 1458817237, "question_id": 36198614, "link": "https://stackoverflow.com/questions/36198614/sharing-data-structures-between-perl-and-cpp", "title": "Sharing data structures between perl and cpp", "body": "<p>I have a perl script which generates a very large data structure (which starts life as an array of array references). This is then written to a text file using some weird home-brew serialisation scheme.</p>\n\n<p>The data from the text file is stored as the value in a key-value store db.</p>\n\n<p>A c++ file then retrieves the data, and deserializes it (into a hashmap, although can potentially be flexible on how this data is structured).</p>\n\n<p>What I'm interested in is finding if there are any good ways of sharing a data structure between perl and c++ (something like <a href=\"http://search.cpan.org/~ram/Storable-1.0.14/Storable.pm\" rel=\"nofollow\">Storable</a>, but that is meant for perl->perl not perl->c++). The current method is a headache to maintain, and may not have the best performance.</p>\n\n<p>The most important factors are speed of deserialisation, and the size of the serialized structure in that order. Anyone know of something that might do the trick?</p>\n"}, {"tags": ["python", "regex", "perl"], "comments": [{"owner": {"reputation": 1213, "user_id": 5013084, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/561f38e0ddb14f32a9ad8206bf2fc532?s=128&d=identicon&r=PG&f=1", "display_name": "littlebird", "link": "https://stackoverflow.com/users/5013084/littlebird"}, "edited": false, "score": 1, "creation_date": 1458809775, "post_id": 36196060, "comment_id": 60026253, "body": "I am not sure if this is possible (at least at the same time) because the return object of <code>re.sub</code> is a string. If you have something like this <code>rx_obj = re.search(&#39;123$&#39;, another_string)</code>, you get an RE object which can be captured by <code>rx_obj.group()</code>."}, {"owner": {"reputation": 131, "user_id": 2056917, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8f52a4feb50530e2cbaef33d833d4cf?s=128&d=identicon&r=PG", "display_name": "KT8", "link": "https://stackoverflow.com/users/2056917/kt8"}, "reply_to_user": {"reputation": 1213, "user_id": 5013084, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/561f38e0ddb14f32a9ad8206bf2fc532?s=128&d=identicon&r=PG&f=1", "display_name": "littlebird", "link": "https://stackoverflow.com/users/5013084/littlebird"}, "edited": false, "score": 0, "creation_date": 1458818529, "post_id": 36196060, "comment_id": 60031231, "body": "Guess you might be right that it is not possible to do both at the same time. The other ways seem a bit hackish or are basically two separate steps."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1458819015, "post_id": 36196060, "comment_id": 60031526, "body": "Note that in Perl, you should always verify if your match succeeded before using the special numbered variables: <code>if ($str =~ s&#47;(\\d+)&#47;&#47;){ $x = $1; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 1, "creation_date": 1519507113, "post_id": 36196270, "comment_id": 84941006, "body": "This answer is incorrect, or at least not very general - you can&#39;t assume that finding <code>sub_str</code> as a string is the same as finding the original pattern as a regular expression.  For example, if the pattern was <code>r&quot;foo(?!bar)&quot;</code>, it will match <code>&quot;foobarfoo&quot;</code> only at position 6, but the matched string <code>&quot;foo&quot;</code> appears at positions 0 and 6."}], "tags": [], "owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "is_accepted": false, "score": 2, "last_activity_date": 1458809653, "creation_date": 1458809653, "answer_id": 36196270, "question_id": 36196060, "link": "https://stackoverflow.com/questions/36196060/get-group-match-in-re-sub-in-python/36196270#36196270", "title": "Get Group Match in re.sub in Python", "body": "<p>You can do the following:</p>\n\n<pre><code>sub_str = re.search(\"(\\d+)\", str).group(1)\n</code></pre>\n\n<p>Will find the \"123\" part.</p>\n\n<p>Then you replace it:</p>\n\n<pre><code>str = str.replace(sub_str, \"\")\n</code></pre>\n\n<p>Note that if you have more than [0-9] sequence you'll need to use <code>findall</code> and iterate manually on all matches.</p>\n"}, {"comments": [{"owner": {"reputation": 1347, "user_id": 5473725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W4x31.png?s=128&g=1", "display_name": "Erisan Olasheni", "link": "https://stackoverflow.com/users/5473725/erisan-olasheni"}, "edited": false, "score": 0, "creation_date": 1563389769, "post_id": 36196325, "comment_id": 100687920, "body": "<code>results[0].group()[1]</code>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 12, "last_activity_date": 1458809824, "creation_date": 1458809824, "answer_id": 36196325, "question_id": 36196060, "link": "https://stackoverflow.com/questions/36196060/get-group-match-in-re-sub-in-python/36196325#36196325", "title": "Get Group Match in re.sub in Python", "body": "<p>You can cheat and pass a function to <code>re.sub</code>:</p>\n\n<pre><code>results = []\ndef capture_and_kill(match):\n    results.append(match)\n    return \"\"\nstring = \"abcdef123\"\nstring = re.sub(\"(\\d+)\", capture_and_kill, string)\nresults[0].group(1)\n# =&gt; '123'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 1, "creation_date": 1519507250, "post_id": 44298233, "comment_id": 84941038, "body": "This doesn&#39;t answer the question - it just happens to return the same string as <code>\\1</code> because your replacement pattern is <code>r&#39;\\1&#39;</code>."}], "tags": [], "owner": {"reputation": 171, "user_id": 4318842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zv3gE.jpg?s=128&g=1", "display_name": "xiyurui", "link": "https://stackoverflow.com/users/4318842/xiyurui"}, "is_accepted": false, "score": -1, "last_activity_date": 1496289073, "creation_date": 1496289073, "answer_id": 44298233, "question_id": 36196060, "link": "https://stackoverflow.com/questions/36196060/get-group-match-in-re-sub-in-python/44298233#44298233", "title": "Get Group Match in re.sub in Python", "body": "<p>below code tested under python 3.6.</p>\n\n<pre><code>test = \"abcdef123\"\nresp = re.sub(r'\\w+[A-Za-z](\\d+)',r'\\1',test)\nprint (resp)\n\n123\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1228, "user_id": 336881, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c8dc8f86200d462a189ced773511798f?s=128&d=identicon&r=PG", "display_name": "michau", "link": "https://stackoverflow.com/users/336881/michau"}, "edited": false, "score": 0, "creation_date": 1559254242, "post_id": 54842973, "comment_id": 99372557, "body": "This is not a full equivalent of the Perl code in question. <code>str = &quot;foobarfoobar&quot;; match = re.search(r&#39;^foo(bar)&#39;, str); str = str.replace(match.group(0), &quot;&quot;)</code> We would like <code>str</code> to become <code>&quot;foobar&quot;</code>, and it becomes <code>&quot;&quot;</code>"}], "tags": [], "owner": {"reputation": 633, "user_id": 3204959, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e05bb94419158821e1f01b6407edb938?s=128&d=identicon&r=PG&f=1", "display_name": "bensentropy", "link": "https://stackoverflow.com/users/3204959/bensentropy"}, "is_accepted": false, "score": 0, "last_activity_date": 1550934614, "creation_date": 1550934614, "answer_id": 54842973, "question_id": 36196060, "link": "https://stackoverflow.com/questions/36196060/get-group-match-in-re-sub-in-python/54842973#54842973", "title": "Get Group Match in re.sub in Python", "body": "<p>To build on Marouns answer you can also do the following:</p>\n\n<pre><code>str = \"foobarzoo\"\nmatch = re.search(r\"foo(bar)\", str)\n</code></pre>\n\n<p>Then replace it with the full match \"foobar\":</p>\n\n<pre><code>str = str.replace(match.group(0), \"\")\n</code></pre>\n\n<p>The first group (within the brackets) \"bar\" is then accessible by:</p>\n\n<pre><code>match.group(1)\n</code></pre>\n\n<p>Using this method str will then finally equal \"zoo\"</p>\n"}], "owner": {"reputation": 131, "user_id": 2056917, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8f52a4feb50530e2cbaef33d833d4cf?s=128&d=identicon&r=PG", "display_name": "KT8", "link": "https://stackoverflow.com/users/2056917/kt8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2873, "favorite_count": 2, "answer_count": 4, "score": 4, "last_activity_date": 1550934614, "creation_date": 1458808839, "question_id": 36196060, "link": "https://stackoverflow.com/questions/36196060/get-group-match-in-re-sub-in-python", "title": "Get Group Match in re.sub in Python", "body": "<p>In Perl, it is possible for me to do a substitution and capture a group match at the same time. e.g.</p>\n\n<pre><code>my $string = \"abcdef123\";\n$string =~ s/(\\d+)//;\nmy $groupMatched = $1; # $groupMatched is 123\n</code></pre>\n\n<p>In Python, I can do the substitution using re.sub function as follows. However, I cannot find a way to capture the \\d+ group match without invoking another function re.match and performing an additional operation.</p>\n\n<pre><code>string = \"abcdef123\"\nstring = re.sub(\"(\\d+)\", \"\", string)\n</code></pre>\n\n<p>Does anyone know how I can capture the \"\\d+\" matched value as a separate variable from the same re.sub operation? I tried the following command and it doesn't work.</p>\n\n<pre><code>print r'\\1'\n</code></pre>\n"}, {"tags": ["python", "perl", "bro"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1458788631, "post_id": 36192393, "comment_id": 60019632, "body": "lol ... you used alot of words that make sense to me (and most of stack overflow) individually ... however when put together like this you have confused 99.9% of stack overflow about what your question even is ... I think we need more background at the very least"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1458788742, "post_id": 36192393, "comment_id": 60019670, "body": "ahh I think I see now what your question is"}, {"owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1458789399, "post_id": 36192393, "comment_id": 60019853, "body": "Sorry If I am being confusing. We collect HTTP logs using Bro. I need to write a code that searches those HTTP logs for a list of keywords, then excludes any results from another lists of keywords and then outputs the results. Does that make more sense?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "edited": false, "score": 0, "creation_date": 1458790132, "post_id": 36192772, "comment_id": 60020040, "body": "This is great, thank you!"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1458790088, "creation_date": 1458790088, "answer_id": 36192772, "question_id": 36192393, "link": "https://stackoverflow.com/questions/36192393/bro-ids-searches/36192772#36192772", "title": "Bro IDS searches", "body": "<p>ahh after several re-reads I think I start to see the question ... <em>IDS and BRO just are totally irrellevant to the question</em> <strong>and actually confuse the matter</strong></p>\n\n<p>I think I can decompose your question down into several sub-questions</p>\n\n<p>Question 1.<strong>How do I open a gzip encoded file for reading?</strong></p>\n\n<pre><code>import gzip\nwith gzip.GzipFile(\"/path/to/some_log_file.gz\") as input_plaintext_filehandle:\n     for line in input_plaintext_filehandle:\n         print line\n</code></pre>\n\n<p>Question 2. <strong>How do I write to a gzip file?</strong></p>\n\n<pre><code>import gzip\nwith gzip.GzipFile(\"/path/to/some_log_file.gz\",\"w\") as output_file:\n     output_file.write(\"Hello GZIP World\")\n</code></pre>\n\n<p>Question 3. <strong>How Do I Filter out lines based on a wordlist.txt?</strong></p>\n\n<pre><code>words = set(open(\"wordlist.txt\").read().split())\nfor line in open_file_handle:\n    if words.intersection(line.split()):\n       print \"Match Found\"\n    else:\n       print \"No Match Found\"\n</code></pre>\n\n<p>I think this should give you enough to get started on solving this problem.  feel free to come back once you get stuck and have some code to show</p>\n"}], "owner": {"reputation": 27, "user_id": 5495493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206600852794644/picture?type=large", "display_name": "Michael Meis", "link": "https://stackoverflow.com/users/5495493/michael-meis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "closed_date": 1458810355, "accepted_answer_id": 36192772, "answer_count": 1, "score": -3, "last_activity_date": 1466450858, "creation_date": 1458787505, "last_edit_date": 1466450858, "question_id": 36192393, "link": "https://stackoverflow.com/questions/36192393/bro-ids-searches", "closed_reason": "Needs more focus", "title": "Bro IDS searches", "body": "<p>I have never used Python or Perl before. I got a project from work due to unforeseen circumstances and am hoping one of you guys can help. We use BRO for an IDS System. I am supposed to write a script that will open a log file (in .gz format), search the log for a list of keywords saved in a text file, exclude any results that have keywords listed in another file, and then output those results into a new .gz. It is supposed to run 3 times per day. I am not sure where to start but any help would be incredibly helpful and greatly appreciated. </p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array", "dereference", "perl-data-structures"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1458792835, "post_id": 36192188, "comment_id": 60020647, "body": "Try to take a look at <a href=\"http://stackoverflow.com/questions/34529090/how-to-iterate-the-contents-of-multidimentional-array-in-parallel-using-perl/34529824#34529824\" title=\"how to iterate the contents of multidimentional array in parallel using perl\">stackoverflow.com/questions/34529090/&hellip;</a> user Sobrique and user Borodin answers will help for you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1458811249, "post_id": 36192188, "comment_id": 60027016, "body": "Instead of <code>scalar(@t)-1</code> it&#39;s generally better to use <code>$#t</code> which is the index of the last element."}], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 3470739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5aeca1bbb50d0ee8100d585b5cbc10?s=128&d=identicon&r=PG&f=1", "display_name": "MondayMonkey", "link": "https://stackoverflow.com/users/3470739/mondaymonkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1458787798, "last_edit_date": 1458787798, "creation_date": 1458787225, "answer_id": 36192345, "question_id": 36192188, "link": "https://stackoverflow.com/questions/36192188/printing-multi-dimensional-array-in-perl/36192345#36192345", "title": "Printing &quot;Multi-Dimensional&quot; Array in Perl", "body": "<p>Your outermost for loop is constrained by the length of t, which is 3. It will never print more than three arrays.</p>\n\n<p>If I understand what you're trying to do, you need top swap @t and @dev. That will print all your values.</p>\n\n<p>That won't, however, print any array that is longer than 3 (the length of dev).</p>\n\n<p>For that, you need:</p>\n\n<pre><code>@dev = (\n    [@tf], # Probably meant tf\n    [@a],\n    [@t],\n    [@f],\n    [@ofv],\n    [@tfv],\n);\n\n#print($dev[4][2]);\n\nfor (my $i = 0; $i &lt; @dev; $i++) {\n    for (my $j = 0; $j &lt; @{ $dev[$i] }; $j++) {\n        print($dev[$i][$j]);\n        print(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1458801689, "post_id": 36194371, "comment_id": 60023005, "body": "you can use the <code>()x</code> repeat operator: <code>@arr3 = (&#39;.&#39;) x 10;</code>"}], "tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": false, "score": 3, "last_activity_date": 1458825445, "last_edit_date": 1458825445, "creation_date": 1458800774, "answer_id": 36194371, "question_id": 36192188, "link": "https://stackoverflow.com/questions/36192188/printing-multi-dimensional-array-in-perl/36194371#36194371", "title": "Printing &quot;Multi-Dimensional&quot; Array in Perl", "body": "<p>Perl can be quite compact.\nThis snippet of code do the same thing for my arrays @arr1, @arr2 and @arr3:</p>\n\n<pre><code>@arr1 = (1..10);\n@arr2 = ('a'..'j');\n@arr3 = ('.') x 10;\n\n@multid = \\(@arr1, @arr2, @arr3);\nprint \"@$_\\n\" for (@multid);\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10\na b c d e f g h i j\n. . . . . . . . . .\n</code></pre>\n\n<p>Also the <code>[]</code> copies an array and gives a reference to it (It's an anonymous array in memory, regardless of the array, a copy of which he is). If there is no need to such duplicate, it is better to use the backslash <code>\\</code> which instead gives a reference to existing array without coping. (like <code>&amp;</code> operator in C, as tell us perldoc)</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1458812258, "post_id": 36194939, "comment_id": 60027529, "body": "Actually <a href=\"http://p3rl.org/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> is way nicer for inspecting than Data::Dumper, as the latter is meant to produce machine-readable output."}], "tags": [], "owner": {"reputation": 191, "user_id": 6108023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df32fc148979b199f947b3ac80a7c90?s=128&d=identicon&r=PG&f=1", "display_name": "Jay.Zhao", "link": "https://stackoverflow.com/users/6108023/jay-zhao"}, "is_accepted": false, "score": 3, "last_activity_date": 1458812210, "last_edit_date": 1458812210, "creation_date": 1458803717, "answer_id": 36194939, "question_id": 36192188, "link": "https://stackoverflow.com/questions/36192188/printing-multi-dimensional-array-in-perl/36194939#36194939", "title": "Printing &quot;Multi-Dimensional&quot; Array in Perl", "body": "<p>If you just want to show the data of such complex data struct, the modules <a href=\"http://p3rl.org/Data::Dumper\" rel=\"nofollow\">Data::Dumper</a> or <a href=\"http://p3rl.org/Smart::Comments\" rel=\"nofollow\">Smart::Comments</a> may be good options. </p>\n\n<pre><code>use Data::Dumper;\nprint Dumper(\\@dev);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Smart::Comments;\n### @dev\n</code></pre>\n\n<p>The output is much more perl-style and not that readable, but is quite convenient to show the struct of such complex data. </p>\n"}], "owner": {"reputation": 125, "user_id": 3784248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a3e2565e0d4380c3490c9a8ceb892c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Alejandro Santiago", "link": "https://stackoverflow.com/users/3784248/ren%c3%a9-alejandro-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1458832661, "creation_date": 1458786059, "last_edit_date": 1458832661, "question_id": 36192188, "link": "https://stackoverflow.com/questions/36192188/printing-multi-dimensional-array-in-perl", "title": "Printing &quot;Multi-Dimensional&quot; Array in Perl", "body": "<p>I am having a problem attempting to print an array that contains arrays. When printing the array <code>@dev</code> which contains the other arrays, I am only managing to print the first three as it is indicated by the <code>#printing</code> in-line comments. The commented line <code>#print($dev[4][2]);</code> works fine, as well as any of the other combination of numbers within the allowable range. For some reason the for loop does not work. Help!?</p>\n\n<pre><code>my @dev;\nmy @tf;\nmy @a;\nmy @t;\nmy @f;\nmy @ofv;\nmy @tfv;\n\n@tf = ('123456787', '123456788', '123456789'); #printing\n@a = (78, 65, 57); #printing\n@t = (70, 55, 42); #printing\n@f = (77, 64, 56);\n@ofv = ('true', 'false', 'false');\n@tfv = ('false', 'true', 'true');       \n\n@dev = (\n    [@tf],\n    [@a],\n    [@t],\n    [@f],\n    [@ofv],\n    [@tfv],\n);\n\n#print($dev[4][2]);\n\nfor (my $i = 0; $i &lt;= (scalar(@tf) - 1); $i++) {\n    for (my $j = 0; $j &lt;= (scalar(@dev) - 1); $j++) {\n        print($dev[$i][$j]);\n        print(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}]