[{"tags": [".htaccess", "perl", "ip-address", "whois", "cidr"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489618400, "post_id": 42822065, "comment_id": 72756056, "body": "I was going to recommend Net::Whois::Generic, which has a nicer interface, but it chokes on the OP&#39;s IP address. :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489620645, "post_id": 42822065, "comment_id": 72756884, "body": "@ThisSuitIsBlackNot: Oh? How do you mean, &quot;chokes&quot;? There are very many modules in the <code>Net::Whois::*</code> family and I&#39;ve only ever used a couple of them. <code>Net::Whois::Parser</code> should play nicely  with <code>Net::Whois::Raw</code>, but it seemed overkill in this instance."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489680367, "post_id": 42822065, "comment_id": 72787534, "body": "By &quot;chokes&quot; I mean it generates a bunch of warnings and even spits out a Data::Dumper dump of an internal data structure. Your version is much better. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489682037, "post_id": 42822065, "comment_id": 72788807, "body": "@ThisSuitIsBlackNot: Woah. That&#39;s a bit of an overreaction! I did notice that my solution produces a different IP range from the online utility. I wonder which is correct!"}, {"owner": {"reputation": 689, "user_id": 7611750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2ce87cfd8001e5b670c581c6cf9b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Peppler", "link": "https://stackoverflow.com/users/7611750/charlie-peppler"}, "edited": false, "score": 0, "creation_date": 1489712499, "post_id": 42822065, "comment_id": 72803019, "body": "The situation is a more complicated than I thought.  This <a href=\"http://stackoverflow.com/questions/27721092/ip-to-cidr-ip-range\">link</a> provides some additional details that basically the whois parsing module, to be accurate, needs to be able to recurse.  You <i>may</i> hit the write server that has the ip address, or you may not, in which case it points you toward the one that has the IP address and it&#39;s range.  I used <a href=\"http://www.perl.com/pub/2002/08/20/perlandlwp.html\" rel=\"nofollow noreferrer\">link</a> this example to dump out the raw results from this query: <a href=\"http://rest.db.ripe.net/search?query-string=95.137.240.189\" rel=\"nofollow noreferrer\">rest.db.ripe.net/search?query-string=95.137.240.189</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489714296, "post_id": 42822065, "comment_id": 72803477, "body": "@CharliePepper: You need to ask a new question if you need different help."}, {"owner": {"reputation": 689, "user_id": 7611750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2ce87cfd8001e5b670c581c6cf9b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Peppler", "link": "https://stackoverflow.com/users/7611750/charlie-peppler"}, "edited": false, "score": 0, "creation_date": 1489716228, "post_id": 42822065, "comment_id": 72803992, "body": "Thanks for the sample code using Net::Whois::Raw.  Unfortunately, I think the web utility is correct with the CIDR of 95.137.192.0/18."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 689, "user_id": 7611750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2ce87cfd8001e5b670c581c6cf9b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Peppler", "link": "https://stackoverflow.com/users/7611750/charlie-peppler"}, "edited": false, "score": 0, "creation_date": 1514909956, "post_id": 42822065, "comment_id": 83101701, "body": "@Borodin @charlie &quot;correct&quot; reply will change over time but right now it is: <code>inetnum:        95.137.224.0 - 95.137.255.255 netname:        GE-fiber-P2P-block-6</code> as given by RIPE whois server. This is the most specific entry. The result you display in your answer is the first reply of ARIN whois server, often the default one used in scripts but not the authoritative ones for all IP blocks. The relevant data is further below the ARIN whois reply (if the whois client used if able to follow referrals)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1489617633, "creation_date": 1489617633, "answer_id": 42822065, "question_id": 42821850, "link": "https://stackoverflow.com/questions/42821850/given-an-ip-address-how-do-i-find-the-cidr-range-to-which-it-belongs/42822065#42822065", "title": "Given an IP address, how do I find the CIDR range to which it belongs?", "body": "<p>I suggest that you make use of the <a href=\"https://metacpan.org/pod/Net::Whois::Raw\" rel=\"nofollow noreferrer\"><code>Net::Whois::Raw</code></a> module. It returns just a block of text, and you will have to use regex patterns to extract the information that you need</p>\n\n<p>Here's an example that displays the IP range for the same address as you use in your example. Just print <code>$info</code> to see the whole thing</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Net::Whois::Raw;\n\nmy $info = whois('95.137.240.189');\n\nsay $info =~ /NetRange:\\s*(.+)/;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>95.0.0.0 - 95.255.255.255\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 7611750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2ce87cfd8001e5b670c581c6cf9b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Peppler", "link": "https://stackoverflow.com/users/7611750/charlie-peppler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489621098, "creation_date": 1489616668, "last_edit_date": 1489621098, "question_id": 42821850, "link": "https://stackoverflow.com/questions/42821850/given-an-ip-address-how-do-i-find-the-cidr-range-to-which-it-belongs", "title": "Given an IP address, how do I find the CIDR range to which it belongs?", "body": "<p>I'm working on ways to automate the updating of <code>.htaccess</code> to block IP ranges that have come in and tried to hack the site. </p>\n\n<p>I've been doing it manually for a while, pulling an IP address, then using a web based whois utility to find the range it's in, then manually adding the range to the blocked IP list for the site. It's a pain.</p>\n\n<p>Now I'm parsing the logfile to find the IP address of suspicious entry attempts with a Perl script, and I want to find the IP address range to which that IP address belongs, and maybe pull some other descriptive information that will quickly tell me if this is a range I want to block.</p>\n\n<p>I know it can be done because the web utilities provide the information. Here's an example</p>\n\n<p><img src=\"https://i.stack.imgur.com/UiUFM.jpg\" alt=\"Example from Whois site\">.</p>\n\n<p>I can run <code>gethostbyaddr</code> on them, but that's not what I need.</p>\n\n<p>I've seen some whois modules that had some information, but could not find access to the range to which the IP address belongs. I'm hoping there is a module I can use to pull the address range from to help me speed up the security process.</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489609076, "post_id": 42819784, "comment_id": 72751435, "body": "Try for example: <code>$alerts[0]-&gt;{site}</code> it should give <code>&quot;192.168.0.1&quot;</code>"}, {"owner": {"reputation": 55, "user_id": 4854037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e524984fcf432d569d2892f8698c0c9?s=128&d=identicon&r=PG&f=1", "display_name": "mario", "link": "https://stackoverflow.com/users/4854037/mario"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489609502, "post_id": 42819784, "comment_id": 72751668, "body": "I want to use Form package, and print all entries, [<a href=\"http://search.cpan.org/dist/Perl6-Form/lib/Perl6/Form.pm#Array_data_sources]\" rel=\"nofollow noreferrer\">search.cpan.org/dist/Perl6-Form/lib/Perl6/&hellip;</a>. To be honest I&#39;m not sure it&#39;s doable in this way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1489610329, "post_id": 42819784, "comment_id": 72752182, "body": "@Gregory Nisbet, This is a Perl 5 question. Perl6::Form is a module for Perl 5 (that provides forms similar to Perl 6&#39;s)."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1489610453, "last_edit_date": 1489610453, "creation_date": 1489609827, "answer_id": 42820092, "question_id": 42819784, "link": "https://stackoverflow.com/questions/42819784/how-can-i-use-references-with-perl6form/42820092#42820092", "title": "How can I use references with Perl6::Form?", "body": "<p>You need parallel arrays.</p>\n\n<pre><code>my @ids      = map { $_-&gt;{id}     } @alerts;\nmy @sites    = map { $_-&gt;{site}   } @alerts;\nmy @statuses = map { $_-&gt;{status} } @alerts;\n\nprint\n   form\n      '+=======================================+',\n      '| ID          | SITE        | STATUS    |',\n      '|-------------+-------------+-----------|',\n      '| {[[[[[[[[[} | {[[[[[[[[[} | {&gt;&gt;&gt;&gt;&gt;&gt;&gt;} |',\n         \\@ids,        \\@sites,      \\@statuses,\n      '+=======================================+';\n</code></pre>\n\n<p>We can eliminate the code duplication.</p>\n\n<pre><code>my %dbf;   # Data by field\nfor my $field (qw( id site status )) {\n   $dbf{$field} = [ map { $_-&gt;{$field} } @alerts ];\n}\n\nprint\n   form\n      '+=======================================+',\n      '| ID          | SITE        | STATUS    |',\n      '|-------------+-------------+-----------|',\n      '| {[[[[[[[[[} | {[[[[[[[[[} | {&gt;&gt;&gt;&gt;&gt;&gt;&gt;} |',\n         $dbf{id},     $dbf{site},   $dbf{status},\n      '+=======================================+';\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4854037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e524984fcf432d569d2892f8698c0c9?s=128&d=identicon&r=PG&f=1", "display_name": "mario", "link": "https://stackoverflow.com/users/4854037/mario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 42820092, "answer_count": 1, "score": 2, "last_activity_date": 1489611600, "creation_date": 1489608757, "last_edit_date": 1489611600, "question_id": 42819784, "link": "https://stackoverflow.com/questions/42819784/how-can-i-use-references-with-perl6form", "title": "How can I use references with Perl6::Form?", "body": "<p>I'm trying to print tabular data with <a href=\"https://metacpan.org/pod/Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a>, but I'm not sure how to output data from hash references. Here's what I tried so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Perl6::Form;\n\nmy @alerts; \n\npush @alerts, { site =&gt; \"192.168.0.1\", status =&gt; \"200\", id =&gt; \"QWE\" };\npush @alerts, { site =&gt; \"192.168.0.2\", status =&gt; \"500\", id =&gt; \"QER\" };\n\nprint form\n        ' ====================================== ',\n        '| ID          |    SITE    | STATUS    |',\n        '|-------------+------------+-----------|',\n        '| {[[[[[[[[[} |{[[[[[[[[[} | {&gt;&gt;&gt;&gt;&gt;&gt;&gt;} |',\n           \\@alerts{id}, \\@alerts{site},\\@alerts{status},\n        ' ====================================== ';\n</code></pre>\n"}, {"tags": ["windows", "perl", "configuration", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489654874, "post_id": 42822866, "comment_id": 72768773, "body": "You can always implement a watcher on the config file that tells the daemon to restart. Morbo might have other consequences. I am not sure if turning off all the debugging is possible, and you probably don&#39;t want <i>trace</i> and <i>info</i> level stuff go into your logs in a production environment."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1489621797, "creation_date": 1489621797, "answer_id": 42822866, "question_id": 42817173, "link": "https://stackoverflow.com/questions/42817173/reloading-mojolicous-server-in-windows/42822866#42822866", "title": "Reloading Mojolicous server in Windows", "body": "<p>The documentation recommends that <code>Mojo::Server::Morbo</code> should be used only for development work because restarting the server process when a configuration file changes isn't a good idea for live server software. You would normally make and test the changes offline, gather a number of modifications together into a release, and choose a low-traffic time of day to implement the update and restart the live server</p>\n\n<p>However, since an instantaneous restart is exactly your goal, there is no other reason to avoid <code>Mojo::Server::Morbo</code>. I would question the wisdom of your approach,  but the facility is available to you to use as you wish</p>\n"}], "owner": {"reputation": 334, "user_id": 3019319, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c56b68b36e135148e30fe1eb4667cbf?s=128&d=identicon&r=PG&f=1", "display_name": "user3019319", "link": "https://stackoverflow.com/users/3019319/user3019319"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489622168, "creation_date": 1489600281, "last_edit_date": 1489622168, "question_id": 42817173, "link": "https://stackoverflow.com/questions/42817173/reloading-mojolicous-server-in-windows", "title": "Reloading Mojolicous server in Windows", "body": "<p>I have a Mojolicious application running on Windows which uses the plugin <code>Mojolicious::Plugin::Config</code> to load a configuration file.</p>\n\n<p>Every time the configuration file is changed I need to restart the server. Is it possible to restart the server automatically whenever the configuration file is changed, without the need to run it again manually?</p>\n\n<p>How can this problem be solved using Mojolicious on Windows?</p>\n\n<p>I know it's possible to do this with <code>Mojo::Server::Morbo</code> but i am interested in using the built-in daemon as Morbo is for development.</p>\n"}, {"tags": ["arrays", "perl", "email", "mime-types"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489601681, "post_id": 42816316, "comment_id": 72747060, "body": "Why do you need it to be line by line? You can just split it at newline. Your data from the other question was text anyway."}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489597570, "creation_date": 1489597570, "question_id": 42816316, "link": "https://stackoverflow.com/questions/42816316/working-with-emailmime-and-byte-strings", "title": "Working with Email::MIME and byte strings", "body": "<p>I'm a perl novice and trying to process the lines of an email using Email::MIME. I've managed to isolate the individual parts of the message, but the body parts appear to be available as \"byte strings\", which appear to be just one big string, and not a series of lines.</p>\n\n<pre><code> my $parser = MIME::Parser-&gt;new;\n $parser-&gt;extract_uuencode(1);\n $parser-&gt;extract_nested_messages(1);\n $parser-&gt;output_to_core(0);\n my $buf;\n while(&lt;STDIN&gt; ){\n         $buf .= $_;\n }\n my $entity = $parser-&gt;parse_data($buf);\n my @mailData;\n my $msg = Email::MIME-&gt;new($buf);\n foreach my $part ( $msg-&gt;subparts ) {\n    foreach my $sub_part ($part-&gt;subparts) {\n        print $sub_part-&gt;body;\n   }\n}\n</code></pre>\n\n<p>How can I write the $sub_part->body into an array such that I can process it line-by-line outside of those foreach() loops? I'd like to be able to do something like:</p>\n\n<pre><code>foreach my $line (@mailData) {\n     print $line;\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489602044, "post_id": 42816281, "comment_id": 72747287, "body": "Perhaps <a href=\"http://stackoverflow.com/a/41484175/4653379\">this answer</a> can be useful, for manipulating elements in <code>XML::Twig</code>.   Also, <a href=\"http://stackoverflow.com/a/38069658/4653379\">this answer</a> builds an XML file with <code>XML::Twig</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489610823, "post_id": 42816281, "comment_id": 72752482, "body": "I thought you were comparing them?"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489651155, "post_id": 42816281, "comment_id": 72766626, "body": "It was the first step...I should compare them to see, whether should I make Post request or not...if my values are different I take values from DB1 and post them to DB2."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489666525, "post_id": 42831065, "comment_id": 72776830, "body": "Thank you! I have tried to do that by my own..but I&#39;m new in Perl and it is not so easy to understand to to use some methods... I used <code>$xml2-&gt;sprint</code> and my POST works."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489671285, "post_id": 42831065, "comment_id": 72780328, "body": "You&#39;ve a treat ahead of you. Perl is a really marvellous language to work with."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1489660869, "last_edit_date": 1495540441, "creation_date": 1489659334, "answer_id": 42831065, "question_id": 42816281, "link": "https://stackoverflow.com/questions/42816281/overwrite-certain-values-in-xml-file-with-the-values-from-the-other-xml-file/42831065#42831065", "title": "Overwrite certain values in XML file with the values from the other XML file", "body": "<p>With reference to your <a href=\"https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents\">previous question</a>:</p>\n\n<p>You need to go read what <code>set_att</code> does in the <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> documentation.</p>\n\n<p>You do it like this:</p>\n\n<pre><code>$xml2-&gt;root-&gt;set_att('name', \n                      $xml1-&gt;get_xpath( '//deviceName', 0 )-&gt;text );\n\n$xml2-&gt;get_xpath('//ipaddress',0) -&gt; set_text (\n               $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text );\n\n$xml2 -&gt; set_pretty_print ('indented_a');\n$xml2 -&gt; print;\n</code></pre>\n\n<p>For the sake of clarity - both <code>get_xpath</code> and <code>root</code> return an 'element' object. (<code>get_xpath('//element',0)</code> returns just a single one, which you can manipulate. However <code>get_xpath('//element')</code> returns a list of matches, and you'd need to iterate it.</p>\n\n<p>But an <code>XML::Twig::Elt</code> is a data structure that includes content, attributes, names and links to parent/child elements. </p>\n\n<p>This element you get values out of via <code>text()</code> and <code>att('attributename')</code>.</p>\n\n<p>So e.g. </p>\n\n<pre><code>&lt;element name=\"bernard\" animal=\"haddock\"&gt;This is bernard the fish&lt;/element&gt;\n</code></pre>\n\n<p>This element you'd be getting \"This is bernard the fish\" with <code>$element -&gt; text</code> and <code>$element-&gt;att('name')</code> returns 'bernard'. (and <code>$element -&gt; tag</code> will return 'element'</p>\n\n<p>And you can manipulate this with <code>set_text</code> and <code>set_att</code>. Both overwrite if any is existing, and adds if not. And that's all there is to it</p>\n\n<pre><code>$element -&gt; set_att('location','fish tank'); \n</code></pre>\n\n<p>Would turn the above into:</p>\n\n<pre><code>&lt;element name=\"bernard\" animal=\"haddock\" location=\"fish tank\"&gt;This is bernard the fish&lt;/element&gt;\n</code></pre>\n\n<p>(Note though - attributes aren't necessarily ordered, which is part of why regex hackery is a problem)</p>\n\n<p>Actually, you probably want to set your POST to <code>$xml2-&gt;sprint</code> (with or without 'set_pretty_print' as that should be irrelevant). </p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42831065, "answer_count": 1, "score": 1, "last_activity_date": 1489660869, "creation_date": 1489597449, "last_edit_date": 1489660098, "question_id": 42816281, "link": "https://stackoverflow.com/questions/42816281/overwrite-certain-values-in-xml-file-with-the-values-from-the-other-xml-file", "title": "Overwrite certain values in XML file with the values from the other XML file", "body": "<p>I have a Programm that compares certain values from different XML Documents (ipAddress and Device Name).</p>\n\n<pre><code>  use strict;\n  use warnings;\n  use XML::Twig;\n\n  my $xml1 = XML::Twig-&gt;new-&gt;parsefile('FILE1.xml');\n  my $xml2 = XML::Twig-&gt;new-&gt;parsefile('FILE2.xml');\n\n  if ( ( $xml1-&gt;get_xpath( '//deviceName', 0 )-&gt;text eq $xml2-&gt;root-&gt;att('name') )\n  &amp;&amp; ( $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text eq $xml2-&gt;get_xpath( '//ipaddress', 0 )-&gt;text ) )\n\n  {\n   print \"IP and name  matches\\n\";\n     } else {\n        ...\n</code></pre>\n\n<p>If both are the same I just want want to see this message, but if both are different I want to make a POST Request with FILE2 but with the values from FILE1.\nNow I want to save this values (ipAddress and name) in my FILE2. I should to overwrite them and save. </p>\n\n<p>What methods schould I use to make that?</p>\n\n<p>I tried to save my values and to overrwite them with with <code>set_text</code> and <code>set_att</code>(because I have in FILE2 <code>name</code> as attribute) but I'm not sure that I should do it this way...</p>\n\n<pre><code>    .......\n    } else {\nmy $name1 = $xml1-&gt;get_xpath( '//deviceName', 0 )-&gt;text;\nmy $Addr1 = $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text;\nmy $name2 = $xml2-&gt;root-&gt;att('name');\nmy $Addr2 = $xml2-&gt;get_xpath( '//ipaddress', 0 )-&gt;text;\n\nXML::Twig-&gt;new(\npretty_print  =&gt; 'indented',\ntwig_handlers =&gt; {\n    name =&gt; sub {\n        $name2-&gt;set_text( $name1)-&gt;flush  &amp;&amp; $Addr2-&gt;set_att($Addr2)-&gt;flush\n    },\n   },\n )-&gt;parsefile_inplace( 'FILE2.xml');\n\n }\n</code></pre>\n\n<p>FILE1.xml</p>\n\n<pre><code>  &lt;?xml version=\"1.0\" ?&gt;\n  &lt;queryResponse last=\"34\" first=\"0\" count=\"35\" type=\"Devices\" responseType=\"listEntityInstances\" requestUrl=\"https://hostname/webacs/api/v1/data/Devices?.full=true\" rootUrl=\"https://hostname/webacs/api/v1/da$\n   &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/201\"&gt;\n  &lt;devicesDTO displayName=\"201201\" id=\"201\"&gt;\n    &lt;clearedAlarms&gt;0&lt;/clearedAlarms&gt;\n    &lt;collectionDetail&gt;&lt;/collectionDetail&gt;\n    &lt;collectionTime&gt;&lt;/collectionTime&gt;\n    &lt;creationTime&gt;&lt;/creationTime&gt;\n    &lt;criticalAlarms&gt;0&lt;/criticalAlarms&gt;\n    &lt;deviceId&gt;205571&lt;/deviceId&gt;\n    &lt;deviceName&gt;TEST&lt;/deviceName&gt;\n    &lt;deviceType&gt;Cisco Switch&lt;/deviceType&gt;\n    &lt;informationAlarms&gt;0&lt;/informationAlarms&gt;\n    &lt;ipAddress&gt;10.66.12.126&lt;/ipAddress&gt;\n  &lt;location&gt;&lt;/location&gt;\n    &lt;majorAlarms&gt;0&lt;/majorAlarms&gt;\n    &lt;managementStatus&gt;&lt;/managementStatus&gt;\n       &lt;manufacturerPartNrs&gt;\n           &lt;manufacturerPartNr&gt;&lt;/manufacturerPartNr&gt;\n       &lt;/manufacturerPartNrs&gt;\n       &lt;minorAlarms&gt;0&lt;/minorAlarms&gt;\n       &lt;productFamily&gt;&lt;/productFamily&gt;\n       &lt;reachability&gt;Reachable&lt;/reachability&gt;\n       &lt;softwareType&gt;&lt;/softwareType&gt;\n       &lt;softwareVersion&gt;&lt;/softwareVersion&gt;\n       &lt;warningAlarms&gt;0&lt;/warningAlarms&gt;\n  &lt;/devicesDTO&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>FILE2.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;ns3:networkdevice name=\"Hallo\" id=\"9999999981be-b83861d71f95\" xmlns:ns2=\"ers.ise.cisco.com\" xmlns:ns3=\"network.ers.ise.cisco.com\"&gt;\n&lt;link type=\"application/xml\" href=\"https://hostname:9060/ers/config/networkdevice/123456\" rel=\"self\"/&gt;\n &lt;authenticationSettings&gt;\n    &lt;enableKeyWrap&gt;false&lt;/enableKeyWrap&gt;\n    &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n    &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n    &lt;radiusSharedSecret&gt;******&lt;/radiusSharedSecret&gt;\n &lt;/authenticationSettings&gt;\n &lt;NetworkDeviceIPList&gt;\n   &lt;NetworkDeviceIP&gt;\n      &lt;ipaddress&gt;10.66.12.127&lt;/ipaddress&gt;\n      &lt;mask&gt;21&lt;/mask&gt;\n   &lt;/NetworkDeviceIP&gt;\n &lt;/NetworkDeviceIPList&gt;\n &lt;NetworkDeviceGroupList&gt;\n   &lt;NetworkDeviceGroup&gt;Location#All Locations&lt;/NetworkDeviceGroup&gt;\n   &lt;NetworkDeviceGroup&gt;Device Type#All Device Types&lt;/NetworkDeviceGroup&gt;\n  &lt;/NetworkDeviceGroupList&gt;\n  &lt;/ns3:networkdevice&gt;\n</code></pre>\n\n<p>Advices?</p>\n"}, {"tags": ["perl", "ssh", "f5", "big-ip"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1489651422, "post_id": 42816113, "comment_id": 72766765, "body": "Maybe the remote host requires <code>password-interactive</code> authentication. Instead of calling <code>auth_password</code> use <code>auth</code>: <code>$ssh-&gt;auth(username =&gt; $username, password =&gt; $password)</code>"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1489757759, "post_id": 42816113, "comment_id": 72824041, "body": "thanks a lot buddy. it worked like a charm :)"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489596939, "creation_date": 1489596939, "question_id": 42816113, "link": "https://stackoverflow.com/questions/42816113/unable-to-ssh-to-f5-load-balancerbigip-using-perl", "title": "Unable to SSH to F5 Load Balancer(BIGIP) using Perl", "body": "<p>I am trying to connect to F5 load balancer through perl module Net::SSH2. SSH2 \"connect\" method is working but I am unable to authenticate, whereas with the same credentials I am able to ssh to the device through putty. I have shared the Code and the error below for reference. Can somebody please help me with this.</p>\n\n<p><strong><em>Error</em></strong></p>\n\n<blockquote>\n  <p>Authentication failed (username/password) (-18\n  LIBSSH2_ERROR_PUBLICKEY_UNRECOGNIZED) at test.pl line 8. successfully\n  connected</p>\n</blockquote>\n\n<p><strong><em>Code</em></strong></p>\n\n<pre><code>use strict;\nuse Net::SSH2;\n\nmy $ssh=Net::SSH2-&gt;new();\n\nif($ssh-&gt;connect('xx.xx.xx.xx'))\n  {\n     print \"successfully connected\";\n  }\n\n$ssh-&gt;auth_password('username','password') or $ssh-&gt;die_with_error;\n</code></pre>\n\n<p>Can somebody please help.</p>\n"}, {"tags": ["perl", "testing", "perl-prove"], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1489608303, "post_id": 42816534, "comment_id": 72751021, "body": "I have tried it too. It did not work, because it will run two debuggers. One for prove and second for test. I setup port to debug remotely, but because of two debuggers are run I got conflict about that port is in use and scenario dies ("}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1489601635, "last_edit_date": 1489601635, "creation_date": 1489598243, "answer_id": 42816534, "question_id": 42815607, "link": "https://stackoverflow.com/questions/42815607/how-to-run-perl-test-in-debugger-mode/42816534#42816534", "title": "How to run perl test in debugger mode?", "body": "<p>You can repeat yourself once if you set the <code>PERL5OPT</code> environment variable.</p>\n\n<pre><code>export DBG_MODE='-d -Ilib -Ilocal/lib/perl5'\nprove t/file1.t                       # regular use\nPERL5OPT=$DBG_MODE prove t/file2.t    # with debugger\n</code></pre>\n\n<p>or with an alias or bash function</p>\n\n<pre><code>alias proved='PERL5OPT=\"-d -Ilib -Ilocal/lib/perl5\" prove'\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1489601635, "creation_date": 1489595535, "question_id": 42815607, "link": "https://stackoverflow.com/questions/42815607/how-to-run-perl-test-in-debugger-mode", "title": "How to run perl test in debugger mode?", "body": "<p>I try to run test under debugger as:</p>\n\n<pre><code>perl -d $(which prove) t/file.t\n</code></pre>\n\n<p>But this has no effect because each test is run as separate job.</p>\n\n<p>I have found <code>--exec</code> option, but when I provide it I lost any option from <code>.proverc</code> file and command line</p>\n\n<pre><code>prove -Ithis/is/lost --exec 'perl -d' t/file.t\n</code></pre>\n\n<p><strong>How to run tests by <code>prove</code> with additional options</strong> and do not lose those options which were provided at <code>.proverc</code> file and command line?</p>\n\n<p>I do not want repeat myself and write:</p>\n\n<pre><code>prove --exec 'perl -d -Ilib -Ilocal/lib/perl5' t/file.t\n</code></pre>\n\n<p>While <code>-Ilib</code> and <code>-Ilocal/lib/perl5</code> are both at <code>.proverc</code> file</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1489594495, "post_id": 42814755, "comment_id": 72742609, "body": "Try specifying the data type when binding."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489595029, "post_id": 42814755, "comment_id": 72742977, "body": "@ikegami  Well that fixed it.   It runs now.  Does the driver/DBI think that 586058 is larger than an integer, hence the problem?  We are running 32 bit perl here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489595738, "post_id": 42814755, "comment_id": 72743526, "body": "Larger than the type it defaulted to using, seems like."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489595784, "post_id": 42814755, "comment_id": 72743552, "body": "<code>-&gt;execute($Id, $Id)</code> (without binding) may also have worked."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489596293, "post_id": 42814755, "comment_id": 72743897, "body": "@ikegami - unfortunately, no.  the <code>execute($Id, $Id)</code> does not work.  Get the same &quot;out of range&quot; error.   It appears type must be specified.  Thanks for pointing that out.   It did not register with me that is should be necessary."}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489677157, "post_id": 42814755, "comment_id": 72784921, "body": "@ikegami If you want to put down your suggestion as an answer, I&#39;ll mark it correct."}], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1489594592, "creation_date": 1489593252, "last_edit_date": 1489594592, "question_id": 42814755, "link": "https://stackoverflow.com/questions/42814755/perl-prepared-statement-not-using-bind-parameters", "title": "Perl prepared statement not using bind parameters", "body": "<p>This is all being run on Windows 7 with Strawberry Perl (v 5.16.3) to a 2012 SQL Server.</p>\n\n<p>I am doing something wrong here and I am at a loss on what it could be.  I can run a sql statement with the parameters included and it comes out fine.  However, if I place the SQL in the statement handle and try to bind the parameters, I get a SQL error - I suspect because the parameters did not bind.   The code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.016;\n\nuse DBI;\nuse Data::Dump qw( dump );\n\nmy $dsn = \"Driver=SQL Server;Server=servername;Database=databasename;Uid=username;pwd=password\";\nmy $dbh = DBI-&gt;connect_cached(\"dbi:ODBC:$dsn\", undef, undef, {\n        PrintError =&gt; 0,\n        RaiseError =&gt; 1,\n        ShowErrorStatement =&gt; 1,\n        LongReadLen =&gt; 500000,\n    }) or print($DBI::errstr);\n\nmy $Id = 586058;\n# sql with parameter included. \nmy $sql = qq~\n         SELECT ps.parmId\n         FROM table1 ps\n            JOIN table3 pd ON pd.parmId = ps.parmId\n         WHERE ps.testOccurId = $Id\n            AND pd.requiredForPass = 1\n         UNION\n         SELECT ps.parmId\n         FROM table2 ps\n            JOIN table3 pd ON pd.parmId = ps.parmId\n         WHERE ps.testOccurId = $Id\n            AND pd.requiredForPass = 1\n         ORDER BY ps.parmId\n    ~;\n# this works without error\nmy $arrayRef = $dbh-&gt;selectall_arrayref($sql);\nprint dump($arrayRef);  # get data\n\n# re-write sql with parameter place holders\n$sql = qq~\n         SELECT ps.parmId\n         FROM table1 ps\n            JOIN table3 pd ON pd.parmId = ps.parmId\n         WHERE ps.testOccurId = ?\n            AND pd.requiredForPass = 1\n         UNION\n         SELECT ps.parmId\n         FROM table2 ps\n            JOIN table3 pd ON pd.parmId = ps.parmId\n         WHERE ps.testOccurId = ?\n            AND pd.requiredForPass = 1\n         ORDER BY ps.parmId\n    ~;\nmy $sth = $dbh-&gt;prepare($sql);\n\n$sth-&gt;bind_param(1, $Id);\n$sth-&gt;bind_param(2, $Id);\n# throws SQL error because parameters are not bound to statement.\n$arrayRef = $dbh-&gt;selectall_arrayref($sth);\n# also does not work if we do the following:\n# $arrayRef = $dbh-&gt;selectall_arrayref($sth, undef, $Id, $Id);\n# we crash here and the rest does not get run.\nprint dump($arrayRef);\n\nexit 0;\n</code></pre>\n\n<p>The error I receive is the following:</p>\n\n<blockquote>\n  <p>DBD::ODBC::db selectall_arrayref failed: [Microsoft][ODBC SQL Server\n  Driver]Numeric value out of range (SQL-22003) [for Statement \"\n           SELECT ps.parmId\n           FROM table1 ps\n              JOIN table3 pd ON pd.parmId = ps.parmId\n           WHERE ps.testOccurId = ?\n                  AND pd.requiredForPass = 1\n           UNION\n           SELECT ps.parmId\n           FROM table2 ps\n              JOIN table3 pd ON pd.parmId = ps.parmId\n           WHERE ps.testOccurId = ?\n                  AND pd.requiredForPass = 1\n           ORDER BY ps.parmId\n          \"] at bindParametersTest.pl line 56. ]</p>\n</blockquote>\n\n<p>I suspect that SQL Server says '?' is out of range of the int column we are querying against (because, technically, it is) - hence the error.  Also, because the same value works fine in the first sql where I have included it previous to running it.</p>\n\n<p>I have been pouring over the documentation and I can't what I'm doing wrong.   I'm hoping another set of eyes can point out my stupid mistake.</p>\n\n<p>Thanks in advance for your help.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>So I tried this code after the parameter bindings:</p>\n\n<pre><code>$sth-&gt;execute();\n$arrayRef = $sth-&gt;fetchall_arrayref();\n</code></pre>\n\n<p>it produces this error, which shows the parameters: </p>\n\n<blockquote>\n  <p>DBD::ODBC::st execute failed: [Microsoft][ODBC SQL Server\n  Driver]Numeric value out of range (SQL-22003) [for Statement \"\n           SELECT ps.parmId\n           FROM table1 ps\n              JOIN table3 pd ON pd.parmId = ps.parmId\n           WHERE ps.testOccurId = ?\n                  AND pd.requiredForPass = 1\n           UNION\n           SELECT ps.parmId\n           FROM table1 ps\n              JOIN table3 pd ON pd.parmId = ps.parmId\n           WHERE ps.testOccurId = ?\n                  AND pd.requiredForPass = 1\n           ORDER BY ps.parmId\n          \" with ParamValues: 1=586058, 2=586058] at bindParametersTest.pl line 59.</p>\n</blockquote>\n\n<p>I cannot figure out why the query fails only if we bind the parameters... </p>\n"}, {"tags": ["python", "linux", "perl", "sorting", "awk"], "comments": [{"owner": {"reputation": 812, "user_id": 2809449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1c1cd381b8be336e6749dbf1c6a765?s=128&d=identicon&r=PG&f=1", "display_name": "Aimee Borda", "link": "https://stackoverflow.com/users/2809449/aimee-borda"}, "edited": false, "score": 1, "creation_date": 1489593437, "post_id": 42814746, "comment_id": 72741826, "body": "This can be be done by string formatting as explained in <a href=\"http://stackoverflow.com/questions/6913532/display-a-decimal-in-scientific-notation\" title=\"display a decimal in scientific notation\">stackoverflow.com/questions/6913532/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "edited": false, "score": 0, "creation_date": 1489595014, "post_id": 42814847, "comment_id": 72742965, "body": "<code>%g</code> and <code>%G</code> are simplifiers of the scientific notation floats <code>%e</code> and <code>%E</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7716195, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1ea5996bf6a1228ece82a65f37061315?s=128&d=identicon&r=PG", "display_name": "Asive", "link": "https://stackoverflow.com/users/7716195/asive"}, "is_accepted": false, "score": 0, "last_activity_date": 1489594031, "last_edit_date": 1489594031, "creation_date": 1489593504, "answer_id": 42814847, "question_id": 42814746, "link": "https://stackoverflow.com/questions/42814746/how-change-a-number-to-scientific-number-and-get-the-minimum-value-scientific-n/42814847#42814847", "title": "How change a number to Scientific Number and get the minimum value (Scientific Number format)", "body": "<pre><code>print \"%.4g\" % 80085\n</code></pre>\n\n<p>Will output:</p>\n\n<pre><code>8.008e+04\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 1, "last_activity_date": 1489595056, "last_edit_date": 1489595056, "creation_date": 1489594047, "answer_id": 42815042, "question_id": 42814746, "link": "https://stackoverflow.com/questions/42814746/how-change-a-number-to-scientific-number-and-get-the-minimum-value-scientific-n/42815042#42815042", "title": "How change a number to Scientific Number and get the minimum value (Scientific Number format)", "body": "<p>If you need scientific notation you need to use the <code>%e</code> or <code>%E</code> format specifier</p>\n\n<p>Using <a href=\"/questions/tagged/awk\" class=\"post-tag\" title=\"show questions tagged &#39;awk&#39;\" rel=\"tag\">awk</a></p>\n\n<pre><code>awk 'BEGIN{printf(\"%.2E\\n\",0.000111309)}'\n1.11E-04\n</code></pre>\n\n<p>Using <a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a></p>\n\n<pre><code>akshay@db-3325:~$ python\nPython 2.7.12 (default, Nov 19 2016, 06:48:10) \n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import decimal\n&gt;&gt;&gt; '%.2E' % decimal.Decimal('0.000111309')\n'1.11E-04'\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Using <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a></p>\n\n<pre><code>akshay@db-3325:~$ perl -e 'printf(\"%.2E\\n\",0.000111309)'\n1.11E-04\n</code></pre>\n\n<p>Using <a href=\"/questions/tagged/bash\" class=\"post-tag\" title=\"show questions tagged &#39;bash&#39;\" rel=\"tag\">bash</a></p>\n\n<pre><code>akshay@db-3325:~$ printf \"%.2E\\n\" 0.000111309\n1.11E-04\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1489595024, "creation_date": 1489595024, "answer_id": 42815423, "question_id": 42814746, "link": "https://stackoverflow.com/questions/42814746/how-change-a-number-to-scientific-number-and-get-the-minimum-value-scientific-n/42815423#42815423", "title": "How change a number to Scientific Number and get the minimum value (Scientific Number format)", "body": "<p>bash can do it as well</p>\n\n<pre><code>$ printf \"%E\\n\" 0.000111309\n1.113090E-04\n</code></pre>\n\n<p>with rounding to two decimal digits</p>\n\n<pre><code>$ printf \"%.2E\\n\" 0.000111309\n1.11E-04\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6072399, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-Jk690Xvj8aU/AAAAAAAAAAI/AAAAAAAAAEk/h6xzIUP4rL4/photo.jpg?sz=128", "display_name": "hope", "link": "https://stackoverflow.com/users/6072399/hope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 1, "closed_date": 1489595609, "accepted_answer_id": 42815042, "answer_count": 3, "score": 1, "last_activity_date": 1489680141, "creation_date": 1489593209, "last_edit_date": 1489680141, "question_id": 42814746, "link": "https://stackoverflow.com/questions/42814746/how-change-a-number-to-scientific-number-and-get-the-minimum-value-scientific-n", "closed_reason": "Duplicate", "title": "How change a number to Scientific Number and get the minimum value (Scientific Number format)", "body": "<p>How change a number to scientific number in linux? </p>\n\n<p>Number</p>\n\n<pre><code>0.000111309\n</code></pre>\n\n<p>scientific number</p>\n\n<pre><code>1.11E-04\n</code></pre>\n\n<p>Used awk,python or perl. Thanks.</p>\n\n<p>And, how to get the minimum value from many Scientific Number in python? Just like <code>sort -g | sed -n '$p'</code> in bash.</p>\n\n<p>whether python can change automatically number to Scientific Number when print? \n I'm find the 0 will become to 0.000000e+00 when print.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1489587760, "post_id": 42811580, "comment_id": 72737117, "body": "<code>$str=~s&#47;\\(([^\\(\\)]*)\\:([^\\(\\)]*)\\)&#47;\\($2\\:$1\\)&#47;g;</code>"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1489588869, "post_id": 42811580, "comment_id": 72738019, "body": "<code>perl -pi -e &#39;s&#47;\\(([^(]*):([^)]*)\\)&#47;\\($2:$1\\)&#47;g&#39; input.txt</code> where input.txt is your file with these lines"}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 6141995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286dc92d926f7634f609ce9956543ecf?s=128&d=identicon&r=PG&f=1", "display_name": "karu", "link": "https://stackoverflow.com/users/6141995/karu"}, "edited": false, "score": 0, "creation_date": 1489588657, "post_id": 42812536, "comment_id": 72737841, "body": "use File::Slurp; $str= read_file(&#39;test.ptb&#39;); $str=~s/&#40;([^&#40;&#41;]*)\\:([^&#40;&#41;]*)&#41;/&#40;$2&zwnj;&#8203;\\:$1&#41;/g;  print &quot; $str\\n&quot;"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 1, "last_activity_date": 1489587872, "creation_date": 1489587872, "answer_id": 42812536, "question_id": 42811580, "link": "https://stackoverflow.com/questions/42811580/reordering-text-inside-the-brackets/42812536#42812536", "title": "Reordering text inside the brackets", "body": "<p>If I understood correct on your question simple regex can replace the suffix and prefix.</p>\n\n<pre><code>my $str =\"(S (un:prefix) (sold:stem))\n(S (S (in:prefix) (decipher:stem)) (able:suffix)) \";\n\n$str=~s/\\(([^\\(\\)]*)\\:([^\\(\\)]*)\\)/\\($2\\:$1\\)/g;\n\nprint \"$str\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(S (prefix:un) (stem:sold))\n(S (S (prefix:in) (stem:decipher)) (suffix:able))\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 6141995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286dc92d926f7634f609ce9956543ecf?s=128&d=identicon&r=PG&f=1", "display_name": "karu", "link": "https://stackoverflow.com/users/6141995/karu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 42812536, "answer_count": 1, "score": 0, "last_activity_date": 1489587879, "creation_date": 1489585419, "last_edit_date": 1489587879, "question_id": 42811580, "link": "https://stackoverflow.com/questions/42811580/reordering-text-inside-the-brackets", "title": "Reordering text inside the brackets", "body": "<p>I have morphological parse tree in following way, where prefix, stem and suffix are labels and  other part is the changing I need to re order the in a way that prefix, stem  and suffix at beginning. For instance, \n <code>(S (un:prefix) (sold:stem))</code> needs to be converted to    <code>(S (prefix:un) (stem:sold))</code>. Similarly, <code>(S (S (in:prefix) (decipher:stem)) (able:suffix))</code> to <code>(S (S (prefix:in) (stem:decipher)) (suffix:able))</code>. <strong>It is also important keep the structure also.</strong> </p>\n\n<p>My perl code also: </p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'reduce';\n\nwhile ( &lt;&gt; ) {\n\n    my ($word, $ss) = / \\( ( [^()]* ) \\) /gx;\n\n    my @ss = split ' ', $ss;\n\n    my $str = reduce { sprintf 'S (%s) (%s)', $a, $b } @ss;\n\n    printf \"%s (%s)\\n\", $str, $word;\n}\n</code></pre>\n\n<p>It doesn't do the intended task. What is the problem there ?</p>\n"}, {"tags": ["python", "perl", "regex-group"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 1, "creation_date": 1489583095, "post_id": 42810463, "comment_id": 72733314, "body": "A quick documentation grep shows that <code>(?|...)</code> is supported by the <a href=\"https://pypi.python.org/pypi/regex/\" rel=\"nofollow noreferrer\">regex module</a> but not by the <a href=\"https://docs.python.org/2/library/re.html\" rel=\"nofollow noreferrer\">re module</a>. I&#39;ll give you an upvote since I should have thought of this! :-)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 7, "last_activity_date": 1489582636, "creation_date": 1489582636, "answer_id": 42810463, "question_id": 42810217, "link": "https://stackoverflow.com/questions/42810217/python-equivalent-of-perl-aka-last-paren-match/42810463#42810463", "title": "Python equivalent of Perl $+ aka $LAST_PAREN_MATCH", "body": "<p>There may be no equivalent in Python, but if you use the <em>branch reset</em> pattern <code>(?|...)</code> then each alternation pipe <code>|</code> in the pattern will reset the counter for the capture variables. I'm pretty sure that will be supported in Python</p>\n\n<p>In this example, all capture groups are saved in <code>$1</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\n'zax' =~ /(?|(b)|(a)|(r))/;\n\nsay $1;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 0, "creation_date": 1489595819, "post_id": 42812947, "comment_id": 72743575, "body": "capturing the entire alternation into group 1 doesn&#39;t work if any of the alternatives may contain uncaptured substrings, e.g. <code>s&#47;\\\\(.)|(&quot;)&#47;\\\\$+&#47;g</code> to escape quotes in a string but leaving already escaped characters alone is trivial in Perl."}, {"owner": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 0, "creation_date": 1489596419, "post_id": 42812947, "comment_id": 72743970, "body": "Granted <code>re.sub(r&#39;(\\\\.)|&quot;&#39;,(lambda m: m.group(1) or r&#39;\\&quot;&#39;), ...)</code> will do the trick but it is a lot more to type. And note that negative lookbehind for a backslash won&#39;t work if the quote is preceded by an even number of backslashes!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 1, "creation_date": 1489611781, "post_id": 42812947, "comment_id": 72752997, "body": "To only escape quotes preceded by an even number of backslashes, use <code>((?&lt;!\\\\)(?:\\\\\\\\)*&quot;)</code>, e.g. <code>re.sub(r&#39;((?&lt;!\\\\)(?:\\\\\\\\)*&quot;)&#39;, r&#39;\\\\\\1&#39;, r&#39;\\\\&quot;&#39;)</code>. This is also much more efficient than <code>\\\\(.)|(&quot;)</code>."}, {"owner": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 0, "creation_date": 1489657692, "post_id": 42812947, "comment_id": 72770681, "body": "Yes that does indeed do the trick. Thanks. I&#39;ll update my question to actually include the quote escaping example and if you make this an answer I&#39;ll accept it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "edited": false, "score": 0, "creation_date": 1489679991, "post_id": 42812947, "comment_id": 72787237, "body": "@bpj That actually changes the question pretty significantly, so I rolled back your edit. It&#39;s best not to change questions after you&#39;ve gotten answers. Feel free to post a new question about your actual use-case if it&#39;s not a duplicate of an existing question, and in the future, beware of the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1489593609, "last_edit_date": 1489593609, "creation_date": 1489588955, "answer_id": 42812947, "question_id": 42810217, "link": "https://stackoverflow.com/questions/42810217/python-equivalent-of-perl-aka-last-paren-match/42812947#42812947", "title": "Python equivalent of Perl $+ aka $LAST_PAREN_MATCH", "body": "<p>You can use the MatchObject's <a href=\"https://docs.python.org/2/library/re.html#re.MatchObject.lastindex\" rel=\"nofollow noreferrer\"><code>lastindex</code></a> attribute:</p>\n\n<blockquote>\n  <p>The integer index of the last matched capturing group, or <code>None</code> if no group was matched at all. For example, the expressions <code>(a)b</code>, <code>((a)(b))</code>, and <code>((ab))</code> will have <code>lastindex == 1</code> if applied to the string <code>'ab'</code>, while the expression <code>(a)(b)</code> will have <code>lastindex == 2</code>, if applied to the same string.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; m = re.match(r'(b)|(a)|(r)', 'abc')\n&gt;&gt;&gt; m.group(m.lastindex)\n'a'\n</code></pre>\n\n<p>Note that this is different from Perl's <code>$+</code> when you have nested capturing groups:</p>\n\n<pre><code>$ python -c'import re; m = re.match(r\"((a)(b))\", \"ab\"); print m.group(m.lastindex)'\nab\n$ perl -E'\"ab\" =~ /((a)(b))/; say $+'\nb\n</code></pre>\n\n<hr>\n\n<p>Personally, I would just capture the entire alternation instead of capturing each alternative separately:</p>\n\n<pre><code>&gt;&gt;&gt; m = re.match(r'(b|a|r)', 'abc')\n&gt;&gt;&gt; m.group(1)\n'a'\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1640286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3905b2f224a2a9bd4d6d40eeaf8142?s=128&d=identicon&r=PG", "display_name": "bpj", "link": "https://stackoverflow.com/users/1640286/bpj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1489679714, "creation_date": 1489582035, "last_edit_date": 1489679714, "question_id": 42810217, "link": "https://stackoverflow.com/questions/42810217/python-equivalent-of-perl-aka-last-paren-match", "title": "Python equivalent of Perl $+ aka $LAST_PAREN_MATCH", "body": "<p>(Apologies if this is a duplicate, but it is impossible to google/search <code>$+</code>!)</p>\n\n<p>I'm looking for the nearest/best equivalent to Perl's <code>$+</code> aka <code>$LAST_PAREN_MATCH</code>.</p>\n\n<p>For those who don't know Perl it is described like this:</p>\n\n<pre><code>$LAST_PAREN_MATCH\n$+      The text matched by the last bracket of the last successful search\n        pattern. This is useful if you don't know which one of a set of\n        alternative patterns matched.\n</code></pre>\n\n<p>That is if I have a pattern like <code>(b)|(a)|(r)</code> then <code>$+</code> will contain either <code>b</code>, <code>a</code> or <code>r</code> depending on which subpattern matched.</p>\n\n<p>The best that I have is</p>\n\n<pre><code>next((g for g in reversed(match.groups(None)) if g is not None),None)[0]\n</code></pre>\n\n<p>Which seems like a lot of code for a simple thing to a longtime Perl hacker.\n(Not that I'm unaware that I could wrap it in a function <code>last_paren_match(match)</code> :-)</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 0, "creation_date": 1489581039, "post_id": 42809714, "comment_id": 72731758, "body": "Non-nested: <code>A(?![^{}]*\\})</code> - check that the next bracket after A (if any) is not a closing one. Now let me look for a good dupe."}, {"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 0, "creation_date": 1489581229, "post_id": 42809714, "comment_id": 72731893, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14032016/regular-expression-match-characters-outside-curly-braces\">Regular Expression, match characters outside curly braces { }</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489583073, "post_id": 42809714, "comment_id": 72733299, "body": "<i>&quot;a solution working also for the nested case would be better&quot;</i> Why, if your data doesn&#39;t have nested braces? A non-nested solution is straightforward, but a recursive pattern is necessary for nested braces."}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1489583473, "post_id": 42809714, "comment_id": 72733643, "body": "@NicolasMalebranche: would you please clarify does your statement <i>&quot;I want to replace a character A by another character B, if it is not contained in a pair of opening and closing brackets.&quot;</i> actually means <i>&quot;if the replacement value B is inside the the braces then you don&#39;t replace A by B anywhere&quot;</i>?"}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1489583849, "post_id": 42809714, "comment_id": 72733910, "body": "@NicolasMalebranche: what is the expected result of the <code>ABCDACD{ABCDA}ABCD</code> input string (please notice the <code>B</code> inside the brackets)? Should it be <code>BBCDBCD{ABCDA}BBCD</code> (all <code>A</code>s outside brackets replaced) or <code>ABCDACD{ABCDA}ABCD</code> (the original string unchanged)?"}], "answers": [{"comments": [{"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1489583051, "post_id": 42810111, "comment_id": 72733278, "body": "Your regex is wrong , if B is inside the curly brace then it fails <a href=\"https://ideone.com/kPFT0G\" rel=\"nofollow noreferrer\">ideone.com/kPFT0G</a>"}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "reply_to_user": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1489583248, "post_id": 42810111, "comment_id": 72733450, "body": "@RizwanM.Tuman, The output in your link is <code>BBCDBCD{ABCDA}BBCD</code>. What exactly is wrong there?"}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1489583313, "post_id": 42810111, "comment_id": 72733507, "body": "Op wrote : &quot; I want to replace a character A by another character B, if it is not contained in a pair of opening and closing brackets.&quot; which means if the replacement value B is inside the the braces then you don&#39;t replace A by B anywhere"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 2, "creation_date": 1489583467, "post_id": 42810111, "comment_id": 72733637, "body": "@RizwanM.Tuman: I think you misunderstood, OP wants to replace <code>A</code> by <code>B</code> when <code>A</code> is not inside curlybrackets"}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1489584127, "post_id": 42810111, "comment_id": 72734124, "body": "So, I deleted the answer... feel like fool for the misleading question and lack of sample i/o :|"}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 2, "last_activity_date": 1489582266, "last_edit_date": 1495542725, "creation_date": 1489581748, "answer_id": 42810111, "question_id": 42809714, "link": "https://stackoverflow.com/questions/42809714/substitute-character-not-enclosed-by-brackets/42810111#42810111", "title": "Substitute character not enclosed by brackets", "body": "<p>A similar <a href=\"https://stackoverflow.com/q/38696658/4295017\">question</a> has already been <a href=\"https://stackoverflow.com/a/38697800/4295017\">answered</a> before.</p>\n\n<p>Perl implementation will be different in substitution evaluation part but the <a href=\"http://www.rexegg.com/regex-best-trick.html\" rel=\"nofollow noreferrer\">main idea</a> is the same:</p>\n\n<p>Match undesired context (i.e. <code>{.*?}</code>) or desired substring (<code>A</code>) (in that particular order) using alternation capturing the matches. Then substitute the undesired capture with itself and the desired one with your replacement depending on which part has matched:</p>\n\n<pre><code>my $input = \"ABCDACD{ACDA}ABCD\";\n$input =~ s/({.*?})|(A)/{$2 ? \"B\" : $1}/ge;\n</code></pre>\n\n<p>Demo: <a href=\"https://ideone.com/bK4c1Y\" rel=\"nofollow noreferrer\">https://ideone.com/bK4c1Y</a></p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1489583716, "creation_date": 1489583716, "answer_id": 42810913, "question_id": 42809714, "link": "https://stackoverflow.com/questions/42809714/substitute-character-not-enclosed-by-brackets/42810913#42810913", "title": "Substitute character not enclosed by brackets", "body": "<p>Here is a Perl solution that does the job in steps. First it splits the string into chunks of braced/not braced items. Then does the substitution on the not-braced items, and finally puts the items back together again:</p>\n\n<pre><code>my $str = 'ABCDACD{ACDA}ABCD';\n$str = do {\n    my $i = 1; \n    join '', map {$i++ % 2 &amp;&amp; $_ =~ s/A/B/g; $_ } split /(\\{.*?\\})/, $str \n};\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 4564562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22c7f74a15c15cb4999a3947bcaeace?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Malebranche", "link": "https://stackoverflow.com/users/4564562/nicolas-malebranche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 42810111, "answer_count": 2, "score": 0, "last_activity_date": 1489583899, "creation_date": 1489580782, "last_edit_date": 1489583899, "question_id": 42809714, "link": "https://stackoverflow.com/questions/42809714/substitute-character-not-enclosed-by-brackets", "title": "Substitute character not enclosed by brackets", "body": "<p>I have a string containing curly brackets and I want to replace any character A, which is not contained in a pair of opening and closing brackets, by another character B. So </p>\n\n<blockquote>\n  <p>ABCDACD{ACDA}ABCD</p>\n</blockquote>\n\n<p>should be replaced by </p>\n\n<blockquote>\n  <p>BBCDBCD{ACDA}BBCD</p>\n</blockquote>\n\n<p>How can I do this with a regex (e.g. in Perl)? Brackets are not nested, but a solution working also for the nested case would be better.</p>\n\n<p><strong>EDIT:</strong> Changed wording</p>\n"}, {"tags": ["perl", "hash", "conventions"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489579859, "post_id": 42809028, "comment_id": 72730970, "body": "What&#39;s wrong with <code>keys</code> and <code>values</code>? Your code is already pretty simple."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489580224, "post_id": 42809028, "comment_id": 72731203, "body": "@ThisSuitIsBlackNot ...that&#39;s what I thought, but because <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow noreferrer\">push</a> opens a list context, I found this <b>misleading</b> due to the intended singleton character of the arguments."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489584374, "post_id": 42809028, "comment_id": 72734297, "body": "Nothing misleading about it, you can <code>push</code> single scalars just as well as multiple scalars: <code>push @foo, $bar</code>. I think you&#39;re over-thinking this."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489586162, "post_id": 42809028, "comment_id": 72735707, "body": "@ThisSuitIsBlackNot it&#39;s about readability and minimal confusion (&quot;self-documentation&quot;), that&#39;s why I prefer using small hashs to two-element arrays on caller side of <code>print_table</code>. Maybe my last comment was itself a bit confusing, it&#39;s the plural forms <code>keys</code> and <code>values</code> that I considered misleading."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 2, "creation_date": 1489586836, "post_id": 42809852, "comment_id": 72736329, "body": "@Wolf, No. Added caveat to answer."}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1489586480, "last_edit_date": 1489586480, "creation_date": 1489581124, "answer_id": 42809852, "question_id": 42809028, "link": "https://stackoverflow.com/questions/42809028/accessing-pair-hash-references-used-for-column-specification/42809852#42809852", "title": "accessing &quot;pair hash&quot; references used for column specification", "body": "<p>Use <code>each</code>.</p>\n\n<p>From <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\">perldoc</a>:</p>\n\n<blockquote>\n  <p>When called on a hash in list context, returns a 2-element list\n  consisting of the key and value for the next element of a hash.</p>\n</blockquote>\n\n<p>But don't forget to reset the iterator using <code>keys(%hash)</code> afterwards or subsequent <code>each</code> will fail.</p>\n\n<pre><code>my ($k, $v) = each(%$_);\nkeys(%$_);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489587043, "post_id": 42812017, "comment_id": 72736491, "body": "Great you bring this version (<code>my ($k, $v) = %hash;</code>). I meanwhile figured this out myself. And it looked so simple. It also teaches us a lesson about lists."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489587521, "post_id": 42812017, "comment_id": 72736889, "body": "BTW: would you consider these &quot;pair hashes&quot; normal or does they typically indicate bad solutions. ...and can you suggest a more idiomatic solution for this kind of replacement?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1489587613, "post_id": 42812017, "comment_id": 72736984, "body": "It&#39;s unusual, but not necessarily bad. An array (e.g. <code>[ x =&gt; &#39;u&#39; ]</code>) would be more convenient (<code>push @keys, $_-&gt;[0];</code>). Is it really that bad if the caller had to do <code>print_table(x=&gt;&#39;u&#39;, y=&gt;&#39;y&#39;)</code>?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489587753, "post_id": 42812017, "comment_id": 72737109, "body": "Ah I see, well this <a href=\"http://stackoverflow.com/a/42809337/2932052\">I already learned today</a>, but need to get used to it: <code>=&gt;</code> isn&#39;t restricted to hashes :-) Thanks a lot."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1489587529, "last_edit_date": 1489587529, "creation_date": 1489586508, "answer_id": 42812017, "question_id": 42809028, "link": "https://stackoverflow.com/questions/42809028/accessing-pair-hash-references-used-for-column-specification/42812017#42812017", "title": "accessing &quot;pair hash&quot; references used for column specification", "body": "<p>All you need:</p>\n\n<pre><code>my ($k, $v) = %hash;\n</code></pre>\n\n<p>So</p>\n\n<pre><code>my ($k, $v) = %$_;\npush @keys,     $k;\npush @captions, $v;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>push @keys,     ( %$_ )[0];\npush @captions, ( %$_ )[1];\n</code></pre>\n"}], "owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 42812017, "answer_count": 2, "score": 0, "last_activity_date": 1489587529, "creation_date": 1489578867, "question_id": 42809028, "link": "https://stackoverflow.com/questions/42809028/accessing-pair-hash-references-used-for-column-specification", "title": "accessing &quot;pair hash&quot; references used for column specification", "body": "<p>I'm building a small library that transforms log data into a CSV-like file that can be imported by spreadsheet software. For the output, I'm interested in an option to display human-friendly captions for the table columns if needed. This should be an option so that the tool can also be used with minimal effort. I came up with an array for column specification that contains plain scalars for keys or hash references with a pair of key and value. I'm accessing these via keys and values which looks a bit strange to me. </p>\n\n<p><strong>Is there a simpler way to access key and value of a hash that contains just a pair?</strong></p>\n\n<p>(I tried to simplify the code as much as possible.)</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\n# some sample data\nmy @rows = (\n    {x =&gt; 1, y =&gt; 2},\n    {y =&gt; 5, z =&gt; 6},\n    {x =&gt; 7, z =&gt; 9},\n);\n\nsub print_table {\n    my @columns = @_; # columns of interest with optional header replacement\n    my @keys; # for accessing the data values \n    my @captions; # for display on column headers\n    for (@columns) {\n        if (ref($_) eq 'HASH') {\n            push @keys, keys %$_;\n            push @captions, values %$_;\n        } else {\n            push @keys, $_;\n            push @captions, $_;\n        }\n    }\n    print join (\"\\t\", @captions), \"\\n\";\n    for my $row (@rows) {\n        print join (\"\\t\", (map {$row-&gt;{$_} // ''} @keys)), \"\\n\";\n    }\n}\n\nprint_table({x=&gt;'u'}, 'y');\n</code></pre>\n"}, {"tags": ["python", "perl", "xls", "xlsx"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1489576466, "post_id": 42808075, "comment_id": 72728669, "body": "(1) Too broad. (2) Don&#39;t make them submit proprietary file-formats would be better imho. (3) Handling all kind of mistakes is tedious and about to fail. I would probably give them an exact specification and some validation-script to run for correct syntax."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489577760, "post_id": 42808075, "comment_id": 72729482, "body": "In Perl, <a href=\"https://metacpan.org/pod/Test::Excel\" rel=\"nofollow noreferrer\">metacpan.org/pod/Test::Excel</a> might be something to look into. Besides that, I agree with Sascha. Don&#39;t use different formats. Accept one specification, if you still can. Make it a requirement that they use that exact format. If they submit early, you can let them know that they broke the format. If their submission doesn&#39;t parse, fail them. This way you are also teaching them that it is important to pay attention to details. It&#39;s a valuable skill to be able to work within a spec, and to make things consistent. I find that&#39;s also a skill many people in academia lack."}, {"owner": {"reputation": 585, "user_id": 4305114, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c86ea301f585cef75148bdb89db07779?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin", "link": "https://stackoverflow.com/users/4305114/constantin"}, "edited": false, "score": 0, "creation_date": 1489581675, "post_id": 42808075, "comment_id": 72732223, "body": "I agree that standardising the submission format is strictly the better option here; except for the fact that these are business school students who only know how to work with Excel. Besides, I&#39;ve already got their submissions as workbooks. They are reasonably uniform, but I just want to make them robust to tiny modifications (which is only the next step). What I am really asking is which language makes it easiest to compare cell values across two <code>.xls</code> and <code>.xlsx</code> files. In this sense it is not very broad at all."}, {"owner": {"reputation": 585, "user_id": 4305114, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c86ea301f585cef75148bdb89db07779?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin", "link": "https://stackoverflow.com/users/4305114/constantin"}, "edited": false, "score": 0, "creation_date": 1489581867, "post_id": 42808075, "comment_id": 72732373, "body": "I also made my question more precise. Looking for examples of languages that allow me to compare cells across workbooks is, IMHO, not opinion-based."}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 7166624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683f04a793873f768ede152642f2b926?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek Zygiel", "link": "https://stackoverflow.com/users/7166624/jacek-zygiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1489578141, "creation_date": 1489578141, "answer_id": 42808758, "question_id": 42808075, "link": "https://stackoverflow.com/questions/42808075/best-language-to-use-for-comparison-of-cell-values-across-excel-workbooks/42808758#42808758", "title": "Best language to use for comparison of cell values across Excel workbooks", "body": "<p>You can <strong>lock</strong> some areas in excel to make sure, that spreadsheet will have right format.</p>\n\n<p><a href=\"https://support.office.com/en-us/article/Lock-or-unlock-specific-areas-of-a-protected-worksheet-75481b72-db8a-4267-8c43-042a5f2cd93a\" rel=\"nofollow noreferrer\">Lock on unlock specific areas of a protected worksheet</a></p>\n\n<p>Python is good language for working with excel.</p>\n\n<p>There are different libraries intended to use with excel e.g.:</p>\n\n<ol>\n<li><a href=\"http://pandas.pydata.org/\" rel=\"nofollow noreferrer\">Pandas</a></li>\n<li><a href=\"https://openpyxl.readthedocs.org/\" rel=\"nofollow noreferrer\">openpyxl</a></li>\n<li><a href=\"https://xlsxwriter.readthedocs.io/\" rel=\"nofollow noreferrer\">xlsxwriter</a></li>\n<li><a href=\"http://xlrd.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">xlrd</a></li>\n<li><a href=\"http://xlwt.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">xlwt</a></li>\n<li><a href=\"http://xlutils.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">xlutils</a></li>\n</ol>\n"}], "owner": {"reputation": 585, "user_id": 4305114, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c86ea301f585cef75148bdb89db07779?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin", "link": "https://stackoverflow.com/users/4305114/constantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1489578988, "answer_count": 1, "score": -2, "last_activity_date": 1489581759, "creation_date": 1489576228, "last_edit_date": 1489581759, "question_id": 42808075, "link": "https://stackoverflow.com/questions/42808075/best-language-to-use-for-comparison-of-cell-values-across-excel-workbooks", "closed_reason": "Opinion-based", "title": "Best language to use for comparison of cell values across Excel workbooks", "body": "<p>I would like to automate the process of grading student submissions that are <code>.xls</code> or <code>.xlsx</code> files. Specifically, I would like to compare the content of specific cells in one workbook to the content of corresponding cells in another.</p>\n\n<p>I have worked with VBA in the past and found it to be a bit of a pain. I'm open to using other languages (Matlab, Python, Perl, etc.) and was wondering which language is most suited to this kind of task. (I'm assuming it's not Matlab.) </p>\n\n<p>Thank you for any ideas as to which languages can be used for this kind of cell-to-cell comparison.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6049033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e10beb4cc828c748fc21ff9f928f5493?s=128&d=identicon&r=PG&f=1", "display_name": "LucaZ", "link": "https://stackoverflow.com/users/6049033/lucaz"}, "edited": false, "score": 0, "creation_date": 1489569495, "post_id": 42805317, "comment_id": 72723663, "body": "It worked like a charm thank you!! i didn&#39;t know about the <code>e</code> flag - now it all makes sense :D"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489594638, "post_id": 42805317, "comment_id": 72742701, "body": "Alt: <code>perl -pe&#39;$c=0; s&#47;{\\K(?=})&#47;$c++&#47;ge&#39; text.properties</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1489569926, "last_edit_date": 1489569926, "creation_date": 1489568937, "answer_id": 42805317, "question_id": 42805039, "link": "https://stackoverflow.com/questions/42805039/count-substitutes-per-line/42805317#42805317", "title": "Count substitutes per line", "body": "<p>The thing you need here, is the <code>e</code> flag to a pattern substitute. This says 'evaluate' and lets you use code expressions in regex replacements. Like <code>$count++</code> for example :)</p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) {\n   my $count = 0; \n   s/{}/\"{\".$count++.\"}\"/ge;\n   print\n}\n\n__DATA__\nfoobar {} foo{} bar{} foobar{}{}\nfoo {} foodfg{} bar{} foogfdbar{}\nline without brackets\nfoobdgar {} fdfgoo{} bga foodfbar{}{}\nfdfgoobar {} fdfoo dbar{} fooddbar\n</code></pre>\n\n<p>Seems to do what you want. </p>\n\n<p>To simpify this down:</p>\n\n<pre><code>perl -pe '$c=0; s/{}/\"{\".$c++.\"}\"/ge' text.properties\n</code></pre>\n\n<p>Note the <code>-p</code> flag to perl - it wraps your code in a loop, such that it works a lot like 'sed' would (e.g. <code>while ( &lt;&gt; ) {</code> and <code>print</code> each line as you go) which is what you're trying to do in your example 'by hand'. </p>\n\n<p>You could, if you were so inclined also use the <code>-i</code> flag for in place editing. </p>\n\n<p>I would also note - <code>cat | awk</code> or <code>perl</code> is redundant - both take file arguments when executing things. </p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 6049033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e10beb4cc828c748fc21ff9f928f5493?s=128&d=identicon&r=PG&f=1", "display_name": "LucaZ", "link": "https://stackoverflow.com/users/6049033/lucaz"}, "edited": false, "score": 0, "creation_date": 1489570064, "post_id": 42805454, "comment_id": 72724054, "body": "this prints {1} at the end of every line   and doesnt start at {0}  -  otherwise i like the FS approach"}], "tags": [], "owner": {"reputation": 2566, "user_id": 2940881, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lz0ZZ.png?s=128&g=1", "display_name": "Frank-Rene Sch&#228;fer", "link": "https://stackoverflow.com/users/2940881/frank-rene-sch%c3%a4fer"}, "is_accepted": false, "score": 2, "last_activity_date": 1489572884, "last_edit_date": 1489572884, "creation_date": 1489569408, "answer_id": 42805454, "question_id": 42805039, "link": "https://stackoverflow.com/questions/42805039/count-substitutes-per-line/42805454#42805454", "title": "Count substitutes per line", "body": "<p>FS = field seperator.</p>\n\n<p>NF = Number of fields that has been built splitting the line.</p>\n\n<p>'printf' is like the C-Standard function.</p>\n\n<pre><code>cat test.properties | awk 'BEGIN{ FS=\"{}\" }{ for(i=1;i&lt;NF;++i) { printf \"%s{%i}\", $i, i-1; } printf \"\\n\"; }'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1489569439, "creation_date": 1489569439, "answer_id": 42805462, "question_id": 42805039, "link": "https://stackoverflow.com/questions/42805039/count-substitutes-per-line/42805462#42805462", "title": "Count substitutes per line", "body": "<p>In awk:</p>\n\n<pre><code>$ awk '{i=0; while(sub(/{}/,\"{\" i++ \"}\"));}1' file\nfoobar {0} foo{1} bar{2} foobar{3}{4}\nfoo {0} foodfg{1} bar{2} foogfdbar{3}\nline without brackets\nfoobdgar {0} fdfgoo{1} bga foodfbar{2}{3}\nfdfgoobar {0} fdfoo dbar{1} fooddbar\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>{\n    i=0                            # initialize i to 0\n    while(sub(/{}/,\"{\" i++ \"}\"));  # while replacing with increasing i do nothing else\n} 1                                # implicit print\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6049033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e10beb4cc828c748fc21ff9f928f5493?s=128&d=identicon&r=PG&f=1", "display_name": "LucaZ", "link": "https://stackoverflow.com/users/6049033/lucaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 42805317, "answer_count": 3, "score": 0, "last_activity_date": 1489572884, "creation_date": 1489568170, "last_edit_date": 1489569125, "question_id": 42805039, "link": "https://stackoverflow.com/questions/42805039/count-substitutes-per-line", "title": "Count substitutes per line", "body": "<p>I have a (BIG) file containing lines like:</p>\n\n<pre><code>foobar {} foo{} bar{} foobar{}{}\nfoo {} foodfg{} bar{} foogfdbar{}\nline without brackets\nfoobdgar {} fdfgoo{} bga foodfbar{}{}\nfdfgoobar {} fdfoo dbar{} fooddbar\n</code></pre>\n\n<p>now I want to replace every {} with {$MATCH_COUNT} <strong>for each line seperately</strong><br>\nMeaning the output should look like this:</p>\n\n<pre><code>foobar {0} foo{1} bar{2} foobar{3}{4}\nfoo {0} foodfg{1} bar{2} foogfdbar{3}\nline without brackets\nfoobdgar {0} fdfgoo{1} bga foodfbar{2}{3}\nfdfgoobar {0} fdfoo dbar{1} fooddbar\n</code></pre>\n\n<p>How can I do this in perl or awk? I am not an expert in these languages so I would highly appreciate it if you could explain shortly what the code is doing.</p>\n\n<p>My solutions so far that do not work like I intended:</p>\n\n<p>Perl:   </p>\n\n<pre><code>cat test.properties | perl -e 'while(&lt;&gt;){ $c=0; while(/{}/g){print \"{$c}\"; $c++} print \"\\n\"}'\n</code></pre>\n\n<p>(replaces it like i want but doesn't keep the unmatched stuff)</p>\n\n<p>Awk:  </p>\n\n<pre><code>cat test.properties | awk '{ print \"{\" gsub(/{}/, \"\") \"}\" }'  \n</code></pre>\n\n<p>(replaces every line with a complete count - not what I want)</p>\n"}, {"tags": ["perl", "parallel-processing", "fork"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489569245, "post_id": 42804969, "comment_id": 72723495, "body": "Sounds like you&#39;re rolling your own <code>crond</code>. Anyway, do you need the STDOUT in the program at all? You can overwrite it permanently, or you could capture it."}, {"owner": {"reputation": 47, "user_id": 7378470, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-3SbYm7bg5l0/AAAAAAAAAAI/AAAAAAAAACI/0Di7DIZW8ag/photo.jpg?sz=128", "display_name": "Mohan Raj", "link": "https://stackoverflow.com/users/7378470/mohan-raj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489569948, "post_id": 42804969, "comment_id": 72723962, "body": "Not Exactly but Similar to cron :). I am ok without STDOUT, only I need STDERR in case of any issues in the Commands executed."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489587301, "post_id": 42805731, "comment_id": 72736684, "body": "That <code>select</code> approach won&#39;t work. The child has no idea of the internals of its Perl parent."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489587423, "post_id": 42805731, "comment_id": 72736805, "body": "None of the solutions redirect STDERR!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489589564, "post_id": 42805731, "comment_id": 72738593, "body": "@ikegami that is the point. OP said that in a comment. They want to write STDOUT to a file, and keep STDERR."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489589739, "post_id": 42805731, "comment_id": 72738732, "body": "They said the main program needs STDERR unredirected (in that comment), but they also said the children needs STDERR redirected (in the question)."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1489571418, "last_edit_date": 1489571418, "creation_date": 1489570204, "answer_id": 42805731, "question_id": 42804969, "link": "https://stackoverflow.com/questions/42804969/how-to-redirect-parallelforkmanager-and-execs-stdout-to-file/42805731#42805731", "title": "How to redirect Parallel::ForkManager and Exec&#39;s STDOUT to file", "body": "<p>As usual in Perl, there are a couple of ways you can achieve this. You haven't said what exact output you want to send to files, or if you need the real <code>STDOUT</code> at all. Let's explore your options.</p>\n\n<h2>You never need <code>STDOUT</code> anywhere in your program</h2>\n\n<p>If your main program as well as all the workers never should print anything to <code>STDOUT</code>, you could just run it with an output redirection. That enables you to do debugging on <code>STDOUT</code> during development, and to write to a file in production.</p>\n\n<p>Simply start your program with <code>&gt;output.log</code> attached to the command. The output of all forks will also go to the file. <code>STDERR</code> will remain intact.</p>\n\n<pre><code>$ perl forker.pl &gt;output.log\n</code></pre>\n\n<p>This should be the preferred way if you want all output to go to a file.</p>\n\n<p>Alternatively, you can implement this in Perl. That would make you lose the ability to debug on the console, and you would always have to look at the file. Use <a href=\"http://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\"><code>select</code></a> to change <code>print</code>'s default handle. Be sure to use append-mode <code>&gt;&gt;</code> for the new handle.</p>\n\n<pre><code>open my $fh, '&gt;&gt;', 'output.log' or die $!;\nselect $fh;\n\nmy $forkMgr = Parallel::FormManager-&gt;new(15);\n# ...\n</code></pre>\n\n<p>Now all output will also go to the file. <a href=\"http://perltricks.com/article/45/2013/10/27/How-to-redirect-and-restore-STDOUT/\" rel=\"nofollow noreferrer\">See this blog post</a> for more info on how this works, and how to restore the original <code>STDOUT</code>.</p>\n\n<h2>Catpure <code>STDOUT</code></h2>\n\n<p><a href=\"http://p3rl.org/Catpure::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a> is great to grab the <code>STDOUT</code> of things. You could use that to wrap the <code>exec</code>.</p>\n\n<pre><code>use Capture::Tiny 'capture_stdout';\n\n# ...\n\nmy $stdout = capture_stdout {\n    exec($cmd);\n}\n</code></pre>\n\n<p>Now you can write it to a file.</p>\n\n<h2>Use a logger</h2>\n\n<p><a href=\"https://metacpan.org/pod/Log::Log4perl\" rel=\"nofollow noreferrer\">Log::Log4Perl</a> is the go-to module for advanced logging. You should be able to tell it to not only grab everything from <code>STDERR</code>, but also from <code>STDOUT</code>. I've not researched this, but it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1489587109, "creation_date": 1489587109, "answer_id": 42812237, "question_id": 42804969, "link": "https://stackoverflow.com/questions/42804969/how-to-redirect-parallelforkmanager-and-execs-stdout-to-file/42812237#42812237", "title": "How to redirect Parallel::ForkManager and Exec&#39;s STDOUT to file", "body": "<p>To redirect all output from the whole program and its children:</p>\n\n<pre><code>main_program &gt;log 2&gt;&amp;1\n</code></pre>\n\n<hr>\n\n<p>To only redirect the output of the children:</p>\n\n<pre><code>if (is_time_elapsed($cmd)) {\n    $forkMgr-&gt;start($cmd)\n       and next;\n    open(STDOUT, '&gt;&gt;', 'log')\n       or die(\"open: $!\");\n    open(STDERR, '&gt;&gt;&amp;', \\*STDOUT)\n       or die(\"open: $!\");\n    exec(\"$cmd\")\n       or die(\"exec: $!\");\n}\n</code></pre>\n\n<p>You could even redirect the output of each child to a different file if you so desired.</p>\n\n<hr>\n\n<p>Note: I got rid of the <code>$forkMgr-&gt;finish</code>. It was never reached (and that's fine).</p>\n"}], "owner": {"reputation": 47, "user_id": 7378470, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-3SbYm7bg5l0/AAAAAAAAAAI/AAAAAAAAACI/0Di7DIZW8ag/photo.jpg?sz=128", "display_name": "Mohan Raj", "link": "https://stackoverflow.com/users/7378470/mohan-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 42812237, "answer_count": 2, "score": 0, "last_activity_date": 1489587109, "creation_date": 1489567901, "question_id": 42804969, "link": "https://stackoverflow.com/questions/42804969/how-to-redirect-parallelforkmanager-and-execs-stdout-to-file", "title": "How to redirect Parallel::ForkManager and Exec&#39;s STDOUT to file", "body": "<p>I am trying to run multiple commands using Perl Parallel:ForkManager. I want these commands to run at different time period. I am using an subroutine is_time_elapsed to check is it time to run the command. If the subroutine returns 0, then i am running the command using parallel fork manager. Command is getting executed but i am seeing the the STDOUT in the screen. Rather i want to redirect STDOUT and STDERR in to a file.How can i prevent the STDOUT from seeing in the screen and redirected to file</p>\n\n<p>My requirement is to run the commands in background after the time is elapsed . I need to log the execution time when the command completed executing.This script will be a master script which will run infinitely and run the commands when the time is elapsed. Is there any other modules to achieve this other than Parallel::ForkManager. </p>\n\n<pre><code>my $forkMgr = Parallel::ForkManager-&gt;new(15);\n$forkMgr-&gt;run_on_finish(\n    sub {\n        ($pid, $exitCode, $ident) = @_;\n        print \"Ended ==&gt; $ident\\n\";\n    }\n);\n\nwhile (1) {\n    foreach my $cmd (@commands) {\n        if (is_time_elapsed($cmd)) {\n            $forkMgr-&gt;start($cmd)\n               and next;\n            exec(\"$cmd\")\n               or die(\"exec: $!\");\n            $forkMgr-&gt;finish;\n        }\n    }\n    sleep 30\n}\n</code></pre>\n"}, {"tags": ["perl", "email", "mime-types"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489571961, "post_id": 42800574, "comment_id": 72725388, "body": "Well if you manually decode the message body part at the bottom, you get proper output. That&#39;s a good start."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1489593508, "post_id": 42806492, "comment_id": 72741901, "body": "I&#39;ve realized now I can&#39;t figure out how to process the $sub_part-&gt;body. Is this an array? Can I use join() or push() to process it line-by-line?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 1, "creation_date": 1489596402, "post_id": 42806492, "comment_id": 72743961, "body": "@AlexRegan I don&#39;t know. I&#39;ve never used it myself. <a href=\"https://metacpan.org/pod/Email::MIME#body\" rel=\"nofollow noreferrer\">metacpan.org/pod/Email::MIME#body</a> says it&#39;s a byte string. It should be the full message, but in bytes. You might need to decode it. For your example, the correct text comes out."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1489575991, "last_edit_date": 1489575991, "creation_date": 1489572293, "answer_id": 42806492, "question_id": 42800574, "link": "https://stackoverflow.com/questions/42800574/parsing-email-with-emailmime-and-multipart-signed/42806492#42806492", "title": "Parsing email with Email::MIME and multipart/signed", "body": "<p>The documentation of Email::MIME suggests <a href=\"https://metacpan.org/pod/Email::MIME#parts\" rel=\"nofollow noreferrer\">not to use <code>parts</code></a>, because <em>it's a stupid method</em>. It returns its own object if there are no parts. That is weird.</p>\n\n<p>Instead use the <a href=\"https://metacpan.org/pod/Email::MIME#subparts\" rel=\"nofollow noreferrer\"><code>subparts</code> method</a> to get the parts of the email. Then use it again to iterate all parts of that part. If there are any, it will go in. Print the <code>body</code> of that sub part and you're done.</p>\n\n<pre><code>foreach my $part ( $msg-&gt;subparts ) {\n    foreach my $sub_part ($part-&gt;subparts) {\n            print $sub_part-&gt;body;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 42806492, "answer_count": 1, "score": 4, "last_activity_date": 1489575991, "creation_date": 1489548390, "question_id": 42800574, "link": "https://stackoverflow.com/questions/42800574/parsing-email-with-emailmime-and-multipart-signed", "title": "Parsing email with Email::MIME and multipart/signed", "body": "<p>I'm a perl novice trying to figure out how to decode a MIME-encoded email with multiple parts. I'm not sure of conventions, so I'll just include the pieces of the email that I believe are relevant:</p>\n\n<pre><code> Content-Type: multipart/mixed; boundary=\"===============3385789078715843912==\"\n Mime-Version: 1.0\n\n --===============3385789078715843912==\n Content-Type: multipart/signed; micalg=\"pgp-sha256\";\n     protocol=\"application/pgp-signature\"; boundary=\"=-0+dmFxz+BsFOEAAxvudu\"\n\n\n --=-0+dmFxz+BsFOEAAxvudu\n Content-Type: text/plain; charset=\"UTF-8\"\n Content-Transfer-Encoding: base64\n\n PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\n PT09PT09PT09PT09PT09PT0KVWJ1bnR1IFNlY3VyaXR5IE5vdGljZSBVU04tMzIxMC0xCkZlYnJ1\n YXJ5IDIzLCAyMDE3CgpMaWJyZU9mZmljZSB2dWxuZXJhYmlsaXR5Cj09PT09PT09PT09PT09PT09\n PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\n CgpBIHNlY3VyaXR5IGlzc3VlIGFmZmVjdHMgdGhlc2UgcmVsZWFzZXMgb2YgVWJ1bnR1IGFuZCBp\n dHMgZGVyaXZhdGl2ZXM6CgotIFVidW50dSAxNi4wNCBMVFMKLSBVYnVudHUgMTQuMDQgTFRTCi0g\n</code></pre>\n\n<p>I've got the following bit of code:</p>\n\n<pre><code>  my $msg = Email::MIME-&gt;new($buf);\n\n  for my $part ($msg-&gt;parts) {\n      if ($part-&gt;content_type =~ m!multipart/mixed!\n              or $part-&gt;content_type eq '' )\n          {   \n              print \"Found Multipart\";\n              for my $subpart ($part-&gt;parts) {\n                  print $subpart-&gt;body;\n             }\n      }\n  }\n</code></pre>\n\n<p>I really don't know what to do next. I've had a dozen different variations on this, and haven't gotten any closer after four hours of working on it. I'd appreciate if someone could help me identify the proper perl modules and functions to be used to read this text sub-part of a signed email.</p>\n"}, {"tags": ["arrays", "perl", "file"], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489537160, "post_id": 42798852, "comment_id": 72712371, "body": "++ because this does work, but it&#39;s much better to check for file existence before trying an <code>open()</code> if you specifically know the file may not exist."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1489592785, "post_id": 42798852, "comment_id": 72741272, "body": "@stevieb No, checking for the existence of the file is worse because it creates a race condition. Much better to drop <code>$flag</code>, and use <code>if ( open my $fh, &#39;&lt;&#39;, $filename ) { ...; close $fh or die &quot;...&quot; }</code>"}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1489610378, "post_id": 42798852, "comment_id": 72752209, "body": "@cur4so - thank you for your help. Your code is what I wanted to find."}], "tags": [], "owner": {"reputation": 1632, "user_id": 1072222, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e25a242e4a1ca113d0fad40e1ba611d6?s=128&d=identicon&r=PG", "display_name": "cur4so", "link": "https://stackoverflow.com/users/1072222/cur4so"}, "is_accepted": true, "score": 2, "last_activity_date": 1489536476, "creation_date": 1489536476, "answer_id": 42798852, "question_id": 42798744, "link": "https://stackoverflow.com/questions/42798744/perl-reading-a-file/42798852#42798852", "title": "Perl - reading a file", "body": "<p>you have to check that your flag is still 1</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\n\nmy $flag=1;\nmy $filename=\"test.txt\";\n\nopen ( my $fh, '&lt;', $filename ) or $flag=0;\nif ($flag == 1){\n    chomp ( my @input = &lt;$fh&gt; );\n    close ( $fh );\n}\nprint $flag;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 4, "last_activity_date": 1489537310, "last_edit_date": 1489537310, "creation_date": 1489536993, "answer_id": 42798937, "question_id": 42798744, "link": "https://stackoverflow.com/questions/42798744/perl-reading-a-file/42798937#42798937", "title": "Perl - reading a file", "body": "<p>You would typically use the <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">file test operator</a>, generalized as <code>-X</code>, to see if the file exists before attempting to open it:</p>\n\n<pre><code>if (-e $filename) {\n    open(my $fh, '&lt;', $filename) or die $!;\n    # ...\n}\n</code></pre>\n\n<p><code>-e</code> might be too broad of a test for your needs; it will return true for plain files, directories, symlinks, etc. If you want to limit your test to only plain files, use <code>-f</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1525976179, "last_edit_date": 1525976179, "creation_date": 1489546937, "answer_id": 42800382, "question_id": 42798744, "link": "https://stackoverflow.com/questions/42798744/perl-reading-a-file/42800382#42800382", "title": "Perl - reading a file", "body": "<p>It is simplest and safest to just try to open the file and skip it if that fails.</p>\n\n<p>We always check for failure anyway (right?), and here you want to keep going. \nSo do as usual</p>\n\n<pre><code>foreach my $file (@filelist)\n{\n    open my $fh, '&lt;', $file or do {\n        warn \"Can't open $file: $!\";\n        next;\n    };\n\n    # process the file\n\n    close $fh or warn \"Can't close filehandle: $!\";\n}\n</code></pre>\n\n<p>This also helps with (possible if rare) race conditions.  </p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 42798852, "answer_count": 3, "score": 0, "last_activity_date": 1525976179, "creation_date": 1489535886, "question_id": 42798744, "link": "https://stackoverflow.com/questions/42798744/perl-reading-a-file", "title": "Perl - reading a file", "body": "<p>I would like to read a file into an array. I know a way, but I wanted not to stop my program even if there is no such file. If there is no file, I just wanted to make an internal flag 1 and continue my script. However, I got an error because I do not close the file correctly. Please let me know how to resolve this issue. Any suggestion is appreciated.   </p>\n\n<p>My code (ttt.pl):</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\n\nmy $flag=1;\nmy $filename=\"test.txt\";\n\nopen ( my $fh, '&lt;', $filename ) or $flag=0;\nchomp ( my @input = &lt;$fh&gt; );\nclose ( $fh );\n\nprint $flag;\n</code></pre>\n\n<p>Error message is: readline() on closed filehandle $fh at ./ttt.pl line 11.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489523126, "post_id": 42795838, "comment_id": 72706315, "body": "The <code>-p</code> flag only read a line at a time by default. Try slurping more than a line at a time by adding <code>-0777</code>. See also <a href=\"http://stackoverflow.com/q/36533282/2173773\">How to replace multiple any-character (including newline) in Perl RegEx?</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1489523624, "post_id": 42795838, "comment_id": 72706591, "body": "Also, make sure to use non-greedy <code>.*?</code>, otherwise it will match all the way to the very last <code>AllowOverride</code>. Use <code>$1</code>, not <code>\\1</code> -- or <code>\\K</code> (a form of <i>positive lookbehind</i>)."}, {"owner": {"reputation": 384, "user_id": 1422222, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/jgkRE.jpg?s=128&g=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/1422222/lorenzo"}, "edited": false, "score": 0, "creation_date": 1489525293, "post_id": 42795838, "comment_id": 72707613, "body": "This resolved it: sudo perl -0777 -p -i -e &#39;s/(&lt;Directory \\&quot;\\/var\\/www\\/html\\&quot;&gt;.*?AllowOverride) (None)/\\1 All/s&#39; httpd.conf"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489526007, "post_id": 42795838, "comment_id": 72707943, "body": "Great.  Again: not <code>\\1</code>, but instead <code>$1</code>.  The <code>\\1</code> has long been not been in use for this, and while it shouldn&#39;t get you in trouble <i>it is</i> used for other things in regex."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1489527113, "post_id": 42795838, "comment_id": 72708519, "body": "There&#39;s a module, <a href=\"https://metacpan.org/pod/Apache::Admin::Config\" rel=\"nofollow noreferrer\">Apache::Admin::Config</a>, for reading and editing Apache config files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489529620, "post_id": 42795838, "comment_id": 72709733, "body": "@l0r3nz0: If you have a solution then you must write it up as an answer and accept it. However your command line will work only with very specific instances of <code>httpd.conf</code> that  are semantically identical. You should consider using the module that <a href=\"http://stackoverflow.com/a/42797213/622310\"><b>Schwern</b> recommends</a>, otherwise your Makefile could mysteriously stop working one day when someone changes the Apache configuration."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489530028, "post_id": 42795838, "comment_id": 72709909, "body": "@l0r3nz0: Please change your handle to something that can be easily typed. On Stack Overflow it is essential to tag comments correctly so that the target is notified, and it is very awkward to distinguish between <code>l</code> and <code>I</code>, <code>0</code> and <code>O</code> in names like yours. In any case, I thought <i>1337 speak</i> belonged to teenage <i>n00b haxxors</i> last decade?"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1489528215, "creation_date": 1489528215, "answer_id": 42797213, "question_id": 42795838, "link": "https://stackoverflow.com/questions/42795838/perl-multiline-regex-replacing-capture-group/42797213#42797213", "title": "Perl Multiline Regex Replacing Capture Group", "body": "<p>In general, parsing and modifying anything nested with regexes rapidly gets complicated an error prone. If you can, use a full parser.</p>\n\n<p>Fortunately there is one for reading and modifying Apache config files, <a href=\"https://metacpan.org/pod/Apache::Admin::Config\" rel=\"nofollow noreferrer\">Apache::Admin::Config</a>. It's a little weird at first, so here's an example.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nuse Apache::Admin::Config;\n\n# Load and parse the config file.\nmy $config = Apache::Admin::Config-&gt;new(shift)\n    or die $Apache::Admin::Config::ERROR;\n\n# Find the &lt;Directory \"/var/www/html\"&gt; section\n# NOTE: This is a literal match, /var/www/html is different from \"/var/www/html\".\nmy $section = $config-&gt;section(\n    \"Directory\",\n    -value =&gt; q[\"/var/www/html\"]\n);\n\n# Find the AllowOverride directive inside that section.\nmy $directive = $section-&gt;directive(\"AllowOverride\");\n\n# Change it to All.\n$directive-&gt;set_value(\"All\");\n\n# Save your changes.\n$config-&gt;save;\n</code></pre>\n\n<p>You're drilling into the structure one level at a time. First finding the section, then the directive inside that.</p>\n\n<p>You can do this in loops. For example, finding all Directory sections...</p>\n\n<pre><code>for my $section ($config-&gt;section(\"Directory\")) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 384, "user_id": 1422222, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/jgkRE.jpg?s=128&g=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/1422222/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "closed_date": 1489530137, "answer_count": 1, "score": 1, "last_activity_date": 1489528215, "creation_date": 1489522922, "last_edit_date": 1489525373, "question_id": 42795838, "link": "https://stackoverflow.com/questions/42795838/perl-multiline-regex-replacing-capture-group", "closed_reason": "Duplicate", "title": "Perl Multiline Regex Replacing Capture Group", "body": "<p>I'm adding a line of Perl code to a Makefile that searches for something like the following block in an httpd.conf and replaces \"None\" with \"All\" for the AllowOverride.</p>\n\n<pre><code>&lt;Directory \"/var/www/html\"&gt;\n    #\n    # Possible values for the Options directive are \"None\", \"All\",\n    # or any combination of:\n    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews\n    #\n    # Note that \"MultiViews\" must be named *explicitly* --- \"Options All\"\n    # doesn't give it to you.\n    #\n    # The Options directive is both complicated and important.  Please see\n    # http://httpd.apache.org/docs/2.4/mod/core.html#options\n    # for more information.\n    #\n    Options Indexes FollowSymLinks\n\n    #\n    # AllowOverride controls what directives may be placed in .htaccess files.\n    # It can be \"All\", \"None\", or any combination of the keywords:\n    #   Options FileInfo AuthConfig Limit\n    #\n    AllowOverride None\n\n    #\n    # Controls who can get stuff from this server.\n    #\n    Require all granted\n&lt;/Directory&gt;\n</code></pre>\n\n<p>The code I'm trying to run from the command line is as follows:</p>\n\n<pre><code>sudo perl -p  -i -e 's/(&lt;Directory \"\\/var\\/www\\/html\"&gt;.*AllowOverride )(None)/\\1 All/' httpd.conf\n</code></pre>\n\n<p>But I cannot get it to work. I'm using the two capture groups for keeping the first group the same and replacing the second one.</p>\n\n<p>Any help is greatly appreciated.</p>\n\n<p>EDIT: this resolved it</p>\n\n<pre><code>sudo perl -0777 -p -i -e 's/(&lt;Directory \\\"\\/var\\/www\\/html\\\"&gt;.*?AllowOverride) (None)/\\1 All/s' httpd.conf\n</code></pre>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1489520807, "post_id": 42795122, "comment_id": 72704938, "body": "It wants you to use: <code>$ssh-&gt;connect(&#39;xx.xx.xx.xx&#39;) or $ssh-&gt;die_with_error;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489520853, "post_id": 42795122, "comment_id": 72704972, "body": "The deprecation warning is because Net::SSH2 wants you to check the return value of <code>connect</code>. It suggests to do <code>$ssh-&gt;connect( ... ) or ssh2-&gt;die_with_error</code>. Since you&#39;re not doing that, it <code>die</code>s itself directly, and also issues the warning. The <i>Bad file descriptor</i> error is your real problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489521003, "post_id": 42795122, "comment_id": 72705061, "body": "@simbabque, &quot;<i>The Bad file descriptor error is your real problem</i>&quot;, Not so sure. I think printing the void context warning might clobber the error. The OP should start by adding <code>or $ssh-&gt;die_with_error</code> and running the program again. Furthermore, in void context, it always says &quot;failed to connect&quot; even when that&#39;s not the problem."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489521139, "post_id": 42795122, "comment_id": 72705148, "body": "@simbabque, I know. What&#39;s your point?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489521269, "post_id": 42795122, "comment_id": 72705227, "body": "@simbabque, Printing to the screen is a library or system call. It therefore makes <code>errno</code> (<code>$!</code>) meaningless (unless <code>warnif</code> explicitly backs up and restores <code>errno</code>)."}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1489521283, "post_id": 42795122, "comment_id": 72705232, "body": "Fixed the issue. Kept the code inside &quot;if&quot;. if($ssh-&gt;connect(&#39;xx.xx.xx.xx&#39;)){ print &quot;successfully connected&quot;; }"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489521447, "post_id": 42795122, "comment_id": 72705331, "body": "@simbabque, Just checked. <code>warnif</code> can indeed clobber <code>$!</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489521617, "post_id": 42795122, "comment_id": 72705416, "body": "Please <a href=\"https://stackoverflow.com/posts/42795122/edit\">edit</a> your question and put the new code and an updated error message in it Sujeet."}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1489522215, "post_id": 42795122, "comment_id": 72705745, "body": "@simbaque: Do you want me to edit the question with the changes that I have made to fix the isusse ??"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489525637, "post_id": 42795122, "comment_id": 72707760, "body": "Oh, if you&#39;re already done, then no. Write up your own answer if you want."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489525640, "post_id": 42795122, "comment_id": 72707762, "body": "@SujeetPadhi: Please write up an <i>answer</i> that shows what you did."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489525891, "post_id": 42795122, "comment_id": 72707879, "body": "I&#39;ve had to fix a couple of your posts now. Please read <a href=\"http://stackoverflow.com/editing-help\"><i>Markdown help</i></a> and possibly <a href=\"https://daringfireball.net/projects/markdown/syntax\" rel=\"nofollow noreferrer\"><i>Markdown: Syntax</i></a> and learn to use markdown properly,"}], "answers": [{"comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1489650949, "post_id": 42815874, "comment_id": 72766513, "body": "When <code>connect</code> fails, your code still calls <code>auth_password</code> anyway. That makes no sense."}], "tags": [], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1490034225, "last_edit_date": 1490034225, "creation_date": 1489596303, "answer_id": 42815874, "question_id": 42795122, "link": "https://stackoverflow.com/questions/42795122/calling-connect-in-void-context-is-deprecated/42815874#42815874", "title": "Calling connect in void context is deprecated", "body": "<p>Keeping the connect method inside if or using die_with_error helped me fixed the code.</p>\n\n<pre><code>use strict;\n\nuse Net::SSH2;\n\nmy $ssh=Net::SSH2-&gt;new();\n\nif($ssh-&gt;connect('xx.xx.xx.xx'))\n  {\n     print \"successfully connected\";\n\n     $ssh-&gt;auth_password('username','password') or $ssh-&gt;die_with_error;\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 42815874, "answer_count": 1, "score": 1, "last_activity_date": 1490034225, "creation_date": 1489520502, "last_edit_date": 1489525813, "question_id": 42795122, "link": "https://stackoverflow.com/questions/42795122/calling-connect-in-void-context-is-deprecated", "title": "Calling connect in void context is deprecated", "body": "<p>I am trying to use the\n<a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\"><code>Net::SSH2</code></a>\nin the following the Perl code, but I am getting this error.</p>\n\n<blockquote>\n  <p>Calling connect in void context is deprecated at test.pl line 9.<br>\n  Net::SSH2: failed to connect to xx.xx.xxx.xx:ssh: Bad file descriptor at test.pl line 9.</p>\n</blockquote>\n\n<pre><code>use strict;\n\nuse Net::SSH2;\n#use Net::SSH2::Expect;\n\n#my $Hostname = 'xx.xx.xx.xx';\n\nmy $ssh = Net::SSH2-&gt;new();\n\n#$ssh-&gt;timeout(10);\n\n$ssh-&gt;connect('xx.xx.xx.xx');\n</code></pre>\n\n<p>Can somebody please help me with this?</p>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1489520090, "post_id": 42794932, "comment_id": 72704532, "body": "Use <code>\\K</code> (a zero-width positive lookbehind assertion): <code>perl -pe &#39;s&#47;\\d\\K &#47;XYZ&#47;g&#39; foo.txt</code>. See <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\"><code>perlre</code></a> for more information on <code>\\K</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1489520091, "post_id": 42794932, "comment_id": 72704534, "body": "Try <a href=\"http://ideone.com/jPLqom\" rel=\"nofollow noreferrer\"><code>sed &#39;s&#47;\\([0-9]\\)  *&#47;\\1XYZ&#47;g&#39;</code></a> (2 spaces after <code>\\)</code>). What is the expected result you expect for your sample text?"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 7370748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8a5078911da053e9f8aa586a7fd2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Walker", "link": "https://stackoverflow.com/users/7370748/gareth-walker"}, "edited": false, "score": 0, "creation_date": 1489520973, "post_id": 42795229, "comment_id": 72705043, "body": "That seems to work perfectly.  And great explanation. The perl solution using <code>\\K</code> also seems to work."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 133, "user_id": 7370748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8a5078911da053e9f8aa586a7fd2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Walker", "link": "https://stackoverflow.com/users/7370748/gareth-walker"}, "edited": false, "score": 0, "creation_date": 1489521099, "post_id": 42795229, "comment_id": 72705127, "body": "Yes, Perl <code>\\K</code> will work, but if a POSIX expression is enough, I&#39;d go for this solution."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1506269813, "last_edit_date": 1506269813, "creation_date": 1489520840, "answer_id": 42795229, "question_id": 42794932, "link": "https://stackoverflow.com/questions/42794932/adding-string-after-regular-expression/42795229#42795229", "title": "adding string after regular expression", "body": "<p>Judging by your attempts, you need to replace a <em>single</em> space after a digit.</p>\n\n<p>It is enough to use the following expression with <code>sed</code>:</p>\n\n<pre><code>sed 's/\\([0-9]\\) /\\1XYZ/g'\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/FFTHfD\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n\n<p>The <code>\\([0-9]\\)</code> is a <strong>capturing group</strong> matching a digit and storing it in a memory buffer, and a space is just <em>matched</em>. The replacement pattern contains the <a href=\"http://www.regular-expressions.info/replacebackref.html\" rel=\"nofollow noreferrer\"><strong>backreference</strong></a> to the value stored inside Group 1 buffer, so the digit is not lost, but restored in the result.</p>\n\n<p>Note that if you need to replace all consequent spaces after a digit with <code>XYZ</code>, you may use </p>\n\n<pre><code>sed 's/\\([0-9]\\)  */\\1XYZ/g'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sed 's/\\([0-9]\\) \\+/\\1XYZ/g'\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7370748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8a5078911da053e9f8aa586a7fd2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth Walker", "link": "https://stackoverflow.com/users/7370748/gareth-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 42795229, "answer_count": 1, "score": 0, "last_activity_date": 1506269813, "creation_date": 1489519887, "question_id": 42794932, "link": "https://stackoverflow.com/questions/42794932/adding-string-after-regular-expression", "title": "adding string after regular expression", "body": "<p>I have files with lines like this:</p>\n\n<pre><code>123.45 234.56 A foo\nbar boo\n</code></pre>\n\n<p>As part of a bash shell script I want to replace spaces following a\nnumber with another string (XYZ, let's say). I can do this which\nreplaces all spaces (no good)</p>\n\n<pre><code>sed 's/ /XYZ/g' foo.txt\n</code></pre>\n\n<p>Or I can do this which replaces the right spaces but also gets rid of\nthe last digit (also no good)</p>\n\n<pre><code>perl -pe 's/\\d /XYZ/g' foo.txt\n</code></pre>\n\n<p>How can I achieve the effect I'm after?</p>\n"}, {"tags": ["regex", "perl", "shell"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489519858, "post_id": 42794794, "comment_id": 72704409, "body": "Is that input supposed to be real XML? It doesn&#39;t look like it. Please include an <i>exact</i> file."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1489520335, "post_id": 42794794, "comment_id": 72704664, "body": "...also, here isn&#39;t any <code>buildversion</code> string in your example data..."}, {"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489520728, "post_id": 42794794, "comment_id": 72704898, "body": "@simbabque No it&#39;s not really a XML - the file I&#39;m editing just has a .xml extension- but the structure is kinda similar. Also the original looks exactly like this only the tags a,b,c and d have different names"}, {"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1489520777, "post_id": 42794794, "comment_id": 72704922, "body": "@jm666 Oops, copy-paste fail. Fixed"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489520916, "post_id": 42794794, "comment_id": 72705006, "body": "So the file has blocks of tags, and empty lines, and those not-comments <code>&lt;-- ... --&gt;</code>? And you only want to change the <code>&lt;d&gt;</code> where <code>&lt;a&gt;</code> has <code>BLE</code>?"}, {"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "edited": false, "score": 0, "creation_date": 1489521356, "post_id": 42794794, "comment_id": 72705278, "body": "Yes, empty lines once in a while, tag blocks, the &quot;&lt;-- stuff --&gt;&quot; has no real purpose (could be considered a comment) but it&#39;s always squeezed between each tag line. And yes, I want to change <code>&lt;d&gt;</code> but also <code>&lt;c&gt;</code> (same value as <code>&lt;d&gt;</code>) for <code>&lt;a&gt; = BLE</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "edited": false, "score": 0, "creation_date": 1489646812, "post_id": 42799706, "comment_id": 72764543, "body": "Thanks @zdim. This worked for me <code>perl -i.bak -pe &quot;s{&lt;d&gt;\\K.*?&lt;&#47;d&gt;}{$ver&lt;&#47;d&gt;} if m{BLE} .. m{\\&#47;d}&quot; dur.xml</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1489561782, "last_edit_date": 1489561782, "creation_date": 1489542104, "answer_id": 42799706, "question_id": 42794794, "link": "https://stackoverflow.com/questions/42794794/handling-output-of-the-flip-flop-operator/42799706#42799706", "title": "Handling output of the flip-flop operator", "body": "<p>Here is one way to do the task as I see it</p>\n\n<pre><code>perl -pe's{&lt;d&gt;VER\\K.*?(&lt;/d&gt;)}{xxx$1} if m{BLE} .. m{&lt;/d&gt;}' data.txt\n</code></pre>\n\n<p>This replaces whatever is between <code>&lt;d&gt;VER</code> and (first) <code>&lt;/d&gt;</code> with <code>xxx</code>, on the lines in the given range. The <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code></a> is the form of the <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookbehind</a> which discards matches prior to it so we don't have to capture them and put them back in. </p>\n\n<p>The <code>-p</code> prints <code>$_</code> every time, while <code>s{}{}</code> changes it, so you get all lines printed, changed or not. It servers no purpose having both it and <code>-n</code> (same but doesn't print) but if you do then <code>-p</code> overrides the other. To have the file changed <em>in-place</em> with a backup indeed add <code>-i.bak</code>.  See <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perlrun</a></p>\n\n<p>If you need to access specific numbers you can instead use regex</p>\n\n<pre><code>s{&lt;d&gt;VER\\K(\\d+)\\.(\\d+)\\.(\\d+)&lt;/d&gt;}{$1.$new.$3&lt;/d&gt;}\n</code></pre>\n\n<p>In order to allow for an optional letter following a number, what your code hints at, use <code>(\\d+[A-Z]?)</code>. If <code>'</code> and <code>\"</code> in <code>X'</code> and <code>X\"</code> are actual characters please adjust this (the first example is fine). If you meant to use them as \"X-prime\" (and double-prime), don't -- it is very misleading here.</p>\n\n<p>For more flexibility convert this to a script, which is probably a good idea anyway. You may use variables directly instead of the literals above (<code>VER</code> and <code>xxx</code>) if this is in a shell script.</p>\n\n<hr>\n\n<p>The problem in the posted code isn't with the \"flip-flop\" (<a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range operator</a>), which merely selects lines and which you use correctly.  It is with the regex, in which you have <code>[A-Z]</code> before the last number and another one following it.  The data just doesn't have a letter there, so it doesn't match.  </p>\n\n<p>Also, note that <code>\\?</code> turns the <a href=\"http://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">quantifier</a> <code>?</code> into a literal <code>?</code>, which also isn't in the data.</p>\n"}], "owner": {"reputation": 41, "user_id": 2385438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61aa7cb054905b6aadf075d79e91ef?s=128&d=identicon&r=PG", "display_name": "drinker", "link": "https://stackoverflow.com/users/2385438/drinker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 42799706, "answer_count": 1, "score": 2, "last_activity_date": 1489561782, "creation_date": 1489519374, "last_edit_date": 1489520606, "question_id": 42794794, "link": "https://stackoverflow.com/questions/42794794/handling-output-of-the-flip-flop-operator", "title": "Handling output of the flip-flop operator", "body": "<p>I've been strugling with the flip-flop operator in order to replace a particular value in a input xml file.</p>\n\n<p>The file structure is as follows:</p>\n\n<pre><code>&lt;a&gt;BLE&lt;/a&gt;\n&lt;-- hur dur --&gt;\n&lt;b&gt;12345&lt;/b&gt;\n&lt;-- hur der --&gt;\n&lt;c&gt;VER1.2.3&lt;/c&gt;\n&lt;-- hur dest --&gt;\n&lt;d&gt;VER1.2.3&lt;/d&gt;\n\n&lt;a&gt;CLE&lt;/a&gt;\n&lt;-- hur dur --&gt;\n&lt;b&gt;12345&lt;/b&gt;\n&lt;-- hur der --&gt;\n&lt;c&gt;VERX'.Y'.Z'&lt;/c&gt;\n&lt;-- hur dest --&gt;\n&lt;d&gt;VERX'.Y'.Z'&lt;/d&gt;\n\n&lt;a&gt;DLE&lt;/a&gt;\n&lt;-- hur dur --&gt;\n&lt;b&gt;12345&lt;/b&gt;\n&lt;-- hur der --&gt;\n&lt;c&gt;VERX\".Y\".Z\"&lt;/c&gt;\n&lt;-- hur dest --&gt;\n&lt;d&gt;VERX\".Y\".Z\"&lt;/d&gt;\netc ...\n</code></pre>\n\n<p>So lets say I want to change the version field (d and c) of any particular variable. For brevity sake let it be BLE. I have to first find the block with the values of BLE (lines 1-7) and then replace fields  and  with the new value. </p>\n\n<p>I've been trying different stuff, like:</p>\n\n<pre><code>perl -pi.bak -ne 'if ( /BLE/ .. /&lt;\\/d/ ){ s/VER[[:digit:]]\\+\\.[[:digit:]]\\+\\.[A-Z][[:digit:]]\\+[A-Z]\\?/$ver/}' dur.xml\n</code></pre>\n\n<p>or </p>\n\n<pre><code>perl -ne \"print if ( /BLE/ .. /&lt;\\/d&gt;/ ) \" dur.xml | sed \"/VER[[:digit:]]\\+\\.[[:digit:]]\\+\\.[[:digit:]]\\+[A-Z]\\?/$ver/\"\n</code></pre>\n\n<p>where $ver is a set variable (ver=\"VERX.Y.Z\"). However the first one doesn't do anything to the input file (I'd prefer to do it in-place); the second produces more or less what I want but the output is limited to the BLE block:</p>\n\n<pre><code>&lt;a&gt;BLE&lt;/a&gt;\n&lt;-- hur dur --&gt;\n&lt;b&gt;12345&lt;/b&gt;\n&lt;-- hur der --&gt;\n&lt;c&gt;VERX.Y.Z&lt;/c&gt;\n&lt;-- hur dest --&gt;\n&lt;d&gt;VERX.Y.Z&lt;/d&gt;\n</code></pre>\n\n<p>but that this output can't be easily redirected to a file with > because it drops everything else besides BLE.</p>\n\n<p>Is there any way one can modify the original file in a similar fashion as the one described above?</p>\n\n<p>Thanks a bunch,\ndrinker</p>\n"}, {"tags": ["windows", "perl", "windows-7", "libssh2"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489515209, "post_id": 42793369, "comment_id": 72701620, "body": "What OS are you using?"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489515358, "post_id": 42793369, "comment_id": 72701721, "body": "@ThisSuitIsBlackNot : Windows 7"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489517656, "post_id": 42793369, "comment_id": 72703089, "body": "<code>Net::SSH2</code> doesn&#39;t seem to support Windows. How did you install it? I suggest that you try <a href=\"https://metacpan.org/pod/Net::SSH::Perl\" rel=\"nofollow noreferrer\">Net::SSH::Perl</a> instead."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489517822, "post_id": 42793369, "comment_id": 72703193, "body": "What Perl are you using? The easiest way may be to install a new version of Perl. I can confirm that the most recent version of <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">Strawberry Perl</a> includes <code>libssh-1.7.0</code>, and <code>Net::SSH2</code> builds and installs on it without any issue."}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489517971, "post_id": 42793369, "comment_id": 72703299, "body": "@Borodin : I have used cygwin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489517976, "post_id": 42793369, "comment_id": 72703303, "body": "@stevieb: You&#39;re right. I tried installing <code>Net::SSH2</code> on my 5.24 Strawberry Perl and it said <i>Library ssh2 found in standard place</i>. Strawberry are pretty good!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489518043, "post_id": 42793369, "comment_id": 72703348, "body": "Do you need Cygwin? Or would MinGW do? I would go for a native installation of Strawberry or possibly ActivePerl."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489518359, "post_id": 42793369, "comment_id": 72703531, "body": "@Borodin I never used Windows for doing Perl coding before I found interest in writing a unit test deployment system that spans Windows and Unix, so I inherited <a href=\"https://github.com/stevieb9/berrybrew\" rel=\"nofollow noreferrer\">berrybrew</a> (a Perlbrew for Windows) so I could finagle it to make it compatible with said cross-build system. Strawberry makes things as seamless as possible when going back and forth. <a href=\"https://metacpan.org/pod/Test::BrewBuild\" rel=\"nofollow noreferrer\">Here&#39;s</a> the build system, fwiw"}], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "edited": false, "score": 0, "creation_date": 1489520139, "post_id": 42794445, "comment_id": 72704557, "body": "Thanks a lot guys :)"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1489518154, "creation_date": 1489518154, "answer_id": 42794445, "question_id": 42793369, "link": "https://stackoverflow.com/questions/42793369/libssh2-version-1-2-9-or-higher-required-for-set-timeout-support/42794445#42794445", "title": "libssh2 version 1.2.9 or higher required for set_timeout support", "body": "<p>I would highly recommend upgrading your version of Perl, using a native Windows application. If you install the most recent version of <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">Strawberry Perl</a> (5.24.1.1 at time of writing), it includes <code>libssh2-1.7.0</code>. It then allows you to successfully build, install and use <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\">Net::SSH2</a>.</p>\n\n<p>Here's the output of your code:</p>\n\n<pre><code>c:\\&gt;perl ssh.pl\n1.7.067328SSH-2.0-libssh2_1.7.0\n</code></pre>\n\n<p>It appears as though it's been in the builds for a while, but if you're upgrading, I'd go latest and greatest.</p>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 42794445, "answer_count": 1, "score": 0, "last_activity_date": 1489518154, "creation_date": 1489514573, "last_edit_date": 1489517222, "question_id": 42793369, "link": "https://stackoverflow.com/questions/42793369/libssh2-version-1-2-9-or-higher-required-for-set-timeout-support", "title": "libssh2 version 1.2.9 or higher required for set_timeout support", "body": "<p>I am trying to use <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\"><code>Net::SSH2</code></a> in the following the Perl code, but I am getting this error</p>\n\n<blockquote>\n  <p>libssh2 version 1.2.9 or higher required for set_timeout support at test.pl line 8.<br>\n  1.2.566053SSH-2.0-libssh2_1.2.5<br>\n  Press any key to continue . . .</p>\n</blockquote>\n\n<pre><code>use strict;\n\nuse Net::SSH2;\n#use Net::SSH2::Expect;\n\nmy $Hostname = 'xxxxxxxxxx';\n\nmy $ssh = Net::SSH2-&gt;new();\n\nprint $ssh-&gt;version();\n\n$ssh-&gt;timeout( 10 );\n\n#$ssh-&gt;connect( \"xxxxxxxx\" );\n</code></pre>\n\n<p>I can see that my libssh2 version is old. Can somebody please help me with how to upgrade the libssh2 version?</p>\n"}, {"tags": ["string", "perl", "replace", "split"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489510445, "post_id": 42791850, "comment_id": 72698491, "body": "What have you tried? What did you come up with in Python that didn&#39;t work? Please show us your code and explain what part doesn&#39;t work."}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489510536, "post_id": 42791850, "comment_id": 72698557, "body": "I am also hoping to use PERL because I have already figured out how to replace the HW with HT and OW with OT and I was hoping to be able to combine everything into a single PERL script to run on any input file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489510815, "post_id": 42791850, "comment_id": 72698766, "body": "If you already have that, show it please. You can <a href=\"https://stackoverflow.com/posts/42791850/edit\">edit</a> your question. The way it is now, the community will close it, because it looks like you want us to do your job for you. We don&#39;t like that around here."}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489510971, "post_id": 42791850, "comment_id": 72698878, "body": "The main thing in PYTHON was that I could not figure out how to take peoples suggestions and get them to print to a new file, and I could not figure out how to make &quot;file.txt&quot; a variable to be the file that is typed adjacent to command.  Here is what I did in Python:#!/usr/bin/python  with open(&#39;file.txt&#39;) as f:     lines = f.readlines()  new_lines = []  for line in lines:     if &quot;HT&quot; in line:         new_line = line.replace(&#39; 0 &#39;, &#39;2002&#39;)         new_lines.append(new_line)     else:         new_lines.append(line)   content = &#39;&#39;.join(new_lines) print(content)"}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489511099, "post_id": 42791850, "comment_id": 72698970, "body": "Here is what I can do in PERL that I admit is very easy but took me quite a bit of tinkering.  #!/usr/bin/perl  use strict; use warnings;  $^I = &#39;.bak&#39;; # create a backup copy   while (&lt;&gt;) {    s/HW/HT/g; # do the replacement    s/OW/OT/g; # do a second replacement    print; # print to the modified file }"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489511119, "post_id": 42791850, "comment_id": 72698980, "body": "Please <a href=\"https://stackoverflow.com/posts/42791850/edit\">edit</a> the question and add that code there. And use proper markup. It&#39;s impossible to read from the comments."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489515006, "post_id": 42791850, "comment_id": 72701490, "body": "<i>&quot;be able to replace the &quot;<code>space0space</code>&quot; with <code>2002</code>&quot;</i>  You want <code>-0.502000     0     5</code> replaced with <code>-0.50200020025</code>? I doubt it. You need to be precise in your specifications."}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489515385, "post_id": 42791850, "comment_id": 72701744, "body": "I was trying to use the &quot;space0space&quot; as the search string since it will identify the column of zeros and not just all the zeros."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489515949, "post_id": 42791850, "comment_id": 72702092, "body": "The languages are <b><i>Perl</i></b> and <b><i>Python</i></b>. Very few modern languages have acronyms for names"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489519851, "post_id": 42791850, "comment_id": 72704405, "body": "Perl is hardly modern!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489512606, "post_id": 42792636, "comment_id": 72699970, "body": "Hello ikegami,  First: Thanks for formatting my questions I am trying to learn how to use this better!  Thanks for the script I am going to try to understand it but may ask you some follow up questions if I get confused."}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489513668, "post_id": 42792636, "comment_id": 72700688, "body": "I am going to test both and see if I can figure out how to add in a section on HW replace with HT and then do find HT and replace the 0 with 2002 etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489516850, "post_id": 42792636, "comment_id": 72702604, "body": "@Drewucla: You should have presented the entire problem at the start. This is best done in a single pass instead of two stages. See my answer."}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489517600, "post_id": 42792636, "comment_id": 72703053, "body": "Hello, the script above worked great, but I tried to modify it to replace all HW with HT and all OW with OT BEFORE running the Borodin if statement.  The code only did the HW and OW replacements and not the if statements, why?  I will put the code in the questions (hopefully formatted correctly)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489518916, "post_id": 42792636, "comment_id": 72703882, "body": "You do <code>s&#47;HW&#47;HT&#47;g</code>, then you check if a second <code>s&#47;HW&#47;HT&#47;g</code> succeeds. Of course it won&#39;t. Get rid of the first <code>s&#47;HW&#47;HT&#47;g</code>. /// Added a cleaner solution"}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489519163, "post_id": 42792636, "comment_id": 72704028, "body": "I just saw ikegami&#39;s answer and that is doing all the replacements based on character spacing (is that what the 2, 4, 43 and 6 are?).  I will try to see if I can get this working. Thanks ikegami."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489519780, "post_id": 42792636, "comment_id": 72704362, "body": "ug, please don&#39;t use the one with the hard-coded numbers!"}, {"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489519801, "post_id": 42792636, "comment_id": 72704372, "body": "I will spend the day trying to understand ikegami&#39;s script, but THANK YOU.  It works great.  Is there a way that I am supposed to &quot;upvote&quot; you and Borodin and others that have been helpful?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489519939, "post_id": 42792636, "comment_id": 72704452, "body": "Upvoting is good. and you should accept one of the answers (by checking the mark) next to the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1489518821, "last_edit_date": 1489518821, "creation_date": 1489512287, "answer_id": 42792636, "question_id": 42791850, "link": "https://stackoverflow.com/questions/42791850/search-the-front-of-a-string-to-replace-the-end-of-the-string-perl/42792636#42792636", "title": "Search the front of a string to replace the end of the string Perl", "body": "<p>It looks like it uses fixed-width fields, so</p>\n\n<pre><code>sub trim { $_[0] =~ s/^\\s+//r =~ s/\\s+\\z//r }\n\nwhile (&lt;&gt;) {\n   my $code = trim(substr($_, 2, 4));\n   if ($code eq \"HW\") {\n      substr($_,  2, 4, \"  HT\");\n      substr($_, 43, 6, \"  2002\");\n   }\n   elsif ($code eq \"OW\") {\n      substr($_,  2, 4, \"  OT\");\n      substr($_, 43, 6, \"  2001\");\n   }\n\n   print;\n}\n</code></pre>\n\n<hr>\n\n<p>Cleaner:</p>\n\n<pre><code>sub parse {\n   my ( @format, @row );\n   while ($_[0] =~ /\\G\\s*(\\S+)/g) {\n      push @row, $1;\n      push @format, '%'.( $+[0] - $-[0] ).'s';\n   }\n   return ( join('', @format).\"\\n\", @row );\n}\n\nwhile (&lt;&gt;) {\n   my ($format, @row) = parse($_);\n\n   if    ($row[1] eq \"HW\") { $row[1] = \"HT\";  $row[5] = 2002; }\n   elsif ($row[1] eq \"OW\") { $row[1] = \"OT\";  $row[5] = 2001; }\n\n   printf($format, @row);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "edited": false, "score": 0, "creation_date": 1489517165, "post_id": 42793665, "comment_id": 72702798, "body": "Sorry, I am new to trying to do this.  I have spent many years working on small molecules and just used x and dd in vi!  We are now moving into 100s of molecule systems. Thanks for your help."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1489516754, "last_edit_date": 1489516754, "creation_date": 1489515654, "answer_id": 42793665, "question_id": 42791850, "link": "https://stackoverflow.com/questions/42791850/search-the-front-of-a-string-to-replace-the-end-of-the-string-perl/42793665#42793665", "title": "Search the front of a string to replace the end of the string Perl", "body": "\n\n<h3>Update</h3>\n\n<p>So what you <em>really</em> want to do is to change all <code>HW</code> to <code>HT</code> and <code>OW</code> to <code>OT</code> in the second column, and change column six to 2001 if for <code>OW</code> and 2002 for <code>HW</code>?</p>\n\n<p>That looks like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;DATA&gt; ) {\n\n    my @parts = /\\s*\\S+/g;\n\n    if ( $parts[1] =~ s/([HO])W/$1T/ ) {\n\n        $parts[5] = sprintf '%*d',\n                length $parts[5],\n                $1 eq 'H' ? 2002 : 2001;\n    }\n\n    print @parts, \"\\n\";\n}\n\n\n__DATA__\n 6  HW     4.092000    4.750000   -0.502000     0     5     7\n 7  HW     5.367000    5.548000   -0.325000     0     5     6\n 8  OW    -5.470000    5.461000    1.463000     0     9    10\n 9  HW    -5.167000    4.571000    1.284000     0     8    10\n10  HW    -4.726000    6.018000    1.235000     0     8     9\n11  OW    -4.865000   -5.029000   -3.915000     0    12    13\n12  HW    -4.758000   -4.129000   -3.608000     0    11    13\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code> 6  HT     4.092000    4.750000   -0.502000  2002     5     7\n 7  HT     5.367000    5.548000   -0.325000  2002     5     6\n 8  OT    -5.470000    5.461000    1.463000  2001     9    10\n 9  HT    -5.167000    4.571000    1.284000  2002     8    10\n10  HT    -4.726000    6.018000    1.235000  2002     8     9\n11  OT    -4.865000   -5.029000   -3.915000  2001    12    13\n12  HT    -4.758000   -4.129000   -3.608000  2002    11    13\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>In case it is important, this solution takes care to keep the positions of all the values constant within each line</p>\n\n<p>The lines to be modified are selected by checking whether the second field <em>contains</em> the string <code>HT</code> or <code>OT</code>. I don't know if that is adequate given the small data sample that you offer</p>\n\n<p>This is for demonstration purposes. I trust you are able to modify the code to open an external file if necessary and read the data from a different file handle from <code>DATA</code></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;DATA&gt; ) {\n\n    my @parts = /\\s*\\S+/g;\n\n    if ( $parts[1] =~ /[HO]T/ ) {\n\n        $parts[5] = sprintf '%*d',\n                length $parts[5],\n                $parts[1] =~ /HT/ ? 2002 : 2001;\n    }\n\n    print @parts, \"\\n\";\n}\n\n\n__DATA__\n 6  HT     4.092000    4.750000   -0.502000     0     5     7\n 7  HT     5.367000    5.548000   -0.325000     0     5     6\n 8  OT    -5.470000    5.461000    1.463000     0     9    10\n 9  HT    -5.167000    4.571000    1.284000     0     8    10\n10  HT    -4.726000    6.018000    1.235000     0     8     9\n11  OT    -4.865000   -5.029000   -3.915000     0    12    13\n12  HT    -4.758000   -4.129000   -3.608000     0    11    13\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code> 6  HT     4.092000    4.750000   -0.502000  2002     5     7\n 7  HT     5.367000    5.548000   -0.325000  2002     5     6\n 8  OT    -5.470000    5.461000    1.463000  2001     9    10\n 9  HT    -5.167000    4.571000    1.284000  2002     8    10\n10  HT    -4.726000    6.018000    1.235000  2002     8     9\n11  OT    -4.865000   -5.029000   -3.915000  2001    12    13\n12  HT    -4.758000   -4.129000   -3.608000  2002    11    13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1489568478, "creation_date": 1489568478, "answer_id": 42805159, "question_id": 42791850, "link": "https://stackoverflow.com/questions/42791850/search-the-front-of-a-string-to-replace-the-end-of-the-string-perl/42805159#42805159", "title": "Search the front of a string to replace the end of the string Perl", "body": "<p>It seems you want to use a regular expression to perform string substitution. IMO, you should do all your operations in a single substitution because it is not more complicated, it is probably faster and less error prone (because shorter).</p>\n\n<p>Here is how I have understood your requirement:\nIn your lines, you have a H or a O followed by a T or a W that you want to force to T, then 3 fields you want to copy, then a 4th field. If the 4th field is 0,  you want to replace it by 2002 or 2001 according to the letter H or O.</p>\n\n<p>This gives:</p>\n\n<pre><code>while (my $line = &lt;&gt;) {\n    $line =~ s/(\\s*)([HO])(T|W)(\\s+\\S+\\s+\\S+\\s+\\S+)(\\s+\\d+)/$1.$2.'T'.$4.($5 == 0 ? ($2 eq 'H' ? '  2002' : '  2001') : $5)/eg;\n    print $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7705294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8e6a0980520a7b4f36c0d0cdbe4c3b?s=128&d=identicon&r=PG&f=1", "display_name": "Drewucla", "link": "https://stackoverflow.com/users/7705294/drewucla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42792636, "answer_count": 3, "score": -1, "last_activity_date": 1489568478, "creation_date": 1489509968, "last_edit_date": 1489518535, "question_id": 42791850, "link": "https://stackoverflow.com/questions/42791850/search-the-front-of-a-string-to-replace-the-end-of-the-string-perl", "title": "Search the front of a string to replace the end of the string Perl", "body": "<p>After getting some help here is what I have come up with (I was hoping to learn by trying to put multiple scripts together).  The script below will do the HW and OW replacements but does not run the if statement.</p>\n\n<pre><code>*#*!/usr/bin/perl  \nuse strict;  \nuse warnings 'all';\n$^I = '.bak'; # create a backup copy \nwhile (&lt;&gt;) {\n   s/HW/HT/g; # do the replacement of HW with HT\n   s/OW/OT/g; # do a second replacement OW with OT\n*#* Hopefully run the if statement       \n   my @parts = /\\s*\\S+/g;\n   if ( $parts[1] =~ s/([HO])W/$1T/ ) {\n    $parts[5] = sprintf '%*d',\n            length $parts[5],\n            $parts[1] =~ /HT/ ? 2002 : 2001;\n      }\nprint @parts, \"\\n\";\n}\n</code></pre>\n\n<p>I have left the rest of the post below in case people have similar problems.</p>\n\n<p>I would like to use Perl to replace text in a file by searching for specific letters at the beginning of the string. For example here is a section of the file:</p>\n\n<pre><code> 6  HT     4.092000    4.750000   -0.502000     0     5     7\n 7  HT     5.367000    5.548000   -0.325000     0     5     6\n 8  OT    -5.470000    5.461000    1.463000     0     9    10\n 9  HT    -5.167000    4.571000    1.284000     0     8    10\n10  HT    -4.726000    6.018000    1.235000     0     8     9\n11  OT    -4.865000   -5.029000   -3.915000     0    12    13\n12  HT    -4.758000   -4.129000   -3.608000     0    11    13\n</code></pre>\n\n<p>I would like to use <code>HT</code> as the search and be able to replace the \"0\" in the column of zeros with <code>2002</code>. I know how to replace the entire column of zeros but I don't know how to make it line specific.  After using HT as the search I need to then search <code>OT</code> and replace the <code>0</code> column with <code>2001</code>.</p>\n\n<p>Basically I need to search a string that identifies the line and replace a specific string of that line while the text that lies between is variable. The output needs to be printed to a new_file.xyz. Also I will be doing this repeatedly on lots of files.\nThanks for your help.</p>\n\n<p>Here is the python code that I was using but could not figure out how to make the \"file.txt\" be a variable to accept the file typed after the command. This code requires that I change the \"file.txt\" to be the name of the file every time I use it. Also I could not get it to print to a new file.</p>\n\n<p>python code:</p>\n\n<pre><code>#!/usr/bin/python\n\nwith open('file.txt') as f:\n    lines = f.readlines()\n    new_lines = []\n    for line in lines:\n        if \"HT\" in line:\n            new_line = line.replace(' 0 ', '2002')\n            new_lines.append(new_line)\n        else:\n            new_lines.append(line)\n    content = ''.join(new_lines)\n    print(content)\n</code></pre>\n\n<p>I have been able to do some of the work in Perl and was hoping to have a single script that would carryout all of the replace steps in sequential order since all of the <code>HT</code> start out as <code>HW</code> and all the <code>OT</code> start out as <code>OW</code>.\nPerl script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n$^I = '.bak'; # create a backup copy \n\nwhile (&lt;&gt;) {\n   s/HW/HT/g; # do the replacement\n   s/OW/OT/g; # do a second replacement\n   print; # print to the modified file\n}\n</code></pre>\n\n<p>Thanks for your help.<br>\nOh and I am unfortunately limited to Python 2.7 as someone suggested code for python 3.0.  I am purely a user of a university cluster but will ask about upgrading python.</p>\n"}, {"tags": ["vb.net", "visual-studio", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489504007, "post_id": 42789463, "comment_id": 72693529, "body": "That <code>myProcess.StartInfo.Arguments</code> looks horrible."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489505633, "post_id": 42789463, "comment_id": 72694786, "body": "@simbabque: Visual Basic is a horrible language. There is no variable interpolation, and you escape a double quote by doubling it up. Also, the concatenation operator is ampersand <code>&amp;</code>. All that makes the mess you see, although <code>&quot;&quot;&quot;&quot; &amp; &quot; &quot; &amp; &quot;&quot;&quot;&quot;</code> could be just <code>&quot;&quot;&quot; &quot;&quot;&quot;</code>. It&#39;s best to use <code>String.Format</code> which is VB&#39;s <code>sprintf</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489507162, "post_id": 42789463, "comment_id": 72695964, "body": "@Borodin a loooong time ago I bought a Visual Basic 5 <i>Einsteiger Edition</i> box for about 200 DM and hacked on it. That was shortly after I had learned Quick Basic, and before I picked up my first Perl book. However, I still consider it ugly. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489514795, "post_id": 42789463, "comment_id": 72701370, "body": "@simbabque: You had a misspent youth like the rest of us! Microsoft infuriate me with their VB and C# that are meant not to advance programming technology but to lock people in to their products."}], "answers": [{"comments": [{"owner": {"reputation": 2279, "user_id": 13563, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VoEyi.jpg?s=128&g=1", "display_name": "jimtut", "link": "https://stackoverflow.com/users/13563/jimtut"}, "edited": false, "score": 0, "creation_date": 1489508157, "post_id": 42790203, "comment_id": 72696772, "body": "Agreed.  If you want to capture output, you need to turn on Redirection.  To execute a simple Perl script, you don&#39;t need to use the system shell, although you might need to specify the full path to Perl or setup other variables."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1489505531, "creation_date": 1489505531, "answer_id": 42790203, "question_id": 42789463, "link": "https://stackoverflow.com/questions/42789463/workaround-mutually-exclusive-useshellexecute-and-redirectstandardoutput/42790203#42790203", "title": "Workaround mutually exclusive &quot;UseShellExecute&quot; and &quot;RedirectStandardOutput&quot;", "body": "\n\n<p>I don't see why you want to set <code>UseShellExecute</code> to <em>true</em>. It needs to be <em>false</em> to allow redirection of the standard IO channels</p>\n\n<p>If the location of the perl compiler executable is in PATH then you can just set <code>FileName</code> to <code>perl</code>. It's also better to use <code>String.Format</code> to build strings out of variables rather than use all those escaped quotes and concatenations</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>Dim myProcess As New System.Diagnostics.Process\nmyProcess.StartInfo.WorkingDirectory = \"K:\\Engineering\\Temp\\perl\"\nmyProcess.StartInfo.UseShellExecute = False\nmyProcess.StartInfo.FileName = \"perl\"\nmyProcess.StartInfo.Arguments = String.Format(\n        \"perlcompare.pl \"\"{0}\"\" \"\"{1}\"\" \"\"{2}\"\"\",\n        MasterFile,\n        MasterOutput,\n        ComparisonsOutput)\nmyProcess.StartInfo.RedirectStandardOutput = True\nmyProcess.Start()\n</code></pre>\n\n<p>If the location of the perl compiler isn't in the PATH then you can just put a fully-qualified file path into <code>FileName</code></p>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 42790203, "answer_count": 1, "score": 1, "last_activity_date": 1489505531, "creation_date": 1489503604, "last_edit_date": 1489503644, "question_id": 42789463, "link": "https://stackoverflow.com/questions/42789463/workaround-mutually-exclusive-useshellexecute-and-redirectstandardoutput", "title": "Workaround mutually exclusive &quot;UseShellExecute&quot; and &quot;RedirectStandardOutput&quot;", "body": "<p>I need a workaround that will have the same effect as using True on both of the mutually exclusive UseShellExecute and RedirectStandardOutput.\nThe reason I need this is because I want to execute my perl script as I would through a CMD.exe:</p>\n\n<pre><code>perl perlcompare.pl &lt;file1&gt; &lt;file2&gt; &lt;file3&gt;\n</code></pre>\n\n<p>Noting that putting \"perl\" in front there seems to be optional as the file is already a .pl file.</p>\n\n<p>I would like to have access to output the run gives me, as there might be error messages that are important to the user (e.g. missing files). Is there another way to achieve this?</p>\n\n<pre><code>    Dim myProcess As New System.Diagnostics.Process\n    myProcess.StartInfo.WorkingDirectory = \"K:\\Engineering\\Temp\\perl\"\n    myProcess.StartInfo.UseShellExecute = True\n    myProcess.StartInfo.FileName = \"perlcompare.pl\"\n    myProcess.StartInfo.Arguments = \"\"\"\" &amp; MasterFile &amp; \"\"\"\" &amp; \" \" &amp; \"\"\"\" &amp; MasterOutput &amp; \"\"\"\" &amp; \" \" &amp; \"\"\"\" &amp; ComparisonsOutput &amp; \"\"\"\"\n    myProcess.StartInfo.RedirectStandardOutput = True\n    myProcess.Start()\n\n    Dim sOutput As String\n    Using ProcessStreamReader As System.IO.StreamReader = myProcess.StandardOutput\n        sOutput = ProcessStreamReader.ReadToEnd()\n    End Using\n\n    MessageBox.Show(sOutput)   'txtOutput being the output textbox.\n</code></pre>\n\n<p>Quite new to the language and learning, so I will hound any clues you have for me.</p>\n"}, {"tags": ["perl", "nginx"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489502351, "post_id": 42788088, "comment_id": 72692094, "body": "Where does <code>$r</code> come from? Please show the full code you tried for the <code>perl_set</code> directive. Also, <code>$a</code> is a reserved variable used for <code>sort</code>. Don&#39;t use it for anything else."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489502573, "post_id": 42788088, "comment_id": 72692298, "body": "From the examples in <a href=\"http://nginx.org/en/docs/http/ngx_http_perl_module.html\" rel=\"nofollow noreferrer\">nginx.org/en/docs/http/ngx_http_perl_module.html</a> it looks like <code>123</code> is not a good return value for that function."}, {"owner": {"reputation": 37, "user_id": 7566517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f4ef0e6851eba7d2e618bb3a4bbd00?s=128&d=identicon&r=PG&f=1", "display_name": "chintans", "link": "https://stackoverflow.com/users/7566517/chintans"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489503538, "post_id": 42788088, "comment_id": 72693148, "body": "$r comes like my $r = shift; as given in link which you posted, I am referring same link only.  Also just here I mentioned $a  actually its my $t = time();"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489503771, "post_id": 42788088, "comment_id": 72693349, "body": "Please <a href=\"https://stackoverflow.com/posts/42788088/edit\">edit</a> your question and include that documentation link. Also inlcude that <code>$r = shift</code> part in your code."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489513055, "post_id": 42788088, "comment_id": 72700270, "body": "Probably won&#39;t make a difference, but try setting the header to <code>&quot;$t&quot;</code> instead of <code>$t</code>.  (While Perl itself happily converts to strings where needed, other things integrated with Perl don&#39;t necessarily do it right.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489513135, "post_id": 42788088, "comment_id": 72700335, "body": "Also, do try with stripped down code that exactly matches what you are showing us."}], "owner": {"reputation": 37, "user_id": 7566517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f4ef0e6851eba7d2e618bb3a4bbd00?s=128&d=identicon&r=PG&f=1", "display_name": "chintans", "link": "https://stackoverflow.com/users/7566517/chintans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1489505354, "creation_date": 1489500142, "last_edit_date": 1489505354, "question_id": 42788088, "link": "https://stackoverflow.com/questions/42788088/set-header-via-perl-function-when-invoked-from-sub-filter-in-nginx", "title": "set header via perl function when invoked from sub_filter in nginx", "body": "<p>I would like to set header via perl or nginscript when invoked through sub_filter like below</p>\n\n<pre><code>perl_set $abc '\n  sub {\n        my $r = shift;\n        my $v = 123; \n        $r-&gt;header_out(\"foo\", $v);\n        return $v;\n    }\n';\n\nserver {\n   location  / {\n         proxy_pass ...\n         ....\n         sub_filter  \"XYZ\"  $abc;\n    }\n\n}\n</code></pre>\n\n<p>I can see in response XYZ is getting replaced by 123, but header foo is not added.\nI can't add that header directly in location directive as perl function getting called twice for example if I add header like below then I noticed perl function gets invoked during add_header and also during sub_filter</p>\n\n<pre><code>set $xyz $abc; \nadd_header Foo $xyz;\nsub_filter \"XYZ\"  $xyz;\n</code></pre>\n\n<p>Can anyone please help how to achieve this ? </p>\n"}, {"tags": ["xml", "perl", "xml-parsing", "perl-module"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489500025, "post_id": 42787958, "comment_id": 72690245, "body": "You need to parse both responses individually, grab the values you are interested in, and then compare them. If you don&#39;t want all the data, but just those two specific values, XML::Twig is a good choice."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489501453, "post_id": 42788438, "comment_id": 72691430, "body": "I disagree. If all they need to do is compare two values, then this is pretty trivial, given they can write parsers for both formats. Again, that&#39;s also a fairly trivial exercise. XML::Compare, on the other hand, is not really of much here in my opinion, as the two documents have completely different structures. I believe you misread the question. :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1489501028, "creation_date": 1489501028, "answer_id": 42788438, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents/42788438#42788438", "title": "How do I compare certain values from different XML documents?", "body": "<p>This isn't a simple task to write from scratch. You should make use of <a href=\"https://metacpan.org/pod/XML::Compare\" rel=\"nofollow noreferrer\"><code>XML::Compare</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489505998, "post_id": 42788583, "comment_id": 72695023, "body": "Thank you a lot! DATA filr- shoul it be DATA.xml or just DATA? If I write it in DATA.xml <code>-&gt;parse(&#39;FILE1.xml&#39;); </code> I have error <code>you seem to have used the parse method on a filename (DATA.xml), you probably want parsefile instead at ParsingXMLDatei1.pl line 11.</code>  If I write just DATA:  <code>Name &quot;main::DATA&quot; used only once: possible typo at ParsingXMLDatei1.pl line 11. not well-formed (invalid token) at line 1, column 4, byte 4 at &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;perl5&#47;5.20&#47;XML&#47;Parser.pm line 187.  at ParsingXMLDatei1.pl line 11.</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489506223, "post_id": 42788583, "comment_id": 72695213, "body": "You want <code>parsefile(&#39;FILE1.xml&#39;)</code> - <code>__DATA__</code> is for inlining the code for illustration purposes."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1489506286, "post_id": 42788583, "comment_id": 72695270, "body": "I think I&#39;d do the above, but might go with a parse, and then <code>get_xpath</code> than <code>twig_handlers</code>."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489506618, "post_id": 42788583, "comment_id": 72695525, "body": "I wrote <code>parsefile(&#39;FILE1.xml&#39;);</code> I think it works, I have other error, but I&#39;ll try to fix it by myself...."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489508135, "post_id": 42788583, "comment_id": 72696749, "body": "How should I assign my FILE1. xml or FILE2.xml this variable <code>my $xml</code> ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489508617, "post_id": 42788583, "comment_id": 72697127, "body": "@StayCalm are you getting those two results from? Do you have them in the file system already? Or are they in the same program, and came back from some call with LWP? All my code examples stand alone, they are not a complete program. They are meant to illustrate a concept. You&#39;ll always have to adapt them to your exact situation."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489508687, "post_id": 42788583, "comment_id": 72697178, "body": "@Sobrique I keep forgetting about that. But I also have to look up the syntax for <code>twig_handlers</code> every time because I never use XML::Twig productively myself. You&#39;re right, <code>get_xpath</code> would be more concise."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489512729, "post_id": 42788583, "comment_id": 72700053, "body": "Thought I&#39;d offer up an example for the sake of comparison. And y&#39;know, I can&#39;t resist an opportunity for XML hackery :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1489501390, "creation_date": 1489501390, "answer_id": 42788583, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents/42788583#42788583", "title": "How do I compare certain values from different XML documents?", "body": "<p>You can use <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> to parse both responses. Each of them needs an individual parser.</p>\n\n<p>For the first one, you need to go for the two tags <code>&lt;deviceName&gt;</code> and <code>&lt;ipAddress&gt;</code>. A simple <a href=\"https://metacpan.org/pod/XML::Twig#twig_handlers\" rel=\"nofollow noreferrer\"><code>twig_handler</code></a> for each of them that access the <a href=\"https://metacpan.org/pod/XML::Twig#text-@optional_options\" rel=\"nofollow noreferrer\"><code>text</code></a> property of the matched element is sufficient. </p>\n\n<p>Those handlers can be complex, but in our case a code reference that deals with a single value is enough. We know that there is only one occurrence of each value, so we can directly assign both of them to their respective lexical variables.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy ($device_name, $ip_address);\nXML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        deviceName =&gt; sub { $device_name = $_-&gt;text },\n        ipAddress =&gt; sub { $ip_address = $_-&gt;text },\n    }\n)-&gt;parse(\\*DATA);\n\nsay $device_name;\nsay $ip_address;\n\n__DATA__\n&lt;?xml version=\"1.0\" ?&gt;\n&lt;queryResponse last=\"34\" first=\"0\" count=\"35\" type=\"Devices\" responseType=\"listEntityInstances\" requestUrl=\"https://hostname/webacs/api/v1/data/Devices?.full=true\" rootUrl=\"https://hostname/webacs/api/v1/data\"&gt;\n   &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/201\"&gt;\n      &lt;devicesDTO displayName=\"201201\" id=\"201\"&gt;\n        &lt;clearedAlarms&gt;0&lt;/clearedAlarms&gt;\n        &lt;collectionDetail&gt;&lt;/collectionDetail&gt;\n        &lt;collectionTime&gt;&lt;/collectionTime&gt;\n        &lt;creationTime&gt;&lt;/creationTime&gt;\n        &lt;criticalAlarms&gt;0&lt;/criticalAlarms&gt;\n        &lt;deviceId&gt;205571&lt;/deviceId&gt;\n        &lt;deviceName&gt;NEW-SW5&lt;/deviceName&gt;\n        &lt;deviceType&gt;Cisco Switch&lt;/deviceType&gt;\n        &lt;informationAlarms&gt;0&lt;/informationAlarms&gt;\n        &lt;ipAddress&gt;10.66.12.128&lt;/ipAddress&gt;\n      &lt;location&gt;&lt;/location&gt;\n        &lt;majorAlarms&gt;0&lt;/majorAlarms&gt;\n        &lt;managementStatus&gt;&lt;/managementStatus&gt;\n           &lt;manufacturerPartNrs&gt;\n               &lt;manufacturerPartNr&gt;&lt;/manufacturerPartNr&gt;\n           &lt;/manufacturerPartNrs&gt;\n           &lt;minorAlarms&gt;0&lt;/minorAlarms&gt;\n           &lt;productFamily&gt;&lt;/productFamily&gt;\n           &lt;reachability&gt;Reachable&lt;/reachability&gt;\n           &lt;softwareType&gt;IOS&lt;/softwareType&gt;\n           &lt;softwareVersion&gt;12.1(22)&lt;/softwareVersion&gt;\n           &lt;warningAlarms&gt;0&lt;/warningAlarms&gt;\n      &lt;/devicesDTO&gt;\n   &lt;/entity&gt;\n&lt;/queryResponse&gt;\n</code></pre>\n\n<p>For the second one you need to use <a href=\"https://metacpan.org/pod/XML::Twig#att-($att)\" rel=\"nofollow noreferrer\"><code>att()</code></a> to get the <em>name</em> attribute of one of the elements, but that's also straight-forward.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy ($device_name, $ip_address);\nXML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        'ns3:networkdevice' =&gt; sub { $device_name = $_-&gt;att('name') },\n        ipaddress =&gt; sub { $ip_address = $_-&gt;text },\n    }\n)-&gt;parse(\\*DATA);\n\nsay $device_name;\nsay $ip_address;\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n&lt;ns3:networkdevice name=\"NEW-SW5\" id=\"9a6ef750-2620-11e4-81be-b83861d71f95\" xmlns:ns2=\"ers.ise.cisco.com\" xmlns:ns3=\"network.ers.ise.cisco.com\"&gt;\n&lt;link type=\"application/xml\" href=\"https://hostname:9060/ers/config/networkdevice/123456\" rel=\"self\"/&gt;\n     &lt;authenticationSettings&gt;\n        &lt;enableKeyWrap&gt;false&lt;/enableKeyWrap&gt;\n        &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n        &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n        &lt;radiusSharedSecret&gt;******&lt;/radiusSharedSecret&gt;\n     &lt;/authenticationSettings&gt;\n     &lt;NetworkDeviceIPList&gt;\n       &lt;NetworkDeviceIP&gt;\n          &lt;ipaddress&gt;10.66.12.128&lt;/ipaddress&gt;\n          &lt;mask&gt;21&lt;/mask&gt;\n       &lt;/NetworkDeviceIP&gt;\n     &lt;/NetworkDeviceIPList&gt;\n     &lt;NetworkDeviceGroupList&gt;\n       &lt;NetworkDeviceGroup&gt;Location#All Locations&lt;/NetworkDeviceGroup&gt;\n       &lt;NetworkDeviceGroup&gt;Device Type#All Device Types&lt;/NetworkDeviceGroup&gt;\n &lt;/NetworkDeviceGroupList&gt;\n&lt;/ns3:networkdevice&gt;\n</code></pre>\n\n<p>Now you that you have both of these, you can combine that. I suggest to create a function for each of them, pass in the response XML and make them return the <code>$device_name</code> and <code>$ip_address</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nsub parse_response_1 {\n    my $xml = shift;\n\n    my ( $device_name, $ip_address );\n    XML::Twig-&gt;new(\n        twig_handlers =&gt; {\n            deviceName =&gt; sub { $device_name = $_-&gt;text },\n            ipAddress  =&gt; sub { $ip_address  = $_-&gt;text },\n        }\n    )-&gt;parse($xml);\n\n    return $device_name, $ip_address;\n}\n\nsub parse_response_2 {\n    my $xml = shift;\n\n    my ( $device_name, $ip_address );\n    XML::Twig-&gt;new(\n        twig_handlers =&gt; {\n            'ns3:networkdevice' =&gt; sub { $device_name = $_-&gt;att('name') },\n            ipaddress           =&gt; sub { $ip_address  = $_-&gt;text },\n        }\n    )-&gt;parse($xml);\n\n    return $device_name, $ip_address;\n}\n</code></pre>\n\n<p>Of course my names <code>parse_response_1</code> and <code>parse_response_2</code> are not the best choice. Don't use the numbers, use the names of the services that returned the responses instead.</p>\n\n<p>With those two functions we now have the means to retrieve exactly the information that we want. All that's left is to check them.</p>\n\n<pre><code>sub check {\n    my ( $response_1, $response_2 ) = @_;\n\n    my ( $device_name_1, $ip_address_1 ) = parse_response_1($response_1);\n    my ( $device_name_2, $ip_address_2 ) = parse_response_2($response_2);\n\n    return $device_name_1 eq $device_name_2 &amp;&amp; $ip_address_1 eq $ip_address_2;\n}\n</code></pre>\n\n<p>Again, the names of the variables could be better. Now you just need to call that with your two response XMLs and it will return a truthy value, or not.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5305573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iac8F.jpg?s=128&g=1", "display_name": "djtsheps", "link": "https://stackoverflow.com/users/5305573/djtsheps"}, "edited": false, "score": 0, "creation_date": 1489503150, "post_id": 42789092, "comment_id": 72692811, "body": "@StayCalm converting the xml to perl data is the easiest and allows you easy access to all the variables within the XML body"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489504261, "post_id": 42789092, "comment_id": 72693725, "body": "Please don&#39;t use XML::Simple in production code. It&#39;s not simple. Its author <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">discourages its use</a>, and the data structures that come out are not predictable, and hard to work with."}], "tags": [], "owner": {"reputation": 81, "user_id": 5305573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iac8F.jpg?s=128&g=1", "display_name": "djtsheps", "link": "https://stackoverflow.com/users/5305573/djtsheps"}, "is_accepted": false, "score": 1, "last_activity_date": 1489502705, "creation_date": 1489502705, "answer_id": 42789092, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents/42789092#42789092", "title": "How do I compare certain values from different XML documents?", "body": "<pre><code>use XML::Simple;\nuse Data::Dumper;\n\nmy $file1_ref = XMLin(\"./file1\");\nmy $file2_ref = XMLin(\"./file2\");\n\nif($file2_ref-&gt;{NetworkDeviceIPList}-&gt;{NetworkDeviceIP}-&gt;{ipaddress} eq $file1_ref-&gt;{entity}-&gt;{devicesDTO}-&gt;{ipAddress} &amp;&amp; $file2_ref-&gt;{name} eq $file1_ref-&gt;{entity}-&gt;{devicesDTO}-&gt;{deviceName}) {\n  print \"WebService1 already contains DeviceName \\\"\".$file2_ref-&gt;{name}.\"\\\"\\n\";\n} else {\n  # POST request and add this device in WebService1/WebService2\n  # Code here ....                                                                                                                                                                                                                                                              \n}\n</code></pre>\n\n<p>You can turn the calls into methods and I would strongly suggest that you add and eval around the conversion and check for errors just in case the returned XML is buggy</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489513620, "post_id": 42791619, "comment_id": 72700663, "body": "While this is a nice read and solid advice, it doesn&#39;t answer the question. The OP only wants to compare a few values inside of two completely differently structured documents."}], "tags": [], "owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "is_accepted": false, "score": 0, "last_activity_date": 1489509314, "creation_date": 1489509314, "answer_id": 42791619, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents/42791619#42791619", "title": "How do I compare certain values from different XML documents?", "body": "<p>First note that there is no universal agreement on what it means for two XML files to be \"the same\". For example, everyone agrees that whitespace within start and end tags should be ignored, and that the distinction between single and double quotes around attributes is irrelevant, and that attributes can be in any order; but requirements vary on how to handle comments, whitespace between element tags, namespace prefixes, and numerous other details.</p>\n\n<p>Another area where requirements vary is what information you want when documents are deemed different. Some mechanisms will only give you a yes-or-no answer, and won't help you find the differences.</p>\n\n<p>This has the consequence that there may be general-purpose solutions out there, but they might not always meet your specific requirements.</p>\n\n<p>So writing your own comparator isn't a ridiculous idea if you're prepared to write a few hundred lines of code.</p>\n\n<p>But two off-the-shelf solutions you could consider, if you can find examples that run in the Perl environment, are:</p>\n\n<ul>\n<li><p>XML canonicalizers: canonicalize both documents and then compare the results at the binary level.</p></li>\n<li><p>XPath 2.0: offers the function deep-equal() to compare two nodes (including document nodes)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489586973, "post_id": 42792568, "comment_id": 72736445, "body": "Thank you a lot. It works! I have just one question:  How can I change my elements in FILE2?  For example, I&#39;ve compared this two files and elements ipaddress and Name are not the same, that&#39;s why I want to have ipAddress and Name in FILE2 from the FILE1 because after that I make POST request with FILE2  (with the data from FILE1). I tried smth like this :  <code>$xml2-&gt;root-&gt;att(&#39;name&#39;) = $xml1-&gt;get_xpath( &#39;&#47;&#47;deviceName&#39;, 0 )-&gt;text ;   $xml2-&gt;get_xpath( &#39;&#47;&#47;ipaddress&#39;, 0 )-&gt;text = $xml1-&gt;get_xpath( &#39;&#47;&#47;ipAddress&#39;, 0 )-&gt;text ;</code>  But I don&#39;t think that that is right..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489587391, "post_id": 42792568, "comment_id": 72736775, "body": "You want <code>set_text</code> or <code>set_att</code> methods. And then you&#39;ll need to use <code>$xml2-&gt;print</code> or <code>$xml2-&gt;sprint</code>. Maybe with <code>$xml-&gt;set_pretty_print(&#39;indented_a&#39;)</code> or similar, for better formatting."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489754181, "post_id": 42792568, "comment_id": 72821470, "body": "one little question...if in file1 I have more that one device? How can I compare These files? For example there are 3 devices (It means I should check IP Address from file 2 three times.) I tied already <code>if (( $xml1-&gt;get_xpath( &#39;&#47;&#47;ipAddress&#39;, 0 )-&gt;text   eq $xml2-&gt;get_xpath( &#39;&#47;&#47;ipAddress&#39;, 0 )-&gt;text ) for $xml2-&gt;findnodes(&#39;&#47;&#47;ipAddress&#39;));</code> for tag IpAddress and <code>$xml2-&gt;findnodes( &#39;.&#47;ipAddress&#47;*&#39;);</code>  or is that totaly wrong?"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1489754272, "post_id": 42792568, "comment_id": 72821528, "body": "I can post new question if you want"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1489512670, "last_edit_date": 1495535396, "creation_date": 1489512081, "answer_id": 42792568, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents/42792568#42792568", "title": "How do I compare certain values from different XML documents?", "body": "<p>Much like <a href=\"https://stackoverflow.com/users/1331451/simbabque\">simbaque</a> I'd use <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a>, although I'd tackle it slightly differently - I'm offer this up for the sake of comparison - rather than using <code>twig_handlers</code> - which I'd call a powerful and useful technique, but particularly suitable for incremental parsing larger XML - something that uses <code>get_xpath</code> to look for <code>xpath</code> based references within the XML might provide an alternative. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $xml1 = XML::Twig-&gt;new-&gt;parsefile('test1a.xml');\nmy $xml2 = XML::Twig-&gt;new-&gt;parsefile('test1b.xml');\n\nif ( $xml1-&gt;get_xpath( '//deviceName', 0 )-&gt;text \n  eq $xml2-&gt;root-&gt;att('name') )\n{\n   print \"Name matches\\n\";\n}\n\nif ( $xml1-&gt;get_xpath( '//ipAddress', 0 )-&gt;text \n  eq $xml2-&gt;get_xpath( '//ipaddress', 0 )-&gt;text )\n{\n   print \"IP matches\\n\";\n}\n</code></pre>\n\n<p>We parse both files into an <code>XML::Twig</code> object, and then use <code>get_xpath</code> to look up the node location. <code>//</code> means anywhere in tree, and the <code>0</code> refers to which instance (e.g. the first, only). </p>\n\n<p>Ideally we might do some xpath strings to compare directly though - we can't here, because the 'name' attribute is an attribute of the root node (and one of the limitations of the <code>XML::Twig</code> xpath engine is you can't directly select attribute content). </p>\n\n<p>But with <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a> - which is more fully featured, at a cost of a somewhat steeper learning curve. I wouldn't use it <em>generally</em> but in this specific case it can handle the <code>xpath</code> expression to select an attribute of the root node.</p>\n\n<p>So that would be something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy %compare = (\n   '//deviceName' =&gt; '//@name',\n   '//ipAddress'  =&gt; '//ipaddress'\n);\n\nmy $search1 = XML::LibXML::XPathContext-&gt;new(\n                 XML::LibXML-&gt;load_xml( location =&gt; 'test1a.xml' ) );\nmy $search2 = XML::LibXML::XPathContext-&gt;new(\n                 XML::LibXML-&gt;load_xml( location =&gt; 'test1b.xml' ) );\n\nforeach my $key ( keys %compare ) {\n   my $first  = $search1-&gt;find($key);\n   my $second = $search2-&gt;find( $compare{$key} );\n\n   print \"$key = $first\\n\";\n   print \"$compare{$key} = $second\\n\";\n   print \"Matches found\\n\" if $first eq $second;\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 1, "accepted_answer_id": 42788583, "answer_count": 5, "score": 0, "last_activity_date": 1489513709, "creation_date": 1489499769, "last_edit_date": 1489513709, "question_id": 42787958, "link": "https://stackoverflow.com/questions/42787958/how-do-i-compare-certain-values-from-different-xml-documents", "title": "How do I compare certain values from different XML documents?", "body": "<p>I want to write code in Perl that compares two XML files.</p>\n\n<p>A Little bit from the history...\nWith API Documentation (get request) I get data1 form the Web Service1 and data2 from the Service2. They are presented in XML Format,  but not the same.</p>\n\n<p>I should compare <strong>just two elements</strong> in these files (deviceName and ipAddress), if they are the same in both files, It should be a message \" WebService1 already contains DeviceName \"Switch1\" \". If not - I would make POST request and add this device in WebService1/WebService2.</p>\n\n<p>Can you give me advice, what Modules should I use and how should I begin with this comparing? </p>\n\n<p>For example (file1)</p>\n\n<pre><code>   &lt;?xml version=\"1.0\" ?&gt;\n   &lt;queryResponse last=\"34\" first=\"0\" count=\"35\" type=\"Devices\" responseType=\"listEntityInstances\" requestUrl=\"https://hostname/webacs/api/v1/data/Devices?.full=true\" rootUrl=\"https://hostname/webacs/api/v1/data\"&gt;\n      &lt;entity dtoType=\"devicesDTO\" type=\"Devices\" url=\"https://hostname/webacs/api/v1/data/Devices/201\"&gt;\n         &lt;devicesDTO displayName=\"201201\" id=\"201\"&gt;\n           &lt;clearedAlarms&gt;0&lt;/clearedAlarms&gt;\n           &lt;collectionDetail&gt;&lt;/collectionDetail&gt;\n           &lt;collectionTime&gt;&lt;/collectionTime&gt;\n           &lt;creationTime&gt;&lt;/creationTime&gt;\n           &lt;criticalAlarms&gt;0&lt;/criticalAlarms&gt;\n           &lt;deviceId&gt;205571&lt;/deviceId&gt;\n           &lt;deviceName&gt;NEW-SW5&lt;/deviceName&gt;\n           &lt;deviceType&gt;Cisco Switch&lt;/deviceType&gt;\n           &lt;informationAlarms&gt;0&lt;/informationAlarms&gt;\n           &lt;ipAddress&gt;10.66.12.128&lt;/ipAddress&gt;\n         &lt;location&gt;&lt;/location&gt;\n           &lt;majorAlarms&gt;0&lt;/majorAlarms&gt;\n           &lt;managementStatus&gt;&lt;/managementStatus&gt;\n              &lt;manufacturerPartNrs&gt;\n                  &lt;manufacturerPartNr&gt;&lt;/manufacturerPartNr&gt;\n              &lt;/manufacturerPartNrs&gt;\n              &lt;minorAlarms&gt;0&lt;/minorAlarms&gt;\n              &lt;productFamily&gt;&lt;/productFamily&gt;\n              &lt;reachability&gt;Reachable&lt;/reachability&gt;\n              &lt;softwareType&gt;IOS&lt;/softwareType&gt;\n              &lt;softwareVersion&gt;12.1(22)&lt;/softwareVersion&gt;\n              &lt;warningAlarms&gt;0&lt;/warningAlarms&gt;\n         &lt;/devicesDTO&gt;\n      &lt;/entity&gt;\n   &lt;/queryResponse&gt;\n</code></pre>\n\n<p>File2</p>\n\n<pre><code>  &lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?&gt;\n  &lt;ns3:networkdevice name=\"NEW-SW5\" id=\"9a6ef750-2620-11e4-81be-b83861d71f95\" xmlns:ns2=\"ers.ise.cisco.com\" xmlns:ns3=\"network.ers.ise.cisco.com\"&gt;\n  &lt;link type=\"application/xml\" href=\"https://hostname:9060/ers/config/networkdevice/123456\" rel=\"self\"/&gt;\n       &lt;authenticationSettings&gt;\n          &lt;enableKeyWrap&gt;false&lt;/enableKeyWrap&gt;\n          &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n          &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n          &lt;radiusSharedSecret&gt;******&lt;/radiusSharedSecret&gt;\n       &lt;/authenticationSettings&gt;\n       &lt;NetworkDeviceIPList&gt;\n         &lt;NetworkDeviceIP&gt;\n            &lt;ipaddress&gt;10.66.12.128&lt;/ipaddress&gt;\n            &lt;mask&gt;21&lt;/mask&gt;\n         &lt;/NetworkDeviceIP&gt;\n       &lt;/NetworkDeviceIPList&gt;\n       &lt;NetworkDeviceGroupList&gt;\n         &lt;NetworkDeviceGroup&gt;Location#All Locations&lt;/NetworkDeviceGroup&gt;\n         &lt;NetworkDeviceGroup&gt;Device Type#All Device Types&lt;/NetworkDeviceGroup&gt;\n   &lt;/NetworkDeviceGroupList&gt;\n  &lt;/ns3:networkdevice&gt;\n</code></pre>\n\n<p>There is smth special: In file1 my tags called: <strong>deviceName, ipAddress</strong> and they are <strong>elements</strong>.<br>\nIn file2 we have one attribute (because it is staying in the main element <strong>ns3:networkdevice</strong> and it's called <strong>name</strong> what responds our deviceName from file1 )  and the other element is called <strong>ipaddress</strong> (ipAddress in file1)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489486083, "post_id": 42782906, "comment_id": 72680001, "body": "It says that <code>${^UNICODE}</code> reflects the numeric value of the stuff behind <code>-C</code> and, above in the table it says that <code>A</code> is <code>32</code>, so you probably need the 6th bit I guess."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489486254, "post_id": 42782906, "comment_id": 72680127, "body": "@simbabque Thanks! I totally missed that part. It seems to work fine (<code>if ( !(${^UNICODE} &amp; 0x20) ) { .. }</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489511608, "post_id": 42782906, "comment_id": 72699294, "body": "<code>utf8::decode($_) for @ARGV;</code> (Faster, and doesn&#39;t require any modules.)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1489497945, "last_edit_date": 1489497945, "creation_date": 1489486696, "answer_id": 42783237, "question_id": 42782906, "link": "https://stackoverflow.com/questions/42782906/how-to-determine-if-command-line-argument-have-already-been-decoded/42783237#42783237", "title": "How to determine if command line argument have already been decoded?", "body": "<p><a href=\"http://perldoc.perl.org/perlrun.html#*-C-%5B_number%2Flist_%5D*\" rel=\"nofollow noreferrer\"><code>perlrun</code> says</a> that the <code>A</code> part of the <code>-C</code> flag corresponds to <code>32</code> (emphasis mine).</p>\n\n<blockquote>\n  <p>As of 5.8.1, the -C can be followed either by a number or a list of\n  option letters. The letters, <strong>their numeric values</strong>, and effects are as\n  follows; listing the letters is equal to summing the numbers.</p>\n\n<pre><code>[...]\nA    32   the @ARGV elements are expected to be strings encoded\n          in UTF-8\n</code></pre>\n</blockquote>\n\n<p>Further down it says that <code>${^UNICODE}</code> reflects the numeric values of the stuff set behind the <code>-C</code> flag. So the correct way to check that <code>-CA</code> wasn't used would be <code>!( ${^UNICODE} &amp; 0x20 )</code>.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 42783237, "answer_count": 1, "score": 4, "last_activity_date": 1489497945, "creation_date": 1489485852, "question_id": 42782906, "link": "https://stackoverflow.com/questions/42782906/how-to-determine-if-command-line-argument-have-already-been-decoded", "title": "How to determine if command line argument have already been decoded?", "body": "<p>I would like to decode <code>@ARGV</code> if (and only if) a script was <strong>not</strong> run with <code>-CA</code> command line option. For example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Encode qw(decode_utf8);\nBEGIN {\n    if ( ... ) {    # &lt;--- What condition to put here?\n        @ARGV = map { Encode::decode_utf8( $_ ) } @ARGV;\n    }\n}\n</code></pre>\n\n<p>I have found the variable <code>${^UNICODE}</code> in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\"><code>perlvar</code></a> and <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perlrun</code></a> but it seems that it's not documented which bit correspond to the <code>A</code> flag.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489487266, "post_id": 42781870, "comment_id": 72680926, "body": "Have you really encoded your username and password in the URL that you&#39;ve posted on the internet? But it might be that you&#39;ve got an <code>@</code> in your password that&#39;s causing the problem."}, {"owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489489963, "post_id": 42781870, "comment_id": 72682902, "body": "thanks for  you reply, i have tired the same code for one file name(hard code) it was works fine"}], "owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489489248, "creation_date": 1489482836, "last_edit_date": 1489489248, "question_id": 42781870, "link": "https://stackoverflow.com/questions/42781870/pass-some-value-to-winscp-script-from-perl", "title": "pass some value to winscp script from perl", "body": "<p>Am creating one script to pass multiple file to winscp script through perl  like i have 10 file in my folder i need to pass each one file to winscp script,</p>\n\n<pre><code>$get='file.txt';\n#system('winscp.com /ini=nul /command \"open sftp://c400597:Pandi@123@dev/ - hostkey=\"\"ssh-rsa 2048 5c:07:0d:9f:c6:dd:41:62:b5:0a:e6:0c:c3:7a:94:2d\"\"\" \"put $get\" \"exit\"');\n\nsystem('winscp.com /ini=nul /command \"open sftp://c400597:Pandi@123@dev/ -hostkey=\"\"ssh-rsa 2048 5c:07:0d:9f:c6:dd:41:62:b5:0a:e6:0c:c3:7a:94:2d\"\"\" \"put $get\" \"exit\"');\nprint \"above statement executed 0\\n\";\n#system('winscp.com /ini=nul /command \"open sftp://c400597:Pandi@123@dev/ -hostkey=\"\"ssh-rsa 2048 5c:07:0d:9f:c6:dd:41:62:b5:0a:e6:0c:c3:7a:94:2d\"\"\"');\n#print \"above statement executed 1\\n\";\n#system('winscp.com /ini=nul /command \"put \"'.$get);\n#print \"above statement executed 2\\n\";\nsystem ('winscp.com /ini=nul /command \"exit\"');\nprint \"above statement executed 3\\n\";\n#winscp.com /ini=nul /command \"open sftp://user:password@example.com/ -hostkey=\"\"ssh-rsa 2048 xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\"\"\"\n# \"get examplefile.txt d:\\\" \"exit\"\n#system(\"$x.\" \".$y.\" \".$z\") || die \"cannot open\";\n#\n}\nclosedir $db;\n</code></pre>\n\n<p>i need to pass $get variable to that winscp script.</p>\n\n<p>I have tired several method to achieve this requirement but i cannot complete it could anyone help me?</p>\n"}, {"tags": ["perl", "www-mechanize"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "edited": false, "score": 0, "creation_date": 1490072855, "post_id": 42782369, "comment_id": 72936121, "body": "how do you get this url?"}, {"owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "reply_to_user": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "edited": false, "score": 0, "creation_date": 1495618199, "post_id": 42782369, "comment_id": 75325382, "body": "You can get this using a debugging tool. For eg:- Live http header in firefox"}], "tags": [], "owner": {"reputation": 124, "user_id": 7208743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2087289e2d292c565a792961070ec894?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Motani", "link": "https://stackoverflow.com/users/7208743/sagar-motani"}, "is_accepted": true, "score": 0, "last_activity_date": 1489484309, "creation_date": 1489484309, "answer_id": 42782369, "question_id": 42781819, "link": "https://stackoverflow.com/questions/42781819/how-can-i-download-file-using-click-method-using-perl/42782369#42782369", "title": "how can i download file using click method using perl?", "body": "<p>Directly hit the url as below and write data to a .xls file</p>\n\n<pre><code>use WWW::Mechanize;\nmy $mech = WWW::Mechanize-&gt;new(autocheck =&gt; 0);\n$mech-&gt;get(\"http://www.ncdex.com/MarketDataAction_bhavCopySubmit.action?bhavTitle=bhav&amp;dateSelected=13%2F03%2F2017&amp;buttonType=xls+Format\");\nmy $data = $mech-&gt;content;\nprint $data;\n</code></pre>\n\n<p>You can check the code by running it and redirecting output to .xls file\nEg:- perl test.pl > output.xls</p>\n"}], "owner": {"reputation": 53, "user_id": 6634729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8fbd232a5b4a7080d2b06774f176eb51?s=128&d=identicon&r=PG&f=1", "display_name": "Sanket", "link": "https://stackoverflow.com/users/6634729/sanket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42782369, "answer_count": 1, "score": 0, "last_activity_date": 1489484309, "creation_date": 1489482649, "question_id": 42781819, "link": "https://stackoverflow.com/questions/42781819/how-can-i-download-file-using-click-method-using-perl", "title": "how can i download file using click method using perl?", "body": "<p>I am trying to download xls file from website\n<a href=\"http://www.ncdex.com/MarketDataAction_bhavCopy.action\" rel=\"nofollow noreferrer\">http://www.ncdex.com/MarketDataAction_bhavCopy.action</a></p>\n\n<p>using Mechanize module click method,\nbut it gives error like :</p>\n\n<p>Error POSTing <a href=\"http://www.ncdex.com/MarketDataAction_bhavCopySubmit.action\" rel=\"nofollow noreferrer\">http://www.ncdex.com/MarketDataAction_bhavCopySubmit.action</a>: Not Found at click_method.pl line 6.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>use WWW::Mechanize;\nmy $mech = WWW::Mechanize-&gt;new();\nmy $url = 'http://www.ncdex.com/MarketDataAction_bhavCopy.action';\n$mech-&gt;get( $url );\n$mech-&gt;submit_form(\n                fields      =&gt; {\n                        'dateSelected' =&gt; '13/03/2017',\n                }\n        );\n$mech-&gt;click_button(\n                name =&gt; \"buttonType\",\n                id =&gt; \"buttonType\",\n                value =&gt; \"xls Format\",\n                type =&gt; \"submit\"\n        );\n\nprint $mech-&gt;content();\n</code></pre>\n\n<p>I want to download xls file from this website for date 13/03/2017 or any other date</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1489486291, "post_id": 42781075, "comment_id": 72680161, "body": "What have you tried? What problems are you having? StackOverflow is not a &quot;write my code for me&quot; service."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "edited": false, "score": 0, "creation_date": 1489482069, "post_id": 42781246, "comment_id": 72677283, "body": "<code>my $filename=&#39;&#47;path&#47;test.txt&#39;;</code>  Where is the place should i put <code>$filename</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1489482737, "post_id": 42781246, "comment_id": 72677705, "body": "as a style point - I&#39;d recommend using <code>&#47;,&#47;</code> in split, instead of a quote, because that way it&#39;s entirely clear that it&#39;s using a regex rather than a &#39;plain string&#39;."}], "tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 1, "last_activity_date": 1489497634, "last_edit_date": 1489497634, "creation_date": 1489480835, "answer_id": 42781246, "question_id": 42781075, "link": "https://stackoverflow.com/questions/42781075/how-to-fetch-text-file-to-array-in-perl/42781246#42781246", "title": "How to fetch text file to array in perl", "body": "<p>I think there are some mistakes in the expected result and the printing loop. Here is how I would do it:</p>\n\n<pre><code>my $filename='/path/test.txt';\nopen (my $fh, '&lt;', $filename) or die \"Can't open $filename: $!\";\nmy @array;\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    push @array, [split ',', $line];\n}\n\nmy $s_size = scalar(@array);\nfor(my $i=0; $i&lt;$s_size;$i++)\n{\nprint (\"$array[$i][0]\\n\");\nprint (\"$array[$i][1]\\n\");\n}\n</code></pre>\n\n<p>the result is:</p>\n\n<pre><code>2017-03-13 00\nr1\n2017-03-13 01\nr2\n2017-03-13 02\nr3\n2017-03-13 03\nr4\n</code></pre>\n\n<p>We can also do it in one line if you like:</p>\n\n<pre><code>my @array = map {chomp; [split ',']} &lt;&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": false, "score": 1, "last_activity_date": 1489483340, "last_edit_date": 1489483340, "creation_date": 1489481620, "answer_id": 42781500, "question_id": 42781075, "link": "https://stackoverflow.com/questions/42781075/how-to-fetch-text-file-to-array-in-perl/42781500#42781500", "title": "How to fetch text file to array in perl", "body": "<p>I think there's some mix-up in what you request. It seems your expected output doesn't match in any way the output your code is intended to give. If we keep to the code, this will give you your output (given this filename):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = '/path/to/file';\nopen my $FILE, '&lt;', $filename or die $!;\n\nwhile(my $line = &lt;$FILE&gt;) {\n    chomp $line;\n    my @array = split(/,/, $line);\n    print \"$array[0]\\n\";\n    print \"$array[1]\\n\";\n}\nclose $FILE;\n</code></pre>\n\n<p>This simplifies your code. If you want it to be as your expected output, simply <code>push @array2, $array[1]</code> (here, <code>@array2</code> is a new array you need to declare) and print it after the <code>while</code> loop.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489482279, "post_id": 42781515, "comment_id": 72677427, "body": "I think if all I&#39;m doing is a chomp and push, I&#39;d consider using <code>map</code> instead.  <code>my @lines = map { chomp; [split &#47;,&#47;] } &lt;&gt;;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489482729, "post_id": 42781515, "comment_id": 72677703, "body": "Given the input data - <code>\\s*</code> in the split is also redundant, as there&#39;s no whitespace on either side of the commas."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1489482905, "post_id": 42781515, "comment_id": 72677797, "body": "@Sobrique for the given data the <code>\\s*</code> doesn&#39;t hurts. In a case, where are spaces around commas, usually (at least me), want data with trimmed spaces."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1489484497, "last_edit_date": 1489484497, "creation_date": 1489481664, "answer_id": 42781515, "question_id": 42781075, "link": "https://stackoverflow.com/questions/42781075/how-to-fetch-text-file-to-array-in-perl/42781515#42781515", "title": "How to fetch text file to array in perl", "body": "<p>One of more possible solutions could be</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nmy @lines;\nwhile(&lt;&gt;) {\n    chomp;\n    push @lines, [split /\\s*,\\s*/];\n}\nsay $_-&gt;[0] for @lines;\nsay $_-&gt;[1] for @lines;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>2017-03-13 00\n2017-03-13 01\n2017-03-13 02\n2017-03-13 03\nr1\nr2\nr3\nr4\n</code></pre>\n\n<p>As @Sobrique and also @BOC said, you can use</p>\n\n<pre><code>my @lines = map { chomp; [split /,/] } &lt;&gt;;\nsay $_-&gt;[0] for @lines;\nsay $_-&gt;[1] for @lines;\n</code></pre>\n\n<p>and finally by</p>\n\n<ul>\n<li>using a the <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> module</li>\n<li>having a <code>$filename</code></li>\n</ul>\n\n\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse Text::CSV;\n\nmy $filename = \"xd.csv\";\n\nmy $csv = Text::CSV-&gt;new({auto_diag =&gt; 1, binary =&gt; 1});\n\nopen my $fh, '&lt;', $filename or die \"$filename: $!\";\nmy $lines = $csv-&gt;getline_all($fh); #note the arrayref\nclose($fh);\n\nsay $_-&gt;[0] for @$lines;\nsay $_-&gt;[1] for @$lines;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7409514, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b62bbded041206256a534e93ac686257?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Nguyen", "link": "https://stackoverflow.com/users/7409514/rafael-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1489497634, "creation_date": 1489480237, "last_edit_date": 1489481918, "question_id": 42781075, "link": "https://stackoverflow.com/questions/42781075/how-to-fetch-text-file-to-array-in-perl", "title": "How to fetch text file to array in perl", "body": "<p>I have a text file without header as bellow format: </p>\n\n<pre>\n2017-03-13 00,r1,306011,306011,OK,Allgood.\n2017-03-13 01,r2,20369,20369,OK,Allgood.\n2017-03-13 02,r3,283751,283751,OK,Allgood.\n2017-03-13 03,r4,53017,53017,OK,Allgood.\n</pre>\n\n<p>How to fetch this file to array in perl ? I want to print out them with the looping. </p>\n\n<pre><code>my $s_size = scalar(@array);\nfor(my $i=1; $i&lt;=$s_size;$i++)\n{\n    print (\"$array[$i][0]\\n\");\n    print (\"$array[$i][1]\\n\");\n}\n</code></pre>\n\n<p>The expected result: </p>\n\n<pre>\n2017-03-13 00\n2017-03-13 01\n2017-03-13 02\n2017-03-13 03\nr1\nr2\nr3\nr4\n</pre>\n"}, {"tags": ["regex", "perl", "if-statement", "foreach", "hashmap"], "comments": [{"owner": {"reputation": 1427, "user_id": 4381423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5qHX.jpg?s=128&g=1", "display_name": "Mark Mucha", "link": "https://stackoverflow.com/users/4381423/mark-mucha"}, "edited": false, "score": 0, "creation_date": 1489471902, "post_id": 42778691, "comment_id": 72672058, "body": "Can you provide an example line from the file?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489471958, "post_id": 42778691, "comment_id": 72672080, "body": "What you are saying is that the second regex isn&#39;t finding the pattern on the line, in short.  Can you show us some data?  There are a number of other comments, but this is the first thing."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1489472697, "post_id": 42778691, "comment_id": 72672406, "body": "<code>if ($line =~ m&#47;\\&#39;, (.*?)\\, &#47;g)</code> instead <code>if ($line =~ m&#47;\\&#39;, (.*?)\\, &#47;)</code> and ` if ($line =~ m/\\&#39;(.*?)\\&#39;/g)` instead ` if ($line =~ m/\\&#39;(.*?)\\&#39;/)` It will work might be."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489478941, "post_id": 42778691, "comment_id": 72675553, "body": "I may have not said it clearly: there is nothing with your regex that is wrong so to make it not match.  What means that your data may just not have that <code>&#39;.*?&#39;</code> pattern.  Also, note that <code>.*</code> matches <i>nothing</i> as well, so if you have <code>&#39;&#39;</code> first on the line then that&#39;s what you&#39;ll catch."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489483321, "post_id": 42778691, "comment_id": 72678055, "body": "Shouldn&#39;t <code>$CDE_instances</code> be <code>$definitions</code> or vice versa?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1489483718, "post_id": 42778691, "comment_id": 72678295, "body": "<i><code>not returning any value</code></i> -- do you mean <code>undef</code> or just an empty string?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489519566, "post_id": 42778691, "comment_id": 72704248, "body": "<code>if (&#47;&#47;g)</code> makes no sense. <code>if (&#47;&#47;g)</code> should be <code>if (&#47;&#47;)</code>. <code>if (&#47;&#47;g)</code> could very well be the source of your problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489529003, "post_id": 42778691, "comment_id": 72709420, "body": "I extended the previous brief comment on <code>&#47;g</code>, see the end of my answer."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489482950, "post_id": 42779515, "comment_id": 72677828, "body": "Sometimes there&#39;s a reason to test then assign - if you&#39;re overwriting an existing variable, because no match means you&#39;re overwriting it with <code>undef</code>. (Which is what happens with the second match, rather than the first)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489483369, "post_id": 42779515, "comment_id": 72678083, "body": "@Sobrique Yes, a good point. Corrected the statement, will reconsider the code. Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489519690, "post_id": 42779515, "comment_id": 72704312, "body": "Re &quot;<i>The <code>&#47;g</code> makes no sense here</i>&quot;, And this is the cause of the OP&#39;s problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489520196, "post_id": 42779515, "comment_id": 72704582, "body": "@ikegami  I thought of that, but my test still sticks the match into <code>$1</code> when I add <code>&#47;g</code> ... will try more, thank you.  I don&#39;t know what <code>&#47;g</code> does here (doesn&#39;t seem to jump over iterations)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489520532, "post_id": 42779515, "comment_id": 72704776, "body": "That&#39;s because you don&#39;t have <code>if (&#47;&#47;g)</code> like the OP does. Test: <code>perl -E&#39;$_=&quot;\\x27abc\\x27, 123, &quot;; say &quot;!1&quot; if &#47;\\x27, (.*?), &#47;g; say &quot;!2&quot; if &#47;\\x27(.*?)\\x27&#47;g;&#39; </code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489521262, "post_id": 42779515, "comment_id": 72705224, "body": "@ikegami Thank you! I meant that <i>when I add</i> <code>&#47;g</code> my code doesn&#39;t reproduce error -- apparently I didn&#39;t correctly reproduce their two<code>if</code> in my test. I&#39;ll amend comments.  Btw, your one-liner just showed me how to use <code>&#39;</code> in one-liner regex :))  Never thought of that, simple as it is :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489522438, "post_id": 42779515, "comment_id": 72705871, "body": "Can also replace <code>&#39;</code> with <code>&#39;\\&#39;&#39;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489523034, "post_id": 42779515, "comment_id": 72706259, "body": "@ikegami oh ... really. wow, they just continue.  thank you :)   That <code>&#47;g</code> with two <code>if</code>s is <i>bad</i> -- need it on <i>both</i> for behavior to differ."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "edited": false, "score": 0, "creation_date": 1489707737, "post_id": 42779515, "comment_id": 72801759, "body": "Thank you very much for your thorough response. My small problem was solved and I learned much more about perl from the discussion and will be utilizing your recommendations in the future."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "edited": false, "score": 0, "creation_date": 1489708043, "post_id": 42779515, "comment_id": 72801850, "body": "just one question -- could you clarify the use of 5.012? Is it necessary?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "edited": false, "score": 0, "creation_date": 1489724471, "post_id": 42779515, "comment_id": 72806228, "body": "@jelly You are welcome :)  There is quite a bit here, let me know if questions pop up later.  The <code>use 5.012</code> requires that it is at least that version of Perl.  This is needed to be able to use &quot;<i>bare</i>&quot; <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> in a <code>while</code> loop, so that it sets <code>$_</code> every time through, <code>while (readdir $dh) { say $_ }</code>.  That capability was introduced in version v5.12.  Your code assigns to a variable (<code>$file</code>) and thus doesn&#39;t use this, but I included the <code>use 5.012</code> guard just in case."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "edited": false, "score": 0, "creation_date": 1489725375, "post_id": 42779515, "comment_id": 72806490, "body": "@jelly  Thanks for asking, this needed a comment I think. I added a little to the comment in code and added another bullet on this.  To answer more directly (in case the above didn&#39;t) -- for the code you have you don&#39;t need <code>use 5.012;</code>.  If the code is always going to run on versions later than v5.12 you don&#39;t need that statement either."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1490686842, "last_edit_date": 1495541846, "creation_date": 1489474570, "answer_id": 42779515, "question_id": 42778691, "link": "https://stackoverflow.com/questions/42778691/perl-regex-matching-same-line/42779515#42779515", "title": "perl regex matching same line", "body": "<p>The question can't be fully answered until we see some data.</p>\n\n<p>In the meanwhile here are some comments on the code.  First the program</p>\n\n<pre><code>use warnings;\nuse strict;\nuse 5.012;   # so readdir assigns to $_ in  while (readdir $dh)\n\nmy %definitions;\n\nmy $dir = '/path/to/dir';\nopendir my $dh, $dir  or die \"Can't open $dir: $!\";\n\nwhile (my $file = readdir($dh))\n{\n    next if $file =~ /^\\./;\n    next if -d $file;        # make sure we don't try to open() a dir\n\n    open my $fh, '&lt;', \"$dir/$file\" or die \"Can't open $dir/$file: $!\";\n\n    while (my $line = &lt;$fh&gt;)\n    {\n        if (my ($num) = $line =~ m/', (.*?), / and    #' \n            my ($val) = $line =~ m/'(.*?)'/       )     \n        {\n            $definitions{$file}{$num} = $val;\n        }   \n    }   \n    close $fh;\n}    \nclose $dh;\n</code></pre>\n\n<p>It may well be that you can do both matches nicely in one regex. Please show us some data.</p>\n\n<p>Comments</p>\n\n<ul>\n<li><p>Please <em>always</em> have <code>use warnings;</code>, and <code>use strict;</code></p></li>\n<li><p>Extra indentation may seem helpful but it most often makes it harder to follow</p></li>\n<li><p>Use lexical filehandles, <code>my $fh</code> instead of <code>FILE</code> (etc) -- they are just better</p></li>\n<li><p>Since v5.12 <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a> assigns to <code>$_</code> when used as <code>while (readdir $dh)</code>. It is then prudent to require at least that version, thus <code>use 5.012</code>. I include it in case this does get used</p></li>\n<li><p>We rarely need to read the file into an array first. Read line by line, <code>while (&lt;$fh&gt;)</code></p></li>\n<li><p><em>Declare in small scope.</em>  The global <code>$num</code> in posted code allows a bug: when the first regex fails but second matches, a value is assigned to the key <code>$num</code> found <em>previously</em>.  The reason is the use of separate <code>if</code>s for things with dependencies, but local <code>my $num</code> would help.</p></li>\n<li><p>Can assign from a match, <code>my ($var) = $string =~ /.../</code>, unless there is a specific reason to first test then assign.  Note parentheses, to impose the <em>list <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a></em> on the <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">match operator</a> since in that context it returns the list of the matches. See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a></p></li>\n<li><p>Can declare and assign inside <code>if</code> condition, like you do with <code>while</code>. The variable is seen within that scope, just as it should be. This pulls the processing into its own block, usually making the code clearer. We need to see data for a possibly better way to do this.</p></li>\n<li><p>The <code>/g</code> makes no sense here, while it acts in a complex way. See comment at the end</p></li>\n<li><p>Extra escaping in regex: no need to escape <code>'</code> nor <code>,</code></p></li>\n<li><p>The <code>while</code> loop can be written</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    if (my ($num) = /.../ and my ($val) = /.../)    ...\n</code></pre>\n\n<p>utilizing the <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">$_ variable</a> which is regex's default, as it is for many other operations in Perl.</p></li>\n</ul>\n\n<p>To venture into some guessing:</p>\n\n<ul>\n<li><p>The pattern <code>.*</code> also matches <em>nothing</em>, so if you have <code>''</code> before <code>'stuff'</code> on the line then your pattern <code>'(.*?)'</code> will match <code>''</code>, capturing an empty string.</p></li>\n<li><p>The second regex matches, but the first failed so there is no key to assign to. This agrees with your tests on regex alone. (You'd hear about it with <code>use warnings</code> in effect.)</p></li>\n</ul>\n\n<hr>\n\n<p>The presence of <code>/g</code> in both regex is wrong and it is likely the direct error (but note the others). Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments.  From <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">Matching in list context in perlop</a></p>\n\n<blockquote>\n  <p>In scalar context, each execution of <code>m//g</code> finds the next match, returning true if it matches, and false if there is no further match. &nbsp; [ ... ]</p>\n</blockquote>\n\n<p>This is normally used in constructs like <code>while (/(...)/g) { ... }</code> where  scanning of the string at each iteration continues <em>from where it matched last</em>, looking for the <em>next match</em>. So one matches is found in each iteration and they are thus processed one at a time inside the loop. </p>\n\n<p>The phrase \"<em>finds the next match</em>\" from docs hides complex behavior, which the two <code>if</code> conditions with <code>/g</code> seriously mess with. This can be seen by testing in a separate small script.</p>\n\n<p>The behavior in the list context differs, <code>my @all_matches = /(...)/g;</code>. See docs.</p>\n"}], "owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 42779515, "answer_count": 1, "score": 1, "last_activity_date": 1490686842, "creation_date": 1489471041, "last_edit_date": 1489720933, "question_id": 42778691, "link": "https://stackoverflow.com/questions/42778691/perl-regex-matching-same-line", "title": "perl regex matching same line", "body": "<p>The first <code>if ($line =~ ...)</code> statement is returning the correct match ($1), which is being assigned to num.</p>\n\n<p>The second <code>if ($line =~ ...)</code> statement is not returning any value, and thus nothing is being assigned to the definitions hash. I tested this regex statement separately, and it does return the correct match ($1).</p>\n\n<p>I would like <code>$definitions{$file}{$num}</code> to be assigned to the return value of the second regex expression.</p>\n\n<p>Thanks for any help. I am a perl/regex beginner.</p>\n\n<pre><code>my $dir = \"/.../...\";\nmy %definitions;\nmy $num;\n\nopendir (DIR, $dir) or die $!;\n    while (my $file = readdir(DIR)) {\n        next if ($file =~ m/^\\./);\n        open FILE, \"&lt;$dir/$file\" or die $!;\n        my @lines = &lt;FILE&gt;;\n            foreach my $line (@lines) {\n                if ($line =~ m/\\', (.*?)\\, /g) {\n                    $num = $1;\n                }\n                if ($line =~ m/\\'(.*?)\\'/g) { # no match is found\n                    $definitions{$file}{$num} = $1; # nothing is assigned\n                }\n            }\n        close FILE;\n    }\nclosedir DIR;\n</code></pre>\n\n<p><strong>edit:</strong></p>\n\n<p>example of data file: (other files are much longer, this is the shortest one)</p>\n\n<p>('sodium cations', 169, 183), \n('ID 3006450 289000 - 440000', 10, 36)</p>\n\n<p>I am trying to extract what is between the single quotes and assign it to definitions, and take the first number after that and assign it to num.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1489461797, "post_id": 42777017, "comment_id": 72669287, "body": "you can check if at least one of them exists, but can only capture one of them if both exist.  if($element =~ m&#39;&lt;value&gt;.*&lt;/value&gt;|&lt;isfixed&gt;.*&lt;/isfixed&gt;&#39;i){} if you put parentheses arount .*, you&#39;d only get the value of the first one if both tags exist due to shortcut evaluation."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489483990, "post_id": 42777017, "comment_id": 72678471, "body": "Are you sure that&#39;s <i>exactly</i> how your XML looks? It&#39;s looks a bit oddly structured. (e.g. I&#39;d expect &#39;parent&#39; nodes of name elements)."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1489460738, "last_edit_date": 1495542726, "creation_date": 1489460738, "answer_id": 42777069, "question_id": 42777017, "link": "https://stackoverflow.com/questions/42777017/perl-regex-matching-keywords-may-or-may-not-exist/42777069#42777069", "title": "Perl regex matching: keywords may or may not exist", "body": "<p>That data looks like XML. Parse it using a library like <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a>, then perform operations on the resulting structure.</p>\n\n<p>Do not use regular expressions to process XML. <a href=\"https://stackoverflow.com/a/1732454/149341\">The results are just as bad as trying to use regular expressions for HTML.</a></p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1489484454, "creation_date": 1489484454, "answer_id": 42782424, "question_id": 42777017, "link": "https://stackoverflow.com/questions/42777017/perl-regex-matching-keywords-may-or-may-not-exist/42782424#42782424", "title": "Perl regex matching: keywords may or may not exist", "body": "<p>XML is context sensitive. Regular expressions are not. You cannot reliably parse XML with regular expressions for this reason.</p>\n\n<p>So use a parser. I like <code>XML::Twig</code>, and it would go a bit like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nuse Data::Dumper;\n\nmy $twig = XML::Twig -&gt; new -&gt; parsefile ( 'your_file.xml' );\n\nmy @keys = qw ( Name Value IsFixed ); \n\nmy @rows; \nmy %current_row; \n#iterate children\nforeach my $node ( $twig -&gt; root -&gt; children ) { \n   #extract tag and content\n   my $tag = $node -&gt; tag;\n   my $content = $node -&gt; text; \n   $current_row{$tag} = $content; \n   #if it's a name tag, assume it's a new row. \n   if ($tag eq 'Name' and %current_row) {\n       push @rows, {%current_row};\n       undef %current_row;\n   }\n}\n#output results. \nprint join \",\", @keys, \"\\n\";\nforeach my $row ( @rows ) {\n   print join \",\", (map { $row -&gt; {$_} // '' } @keys),\"\\n\";\n}\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>Name,Value,IsFixed,\nIncludeLeafPortfolios,,,\nHierarchyDate,True,,\nHierarchyDate,,false,\nHierarchyDate,,,\nHierarchyDate,0,false,\n</code></pre>\n\n<p>I would, however, note that your XML is messy - are you sure that's how it's structured? Because <em>normally</em> if you've got 'associated' tags, then they're grouped within a node. </p>\n\n<p>e.g.  something like:</p>\n\n<pre><code>&lt;xml&gt;\n  &lt;item&gt;\n     &lt;Name&gt;HierarchyDate&lt;/Name&gt;&lt;DataType&gt;Int&lt;/DataType&gt;&lt;IsFixed&gt;false&lt;/IsFixed&gt;\n  &lt;/item&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>Which would greatly simplify the problem,  because you could:</p>\n\n<pre><code>foreach my $item ( $twig -&gt; root -&gt; children ) {\n   print join \",\", (map { $item -&gt; first_child_text($_) // '' } @keys),\"\\n\"; \n}\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 7706269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f7f1f207d8b5195cbbbbfb2644657236?s=128&d=identicon&r=PG&f=1", "display_name": "LOUDKING", "link": "https://stackoverflow.com/users/7706269/loudking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42777069, "answer_count": 2, "score": 0, "last_activity_date": 1489484454, "creation_date": 1489460466, "question_id": 42777017, "link": "https://stackoverflow.com/questions/42777017/perl-regex-matching-keywords-may-or-may-not-exist", "title": "Perl regex matching: keywords may or may not exist", "body": "<p>I have string input like following:</p>\n\n<pre><code>&lt;Name&gt;IncludeLeafPortfolios&lt;/Name&gt;&lt;DataType&gt;Boolean&lt;/DataType&gt;&lt;Value&gt;True&lt;/Value&gt;\n&lt;Name&gt;HierarchyDate&lt;/Name&gt;&lt;DataType&gt;Int&lt;/DataType&gt;&lt;IsFixed&gt;false&lt;/IsFixed&gt;\n&lt;Name&gt;HierarchyDate&lt;/Name&gt;&lt;DataType&gt;Int&lt;/DataType&gt;\n&lt;Name&gt;HierarchyDate&lt;/Name&gt;&lt;DataType&gt;Int&lt;/DataType&gt;&lt;Value&gt;0&lt;/Value&gt;&lt;IsFixed&gt;false&lt;/IsFixed&gt;\n&lt;Name&gt;HierarchyDate&lt;/Name&gt;&lt;DataType&gt;Int&lt;/DataType&gt;&lt;Value&gt;0&lt;/Value&gt;&lt;IsFixed&gt;false&lt;/IsFixed&gt;\n</code></pre>\n\n<p>Name tag always exist and is of interest.\nDataType is not of interest.\nValue tag and IsFixed tag may or may not exist. The goal is to capture Value tag, IsFixed tag if one of them exists or both exist.</p>\n\n<p>My solution is not working:</p>\n\n<pre><code>$element =~ m/^&lt;Name&gt;([\\w\\s]*)&lt;\\/Name&gt;.*([&lt;Value&gt;[\\w+\\d+]&lt;\\/Value&gt;]?)(&lt;IsFixed&gt;[\\w+]&lt;\\/IsFixed&gt;])?$\n</code></pre>\n\n<p>Please suggest. Thanks.</p>\n"}, {"tags": ["perl", "module", "cdf"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489447100, "post_id": 42775107, "comment_id": 72665607, "body": "<a href=\"http://stackoverflow.com/q/3735836\">You don&#39;t need root to install modules.</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489454989, "post_id": 42775107, "comment_id": 72667681, "body": "<i>&quot;so I need to install it locally&quot;</i> What happened with that option?"}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489511543, "post_id": 42775107, "comment_id": 72699253, "body": "@Borodin - I installed it locally without any problem, but I wanted to run my code in other servers without any installation. so ikegami&#39;s way is good for me."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1491065534, "last_edit_date": 1491065534, "creation_date": 1489447671, "answer_id": 42775232, "question_id": 42775107, "link": "https://stackoverflow.com/questions/42775107/cumulative-density-function-of-a-normal-distribution-calculation-without-install/42775232#42775232", "title": "Cumulative Density Function of a normal distribution calculation without installing a Math module", "body": "<p>Below is a module based on <a href=\"http://search.cpan.org/perldoc?Math::Gauss\" rel=\"nofollow noreferrer\">Math::Gauss</a>.</p>\n\n<pre><code># Copyright (C) 2011 by Philipp K. Janert\n# No rights reserved by Eric L. Brine\n#\n# March 13th, 2017 - Eric Brine - Trimmed into light version of the module.\n# \n# This library is free software; you can redistribute it and/or modify\n# it under the same terms as Perl itself, either Perl version 5.10.1 or,\n# at your option, any later version of Perl 5 you may have available.\n\npackage Math::GaussLite;\n\nuse strict;\nuse warnings;\n\nuse Carp;\nuse Exporter qw( import );\n\nour @EXPORT_OK = qw( cdf );\n\nmy $SQRT2PI = 2.506628274631;\n\nsub pdf {\n  my ( $x, $m, $s ) = ( 0, 0, 1 );\n  $x = shift if @_;\n  $m = shift if @_;\n  $s = shift if @_;\n\n  if( $s &lt;= 0 ) {\n    croak( \"Can't evaluate Math::Gauss:pdf for \\$s=$s not strictly positive\" );\n  }\n\n  my $z = ($x-$m)/$s;\n\n  return exp(-0.5*$z*$z)/($SQRT2PI*$s);\n}\n\nsub cdf {\n  my ( $x, $m, $s ) = ( 0, 0, 1 );\n  $x = shift if @_;\n  $m = shift if @_;\n  $s = shift if @_;\n\n  # Abramowitz &amp; Stegun, 26.2.17\n  # absolute error less than 7.5e-8 for all x\n\n  if( $s &lt;= 0 ) {\n    croak( \"Can't evaluate Math::Gauss:cdf for \\$s=$s not strictly positive\" );\n  }\n\n  my $z = ($x-$m)/$s;\n\n  my $t = 1.0/(1.0 + 0.2316419*abs($z));\n  my $y = $t*(0.319381530\n          + $t*(-0.356563782\n            + $t*(1.781477937\n              + $t*(-1.821255978\n                + $t*1.330274429 ))));\n  if( $z &gt; 0 ) {\n    return 1.0 - pdf( $z )*$y;\n  } else {\n    return pdf( $z )*$y;\n  }\n}\n\n1;\n</code></pre>\n\n<p>(Honestly, since this is really just a formula, the Copyright doesn't provide much protection.)</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 42775232, "answer_count": 1, "score": -1, "last_activity_date": 1491065534, "creation_date": 1489446800, "last_edit_date": 1592644375, "question_id": 42775107, "link": "https://stackoverflow.com/questions/42775107/cumulative-density-function-of-a-normal-distribution-calculation-without-install", "title": "Cumulative Density Function of a normal distribution calculation without installing a Math module", "body": "<p>I would like to calculate the Cumulative Density Function of a normal distribution in Perl. I am using the\n<a href=\"http://search.cpan.org/%7Ejanert/Math-Gauss-0.01/lib/Math/Gauss.pm\" rel=\"nofollow noreferrer\"><code>Math::Gauss</code></a>\nmodule from CPAN which calculates a CDF without any problem.</p>\n\n<h3>ttt.pl</h3>\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nuse Math::Gauss ':all';\n\nmy $x    = 0.1;\nmy $mean = 0;\nmy $std  = 0.1;\n\nmy $output = cdf($x, $mean, $std);\n\nprint $output;\n</code></pre>\n<p>However, I got a module installation problem when I ran the code in a different server as below:</p>\n<blockquote>\n<p>Can't locate Math/Gauss.pm in @INC (@INC contains:<br />\n/etc/perl<br />\n/usr/local/lib/perl/5.14.2<br />\n/usr/local/share/perl/5.14.2<br />\n/usr/lib/perl5<br />\n/usr/share/perl5<br />\n/usr/lib/perl/5.14<br />\n/usr/share/perl/5.14<br />\n/usr/local/lib/site_perl<br />\n. ) at ./ttt.pl line 5.<br />\nBEGIN failed--compilation aborted at ./ttt.pl line 5.</p>\n</blockquote>\n<p>I don't have a root authority so I need to install it locally, but I think CDF calculation is not a big calculation. (The CDF equation is simple.)</p>\n<p>So it would be great if I knew the way to calculate a CDF in Perl without any installation. Or is there a way to include <code>Math/Gauss.pm</code> in my code so I can use it without installation?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489441649, "post_id": 42773927, "comment_id": 72663416, "body": "You would also have to send the username as a parameter when you submit the form, e.g. by putting it in a hidden form field. But session management is a huge pain in CGI.pm; you should use a framework with session management built-in, like <a href=\"https://metacpan.org/pod/Dancer2\" rel=\"nofollow noreferrer\">Dancer2</a>, <a href=\"https://metacpan.org/pod/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a>, <a href=\"https://metacpan.org/pod/Catalyst\" rel=\"nofollow noreferrer\">Catalyst</a>, or even <a href=\"https://metacpan.org/pod/CGI::Application\" rel=\"nofollow noreferrer\">CGI::Application</a>."}, {"owner": {"reputation": 188, "user_id": 1309515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cc6b8d9cfdae568bbb3fc57367fe59?s=128&d=identicon&r=PG", "display_name": "adrianp", "link": "https://stackoverflow.com/users/1309515/adrianp"}, "edited": false, "score": 0, "creation_date": 1489441650, "post_id": 42773927, "comment_id": 72663417, "body": "Whats the action value in the form tag?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489444483, "post_id": 42773927, "comment_id": 72664631, "body": "The form has no input named <code>x</code>, so of course <code>$y</code> is never set."}, {"owner": {"reputation": 17, "user_id": 6465551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e164462b1e07f7b26efc79a495d08483?s=128&d=identicon&r=PG&f=1", "display_name": "Godiegogo", "link": "https://stackoverflow.com/users/6465551/godiegogo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489454987, "post_id": 42773927, "comment_id": 72667680, "body": "@ikegami x comes from the redirect ?x=login"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489456115, "post_id": 42773927, "comment_id": 72667938, "body": "@Godiegogo When you submit the form, it&#39;s a new HTTP request, totally independent of the redirect. There&#39;s no <code>&lt;input name=&quot;x&quot;&gt;</code> element in the form, and you don&#39;t pass an <code>x</code> parameter in the <code>action</code> attribute of the <code>&lt;form&gt;</code>, so no <code>x</code> parameter is sent in the request."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489498087, "post_id": 42773927, "comment_id": 72688704, "body": "Re &quot;<i>x comes from the redirect ?x=login</i>&quot;, No, there&#39;s <code>?x=login</code> in the url (<code>action=&quot;http:&#47;&#47;examplecom&#47;cgi-bin&#47;asg2&#47;Assignment2.plx&quot;</code>), and even if there was, you would need <code>urlparam(&#39;x&#39;)</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489505276, "post_id": 42773927, "comment_id": 72694515, "body": "Why is <code>$y</code> set to the value of a param <code>x</code> at all?!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489498182, "post_id": 42774032, "comment_id": 72688778, "body": "Even if it did, you need <code>urlparam</code> instead of <code>param</code>."}], "tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1489441666, "creation_date": 1489441666, "answer_id": 42774032, "question_id": 42773927, "link": "https://stackoverflow.com/questions/42773927/cant-hold-variable/42774032#42774032", "title": "Can&#39;t hold variable", "body": "<p>You haven't shown us your form, but I'm guessing your form uses the default action (i.e. the page URL) without any query parameters.</p>\n"}], "owner": {"reputation": 17, "user_id": 6465551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e164462b1e07f7b26efc79a495d08483?s=128&d=identicon&r=PG&f=1", "display_name": "Godiegogo", "link": "https://stackoverflow.com/users/6465551/godiegogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1489442461, "creation_date": 1489441266, "last_edit_date": 1489442461, "question_id": 42773927, "link": "https://stackoverflow.com/questions/42773927/cant-hold-variable", "title": "Can&#39;t hold variable", "body": "<p>I am trying pass a value from a login page to another page.</p>\n\n<p>From the login page, the successful login passes the \"username\" back to the main page:</p>\n\n<pre><code>print redirect(\"http://example.com/cgi-bin/asg2/Assignment2.plx?x=$login\");\n</code></pre>\n\n<p>The main page receives the variable as follows:</p>\n\n<pre><code>my $y = param (\"x\");\n</code></pre>\n\n<p>and prints it using this statement:</p>\n\n<pre><code>if ($y){\nprint \"$y\";} else {print \"Please log in\";}\n</code></pre>\n\n<p>When I first get redirected, $y gets printed with no problems. However when I execute a form in the main page: </p>\n\n<pre><code>&lt;form method=\"POST\" action=\"http://examplecom/cgi-bin/asg2/Assignment2.plx\"&gt;\n\n        &lt;div id=\"choices\"&gt;\n\n            &lt;h2&gt;Make a Choice&lt;/h2&gt;\n\n            &lt;input class=\"css-checkbox\" id=\"Kadinski1\" name=\"Painting\" type=\"radio\" value=\"Autumn in Bavaria -Wassily Kandinsky\" /&gt;&lt;span id=\"Kad1\"&gt;Autumn in Bavaria&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Kadinski2\" name=\"Painting\" type=\"radio\" value=\"Movement I - Wassily Kadinsky\" /&gt;&lt;span id=\"Kad2\"&gt;Movement I&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Tamara1\" name=\"Painting\" type=\"radio\" value=\"Autoportrait - Tamara De Lempicka\" /&gt;&lt;span id=\"Tam1\"&gt;Autoportrait&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Tamara2\" name=\"Painting\" type=\"radio\" value=\"Group of Four Nudes - Tamara De Lempicka\" /&gt;&lt;span id=\"Tam2\"&gt;Group of Four Nudes&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Frida1\" name=\"Painting\" type=\"radio\" value=\"Moses - Frida Kahlo\" /&gt;&lt;span id=\"Fri1\"&gt;Moses&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Frida2\" name=\"Painting\" type=\"radio\" value=\"What the Water Gave Me - Frida Kahlo\" /&gt;&lt;span id=\"Fri2\"&gt;What the Water Gave Me&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Vincent1\" name=\"Painting\" type=\"radio\" value=\"Skull of a Skeleton with a Burning Cigarette - Vincent van Gogh\" /&gt;&lt;span id=\"Vin1\"&gt;Skull of a Skeleton with a Burning Cigarette&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Vincent2\" name=\"Painting\" type=\"radio\" value=\"Cafe Terrace on the Place du Forum - Vincent van Gogh\" /&gt;&lt;span id=\"Vin2\"&gt;Cafe Terrace on the Place du Forum&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Salvador1\" name=\"Painting\" type=\"radio\" value=\"Swans Reflecting Elephants - Salvador Dali\" /&gt;&lt;span id=\"Sal1\"&gt;Swans Reflecting Elephants&lt;/span&gt;&lt;br /&gt;\n            &lt;input id=\"Salvador2\" name=\"Painting\" type=\"radio\" value=\"The Persistence of Memory - Salvador Dali\" /&gt;&lt;span id=\"Sal2\"&gt;The Persistence of Memory&lt;/span&gt;&lt;br /&gt;               \n            &lt;br /&gt;              \n            &lt;input type=\"submit\" value=\"Submit\"&gt;\n            &lt;br /&gt;\n            &lt;br /&gt;\n        &lt;/div&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>it can't hold the value of $y and it prints the \"else\" statement no matter what I do. Please help!</p>\n"}, {"tags": ["arrays", "perl", "dancer", "mason"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1489436272, "post_id": 42772412, "comment_id": 72660752, "body": "I&#39;m not familiar with Mason, but I&#39;m pretty sure that <code>% foreach my $cat ( @{$.cats} ) {</code> will work."}], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 4145475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rtV4UNDouzs/AAAAAAAAAAI/AAAAAAAAAAA/r9y2hsxcgaM/photo.jpg?sz=128", "display_name": "draxtor", "link": "https://stackoverflow.com/users/4145475/draxtor"}, "edited": false, "score": 0, "creation_date": 1489438447, "post_id": 42773168, "comment_id": 72661858, "body": "Thank you Borodin and ThisSuitIsBlackNot. That was it"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 0, "last_activity_date": 1489438223, "last_edit_date": 1495540832, "creation_date": 1489438223, "answer_id": 42773168, "question_id": 42772412, "link": "https://stackoverflow.com/questions/42772412/perl-mason2-passing-arrays-and-hashes/42773168#42773168", "title": "Perl Mason2 passing arrays and hashes", "body": "<p><a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> is exactly right. <code>$.cats</code> is an array reference; to loop through the elements, you have to dereference it:</p>\n\n<pre><code>&lt;%args&gt;\n$.cats\n&lt;/%args&gt;\n\n&lt;ul&gt;\n% foreach my $cat ( @{$.cats} ) {\n  &lt;li&gt;&lt;% $cat-&gt;{title} %&gt;&lt;/li&gt;\n% }\n&lt;/ul&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;ul&gt;\n  &lt;li&gt;Cat1&lt;/li&gt;\n  &lt;li&gt;Cat2&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Note that <code>&lt;% $cat %&gt;</code> evaluates <code>$cat</code> in scalar context and outputs it; since <code>$cat</code> is a hash reference, this will output something like <code>HASH(0x4b9fad8)</code>. To output items from the hash, you have to access them by key, e.g. <code>&lt;% $cat-&gt;{id} %&gt;</code>.</p>\n"}], "owner": {"reputation": 104, "user_id": 4145475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rtV4UNDouzs/AAAAAAAAAAI/AAAAAAAAAAA/r9y2hsxcgaM/photo.jpg?sz=128", "display_name": "draxtor", "link": "https://stackoverflow.com/users/4145475/draxtor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 42773168, "answer_count": 1, "score": 2, "last_activity_date": 1489438223, "creation_date": 1489435259, "question_id": 42772412, "link": "https://stackoverflow.com/questions/42772412/perl-mason2-passing-arrays-and-hashes", "title": "Perl Mason2 passing arrays and hashes", "body": "<p>I'm trying to use Mason2 with Dancer and trivial cases like passing string to the template are working fine:</p>\n\n<pre><code>get '/foo', sub {\n    template 'foo' =&gt; {\n        title =&gt; 'bar'\n    };\n  };\n    &lt;%args&gt;\n    $.title\n    &lt;/%args&gt;\n    &lt;h1&gt;&lt;% $.title %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>So, this is working. Troubles started when I wanted to pass things like hashes or arrays to the template.\nAnd when I pass this array to the template:</p>\n\n<pre><code>template 'index', {  cats=&gt; [{id=&gt;1,title=&gt;'Cat1'},{id=&gt;2,title=&gt;'Cat2'}]};\n</code></pre>\n\n<p>And set args in the template to </p>\n\n<pre><code>&lt;%args&gt;\n$.cats\n&lt;/%args&gt;\n</code></pre>\n\n<p>I cannot loop through this array like this:</p>\n\n<pre><code>&lt;ul&gt;\n% foreach my $cat ($.cats){\n&lt;li&gt;&lt;% $cat %&gt;&lt;/li&gt;\n% } \n&lt;/ul&gt;\n</code></pre>\n\n<p>$cat object is the same as $.cats object, an array.\nI'm not sure what I did wrong. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 4, "creation_date": 1489434837, "post_id": 42772245, "comment_id": 72660002, "body": "Please inform all sites when you <a href=\"http://perlmonks.org/?node_id=1184466\" rel=\"nofollow noreferrer\">cross-post</a>."}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489435778, "post_id": 42772245, "comment_id": 72660510, "body": "k, I&#39;ve updated this question.  Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": true, "score": 0, "last_activity_date": 1489507423, "creation_date": 1489507423, "answer_id": 42790900, "question_id": 42772245, "link": "https://stackoverflow.com/questions/42772245/multiple-file-uploads-with-perl-cgi/42790900#42790900", "title": "Multiple File Uploads with Perl CGI", "body": "<p>The main issue with my code was it was missing the </p>\n\n<blockquote>\n  <p>enctype=\"multipart/form-data\" </p>\n</blockquote>\n\n<p>from the form.  I made some changes as well.  Here is my working code.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse CGI;\nuse Data::Dumper;\nuse CGI::Carp qw( fatalsToBrowser );\nuse HTML::Entities qw/encode_entities/;\nuse File::Copy qw' copy ';\nuse File::Basename;\n\nmy $q = new CGI;\nprint $q-&gt;header;\n\nmy $upload_folder = '/var/www/html/uploads';\n\nmy $name = $q-&gt;param('name');\nmy $email = $q-&gt;param('email');\n\nmy $comments = $q-&gt;param('comments');\nmy @files = $q-&gt;param('multi_files');\nmy @io_handles=$q-&gt;upload('multi_files');\n\nmy %file_hash;\n\nforeach my $item(@files){\n    next unless $item =~ /.+\\/(M.+\\.pdf)/;\n    foreach my $sub_item(@io_handles){\n        if($item eq $sub_item){\n            $file_hash{$item} = $sub_item;\n        }\n    }\n}\n\nchdir $upload_folder or die \"Cannot chdir to upload destination directory: $!\\n\";\n\nprint '&lt;ul&gt;';\nforeach my $key(keys %file_hash){\n    my $base = basename($file_hash{$key});#    \n    my $tmpfilename = $q-&gt;tmpFileName($file_hash{$key});\n    my $destFile = File::Spec-&gt;catfile($upload_folder,$base);\n    copy( $tmpfilename, $destFile ) or die \"Copy to ($destFile) failed: $!\\n\";\n    print '&lt;li&gt;Sucessfully uploaded --- &lt;b&gt;', CGI-&gt;escapeHTML(basename($key)), '&lt;/b&gt;&lt;/li&gt;';\n}\nprint '&lt;/ul&gt;';\n\nprint \"&lt;p&gt;&lt;b&gt;Name&lt;/b&gt; -- $name&lt;br&gt;&lt;b&gt;Email&lt;/b&gt; -- $email&lt;br&gt;&lt;b&gt;Comments&lt;/b&gt; -- $comments&lt;br&gt;\";\n\nprint $q-&gt;end_html;\n</code></pre>\n\n<p>Thanks for the help.  (I posted this answer on perlmonks.com as well)</p>\n"}], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 1, "accepted_answer_id": 42790900, "answer_count": 1, "score": -1, "last_activity_date": 1518104010, "creation_date": 1489434696, "last_edit_date": 1518104010, "question_id": 42772245, "link": "https://stackoverflow.com/questions/42772245/multiple-file-uploads-with-perl-cgi", "title": "Multiple File Uploads with Perl CGI", "body": "<p>I have a simple web form in which I want the user to select a folder to upload (I only care about the contents of the folder). So my attempt to make this work is as followed:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse CGI;\nuse Data::Dumper;\n\nmy $q = CGI-&gt;new();\nprint $q-&gt;header;\n\nmy $upload_folder = '/var/www/html/uploads';\nmy $name = $q-&gt;param('name');\nmy $email = $q-&gt;param('email');\nmy $comments = $q-&gt;param('comments');\nmy @files = $q-&gt;param('multi_files');\n\nforeach my $upload(@files){\n    print \"Upload this please -- $upload&lt;br&gt;\";\n    my $upload_file  = $q-&gt;upload($upload);\n    if ($upload_file){\n        open (OUTFILE,\"&gt;$upload_folder/$upload\") or die $!;;\n        binmode OUTFILE;\n        while (&lt;$upload_file&gt;) {\n            print OUTFILE;\n        }\n    }\n    else {\n        print \"&lt;b&gt;Guess it's broken&lt;/b&gt;&lt;br/&gt;\";\n    }\n}\n\nprint \"&lt;p&gt;&lt;b&gt;Name&lt;/b&gt; -- $name&lt;br&gt;&lt;b&gt;Email&lt;/b&gt; -- $email&lt;br&gt;&lt;b&gt;Comments&lt;/b&gt; -- $comments&lt;br&gt;\";\n\nprint $q-&gt;end_html;\n</code></pre>\n\n<p>When I run the script all the parameters are correct, the files print out as expected but when I execute the upload query it returns blank. This is my first attempt at using CGI as I tend to use other languages to process forms.</p>\n\n<p>Here is the code from the form just in case :</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Stupid Test Site&lt;/title&gt;\n        &lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js\" &gt;&lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;This is a test&lt;/h1&gt;\n\n        &lt;form action=\"/cgi-enabled/test.pl\" method=\"POST\"&gt;\n            Your Name: &lt;input type=\"text\" name=\"name\"&gt;&lt;br&gt;\n            Email Address: &lt;input type=\"text\" name=\"email\"&gt;&lt;br&gt;\n            Select PO folder: &lt;input name=\"multi_files\" type=\"file\" webkitdirectory multiple /&gt;&lt;br/&gt;\n            Comments:&lt;br&gt;\n            &lt;textarea name=\"comments\" rows=\"5\" cols=\"60\"&gt;&lt;/textarea&gt;&lt;br&gt;\n            &lt;input type=\"submit\" value=\"Send\"&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I've also posted this question on perlmonks.com as well.</p>\n"}, {"tags": ["perl", "www-mechanize-firefox", "html-tableextract", "html-treebuilder"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489440164, "post_id": 42771283, "comment_id": 72662754, "body": "In your first attempt, did you mean <code>$tree</code> instead of <code>$mech</code>? What did each of those attempts yield? If I replace that, I get useful output."}, {"owner": {"reputation": 39, "user_id": 1200713, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87876e2d362eeb3ce6511959039fb10c?s=128&d=identicon&r=PG", "display_name": "Brian Douglas", "link": "https://stackoverflow.com/users/1200713/brian-douglas"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489450580, "post_id": 42771283, "comment_id": 72666544, "body": "Correct! Simple mistake :)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 1200713, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87876e2d362eeb3ce6511959039fb10c?s=128&d=identicon&r=PG", "display_name": "Brian Douglas", "link": "https://stackoverflow.com/users/1200713/brian-douglas"}, "edited": false, "score": 0, "creation_date": 1489450680, "post_id": 42773750, "comment_id": 72666572, "body": "It returns the outputs WITH the span tag still attached: <code>&lt;span&gt;Revenue&lt;&#47;span&gt; &lt;span&gt;9&#47;24&#47;2016&lt;&#47;span&gt; &lt;span&gt;9&#47;26&#47;2015&lt;&#47;span&gt; &lt;span&gt;9&#47;27&#47;2014&lt;&#47;span&gt; &lt;span&gt;Total Revenue&lt;&#47;span&gt; &lt;span class=&quot;Trsdu(0.3s)  C($dataGreen)&quot;&gt;&lt;span&gt;215,639,000&lt;&#47;span&gt;&lt;&#47;span&gt; &lt;span&gt;215,639,000&lt;&#47;span&gt; &lt;span class=&quot;Trsdu(0.3s)  C($dataGreen)&quot;&gt;&lt;span&gt;233,715,000&lt;&#47;span&gt;&lt;&#47;span&gt; &lt;span&gt;233,715,000&lt;&#47;span&gt; &lt;span class=&quot;Trsdu(0.3s)  C($dataGreen)&quot;&gt;&lt;span&gt;182,795,000&lt;&#47;span&gt;&lt;&#47;span&gt; &lt;span&gt;182,795,000&lt;&#47;span&gt;</code> foreach ( @list ) {     my $value = $_-&gt;as_HTML;     print &quot;$value\\n&quot;;     my $clean = $hs-&gt;parse($value); }"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 39, "user_id": 1200713, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87876e2d362eeb3ce6511959039fb10c?s=128&d=identicon&r=PG", "display_name": "Brian Douglas", "link": "https://stackoverflow.com/users/1200713/brian-douglas"}, "edited": false, "score": 0, "creation_date": 1489476018, "post_id": 42773750, "comment_id": 72673963, "body": "@BrianDouglas that&#39;s why I combined both your attempts and used the text one in my code. Read it again. ;-) I&#39;ll highlight it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1489476081, "last_edit_date": 1489476081, "creation_date": 1489440537, "answer_id": 42773750, "question_id": 42771283, "link": "https://stackoverflow.com/questions/42771283/perl-mechanize-identify-content-between-span-tag-within-specific-div-tag/42773750#42773750", "title": "Perl Mechanize identify content between span tag within specific div tag", "body": "<p>Your first attempt works if you actually do it on <code>$tree</code> and not on <code>$mech</code>.\n Combined with <code>as_text</code> from your second attempt is pretty nice. </p>\n\n<pre><code>use HTML::TreeBuilder;\nmy $tree = HTML::TreeBuilder-&gt;new_from_content(my @foo = &lt;DATA&gt;);\nmy @list = $tree-&gt;find('span');\n\nforeach ( @list ) {\n    say $_-&gt;as_text();\n}\n__DATA__\n&lt;div class=\"Mt(10px)\"&gt;\n    &lt;table class=\"Lh(1.7) W(100%) M(0)\"&gt;\n...\n</code></pre>\n\n<p>This outputs a list of span contents. You should be able to clean those up and work with them.</p>\n\n<pre><code>Revenue\n9/24/2016\n9/26/2015\n9/27/2014\n...\n</code></pre>\n\n<p>Of course as an actual table (array-of-arrays) it would probably make more sense, but for that we'd have to know what it is you are trying to do.</p>\n"}], "owner": {"reputation": 39, "user_id": 1200713, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87876e2d362eeb3ce6511959039fb10c?s=128&d=identicon&r=PG", "display_name": "Brian Douglas", "link": "https://stackoverflow.com/users/1200713/brian-douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489476081, "creation_date": 1489431114, "last_edit_date": 1489439780, "question_id": 42771283, "link": "https://stackoverflow.com/questions/42771283/perl-mechanize-identify-content-between-span-tag-within-specific-div-tag", "title": "Perl Mechanize identify content between span tag within specific div tag", "body": "<p>Perl  WWW::Mechanize::Firefox has successfully retrieved the contents of the web page, and stored in the scalar variable <code>$content</code>.</p>\n\n<pre><code>my $url = 'http://finance.yahoo.com/quote/AAPL/financials?p=AAPL';\n$mech-&gt;get($url);\nmy $content= $mech-&gt;content();\n</code></pre>\n\n<p>In examining <code>$content</code>, I'm interested in identifying and saving <em>all</em> the information between the <code>span tags</code> inside the <code>table</code>.</p>\n\n<p>There a varies classes that I have no interest in.</p>\n\n<p>Attempt # 1 did not work.</p>\n\n<pre><code>my $tree = HTML::TreeBuilder-&gt;new_from_content($txtRawData);    \nmy @list = $mech-&gt;find('span');\n\nforeach ( @list ) {\nprint $_-&gt;as_HTML();\n}\n</code></pre>\n\n<p>Attempt # 2 did not work.</p>\n\n<pre><code>foreach my $tag ($tree-&gt;look_down(_tag =&gt; 'span')) {\n    my $value = $tag-&gt;as_text;  \n}\n</code></pre>\n\n<p>The HTML table of interest is:\n</p>\n\n<pre><code>&lt;div class=\"Mt(10px)\"&gt;\n    &lt;table class=\"Lh(1.7) W(100%) M(0)\"&gt;\n        &lt;tbody&gt;\n            &lt;tr class=\"Bdbw(1px) Bdbc($lightGray) Bdbs(s) H(36px)\"&gt;\n                &lt;td class=\"Fw(b) Fz(15px)\"&gt;\n                    &lt;span&gt;Revenue&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"C($gray) Ta(end)\"&gt;\n                    &lt;span&gt;9/24/2016&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"C($gray) Ta(end)\"&gt;\n                    &lt;span&gt;9/26/2015&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"C($gray) Ta(end)\"&gt;\n                    &lt;span&gt;9/27/2014&lt;/span&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr class=\"Bdbw(1px) Bdbc($lightGray) Bdbs(s) H(36px)\"&gt;\n                &lt;td class=\"Fz(s) H(35px) Va(m)\"&gt;\n                    &lt;span&gt;Total Revenue&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;215,639,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;233,715,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;182,795,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr class=\"Bdbw(1px) Bdbc($lightGray) Bdbs(s) H(36px)\"&gt;\n                &lt;td class=\"Fz(s) H(35px) Va(m)\"&gt;\n                    &lt;span&gt;Cost of Revenue&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;131,376,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;140,089,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fz(s) Ta(end)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;112,258,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr class=\"Bdbw(0px)! H(36px)\"&gt;\n                &lt;td class=\"Fw(b) Fz(s) Pb(20px)\"&gt;\n                    &lt;span&gt;Gross Profit&lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fw(b) Fz(s) Ta(end) Pb(20px)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;84,263,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fw(b) Fz(s) Ta(end) Pb(20px)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;93,626,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n\n                &lt;td class=\"Fw(b) Fz(s) Ta(end) Pb(20px)\"&gt;\n                    &lt;span&gt;\n                        &lt;span&gt;70,537,000&lt;/span&gt;\n                    &lt;/span&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n\n<p>What is the best way to select (set focus upon) one specific <code>table</code> (their could be multiple tables inside the <code>$content</code> variable), and save the text between the <code>span tags</code> to an array (to be passed to the next procedure - to be inserted into a database table)?</p>\n\n<p>I also would like to highlight that:</p>\n\n<ol>\n<li>Sometimes, the text is inside a two (double) sets of <code>span tags</code>.</li>\n<li>There is no table header row (or <code>th</code> tags).</li>\n</ol>\n"}, {"tags": ["perl", "command-line", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 4, "last_activity_date": 1489445024, "last_edit_date": 1489445024, "creation_date": 1489427664, "answer_id": 42770291, "question_id": 42770185, "link": "https://stackoverflow.com/questions/42770185/breaking-up-qx-return-in-perl/42770291#42770291", "title": "Breaking up qx/ return in Perl", "body": "<p>You can filter the <code>qx</code> output using <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a>:</p>\n\n<pre><code>my @output = grep {/^(Up|Down)load:/} qx\"/home/user/.local/bin/speedtest-cli\";\nprint $fh $_ for @output;\n</code></pre>\n\n<p>As a side note, you can simplify your $timer code using <a href=\"http://perldoc.perl.org/POSIX.html\" rel=\"nofollow noreferrer\">POSIX</a>:</p>\n\n<pre><code>use POSIX qw(strftime);\nmy @localtime = localtime;\nmy $nice_timestamp = strftime('%Y%m%d',   @localtime);\nmy $timer          = strftime('%H:%M:%S', @localtime);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1489430899, "creation_date": 1489430899, "answer_id": 42771229, "question_id": 42770185, "link": "https://stackoverflow.com/questions/42770185/breaking-up-qx-return-in-perl/42771229#42771229", "title": "Breaking up qx/ return in Perl", "body": "<p>Backticks (the <code>qx</code> operator) will split the output into lines if you assign the result to an array. You can use <code>grep</code> to pick the lines that you want to see</p>\n\n<p>I would also use the\n<a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a>\nmodule to generate your time and date strings</p>\n\n<p>The code would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Time::Piece;\n\nmy $now = localtime;\n$now-&gt;date_separator('');\nmy $nice_timestamp = $now-&gt;ymd; # Generates YYYYMMDD\n\nmy $filename = \"/home/user/DailyLogs/InternetLog$nice_timestamp\";\n\nopen my $fh, '&gt;&gt;', $filename or die qq{Unable to open file \"$filename\" for appending: $!};\n\nmy @output = qx&lt;/home/user/.local/bin/speedtest-cli&gt;;\n\nmy $timer = $now-&gt;hms; # Generates HH:MM:SS\n\nprint $fh \"Time: $timer\\n\";\nprint $fh for grep /^(?:Down|Up)load/, @output;\nprint $fh \"\\n\\n\";\n\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2993205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b3bedcdf8b214fb3d6f42e42c10c3f3?s=128&d=identicon&r=PG&f=1", "display_name": "1ntel0pe", "link": "https://stackoverflow.com/users/2993205/1ntel0pe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 42770291, "answer_count": 2, "score": 1, "last_activity_date": 1489445024, "creation_date": 1489427322, "last_edit_date": 1489430412, "question_id": 42770185, "link": "https://stackoverflow.com/questions/42770185/breaking-up-qx-return-in-perl", "title": "Breaking up qx/ return in Perl", "body": "<p></p>\n\n<p>I have an Ubuntu 16.04.1 server which I mess around on. Currently I'm using it to monitor my internet speed and connection.</p>\n\n<p>I have written a script and automated it using Perl and crontab, but now I would like to clean up my log files.</p>\n\n<p>Below is what is written to the log file upon execution of the Perl script:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Time: 12:40:01\nRetrieving speedtest.net configuration...\nTesting from TWC (now Spectrum) (123.45.67.890)...\nRetrieving speedtest.net server list...\nSelecting best server based on ping...\nHosted by Fibrant (Salisbury, NC) [60.95 km]: 51.184 ms\nTesting download     speed................................................................................\nDownload: 37.76 Mbit/s\nTesting upload speed....................................................................................................\nUpload: 11.56 Mbit/s\n</code></pre>\n\n<p>I would instead like to have an output of:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Download: 37.76 Mbit/s\nUpload: 11.56 Mbit/s\n</code></pre>\n\n<p>My current Perl script looks like this: </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    use strict;\n    use warnings;\n\n    my ( $sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst ) = localtime( time );\n    my $nice_timestamp = sprintf( \"%04d%02d%02d\",   $year + 1900, $mon + 1, $mday );\n    my $timer          = sprintf( \"%02d:%02d:%02d\", $hour,        $min,     $sec );\n    my $filename = \"/home/user/DailyLogs/InternetLog$nice_timestamp\";\n\n    open( my $fh, '&gt;&gt;', $filename ) or die \"Could not open file '$filename' $!\";\n\n    my $output = qx\"/home/user/.local/bin/speedtest-cli\";\n\n    print $fh \"Time: \";\n    print $fh $timer;\n    print $fh \"\\n\";\n    print $fh $output;\n    print $fh \"\\n\\n\";\n\n    close $fh;\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thanks!</p>\n"}, {"tags": ["html", "sql", "perl", "cgi"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1489427627, "post_id": 42769991, "comment_id": 72656065, "body": "What is the question? See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1489428640, "post_id": 42769991, "comment_id": 72656613, "body": "<i>Is this the correct way to declare my users?</i> Probably not. You most likely want an array or a hash instead. <i>Is the If statement correctly formated?</i> There don&#39;t appear to be any syntax errors, if that&#39;s what you&#39;re asking."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489484778, "post_id": 42769991, "comment_id": 72679035, "body": "Judging by the way you use <code>$las</code> and <code>@las</code> in a way that seems to be interchangeable, I suspect you would learn a lot if you added <code>use strict;</code> and <code>use warnings;</code> to your code."}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "is_accepted": false, "score": 2, "last_activity_date": 1489429141, "creation_date": 1489429141, "answer_id": 42770721, "question_id": 42769991, "link": "https://stackoverflow.com/questions/42769991/compare-a-current-user-against-a-list-of-employees-logged-into-computers-perl-c/42770721#42770721", "title": "Compare a current user against a list of employees logged into computers Perl, CGI", "body": "<p>I figured out how to put the array together correctly:</p>\n\n<pre><code>my @las = qw( \njpietrza\nhpietrza\noszones\n\n);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>my $las='\njpietrza\nhpietrza\noszones\n';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489485709, "post_id": 42771492, "comment_id": 72679697, "body": "I think this is a case where a simple hash beats an array and <code>any()</code> cleverness :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489487743, "post_id": 42771492, "comment_id": 72681263, "body": "Also, if you look at <a href=\"http://stackoverflow.com/questions/42718893/want-to-hide-cgi-rendered-html-text-for-hostname-when-username-text-column-is-em\">this user&#39;s previous question</a>, you&#39;ll see that <code>$currentuser</code> is set up using <code>bind_columns</code> (so it&#39;s changed every time <code>fetch()</code> is called). And your confusion neatly illustrates why that&#39;s such a bad idea."}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1490221610, "post_id": 42771492, "comment_id": 73021611, "body": "Is there a method to exclude results and not print them if they are not members of the array @las ?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1490263662, "post_id": 42771492, "comment_id": 73037973, "body": "sure... when you want the print statements conditional, wrap those inside an <code>if</code> statement like <code>if (any { &#47;^$currentuser$&#47; } @las) { print ... }</code>"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 2, "last_activity_date": 1489440787, "last_edit_date": 1489440787, "creation_date": 1489431812, "answer_id": 42771492, "question_id": 42769991, "link": "https://stackoverflow.com/questions/42769991/compare-a-current-user-against-a-list-of-employees-logged-into-computers-perl-c/42771492#42771492", "title": "Compare a current user against a list of employees logged into computers Perl, CGI", "body": "<p>maybe there was nothing wrong with the <code>if</code> statement, but the whole 9 lines of code can be condensed to 1 very readable line:</p>\n\n<p><code>$lacolor = any { /^$currentuser$/ } @las ? \"black\" : \"red\";</code></p>\n\n<p>please</p>\n\n<pre><code>use List::Util qw/any/;\n\nwhile($sth-&gt;fetch()) {\n\n    # $currentuser is assigned between the 'while' and this 'next' statement ?\n    # if not, then outside the loop and do not loop at all unless defined\n\n    next unless defined $currentuser;\n\n    $lastlogin=~s/ .*$//;\n    $host_name=~s/1408//;\n\n    $lacolor = any { /^$currentuser$/ } @las ? \"black\" : \"red\";\n\n    print \"&lt;tr&gt;\";\n    print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n    print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;System In-Use (User Undisclosed)&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\n</code></pre>\n\n<p>please, also <code>use strict;</code> and <code>use warnings;</code></p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1489524202, "post_id": 42782809, "comment_id": 72706970, "body": "The CSS is a good point, I often inherit code that has been on server projects for some time."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1489487905, "last_edit_date": 1489487905, "creation_date": 1489485606, "answer_id": 42782809, "question_id": 42769991, "link": "https://stackoverflow.com/questions/42769991/compare-a-current-user-against-a-list-of-employees-logged-into-computers-perl-c/42782809#42782809", "title": "Compare a current user against a list of employees logged into computers Perl, CGI", "body": "<p>Firstly, as I think you have worked out now, the scalar variable <code>$las</code> and the array <code>@las</code> are completely different. As you've seen, you should declare and initialise your array like this:</p>\n\n<pre><code>my @las = qw(\n  jpietrza\n  hpietrza\n  oszones\n);\n</code></pre>\n\n<p>Actually, I suspect this all gets easier if you store this in a hash, not an array;</p>\n\n<pre><code>my %las = map { $_ =&gt; 1 } qw(jpietrza hpietrza oszones);\n</code></pre>\n\n<p>Then your check just becomes:</p>\n\n<pre><code>my $lacolour = $las{$currentuser} ? 'black' : 'red';\n</code></pre>\n\n<p>A few more points:</p>\n\n<ul>\n<li>Please add <code>use strict</code> and <code>use warnings</code>. And understand and fix the problems they reveal.</li>\n<li>The quotes are unnecessary in <code>if ($currentuser eq \"$_\")</code>.</li>\n<li>Using a <a href=\"https://metacpan.org/release/Template-Toolkit\" rel=\"nofollow noreferrer\">templating system</a> to create the output will make your life a lot easier.</li>\n</ul>\n\n<p><strong>Update:</strong> Oh, and one I forgot earlier. It's 2017. No-one has used the <code>font</code> element in HTML for fifteen years. Take a look at <a href=\"https://en.wikipedia.org/wiki/Cascading_Style_Sheets\" rel=\"nofollow noreferrer\">CSS</a>.</p>\n"}], "owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42771492, "answer_count": 3, "score": 1, "last_activity_date": 1489487905, "creation_date": 1489426736, "last_edit_date": 1489431113, "question_id": 42769991, "link": "https://stackoverflow.com/questions/42769991/compare-a-current-user-against-a-list-of-employees-logged-into-computers-perl-c", "title": "Compare a current user against a list of employees logged into computers Perl, CGI", "body": "<p>Not sure I am doing this correctly as it doesn't appear to be working.</p>\n\n<p>Is this the correct way to declare my users, and is the If statement correctly formated?</p>\n\n<p>At the top I have declared:</p>\n\n<pre><code>my $las = 'jpietrza hpietrza oszones';\n</code></pre>\n\n<p>These are employees we are checking against current users.</p>\n\n<p>Further down in the code, I want to change the text color that is printed if the user is in the list vs. someone else.</p>\n\n<pre><code>while ( $sth-&gt;fetch() ) {\n\n    next unless defined $currentuser;\n\n    $lastlogin =~ s/ .*$//;\n    $host_name =~ s/1408//;\n\n    foreach ( @las ) {\n\n        if ( $currentuser eq \"$_\" ) {\n            $lacolor = \"black\";\n            last;\n        }\n        else {\n            $lacolor = \"red\";\n        }\n    }\n\n    print \"&lt;tr&gt;\";\n    print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n    print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;System In-Use (User Undisclosed)&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "tree", "network-analysis"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 5530729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/becd9dec5242bec6e3c19294e6e0b14f?s=128&d=identicon&r=PG&f=1", "display_name": "dcirillo", "link": "https://stackoverflow.com/users/5530729/dcirillo"}, "edited": false, "score": 0, "creation_date": 1489425913, "post_id": 42767352, "comment_id": 72655020, "body": "I didn&#39;t know about this module. Great suggestion, thank you!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 8, "last_activity_date": 1489419311, "last_edit_date": 1489419311, "creation_date": 1489418689, "answer_id": 42767352, "question_id": 42767193, "link": "https://stackoverflow.com/questions/42767193/number-of-connections-in-a-hash-of-arrays/42767352#42767352", "title": "Number of connections in a hash of arrays", "body": "<p>You can build graphs in Perl using the <a href=\"https://metacpan.org/pod/Graph::Directed\" rel=\"noreferrer\"><code>Graph</code></a> module</p>\n\n<p>You need a <code>Graph::Directed</code> object</p>\n\n<hr>\n\n<p>Here's an example</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Graph::Directed;\n\nmy %HoA = (\n    \"M\" =&gt; [ \"L\", \"E\" ],\n    \"L\" =&gt; [ \"I\" ],\n    \"E\" =&gt; [ \"B\", \"C\" ],\n    \"B\" =&gt; [ \"A\" ],\n    \"C\" =&gt; [ \"A\" ]\n);\n\n# Build the graph\n#\nmy $g = Graph::Directed-&gt;new;\n\nwhile ( my ($from, $to) = each %HoA ) {\n    $g-&gt;add_edge($from, $_) for @$to;\n}\n\n# Build a table of successors of each vertex\n#\nmy %succ;\n\nfor my $v ( $g-&gt;vertices ) {\n    my @succ = $g-&gt;all_successors($v);\n    $succ{$v} = \\@succ;\n}\n\n# Print the vertices in descending order of successors\n#\nfor my $v ( sort { @{$succ{$b}} &lt;=&gt; @{$succ{$a}} } $g-&gt;vertices ) {\n    printf \"%s %d\\n\", $v, scalar @{$succ{$v}};\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>M 6\nE 3\nC 1\nB 1\nL 1\nA 0\nI 0\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5530729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/becd9dec5242bec6e3c19294e6e0b14f?s=128&d=identicon&r=PG&f=1", "display_name": "dcirillo", "link": "https://stackoverflow.com/users/5530729/dcirillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489419476, "creation_date": 1489418294, "last_edit_date": 1489419476, "question_id": 42767193, "link": "https://stackoverflow.com/questions/42767193/number-of-connections-in-a-hash-of-arrays", "title": "Number of connections in a hash of arrays", "body": "<p>I have a hash of arrays like the following:</p>\n\n<pre><code>my %HoA = (\n    \"M\" =&gt; [ \"L\", \"E\" ],\n    \"L\" =&gt; [ \"I\" ],\n    \"E\" =&gt; [ \"B\", \"C\" ],\n    \"B\" =&gt; [ \"A\" ],\n    \"C\" =&gt; [ \"A\" ]\n);\n</code></pre>\n\n<p>You can visualize it in this way:</p>\n\n<pre><code>    M\n   / \\\n  L   E\n /   / \\\nI   B   C\n     \\ /\n      A\n</code></pre>\n\n<p>Now, I would like to know the number of connections for every node:</p>\n\n<pre><code>M 6\nE 3\nL 1\nB 1\nC 1\nI 0\nA 0\n</code></pre>\n\n<p>With the <em>igraph</em> package in R this is straightforward but I am struggling to do the same with a hash of arrays in Perl.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489417637, "post_id": 42765979, "comment_id": 72649187, "body": "Worth a few upvotes, as it never occurred to me that you could overload the regex engine like that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1489417774, "post_id": 42765979, "comment_id": 72649289, "body": "@Sobrique: It&#39;s possible, but it&#39;s not a very nice thing to do. Action at a distance and all that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489417852, "post_id": 42765979, "comment_id": 72649361, "body": "It had also not seen this before. First I thought they misunderstood what <code>overload</code> does. But it&#39;s actually pretty logical. I just don&#39;t really see a use-case for it. It&#39;s freaky."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489418489, "post_id": 42765979, "comment_id": 72649915, "body": "Can you show exactly what you want your regex to match? I cleaned it up a bit in my answer, but it can probably be simplified more."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1489418675, "post_id": 42765979, "comment_id": 72650042, "body": "@Sinan&#220;n&#252;r that&#39;s not an authorized copy?! Args. I&#39;ll remove it."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1489418695, "last_edit_date": 1489418695, "creation_date": 1489416385, "answer_id": 42766510, "question_id": 42765979, "link": "https://stackoverflow.com/questions/42765979/why-isnt-my-overloadconstant-sub-triggered-when-i-use-a-string-variable/42766510#42766510", "title": "Why isn&#39;t my overload::constant sub triggered when I use a string variable?", "body": "<p><em>Programming Perl</em> says that <code>overload::constant</code> works on constants. </p>\n\n<blockquote>\n  <p>Any handlers you provide for integer and float will be invoked whenever the Perl tokener encounters a constant number.</p>\n</blockquote>\n\n<p>When you call <code>m/$pattern/</code>, that's not a constant. It's a variable.</p>\n\n<blockquote>\n<pre><code>($test, $name) = ChopPattern($test, '\\nom');\n</code></pre>\n</blockquote>\n\n<p>Now there the <code>'\\nom'</code> is a constant, but it's a string. Turn that into a <code>qr//</code> and you will have a regular expression that contains a constant.</p>\n\n<pre><code>($test, my $name) = ChopPattern($test, qr'\\nom');\n</code></pre>\n\n<p>The pattern-match in <code>ChopPattern</code> can stay the same:</p>\n\n<pre><code>if($string =~ m/$pattern/) { ... } \n</code></pre>\n\n<p>Because there now is a constant part in a regular expression, Perl can call your <code>convert</code> overload, and do your regex.</p>\n\n<hr>\n\n<p>Let's see this in action. Remember Perl is doing this overloading substitution at compile time, when it parses the source code.</p>\n\n<p>Consider this example:</p>\n\n<pre><code>BEGIN {\n    overload::constant 'qr' =&gt; sub {\n        my $re = shift;\n        $re =~ s/\\\\nom/foobar/;\n        return $re;\n    };\n}\n\nsub match {\n    my ( $t, $p ) = @_;\n    $t =~ m/$p/;\n}\nmatch( 'some text', '\\nom' );\n</code></pre>\n\n<p>It's not important what the code does. When we deparse it, we get this output:</p>\n\n<pre><code>$ perl -MO=Deparse scratch.pl \nsub BEGIN {\n    use warnings;\n    use strict;\n    use feature 'say';\n    overload::constant('qr', sub {\n        my $re = shift();\n        $re =~ s/\\\\nom/foobar/;\n        return $re;\n    }\n    );\n}\nsub match {\n    use warnings;\n    use strict;\n    use feature 'say';\n    BEGIN {\n        $^H{'qr'} = 'CODE(0x147a048)';\n    }\n    my($t, $p) = @_;\n    $t =~ /$p/;\n}\nuse warnings;\nuse strict;\nuse feature 'say';\nBEGIN {\n    $^H{'qr'} = 'CODE(0x147a048)';\n}\nmatch 'some text', '\\\\nom';                       # &lt;-- here\n</code></pre>\n\n<p>We can see that the handler was installed, but in the last line in the function call, there is the <code>'\\\\nom'</code> string.</p>\n\n<p>Now if we use a quoted expression <code>qr//</code> there instead of the string, things change.</p>\n\n<pre><code>BEGIN {\n    overload::constant 'qr' =&gt; sub {\n        my $re = shift;\n        $re =~ s/\\\\nom/foobar/;\n        return $re;\n    };\n}\n\nsub match {\n    my ( $t, $p ) = @_;\n    $t =~ m/$p/;\n}\nmatch( 'some text', qr/\\nom/ );\n</code></pre>\n\n<p>Now the deparsed program suddenly contains <code>foobar</code>. The regex was changed.</p>\n\n<pre><code>$ perl -MO=Deparse scratch2.pl \nsub BEGIN {\n    use warnings;\n    use strict;\n    use feature 'say';\n    overload::constant('qr', sub {\n        my $re = shift();\n        $re =~ s/\\\\nom/foobar/;\n        return $re;\n    }\n    );\n}\nsub match {\n    use warnings;\n    use strict;\n    use feature 'say';\n    BEGIN {\n        $^H{'qr'} = 'CODE(0x1e81048)';\n    }\n    my($t, $p) = @_;\n    $t =~ /$p/;\n}\nuse warnings;\nuse strict;\nuse feature 'say';\nBEGIN {\n    $^H{'qr'} = 'CODE(0x1e81048)';\n}\nmatch 'some text', qr/foobar/;                       # &lt;-- here\n</code></pre>\n\n<p>It did that before the code was even run. </p>\n\n<p>If we run both programs with <code>-MO=Concise</code> to see what the interpreter will run after compile time, we get further proof that this stuff only works on actual constants in the source code, and cannot work dynamically.</p>\n\n<pre><code>$ perl -MO=Concise scratch.pl \n8  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 2529 scratch.pl:5950) v:%,R,*,&amp;,{,x*,x&amp;,x$,$,469762048 -&gt;3\n7     &lt;1&gt; entersub[t1] vKS/TARG,2 -&gt;8\n-        &lt;1&gt; ex-list K -&gt;7\n3           &lt;0&gt; pushmark s -&gt;4\n4           &lt;$&gt; const(PV \"some text\") sM -&gt;5       # &lt;-- here\n5           &lt;$&gt; const(PV \"\\\\nom\") sM -&gt;6\n-           &lt;1&gt; ex-rv2cv sK/2 -&gt;-\n6              &lt;$&gt; gv(*match) s -&gt;7\n</code></pre>\n\n<p>And with <code>qr//</code>:</p>\n\n<pre><code> $ perl -MO=Concise scratch2.pl \n8  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 2529 scratch2.pl:5950) v:%,R,*,&amp;,{,x*,x&amp;,x$,$,469762048 -&gt;3\n7     &lt;1&gt; entersub[t1] vKS/TARG,2 -&gt;8\n-        &lt;1&gt; ex-list K -&gt;7\n3           &lt;0&gt; pushmark s -&gt;4\n4           &lt;$&gt; const(PV \"some text\") sM -&gt;5       # &lt;-- here\n5           &lt;/&gt; qr(/\"foobar\"/) lM/RTIME -&gt;6\n-           &lt;1&gt; ex-rv2cv sK/2 -&gt;-\n6              &lt;$&gt; gv(*match) s -&gt;7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 5, "last_activity_date": 1489422614, "last_edit_date": 1489422614, "creation_date": 1489416452, "answer_id": 42766531, "question_id": 42765979, "link": "https://stackoverflow.com/questions/42765979/why-isnt-my-overloadconstant-sub-triggered-when-i-use-a-string-variable/42766531#42766531", "title": "Why isn&#39;t my overload::constant sub triggered when I use a string variable?", "body": "<blockquote>\n  <p>Is there a reason that <code>\\nom</code> triggers Tagger but a variable equal to <code>\\nom</code> doesn't?</p>\n</blockquote>\n\n<p>Because <code>'\\nom'</code> is a string literal, not a constant piece of a regex:</p>\n\n<pre><code>$ perl -Moverload -E'BEGIN { overload::constant qr =&gt; sub { say \"@_\" } } $foo =~ \"bar\"'\n$ perl -Moverload -E'BEGIN { overload::constant qr =&gt; sub { say \"@_\" } } $foo =~ /bar/'\nbar bar qq\n</code></pre>\n\n<hr>\n\n<p>What you're doing is a bad idea. The following implementation is much easier to understand and doesn't change regex semantics everywhere:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nsub chop_pattern {\n    my ($string, $pattern) = @_;\n\n    my %mapping = (\n        '\\nom' =&gt; qr/((?:[A-Z][a-z]+\\s*){2,3}(?:\\([\\w\\s]+\\)+?)*)/\n    );\n\n    if (exists $mapping{$pattern}) {\n        my $matched = $string =~ s/$mapping{$pattern}/ /g;\n        return $string, $1 if $matched;\n    }\n\n    return $string, '';\n}\n\nmy ($string, $chopped) = chop_pattern('foo Bar Baz qux', '\\nom');\nsay \"&lt;$string&gt; &lt;$chopped&gt;\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;foo  qux&gt; &lt;Bar Baz &gt;\n</code></pre>\n\n<p>I'm guessing you went with overload because you want to handle more than one \"magic\" string (e.g. <code>\\nom</code>). I did that with a simple hash that maps strings to regexes.</p>\n"}], "owner": {"reputation": 166, "user_id": 4154806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f4443a15ca179dd626a141be9227933?s=128&d=identicon&r=PG&f=1", "display_name": "user90346", "link": "https://stackoverflow.com/users/4154806/user90346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 42766510, "answer_count": 2, "score": 11, "last_activity_date": 1489422614, "creation_date": 1489414992, "last_edit_date": 1489420893, "question_id": 42765979, "link": "https://stackoverflow.com/questions/42765979/why-isnt-my-overloadconstant-sub-triggered-when-i-use-a-string-variable", "title": "Why isn&#39;t my overload::constant sub triggered when I use a string variable?", "body": "<p>I'm trying to <a href=\"https://metacpan.org/pod/overload#Overloading-Constants\" rel=\"noreferrer\">overload constants in regular expressions</a>. Here is my Tagger package:</p>\n\n<pre><code>package Tagger;\nuse overload;\n\nsub import { overload::constant 'qr' =&gt; \\&amp;convert }\n\nsub convert {\n    my $re = shift;\n    $re =~ s/\\\\nom/((?:[A-Z]{1}[a-z]+\\\\s*){2,3}(\\\\((\\\\w|\\\\s)+\\\\)+?)*)/xg;\n    return $re;\n}\n\n1;\n</code></pre>\n\n<hr>\n\n<p>Here is the subroutine in which I'd like to trigger the overloading:</p>\n\n<pre><code>sub ChopPattern {\n    my $string= shift;\n    my $pattern = shift;\n\n    if($string =~ m/$pattern/) {\n        $string =~ s/$&amp;/ /g;\n        return ($string, $&amp;);\n    } else {\n        return ($string, '');\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Here is my test:</p>\n\n<pre><code>$test = \"foo bar Max Fast bar foo\";\n($test, $name) = ChopPattern($test, '\\nom');\nsay $test;\nsay $name;\n</code></pre>\n\n<hr>\n\n<p>If I hardwire the test pattern, <code>\\nom</code>, in the subroutine's match:</p>\n\n<pre><code>sub ChopPattern {\n    my $string= shift;\n    my $pattern = shift;\n\n    if($string =~ m/\\nom/) {\n        $string =~ s/$&amp;/ /g;\n        return ($string, $&amp;);\n    } else {\n        return ($string, '');\n    }\n}\n</code></pre>\n\n<p>the test yields the correct answer:</p>\n\n<pre><code>foo bar  bar foo\nMax Fast\n</code></pre>\n\n<hr>\n\n<p>But if I use <code>$pattern</code> in the match as above the test yields:</p>\n\n<pre><code>foo bar Max Fast bar foo\n&lt;null line&gt;\n</code></pre>\n\n<p>Is there a reason that <code>\\nom</code> triggers Tagger but a variable equal to <code>\\nom</code> doesn't?</p>\n\n<p>Here are the details of the version of Perl being used:</p>\n\n<pre><code>This is perl 5, version 16, subversion 3 (v5.16.3) built for MSWin32-x64-multi-thread (with 1 registered patch, see perl -V for more detail)\n\nCopyright 1987-2012, Larry Wall\n\nBinary build 1604 [298023] provided by ActiveState http://www.ActiveState.com\nBuilt Apr 14 2014 15:29:45\n</code></pre>\n"}, {"tags": ["perl", "awk", "command-line"], "answers": [{"tags": [], "owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "is_accepted": false, "score": -1, "last_activity_date": 1489414790, "creation_date": 1489414790, "answer_id": 42765899, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42765899#42765899", "title": "Finding length of common prefix in two strings", "body": "<p>You could do it directly with <code>gawk</code>. Here, it just compares the current line with the previous one and counts the number of common leading characters:</p>\n\n<pre><code>BEGIN{\n    prev=\"\";\n}\n{\n    curr=$1;\n    n = length(curr);\n    m = length(prev);\n    s = n&lt;m?n:m;\n    cnt = 0;\n    for(i = 1;i &lt;= s;i++){\n        if(substr(curr, i, 1) == substr(prev, i, 1)){\n            cnt++;\n        }else{\n            break;\n        }\n    }\n    print(cnt, curr);\n\n    prev=curr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1489417146, "last_edit_date": 1489417146, "creation_date": 1489415734, "answer_id": 42766251, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42766251#42766251", "title": "Finding length of common prefix in two strings", "body": "\n\n<p>Like this, perhaps?</p>\n\n<p>It's written in Perl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $prev = \"\";\n\nwhile ( my $line = &lt;DATA&gt; ) {\n\n    chomp $line;\n\n    my $max = 0;\n    ++$max until $max &gt; length($line) or substr($prev, 0, $max) ne substr($line, 0, $max);\n\n    printf \"%-2d  %s\\n\", $max-1, $line;\n\n    $prev = $line;\n}\n\n__DATA__\n#to\n#top\n/0linyier\n/10000001659/item/1097859586891251/\n/10000001659/item/1191085827568626/\n/10000121381/item/890759920974460/\n/10000154478/item/1118425481552267/\n/10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n/1175332/item/10150825241495757/\n/806123/item/10210653847881125/\n/51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>0   #to\n3   #top\n0   /0linyier\n1   /10000001659/item/1097859586891251/\n19  /10000001659/item/1191085827568626/\n6   /10000121381/item/890759920974460/\n7   /10000154478/item/1118425481552267/\n3   /10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n2   /1175332/item/10150825241495757/\n1   /806123/item/10210653847881125/\n1   /51927642128/item/488930816844251927642128/341878905879428/[Finished in 0.1s]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489422374, "post_id": 42766255, "comment_id": 72652756, "body": "You seem to be optimising something that may well already be fast enough"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489422862, "post_id": 42766255, "comment_id": 72653071, "body": "The OP in his question said he had a solution that involved going 1 character at a time and asked for a faster approach since that would be too slow (<code>I am trying to work in perl by unpacking the strings into characters and counting till first mismatch but I wonder if there is some not too slow method</code>) so not sure where you&#39;re coming from with that statement."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489423514, "post_id": 42766255, "comment_id": 72653487, "body": "Ah I see. I didn&#39;t read that to mean that they already had a solution. Maybe you&#39;re right. The slow part of working with individual characters is the <code>split</code> which has to create an array and a number of scalar variables."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1489418385, "last_edit_date": 1489418385, "creation_date": 1489415742, "answer_id": 42766255, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42766255#42766255", "title": "Finding length of common prefix in two strings", "body": "<p>There's no builtin will do that for you but rather than going 1 character at a time you could compare half of each string at a time in a kind of binary search, something like (half-assed awk pseudo-code):</p>\n\n<pre><code>prev     = curr\nlgthPrev = lgthCurr\ncurr     = $0\nlgthCurr = length(curr)\npartLgth = (lgthPrev &gt; lgthCurr ? lgthCurr : lgthPrev)\nwhile ( got strings to work with ) {\n    partCurr = substr(curr,1,partLgth)\n    partPrev = substr(prev,1,partLgth)\n    if ( partCurr == partPrev ) {\n        # add on half of the rest of each string and try again\n        partLgth = partLgth * 1.5\n    }\n    else {\n        # subtract half of these strings and try again\n        partLgth = partLgth * 0.5\n    }\n}\n</code></pre>\n\n<p>Exit the above loop when you have no more sub-strings to compare and at that point the result is either:</p>\n\n<ol>\n<li>The 2 substrings matched on the previous iteration so that\nprevious string length is the max length of matching substrings, or</li>\n<li>The 2 substrings never matched so there is no partial match between the 2 strings.</li>\n</ol>\n\n<p>That will use potentially far fewer iterations than a char-by-char comparison but as written it's doing a string rather than char comparison on every iteration so idk what the net performance result will be. You could speed it up by doing a character rather than string comparison first on every iteration and only do a string comparison if the characters match at the current position:</p>\n\n<pre><code>prev     = curr\nlgthPrev = lgthCurr\ncurr     = $0\nlgthCurr = length(curr)\npartLgth = (lgthPrev &gt; lgthCurr ? lgthCurr : lgthPrev)\nwhile ( got strings to work with ) {\n    if ( substr(curr,partLgth,1) == substr(prev,partLgth,1) )\n        isMatch = (substr(curr,1,partLgth) == substr(prev,1,partLgth) ? 1 : 0)\n    }\n    else {\n        isMatch = 0\n    }\n    if ( isMatch ) \n        # add on half of the rest of each string and try again\n        partLgth = partLgth * 1.5\n    }\n    else {\n        # subtract half of these strings and try again\n        partLgth = partLgth * 0.5\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1489423250, "post_id": 42766355, "comment_id": 72653317, "body": "Correct, the behavior produced by setting FS to the null string is undefined by POSIX so any awk can do whatever it likes with it and still be POSIX compliant. GNU awk (and some others?) chooses to split on characters given that setting which can be useful."}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": false, "score": 1, "last_activity_date": 1489416538, "last_edit_date": 1489416538, "creation_date": 1489415972, "answer_id": 42766355, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42766355#42766355", "title": "Finding length of common prefix in two strings", "body": "<p>Using <a href=\"/questions/tagged/gawk\" class=\"post-tag\" title=\"show questions tagged &#39;gawk&#39;\" rel=\"tag\">gawk</a></p>\n\n<pre><code>awk -v FS=\"\" 'p{\n    pl=0; \n    split(p,a,r); \n    for(i=1;i in a; i++)\n          if(a[i]==$i){ pl++ }else { break }\n}\n{ \n   print pl+0,$0; p=$0\n}' file\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>awk -v FS=\"\" 'p{\n     pl=0; \n     for(i=1;i&lt;=NF; i++)\n     if(substr(p,i,1)==$i){ pl++ }else { break }\n}\n{ \n   print pl+0,$0; p=$0\n}' file\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>$ cat file\n#to\n#top\n/0linyier\n/10000001659/item/1097859586891251/\n/10000001659/item/1191085827568626/\n/10000121381/item/890759920974460/\n/10000154478/item/1118425481552267/\n/10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n/1175332/item/10150825241495757/\n/806123/item/10210653847881125/\n/51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ awk -v FS=\"\" 'p{pl=0; split(p,a,r); for(i=1;i in a; i++)if(a[i]==$i){ pl++ }else { break }}{ print pl+0,$0; p=$0}' file\n0 #to\n3 #top\n0 /0linyier\n1 /10000001659/item/1097859586891251/\n19 /10000001659/item/1191085827568626/\n6 /10000121381/item/890759920974460/\n7 /10000154478/item/1118425481552267/\n3 /10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n2 /1175332/item/10150825241495757/\n1 /806123/item/10210653847881125/\n1 /51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<p><strong>Explanation</strong> </p>\n\n<pre><code>awk -v FS=\"\" '                                  # call awk set field sep=\"\"\n       p{\n           pl=0;                                # reset variable pl\n           split(p,a,r);                        # split variable p\n           for(i=1;i in a; i++)                 # loop through array\n                 if(a[i]==$i){                  # check array element with current field\n                     pl++                       # if matched then increment pl\n                 }else { \n                     break                      # else its over break loop\n                 }\n        }\n        { \n            print pl+0,$0;                      # print count, and current record\n            p=$0                                # store current record in variable p\n        }\n     ' file\n</code></pre>\n\n<p>Note that the standards say that the results are unspecified if an empty string is assigned to <code>FS</code>. Some versions of <code>awk</code> will produce the output showed above in your example. The version of <code>awk</code> on <code>OS/X</code> issues the warning and output. </p>\n\n<pre><code>awk: field separator FS is empty\n</code></pre>\n\n<p>So the special meaning of setting <code>FS</code> to an empty string, does not work in every <code>awk</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": false, "score": 0, "last_activity_date": 1489427508, "last_edit_date": 1495541368, "creation_date": 1489426756, "answer_id": 42770003, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42770003#42770003", "title": "Finding length of common prefix in two strings", "body": "<p>A <code>perl</code> script:</p>\n\n<pre><code>#!/usr/bin/perl -ln\n$c = [ unpack \"C*\" ]; #current record\n$i = 0;\n$i++ while $p-&gt;[$i] == $c-&gt;[$i]; # count till mismatch\nprint \"$i $_\";\n$p = $c               #save current record for next time\n</code></pre>\n\n<p>Same thing without command line flags:</p>\n\n<pre><code>#!/usr/bin/perl\nwhile (&lt;&gt;) {\n    chomp;\n    $c = [ unpack \"C*\" ];\n    $i = 0;\n    $i++ while $p-&gt;[$i] == $c-&gt;[$i];\n    print \"$i $_\\n\";\n    $p = $c\n}\n</code></pre>\n\n<p>Same thing as a one-liner:</p>\n\n<pre><code>perl -lne '$c=[unpack \"C*\"]; $i=0; $i++ while $p-&gt;[$i] == $c-&gt;[$i]; print \"$i $_\"; $p = $c'\n</code></pre>\n\n<p>Pass the file(s) containing the lines as argument(s) or pipe the data into the command.</p>\n\n<p>On my actual data, This runs about as fast as <a href=\"https://stackoverflow.com/a/42766251/1921546\">Borodin's solution</a>:</p>\n\n<pre><code>$ xzcat href.xz |wc -l\n33150\n$ time xzcat href.xz | ./borodin.pl &gt;borodin.out\n\nreal    0m2.437s\nuser    0m2.684s\nsys     0m0.080s\n$ time xzcat href.xz | ./pk.pl &gt; pk.out \n\nreal    0m2.305s\nuser    0m2.564s\nsys     0m0.088s\n$ diff pk.out borodin.out \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1489435863, "post_id": 42772351, "comment_id": 72660553, "body": "Ok, so mine turned out to resemble @AkshayHegde&#39;s solutions (++ for excellent taste, I wasn&#39;t peeking :) combined with some differencies so I dare to leave this here anyway. Comments to his solution about <code>FS</code> are valid for this solution as well."}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1489435430, "last_edit_date": 1489435430, "creation_date": 1489435059, "answer_id": 42772351, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings/42772351#42772351", "title": "Finding length of common prefix in two strings", "body": "<p>In awk:</p>\n\n<pre><code>$ awk -F '' '{n=split(p,a,\"\");for(i=1;i&lt;=(NF&lt;n?NF:n)&amp;&amp;a[i]==$i;i++);print --i,$0; p=$0}' file\n0 #to\n3 #top\n0 /0linyier\n1 /10000001659/item/1097859586891251/\n19 /10000001659/item/1191085827568626/\n6 /10000121381/item/890759920974460/\n7 /10000154478/item/1118425481552267/\n3 /10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n2 /1175332/item/10150825241495757/\n1 /806123/item/10210653847881125/\n1 /51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>awk -F '' '{                                # each char on its own field\n    n=split(p,a,\"\")                         # split prev record p each char in own a cell\n    for(i=1;i&lt;=(NF&lt;n?NF:n)&amp;&amp;a[i]==$i;i++);  # compare while $i == a[i]\n    print --i,$0                            # print comparison count (--fix)\n    p=$0                                    # store record to p(revious)\n}' file\n</code></pre>\n"}], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 2, "accepted_answer_id": 42766251, "answer_count": 6, "score": -5, "last_activity_date": 1489436968, "creation_date": 1489414028, "last_edit_date": 1489436968, "question_id": 42765648, "link": "https://stackoverflow.com/questions/42765648/finding-length-of-common-prefix-in-two-strings", "title": "Finding length of common prefix in two strings", "body": "<p>For all lines (about 30000) in a file, I want to find \nthe number of characters in the beginning\nof current line\nthat are same as previous line.\nFor example input:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#to\n#top\n/0linyier\n/10000001659/item/1097859586891251/\n/10000001659/item/1191085827568626/\n/10000121381/item/890759920974460/\n/10000154478/item/1118425481552267/\n/10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n/1175332/item/10150825241495757/\n/806123/item/10210653847881125/\n/51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<p>I expect:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0   #to\n3   #top\n0   /0linyier\n1   /10000001659/item/1097859586891251/\n19  /10000001659/item/1191085827568626/\n6   /10000121381/item/890759920974460/\n7   /10000154478/item/1118425481552267/\n3   /10897504949/pic/89875494927073741108975049493956/108987352826059/?lang=3\n2   /1175332/item/10150825241495757/\n1   /806123/item/10210653847881125/\n1   /51927642128/item/488930816844251927642128/341878905879428/\n</code></pre>\n\n<p>I am trying to work in <code>perl</code> by unpacking the strings into characters and counting till first mismatch but I wonder if there is some not too slow method using built in functions of <code>awk</code> or <code>perl</code>.</p>\n\n<p>Update: I have added my attempt as an answer.</p>\n"}, {"tags": ["linux", "perl", "unix", "centos"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489412985, "post_id": 42765031, "comment_id": 72645666, "body": "Start by using placeholders for your SQL, and move the <code>prepare</code> outside of the loop. You also don&#39;t need to make <code>@chars</code> lexical inside of the loop, it never changes. Then replace the <code>system</code> calls with <code>print</code> to see what&#39;s going on."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489413234, "post_id": 42765031, "comment_id": 72645837, "body": "@simbabque: <code>@chars</code> can go outside the loop, but not <code>$len</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489413301, "post_id": 42765031, "comment_id": 72645877, "body": "@Borodin yes, I forgot about the while. But that can be rewritten to <code>$hash .= $chars[ rand @chars ] for 1 .. $len</code> and then it doesn&#39;t change."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489413508, "post_id": 42765031, "comment_id": 72646022, "body": "Do you use <code>srand</code> at all? I think you should show your complete program."}, {"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489414044, "post_id": 42765031, "comment_id": 72646385, "body": "@Borodin This is the complete program outside of database connection."}, {"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489414066, "post_id": 42765031, "comment_id": 72646396, "body": "@simbabque Already debugged how you said and it prints what it should be printing"}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 1, "creation_date": 1489418017, "post_id": 42765031, "comment_id": 72649517, "body": "I find it odd that you are directing the command to put the folder in /home/newusers, but the folders are in /home.   Maybe -b would work better?   Also, is it possible that the random number is the UID ( the numerical value of the username)?   Although the number in the first example seems way to large for that, I&#39;m not sure if that is the real number or something you just typed.  Do a <code>stat &#47;path&#47;to&#47;file</code> and let use see the results.  You may want to add the printout that simbaque requested... that would help us debug. Thx."}, {"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "reply_to_user": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 0, "creation_date": 1489418132, "post_id": 42765031, "comment_id": 72649623, "body": "@FrankRalphBob yes the second number is the UID, the first number I have no idea. Also I have resetted the server and everything works just fine again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489418172, "post_id": 42765031, "comment_id": 72649657, "body": "<i>&quot;This is the complete program outside of database connection&quot;</i> Then <b><i>please always add</i></b> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> to the top of every Perl program you write, especially before asking others for help to fix it."}, {"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489418231, "post_id": 42765031, "comment_id": 72649707, "body": "@Borodin there is also use string and use warnings &#39;all&#39; but they return nothing. I though this was assumed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489418393, "post_id": 42765031, "comment_id": 72649844, "body": "@prgrm: It should be, but mostly it is not. The majority of inexperienced coders seem to prefer to write &quot;on the edge&quot; and shun the help of Perl itself in debugging their work. I had no reason to think you were any different, especially since your program was in such a mess before I tidied it up."}, {"owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "reply_to_user": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 0, "creation_date": 1489418677, "post_id": 42765031, "comment_id": 72650046, "body": "@FrankRalphBob you mean stat path to my perl script right?   File: \u2018user.pl\u2019   Size: 1456            Blocks: 8          IO Block: 4096   regular file Device: 801h/2049d      Inode: 3672909     Links: 1 Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root) Access: 2017-03-13 15:58:57.933518952 +0100 Modify: 2017-03-13 15:55:16.000000000 +0100 Change: 2017-03-13 15:55:17.579406272 +0100  Birth: -"}, {"owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "edited": false, "score": 0, "creation_date": 1489424872, "post_id": 42765031, "comment_id": 72654424, "body": "@prgrm  Actually, I need you to stat the user directory you were making - that would give us some more information.  However, since it is suddenly working after you &quot;reset&quot; - not sure if any of this is an issue or not.  If you cannot reproduce the error, most of this is moot."}], "answers": [{"tags": [], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "is_accepted": true, "score": 0, "last_activity_date": 1489420474, "creation_date": 1489420474, "answer_id": 42768008, "question_id": 42765031, "link": "https://stackoverflow.com/questions/42765031/creating-users-from-database-gives-me-random-results/42768008#42768008", "title": "Creating users from database gives me random results", "body": "<p>Resetting the server solved the problem, so I assume this has to do with Linux and not with the code.</p>\n"}], "owner": {"reputation": 2964, "user_id": 4485955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d31f821e9c645e34ff7ee6f729843076?s=128&d=identicon&r=PG&f=1", "display_name": "prgrm", "link": "https://stackoverflow.com/users/4485955/prgrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 42768008, "answer_count": 1, "score": 0, "last_activity_date": 1489420474, "creation_date": 1489412231, "last_edit_date": 1489417908, "question_id": 42765031, "link": "https://stackoverflow.com/questions/42765031/creating-users-from-database-gives-me-random-results", "title": "Creating users from database gives me random results", "body": "<p>I had this script which worked perfectly until today.</p>\n\n<p>I am trying to automate the creation of Linux users. I do it like this:</p>\n\n<pre><code>my $sql = 'SELECT id FROM users WHERE updated = 0';\nmy $sth = $dbh-&gt;prepare( $sql );\n$sth-&gt;execute();\n#\n\nwhile ( my @row = $sth-&gt;fetchrow_array ) {\n\n    #print $row[0],\"\\n\";\n\n    my @chars = ( '0' .. '9', 'A' .. 'F' );\n    my $len = 12;\n    my $hash;\n\n    while ( $len-- ) {\n        $hash .= $chars[ rand @chars ]\n    }\n\n    system( \"/usr/sbin/useradd -g mygroup -d /home/newusers/$hash -s /sbin/nologin $hash\" );\n    system( \"echo $hash:$hash | /usr/sbin/chpasswd\" );\n\n    my $sql_hash_update =\n            \"UPDATE users SET hash = '\"\n            . $hash\n            . \"', updated = 1 WHERE id = '\"\n            . $row[0]\n            . \"'\";\n\n    my $sth_hash_update = $dbh-&gt;prepare( $sql_hash_update );\n\n    $sth_hash_update-&gt;execute();\n}\n</code></pre>\n\n<p>This has worked flawlessly for a week. It is executed once every minute in the crontab.</p>\n\n<p>Now it just overwrites the directory and adds the owner as some sort of random numbers.</p>\n\n<p>Example:</p>\n\n<p>Executed once:</p>\n\n<blockquote>\n  <p>User created: AEB7F3BDED52 (exists)</p>\n  \n  <p>Folder created: /home/AEB7F3BDED52</p>\n  \n  <p>Owner of the folder: 652350688667 (does not exist as user actually)</p>\n</blockquote>\n\n<p>Executed twice:</p>\n\n<blockquote>\n  <p>User created: AD1B583F6062 (exists)</p>\n  \n  <p>Folder created: /home/AD1B583F6062</p>\n  \n  <p>Owner of the folder: 1013 (does not exist)</p>\n</blockquote>\n\n<p>And so on. This random behaviour didn't happen before. I have also halted every other script to make sure there are no interferences. It only happens here. I am clueless because of the randomness of the results. Any help would be appreciated.</p>\n\n<p>EDIT: After resetting the script works again.</p>\n"}, {"tags": ["perl", "date"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489411303, "post_id": 42764677, "comment_id": 72644460, "body": "Your problem is the output, right?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489411545, "post_id": 42764677, "comment_id": 72644624, "body": "And the input too!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1489412626, "post_id": 42764677, "comment_id": 72645390, "body": "<code>$date = $date-&gt;strftime(&quot;%Y%m%d&quot;);</code> - this is a bad idea, because you replace a <code>Time::Piece</code> object that you can manipulate, with a string (numeric) that you can&#39;t as easily - leave <code>strftime</code> until you&#39;re outputting it."}], "answers": [{"comments": [{"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1489411861, "post_id": 42764791, "comment_id": 72644854, "body": "If I use strftime I got Can&#39;t locate object method &quot;strftime&quot; via package &quot;20256706&quot;.. I just used: print &quot;Date: &quot; . $date-&gt;strftime(&quot;%Y%m%d&quot;) . &quot;\\n&quot;;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1489411914, "post_id": 42764791, "comment_id": 72644888, "body": "That&#39;s because you overwrite your object with the formatted string. I removed that part. I&#39;ll make it clearer in a bit."}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1489412015, "post_id": 42764791, "comment_id": 72644967, "body": "I added my parsing"}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1489412409, "post_id": 42764791, "comment_id": 72645234, "body": "yea, but i get same error when I use print &quot;Date: &quot; . $date-&gt;strftime(&quot;%Y%m%d&quot;) . &quot;\\n&quot;; too"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1489412486, "post_id": 42764791, "comment_id": 72645281, "body": "@tomsk that&#39;s because your variable is not a Time::Piece object any more. You are assigning to it above the loop."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1489412228, "last_edit_date": 1489412228, "creation_date": 1489411533, "answer_id": 42764791, "question_id": 42764677, "link": "https://stackoverflow.com/questions/42764677/subtract-day-in-specific-format/42764791#42764791", "title": "Subtract day in specific format", "body": "<p>You need to use <code>strftime</code> for each iteration. Do not assign the return value of that call <code>$date</code> or it will overwrite your object with a string. This line is wrong:</p>\n\n<pre><code>$date = $date-&gt;strftime(\"%Y%m%d\");\n</code></pre>\n\n<p>I've removed the parsing from your code for this example as I don't know what your input is.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $date = localtime;\n\nmy $i = 7;\nwhile($i &gt; 0) {\n    $date -= ONE_DAY;\n    printf \"Date: %s\\n\", $date-&gt;strftime('%Y%m%d');\n    $i--;\n}\n</code></pre>\n\n<p>This prints a list of days, going from today backwards.</p>\n\n<pre><code>Date: 20170312\nDate: 20170311\nDate: 20170310\nDate: 20170309\nDate: 20170308\nDate: 20170307\nDate: 20170306\n</code></pre>\n"}], "owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 42764791, "answer_count": 1, "score": 2, "last_activity_date": 1489417677, "creation_date": 1489411128, "last_edit_date": 1489417677, "question_id": 42764677, "link": "https://stackoverflow.com/questions/42764677/subtract-day-in-specific-format", "title": "Subtract day in specific format", "body": "<p>I would like to subtract one day each time through the loop in format %Y%m%d, but when I run this code, it shows some weird numbers.</p>\n\n<pre><code>my $date = Time::Piece-&gt;strptime(\"20170306\", \"%Y%m%d\");\n$date = $date-&gt;strftime(\"%Y%m%d\");\n\nmy $i = 7;\nwhile($i &gt; 0) {\n    $date -= ONE_DAY;\n    print \"Date: \" . $date . \"\\n\";\n    $i--;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Date: 20083906\nDate: 19997506\nDate: 19911106\nDate: 19824706\nDate: 19738306\nDate: 19651906\nDate: 19565506\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489405544, "post_id": 42762830, "comment_id": 72640752, "body": "What is your question? You forgot to ask one. What do you want us to identify?"}, {"owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489405590, "post_id": 42762830, "comment_id": 72640781, "body": "my $commrate = $rateTypes{$bCommType} if ($commTypes{$bCommType} == 2); I am getting an undef value in my variable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489405679, "post_id": 42762830, "comment_id": 72640824, "body": "<a href=\"https://en.wikipedia.org/wiki/Perl#Name\" rel=\"nofollow noreferrer\">It&#39;s called Perl, not PERL.</a> :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489407285, "post_id": 42762830, "comment_id": 72641839, "body": "You still haven&#39;t actually asked a question. You&#39;re just stating facts."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489405757, "post_id": 42762898, "comment_id": 72640860, "body": "Thanks, i will try that."}, {"owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489405810, "post_id": 42762898, "comment_id": 72640895, "body": "then, how do i pass the conditional output to the commrate variable?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489405840, "post_id": 42762898, "comment_id": 72640915, "body": "@JonjonNegrite sorry, I forgot the assignment. Updated. The important parts are that 1) you need to declare the variable before you conditionally assign something, and 2) you need to assign something so it does not start as <code>undef</code>."}, {"owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489405879, "post_id": 42762898, "comment_id": 72640940, "body": "my %commTypes=( &#39;none&#39;        =&gt; &#39;0&#39;,               &#39;public&#39;      =&gt; &#39;1&#39;,                &#39;custom_percentage&#39; =&gt; &#39;2&#39;,                &#39;custom_permeg&#39;   =&gt; &#39;2&#39;,                &#39;custom_flat&#39;   =&gt; &#39;2&#39;,                 ); this the commType"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489405970, "post_id": 42762898, "comment_id": 72641006, "body": "@JonjonNegrite that&#39;s a list of different types. Which one is the default? I think what you really want to do is <code>$commrate = $rateType{ $rateTypes{ $bCommType } };</code>. Set <code>$commrate</code> to the rate that&#39;s behind the type number that&#39;s in <code>$bCommType</code>. BTW, your variable names are not very good. We usually don&#39;t use camel case in Perl. Try to pick very verbose names for your vars, so it&#39;s easy to understand what they do."}, {"owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489406236, "post_id": 42762898, "comment_id": 72641176, "body": "it is not my code, i am just debugging it also for my friend. i just don&#39;t understand this my $commrate = $rateTypes{$bCommType} if ($commTypes{$bCommType} == 2); where is returning the undef"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "edited": false, "score": 0, "creation_date": 1489406898, "post_id": 42762898, "comment_id": 72641582, "body": "@JonjonNegrite that line does two things: 1) it creates a new variable <code>$commrate</code>. New variables start out as <code>undef</code> if you don&#39;t assign something. 2) it assigns a value <b>if the condition is met</b>. So if not, it&#39;s not assigned. But that syntax is deprecated. That means you should not use it because it will be removed in the future. See <a href=\"http://perldoc.perl.org/perldiag.html#Deprecated-use-of-my()-in-false-conditional\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1489405827, "last_edit_date": 1489405827, "creation_date": 1489405659, "answer_id": 42762898, "question_id": 42762830, "link": "https://stackoverflow.com/questions/42762830/undef-variable-from-if-condition/42762898#42762898", "title": "undef variable from &quot;if&quot; condition", "body": "<p>You are using a conditional declaration. That's deprecated. Perl is probably giving you a warning (you are using <code>use warnings</code>, right?).</p>\n\n<p>Move the declaration into its own line, provide a default, and do the assignment with the condition in a new line.</p>\n\n<pre><code>my $commrate = 'default'; # it's not clear which %commTypes is the default\n$commrate = $rateTypes{$bCommType} if ($commTypes{$bCommType} == 2);\n</code></pre>\n\n<p>You need to provide a default or starting value because new variables in Perl always start out as <code>undef</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1489408884, "creation_date": 1489408884, "answer_id": 42763902, "question_id": 42762830, "link": "https://stackoverflow.com/questions/42762830/undef-variable-from-if-condition/42763902#42763902", "title": "undef variable from &quot;if&quot; condition", "body": "<p>You set <code>$commrate</code> to <code>$rateTypes{$bCommType}</code> if the value of <code>$commTypes{$bCommType}</code> is 2. But <code>$bCommType</code> is <code>none</code> and <code>$commTypes{none}</code> is zero, so the assignment doesn't happen and <code>$commrate</code> is left undefined</p>\n\n<p>That is the root of your problem, but aside from this, you shouldn't declare a variable conditionally. It does all sorts of strange and undefined things if you try. As <strong>simbabque</strong> has said, you need to declare the variable separately and make just the assigmnent conditional, but in this case the result will be the same for the reason I described above</p>\n"}, {"tags": [], "owner": {"reputation": 2040, "user_id": 7449706, "user_type": "registered", "profile_image": "https://graph.facebook.com/1302265936460934/picture?type=large", "display_name": "Kevin Ng", "link": "https://stackoverflow.com/users/7449706/kevin-ng"}, "is_accepted": false, "score": 0, "last_activity_date": 1489918738, "creation_date": 1489918738, "answer_id": 42885414, "question_id": 42762830, "link": "https://stackoverflow.com/questions/42762830/undef-variable-from-if-condition/42885414#42885414", "title": "undef variable from &quot;if&quot; condition", "body": "<p>This is a better way of using a conditional declaration. This method will work whether if you are working with Perl, JavaScript, Java or PHP. Where I declared the condition, the statement before the question mark is the condition. The value right after the question mark is the value that will be assigned to the variable when the condition evaluates to be true. The value after the column is the value that will be assigned to the variable if the statement evaluates to be false.</p>\n\n<pre><code>use strict;\nmy $bCommType = 'none';\n\nmy %commTypes = (\n    'none'              =&gt; '0',\n    'public'            =&gt; '1',\n    'custom_percentage' =&gt; '2',\n    'custom_permeg'     =&gt; '2',\n    'custom_flat'       =&gt; '2',\n);\n\nmy %rateTypes = (\n     'custom_percentage' =&gt; '%',\n     'custom_permeg'     =&gt; '$',\n     'custom_flat'       =&gt; 'FLAT',\n     'none'              =&gt; 'none',\n);\n\nmy $commrate = $commTypes{$bCommType} == 2? $rateTypes{$bCommType} : \"false value\";\n\nprint $commrate;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7702726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qBa8BvlyFhc/AAAAAAAAAAI/AAAAAAAAAOM/y13fm6CQA9w/photo.jpg?sz=128", "display_name": "Jonjon Negrite", "link": "https://stackoverflow.com/users/7702726/jonjon-negrite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1489918738, "creation_date": 1489405454, "last_edit_date": 1489408553, "question_id": 42762830, "link": "https://stackoverflow.com/questions/42762830/undef-variable-from-if-condition", "title": "undef variable from &quot;if&quot; condition", "body": "<p>I have a problem condition in Perl. I hope someone can help me.</p>\n\n<pre><code>my $bCommType = 'none';\n\nmy %commTypes = (\n    'none'              =&gt; '0',\n    'public'            =&gt; '1',\n    'custom_percentage' =&gt; '2',\n    'custom_permeg'     =&gt; '2',\n    'custom_flat'       =&gt; '2',\n);\n\nmy %rateTypes = (\n    'custom_percentage' =&gt; '%',\n    'custom_permeg'     =&gt; '$',\n    'custom_flat'       =&gt; 'FLAT',\n    'none'              =&gt; 'none',\n);\n\nmy $commrate = $rateTypes{$bCommType} if ( $commTypes{$bCommType} == 2 );\n</code></pre>\n\n<p>my output in <code>$commrate</code> is <code>undef</code>, can someone help me identify the issue?</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1489402900, "post_id": 42761190, "comment_id": 72639206, "body": "The proper line ending is linefeed on every platform. It is PerlIO that converts between that and the nat8ve line endings on input and output."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 13, "last_activity_date": 1489417354, "last_edit_date": 1489417354, "creation_date": 1489400371, "answer_id": 42761190, "question_id": 42761169, "link": "https://stackoverflow.com/questions/42761169/why-does-print-give-different-output-with-and-without-newline/42761190#42761190", "title": "Why does print give different output with and without newline?", "body": "<p>Because you are using the concatenation operator <code>.</code>, which forces <code>@foo</code> into <em>scalar context</em>. Arrays return their number of elements in scalar context.</p>\n\n<p>Use an argument list instead of the concatenation with your <code>print</code> to get the list and the newline. The array <code>@foo</code> will be expanded to the list it contains anyway, so the newline will just be another argument to <code>print</code>.</p>\n\n<pre><code>print @foo, \"\\n\";\n</code></pre>\n\n<p>As an alternative, you can use <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\"><code>say</code></a>, which needs to be activated with <code>use feature 'say'</code>. It removes the need to append newlines when printing. <code>say</code> is available from Perl 5.10.</p>\n\n<pre><code>use feature 'say';\nsay @foo;\n</code></pre>\n\n<p>You can also turn it on with</p>\n\n<pre><code>use v5.10;\n</code></pre>\n\n<p>This has nothing to do with the regular expression. It's a core behavior of Perl, and how lists in Perl work.</p>\n\n<p><a href=\"http://perl.plover.com/context.html\" rel=\"nofollow noreferrer\">Here's a good explanation</a> of what context means in Perl.</p>\n"}], "owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1489417354, "creation_date": 1489400307, "last_edit_date": 1489400583, "question_id": 42761169, "link": "https://stackoverflow.com/questions/42761169/why-does-print-give-different-output-with-and-without-newline", "title": "Why does print give different output with and without newline?", "body": "<p>I am getting two different results with and without new line character in the <code>print</code> statement of regular expression match. why?</p>\n\n<pre><code>$string16=\"abfoo bcfooo defooo ghfooo ijfoo klfooo mnfooo\";\n@foo=$string16=~ m/foo/g;\nprint(@foo);\nprint(\"\\n\");\n\n$string17=\"abfoo bcfooo defooo ghfooo ijfoo klfooo mnfooo\";\n@foo=$string17=~ m/foo/g;\nprint(@foo.\"\\n\");\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>foofoofoofoofoofoofoo\n7\n</code></pre>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 731, "user_id": 5223152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fea3aeae91f0bc5a3b3140e86f9709?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/5223152/ayush"}, "edited": false, "score": 0, "creation_date": 1489400683, "post_id": 42761054, "comment_id": 72637887, "body": "You can add a timeout to your command <code>timeout 20s your command</code>.  Also, you can use <code>command &amp; sleep 10 ; kill $!</code>. If you command doesn&#39;t complete in 10 seconds it will be killed. ."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1489401727, "last_edit_date": 1489401727, "creation_date": 1489401157, "answer_id": 42761438, "question_id": 42761054, "link": "https://stackoverflow.com/questions/42761054/terminating-a-command-in-perl-based-on-conditions/42761438#42761438", "title": "terminating a command in perl based on conditions", "body": "<p>I'd suggest using <code>IO::Select</code> and <code>can_read</code>. I would also suggest - don't run <code>grep</code> do it within perl. </p>\n\n<p>Something like this:</p>\n\n<pre><code>while ( my $line = &lt;$fh&gt; ) {\n   chomp $line;\n   print \"TNS: $line\\n\";\n\n   my $pid = open( my $output, '-|', 'tnsping $line' );\n   my $select = IO::Select-&gt;new($output);\n\n   my $host;\n   my $port;\n   #check if the FH is readable, with a 5s timeout. \n   while ( $select-&gt;can_read(5) ) {\n      my $line = &lt;$output&gt;; \n      $line =~ m/HOST\\s*=\\s*([A-Za-z0-9.\\-]*com?)/ and $host = $1;\n      $line =~ m/PORT\\s*=\\s*([0-9]+)/ and $port = $1;\n   }\n   close($output);\n   print $host, \"\\n\";\n   print $port, \"\\n\";\n   print \"$output\\n\";\n   print \"----------------\\n\\n\";\n}\n</code></pre>\n\n<p>I'd suggest as a style point - <code>$fh</code> isn't a great variable name. </p>\n"}], "owner": {"reputation": 2678, "user_id": 2526437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Hhpf2.jpg?s=128&g=1", "display_name": "cyberpirate92", "link": "https://stackoverflow.com/users/2526437/cyberpirate92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42761438, "answer_count": 1, "score": 0, "last_activity_date": 1489401727, "creation_date": 1489399915, "last_edit_date": 1592644375, "question_id": 42761054, "link": "https://stackoverflow.com/questions/42761054/terminating-a-command-in-perl-based-on-conditions", "title": "terminating a command in perl based on conditions", "body": "<p>I have a lot of TNS names from which I have to obtain host names and port numbers using the TNSPing utility.</p>\n<pre><code>while (my $line = &lt;$fh&gt;) {\n  chomp $line;\n  print &quot;TNS: $line\\n&quot;;\n  my $output = `tnsping $line | grep -Eo  &quot;HOST=[A-Za-z0-9.\\-]*com?|PORT=[0-9]+&quot;`;\n  print &quot;$output\\n&quot;;\n  print &quot;----------------\\n\\n&quot;;\n}\n</code></pre>\n<p>The output of a <code>tnsping</code> looks something like this</p>\n<blockquote>\n<pre><code>TNS Ping Utility for Linux: Version 11.1.0.0.2 on 15-FEB-2009 14:46:28\n\nCopyright (c) 1997, 2009 Oracle Corporation.  All rights reserved.\n\nUsed parameter files:\nUsed TNSNAMES adapter to resolve the alias\nAttempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =\nTCP)(HOST = sampleserver.com)(PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME =\nsales.us.example.com)))\nOK (10 msec)\n</code></pre>\n</blockquote>\n<p>The code works fine for most of the TNS entries, but for certain entries, The <code>tnsping</code> command is <strong>not exiting</strong> and hence gets struck. I tried running one of these entries manually, I found out that they are printing to stdout but for some reason the tnsping utility is not exiting.</p>\n<p>Now my question is, How can I modify the script so that it moves to the next entry once I get the host and port data, irrespective of whether the <code>tnsping</code> utility exits or not ?</p>\n<p>My current understanding is that only when the <code>tnsping</code> utility exits, grep will work (i,e it's not continous).</p>\n<p>I am also open to any alternative approaches.</p>\n"}, {"tags": ["perl", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 2122220, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/518f602719d8c779756e985c514560cc?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2122220/rahul"}, "edited": false, "score": 0, "creation_date": 1489404669, "post_id": 42760316, "comment_id": 72640236, "body": "LWP::Protocol::https package is already installed and present under lib\\LWP\\Protocol. but still i am getting 500 SSL negotiation failed error. I am actually new to perl, Please let me know if i need to do something more."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489405826, "last_edit_date": 1495540429, "creation_date": 1489397576, "answer_id": 42760316, "question_id": 42759493, "link": "https://stackoverflow.com/questions/42759493/how-to-validate-whether-an-https-site-is-launching-or-not/42760316#42760316", "title": "How to validate whether an https site is launching or not", "body": "<p>Did you read the <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.23/README.SSL\" rel=\"nofollow noreferrer\">README.SSL</a> file that comes with LWP? It tells you to install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>.</p>\n\n<blockquote>\n  <p>As of libwww-perl v6.02 you need to install the LWP::Protocol::https module from its own separate distribution to enable support for https://... URLs for LWP::UserAgent.</p>\n  \n  <p>This makes it possible for that distribution to state the required dependencies as non-optional. See <a href=\"https://rt.cpan.org/Ticket/Display.html?id=66838\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Ticket/Display.html?id=66838</a> for further discussion why we ended up with this solution.</p>\n</blockquote>\n\n<p><strong>Update:</strong> <a href=\"https://stackoverflow.com/questions/32581367/lwpuseragent-and-500-ssl-negotiation-failed\">This answer seems relevant</a>. You might need to upgrade a lot of your software.</p>\n"}], "owner": {"reputation": 1083, "user_id": 2122220, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/518f602719d8c779756e985c514560cc?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2122220/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489405826, "creation_date": 1489394859, "question_id": 42759493, "link": "https://stackoverflow.com/questions/42759493/how-to-validate-whether-an-https-site-is-launching-or-not", "title": "How to validate whether an https site is launching or not", "body": "<p>I want to check whether an https site is launching or not.\nHow can i find this using Perl LWP module to get the content of an https site. \nI tried LWP::UserAgent module, to get the redirected URL </p>\n\n<pre><code>$ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"$0/0.1 \" . $ua-&gt;agent);\n$req = HTTP::Request-&gt;new(HEAD =&gt; 'http://some.com');\n$req-&gt;header('Accept' =&gt; 'text/html');\n$res = $ua-&gt;request($req);\n$res-&gt;is_success =&gt; This results in false. giving the below error.\n</code></pre>\n\n<p>500 SSL negotiation failed.</p>\n\n<p>Note: there is redirection envolved in this.. Where the final url is an https and not http.</p>\n\n<p>Can anyone guide me how to fix this.</p>\n"}, {"tags": ["regex", "perl", "sed"], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 2, "last_activity_date": 1489392354, "creation_date": 1489392354, "answer_id": 42758899, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text/42758899#42758899", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<p>Use a perl script with the following regex:</p>\n\n<pre><code>\\w+\\s*(?:\\[\\d+\\]){2}\\s*=\\s*\\K\\{([\\d.]*)\\}\n</code></pre>\n\n<p>And replace this with <code>\\{\\{\\1\\}\\}</code>, see <a href=\"https://regex101.com/r/90cc2e/2/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.\n<hr>\nBroken down, this says:</p>\n\n<pre><code>\\w+            # at least one word character\n\\s*            # Zero or more spaces\n(?:\\[\\d+\\]){2} # [0][1] or any other two-dimensional array\n\\s*=\\s*        # spaces = and spaces\n\\K             # \"forget\" everything\n\\{([\\d.]*)\\}   # match and capture {number}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1489392760, "post_id": 42758923, "comment_id": 72633535, "body": "And since we&#39;ve got &quot;tons of code&quot;, the <a href=\"http://stackoverflow.com/documentation/perl/3696/perl-one-liners/12740/edit-file-in-place#t=20170313080924884893\">edit in-line switch (-i)</a> may prove handy in our case."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1489437810, "post_id": 42758923, "comment_id": 72661550, "body": "@DmitryEgorov Thank you, a good point.  That may well come handy."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1496211041, "last_edit_date": 1496211041, "creation_date": 1489392465, "answer_id": 42758923, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text/42758923#42758923", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<p>A Perl one-liner, cautious about literals such as <code>2u</code> and <code>1e-06l</code> (etc)</p>\n\n<pre><code>perl -pe's/(?:\\[ [^]]+ \\]){2} \\s*=\\s* \\K (\\{ [^}]+ \\})/{$1}/x' in &gt; out\n</code></pre>\n\n<p>The <code>(?:)</code> groups (without capture) and <code>(?:\\[[^]]+\\]){2}</code> is for <code>[n][m]</code>. The <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code></a> is the form of the <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookbehind</a>, which also drops previous matches so we don't have to put them back.</p>\n\n<p>With an integer inside <code>[]</code> being just digits and with a float in <code>{}</code> being <code>n.m</code> this simplifies</p>\n\n<pre><code>perl -pe's/(?:\\[\\d+\\]){2}\\s*=\\s*\\K( \\{[\\d.]+\\} )/{$1}/x' in &gt; out\n</code></pre>\n\n<p>Note that <code>[\\d.]</code> allows for all kinds of wrong things, like <code>.2..3</code>, but that is a different issue.</p>\n\n<hr>\n\n<p>However, watch out for use of literals for numbers such as <code>2u</code> (with the suffix) which are fine as indices as well, along with <code>vec[1.2e+01]</code> or even <code>vec[1.2]</code>. The varied notation for float/double literals is also more likely to show up in data. Altogether I'd go with a more rounded pattern like</p>\n\n<pre><code>perl -pe's/(?:\\[ [\\d\\w+-.]+ \\]){2}\\s*=\\s*\\K(\\{ [\\d\\w+-.]+ \\})/{$1}/x' in &gt; out\n</code></pre>\n\n<p>Keep in mind that this allows various wrong formats and so it doesn't check data well.</p>\n"}, {"comments": [{"owner": {"reputation": 473, "user_id": 4561927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2507046577f85183d810cc8ff9c1558?s=128&d=identicon&r=PG&f=1", "display_name": "bobbay", "link": "https://stackoverflow.com/users/4561927/bobbay"}, "edited": false, "score": 0, "creation_date": 1489694370, "post_id": 42759177, "comment_id": 72796270, "body": "Thank you!! Great explanations and I cleaned up my other sed commands with unnecessary options. This command worked for me and I tweaked it around a bit to fit my needs. Yes, I had so many unnecessary groupings, after seeing your example, it&#39;s so easy to understand. Thanks again!"}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 1, "last_activity_date": 1489394034, "last_edit_date": 1489394034, "creation_date": 1489393523, "answer_id": 42759177, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text/42759177#42759177", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<p>Here is a <code>sed</code> attempt with the regex wrinkles ironed out.</p>\n\n<pre><code>sed -i -r 's/(.*\\[[0-9]+\\]\\[[0-9]+\\].*)(\\{0.0\\})(.*)/\\1{\\2}\\3/'\n</code></pre>\n\n<p>You had significant amounts of unmotivated additional grouping parentheses so <code>\\1\\2\\3</code> would only refer to the very beginning of the match.  I simply took them out.  Remember, the captures are ordered from left to right, so the first left parenthesis creates group <code>\\1</code>, the second captures into <code>\\2</code>, etc.</p>\n\n<p>The GNU <code>sed</code> extension <code>/e</code> allows you to invoke the shell on the replacement string but in this case this added no value and introduced significant additional possible errors, so taking it out was a no-brainer.  The <code>/g</code> option would make sense if you expected multiple matches per line, but your example shows no examples of input lines with multiple matches, and the entire script would need to be rather more complex in order to support that, so I took that out as well.</p>\n\n<p>Depending on the language you are attempting to process and the regularity of the files, you might want to permit whitespace between the closing and opening square brackets, or not; and the \"anything\" wildcard between the closing square bracket and the opening curly bracket looks somewhat prone to false positives (matching where you don't want it to) -- maybe change it to only permit whitespace and and equals sign, like <code>[ =]*</code> instead of <code>.*</code></p>\n"}, {"tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 1, "last_activity_date": 1489396499, "creation_date": 1489396499, "answer_id": 42759999, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text/42759999#42759999", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<p>Another approach with sed:</p>\n\n<pre><code>sed -i -r 's/((\\[[0-9]\\]){2} *= )(\\{[^}]*\\})/\\1{\\3}/' file\n</code></pre>\n\n<p>and same in BRE mode :</p>\n\n<pre><code>sed -i 's/\\(\\(\\[[0-9]\\]\\)\\{2\\} *= \\({[^}]*}\\)\\)/\\1{\\2}/' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1489420264, "post_id": 42762788, "comment_id": 72651248, "body": "Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> and <i>why</i> this solves the problem. Remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/42762788/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 393, "user_id": 7690467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bc973426f29e12fa39e21b31a04ebe3?s=128&d=identicon&r=PG&f=1", "display_name": "mop", "link": "https://stackoverflow.com/users/7690467/mop"}, "is_accepted": false, "score": 1, "last_activity_date": 1489405330, "creation_date": 1489405330, "answer_id": 42762788, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text/42762788#42762788", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<pre><code>sed -i '/]\\[/s/[{}]/&amp;&amp;/g' file\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4561927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2507046577f85183d810cc8ff9c1558?s=128&d=identicon&r=PG&f=1", "display_name": "bobbay", "link": "https://stackoverflow.com/users/4561927/bobbay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 42759177, "answer_count": 5, "score": 2, "last_activity_date": 1496211041, "creation_date": 1489391471, "question_id": 42758698, "link": "https://stackoverflow.com/questions/42758698/how-to-use-sed-perl-to-find-only-2d-arrays-and-replace-text", "title": "How to use sed/perl to find only 2d arrays and replace text?", "body": "<p>Currently I have tons of code that looks like this:</p>\n\n<pre><code>static double    testVar1          [2][8]  = {0.0}    ;  /* This is for testing var 1 */\nstatic double    var_test2         [3][2]  = {0.0}    ;  /* This is for testing var 2 */\nstatic double    var_test3         [4]     = {0.0}    ;  /* This is for testing var 3 */\n</code></pre>\n\n<p>2d arrays in c++ initialize with double curly brackets, so I need to only find the 2d arrays and change it like this:</p>\n\n<pre><code>static double    testVar1          [2][8]  = {{0.0}}  ;  /* This is for testing var 1 */\nstatic double    var_test2         [3][2]  = {{0.0}}  ;  /* This is for testing var 2 */\nstatic double    var_test3         [4]     = {0.0}    ;  /* This is for testing var 3 */\n</code></pre>\n\n<p>I have been trying with sed to use groupings, but I can't figure out how to escape the brackets, some posts suggest not escaping at all. I have also tried without extended regular expressions.</p>\n\n<p>Just now, I found out only 9 groupings in sed are possible, so now completely stuck. Any suggestions?</p>\n\n<pre><code>sed -i -r 's/(.*)(\\[)([0-9]+)(\\])(\\[)([0-9]+)(\\])(.*)(\\{)(0.0)(\\})(.*)/echo \"\\1\\2\\3\"/ge'\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "parallel-processing"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489387144, "post_id": 42757242, "comment_id": 72631215, "body": "Why are you trying to use threads and P::FM at the same time? I would only use one or the other."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489387453, "post_id": 42757242, "comment_id": 72631317, "body": "Always <code>fork</code> before creating any objects. Especially before creating threads! Your children aren&#39;t existing. Using <code>POSIX::_exit</code> instead of <code>$pm-&gt;finish</code> can force them to exit, but that can bite you in the ass."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1489391710, "post_id": 42757242, "comment_id": 72633087, "body": "It seems that pFM isn&#39;t operating as usual when in a thread. (What exactly would it even mean to fork a process from within a thread?) From <a href=\"http://perldoc.perl.org/perlthrtut.html#Process-scope-Changes\" rel=\"nofollow noreferrer\">Process-scope Changes in perlthrtut</a>: &quot;<i>Thinking of mixing <code>fork()</code> and threads? Please lie down and wait until the feeling passes.</i>&quot; I&#39;d say, choose either of the methods (don&#39;t forget queues if using threads)."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1489411711, "post_id": 42760154, "comment_id": 72644741, "body": "thank you for the answer. I can see how your code works, though I have a different end goal.. My end goal is to have result_q to run in parallel with work_q. But the implementation above will block result_q from running until all of work_q is completed. This is the reason why I have &quot;2-level&quot; parallel jobs. The first level is to separate work and result queue, and the second one is to run work_q in parallel."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "edited": false, "score": 0, "creation_date": 1489412908, "post_id": 42760154, "comment_id": 72645601, "body": "You can quite easily coalesce the <code>result_q</code> collator in <i>another</i> thread. You just have to modify slightly your tracking of the &#39;join&#39;. I&#39;ll edit in an example."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1489413604, "last_edit_date": 1489413604, "creation_date": 1489397078, "answer_id": 42760154, "question_id": 42757242, "link": "https://stackoverflow.com/questions/42757242/blocking-issue-in-using-both-threads-and-parallelforkmanager-in-perl/42760154#42760154", "title": "Blocking issue in using both threads and Parallel::ForkManager in Perl", "body": "<p>OK, woah. Slow down there. You're doing <code>threads</code> and <code>fork</code> in the same code. That's a really horrible idea. They're somewhat implementation dependent - you can be <em>pretty</em> sure they'll work, but both at the same time is asking for a world of pain. (Concurrency issues, race conditions, etc.). </p>\n\n<p>In this particular case - you need to understand that what <code>fork()</code> does is take a complete copy of your process - in exactly the same state - and has a <em>single</em> difference - the return code of <code>fork()</code>. That means that the threads etc. will be cloned by the <code>fork()</code> too. <code>Parallel::ForkManager</code> is hiding some of that from you, by limiting the parallelism scope, but that's what's going on behind the scenes. </p>\n\n<p>I'd urge you to step back and make a rewrite - what you appear to be doing would be MUCH better suited to using some worker threads and a <code>Thread::Queue</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\n\n#parallelism limit\nmy $num_threads = 5;\n\n#input and output queues\nmy $work_q = Thread::Queue -&gt; new();\nmy $result_q = Thread::Queue -&gt; new;\n\n#jobs as before\nmy @jobs = ('a', 'b', 'c', 'd', 'e', 'f', 'g');\n\n#worker - reads from queue one item at a time. \n#exits if the queue is 'undef' which happens if it has been `end`ed. \nsub worker {\n   while ( my $item = $work_q -&gt; dequeue ) { \n      print threads -&gt; self -&gt; tid.\": processing work item $item\\n\";\n      #pretend we did some work, queue the result. \n      $result_q -&gt; enqueue ( threads -&gt; self -&gt; tid . \": finished $item\" );\n   }\n}\n\n#spawn threads\nthreads -&gt; create (\\&amp;worker) for 1..$num_threads;\n#queue jobs\n$work_q -&gt; enqueue ( @jobs ); \n#close queue, so threads will exit when they hit the end of the queue. \n#dequeue will return 'undef' rather than blocking. \n$work_q -&gt; end;  \n\n#join all the threads. \n$_-&gt;join for threads -&gt; list;\n#all threads are finished, so we close the result queue. \n#again - so dequeue is undef when empty, rather than just blocking. \n$result_q -&gt; end; \n\nwhile ( my $result = $result_q -&gt; dequeue ) { \n    print \"Got result of $result\\n\";\n}\n\nprint \"All done\\n\";\n</code></pre>\n\n<p>Since you indicate that you're looking to run the 'result_q' in parallel too, then you can do the same thing with the 'result handler' as another thread, with much the same result.</p>\n\n<p>This gets <em>slightly</em> ticklish, in that you do need to know your 'exit' condition based on open/closed queues. But something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\n\n#parallelism limit\nmy $num_threads = 5;\n\n#input and output queues\nmy $work_q   = Thread::Queue-&gt;new;\nmy $result_q = Thread::Queue-&gt;new;\n\n#jobs as before\nmy @jobs = ( 'a', 'b', 'c', 'd', 'e', 'f', 'g' );\n\n#worker - reads from queue one item at a time.\n#exits if the queue is 'undef' which happens if it has been `end`ed.\nsub worker {\n   while ( my $item = $work_q-&gt;dequeue ) {\n      print threads-&gt;self-&gt;tid . \": processing work item $item\\n\";\n\n      #pretend we did some work, queue the result.\n      $result_q-&gt;enqueue( threads-&gt;self-&gt;tid . \": finished $item\" );\n   }\n}\n\n#a thread to process the results in parallel\nsub collator {\n   while ( my $result = $result_q-&gt;dequeue ) {\n      print \"Got result of $result\\n\";\n   }\n}\n\n#spawn threads\nmy @workers = map { threads-&gt;create( \\&amp;worker ) } 1 .. $num_threads;\nmy $collator = threads -&gt; create ( \\&amp;collator );\n\n#queue jobs\n$work_q-&gt;enqueue(@jobs);\n\n#close queue, so threads will exit when they hit the end of the queue.\n#dequeue will return 'undef' rather than blocking.\n$work_q-&gt;end;\n\n#join all the threads.\n$_-&gt;join for @workers;\n\n#all threads are finished, so we close the result queue.\n#again - so dequeue is undef when empty, rather than just blocking.\n$result_q-&gt;end;\n\n#reap 'collator' once it's finished.\n$collator-&gt;join;\n\n\nprint \"All done\\n\";\n</code></pre>\n\n<p>It's pretty much the same as above, but spawns a list of 'workers' - because then you can <code>end</code> the <code>$work_q</code>, wait for the \"workers\" to exit (and <code>join</code>) - and then you know there'll be no more results entering the <code>$result_q</code> and can then <code>end</code> that. (And wait for the <code>collator</code> to exit). </p>\n"}], "owner": {"reputation": 307, "user_id": 4288704, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb3acb717d50c90c89bbcb797be0119?s=128&d=identicon&r=PG&f=1", "display_name": "kelvien", "link": "https://stackoverflow.com/users/4288704/kelvien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 42760154, "answer_count": 1, "score": 1, "last_activity_date": 1489413604, "creation_date": 1489383645, "question_id": 42757242, "link": "https://stackoverflow.com/questions/42757242/blocking-issue-in-using-both-threads-and-parallelforkmanager-in-perl", "title": "Blocking issue in using both threads and Parallel::ForkManager in Perl", "body": "<p>I have a script that does these two jobs : \nA. Connect to databases and retrieve data from it.\nB. Process retrieved data.</p>\n\n<p>And so I create two threads for each of them.\nI also utilize Parallel::ForkManager to spawn child processes and do job A so that I can connect to multiple databases at a time.</p>\n\n<p>The problem I have been trying to solve is when I add a blocking call at ForkManager->wait_all_children. Job A is not able to run its callback on finish.</p>\n\n<p>The callback function though will run if I remove my second job (B) from the @threads array.\nSo I think I have a misunderstanding in using threads, but I thought that \nthese two threads are not supposed to be blocking each other. If it is not, what may be the issue here that is causing my child processes to be blocked from finishing its job ?</p>\n\n<p>On the design note, I cannot do job B each time job A is done because job B is very expensive and it may run for quite some time. And therefore it will be blocking me from getting all of job A to be done. So, I would rather have a separate thread that does a \"bulk\" processing for all of the retrieved data periodically.</p>\n\n<p>Here is my sample code that reproduce the problem I have : </p>\n\n<pre><code>use Data::Dumper;\nuse Parallel::ForkManager;\nuse threads;\nuse threads::shared;\n\nmy $isRunningJobThread :shared;    \n\nmy @jobs = ('a', 'b', 'c', 'd', 'e', 'f', 'g');\nmy @threads = (\n    threads-&gt;create(\\&amp;jobThread),\n    threads-&gt;create(\\&amp;compileCompletedJobThread)\n);\n\n$_-&gt;join for @threads;\n\nprint \"All done\\n\";\n\nsub jobThread{\n    my $pm = Parallel::ForkManager-&gt;new(5);\n    $pm-&gt;run_on_finish(sub {\n        print \"Job done\\n\";\n    });\n\n    $isRunningJobThread = 1;\n    foreach my $job (@jobs) {\n        $pm-&gt;start and next;\n        print \"Do job for : $job\\n\";\n        $pm-&gt;finish;\n    }\n\n    $pm-&gt;wait_all_children;\n}\n\nsub compileCompletedJobThread{\n    while($isRunningJobThread) {\n        sleep 10;\n\n        print \"Compiling completed jobs\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 835, "user_id": 5088712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/60HpL.jpg?s=128&g=1", "display_name": "Abdul Hameed", "link": "https://stackoverflow.com/users/5088712/abdul-hameed"}, "edited": false, "score": 0, "creation_date": 1489383122, "post_id": 42757163, "comment_id": 72629995, "body": "the code is giving pattern error in regex101"}, {"owner": {"reputation": 835, "user_id": 5088712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/60HpL.jpg?s=128&g=1", "display_name": "Abdul Hameed", "link": "https://stackoverflow.com/users/5088712/abdul-hameed"}, "edited": false, "score": 0, "creation_date": 1489383139, "post_id": 42757163, "comment_id": 72630000, "body": "pls post correct cod"}, {"owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "reply_to_user": {"reputation": 835, "user_id": 5088712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/60HpL.jpg?s=128&g=1", "display_name": "Abdul Hameed", "link": "https://stackoverflow.com/users/5088712/abdul-hameed"}, "edited": false, "score": 0, "creation_date": 1489383302, "post_id": 42757163, "comment_id": 72630049, "body": "It is being used in NXLOG tool. NXLog tool uses perl scripting feature to extract strings."}, {"owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "reply_to_user": {"reputation": 835, "user_id": 5088712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/60HpL.jpg?s=128&g=1", "display_name": "Abdul Hameed", "link": "https://stackoverflow.com/users/5088712/abdul-hameed"}, "edited": false, "score": 0, "creation_date": 1489383334, "post_id": 42757163, "comment_id": 72630061, "body": "if $raw_event !~ /^(\\d{2}\\/\\d{2}\\/\\d{4})(.*\\bResponse Code\\b)(.*\\b : \\b)(\\d+)(\\s)?(*.\\d+)?/ drop(); \t\t$timewithdate = parsedate(string(strptime($1,&quot;%m/%d/%Y&quot;))); \t\t$Responsecode = integer($4); \t\t$TransactionId\t= integer($6);"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "edited": false, "score": 0, "creation_date": 1489383895, "post_id": 42757201, "comment_id": 72630197, "body": "Thanks Anubhava! I tried the the given regex. Added some parentheses to get responsecode ... /^(\\d{2}\\/\\d{2}\\/\\d{4})(.*\\bResponse Code\\b.*?\\b : \\b)(\\d+)(?:.*\\TransactionID\\b.* : \\b)?(\\d+)?/      It is still giving transaction id as null"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "edited": false, "score": 0, "creation_date": 1489384052, "post_id": 42757201, "comment_id": 72630243, "body": "<a href=\"https://regex101.com/r/DURofv/3\" rel=\"nofollow noreferrer\">You can see here it is working fine and matching both response code and transaction id</a>"}, {"owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "edited": false, "score": 0, "creation_date": 1489386135, "post_id": 42757201, "comment_id": 72630851, "body": "I think it is due to &#39;gm&#39; option it is working in perl editor... Can you please let me know how to put that option in my case."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "edited": false, "score": 0, "creation_date": 1489387866, "post_id": 42757201, "comment_id": 72631446, "body": "In <code>perl</code> you can use: <code>m&#47;^(\\d{2}\\&#47;\\d{2}\\&#47;\\d{4}).*\\bResponse Code\\b.*?\\b : \\b\\d+(?:.*\\bTransactionID\\b.* : \\b)?(\\d+)?&#47;mg</code>"}, {"owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "edited": false, "score": 1, "creation_date": 1489391027, "post_id": 42757201, "comment_id": 72632764, "body": "^(\\d{2}\\/\\d{2}\\/\\d{4})(.*\\bResponse Code : \\b)(\\d+)(.* TransactionID.* : )?(\\d+)? worked for me in NXLOG. \\b was causing issue to parse TransactionID. Thanks Anubhava for giving your valuable time :)"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1489383327, "creation_date": 1489383327, "answer_id": 42757201, "question_id": 42757163, "link": "https://stackoverflow.com/questions/42757163/not-able-to-parse-different-parameters-from-a-sentence-using-perl-regex/42757201#42757201", "title": "Not able to parse different parameters from a sentence using perl regex", "body": "<p>As you're using greedy <code>.*</code> in your regex it matching up to last <code>:</code>.</p>\n\n<p>You need to make it non-greedy and remove unwanted groups:</p>\n\n<pre><code>/^(\\d{2}\\/\\d{2}\\/\\d{4}).*\\bResponse Code\\b.*?\\b : \\b\\d+(?:.*\\bTransactionID\\b.* : \\b)?(\\d+)?/\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/DURofv/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n"}], "owner": {"reputation": 45, "user_id": 909095, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/369f5c93540b9ce53a519e0091a68855?s=128&d=identicon&r=PG", "display_name": "parag mangal", "link": "https://stackoverflow.com/users/909095/parag-mangal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42757201, "answer_count": 1, "score": 1, "last_activity_date": 1489383327, "creation_date": 1489383017, "last_edit_date": 1489383285, "question_id": 42757163, "link": "https://stackoverflow.com/questions/42757163/not-able-to-parse-different-parameters-from-a-sentence-using-perl-regex", "title": "Not able to parse different parameters from a sentence using perl regex", "body": "<p>I have following two strings </p>\n\n<pre><code>02/22/2017 10:15:19.312 AM: Information : Response Code : 98\n02/22/2017 10:15:19.312 AM: Information : Response Code : 99 : TransactionID : 132\n</code></pre>\n\n<p>I need to extract following parameters - </p>\n\n<ol>\n<li>Timestamp </li>\n<li>Response Code </li>\n<li>TransactionID (If present in the string)</li>\n</ol>\n\n<p>I am using following pattern search</p>\n\n<pre><code>/^(\\d{2}\\/\\d{2}\\/\\d{4})(.*\\bResponse Code\\b)(.*\\b : \\b)(\\d+)(.*\\bTransactionID\\b)?(.*\\b : \\b)?(\\d+)?/\n</code></pre>\n\n<p>Not able to extract TransactionID. Can you please let me know what is the wrong inthe regex ?</p>\n"}, {"tags": ["mysql", "arrays", "perl", "fetch"], "answers": [{"comments": [{"owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "edited": false, "score": 0, "creation_date": 1489395453, "post_id": 42758454, "comment_id": 72634859, "body": "Ah, its only returns the first row. Thanks for the answer!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "edited": false, "score": 0, "creation_date": 1489404113, "post_id": 42758454, "comment_id": 72639908, "body": "Yes, but it&#39;s actually the other problem that resulted in the error you got"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1489390766, "last_edit_date": 1489390766, "creation_date": 1489390465, "answer_id": 42758454, "question_id": 42756927, "link": "https://stackoverflow.com/questions/42756927/fetch-2-values-using-selectrow-array-in-perl/42758454#42758454", "title": "Fetch 2 values using selectrow_array in Perl", "body": "<p>Two problems.</p>\n\n<ul>\n<li><code>selectrow_array</code> doesn't return a reference to an array. That's <code>selectrow_arrayref</code>.</li>\n<li><code>selectrow_*</code> only returns the first row.</li>\n</ul>\n\n<p>Solutions:</p>\n\n<pre><code># Wasteful\n\nmy $sth = $dbh-&gt;prepare($sql_statement);\n$sth-&gt;execute();\nwhile (my @row = $sth-&gt;fetchrow_array()) {\n    my ($cust_id, $quota) = @row;\n    ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($sql_statement);\n$sth-&gt;execute();\nwhile (my ($cust_id, $quota) = $sth-&gt;fetchrow_array()) {\n    ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($sql_statement);\n$sth-&gt;execute();\nwhile (my $row = $sth-&gt;fetch()) {\n    my ($cust_id, $quota) = @$row;\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 42758454, "answer_count": 1, "score": 0, "last_activity_date": 1489390766, "creation_date": 1489381226, "question_id": 42756927, "link": "https://stackoverflow.com/questions/42756927/fetch-2-values-using-selectrow-array-in-perl", "title": "Fetch 2 values using selectrow_array in Perl", "body": "<p>I recently figured that there is a <code>selectrow_array</code> function to fetch values from databases. I'm getting following error when I'm using it. I wonder what is the issue here and couldn't find an alternative way to do this.</p>\n\n<p>Code is:</p>\n\n<pre><code>my $db_connection = DBI-&gt;connect($dsn, $dbuser, $dbpassword ) or die $DBI::errstr;\n\nmy $sql_statement = \"SELECT customer_id,quota FROM customer_call_quota WHERE quota&gt;=1\";\n\nwhile (my $row = $db_connection-&gt;selectrow_array($sql_statement)) {\n     my ($cust_id, $quota) = @$row; #&lt;---- error line\n }\n\nmy $rc = $db_connection-&gt;disconnect ;\nreturn \"ok\";\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Can't use string (\"value\") as an ARRAY ref while \"strict refs\" in use at code.pl line ...\n</code></pre>\n"}, {"tags": ["javascript", "regex", "perl"], "comments": [{"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 1, "creation_date": 1489394682, "post_id": 42755871, "comment_id": 72634449, "body": "The Problem is the escaping <code>&quot;mysessionId=([^\\s\\;]+)&quot; ===&quot;mysessionId=([^s;]+)&quot;</code>. So you would have to write it like: <code>new RegExp(&quot;mysessionId=([^\\\\s\\\\;]+)&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "is_accepted": false, "score": -1, "last_activity_date": 1489373261, "creation_date": 1489373261, "answer_id": 42755901, "question_id": 42755871, "link": "https://stackoverflow.com/questions/42755871/javascript-regexp-surprise/42755901#42755901", "title": "javascript regexp surprise", "body": "<p>I should have used // instead of \"\". </p>\n\n<pre><code>s.match(/mysessionId=([^\\s\\;]+)/)\n</code></pre>\n\n<p>Had to laugh the moment when I figured it out.</p>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1489373599, "answer_count": 1, "score": -1, "last_activity_date": 1489373261, "creation_date": 1489372963, "question_id": 42755871, "link": "https://stackoverflow.com/questions/42755871/javascript-regexp-surprise", "closed_reason": "Duplicate", "title": "javascript regexp surprise", "body": "<p>I tried the following JavaScript in developer console of Chrome:</p>\n\n<pre><code>s = \"mysessionId=PsGymRfxWIQG9gjNGgRlKw\"\ns.match(\"mysessionId=([^\\s\\;]+)\")\n</code></pre>\n\n<p>A little surprised by the result:</p>\n\n<pre><code>[\"mysessionId=P\", \"P\"]\n</code></pre>\n\n<p>I had expected that the () in regexp will match the entire \"PsGymRfxWIQG9gjNGgRlKw\", instead, it only matched the first character \"P\".</p>\n\n<p>When I tried the regexp in perl, it does match the entire sessionId.</p>\n\n<p>Any idea why?</p>\n"}, {"tags": ["perl", "www-mechanize-firefox"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1489401977, "creation_date": 1489401977, "answer_id": 42761691, "question_id": 42754856, "link": "https://stackoverflow.com/questions/42754856/perl-mechanize-firefox-click-button-not-in-html-form/42761691#42761691", "title": "Perl Mechanize Firefox click button (not in HTML form)", "body": "<p>You cannot use <code>click_button</code> to click something that's not in a form. Instead, you need to use <a href=\"https://metacpan.org/pod/WWW::Mechanize::Firefox#$mech-%3Eclick(-$name-[,$x-,$y]-)\" rel=\"nofollow noreferrer\"><code>click</code></a>. To get the right button, we can use an xpath expression.</p>\n\n<pre><code>$mech-&gt;click({ xpath =&gt; '//button[.//span[text()=\"Quarterly\"]]' });\n</code></pre>\n\n<p>The expression looks complicated, but is not so bad.</p>\n\n<pre><code>//button[.//span[text()=\"Quarterly\"]]\n//button                              # the button element anywhere in the page\n        [                           ] # that contains\n         .                            # relative to it's position\n          //span                      # a span element\n                [                  ]  # that contains\n                 text()=              # a text node\n                        \"Quarterly\"   # with the exact string \"Quarterly\"\n</code></pre>\n\n<p>It will give you exactly that one button, and <code>click</code> will click it.</p>\n\n<p>(Please note that I have only tested the xpath expression, not the actual Perl code).</p>\n"}], "owner": {"reputation": 39, "user_id": 1200713, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/87876e2d362eeb3ce6511959039fb10c?s=128&d=identicon&r=PG", "display_name": "Brian Douglas", "link": "https://stackoverflow.com/users/1200713/brian-douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 42761691, "answer_count": 1, "score": 1, "last_activity_date": 1489401977, "creation_date": 1489364511, "question_id": 42754856, "link": "https://stackoverflow.com/questions/42754856/perl-mechanize-firefox-click-button-not-in-html-form", "title": "Perl Mechanize Firefox click button (not in HTML form)", "body": "<p>Please consider the following code:</p>\n\n<p>I need help clicking the button Quarterly on the web page.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse WWW::Mechanize::Firefox;\n\nmy $mech = WWW::Mechanize::Firefox-&gt;\n    new\n        (\n            create      =&gt; 1,\n            activate    =&gt; 1,\n            launch      =&gt; 'c:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe',\n        );\n\nmy $url = 'http://finance.yahoo.com/quote/AAPL/financials?p=AAPL';\n\n$mech-&gt;get($url);\n\nfor (1..15)\n{\n    last if $mech-&gt;xpath('//[@class=\"Fl(end)\"]', all =&gt; 1);\n    sleep(1);\n}\n\n$mech-&gt;click_button(value =&gt; 'Quarterly');\n</code></pre>\n\n<p>The button is located:</p>\n\n<pre><code>&lt;div class=\"Fl(end)\" data-reactid=\"319\"&gt;\n    &lt;button class=\"P(0px) M(0px) C($actionBlue) Bd(0px) O(n)\"&gt;\n        &lt;div class=\"Fz(s) Fw(500) D(ib) Pend(15px) H(18px) C($finDarkLink):h Mend(15px) BdEnd Bdc($subTabNavGray) C($actionBlue)\"&gt;\n            &lt;span&gt;Annual&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/button&gt;\n    &lt;div class=\"Fz(s) Fw(500) D(ib) Pend(15px) H(18px) C($finDarkLink):h Mend(15px) C($finDarkLink)\"&gt;\n        &lt;span&gt;Quarterly&lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The page initially loads Annual data, but I'm interested in the Quarterly data.</p>\n\n<p>After the Quarterly data is loaded, I'm interested in capturing the content inside the table <code>&lt;div class=\"Mt(10px)\"&gt;&lt;table class=\"Lh(1.7) W(100%) M(0)\"&gt;&lt;tbody&gt;&lt;tr class=\"Bdbw(1px) Bdbc($lightGray) Bdbs(s) H(36px)\"&gt;&lt;td class=\"Fw(b) Fz(15px)\"&gt;</code> for fundamental analysis.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489362945, "post_id": 42754538, "comment_id": 72625537, "body": "Try to use a nongreedy quantifiers, i.e. replace <code>.+</code> with <code>.+?</code>. See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perlretut</code></a> for more information"}, {"owner": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489363498, "post_id": 42754538, "comment_id": 72625662, "body": "YUp That works. Thanks a million"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489393260, "post_id": 42754835, "comment_id": 72633757, "body": "@ary If this answer solved you problem, consider accepting it. See <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1489364339, "last_edit_date": 1592644375, "creation_date": 1489364339, "answer_id": 42754835, "question_id": 42754538, "link": "https://stackoverflow.com/questions/42754538/perl-regex-matching-issue/42754835#42754835", "title": "perl regex matching issue", "body": "<p>To get your desired matches, you need to use a nongreedy quantifiers, i.e. replace <code>.+</code> with <code>.+?</code>, in your regex:</p>\n<pre><code>$line =~ /(.+?)(\\&lt;ENAMEX[ ]TYPE\\=\\&quot;GENE\\&quot;\\&gt;)(.+?)(\\&lt;\\/ENAMEX\\&gt;)[ ]\n      (.+?)(\\&lt;ENAMEX[ ]TYPE\\=\\&quot;GENE\\&quot;\\&gt;)(.+?)(\\&lt;\\/ENAMEX\\&gt;)(.+?)/x;\n</code></pre>\n<p>According to <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perlretut</code></a>:</p>\n<blockquote>\n<p>Sometimes greed is not good. At times, we would like quantifiers to\nmatch a minimal piece of string, rather than a maximal piece. For this\npurpose, Larry Wall created the minimal match or non-greedy\nquantifiers ?? , *? , +?, and {}?. These are the usual quantifiers\nwith a ? appended to them. They have the following meanings:</p>\n<p>[...]</p>\n<ul>\n<li>a+? means: match 'a' 1 or more times, i.e., at least once, but as few times as possible</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42754835, "answer_count": 1, "score": -1, "last_activity_date": 1489364339, "creation_date": 1489362040, "last_edit_date": 1489362482, "question_id": 42754538, "link": "https://stackoverflow.com/questions/42754538/perl-regex-matching-issue", "title": "perl regex matching issue", "body": "<p>I am having a problem in my RegEx matching.</p>\n\n<pre><code>my $line = 'Line no. : 8 : 8 : &lt;ENAMEX TYPE=\"GENE\"&gt;'\n  . 'CRP&lt;/ENAMEX&gt; : directly inhibits : endothelial cell nitric'\n  . 'oxide &lt;ENAMEX TYPE=\"GENE\"&gt;facs&lt;/ENAMEX&gt;'\n  . '&lt;ENAMEX TYPE=\"GENE\"&gt;crp&lt;/ENAMEX&gt;:inhibit:endothelial'\n  . 'cell nitric oxide :Confidence Score 0.9017396427774064';\n\n$line =~ /(.+)(\\&lt;ENAMEX TYPE\\=\\\"GENE\\\"\\&gt;)(.+)(\\&lt;\\/ENAMEX\\&gt;) (.+)(\\&lt;ENAMEX TYPE\\=\\\"GENE\\\"\\&gt;)(.+)(\\&lt;\\/ENAMEX\\&gt;)(.+)/;\n\nprint \"$3 ---$5 ---$7\\n\";\n</code></pre>\n\n<p>And the Output is :</p>\n\n<pre><code>CRP ---: directly inhibits : endothelial cell nitric oxide &lt;ENAMEX TYPE=\"GENE\"&gt;facs&lt;/ENAMEX&gt; ---\n</code></pre>\n\n<p>Problem :</p>\n\n<p>What I want is to extract the 3 things using the regex . The output should have been something like \nCRP ---: directly inhibits : endothelial cell nitric oxide  --- facs;</p>\n\n<p>Please do tell me what is the problem as $2 is printing anything after the first block and the regex isn't matching the second part.\nThanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1489362073, "post_id": 42754472, "comment_id": 72625372, "body": "See also <a href=\"https://metacpan.org/pod/Lingua::Sentence\" rel=\"nofollow noreferrer\"><code>Lingua::Sentence</code></a>"}, {"owner": {"reputation": 841, "user_id": 1780027, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48fb6924b550df2f89c44647f0a8be19?s=128&d=identicon&r=PG", "display_name": "FredMan", "link": "https://stackoverflow.com/users/1780027/fredman"}, "edited": false, "score": 4, "creation_date": 1489362314, "post_id": 42754472, "comment_id": 72625420, "body": "$/ is a string and can&#39;t be used as a regex. &quot;Remember: the value of $/ is a string, not a regex. awk has to be better for something. :-)&quot; From: <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlvar.html</a>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1489368330, "post_id": 42754472, "comment_id": 72626726, "body": "What do you want to happen for the following sentence: <code>&quot;&#39;How often do you come here?&#39;, asked Mr. Smith.&quot;</code>"}, {"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1489368587, "post_id": 42754472, "comment_id": 72626781, "body": "@Sinan&#220;n&#252;r it actually a whole sentence ,but i will argue that it is not happened more often. i know that  <code>.?!</code> not always a true  end for sentence but at least 80% of text file has sentences end with these <code>.?!</code> characters"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489402173, "post_id": 42754472, "comment_id": 72638801, "body": "@H&#229;konH&#230;gland you should write up an answer with Lingua::Sentence. It&#39;s perfect."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1489406608, "creation_date": 1489406608, "answer_id": 42763196, "question_id": 42754472, "link": "https://stackoverflow.com/questions/42754472/how-to-read-text-file-sentence-by-sentence-in-perl/42763196#42763196", "title": "how to read text file sentence by sentence in perl?", "body": "<p>This can be done more properly using <a href=\"https://metacpan.org/pod/Lingua::Sentence\" rel=\"nofollow noreferrer\"><code>Lingua::Sentence</code></a> :</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Lingua::Sentence;\n\nmy $fn = \"data.txt\";\nopen (my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $str = do {local $/; &lt;$fh&gt;};\nclose $fh;\n\nfor my $sentence (Lingua::Sentence-&gt;new(\"en\")-&gt;split_array( $str)) {\n    say $sentence;\n}\n</code></pre>\n\n<p>With <strong>data.txt</strong>:</p>\n\n<pre><code>'How often do you come here?', asked Mr. Smith.\nThis is a paragraph. It contains several sentences. \"But why,\" you ask?\n</code></pre>\n\n<p>we get the following output:</p>\n\n<pre><code>'How often do you come here?', asked Mr. Smith.\nThis is a paragraph.\nIt contains several sentences.\n\"But why,\" you ask?\n</code></pre>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1489406608, "creation_date": 1489361517, "question_id": 42754472, "link": "https://stackoverflow.com/questions/42754472/how-to-read-text-file-sentence-by-sentence-in-perl", "title": "how to read text file sentence by sentence in perl?", "body": "<p>i want to read from text file sentence by sentence. my problem is that the code below only separate based on period. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $file = \"data.txt\";\nopen (FILE , $file);\nmy @buffer;\n$/ = '.';  \nwhile ( my $sentence = &lt;FILE&gt; ) {\n#do_something\n}\nclose FILE;\n</code></pre>\n\n<p>is there anyway to make <code>$/</code> take regex like this <code>/[.?!]/</code> so it separates sentences based on question mark or exclamation mark and not only period </p>\n"}, {"tags": ["bash", "perl", "unix", "awk"], "comments": [{"owner": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 2, "creation_date": 1489353867, "post_id": 42753342, "comment_id": 72622857, "body": "And... what have you tried? StackOverflow isn&#39;t a code-writing service where you publish requirements and someone builds a solution."}, {"owner": {"reputation": 17, "user_id": 7576872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29622aa91687df5a8e63a3fa98b4ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/7576872/max-mustermann"}, "reply_to_user": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 0, "creation_date": 1489354134, "post_id": 42753342, "comment_id": 72622947, "body": "@DavidMakogon I have added one of the things I have thought of in the question.  I am pretty lost here, else I wouldn&#39;t ask. This is something I can&#39;t accomplish and I need it for a non-profit project."}, {"owner": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 0, "creation_date": 1489354372, "post_id": 42753342, "comment_id": 72623021, "body": "I understand - it&#39;s important for you. But it doesn&#39;t matter that it&#39;s for a non-profit project - you&#39;re posting, asking someone to write something for you. This is not for StackOverflow."}, {"owner": {"reputation": 17, "user_id": 7576872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29622aa91687df5a8e63a3fa98b4ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/7576872/max-mustermann"}, "reply_to_user": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 0, "creation_date": 1489354541, "post_id": 42753342, "comment_id": 72623072, "body": "You are probably right and I won&#39;t argue with you about how fitting my question is. I needed help with programming and the first place I think about is StackOverflow, so I asked."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7576872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29622aa91687df5a8e63a3fa98b4ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/7576872/max-mustermann"}, "edited": false, "score": 1, "creation_date": 1489355880, "post_id": 42753629, "comment_id": 72623502, "body": "Thanks for your answer :) awk magic I don&#39;t understand of course.. But it works!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 17, "user_id": 7576872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29622aa91687df5a8e63a3fa98b4ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/7576872/max-mustermann"}, "edited": false, "score": 1, "creation_date": 1489355967, "post_id": 42753629, "comment_id": 72623531, "body": "You&#39;re welcome. Awk is extremely simple as it has a very minimal C-like language JUST for manipulating text, you just need to understand a couple of fundamentals for it all to fall in place. Get the book Effective Awk Programming, 4th Edition, by Arnold Robbins."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1489358825, "post_id": 42753629, "comment_id": 72624481, "body": "The example input is sorted. When the real input is not sorted, <code>sort -n</code> before using the <code>awk</code>."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 0, "last_activity_date": 1489355458, "creation_date": 1489355458, "answer_id": 42753629, "question_id": 42753342, "link": "https://stackoverflow.com/questions/42753342/find-number-missing-in-file/42753629#42753629", "title": "Find number missing in file", "body": "<p>You posted sample input and what you've tried so far (grep for individual numbers), all you're really missing from your question is the expected output so start with this and massage to suit:</p>\n\n<pre><code>$ awk -F'[ =]' -v OFS=':' '$1!=\"var\"{next} $2!=(p+1){print NR, $0} {p=$2}' file\n5:var 4=one // continuing with 4\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7576872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29622aa91687df5a8e63a3fa98b4ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/7576872/max-mustermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1490770635, "accepted_answer_id": 42753629, "answer_count": 1, "score": -3, "last_activity_date": 1489355458, "creation_date": 1489353802, "last_edit_date": 1489354030, "question_id": 42753342, "link": "https://stackoverflow.com/questions/42753342/find-number-missing-in-file", "closed_reason": "Needs details or clarity", "title": "Find number missing in file", "body": "<p>I have a file with definitions similar to this one:</p>\n\n<pre><code>some code\nsome more code\nvar 1=foo\nvar 2=bar // next line is missing\nvar 4=one // continuing with 4\nvar 5=or\nvar 6=multiple\nvar 7=lines\nvar 8=are\nvar 9=missing\nvar 10=!\nbla\n</code></pre>\n\n<p>I am trying to find the line I accidentally deleted. Unfortunately my file is not 10 lines big, but rather 10000 lines. </p>\n\n<p>I had the idea of grepping for every single number and echoing the number out when there was no result, but since my single digit numbers don't have a \"0\" as prefix, it will find the 10 and so on. </p>\n\n<p>I would prefer a bash / awk / perl or vim solution. </p>\n"}, {"tags": ["postgresql", "perl", "utf-8", "dbi", "dbd-pg"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1489355760, "post_id": 42753299, "comment_id": 72623467, "body": "Your <code>use utf8</code> is too late. Move it to the top of the file and drop the <code>utf8::upgrade</code>. (This is assuming that your source is encoded as UTF-8?)"}, {"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489358504, "post_id": 42753299, "comment_id": 72624383, "body": "@Borodin : I thought all <code>use</code> statements were always executed before anything else anyway. But it looks like moving it to the top actually makes it work!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1489387861, "post_id": 42753299, "comment_id": 72631442, "body": "@mivk, They are, but pragmas usually restrict their effect to the lexical scope in which they are declared, so that you can term them on and off at will."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1489389293, "post_id": 42753299, "comment_id": 72632014, "body": "Please provide the output of <a href=\"http://pastebin.com/JimvZgUy\" rel=\"nofollow noreferrer\">this program</a>. (I don&#39;t have a ProgreSQL db)"}, {"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489404680, "post_id": 42753299, "comment_id": 72640242, "body": "@ikegami: not sure how to make it output something useful. As it is, it just complains <code>DBD::Pg::db selectrow_array failed: ERROR:  could not determine data type of parameter $1 at ... line 38</code>."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1489407146, "post_id": 42753299, "comment_id": 72641747, "body": "What&#39;s the &quot;client encoding&quot; (SQL command <code>SHOW client_encoding;</code>)? If it&#39;s not set to UTF-8, this might be caused by <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=103137\" rel=\"nofollow noreferrer\">this bug</a> fixed with <a href=\"https://github.com/bucardo/dbdpg/pull/17\" rel=\"nofollow noreferrer\">this pull request</a> (not released yet)."}, {"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1489414163, "post_id": 42753299, "comment_id": 72646473, "body": "@nwellnhof: it&#39;s UTF8"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1489422058, "post_id": 42753299, "comment_id": 72652522, "body": "Note that if you change <code>client_encoding</code> from a different value to UTF-8 with <code>do</code>, you must also set <a href=\"https://metacpan.org/pod/DBD::Pg#pg_enable_utf8-(integer)\" rel=\"nofollow noreferrer\"><code>pg_enable_utf8</code></a> to 1 (or set it to -1 after changing the encoding)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489438935, "post_id": 42753299, "comment_id": 72662119, "body": "<code>pg_enable_utf8</code> only affects values returned from the DB"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489585033, "post_id": 42753299, "comment_id": 72734828, "body": "@ikegami The documentation makes it sound like that, but it&#39;s not true."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1489586227, "post_id": 42753299, "comment_id": 72735788, "body": "Are you really sure that <code>client_encoding</code> defaults to UTF-8? What&#39;s the encoding of your database?"}], "owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1489441496, "creation_date": 1489353597, "last_edit_date": 1489354459, "question_id": 42753299, "link": "https://stackoverflow.com/questions/42753299/dbdpg-double-encodes-utf8-characters-when-inserting-data", "title": "DBD::Pg double-encodes UTF8 characters when inserting data", "body": "<p>I am trying to insert UTF8 strings into PostgreSQL, using DBD::Pg and always get double-encoded UTF8 in the database. I only get the correct characters in the DB if the strings I insert are Latin1.</p>\n\n<p>How can I tell DBD::Pg to not re-encode my strings which are already UTF8?</p>\n\n<p>Test script:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>!/usr/bin/perl\n\nuse strict;\n\nmy $PGDB      = 'dbi:Pg:dbname=test;host=localhost';\nmy $PGDB_USER = 'username';    \nmy $SQL_INSERT = 'INSERT INTO tmp1 (t1, t2) VALUES (?, ?)';\n\nuse DBI;\n\nmy $dbh = DBI-&gt;connect($PGDB, $PGDB_USER)\n    || die \"Couldn't connect to $PGDB as user $PGDB_USER: $DBI::errstr\\n\";\n\n#$dbh-&gt;do(\"SET client_encoding TO UTF8\");\n\nmy $sth = $dbh-&gt;prepare( $SQL_INSERT )\n    || die \"Can't prepare insert statement $SQL_INSERT: $DBI::errstr\";\n\nmy $cp1252 = \"\\xe9 voil\\xe0\";\nmy $utf8   = \"\u00e9 voil\u00e0\";\n\nutf8::upgrade($utf8);\n\nuse utf8;\n#use bytes;\n\nmy $text = 'sent utf8 w. utf8::upgrade';\n\n$sth-&gt;execute($utf8, $text) or die $sth-&gt;errstr, \"\\n\";\n</code></pre>\n\n<p>The resulting table after a few tests:</p>\n\n<pre><code>\u00e9 voil\u00e0     sent cp1252 as_is w. use bytes\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 as_is w. use bytes\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 as_is w. use utf8\n\u00e9 voil\u00e0     sent cp1252 as_is w. use utf8\n\u00e9 voil\u00e0     sent cp1252 as_is w. do(SET client_encoding TO UTF8)\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 as_is w. do(SET client_encoding TO UTF8)\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 as_is w. use utf8 + do(SET client_encoding TO UTF8)\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 w. utf8::upgrade + do(SET client_encoding TO UTF8)\n\u00c3\u00a9 voil\u00c3\u00a0   sent utf8 w. utf8::upgrade\n</code></pre>\n\n<p>(This is on Ubuntu 16.04 with DBD::Pg version 3.5.3. I did not have this problem with the DBD::Pg version that installed on Ubuntu 12.04)</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 442665, "user_id": 148870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559f9b4a76982a9c3e496e2e7686d4b1?s=128&d=identicon&r=PG", "display_name": "Amber", "link": "https://stackoverflow.com/users/148870/amber"}, "edited": false, "score": 0, "creation_date": 1489349205, "post_id": 42752431, "comment_id": 72621160, "body": "Did you mean to have a <code>worf</code> instead of a <code>word</code> in there?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1489349771, "post_id": 42752431, "comment_id": 72621370, "body": "the result in <code>@cols</code> contains the whole match but also the content of each group you have defined in your pattern. That&#39;s why you obtain 5 empty items."}, {"owner": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "edited": false, "score": 0, "creation_date": 1489350250, "post_id": 42752431, "comment_id": 72621565, "body": "Why does it also have the groups? I thought that it would only show what&#39;s inside the parentheses?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1489350867, "post_id": 42752431, "comment_id": 72621809, "body": "Groups in the <code>(?(DEFINE)...)</code> are also inside parentheses."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489354568, "post_id": 42752431, "comment_id": 72623087, "body": "What&#39;s wrong with <code>split &#47;,&#47;</code>?"}, {"owner": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "edited": false, "score": 0, "creation_date": 1489355093, "post_id": 42752431, "comment_id": 72623255, "body": "that would work, but I planned on adding match for something like FUNC1(VALUE1, VALUE2) VALUE1"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "edited": false, "score": 0, "creation_date": 1489350924, "post_id": 42752666, "comment_id": 72621835, "body": "Thanks, this worked! I&#39;m still not sure why my version had the matched groups added."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "edited": false, "score": 0, "creation_date": 1489351092, "post_id": 42752666, "comment_id": 72621899, "body": "Look at the formatted regex, the other groups are recorded when you do <code>@ary = $s ~= &#47;&#47;g;</code>. However, when you call the groups as functions, from (?(DEFINE)), their group values are overwritten but its match is returned to the caller."}, {"owner": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "edited": false, "score": 0, "creation_date": 1489355102, "post_id": 42752666, "comment_id": 72623263, "body": "Thank you again for the quick explanation!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 1, "last_activity_date": 1489350633, "last_edit_date": 1489350633, "creation_date": 1489350227, "answer_id": 42752666, "question_id": 42752431, "link": "https://stackoverflow.com/questions/42752431/perl-regex-match-has-multiple-empty-lines/42752666#42752666", "title": "Perl regex match has multiple empty lines", "body": "<p>This the same thing except it just store group 1 into the col's array.  </p>\n\n<pre><code>my $in = \"FUNC1(VALUE1) VALUE1, VALUE2, FUNC2(FUNC1(VALUE3)) VALUE3, VALUE4, FUNC3(VALUE5) VALUE5\";\nmy @cols;\nwhile ($in =~ /((?&amp;full_m)),?(?(DEFINE)(?&lt;full_m&gt;(?&amp;full_f)|(?&amp;word))(?&lt;full_f&gt;(?&amp;func)\\s(?&amp;word))(?&lt;func&gt;(?&amp;word)\\((?&amp;worf)\\))(?&lt;worf&gt;(?&amp;func)|(?&amp;word))(?&lt;word&gt;\\s*\\w+\\s*))/gx)\n{\n   push @cols, $1;\n}\nprint \"$in\\n\";\n\nmy $count = 1;\nforeach (@cols) {\n    print \"$count: $_\\n\";\n    ++$count;\n}\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>FUNC1(VALUE1) VALUE1, VALUE2, FUNC2(FUNC1(VALUE3)) VALUE3, VALUE4, FUNC3(VALUE5) VALUE5\n1: FUNC1(VALUE1) VALUE1\n2:  VALUE2\n3:  FUNC2(FUNC1(VALUE3)) VALUE3\n4:  VALUE4\n5:  FUNC3(VALUE5) VALUE5\n</code></pre>\n\n<p>To better see the regex, formatting is needed  </p>\n\n<pre><code> ( (?&amp;full_m) )                # (1)\n ,?\n (?(DEFINE)\n      (?&lt;full_m&gt;                    # (2 start)\n           (?&amp;full_f) \n        |  (?&amp;word)\n      )                             # (2 end)\n      (?&lt;full_f&gt;                    # (3 start)\n           (?&amp;func) \\s (?&amp;word)\n      )                             # (3 end)\n      (?&lt;func&gt;                      # (4 start)\n           (?&amp;word) \\( (?&amp;worf) \\)\n      )                             # (4 end)\n      (?&lt;worf&gt;                      # (5 start)\n           (?&amp;func) \n        |  (?&amp;word)\n      )                             # (5 end)\n      (?&lt;word&gt; \\s* \\w+ \\s* )        # (6)\n )\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7697470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b6bd73d1fc249b1f65c37a26b9374a?s=128&d=identicon&r=PG&f=1", "display_name": "perlnoob", "link": "https://stackoverflow.com/users/7697470/perlnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42752666, "answer_count": 1, "score": 2, "last_activity_date": 1489350633, "creation_date": 1489348953, "question_id": 42752431, "link": "https://stackoverflow.com/questions/42752431/perl-regex-match-has-multiple-empty-lines", "title": "Perl regex match has multiple empty lines", "body": "<p>I'm trying to parse through a string with perl and put the matches into an array.</p>\n\n<p>Ex. \"FUNC1(VALUE1) VALUE1, VALUE2, FUNC2(FUNC1(VALUE3)) VALUE3, VALUE4, FUNC3(VALUE5) VALUE5\"</p>\n\n<p>Output: </p>\n\n<pre><code>FUNC1(VALUE1) VALUE1\nVALUE2\nFUNC2(FUNC1(VALUE3)) VALUE3\nVALUE4\nFUNC3(VALUE5) VALUE5\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>my $in = \"FUNC1(VALUE1) VALUE1, VALUE2, FUNC2(FUNC1(VALUE3)) VALUE3, VALUE4, FUNC3(VALUE5) VALUE5\";\n\nmy @cols = ($in =~ /((?&amp;full_m)),?\n(?(DEFINE)\n            (?&lt;full_m&gt;(?&amp;full_f)|(?&amp;word))\n            (?&lt;full_f&gt;(?&amp;func)\\s(?&amp;word))\n            (?&lt;func&gt;(?&amp;word)\\((?&amp;worf)\\))\n            (?&lt;worf&gt;(?&amp;func)|(?&amp;word))\n            (?&lt;word&gt;\\s*\\w+\\s*)\n        )/gx);\nprint \"$in\\n\";\n\nmy $count = 1;\nforeach (@cols) {\n    print \"$count: $_\\n\";\n    ++$count;\n}\n</code></pre>\n\n<p>The problem is that I get the matches but also 5 empty matches after.</p>\n\n<pre><code>1: FUNC1(VALUE1) VALUE1\n2: \n3: \n4: \n5: \n6: \n7:  VALUE2\n8: \n9: \n10: \n11: \n12: \n13:  FUNC2(FUNC1(VALUE3)) VALUE3\n14: \n15: \n16: \n17: \n18: \n19:  VALUE4\n20: \n21: \n22: \n23: \n24: \n25:  FUNC3(VALUE5) VALUE5\n26: \n27: \n28: \n29: \n30: \n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489348362, "post_id": 42752126, "comment_id": 72620823, "body": "Your <code>*</code> shell wildcard will give you all current files. You can use <code>find</code> to get all files recursively instead."}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489348526, "post_id": 42752126, "comment_id": 72620884, "body": "I tried but if I change * to find * doesn&#39;t work by some reason"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489348633, "post_id": 42752126, "comment_id": 72620927, "body": "You need to execute your Perl program as an action from <code>find</code>. There should be tons of examples of how to do that around here."}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489349034, "post_id": 42752126, "comment_id": 72621079, "body": "this &quot;perl -e &#39;s/\\.[^\\.]*$/rename $_, ucfirst($`) . $&amp;/e for @ARGV&#39; find -name find *&quot; works but again for the top files,ignores subfiles. Maybe need to change perl code?"}], "answers": [{"comments": [{"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489350372, "post_id": 42752605, "comment_id": 72621614, "body": "that code doesn&#39;t work for any files. Sorry, I don&#39;t know perl, I just need ucfirst files but seems in windows is much easy to do that then in linux"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489353118, "post_id": 42752605, "comment_id": 72622628, "body": "@OleksandrKhavdiy have you tried working with it to fix it yourself? I didn&#39;t run the rename, but it a <code>print</code> it worked quite nicely."}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489353613, "post_id": 42752605, "comment_id": 72622776, "body": "yes tried but no luck so far. I tried to change command to mv, remove &quot;\\n&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489354968, "post_id": 42752605, "comment_id": 72623221, "body": "@simbabque: Your <code>find .</code> is sending newlines through the pipe. Add a <code>-l</code> option to the perl command to remove them. You can also drop the slash and use the &quot;non-destructive&quot; option on the substitution <code>find . | perl -lne &#39;rename $_, s{([^&#47;]+)$}{ucfirst $1}er&#39;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489356263, "post_id": 42752605, "comment_id": 72623635, "body": "@Borodin please go ahead and edit. I&#39;m on the phone. Funny enough, I just fixed a ten year old bug in Devel::ebug related to -l for my pull request challenge :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489358545, "post_id": 42752605, "comment_id": 72624391, "body": "@simbabque: I&#39;ll leave it to you to change. I&#39;m on my tablet and editing is too much trouble!"}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489400463, "post_id": 42752605, "comment_id": 72637783, "body": "I don&#39;t know why that answer topped but its not working correctly. It just ucfirst folders but not the files inside."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 1, "creation_date": 1489400921, "post_id": 42752605, "comment_id": 72638040, "body": "@OleksandrKhavdiy because it has a good explanation of what&#39;s going on, and because the people who vote not all try the code. Your question is vague, you were not specific enough to explain what exactly should happen. Borodin <a href=\"http://stackoverflow.com/questions/42752126/uc-first-all-files-recursevly/42752605?noredirect=1#comment72637737_4275365\">just asked for more clarification on your own answer</a>. Your question was how to get the files recursively. That&#39;s answered. Tell us exact behavior, and we can do more. Better yet, try for yourself and then ask if you get stuck again. :)"}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489402788, "post_id": 42752605, "comment_id": 72639146, "body": "@simbabque, bah, how can be more specific? I wrote that I need and seems you was trying to write the code exactly to my needs. My question was more then specific and I wasn&#39;t need some clue but solution, its obviously. And this more then strange if code that work for is downvoted but not working code up voted :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489403115, "post_id": 42752605, "comment_id": 72639322, "body": "@OleksandrKhavdiy your answer was probably downvoted because it looks like you were replying to me. That&#39;s not how we do things here. This is not a forum. It also does not explain why it works. So I can see why someone downvoted it. I didn&#39;t vote on it at all yet. However in terms of being specific, you should include the expected output. As Borodin said, do you want to rename folders too? Or only files? If folders are included, you need to go backwards from the leafs up. If not, you need to filter out the folders."}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489404556, "post_id": 42752605, "comment_id": 72640166, "body": "@simbabque I wrote &quot;I need to ucfirst all files recursevly&quot;. And I didn&#39;t think that someone see folders too. I would write folders and files? Anyway, I will try to be even more specific if that need, thanks for the tips."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489405393, "post_id": 42752605, "comment_id": 72640649, "body": "@OleksandrKhavdiy folders are files too in Unix. Anyway, you solved it already. You can accept your own answer. If you include more details it might also get a few votes. I will amend this post to exclude folders later."}, {"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489408014, "post_id": 42752605, "comment_id": 72642309, "body": "@simbabque but there is logical difference between folder and file. Even folder working as a file in UNIX, logically that is folder and you name it folder. PS. Why did you remove(if that you) remove comments on my answer below?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489408083, "post_id": 42752605, "comment_id": 72642354, "body": "@OleksandrKhavdiy I cannot remove anything. I&#39;m not a moderator. There were too many comments, and when you accepted the suggestion by the site to move the conversation to chat, they have been automatically moved into that chat."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "edited": false, "score": 0, "creation_date": 1489408400, "post_id": 42752605, "comment_id": 72642542, "body": "@OleksandrKhavdiy I&#39;ve updated the answer to exclude folders and added an example."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1489408374, "last_edit_date": 1495541444, "creation_date": 1489349909, "answer_id": 42752605, "question_id": 42752126, "link": "https://stackoverflow.com/questions/42752126/uc-first-all-files-recursevly/42752605#42752605", "title": "UC first all files recursevly", "body": "<p>You can use <code>find .</code> to get all files recursively. You can then pipe the list of files into your Perl program.</p>\n\n<p>You need to make some changes in your program, because it currently receives filenames from the command line arguments. If you pipe stuff in, it comes from STDIN. The <code>-n</code> flag is useful for that. It implies the loop you have, so you can remove that.</p>\n\n<pre><code>find . | perl -ne 's/\\.[^\\.]*$/rename $_, ucfirst($`) . $&amp;/e'\n</code></pre>\n\n<p>However, your regex does not match any more now, because you don't get <code>foo</code>, but <code>./foo</code> as the output. You will have to change the regex.</p>\n\n<pre><code>find . | perl -nle 'next if -d; $o=$_;s{/([^/]+)$}{\"/\".ucfirst $1}e; rename $o, $_'\n</code></pre>\n\n<p>This uses a different approach. It saves the original full file path, matches the name of each file after the final slash <code>/</code> and replaces that with its <code>ucfirst</code>. It then renames. The <code>-l</code> removes the newlines at the end of the input, which is equivalent to <code>chomp</code>. The <code>next if -d</code> is to exclude folders. <code>-d</code> takes the topic variable <code>$_</code> as its default arg if no arg is supplied, so we can omit it.</p>\n\n<pre><code>$ tree\n.\n\u251c\u2500\u2500 bar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 barbar\n\u2514\u2500\u2500 foofoo\n\n1 directory, 2 files\n$ find . | perl -nle 'next if -d;$o=$_;s{/([^/]+)$}{\"/\".ucfirst $1}e; rename $o, $_'\n$ tree\n.\n\u251c\u2500\u2500 bar\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Barbar\n\u2514\u2500\u2500 Foofoo\n\n1 directory, 2 files\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/questions/42752126/uc-first-all-files-recursevly/42752605?noredirect=1#comment72623221_42752605\">Borodin suggested in the comments</a>, you can also do this shorter version, but you need to have <a href=\"http://perldoc.perl.org/perl5140delta.html#Non-destructive-substitution\" rel=\"nofollow noreferrer\">at least Perl 5.14</a> because of the <code>/r</code> modifier, which makes the substitution return the changed value, instead of changing <code>$_</code> and returning success.</p>\n\n<pre><code>find . | perl -lne 'rename $_, s{([^/]+)$}{ucfirst $1}er unless -d'\n</code></pre>\n\n<p>Note that you can also build this completely in Perl with a bit more code, and without <code>find</code>, but more readable for the future. Take a look at <a href=\"http://p3rl.org/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> for it.</p>\n"}, {"comments": [{"owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489402458, "post_id": 42753651, "comment_id": 72638962, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/137930/discussion-between-oleksandr-khavdiy-and-borodin\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "is_accepted": true, "score": -1, "last_activity_date": 1489355640, "creation_date": 1489355640, "answer_id": 42753651, "question_id": 42752126, "link": "https://stackoverflow.com/questions/42752126/uc-first-all-files-recursevly/42753651#42753651", "title": "UC first all files recursevly", "body": "<p>Thanks @simbabque, had to modify line to make it properly working and this is working solution</p>\n\n<pre><code> find . -type f | perl -nE 'if(length $_ &gt; 2) {chomp $_;$o=$_;s{/([^/]+)$}{\"/\".ucfirst $1}e; rename $o, $_}'\n</code></pre>\n"}], "owner": {"reputation": 2248, "user_id": 1143967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/693ef26d392a040f7843b47d15f19ec7?s=128&d=identicon&r=PG", "display_name": "Oleksandr IY", "link": "https://stackoverflow.com/users/1143967/oleksandr-iy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 42753651, "answer_count": 2, "score": 0, "last_activity_date": 1489408374, "creation_date": 1489347362, "last_edit_date": 1489348086, "question_id": 42752126, "link": "https://stackoverflow.com/questions/42752126/uc-first-all-files-recursevly", "title": "UC first all files recursevly", "body": "<p>I need to ucfirst all files recursevly. I found command which ucfirst all files but it doesn't apply for subfolders</p>\n\n<pre><code>perl -e 's/\\.[^\\.]*$/rename $_, ucfirst($`) . $&amp;/e for @ARGV' *\n</code></pre>\n\n<p>how to modify this command for subfolder files also</p>\n\n<p>thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1489328517, "post_id": 42748334, "comment_id": 72613655, "body": "Dude. You can use any character to mark the borders of the regexp. As you don&#39;t give any information regarding how it &quot;does not work&quot;, I&#39;ll assume you have problems because you use &quot;/&quot; to mark the regexp. use this line instead for example: $_ =~ s{$stringToReplace}{$stringToReplaceWith}g;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1489330204, "post_id": 42748334, "comment_id": 72614231, "body": "This has nothing to do with slashes. The problem is (probably) that <code>$</code> in a regex looks for end-of-string, not a literal dollar sign. But &quot;the code is not working&quot; is not a problem description, and you don&#39;t seem to have spent any effort on tracking down the problem yourself (your code is far from minimal)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330225, "post_id": 42748334, "comment_id": 72614238, "body": "Start every Perl file with <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330242, "post_id": 42748334, "comment_id": 72614241, "body": "Use lexical variables, not bareword filehandles."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330251, "post_id": 42748334, "comment_id": 72614246, "body": "Use 3-arg open, not 2-arg open."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330304, "post_id": 42748334, "comment_id": 72614264, "body": "<code>File not found</code> is not a helpful error message, especially if that wasn&#39;t the actual problem. Include the name of the file you&#39;re trying to open in the error message, as well as <code>$!</code> (which contains the real reason the open failed)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330335, "post_id": 42748334, "comment_id": 72614274, "body": "You don&#39;t have to escape <code>&#47;</code> in a double-quoted string. <code>&quot;\\&#47;usr\\&#47;open\\&#47;xyz&quot;</code> is the same as <code>&quot;&#47;usr&#47;open&#47;xyz&quot;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1489330406, "post_id": 42748334, "comment_id": 72614294, "body": "Why are you creating a separate array (<code>@newlines</code>) when you&#39;re modifying <code>@lines</code> in place? At the end of your program <code>@lines</code> and <code>@newlines</code> have identical contents."}, {"owner": {"reputation": 13, "user_id": 3992442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf3dd83585f342eae8e2f93740642bf?s=128&d=identicon&r=PG&f=1", "display_name": "sourabh rawat", "link": "https://stackoverflow.com/users/3992442/sourabh-rawat"}, "edited": false, "score": 0, "creation_date": 1489330769, "post_id": 42748334, "comment_id": 72614430, "body": "I have tried using another variable as the delimiter but it seems that it is not able to search the string, I am not getting any error but the string is not getting replaced it seems that it is not able to search the string.I have tried even without escape characters but it is not able to search the string."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1489332822, "post_id": 42748334, "comment_id": 72615161, "body": "Have a look at <a href=\"http://stackoverflow.com/questions/4616395/perl-regular-expression-using-variable-as-search-string-with-perl-operator-char\" title=\"perl regular expression using variable as search string with perl operator char\">stackoverflow.com/questions/4616395/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 3992442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf3dd83585f342eae8e2f93740642bf?s=128&d=identicon&r=PG&f=1", "display_name": "sourabh rawat", "link": "https://stackoverflow.com/users/3992442/sourabh-rawat"}, "edited": false, "score": 0, "creation_date": 1489335176, "post_id": 42748334, "comment_id": 72615957, "body": "The \\Q option is working for me ..Thanks Chris"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1489337291, "post_id": 42748334, "comment_id": 72616646, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12238384/find-and-replace-text-with-slash-characters\">Find and replace text with slash characters</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1489336157, "creation_date": 1489336157, "answer_id": 42749941, "question_id": 42748334, "link": "https://stackoverflow.com/questions/42748334/replace-a-string-containing-forward-slash-in-perl/42749941#42749941", "title": "replace a string containing forward slash &quot;/&quot; in perl", "body": "<p>Some notes on your code</p>\n\n<ul>\n<li><p><em>Always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program you write</p></li>\n<li><p>Use lexical file handles and the three-parameter form of <code>open</code></p></li>\n<li><p>An <code>open</code> call may fail for many reasons other than that the file cannot be found. The error message is in <code>$!</code>  and you should include it in your <code>die</code> string</p></li>\n<li><p>Using single quotes removes the need for most backslashes in string literals. Forward slashes don't need to be escaped inside eithern single or double quotes</p></li>\n<li><p>You should <code>use constant</code> to define constant values, especially if you use more than once</p></li>\n<li><p>Use the fact that many of Perl's operators default to acting on <code>$_</code></p></li>\n<li><p>There is no need for the array <code>@newlines</code>. You are modifying <code>@lines</code> anyway so <code>@newlines</code> is just a copy</p></li>\n<li><p>Use <code>\\Q...\\E</code> in regex patterns or double-quoted strings to escape every non-alphanumeric character</p></li>\n</ul>\n\n<p>The last point will solve your problem. A dollar sign <code>$</code> inside a regex pattern means the end 0f a line, and needs to be escaped if you want it taken literally</p>\n\n<p>This variation of your program works correctly</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse constant FILE =&gt; '/tmp/file.txt';\n\nmy @input = do {\n    open my $fh, '&lt;', FILE or die \"Unable to open input file: $!\";\n    &lt;$fh&gt;;\n};\n\nmy $old = '/usr/open/xyz -getCh $svr';\nmy $new = 'echo \"y\" | ' . $old;\n\nopen my $fh, '&gt;', FILE or die \"Unable to open output file: $!\";\n\nfor ( @input ) {\n    s/\\Q$old/$new/g;\n    print $fh $_;\n}\n\nprint \"Changes complete\\n\";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3992442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf3dd83585f342eae8e2f93740642bf?s=128&d=identicon&r=PG&f=1", "display_name": "sourabh rawat", "link": "https://stackoverflow.com/users/3992442/sourabh-rawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 1, "accepted_answer_id": 42749941, "answer_count": 1, "score": -2, "last_activity_date": 1489336157, "creation_date": 1489327412, "last_edit_date": 1489330456, "question_id": 42748334, "link": "https://stackoverflow.com/questions/42748334/replace-a-string-containing-forward-slash-in-perl", "title": "replace a string containing forward slash &quot;/&quot; in perl", "body": "<p>I am string to replace a string containing \"/\" using Perl, using below code</p>\n\n<p>file.txt contains </p>\n\n<pre><code>/usr/open/xyz -getCh $svr\n</code></pre>\n\n<p>code</p>\n\n<pre><code>open(FILE, \"&lt;/tmp/file.txt\") || die \"File not found\";\nmy @lines = &lt;FILE&gt;;\nclose(FILE);\n my $stringToReplace = \"\\/usr\\/open\\/xyz -getCh \\$svr\";\n my $stringToReplaceWith = \"echo \\\"y\\\" | \\/usr\\/open\\/xyz -getCh \\$svr\";\nmy @newlines;\nforeach(@lines) {\n   $_ =~ s/$stringToReplace/$stringToReplaceWith/g;\n   push(@newlines,$_);\n}\n\nopen(FILE, \"&gt;/tmp/file.txt\") || die \"File not found\";\nprint FILE @newlines;\nclose(FILE);\n</code></pre>\n\n<p>The above code is not working for me.</p>\n"}, {"tags": ["linux", "bash", "perl", "centos"], "comments": [{"owner": {"reputation": 431, "user_id": 3789201, "user_type": "registered", "profile_image": "https://graph.facebook.com/1245584105/picture?type=large", "display_name": "amine.ahd", "link": "https://stackoverflow.com/users/3789201/amine-ahd"}, "edited": false, "score": 0, "creation_date": 1489323142, "post_id": 42747585, "comment_id": 72611927, "body": "Why export when you can append the variable to the string argument you are passing to Perl?"}, {"owner": {"reputation": 190, "user_id": 1881822, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1cd1a0e9ce7c4f2628fdcb39c977351?s=128&d=identicon&r=PG", "display_name": "Ayman Al-Shorman", "link": "https://stackoverflow.com/users/1881822/ayman-al-shorman"}, "reply_to_user": {"reputation": 431, "user_id": 3789201, "user_type": "registered", "profile_image": "https://graph.facebook.com/1245584105/picture?type=large", "display_name": "amine.ahd", "link": "https://stackoverflow.com/users/3789201/amine-ahd"}, "edited": false, "score": 0, "creation_date": 1489323353, "post_id": 42747585, "comment_id": 72611983, "body": "@amine.ahd can you explain more? i tried without the export but the value comes empty! liek this: /usr/bin/perl -p -i -w -e &#39;s/error_log \\/dev\\/null crit;/error_log \\/var\\/log\\/nginx\\/${i}_error error;\\n/g;&#39; *"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1489323832, "post_id": 42747585, "comment_id": 72612126, "body": "Why not do it all in perl?"}, {"owner": {"reputation": 431, "user_id": 3789201, "user_type": "registered", "profile_image": "https://graph.facebook.com/1245584105/picture?type=large", "display_name": "amine.ahd", "link": "https://stackoverflow.com/users/3789201/amine-ahd"}, "edited": false, "score": 0, "creation_date": 1489329491, "post_id": 42747585, "comment_id": 72613963, "body": "did you try to print the value of <code>$i</code> to be sure it is not empty?"}], "answers": [{"tags": [], "owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1489324026, "creation_date": 1489324026, "answer_id": 42747783, "question_id": 42747585, "link": "https://stackoverflow.com/questions/42747585/how-can-i-pass-on-my-bash-loop-variable-to-the-perl/42747783#42747783", "title": "How can I pass on my Bash loop variable to the Perl?", "body": "<p>You can pass it as a command-line argument. Note the correct way to iterate over the config files.</p>\n\n<pre><code>for i in *.conf; do\n    f=${i%.conf}\n    perl -piwe 's|error_log /dev/null crit;|error_log /var/log/nginx/$ARGV[0]_error error;\\n|g;' \"$f\"\ndone\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1489341518, "last_edit_date": 1489341518, "creation_date": 1489324059, "answer_id": 42747786, "question_id": 42747585, "link": "https://stackoverflow.com/questions/42747585/how-can-i-pass-on-my-bash-loop-variable-to-the-perl/42747786#42747786", "title": "How can I pass on my Bash loop variable to the Perl?", "body": "<p>The issue is not that your bash code passes only the first file in the folder.</p>\n\n<p>The loop actually passes through all the file names, but the substitution in the Perl command only matches the first time it is called.</p>\n\n<p>At the first iteration you replace all occurrences of the string <code>error_log /dev/null crit;</code> with something else in <strong><em>all files</em></strong>. Thereafter there is no longer a <code>error_log /dev/null crit;</code> to be found, so the second and subsequent iterations fail to make any changes.</p>\n"}], "owner": {"reputation": 190, "user_id": 1881822, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c1cd1a0e9ce7c4f2628fdcb39c977351?s=128&d=identicon&r=PG", "display_name": "Ayman Al-Shorman", "link": "https://stackoverflow.com/users/1881822/ayman-al-shorman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489341518, "creation_date": 1489322926, "last_edit_date": 1489326256, "question_id": 42747585, "link": "https://stackoverflow.com/questions/42747585/how-can-i-pass-on-my-bash-loop-variable-to-the-perl", "title": "How can I pass on my Bash loop variable to the Perl?", "body": "<p>I'm trying to replace string in many files using the script below but I can't pass the value of <code>i</code> to <code>perl</code> as the following is passing the first file name in the folder</p>\n\n<pre><code>for i in `ls | awk -F\".conf\" '{print $1}'`\ndo\nexport i\n\n/usr/bin/perl -p -i -w -e 's/error_log \\/dev\\/null crit;/error_log \\/var\\/log\\/nginx\\/$ENV{i}_error error;\\n/g;' *\n\n\ndone\n</code></pre>\n\n<p>Any advice would be appreciated?<br><br>Thanks</p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 21, "user_id": 7696892, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208931699710070/picture?type=large", "display_name": "Prosessor", "link": "https://stackoverflow.com/users/7696892/prosessor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489309966, "post_id": 42742976, "comment_id": 72608184, "body": "yes..my program is the proxy server."}], "owner": {"reputation": 21, "user_id": 7696892, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208931699710070/picture?type=large", "display_name": "Prosessor", "link": "https://stackoverflow.com/users/7696892/prosessor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1489310292, "creation_date": 1489284973, "last_edit_date": 1489310292, "question_id": 42742976, "link": "https://stackoverflow.com/questions/42742976/how-stop-reading-data-in-anyevent", "title": "How stop reading data in AnyEvent", "body": "<p>I've been doing some proxy script using Perl's <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow noreferrer\">AnyEvent</a>. </p>\n\n<pre><code>Agent&lt;-&gt;Proxy-Server&lt;-&gt;client\n</code></pre>\n\n<p>My program acts as the proxy server in this setup.</p>\n\n<p>In <a href=\"https://metacpan.org/pod/AnyEvent::Handle\" rel=\"nofollow noreferrer\">AnyEvent::Handle</a>, How can I stop reading data from the agent and resume after client gets the data?.</p>\n\n<p>Part code:</p>\n\n<pre><code>$hdl-&gt;on_read( \n    sub {\n        my $h = shift;\n        $h-&gt;stop_read;\n        print $h-&gt;rbuf;\n        $h-&gt;push_write(\"Hello there\");\n    }\n);\n</code></pre>\n\n<p>I recently added <code>$handle-&gt;stop_read</code> in agent <code>on_read</code> event but that doesn't work. The agent always get the data.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496237444, "post_id": 42742258, "comment_id": 75579090, "body": "<code>map</code> is for &quot;mapping&quot; one list into another. Your statement <code>map { $original{$_} = 1 } @array1</code> misuses it by creating a new list and then discarding it. The correct way would be <code>$original{$_} = 1 for @array1</code> or <code>my %original = map { $_ =&gt; 1 } @array1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489289163, "post_id": 42742990, "comment_id": 72604236, "body": "There are three 7s in each array in the second example, so they want the result to also contain three 7s."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489298220, "post_id": 42742990, "comment_id": 72605791, "body": "You shouldn&#39;t be needlessly copying those arrays, you shouldn&#39;t assign empty lists to already empty variables, that first <code>map</code> should be a <code>for</code> loop, and the output formatting (the <code>&quot;@isect\\n&quot;</code>) should be done outside the sub. This gives <code>my %original; $original{$_} = 1 for @$first; return grep { exists $original{$_} and   $original{$_}++ &lt; 2 } @$second;</code>, which would be better written as <code>my %original = map { $_ =&gt; 1 } @$first; my return grep { delete($original{$_}) } @$second;</code>. But like ThisSuitIsBlackNot mentioned, this isn&#39;t what the OP needs."}, {"owner": {"reputation": 11, "user_id": 7154160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1cf57f7b36bec1b118b2454a01d95d?s=128&d=identicon&r=PG&f=1", "display_name": "bobn", "link": "https://stackoverflow.com/users/7154160/bobn"}, "edited": false, "score": 0, "creation_date": 1489419124, "post_id": 42742990, "comment_id": 72650362, "body": "ikegami: I was trying to make my routine look as much like the originall as possible.   but since I didn&#39;t really understand the question, I should not have bothered.  sorry to waste bandwidth."}], "tags": [], "owner": {"reputation": 11, "user_id": 7154160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1cf57f7b36bec1b118b2454a01d95d?s=128&d=identicon&r=PG&f=1", "display_name": "bobn", "link": "https://stackoverflow.com/users/7154160/bobn"}, "is_accepted": false, "score": -2, "last_activity_date": 1489285179, "creation_date": 1489285179, "answer_id": 42742990, "question_id": 42742258, "link": "https://stackoverflow.com/questions/42742258/how-can-i-compute-the-intersection-between-two-arrays-that-may-contain-duplicate/42742990#42742990", "title": "How can I compute the intersection between two arrays that may contain duplicate elements?", "body": "<p>In your first example, you've eliminated duplicate elements in the desired output.  In your second, you haven't - I don't even understand the desired result. :(  Therefore, I'll fix the problem for what you say you wanted for the first example output.</p>\n\n<p>Changing:</p>\n\n<pre><code>@isect = grep { $original{$_} } @array2;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>@isect = grep { exists $original{$_} and   $original{$_}++ &lt; 2 } @array2;\n</code></pre>\n\n<p>produces:</p>\n\n<p>2 3 4  for the first example </p>\n\n<p>and </p>\n\n<p>5 6 7 4  for the second example.</p>\n\n<p>test code:</p>\n\n<pre><code>my @array1 = (1, 2, 3,3,3,3,4);\nmy @array2 = (2, 3, 4,4,4);\n\nprint intersect( \\@array1, \\@array2);\n\n@array1 = (5,6,7,7,7,1,4);\n@array2 = (5,6,7,6,7,7,4,4,4);\n\nprint intersect( \\@array1, \\@array2);\n\n\nsub intersect {\n    my ($first, $second) = @_;\n    my @array1 = @{ $first };\n    my @array2 = @{ $second };\n    my %original = ();\n    my @isect = ();\n    map { $original{$_} = 1 } @array1;\n    @isect = grep { exists $original{$_} and   $original{$_}++ &lt; 2 } @array2;\n    return \"@isect\\n\";\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1496241737, "last_edit_date": 1496241737, "creation_date": 1489297170, "answer_id": 42744193, "question_id": 42742258, "link": "https://stackoverflow.com/questions/42742258/how-can-i-compute-the-intersection-between-two-arrays-that-may-contain-duplicate/42744193#42744193", "title": "How can I compute the intersection between two arrays that may contain duplicate elements?", "body": "<pre><code>my @array1 = ( 5, 6, 7,    7, 7, 1, 4       );\nmy @array2 = ( 5, 6, 7, 6, 7, 7,    4, 4, 4 );\n\nmy %counts;\n++$counts{$_} for @array1;\nmy @common = grep { --$counts{$_} &gt;= 0 } @array2;\n\nsay \"@common\";  # 5 6 7 7 7 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496239914, "creation_date": 1496239914, "answer_id": 44287125, "question_id": 42742258, "link": "https://stackoverflow.com/questions/42742258/how-can-i-compute-the-intersection-between-two-arrays-that-may-contain-duplicate/44287125#44287125", "title": "How can I compute the intersection between two arrays that may contain duplicate elements?", "body": "<p><code>perldoc perlfaq4</code> has the answer</p>\n\n<p><a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-compute-the-difference-of-two-arrays%3f-How-do-I-compute-the-intersection-of-two-arrays%3f\" rel=\"nofollow noreferrer\"><em>How do I compute the difference of two arrays? How do I compute the intersection of two arrays?</em></a></p>\n\n<p>This is the multi-purpose code it offers</p>\n\n<pre><code>my (@union, @intersection, @difference);\n\nmy %count = ();\n\nforeach my $element (@array1, @array2) {\n    $count{$element}++\n}\n\nforeach my $element (keys %count) {\n    push @union, $element;\n    push @{ $count{$element} &gt; 1 ? \\@intersection : \\@difference }, $element;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7364753, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9e35cb4543e9ca0b2f6915c42941575c?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/7364753/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1496241737, "creation_date": 1489277970, "last_edit_date": 1489292391, "question_id": 42742258, "link": "https://stackoverflow.com/questions/42742258/how-can-i-compute-the-intersection-between-two-arrays-that-may-contain-duplicate", "title": "How can I compute the intersection between two arrays that may contain duplicate elements?", "body": "<p>How can I compute the intersection (the common elements) of two arrays? I tried with this code: </p>\n\n<pre><code>my @array1 = (1, 2, 3, 3, 3, 3, 4);\nmy @array2 = (2, 3, 4, 4, 4);\nmy %original = ();\nmy @isect = ();\n\nmap { $original{$_} = 1 } @array1;\n@isect = grep { $original{$_} } @array2;\n\nprint \"@isect\\n\";\n</code></pre>\n\n<p>The result is <code>2 3 4 4 4</code>, but I want to get <code>2 3 4</code>.</p>\n\n<p>Another example: </p>\n\n<pre><code>@array1 = (5, 6, 7, 7, 7, 1, 4);\n@array2 = (5, 6, 7, 6, 7, 7, 4, 4, 4);\n</code></pre>\n\n<p>This should return <code>5 6 7 7 7 4</code>, not <code>5 6 7 6 7 7 4 4 4</code>. How can I do this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1489271297, "post_id": 42741369, "comment_id": 72600512, "body": "that&#39;s because of the greedy nature of .*  why don&#39;t you do a split on /"}, {"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1489271749, "post_id": 42741369, "comment_id": 72600651, "body": "the whole reason because when you hit something like this [./.] where whatever on the left side of the slash is word and whatever on the right side is tag for this word and in this case both will be the same and that could be confusing  if i store them to array, but i think you are right, because in this case odd positions in array will represent tags and even position will represent word."}, {"owner": {"reputation": 1990, "user_id": 7529266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IGW24.jpg?s=128&g=1", "display_name": "MohaMad", "link": "https://stackoverflow.com/users/7529266/mohamad"}, "edited": false, "score": 0, "creation_date": 1489274116, "post_id": 42741369, "comment_id": 72601339, "body": "try <code>\\b([\\w\\.]+?)\\&#47;([\\w\\.]+)\\b</code> @kero"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1489277323, "post_id": 42741369, "comment_id": 72602102, "body": "or: <code>while( $line =~ m!([^&#47;\\s]+)&#47;([^&#47;\\s]+)!g ) {</code>"}, {"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "reply_to_user": {"reputation": 1990, "user_id": 7529266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IGW24.jpg?s=128&g=1", "display_name": "MohaMad", "link": "https://stackoverflow.com/users/7529266/mohamad"}, "edited": false, "score": 0, "creation_date": 1489277433, "post_id": 42741369, "comment_id": 72602128, "body": "@MohaMad you answer works perfect , but it fall off when there when you have a wild character like (,&quot; &#39; &#39; )."}, {"owner": {"reputation": 1990, "user_id": 7529266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IGW24.jpg?s=128&g=1", "display_name": "MohaMad", "link": "https://stackoverflow.com/users/7529266/mohamad"}, "edited": false, "score": 1, "creation_date": 1489278064, "post_id": 42741369, "comment_id": 72602248, "body": "Try <a href=\"https://regex101.com/r/BMSyht/1\" rel=\"nofollow noreferrer\">this one</a>: <code>\\s*([\\w\\.,&#39;&quot;]+?)\\&#47;([\\w\\.,&#39;&quot;]+)\\s*</code> @kero"}], "answers": [{"tags": [], "owner": {"reputation": 1990, "user_id": 7529266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IGW24.jpg?s=128&g=1", "display_name": "MohaMad", "link": "https://stackoverflow.com/users/7529266/mohamad"}, "is_accepted": false, "score": 2, "last_activity_date": 1489278777, "creation_date": 1489278777, "answer_id": 42742346, "question_id": 42741369, "link": "https://stackoverflow.com/questions/42741369/extract-substring-from-a-string-using-regex-in-perl/42742346#42742346", "title": "extract substring from a string using regex in perl?", "body": "<p>I think you have <code>tag/word</code>s that <code>tag</code> and <code>word</code> may be everything, except some characters like <code>],[,\\s,</code>:</p>\n\n<pre><code>\\s*([^\\[\\]\\s]+?)\\/([^\\[\\]\\s]+)\\s*\n    ^^^^^^^^^1\n</code></pre>\n\n<p>This regex is similar to your original pattern. (See <a href=\"https://regex101.com/r/BMSyht/2\" rel=\"nofollow noreferrer\">DEMO</a>)</p>\n\n<p>Description:</p>\n\n<p>1- This Capturing Group match every character <code>.</code> that is not <code>[</code>,<code>]</code> or <code>\\s</code></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1490487009, "last_edit_date": 1490487009, "creation_date": 1489305156, "answer_id": 42745063, "question_id": 42741369, "link": "https://stackoverflow.com/questions/42741369/extract-substring-from-a-string-using-regex-in-perl/42745063#42745063", "title": "extract substring from a string using regex in perl?", "body": "<p>The outer-most set of parentheses, around your whole pattern, gets captured into <code>$1</code>, what is clearly not intended. Also, the greediness of <code>.*\\/</code> means that it takes everything up to the <em>last</em> <code>/</code>. Likewise, <code>.*\\s+</code> leaves only the very last space.</p>\n\n<p>One way to do this is by using the <em>negated character class</em></p>\n\n<pre><code>my ($word, $tag) = m{ ([^/\\s]+) / ([^/\\s]+) }x;\n</code></pre>\n\n<p>The pattern <code>[^/\\s]+</code> matches a string of one-or-more consecutive characters, each being any other than <code>/</code> or whitespace. So you get a \"<em>word</em>\" before and after <code>/</code>. If you take \"<em>whatever after slash</em>\" as the text says it is unclear what should be before the next slash.</p>\n\n<p>Your approach can then go as</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) \n{\n    while ( $line =~ m{ ([^/\\s]+) / ([^/\\s]+) }gx )\n    {\n        $tagHash{$2}{$1}++;\n    }\n}\n</code></pre>\n\n<p>The other count seems unrelated so I left it out to focus on the question.</p>\n\n<hr>\n\n<p>However, there is a big bit missing here.</p>\n\n<p>This approach cannot detect when a line differs from the expected format. For example</p>\n\n<pre>\nword1/tag1 word2/tag2/ tag3/word4/tag4\n</pre>\n\n<p>produces wrong results, quietly. Some violations get skipped, but there are many bad cases.</p>\n\n<p>One way to catch this is to pre-process the line, checking that there are at least two words between all slashes and at least one before first and after last. This means that each line is processed twice, and it also gets messier. For example</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) \n{\n    my @parts = split '/', $line;\n    if (not shift @parts or not pop @parts or grep { 2 &gt; split } @parts) {\n        warn \"Unexpected format: $line\";\n        next;\n    }\n\n    $tagHash{$2}{$1}++  while $line =~ m{ ([^/\\s]+) / ([^/\\s]+) }gx;\n}\n</code></pre>\n\n<p>This check changes the <code>@parts</code> array, so if that array is needed later then better use</p>\n\n<pre><code>if (!$parts[0] or !$parts[-1] or grep { 2 &gt; split } @parts[1..@parts-2])  { ...\n</code></pre>\n\n<p>where instead of <code>grep</code> one can also use the short-circuiting <code>any</code> from <a href=\"http://perldoc.perl.org/List/Util.html#any\" rel=\"nofollow noreferrer\">List::Util</a></p>\n\n<p>Another way would be to change the approach, and parse the line carefully instead of blindly hopping over regex matches.  Since the first and last may have only one word this may be hard to do with a regex. It is probably clearer and more practical to just split and work with the array. </p>\n\n<p>It is hard to imagine a format <em>always</em> matching data so I'd suggest to consider some of this.</p>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2936, "favorite_count": 0, "accepted_answer_id": 42745063, "answer_count": 2, "score": 5, "last_activity_date": 1490487009, "creation_date": 1489271103, "last_edit_date": 1489278106, "question_id": 42741369, "link": "https://stackoverflow.com/questions/42741369/extract-substring-from-a-string-using-regex-in-perl", "title": "extract substring from a string using regex in perl?", "body": "<p>try to extract for substrings that match pattern in string.\nfor example i have text like the one below </p>\n\n<pre><code>[ Pierre/NNP Vinken/NNP ]\n,/, \n[ 61/CD years/NNS ]\nold/JJ ,/, will/MD join/VB \n[ the/DT board/NN ]\nas/IN \n[ a/DT nonexecutive/JJ director/NN Nov./NNP 29/CD ]\n./. \n[ Mr./NNP Vinken/NNP ]\nis/VBZ \n[ chairman/NN ]\nof/IN \n</code></pre>\n\n<p>and i want to extract whatever before slash (/) and whatever after slash, but somehow my regex extracts the first substring and ignore the rest of substrings in the line.</p>\n\n<p>my output is something like this below :</p>\n\n<pre><code>tag:Pierre/NNP Vinken - word:Pierre/NNP Vinken/NNP -&gt;1\ntag:, - word:,/, -&gt;1\ntag:61/CD years - word:61/CD years/NNS -&gt;1\ntag:old/JJ ,/, will/MD join - word:old/JJ ,/, will/MD join/VB -&gt;1\ntag:the/DT board - word:the/DT board/NN -&gt;1\ntag:as - word:as/IN -&gt;1\ntag:a/DT nonexecutive/JJ director/NN Nov./NNP 29 - word:a/DT nonexecutive/JJ director/NN Nov./NNP 29/CD -&gt;1\ntag:. - word:./. -&gt;1\ntag:Mr./NNP Vinken - word:Mr./NNP Vinken/NNP -&gt;1\ntag:is - word:is/VBZ -&gt;1\ntag:chairman - word:chairman/NN -&gt;1\ntag:of - word:of/IN -&gt;1\n</code></pre>\n\n<p>but what i am actually want is something like this below</p>\n\n<pre><code>tag:NNP  - word:Pierre -&gt;1\ntag:NNP  - word:Vinken -&gt;1\ntag:,    - word:,      -&gt;1\ntag:CD   - word:61     -&gt;1\n.\n.\netc.\n</code></pre>\n\n<p>code i used :</p>\n\n<pre><code>    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        #remove square brackets\n        $line=~s/[\\[\\]]//;\n\n        while($line =~m/((\\s*(.*))\\/((.*)\\s+))/gi)\n        {\n            $word=$1;\n            $tag=$2;\n            #remove whitespace from left and right of string\n            $word=~ s/^\\s+|\\s+$//g;\n            $tag=~ s/^\\s+|\\s+$//g;\n            $tags{$tag}++;\n            $tagHash{$tag}{$word}++;\n        }\n\n    }\nforeach my $str (sort keys %tagHash)\n{\n    foreach my $s (keys %{$tagHash{$str}} )\n    {\n        print \"tags:$str - word: $s-&gt; $tagHash{$str}{$s}\\n\";\n    }\n}\n</code></pre>\n\n<p>any idea why my regex does not behave as should be </p>\n\n<p>EDIT:</p>\n\n<p>in text files that i am parsing has wild character and punctuation as well, which is mean that files will have something like this :\n''/''\n\"/\"\n,/,\n./.\n?/?\n!/!\n.\n.\n.\netc </p>\n\n<p>so i want to capture all of these things not only alphabetic and numeric characters.</p>\n"}, {"tags": ["perl", "debugging", "memory-leaks"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489267992, "post_id": 42740780, "comment_id": 72599523, "body": "You know, maybe you should just hang out in #p5p on irc.perl.org. I have the feeling the people there are a bit more versed with this stuff you&#39;re doing than we are here. :)"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489268472, "post_id": 42740780, "comment_id": 72599669, "body": "@simbabque .., but for a reference would be nice to know the answer too... :) :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1489268567, "post_id": 42740780, "comment_id": 72599700, "body": "@jm666 absolutely. It&#39;s super useful of him doing that, but he ends ups posting his own answer after a day or two every time. With a bit of context about what he&#39;s doing it could be a tech blog. :D Please continue Eugen."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489270155, "post_id": 42740780, "comment_id": 72600158, "body": "@simbabque Your upvotes gives me the energy! =)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489270226, "post_id": 42740780, "comment_id": 72600175, "body": "Ok, convinced. Here, have it. :P"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489298836, "post_id": 42741391, "comment_id": 72605911, "body": "This answers why the <code>DEBUG_LEAKING_SCALARS</code> doesn&#39;t list leaks (cause it&#39;s point is to make debugging leaks easier, not to identify leaks in the first place), but it makes the dubious and unexplained claim that <code>DEBUG_LEAKING_SCALARS</code> should list leaked scalars, and it doesn&#39;t explain why the tools that are designed to find leaks (<code>valgrind</code> and Devel::LeakTrace) don&#39;t find it."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1489271241, "last_edit_date": 1495541382, "creation_date": 1489271241, "answer_id": 42741391, "question_id": 42740780, "link": "https://stackoverflow.com/questions/42740780/why-memory-leak-is-not-reported-when-perl-is-compiled-with-debug-leaking-scalar/42741391#42741391", "title": "Why memory leak is not reported when perl is compiled with `DEBUG_LEAKING_SCALARS`?", "body": "<p>Actually not an answer, but from <em>Dave Mitchell</em>:</p>\n\n<blockquote>\n  <p>The main purpose of DEBUG_LEAKING_SCALARS isn't to list leaked scalars<br>\n  (!!)<br>\n  It's to help in tracking down things generally related to leaked scalars\n  and refcount problems. its two main features are that it turns SV\n  allocation from being a macro to being a function so that you can easy\n  attach a breakpoint; and that it adds instrumentation to each SV showing\n  where it was allocated (as displayed by Devel::Peek).</p>\n</blockquote>\n\n<p>But I will not know what to debug, because I do not know that something is leaking. Like <strong>CASE from 1 to 3</strong> described above. I was sure that:</p>\n\n<pre><code>newSViv( 323 );\n</code></pre>\n\n<p>Did not leak.</p>\n\n<p>So <code>DEBUG_LEAKING_SCALARS</code> <strong>should list leaked scalars</strong></p>\n\n<p>Also I have found this comment at perl commit history:</p>\n\n<blockquote>\n  <p>-[ 24088] By: davem                on 2005/03/28  21:38:44<br>\n  -   Log: expand -DDEBUG_LEAKING_SCALARS to instrument the creation of each SV  </p>\n</blockquote>\n\n<p>This will be very useful for <a href=\"https://stackoverflow.com/questions/42434132/how-to-tie-every-variable-in-perl-script\">this</a> task to my mind.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1489271241, "creation_date": 1489267307, "last_edit_date": 1495541851, "question_id": 42740780, "link": "https://stackoverflow.com/questions/42740780/why-memory-leak-is-not-reported-when-perl-is-compiled-with-debug-leaking-scalar", "title": "Why memory leak is not reported when perl is compiled with `DEBUG_LEAKING_SCALARS`?", "body": "<p>I compile perl with <code>DEBUG_LEAKING_SCALARS</code> as described <a href=\"https://stackoverflow.com/questions/42736961/how-to-compile-perl-with-debug-leaking-scalars\">here</a></p>\n\n<p><strong>CASE 1</strong><br>\nI follow this <a href=\"http://perldoc.perl.org/perlhacktips.html#PERL_DESTRUCT_LEVEL\" rel=\"nofollow noreferrer\">DOC</a> to test memory leaking reporting:</p>\n\n<pre><code>env PERL_DESTRUCT_LEVEL=2 valgrind perl -e '@x; $x[0]=\\@x'\n==7216== Memcheck, a memory error detector\n==7216== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==7216== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==7216== Command: perl -e @x;\\ $x[0]=\\\\@x\n==7216== \n==7216== \n==7216== HEAP SUMMARY:\n==7216==     in use at exit: 0 bytes in 0 blocks\n==7216==   total heap usage: 1,310 allocs, 1,310 frees, 171,397 bytes allocated\n==7216== \n==7216== All heap blocks were freed -- no leaks are possible\n==7216== \n==7216== For counts of detected and suppressed errors, rerun with: -v\n==7216== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p><strong>Nothing is reported.</strong></p>\n\n<p><strong>CASE 2</strong><br>\nI even in my XS sub do <a href=\"http://www.nntp.perl.org/group/perl.perl5.porters/2006/03/msg110535.html\" rel=\"nofollow noreferrer\">this thing</a>. Exactly:</p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n\n#include \"XSUtils.h\"\n#include \"ppport.h\"\n\nvoid\ncall_perl() {\n    SV *sv;\n    sv =  sv_2mortal( newSVpv( \"XS::Utils::hello\", 0 ) );\n\n    newSViv( 323 );     //&lt;&lt;&lt;&lt; SHOULD LEAK\n    printf( \"Hi 3\\n\" );\n\n    ENTERSCOPE;\n    CALLPERL( sv , G_DISCARD|G_NOARGS );\n    LEAVESCOPE;\n}\n\nMODULE = XS::Utils                    PACKAGE = XS::Utils\n\nvoid\ntest()\n    CODE:\n        call_perl();\n</code></pre>\n\n<p><a href=\"https://github.com/KES777/XS-Utils\" rel=\"nofollow noreferrer\">Link to the REPO</a></p>\n\n<pre><code>$ env PERL_DESTRUCT_LEVEL=2 valgrind perl -Iblib/arch/ -Iblib/lib -MXS::Utils -e 'XS::Utils::test()' \n==7308== Memcheck, a memory error detector\n==7308== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==7308== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==7308== Command: perl -Iblib/arch/ -Iblib/lib -MXS::Utils -e XS::Utils::test()\n==7308== \nHi 3\nHello\n==7308== \n==7308== HEAP SUMMARY:\n==7308==     in use at exit: 1,502 bytes in 5 blocks\n==7308==   total heap usage: 12,876 allocs, 12,871 frees, 1,945,298 bytes allocated\n==7308== \n==7308== LEAK SUMMARY:\n==7308==    definitely lost: 0 bytes in 0 blocks\n==7308==    indirectly lost: 0 bytes in 0 blocks\n==7308==      possibly lost: 0 bytes in 0 blocks\n==7308==    still reachable: 1,502 bytes in 5 blocks\n==7308==         suppressed: 0 bytes in 0 blocks\n==7308== Rerun with --leak-check=full to see details of leaked memory\n==7308== \n==7308== For counts of detected and suppressed errors, rerun with: -v\n==7308== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p><strong>Nothing is reported too</strong></p>\n\n<p><strong>CASE 3</strong><br>\nI fix module <a href=\"https://metacpan.org/pod/Devel::LeakTrace\" rel=\"nofollow noreferrer\">Devel::LeakTrace</a> (The <a href=\"https://github.com/KES777/Devel-LeakTrace\" rel=\"nofollow noreferrer\">FIX</a>):</p>\n\n<pre><code>$ perl -MDevel::LeakTrace -Iblib/arch/ -Iblib/lib -MXS::Utils -e 'XS::Utils::test()' \nHi 3\nHello\n</code></pre>\n\n<p><strong>Nothing is reported too</strong></p>\n\n<p><strong>CASE 4</strong><br>\nI only found <a href=\"https://metacpan.org/pod/Test::LeakTrace\" rel=\"nofollow noreferrer\">Test::LeakTrace</a> do its job:</p>\n\n<pre><code>$ perl -MTest::LeakTrace::Script=-verbose -Iblib/arch/ -Iblib/lib -MXS::Utils -e 'XS::Utils::test()' \nHi 3\nHello\nleaked SCALAR(0x208e1c0) from -e line 1.\nALLOCATED at -e:1 by entersub (parent 0x0); serial 9642\nSV = IV(0x208e1b0) at 0x208e1c0\n  REFCNT = 1\n  FLAGS = (IOK,pIOK)\n  IV = 323\n</code></pre>\n\n<p><strong>Why built in tool in perl report nothing about leaking?</strong><br>\nWhat did I wrong? How to debug leaking memory with <code>DEBUG_LEAKING_SCALARS</code> tool?</p>\n"}, {"tags": ["perl", "hash", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1489259684, "last_edit_date": 1489259684, "creation_date": 1489259353, "answer_id": 42739393, "question_id": 42739255, "link": "https://stackoverflow.com/questions/42739255/find-values-of-nested-hash-matching-a-specific-key/42739393#42739393", "title": "Find values of nested hash matching a specific key", "body": "<p>You don't need to parse through the first level if you know the key that you're interested. Just leave out the first loop and access it directly. To get the highest value, you have to look at each subject once.</p>\n\n<p>Keep track of the highest value and the key that goes with it, and then print.</p>\n\n<pre><code>my $max_value = 0;\nmy $max_key;\nforeach my $subject (keys %{ $grades{'Peti Bar'} }) {\n    if ($grades{'Peti Bar'}{$subject} &gt; $max_value){\n        $max_value = $grades{'Peti Bar'}{$subject};\n        $max_key = $subject;\n    }\n}\nprint $max_key;\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>Art\n</code></pre>\n\n<p>An alternative implementation with <code>sort</code> would look like this:</p>\n\n<pre><code>print +(\n    sort { $grades{'Peti Bar'}{$b} &lt;=&gt; $grades{'Peti Bar'}{$a} }\n        keys %{ $grades{'Peti Bar'} }\n)[0];\n</code></pre>\n\n<p>The <code>+</code> in <code>+( ... )</code> tells Perl that the parenthesis <code>()</code> are not meant for the function call to <code>print</code>, but to construct a list. The <code>sort</code> sorts on the keys, descending, because it has <code>$b</code> first. It returns a list, and we take the first value (index <code>0</code>).</p>\n\n<p>Note that this is more expensive than the first implementation, and not necessarily more concise. Unless you're building a one-liner or your <kbd>;</kbd> is broken I wouldn't recommend the second solution. </p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1489264620, "last_edit_date": 1489264620, "creation_date": 1489261591, "answer_id": 42739809, "question_id": 42739255, "link": "https://stackoverflow.com/questions/42739255/find-values-of-nested-hash-matching-a-specific-key/42739809#42739809", "title": "Find values of nested hash matching a specific key", "body": "<p>As a Perl beginner I would use the <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\">List::Util</a> core module:</p>\n\n<pre><code>use 5.014;\nuse List::Util 'reduce';\nmy $k='Peti Bar';\nsay reduce { $grades{$k}{$a} &gt; $grades{$k}{$b} ? $a : $b } keys %{$grades{$k}};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489264660, "post_id": 42740062, "comment_id": 72598406, "body": "I was sure something like that exists, but didn&#39;t know the name. :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1489262973, "creation_date": 1489262973, "answer_id": 42740062, "question_id": 42739255, "link": "https://stackoverflow.com/questions/42739255/find-values-of-nested-hash-matching-a-specific-key/42740062#42740062", "title": "Find values of nested hash matching a specific key", "body": "<p>This is trivial using the <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\"><code>List::UtilsBy</code></a> module</p>\n\n<p>The code is made clearer by extracting a reference to the inner hash that we're interested in. The <code>max_by</code> is called to return the keys of that hash that has the maximum value</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse List::UtilsBy 'max_by';\n\nmy %grades = (\n    'Foo Bar'  =&gt; { Literature =&gt; 67, Mathematics =&gt; 97 },\n    'Peti Bar' =&gt; { Literature =&gt; 88, Mathematics =&gt; 82, Art =&gt; 99 },\n);\n\nmy $pb_grades = $grades{'Peti Bar'};\n\nsay max_by { $pb_grades-&gt;{$_} } keys %$pb_grades;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Art\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5399725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba72b610c4716f5eaeb53dd4fbc6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Natalie", "link": "https://stackoverflow.com/users/5399725/natalie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 42739393, "answer_count": 3, "score": 3, "last_activity_date": 1489264620, "creation_date": 1489258485, "question_id": 42739255, "link": "https://stackoverflow.com/questions/42739255/find-values-of-nested-hash-matching-a-specific-key", "title": "Find values of nested hash matching a specific key", "body": "<p>I've created a hash of hashes in perl, where this is an example of what the hash ends up looking like:</p>\n\n<pre><code>my %grades;\n$grades{\"Foo Bar\"}{Mathematics}   = 97;\n$grades{\"Foo Bar\"}{Literature}    = 67;\n$grades{\"Peti Bar\"}{Literature}   = 88;\n$grades{\"Peti Bar\"}{Mathematics}  = 82;\n$grades{\"Peti Bar\"}{Art}          = 99;\n</code></pre>\n\n<p>and to print the entire hash, I'm using:</p>\n\n<pre><code>foreach my $name (sort keys %grades) {\n    foreach my $subject (keys %{ $grades{$name} }) {\n        print \"$name, $subject: $grades{$name}{$subject}\\n\";\n    }\n}\n</code></pre>\n\n<p>I need to print just the inner hash referring to \"Peti Bar\" and find the highest value, so theoretically, I should just parse through Peti Bar, Literature; Peti Bar, Mathematics; and Peti Bar, Art and end up returning Art, since it has the highest value.\nIs there a way to do this or do I need to parse through the entire 2d hash?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489258733, "post_id": 42738876, "comment_id": 72596476, "body": "Good job. You should submit a patch for the docs or at least open an RT ticket."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1489262670, "post_id": 42738876, "comment_id": 72597740, "body": "@simbabque I send email to perl5-porters"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1489275675, "post_id": 42738876, "comment_id": 72601717, "body": "++ @EugenKonkov for the find, and for contacting p5p. fyi, there&#39;s also <code>perlbug</code> at the command line."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 11, "last_activity_date": 1489570280, "last_edit_date": 1489570280, "creation_date": 1489256262, "answer_id": 42738876, "question_id": 42736961, "link": "https://stackoverflow.com/questions/42736961/how-to-compile-perl-with-debug-leaking-scalars/42738876#42738876", "title": "How to compile perl with DEBUG_LEAKING_SCALARS?", "body": "<p>The doc <a href=\"http://perldoc.perl.org/perlhacktips.html#PERL_DESTRUCT_LEVEL\" rel=\"nofollow noreferrer\">has error</a>. To compile perl with this option on you should use next command:</p>\n\n<pre><code>perlbrew install perl-5.24.1 -DDEBUGGING -Accflags=-DDEBUG_LEAKING_SCALARS -j9 --as perl-debug-5.24.1\n</code></pre>\n\n<p>I have found this info from <a href=\"https://github.com/Perl/perl5/commit/484e61088\" rel=\"nofollow noreferrer\">this commit</a></p>\n\n<p><strong>UPD</strong><br>\nDOC was fixed at commit #b49862865 by David Mitchell. Thanks</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 3, "accepted_answer_id": 42738876, "answer_count": 1, "score": 13, "last_activity_date": 1489570280, "creation_date": 1489246012, "question_id": 42736961, "link": "https://stackoverflow.com/questions/42736961/how-to-compile-perl-with-debug-leaking-scalars", "title": "How to compile perl with DEBUG_LEAKING_SCALARS?", "body": "<p>I am trying to install perl with <code>-DDEBUG_LEAKING_SCALARS</code></p>\n\n<pre><code>perlbrew install perl-5.24.1 -DDEBUGGING -DDEBUG_LEAKING_SCALARS --as perl-debug-5.24.1\n</code></pre>\n\n<p>but without success:</p>\n\n<pre><code>$ perl -V | perl -MData::Dumper -e 'local $/; $_ = &lt;&gt;; $h{$1} = $2 while /(-(?:DDEBUGGING|DDEBUG_LEAKING_SCALARS))(?:=(.*?))?(?=\\s|$)/g; print Dumper \\%h'\n$VAR1 = {\n          '-DDEBUGGING' =&gt; undef,\n          '-DDEBUG_LEAKING_SCALARS' =&gt; undef\n        };\nkes@work ~/work/projects/github-forks/perl5 $ perl -V\nSummary of my perl5 (revision 5 version 24 subversion 1) configuration:\n\n  Platform:\n    osname=linux, osvers=4.4.0-57-generic, archname=x86_64-linux\n    uname='linux work 4.4.0-57-generic #78-ubuntu smp fri dec 9 23:50:32 utc 2016 x86_64 x86_64 x86_64 gnulinux '\n    config_args='-de -Dprefix=/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1 -DDEBUGGING -DDEBUG_LEAKING_SCALARS -Aeval:scriptdir=/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/bin'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=undef, usemultiplicity=undef\n    use64bitint=define, use64bitall=define, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='cc', ccflags ='-fwrapv -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',\n    optimize='-O2 -g',\n    cppflags='-fwrapv -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include'\n    ccversion='', gccversion='5.4.0 20160609', gccosandvers=''\n    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678, doublekind=3\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16, longdblkind=3\n    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='cc', ldflags =' -fstack-protector-strong -L/usr/local/lib'\n    libpth=/usr/local/lib /usr/lib/gcc/x86_64-linux-gnu/5/include-fixed /usr/include/x86_64-linux-gnu /usr/lib /lib/x86_64-linux-gnu /lib/../lib /usr/lib/x86_64-linux-gnu /usr/lib/../lib /lib /lib64 /usr/lib64\n    libs=-lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\n    perllibs=-lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\n    libc=libc-2.23.so, so=so, useshrplib=false, libperl=libperl.a\n    gnulibc_version='2.23'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -g -L/usr/local/lib -fstack-protector-strong'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: DEBUGGING HAS_TIMES PERLIO_LAYERS PERL_COPY_ON_WRITE\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD PERL_MALLOC_WRAP\n                        PERL_PRESERVE_IVUV USE_64_BIT_ALL USE_64_BIT_INT\n                        USE_LARGE_FILES USE_LOCALE USE_LOCALE_COLLATE\n                        USE_LOCALE_CTYPE USE_LOCALE_NUMERIC USE_LOCALE_TIME\n                        USE_PERLIO USE_PERL_ATOF\n  Locally applied patches:\n    Devel::PatchPerl 1.38\n  Built under linux\n  Compiled at Mar  9 2017 15:21:39\n  %ENV:\n    PERL5LIB=\"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5\"\n    PERLBREW=\"command perlbrew\"\n    PERLBREW_BASHRC_VERSION=\"0.76\"\n    PERLBREW_HOME=\"/home/kes/.perlbrew\"\n    PERLBREW_LIB=\"debug\"\n    PERLBREW_MANPATH=\"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/man:/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/man\"\n    PERLBREW_PATH=\"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/bin:/home/kes/perl5/perlbrew/bin:/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/bin\"\n    PERLBREW_PERL=\"perl-debug-5.24.1\"\n    PERLBREW_ROOT=\"/home/kes/perl5/perlbrew\"\n    PERLBREW_VERSION=\"0.76\"\n    PERL_LOCAL_LIB_ROOT=\"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\"\n    PERL_MB_OPT=\"--install_base /home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\"\n    PERL_MM_OPT=\"INSTALL_BASE=/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\"\n  @INC:\n    /home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5/x86_64-linux\n    /home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5\n    /home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1/x86_64-linux\n    /home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1\n    /home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1/x86_64-linux\n    /home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1\n    .\n</code></pre>\n\n<p>Also this show that perl is not compiled with required option:</p>\n\n<pre><code>$ perl -MConfig::Perl::V -MDDP -E 'p %{ Config::Perl::V::myconfig() }'\n{\n    build         {\n        options   {\n            DEBUGGING                           1,\n            DEBUG_LEAKING_SCALARS               0,\n            DEBUG_LEAKING_SCALARS_FORK_DUMP     0,\n            DECCRTL_SOCKETS                     0,\n            FAKE_THREADS                        0,\n            FCRYPT                              0,\n            HAS_TIMES                           1,\n            HAVE_INTERP_INTERN                  0,\n            MULTIPLICITY                        0,\n            MYMALLOC                            0,\n            NO_HASH_SEED                        0,\n            NO_MATHOMS                          0,\n            NO_TAINT_SUPPORT                    0,\n            PERL_BOOL_AS_CHAR                   0,\n            PERL_COPY_ON_WRITE                  1,\n            PERL_DEBUG_READONLY_COW             0,\n            PERL_DEBUG_READONLY_OPS             0,\n            PERL_DISABLE_PMC                    0,\n            PERL_DONT_CREATE_GVSV               1,\n            PERL_EXTERNAL_GLOB                  0,\n            PERL_GLOBAL_STRUCT                  0,\n            PERL_GLOBAL_STRUCT_PRIVATE          0,\n            PERL_HASH_FUNC_DJB2                 0,\n            PERL_HASH_FUNC_MURMUR3              0,\n            PERL_HASH_FUNC_ONE_AT_A_TIME        0,\n            PERL_HASH_FUNC_ONE_AT_A_TIME_HARD   1,\n            PERL_HASH_FUNC_ONE_AT_A_TIME_OLD    0,\n            PERL_HASH_FUNC_SDBM                 0,\n            PERL_HASH_FUNC_SIPHASH              0,\n            PERL_HASH_FUNC_SUPERFAST            0,\n            PERL_IMPLICIT_CONTEXT               0,\n            PERL_IMPLICIT_SYS                   0,\n            PERLIO_LAYERS                       1,\n            PERL_IS_MINIPERL                    0,\n            PERL_MAD                            0,\n            PERL_MALLOC_WRAP                    1,\n            PERL_MEM_LOG                        0,\n            PERL_MEM_LOG_ENV                    0,\n            PERL_MEM_LOG_ENV_FD                 0,\n            PERL_MEM_LOG_NOIMPL                 0,\n            PERL_MEM_LOG_STDERR                 0,\n            PERL_MEM_LOG_TIMESTAMP              0,\n            PERL_MICRO                          0,\n            PERL_NEED_APPCTX                    0,\n            PERL_NEED_TIMESBASE                 0,\n            PERL_NEW_COPY_ON_WRITE              0,\n            PERL_OLD_COPY_ON_WRITE              0,\n            PERL_PERTURB_KEYS_DETERMINISTIC     0,\n            PERL_PERTURB_KEYS_DISABLED          0,\n            PERL_PERTURB_KEYS_RANDOM            0,\n            PERL_POISON                         0,\n            PERL_PRESERVE_IVUV                  1,\n            PERL_RELOCATABLE_INCPUSH            0,\n            PERL_SAWAMPERSAND                   0,\n            PERL_TRACK_MEMPOOL                  0,\n            PERL_USE_DEVEL                      0,\n            PERL_USE_SAFE_PUTENV                0,\n            PERL_USES_PL_PIDSTATUS              0,\n            PL_OP_SLAB_ALLOC                    0,\n            THREADS_HAVE_PIDS                   0,\n            UNLINK_ALL_VERSIONS                 0,\n            USE_ATTRIBUTES_FOR_PERLIO           0,\n            USE_FAST_STDIO                      0,\n            USE_HASH_SEED_EXPLICIT              0,\n            USE_IEEE                            0,\n            USE_ITHREADS                        0,\n            USE_LARGE_FILES                     1,\n            USE_LOCALE                          1,\n            USE_LOCALE_COLLATE                  1,\n            USE_LOCALE_CTYPE                    1,\n            USE_LOCALE_NUMERIC                  1,\n            USE_LOCALE_TIME                     1,\n            USE_LONG_DOUBLE                     0,\n            USE_NO_REGISTRY                     0,\n            USE_PERL_ATOF                       1,\n            USE_PERLIO                          1,\n            USE_QUADMATH                        0,\n            USE_REENTRANT_API                   0,\n            USE_SFIO                            0,\n            USE_SITECUSTOMIZE                   0,\n            USE_SOCKS                           0,\n            USE_64_BIT_ALL                      1,\n            USE_64_BIT_INT                      1,\n            VMS_DO_SOCKETS                      0,\n            VMS_SHORTEN_LONG_SYMBOLS            0,\n            VMS_SYMBOL_CASE_AS_IS               0\n        },\n        osname    \"linux\",\n        patches   [\n            [0] \"Devel::PatchPerl 1.38\"\n        ],\n        stamp     \"Mar  9 2017 15:21:39\"\n    },\n    config        {\n        alignbytes                  8,\n        api_subversion              0,\n        api_version                 24,\n        api_versionstring           \"5.24.0\",\n        archlibexp                  \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1/x86_64-linux\",\n        archname                    \"x86_64-linux\",\n        bincompat5005               undef,\n        byteorder                   12345678,\n        cc                          \"cc\",\n        cccdlflags                  \"-fPIC\",\n        ccdlflags                   \"-Wl,-E\",\n        ccflags                     \"-fwrapv -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64\",\n        ccversion                   \"\",\n        config_args                 \"-de -Dprefix=/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1 -DDEBUGGING -DDEBUG_LEAKING_SCALARS -Aeval:scriptdir=/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/bin\",\n        cppflags                    \"-fwrapv -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include\",\n        d_dlsymun                   undef,\n        dlext                       \"so\",\n        d_longdbl                   \"define\",\n        d_longlong                  \"define\",\n        dlsrc                       \"dl_dlopen.xs\",\n        dont_use_nlink              undef,\n        doublesize                  8,\n        d_readlink                  \"define\",\n        d_sfio                      undef,\n        d_sigaction                 \"define\",\n        d_symlink                   \"define\",\n        exe_ext                     \"\",\n        gccosandvers                \"\",\n        gccversion                  \"5.4.0 20160609\",\n        git_branch                  \"\",\n        git_commit_id               \"\",\n        git_commit_id_title         \"\",\n        git_describe                \"\",\n        git_snapshot_date           undef,\n        git_uncommitted_changes     \"\",\n        gnulibc_version             2.23,\n        hint                        \"recommended\",\n        inc_version_list            \" \",\n        intsize                     4,\n        ivsize                      8,\n        ivtype                      \"long\",\n        ld                          \"cc\",\n        lddlflags                   \"-shared -O2 -g -L/usr/local/lib -fstack-protector-strong\",\n        ldflags                     \" -fstack-protector-strong -L/usr/local/lib\",\n        ldlibpthname                \"LD_LIBRARY_PATH\",\n        libc                        \"libc-2.23.so\",\n        libperl                     \"libperl.a\",\n        libpth                      \"/usr/local/lib /usr/lib/gcc/x86_64-linux-gnu/5/include-fixed /usr/include/x86_64-linux-gnu /usr/lib /lib/x86_64-linux-gnu /lib/../lib /usr/lib/x86_64-linux-gnu /usr/lib/../lib /lib /lib64 /usr/lib64\",\n        libs                        \"-lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\",\n        longdblsize                 16,\n        longlongsize                8,\n        longsize                    8,\n        lseeksize                   8,\n        lseektype                   \"off_t\",\n        myuname                     \"linux work 4.4.0-57-generic #78-ubuntu smp fri dec 9 23:50:32 utc 2016 x86_64 x86_64 x86_64 gnulinux \",\n        nvsize                      8,\n        nvtype                      \"double\",\n        optimize                    \"-O2 -g\",\n        osname                      \"linux\",\n        osvers                      \"4.4.0-57-generic\",\n        package                     \"perl5\",\n        patchlevel                  24,\n        path_sep                    \":\",\n        perllibs                    \"-lpthread -lnsl -ldl -lm -lcrypt -lutil -lc\",\n        perl_patchlevel             \"\",\n        privlibexp                  \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1\",\n        prototype                   \"define\",\n        ptrsize                     8,\n        revision                    5,\n        scriptdir                   \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/bin\",\n        sitearchexp                 \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1/x86_64-linux\",\n        sitelibexp                  \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1\",\n        so                          \"so\",\n        subversion                  1,\n        useithreads                 undef,\n        uselargefiles               \"define\",\n        uselongdouble               undef,\n        usemultiplicity             undef,\n        usemymalloc                 \"n\",\n        useperlio                   \"define\",\n        useposix                    \"true\",\n        useshrplib                  \"false\",\n        usesocks                    undef,\n        usevendorprefix             undef,\n        use64bitall                 \"define\",\n        use64bitint                 \"define\",\n        version                     \"5.24.1\",\n        version_patchlevel_string   \"version 24 subversion 1\"\n    },\n    derived       {\n        Off_t   \"off_t\",\n        patch   \"\",\n        uname   \"linux work 4.4.0-57-generic #78-ubuntu smp fri dec 9 23:50:32 utc 2016 x86_64 x86_64 x86_64 gnulinux \"\n    },\n    environment   {\n        PERLBREW                  \"command perlbrew\",\n        PERLBREW_BASHRC_VERSION   0.76,\n        PERLBREW_HOME             \"/home/kes/.perlbrew\",\n        PERLBREW_LIB              \"debug\",\n        PERLBREW_MANPATH          \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/man:/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/man\",\n        PERLBREW_PATH             \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/bin:/home/kes/perl5/perlbrew/bin:/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/bin\",\n        PERLBREW_PERL             \"perl-debug-5.24.1\",\n        PERLBREW_ROOT             \"/home/kes/perl5/perlbrew\",\n        PERLBREW_VERSION          0.76,\n        PERL_LOCAL_LIB_ROOT       \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\",\n        PERL_MB_OPT               \"--install_base /home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\",\n        PERL_MM_OPT               \"INSTALL_BASE=/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug\",\n        PERL5LIB                  \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5\"\n    },\n    inc           [\n        [0] \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5/x86_64-linux\",\n        [1] \"/home/kes/.perlbrew/libs/perl-debug-5.24.1@debug/lib/perl5\",\n        [2] \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1/x86_64-linux\",\n        [3] \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/site_perl/5.24.1\",\n        [4] \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1/x86_64-linux\",\n        [5] \"/home/kes/perl5/perlbrew/perls/perl-debug-5.24.1/lib/5.24.1\",\n        [6] \".\"\n    ]\n}\n</code></pre>\n\n<p>How to compile perl with DEBUG_LEAKING_SCALARS?</p>\n"}, {"tags": ["perl", "input"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1489230068, "post_id": 42734334, "comment_id": 72586989, "body": "You shouldn&#39;t be performing arithmetic on a semicolon character."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489230469, "post_id": 42734334, "comment_id": 72587085, "body": "<code>my ($n, $k) = split &#39; &#39;, &lt;&gt;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489232704, "post_id": 42734334, "comment_id": 72587728, "body": "If you give numbers on a single line <code>$n=&lt;&gt;</code> will read both numbers into <code>$n</code> since <code>&lt;&gt;</code> (in scalar context) by default reads a line at a time."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489232998, "post_id": 42734334, "comment_id": 72587812, "body": "The concatenation operator in Perl is <code>.</code>."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1489265935, "post_id": 42734334, "comment_id": 72598844, "body": "Also works the <code>my ($n,$k)=&lt;&gt;=~&#47;\\d+&#47;g;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1489253625, "last_edit_date": 1489253625, "creation_date": 1489251210, "answer_id": 42737952, "question_id": 42734334, "link": "https://stackoverflow.com/questions/42734334/read-two-integers-from-same-line-in-perl/42737952#42737952", "title": "read two integers from same line in perl", "body": "<p>The <code>&lt;&gt;</code> operator reads one record per iteration. Records are typically newline delimited (<code>\\n</code>).  That being the case, the easiest solution is to read one line as a record, and split on space:</p>\n\n<pre><code>chomp(my $line = &lt;&gt;);\nmy ($n, $k) = split \" \", $line;\nprint \"$n;$k\\n\";\n</code></pre>\n\n<p>The simple single space as a <code>split</code> delimiter is special-cased within <code>split</code> to drop leading whitespace and treat the split pattern as <code>/\\s+/</code>, which is often exactly what you would want in such situations (a little default tolerance for arbitrary amounts of whitespace). </p>\n\n<p>If you prefer being stricter about the format of the input, such that the split only happens if a single space character is used as the split delimiter, change your split to this:</p>\n\n<pre><code>my ($n, $k) = split / /, $line;\n</code></pre>\n\n<p>You can read <code>split</code>'s documentation by typing <code>perldoc -f split</code> at the command prompt on a system that has Perl installed. If you are new to Perl I also recommend spending 20 minutes to read <code>perldoc perlintro</code>. Though it doesn't explicitly discuss <code>split</code> it is a good starting point toward gaining familiarity with the language.</p>\n\n<p>Your example code also was treating the <code>+</code> operator as a concatenation operator. That's an easy mistake to make, since that's precisely what it does when handed strings in many other languages. But with Perl, the concatenation operator is <code>.</code> (dot).  You can read about Perl's operators in <code>perldoc perlop</code>.</p>\n\n<p>Therefore, the following are approximately equal:</p>\n\n<pre><code>print $n . ';' . $k . \"\\n\";\nprint \"$n;$k\\n\";\n</code></pre>\n"}], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489253625, "creation_date": 1489229811, "question_id": 42734334, "link": "https://stackoverflow.com/questions/42734334/read-two-integers-from-same-line-in-perl", "title": "read two integers from same line in perl", "body": "<p>I am newbie in Perl. How do I read two integers given on same line as input in Perl?\nFor example:</p>\n\n<pre><code>$n=&lt;&gt;;$k=&lt;&gt;;\nprint $n + \";\" + $k\n</code></pre>\n\n<p>Input is:</p>\n\n<pre><code>2 3\n</code></pre>\n\n<p>Output comes as:</p>\n\n<pre><code>2\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["perl", "inline", "insertafter"], "comments": [{"owner": {"reputation": 10009, "user_id": 1041641, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FIz0K.png?s=128&g=1", "display_name": "TmTron", "link": "https://stackoverflow.com/users/1041641/tmtron"}, "edited": false, "score": 0, "creation_date": 1489225435, "post_id": 42733638, "comment_id": 72585699, "body": "did you try <code>&gt;&gt; file</code> ?"}, {"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "reply_to_user": {"reputation": 10009, "user_id": 1041641, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FIz0K.png?s=128&g=1", "display_name": "TmTron", "link": "https://stackoverflow.com/users/1041641/tmtron"}, "edited": false, "score": 0, "creation_date": 1489225544, "post_id": 42733638, "comment_id": 72585723, "body": "Thanks bro. no because I want it to overwrite the whole file with the output of that script. &quot;&gt;&gt; file&quot; will do append."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489225679, "post_id": 42733638, "comment_id": 72585758, "body": "Try <code>perl -lpi.bak -e &#39;print &quot;This is Middle&quot; if(&#47;Beginning&#47;);&#39; file</code>. It creates a backup file <code>file.bak</code> of the original <code>file</code> and then overwrites <code>file</code>"}, {"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "edited": false, "score": 0, "creation_date": 1489225877, "post_id": 42733638, "comment_id": 72585792, "body": "$ perl -lne &#39;print $_;print &quot;This is Middle&quot; if(/Beginning/);&#39; file This is the Beginning This is Middle This is the end. $ cat file This is the Beginning This is the end."}, {"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489226144, "post_id": 42733638, "comment_id": 72585863, "body": "@H&#229;konH&#230;gland I tried this one but didn&#39;t meet my expectation. I writes not after the pattern match but before the pattern match. But thanks anyway this will be a good reference for me if I want that kind of inline edit."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489226290, "post_id": 42733638, "comment_id": 72585893, "body": "I am sure what you mean by <i>&quot;writes after the pattern&quot;</i> match. Please give more details"}, {"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489226440, "post_id": 42733638, "comment_id": 72585931, "body": "@H&#229;konH&#230;gland Your suggestion would put the inserted text before the matching line. The OP wants to insert it after the matching line. <code>perl -i.bak -lne &#39;print $_; print ... if &#47;...&#47;;&#39; file</code> would do that."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489226520, "post_id": 42733638, "comment_id": 72585953, "body": "Ok, I see.. :) Then just do: <code>perl -ni.bak -E &#39;print; say &quot;This is Middle&quot; if(&#47;Beginning&#47;);&#39; file</code>"}, {"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "edited": false, "score": 0, "creation_date": 1489227278, "post_id": 42733638, "comment_id": 72586210, "body": "Thanks for your help guys. It really helps me a lot."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "edited": false, "score": 0, "creation_date": 1489225971, "post_id": 42733720, "comment_id": 72585826, "body": "$ perl -lne &#39;print $_;print &quot;This is Middle&quot; if(/Beginning/);&#39; file &gt; file.tmp; \\ mv -f file.tmp file&gt; $ cat file This is the Beginning This is Middle This is the end.  Thanks Bro. This one works. Thanks for the reference as well."}, {"owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "edited": false, "score": 0, "creation_date": 1489226311, "post_id": 42733720, "comment_id": 72585896, "body": "I can&#39;t vote yet since I don&#39;t have enough reputation it says."}], "tags": [], "owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "is_accepted": true, "score": 0, "last_activity_date": 1489225702, "creation_date": 1489225702, "answer_id": 42733720, "question_id": 42733638, "link": "https://stackoverflow.com/questions/42733638/one-line-script-to-edit-after-the-pattern/42733720#42733720", "title": "One line script to edit after the Pattern", "body": "<p>You can't read from a file <em>and</em> write to it at the same time. The usual way to handle this kind of thing is write to a temporary file and replace the original with it after the action:</p>\n\n<pre><code>perl -lne 'print $_;print \"This is Middle\" if(/Beginning/);' file &gt; file.tmp; \\\nmv -f file.tmp file\n</code></pre>\n\n<p><a href=\"http://backreference.org/2011/01/29/in-place-editing-of-files/\" rel=\"nofollow noreferrer\">See also</a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7694161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f364893c511e6d72819dbc719e8c2f2f?s=128&d=identicon&r=PG&f=1", "display_name": "carlregencia", "link": "https://stackoverflow.com/users/7694161/carlregencia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 42733720, "answer_count": 1, "score": 0, "last_activity_date": 1489225702, "creation_date": 1489225177, "last_edit_date": 1489225351, "question_id": 42733638, "link": "https://stackoverflow.com/questions/42733638/one-line-script-to-edit-after-the-pattern", "title": "One line script to edit after the Pattern", "body": "<p>I got an example here but wouldn't write the output/print to a file</p>\n\n<pre><code>perl -lne 'print $_;print \"This is Middle\" if(/Beginning/);' file\n</code></pre>\n\n<p>I tried putting <code>&gt; file</code> but it happens to overwrite it all empty.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1489198921, "post_id": 42730430, "comment_id": 72580587, "body": "Please show how you&#39;re implementing the <code>cat</code> system call in Perl."}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1489199041, "post_id": 42730430, "comment_id": 72580609, "body": "And how you&#39;re using <code>cat</code> in Bash directly - disappearing linebreaks smell like a quoting issue."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489199120, "post_id": 42730430, "comment_id": 72580628, "body": "Also, please edit the output from <code>od -c name.txt</code> into your question."}, {"owner": {"reputation": 896, "user_id": 520843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711a181409e23c300b82404544166deb?s=128&d=identicon&r=PG", "display_name": "grail", "link": "https://stackoverflow.com/users/520843/grail"}, "edited": false, "score": 1, "creation_date": 1489249423, "post_id": 42730430, "comment_id": 72593132, "body": "Unless 100% sure you don&#39;t need them, you should use double quotes around variables in bash ALWAYS"}], "answers": [{"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": true, "score": 9, "last_activity_date": 1489202619, "creation_date": 1489202619, "answer_id": 42730984, "question_id": 42730430, "link": "https://stackoverflow.com/questions/42730430/perl-and-bash-external-command-difference/42730984#42730984", "title": "perl and bash external command difference", "body": "<p>Both variables receive the same value, but the way you're examining the value in Bash is flawed: use <code>echo \"$names\"</code> - note the double quotes - to see the true value.</p>\n\n<p>Unquoted use of <code>$names</code> in Bash makes its value subject to <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting\" rel=\"noreferrer\">word-splitting</a>, which means that the whitespace-separated words in the value - <code>Tom</code>, <code>Daniel</code>, and <code>James</code> - are passed as <em>separate arguments</em>  to <code>echo</code>, and <code>echo</code> concatenates those values with spaces on output.</p>\n"}], "owner": {"reputation": 669, "user_id": 5991761, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/984565203d53cc51598def5bb244f159?s=128&d=identicon&r=PG&f=1", "display_name": "Mint.K", "link": "https://stackoverflow.com/users/5991761/mint-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 42730984, "answer_count": 1, "score": 8, "last_activity_date": 1489202619, "creation_date": 1489196971, "last_edit_date": 1489201923, "question_id": 42730430, "link": "https://stackoverflow.com/questions/42730430/perl-and-bash-external-command-difference", "title": "perl and bash external command difference", "body": "<p>My <code>name.txt</code> has contains:</p>\n\n<pre><code>Tom\nDaniel\nJames\n</code></pre>\n\n<p>In Perl, </p>\n\n<pre><code>my $names = `cat names.txt`;\nprint $names;\n</code></pre>\n\n<p>gives me:</p>\n\n<pre><code>Tom\nDaniel\nJames\n</code></pre>\n\n<p>In Bash,</p>\n\n<pre><code>names=`cat names.txt`\necho $names\n</code></pre>\n\n<p>gives me:</p>\n\n<pre><code>Tom Daniel James\n</code></pre>\n\n<p>Here's my output of <code>od -c name.txt</code>:</p>\n\n<pre><code>0000000    T  o  m  \\n   D   a   n   i   e   l  \\n   J   a   m   e   s\n0000020\n</code></pre>\n\n<p>What is the reason of the difference?</p>\n"}, {"tags": ["html", "regex", "perl"], "comments": [{"owner": {"reputation": 3833, "user_id": 7355533, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aed0w.jpg?s=128&g=1", "display_name": "curveball", "link": "https://stackoverflow.com/users/7355533/curveball"}, "edited": false, "score": 0, "creation_date": 1489190831, "post_id": 42729720, "comment_id": 72578978, "body": "check how your editor treats spaces, line-breaks and stuff. Also check the encoding you use in every environment or at least post this info."}, {"owner": {"reputation": 695, "user_id": 68714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/891a18af78a3193a49013a3cbf4442fb?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/68714/george"}, "edited": false, "score": 2, "creation_date": 1489191037, "post_id": 42729720, "comment_id": 72579028, "body": "How are you getting the spaced output?"}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 1, "creation_date": 1489191123, "post_id": 42729720, "comment_id": 72579041, "body": "What&#39;s the encoding of the file? Make sure it&#39;s not encoded as UTF-16, or if it is, make sure you properly decode it when reading. Also, it might help if you showed us how you actually print the data and anything relevant that happens between the code you quoted and when you print it. Also, run the output of the script through hexdump to see what those spaces actually are."}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1489191197, "post_id": 42729720, "comment_id": 72579061, "body": "I am concatenating each array element to a string directly with no changes (until I can figure this spacing issue out). Then I write to a file with <code>open ( $fh, &#39;&gt;&#39;, &#39;filename.txt&#39; ); print $fh $line;</code>"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 2, "creation_date": 1489191348, "post_id": 42729720, "comment_id": 72579098, "body": "Those are not spaces but null bytes. That&#39;s why <code>s&#47; &#47;&#47;</code> doesn&#39;t work. The file is encoded as UTF-16 (each character is stored on 2 bytes). The best usage for Notepad on such situation is to save the file as UTF-8 (but other editors may do the job faster and better.)"}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1489191466, "post_id": 42729720, "comment_id": 72579123, "body": "Is there a way to remove these null bytes directly in Perl?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1489191482, "post_id": 42729720, "comment_id": 72579124, "body": "<code>.HTM</code> extension + <code>BGPROPERTIES</code> + <code>&lt;FONT&gt;</code> + HTML tags in uppercase =&gt; Welcome to 1997!"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1489191548, "post_id": 42729720, "comment_id": 72579139, "body": "I cannot tell for Perl but in PHP I would use <code>iconv()</code> to change the string encoding from <code>UTF16-LE</code> to <code>UTF8</code>. But wait, there is an <code>iconv</code> program on macOS and Linux that can be used to do just that!"}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1489191763, "post_id": 42729720, "comment_id": 72579182, "body": "I found a solution <code>@lines = map { s&#47;\\000&#47;&#47;r } @lines;</code> The result: my output is now literally in Chinese characters."}, {"owner": {"reputation": 695, "user_id": 68714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/891a18af78a3193a49013a3cbf4442fb?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/68714/george"}, "edited": false, "score": 0, "creation_date": 1489192341, "post_id": 42729720, "comment_id": 72579289, "body": "If that is your desired result... take a look at File::BOM or Encode qw(from_to) or Text::Iconv. as always with perl.. timtowtdi."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1489192735, "post_id": 42729720, "comment_id": 72579373, "body": "hexdump on your original file would be quite helpful..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489224772, "post_id": 42729720, "comment_id": 72585547, "body": "The first thing I thought was that it&#39;s split up into individual chars and then the resulting array is interpolated into a string, resulting in the spaced because of <code>$,</code>. But that&#39;s clearly not the case."}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "is_accepted": false, "score": -1, "last_activity_date": 1489192437, "creation_date": 1489192437, "answer_id": 42729934, "question_id": 42729720, "link": "https://stackoverflow.com/questions/42729720/reading-htm-file-mysterious-white-space-around-every-character/42729934#42729934", "title": "Reading HTM file: mysterious white space around every character", "body": "<p>I applied <code>s/\\x0//g</code> which apparently transformed many nulls into Chinese characters. I cleaned these out with <code>s/[^[:ascii:]]+//g;</code>. It isn't ideal but seems to work.</p>\n"}, {"tags": [], "owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "is_accepted": false, "score": 0, "last_activity_date": 1489233835, "last_edit_date": 1489233835, "creation_date": 1489197515, "answer_id": 42730477, "question_id": 42729720, "link": "https://stackoverflow.com/questions/42729720/reading-htm-file-mysterious-white-space-around-every-character/42730477#42730477", "title": "Reading HTM file: mysterious white space around every character", "body": "<p>There is no text but encoded text. Every file is written with one specific character encoding and must be read with that same encoding. </p>\n\n<p>HTML files are formatted text. They have a document encoding\u2014the one the file is written with. The document \"value\" is a sequence of Unicode characters. If the file doesn't use a Unicode encoding, characters can be represented as numeric character entities (e.g., &amp;#x1f6b2; instead of \ud83d\udeb2). They also have a mechanism to indicate the document encoding internally (<a href=\"https://www.w3.org/International/questions/qa-html-encoding-declarations\" rel=\"nofollow noreferrer\">meta charset</a>), but, apparently, that was not used.</p>\n\n<p>When you receive a text file, you must also have knowledge of which encoding was used to write it. If you don't have that, it's a failed communication. (Web servers and browsers prevent that by telling each other which encoding they are using with the HTTP <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\" rel=\"nofollow noreferrer\">Content-Type</a> heading. Unfortunately, with programs dropping files into the filesystem of a single system, there has been too much reliance on defaults or \"detection\" [informed guessing].)</p>\n\n<p>As others have said, it looks like your text renderer is coping with UTF-16 encoded text by emitting a space where it sees a zero byte. (I wonder how it would deal with \ud83d\udeb2.) People are asking for a hex dump of your bytes so they can improve the guess. If it is consistent with UTF-16, that would be a highly probable guess, even with such a small sample.</p>\n\n<p>The solution is simple: Confirm with the sender that the encoding is UTF-16 and then read it as UTF-16LE or UTF-16BE depending on the byte ordering. The byte ordering is easy to detect, given the knowledge that the encoding is UTF-16. So, slurp the file as a byte string and decode the bytes into a text string using <a href=\"http://perldoc.perl.org/Encode/Unicode.html#Size%2c-Endianness%2c-and-BOM\" rel=\"nofollow noreferrer\">Encode::Unicode</a>.</p>\n"}], "owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1489233835, "creation_date": 1489190570, "last_edit_date": 1489191423, "question_id": 42729720, "link": "https://stackoverflow.com/questions/42729720/reading-htm-file-mysterious-white-space-around-every-character", "title": "Reading HTM file: mysterious white space around every character", "body": "<p>I have an HTM file. When I open it directly in Notepad, it looks like this:</p>\n\n<pre><code>&lt;HTML&gt;\n&lt;BODY BGCOLOR=#FFFFFF BGPROPERTIES=FIXED&gt;\n&lt;FONT 000000 FACE=ARIAL SIZE=3&gt;\n&lt;HEAD&gt;\n</code></pre>\n\n<p>When I attempt to do this in Perl:</p>\n\n<pre><code>open (my $fh, '&lt;', $filename) or die \"Error opening file! $!\";\nchomp(my @lines = &lt;$fh&gt;);\nclose $fh;\n</code></pre>\n\n<p>Each line in the Perl array now has these extra spaces and looks like this:</p>\n\n<pre><code>&lt; H T M L &gt;    \n&lt; B O D Y   B G C O L O R = # F F F F F F   B G P R O P E R T I E S = F I X E D &gt;    \n&lt; F O N T   0 0 0 0 0 0   F A C E = A R I A L   S I Z E = 3 &gt;    \n&lt; H E A D &gt;   \n</code></pre>\n\n<p>Any ideas on where the problem is?</p>\n\n<p>CLARIFICATION: These are not my HTM files, so I have no control over them or their creation. I receive the file and must process the contents. Various attacks like <code>s/ (?= |\\w)//g</code> don't seem to affect this mysterious whitespace.</p>\n\n<p>The output is being generated this way:</p>\n\n<pre><code>foreach (@lines) {\n    $line .= \"$_\\n\";\n}\n\nopen( $fh, '&gt;', 'output-file.txt' ) or die \"Could not open file $!\";\nprint $fh $line;\nclose $fh;\n</code></pre>\n"}, {"tags": ["perl", "debugging", "padre"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1489187395, "post_id": 42729156, "comment_id": 72577988, "body": "<a href=\"https://metacpan.org/pod/Padre\" rel=\"nofollow noreferrer\">Padre</a> hasn&#39;t had a release in over 3 years."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489187396, "post_id": 42729156, "comment_id": 72577990, "body": "Have you read <a href=\"http://padre.perlide.org/features/perl5-debugger.html\" rel=\"nofollow noreferrer\">the docunentation</a>?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1489192696, "post_id": 42729156, "comment_id": 72579367, "body": "Per the discussion on <a href=\"http://perlmonks.org/?node_id=1184153\" rel=\"nofollow noreferrer\">Perlmonks</a>, I believe you&#39;re better off trying a different IDE."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489221266, "post_id": 42729156, "comment_id": 72584770, "body": "Padre seems to be a dead project. Time spent learning how to use it is probably wasted. Take a look at <a href=\"https://atom.io/\" rel=\"nofollow noreferrer\">Atom</a> instead."}], "answers": [{"tags": [], "owner": {"reputation": 12982, "user_id": 7668911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6VtZT.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/7668911/neil"}, "is_accepted": false, "score": 2, "last_activity_date": 1489201186, "creation_date": 1489201186, "answer_id": 42730839, "question_id": 42729156, "link": "https://stackoverflow.com/questions/42729156/how-can-i-step-through-a-perl-program-using-padre/42730839#42730839", "title": "How can I step through a Perl program using Padre?", "body": "<p>It's actually quite simple.  You can launch debugger by clicking on one of the top menus:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GpTQg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GpTQg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, in the right panel there will be step to next and step over buttons:</p>\n\n<p><a href=\"https://i.stack.imgur.com/s4lYC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s4lYC.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 6199639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c43475552727ba655c6e70e8ed2e07e8?s=128&d=identicon&r=PG&f=1", "display_name": "Diomedes", "link": "https://stackoverflow.com/users/6199639/diomedes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521805463, "creation_date": 1489186866, "last_edit_date": 1489187075, "question_id": 42729156, "link": "https://stackoverflow.com/questions/42729156/how-can-i-step-through-a-perl-program-using-padre", "title": "How can I step through a Perl program using Padre?", "body": "<p>How can I step through a Perl program using Padre?</p>\n\n<p>After much effort I installed CPAN Module Padre-1.00 on my home computer, which uses Windows 64bit and version 5.24.1 of Strawberry.</p>\n\n<p>I also installed Padre's dependencies \"Wx\" and \"Alien::wxWidgets\", but all I can do with Padre at the moment is edit and save a Perl program, and run a Perl program from start to finish.</p>\n\n<p>I see no icons for doing the normal debug activities, such as step into the next line, execute a function, and step out of a function</p>\n\n<p>Can anyone help? There is a Padre web page saying you can use a Tools->Advanced option to get some additional icons on the toolbar but it doesn't work. Nor does there seem to be any key-binding for debug commands.</p>\n\n<p>When I click the Padre\u2019s \"Bug\" button \u2013 which supposedly puts Padre into a line-by-line debug mode \u2013 a DOS window titled \"padre.exe -d  \" appears, and within the DOS it says \"Press any key to continue\".</p>\n\n<p>I have seen internet comments that Padre has bugs and has not been changed in a year.</p>\n\n<p>Can anyone help?. Have you found a way to run a Perl program in Padre line-by-line?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 6, "last_activity_date": 1489299725, "last_edit_date": 1489299725, "creation_date": 1489181360, "answer_id": 42728007, "question_id": 42727963, "link": "https://stackoverflow.com/questions/42727963/perl-regex-variable-for-replacement-count/42728007#42728007", "title": "Perl regex variable for replacement count", "body": "<p>The <code>s///</code> operator (without the <code>/r</code> flag) returns the number of replacements done, so you can simply do</p>\n\n<pre><code>if ($text =~ s/[[:upper:]]+/?/g) {\n    # at least one replacement was done\n} else {\n    # nothing changed\n}\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/perlop.html#s%2F_PATTERN_%2F_REPLACEMENT_%2Fmsixpodualngcer\" rel=\"nofollow noreferrer\" title=\"Regexp-Quote-Like-Operators\">Reference</a></p>\n"}], "owner": {"reputation": 1466, "user_id": 926057, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/66d793e3800b52a15181bc0b18393d77?s=128&d=identicon&r=PG", "display_name": "o\u1d09\u0279\u01dd\u0265\u0254", "link": "https://stackoverflow.com/users/926057/o%e1%b4%89%c9%b9%c7%9d%c9%a5%c9%94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 42728007, "answer_count": 1, "score": 2, "last_activity_date": 1489299725, "creation_date": 1489181162, "last_edit_date": 1489294276, "question_id": 42727963, "link": "https://stackoverflow.com/questions/42727963/perl-regex-variable-for-replacement-count", "title": "Perl regex variable for replacement count", "body": "<p>For a simple use case as this one</p>\n\n<pre><code>#!/usr/bin/perl\nmy $text = \"A choice between ASCII and UTF8 is simple\";\n$text =~ s/[[:upper:]]+/?/g;\n</code></pre>\n\n<p>I need to determine if a replacement was made or not. I am hoping to find a built in variable which would tell me that. It seems like there are lot's of variables available related to regex (e.g. $1, ... $', $&amp;, @+, @- etc) but I haven't find one that can simply tell me whether a replacement was made or not or number of replacements made etc.</p>\n\n<p>Sure I can save the original string and compare with the result though if this statistics is already available in one way or another I'd use it.</p>\n"}, {"tags": ["windows", "oracle", "perl", "dll"], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "is_accepted": true, "score": 0, "last_activity_date": 1489178959, "creation_date": 1489178959, "answer_id": 42727480, "question_id": 42726132, "link": "https://stackoverflow.com/questions/42726132/dbdoracle-load-filethe-specified-module-could-not-be-found/42727480#42727480", "title": "DBD::Oracle: load_file:The specified module could not be found", "body": "<p>Apparently, a reboot was needed.  After the reboot, connections through Perl were possible.  This is here in case someone is as stupid as me.   I'm going back my AS/400 now...</p>\n"}], "owner": {"reputation": 394, "user_id": 4504847, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/U9lvM.png?s=128&g=1", "display_name": "FrankRalphBob", "link": "https://stackoverflow.com/users/4504847/frankralphbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "accepted_answer_id": 42727480, "answer_count": 1, "score": 1, "last_activity_date": 1489180979, "creation_date": 1489173486, "last_edit_date": 1489180979, "question_id": 42726132, "link": "https://stackoverflow.com/questions/42726132/dbdoracle-load-filethe-specified-module-could-not-be-found", "title": "DBD::Oracle: load_file:The specified module could not be found", "body": "<p>It's a story as old as time itself.  No, I'm not talking about the story of a man's wife running off with his best friend.   I'm talking about getting <code>DBD::Oracle</code> to work.  Although both stories have about the same amount of pain associated with them.</p>\n\n<p>Let us start with the facts:</p>\n\n<ul>\n<li>Running Windows 7 -64 bit</li>\n<li>Running Strawberry Perl (v. 5.16.3 - 32 bit)  (the reason we have 32 bit is because there is a module that is only 32 bit and we are stuck with it - don't ask)</li>\n<li>Oracle Client (version 12.1.0 - 32 bit) successfully installed.</li>\n<li>The bin directory of said Oracle Client has been included at the front of the <code>PATH</code></li>\n<li><p>the addition of the following environmental variables: </p>\n\n<p>ORACLE_HOME - pointing to Oracle Client path<br>\nTNS_ADMIN -pointing to Oracle Client path<br>\nLD_LIBRARY_PATH - pointing to Oracle Client path<br>\nORACLE_USER_ID - set to a valid oracle user in the form: user/pass@system:port\\sid<br>\nORACLE_SID - set to valid oracle sid</p></li>\n<li><p>Successful connection of sqlplus to the desired database.</p></li>\n<li>\"Successful creation\" of DBD::Oracle into Strawberry Perl using <code>cpanm</code>.   Although I had to use <code>--force</code> because the tests failed.</li>\n<li><p>An entry entered into tnsnames.ora, that I assume is correct:</p>\n\n<p><em>nameIMadeUp</em>.WORLD =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = <em>servername</em>)(PORT = <em>port#</em>))\n    )\n    (CONNECT_DATA =\n      (SID = <em>sid</em>)\n    )\n  )</p></li>\n</ul>\n\n<p>After all of that, we try to run this code (snipped for the sake of brevity):</p>\n\n<pre><code>use DBI;\nuse DBD::ODBC;\nuse Log4Perl;\n\n#logger set up here.\n\nmy $user = \"username\";\nmy $passwd = \"password\";\nmy $DSN = \"dbi:Oracle:host=servername;sid=sid;port=port#\";\n\nmy $oracleDbh = DBI-&gt;connect($DSN,$user,$passwd) or $logger-&gt;logdie(\"$DBI::errstr\\n at line:\".__LINE__);\n</code></pre>\n\n<p>And we get this glorious error:</p>\n\n<pre><code>install_driver(Oracle) failed: Can't load 'C:/strawberry/perl/site/lib/auto/DBD/Oracle/Oracle.dll' for module DBD::Oracle: load_file:The specified module could not be found at C:/strawberry/perl/lib/DynaLoader.pm line 190.  \nat (eval 84)[C:/strawberry/perl/vendor/lib/DBI.pm:770] line 3. \nCompilation failed in require at (eval 84)[C:/strawberry/perl/vendor/lib/DBI.pm:770] line 3. \nPerhaps a required shared library or dll isn't installed where expected\n...stacktrace...\n</code></pre>\n\n<p>So, I have read that 'C:/strawberry/perl/site/lib/auto/DBD/Oracle/Oracle.dll'  is looking for oci.dll which is causing the error.   However oci.dll is in [oracle_client_path]/bin/.   Theoretically, it should be able to find it.</p>\n\n<p>Or is it looking for another dll?   are there tools in windows or maybe even visual studio that can help here?</p>\n\n<p>Or is there some magical step that I am missing?</p>\n\n<p>I thank you in advance for any wise sage knowledge you put forth.</p>\n"}, {"tags": ["arrays", "perl", "random"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489169541, "post_id": 42724984, "comment_id": 72569825, "body": "Related: <a href=\"http://stackoverflow.com/q/8963228\">How can I take n elements at random from a Perl array?</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1489169717, "post_id": 42724984, "comment_id": 72569925, "body": "Will there always be fewer lines of input than numbers in your array?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1489171282, "post_id": 42724984, "comment_id": 72570720, "body": "keep track of the previous value, and if you get a new value too close, retry the rand?"}, {"owner": {"reputation": 33, "user_id": 7668840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e63151cc6279a53ab2e33fb47f4650?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Jones", "link": "https://stackoverflow.com/users/7668840/albert-jones"}, "edited": false, "score": 0, "creation_date": 1489185475, "post_id": 42724984, "comment_id": 72577322, "body": "Thanks for the question, and sorry for the slow reply. There will be vastly more lines of input than the size of the array. i.e. array elements will be reused. Moreover, I&#39;m interested in avoiding nearby elements, not just repeats."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489187119, "post_id": 42724984, "comment_id": 72577908, "body": "Define &quot;nearby.&quot;"}, {"owner": {"reputation": 33, "user_id": 7668840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e63151cc6279a53ab2e33fb47f4650?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Jones", "link": "https://stackoverflow.com/users/7668840/albert-jones"}, "edited": false, "score": 0, "creation_date": 1489207023, "post_id": 42724984, "comment_id": 72581863, "body": "Imagine the array was 100 numbers, 1..100. I don&#39;t want two consecutive random numbers to be within 20 of each other."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7668840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e63151cc6279a53ab2e33fb47f4650?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Jones", "link": "https://stackoverflow.com/users/7668840/albert-jones"}, "edited": false, "score": 0, "creation_date": 1489185537, "post_id": 42725290, "comment_id": 72577349, "body": "Thanks for this, and it&#39;s a valid assumption, but in fact, Ill have much more input than items in the array."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 1, "last_activity_date": 1489170199, "creation_date": 1489170199, "answer_id": 42725290, "question_id": 42724984, "link": "https://stackoverflow.com/questions/42724984/nonrandom-random-command-line-replacement-in-perl/42725290#42725290", "title": "Nonrandom random command line replacement in Perl", "body": "<p>If you're sure there will always be fewer lines of input than array elements, you can <a href=\"https://metacpan.org/pod/List::Util#shuffle\" rel=\"nofollow noreferrer\"><code>shuffle</code></a> the array once at the beginning and then remove a single element for every line:</p>\n\n<pre><code>$ echo -e 'foo\\nbar\\nbaz' | \\\n    perl -MList::Util=shuffle -lpe'\n        BEGIN { @numbers = shuffle map { 1.2 * $_ } 1..4 }\n        $_ = pop @numbers\n    '\n2.4\n4.8\n3.6\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7668840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e63151cc6279a53ab2e33fb47f4650?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Jones", "link": "https://stackoverflow.com/users/7668840/albert-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489170199, "creation_date": 1489169094, "question_id": 42724984, "link": "https://stackoverflow.com/questions/42724984/nonrandom-random-command-line-replacement-in-perl", "title": "Nonrandom random command line replacement in Perl", "body": "<p>What's a good, concise way to avoid sequential random value which are close? e.g., using <code>rand</code> in perl, but assuring a minimum 0.2x difference/distribution between any sequential values? I've tried a few ideas like re-sampling rand if the values are close, but then I need a script, and I don't know how to do this cleanly in a one-liner. </p>\n\n<p>The context is that I'm doing a search-replace using the commandline with perl. The idea is that in each line, a string is replaced with a random value from an array. </p>\n\n<pre><code>echo \":z:z:z:\" | tr ':' '\\n' | perl -pe '@numbers=(1.2, 3.4, 5.6, 7.8); $number = $numbers[rand @numbers];  s/z/\" : \".( $number )/ge'\n</code></pre>\n\n<p>The output is something like this:</p>\n\n<pre><code>: 3.4\n: 5.6\n: 5.6\n: 1.2\n</code></pre>\n\n<p>See how the <code>5.6</code> repeats? I want to avoid that. In my use-case, the <code>@numbers</code> array contains ~100 elements. I want to adjust <code>rand @numbers</code> so that the selected array values are further apart. </p>\n"}, {"tags": ["mysql", "perl", "dbix-class"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1489163342, "post_id": 42723147, "comment_id": 72566163, "body": "That&#39;s a script that you or someone else wrote. It&#39;s not part of DBIx::Class. You probably defined that mapping in there."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489168265, "post_id": 42723147, "comment_id": 72569125, "body": "@simbabque All the script does is call <code>DBIx::Class::Schema::Loader::make_schema_at</code>. DBIx::Class is doing this, it&#39;s not some mapping that the OP created."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489177487, "post_id": 42723147, "comment_id": 72573796, "body": "@ThisSuitIsBlackNot the code wasn&#39;t in the question yet when I wrote that comment. I know about pluralization but I want expecting it to do it for words that cannot have a singular."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1489221007, "post_id": 42723147, "comment_id": 72584697, "body": "It&#39;s worth clarifying that DBIC <b>isn&#39;t</b> changing the name of your table. DBIC isn&#39;t doing anything to your database. DBIC is creating a resultset class which has a singular name based on your plural table name."}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1489172431, "post_id": 42724329, "comment_id": 72571283, "body": "Thank you. Absolutely fixed the problem. Just one question: I hope it will not cause any trouble with rest of the DBIx code in my project?"}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1489173805, "post_id": 42724329, "comment_id": 72571941, "body": "another comment i would like to add is: when it changes name like that, it create a problem in keeping things straight in the programmer&#39;s head. Also it does not change the table name in the contents of .pm file, so I just used the option above and made it look &#39;normal&#39;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489177378, "post_id": 42724329, "comment_id": 72573740, "body": "With people and person it&#39;s weird, especially if English is not you first language, but it does make sense in general. Think <i>Books</i> and <i>Book</i>, and it pretty reasonable."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 1, "creation_date": 1489226295, "post_id": 42724329, "comment_id": 72585894, "body": "@rajeev Keep in mind that objects of the generated class represent a <i>single row</i> in your database table, not the entire table. When you&#39;re fetching results from a list of people, a single result would be a person, not a people. And the whole point of an ORM is to abstract away the database, so you shouldn&#39;t really be thinking about the table names anyway."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1489167706, "last_edit_date": 1489167706, "creation_date": 1489166907, "answer_id": 42724329, "question_id": 42723147, "link": "https://stackoverflow.com/questions/42723147/why-does-dbixclassschemaloader-change-my-table-name-from-plural-to-singula/42724329#42724329", "title": "Why does DBIx::Class::Schema::Loader change my table name from plural to singular?", "body": "<p>By default, DBIx::Class::Schema::Loader singularizes the names of Result classes. It makes sense to have a database table of people, but it doesn't make sense to have an object representing a single person called \"People\".</p>\n\n<p>If you really want, you can change this by setting the <a href=\"https://metacpan.org/pod/DBIx::Class::Schema::Loader::Base#naming\" rel=\"nofollow noreferrer\"><code>naming</code></a> option in <code>make_schema_at</code>:</p>\n\n<pre><code>make_schema_at(\n    \"Mydb::Schema\",\n    {\n        debug          =&gt; 0,\n        dump_directory =&gt; \"../db/\",\n        generate_pod   =&gt; 0,\n        naming         =&gt; { monikers =&gt; 'preserve' }\n    },\n    [\"dbi:mysql:mydb:localhost:3306\", 'mydb', 'password'],\n);\n</code></pre>\n\n<p>But I would recommend sticking with the defaults.</p>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 42724329, "answer_count": 1, "score": 2, "last_activity_date": 1489168253, "creation_date": 1489163118, "last_edit_date": 1489168253, "question_id": 42723147, "link": "https://stackoverflow.com/questions/42723147/why-does-dbixclassschemaloader-change-my-table-name-from-plural-to-singula", "title": "Why does DBIx::Class::Schema::Loader change my table name from plural to singular?", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/DBIx::Class::Schema::Loader\" rel=\"nofollow noreferrer\">DBIx::Class::Schema::Loader</a> to create a schema like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DBIx::Class::Schema::Loader qw/make_schema_at/;\n\nmake_schema_at(\n    \"Mydb::Schema\",\n    {debug =&gt; 0, dump_directory =&gt; \"../db/\",\n    generate_pod =&gt; 0,},\n    [\"dbi:mysql:mydb:localhost:3306\", 'mydb', 'password'],\n);\n</code></pre>\n\n<p>My table name in MySQL is <code>people</code>, but when I run this code, the generated class is named <code>Mydb::Schema::Result::Person</code>:</p>\n\n<pre><code>$ cat Mydb/Schema/Result/Person.pm \nuse utf8;\npackage Mydb::Schema::Result::Person;\n\n# Created by DBIx::Class::Schema::Loader\n# DO NOT MODIFY THE FIRST PART OF THIS FILE\n\nuse strict;\nuse warnings;\n\nuse base 'DBIx::Class::Core';\n__PACKAGE__-&gt;table(\"people\");\n__PACKAGE__-&gt;add_columns(\n  \"pplid\",\n  {\n    data_type =&gt; \"smallint\",\n    extra =&gt; { unsigned =&gt; 1 },\n    is_auto_increment =&gt; 1,\n    is_nullable =&gt; 0,\n  },\n...\n...\n</code></pre>\n\n<p>Why is \"people\" being converted to \"Person\"?</p>\n"}, {"tags": ["html", "sql", "perl", "cgi"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1489150774, "post_id": 42718893, "comment_id": 72557725, "body": "<code>WHERE nullif(hosts.currentuser, &#39;&#39;) IS NOT NULL AND hosts.host_name in (&#39;1408bcc204ap1&#39;, &#39;1408scg073p2&#39;, &#39;1408wthr114p2&#39;, AND-SO-ON)</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1489150795, "post_id": 42718893, "comment_id": 72557741, "body": "Why don&#39;t you use <code>hosts.host_name IN (...</code> instead of the long OR?"}, {"owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "edited": false, "score": 0, "creation_date": 1489152898, "post_id": 42718893, "comment_id": 72559134, "body": "I suppose that might work better, I think we originally thought this method would be easier to maintain, as we have to keep track of 3000 computers and the list could get quite long"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489160431, "post_id": 42718893, "comment_id": 72564275, "body": "you can indent it one hostname per line even with <code>IN ( ... )</code>, so it should end up being more readable."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1489162856, "post_id": 42718893, "comment_id": 72565862, "body": "Surely, the most maintainable option is to put the hostnames in a database table and join against that."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1489389488, "last_edit_date": 1489389488, "creation_date": 1489164203, "answer_id": 42723511, "question_id": 42718893, "link": "https://stackoverflow.com/questions/42718893/want-to-hide-cgi-rendered-html-text-for-hostname-when-username-text-column-is-em/42723511#42723511", "title": "Want to hide cgi rendered html text for hostname when username text column is empty", "body": "<p>It's not really clear how your database is laid out, but I think that if no-one is logged in on a host then the <code>$currentuser</code> variable will be undefined. So within the main loop that creates the table, you could just skip an iteration if that's the case. Something like this:</p>\n\n<pre><code>while($sth-&gt;fetch()) {\n    next unless defined $currentuser;\n\n    # Rest of your existing code\n}\n</code></pre>\n\n<p>But all in all, this code needs a lot of work. I'm sure it currently does what you want, but it's an unmaintainable mess which is very likely to fall apart if it's not cleaned up soon. Some suggestions:</p>\n\n<ul>\n<li>Add <code>use strict;</code> and <code>use warnings;</code> and then fix all the problems they reveal.</li>\n<li>Use <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> instead of calling the external <code>date</code> command.</li>\n<li>Put the hostnames in a database table and join against that table in your SQL.</li>\n<li><p>Stop using <code>bind_columns</code>. It's more readable to do something like:</p>\n\n<pre><code>while (my @row = $sth-&gt;fetchrow_array) {\n   my (undef, $currentuser, $lastlogin, $host_name) = @row;\n</code></pre></li>\n<li><p>Use a <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">templating system</a> for your HTML output.</p></li>\n</ul>\n"}], "owner": {"reputation": 107, "user_id": 7425884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4oox7.png?s=128&g=1", "display_name": "Jozef Pietrzak", "link": "https://stackoverflow.com/users/7425884/jozef-pietrzak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42723511, "answer_count": 1, "score": 0, "last_activity_date": 1489389488, "creation_date": 1489150354, "question_id": 42718893, "link": "https://stackoverflow.com/questions/42718893/want-to-hide-cgi-rendered-html-text-for-hostname-when-username-text-column-is-em", "title": "Want to hide cgi rendered html text for hostname when username text column is empty", "body": "<p>I have the current perl code in a .cgi file that we run on our server. This allows us to know which employees are using specific machines, by displaying:\nhostname - username</p>\n\n<p>However, I would like to be able to hide the host names that have no user present to shorten the rendered text, but I am unfamiliar with doing this.</p>\n\n<p>If possible, I would also like to add logic to display a message when there are no staff logged in, like 'No staff on shift'.</p>\n\n<p>Also, these aren't the real user/passwords, just fyi.</p>\n\n<pre><code>   #! /usr/bin/perl\n$ENV{'ORACLE_HOME'} =\"/usr/lib/oracle/11.2/client64\";\nuse DBI;\nmy $date=`date`;\nmy $las='bziegle jpietrza hpietrza lpietrza';\n$login=\"user\";\n$password=\"pass\";\nmy $dbh = DBI-&gt;connect(\"DBI:Oracle:icsprod\",$login,$password);\ndie \"Unable to connect: $DBI::errstr\\n\" unless (defined $dbh);\nmy $sql = qq{ \nSELECT  hosts.currentuser, TO_CHAR(hosts.lastlogin, 'HH:MM:SS MM/DD/YYYY'),\n        hosts.host_name\nFROM    infadmin.inv_hosts hosts\nWHERE   (hosts.host_name = '1408bcc204ap1')\nOR      (hosts.host_name = '1408bres201p7')\nOR      (hosts.host_name = '1408brngb281p1')\nOR      (hosts.host_name = '1408brngb281p2')\nOR      (hosts.host_name = '1408hamp3144p21')\nOR      (hosts.host_name = '1408hiksg951m1')\nOR      (hosts.host_name = '1408hiksg951p1')\nOR      (hosts.host_name = '1408hiksg951p2')\nOR      (hosts.host_name = '1408hiksg951p3')\nOR      (hosts.host_name = '1408mathb10p1')\nOR      (hosts.host_name = '1408mcutc216p1')\nOR      (hosts.host_name = '1408mrdh146sp7')\nOR      (hosts.host_name = '1408mthw116p1')\nOR      (hosts.host_name = '1408phys22p5')\nOR      (hosts.host_name = '1408rhph316p11')\nOR      (hosts.host_name = '1408scg046p2')\nOR      (hosts.host_name = '1408scg073p2')\nOR      (hosts.host_name = '1408stew102p1')\nOR      (hosts.host_name = '1408wthr114p2')\nORDER BY hosts.host_name\n};\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\nmy($currentuser, $lastlogin, $host_name);\n$sth-&gt;bind_columns(undef, \\$currentuser, \\$lastlogin, \\$host_name);\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;html&gt;\\n\";\nprint \"&lt;meta http-equiv=refresh content=300&gt;\\n\";\nprint \"&lt;meta http-equiv='pragma' content='no-cache'&gt;\\n\";\nprint \"&lt;style type=\\\"text/css\\\"&gt;\\n\";\nprint \"body { font-family: \\\"Arial\\\", sans-serif; font-size: small; color: black }\\n\";\nprint \"&lt;/style&gt;\\n\";\nprint \"&lt;head&gt;\\n\";\nprint \"&lt;title&gt;\\n\";\nprint \"LA station usage.\\n\";\nprint \"&lt;/title&gt;\\n\";\nprint \"&lt;/head&gt;\\n\";\nprint \"&lt;body&gt;\\n\";\nprint \"&lt;table&gt;\\n\";\nprint \"&lt;tr&gt;&lt;td colspan=5&gt;$date&lt;/td&gt;&lt;/tr&gt;\";\nprint \"&lt;tr&gt;&lt;td&gt;&lt;u&gt;LA Station&lt;/u&gt;&lt;/td&gt;&lt;td&gt;&lt;u&gt;Login&lt;/u&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\nwhile($sth-&gt;fetch()) {\n        $lastlogin=~s/ .*$//;\n        $host_name=~s/1408//;\n        foreach(@las)   {\n                if ($currentuser eq \"$_\") {\n                        $lacolor = \"black\";\n                        last;\n                } else {\n                        $lacolor = \"red\";\n                }\n        }\n        print \"&lt;tr&gt;\";\n        print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n        print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;$currentuser&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\n$sth-&gt;finish();\nmy $sql = qq{ \nSELECT  hosts.currentuser, TO_CHAR(hosts.lastlogin, 'HH:MM:SS MM/DD/YYYY'),\n        hosts.host_name\nFROM    infadmin.inv_hosts hosts\nWHERE   (hosts.host_name = '1408bres201p4')\nOR      (hosts.host_name = '1408hamp3144p31')\nOR      (hosts.host_name = '1408hamp3144p32')\nOR      (hosts.host_name = '1408hamp3144p33')\nOR      (hosts.host_name = '1408mathb10p2')\nOR      (hosts.host_name = '1408scg046p3')\nOR      (hosts.host_name = '1408scg073p3')\nOR      (hosts.host_name = '1408sc179p4')\nOR      (hosts.host_name = '1408sc179p5')\nOR      (hosts.host_name = '1408brngb278p1')\nOR      (hosts.host_name = '1408brngb278p2')\nOR      (hosts.host_name = '1408mcutc216p2')\nOR      (hosts.host_name = '1408mrdh146sp6')\nOR      (hosts.host_name = '1408phys22p6')\nOR      (hosts.host_name = '1408rhph316p1')\nOR      (hosts.host_name = '1408rhph316p10')\nOR      (hosts.host_name = '1408rhph316p2')\nOR      (hosts.host_name = '1408wthr114p3')\nOR      (hosts.host_name = '1408scg070p1')\nOR      (hosts.host_name = '1408scg070p2')\nOR      (hosts.host_name = '1408mathb10m1')\n\nORDER BY hosts.host_name\n};\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\nmy($currentuser, $lastlogin, $host_name);\n$sth-&gt;bind_columns(undef, \\$currentuser, \\$lastlogin, \\$host_name);\nprint \"&lt;tr&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td colspan=3&gt;&lt;u&gt;Alternate LA Stations&lt;/u&gt;&lt;/td&gt;&lt;/tr&gt;\\n\";\nwhile($sth-&gt;fetch()) {\n        $lastlogin=~s/ .*$//;\n        $host_name=~s/1408//;\n        foreach(@las)   {\n                if ($currentuser eq \"$_\") {\n                        $lacolor = \"black\";\n                        last;\n                } else {\n                        $lacolor = \"red\";\n                }\n        }\n        print \"&lt;tr&gt;\";\n        print \"&lt;td&gt;$host_name&lt;/td&gt;\";\n        print \"&lt;td&gt;&lt;font color=\\\"$lacolor\\\"&gt;$currentuser&lt;/font&gt;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;\";\n}\nprint \"&lt;/table&gt;\";\nprint \"&lt;/body&gt;\\n\";\nprint \"&lt;/html&gt;\\n\";\n$sth-&gt;finish();\n$\nb\n-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["perl", "pdf", "hyperlink"], "owner": {"reputation": 23, "user_id": 1515229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab71a13f4073632d956899ead5c1d2dd?s=128&d=identicon&r=PG", "display_name": "Nico", "link": "https://stackoverflow.com/users/1515229/nico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489149305, "creation_date": 1489145256, "last_edit_date": 1489149305, "question_id": 42717288, "link": "https://stackoverflow.com/questions/42717288/manipulating-pdf-hyperlink-after-creation", "title": "Manipulating PDF hyperlink after creation", "body": "<p>I am creating a PDF document with Google Slides containing placeholder for hyperlinks. On a local machine, I want to replace those placeholder with local hyperlinks.</p>\n\n<p>To do this I am using a perl search and replace function:</p>\n\n<pre><code>perl -i~ -0777 -pe 's/\\/URI\\s*\\/URI\\s*\\(\\#Tools_notepad\\)/\\/Launch\\/F(C:\\/\\/Program Files (x86)\\/\\/Notepad\\+\\+\\/\\/notepad\\+\\+\\.exe)/g' link_problem.pdf\n</code></pre>\n\n<p>After that, I want to cut off pages using pdftk and get a java NullPointer:</p>\n\n<pre><code>$ pdftk link_problem.pdf cat 1 output link_problem_pdftked.pdf\n\nError: Unexpected Exception in open_reader()\njava.lang.NullPointerException\nat 0x0059a84e (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\Throwable.java)\nat 0x0059ad42 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\Throwable.java)\nat 0x0059adf3 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\Throwable.java)\nat 0x005e9bed (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\Exception.java)\nat 0x005ba4bd (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\RuntimeException.java)\nat 0x005b91ad (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\NullPointerException.java)\nat 0x00597242 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\prims.cc)\nat 0x004e1e81 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\java_lib.jar)\nat 0x004e04c6 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\java_lib.jar)\nat 0x004df3e2 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\java_lib.jar)\nat 0x004df38a (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\java_lib.jar)\nat 0x0041a16a (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\pdftk.cc)\nat 0x0041af94 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\pdftk.cc)\nat 0x0041d187 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\pdftk.cc)\nat 0x00421e89 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\pdftk.cc)\nat 0x0042298a (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\pdftk.cc)\nat 0x0058ed52 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\crt1.c)\nat 0x0058ede4 (C:\\Users\\ngrebner\\Documents\\OSOCC-Structure\\04 Operations\\tmp\\crt1.c)\nat 0x770c3366 (Unknown Source)\nat 0x776a98fe (Unknown Source)\nat 0x776a98d1 (Unknown Source)\nError: Failed to open PDF file:\nlink_problem.pdf\nErrors encountered.  No output created.\nDone.  Input errors, so no output created.\n</code></pre>\n\n<p>Using QPDF I get a feeling for the problem:</p>\n\n<pre><code>$ qpdf --check link_problem.pdf\nWARNING: link_problem.pdf: file is damaged\nWARNING: link_problem.pdf (file position 112664): xref not found\nWARNING: link_problem.pdf: Attempting to reconstruct cross-reference table\noperation for Dictionary object attempted on object of wrong type\n</code></pre>\n\n<p>Now, obviously by manipulating the PDF file with Perl, I change a xref reference and pdftk cannot handle that. Just to mention: PDF readers are working fine with the file now.</p>\n\n<p>One solution would be to use pdftk first and perl afterwards, but this results in other problems in my work flow.</p>\n\n<p>Here is a link to my minimum example PDF file: <a href=\"https://drive.google.com/open?id=0BwvpX97bvnDuT1FhTGFxbWlueHc\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0BwvpX97bvnDuT1FhTGFxbWlueHc</a></p>\n\n<p>Does anyone have an idea how I could split the file after using my perl command?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1489147537, "post_id": 42716783, "comment_id": 72555855, "body": "Please format your code better. It helps us a lot if you make your code as readable as possible."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489146436, "post_id": 42716932, "comment_id": 72555168, "body": "Notably, <code>delete_depth_hash</code> deletes nothing."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489147157, "post_id": 42716932, "comment_id": 72555616, "body": "@Borodin: Yes, the name is misleading."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1489147658, "post_id": 42716932, "comment_id": 72555934, "body": "Like the hash variable called <code>%array</code> in her last question :-)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1489144150, "creation_date": 1489144150, "answer_id": 42716932, "question_id": 42716783, "link": "https://stackoverflow.com/questions/42716783/function-explanation-delete-a-key-in-a-hashtable/42716932#42716932", "title": "Function explanation: delete a key in a hashtable", "body": "<p>The behaviour can be explained by an example:</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper({ delete_depth_hash( a =&gt; { b =&gt; 1, c =&gt; 2 } ) });\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; 3\n        };\n</code></pre>\n\n<p>So, it basically sums the numbers regardless of the subkeys in a hash of hashes. Note that the <a href=\"http://p3rl.org/scalar\" rel=\"nofollow noreferrer\">scalar</a> does nothing here, as the value of a hash must always be a scalar.</p>\n\n<p>As the inner keys are just removed, you can simplify the code using the <a href=\"http://p3rl.org/List::Util\" rel=\"nofollow noreferrer\">List::Util</a>'s <code>sum</code> and the <a href=\"http://p3rl.org/values\" rel=\"nofollow noreferrer\">values</a> function:</p>\n\n<pre><code>use List::Util qw{ sum };\n\nsub delete_depth_hash {\n    my (%hash_genotype_depth) = @_;\n    my %new_hash;\n    for my $geno (keys %hash_genotype_depth) {\n        $new_hash{$geno} = sum(values %{ $hash_genotype_depth{$geno} });\n    }\n    return %new_hash;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489147606, "creation_date": 1489143709, "last_edit_date": 1489147606, "question_id": 42716783, "link": "https://stackoverflow.com/questions/42716783/function-explanation-delete-a-key-in-a-hashtable", "title": "Function explanation: delete a key in a hashtable", "body": "<p>I'm a Perl programmer beginner and I am seeking for some explanation about the code above. The function is named delete_depth_hash but I can't understand how it works.</p>\n\n<pre><code>sub delete_depth_hash {\n    my (%hash_genotype_depth) = @_; \n    my %new_hash;\n\n    foreach my $geno(keys %hash_genotype_depth) {\n        foreach my $dep(keys %{$hash_genotype_depth{$geno}}) {\n            my $frequence = scalar($hash_genotype_depth{$geno}{$dep}); \n            $new_hash{$geno} +=$frequence; \n        }\n    }\n\n    return %new_hash;\n} \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1489145563, "post_id": 42716512, "comment_id": 72554640, "body": "<i>&quot;this is giving me strange syntax errors&quot;</i> Please reveal what those strange errors are, and show the code that is producing them."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489146285, "post_id": 42716512, "comment_id": 72555075, "body": "Note that you need a semicolon after the block in <code>open ... or do { ... };</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489148335, "post_id": 42716512, "comment_id": 72556308, "body": "You need quotes around <code>scriptB.pl</code> (if you <code>use strict</code>, as you should) : <code>do &quot;scriptB.pl&quot; or do { if ( $@) { ... } else { die $! }};</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1489163555, "post_id": 42718010, "comment_id": 72566303, "body": "Upvoted for presenting three very good options. I&#39;m not  sure that the <code>or do {...}</code> syntax is less clear though, since it builds upon the common <code>or die</code> pattern that people have (Possibly? Hopefully?) grown accustomed to seeing."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1489164341, "post_id": 42718010, "comment_id": 72566764, "body": "Sure. Clarity is in the eye of the maintenance programmer :-) But at the very least there&#39;s a huge increase in the chance of syntax errors as people forget that closing semicolon."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489174282, "post_id": 42718010, "comment_id": 72572178, "body": "Downvoting for accepting <code>or do { print(STDERR &quot;...: $!\\n&quot;; die &quot;ignored message&quot;; };</code> as an acceptable alternative for <code>or die &quot;...: $!\\n&quot;</code>. This approach shouldn&#39;t be taken!!!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 7, "last_activity_date": 1489147438, "creation_date": 1489147438, "answer_id": 42718010, "question_id": 42716512, "link": "https://stackoverflow.com/questions/42716512/perl-open-or-block-of-code/42718010#42718010", "title": "Perl: open or [block of code]?", "body": "<p>If you want to continue to use the <code>open(...) or ...</code> syntax, then you could use <code>do</code>.</p>\n\n<pre><code>open my $fh, '&lt;', $file or do {\n  ...\n};\n</code></pre>\n\n<p>But I think it's probably clearer to switch to <code>if</code></p>\n\n<pre><code>if (! open my $fh, '&lt;', $file) {\n  ...\n}\n</code></pre>\n\n<p>Or even <code>unless</code></p>\n\n<pre><code>unless (open my $fh '&lt;', $file) {\n  ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1489165454, "creation_date": 1489165454, "answer_id": 42723903, "question_id": 42716512, "link": "https://stackoverflow.com/questions/42716512/perl-open-or-block-of-code/42723903#42723903", "title": "Perl: open or [block of code]?", "body": "<p>I think you'll get clearer code with fewer gotchas if you put script B into a module, and load it with <code>use</code> or <code>require</code> and call the function(s) in there directly with clear parameters.</p>\n\n<p>What you're missing here is that <code>do</code> involves an <code>eval</code> behind the scenes, and that results in the exception confusion.  You can more or less avoid that confusion by moving your script B code into a function in a module, and calling it.</p>\n\n<p>(Also, perl 5.26 will have a slight hiccup with <code>do</code> wherein the current directory will be removed from the directory lookup, due to security concerns.  <code>use</code> and <code>require</code> have the same hiccup, but this may be less surprising since you should put your module into a path you explicitly get into the <code>@INC</code> load path.)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1489172003, "creation_date": 1489172003, "answer_id": 42725753, "question_id": 42716512, "link": "https://stackoverflow.com/questions/42716512/perl-open-or-block-of-code/42725753#42725753", "title": "Perl: open or [block of code]?", "body": "<p><code>die</code> doesn't print a message; <code>die</code> throws an exception. When you catch that exception you don't do anything with the message passed to <code>die</code>. Replace</p>\n\n<pre><code>local @ARGV = ($file, $file2, etc.);\ndo scriptB.pl or die \"scriptB has failed\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>local @ARGV = ($file, $file2, etc.);\ndo scriptB.pl or die \"scriptB has failed: \". ( $@ || $! );\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 42718010, "answer_count": 3, "score": 4, "last_activity_date": 1489172003, "creation_date": 1489142951, "last_edit_date": 1489144686, "question_id": 42716512, "link": "https://stackoverflow.com/questions/42716512/perl-open-or-block-of-code", "title": "Perl: open or [block of code]?", "body": "<p>I'm running script A which feeds ARGV containing the path to a file to perl script B. This is done by a </p>\n\n<pre><code>local @ARGV = ($file, $file2, etc.);\ndo scriptB.pl or die \"scriptB has failed\";\n</code></pre>\n\n<p>Script B then tries to open the file:</p>\n\n<pre><code>open( my $fh_file, \"&lt;\", $file )  \n  or die \"Could not open file '$file' $!\"; \n</code></pre>\n\n<p>However, if the file is missing I do not get the message quoted after \"or die\" in B. Instead I get the do scriptB.pl or die message in A. If I remove the \"or die\" from A, the script continues after B silently dies as if nothing went wrong.</p>\n\n<p>I was wondering if there was any way to get B to print its die message?</p>\n\n<p>Better yet, what is the best way to have B run a block of code after it fails to open the file? Said code would for example write to a separate file listing which files were missing so that the user may easily track down such errors.</p>\n\n<pre><code>#something like\nopen( my $fh_file, \"&lt;\", $file) or { \nprint \"the file could not be found\";\ndie;\n}\n</code></pre>\n\n<p>The only thing I've found searching the net for help was someone mentioning a \"or do {}\", but this is giving me strange syntax errors so I am not sure if I'm using it right.</p>\n"}, {"tags": ["linux", "perl", "selenium"], "comments": [{"owner": {"reputation": 783, "user_id": 3730224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JBuu4.gif?s=128&g=1", "display_name": "mutt", "link": "https://stackoverflow.com/users/3730224/mutt"}, "edited": false, "score": 0, "creation_date": 1489098838, "post_id": 42706387, "comment_id": 72535334, "body": "Do you have permissions at all to bring code libraries onto the machine?  I&#39;m guessing you don&#39;t have an IDE and can&#39;t install one or setup path variables?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489098995, "post_id": 42706387, "comment_id": 72535413, "body": "Do either of these posts help? <a href=\"http://stackoverflow.com/q/5782055\">stackoverflow.com/q/5782055</a>, <a href=\"http://stackoverflow.com/q/25914877\">stackoverflow.com/q/25914877</a>"}, {"owner": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "edited": false, "score": 0, "creation_date": 1489099651, "post_id": 42706387, "comment_id": 72535712, "body": "Have you considered running it in a <code>virtualenv</code>? You can install pip packages into it without root."}, {"owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489618801, "post_id": 42706387, "comment_id": 72756216, "body": "@ThisSuitIsBlackNot: Unfortunately not. The solutions presented in these posts rely on the possibility to install something as root. In my case this is not given at all."}, {"owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "reply_to_user": {"reputation": 1880, "user_id": 3126085, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3d1b5320d5edffe38958e8ca1129ab32?s=128&d=identicon&r=PG&f=1", "display_name": "crookedleaf", "link": "https://stackoverflow.com/users/3126085/crookedleaf"}, "edited": false, "score": 0, "creation_date": 1489619019, "post_id": 42706387, "comment_id": 72756302, "body": "@crookedleaf: I guess that at least virtualenv has to be installed using root access. This is not possible in this project."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489619076, "post_id": 42706387, "comment_id": 72756328, "body": "@Bloehdian What has to be installed as root? You should be able to install Firefox, Xvfb, etc. all as a regular user. You can&#39;t use the package manager, but you can still build things from source or install pre-compiled binaries in your home directory."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489619251, "post_id": 42706387, "comment_id": 72756391, "body": "@Bloehdian &quot;virtualenv has to be installed using root access&quot; <a href=\"http://stackoverflow.com/questions/9348869/how-to-install-virtualenv-without-using-sudo\" title=\"how to install virtualenv without using sudo\">stackoverflow.com/questions/9348869/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 7643757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b956fa7308a86ce38c2c5913fd3045?s=128&d=identicon&r=PG&f=1", "display_name": "Bloehdian", "link": "https://stackoverflow.com/users/7643757/bloehdian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489101643, "creation_date": 1489097229, "last_edit_date": 1489101643, "question_id": 42706387, "link": "https://stackoverflow.com/questions/42706387/web-scraping-with-selenium-webdriver-and-an-unprivileged-account", "title": "Web scraping with Selenium WebDriver and an unprivileged account", "body": "<p>I am coding a web scraper using Perl with the <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\">`Selenium::Remote::Driver</a> module.</p>\n\n<p>I have experimented with the Selenium WebDriver, X virtual frame buffer (Xvfb) and a headless Firefox instance on Debian 8 VPS and this combination works quite well.</p>\n\n<p>But I am facing the fact that the client for which the program is created has access to a shared hosting Linux account that has no root access.</p>\n\n<p>I am wondering whether it is possible to install and run Selenium WebDriver (and the other components like Xvfb) under such an account.</p>\n\n<p>If not I am interested in alternative approaches to run Selenium and let a Perl script connect to this server.</p>\n\n<p>For example, I could install Selenium WebDriver on my virtual private server (VPS) and let the client connect to this instance.</p>\n\n<p>Is this feasible and what about security in such a scenario (the Driver would have to be accessible from the internet in this case).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 3, "creation_date": 1489101492, "post_id": 42706241, "comment_id": 72536496, "body": "All that has been posted is a program description. However, we need you to <a href=\"http://stackoverflow.com/help/how-to-ask\">ask a question</a>. We can&#39;t be sure what you want from us. Please <a href=\"https://stackoverflow.com/posts/42706241/edit\">edit</a> your post to include a valid question that we can answer. Reminder: make sure you know <a href=\"http://stackoverflow.com/help/on-topic\">what is on-topic here</a>, asking us to write the program for you and suggestions are off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489097897, "post_id": 42706476, "comment_id": 72534911, "body": "It printed out the entire file but didnt make a change"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489098052, "post_id": 42706476, "comment_id": 72534987, "body": "If you mean it didnt change the file: Just redirect the output to a file.. or you could save the output from within the Perl script if you like"}, {"owner": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489098240, "post_id": 42706476, "comment_id": 72535068, "body": "Thanks did that but it didnt increment the versionName for the one I searched."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489098360, "post_id": 42706476, "comment_id": 72535124, "body": "Sorry I forgot about the <code>versionCode</code> but that should be easy"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1489101293, "last_edit_date": 1489101293, "creation_date": 1489097578, "answer_id": 42706476, "question_id": 42706241, "link": "https://stackoverflow.com/questions/42706241/search-within-file-increment-version-numbers-and-save-with-perl/42706476#42706476", "title": "Search within file, increment version numbers, and save with perl", "body": "<p>You could try something like this:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'build.gradle';\n\nmy $arg = shift;\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $str = do { local $/; &lt;$fh&gt; };\nclose $fh;\n\nif ( $str =~ /^\\s*\\Q$arg\\E\\s*{/mg ) {\n    if ( $str =~ /\\s*versionName\\s*\"\\d+\\.\\d+\\./sg ) {\n        my $save_pos = $+[0];\n        $str =~ s/\\G(\\d+)/$1+1/e;\n        pos( $str ) = $save_pos;\n        $str =~ s/\\G\\d+\"\\s*versionCode\\s*\\K(\\d+)/$1+1/se;\n    }\n    print $str;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489098849, "post_id": 42706723, "comment_id": 72535336, "body": "It looks good, but I&#39;m getting this error: Use of uninitialized value $_ in print at version_increment.pl line 25, &lt;$fh&gt; line 2055."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489100960, "post_id": 42706723, "comment_id": 72536307, "body": "@codeman  Added command-line options via <code>Getopt::Long</code>.  Tested in all invocations."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "edited": false, "score": 0, "creation_date": 1489108746, "post_id": 42706723, "comment_id": 72538686, "body": "@codeman Welcome :)  Note that there is no error checking there so the file had better be all as expected.  This is easy to add.  (I&#39;ll add a note on this in the answer later.) Also, there is some complexity here -- in the sense that there are a number of components to be aware of, or that can be useful in their own right.  Let me know if they need explanations."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1489125044, "last_edit_date": 1489125044, "creation_date": 1489098461, "answer_id": 42706723, "question_id": 42706241, "link": "https://stackoverflow.com/questions/42706241/search-within-file-increment-version-numbers-and-save-with-perl/42706723#42706723", "title": "Search within file, increment version numbers, and save with perl", "body": "<p>Given that file format, one way is to read by paragraphs. Then each paragraph is read into a string, on which you can use a straight regex. To read paragraphs we set the <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\">input record separator ($/)</a>.  </p>\n\n<p>The remaining bit is to change values only for those parameters that have been submitted </p>\n\n<pre><code>use warnings;\nuse strict;\nuse Getopt::Long;\n\nmy $file = 'build.gradle';\nmy $section = 'BeachRadio';  # default to test\nmy ($major, $minor, $patch);  \nGetOptions(\n    'file=s' =&gt; \\$file, 'section=s' =&gt; \\$section, \n    'major=i' =&gt; \\$major, 'minor=i' =&gt; \\$minor, 'patch=i' =&gt; \\$patch,\n) or die \"Usage: $0 ...\";\n\n\n{ # limit scope of $/ change if there is other code\n    local $/ = \"\\n\\n\";\n\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    while (&lt;$fh&gt;) \n    {\n        if (/^\\s*$section\\s*{/)\n        { \n            s{versionName\\s*\"\\K(\\d+)\\.(\\d+)\\.(\\d+)}\n             {join '.', $major//$1, $minor//$2, $patch//($3+1)}e;   #\"\n\n            s/versionCode\\s*\\K(\\d+)/$1+1/e;\n        }\n        print;  # or write to file\n    }\n}\n</code></pre>\n\n<p>I use <code>{}{}</code> delimiters in regex so that <code>//</code> can be used inside without escaping.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code></a> is a particular form of a <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookbehind</a> <code>(?&lt;=pattern)</code>, that discards all previous matches. So we don't have to put it all back in the replacement, just the part matched after <code>\\K</code>.</p>\n\n<p>The replacement side is evaluated as code, due to <code>/e</code> modifier. The replacement string is formed by <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\">join</a>ing by <code>.</code> replacements for each number, either its prescribed (if defined) or existing value.  This uses <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or <code>//</code></a> operator. \nThe last number is at least incremented by one, the default.</p>\n\n<p>Note that there is no error handling for wrong  file/line format. Please add checks as appropriate.</p>\n\n<p>This prints the expected output in all invocations in my tests.</p>\n"}], "owner": {"reputation": 8200, "user_id": 313717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1f36a22a2bfc06cc80b540873061d502?s=128&d=identicon&r=PG", "display_name": "codeman", "link": "https://stackoverflow.com/users/313717/codeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 42706723, "answer_count": 2, "score": -1, "last_activity_date": 1489125044, "creation_date": 1489096658, "question_id": 42706241, "link": "https://stackoverflow.com/questions/42706241/search-within-file-increment-version-numbers-and-save-with-perl", "title": "Search within file, increment version numbers, and save with perl", "body": "<p>I have a file that contains several entries that look like this:</p>\n\n<pre><code>        Banana1015 {\n            versionName \"1.0.2\"\n            versionCode 4\n        }\n\n        BeachRadio {\n            versionName \"1.0.0\"\n            versionCode 1\n        }\n\n        BIGFROG104 {\n            versionName \"1.0.3\"\n            versionCode 4\n        }\n</code></pre>\n\n<p>I would like to create a perl script where I can pass a parameter of the entry to search for (i.e. \"BeachRadio\") in this file, and then it would increment the versionName and versionCode just for that entry, and save the file. It could just increment the 3rd decimal place in versionName as a default, but ideally could pass a parameter that allows for either major, minor, or patch version increment. </p>\n\n<p>What I've got so far just reads the file, and outputs when it finds the \"BeachRadio\" entry:</p>\n\n<pre><code>#!perl -w\n$file=\"build.gradle\";\n\nopen my $fh, \"&lt;\", $file or die $!;\n\nwhile (&lt;$fh&gt;) {\n    print if /BeachRadio/ .. /}/;\n}\n</code></pre>\n\n<p>I appreciate any help with this.</p>\n"}, {"tags": ["linux", "bash", "perl", "shell"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489089587, "post_id": 42704288, "comment_id": 72530829, "body": "<i>&quot;I want to know which perl scripts run the users in each domain and with which parameters&quot;</i> This seems like something your webserver probably already records in its logs. Which webserver are you using? (e.g. Apache, nginx)"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7667507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wVk3Q.jpg?s=128&g=1", "display_name": "Pablo Murillo", "link": "https://stackoverflow.com/users/7667507/pablo-murillo"}, "edited": false, "score": 0, "creation_date": 1489412470, "post_id": 42705227, "comment_id": 72645268, "body": "Thanks for the explanation ! I have to lern a lot yet ! The real problem is not what are the user &quot;using&quot;, the problem is &quot;what a hacker is using without the knowledge of the user&quot; I have all the logs, but there is nothing  Finally, I think that I found from where comes the attack, is not from the web server (Apache), is from Dovecot"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 7, "last_activity_date": 1489092927, "creation_date": 1489092927, "answer_id": 42705227, "question_id": 42704288, "link": "https://stackoverflow.com/questions/42704288/how-to-intercept-execution-of-a-perl-script-using-a-shell-script-and-then-actual/42705227#42705227", "title": "How to intercept execution of a perl script using a shell script and then actually execute them?", "body": "<p>As mentioned in the comments, this is probably overkill for your purposes and you risk subtly breaking every Perl program on your server (for example, you're passing parameters incorrectly). You're better off using your server logs or something at the kernel level like <code>lsof</code>. Or ask yourself why you need to know which programs your users are running at all.</p>\n\n<p>But it's handy to understand what's going on.</p>\n\n<hr>\n\n<p><strong><em>The program in <code>#!</code> must be a compiled executable. It cannot be interpreted.</em></strong> For example...</p>\n\n<pre><code>$ cat /Users/schwern/tmp/notperl \n#!/bin/sh\n\nperl \"$@\"\n\n$ cat /Users/schwern/tmp/test.pl \n#!/Users/schwern/tmp/notperl\n\nprint \"Hello, world!\\n\";\n\n$ /Users/schwern/tmp/notperl /Users/schwern/tmp/test.pl\nHello, world!\n\n$ /Users/schwern/tmp/test.pl\n/Users/schwern/tmp/test.pl: line 3: print: command not found\n</code></pre>\n\n<p>What's happening is <code>test.pl</code> is executed and the <a href=\"https://en.wikipedia.org/wiki/Loader_(computing)\" rel=\"noreferrer\">program loader</a> sees the <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)\" rel=\"noreferrer\">shebang line</a>. It then checks to see if that is an absolute path to an executable program. Not just any executable, but <strong><em>one that can be executed by the kernel directly</em></strong>.</p>\n\n<p>Since <code>/Users/schwern/tmp/notperl</code> is interpreted, the kernel ignores the <code>#!</code> line and hands it off to the shell to execute. The shell has no <code>print</code> function and tells you so.</p>\n\n<hr>\n\n<p>One generally gets around this with <code>/usr/bin/env</code>. This is a little program to execute another program in a modified environment. With no options it just executes the program.</p>\n\n<pre><code>$ cat /Users/schwern/tmp/test.pl \n#!/usr/bin/env /Users/schwern/tmp/notperl\n\nprint \"Hello, world!\\n\";\n\n$ /Users/schwern/tmp/test.pl\nHello, world!\n</code></pre>\n\n<p>In this case the kernel executes <code>/usr/bin/env</code> with the argument <code>/Users/schwern/tmp/notperl</code>. <code>/usr/bin/env</code> then executes <code>/Users/schwern/tmp/notperl</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 7667507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wVk3Q.jpg?s=128&g=1", "display_name": "Pablo Murillo", "link": "https://stackoverflow.com/users/7667507/pablo-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489092927, "creation_date": 1489089273, "question_id": 42704288, "link": "https://stackoverflow.com/questions/42704288/how-to-intercept-execution-of-a-perl-script-using-a-shell-script-and-then-actual", "title": "How to intercept execution of a perl script using a shell script and then actually execute them?", "body": "<p>The question is a bit complicated, first I'm going to put you in situation.\nI have a web server with many domains and I want to know which perl scripts run the users in each domain and with which parameters.</p>\n\n<p>For this I thought of renaming the perl, and create a script that is called perl that saves in a log the environment and then execute the script in perl</p>\n\n<p>The script is very simple, but obviusly have something wrong</p>\n\n<pre><code>#!/bin/sh \n\nwhen=`date \"+%Y%m%d%H%M%S\"`\nlog_file=\"/var/logs/perl/${when}\"\nenv &gt; log_file\nparameters=$@\necho \"Parameters: $parameters\" &gt;&gt; $log_file\n/usr/local/bin/perl_bin $parameters\n</code></pre>\n\n<p>I use a simple perl script to test:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Working\\n\\n\";\n</code></pre>\n\n<p>Now, the problem\nIf I run the perl script from the shell like this:</p>\n\n<h1>perl script.pl</h1>\n\n<p>Works Ok</p>\n\n<p>But If I run the perl script from the shell like this:</p>\n\n<h1>./script.pl</h1>\n\n<p>Don\u00b4t works and the error looks:</p>\n\n<p>./script.pl: line 3: print: command not found</p>\n\n<p>What am I missing ?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 6342, "user_id": 1138252, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ed6c22f78d63a5e5004a0872ca09ef?s=128&d=identicon&r=PG", "display_name": "Ilion", "link": "https://stackoverflow.com/users/1138252/ilion"}, "is_accepted": false, "score": 2, "last_activity_date": 1601555876, "last_edit_date": 1601555876, "creation_date": 1489088455, "answer_id": 42704041, "question_id": 42703225, "link": "https://stackoverflow.com/questions/42703225/using-shell-command-sending-mail-in-perl-is-not-working/42704041#42704041", "title": "Using shell command sending mail in Perl is not working", "body": "<p>The issue is variable interpolation; however you still need quotes around your email addresses. Try the following:</p>\n<pre><code>#! /usr/bin/perl\n\nmy $mail_command=q(echo hello | mail -s hi -r 'x@zz.com' 'y@zz.com');\nprint($mail_command);\nqx($mail_command);\n</code></pre>\n<p><code>q()</code> acts like single quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1489135832, "creation_date": 1489135832, "answer_id": 42714036, "question_id": 42703225, "link": "https://stackoverflow.com/questions/42703225/using-shell-command-sending-mail-in-perl-is-not-working/42714036#42714036", "title": "Using shell command sending mail in Perl is not working", "body": "<p>Please don't send mail using command-line programs like that. There are many good mail modules on CPAN. Please take a look at <a href=\"https://metacpan.org/pod/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a> or <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 7303117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75faf5d25714aab49fa6b5a8d5196bf1?s=128&d=identicon&r=PG&f=1", "display_name": "Bhargav", "link": "https://stackoverflow.com/users/7303117/bhargav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1601555958, "creation_date": 1489085378, "last_edit_date": 1601555958, "question_id": 42703225, "link": "https://stackoverflow.com/questions/42703225/using-shell-command-sending-mail-in-perl-is-not-working", "title": "Using shell command sending mail in Perl is not working", "body": "<p>I'm trying to send an email using Perl script, by using shell command. It is not giving any error and not sending email.</p>\n<pre><code>    #! /usr/bin/perl\n        my $mail_command=&quot;echo hello | mail -s hi -r 'x@zz.com' 'y@zz.com'&quot;;\n            print($mail_command);\n            qx($mail_command);\n</code></pre>\n<p>When I print the message it shows like this.</p>\n<pre><code>    echo hello | mail -s hi -r 'x.com' 'y.com'\n</code></pre>\n<p>Can someone help me?</p>\n"}, {"tags": ["perl", "frameworks", "cpan", "dancer"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1489079148, "post_id": 42701177, "comment_id": 72524651, "body": "Is there any other output in the error message? If so, please add it to the question."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1489079182, "post_id": 42701177, "comment_id": 72524670, "body": "Are you behind a proxy?"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1489078983, "post_id": 42701178, "comment_id": 72524544, "body": "This is not true: Dancer is still available, I just installed it on my machine. Something else went wrong with your install. You really should be using Dancer2 anyway, but this doesn&#39;t answer the original question."}], "tags": [], "owner": {"reputation": 14907, "user_id": 1704745, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/9OZS4.jpg?s=128&g=1", "display_name": "Dung", "link": "https://stackoverflow.com/users/1704745/dung"}, "is_accepted": false, "score": -1, "last_activity_date": 1489078715, "creation_date": 1489078715, "answer_id": 42701178, "question_id": 42701177, "link": "https://stackoverflow.com/questions/42701177/update-perl-dancer-framework-resulting-in-error-message/42701178#42701178", "title": "update perl dancer framework resulting in error message", "body": "<p>Playing with it I found the old dancer version is no longer work/available. So I ran </p>\n\n<blockquote>\n  <p>\"cpanm --verbose Dancer2\"</p>\n</blockquote>\n\n<p>and that works! with version 2 of dancer.</p>\n"}], "owner": {"reputation": 14907, "user_id": 1704745, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/9OZS4.jpg?s=128&g=1", "display_name": "Dung", "link": "https://stackoverflow.com/users/1704745/dung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1489078715, "creation_date": 1489078715, "question_id": 42701177, "link": "https://stackoverflow.com/questions/42701177/update-perl-dancer-framework-resulting-in-error-message", "title": "update perl dancer framework resulting in error message", "body": "<p>Following this tutorial \"<a href=\"https://perlmaven.com/getting-started-with-perl-dancer\" rel=\"nofollow noreferrer\">https://perlmaven.com/getting-started-with-perl-dancer</a>\"\nOn Windows command line, I run the command \"cpanm --verbose Dancer\" and that resulted in error \"Failed to download <a href=\"http://search.cpan.org/CPAN/authors/id/B/BI/BIGPRESH/Dancer-1.3202.tar.gz\" rel=\"nofollow noreferrer\">http://search.cpan.org/CPAN/authors/id/B/BI/BIGPRESH/Dancer-1.3202.tar.gz</a>\"</p>\n"}, {"tags": ["perl", "timestamp"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489075242, "post_id": 42699175, "comment_id": 72521771, "body": "<i>&quot; but then needs to be parsed&quot;</i> Your SQL extracts a field <code>duration</code> from a (misnamed) table <code>database</code>. I don&#39;t understand how user input fits into this, or what needs to be parsed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489075354, "post_id": 42699175, "comment_id": 72521860, "body": "Are you <i>really</i> requiring your users to input decimal fractions of an hour instead of a number of minutes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1489075427, "post_id": 42699175, "comment_id": 72521907, "body": "What&#39;s a <i>&quot;floating integer&quot;</i>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489075547, "post_id": 42699175, "comment_id": 72521997, "body": "You already have three votes to close your question on the basis that it is &quot;unclear what you&#39;re asking&quot;. If you&#39;re quick to add some more detail then you may avoid your question being closed. Once it has been closed it will be very hard to resurrect."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1489076260, "last_edit_date": 1489076260, "creation_date": 1489075954, "answer_id": 42700206, "question_id": 42699175, "link": "https://stackoverflow.com/questions/42699175/converting-floating-point-to-hours-and-minutes-in-perl/42700206#42700206", "title": "Converting floating point to hours and minutes in Perl", "body": "<p>The following works with SQLite. It doesn't have the any DATETIME type, though. Unfortunately, you haven't specified how your table looked like and what the columns' types were, so I had to fabulate.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nuse DBI;\nuse Time::Piece;\n\nmy $db = 'DBI'-&gt;connect('dbi:SQLite:dbname=:memory:', \"\", \"\");\n$db-&gt;do('CREATE TABLE durations (start INT, duration REAL)');\n\nmy $insert = $db-&gt;prepare('INSERT INTO durations (start, duration) VALUES (?, ?)');\nmy $now = time;\nsay join \"\\t\", $now, localtime-&gt;cdate;\n$insert-&gt;execute($now, $_) for 0.5, 0.75, 3;\n\nmy $select = $db-&gt;prepare('SELECT start, duration FROM durations');\n$select-&gt;execute;\nwhile (my ($start, $hours) = $select-&gt;fetchrow_array) {\n    my $epoch = $start + $hours * 60 * 60;\n    say join \"\\t\", $epoch, localtime($epoch)-&gt;cdate;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6709494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c443a50d6b983a830962df170347dc?s=128&d=identicon&r=PG&f=1", "display_name": "tharris", "link": "https://stackoverflow.com/users/6709494/tharris"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "closed_date": 1489086974, "answer_count": 1, "score": -1, "last_activity_date": 1617273305, "creation_date": 1489073139, "last_edit_date": 1617273305, "question_id": 42699175, "link": "https://stackoverflow.com/questions/42699175/converting-floating-point-to-hours-and-minutes-in-perl", "closed_reason": "Needs details or clarity", "title": "Converting floating point to hours and minutes in Perl", "body": "\n<p>I am trying to calculate time based on a variable that is pulled from a MySQL database.</p>\n<p>The user enters a number to represent a duration in hours. I need my Perl script to check the epoch time that the event will end.</p>\n<p>Examples</p>\n<pre class=\"lang-none prettyprint-override\"><code>0.5  = 30 min\n0.75 = 45 min\n3    = 3 hours\n</code></pre>\n<p>I have found that using the following in the MySQL statement works, but then needs to be parsed. I need to make this work directly in Perl but cannot find a module/plugin that does this.</p>\n<pre class=\"lang-none prettyprint-override\"><code>SELECT SEC_TO_TIME(duration * 60 * 60) AS duration FROM database;\n</code></pre>\n<p>output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>+----------+\n| duration |\n+----------+\n| 01:00:00 | \n| 04:00:00 | \n| 02:00:00 | \n| 00:45:00 | \n+----------+\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1489061479, "post_id": 42695053, "comment_id": 72512147, "body": "Looks like there is the path to cmd missing in yout PATH variable: <code>Can&#39;t spawn &quot;cmd.exe&quot;: No such file or directory at Makefile.PL </code>"}, {"owner": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1489061666, "post_id": 42695053, "comment_id": 72512252, "body": "Could you please elaborate on this?"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1489061793, "post_id": 42695053, "comment_id": 72512338, "body": "try to execute <code>set PATH=%PATH%;C:\\windows\\system32</code> before you call <code>perl -MCPAN -e shell</code>"}, {"owner": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1489061977, "post_id": 42695053, "comment_id": 72512484, "body": "The issue is resolved but <code>Failed 5&#47;7 test programs. 6&#47;1808 subtests failed. dmake.exe:  Error code 130, while making &#39;test_dynamic&#39;   BBIRTH&#47;Win32-SerialPort-0.22.tar.gz   C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK</code> getting the above error"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489066693, "post_id": 42695053, "comment_id": 72515483, "body": "If you look more carefully you will see that it failed six tests out of 1,327 in seven test <i>programs</i>. Checking the <i>capantesters</i> results as it suggests shows that it hasn&#39;t passed on a relevant platform (Windows) since version 5.20.1. I would be inclined to force the installation and bear in mind that there may be minor issues with the module."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1489069007, "post_id": 42695053, "comment_id": 72517176, "body": "&quot;<i>I am using both Activeperl and strwaberry perl will that be a problem?</i>&quot; ... Yes ... Because <code>perl2bat</code> does NOT specify full path to <code>perl</code>, you have to come up with a way to keep the two installations separate. It is doable (I have umpteen Perl installs, and one I use for day-to-day stuff), but you have to know more about working on the command line than you do."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1489069449, "post_id": 42695053, "comment_id": 72517491, "body": "Also, working with the serial port on Windows is not that hard. If your needs are simple (as <a href=\"https://www.nu42.com/2015/08/playing-with-true-rng-hardware-random-number-generator.html\" rel=\"nofollow noreferrer\">mine were</a>)."}], "owner": {"reputation": 1100, "user_id": 1970427, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/18f92f7a3437a93370c95724e63ffa34?s=128&d=identicon&r=PG", "display_name": "Emman", "link": "https://stackoverflow.com/users/1970427/emman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489062805, "creation_date": 1489061401, "last_edit_date": 1489062805, "question_id": 42695053, "link": "https://stackoverflow.com/questions/42695053/win32-serialport-installation-error", "title": "Win32-SerialPort installation error", "body": "<p>When tried to install Win32-SerialPort in windows command prompt getting the following error, using activeperl 5.24.1 build(2402)64 bit, could anyone tell were it went wrong and the ways to insatll win32::SerialPort, I have both strawberry and active perl installed </p>\n\n<pre><code>cmd&gt; perl -MCPAN -e shell\n\ncpan&gt;  install Win32::SerialPort\nDatabase was generated on Thu, 09 Mar 2017 12:01:53 GMT\n\nRunning install for module 'Win32::SerialPort'\nFetching with LWP:\nhttp://cpan.strawberryperl.com/authors/id/B/BB/BBIRTH/Win32-SerialPort-0.22.tar.gz\nFetching with LWP:\nhttp://cpan.strawberryperl.com/authors/id/B/BB/BBIRTH/CHECKSUMS\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\B\\BB\\BBIRTH\\Win32-SerialPort-0.22.tar.gz ok\nScanning cache C:\\STRAWB~1\\cpan\\build for sizes\n............................................................................DONE\nConfiguring B/BB/BBIRTH/Win32-SerialPort-0.22.tar.gz with Makefile.PL\nCan't spawn \"cmd.exe\": No such file or directory at Makefile.PL line 35.\nDevice COM1 does not appear to exist. Testing impossible\nNo 'Makefile' created  BBIRTH/Win32-SerialPort-0.22.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- NOT OK\nStopping: 'install' failed for 'Win32::SerialPort'.\nFailed during this command:\n BBIRTH/Win32-SerialPort-0.22.tar.gz          : writemakefile NO -- No 'Makefile' created\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After suggestion from Jens I have set the path to <code>set PATH=%PATH%;C:\\windows\\system32</code></p>\n\n<p>Thanks for the suggestion \"cmd.exe\" error vanished but\nshows up with the following error now, any solutions? </p>\n\n<pre><code>Test Summary Report\n-------------------\nt/test1.t (Wstat: 256 Tests: 309 Failed: 1)\n  Failed test:  157\n  Non-zero exit status: 1\nt/test2.t (Wstat: 256 Tests: 146 Failed: 1)\n  Failed test:  27\n  Non-zero exit status: 1\nt/test3.t (Wstat: 256 Tests: 264 Failed: 1)\n  Failed test:  149\n  Non-zero exit status: 1\nt/test4.t (Wstat: 256 Tests: 518 Failed: 1)\n  Failed test:  366\n  Non-zero exit status: 1\nt/test7.t (Wstat: 512 Tests: 90 Failed: 2)\n  Failed tests:  21-22\n  Non-zero exit status: 2\nFiles=7, Tests=1808,  6 wallclock secs ( 0.27 usr +  0.05 sys =  0.31 CPU)\nResult: FAIL\nFailed 5/7 test programs. 6/1808 subtests failed.\ndmake.exe:  Error code 130, while making 'test_dynamic'\n  BBIRTH/Win32-SerialPort-0.22.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports BBIRTH/Win32-SerialPort-0.22.tar.gz\n</code></pre>\n\n<p>Also I am using both Activeperl and strwaberry perl will that be a problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1489055036, "post_id": 42692385, "comment_id": 72507785, "body": "Don&#39;t interpolate variables in SQL statements, use placeholders instead. <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">Here</a>&#39;s why."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1489055060, "post_id": 42692385, "comment_id": 72507801, "body": "There&#39;s no way that the code <code>&quot;select COUNT(*) ... and K.PARSE_PARAM=&#39;$parse_param&#39; and&quot;</code> can produce the string <code>select COUNT(*) ... and K.PARSE_PARAM=\\&#39;bkey=9781580536998\\&#39; and</code> as you claim."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489056845, "post_id": 42692562, "comment_id": 72509091, "body": "That&#39;s the same as using quotes, it just lets you put your string on more than one line. By default the heredoc interpolates, so it&#39;s like double quotes. Don&#39;t interpolate variables into your sql. Use placeholders like choroba said. You are opening yourself up for sql injection. Some mom will exploit it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489059121, "post_id": 42692562, "comment_id": 72510575, "body": "@simbabque: The table name has to be in the prepared statement; a placeholder won&#39;t work. I generally use <code>sprintf</code> together with <code>$dbh-&gt;quote_identifier</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1489059192, "post_id": 42692562, "comment_id": 72510627, "body": "@Borodin scroll the code to the side. I didn&#39;t mean the table name. ;-)"}], "tags": [], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "is_accepted": false, "score": -3, "last_activity_date": 1489054569, "creation_date": 1489054569, "answer_id": 42692562, "question_id": 42692385, "link": "https://stackoverflow.com/questions/42692385/why-does-the-perl-debugger-escape-single-quotes-in-strings/42692562#42692562", "title": "Why does the Perl debugger escape single quotes in strings?", "body": "<p>I think I found an answer by using the </p>\n\n<pre><code>&lt;&lt;EOF;\n</code></pre>\n\n<p>notation</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1489058535, "last_edit_date": 1489058535, "creation_date": 1489057302, "answer_id": 42693609, "question_id": 42692385, "link": "https://stackoverflow.com/questions/42692385/why-does-the-perl-debugger-escape-single-quotes-in-strings/42693609#42693609", "title": "Why does the Perl debugger escape single quotes in strings?", "body": "<p>That's just the way that the Perl debugger displays strings. It always displays strings within single quotes - so any single quotes within the string need to be escaped.</p>\n\n<p>But it's just a display issue. Your actual string is unchanged and should work correctly.</p>\n\n<p>I suspect you're guessing at what is causing some problem you are seeing. But you're guessing incorrectly. I think you need to go back a level and explain the actual problem that you're trying to solve. Put it in a new question.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1489088565, "last_edit_date": 1489088565, "creation_date": 1489065183, "answer_id": 42696361, "question_id": 42692385, "link": "https://stackoverflow.com/questions/42692385/why-does-the-perl-debugger-escape-single-quotes-in-strings/42696361#42696361", "title": "Why does the Perl debugger escape single quotes in strings?", "body": "<p>The answer to your question is that Perl does <em>not</em> randomly escape characters in your strings, it is just the debugger that adds backslashes to disambiguate strings that it displays. Whatever problem you're chasing it lies somewhere else</p>\n\n<p>You should use <em>placeholders</em> in your SQL string and supply the actual parameters in the call to <code>$sth-&gt;execute()</code></p>\n\n<p>There is no need to quote a column name of any sort when it is preceded by its table name, so <code>k.status</code> is fine</p>\n\n<p>It would look like this</p>\n\n<pre><code>my $search_sql = sprintf &lt;&lt;__END_SQL__, $dbh-&gt;quote_identfier($this-&gt;{KB_OBJECT_PORTFOLIOS});\nSELECT COUNT(*) AS count\nFROM %s AS k\nWHERE k.target_id         = ?,\nAND   k.target_service_id = ?,\nAND   k.parse_param       = ?,\nAND   k.threshold         = ?,\nAND   k.status            = ?\n__END_SQL__\n\nmy $sth = $dbh-&gt;prepare($search_sql);\n\n$sth-&gt;execute($target_id, $target_service_id, $parse_param, $threshold, 'WITHDRAWN');\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42696361, "answer_count": 3, "score": -3, "last_activity_date": 1489088565, "creation_date": 1489054115, "last_edit_date": 1489072782, "question_id": 42692385, "link": "https://stackoverflow.com/questions/42692385/why-does-the-perl-debugger-escape-single-quotes-in-strings", "title": "Why does the Perl debugger escape single quotes in strings?", "body": "<p>I have the following variable:</p>\n\n<pre><code>my $search_sql = \"select COUNT(*) as COUNT\n                  FROM $this-&gt;{KB_OBJECT_PORTFOLIOS} K\n                  WHERE K.TARGET_ID=$target_id\n                  AND K.TARGET_SERVICE_ID=$target_service_id\n                  and K.PARSE_PARAM='$parse_param'\n                  and K.THRESHOLD='$threshold'\n                  and K.`STATUS`='WITHDRAWN';\"\n</code></pre>\n\n<p>When I print this in the debugger I get:</p>\n\n<pre><code>select COUNT(*) ... and K.PARSE_PARAM=\\'bkey=9781580536998\\' and ...\n</code></pre>\n\n<p>But I expected to get:</p>\n\n<pre><code>select COUNT(*) ... and K.PARSE_PARAM='bkey=9781580536998' and ...\n</code></pre>\n\n<p>How can I unescape the single quotes?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1489053964, "post_id": 42692280, "comment_id": 72506999, "body": "Use <a href=\"https://regex101.com/r/G3hrsw/1\" rel=\"nofollow noreferrer\"><code>(?&lt;![a-zA-Z]=)https?[^?]*?\\.php</code></a>."}, {"owner": {"reputation": 9822, "user_id": 2018084, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/44a1fa8aae7cbaea8f09afe47b8819bf?s=128&d=identicon&r=PG", "display_name": "Juicy", "link": "https://stackoverflow.com/users/2018084/juicy"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1489054104, "post_id": 42692280, "comment_id": 72507102, "body": "@WiktorStribi\u017cew thank you, this is much better, but please see my updated question with the second example. I didn&#39;t notice but some are relative, ie without <code>http</code>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1489054252, "post_id": 42692280, "comment_id": 72507205, "body": "See <a href=\"https://regex101.com/r/G3hrsw/2\" rel=\"nofollow noreferrer\">regex101.com/r/G3hrsw/2</a>, the 2 inputs are not matched."}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1489054458, "post_id": 42692280, "comment_id": 72507368, "body": "as @WiktorStribi\u017cew said, but one question: do you need the whole URL, in case its a PHP-target or just the url-part and not the param-part?  because Wiktors Regex works just fine if you need only the url-part."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489057973, "post_id": 42692280, "comment_id": 72509828, "body": "Look at the URI module on CPAN and borrow the regex it uses to parse strings in the constructor."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1489062125, "post_id": 42692280, "comment_id": 72512576, "body": "@Juicy: Could you please clarify the requirements? Is my solution working for you? If not, why? Please post the code to remove any misunderstanding."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489063764, "post_id": 42692280, "comment_id": 72513611, "body": "@simbabque: <i>&quot;borrow the regex&quot;</i> Why not just use the module?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489065871, "post_id": 42692280, "comment_id": 72514948, "body": "@Borodin I don&#39;t see how it would help parse a log file. It&#39;s meant to represent and perform actions on URIs. That&#39;s not the use case here.  I also don&#39;t think the OP is actually using Perldoc Perl. Just something with PCRE and the question doesn&#39;t have that tag. There is no Perl code in it after all."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489077371, "post_id": 42692280, "comment_id": 72523392, "body": "@simbabque: <i>&quot; I also don&#39;t think the OP is actually using Perldoc Perl&quot;</i> I&#39;m not sure what that means. Are you saying that they may not be using Perl, but some other language with a Perl-like regex engine?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489077586, "post_id": 42692280, "comment_id": 72523549, "body": "@simbabque: <i>&quot;I don&#39;t see how it would help parse a log file&quot;</i> But you advocate excising and using the regex pattern from the module. What remains is mostly accessors to parts of the URL by object methods, which seems to me to be excellent practice. Were the OP to rip out a regex and squeeze it into working, they would still be unable to maintain their own code. What is your objection to <i>not</i> using the module, other than speculation that the OP may be using a completely different language?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1489077703, "post_id": 42692280, "comment_id": 72523636, "body": "@Juicy: What programming language are you using? Can you show us your code?"}], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1489057342, "creation_date": 1489057342, "answer_id": 42693620, "question_id": 42692280, "link": "https://stackoverflow.com/questions/42692280/regex-for-url-that-matches-a-format-but-exclude-parameters-that-match-that-url/42693620#42693620", "title": "Regex for URL that matches a format, but exclude parameters that match that URL format", "body": "<p>Instead of matching any character in the url - exclude the '?' and start from the beginning (^)</p>\n\n<pre><code>^https?[^\\?]*\\.php\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1489063670, "creation_date": 1489063670, "answer_id": 42695812, "question_id": 42692280, "link": "https://stackoverflow.com/questions/42692280/regex-for-url-that-matches-a-format-but-exclude-parameters-that-match-that-url/42695812#42695812", "title": "Regex for URL that matches a format, but exclude parameters that match that URL format", "body": "<p>Restricting yourself to a regex solution is never a good idea</p>\n\n<p>Use the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> module to handle URL strings conveniently</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse URI;\n\nwhile ( &lt;DATA&gt; ) {\n\n    chomp;\n\n    my $url = URI-&gt;new($_);\n\n    my $ok = $url-&gt;scheme =~ /\\Ahttps?\\z/ &amp;&amp; $url-&gt;path =~ /\\.php\\z/;\n\n    printf qq{URL \"%s\" %s\\n}, $url, $ok ? \"matches\" : \"doesn't match\";\n}\n\n__DATA__\nhttp://something/something.php\nhttp://hello/world.asp?redirect=http://something/else.php\nhttp://hello/blah.asp?abc=/blah/blah.php\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>URL \"http://something/something.php\" matches\nURL \"http://hello/world.asp?redirect=http://something/else.php\" doesn't match\nURL \"http://hello/blah.asp?abc=/blah/blah.php\" doesn't match\n</code></pre>\n"}], "owner": {"reputation": 9822, "user_id": 2018084, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/44a1fa8aae7cbaea8f09afe47b8819bf?s=128&d=identicon&r=PG", "display_name": "Juicy", "link": "https://stackoverflow.com/users/2018084/juicy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1489063670, "creation_date": 1489053839, "last_edit_date": 1489054064, "question_id": 42692280, "link": "https://stackoverflow.com/questions/42692280/regex-for-url-that-matches-a-format-but-exclude-parameters-that-match-that-url", "title": "Regex for URL that matches a format, but exclude parameters that match that URL format", "body": "<p>I'm trying to comb through some logs. I'm looking for logs that have the format <code>http://something/something.php</code>. I currently have this:</p>\n\n<pre><code>https?.*?\\.php\n</code></pre>\n\n<p>The problem with this is that some of my logs have URLs with URLs in their parameters, like this:</p>\n\n<pre><code>http://hello/world.asp?redirect=http://something/else.php\nhttp://hello/blah.asp?abc=/blah/blah.php\n</code></pre>\n\n<p>Some logs contain multiple parameters, and a URL can be in any, not necessarily at the end of the line. All those get matched as well. In the example above, the actual URL is a <code>.asp</code>, it just happens that it has a <code>.php</code> parameter.</p>\n\n<p>What kind of regex could I use to only match when the <em>actual</em> target is a <code>.php</code>, as opposed to one of its parameters being a URL with a <code>.php</code>.</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489057243, "post_id": 42692038, "comment_id": 72509343, "body": "You need to place your script somewhere where it can be found on the PATH. Typically that&#39;s the bin directory, where it will be installed into the right place. If you want to release to cpan or build a distribution that gets installed using cpan (but not upload to PAUSE) that&#39;s the way to go. Look at App::Cpanminus or other things in the App:: namespace for examples. You can browse their code on metacpan.org or their githubs. If you release to CPAN, please move your app into tie App:: namespace too."}, {"owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1489060148, "post_id": 42692038, "comment_id": 72511246, "body": "Thanks @simbabque I think I get it now. But what do you mean by a tie App:: namespace? In mojolicious my namespace is Alambic:: so how could I make it a different namespace when building? Would you have any pointer or resource for that? Thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1489061232, "post_id": 42692038, "comment_id": 72511989, "body": "I didn&#39;t say tie. In general it&#39;s frowned upon to claim a top level namespace on PAUSE, but seeing as your stuff is pretty large and has a unique name that should be ok. Disregard that."}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "is_accepted": true, "score": -1, "last_activity_date": 1490456576, "creation_date": 1490456576, "answer_id": 43018388, "question_id": 42692038, "link": "https://stackoverflow.com/questions/42692038/using-mojolicious-commands-in-system-cli/43018388#43018388", "title": "Using Mojolicious commands in system CLI", "body": "<p>I'll provide the complete answer here as a complement to @simbabque 's comment.</p>\n\n<p>So for a Mojolicious application, one has to make it installable (i.e. cpan-aware) in order to have the binaries copied to a directory in the path. More specifically for Alambic I had to:</p>\n\n<ol>\n<li>Setup <code>InstallablePaths</code> (I decided to go for <code>Module::Build</code>), see <a href=\"https://metacpan.org/pod/Mojolicious::Plugin::InstallablePaths\" rel=\"nofollow noreferrer\">the documentation for the module</a></li>\n<li>Create a <code>Build.PL</code> file</li>\n<li>Run the <code>Module::Build</code> sequence to build the module:</li>\n</ol>\n\n<blockquote>\n  <p>perl Build.PL<br>\n  ./Build manifest<br>\n  ./Build<br>\n  ./Build test<br>\n  ./Build install  </p>\n</blockquote>\n\n<p>During the install step, binaries are copied to a Perl-managed directory that is in the <code>$PATH</code>. After that step the <code>alambic</code> command was available as a command in my shell.</p>\n\n<p>Note: For one to have her/his own commands available on the CLI, the Mojolicious application has to <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Adding-commands-to-Mojolicious\" rel=\"nofollow noreferrer\">define one or more commands</a> of course.</p>\n"}], "owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 43018388, "answer_count": 1, "score": 2, "last_activity_date": 1490456576, "creation_date": 1489053204, "question_id": 42692038, "link": "https://stackoverflow.com/questions/42692038/using-mojolicious-commands-in-system-cli", "title": "Using Mojolicious commands in system CLI", "body": "<p>My app, <a href=\"https://bitbucket.org/BorisBaldassari/alambic\" rel=\"nofollow noreferrer\">Alambic</a>, uses The Great Mojolicious framework, and defines commands that can be executed with e.g. <code>$ script/alambic alambic init</code>.</p>\n\n<p>Now when I look at Joel Berger's <a href=\"https://metacpan.org/release/Galileo\" rel=\"nofollow noreferrer\">Galileo</a> and other great pieces of work, I find they have a <em>system</em> command that can be directly invoked in a shell, e.g. <code>$ galileo init</code>. I looked into the mojolicious doc but found nothing to do that for my app. Now I'm not even sure if it's Mojolicious or the Perl CPAN Build process that makes it possible.. Any hint would be greatly appreciated.</p>\n"}, {"tags": ["perl", "unix", "rhel"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1489054360, "last_edit_date": 1489054360, "creation_date": 1489053213, "answer_id": 42692041, "question_id": 42691773, "link": "https://stackoverflow.com/questions/42691773/how-to-specify-arguments-to-unix-command-in-perl/42692041#42692041", "title": "how to specify arguments to unix command in perl", "body": "<p>What's <code>$critproc</code>? Where's the <code>-f</code> you say is giving you problems? One might imagine you have some kind of escaping problem, but that shouldn't be the case if <code>$critproc</code> is <code>cgred</code> as you seem to imply.</p>\n\n<p>Given these problem, I'm just going to answer the general question.</p>\n\n<hr>\n\n<p>The following avoids the shell, so no need to build a shell command:</p>\n\n<pre><code>system(\"/usr/bin/pgrep\", \"-f\", $critproc);\ndie \"Killed by signal \".( $? &amp; 0x7F ) if $? &amp; 0x7F;\ndie \"Exited with error \".( $? &gt;&gt; 8 ) if ($? &gt;&gt; 8) &gt; 1;\nmy $found = !($? &gt;&gt; 8);\n</code></pre>\n\n<p>If you need a shell command, you can use String::ShellQuote's <code>shell_quote</code> to build it.</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $shell_cmd = shell_quote(\"/usr/bin/pgrep\", \"-f\", $critproc) . \" &gt;/dev/null\";\nsystem($shell_cmd);\ndie \"Killed by signal \".( $? &amp; 0x7F ) if $? &amp; 0x7F;\ndie \"Exited with error \".( $? &gt;&gt; 8 ) if ($? &gt;&gt; 8) &gt; 1;\nmy $found = !($? &gt;&gt; 8);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $shell_cmd = shell_quote(\"/usr/bin/pgrep\", \"-f\", $critproc);\nmy $pid = `$shell_cmd`;\ndie \"Killed by signal \".( $? &amp; 0x7F ) if $? &amp; 0x7F;\ndie \"Exited with error \".( $? &gt;&gt; 8 ) if ($? &gt;&gt; 8) &gt; 1;\nmy $found = !($? &gt;&gt; 8);\n</code></pre>\n"}], "owner": {"reputation": 40, "user_id": 5777725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-kSjPahzC7qE/AAAAAAAAAAI/AAAAAAAAAqg/FjjZx7SGHgs/photo.jpg?sz=128", "display_name": "Prashant Shete", "link": "https://stackoverflow.com/users/5777725/prashant-shete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489054360, "creation_date": 1489052549, "last_edit_date": 1489052776, "question_id": 42691773, "link": "https://stackoverflow.com/questions/42691773/how-to-specify-arguments-to-unix-command-in-perl", "title": "how to specify arguments to unix command in perl", "body": "<p>I am trying to find the processes which are not running through perl. It works for some processes using following code but not for cgred service. </p>\n\n<pre><code>foreach $critproc (@critarray)\n    {\n    #system(\"/usr/bin/pgrep $critproc\");\n    $var1=`/usr/bin/pgrep $critproc`;\n    print \"$var1\";\n    print \"exit status: $?\\n:$critproc\\n\";\n    if ($? != 0)\n            {\n            $probs=\"$probs $critproc,\";\n            $proccrit=1;\n            }\n    }\n</code></pre>\n\n<p>For <code>cgred</code> I have to specify <code>/usr/bin/pgrep -f cgred</code> to check whether any pid is associated with it or not.\nBut when I specify <code>-f</code> in above code it gives exit status <code>0</code> (<code>$?</code>) to all the processes even if its not running.</p>\n\n<p>Can you anyone tell me how to pass arguments to unix command in Perl.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489051686, "post_id": 42691399, "comment_id": 72505453, "body": "Why do you keep <code>18-41148</code>? It seems not to be duplicated"}, {"owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489051800, "post_id": 42691399, "comment_id": 72505520, "body": "Sorry, I want to keep unique strings. If one is duplicated I want to keep one of the duplicates"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489052290, "post_id": 42691399, "comment_id": 72505811, "body": "You could try use a Perl hash for exampl: <code>perl -nE &#39;chomp;chomp($seq=&lt;&gt;);$seqs{$seq}=$_; END {for (keys %seqs) {say ; say $seqs{$_}}}&#39; in.txt</code>"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 5, "creation_date": 1489053287, "post_id": 42691399, "comment_id": 72506544, "body": "What did you try, and what problems are you having? It would be better if you could show us some code so we can help with what&#39;s not working, instead of coming here and asking us to write your code."}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 1, "creation_date": 1489060625, "post_id": 42691399, "comment_id": 72511581, "body": "you can use <code>bioperl</code> for this <a href=\"http://search.cpan.org/~cjfields/BioPerl-1.007001/BioPerl.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~cjfields/BioPerl-1.007001/BioPerl.pm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "is_accepted": false, "score": 0, "last_activity_date": 1489062879, "creation_date": 1489062879, "answer_id": 42695551, "question_id": 42691399, "link": "https://stackoverflow.com/questions/42691399/filter-unique-lines/42695551#42695551", "title": "Filter unique lines", "body": "<p>if order is mandatory</p>\n\n<pre><code># Field are delimited by new line\nawk -F \"\\n\" '\n   BEGIN { \n      # Record is delimited by \"&gt;\"\n      RS = \"&gt;\"\n      }\n   # skip first \"record\" due to first \"&gt;\"\n   NR &gt; 1 {\n      # if string is not know, add it to \"Order\" list array\n      if ( ! (  $2 in L ) ) O[++a] = $2\n      # remember (last) peer label/string\n      L[$2] = $1\n      }\n   # after readiong the file\n   END{\n      # display each (last know) peer based on the order\n      for ( i=1; i&lt;=a; i++ ) printf( \"&gt;%s\\n%s\\n\", L[O[i]], O[i])\n      }\n  ' YourFile \n</code></pre>\n\n<p>if order is not mandatory</p>\n\n<pre><code>awk -F \"\\n\" 'BEGIN{RS=\"&gt;\"}NR&gt;1{L[$2]=$1}END{for (l in L) printf( \"&gt;%s\\n%s\\n\", L[l], l)}' YourFile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1489068430, "creation_date": 1489068430, "answer_id": 42697476, "question_id": 42691399, "link": "https://stackoverflow.com/questions/42691399/filter-unique-lines/42697476#42697476", "title": "Filter unique lines", "body": "<pre><code>$ awk '{if(NR%2) p=$0; else a[$0]=p}END{for(i in a)print a[i] ORS i}' file\n&gt;18-41148\nTCTTAACCCGGACCAGAAACTA\n&gt;32-24116\nTAGCATATCGAGCCTGAGAACA\n&gt;1-242\nAGGTTCCGGATAAGTAAGAGCC\n&gt;43-16054\nGTCCCACTCCGTAGATCTGTTC\n&gt;42-16312\nTGATACGGATGTTATACGCAGC\n</code></pre>\n\n<p>Explained:</p>\n\n<pre><code>{\n    if(NR%2)             # every first (of 2) line in p\n        p=$0\n    else                 # every second line is the hash key\n        a[$0]=p\n}\nEND{\n    for(i in a)          # output every unique key and it's header\n        print a[i] ORS i\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "is_accepted": false, "score": 0, "last_activity_date": 1505833256, "last_edit_date": 1505833256, "creation_date": 1490035366, "answer_id": 42911548, "question_id": 42691399, "link": "https://stackoverflow.com/questions/42691399/filter-unique-lines/42911548#42911548", "title": "Filter unique lines", "body": "<p>Here's a quick one-line awk solution for you. It should be more immediate than the other answers because it runs line by line rather than queuing the data (and looping through it) until the end:</p>\n\n<pre><code>awk 'NR % 2 == 0 &amp;&amp; !seen[$0]++ { print last; print } { last = $0 }' file\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>NR % 2 == 0</code> runs only on even numbered records (lines, <code>NR</code>)</li>\n<li><code>!seen[$0]++</code> stores and increments values and returns true only when there were no values in the <code>seen[]</code> hash (<code>!0</code> is 1, <code>!1</code> is 0, <code>!2</code> is 0, etc.)</li>\n<li>(Skipping to the end) <code>last</code> is set to the value of each line after we're otherwise done with it</li>\n<li><code>{ print last; print }</code> will print <code>last</code> (the header) and then the current line (gene code)</li>\n</ul>\n\n<p>Note: while this preserves the original order, it shows the <em>first</em> uniquely seen instance while the expected output showed the <em>final</em> uniquely seen instance:</p>\n\n<pre><code>&gt;17-46151\nAGGTTCCGGATAAGTAAGAGCC\n&gt;18-41148\nTCTTAACCCGGACCAGAAACTA\n&gt;43-16054\nGTCCCACTCCGTAGATCTGTTC\n&gt;32-24116\nTAGCATATCGAGCCTGAGAACA\n&gt;42-16312\nTGATACGGATGTTATACGCAGC\n</code></pre>\n\n<p>If you want the final uniquely seen instance, you can reverse the file before passing to awk and then reverse it back afterwards:</p>\n\n<pre><code>tac file |awk \u2026 |tac\n</code></pre>\n"}], "owner": {"reputation": 1791, "user_id": 2300940, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4e0c6ced7160325289bac815c9c4fb8?s=128&d=identicon&r=PG", "display_name": "user2300940", "link": "https://stackoverflow.com/users/2300940/user2300940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1505833256, "creation_date": 1489051468, "last_edit_date": 1489051763, "question_id": 42691399, "link": "https://stackoverflow.com/questions/42691399/filter-unique-lines", "title": "Filter unique lines", "body": "<p>I have a tile type called fasta which contains a header \"> 12122\" followed by a string. I would like to remove duplicated strings in the file and keep only one of the duplicated string (same which) and the corresponding header.<br>\nIn the example below the AGGTTCCGGATAAGTAAGAGCC is duplicated</p>\n\n<p>in:</p>\n\n<pre><code>&gt;17-46151\nAGGTTCCGGATAAGTAAGAGCC\n&gt;1-242\nAGGTTCCGGATAAGTAAGAGCC\n&gt;18-41148\nTCTTAACCCGGACCAGAAACTA\n&gt;43-16054\nGTCCCACTCCGTAGATCTGTTC\n&gt;32-24116\nTAGCATATCGAGCCTGAGAACA\n&gt;42-16312\nTGATACGGATGTTATACGCAGC\n</code></pre>\n\n<p>out: </p>\n\n<pre><code>&gt;1-242\nAGGTTCCGGATAAGTAAGAGCC\n&gt;18-41148\nTCTTAACCCGGACCAGAAACTA\n&gt;43-16054\nGTCCCACTCCGTAGATCTGTTC\n&gt;32-24116\nTAGCATATCGAGCCTGAGAACA\n&gt;42-16312\nTGATACGGATGTTATACGCAGC\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1489050706, "post_id": 42691006, "comment_id": 72504793, "body": "More information on complex structures can be found in <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\"><code>perldsc</code></a>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1489050889, "post_id": 42691006, "comment_id": 72504919, "body": "A hash is like an array, but rather than being indexed by a number like <code>0...10</code> it is indexed by a key which is more like a string. A hash of hashes is like a 2-D array, but instead of two numeric indices, it is indexed by two keys (or strings)."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1489051861, "post_id": 42691070, "comment_id": 72505557, "body": "It appears now more clear to me. I thought the &quot;++ &quot;sign added 1 to the value of the key 1 (or 2). Since they could be strings, I couldn&#39;t understant how it was possible. Actually he just initialized a hash (which was previously empty) with two keys in ordrer to add 1 to that null value everytime an particular condition is verified.  Thank you for yout help. :)"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 0, "creation_date": 1489052794, "post_id": 42691070, "comment_id": 72506175, "body": "It is called autovivification (see <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\">effectiveperlprogramming.com/2011/04/&hellip;</a>). $Hash is a hash. The value $Hash{Key1} is reference to a newly created hash. The value $Hash{Key1}-&gt;{Key2} (the -&gt; is optional) will be the number that will be incremented."}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": -1, "last_activity_date": 1489055268, "last_edit_date": 1489055268, "creation_date": 1489050544, "answer_id": 42691070, "question_id": 42691006, "link": "https://stackoverflow.com/questions/42691006/perl-code-what-does-it-do-hash-of-hashes/42691070#42691070", "title": "Perl code ! What does it do (Hash of hashes)?", "body": "<p><code>%Hash</code> is a hash of hashes.</p>\n\n<p>That codes add <code>1</code> to the value of <code>$Hash{Key1}{Key2}</code> which is the value of a hash element.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1489052817, "creation_date": 1489052817, "answer_id": 42691885, "question_id": 42691006, "link": "https://stackoverflow.com/questions/42691006/perl-code-what-does-it-do-hash-of-hashes/42691885#42691885", "title": "Perl code ! What does it do (Hash of hashes)?", "body": "<p><code>%genotypes_parent2_array</code> is a hash (so that's not a very good name for the variable!) Each value in the hash is a hash reference. So effectively you have a hash of hashes.</p>\n\n<p><code>$genotypes_parent2_array{$real_genotype}</code> looks up the key <code>$real_genotype</code> in the hash. And that value is (as we said above) a hash reference. If you have a hash reference, then you can look up values in the referenced hash using an arrow. So we can get to a value in the second-level hash using code like this:</p>\n\n<pre><code>$genotypes_parent2_array{$real_genotype}-&gt;{$individu_depth}\n</code></pre>\n\n<p>However, Perl has a nice piece of syntactic sugar. When you have two pairs of \"look-up brackets\" next to each other (as we have here) you can omit the arrow. So you can get exactly the same effect with:</p>\n\n<pre><code>$genotypes_parent2_array{$real_genotype}{$individu_depth}\n</code></pre>\n\n<p>And that's what we have here. We look up the key <code>$real_genotype</code> in the hash <code>%genotypes_parent2_array</code>. This gives us a hash reference. We then look up the key <code>$individu_depth</code> in the referenced array and that gives us the value in the second-level hash. Your code then increments that value.</p>\n\n<p>The manual page <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldoc perldsc</a> is a good introduction to using references to build complex data structures in Perl. In addition, I find <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> very useful for showing what a complex data structure looks like.</p>\n"}], "owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42691070, "answer_count": 2, "score": 0, "last_activity_date": 1489055268, "creation_date": 1489050371, "last_edit_date": 1489051066, "question_id": 42691006, "link": "https://stackoverflow.com/questions/42691006/perl-code-what-does-it-do-hash-of-hashes", "title": "Perl code ! What does it do (Hash of hashes)?", "body": "<p>I'm currently working on some code written by the previous internship student. I'm not familiar to Perl so I have some problems in understanding what his code actually do. So it looks like: </p>\n\n<pre><code>$Hash{Key1}{Key2}++; \n</code></pre>\n\n<p>The original code was: </p>\n\n<pre><code>$genotypes_parent2_array{$real_genotype}{$individu_depth}++; \n</code></pre>\n\n<p>I use to see hashes in this form $Hash{Key} in order to get the value but I struggle with this one. Any help out there ? \nThanks!</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1489046834, "post_id": 42689781, "comment_id": 72502453, "body": "Try <code>my @screens = keys %$records</code>"}, {"owner": {"reputation": 5509, "user_id": 55111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a33e543897ba8a58877f290ef74db204?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/55111/julien"}, "edited": false, "score": 0, "creation_date": 1489113619, "post_id": 42689781, "comment_id": 72540081, "body": "There is a code sample available for Perl: <a href=\"https://browshot.com/api/documentation/code/perl/browshot_screenshot_list.pl\" rel=\"nofollow noreferrer\">browshot.com/api/documentation/code/perl/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1489046902, "post_id": 42689869, "comment_id": 72502489, "body": "Or all at once: <code>$records-&gt;{$id}{screenshot_url}</code>"}, {"owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1489048005, "post_id": 42689869, "comment_id": 72503072, "body": "thanks ikegami, the solution worked to print out one value, how would I then iterate over each value from the json?"}, {"owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "edited": false, "score": 0, "creation_date": 1489048280, "post_id": 42689869, "comment_id": 72503269, "body": "Sorry User error - the real time JSON only had one array thank you that worked perfectly!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1489046843, "creation_date": 1489046843, "answer_id": 42689869, "question_id": 42689781, "link": "https://stackoverflow.com/questions/42689781/decode-json-in-perl/42689869#42689869", "title": "Decode JSON in perl", "body": "<p>To iterate over a hash, one normally iterates over the keys returned by <code>keys</code>.</p>\n\n<pre><code>for my $id (keys(%$records)) {\n   my $record = $records-&gt;{$id};\n   say $record-&gt;{screenshot_url};\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5938535, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156559718960427/picture?type=large", "display_name": "Drew Wentzel", "link": "https://stackoverflow.com/users/5938535/drew-wentzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 42689869, "answer_count": 1, "score": 0, "last_activity_date": 1489113743, "creation_date": 1489046529, "last_edit_date": 1489113743, "question_id": 42689781, "link": "https://stackoverflow.com/questions/42689781/decode-json-in-perl", "title": "Decode JSON in perl", "body": "<p>I am trying to decode a simple JSON string in perl but it doesn't conform to JSON that I am used to.</p>\n\n<p>The JSON is for Browshot and looks like:</p>\n\n<pre><code>{\n  \"52967\":{\n    \"priority\":\"1\",\n    \"status\":\"finished\",\n    \"screenshot_url\":\"https://www.browshot.com/screenshot/image/52967?scale=1&amp;key=MY_KEY\",\n    \"id\":\"52967\",\n    \"url\": \"http://www.google.com/\",\n    \"size\": \"screen\",\n    \"width\": \"1024\",\n    \"height\": \"768\",\n    \"request_time\": \"1312106111\",\n    \"started\": \"1312258803994\",\n    \"load\": \"1312258829461\",\n    \"content\": \"1312258829661\",\n    \"finished\": \"1312258829681\",\n    \"instance_id\": \"10\",\n    \"response_code\": \"200\",\n    \"final_url\": \"http://www.google.com/\",\n    \"content_type\":\"text/html\",\n    \"scale\": \"1\",\n    \"cost\": \"0\",\n    \"referer\": \"\",\n    \"post_data\": \"\",\n    \"cookie\": \"\",\n    \"delay\": \"5\",\n    \"flash_delay\": \"10\",\n    \"script\": \"\",\n    \"shared_url\": \"\"\n  },\n  \"52969\":{\n    \"priority\":\"1\",\n    \"status\":\"finished\",\n    \"screenshot_url\":\"https://www.browshot.com/screenshot/image/52969?scale=1&amp;key=MY_KEY\",\n    \"id\":\"52969\",\n    \"url\": \"http://www.google.org/\",\n    \"size\": \"screen\",\n    \"width\": 1024,\n    \"height\": \"768\",\n    \"request_time\": \"1312106111\",\n    \"started\": \"1312258803994\",\n    \"load\": \"1312258829461\",\n    \"content\": \"1312258829661\",\n    \"finished\": \"1312258829681\",\n    \"instance_id\": \"10\",\n    \"response_code\": \"200\",\n    \"final_url\": \"http://www.google.org/\",\n    \"content_type\":\"text/html\",\n    \"scale\": \"1\",\n    \"cost\": \"0\",\n    \"referer\": \"\",\n    \"post_data\": \"\",\n    \"cookie\": \"\",\n    \"delay\": \"5\",\n    \"flash_delay\": \"10\",\n    \"script\": \"\",\n    \"shared_url\": \"\"\n  },\n  \"52971\":{\n    \"priority\":\"1\",\n    \"status\":\"processing\",\n    \"screenshot_url\":\"https://www.browshot.com/screenshot/image/52971?scale=1&amp;key=MY_KEY\",\n    \"id\":\"52971\",\n    \"url\": \"http://www.google.de/\",\n    \"size\": \"screen\",\n    \"width\": \"1024\",\n    \"height\": \"768\",\n    \"request_time\": \"1312106111\",\n    \"started\": \"1312258803994\",\n    \"load\": \"1312258829461\",\n    \"content\": \"1312258829661\",\n    \"finished\": \"1312258829681\",\n    \"instance_id\": \"10\",\n    \"response_code\": \"200\",\n    \"final_url\": \"http://www.google.de/\",\n    \"content_type\":\"text/html\",\n    \"scale\": \"1\",\n    \"cost\": \"0\",\n    \"referer\": \"\",\n    \"post_data\": \"\",\n    \"cookie\": \"\",\n    \"delay\": \"5\",\n    \"flash_delay\": \"10\",\n    \"script\": \"\",\n    \"shared_url\": \"\"\n  },\n  \"52970\":{\n    \"priority\":\"1\",\n    \"status\":\"finished\",\n    \"screenshot_url\":\"https://www.browshot.com/screenshot/image/52970?scale=1&amp;key=MY_KEY\",\n    \"id\":\"52970\",\n    \"url\": \"http://www.google.fr/\",\n    \"size\": \"screen\",\n    \"width\": \"1024\",\n    \"height\": \"768\",\n    \"request_time\": \"1312106111\",\n    \"started\": \"1312258803994\",\n    \"load\": \"1312258829461\",\n    \"content\": \"1312258829661\",\n    \"finished\": \"1312258829681\",\n    \"instance_id\": \"10\",\n    \"response_code\": \"200\",\n    \"final_url\": \"http://www.google.fr/\",\n    \"content_type\":\"text/html\",\n    \"scale\": \"1\",\n    \"cost\": \"0\",\n    \"referer\": \"\",\n    \"post_data\": \"\",\n    \"cookie\": \"\",\n    \"delay\": \"5\",\n    \"flash_delay\": \"10\",\n    \"script\": \"\",\n    \"shared_url\": \"\"\n  },\n  \"52968\":{\n    \"priority\":\"1\",\n    \"status\":\"finished\",\n    \"screenshot_url\":\"https://www.browshot.com/screenshot/image/52968?scale=1&amp;key=MY_KEY\",\n    \"id\":\"52968\",\n    \"url\": \"http://www.google.com/\",\n    \"size\": \"screen\",\n    \"width\": \"1024\",\n    \"height\": \"768\",\n    \"request_time\": \"1312106111\",\n    \"started\": \"1312258803994\",\n    \"load\": \"1312258829461\",\n    \"content\": \"1312258829661\",\n    \"finished\": \"1312258829681\",\n    \"instance_id\": \"10\",\n    \"response_code\": \"200\",\n    \"final_url\": \"http://www.google.com/\",\n    \"content_type\":\"text/html\",\n    \"scale\": \"1\",\n    \"cost\": \"0\",\n    \"referer\": \"\",\n    \"post_data\": \"\",\n    \"cookie\": \"\",\n    \"delay\": \"5\",\n    \"flash_delay\": \"10\",\n    \"script\": \"\",\n    \"shared_url\": \"\"\n  }\n}\n</code></pre>\n\n<p>Normally I would use:</p>\n\n<pre><code>my $records = decode_json($JSON);\n\nmy @screens = @{ $records };\nforeach my $f ( @screens ) {\n  print \"$f-&gt;{'screenshot_url'}|\\n\";\n}\n</code></pre>\n\n<p>But this obviously does not work.</p>\n\n<p>I'm sure it's simple but I must be missing the mark here and cannot find a solution, all help appreciated.</p>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1489042989, "post_id": 42688500, "comment_id": 72500422, "body": "You can sort on the fly, when you use hashes, to generate lists that you may need to store or iterate over. Did you try with <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>?  There are many posts around SO showing how to do more complex sorting, by different parts of complex data structures, by complex and/or multiple criteria, etc."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1489056420, "post_id": 42689315, "comment_id": 72508802, "body": "Thanks for the help sir."}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1489046564, "last_edit_date": 1489046564, "creation_date": 1489044910, "answer_id": 42689315, "question_id": 42688500, "link": "https://stackoverflow.com/questions/42688500/sort-a-nested-hash-based-on-one-of-the-values-of-the-of-the-final-hash/42689315#42689315", "title": "Sort a nested hash based on one of the values of the of the final hash", "body": "<p>Hash keys are not guaranteed to be stored in any specific order but you can create a dedicated index array (a hash of array references in your case), which would store the keys ordered as desired:</p>\n\n<pre><code>my %sorted;\nforeach my $key1 (keys %hash) {\n    $sorted{$key1} = [ \n        sort { \n            $hash{$key1}{$a}{\"line\"} \n            &lt;=&gt; \n            $hash{$key1}{$b}{\"line\"} \n        } keys $hash{$key1} \n    ];\n}\n</code></pre>\n\n<p>Then you may use the <code>@{$sorted{$key1}}</code> index array this way, for instance:</p>\n\n<pre><code>foreach my $key1 (keys %hash) {\n    foreach my $key2 (@{$sorted{$key1}}) {\n        print \"$key1.$key2: \"\n            .\"line: $hash{$key1}{$key2}{'line'}, \"\n            .\"page: $hash{$key1}{$key2}{'page'}\\n\";\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>name2.b: line: 12, page: 134\nname2.a: line: 43, page: 112\nname2.c: line: 55, page: 112\nname1.c: line: 1, page: 112\nname1.a: line: 4, page: 112\nname1.b: line: 6, page: 134\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1489056357, "post_id": 42689740, "comment_id": 72508747, "body": "Thanks. This helps very much."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1489046377, "creation_date": 1489046377, "answer_id": 42689740, "question_id": 42688500, "link": "https://stackoverflow.com/questions/42688500/sort-a-nested-hash-based-on-one-of-the-values-of-the-of-the-final-hash/42689740#42689740", "title": "Sort a nested hash based on one of the values of the of the final hash", "body": "<p>Only arrays can store a set of values in a specific order</p>\n\n<p>I think this is what you're looking for. For each value of <code>$key1</code> it stores the sorted values of <code>$key2</code> in an array and prints them</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %hash = (\n    name1 =&gt; {\n        a =&gt; { line =&gt; 4, page =&gt; 112 },\n        b =&gt; { line =&gt; 6, page =&gt; 134 },\n        c =&gt; { line =&gt; 1, page =&gt; 112 },\n    },\n    name2 =&gt; {\n        a =&gt; { line =&gt; 43, page =&gt; 112 },\n        b =&gt; { line =&gt; 12, page =&gt; 134 },\n        c =&gt; { line =&gt; 55, page =&gt; 112 },\n    },\n);\n\nfor my $key1 ( sort keys %hash ) {\n    my $h2 = $hash{$key1};\n    my @key2 = sort { $h2-&gt;{$a}{line} &lt;=&gt; $h2-&gt;{$b}{line} } keys %$h2;\n    print \"$key1: @key2\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>name1: c a b\nname2: b a c\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 42689740, "answer_count": 2, "score": 1, "last_activity_date": 1489046564, "creation_date": 1489041901, "last_edit_date": 1489045766, "question_id": 42688500, "link": "https://stackoverflow.com/questions/42688500/sort-a-nested-hash-based-on-one-of-the-values-of-the-of-the-final-hash", "title": "Sort a nested hash based on one of the values of the of the final hash", "body": "<p>I have a nested hash as follows</p>\n\n<pre><code>$hash{$key1}{$key2}{$key3} = value;\n</code></pre>\n\n\n\n<pre><code>my %hash = (\n    name1 =&gt; {\n        a =&gt; { line =&gt; 4, page =&gt; 112 },\n        b =&gt; { line =&gt; 6, page =&gt; 134 },\n        c =&gt; { line =&gt; 1, page =&gt; 112 }\n    },\n    name2 =&gt; {\n        a =&gt; { line =&gt; 43, page =&gt; 112 },\n        b =&gt; { line =&gt; 12, page =&gt; 134 },\n        c =&gt; { line =&gt; 55, page =&gt; 112 }\n    }\n)\n</code></pre>\n\n<p>I want to sort <code>key2</code> according to ascending values in <code>line</code>. i.e. <code>name1</code> should have <code>key2</code> arranged as <code>c</code>, <code>a</code>, <code>b</code> and <code>name2</code> should have the order <code>b</code>, <code>a</code>, <code>c</code>.</p>\n\n<p>I know hashes always give random pairs, but is there any way to do a systematic arrangement of the values to get sorted keys?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "edited": false, "score": 0, "creation_date": 1489040022, "post_id": 42688019, "comment_id": 72499048, "body": "You probably need to show us more of the code, particularly the contents of <code>DB.pm</code>. Does the <code>DB</code> package actually contain a <code>connectToDB</code> subroutine?"}, {"owner": {"reputation": 57, "user_id": 6204420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e76a42b066e0dce979de556eddec68d?s=128&d=identicon&r=PG&f=1", "display_name": "sairanga talari", "link": "https://stackoverflow.com/users/6204420/sairanga-talari"}, "reply_to_user": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "edited": false, "score": 0, "creation_date": 1489040479, "post_id": 42688019, "comment_id": 72499237, "body": "yes.it contains.. i will add the screenshot of DB.pm"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1489040621, "post_id": 42688019, "comment_id": 72499294, "body": "Don&#39;t add a screenshot of your code; add it as code! And don&#39;t ever post database usernames and passwords in public places. BTW, you need to change your password immediately."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1489040836, "post_id": 42688019, "comment_id": 72499402, "body": "You probably should <code>use strict; use warnings;</code> at least"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1489041308, "post_id": 42688019, "comment_id": 72499613, "body": "BTW. Your code is for <code>DB.pm</code> is missing <code>1;</code> at the end."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1489043317, "post_id": 42688019, "comment_id": 72500565, "body": "As an aside: Don&#39;t call your module &quot;DB&quot;. That name is used by the Perl debugger: <a href=\"https://metacpan.org/pod/distribution/perl/lib/DB.pm\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/perl/lib/DB.pm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6204420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e76a42b066e0dce979de556eddec68d?s=128&d=identicon&r=PG&f=1", "display_name": "sairanga talari", "link": "https://stackoverflow.com/users/6204420/sairanga-talari"}, "edited": false, "score": 0, "creation_date": 1489061142, "post_id": 42688362, "comment_id": 72511937, "body": "i have changed module name  to some other . Now getting output. Thanks everyone."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 57, "user_id": 6204420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e76a42b066e0dce979de556eddec68d?s=128&d=identicon&r=PG&f=1", "display_name": "sairanga talari", "link": "https://stackoverflow.com/users/6204420/sairanga-talari"}, "edited": false, "score": 0, "creation_date": 1489610913, "post_id": 42688362, "comment_id": 72752535, "body": "Thanks a lot to <a href=\"http://stackoverflow.com/users/589924/ikegami\">ikegami</a> for a number of comments and edits."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1603678324, "last_edit_date": 1603678324, "creation_date": 1489041349, "answer_id": 42688362, "question_id": 42688019, "link": "https://stackoverflow.com/questions/42688019/how-to-use-one-module-in-another-module-in-perl/42688362#42688362", "title": "How to use one module in another module in perl?", "body": "<p>The direct error in the shown code is that inside <code>qw()</code> you need <em>names</em>. The <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use pragma</a></p>\n<blockquote>\n<p>Imports some <strong>semantics</strong> into the current package from the named module</p>\n</blockquote>\n<p>(my emphasis). The &quot;connectToDB()&quot;, with parentheses, is not the correct <em>name</em> for the subroutine. The error message simply says that it didn't find such a sub.</p>\n<p>So just drop the parens, <code>use DB qw(connectToDB);</code>.</p>\n<hr />\n<p>The code for the package was added to the question and here are some comments.</p>\n<p>A similar fix is needed with your <code>@EXPORT</code>: you need the subroutine <em>names</em> (lose <code>&amp;</code>).</p>\n<p>Perhaps more importantly, you defined the sub using <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">prototypes</a>. Your sub is consistent with the prototype you use so I'll assume that it's done on purpose.</p>\n<p>This is a very advanced (mis?)feature, which is very different from similar looking devices in other languages and is normally not needed. Chances are that you expect wrong things from prototypes. Go search for it. I'd advise against.</p>\n<p>A side note: the prototype-related <code>()</code> and <code>&amp;</code> are <em>not</em> a part of the subroutine name.</p>\n<p>The last executed statement that returns in a module <em>must</em> return true, or code won't compile. The convention to ensure this is to put <code>1;</code> at the end of the package.</p>\n<p>Finally, you shouldn't name the module <code>DB</code> as that namespace is used internally by Perl. Also, such a generic name is just not good for a module -- it makes it easy to run into conflicts.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6878000, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EoMR9J9M8b8/AAAAAAAAAAI/AAAAAAAAAGQ/v2sV-XtiJkQ/photo.jpg?sz=128", "display_name": "Hema Mahadev", "link": "https://stackoverflow.com/users/6878000/hema-mahadev"}, "is_accepted": false, "score": 0, "last_activity_date": 1489053438, "last_edit_date": 1489053438, "creation_date": 1489052761, "answer_id": 42691858, "question_id": 42688019, "link": "https://stackoverflow.com/questions/42688019/how-to-use-one-module-in-another-module-in-perl/42691858#42691858", "title": "How to use one module in another module in perl?", "body": "<p>use DB qw(connectToDB);</p>\n\n<p>my <code>$connection=DB-&gt;connectToDB();</code></p>\n\n<p>or</p>\n\n<p>if you have defined a constructor \"new\" in DB.pm module then</p>\n\n<p>my <code>$connection=DB-&gt;new();</code></p>\n\n<p>my <code>$result = $connection-&gt;connectToDB();</code></p>\n"}], "owner": {"reputation": 57, "user_id": 6204420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e76a42b066e0dce979de556eddec68d?s=128&d=identicon&r=PG&f=1", "display_name": "sairanga talari", "link": "https://stackoverflow.com/users/6204420/sairanga-talari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 42688362, "answer_count": 2, "score": 0, "last_activity_date": 1603678324, "creation_date": 1489039915, "last_edit_date": 1489040714, "question_id": 42688019, "link": "https://stackoverflow.com/questions/42688019/how-to-use-one-module-in-another-module-in-perl", "title": "How to use one module in another module in perl?", "body": "<p>Iam writing a perl script ,in which iam using a module <strong>utils.pm</strong> and in utils.pm iam using another module <strong>DB.pm</strong> in which i have a sub routine <strong>connetToDB()</strong>.</p>\n\n<p>in utils.pm iam writing </p>\n\n<pre><code>use DB qw (connectToDB());\n</code></pre>\n\n<p>and below iam calling that subroutine as </p>\n\n<pre><code>my $connection=DB::connectToDB();         (This is line 30)\n</code></pre>\n\n<p>it is giving an error like follows. Can someone pls help?</p>\n\n<p><strong>Undefined subroutine &amp;DB::connectToDB called at utils.pm line 30.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/yy0BE.png\" rel=\"nofollow noreferrer\">you can see the DB.pm code here</a></p>\n"}]