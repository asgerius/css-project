[{"tags": ["perl", "file", "sorting"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 2, "creation_date": 1521674742, "post_id": 49418081, "comment_id": 85837958, "body": "Use a string length function for the comparison step of the sort function."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1521674884, "post_id": 49418081, "comment_id": 85838001, "body": "<a href=\"https://stackoverflow.com/questions/5917576/sort-a-text-file-by-line-length-including-spaces\" title=\"sort a text file by line length including spaces\">stackoverflow.com/questions/5917576/&hellip;</a> (there&#39;s a perl solution near the bottom)"}, {"owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1521675023, "post_id": 49418081, "comment_id": 85838052, "body": "@DaveS im confused on this could you go into more detail"}, {"owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1521675041, "post_id": 49418081, "comment_id": 85838056, "body": "@zzxyz You talking about the one line thing that has perl in it?"}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1521675176, "post_id": 49418081, "comment_id": 85838094, "body": "@yibs <a href=\"https://stackoverflow.com/a/46437608/58074\">stackoverflow.com/a/46437608/58074</a> or <a href=\"https://stackoverflow.com/a/40786477/58074\">stackoverflow.com/a/40786477/58074</a> yes"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1521675289, "post_id": 49418081, "comment_id": 85838121, "body": "Yeah, It does what @DaveS  was suggesting."}, {"owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1521675914, "post_id": 49418081, "comment_id": 85838320, "body": "@zzxyz im doing an assignment where I have to use a subroutine, i dont think it will count if i do that"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1521676676, "post_id": 49418081, "comment_id": 85838518, "body": "@yibs - Well, there are subroutines.  2 that you&#39;ve created and are being called by &#39;the framework&#39;, and one that you&#39;ve both created AND are calling implicitly in the call to <code>sort</code>.  But it probably won&#39;t count if you have no idea how it works :)"}, {"owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1521676973, "post_id": 49418081, "comment_id": 85838611, "body": "@zzxyz yea sorry im very new to this. All i was able to do is put each line into an array, so array index 1 would have the first line and so on. Im trying to figure out how to sort it so shortest line is in index 1 and longest is the last , including whitespaces :("}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1521711662, "post_id": 49419196, "comment_id": 85851265, "body": "No need for all that <code>push</code>ing \u263a <code>perl -e &#39;print sort { length $a &lt;=&gt; length $b } &lt;&gt;&#39; file</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1521733415, "post_id": 49419196, "comment_id": 85867527, "body": "@haukex - Yeah, I deliberately picked a more....explicit?  solution.  Apparently barely slower, too, which I guess makes sense."}], "tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1521682842, "creation_date": 1521682842, "answer_id": 49419196, "question_id": 49418081, "link": "https://stackoverflow.com/questions/49418081/how-to-sort-file-based-on-line-length-including-whitespace-perl/49419196#49419196", "title": "How to sort file based on line length including whitespace Perl", "body": "<p>This (from one of the existing \"duplicate\" answers):</p>\n\n<pre><code>perl -ne 'push @a, $_; END{ print sort { length $a &lt;=&gt; length $b } @a }' file\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nmy @arr;\n\nsub compareLength\n{\n        length $::a &lt;=&gt; length $::b;\n}\n\nwhile (&lt;&gt;)\n{\n        push @arr, \"$_\";\n}\nprint (sort {compareLength} @arr);\n</code></pre>\n\n<p>Are basically the exact same thing.  <code>-n</code> creates the <code>while(&lt;&gt;)</code>, <code>END</code> puts stuff after it, and the comparison function is anonymous (vs named) and inline.  (But it still exists and is still a subroutine).</p>\n\n<p>Oh, and I renamed <code>@a</code> to <code>@arr</code>, because I don't like two different variables both named <code>a</code> (<code>@a</code> and <code>$a</code>)</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "closed_date": 1521722336, "answer_count": 1, "score": -1, "last_activity_date": 1521682842, "creation_date": 1521674473, "question_id": 49418081, "link": "https://stackoverflow.com/questions/49418081/how-to-sort-file-based-on-line-length-including-whitespace-perl", "closed_reason": "Duplicate", "title": "How to sort file based on line length including whitespace Perl", "body": "<p>Im trying to sort a file based on line length: </p>\n\n<p>my name is tim<br>\nI like pineapples alot<br>\nhi  </p>\n\n<p>into something like this  </p>\n\n<p>hi<br>\nmy name is tim<br>\ni like pineapples alot  </p>\n\n<p>I have to include whitespaces in there too, so what i have tried doing is putting each line into an array as one line = 1 string in the array. Then I tried to sort the array but that didnt work out too well. </p>\n"}, {"tags": ["java", "shell", "perl", "unix", "aix"], "comments": [{"owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "edited": false, "score": 0, "creation_date": 1521673903, "post_id": 49417981, "comment_id": 85837735, "body": "The files contained in this directory are pretty small.  Averaging 400k per file."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1521679181, "post_id": 49417981, "comment_id": 85839092, "body": "<code>ls</code> and <code>find</code> will hit buffer limit because of the number of files and need to do many calls.  You can write your own version of <code>ls</code> with a larger buffer."}, {"owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1521679643, "post_id": 49417981, "comment_id": 85839182, "body": "How would i write my own ls?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1521680641, "post_id": 49417981, "comment_id": 85839396, "body": "look like you wrote one in Java already!"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1521709672, "post_id": 49417981, "comment_id": 85849929, "body": "You should quote more code. For example <code>find directory -name &#39;*.html&#39; -exec echo {} \\; &gt;&gt;listfile</code> is slower than <code>find directory -name &#39;*.html&#39; &gt;listfile</code>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "edited": false, "score": 0, "creation_date": 1521727269, "post_id": 49424542, "comment_id": 85862877, "body": "Thanks nakulbansal!  However the link you provided to getdents is not available."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "edited": false, "score": 0, "creation_date": 1521730504, "post_id": 49424542, "comment_id": 85865319, "body": "@PeteY Huh? The link works perfect for me. It&#39;s a manpage with the <code>listdir.c</code> code as an example. Btw, it&#39;s the same output I get when I issue <code>man getdents</code> on my command line."}], "tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": false, "score": 1, "last_activity_date": 1521709733, "creation_date": 1521709733, "answer_id": 49424542, "question_id": 49417981, "link": "https://stackoverflow.com/questions/49417981/list-files-from-a-large-directory-on-aix-machine/49424542#49424542", "title": "List files from a large directory on AIX machine", "body": "<p>You should use \"getdents\" in place of ls/find</p>\n\n<p>ls and practically every other method of listing a directory (including python os.listdir, find .) rely on libc readdir(). However readdir() only reads 32K of directory entries at a time, which means that if you have a lot of files in the same directory (i.e. 500M of directory entries) it is going to take an insanely long time to read all the directory entries, especially on a slow disk. For directories containing a large number of files, you'll need to dig deeper than tools that rely on readdir(). You will need to use the getdents() syscall directly, rather than helper methods from libc.</p>\n\n<p>You can find the C code to list the files using getdents() from <a href=\"http://man7.org/linux/man-pages/man2/getdents.2.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p>There are two modifications you will need to do in order quickly list all the files in a directory.</p>\n\n<p>First, increase the buffer size from X to something like 5 megabytes.</p>\n\n<pre><code>#define BUF_SIZE 1024*1024*5\n</code></pre>\n\n<p>Then modify the main loop where it prints out the information about each file in the directory to skip entries with inode == 0. I did this by adding</p>\n\n<pre><code>if (dp-&gt;d_ino != 0) printf(...);\n</code></pre>\n\n<p>In my case I also really only cared about the file names in the directory so I also rewrote the printf() statement to only print the filename.</p>\n\n<pre><code>if(d-&gt;d_ino) printf(\"%sn \", (char *) d-&gt;d_name);\n</code></pre>\n\n<p>Compile it (it doesn't need any external libraries, so it's super simple to do)</p>\n\n<pre><code>gcc listdir.c -o listdir\n</code></pre>\n\n<p>Now just run</p>\n\n<pre><code>./listdir [directory with insane number of files]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1521723062, "creation_date": 1521723062, "answer_id": 49429176, "question_id": 49417981, "link": "https://stackoverflow.com/questions/49417981/list-files-from-a-large-directory-on-aix-machine/49429176#49429176", "title": "List files from a large directory on AIX machine", "body": "<p>The default file glob() sorts the file list; that's why it's taking a long time.</p>\n\n<pre><code>my @files = &lt;/$dirname/*.html&gt;  # 45 minutes\n</code></pre>\n\n<p>Try reading the directory directly:</p>\n\n<pre><code>my @files = ();\nopendir my $dh, $dirname or die \"could not open $dirname: $!\\n\";\nwhile( my $file = readdir $dh ){\n    push @files, $file if $file =~ /\\.html$/;\n}\nclosedir $dh or die \"could not close $dirname: $!\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9535899"}, "is_accepted": false, "score": 0, "last_activity_date": 1521734903, "creation_date": 1521734903, "answer_id": 49433404, "question_id": 49417981, "link": "https://stackoverflow.com/questions/49417981/list-files-from-a-large-directory-on-aix-machine/49433404#49433404", "title": "List files from a large directory on AIX machine", "body": "<p>You can use ls like below</p>\n\n<pre><code>\\ls -U\n</code></pre>\n\n<p>-U     do not sort; list entries in directory order</p>\n"}], "owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1521734903, "creation_date": 1521673865, "last_edit_date": 1521712543, "question_id": 49417981, "link": "https://stackoverflow.com/questions/49417981/list-files-from-a-large-directory-on-aix-machine", "title": "List files from a large directory on AIX machine", "body": "<p>I have a directory that contains around 3 million files.  Once a day I need to run a process that creates a separate file containing file names from that large directory that have <code>.html</code> extension.  Typically, of the 3 million files that are there, 500,000 will have that <code>.html</code> extension.  I am using the following:</p>\n\n<pre><code>find dirname -name \"*.html\"\n</code></pre>\n\n<p>However, this runs for about 3 hours before it completes.  Is there a faster way to do this?  </p>\n\n<p>Update: I did some testing with Perl and Java.  Using Perl to get the contents of this directory and create a file of <code>.html</code> I tried the following (note the times):</p>\n\n<pre><code>my @files = &lt;/$dirname/*.html&gt;  # 45 minutes\n</code></pre>\n\n<p>When I tried this with Java using:</p>\n\n<pre><code>    final File[] files = dirname.listFiles(new FilenameFilter() {\n                @Override\n                public boolean accept(File dir, String name) {\n                    return name.endsWith(\".html\");\n                }\n            }); \n</code></pre>\n\n<p>How is Java able to do this in 3 minutes as opposed to Perl or any Unix command I can think of?  </p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 2, "creation_date": 1521662281, "post_id": 49415387, "comment_id": 85832658, "body": "I have edited your question so that it looks right. Please read how to do it for next question. Also, could you show some of the code you are using. This seems like a very simple question. Otherwise you may get downvoted very quickly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521667473, "post_id": 49415387, "comment_id": 85835285, "body": "Welcome to Stack Overflow. Why is <code>South Carolina</code> the only value with capital letters? That&#39;s not related to the issue but as an experienced developer these things jump out."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521668257, "post_id": 49415387, "comment_id": 85835667, "body": "In order to append you&#39;ll have to read the file and write it back out, with that new line.  Then a clean way to handle the new lines is to <code>chomp</code> every line as you read and to write them all with a new line.  (The <code>chomp</code> does nothing if there is no newline.)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521727509, "post_id": 49416284, "comment_id": 85863080, "body": "<i>&quot;check if the file ends in a newline, and if not, append one&quot;</i> I think the OP would be more interested in a solution than a diagnosis."}], "tags": [], "owner": {"reputation": 70, "user_id": 5660161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0ae7c973292d4cf79688567a90d2a0?s=128&d=identicon&r=PG&f=1", "display_name": "dkwan33", "link": "https://stackoverflow.com/users/5660161/dkwan33"}, "is_accepted": false, "score": 2, "last_activity_date": 1521665503, "creation_date": 1521665503, "answer_id": 49416284, "question_id": 49415387, "link": "https://stackoverflow.com/questions/49415387/append-adds-to-end-of-last-line-and-not-new-line/49416284#49416284", "title": "Append adds to end of last line and not new line", "body": "<p>Presumably your file is a list of states all on their own line. Your issue appears to be that the line: \"South Carolina\", is missing a newline character at the end, which is inconsistent with the rest of your data.</p>\n\n<p>This is a data issue. With hidden characters shown your data looks like this:</p>\n\n<p><code>new york\\n\nnew jersey\\n\nflorida\\n\nSouth Carolina</code></p>\n\n<p>When it should look like this:</p>\n\n<p><code>new york\\n\nnew jersey\\n\nflorida\\n\nSouth Carolina\\n</code></p>\n\n<p>In a scenario like this where your data is inconsistent the best way to programmatically fix it is to check if the file ends in a newline, and if not, append one.</p>\n"}, {"tags": [], "owner": {"reputation": 285, "user_id": 2319672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff1340a932140322d41db199c6cf1a4?s=128&d=identicon&r=PG", "display_name": "Dev123", "link": "https://stackoverflow.com/users/2319672/dev123"}, "is_accepted": false, "score": -1, "last_activity_date": 1521710439, "last_edit_date": 1521710439, "creation_date": 1521709558, "answer_id": 49424487, "question_id": 49415387, "link": "https://stackoverflow.com/questions/49415387/append-adds-to-end-of-last-line-and-not-new-line/49424487#49424487", "title": "Append adds to end of last line and not new line", "body": "<p>As mentioned by Dkwan33 this might be data issue. You can use \"od\" command to run and see if every line is ending with \\n or not.</p>\n\n<pre><code> od -bc data.txt\n0000000 156 145 167 040 171 157 162 153 012 156 145 167 040 152 145 162\n      n   e   w       y   o   r   k  \\n   n   e   w       j   e   r\n0000020 163 145 171 012 146 154 157 162 151 144 141 012 123 157 165 164\n      s   e   y  \\n   f   l   o   r   i   d   a  \\n   S   o   u   t\n0000040 150 040 103 141 162 157 154 151 156 141 012\n      h       C   a   r   o   l   i   n   a  \\n\n0000053\n</code></pre>\n\n<p>If you want to handle it via Perl then I would suggest you to first do the \"chomp\" on each line and then print that line with \\n.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521727372, "last_edit_date": 1521727372, "creation_date": 1521721172, "answer_id": 49428549, "question_id": 49415387, "link": "https://stackoverflow.com/questions/49415387/append-adds-to-end-of-last-line-and-not-new-line/49428549#49428549", "title": "Append adds to end of last line and not new line", "body": "<p>The issue is that the final line of your original file isn't terminated with a newline. If its contents are within your control then the best solution is simply to ensure that every line printed to the file is properly terminated, but if you have to deal with malformed data then there are a few options</p>\n\n<p>The first, as people have said, is to read the entire file into memory, remove any existing terminators with <code>chomp</code>, and print them back out to the file with the correct newline after all of them</p>\n\n<p>If your file is of any significant size then this approach is wasteful. You may avoid the rewriting by reading the last character of the file and checking whether it is a newline as required. Then, when the file is opened for appending, you can first add a newline if it was originally missing, followed by the new data record. That would look like this</p>\n\n<p>The <code>seek</code> call is used to move the read position to just before the last character, then <code>&lt;$fh&gt;</code> will read the final character which can be compared to <code>\"\\n\"</code> to establish whether the file is properly terminated</p>\n\n<p>Note that, if there is any chance that the file is completely empty or non-existent before your program runs, then you will have to code for the case where the <code>open</code> fails or the <code>&lt;$fh&gt;</code> returns <code>undef</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse Fcntl ':seek';\n\nmy ($file) = @ARGV;\n\nmy $terminated = do {\n    open my $fh, '&lt;', $file;\n    seek $fh, -1, SEEK_END;\n    &lt;$fh&gt; eq \"\\n\";\n};\n\nopen my $fh, '&gt;&gt;', $file;\nprint $fh \"\\n\" unless $terminated;\n\nprint $fh \"california\\n\";\n\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1521727372, "creation_date": 1521661871, "last_edit_date": 1521663638, "question_id": 49415387, "link": "https://stackoverflow.com/questions/49415387/append-adds-to-end-of-last-line-and-not-new-line", "title": "Append adds to end of last line and not new line", "body": "\n\n<p>So lets say I have text file that looks like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>new york\nnew jersey\nflorida\nSouth Carolina\n</code></pre>\n\n<p>I'm going to append <code>california</code> to it, but when I do it ends up looking like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>new york\nnew jersey\nflorida\nSouth Carolinacalifornia\n</code></pre>\n\n<p>How can I make it so it appends to a new line? I thought about just making a new line before the appending of california but then every time I run the script it'll just have gaps between the lines because of the new line</p>\n"}, {"tags": ["perl", "if-statement"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1521657101, "post_id": 49414036, "comment_id": 85829759, "body": "Do you understand why you are getting this output, i.e. why it prints both fruit for every line? Instead of just writing down the answer for you, I&#39;d like to help you understand it yourself. In order to solve this, you will need to use a certain approach that is very simple, but hard to come up with if you&#39;ve never done this before. You&#39;ll facepalm once you see it and then never do it wrong again. :)"}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521657269, "post_id": 49414036, "comment_id": 85829850, "body": "yep, as its process line by line and could not find the match first,second ..and it prints as it find a match in third line ..oh no,.."}, {"owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521658462, "post_id": 49414036, "comment_id": 85830565, "body": "it did not work."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521661531, "post_id": 49414255, "comment_id": 85832256, "body": "I find your <code>||=</code> a bit hard to understand for a beginner. It&#39;s very concise, but not quite idiomatic. I would go with the longer, but more readable <code>$saw_grapes = 1 if m&#47;grapes&#47;i</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521661849, "post_id": 49414255, "comment_id": 85832435, "body": "@simbabque, You mean <code>$saw_grapes = 1 if !$saw_grapes &amp;&amp; m&#47;grapes&#47;i;</code>, and that&#39;s silly! /// And what&#39;s with saying <code>||=</code> is not idiomatic? Quite the opposite, you can&#39;t even do that in most other languages (except maybe for bool types)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521670300, "post_id": 49414255, "comment_id": 85836545, "body": "@simbabque Being &quot;idiomatic&quot; is an interesting concept, no doubt.  Why do you say <code>||=</code> isn&#39;t? (Just curious. I consider <code>||=</code> and its cousins to be just about the most idiomatic thing in Perl.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1521659262, "last_edit_date": 1521659262, "creation_date": 1521657590, "answer_id": 49414255, "question_id": 49414036, "link": "https://stackoverflow.com/questions/49414036/print-only-the-matched-line-when-process-line-by-line-from-a-file/49414255#49414255", "title": "Print only the matched line when process line by line from a file", "body": "<p>It makes no sense to have the \"not in list\" prints inside the loop if you need to have gone through the entire list to know that an item isn't in the list. So let's move them out.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\n\nopen(my $FILE, \"&lt;\", \"fruits.txt\")\n   or die(\"Can't open \\\"fruits.txt\\\": $!\\n\");\n\nmy $saw_grapes     = 0;\nmy $saw_strawberry = 0;\n\nwhile (&lt;$FILE&gt;) {\n    ...\n}\n\nprint \"Grapes not in list\\n\"     if !$saw_grapes;\nprint \"Strawberry not in list\\n\" if !$saw_strawberry;\n</code></pre>\n\n<p>The rest should now be evident.</p>\n\n<pre><code>$saw_grapes     ||= /grapes/i;\n$saw_strawberry ||= /strawberry/i;\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 3834663, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5d57a494e224d18d06846290386de89b?s=128&d=identicon&r=PG&f=1", "display_name": "user3834663", "link": "https://stackoverflow.com/users/3834663/user3834663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1521659262, "creation_date": 1521656834, "last_edit_date": 1521657346, "question_id": 49414036, "link": "https://stackoverflow.com/questions/49414036/print-only-the-matched-line-when-process-line-by-line-from-a-file", "title": "Print only the matched line when process line by line from a file", "body": "<p>I have the below code, and its input file \"fruits.txt\" has following values.</p>\n\n<pre><code>Apple\nMango\nGrapes\nBananas\nAvocado\n</code></pre>\n\n<p>I'm getting the output as below;</p>\n\n<pre><code>Grapes not in list\nStrawberry not in list\nGrapes not in list\nStrawberry not in list\nGrapes\nStrawberry not in list\nGrapes not in list\nStrawberry not in list\nGrapes not in list\nStrawberry not in list\nGrapes not in list\nStrawberry not in list\n</code></pre>\n\n<p>However, i'm actually looking for an output like this, please help!</p>\n\n<p>Expected result as follows.</p>\n\n<pre><code>Grapes\nStrawberry not in list\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen (FILE,\"fruits.txt\");\n    while (&lt;FILE&gt;) {\n     if (/Grapes/) {\n       print $_;\n     } else { print \"Grapes not in list\\n\";}\n     if (/strawberry/i) {\n       print $_;\n     }\n     else {\n       print \"Strawberry not in list\\n\";\n     }\n}\nclose FILE;\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "number-formatting"], "comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1521654499, "post_id": 49413246, "comment_id": 85828290, "body": "That seems to add a space before the number:  &#39; 6&#39; as opposed to &#39;6&#39;"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 1, "creation_date": 1521654904, "post_id": 49413246, "comment_id": 85828532, "body": "<code>perldoc -f sprintf</code>, look for <code>flags</code>"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1521655278, "post_id": 49413246, "comment_id": 85828751, "body": "Just for clarity - I&#39;ve read the Perl doc. Flag either justifies it to the left, right or uses zeros. I want neither. I want a whole number to be simply &#39;6&#39; and a decimal such as &#39;6.22222222222&#39; to be &#39;6.22&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1521655804, "post_id": 49413633, "comment_id": 85829027, "body": "Ah I see. Your regular expression doesn&#39;t appear to be valid, but I get the idea. You want to convert it to two decimal place and then chop off the .00."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1521668806, "post_id": 49413633, "comment_id": 85835922, "body": "@snakespan How does it not?  Assign it -- <code>$p = (sprintf(..) =~ s&#47;..&#47;..&#47;r);</code> -- right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521670968, "post_id": 49413633, "comment_id": 85836783, "body": "@zdim, They probably don&#39;t have 5.14. The second version wasn&#39;t part of my answer when snakespan wrote their message."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1521656315, "last_edit_date": 1521656315, "creation_date": 1521655415, "answer_id": 49413633, "question_id": 49413246, "link": "https://stackoverflow.com/questions/49413246/perl-convert-number-to-2-decimal/49413633#49413633", "title": "Perl - Convert Number to 2 Decimal", "body": "<pre><code>sprintf('%.2f', $price/12) =~ s/\\.00\\z//r       # 5.14+\n</code></pre>\n\n<p>or</p>\n\n<pre><code>do { my $s = sprintf('%.2f', $price/12); $s =~ s/\\.00\\z//; $s }\n</code></pre>\n\n<p>For both of the above,</p>\n\n<ul>\n<li>If <code>$price/12 == 5.999</code>, evaluates to <code>6</code></li>\n<li>If <code>$price/12 == 6</code>, evaluates to <code>6</code></li>\n<li>If <code>$price/12 == 6.001</code>, evaluates to <code>6</code></li>\n<li>If <code>$price/12 == 6.2</code>, evaluates to <code>6.20</code></li>\n<li>If <code>$price/12 == 6.22</code>, evaluates to <code>6.22</code></li>\n<li>If <code>$price/12 == 6.222</code>, evaluates to <code>6.22</code></li>\n<li>If <code>$price/12 == 6.229</code>, evaluates to <code>6.23</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1521723220, "creation_date": 1521723220, "answer_id": 49429233, "question_id": 49413246, "link": "https://stackoverflow.com/questions/49413246/perl-convert-number-to-2-decimal/49429233#49429233", "title": "Perl - Convert Number to 2 Decimal", "body": "<pre><code>int( $price / 6 + 0.5 );\n</code></pre>\n\n<p>Perl automatically changes between string and numbers as needed.</p>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 0, "accepted_answer_id": 49413633, "answer_count": 2, "score": -2, "last_activity_date": 1521723220, "creation_date": 1521654199, "last_edit_date": 1521654550, "question_id": 49413246, "link": "https://stackoverflow.com/questions/49413246/perl-convert-number-to-2-decimal", "title": "Perl - Convert Number to 2 Decimal", "body": "<p>I want to convert a number to a decimal. I've been using:</p>\n\n<pre><code>sprintf(\"%02d\", $price / 12);\n</code></pre>\n\n<p>Only sometimes <code>$price</code> is a whole number, so instead of <code>6</code>, I get <code>06</code>. How do I ensure that it converts to 2 decimal places, but also doesn't prepend a zero before the whole number ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1521649431, "post_id": 49411569, "comment_id": 85824927, "body": "Works for me, including the redirect to https. I suspect you don&#39;t have the optional https support. Please check with <code>perl -mLWP::Protocol::https -E&#39;say LWP::Protocol::https-&gt;VERSION&#39;</code>"}, {"owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1521763148, "post_id": 49411569, "comment_id": 85882667, "body": "after reading this page. <a href=\"http://blogs.perl.org/users/brian_d_foy/2011/07/now-you-need-lwpprotocolhttps.html\" rel=\"nofollow noreferrer\">blogs.perl.org/users/brian_d_foy/2011/07/&hellip;</a>  i updated Mozilla::CA and it works.. thanks to everyone for help"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "edited": false, "score": 0, "creation_date": 1521653451, "post_id": 49412403, "comment_id": 85827677, "body": "hi. i have checked and the module   LWP::Protocol::https  is installed.    /usr/local/share/man/man3/LWP::Protocol::https.3pm    /usr/local/share/perl5/LWP/Protocol/https.pm"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1521651566, "creation_date": 1521651566, "answer_id": 49412403, "question_id": 49411569, "link": "https://stackoverflow.com/questions/49411569/perl-getstore-gives-error-500-but-can-downlaod-via-wget-or-web-browser/49412403#49412403", "title": "perl getstore gives error 500 . but can downlaod via wget or web browser", "body": "<p>The actual URL for that image starts with <code>https://</code>. When you request it on <code>http://</code>, the browser (or LWP::UserAgent) automatically redirects to the secure version of the URL.</p>\n\n<p>It's not particularly easy to find, but there's a <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.33/README.SSL\" rel=\"nofollow noreferrer\">README.SSL</a> file that comes with LWP which explains how to add SSL support to your LWP installation.</p>\n\n<p>Basically, you just need to install <a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a>. Everything will then work.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "edited": false, "score": 0, "creation_date": 1521754042, "post_id": 49429907, "comment_id": 85879450, "body": "thanks.. now i get a proper error report .. LWP::Protocol::https::Socket: SSL connect attempt failed error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1521725166, "creation_date": 1521725166, "answer_id": 49429907, "question_id": 49411569, "link": "https://stackoverflow.com/questions/49411569/perl-getstore-gives-error-500-but-can-downlaod-via-wget-or-web-browser/49429907#49429907", "title": "perl getstore gives error 500 . but can downlaod via wget or web browser", "body": "<p>If you change your program to use <a href=\"http://p3rl.org/LWP::UserAgent#mirror\" rel=\"nofollow noreferrer\">LWP::UserAgent#mirror</a> instead, you will get proper <a href=\"http://p3rl.org/HTTP::Response\" rel=\"nofollow noreferrer\">error reporting</a>, not just a vague status code.</p>\n\n<pre><code>use LWP::UserAgent qw();\nmy $ua = LWP::UserAgent-&gt;new;\nmy $res = $ua-&gt;mirror(\n    'http://shop.xeptor.co.uk/imgs/cef4cbbe-d86e-420e-aec6-4371d7e9b2bc/250/250/2262497R4xtrep.jpg',\n    'test.jpg',\n);\nif ($res-&gt;is_error) {\n    printf(\n        \"mirror failed.\\nStatus: %s\\nContent:\\n%s\\n\\nFull response:\\n%s\\n\",\n        $res-&gt;status_line,\n        $res-&gt;content,\n        $res-&gt;as_string\n    )\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1239079, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f2e004d0160be23972c8887020800bf4?s=128&d=identicon&r=PG", "display_name": "naf", "link": "https://stackoverflow.com/users/1239079/naf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521763113, "creation_date": 1521649187, "question_id": 49411569, "link": "https://stackoverflow.com/questions/49411569/perl-getstore-gives-error-500-but-can-downlaod-via-wget-or-web-browser", "title": "perl getstore gives error 500 . but can downlaod via wget or web browser", "body": "<p>i am trying to download a image from remote server and i get error 500 when i do it via perl getstore. i need to use  getstore. it works for other host but this  provider.</p>\n\n<pre><code>use LWP::Simple;   \nmy $url      = \"http://shop.xeptor.co.uk/imgs/cef4cbbe-d86e-420e-aec6-4371d7e9b2bc/250/250/2262497R4xtrep.jpg\";\nmy $filename = \"test.jpg\";\nmy $rc = getstore($url, $filename);\nif (is_error($rc)) {\n  die \"getstore of &lt;$url&gt; failed with $rc\";\n}\n</code></pre>\n\n<p>i can download the image  via  wget or via the web browser and not via  getstore .</p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1521648198, "post_id": 49411109, "comment_id": 85824007, "body": "If you want to write out the whole structure you have to load it in, there is no way around that. If your files are too big (100s of tags is not a good measure, lines or bytes are), you can do <a href=\"https://metacpan.org/pod/XML::Twig#Processing-an-XML-document-chunk-by-chunk\" rel=\"nofollow noreferrer\">chunked processing</a>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1521648734, "post_id": 49411109, "comment_id": 85824415, "body": "You forgot to <a href=\"http://p3rl.org/XML::Twig#flush-(%24optional_filehandle,-%options)\" rel=\"nofollow noreferrer\">flush</a>."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 7866968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a05d28d5bbdcb5ae6c14c033b9275555?s=128&d=identicon&r=PG&f=1", "display_name": "gauss76", "link": "https://stackoverflow.com/users/7866968/gauss76"}, "edited": false, "score": 0, "creation_date": 1521708569, "post_id": 49411576, "comment_id": 85849189, "body": "Thanks Sobrique, I will test and let you know...One follow up question: Can I modify the handler to also insert new tags or is this not possible?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 137, "user_id": 7866968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a05d28d5bbdcb5ae6c14c033b9275555?s=128&d=identicon&r=PG&f=1", "display_name": "gauss76", "link": "https://stackoverflow.com/users/7866968/gauss76"}, "edited": false, "score": 1, "creation_date": 1521715832, "post_id": 49411576, "comment_id": 85854370, "body": "Yes, it can. Just bear in mind that when &#39;flush&#39; is called, the state so far is dumped, and released from memory.  You can easily add a &quot;child&quot; of your current node. You can also insert as previous/next sibling if you want... but you can&#39;t really backtrack (because you <code>flush</code>ed already) or read ahead (because the parser hasn&#39;t &quot;seen&quot; later nodes yet)."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1521649212, "creation_date": 1521649212, "answer_id": 49411576, "question_id": 49411109, "link": "https://stackoverflow.com/questions/49411109/xmltwig-use-twig-handlers-or-twig-roots-to-update-part-of-xml-file/49411576#49411576", "title": "XML::Twig Use twig handlers or twig roots to update part of xml file", "body": "<p>Yes, you absolutely can do this with <code>XML::Twig</code>. </p>\n\n<p>The core point is that a <code>twig_handler</code> fires as the parse is happening. However, to output the 'story so far' you need to <code>flush</code> - or maybe <code>purge</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse XML::Twig;\n\nsub modify_datatag {\n    my ( $twig, $datatag ) = @_;\n\n    if ( $datatag -&gt; att('a') eq '1A' ) {\n        $datatag -&gt; first_child('t') -&gt; set_text('new text here'); \n\n    }\n\n    #delete this, as it breaks the XML. But you get the point. \n    print \"\\n## flushing twig from memory\\n\";\n    $twig -&gt; flush;\n\n}\n\nmy $xml = XML::Twig -&gt; new ( 'twig_handlers' =&gt; { 'datatag1' =&gt; \\&amp;modify_datatag } ); \n$xml -&gt; parse ( \\*DATA );\n$xml -&gt; flush;\n\n\n__DATA__\n&lt;xml&gt;\n&lt;datatag1 a=\"1A\"&gt;\n    &lt;t&gt;B&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"B2\"&gt;\n    &lt;t&gt;D&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"3C\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"4S3\"&gt;\n    &lt;t&gt;14&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"5AA3\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>Each time the <code>flush</code> is called, the progress so far is output to the file. Any tags that are still being processed (e.g. aren't closed) will be retained in memory. </p>\n\n<p>You could <code>purge</code> instead, but that will discard. </p>\n\n<p>The above prints to <code>STDOUT</code> - but you can use <code>parsefile_inplace</code> to rewrite the existing file. </p>\n\n<p>You can also specify a filehandle argument to <code>flush</code> to ... do what it says on the tin. </p>\n"}], "owner": {"reputation": 137, "user_id": 7866968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a05d28d5bbdcb5ae6c14c033b9275555?s=128&d=identicon&r=PG&f=1", "display_name": "gauss76", "link": "https://stackoverflow.com/users/7866968/gauss76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1521649212, "creation_date": 1521647973, "last_edit_date": 1521648097, "question_id": 49411109, "link": "https://stackoverflow.com/questions/49411109/xmltwig-use-twig-handlers-or-twig-roots-to-update-part-of-xml-file", "title": "XML::Twig Use twig handlers or twig roots to update part of xml file", "body": "<p>I have been using the module XML::Twig in Perl for a few weeks now. So far I have been loading an entire xml file into memory and then editing values in the file. Finally I save the file under a new name for further use.</p>\n\n<p>Up until now I have been dealing with fairly small xml files but now have to do some modifications on some very large xml files (10 000+ lines).</p>\n\n<p>There are 100's of tags in these large files but I only want to modify, let's say, 10 of them.</p>\n\n<p>Is there a way to load in just the tags I need to modify. Change the tag values and then save the resulting changes to a new xml file that has all the information the original one had but has the 10 tags modified?</p>\n\n<p>see in the XML::Twig documentation that there are twig handlers to load in just part of an xml document, however in the examples I have tried when trying to modify just a few tags only those modified parts are returned as an xml file and the rest of the information is lost! Which is no good to me.</p>\n\n<p>Below is an example structure I am dealing with</p>\n\n<pre><code>&lt;datatag1 a=\"1A\"&gt;\n    &lt;t&gt;A&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"B2\"&gt;\n    &lt;t&gt;D&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"3C\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"4S3\"&gt;\n    &lt;t&gt;14&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"5AA3\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n</code></pre>\n\n<p>What I would like to do is change datatag1's child t value, let's say, from A to B where a=\"1A\". So then my modified xml would be:</p>\n\n<pre><code>&lt;datatag1 a=\"1A\"&gt;\n    &lt;t&gt;B&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"B2\"&gt;\n    &lt;t&gt;D&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"3C\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"4S3\"&gt;\n    &lt;t&gt;14&lt;/t&gt;\n&lt;/datatag1&gt;\n&lt;datatag1 a=\"5AA3\"&gt;\n    &lt;t&gt;1&lt;/t&gt;\n&lt;/datatag1&gt;\n</code></pre>\n\n<p>Furthermore, I have a hash containing a set of keys that list the \"a\" values I want to modify. The hashes values giving the new \"t\" values I want to insert.</p>\n\n<p>Please let me know if you require any further information or anything is unclear.</p>\n"}, {"tags": ["perl", "csv", "hash"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1521652104, "last_edit_date": 1521652104, "creation_date": 1521644295, "answer_id": 49409684, "question_id": 49409522, "link": "https://stackoverflow.com/questions/49409522/how-to-count-number-of-items-with-same-id-in-csv-in-perl/49409684#49409684", "title": "How to count number of items with same id in csv in Perl", "body": "<p>Yes, a hash is the right data structure.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %count;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my ($user, $group) = split /:/;\n    ++$count{$group};\n}\n\nfor my $group (keys %count) {\n    print \"Group $group has $count{$group} members.\\n\";\n}\n\n__DATA__\nx:2\ny:2\nz:4\np:1\nq:4\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9431886, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "yibs", "link": "https://stackoverflow.com/users/9431886/yibs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 49409684, "answer_count": 1, "score": 0, "last_activity_date": 1521652104, "creation_date": 1521643882, "last_edit_date": 1521644191, "question_id": 49409522, "link": "https://stackoverflow.com/questions/49409522/how-to-count-number-of-items-with-same-id-in-csv-in-perl", "title": "How to count number of items with same id in csv in Perl", "body": "<p>So I have a CSV file with columns seperated by a :. it sort of looks like this in this format User:groupnumber</p>\n\n<pre><code>x:2\ny:2\nz:4\np:1\nq:4\n</code></pre>\n\n<p>So group x would have 2 users in that group, group 4 would have 2 users , group 1 would have 1 user.</p>\n\n<p>What can I user in perl to do this? I cant seem to figure it out. I thought of putting them into a hash but I could not figure out how to count many keys have the same value. </p>\n\n<p>Is a hash the best way to do this?</p>\n"}, {"tags": ["apache", "perl", "xampp", "mod-perl", "mod-perl2"], "answers": [{"comments": [{"owner": {"reputation": 817, "user_id": 174608, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d48bce4ff3afeee138c76e02fb792ecd?s=128&d=identicon&r=PG", "display_name": "mytwocents", "link": "https://stackoverflow.com/users/174608/mytwocents"}, "edited": false, "score": 0, "creation_date": 1521659579, "post_id": 49411136, "comment_id": 85831209, "body": "Thank you for the added context daxim... incidentally, I downloaded XAMPP 7.1.15 as well and it didn&#39;t have mod_perl either.  That seems unlikely that is would be missing from so many packages... thoughts on that?"}, {"owner": {"reputation": 817, "user_id": 174608, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d48bce4ff3afeee138c76e02fb792ecd?s=128&d=identicon&r=PG", "display_name": "mytwocents", "link": "https://stackoverflow.com/users/174608/mytwocents"}, "edited": false, "score": 0, "creation_date": 1521729689, "post_id": 49411136, "comment_id": 85864706, "body": "Apparently they don&#39;t ship with mod_perl: <a href=\"https://community.apachefriends.org/f/viewtopic.php?f=16&amp;t=76790&amp;sid=05d21257ecf5820a25f183af5411dab9\" rel=\"nofollow noreferrer\">community.apachefriends.org/f/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 0, "last_activity_date": 1521648041, "creation_date": 1521648041, "answer_id": 49411136, "question_id": 49409073, "link": "https://stackoverflow.com/questions/49409073/xampp-5-6-34-for-windows-2012-r2-how-to-get-apacheasp-working/49411136#49411136", "title": "XAMPP 5.6.34 for Windows 2012 R2 how to get Apache::ASP working", "body": "<p><a href=\"http://perl.apache.org/docs/2.0/os/win32/install.html#All_in_one_packages\" rel=\"nofollow noreferrer\">XAMPP is supposed to ship mod_perl2.</a> The 5.6.34 and 7.2.3 packages don't have it.</p>\n\n<p>I tried to manually install mod_perl2 into the XAMPP bundle. The software is crippled/incomplete. Their Perl doesn't come with <a href=\"https://metacpan.org/release/dmake\" rel=\"nofollow noreferrer\">dmake</a>. Their Apache httpd doesn't come with <a href=\"http://archive.apache.org/dist/perl/win32-bin/apxs_win32.tar.gz\" rel=\"nofollow noreferrer\">apxs</a>. I tried for a while to work around the problems and follow-up problems, but I think in the end that's a waste of time.</p>\n\n<p>You should contact the \"Apache Friends\" vendor for support.</p>\n"}], "owner": {"reputation": 817, "user_id": 174608, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d48bce4ff3afeee138c76e02fb792ecd?s=128&d=identicon&r=PG", "display_name": "mytwocents", "link": "https://stackoverflow.com/users/174608/mytwocents"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 49411136, "answer_count": 1, "score": 0, "last_activity_date": 1521648041, "creation_date": 1521642740, "question_id": 49409073, "link": "https://stackoverflow.com/questions/49409073/xampp-5-6-34-for-windows-2012-r2-how-to-get-apacheasp-working", "title": "XAMPP 5.6.34 for Windows 2012 R2 how to get Apache::ASP working", "body": "<p>I am working on a previous version of XAMPP that someone else built, I'm updating it to the following version in a separate directory, but the new installation doesn't seem to have mod_perl which I think is needed for Apache::ASP.</p>\n\n<p>XAMPP 5.6.34 for Windows \nIncludes: Apache 2.4.29, MariaDB 10.1.31, PHP 5.6.34, phpMyAdmin 4.7.9, OpenSSL 1.0.2, XAMPP Control Panel 3.2.2, Webalizer 2.23-04, Mercury Mail Transport System 4.63, FileZilla FTP Server 0.9.41, Tomcat 7.0.56 (with mod_proxy_ajp as connector), Strawberry Perl 7.0.56 Portable</p>\n\n<p>Essentially, there is a mod_perl.so in the previous installation that is not in the new installation.  The previous installation has perl510.dll, the new installation has perl516.dll  Essentially, configurations like PerlModule Apache::ASP and PerlResponseHandler Apache::ASP are not working.  </p>\n\n<p>So I thought I needed to download the mod_perl add-on (which I can't easily find), then I read \"...you need to install 'XAMPP Add-Ons' if your version of XAMPP is earlier than 1.7.2, as of this version mod_perl and 'a selection of important Perl Modules' are included as standard.\"  This implies it is already in place for my version.  Then I read that mod_perl2 is for apache2.x.x, so which version is included?  I don't see the modules in apache/modules.</p>\n\n<p>Further, if I need to install it, the Apache:ASP documentation is very limited and implies I need to compile apache and perl together which just feels wrong since there is a XAMPP bundle.</p>\n\n<p>I need help with understanding the context of how to get Apache::ASP properly installed/configured for this version of XAMPP, not having much experience with any of this.</p>\n\n<p>Much appreciated!</p>\n"}, {"tags": ["regex", "perl", "marpa"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1521591020, "post_id": 49396033, "comment_id": 85794067, "body": "<code>[\\&quot;([^:]*?)\\&quot;]</code> The rule is the <i>first end</i> <code>]</code> closes the class. So, it should be <code>[\\&quot;([^:\\]*?)\\&quot;]</code> for that class. But if you take away the outter <code>[]</code> it looks like this <code>\\&quot;([^:]*?)\\&quot;</code> which looks more readable."}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1521591193, "post_id": 49396033, "comment_id": 85794122, "body": "if i give only this --&gt; \\&quot;([^:]*?)\\&quot; ; still I am unable to parse"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1521591399, "post_id": 49396033, "comment_id": 85794178, "body": "<code>[\\&quot;([^:]*?)  &lt;-- Unbalanced  &#39;)&#39; \\&quot;]</code> You didn&#39;t get an error ?"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1521591661, "post_id": 49396033, "comment_id": 85794243, "body": "there is nothing unbalanced in the regex_string i have given"}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1521666190, "post_id": 49402011, "comment_id": 85834668, "body": "Thanks for the answer. Reason why this solution of including doublequotedstring ::= &#39;&quot;&#39; nonquotes &#39;&quot;&#39; doesn&#39;t work for me -&gt; I can have input expressions like : func(&quot;foo&quot;) where, func is also getting tokenized by a grammar rule like : expression ::=func LPAREN PARAM RPAREN; So, now input expression will look like : my $input = &quot;func(\\&quot;foo\\&quot;)&quot;; So  on including the rule you mentioned above i/p will be wrongly tokenized."}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1521666353, "post_id": 49402011, "comment_id": 85834752, "body": "Can you suggest soemthing accordingly? Here, with my $input = &quot;func(\\&quot;foo\\&quot;)&quot;; i want to tokenize it as -&gt; func, left parenthesis, foo between double quotes into regex-string and right parantheses."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1521711097, "last_edit_date": 1521711097, "creation_date": 1521623004, "answer_id": 49402011, "question_id": 49396033, "link": "https://stackoverflow.com/questions/49396033/parse-double-quoted-string-using-marpa-r2-perl/49402011#49402011", "title": "Parse double quoted string using MARPA :: R2 perl", "body": "<pre><code>use 5.026;\nuse strictures;\nuse Data::Dumper qw(Dumper);\nuse Marpa::R2 qw();\n\nmy $grammar = Marpa::R2::Scanless::G-&gt;new({\n    bless_package =&gt; 'parsetree',\n    source        =&gt; \\&lt;&lt;'',\n:default ::= action =&gt; [values] bless =&gt; ::lhs\nlexeme default = action =&gt; [ start, length, value ] bless =&gt; ::name latm =&gt; 1\n:start ::= expression\nexpression ::= funcname params\nparams ::= epsilon | lparen param rparen\nepsilon ::=\nfuncname ~ [a-z0-9]+\nlparen ~ '('\nparam ::= unquotedparam | quotedparam\nunquotedparam ::= [a-z0-9]+\nquotedparam ::= '\"' stringliteral '\"'\nstringliteral ~ [^\"]+\nrparen ~ ')'\n\n});\nsay $grammar-&gt;show_rules;\n\nfor my $input (qw[\n    func(\"foo\")\n    bar123\n    foo(123)\n]) {\n    my $r = Marpa::R2::Scanless::R-&gt;new({\n        grammar =&gt; $grammar,\n        trace_terminals =&gt; 1\n    });\n    $r-&gt;read(\\$input);\n    say Dumper $r-&gt;value;\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 49402011, "answer_count": 1, "score": 2, "last_activity_date": 1521711097, "creation_date": 1521590299, "question_id": 49396033, "link": "https://stackoverflow.com/questions/49396033/parse-double-quoted-string-using-marpa-r2-perl", "title": "Parse double quoted string using MARPA :: R2 perl", "body": "<p>I'm implementing a parser using MARPA::R2.</p>\n\n<p>I have a <code>G1 rule</code> like :</p>\n\n<pre><code>PARAM ::= STRING | REGEX_STRING\n</code></pre>\n\n<p>and <code>L0 rule</code> like:</p>\n\n<pre><code>STRING                     ~ [^ \\/\\(\\),&amp;:\\\"~]+   -----&gt; works fine\nREGEX_STRING               ~ [\\\"([^:]*?)\\\"] -----&gt; doesn't work\n</code></pre>\n\n<p>Using <code>REGEX_STRING</code>, I'm trying to parse strings enclosed in double quotes, but something is wrong with the regex. Also, I want to remove the double quotes and only keep the content between quotes.</p>\n\n<p>So, if i give input using below code :</p>\n\n<pre><code>my $recce = Marpa::R2::Scanless::R-&gt;new({grammar =&gt; $grammar});\nmy $input = \"\\\"foo\\\"\";  --&gt; here, it should parse \"foo\" and give me foo.\nprint \"Trying to parse:\\n$input\\n\\n\";\n$recce-&gt;read(\\$input);\nmy $value_ref = ${$recce-&gt;value};\nprint \"Output:\\n\".Dumper($value_ref);\n</code></pre>\n\n<p>Other examples : \"bar123\", \"foo(123)\" etc.</p>\n"}, {"tags": ["perl", "getopt-long"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1521584575, "post_id": 49394976, "comment_id": 85791867, "body": "If <code>--fresh</code> feeds the <code>$fresh</code> variable, and <code>--import</code> and <code>--export</code> feed the <code>$import</code> and <code>$export</code> variables, you can always just <code>die &quot;--fresh only valid with --import or --export\\n&quot; if $fresh &amp;&amp; ! $import;</code> as the next line after <code>GetOptions()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 3, "last_activity_date": 1521589469, "last_edit_date": 1521589469, "creation_date": 1521587800, "answer_id": 49395662, "question_id": 49394976, "link": "https://stackoverflow.com/questions/49394976/perl-getoptlong-use-subparameter-only-for-defined-parameter/49395662#49395662", "title": "Perl Getopt::Long - use subparameter only for defined parameter", "body": "<p>I think that without resorting to partial parsing the closest you can get to with Getopt::Long is this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nuse Getopt::Long;\n\nGetOptions('export=s%{1,5}'=&gt;\\my %export, 'another_option=s'=&gt;\\my $ao);\n\nprint Dumper({ 'export'=&gt; \\%export, 'another_option'=&gt;$ao});\n</code></pre>\n\n<hr>\n\n<pre><code>perl t1.pl  --export fresh=1 b=2 c=3 --another_option value\n</code></pre>\n\n<hr>\n\n<pre><code>$VAR1 = {\n          'export' =&gt; {\n                        'c' =&gt; '3',\n                        'b' =&gt; '2',\n                        'fresh' =&gt; '1'\n                      },\n          'another_option' =&gt; 'value'\n        };\n</code></pre>\n\n<p>Here <code>export=s%{1,5}</code> parses <code>--export fresh=1 b=2 c=3</code> into hash <code>%export</code>.<br>\n<code>s%{1,5}</code> expects from 1 to 5 <code>key=value</code> pairs</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1521650541, "last_edit_date": 1521650541, "creation_date": 1521588090, "answer_id": 49395712, "question_id": 49394976, "link": "https://stackoverflow.com/questions/49394976/perl-getoptlong-use-subparameter-only-for-defined-parameter/49395712#49395712", "title": "Perl Getopt::Long - use subparameter only for defined parameter", "body": "<p>Options can indeed require a parameter. The parameter doesn't use <code>--</code>, though.</p>\n\n<pre><code>GetOptions(\n   'help'     =&gt; \\&amp;help,\n   'import:s' =&gt; \\$opt_import,\n)\n   or usage();\n\ndefined($opt_import) &amp;&amp; ( $opt_import eq '' || opt_import eq 'fresh' )\n   or usage(\"Invalid value for --import\");\n\n@ARGV == 0\n   or usage(\"Incorrect number of arguments\");\n\n# Convert into booleans for convenience.\n$opt_fresh = defined($opt_import) &amp;&amp; $opt_import eq 'fresh';\n$opt_import = defined($opt_import);\n</code></pre>\n\n<p>The above accepts the following:</p>\n\n<pre><code>app.pl --import fresh\napp.pl --import\napp.pl\n</code></pre>\n\n<p>Note that using <code>=s</code> instead of <code>:s</code> will make providing a value mandatory.</p>\n\n<hr>\n\n<p>Sample helpers:</p>\n\n<pre><code>use FIle::Basename qw( basename );\n\nsub usage {\n   my $basename = basename($0);\n   print(\"usage: $basename [options]\\n\");\n   print(\"       $basename --help\\n\");\n   print(\"\\n\");\n   print(\"Options:\\n\");\n   print(\"\\n\");\n   print(\"   --import [fresh]\\n\");\n   exit(0);\n}\n\nsub usage {\n   if (@_) {\n      chomp( my $msg = shift );\n      warn(\"$msg\\n\");\n   }\n\n   my $basename = basename($0);\n   warn(\"Try '$basename --help' for more information.\\n);\n   exit(1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1524764052, "last_edit_date": 1524764052, "creation_date": 1521588162, "answer_id": 49395725, "question_id": 49394976, "link": "https://stackoverflow.com/questions/49394976/perl-getoptlong-use-subparameter-only-for-defined-parameter/49395725#49395725", "title": "Perl Getopt::Long - use subparameter only for defined parameter", "body": "<p>I take the purpose for this invocation, that matters for implementation here, to be the following. </p>\n\n<p>There is a flag (call it <code>$fresh</code>) that need be set under the <code>--import</code> option, along with other flag(s) associated with <code>--import</code>.  Additionally, there may be an independent option <code>--fresh</code>, which sets the <code>$fresh</code> flag. </p>\n\n<p>While <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a> doesn't support nested options this can be achieved using its other facilities. Set <code>--import</code> to take an optional argument with <code>:</code>, and set variables <a href=\"http://perldoc.perl.org/Getopt/Long.html#User-defined-subroutines-to-handle-options\" rel=\"nofollow noreferrer\">in a sub</a>. If the word <code>fresh</code> is submitted as the value set the corresponding (<code>$fresh</code>) flag.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Getopt::Long;\n\nmy ($import, $fresh); \n\nGetOptions( \n    'import:s' =&gt; sub { \n        $import = 1;  \n        $fresh  = 1 if $_[1] eq 'fresh';\n    },\n    'fresh!' =&gt; \\$fresh   # if independent --fresh option is needed\n);\n\nsay 'import: ', $import // 'not submitted';   #/\nsay 'fresh:  ', $fresh  // 'not submitted';\n</code></pre>\n\n<p>The sub receives two arguments, the option name and value, and the value is used to check whether <code>fresh</code> was passed. The code as it stands does nothing for other words that may be passed, but it can be made to abort (with a usage message) if any value other than <code>fresh</code> is submitted.</p>\n\n<p>Whatever particular reasons there are to require this invocation can be coded in the sub.</p>\n\n<p>If a separate <code>--fresh</code> option is indeed provided then the user need be careful since it is possible to submit conflicting values for <code>$fresh</code> &ndash; one with <code>--import</code> and another in <code>--fresh</code> itself. This can be checked for in the code.</p>\n\n<p>The option <code>--import</code> still works as a simple flag on its own.</p>\n\n<p>Valid invocations are</p>\n\n<pre>\ngol.pl --import         # $import is 1\ngol.pl --import fresh   # $import is 1, $fresh is 1\ngol.pl --fresh          # $fresh is 1\n</pre>\n\n<p>Since <code>fresh</code> is set in a sub as a value of <code>--import</code> it cannot be set with any other options. </p>\n\n<p>This differs from the requirement by having <code>fresh</code> as a word, without dashes.</p>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 2, "accepted_answer_id": 49395662, "answer_count": 3, "score": 2, "last_activity_date": 1524764052, "creation_date": 1521583886, "question_id": 49394976, "link": "https://stackoverflow.com/questions/49394976/perl-getoptlong-use-subparameter-only-for-defined-parameter", "title": "Perl Getopt::Long - use subparameter only for defined parameter", "body": "<p>I would like the --import parameter to have a \"sub-parameter\" that will only work on this parameter, nowhere else. Example:</p>\n\n<pre><code>app.pl --import --fresh\n</code></pre>\n\n<p>output: command working</p>\n\n<pre><code>app.pl --export\n</code></pre>\n\n<p>output: command working</p>\n\n<pre><code>app.pl --export --fresh\n</code></pre>\n\n<p>output: command not found</p>\n\n<p>Can this be achieved by GetOpt::Long? Please, guide me a little.</p>\n"}, {"tags": ["perl", "notepad++"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1521575151, "post_id": 49392822, "comment_id": 85787375, "body": "Technically, <code>&#47;</code> is the open and close delimiter. Unfortunately, it&#39;s also the division operator, which is what make this complicated. If you got into the habbit of using <code>m&#47;...&#47;</code> instead of <code>&#47;...&#47;</code>, you could set <code>m&#47;</code> as the opening delimiter and <code>&#47;</code> as the closing delimiter. That won&#39;t help for <code>s&#47;&#47;&#47;</code>, though."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521626044, "post_id": 49392822, "comment_id": 85807178, "body": "I used Notepad++ for a little while a good ten years back and I seem to remember the highlighter worked fairly well with Perl. I then switched to PSPad, which is also free and I found a lot better though, also with the highlighting."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1521626256, "post_id": 49392822, "comment_id": 85807337, "body": "You&#39;re going to have some trouble getting this to work. @ikegami is right about <code>m&#47;&#47;</code> and <code>s&#47;&#47;&#47;</code>, but then <code>m{}{}</code> and <code>s[][]</code> and <code>y!!!</code> and <code>tr@@@</code> are all valid (but <code>y&#47;&#47;&#47;</code> and <code>tr&#47;&#47;&#47;</code> aren&#39;t regex, just other quote-like operators). <code>m mfooom</code> is valid too. There&#39;s a saying that only Perl can parse Perl, and I would claim that the parsing engine that you&#39;ve got with Notepad++ is not powerful enough to handle this challenge. If you want to learn more about parsing Perl, <a href=\"https://youtu.be/e1T7WbKox6s\" rel=\"nofollow noreferrer\">this talk by Damian Conway</a> from TPCiA 2017 about writing a single regex to parse it is good"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521626591, "post_id": 49392822, "comment_id": 85807578, "body": "When you&#39;re done watching Damian&#39;s talk, watch <a href=\"https://youtu.be/EDQu0msc63E?t=1h9m4s\" rel=\"nofollow noreferrer\">these two follow-up lightning talks</a> from the same conference as well. They are hilarious. :)"}, {"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1521640124, "post_id": 49392822, "comment_id": 85817362, "body": "I&#39;m sorry, but PSPad is probably one of the uglies editor I have every seen :(. I like some of the tools it has and the syntax highliting for Perl is too simple. I guess I will keep using what I have in Notepad. Thank you guys"}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 4122615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hyne0.gif?s=128&g=1", "display_name": "ReluctantBIOSGuy", "link": "https://stackoverflow.com/users/4122615/reluctantbiosguy"}, "edited": false, "score": 0, "creation_date": 1522436615, "post_id": 49416247, "comment_id": 86167718, "body": "@JohnnyLoo You could do something similar for PERL. For example, Open: ~=/ Escape: \\ and Close: /"}], "tags": [], "owner": {"reputation": 486, "user_id": 4122615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hyne0.gif?s=128&g=1", "display_name": "ReluctantBIOSGuy", "link": "https://stackoverflow.com/users/4122615/reluctantbiosguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1521665376, "creation_date": 1521665376, "answer_id": 49416247, "question_id": 49392822, "link": "https://stackoverflow.com/questions/49392822/notepad-user-defined-language-for-perl/49416247#49416247", "title": "Notepad++ User Defined language for Perl", "body": "<p>I use this as one of my delimiters in my AWK definition:</p>\n\n<pre><code>Open:    ~/ (/ ,/ !~/\nEscape:  \\ \\ \\ \\\nClose:   / / / /\n</code></pre>\n\n<p>It isn't ideal, but it works well enough for me.</p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1521665376, "creation_date": 1521574779, "question_id": 49392822, "link": "https://stackoverflow.com/questions/49392822/notepad-user-defined-language-for-perl", "title": "Notepad++ User Defined language for Perl", "body": "<p>I'm trying to create my own language defined theme for Perl scripts so everything gets colorcoded the way I want.</p>\n\n<p>The issue I'm having is that regexp sections are not getting colored the way I need them by using a delimiter in the UDL GUI.\nExmaple:</p>\n\n<pre><code>if($string =~ /^This is a string$/){\n   print \"worked!!!!!!\\n\";\n}\n</code></pre>\n\n<p>I want \"/^This is a string$/\" colorcoded in red, but the delimiter I created takes the whole line after =~ /. How can I force Notepad++ to only colorcode until the last \"/\" on the line?</p>\n\n<p>Here is my delimiter configuration. keep in mind that I already tried \"/\" instead of ((EOL)) and it didn't work. Thank you</p>\n\n<p><a href=\"https://i.stack.imgur.com/z2oAT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z2oAT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "cpan", "higher-order-functions"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1521573362, "post_id": 49392436, "comment_id": 85786465, "body": "How about <code>map { encode_entities($_) } @_;</code> You have to be explicit when using <code>encode_entities</code> =&gt; <a href=\"https://metacpan.org/pod/HTML::Entities\" rel=\"nofollow noreferrer\">metacpan.org/pod/HTML::Entities</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1521574119, "creation_date": 1521574119, "answer_id": 49392654, "question_id": 49392436, "link": "https://stackoverflow.com/questions/49392436/mapencode-entities-does-not-seem-to-work/49392654#49392654", "title": "map(encode_entities, @_) does not seem to work", "body": "<p>There is no reason to assume that anything other than a Perl operator will use <code>$_</code> as a default parameter: it would have to be written carefully to behave that way</p>\n\n<p>All you need to do is to call <code>encode_entities</code> with a specific parameter</p>\n\n<p>Try this</p>\n\n<pre><code>sub baz {\n    map encode_entities($_), @_;\n}\n</code></pre>\n\n<p>It's likely that you will feel that a separate subroutine definition is unnecessary</p>\n"}], "owner": {"reputation": 10150, "user_id": 341362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/deb483e59f08e28083464e8e35a352db?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/341362/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49392654, "answer_count": 1, "score": 0, "last_activity_date": 1521574119, "creation_date": 1521573216, "question_id": 49392436, "link": "https://stackoverflow.com/questions/49392436/mapencode-entities-does-not-seem-to-work", "title": "map(encode_entities, @_) does not seem to work", "body": "<p><code>map(encode_entities, @_)</code> does not seem to work, where the function is from <code>HTML::Entities</code>. I can work around it (see below), but is there a less ugly way? And could someone explain what is going on -- is there a conceptual error in my thinking?</p>\n\n<pre><code>use HTML::Entities;\n\nsub foo {\n    my @list = map(encode_entities, @_);\n    return @list;\n}\n\nsub bar {\n    my @list = @_;\n    my $n = scalar @list;\n    for my $k (0..$n-1) {\n        $list[$k] = encode_entities($list[$k]);\n    }\n    return @list;\n}\n\nmy @test = ('1 &lt; 2', 'Hello world!');\nprint join(\"\\n\", bar(@test)); # prints the two lines, encoded as expected\nprint join(\"\\n\", foo(@test)); # undefined, gives \"Use of uninitialized value...\" error\n</code></pre>\n"}, {"tags": ["perl", "perl-hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521572856, "post_id": 49390217, "comment_id": 85786217, "body": "Re &quot;<i><code>%metadataHash</code> is a hash</i>&quot;, Not quite. In <code>$metadataHash</code> is a reference to a hash, and <code>%$metadataHash</code> is a hash. Same goes for <code>$metadataHash-&gt;{&quot;fastq&quot;}</code> and <code>$metadataHash-&gt;{&quot;fastq&quot;}{$file1}</code>, incidentally."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 7049776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0296803aff303d32d5bdc998c995dae7?s=128&d=identicon&r=PG&f=1", "display_name": "bioinforesearch", "link": "https://stackoverflow.com/users/7049776/bioinforesearch"}, "edited": false, "score": 0, "creation_date": 1521576846, "post_id": 49390331, "comment_id": 85788249, "body": "Now your example is similar to mine. It refers to a hash of hash. One key refers to another hash and the second key &quot;d&quot; refers to a value. Initially, I assumed that all the elements in the hash need to be of similar type. Can I have another key having a value of array?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1521623737, "post_id": 49390331, "comment_id": 85805620, "body": "Yes, the value can be anything. Read <a href=\"http://perldoc.perl.org/perldsc.html#MORE-ELABORATE-RECORDS\" rel=\"nofollow noreferrer\">perldsc</a> and <a href=\"http://www.modernperlbooks.com/books/modern_perl_2016/03-perl-language.html#TmVzdGVkRGF0YVN0cnVjdHVyZXM\" rel=\"nofollow noreferrer\">Nested Data Structures in <i>Modern Perl</i></a>. The key can be only a string by default, but see <a href=\"http://perldoc.perl.org/perlfaq4.html#How-can-I-use-a-reference-as-a-hash-key%3f\" rel=\"nofollow noreferrer\">perlfaq4</a>."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1521565904, "creation_date": 1521565904, "answer_id": 49390331, "question_id": 49390217, "link": "https://stackoverflow.com/questions/49390217/in-a-hash-can-we-have-three-keys-combined-together-that-point-to-one-value/49390331#49390331", "title": "In a hash, can we have three keys combined together that point to one value?", "body": "<p><code>$metadataHash-&gt;{\"fastq\"}{$file1}{\"read1\"}</code> is shorthand syntax for <code>$metadataHash-&gt;{\"fastq\"}-&gt;{$file1}-&gt;{\"read1\"}</code>.</p>\n\n<p>It deals with hashes where a value is a reference to another hash.</p>\n\n<hr>\n\n<p>To explain with a demonstration: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $foo = {};\n\n$foo-&gt;{a}{b}{c} = 1;\n\nuse Data::Dumper;\n\nprint Dumper($foo);\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; {\n                   'b' =&gt; {\n                            'c' =&gt; 1\n                          }\n                 }\n        };\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 7049776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0296803aff303d32d5bdc998c995dae7?s=128&d=identicon&r=PG&f=1", "display_name": "bioinforesearch", "link": "https://stackoverflow.com/users/7049776/bioinforesearch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49390331, "answer_count": 1, "score": 0, "last_activity_date": 1521637816, "creation_date": 1521565524, "last_edit_date": 1521637816, "question_id": 49390217, "link": "https://stackoverflow.com/questions/49390217/in-a-hash-can-we-have-three-keys-combined-together-that-point-to-one-value", "title": "In a hash, can we have three keys combined together that point to one value?", "body": "<p>I have a doubt in the below hash declaration:</p>\n\n<p><code>%metadataHash</code> is a hash</p>\n\n<pre><code>line 1: $metadataHash-&gt;{\"name\"} = $name;\nline 2: $metadataHash-&gt;{\"type\"} = $Type;\nline 3: $metadataHash-&gt;{\"student\"}{$file}{\"math\"} = \"/$file\";\nline 4: $metadataHash-&gt;{\"student\"}{$file}{\"phy\"} = $phy;\nline 5: $metadataHash-&gt;{\"student\"}{$file}{\"chem\"} = $chem;\n</code></pre>\n\n<p>In line 1 and line 2, it is clear that keys (\"name\", \"type\") and values ($name, $Type).</p>\n\n<p>But in line 3, </p>\n\n<ul>\n<li>can we have three keys <code>{\"student\"}{$file}{\"math\"}</code> combined together that point to one value?</li>\n<li>In line 3, are they combined together in such a way considered as one key or three different keys?</li>\n</ul>\n"}, {"tags": ["regex", "perl", "visual-studio-code", "syntax-highlighting"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1521562393, "post_id": 49389061, "comment_id": 85779763, "body": "You can try /\\x7c/ or m{\\x7c}"}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 3, "creation_date": 1521565586, "post_id": 49389061, "comment_id": 85781832, "body": "In cases like this, I find I can often &quot;close&quot; the syntax element the editor has mistakenly identified by putting something behind a comment. <code>split &#47;\\|&#47;, $var; # &#47;</code>"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 1, "creation_date": 1521569756, "post_id": 49389061, "comment_id": 85784432, "body": "I have edited your question to add the [syntax-highlighting] tag, but it needs a peer to accept the edit. You may do it yourself. With the [perl] tag you are going to get suggestions regarding the code..."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1521570854, "post_id": 49389061, "comment_id": 85785092, "body": "@JavierElices This is a bit of a Perl-specific issue -- this language construct routinely confuses syntax highlighters, and there are some standard practices for mitigating the issue."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1521571116, "post_id": 49389061, "comment_id": 85785243, "body": "@duskwuff, I am sure it is, but the additional tag cannot harm, both with the answer and with finding the question in the future, don&#39;t you think?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1521645708, "post_id": 49389061, "comment_id": 85821961, "body": "I think maybe you need multiple values for a form parameter instead of special syntax in a single value to represent multiple values."}], "answers": [{"comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521570773, "post_id": 49390755, "comment_id": 85785041, "body": "In this case, <code>m{\u2026}</code> is more appropriate than <code>qr{\u2026}</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521570819, "post_id": 49390755, "comment_id": 85785065, "body": "@duskwuff I am afraid you do not know what you do not know. What do you think <code>split m{...}, $xyz</code> does?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521571062, "post_id": 49390755, "comment_id": 85785218, "body": "The exact same thing as <code>split &#47;\u2026&#47;, $xyz</code>. They&#39;re synonymous. <code>qr{\u2026}</code> is only needed when you need to treat the regexp as a value, e.g. to assign it to a variable, or pass it as an argument to a non-builtin function."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 5, "creation_date": 1521571103, "post_id": 49390755, "comment_id": 85785237, "body": "@duskwuff, If you&#39;re going to be explicit, <code>qr</code> is clearer since the intent is to create a regex, not perform a match."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521652977, "post_id": 49390755, "comment_id": 85827368, "body": "@duskwuff &quot;<i>need to treat the regexp as a value ... pass it as an argument to a non-builtin function</i>&quot; ... Why the artificial distinction?"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 5, "last_activity_date": 1521567322, "creation_date": 1521567322, "answer_id": 49390755, "question_id": 49389061, "link": "https://stackoverflow.com/questions/49389061/split-breaks-perl-syntax-highlighting/49390755#49390755", "title": "&quot;split /\\|/&quot; breaks Perl syntax highlighting", "body": "<p>Even if it didn't break syntax highlighting, leaning toothpicks are hardly readable. Better use something like:</p>\n\n<pre><code>split qr{\\Q|}, ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6429, "user_id": 22184, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/43H4k.jpg?s=128&g=1", "display_name": "Adriano Varoli Piazza", "link": "https://stackoverflow.com/users/22184/adriano-varoli-piazza"}, "is_accepted": true, "score": 0, "last_activity_date": 1528141493, "creation_date": 1528141493, "answer_id": 50687752, "question_id": 49389061, "link": "https://stackoverflow.com/questions/49389061/split-breaks-perl-syntax-highlighting/50687752#50687752", "title": "&quot;split /\\|/&quot; breaks Perl syntax highlighting", "body": "<p>I found out that the easiest and clearest thing to do that solved the problem was calling the function using parentheses.</p>\n\n<pre><code>@result = split(/\\|/, $input);\n</code></pre>\n\n<p>displays correctly.</p>\n"}], "owner": {"reputation": 6429, "user_id": 22184, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/43H4k.jpg?s=128&g=1", "display_name": "Adriano Varoli Piazza", "link": "https://stackoverflow.com/users/22184/adriano-varoli-piazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 50687752, "answer_count": 2, "score": 3, "last_activity_date": 1528141493, "creation_date": 1521562101, "last_edit_date": 1592644375, "question_id": 49389061, "link": "https://stackoverflow.com/questions/49389061/split-breaks-perl-syntax-highlighting", "title": "&quot;split /\\|/&quot; breaks Perl syntax highlighting", "body": "<p>I code using Visual Studio Code on Ubuntu, with the Beautify and Perl extensions among others. An annoyance is that this bit of code,</p>\n<p><code>split /\\|/</code></p>\n<p>breaks the highlighter.<a href=\"https://i.stack.imgur.com/sxTmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sxTmC.png\" alt=\"syntax is broken between the two occurrences of the code\" /></a></p>\n<p>I'm a bit lost about where to poke in vscode to fix the highlighting error.</p>\n<p>This is a large codebase that uses that regex relatively frequently. While refactoring it all to centralize that code might be a good suggestion in theory, for the purpose of the question please assume I cannot change this code right now. I was aiming more at where to poke in the vscode/extension highlighter, or if it is an actual error.</p>\n"}, {"tags": ["python", "perl", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1521570184, "post_id": 49386283, "comment_id": 85784678, "body": "You may add that a CGI program needs to be executable. In linux it means a correct <i>shebang</i> for scripts and the executable permission. Also, try to use a library to help you with all the parameter passing and HTML generation. For Perl, at least <a href=\"http://perldoc.perl.org/CGI.html\" rel=\"nofollow noreferrer\">CGI</a>. For Python something like <a href=\"https://docs.python.org/2/library/cgi.html\" rel=\"nofollow noreferrer\">cgitb</a>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1521554946, "last_edit_date": 1521554946, "creation_date": 1521554381, "answer_id": 49386283, "question_id": 49386143, "link": "https://stackoverflow.com/questions/49386143/can-we-run-perl-and-python-cgi-web-portal-from-same-server-box/49386283#49386283", "title": "Can we run perl and python cgi web portal from same server/box", "body": "<p>Yes. It's actually very easy. Because <code>cgi</code> doesn't care what language it's written it - it's just a script that the web server runs on demand, and passes parameters. </p>\n\n<p>You can even use compiled C as your cgi language if you want. </p>\n\n<p>All you need to do is be able to read the local environment (and pretty much every language can) and read <code>STDIN</code> - and pretty much every language can. </p>\n\n<p>You can comfortably run <code>perl</code> and <code>python</code> scripts along side each other - the server simply doesn't care. </p>\n\n<p>To get more complicated, you might want to preload/prefork your cgi scripts, and then it starts to be a <em>little</em> more complicated to use arbitrary languages. </p>\n\n<p>But for a basic run-on-demand cgi script, anything will suffice. </p>\n"}], "owner": {"reputation": 11, "user_id": 7773630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9448123136513c47c286ffd500a58943?s=128&d=identicon&r=PG&f=1", "display_name": "abhishek", "link": "https://stackoverflow.com/users/7773630/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521554946, "creation_date": 1521554057, "question_id": 49386143, "link": "https://stackoverflow.com/questions/49386143/can-we-run-perl-and-python-cgi-web-portal-from-same-server-box", "title": "Can we run perl and python cgi web portal from same server/box", "body": "<p>I have a box where we are running a internal web page build on perl-cgi. My knowledge is little limited about coding. but I want to run some pages built on python cgi. Technically is it possible to run both perl+python cgi on same server without doing much configuration change</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1521549949, "post_id": 49383871, "comment_id": 85769924, "body": "Your code is incomplete. You are not declaring <code>$param</code> or <code>$cust_name</code>, and you are not telling us what those values are, or what&#39;s in the cell. Please <a href=\"https://stackoverflow.com/posts/49383871/edit\">edit</a> your question and show your <i>real code</i>, as well as the data you are working with."}, {"owner": {"reputation": 11, "user_id": 9522572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7BWIMooE4wk/AAAAAAAAAAI/AAAAAAAAACM/JTI0zCU9ygU/photo.jpg?sz=128", "display_name": "Deepak Agarwal", "link": "https://stackoverflow.com/users/9522572/deepak-agarwal"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521577605, "post_id": 49383871, "comment_id": 85788689, "body": "Hi Simbabque, I have updated the code and provided the corresponding inputs/outputs. Please suggest how to read whole data from a cell at once."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521625594, "post_id": 49383871, "comment_id": 85806836, "body": "Which version of Spreadsheet::ParseExcel are you using, and what version of Excel file do you have? In the latest S::PE there is no method <code>Value</code>. All the methods are lower case, so y our code would not work. There could be a limitation on the number of characters a cell can store. Or it could be that the format of the cell boggles up the value. Try <code>$cell-&gt;unformatted</code> instead and see if that gives you a longer string."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9522572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7BWIMooE4wk/AAAAAAAAAAI/AAAAAAAAACM/JTI0zCU9ygU/photo.jpg?sz=128", "display_name": "Deepak Agarwal", "link": "https://stackoverflow.com/users/9522572/deepak-agarwal"}, "edited": false, "score": 0, "creation_date": 1521661057, "post_id": 49404668, "comment_id": 85832013, "body": "Thanks, I figured out this was an issue due to [compatibility mode]. Thanks for suggestions"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1521630361, "creation_date": 1521630361, "answer_id": 49404668, "question_id": 49383871, "link": "https://stackoverflow.com/questions/49383871/how-to-change-the-character-limit-when-read-a-cell-from-excel-sheet-in-perl/49404668#49404668", "title": "how to change the character limit when read a cell from excel sheet in perl", "body": "<p>Perhaps you aren't saving it correctly?  The following is pulled from the synopsis of <code>Spreadsheet::WriteExcel v2.40</code> and <code>Spreadsheet::ParseExcel v0.65</code> and it handles large values without any problem:</p>\n\n<p><strong>write_huge.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Spreadsheet::WriteExcel;\n\n# Create a new Excel workbook\nmy $workbook = Spreadsheet::WriteExcel-&gt;new('perl.xls');\n\n# Add a worksheet\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n#  Add and define a format\nmy $format = $workbook-&gt;add_format(); # Add a format\n$format-&gt;set_bold();\n$format-&gt;set_color('red');\n$format-&gt;set_align('center');\n\n# Write a formatted and unformatted string, row and column notation.\nmy ($row,$col) = (0,0);\nmy $huge = \"0,1,2,3,4,5,6,7,8,9\\n\"x30;\n$worksheet-&gt;write($row, $col, $huge, $format);\n$worksheet-&gt;write(1,    $col, $huge);\n</code></pre>\n\n<p><strong>read_huge.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse Spreadsheet::ParseExcel;\n\nmy $parser   = Spreadsheet::ParseExcel-&gt;new();\nmy $workbook = $parser-&gt;parse('perl.xls');\n\nif ( !defined $workbook ) {\n    die $parser-&gt;error(), \".\\n\";\n}\n\nfor my $worksheet ( $workbook-&gt;worksheets() ) {\n\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) {\n        for my $col ( $col_min .. $col_max ) {\n\n            my $cell = $worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n\n            print \"Row, Col    = ($row, $col)\\n\";\n            print \"Value       = \", $cell-&gt;value(),       \"\\n\";\n            print \"Unformatted = \", $cell-&gt;unformatted(), \"\\n\";\n            print \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>perl write_huge.pl\nperl read_huge.pl\n\nRow, Col    = (0, 0)\nValue       = 0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n\nUnformatted = 0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n\n\nRow, Col    = (1, 0)\nValue       = 0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n\nUnformatted = 0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n0,1,2,3,4,5,6,7,8,9\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9522572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7BWIMooE4wk/AAAAAAAAAAI/AAAAAAAAACM/JTI0zCU9ygU/photo.jpg?sz=128", "display_name": "Deepak Agarwal", "link": "https://stackoverflow.com/users/9522572/deepak-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521630361, "creation_date": 1521547823, "last_edit_date": 1521624065, "question_id": 49383871, "link": "https://stackoverflow.com/questions/49383871/how-to-change-the-character-limit-when-read-a-cell-from-excel-sheet-in-perl", "title": "how to change the character limit when read a cell from excel sheet in perl", "body": "<p>I am trying to read a cell value from the excel.</p>\n\n<p>Problem is, it is reading only first 255 characters from a particular cell.\nHow can I increase the limit of character reading in perl?</p>\n\n<pre><code>INPUT at xls (row, column) (0,0) = \"1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\"\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2,3,4,5,6,7,8,9\n1,2\n\n\nuse strict;use warnings;\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::WriteExcel;\n\nmy $xls_name = $ARGV[0]; my $PARAM_SHEET = $ARGV[1];\nmy $param_sheet = $excel-&gt;Worksheet($PARAM_SHEET);\nmy $FILE = \"$xls_name\";\nmy $pin_value ;my $pin;\nmy $excel = Spreadsheet::ParseExcel::Workbook-&gt;Parse($FILE);\n$pin            = $param_sheet-&gt;Cell(0,0);\n$pin_value      = ($pin-&gt;Value());\n$pin_value      =~ s/\\s+$//;\nprint \"$pin_value\\n\";\n</code></pre>\n"}, {"tags": ["perl", "asynchronous", "anyevent"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1521548714, "post_id": 49383664, "comment_id": 85769096, "body": "Maybe you could try <a href=\"https://metacpan.org/pod/AnyEvent::Fork\" rel=\"nofollow noreferrer\"><code>AnyEvent::Fork</code></a>?"}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1521557769, "post_id": 49383664, "comment_id": 85776258, "body": "There are a few options that would suit better, I am not a big fun of doing syscalls but you could try to use the http_head method or create an event loop using forks, or overide the http_get method with your desired subroutine."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1521563125, "post_id": 49383664, "comment_id": 85780314, "body": "Does it have to be <code>AnyEvent</code>? Also: Perl 5.8.8 is very very old. You should consider upgrading. It&#39;s very nearly 10 years out of date."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521570277, "post_id": 49383664, "comment_id": 85784737, "body": "Isn&#39;t the <code>sub { ... }</code> in <code>get_http</code> where you code your custom functionality?  Why do you want to replace <code>http_get</code> itself?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521599492, "post_id": 49383664, "comment_id": 85796146, "body": "See <a href=\"https://stackoverflow.com/q/43024722/4653379\">this SO page</a> for a related problem and various options."}], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1616595859, "creation_date": 1521547246, "last_edit_date": 1616595859, "question_id": 49383664, "link": "https://stackoverflow.com/questions/49383664/parallel-processing-using-anyevent-any-module-with-custom-function", "title": "Parallel processing using AnyEvent (Any) module with custom function", "body": "<p>I am trying to use the <a href=\"http://search.cpan.org/%7Emlehmann/AnyEvent-7.14/lib/AnyEvent.pm\" rel=\"nofollow noreferrer\">AnyEvent</a> module to fetch some information of several web pages in parallel.</p>\n<p>In Example: <a href=\"https://perlmaven.com/fetching-several-web-pages-in-parallel-using-anyevent\" rel=\"nofollow noreferrer\">Fetching several web pages in parallel using AnyEvent</a></p>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse AnyEvent;\nuse AnyEvent::HTTP;\n\nmy @urls = qw(\n    https://perlmaven.com/\n    https://cn.perlmaven.com/\n    https://br.perlmaven.com/\n);\n\nmy $cv = AnyEvent-&gt;condvar;\n\nforeach my $url (@urls) {\n    print &quot;Start $url\\n&quot;;\n    $cv-&gt;begin;\n    http_get $url, sub {\n        my ($html) = @_;\n        print &quot;$url received, Size: &quot; . length($html) . &quot;\\n&quot;;\n        $cv-&gt;end;\n    };\n}\n\nprint 'Before the event-loop' . &quot;\\n&quot;;\n$cv-&gt;recv;\nprint 'Finish' . &quot;\\n&quot;;\n</code></pre>\n<p>This is working fine but now I want to run some custom subroutine instead of using <a href=\"http://search.cpan.org/%7Emlehmann/AnyEvent-HTTP-2.22/HTTP.pm\" rel=\"nofollow noreferrer\">AnyEvent::HTTP</a> <strong>http_get</strong></p>\n<p><strong>Custom subroutine:</strong></p>\n<pre><code>sub http_get{\n    my $url = shift;\n    my $cmd = q{curl -s --head } . $url . q{ | grep 'Content-Length:' | awk '{print $2}'};\n    my $length = qx{$cmd};\n    return $length;\n}\n</code></pre>\n<p><strong>Question:</strong>\nHow do I modify this custom http_get to work with <a href=\"http://search.cpan.org/%7Emlehmann/AnyEvent-7.14/lib/AnyEvent.pm\" rel=\"nofollow noreferrer\">AnyEvent</a>?</p>\n<p>My main requirement is that I want to call some methods inside the for loop and want to change existing behaviour by calling it asynchronously by using any module with compatible perl version 5.8.8:</p>\n<pre><code>my $db_rows = $self-&gt;_scan_data(); # Get Data from DB\nfor my $listener ( @{ $self-&gt;listener } ) { # Loop on listener. # runs 2 time loop.\n    if ( $listener-&gt;can('compute_scan_data') ) { # Check if listener is available.\n        $listener-&gt;compute_scan_data($db_rows); # Want to run this asynchronously\n    }\n}\n</code></pre>\n<p><strong>Perl Version Information:</strong></p>\n<pre><code>[09:20:22 user@server ~ # perl -V\nSummary of my perl5 (revision 5 version 8 subversion 8) configuration:\n  Platform:\n    osname=linux, osvers=2.6.18-53.1.14.el5pae, archname=i386-linux-thread-multi\n    uname='linux builder16.centos.org 2.6.18-53.1.14.el5pae #1 smp wed mar 5 12:07:47 est 2008 i686 athlon i386 gnulinux '\n    config_args='-des -Doptimize=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables -Dversion=5.8.8 -Dmyhostname=localhost -Dperladmin=user@localhost -Dcc=gcc -Dcf_by=Red Hat, Inc. -Dinstallprefix=/usr -Dprefix=/usr -Darchname=i386-linux -Dvendorprefix=/usr -Dsiteprefix=/usr -Duseshrplib -Dusethreads -Duseithreads -Duselargefiles -Dd_dosuid -Dd_semctl_semun -Di_db -Ui_ndbm -Di_gdbm -Di_shadow -Di_syslog -Dman3ext=3pm -Duseperlio -Dinstallusrbinperl=n -Ubincompat5005 -Uversiononly -Dpager=/usr/bin/less -isr -Dd_gethostent_r_proto -Ud_endhostent_r_proto -Ud_sethostent_r_proto -Ud_endprotoent_r_proto -Ud_setprotoent_r_proto -Ud_endservent_r_proto -Ud_setservent_r_proto -Dinc_version_list=5.8.7 5.8.6 5.8.5 -Dscriptdir=/usr/bin'\n    hint=recommended, useposix=true, d_sigaction=define\n    usethreads=define use5005threads=undef useithreads=define usemultiplicity=define\n    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef\n    use64bitint=undef use64bitall=undef uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='gcc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm',\n    optimize='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables',\n    cppflags='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -I/usr/include/gdbm'\n    ccversion='', gccversion='4.1.2 20071124 (Red Hat 4.1.2-42)', gccosandvers=''\n    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12\n    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=4, prototype=define\n  Linker and Libraries:\n    ld='gcc', ldflags =' -L/usr/local/lib'\n    libpth=/usr/local/lib /lib /usr/lib\n    libs=-lresolv -lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc\n    perllibs=-lresolv -lnsl -ldl -lm -lcrypt -lutil -lpthread -lc\n    libc=/lib/libc-2.5.so, so=so, useshrplib=true, libperl=libperl.so\n    gnulibc_version='2.5'\n  Dynamic Linking:\n    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E -Wl,-rpath,/usr/lib/perl5/5.8.8/i386-linux-thread-multi/CORE'\n    cccdlflags='-fPIC', lddlflags='-shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables -L/usr/local/lib'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: MULTIPLICITY PERL_IMPLICIT_CONTEXT\n                        PERL_MALLOC_WRAP USE_ITHREADS USE_LARGE_FILES\n                        USE_PERLIO USE_REENTRANT_API\n  Built under linux\n  Compiled at Sep 17 2008 13:37:09\n  @INC:\n    /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.7/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.6/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi\n    /usr/lib/perl5/site_perl/5.8.8\n    /usr/lib/perl5/site_perl/5.8.7\n    /usr/lib/perl5/site_perl/5.8.6\n    /usr/lib/perl5/site_perl/5.8.5\n    /usr/lib/perl5/site_perl\n    /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.7/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.6/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi\n    /usr/lib/perl5/vendor_perl/5.8.8\n    /usr/lib/perl5/vendor_perl/5.8.7\n    /usr/lib/perl5/vendor_perl/5.8.6\n    /usr/lib/perl5/vendor_perl/5.8.5\n    /usr/lib/perl5/vendor_perl\n    /usr/lib/perl5/5.8.8/i386-linux-thread-multi\n    /usr/lib/perl5/5.8.8\n    .\n</code></pre>\n"}, {"tags": ["perl", "scripting", "field", "super"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1521547858, "post_id": 49383584, "comment_id": 85768508, "body": "You will have to give more information. Please <a href=\"https://stackoverflow.com/posts/49383584/edit\">edit</a> your question and tell us what you are doing, in which context you are working and with what modules."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1521555748, "creation_date": 1521555748, "answer_id": 49386795, "question_id": 49383584, "link": "https://stackoverflow.com/questions/49383584/while-using-this-line-use-fields-package-super-praveen-qwpath-getting/49386795#49386795", "title": "while using this line use fields __PACKAGE__-&gt;SUPER::_praveen, qw(path); getting error SUPER.pm not found", "body": "<p>I'm not surprised you're getting errors: the <code>fields</code> pragma expects a list of field names as parameters, and even if the inherited class provides something suitable through a call like that, it is far from clear whether the superior class is in scope at that point.</p>\n\n<p>If you want more help then you must show a minimal code sample that reproduces the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1521572267, "last_edit_date": 1521572267, "creation_date": 1521571834, "answer_id": 49392073, "question_id": 49383584, "link": "https://stackoverflow.com/questions/49383584/while-using-this-line-use-fields-package-super-praveen-qwpath-getting/49392073#49392073", "title": "while using this line use fields __PACKAGE__-&gt;SUPER::_praveen, qw(path); getting error SUPER.pm not found", "body": "<p>That error shouldn't be produced by that line since the only module loaded by that line is <code>fields.pm</code>. Unsurprisingly, I can't replicate your error.</p>\n\n<p><code>Foo.pm</code>:</p>\n\n<pre><code>package Foo;\nuse strict;\nuse warnings qw( all );\nsub _praveen { qw( id ) }\n1;\n</code></pre>\n\n<p><code>Bar.pm</code>:</p>\n\n<pre><code>package Bar;\nuse strict;\nuse warnings qw( all );\nuse parent 'Foo';\nuse fields __PACKAGE__-&gt;SUPER::_praveen, qw( path );\n1;\n</code></pre>\n\n<p><code>a.pl</code>:</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\nuse FindBin qw( $RealBin );\nuse lib $RealBin;\nuse Bar qw( );\nsay \"ok\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perlbrew use 5.18.2t\n\n$ perl a.pl\nok\n</code></pre>\n\n<p>Please provide a minimal, runnable demonstration of the problem.</p>\n"}], "owner": {"reputation": 11, "user_id": 3698333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/038a0e67d8630f9193d5e744a741b0c3?s=128&d=identicon&r=PG&f=1", "display_name": "praveen", "link": "https://stackoverflow.com/users/3698333/praveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1521648830, "answer_count": 2, "score": -1, "last_activity_date": 1521572267, "creation_date": 1521546926, "last_edit_date": 1521547834, "question_id": 49383584, "link": "https://stackoverflow.com/questions/49383584/while-using-this-line-use-fields-package-super-praveen-qwpath-getting", "closed_reason": "Needs details or clarity", "title": "while using this line use fields __PACKAGE__-&gt;SUPER::_praveen, qw(path); getting error SUPER.pm not found", "body": "<pre><code>use fields __PACKAGE__-&gt;SUPER::_praveen, qw(path);\n</code></pre>\n\n<p>while executing above line with perl_5.18.2 getting an error @INC SUPER.pm not found.\nI am able to compile above line with Perl 5.8.8\ncan  you please help me on this</p>\n"}, {"tags": ["perl", "system", "pid", "kill"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1521543483, "post_id": 49379374, "comment_id": 85765490, "body": "The <code>$processName</code> doesn&#39;t get interpolated within <code>q&#47;&#47;</code>. This means you&#39;re grepping for literal <code>dollar</code>-<code>p</code>-<code>r</code>-<code>o</code>-<code>\u2026</code> which eventually returns nothing."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1521536624, "creation_date": 1521536624, "answer_id": 49380003, "question_id": 49379374, "link": "https://stackoverflow.com/questions/49379374/kill-a-process-from-perl-script/49380003#49380003", "title": "Kill a process from perl script", "body": "<p>You have the different variables <code>$processName</code> and <code>$jobName</code>, so the whole <code>` `</code> expression ends up empty. <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\"><code>use strict</code></a> would have pointed that out; it's useful even for three-line scripts. The <code>kill</code> error message is what you get when you run it without any arguments.</p>\n\n<p>Pro tip: <a href=\"https://gitlab.com/procps-ng/procps/#procps\" rel=\"nofollow noreferrer\"><code>pkill</code></a> exists, you can replace the whole problematic hack with one command.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 10, "last_activity_date": 1586669995, "last_edit_date": 1586669995, "creation_date": 1521537099, "answer_id": 49380136, "question_id": 49379374, "link": "https://stackoverflow.com/questions/49379374/kill-a-process-from-perl-script/49380136#49380136", "title": "Kill a process from perl script", "body": "<p>One problem is that the command line that invokes the script has the name of the process which you then query, by design; so one thing found will be the script itself. </p>\n\n<p>This can be guarded against, but why go out to the system with that big pipeline?</p>\n\n<p>Query the process in Perl, for example with <a href=\"http://search.cpan.org/~durist/Proc-ProcessTable-0.39/ProcessTable.pm\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse Proc::ProcessTable;\n\nmy $proc_name = shift // die \"Usage: $0 process-name\\n\";  #/\n\nmy $pid;\nmy $pt = Proc::ProcessTable-&gt;new();\nforeach my $proc (@{$pt-&gt;table}) {\n    next if $proc-&gt;cmndline =~ /$0.*$proc_name/;  # not this script\n    if ($proc-&gt;cmndline =~ /\\Q$proc_name/) {\n        $pid = $proc-&gt;pid;\n        last;\n    }   \n}\ndie \"Not found process with '$proc_name' in its name\\n\" if not defined $pid;    \n\nkill 9, $pid;                    # must it be 9 (SIGKILL)? \nmy $gone_pid = waitpid $pid, 0;  # then check that it's gone\n</code></pre>\n\n<p>Note that it is far nicer to \"kill\" a process by sending it <code>SIGTERM</code> (usually 15), not <code>SIGKILL</code>.</p>\n\n<p>Looking for a process \"name\" can be perilous as there are many processes with long command lines running on a modern system that may contain that word. The code uses your requirement, to simply query by submitted name, but I recommend strengthening that with additional checks. </p>\n\n<p>For many process details that the module can query see its <a href=\"http://search.cpan.org/~durist/Proc-ProcessTable-0.39/Process/Process.pm\" rel=\"nofollow noreferrer\">stub module</a>.</p>\n\n<p>Even if you'd rather parse the process table yourself I would get only <code>ps -ef</code> and then parse it in the script. That gives far more flexibility in ensuring that you really terminate what  you want.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521537591, "post_id": 49380159, "comment_id": 85761251, "body": "The <code>$processName</code> is present in the command that invokes your script (<code>script proc-name</code> or such) and your pipeline finds that, too. The actual process should be listed before the script but you <i>are</i> relying on that."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1521539434, "post_id": 49380159, "comment_id": 85762565, "body": "No point having this as a perl script when it might as well be just a regular shell script."}, {"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1521542109, "post_id": 49380159, "comment_id": 85764491, "body": "@ChrisTurner: Since the initial question is how to kill a process from within Perl, the choice of using a shell script instead seems to be in conflict with the premise of the question. There are problems associated with this answer, but the fact that it&#39;s done from within Perl is not one of them. (E.g.: Use <code>pgrep</code> instead; don&#39;t pipe user input directly into backticks.)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1521543621, "post_id": 49380159, "comment_id": 85765591, "body": "Did you know Perl has a built-in function <a href=\"http://perldoc.perl.org/functions/kill.html\" rel=\"nofollow noreferrer\"><code>kill</code></a>? No need to shell-out."}], "tags": [], "owner": {"reputation": 573, "user_id": 4210950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ae7dd9acf9746f6e7090ae2830af66a?s=128&d=identicon&r=PG&f=1", "display_name": "blackfury", "link": "https://stackoverflow.com/users/4210950/blackfury"}, "is_accepted": false, "score": 1, "last_activity_date": 1521537148, "creation_date": 1521537148, "answer_id": 49380159, "question_id": 49379374, "link": "https://stackoverflow.com/questions/49379374/kill-a-process-from-perl-script/49380159#49380159", "title": "Kill a process from perl script", "body": "<pre><code>my $pid = `ps -ef | grep '$processName' | grep -v grep | awk '{print \\$2}'`;\nprint $pid;\nsystem(\"kill -9 $pid\");\n</code></pre>\n\n<p>This one works!!!</p>\n"}, {"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 0, "last_activity_date": 1521542750, "last_edit_date": 1521542750, "creation_date": 1521538728, "answer_id": 49380729, "question_id": 49379374, "link": "https://stackoverflow.com/questions/49379374/kill-a-process-from-perl-script/49380729#49380729", "title": "Kill a process from perl script", "body": "<p>You can kill a process by name without invoking the shell by using <a href=\"http://search.cpan.org/~pjf/IPC-System-Simple-1.25/lib/IPC/System/Simple.pm\" rel=\"nofollow noreferrer\"><code>IPC::System::Simple</code></a>:</p>\n\n<pre><code>use IPC::System::Simple qw(systemx EXIT_ANY);\nsystemx(EXIT_ANY, 'pkill', '-9', '--', $processName);\n</code></pre>\n\n<p>Or you can collect a list of process IDs first:</p>\n\n<pre><code>use IPC::System::Simple qw(capturex EXIT_ANY);\nkill 9, capturex(EXIT_ANY, 'pgrep', '--', $processName));\n</code></pre>\n\n<p>Then you don't have to worry about <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\"><code>String::ShellQuote</code></a>. See <a href=\"https://stackoverflow.com/questions/3212128/perl-equivalent-of-phps-escapeshellarg\">this answer</a> by daxim.</p>\n"}], "owner": {"reputation": 573, "user_id": 4210950, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ae7dd9acf9746f6e7090ae2830af66a?s=128&d=identicon&r=PG&f=1", "display_name": "blackfury", "link": "https://stackoverflow.com/users/4210950/blackfury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5077, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1586669995, "creation_date": 1521534302, "last_edit_date": 1521537180, "question_id": 49379374, "link": "https://stackoverflow.com/questions/49379374/kill-a-process-from-perl-script", "title": "Kill a process from perl script", "body": "<p>I am trying to kill a process by name which i will pass as a variable to a system command. </p>\n\n<p>Below is what i have:</p>\n\n<pre><code>my $processName=$ARGV[0];\nprint \"$processName\\n\";\nsystem(q/kill -9 `ps -ef | grep '$processName' | grep -v grep | awk '{print $2}'`/);\n</code></pre>\n\n<p>The above script throws an error:</p>\n\n<pre><code>kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]\n</code></pre>\n\n<p>However, if i directly enter the process name inside the system command, it works.</p>\n\n<p>Can someone help me on this?</p>\n"}, {"tags": ["linux", "perl", "snmp", "net-snmp"], "answers": [{"tags": [], "owner": {"reputation": 1292, "user_id": 6219718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MEDMt70D6i4/AAAAAAAAAAI/AAAAAAAAASM/MoQBXDayncg/photo.jpg?sz=128", "display_name": "Yuri Lachin", "link": "https://stackoverflow.com/users/6219718/yuri-lachin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521549947, "creation_date": 1521549947, "answer_id": 49384610, "question_id": 49378208, "link": "https://stackoverflow.com/questions/49378208/snmpbulk-is-taking-too-much-time-to-fetch-data/49384610#49384610", "title": "snmpbulk is taking too much time to fetch data", "body": "<ol>\n<li>First obvious step - poll devices in parallel.</li>\n<li>Move poller closer to devices to reduce RTT latency for requests.</li>\n<li>Experiment with the max-repetitions field in the GETBULK PDU - send request for many OIDs at once.</li>\n<li>Send multiple OID requests to a device simultaneously (for\nexample use multiple instances of poller to query subsets of OIDs).\nBeware that it can easily overload CPU on device.</li>\n</ol>\n"}], "owner": {"reputation": 41, "user_id": 4563454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4c997fb57726d333abb70d009db6a?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagwan Gurav", "link": "https://stackoverflow.com/users/4563454/bhagwan-gurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521549947, "creation_date": 1521529749, "question_id": 49378208, "link": "https://stackoverflow.com/questions/49378208/snmpbulk-is-taking-too-much-time-to-fetch-data", "title": "snmpbulk is taking too much time to fetch data", "body": "<p>I am using snmpbulk to get data of devices in network using multiple OID's. but for those OID's there are lots of sub OID's(more than 20,000 for each OID's). So it takes much time to fetch data. How can I implement this so it will take less time.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 4301, "user_id": 802482, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FbPnx.png?s=128&g=1", "display_name": "Black", "link": "https://stackoverflow.com/users/802482/black"}, "edited": false, "score": 0, "creation_date": 1521590870, "post_id": 49380807, "comment_id": 85794026, "body": "I&#39;m not sure I followed these instructions properly.  I tried issuing the first command, and it did a bunch of stuff, but the problem remains.  Could you add more info?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 4301, "user_id": 802482, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FbPnx.png?s=128&g=1", "display_name": "Black", "link": "https://stackoverflow.com/users/802482/black"}, "edited": false, "score": 0, "creation_date": 1521622278, "post_id": 49380807, "comment_id": 85804724, "body": "<a href=\"https://stackoverflow.com/questions/ask\">Open a new question</a> and show the details of &quot;bunch of stuff&quot;."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1521538987, "creation_date": 1521538987, "answer_id": 49380807, "question_id": 49376535, "link": "https://stackoverflow.com/questions/49376535/bugzilla-5-0-4-doesnt-recognize-apache2sizelimit-0-97/49380807#49380807", "title": "Bugzilla 5.0.4 doesn&#39;t recognize Apache2::SizeLimit 0.97", "body": "<p>The problem stems from the module existing in two distributions: <a href=\"https://metacpan.org/pod/distribution/mod_perl/docs/api/Apache2/SizeLimit.pod\" rel=\"nofollow noreferrer\">mod_perl2</a> and <a href=\"https://metacpan.org/pod/Apache::SizeLimit\" rel=\"nofollow noreferrer\">Apache-SizeLimit</a>. Qualify the distro name to resolve to the dist with the higher version number:</p>\n\n<pre><code>cpan PHRED/Apache-SizeLimit-0.97.tar.gz\ncpanm PHRED/Apache-SizeLimit-0.97.tar.gz\n</code></pre>\n\n<p>Unfortunately, <code>\u2026/perl install-module.pl</code> is not able to resolve a qualified name, so you need to use <code>cpan</code> or <code>cpanm</code> or the like.</p>\n\n<p>Please report these bugs at bugzilla.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6004285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aAA4HHcKz7Q/AAAAAAAAAAI/AAAAAAAAIic/AOkFIkQCIuU/photo.jpg?sz=128", "display_name": "Dylan Hardison", "link": "https://stackoverflow.com/users/6004285/dylan-hardison"}, "is_accepted": false, "score": 0, "last_activity_date": 1521594646, "creation_date": 1521594646, "answer_id": 49396608, "question_id": 49376535, "link": "https://stackoverflow.com/questions/49376535/bugzilla-5-0-4-doesnt-recognize-apache2sizelimit-0-97/49396608#49396608", "title": "Bugzilla 5.0.4 doesn&#39;t recognize Apache2::SizeLimit 0.97", "body": "<p>Bugzilla project admin here. install-module.pl is hot garbage, but the real issue here is that you can't really (easily) get a working mod_perl installed from cpan. </p>\n\n<p>The correct-ish thing at the moment is use the distro's package manager to install mod_perl.</p>\n"}, {"tags": [], "owner": {"reputation": 4301, "user_id": 802482, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FbPnx.png?s=128&g=1", "display_name": "Black", "link": "https://stackoverflow.com/users/802482/black"}, "is_accepted": false, "score": 0, "last_activity_date": 1521623315, "creation_date": 1521623315, "answer_id": 49402110, "question_id": 49376535, "link": "https://stackoverflow.com/questions/49376535/bugzilla-5-0-4-doesnt-recognize-apache2sizelimit-0-97/49402110#49402110", "title": "Bugzilla 5.0.4 doesn&#39;t recognize Apache2::SizeLimit 0.97", "body": "<p>I found answers with the help of a Bugzilla dev, I needed to do </p>\n\n<pre><code>curl -L https://cpanmin.us &gt; /usr/local/bin/cpanm\nchmod 755 /usr/local/bin/cpanm\n</code></pre>\n\n<p>to install cpanm, then </p>\n\n<pre><code>cpanm --installdeps --notest --with-recommends .\nyum install mod_perl-devel\ncpanm --notest Apache2::SizeLimit\n</code></pre>\n\n<p>after which <code>./checksetup</code> resolved the 0.96 version of SizeLimit</p>\n"}], "owner": {"reputation": 4301, "user_id": 802482, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FbPnx.png?s=128&g=1", "display_name": "Black", "link": "https://stackoverflow.com/users/802482/black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1521623315, "creation_date": 1521521332, "question_id": 49376535, "link": "https://stackoverflow.com/questions/49376535/bugzilla-5-0-4-doesnt-recognize-apache2sizelimit-0-97", "title": "Bugzilla 5.0.4 doesn&#39;t recognize Apache2::SizeLimit 0.97", "body": "<p>I'm upgrading Bugzilla from 4.2.1 to 5.0.4 on Centos 6.9</p>\n\n<p>The 'checksetup.pl' says I'm missing optional module Apache2::SizeLimit v 0.96, but when I do:</p>\n\n<pre><code>/usr/bin/perl install-module.pl Apache2::SizeLimit\n</code></pre>\n\n<p>It tells me </p>\n\n<blockquote>\n  <p>Installing Apache2::SizeLimit version 0.96...</p>\n  \n  <p>Apache2::SizeLimit is up to date (0.97).</p>\n</blockquote>\n\n<p>So, it seems checksetup.pl doesn't recognise that 0.97 is already installed.</p>\n\n<p>It doesn't seem like theres an easy process to downgrade this module.  Is there another way to resolve this?</p>\n"}, {"tags": ["perl", "compilation", "raspbian"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1521508186, "post_id": 49373884, "comment_id": 85750864, "body": "Look inside the Build script and see if there is a minimum version of Time::HiRes you could install, then try to install it with cpan / cpanm."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1521508481, "post_id": 49373884, "comment_id": 85750932, "body": "<a href=\"https://www.cpantesters.org/distro/T/Time-HiRes.html\" rel=\"nofollow noreferrer\">cpantesters.org/distro/T/Time-HiRes.html</a> seems to pass on all Debian flavors (I don&#39;t know about Raspian), and version 1.9757 seems to be the latest, you are trying 1.9754"}, {"owner": {"reputation": 437, "user_id": 3803805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Tii8c.jpg?s=128&g=1", "display_name": "Jonathan Holvey", "link": "https://stackoverflow.com/users/3803805/jonathan-holvey"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1521512082, "post_id": 49373884, "comment_id": 85751771, "body": "The build script doesn&#39;t specify a minimum version, so I ran <code>sudo cpanm Time::HiRes</code> on its own, but it failed in the same way, using version 1.9757. Weirdly, using <code>--verbose</code> with <code>cpanm</code> allowed it to compile successfully. I&#39;ll try the build script again later and see how it goes."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1521528472, "post_id": 49373884, "comment_id": 85756361, "body": "You should try and look at the whole log. This looks like part of a configuration script for that module itself or some upstream dependency. If it fails, might be because some upstream, non-Perl library is not installed. That is part of the configuration of the module, which tries to compile a small program <a href=\"https://metacpan.org/source/JHI/Time-HiRes-1.9757/Makefile.PL\" rel=\"nofollow noreferrer\">metacpan.org/source/JHI/Time-HiRes-1.9757/Makefile.PL</a> (check out line 744). Extract that program from there to see what&#39;s going on. It might have to do with the fact that it&#39;s a Raspi, but then it&#39;s a timeout... Difficult to say."}], "owner": {"reputation": 437, "user_id": 3803805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Tii8c.jpg?s=128&g=1", "display_name": "Jonathan Holvey", "link": "https://stackoverflow.com/users/3803805/jonathan-holvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1521501176, "creation_date": 1521501176, "question_id": 49373884, "link": "https://stackoverflow.com/questions/49373884/how-to-debug-program-compilation-when-perl-module-fails", "title": "How to debug program compilation when Perl module fails", "body": "<p>I'm trying to compile <a href=\"https://github.com/alexrj/Slic3r/tree/1.2.9\" rel=\"nofollow noreferrer\">Slic3r 1.2.9 (Git 65a23b)</a> on Raspbian, and running <code>sudo perl Build.PL --verbose</code> fails while  building the Perl module Time-HiRes-1.9754:</p>\n\n<pre><code>...\n--&gt; Working on Time::HiRes\nFetching http://www.cpan.org/authors/id/J/JH/JHI/Time-HiRes-1.9754.tar.gz ... OK\nConfiguring Time-HiRes-1.9754 ... FAIL\n! Timed out (&gt; 60s). Use --verbose to retry.\n! Configure failed for Time-HiRes-1.9754. See /root/.cpanm/work/1520227993.988/build.log for details.\n</code></pre>\n\n<p>The log file shows a little more information, but I've never worked with Perl and I don't know where to start debugging:</p>\n\n<pre><code>$ tail /root/.cpanm/work/1520234788.2186/build.log\nLooking for clock_getres()... found.\nLooking for clock_nanosleep()... found.\nLooking for clock()... found.\nLooking for working futimens()... found.\nLooking for working utimensat()... found.\nYou seem to have subsecond timestamp setting.\nLooking for stat() subsecond timestamps...\nTrying struct stat st_atimespec.tv_nsec...-&gt; FAIL Timed out (&gt; 60s). Use --verbose to retry.\n-&gt; N/A\n-&gt; FAIL Configure failed for Time-HiRes-1.9754. See /root/.cpanm/work/1520234788.2186/build.log for details.\n</code></pre>\n\n<p>I've posted an <a href=\"https://github.com/alexrj/Slic3r/issues/4336\" rel=\"nofollow noreferrer\">issue with Slic3r</a> on GitHub, but I haven't had any suggestions yet - presumably it's not actually a problem with Slic3r itself.</p>\n\n<p>What should I do next to work out what's going wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 473, "user_id": 189395, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/h6o1b.png?s=128&g=1", "display_name": "mr.zog", "link": "https://stackoverflow.com/users/189395/mr-zog"}, "edited": false, "score": 0, "creation_date": 1521496037, "post_id": 49372645, "comment_id": 85746954, "body": "If I run the script unmodified I get <code>Unsuccessful stat on filename containing newline at &#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;XML&#47;Simple.pm line 957.</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1521496992, "post_id": 49372645, "comment_id": 85747412, "body": "Can you reduce the problem to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for us? 400+ lines is beyond the scope of what most people will be willing to look at on SO."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1521497076, "post_id": 49372645, "comment_id": 85747452, "body": "The syntax error is a syntax error because you need to include <code>ssl_opts</code> <i>inside</i> the call to <code>LWP::UserAgent-&gt;new</code>."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1521515237, "post_id": 49372645, "comment_id": 85752567, "body": "With <code>ssl_opts =&gt; {</code> are you trying to create a variable or include it as an argument to your UserAgent?  The preceding <code>);</code> may need to go after it.  The error seems pretty detailed as to what&#39;s going on (syntax error)"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 0, "last_activity_date": 1521539660, "creation_date": 1521539660, "answer_id": 49381046, "question_id": 49372645, "link": "https://stackoverflow.com/questions/49372645/need-to-make-perl-script-use-https/49381046#49381046", "title": "need to make perl script use https", "body": "<p>Correct syntax:</p>\n\n<pre><code>require LWP::Protocol::https;\n# Fail at compile time if dependencies are not met.\n# This belongs near the `use` statements at the top.\n\n...\n\n$userAgent = LWP::UserAgent-&gt;new(\n    agent =&gt; 'VCMgmtLib',\n    keep_alive =&gt; 1,\n    ssl_opts =&gt; {\n        SSL_ca_path     =&gt; '/etc/ssl/certs',\n        verify_hostname =&gt; 0,\n    }\n);\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/LWP::UserAgent#ssl_opts\" rel=\"nofollow noreferrer\">LWP::UserAgent#ssl_opts</a>.</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/6795030/how-to-ignore-certificate-verify-failed-error-in-perl\">How to ignore &#39;Certificate Verify Failed&#39; error in perl?</a></p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1522770397, "post_id": 49634172, "comment_id": 86275716, "body": "Oh god. Why are you using global variables everywhere?"}, {"owner": {"reputation": 473, "user_id": 189395, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/h6o1b.png?s=128&g=1", "display_name": "mr.zog", "link": "https://stackoverflow.com/users/189395/mr-zog"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1522771787, "post_id": 49634172, "comment_id": 86276601, "body": "Two reasons. 1. I inherited this script. 2. I don&#39;t have time to rewrite it."}], "tags": [], "owner": {"reputation": 473, "user_id": 189395, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/h6o1b.png?s=128&g=1", "display_name": "mr.zog", "link": "https://stackoverflow.com/users/189395/mr-zog"}, "is_accepted": false, "score": 0, "last_activity_date": 1522770335, "creation_date": 1522770335, "answer_id": 49634172, "question_id": 49372645, "link": "https://stackoverflow.com/questions/49372645/need-to-make-perl-script-use-https/49634172#49634172", "title": "need to make perl script use https", "body": "<p>Here is how I incorporated daxim's suggestion. THANKS SO MUCH FOR THE HELP!!!</p>\n\n<pre><code>sub connect_bridge {\n$userAgent = LWP::UserAgent-&gt;new(\n    agent =&gt; 'VCMgmtLib',\n    keep_alive =&gt; 1,\n    ssl_opts =&gt; {\n        SSL_ca_path     =&gt; '/etc/ssl/certs',\n        verify_hostname =&gt; 0,\n    }\n);\n    ( $token, $uToken ) = login_bridge();\n\n    if ( $token == 0 || $uToken == 0 ) {\n\n        # Login failed\n        print(\"UNKNOWN: Login failed!\\n\");\n        exit( $ERRORS{'UNKNOWN'} );\n    }\n}\n\n    if ( $token == 0 || $uToken == 0 ) {\n}\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 189395, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/h6o1b.png?s=128&g=1", "display_name": "mr.zog", "link": "https://stackoverflow.com/users/189395/mr-zog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 49381046, "answer_count": 2, "score": -1, "last_activity_date": 1522770335, "creation_date": 1521495057, "question_id": 49372645, "link": "https://stackoverflow.com/questions/49372645/need-to-make-perl-script-use-https", "title": "need to make perl script use https", "body": "<p>I need to make this monitoring script use https and port 443 instead of port 80. The script logs into a server to see how many \"port\" resources are in use. These are <em>not</em> network ports in the usual sense. They are VOIP port resources.</p>\n\n<p>Anyway the script needs to use LWP::UserAgent in ssl mode . . . or something. </p>\n\n<pre><code>    use strict;\n    use Getopt::Long;\n    use LWP::UserAgent;\n    use HTTP::Request::Common qw(GET POST);\n    use XML::Simple;\n    use Data::Dumper;\n    use Sys::Hostname;\n    Getopt::Long::Configure('bundling');\n\n    my ( $oHelp, $oHost, $oUser, $oPw, $oAddress, $oPort, $oWarn, $oCrit );\n\n    my @warn = ( -1, -1 );\n    my @crit = ( -1, -1 );\n    my $state    = 'OK';\n    my $output   = '';\n    my $perfdata = '';\n    my $percentage;\n    my @tmp;\n    my $chr1;\n    my $chr2;\n\n    my $userAgent;\n    my $token;\n    my $uToken;\n# Bridge refers to the telephony server itself. \n    my $bridgeIp   = '';\n    my $bridgeUser = '';\n    my $bridgePw   = '';\n    my $hostName   = hostname;\n    my $bridgePort = '80';\n# I tried changing the above 80 to 443 but it did not help.\n    my $bridgeUrl  = '';\n\n    # Exit-Status-Array\n    my %ERRORS = ( 'UNKNOWN', '-1', 'OK', '0', 'WARNING', '1', 'CRITICAL', '2' );\n\n    # Parameter handling ###########################################################\n\n    GetOptions(\n        \"H|host:s\"    =&gt; \\$oHost,\n        \"U|user:s\"    =&gt; \\$oUser,\n        \"P|pw:s\"      =&gt; \\$oPw,\n        \"A|address:s\" =&gt; \\$oAddress,\n        \"w|warn:s\"    =&gt; \\$oWarn,\n        \"c|crit:s\"    =&gt; \\$oCrit,\n        \"p|port:i\"    =&gt; \\$oPort,\n        \"h|help\"      =&gt; \\$oHelp\n    );\n\n    if ( $oHelp || !$oUser || !$oHost || !$oPw || !$oAddress ) {\n        print &lt;&lt;EOU;\n    Usage: $0 -H &lt;FQDN/IP: string&gt; -A &lt;URL/Address: string&gt; -U &lt;Username: string&gt; \n    -P &lt;Password: string&gt; [-p &lt;Port: integer&gt;] [-w &lt;audio ports warn: integer&gt;,&lt;video ports warn: integer&gt;]\n    [-c &lt;audio ports warn: integer&gt;,&lt;video ports warn: integer&gt;]\n\n\n    Options:\n\n    -H --host STRING or IPADDRESS\n        FQDN or IP-Address of the bridge\n    -A --address STRING \n        Address to the XML API (e.g. http://&lt;hostname&gt;/Receiver.asp)\n    -U --user STRING\n        User name on the bridge\n    -P --pw STRING\n        Password of the account on the bridge\n    -p --port INTEGER\n        TCP port the API listens on the bridge\n    -w --warn INT.INT or INT%,INT%\n        Warning thresholds. Give maximum number or percentage of audio/video ports to be \n        occupied before warning state occurs.\n\n        Example:\n            A value of 50,25 would warn on 51 occupied audio- and/or 26 occupied\n            A value of 75%,85% would warn if 76% of the total audio- and/or 86% of the total\n            video ports are in use.\n    -c --crit INT.INT or INT%,INT%\n        Critical thresholds. Give maximum number of audio/video ports to be \n        occupied before critical state occurs.\n\n        Example:\n            A value of 60,30 would alert on 61 occupied audio- and/or 31 occupied\n            video ports.\n            A value of 85%,95% would alert if 86% of the total audio- and/or 96% of the total\n            video ports are in use.\n\n    EOU\n        exit( $ERRORS{'UNKNOWN'} );\n    }\n\n    $bridgeIp   = $oHost;\n    $bridgeUrl  = $oAddress;\n    $bridgeUser = $oUser;\n    $bridgePw   = $oPw;\n\n    if ($oPort) {\n        $bridgePort = $oPort;\n    }\n\n    if (substr($oWarn, length($oWarn) -1, 1) =~ /\\%/) {\n        $percentage = \"1\";\n        @tmp = split( ',', $oWarn);\n        $chr1 = chop($tmp[0]);\n        $chr2 = chop($tmp[1]);\n        @warn = @tmp;\n    }\n    else {\n        @warn = split( ',', $oWarn );\n    }\n\n    if (substr($oCrit, length($oCrit) -1, 1) =~ /\\%/) {\n        $percentage = \"1\";\n        @tmp = split( ',', $oCrit);\n        $chr1 = chop($tmp[0]);\n        $chr2 = chop($tmp[1]);\n        @crit = @tmp;\n    }\n    else {\n        @crit = split( ',', $oCrit );\n    }\n\n    #if ($oWarn) {\n    #    @warn = split( ',', $oWarn );\n    #}\n    #if ($oCrit) {\n    #    @crit = split( ',', $oCrit );\n    #}\n\n    # Script start #################################################################\n\n    connect_bridge() if !$userAgent;\n\n    my $request =\n        '&lt;TRANS_RSRC_REPORT&gt;&lt;TRANS_COMMON_PARAMS&gt;&lt;MCU_TOKEN&gt;' \n      . $token\n      . '&lt;/MCU_TOKEN&gt;'\n      . '&lt;MCU_USER_TOKEN&gt;'\n      . $uToken\n      . '&lt;/MCU_USER_TOKEN&gt;&lt;MESSAGE_ID&gt;0&lt;/MESSAGE_ID&gt;'\n      . '&lt;/TRANS_COMMON_PARAMS&gt;&lt;ACTION&gt;&lt;GET_CARMEL_REPORT/&gt;&lt;/ACTION&gt;&lt;/TRANS_RSRC_REPORT&gt;';\n\n    my $responseXml = http_post( $bridgeUrl, $request );\n    my $oXml = XMLin($responseXml, ForceArray=&gt;['RSRC_REPORT_RMX']);\n\n    #print( $responseXml . \"\\n\" );\n    # DEBUG: print Dumper($oXml);\n    #print Dumper($oXml);\n\n    my $audioPorts;\n    my $videoPorts;\n    my $audioPortsHD;\n    my $videoPortsHD;\n\n    foreach my $report (\n        @{\n            $oXml-&gt;{'ACTION'}-&gt;{'GET_CARMEL_REPORT'}-&gt;{'RSRC_REPORT_RMX_LIST'}\n              -&gt;{'RSRC_REPORT_RMX'}\n        }\n      )\n    {\n        if ( $report-&gt;{'RSRC_REPORT_ITEM'} eq 'audio' ) {\n\n            # Possible options:\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'RESERVED'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'OCCUPIED'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'TOTAL'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'FREE'}\n\n            $audioPorts = $report;\n        }\n        elsif ( $report-&gt;{'RSRC_REPORT_ITEM'} eq 'video' ) {\n            $videoPorts = $report;\n        }\n    }\n\n    my $videoTypeHD;\n\n    foreach my $reportHD (\n        @{\n            $oXml-&gt;{'ACTION'}-&gt;{'GET_CARMEL_REPORT'}-&gt;{'RSRC_REPORT_RMX_LIST_HD'}\n              -&gt;{'RSRC_REPORT_RMX'}\n        }\n      )\n    {\n        if ( $reportHD-&gt;{'RSRC_REPORT_ITEM'} eq 'audio' ) {\n\n            # Possible options:\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'RESERVED'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'OCCUPIED'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'TOTAL'}\n            #$report-&gt;{'RSRC_REPORT_ITEM'}-&gt;{'FREE'}\n\n            $audioPortsHD = $reportHD;\n        }\n        elsif ( $reportHD-&gt;{'RSRC_REPORT_ITEM'} eq 'HD1080p60_video' ) {\n            $videoPortsHD = $reportHD;\n        }\n        elsif ( $reportHD-&gt;{'RSRC_REPORT_ITEM'} eq 'HD1080p30_video' ) {\n            $videoPortsHD = $reportHD;\n        }\n        elsif ( $reportHD-&gt;{'RSRC_REPORT_ITEM'} eq 'HD720p30_video' ) {\n            $videoPortsHD = $reportHD;\n        }\n    }\n\n    # Audio thresholds\n\n    if ( $audioPorts ) {\n        if ( $percentage ) {\n            if ( $audioPorts-&gt;{'TOTAL'} != 0 ) {\n                if ( $warn[0] != -1 &amp;&amp; (( $audioPorts-&gt;{'OCCUPIED'} / $audioPorts-&gt;{'TOTAL'} ) * 100) &gt; $warn[0] ) {\n                    $state = 'WARNING';\n                }\n            }\n        } elsif ( $warn[0] != -1 &amp;&amp; $audioPorts-&gt;{'OCCUPIED'} &gt; $warn[0] ) {\n            $state = 'WARNING';\n        }\n\n        if ( $percentage ) {\n            if ( $audioPorts-&gt;{'TOTAL'} != 0 ) {\n                if ( $crit[0] != -1 &amp;&amp; (( $audioPorts-&gt;{'OCCUPIED'} / $audioPorts-&gt;{'TOTAL'} ) * 100) &gt; $crit[0] ) {\n                    $state = 'WARNING';\n                }\n            }\n        } elsif ( $crit[0] != -1 &amp;&amp; $audioPorts-&gt;{'OCCUPIED'} &gt; $crit[0] ) {\n            $state = 'CRITICAL';\n        }\n    }\n\n    # Audio HD Thresholds\n\n    if ( $audioPortsHD ) {\n        if ( $percentage ) {\n            if ( $audioPortsHD-&gt;{'TOTAL'} != 0 ) {\n                if ( $warn[0] != -1 &amp;&amp; (( $audioPortsHD-&gt;{'OCCUPIED'} / $audioPortsHD-&gt;{'TOTAL'} ) * 100) &gt; $warn[0] ) {\n                    $state = 'WARNING';\n                }\n            }\n        } elsif ( $warn[0] != -1 &amp;&amp; $audioPortsHD-&gt;{'OCCUPIED'} &gt; $warn[0] ) {\n            $state = 'WARNING';\n        }\n\n        if ( $percentage ) {\n            if ( $audioPortsHD-&gt;{'TOTAL'} != 0 ) {\n                if ( $crit[0] != -1 &amp;&amp; (( $audioPortsHD-&gt;{'OCCUPIED'} / $audioPortsHD-&gt;{'TOTAL'} ) * 100) &gt; $crit[0] ) {\n                    $state = 'WARNING';\n                }\n            }\n        } elsif ( $crit[0] != -1 &amp;&amp; $audioPortsHD-&gt;{'OCCUPIED'} &gt; $crit[0] ) {\n            $state = 'CRITICAL';\n        }\n    }\n\n    # Video tresholds\n    if ( $percentage ) {\n        if ( $warn[0] != -1 &amp;&amp; (( $videoPorts-&gt;{'OCCUPIED'} / $videoPorts-&gt;{'TOTAL'} ) * 100) &gt; $warn[0] ) {\n            $state = 'WARNING';\n        }\n    } elsif ( $warn[1] != -1 &amp;&amp; $videoPorts-&gt;{'OCCUPIED'} &gt; $warn[1] ) {\n        $state = 'WARNING';\n    }\n    if ( $percentage ) {\n        if ( $crit[0] != -1 &amp;&amp; (( $videoPorts-&gt;{'OCCUPIED'} / $videoPorts-&gt;{'TOTAL'} ) * 100) &gt; $crit[0] ) {\n            $state = 'CRITICAL';\n        }\n    } elsif ( $crit[1] != -1 &amp;&amp; $videoPorts-&gt;{'OCCUPIED'} &gt; $crit[1] ) {\n        $state = 'CRITICAL';\n    }\n\n    # HD Video tresholds\n    if ( $percentage ) {\n        if ( $warn[0] != -1 &amp;&amp; (( $videoPortsHD-&gt;{'OCCUPIED'} / $videoPortsHD-&gt;{'TOTAL'} ) * 100) &gt; $warn[0] ) {\n            $state = 'WARNING';\n        }\n    } elsif ( $warn[1] != -1 &amp;&amp; $videoPortsHD-&gt;{'OCCUPIED'} &gt; $warn[1] ) {\n        $state = 'WARNING';\n    }\n    if ( $percentage ) {\n        if ( $crit[0] != -1 &amp;&amp; (( $videoPortsHD-&gt;{'OCCUPIED'} / $videoPortsHD-&gt;{'TOTAL'} ) * 100) &gt; $crit[0] ) {\n            $state = 'CRITICAL';\n        }\n    } elsif ( $crit[1] != -1 &amp;&amp; $videoPortsHD-&gt;{'OCCUPIED'} &gt; $crit[1] ) {\n        $state = 'CRITICAL';\n    }\n\n    if ( $audioPorts ) {\n        $output =\n            $state\n          . ': Audio in use: '\n          . $audioPorts-&gt;{'OCCUPIED'} . '/'\n          . $audioPorts-&gt;{'TOTAL'} . 'SD, '\n          . $audioPortsHD-&gt;{'OCCUPIED'} . '/'\n          . $audioPortsHD-&gt;{'TOTAL'} . 'HD, '\n          . ' Video in use: '\n          . $videoPorts-&gt;{'OCCUPIED'} . '/'\n          . $videoPorts-&gt;{'TOTAL'} . 'SD, '\n          . $videoPortsHD-&gt;{'OCCUPIED'} . '/'\n          . $videoPortsHD-&gt;{'TOTAL'} . 'HD';\n\n        $perfdata =\n            'audio='\n          . $warn[0] . ';'\n          . $crit[0] . ';'\n          . $audioPorts-&gt;{'OCCUPIED'} . ';'\n          . $audioPorts-&gt;{'TOTAL'} . ';'\n          . $audioPortsHD-&gt;{'OCCUPIED'} . ';'\n          . $audioPortsHD-&gt;{'TOTAL'}\n          . ' video='\n          . $warn[1] . ';'\n          . $crit[1] . ';'\n          . $videoPorts-&gt;{'OCCUPIED'} . ';'\n          . $videoPorts-&gt;{'TOTAL'} . ';'\n          . $videoPortsHD-&gt;{'OCCUPIED'} . ';'\n          . $videoPortsHD-&gt;{'TOTAL'};\n    } else {\n        $output =\n            $state\n          . ': Audio in use: 0/0SD, 0/0HD, '\n          . ' Video in use: '\n          . $videoPorts-&gt;{'OCCUPIED'} . '/'\n          . $videoPorts-&gt;{'TOTAL'} . 'SD, '\n          . $videoPortsHD-&gt;{'OCCUPIED'} . '/'\n          . $videoPortsHD-&gt;{'TOTAL'} . 'HD';\n\n        $perfdata =\n            'audio='\n          . $warn[0] . ';'\n          . $crit[0] . ';0;0;0;0'\n          . ' video='\n          . $warn[1] . ';'\n          . $crit[1] . ';'\n          . $videoPorts-&gt;{'OCCUPIED'} . ';'\n          . $videoPorts-&gt;{'TOTAL'} . ';'\n          . $videoPortsHD-&gt;{'OCCUPIED'} . ';'\n          . $videoPortsHD-&gt;{'TOTAL'};\n    }\n\n    print( $output. ' | ' . $perfdata . \"\\n\" );\n    exit( $ERRORS{$state} );\n\n    # Subs #########################################################################\n\n    sub login_bridge {\n        my $request =\n            '&lt;TRANS_MCU&gt;&lt;TRANS_COMMON_PARAMS&gt;&lt;MCU_TOKEN&gt;-1&lt;/MCU_TOKEN&gt;'\n          . '&lt;MCU_USER_TOKEN&gt;-1&lt;/MCU_USER_TOKEN&gt;&lt;/TRANS_COMMON_PARAMS&gt;&lt;ACTION&gt;&lt;LOGIN&gt;'\n          . '&lt;MCU_IP&gt;&lt;IP&gt;'\n          . $bridgeIp . '&lt;/IP&gt;'\n          . '&lt;LISTEN_PORT&gt;'\n          . $bridgePort\n          . '&lt;/LISTEN_PORT&gt;'\n          . '&lt;/MCU_IP&gt;&lt;USER_NAME&gt;'\n          . $bridgeUser\n          . '&lt;/USER_NAME&gt;'\n          . '&lt;PASSWORD&gt;'\n          . $bridgePw\n          . '&lt;/PASSWORD&gt;'\n          . '&lt;STATION_NAME&gt;'\n          . $hostName\n          . '&lt;/STATION_NAME&gt;'\n          . '&lt;/LOGIN&gt;&lt;/ACTION&gt;&lt;/TRANS_MCU&gt;';\n\n        my $responseXml = http_post( $bridgeUrl, $request );\n        my $xml = XMLin($responseXml);\n\n        # DEBUG: print Dumper($xml);\n\n        my $token  = 0;\n        my $uToken = 0;\n        if ( $xml-&gt;{'RETURN_STATUS'}-&gt;{'ID'} == 0 ) {\n            $token  = $xml-&gt;{'ACTION'}-&gt;{'LOGIN'}-&gt;{'MCU_TOKEN'};\n            $uToken = $xml-&gt;{'ACTION'}-&gt;{'LOGIN'}-&gt;{'MCU_USER_TOKEN'};\n        }\n\n        return ( $token, $uToken );\n    }\n\n    sub connect_bridge {\n        $userAgent = LWP::UserAgent-&gt;new( agent =&gt; 'VCMgmtLib', keep_alive =&gt; 1 );\n\n        ( $token, $uToken ) = login_bridge();\n\n        if ( $token == 0 || $uToken == 0 ) {\n\n            # Login failed\n            print(\"UNKNOWN: Login failed!\\n\");\n            exit( $ERRORS{'UNKNOWN'} );\n        }\n    }\n\n    sub http_post {\n        my ( $url, $content ) = @_;\n\n        my $req = POST $bridgeUrl,\n          Content_Type =&gt; 'application/x-www-form-urlencoded',\n          Content      =&gt; $content;\n\n        my $response = $userAgent-&gt;request($req);\n\n        print $response-&gt;error_as_HTML unless $response-&gt;is_success;\n\n        return $response-&gt;content;\n    }\n</code></pre>\n\n<p>So I was thinking maybe I could change the stanza beginning with <strong>sub connect_bridge {</strong> but I'm getting nowhere.</p>\n\n<p>Here's what I was trying:</p>\n\n<pre><code>sub connect_bridge {\n    $userAgent = LWP::UserAgent-&gt;new( agent =&gt; 'VCMgmtLib', keep_alive =&gt; 1 );\n    ssl_opts =&gt; {\n        SSL_ca_path     =&gt; '/etc/ssl/certs',\n        verify_hostname =&gt; 0,\n    }\n\n    if ( $token == 0 || $uToken == 0 ) {\n    }\n}\n</code></pre>\n\n<p>but that blows up the script.</p>\n\n<p>syntax error at /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl line 385, near \") {\"\nsyntax error at /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl line 387, near \"}\"</p>\n\n<pre><code>Can't use global @_ in \"my\" at /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl line 390, near \"= @_\"\nGlobal symbol \"$content\" requires explicit package name at /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl line 394.\nsyntax error at /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl line 401, near \"}\"\nExecution of /usr/lib64/nagios/plugins/check_rmx_ports_ssl.pl aborted due to compilation errors.\n</code></pre>\n"}, {"tags": ["xml", "perl", "grep", "xml-twig"], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1521496109, "last_edit_date": 1521496109, "creation_date": 1521495698, "answer_id": 49372805, "question_id": 49372434, "link": "https://stackoverflow.com/questions/49372434/how-to-parse-xml-file-with-perl-based-on-attribute-using-grep/49372805#49372805", "title": "How to parse xml file with perl based on attribute using grep", "body": "<pre><code>use strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $xml = &lt;&lt;'EOF';\n&lt;msms_pipeline_analysis&gt;\n  &lt;spectrum_query spectrum=\"H_TPP08.04885.04885.2\" start_scan=\"4885\" end_scan=\"48887\"&gt;\n    &lt;search_result&gt;\n      &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n      &lt;/search_hit&gt;\n    &lt;/search_result&gt;\n  &lt;/spectrum_query&gt;\n  &lt;spectrum_query spectrum=\"L_TPP08.05765.04785.2\" start_scan=\"4885\" end_scan=\"48856\"&gt;\n    &lt;search_result&gt;\n      &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n      &lt;/search_hit&gt;\n    &lt;/search_result&gt;\n  &lt;/spectrum_query&gt;\n  &lt;spectrum_query spectrum=\"L_TPP10.87945.3485.2\" start_scan=\"4885\" end_scan=\"4885\"&gt;\n    &lt;search_result&gt;\n      &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n      &lt;/search_hit&gt;\n    &lt;/search_result&gt;\n  &lt;/spectrum_query&gt;\n&lt;/msms_pipeline_analysis&gt;\nEOF\n\nmy $twig = XML::Twig-&gt;new(pretty_print =&gt; 'indented')-&gt;parse($xml);\n\nfor my $element ($twig-&gt;get_xpath('/msms_pipeline_analysis/spectrum_query')) {\n    next if $element-&gt;att('spectrum') =~ /TPP08/;\n    $element-&gt;delete;\n}\n\n$twig-&gt;print;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;msms_pipeline_analysis&gt;\n  &lt;spectrum_query end_scan=\"48887\" spectrum=\"H_TPP08.04885.04885.2\" start_scan=\"4885\"&gt;\n    &lt;search_result&gt;\n      &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;&lt;/search_hit&gt;\n    &lt;/search_result&gt;\n  &lt;/spectrum_query&gt;\n  &lt;spectrum_query end_scan=\"48856\" spectrum=\"L_TPP08.05765.04785.2\" start_scan=\"4885\"&gt;\n    &lt;search_result&gt;\n      &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;&lt;/search_hit&gt;\n    &lt;/search_result&gt;\n  &lt;/spectrum_query&gt;\n&lt;/msms_pipeline_analysis&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1521496942, "last_edit_date": 1521496942, "creation_date": 1521495897, "answer_id": 49372854, "question_id": 49372434, "link": "https://stackoverflow.com/questions/49372434/how-to-parse-xml-file-with-perl-based-on-attribute-using-grep/49372854#49372854", "title": "How to parse xml file with perl based on attribute using grep", "body": "<p>You can use <code>get_xpath</code> with a regexp expression on an attribute</p>\n\n<pre><code>foreach my $element ( $twig -&gt; get_xpath('spectrum_query[@spectrum =~ /^(?!\\w_TPP08\\.)/]') ) {\n   $element -&gt; delete;\n}\n</code></pre>\n\n<p>Or you can check every node for attribute match:</p>\n\n<pre><code>foreach my $element ( $twig -&gt; get_xpath('spectrum_query[@spectrum]') ) {\n  if ($element-&gt;att('spectrum')!~ m/^\\w_TPP08\\./) {\n    $element -&gt; delete;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5123654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ffe1c43d28d27b1205300f0f5ff8876?s=128&d=identicon&r=PG&f=1", "display_name": "Sasha", "link": "https://stackoverflow.com/users/5123654/sasha"}, "edited": false, "score": 0, "creation_date": 1521548737, "post_id": 49378538, "comment_id": 85769109, "body": "This is my favorite partial solution. The ones from @matt and @wolfrevokcats work on my test example. However on big xml files they don&#39;t work. It might be because there are nodes withouth   ending above &lt;spectrum_query&gt;. The approach using twig_roots is the one I would like to keep as leaves the rest untouched. It works well in big files but it <b>deletes</b> the nodes containing the $target. So, I have to run it sequentially to delete each entries that are not needed. Is there a way to make the negative regex with <code>!</code> so to keep the file untouched but without the nodes containing the <code>$target</code>?"}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": true, "score": 0, "last_activity_date": 1521530964, "creation_date": 1521530964, "answer_id": 49378538, "question_id": 49372434, "link": "https://stackoverflow.com/questions/49372434/how-to-parse-xml-file-with-perl-based-on-attribute-using-grep/49378538#49378538", "title": "How to parse xml file with perl based on attribute using grep", "body": "<p>The most \"twiggish\" way to do this would be to go through the file and discard the elements you don't want while outputting the rest .</p>\n\n<ul>\n<li>use <code>twig_roots</code> to match the proper <code>spectrum_query</code> elements, and do nothing with them, effectively discarding them,</li>\n<li>let the rest of the XML be output as is, using <code>twig_print_outside_roots</code></li>\n</ul>\n\n<p>This will be very memory efficient, since pretty much nothing will be kept in memory.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse autodie qw(open);\n\nuse XML::Twig;\n\nmy $target = 'TPP08';\nmy $input  = 'test.xml';\nmy $output = 'output.xml';\nopen( my $out, '&gt;:utf8', $output);\n\nXML::Twig-&gt;new( twig_roots          =&gt; { qq{spectrum_query[\\@spectrum=~/^[^_]*_$target\\./]} =&gt; 1, },\n                twig_print_outside_roots =&gt; $out,\n              )\n         -&gt;parsefile( $input);\n</code></pre>\n\n<p>note that each discarded element will produce an empty line in the output, white space management is tricky. If it matters you can get rid of those with  <code>grep -v</code> or by using <code>xml_pp</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5123654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ffe1c43d28d27b1205300f0f5ff8876?s=128&d=identicon&r=PG&f=1", "display_name": "Sasha", "link": "https://stackoverflow.com/users/5123654/sasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 49378538, "answer_count": 3, "score": 1, "last_activity_date": 1521530964, "creation_date": 1521493949, "last_edit_date": 1521495306, "question_id": 49372434, "link": "https://stackoverflow.com/questions/49372434/how-to-parse-xml-file-with-perl-based-on-attribute-using-grep", "title": "How to parse xml file with perl based on attribute using grep", "body": "<p>I'm new to <strong>perl</strong> and have been struggling. I have an xml file with the following structure, but with thousands of entries:</p>\n\n<p><strong>test.xml</strong></p>\n\n<pre><code>&lt;msms_pipeline_analysis&gt;\n    &lt;spectrum_query spectrum=\"H_TPP08.04885.04885.2\" start_scan=\"4885\" end_scan=\"48887\"&gt;\n        &lt;search_result&gt;\n          &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n          &lt;/search_hit&gt;\n        &lt;/search_result&gt;\n    &lt;/spectrum_query&gt;\n    &lt;spectrum_query spectrum=\"L_TPP08.05765.04785.2\" start_scan=\"4885\" end_scan=\"48856\"&gt;\n        &lt;search_result&gt;\n          &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n          &lt;/search_hit&gt;\n        &lt;/search_result&gt;        \n    &lt;/spectrum_query&gt;\n    &lt;spectrum_query spectrum=\"L_TPP10.87945.3485.2\" start_scan=\"4885\" end_scan=\"4885\"&gt;\n        &lt;search_result&gt;\n          &lt;search_hit calc_neutral_pep_mass=\"2348.060995306391\" hit_rank=\"1\"&gt;\n          &lt;/search_hit&gt;\n        &lt;/search_result&gt;        \n    &lt;/spectrum_query&gt;\n&lt;/msms_pipeline_analysis&gt;\n</code></pre>\n\n<p>I need to parse/delete the <strong>\"spectrum_query\"</strong> nodes that do <strong>not</strong> contain in the attribute <strong>\"spectrum\"</strong> the string in this example \"TPP08\" i.e. in reality what it is between the first underscore and the first dot (as later I would like to subset TPP09, TPP10, etc), eg. </p>\n\n<p>H_<strong>TPP08</strong>.04885.04885.2</p>\n\n<p>and retain the file with its structure.</p>\n\n<p>By searching I have come up with many solutions that look at deleting nodes fulfilling an attribute. In my case, such solution can <strong>delete</strong> a node in question:</p>\n\n<pre><code>#!/urs/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ('pretty_print' =&gt; 'indented' ) -&gt; parsefile ( 'test.xml' ); \nforeach my $element ( $twig -&gt; get_xpath('spectrum_query[@spectrum=\"H_TPP08.04885.04885.2\"]') ) {\n   $element -&gt; delete;\n}\n\n$twig -&gt; print; \n\nopen XML, \"&gt;output.xml\";\nprint XML $twig-&gt;toString();\nclose XML;\n</code></pre>\n\n<p>which deletes the first node. But only the specific one, and the real file has thousands of entries. Moreover, I want to <strong>keep</strong> the ones that fulfill the criteria, as the other way around I would have to run the script for every other entry that does not contain spectrum TPP08 (eg TPP09, TPP10, etc). </p>\n\n<p>As to determine the string, so far I have come with this</p>\n\n<pre><code>$string = qw(H_TPP08.05164.05164.2);\nmy ($substring2) = $string =~ m:.*_(.+?)?\\.:;\nprint \"$substring2\\n\";\n</code></pre>\n\n<p>Which outputs <strong>TPP08</strong> what I want, as I would need to keep the nodes with H_TPP08.XXXX or L_TPP08.XXXX</p>\n\n<p>So far I have not found if there's a way to do a negative subset like in R with \"!\" of the grep, and include the grep in the matching of the string on the attribute so this can be parsed. For what I have read most likely I would need to make an array with the string of the attribute of all entries </p>\n\n<p><code>my @array = map { $tag -&gt; att('spectrum') } $twig -&gt; get_xpath('//spectrum_query');</code></p>\n\n<p>and then evaluate sequentially each entry after grep and compare it to the matching string, and then only keep the nodes fulfilling that. But I cannot wrap my head around a solution for that with my basic perl knowledge.</p>\n\n<p>Any help will be really appreciated! Thanks</p>\n"}, {"tags": ["perl", "asn.1"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1521513527, "creation_date": 1521513527, "answer_id": 49375533, "question_id": 49369585, "link": "https://stackoverflow.com/questions/49369585/convertasn1-decode-error/49375533#49375533", "title": "Convert::ASN1 decode error", "body": "<p>I'm not sure where you got your hex string from...but if you use the <code>Convert::ASN1::encode</code> method, you get a slightly different hex string which can get decoded correctly:</p>\n\n<pre><code>my $res = $asn-&gt;encode({ name =&gt; 'John Smith', phone =&gt; 9876543210 });\nmy $res_hex = unpack 'H*', $res;\nprint \"res_hex after encode : $res_hex\\n\";\nprint \"original hex_data    : \" . lc($hex_data) . \"\\n\";\nprint \"\\n\";\n\nmy payload = $asn1_node-&gt;decode($res) or die $asn1_node-&gt;error;\nuse Data::Dumper;\nprint Dumper($payload);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>res_hex after encode : 30181a0a4a6f686e20536d697468120a39383736353433323130\noriginal hex_data    : 3018800a4a6f686e20536d697468810a39383736353433323130\n\n$VAR1 = {\n      'name' =&gt; 'John Smith',\n      'phone' =&gt; '9876543210'\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1374, "user_id": 514032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d14f5a30225fab8a0fc2cf40b17ca31?s=128&d=identicon&r=PG", "display_name": "Kevin G.", "link": "https://stackoverflow.com/users/514032/kevin-g"}, "edited": false, "score": 0, "creation_date": 1521754455, "post_id": 49387546, "comment_id": 85879608, "body": "That Perl module doesn&#39;t actually support those extra lines, but that&#39;s what was going on, yes. I&#39;m going to update the question with some extra information showing where that 80 and 81 are in the string."}, {"owner": {"reputation": 8220, "user_id": 2876830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23e4baefc1b032e53e723ce13f34f9c3?s=128&d=identicon&r=PG&f=1", "display_name": "YaFred", "link": "https://stackoverflow.com/users/2876830/yafred"}, "reply_to_user": {"reputation": 1374, "user_id": 514032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d14f5a30225fab8a0fc2cf40b17ca31?s=128&d=identicon&r=PG", "display_name": "Kevin G.", "link": "https://stackoverflow.com/users/514032/kevin-g"}, "edited": false, "score": 0, "creation_date": 1521783412, "post_id": 49387546, "comment_id": 85887702, "body": "That&#39;s a pity. You can take your problem the other way around and surround your type with Module DEFINITIONS ::= BEGIN and END to make oss.com produce the encoding that your perl module should understand."}], "tags": [], "owner": {"reputation": 8220, "user_id": 2876830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/23e4baefc1b032e53e723ce13f34f9c3?s=128&d=identicon&r=PG&f=1", "display_name": "YaFred", "link": "https://stackoverflow.com/users/2876830/yafred"}, "is_accepted": true, "score": 1, "last_activity_date": 1521568391, "last_edit_date": 1521568391, "creation_date": 1521557833, "answer_id": 49387546, "question_id": 49369585, "link": "https://stackoverflow.com/questions/49369585/convertasn1-decode-error/49387546#49387546", "title": "Convert::ASN1 decode error", "body": "<p>May be this is as easy as</p>\n\n<pre><code>$asn-&gt;prepare(&lt;&lt;ASN1) or die $asn-&gt;error; \nMy-Module DEFINITIONS AUTOMATIC TAGS ::=\nBEGIN   \n        Contact ::= SEQUENCE {\n            name VisibleString,\n            phone NumericString\n        }\nEND\n    ASN1\n</code></pre>\n\n<p>It's a bit long to explain if you start with ASN.1 ...</p>\n\n<p>You are not giving the tagging context (the type Contact should be part of a module). So, the tools are making choices ...</p>\n\n<p>The hexa you show is the result of encoding with AUTOMATIC TAGS</p>\n\n<p>The tags of the 2 strings are '80' (Context tag 0 = 1000 0000) and '81' (Context tag 1 = 1000 0001)</p>\n\n<p>@xxfelixxx gets something different because the encoding was performed as EXPLICIT TAGS</p>\n\n<p>The tags of the 2 strings are '1a' (universal tag for VisibleString) and '12'  (universal tag for NumericString)</p>\n"}], "owner": {"reputation": 1374, "user_id": 514032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d14f5a30225fab8a0fc2cf40b17ca31?s=128&d=identicon&r=PG", "display_name": "Kevin G.", "link": "https://stackoverflow.com/users/514032/kevin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 49387546, "answer_count": 2, "score": 0, "last_activity_date": 1521754586, "creation_date": 1521482489, "last_edit_date": 1521754586, "question_id": 49369585, "link": "https://stackoverflow.com/questions/49369585/convertasn1-decode-error", "title": "Convert::ASN1 decode error", "body": "<p>I must be missing something really obvious here. I can decode this sample bit of data using online tools like <a href=\"http://asn1-playground.oss.com/\" rel=\"nofollow noreferrer\">http://asn1-playground.oss.com/</a>, but am having trouble with basic usage of Perl's Convert::ASN1. Any idea what I'm missing?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse Convert::ASN1;\nuse feature 'say';\n\n# example from:\n# http://www.oss.com/asn1/resources/asn1-made-simple/introduction.html\n\nmy $hex_data = '3018800A4A6F686E20536D697468810A39383736353433323130';\nmy $bin_data = join '', pack 'H*', $hex_data;\n\nConvert::ASN1::asn_dump($bin_data);\n# prints:\n#    0000   24: SEQUENCE {\n#    0002   10:   [CONTEXT 0]\n#    0004     :     4A 6F 68 6E 20 53 6D 69 74 68 __ __ __ __ __ __ John Smith\n#    000E   10:   [CONTEXT 1]\n#    0010     :     39 38 37 36 35 34 33 32 31 30 __ __ __ __ __ __ 9876543210\n#    001A     : }    \n\nmy $asn = Convert::ASN1-&gt;new;\n$asn-&gt;prepare(&lt;&lt;ASN1) or die $asn-&gt;error;    \n    Contact ::= SEQUENCE {\n        name VisibleString,\n        phone NumericString\n    }\nASN1\n\nmy $asn1_node = $asn-&gt;find('Contact') \n    or die $asn-&gt;error;\n\nmy $payload = $asn1_node-&gt;decode($bin_data) \n    or die \"can't decode Contact: \".$asn1_node-&gt;error;\n# prints:\n#    can't decode Contact: decode error 80&lt;=&gt;1a 2 4 name\n</code></pre>\n\n<p>Supporting YaFred's answer below, this is where that 80 and 81 are in that encoded string:</p>\n\n<pre><code>SEQ length=24 ** l=10  J  o  h n   S m i t h  ** l=10  9 8 7 6 5 4 3 2 1 0\n30  18        80 0A    4A 6F 686E20536D697468 81 0A    39383736353433323130\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1521477509, "post_id": 49367958, "comment_id": 85736897, "body": "I&#39;ve fixed the indentation in your code. You&#39;re welcome, but please do it yourself in the future. Sensible indentation is a useful way to make your code easier to follow."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1521477495, "post_id": 49368032, "comment_id": 85736886, "body": "I think you mean &quot;does not delete directories&quot;."}, {"owner": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521477631, "post_id": 49368032, "comment_id": 85736972, "body": "thanks...if i replace unlink by rmdir in the above code ...will it work perfectly?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521477968, "post_id": 49368032, "comment_id": 85737212, "body": "@satvik No, because <code>rmdir</code> <i>only</i> works on directories."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521478072, "post_id": 49368032, "comment_id": 85737288, "body": "@tadman oops. Next time please go ahead and edit that kind of obvious faux pas out yourself. :)"}, {"owner": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521478325, "post_id": 49368032, "comment_id": 85737462, "body": "@simbabque  i need to delete both the files and directories not only files..but present code is only deleting the files inside the directory and not the directory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521478973, "post_id": 49368032, "comment_id": 85737912, "body": "Re &quot;<i><code>unlink</code> does not delete directories</i>&quot;, Tha&#39;s only half of it. The other issue is that the directory is encountered before the files within."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1521478049, "last_edit_date": 1521478049, "creation_date": 1521477470, "answer_id": 49368032, "question_id": 49367958, "link": "https://stackoverflow.com/questions/49367958/the-perl-script-is-deleting-only-the-contents-inside-the-directory-and-not-the-d/49368032#49368032", "title": "the perl script is deleting only the contents inside the directory and not the directory", "body": "<p><a href=\"https://perldoc.perl.org/functions/unlink.html\" rel=\"nofollow noreferrer\"><code>unlink</code></a> does not delete directories, only files. </p>\n\n<blockquote>\n  <p>Note: unlink will not attempt to delete directories unless you are\n  superuser and the -U flag is supplied to Perl. Even if these\n  conditions are met, be warned that unlinking a directory can inflict\n  damage on your filesystem. Finally, using unlink on directories is not\n  supported on many operating systems. Use rmdir instead.</p>\n</blockquote>\n\n<p>You want <a href=\"https://perldoc.perl.org/functions/rmdir.html\" rel=\"nofollow noreferrer\"><code>rmdir</code></a>, and you probably want to check with <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-d</code></a> which one to use, unless you don't care about warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521486120, "post_id": 49369394, "comment_id": 85742024, "body": "thanks for the code...but this is not deleting all the directories ...the directories which contains sub directories are not being deleted but just it is getting emptied."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521489138, "post_id": 49369394, "comment_id": 85743558, "body": "I see, that&#39;s what happens when code cannot be tested. This is so because a directory has to be empty in order to be deleted, so the order in which they are deleted matters. They have to be deleted in DFS order (the deepest first.) Can you adjust the code with this in mind or do you need more help?"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521491573, "post_id": 49369394, "comment_id": 85744789, "body": "@satvik, given your comment I have changed <code>find</code> to be <code>finddepth</code>. This should work for directory removal. See the added explanation."}, {"owner": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 0, "creation_date": 1521497495, "post_id": 49369394, "comment_id": 85747613, "body": "thanks again...but this didnt help...i tried the new code but it is not deleted the directories"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "edited": false, "score": 1, "creation_date": 1521538133, "post_id": 49369394, "comment_id": 85761626, "body": "@satvik, the criterion to delete a directory is not clear to me. I have changed the code so that the deletion is attempted no matter what. Now they will be deleted as soon as they become empty. This seems to be what you need."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 1, "last_activity_date": 1521538009, "last_edit_date": 1521538009, "creation_date": 1521481899, "answer_id": 49369394, "question_id": 49367958, "link": "https://stackoverflow.com/questions/49367958/the-perl-script-is-deleting-only-the-contents-inside-the-directory-and-not-the-d/49369394#49369394", "title": "the perl script is deleting only the contents inside the directory and not the directory", "body": "<p>I am only putting the code together, so you may upvote @simbabque that answered first. Try:</p>\n\n<pre><code>finddepth( sub {\n  my $file = $File::Find::name;\n  my @stats = stat($file);\n  if( -f $file &amp;&amp; $now - $stats[9] &gt; $AGE ) {\n    unlink $file;\n  }\n  elsif( -d $file ) {\n    rmdir $file;\n  }\n}, @find_dirs );\n</code></pre>\n\n<p>A few comments:</p>\n\n<ul>\n<li><p><code>File::Find</code> will find both files and directories.</p></li>\n<li><p><code>-f</code> checks for a file; <code>-d</code> for a directory.</p></li>\n<li><p><code>rmdir</code> will only remove a directory if the directory is empty. That is why files must be deleted first. <code>finddepth</code> takes care of this.</p></li>\n<li><p><code>-f</code> and <code>-d</code> are simple to use, but <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\"><code>stat</code></a> may also be used for such a check (see second field, <em>mode</em>.)</p></li>\n<li><p>I have not tested the code; I cannot easily recreate your conditions.</p></li>\n</ul>\n\n<p><strong>EDIT</strong>: Now it uses <code>finddepth</code> instead of <code>find</code> because:</p>\n\n<blockquote>\n  <p>finddepth() works just like find() except that it invokes the &amp;wanted function for a directory after invoking it for the directory's contents. It does a postorder traversal instead of a preorder traversal, working from the bottom of the directory tree up where find() works from the top of the tree down.</p>\n</blockquote>\n\n<p>This should take care of removing the directories in order, deepest first. Some directories may still not be removed if files remain in them that do not match the delete condition. If you want them removed when empty regardless of their timestamp, then remove the <code>if -d</code> condition. The non-empty ones will remain. Directories that cannot be removed may issue a warning...</p>\n"}], "owner": {"reputation": 27, "user_id": 9443236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94ee50fa1c604610b04e3c8c8534ce0?s=128&d=identicon&r=PG&f=1", "display_name": "satvik", "link": "https://stackoverflow.com/users/9443236/satvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 49368032, "answer_count": 2, "score": 1, "last_activity_date": 1521538009, "creation_date": 1521477240, "last_edit_date": 1521478107, "question_id": 49367958, "link": "https://stackoverflow.com/questions/49367958/the-perl-script-is-deleting-only-the-contents-inside-the-directory-and-not-the-d", "title": "the perl script is deleting only the contents inside the directory and not the directory", "body": "<p>I have the perl code to delete the files inside the directory and later the directory.</p>\n\n<pre><code>find ( sub {\n  my $file = $File::Find::name;\n  if ( -f $file ) {\n    push (@file_list, $file);\n  }\n}, @find_dirs);\n\nfor my $file (@file_list) {\n  my @stats = stat($file);\n  if ($now-$stats[9] &gt; $AGE) {\n    unlink $file;\n  }\n}\n</code></pre>\n\n<p>But the above code is deleting only the contents inside the directories and sub directories leaving behind all the empty folder.\nCould anyone please help me with the changes to be done to above coding so that it deletes the files and also the directories.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1521469366, "post_id": 49365141, "comment_id": 85730832, "body": "<code>chomp</code>? That makes no sense. You&#39;re using Text::CSV or Text::CSV_XS, right?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1521469372, "post_id": 49365141, "comment_id": 85730842, "body": "Can you show your code?"}, {"owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521469682, "post_id": 49365141, "comment_id": 85731090, "body": "while &lt;data&gt;{ chomp(my @row = (split &#39;,&#39; , data , -1);    say sum @row[1 .. $#row]; }"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1521469889, "post_id": 49365141, "comment_id": 85731267, "body": "<a href=\"https://stackoverflow.com/posts/49365141/edit\">edit</a> that into you question please. And clarify your desired output -  you don&#39;t need to split at all if you want to drop the last <i>line</i>."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1521473645, "post_id": 49365141, "comment_id": 85734152, "body": "The code in your comment doesn&#39;t compile."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1521515434, "post_id": 49365141, "comment_id": 85752612, "body": "PS you have unbalanced parentheses"}], "answers": [{"tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 1, "last_activity_date": 1521469535, "last_edit_date": 1521469535, "creation_date": 1521469224, "answer_id": 49365206, "question_id": 49365141, "link": "https://stackoverflow.com/questions/49365141/how-to-remove-last-single-line-available-in-file-using-perl/49365206#49365206", "title": "how to remove last single line available in file using perl", "body": "<p>Try this (shell one-liner) :</p>\n\n<pre><code>perl -lne '!eof() and print' file\n</code></pre>\n\n<p>or as part of a script :</p>\n\n<pre><code>while (defined($_ = readline ARGV)) {\n    print $_ unless eof();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1521474988, "last_edit_date": 1521474988, "creation_date": 1521471440, "answer_id": 49365941, "question_id": 49365141, "link": "https://stackoverflow.com/questions/49365141/how-to-remove-last-single-line-available-in-file-using-perl/49365941#49365941", "title": "how to remove last single line available in file using perl", "body": "<p>You should be using <code>Text::CSV</code> or <code>Text::CSV_XS</code> for handling comma separated value files.  Those modules are available on CPAN.  That type of solution would look like this:</p>\n\n<pre><code>use Text::CSV;\nuse List::Util qw(sum);\n\nmy $csv = Text::CSV-&gt;new({binary =&gt; 1})\n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag;\n\nwhile(my $row = $csv-&gt;getline($fh)) {\n    next unless ($row-&gt;[0] || '') =~ m/\\w/; # Reject rows that don't start with an identifier.\n    my $sum = sum(@$row[1..$#$row]);\n    print \"$sum\\n\";\n}\n</code></pre>\n\n<p>If you are stuck with a solution that doesn't use a proper CSV parser, then at least you'll need to add this to your existing while loop, immediately after your chomp:</p>\n\n<pre><code>next unless scalar(@row) &amp;&amp; length $row[0]; # Skip empty rows.\n</code></pre>\n\n<p>The point to this line is to detect when a row is empty -- has no elements, or elements were empty after the chomp.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1521477172, "last_edit_date": 1521477172, "creation_date": 1521476812, "answer_id": 49367829, "question_id": 49365141, "link": "https://stackoverflow.com/questions/49365141/how-to-remove-last-single-line-available-in-file-using-perl/49367829#49367829", "title": "how to remove last single line available in file using perl", "body": "<p>I suspect this is an X/Y question. You think you want to avoid processing the final (empty?) line in your input when actually you should be ensuring that all of your input data is in the format you expect.</p>\n\n<p>There are a number of things you can do to check the validity of your data.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse List::Util 'sum';\nuse Scalar::Util 'looks_like_number';\n\nwhile (&lt;DATA&gt;) {\n  # Chomp the input before splitting it.\n  chomp;\n\n  # Remove the -1 from your call to split().\n  # This automatically removes any empty trailing fields.\n  my @row = split /,/;\n\n  # Skip lines that are empty.\n  # 1/ Ensure there is data in @row.\n  # 2/ Ensure at least one element in @row contains\n  #    non-whitespace data.\n  next unless @row and grep { /\\S/ } @row;\n\n  # Ensure that all of the data you pass to sum()\n  # looks like numbers.\n  say sum grep { looks_like_number $_ } @row[1 .. $#row];\n}\n\n__DATA__\n\"A\",1.2,-1.5,4.2,1.4,\n\n\"B\",2.6,-.50,-1.6,0.3,-1.3,\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1521477172, "creation_date": 1521469024, "last_edit_date": 1521473590, "question_id": 49365141, "link": "https://stackoverflow.com/questions/49365141/how-to-remove-last-single-line-available-in-file-using-perl", "title": "how to remove last single line available in file using perl", "body": "<p>how to remove last single line available in file using perl.</p>\n\n<p>I have my data like below.</p>\n\n<pre><code>\"A\",1,-2,-1,-4,\n\"B\",3,-5,-2.-5,\n</code></pre>\n\n<hr>\n\n<p>how to remove the last line... I am summing all the numbers but receiving a null value at the end.</p>\n\n<p>Tried using chomp but did not work.</p>\n\n<p>Here is the code currently being used:</p>\n\n<pre><code>while (&lt;data&gt;) {\n    chomp(my @row = (split ',' , $_ , -1);\n    say sum @row[1 .. $#row];\n}\n</code></pre>\n"}, {"tags": ["perl", "browser-automation"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521467624, "post_id": 49364635, "comment_id": 85729662, "body": "I use a line of JS to do that."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 2, "creation_date": 1521786238, "post_id": 49364635, "comment_id": 85888718, "body": "You can try something like <code>$w-&gt;driver-&gt;send_message(&#39;DOM.setAttributeValue&#39;, nodeId =&gt; 0+$field-&gt;nodeId, name =&gt; &#39;value&#39;, value =&gt; &quot;test&quot; )-&gt;get</code> as per <a href=\"https://metacpan.org/source/CORION/WWW-Mechanize-Chrome-0.10/lib/WWW/Mechanize/Chrome.pm#L3137\" rel=\"nofollow noreferrer\">metacpan.org/source/CORION/WWW-Mechanize-Chrome-0.10/lib/WWW&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1522034773, "post_id": 49364635, "comment_id": 85969892, "body": "@daxim, any update on this?"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1521470912, "creation_date": 1521470912, "answer_id": 49365762, "question_id": 49364635, "link": "https://stackoverflow.com/questions/49364635/how-do-you-set-the-value-of-an-input-field-by-complex-selector/49365762#49365762", "title": "How do you set the value of an input field by complex selector?", "body": "<p>When I ran into this problem, I would just use the <code>eval</code> method and let Javascript (or jQuery if it's loaded in the page) take care of selecting and setting values. For me it was mostly selecting drop-downs, where the Angular application on the page required a <em>change</em> or <em>click</em> event.</p>\n\n<pre><code>$mech-&gt;eval( q{$(tr.edit td[data-attribute=\"name\"] input).val('test')} );\n</code></pre>\n\n<p>If there is no jQuery I am sure your Google fu will help you out.</p>\n"}, {"tags": [], "owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "is_accepted": false, "score": 3, "last_activity_date": 1522242129, "creation_date": 1522242129, "answer_id": 49535347, "question_id": 49364635, "link": "https://stackoverflow.com/questions/49364635/how-do-you-set-the-value-of-an-input-field-by-complex-selector/49535347#49535347", "title": "How do you set the value of an input field by complex selector?", "body": "<p>You maybe able to use something like below</p>\n\n<pre><code>$w-&gt;driver-&gt;send_message('DOM.setAttributeValue', nodeId =&gt; 0+$field-&gt;nodeId, name =&gt; 'value', value =&gt; \"test\" )-&gt;get\n</code></pre>\n\n<p>Reference from the actual source code</p>\n\n<p><a href=\"https://metacpan.org/source/CORION/WWW-Mechanize-Chrome-0.10/lib/WWW/Mechanize/Chrome.pm#L3137\" rel=\"nofollow noreferrer\">https://metacpan.org/source/CORION/WWW-Mechanize-Chrome-0.10/lib/WWW/Mechanize/Chrome.pm#L3137</a></p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": 18, "last_activity_date": 1522242129, "creation_date": 1521467496, "question_id": 49364635, "link": "https://stackoverflow.com/questions/49364635/how-do-you-set-the-value-of-an-input-field-by-complex-selector", "title": "How do you set the value of an input field by complex selector?", "body": "<ul>\n<li><a href=\"http://p3rl.org/WWW::Mechanize::Chrome\" rel=\"noreferrer\">WWW::Mechanize::Chrome</a> 0.10</li>\n<li>Iridium 2017.11 in a headed desktop session</li>\n</ul>\n\n<p>I want to set the value of a certain <strong>formless</strong> input field.</p>\n\n<pre><code>my $field = $w-&gt;selector('tr.edit td[data-attribute=\"name\"] input', single =&gt; 1);\n</code></pre>\n\n<p>finds it.</p>\n\n<pre><code>$field-&gt;attributes-&gt;{value} = 'test';\n</code></pre>\n\n<p>has no apparent effect.</p>\n\n<p>Both</p>\n\n<pre><code>$w-&gt;field($field =&gt; 'test');\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$w-&gt;field('tr.edit td[data-attribute=\"name\"] input' =&gt; 'test');\n</code></pre>\n\n<p>error out with <code>No elements found for form number 1</code>.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1521453459, "post_id": 49359880, "comment_id": 85720277, "body": "What have you tried so far? We can&#39;t offer advice on your code if you don&#39;t include it in the question."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7094972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MFzON7aFdJQ/AAAAAAAAAAI/AAAAAAAAACE/G7NU15JWWLk/photo.jpg?sz=128", "display_name": "Rudraprasad Pradhan", "link": "https://stackoverflow.com/users/7094972/rudraprasad-pradhan"}, "edited": false, "score": 0, "creation_date": 1521454774, "post_id": 49360153, "comment_id": 85721150, "body": "Thank you @ikegami,But i there is some error. i am using below code. [code]#!/usr/bin/perl $str1=&#39;logging on enable secret 5 $1$okZh$nSIVWr7vNHAqk231PisjN0 snmp-server community sph1nkx5 v1default RO 5 snmp-server ifindex persist tacacs-server timeout 5 tacacs-server key 7 xxx&#39; $str2=&#39;logging on   enable secret 5 xxx snmp-server community  xxx snmp-server ifindex persist tacacs-server timeout 5 tacacs-server key 7 00070A160C5E190A002247&#39;  for ($str1, $str2) {    s/^(?:enable secret|snmp-server community|tacacs-server key)[^\\n]*\\n//mg;    s/\\s+//g; } $str1 eq $str2[code]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 111, "user_id": 7094972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MFzON7aFdJQ/AAAAAAAAAAI/AAAAAAAAACE/G7NU15JWWLk/photo.jpg?sz=128", "display_name": "Rudraprasad Pradhan", "link": "https://stackoverflow.com/users/7094972/rudraprasad-pradhan"}, "edited": false, "score": 0, "creation_date": 1521455011, "post_id": 49360153, "comment_id": 85721296, "body": "Lack of semicolons?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 111, "user_id": 7094972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MFzON7aFdJQ/AAAAAAAAAAI/AAAAAAAAACE/G7NU15JWWLk/photo.jpg?sz=128", "display_name": "Rudraprasad Pradhan", "link": "https://stackoverflow.com/users/7094972/rudraprasad-pradhan"}, "edited": false, "score": 0, "creation_date": 1521455088, "post_id": 49360153, "comment_id": 85721341, "body": "Also, always use <code>use strict; use warnings qw( all );</code> (which means you&#39;ll also have to declare your vars, as you should.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1521453666, "creation_date": 1521453666, "answer_id": 49360153, "question_id": 49359880, "link": "https://stackoverflow.com/questions/49359880/how-to-write-the-perl-script-for-comparing-the-multi-line-text-of-a-both-scalars/49360153#49360153", "title": "How to write the Perl script for comparing the multi-line text of a both scalars?", "body": "<p>Just remove the stuff you want to ignore before doing the comparison.</p>\n\n<pre><code>for ($str1, $str2) {\n   s/^(?:enable secret|snmp-server community|tacacs-server key)[^\\n]*\\n//mg;\n   s/\\s+//g;\n}\n\n$str1 eq $str2\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7094972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MFzON7aFdJQ/AAAAAAAAAAI/AAAAAAAAACE/G7NU15JWWLk/photo.jpg?sz=128", "display_name": "Rudraprasad Pradhan", "link": "https://stackoverflow.com/users/7094972/rudraprasad-pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1521453666, "creation_date": 1521452717, "last_edit_date": 1521453536, "question_id": 49359880, "link": "https://stackoverflow.com/questions/49359880/how-to-write-the-perl-script-for-comparing-the-multi-line-text-of-a-both-scalars", "title": "How to write the Perl script for comparing the multi-line text of a both scalars?", "body": "<p>I have two strings.</p>\n\n<p>String 1:</p>\n\n<pre><code>logging on\nenable secret 5 $1$okZh$nSIVWr7vNHAqk231PisjN0\nsnmp-server community sph1nkx5 v1default RO 5\nsnmp-server ifindex persist\ntacacs-server timeout 5\ntacacs-server key 7 xxx\n</code></pre>\n\n<p>String 2:</p>\n\n<pre><code>logging on\n\n\nenable secret 5 xxx\nsnmp-server community  xxx\nsnmp-server ifindex persist\ntacacs-server timeout 5\ntacacs-server key 7 00070A160C5E190A002247\n</code></pre>\n\n<p>I want to compare both string by ignoring white spaces &amp; some line which staring with \"enable secret\" ,\"snmp-server community\" &amp; \"tacacs-server key\".</p>\n"}, {"tags": ["perl", "events", "websocket"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1521436063, "post_id": 49355042, "comment_id": 85712280, "body": "A short look at the Net::WebSocket::Server documentation shows an <code>on_tick</code> handler which together with <code>tick_period</code> attribute seems to  exactly offer what you want, i.e. periodic actions. Why don&#39;t you use this one? See the second example <a href=\"https://metacpan.org/pod/Net::WebSocket::Server#SYNOPSIS\" rel=\"nofollow noreferrer\">in the documentation</a> for the details."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1521437182, "post_id": 49355042, "comment_id": 85712580, "body": "I have tried it too, I wonder why it is not working....."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1521437861, "post_id": 49355042, "comment_id": 85712838, "body": "Maybe you should then ask a question with code which shows that it does not work how it is supposed to according to the documentation instead of trying to find other and more complex ways which don&#39;t work for you either. Also, make sure that the code is complete enough so that your problem can be reproduced by others. See <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. And, please properly indent the code you have in your question."}, {"owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1521441652, "post_id": 49355042, "comment_id": 85714158, "body": "I retried now, and I found what was my problem, now it is working with the on_tick, thanks a lot:)"}], "owner": {"reputation": 389, "user_id": 2644315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5AWB7.jpg?s=128&g=1", "display_name": "Xerix", "link": "https://stackoverflow.com/users/2644315/xerix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1521426992, "creation_date": 1521426992, "question_id": 49355042, "link": "https://stackoverflow.com/questions/49355042/perl-netwebsocketserver-with-external-periodic-event", "title": "PERL - Net::Websocket::Server with external periodic event", "body": "<p>In my server program I need to have ability to iterate every 5 minutes through all opened connections and see which is really \"active\" or not.</p>\n\n<p>I know that the best approach is to use \"heart beat\", but then, the server need to have somehow ability to check weather the connection is \"off\" in order to delete the associated \"user parameters\" that is attached to the connection.</p>\n\n<p>My first approach was to use \"Async\" module, but this works in a separate process - so I cannot delete any element from the main process unless I use a technique to invoke a subroutine from the main process called from the child process (I don't know how, any help will be warmly welcomed).</p>\n\n<p>Another possibility using Async is create a static client that is all the time on (also in the server) and sending \"commands\" to the server, but to me it looks \"too exaggerating\" to create such \"wasting memory\" client in the server, and also \"eat\" CPU time (I think much more than simple event like equivalent to \"setTimeout\" in JS).</p>\n\n<p>Yet another approach is to use EV: But when I call EV::run it will NOT RUN anything ELSE than this \"periodic event\" - means that it will not reach the next line where the ->Start for the server is.\nPlacing it after the ->Start will make this event useless too: As the server works the program will not go behind the ->Start line.\nUsing EV::run EV::RUN_NOWAIT; will make the server work, but the EV will somehow not work, for a strange reason (Anyone know how can I still make it work?)</p>\n\n<p>I prefer to not use Net::Websocket::EV, because as per their script, it doesn't do the handshake automatically, and many things (as well as SSL connection that I have) I will need to do manually and for me it is change a lot in my program.</p>\n\n<p>PROBLEM SUMMARY:\nHow to make the code in EV run every 5 minutes, together with the server?</p>\n\n<pre><code>my %CON; # Connections (And user data) hash\n\nmy $__ConChk=EV::periodic 0, 300, 0, sub {\nmy @l=keys %CON;\nfor(my $i=0 ; $i&lt;@l ; $i++) {\n    if($CON{$l[$i]}{\"T\"}+3600&lt;time()) { # I give one hour time to be completely offline (for different reasons)\n        $CON{$l[$i]}{\"C\"}-&gt;disconnect(); delete $CON{$l[$i]};\n    }\n}\n};\nEV::run EV::RUN_NOWAIT; # This is not working - Seems to be ignored!\n\nNet::WebSocket::Server-&gt;new(\nlisten =&gt; $ssl, # Earlier preset\nsilence_max=&gt;60, # Time to just shut the connection off, but don't delete user data\non_connect =&gt; sub {\n    my($serv,$conn)=@_;\n    my $cid; # Connection ID (for the hash)\n\n    $conn-&gt;on(\n        handshake =&gt; sub {\n            my($conn,$handshake)=@_;\n            # Create user data in $CON{$cid}\n        },\n        binary =&gt; sub {\n            $CON{$cid}{\"T\"}=time();\n            # Handling of single incomming message (command)\n        },\n        disconnect =&gt; sub {\n            # Do NOT DELETE THE ENTRY!! Maybe the connection drop due to instability!!\n        }\n    );\n}\n)-&gt;start; # This will run - but ignoring EV::run - what to do....?\nundef $__ConChk;\n</code></pre>\n"}, {"tags": ["arrays", "json", "perl", "multidimensional-array", "data-extraction"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521393242, "post_id": 49350362, "comment_id": 85701094, "body": "Please can we drop the <i>&quot;array ref of array refs&quot;</i> idea? It&#39;s an array of arrays. If you insist on the &quot;reference&quot; nonsense then it should be &quot;a reference to an array of array references&quot;, but remember that this is <i>JavaScript Object Notation</i> so there are no references."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521393371, "post_id": 49350362, "comment_id": 85701141, "body": "@Borodin, sorry, I may not have been clear. I was talking about the Perl data structure that you get after calling to <code>decode_json</code>. I will make the comment clearer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521393611, "post_id": 49350362, "comment_id": 85701230, "body": "Even in Perl, I think the insistence on flagging everything as a <i>reference</i> is superfluous. Perl does nested data structures using references: the same way as many other languages. Nowhere else does the confusing idea of references to references arise."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521393898, "post_id": 49350362, "comment_id": 85701319, "body": "@Borodin, you are right, in Perl any nested data structure is handled through references. But to me, keeping in mind what they are is the way to remember how to access the insides in the right way. This may be or may not be clearer to other people. Hopefully your comments and mine will get the OP thinking... But that is the way it is. A list in Perl is defined with <code>( ... )</code>, and a ref to a list with <code>[ ... ]</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521394781, "post_id": 49350362, "comment_id": 85701663, "body": "Unless they are dealing with advanced programming, few people are taught that a multi-dimensional array in C consists of multiple arrays stacked end-to-end. <i>&quot;Keeping in mind what they are&quot;</i> rather defeats the idea of high-level languages in the first place, and I think it&#39;s counter-productive to inflict the idea of references on new learners. There&#39;s a reason why <code>$aa[0][1][2]</code> is valid Perl"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": true, "score": 0, "last_activity_date": 1521393696, "last_edit_date": 1521393696, "creation_date": 1521391246, "answer_id": 49350362, "question_id": 49349749, "link": "https://stackoverflow.com/questions/49349749/how-to-extract-data-from-this-nested-array/49350362#49350362", "title": "How to extract data from this nested array", "body": "<p>The JSON you are getting, after calling <code>decode_json</code>, is turned in Perl into an array ref of array refs for all rows but the last one (or following the suggestion in a comment \"a reference to an array of array references\"), that contains a scalar (the row id). To traverse the JSON you may do:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse JSON;\n\nmy $DrugsJson = '[[\"NASOCLEAR NASAL SPRAY\",\"ASCORIL FLU SYRUP\",\"CALPOL 120MG SUSPENSION\"],[\"SODIUM CHLORIDE 0.65%W/V\",\"CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG\",\"PARACETAMOL 120MG/5ML\"],[\"1\",\"3\",\"5\"],[\"Drops\",\"mL\",\"mL\"],[\"TDS\",\"BD\",\"TDS\"],[\"5\",\"5\",\"3\"],[\"days\",\"days\",\"days\"],\"85\"]';\n\nmy $myjson = decode_json($DrugsJson);\n\n# Traverse the JSON\nforeach my $i ( @$myjson ) {\n  print \"Row is \", ref $i, \"\\n\";\n  if( ref $i eq 'ARRAY' ) {\n    foreach my $j ( @$i ) {\n      print \"Sub-element is \", $j, \"\\n\";\n    }\n  }\n  else {\n    print \"Element is \", $i, \"\\n\";\n  }\n}\n\n# Create arrays for Brand and Generic\nmy @Brand   = @{ $myjson-&gt;[0] };\nmy @Generic = @{ $myjson-&gt;[1] };\n\nprint 'Brand has: ', join(', ', @Brand), \"\\n\";\nprint 'Generic has: ', join(', ', @Generic), \"\\n\";\n</code></pre>\n\n<p>I have created the bit of code to have a JSON turned into a Perl data structure (I don't have your database.) It is better to receive the JSON in a scalar variable like <code>$myjson = decode_json($DrugsJson)</code>. From there, <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow noreferrer\"><code>ref</code></a> will tell you whether what you have is a ref (a string with \"ARRAY\", \"HASH\" and so on) or a scalar (no value).</p>\n\n<p>In order to address the element <code>$i, $j</code> of an array ref of array refs, you may use <code>$myjson-&gt;[$i][$j]</code> which is the compact form of <code>$myjson-&gt;[$i]-&gt;[$j]</code>. You may also turn an array ref into an array using the conversion <code>@{ $array_ref }</code>. For simple expressions, you may also use <code>@$array_ref</code>. But for an element of an array ref, you need the longer <code>@{ $myjson-&gt;[0] }</code>.</p>\n\n<p>The output:</p>\n\n<pre><code>Row is ARRAY\nSub-element is NASOCLEAR NASAL SPRAY\nSub-element is ASCORIL FLU SYRUP\nSub-element is CALPOL 120MG SUSPENSION\nRow is ARRAY\nSub-element is SODIUM CHLORIDE 0.65%W/V\nSub-element is CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG\nSub-element is PARACETAMOL 120MG/5ML\nRow is ARRAY\nSub-element is 1\nSub-element is 3\nSub-element is 5\nRow is ARRAY\nSub-element is Drops\nSub-element is mL\nSub-element is mL\nRow is ARRAY\nSub-element is TDS\nSub-element is BD\nSub-element is TDS\nRow is ARRAY\nSub-element is 5\nSub-element is 5\nSub-element is 3\nRow is ARRAY\nSub-element is days\nSub-element is days\nSub-element is days\nRow is\nElement is 85\nBrand has:   NASOCLEAR NASAL SPRAY, ASCORIL FLU SYRUP, CALPOL 120MG SUSPENSION\nGeneric has: SODIUM CHLORIDE 0.65%W/V, CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG, PARACETAMOL 120MG/5ML\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 1305947, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/660bcd99a216234e04adb27125cbf0a3?s=128&d=identicon&r=PG", "display_name": "Joel G Mathew", "link": "https://stackoverflow.com/users/1305947/joel-g-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49350362, "answer_count": 1, "score": 0, "last_activity_date": 1521393696, "creation_date": 1521387423, "last_edit_date": 1521392758, "question_id": 49349749, "link": "https://stackoverflow.com/questions/49349749/how-to-extract-data-from-this-nested-array", "title": "How to extract data from this nested array", "body": "<p>I'm trying to extract data from a JSON string generated by my PHP web application.</p>\n\n<p>What I've tried:</p>\n\n<pre><code>sub SqlQuery {\n\n    use strict;\n    use warnings;\n\n    $SqlQuery = shift;\n\n    my $MYSQLDB     = \"db\";\n    my $SQLuser     = \"user\";\n    my $SQLpassword = \"password\";\n\n    my $dsn = \"DBI:mysql:database = $MYSQLDB;host=localhost;port=3306\";\n    my $dbh = DBI-&gt;connect($dsn, $SQLuser, $SQLpassword);\n\n    my $DrugsJson = '';\n    my @myjson;\n\n    say \"Query is \" . $SqlQuery;\n\n    my $rows = $dbh-&gt;selectall_arrayref(\n        $SqlQuery, { Slice =&gt; {} }\n    );\n\n    my $ct = 0;\n\n    foreach my $row ( @$rows ) {\n\n        say \"Count: $ct\";\n\n        $DrugsJson = $row-&gt;{medicine};\n        say $DrugsJson;\n\n        @myjson = decode_json($DrugsJson);\n        say Dumper @myjson;\n\n        foreach my $row (@myjson) {\n\n            say \"Row is \" .ref $row;\n\n            foreach my $element ( @$row ) {\n\n                say \"Element is \" .ref $element;\n\n                foreach my $subelement (@{$element}) {\n                    say \"SubElement is \" . $subelement;\n                }\n            }\n        }\n\n        foreach ($myjson[0][0]) {\n            push @Brand, $_;\n        }\n\n        say \"Listing brands..\";\n        say Dumper @Brand;\n    }\n}\n</code></pre>\n\n<p>I'm trying to read the data containing <code>\"NASOCLEAR NASAL SPRAY\",\"ASCORIL FLU SYRUP\",\"CALPOL 120MG SUSPENSION\"</code> into array <code>@Brand</code>, <code>\"SODIUM CHLORIDE 0.65%W/V\",\"CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG\",\"PARACETAMOL 120MG/5ML\"</code> into <code>@Generic</code> and so on.</p>\n\n<p>Sample output:</p>\n\n<pre><code>Query is SELECT `diagnosis`, `ICDCode`, `ICDVer`, `history`, `examination`, `medicine`, `investigation`, `consultations` FROM `clinical` WHERE `CheckinNo`=85 LIMIT 1\nCount: 0\n[[\"NASOCLEAR NASAL SPRAY\",\"ASCORIL FLU SYRUP\",\"CALPOL 120MG SUSPENSION\"],[\"SODIUM CHLORIDE 0.65%W/V\",\"CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG\",\"PARACETAMOL 120MG/5ML\"],[\"1\",\"3\",\"5\"],[\"Drops\",\"mL\",\"mL\"],[\"TDS\",\"BD\",\"TDS\"],[\"5\",\"5\",\"3\"],[\"days\",\"days\",\"days\"],\"85\"]\n$VAR1 = [\n          [\n            'NASOCLEAR NASAL SPRAY',\n            'ASCORIL FLU SYRUP',\n            'CALPOL 120MG SUSPENSION'\n          ],\n          [\n            'SODIUM CHLORIDE 0.65%W/V',\n            'CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG',\n            'PARACETAMOL 120MG/5ML'\n          ],\n          [\n            '1',\n            '3',\n            '5'\n          ],\n          [\n            'Drops',\n            'mL',\n            'mL'\n          ],\n          [\n            'TDS',\n            'BD',\n            'TDS'\n          ],\n          [\n            '5',\n            '5',\n            '3'\n          ],\n          [\n            'days',\n            'days',\n            'days'\n          ],\n          '85'\n        ];\n\nRow is ARRAY\nElement is ARRAY\nSubElement is NASOCLEAR NASAL SPRAY\nSubElement is ASCORIL FLU SYRUP\nSubElement is CALPOL 120MG SUSPENSION\nElement is ARRAY\nSubElement is SODIUM CHLORIDE 0.65%W/V\nSubElement is CHLORPHENIRAMINE 2MG+PHENYLEPHRINE 5MG\nSubElement is PARACETAMOL 120MG/5ML\nElement is ARRAY\nSubElement is 1\nSubElement is 3\nSubElement is 5\nElement is ARRAY\nSubElement is Drops\nSubElement is mL\nSubElement is mL\nElement is ARRAY\nSubElement is TDS\nSubElement is BD\nSubElement is TDS\nElement is ARRAY\nSubElement is 5\nSubElement is 5\nSubElement is 3\nElement is ARRAY\nSubElement is days\nSubElement is days\nSubElement is days\nElement is \nCan't use string (\"85\") as an ARRAY ref while \"strict refs\" in use at ./sendpresc.pl line 121.\n</code></pre>\n"}, {"tags": ["perl", "dependency-management", "cpan", "software-update"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1521388078, "post_id": 49349731, "comment_id": 85699356, "body": "<code>cpan -l</code> gives you a list of installed cpan modules and versions, but the list includes modules which are bundled with Perl.  That&#39;s not necessarily a bad thing if the goal is to test everything.  The <code>cpanm</code> utility facilitates a <code>--test-only</code> mode, and allows you to specify a version."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1521388184, "post_id": 49349731, "comment_id": 85699383, "body": "It gets harder where you might be asking for a historical version that the module&#39;s author has chosen to delete from CPAN.  For a long time CPAN authors were encouraged to keep a tidy house by removing older versions. I don&#39;t know if this practice is still encouraged."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521395435, "post_id": 49349731, "comment_id": 85701917, "body": "This issue should be resolved by an application&#39;s test suite and dependency tree. You should investigate further only if you find that your system isn&#39;t working."}, {"owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521400934, "post_id": 49349731, "comment_id": 85703804, "body": "@Borodin What about dependency updates which break system tools like <code>cpan&#47;cpanp&#47;cpanm</code> or <code>prove</code>? What about modules I update because they are outdated, but don&#39;t actually use?"}, {"owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1521400969, "post_id": 49349731, "comment_id": 85703822, "body": "@DavidO put your comments as an answer"}, {"owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521401360, "post_id": 49349731, "comment_id": 85703997, "body": "@Borodin Also, such a tool is essentially extra test coverage I get for free, and it seems to be fairly easy to write."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1521417594, "post_id": 49349731, "comment_id": 85708441, "body": "@nponeccop : Posted it, along with a few other ideas."}], "answers": [{"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 4, "last_activity_date": 1521414600, "creation_date": 1521414600, "answer_id": 49353769, "question_id": 49349731, "link": "https://stackoverflow.com/questions/49349731/can-i-retest-all-installed-cpan-modules/49353769#49353769", "title": "Can I retest all installed CPAN modules?", "body": "<p>The <code>cpan</code> tool that ships with core Perl includes a <code>-l</code> option, that directs it to provide a list of installed modules. For example, the last 10 items in the list on my system:</p>\n\n<pre><code>$ cpan -l 2&gt;/dev/null |tail -10\nTest2::Event::Encoding  1.302073\nTest2::Event::Bail  1.302073\nTest2::Event::Exception 1.302073\nTest2::Event::Subtest   1.302073\nTest2::Event::Skip  1.302073\nTest2::Event::Info  1.302073\nTest2::Event::Diag  1.302073\nTest2::Event::TAP::Version  1.302073\nJSON::PP    2.27400_02\nJSON::PP::Boolean   undef\n</code></pre>\n\n<p>As demonstrated here you get a list of modules and version numbers. Sometimes the tool doesn't find the version in META, and therefore will return <code>undef</code> for the version numbers.  CPAN authors should be on the lookout for these sorts of mistakes, as they make it harder for tools that wish to identify the version without compiling the module itself.</p>\n\n<p>Once you have the modules and version numbers you can use the <code>cpanm</code> tool (provided by App::cpanm) with its <code>--test-only</code> option to pull down a module of a specific version and test it.  You can request a specific version like this:</p>\n\n<pre><code>cpanm Some::Module@0.9990\n</code></pre>\n\n<p>(Pulls down only version 0.9990 of the target module).</p>\n\n<p>Where things get tricky are the following:  Perl ships with a bunch of modules, and some of them also receive updates via CPAN. The <code>cpan -l</code> tool will list all installed modules, including the ones that ship with Perl.</p>\n\n<p>Also some of the modules listed are simply part of a larger distribution.</p>\n\n<p>Another tool that can be useful to you, which has been bundled with Perl since 5.8.9, is <code>corelist</code>.  If you run this:</p>\n\n<pre><code>corelist File::Temp\n</code></pre>\n\n<p>You will get:  \"<code>File::Temp was first released with perl v5.6.1</code>\"</p>\n\n<p>If you do this:</p>\n\n<pre><code>corelist JSON\n</code></pre>\n\n<p>You will get: \"<code>JSON was not in CORE (or so I think)</code>\"</p>\n\n<p>So it is pretty simple to determine if a module you're looking at in your list is one that ships with Perl or not.  Use that information as you see fit.</p>\n\n<p>Another thing you'll have to solve for is what to do about shared dependencies.  If the first thing you test is a Moose upgrade, you'll pull in half of CPAN (that's an exaggeration), and that will dirty your environment for testing other modules.  To mitigate this effect you have a few choices. One is to leverage <code>App::perlbrew</code> and its <code>lib</code> option to set up throwaway library space.  That way you can install a module and its dependencies in a destination designated by <code>perlbrew lib</code> and <code>perlbrew use</code>, and then throw it away when done to move on to the next library for testing.</p>\n\n<p>However, there may be a better solution, of which I am not adequately familiar to document here: The toolchain used by CPAN smoke testers.  See <a href=\"http://search.cpan.org/~barbie/CPAN-Testers-0.07/lib/CPAN/Testers.pm\" rel=\"nofollow noreferrer\" title=\"CPAN::Testers\">CPAN::Testers</a> if you wish to pursue this strategy. The smoke testers have worked out relatively lightweight approaches to pulling down and testing modules with their dependencies in an automated fashion.</p>\n\n<p>Finally, another issue you will encounter is that CPAN authors are the ones who decide which versions of their modules live on CPAN and which ones get deleted.  A few years ago CPAN authors were encouraged to keep their CPAN repositories clean by deleting old versions. I don't know if this practice is still encouraged, but it does mean that you cannot count on a specific version number still existing.  To solve for this problem you should probably maintain your own repository of the tarballs for all versions you have installed at a given moment in time.  The CPAN module framework <a href=\"http://search.cpan.org/~thaljef/Pinto-0.14/lib/Pinto.pm\" rel=\"nofollow noreferrer\">Pinto</a> helps with keeping versions of a module, pinning some to not update, and other useful tricks.</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1521490364, "last_edit_date": 1521490364, "creation_date": 1521472118, "answer_id": 49366205, "question_id": 49349731, "link": "https://stackoverflow.com/questions/49349731/can-i-retest-all-installed-cpan-modules/49366205#49366205", "title": "Can I retest all installed CPAN modules?", "body": "<p>If you download and extract distribution <code>B</code> and <code>cd</code> into that directory, you can use the <a href=\"https://metacpan.org/pod/distribution/Test-BrewBuild/bin/brewbuild\" rel=\"nofollow noreferrer\">brewbuild</a> binary from my <a href=\"https://metacpan.org/release/Test-BrewBuild\" rel=\"nofollow noreferrer\">Test::BrewBuild</a> (NOTE: requires Perlbrew or Berrybrew) with the <code>-R</code> aka <code>--revdep</code> flag to test <code>B</code> as well as all distributions that require <code>B</code>:</p>\n\n<pre><code>~/repos/Mock-Sub $ brewbuild -R\n\nreverse dependencies: Test::Module::CheckDep::Version, App::RPi::EnvUI, RPi::DigiPot::MCP4XXXX, Devel::Examine::Subs, PSGI::Hector, File::Edit::Portable, Devel::Trace::Subs\n\nTest::Module::CheckDep::Version\n5.26.1 :: PASS\n\nApp::RPi::EnvUI\n5.26.1 :: FAIL\n\nRPi::DigiPot::MCP4XXXX\n5.26.1 :: FAIL\n\nDevel::Examine::Subs\n5.26.1 :: PASS\n\nPSGI::Hector\n5.26.1 :: PASS\n\nFile::Edit::Portable\n5.26.1 :: PASS\n\nDevel::Trace::Subs\n5.26.1 :: PASS\n</code></pre>\n\n<p>I do this every time I update one of my CPAN distributions that have reverse dependencies, so I don't break any consumers of my dists.</p>\n"}], "owner": {"reputation": 13121, "user_id": 805266, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/eabce8cd59f72d8f9e7db06a0343bdb1?s=128&d=identicon&r=PG", "display_name": "nponeccop", "link": "https://stackoverflow.com/users/805266/nponeccop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1521490364, "creation_date": 1521387321, "last_edit_date": 1521395212, "question_id": 49349731, "link": "https://stackoverflow.com/questions/49349731/can-i-retest-all-installed-cpan-modules", "title": "Can I retest all installed CPAN modules?", "body": "<p>If a module <code>A</code> relies on module <code>B</code> and module <code>B</code> is upgraded, <code>A</code> may break due to changes. My idea is to retest both <code>A</code> and <code>B</code> after upgrading <code>B</code>.</p>\n\n<p>I think the easiest way is just to retest everything that can be retested: download every installed module from CPAN and execute its test scripts.</p>\n\n<p>Is there a way to download and retest?</p>\n\n<p>If there is no way, are there any helpers/API so I can implement such tool?</p>\n\n<p>I basically need to</p>\n\n<ul>\n<li>query what is installed (including version numbers)</li>\n<li>download and unpack exact versions</li>\n<li>execute tests</li>\n</ul>\n"}, {"tags": ["perl", "perl-ipc-run"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1521382559, "post_id": 49348501, "comment_id": 85697393, "body": "Its not working correctly. 1. printing output only after i press any key (exit program). 2. dont sending STDIN i think. here my terminal <code>perl &quot;ipc.pl&quot; 2 OPTION 1: from: 2017-12-08 07:04:00 to: 2018-03-14 19:04:00 OPTION 2: from: 2018-03-16 00:04:00 to: 2018-03-18 10:04:00</code> I must press 2 to see output"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1521426388, "post_id": 49348501, "comment_id": 85710244, "body": "@J. Doe, <code>node</code> is probably buffering its output. Look at IPC::Run&#39;s <code>&gt;pty&gt;</code> to try to fool it."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1521380323, "creation_date": 1521380323, "answer_id": 49348501, "question_id": 49348144, "link": "https://stackoverflow.com/questions/49348144/perl-send-stdin-and-filter-stdout-from-external-program/49348501#49348501", "title": "Perl send STDIN and filter STDOUT from external program", "body": "<p>You can specify a sub instead of a file handle for stdout, it will get each line of the output as an argument:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse IPC::Run3 qw(run3);\n\nmy $stdout;\nlocal $| = 1;\nrun3 ['command'], undef, sub {\n    $_ = shift;\n    return unless /(?:OPTION \\d+|from|to|option):\\s+/;\n\n    s/.*INFO\\):\\s+//;\n    print\n};\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521387542, "creation_date": 1521377969, "last_edit_date": 1521387542, "question_id": 49348144, "link": "https://stackoverflow.com/questions/49348144/perl-send-stdin-and-filter-stdout-from-external-program", "title": "Perl send STDIN and filter STDOUT from external program", "body": "<p>I'm writing a Perl wrapper for another application.</p>\n\n<p>I need to pipe STDIN and some STDOUT.</p>\n\n<h3>Perl code</h3>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nuse IPC::Run3 qw(run3);\n\nmy $stdout;\n\nlocal $| = 1;\n\nrun3 ['node','gekko',\"-b\",\"-c\",\"BNB-XLM-Doktor_v1-5-144-config.js\"],  undef, $stdout;\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>2018-03-18 13:50:10 (DEBUG):    Available 142534\n2018-03-18 13:50:10 (DEBUG):    Optimal 144240\n2018-03-18 13:50:10 (INFO): The database has 1707 candles missing, Figuring out which ones...\n2018-03-18 13:50:11 (INFO): Gekko detected multiple dateranges in the locally stored history. Please pick the daterange you are interested in testing:\n2018-03-18 13:50:11 (INFO):          OPTION 1:\n2018-03-18 13:50:11 (INFO):      from: 2017-12-08 07:04:00\n2018-03-18 13:50:11 (INFO):      to: 2018-03-14 19:04:00\n2018-03-18 13:50:11 (INFO):          OPTION 2:\n2018-03-18 13:50:11 (INFO):      from: 2018-03-16 00:04:00\n2018-03-18 13:50:11 (INFO):      to: 2018-03-18 10:04:00\nprompt: option: \n</code></pre>\n\n<h3>I want to achieve this STDOUT:</h3>\n\n<pre><code>OPTION 1:\nfrom: 2017-12-08 07:04:00\nto: 2018-03-14 19:04:00\nOPTION 2:\nfrom: 2018-03-16 00:04:00\nto: 2018-03-18 10:04:00\nprompt: option: \n</code></pre>\n\n<p>So STDOUT must be filtered and I haven't any idea how do this.</p>\n\n<p>I tried with <code>$stdout =~ s/....//g</code> but it's not working.</p>\n\n<p>Remember that it must send STDIN from parent to child too after filtering STDOUT</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1521348098, "post_id": 49344500, "comment_id": 85689197, "body": "You are iterating over an array, so you should just <code>print $i</code>;  You are also modifying the array you are iterating over, which is generally a bad idea and can cause unexpected results.  Better to copy the array that you wish to manipulate."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1521348149, "post_id": 49344500, "comment_id": 85689203, "body": "Also, 1-letter variables are in general not a good idea, but specifically in perl, the variables <code>$a</code> and <code>$b</code> have a special purpose, see perldoc -f sort"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1521348408, "post_id": 49344500, "comment_id": 85689233, "body": "if you want to print the array 3 times, you can:  <code>for (1..3) { print @arr; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "edited": false, "score": 0, "creation_date": 1521387628, "post_id": 49344524, "comment_id": 85699207, "body": "Thanks ikegami for replying. yeah you are correct i am trying to print array in reverse order ( without using inbuilt reverse function though)"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "edited": false, "score": 0, "creation_date": 1521392389, "post_id": 49344524, "comment_id": 85700780, "body": "@rawatsandeep1989 what is the purpose of NOT using built-ins for your need? Just to learn how it works or something else?"}, {"owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1521435358, "post_id": 49344524, "comment_id": 85712086, "body": "@patrick Mevzek ,yes just to learn how it works. :-) what if there were no builtins."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521435478, "post_id": 49344524, "comment_id": 85712111, "body": "That&#39;s a stupid premise. If there were no operators, you wouldn&#39;t be able to do anything at all. If you were specifically referring to named operators, you be limited to writing programs that couldn&#39;t produce any output but runtime errors. (Not useful.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 11, "last_activity_date": 1521428444, "last_edit_date": 1521428444, "creation_date": 1521348144, "answer_id": 49344524, "question_id": 49344500, "link": "https://stackoverflow.com/questions/49344500/how-foreach-loop-in-perl-works-with-arrays-in-perl/49344524#49344524", "title": "How foreach loop in perl works with arrays in perl", "body": "<p><a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">perlsyn</a>:</p>\n\n<blockquote>\n  <p>If any part of LIST is an array, <code>foreach</code> will get very confused if you add or remove elements within the loop body, for example with <code>splice</code>. So don't do that. </p>\n</blockquote>\n\n<p>As confused as this makes Perl, you appear to be even more confused. What are trying to do? Print the elements in reverse order? If so, you could use</p>\n\n<pre><code>for my $ele (reverse @arr) {\n   print(\"$ele\\n\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for my $i (1..@arr) {\n   my $ele = $arr[-$i];\n   print(\"$ele\\n\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>while (@arr) {\n   my $ele = pop(@arr);\n   print(\"$ele\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521428444, "creation_date": 1521347701, "question_id": 49344500, "link": "https://stackoverflow.com/questions/49344500/how-foreach-loop-in-perl-works-with-arrays-in-perl", "title": "How foreach loop in perl works with arrays in perl", "body": "<p>this program should execute three times but is executing only twice.\nCan anyone explain how this foreach loop will work in perl.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @arr=(\"sandeepr\", \"vijay\",\"vikas\");\nfor my $i( @arr)\n{\n    print @arr;\n    my $b=pop(@arr);\n    print \"\\n $b\";\n}\n</code></pre>\n"}, {"tags": ["perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1521343489, "post_id": 49343593, "comment_id": 85688594, "body": "<a href=\"https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default\" title=\"why does modern perl avoid utf 8 by default\">stackoverflow.com/questions/6162484/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1604159848, "post_id": 49347378, "comment_id": 114264812, "body": "Hi. Do you know how to make log output in utf8? Here is line from console: <code>[1761] [info] 20650274 Contractor:&#208;&#208;&#190;&#209;&#209;&#208;&#190;&#208;&#178;</code>"}], "tags": [], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "is_accepted": true, "score": 5, "last_activity_date": 1521374406, "last_edit_date": 1521374406, "creation_date": 1521372749, "answer_id": 49347378, "question_id": 49343593, "link": "https://stackoverflow.com/questions/49343593/how-to-make-mojolicious-deal-with-utf-8/49347378#49347378", "title": "How to make Mojolicious deal with UTF-8?", "body": "<p>What I've understood from <a href=\"https://perldoc.perl.org/perluniintro.html\" rel=\"noreferrer\">perluniintro</a>, <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"noreferrer\">perlunicode</a>, and xxfelixxx's <a href=\"https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default\">link</a> is that Unicode is a complex matter. You can't generally make it just work. There are bytes (octets) and text. Before handling input you most of the time have got to convert bytes to text (<code>decode</code>), and before outputting, you've got to do the reverse (<code>encode</code>). If it were not about third-party libraries, one could do <code>use open qw( :encoding(UTF-8) :std );</code>, or <code>binmode</code>. But with third-party libraries you are not always able to do so.</p>\n\n<p>As such, <code>$res-&gt;body</code> is bytes, <code>$res-&gt;text</code> is text decoded from encoding specified in response. <code>$res-&gt;dom</code> takes <a href=\"https://github.com/kraih/mojo/blob/v7.71/lib/Mojo/Message.pm#L69\" rel=\"noreferrer\"><code>$res-&gt;text</code></a> as input. So, <code>$res-&gt;dom-&gt;at('.some-selector')-&gt;text</code> is text, and <code>Mojo::File-&gt;new(...)-&gt;spurt()</code> expects to get bytes. So you have no other way, but to encode it using UTF-8. And by the way, <code>utf8</code> is not <code>UTF-8</code>. The latter is safer, so you'd better use <code>encode</code>/<code>decode</code> functions.</p>\n\n<p>Then, <code>$c-&gt;render(text =&gt; ...);</code> expects text, not bytes. So you either have got to <code>decode('UTF-8', $res-&gt;body)</code>, or pass <code>$res-&gt;text</code>.</p>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 49347378, "answer_count": 1, "score": 5, "last_activity_date": 1521374406, "creation_date": 1521335877, "question_id": 49343593, "link": "https://stackoverflow.com/questions/49343593/how-to-make-mojolicious-deal-with-utf-8", "title": "How to make Mojolicious deal with UTF-8?", "body": "<p>Consider the following code. This way I get \"Wide character in syswrite\" for a file, and garbage in a browser:</p>\n\n<pre><code>use Mojolicious::Lite;\nuse Mojo::UserAgent;\nuse Mojo::File;\n\nget '/' =&gt; sub {\n    my $c = shift;\n    my $ua  = Mojo::UserAgent-&gt;new;\n    $res = $ua-&gt;get('https://...')-&gt;result;\n    Mojo::File-&gt;new('resp')-&gt;spurt($res-&gt;dom-&gt;at('.some-selector')-&gt;text);\n    $c-&gt;render(text =&gt; $res-&gt;body);\n}\n\napp-&gt;start;\n</code></pre>\n\n<p>But this way it works:</p>\n\n<pre><code>use Encode qw/encode_utf8 decode_utf8/;\nMojo::File-&gt;new('resp')-&gt;spurt(encode_utf8($res-&gt;dom-&gt;at('.some-selector')-&gt;text));\nMojo::File-&gt;new('resp')-&gt;spurt($res-&gt;body);\n$c-&gt;render(text =&gt; decode_utf8($res-&gt;body));\n</code></pre>\n\n<p>Can you explain what's going on here? Why do the two of the statements not work without <code>Encode</code> module? Why does the second one work? Is there a better way to handle it? I've skimmed over <a href=\"https://perldoc.perl.org/perluniintro.html\" rel=\"noreferrer\">perluniintro</a> and <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"noreferrer\">perlunicode</a>, but that's as far as I could get.</p>\n"}, {"tags": ["arrays", "perl", "dictionary", "hash", "hashref"], "comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521337563, "post_id": 49343427, "comment_id": 85687771, "body": "So why aren&#39;t key_3 and key_4 put in the same array in your example since they got the same year and month?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1521341196, "post_id": 49343427, "comment_id": 85688274, "body": "What you say you want to create is not an array of hashes, it is <i>hash</i> of hashes.  The members of what you are calling the outer &quot;list&quot; are key-value pairs, so the outer structure is a hasn, not a list."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521343625, "post_id": 49343427, "comment_id": 85688610, "body": "You say you want <code>$VAR1 = [$k,$v,$k,$v...], [...], [...], ...;</code>, which makes no sense. The accepted answer assumed you meant you want <code>$VAR1 = [ [$k,$v,$k,$v,...], [...], [...], ... ];</code>, but wouldn&#39;t <code>$VAR1 = [ { $k=&gt;$v,$k=&gt;$v,...}, {...}, {...}, ... ];</code> make more sense?"}, {"owner": {"reputation": 76, "user_id": 7152090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW4ob.jpg?s=128&g=1", "display_name": "rnarcos", "link": "https://stackoverflow.com/users/7152090/rnarcos"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521348802, "post_id": 49343427, "comment_id": 85689277, "body": "@KjetilS. I fixed it, my bad."}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 7152090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW4ob.jpg?s=128&g=1", "display_name": "rnarcos", "link": "https://stackoverflow.com/users/7152090/rnarcos"}, "edited": false, "score": 0, "creation_date": 1521337954, "post_id": 49343747, "comment_id": 85687829, "body": "Yes, you are right, key_3 and key_4 should belong to the same group!  Thank you for your answer!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1521337596, "creation_date": 1521337596, "answer_id": 49343747, "question_id": 49343427, "link": "https://stackoverflow.com/questions/49343427/perl-create-array-of-hashes-based-on-hash-filter/49343747#49343747", "title": "Perl - Create Array of Hashes based on Hash filter", "body": "<p>I'm getting a slightly different results - key_3 and key_4 should belong to the same group.</p>\n\n<pre><code>my %by_year_and_month;\nundef $by_year_and_month{ $hash{$_}{year} }{ $hash{$_}{month} }{$_}\n    for keys %hash;\n\nmy $result;\nfor my $year (keys %by_year_and_month) {\n    for my $month (keys %{ $by_year_and_month{$year} }) {\n        push @$result, [ map { $_ =&gt; { month =&gt; $month, year =&gt; $year } }\n                         keys %{ $by_year_and_month{$year}{$month} } ];\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1521338505, "creation_date": 1521338505, "answer_id": 49343820, "question_id": 49343427, "link": "https://stackoverflow.com/questions/49343427/perl-create-array-of-hashes-based-on-hash-filter/49343820#49343820", "title": "Perl - Create Array of Hashes based on Hash filter", "body": "<pre><code>my %hash = (\n    key_1 =&gt; {year =&gt; 2000, month =&gt; 02},\n    key_2 =&gt; {year =&gt; 2000, month =&gt; 02},\n    key_3 =&gt; {year =&gt; 2000, month =&gt; 03},\n    key_4 =&gt; {year =&gt; 2000, month =&gt; 03},\n    key_5 =&gt; {year =&gt; 2000, month =&gt; 01}\n);\nmy @v=qw(year month);             # keys compared\nmy @k=sort keys %hash;\nmy(@a,%i);\npush@{$a[sub{$i{join$;,map$_[0]{$_},@v}//=@a}-&gt;($hash{$_})]},($_=&gt;$hash{$_}) for@k;\nuse Data::Dumper; print Dumper(\\@a);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1521343982, "creation_date": 1521343982, "answer_id": 49344235, "question_id": 49343427, "link": "https://stackoverflow.com/questions/49343427/perl-create-array-of-hashes-based-on-hash-filter/49344235#49344235", "title": "Perl - Create Array of Hashes based on Hash filter", "body": "<p>You say you want the following, but it makes no sense.</p>\n\n<pre><code> $VAR1 = [$k,$v,$k,$v...], [...], [...], ...;\n</code></pre>\n\n<hr>\n\n<p>The accepted answer assumed you meant you want the following:</p>\n\n<pre><code>$VAR1 = [ [$k,$v,$k,$v,...], [...], [...], ... ];\n</code></pre>\n\n<p>That can be obtained as follows:</p>\n\n<pre><code>sub group_id { sprintf \"%04d-%02d\", @{ $_[0] }{qw( year month )} }\n\nmy %grouped;\nfor my $k (keys(%hash)) {\n   my $v = $hash{$k};\n   push @{ $grouped{ group_id($v) } }, $k, $v;\n}\n\nmy $VAR1 = [ map { $grouped{$_} } sort keys %grouped ];\n</code></pre>\n\n<hr>\n\n<p>But that's a very weird format. The following would make far more sense:</p>\n\n<pre><code>$VAR1 = [ { $k=&gt;$v,$k=&gt;$v,...}, {...}, {...}, ... ];\n</code></pre>\n\n<p>That can be obtained as follows:</p>\n\n<pre><code>sub group_id { sprintf \"%04d-%02d\", @{ $_[0] }{qw( year month )} }\n\nmy %grouped;\nfor my $k (keys(%hash)) {\n   my $v = $hash{$k};\n   $grouped{ group_id($v) }{$k} = $v;\n}\n\nmy $VAR1 = [ map { $grouped{$_} } sort keys %grouped ];\n</code></pre>\n\n<hr>\n\n<p>In both cases, the key is to use a hash to group similar things.</p>\n\n<p>In both cases, the resulting groups are ordered chronologically.</p>\n"}], "owner": {"reputation": 76, "user_id": 7152090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PW4ob.jpg?s=128&g=1", "display_name": "rnarcos", "link": "https://stackoverflow.com/users/7152090/rnarcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 49343747, "answer_count": 3, "score": 0, "last_activity_date": 1521348718, "creation_date": 1521333950, "last_edit_date": 1521348718, "question_id": 49343427, "link": "https://stackoverflow.com/questions/49343427/perl-create-array-of-hashes-based-on-hash-filter", "title": "Perl - Create Array of Hashes based on Hash filter", "body": "<p>I have this hash that contains some information: </p>\n\n<pre><code>my %hash = (\n    key_1 =&gt; {\n        year =&gt; 2000,\n        month =&gt; 02,\n    }, \n    key_2 =&gt; {\n        year =&gt; 2000,\n        month =&gt; 02,\n    }, \n    key_3 =&gt; {\n        year =&gt; 2000,\n        month =&gt; 03,\n    }, \n    key_4 =&gt; {\n        year =&gt; 2000,\n        month =&gt; 05,\n    }, \n    key_5 =&gt; {\n        year =&gt; 2000,\n        month =&gt; 01,\n    }\n);\n</code></pre>\n\n<p>I wan't to create an array of hashes in which each of the array elements, lists every single hash key/value pairs that has the same year and month.</p>\n\n<p>So basically I want to create something like this:</p>\n\n<pre><code>$VAR1 = [\n    'key_1' =&gt; {\n        'month' =&gt; 2,\n        'year' =&gt; 2000\n    },\n    'key_2' =&gt; {\n        'month' =&gt; 2,\n        'year' =&gt; 2000\n    }\n], [\n    'key_3' =&gt; {\n        'month' =&gt; 3,\n        'year' =&gt; 2000\n    }\n], [\n    'key_4' =&gt; {\n        'month' =&gt; 3,\n        'year' =&gt; 2000\n    }\n], [\n    'key_5' =&gt; {\n        'year' =&gt; 2000,\n        'month' =&gt; 1\n    }\n];\n</code></pre>\n\n<p>The real question here is: How can I compare a hash key key value's to other key key value's and make a map out of it.</p>\n\n<p>Thank you for your time! =)</p>\n"}, {"tags": ["oracle", "perl", "query-parser"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1521313167, "post_id": 49340060, "comment_id": 85681599, "body": "you could maybe get some of the detail from the explain plan of the query."}, {"owner": {"reputation": 14265, "user_id": 4808122, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/T2JjI.jpg?s=128&g=1", "display_name": "Marmite Bomber", "link": "https://stackoverflow.com/users/4808122/marmite-bomber"}, "edited": false, "score": 0, "creation_date": 1521317206, "post_id": 49340060, "comment_id": 85682857, "body": "To get a list of referenced tables from query see <a href=\"https://stackoverflow.com/questions/49157492/oracle-search-list-of-words-in-string-and-retruen-existing-ones/49183459#49183459\">here</a>. Do you mean returned columns (easy from cursor metadata) or really <i>used</i> columns (check <code>Column Projection Information</code> in execution plan)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521323152, "post_id": 49340060, "comment_id": 85684542, "body": "<code>TO_DATE</code> and <code>TO_CHAR</code> aren&#39;t columns: they are functions."}, {"owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "edited": false, "score": 0, "creation_date": 1521523111, "post_id": 49340060, "comment_id": 85754357, "body": "Hi Marmite Bomber, Could you please tell me about column Projection Information and how to get that?"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "edited": false, "score": 0, "creation_date": 1521523163, "post_id": 49354794, "comment_id": 85754369, "body": "Hi, Thanks! using this approach I can retrieve the tables name used, but how about the columns from those tables?"}, {"owner": {"reputation": 1072, "user_id": 9000260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3ae7b76129c29d0ace8ddec58c1bf6?s=128&d=identicon&r=PG&f=1", "display_name": "eifla001", "link": "https://stackoverflow.com/users/9000260/eifla001"}, "reply_to_user": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "edited": false, "score": 1, "creation_date": 1521524845, "post_id": 49354794, "comment_id": 85754880, "body": "Haha, I don&#39;t know how to get the columns. But I added a query in my answer, maybe it can help you."}], "tags": [], "owner": {"reputation": 1072, "user_id": 9000260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3ae7b76129c29d0ace8ddec58c1bf6?s=128&d=identicon&r=PG&f=1", "display_name": "eifla001", "link": "https://stackoverflow.com/users/9000260/eifla001"}, "is_accepted": true, "score": 2, "last_activity_date": 1521524778, "last_edit_date": 1521524778, "creation_date": 1521424865, "answer_id": 49354794, "question_id": 49340060, "link": "https://stackoverflow.com/questions/49340060/is-there-a-way-to-list-tables-and-columns-used-in-a-oracle-query/49354794#49354794", "title": "Is there a way to list tables and columns used in a ORACLE query?", "body": "<p>Not sure if this is the answer but you can create a VIEW using your query.</p>\n\n<pre><code>CREATE VIEW your_view_name\nAS SELECT * FROM your_table_or_complex_query;\n</code></pre>\n\n<p>Then list the tables using the SYS.USER_DEPENDENCIES table.</p>\n\n<pre><code>select *\n  from SYS.USER_DEPENDENCIES\n where type = 'VIEW'\n   AND REFERENCED_TYPE IN ('VIEW', 'TABLE', 'SYNONYM')\n   AND name = '&lt;view_name&gt;';\n</code></pre>\n\n<p>To list the columns, you can use the query below, (the problem with this query is if a column for example COLUMN1 exists in three tables TAB1, TAB2, TAB3 but in your query it only came from TAB1, the three tables will be shown)</p>\n\n<pre><code>SELECT a.referenced_name, b.column_name\n  FROM SYS.USER_DEPENDENCIES A, USER_TAB_COLS B, \n       (SELECT dbms_metadata.get_ddl('VIEW','&lt;view_name&gt;','&lt;schema_name&gt;') ddl_text FROM DUAL) c\n WHERE TYPE = 'VIEW'\n   AND REFERENCED_TYPE IN ('VIEW', 'TABLE', 'SYNONYM')\n   AND name = '&lt;view_name&gt;'\n   AND b.table_name = a.name\n   AND INSTR(lower(c.ddl_text), lower(b.column_name)) &gt; 0\n   ORDER BY referenced_name;\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 1, "closed_date": 1521599787, "accepted_answer_id": 49354794, "answer_count": 1, "score": 2, "last_activity_date": 1521524778, "creation_date": 1521309156, "question_id": 49340060, "link": "https://stackoverflow.com/questions/49340060/is-there-a-way-to-list-tables-and-columns-used-in-a-oracle-query", "closed_reason": "Duplicate", "title": "Is there a way to list tables and columns used in a ORACLE query?", "body": "<p>I've a huge Oracle query (~20k lines) and I need to list out all the tables and columns used in that query. I've google'd and found few SQL-Parser tools and plugins, but they didn't worked out to me.</p>\n\n<p>Found below perl library, but it is not processing TO_DATE and TO_CHAR columns. it is throwing error.</p>\n\n<p><a href=\"http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Parser.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~rehsack/SQL-Statement-1.412/lib/SQL/Parser.pm</a></p>\n\n<p>Is there any other way in which I can list all the tables and columns used in the query?</p>\n"}, {"tags": ["perl", "tree-traversal", "fancytree"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1521296082, "post_id": 49337768, "comment_id": 85675989, "body": "Once you&#39;ve built this, you should put it on CPAN."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521296130, "post_id": 49337768, "comment_id": 85676009, "body": "@simbabque Sounds good. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521296131, "post_id": 49337768, "comment_id": 85676010, "body": "Could you include a shell script to create the exact directory structure you are using please?"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521296222, "post_id": 49337768, "comment_id": 85676036, "body": "It&#39;s Perl. Just paste it to the <code>.cgi</code> file with <code>#!&#47;usr&#47;bin&#47;perl</code>, add the sub there and then run it. Example: <code>get_tree(&#39;&#47;root&#39;)</code>. That&#39;s all."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521296286, "post_id": 49337768, "comment_id": 85676047, "body": "You misunderstand. I want code to create a directory structure that matches your exact one in your example so I can copy/paste your code and your expected output to test against. I don&#39;t want to fiddle with getting the correct folders manually. Something like <code>mkdir dir1; mkdir dir1&#47;sub-dir1</code> and so on."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521296460, "post_id": 49337768, "comment_id": 85676088, "body": "Okay, I see, here is the Perl file to use: <a href=\"https://gist.github.com/qooob/0cf71b699bb9c2446ca14a0b2c01b04d\" rel=\"nofollow noreferrer\">gist.github.com/qooob/0cf71b699bb9c2446ca14a0b2c01b04d</a> and I will post the command, hold on a second."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521296739, "post_id": 49337768, "comment_id": 85676180, "body": "Do you really want only the directories in the structure, or should there be files in there as well? If so, then what should they look like, as a <code>parent</code> field is irrelevant?"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521297134, "post_id": 49337768, "comment_id": 85676299, "body": "@Borodin I only expect directories to be there, no files. It&#39;s the tree-view that I&#39;m making for Authentic Theme for Webmin/Usermin."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521297488, "post_id": 49337768, "comment_id": 85676404, "body": "@simbabque Run it on the console to create the same directory structure. <code>mkdir paths &amp;&amp; cd &quot;$_&quot; &amp;&amp; mkdir dir3 &amp;&amp; mkdir dir2 &amp;&amp; mkdir dir1 &amp;&amp; cd &quot;$_&quot; mkdir sub-dir1; mkdir sub-dir2; cd ..&#47;dir2; mkdir sub-dir1 &amp;&amp; cd &quot;$_&quot; &amp;&amp; mkdir sub-sub-dir1 &amp;&amp; cd &quot;$_&quot; &amp;&amp; mkdir sub-sub-sub-dir1</code>. Then you can use it as <code>get_tree(&#39;&#47;tmp&#47;paths&#39;)</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1521302835, "post_id": 49337768, "comment_id": 85678072, "body": "Putting <code>use</code> into a sub is confusing. It&#39;s called when the sub is compiled, not when it&#39;s run."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1521302431, "post_id": 49338685, "comment_id": 85677934, "body": "Putting <code>use</code> into a sub is confusing."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521311168, "post_id": 49338685, "comment_id": 85680944, "body": "Thank you for your answer. The output that is produced unfortunately incorrect. More details here: <a href=\"https://gist.github.com/qooob/0cf71b699bb9c2446ca14a0b2c01b04d\" rel=\"nofollow noreferrer\">gist.github.com/qooob/0cf71b699bb9c2446ca14a0b2c01b04d</a>"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521313879, "post_id": 49338685, "comment_id": 85681827, "body": "@IliaRostovtsev, the gist shows the output of the first value returned by <code>get_tree</code> from my answer. The structure you need is actually returned in the second value. Check how the output is printed at the bottom ot the code."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521315124, "post_id": 49338685, "comment_id": 85682247, "body": "@wolfrevokcats Yes it does. It&#39;s not entirely wrong, it&#39;s just different. This is why I upvoted your answer."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 1, "last_activity_date": 1521308110, "last_edit_date": 1521308110, "creation_date": 1521301287, "answer_id": 49338685, "question_id": 49337768, "link": "https://stackoverflow.com/questions/49337768/create-directory-tree-in-perl-that-would-comply-with-fancytree-expected-json-for/49338685#49338685", "title": "Create directory tree in Perl that would comply with Fancytree expected JSON format", "body": "<p>I guess the following would produce the structure you wanted.  </p>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\n\nsub get_json\n{\n    return JSON-&gt;new-&gt;latin1-&gt;pretty-&gt;encode(@_);\n}\n\nsub get_tree\n{\n    my ($gpath) = @_;\n    my (%r,@rr);\n\n    use File::Find;\n    my $c = sub {\n        my $dir  = $File::Find::name;\n        my $r    = \\%r;\n        my $rr   = \\@rr;\n\n        my $tdir = $dir;\n        $tdir    =~ s|^\\Q$gpath\\E/?||;\n\n        my $previtem;\n        for my $item(split m|/|, $tdir) {\n            if ($previtem) {\n                $rr=$r-&gt;{$previtem}[1]{child}//=[];\n                $r= $r-&gt;{$previtem}[0]{child}//={};\n            }\n            $r-&gt;{$item} //= [ { }, $rr-&gt;[@$rr]= { parent=&gt;$item } ];    \n            $previtem = $item;\n        }\n   };\n    find($c, $gpath);\n    return \\%r,\\@rr;\n}\n\nmy ($r,$rr) = get_tree($ARGV[0]);\nprint get_json($rr);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>[\n   {\n      \"parent\" : \"test.pl\"\n   },\n   {\n      \"parent\" : \"dir1\",\n      \"child\" : [\n         {\n            \"parent\" : \"sub-dir1\"\n         },\n         {\n            \"parent\" : \"sub-dir2\"\n         }\n      ]\n   },\n   {\n      \"parent\" : \"dir2\",\n      \"child\" : [\n         {\n            \"parent\" : \"sub-dir1\",\n            \"child\" : [\n               {\n                  \"parent\" : \"sub-sub-dir1\"\n               }\n            ]\n         }\n      ]\n   },\n   {\n      \"parent\" : \"dir3\"\n   }\n]\n</code></pre>\n\n<hr>\n\n<p>I've run it: <code>perl test.pl .</code>. So you see 'test.pl' in the output </p>\n\n<p>In case you want to traverse only directories, change the find call to:</p>\n\n<pre><code>find({wanted=&gt;$c, preprocess=&gt; sub { grep { -d  $_ } @_; } }, $gpath);  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521306114, "post_id": 49338951, "comment_id": 85679212, "body": "Thank you, your solution is correct (makes Fancytree on client-side just load), however it&#39;s much slower than my initial example. For instance, my <code>get_tree()</code> returns the all paths starting from <code>&#47;</code> in about 1 second. Your example takes forever for <code>&#47;</code>, but <code>&#47;etc</code> works alright. Is there a way to make it faster?"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521307276, "post_id": 49338951, "comment_id": 85679629, "body": "I don&#39;t think we should use <code>Path::Tiny</code>,at first, it&#39;s not the part of the core modules and second it seems to be slower. Would you like to optimize your code?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521314028, "post_id": 49338951, "comment_id": 85681880, "body": "@IliaRostovtsev: Feel free to tweak the code as you like."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521314278, "post_id": 49338951, "comment_id": 85681984, "body": "sure, okay. Thanks a lot."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1521303545, "last_edit_date": 1521303545, "creation_date": 1521302605, "answer_id": 49338951, "question_id": 49337768, "link": "https://stackoverflow.com/questions/49337768/create-directory-tree-in-perl-that-would-comply-with-fancytree-expected-json-for/49338951#49338951", "title": "Create directory tree in Perl that would comply with Fancytree expected JSON format", "body": "<p>Using recursion instead of File::Find, using <a href=\"http://p3rl.org/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> to handle paths:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Path::Tiny;\nsub get_tree {\n    my ($struct, $root, @path) = @_;\n    for my $child (path($root, @path)-&gt;children) {\n        if (-d $child) {\n            my $base = $child-&gt;basename;\n            push @$struct, { parent =&gt; $base };\n            my $recurse = get_tree($struct-&gt;[-1]{child} = [],\n                                   $root, @path, $base);\n            delete $struct-&gt;[-1]{child} unless @$recurse;\n        }\n    }\n    return $struct\n}\n\nuse Test::More tests =&gt; 1;\nuse Test::Deep;\n\nmy $expected = bag({parent =&gt; 'dir1',\n                    child =&gt; bag(\n                        {parent =&gt; 'sub-dir1'},\n                        {parent =&gt; 'sub-dir2'})},\n                   {parent =&gt; 'dir2',\n                    child =&gt; bag(\n                       {parent =&gt; 'sub-dir1',\n                        child  =&gt; bag({\n                           parent =&gt; 'sub-sub-dir1',\n                           child  =&gt; bag({\n                               parent =&gt; 'sub-sub-sub-dir1'\n                           })})})},\n                   {parent =&gt; 'dir3'});\n\nmy $tree = get_tree([], 'paths');\ncmp_deeply $tree, $expected, 'same';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521310396, "post_id": 49339841, "comment_id": 85680704, "body": "This is absolutely perfect. Thank you, pal!"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521310420, "post_id": 49339841, "comment_id": 85680707, "body": "Is there a way to optimize potentially slow regex: <code>s|^\\Q$gpath\\E&#47;?||;</code>"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521311539, "post_id": 49339841, "comment_id": 85681035, "body": "Besides, as I was trying to find out <a href=\"https://stackoverflow.com/questions/49338323/perl-filefind-name-and-dir-subs-not-returning-expected-results-on-empty-ta\">here</a>, <code>$File::Find::dir</code> ignores empty directories. There are commenters stating that <code>$File::Find::dir</code> will still use <code>$File::Find::name</code> and that makes me very iffy, because it doesn&#39;t sound efficient. Do you know the way to force <code>::dir</code> to collect empty directories as well?"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521311593, "post_id": 49339841, "comment_id": 85681050, "body": "For Fancytree to work labels should be <code>title</code> and <code>children</code>, by the way but this is trivial."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521314460, "post_id": 49339841, "comment_id": 85682047, "body": "The code does not output empty directories. @IliaRostovtsev is it what you want?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521314800, "post_id": 49339841, "comment_id": 85682139, "body": "@IliaRostovtsev Re: regex, don&#39;t know how to optimize regex, but <code>-d or return;</code> before it would skip rest of the function when file is handed over, so potentially skipping some unneeded work."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521314993, "post_id": 49339841, "comment_id": 85682198, "body": "No, as I&#39;m creating directory tree-view, all directories should be in the list.  @\u0421\u0443\u0445\u043e\u043927 Last question, how hard it is to sort output lexicographically? It&#39;s the directory tree so it must be sorted. Using simply sort will not work obviously."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1521315234, "post_id": 49339841, "comment_id": 85682282, "body": "Didn&#39;t try it, but perhaps <code>find({wanted=&gt;$c, preprocess=&gt; sub { sort @_ } }, $gpath)</code>"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1521315628, "post_id": 49339841, "comment_id": 85682397, "body": "@\u0421\u0443\u0445\u043e\u043927 Simply genius. Thank you!"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 3, "last_activity_date": 1521308213, "last_edit_date": 1521308213, "creation_date": 1521307910, "answer_id": 49339841, "question_id": 49337768, "link": "https://stackoverflow.com/questions/49337768/create-directory-tree-in-perl-that-would-comply-with-fancytree-expected-json-for/49339841#49339841", "title": "Create directory tree in Perl that would comply with Fancytree expected JSON format", "body": "<p>You can try,</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nsub get_tree {\n    my ($gpath) = @_;\n    my %r;\n    my @root;\n\n    use File::Find;\n    my $cb = sub {\n\n        my $tdir = $File::Find::dir;\n        $tdir    =~ s|^\\Q$gpath\\E/?||;\n        return if $r{$tdir} or !$tdir;\n\n        my ($pdir, $cdir) = $tdir =~ m|^ (.+) / ([^/]+) \\z|x;\n        my $c = $r{$tdir} = { parent =&gt; $cdir // $tdir };\n\n        if (defined $pdir) { push @{ $r{$pdir}{child} }, $c }\n        else { push @root, $c }\n\n    };\n    find($cb, $gpath);\n    return \\@root;\n}\n</code></pre>\n\n<p>It uses hash for fast lookup of nodes, and complete directory structure is built atop of <code>@root</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1521713449, "last_edit_date": 1521713449, "creation_date": 1521378581, "answer_id": 49348237, "question_id": 49337768, "link": "https://stackoverflow.com/questions/49337768/create-directory-tree-in-perl-that-would-comply-with-fancytree-expected-json-for/49348237#49348237", "title": "Create directory tree in Perl that would comply with Fancytree expected JSON format", "body": "<p>Summarizing, here is the final code, that will produce valid <em>JSON</em> object expected by <a href=\"https://github.com/mar10/fancytree\" rel=\"nofollow noreferrer\">Fancytree</a> out of the box. Thanks to everyone, who was generous to spend time and provide help.</p>\n\n<p><strong>Perl:</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n=head2 get_tree(path, [depth])    \n\nBuild sorted directory tree in format expected by Fancytree\n\n=item path - The path from which to start searching.\n=item depth - The optional parameter to limit the depth.\n\n=cut\n\nuse File::Find;\nuse JSON;\n\nsub get_tree {\n  my ( $p, $d ) = @_;\n  my $df = int($d);\n  my %r;\n  my @r;\n\n  my $wanted = sub {\n    my $td = $File::Find::name;\n    if ( -d $td ) {\n        $td =~ s|^\\Q$p\\E/?||;\n        if ( $r{$td} || !$td ) {\n            return;\n        }\n        my ( $pd, $cd ) = $td =~ m|^ (.+) / ([^/]+) \\z|x;\n        my $pp = $p ne '/' ? $p : undef;\n        my $c = $r{$td} = {\n            key   =&gt; \"$pp/$td\",\n            title =&gt; ( defined($cd) ? $cd : $td )\n        };\n        defined $pd ? ( push @{ $r{$pd}{children} }, $c ) : ( push @r, $c );\n    }\n  };\n  my $preprocess = sub {\n    my $dd = ( $df &gt; 0 ? ( $df + 1 ) : 0 );\n    if ($dd) {\n        my $d = $File::Find::dir =~ tr[/][];\n        if ( $d &lt; $dd ) {\n            return sort @_;\n        }\n        return;\n    }\n    sort @_;\n  };\n  find(\n    {\n        wanted     =&gt; $wanted,\n        preprocess =&gt; $preprocess\n    },\n    $p\n);\nreturn \\@r;\n}\n\n\n# Retrieve JSON tree of `/home` with depth of `5`\nJSON-&gt;new-&gt;encode(get_tree('/home', 5));\n</code></pre>\n\n<p><strong>JavaScript:</strong></p>\n\n<pre><code>$('.container').fancytree({\n    source: $.ajax({\n        url: tree.cgi,\n        dataType: \"json\"\n    })\n});\n</code></pre>\n\n<hr>\n\n<p>I'm using it in <a href=\"https://github.com/qooob/authentic-theme\" rel=\"nofollow noreferrer\">Authentic Theme</a> for <a href=\"https://github.com/webmin/webmin/\" rel=\"nofollow noreferrer\">Webmin</a>/<a href=\"https://github.com/webmin/usermin/\" rel=\"nofollow noreferrer\">Usermin</a> for File Manager.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0LSlS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0LSlS.png\" alt=\"enter image description here\"></a></p>\n\n<p>Try it on the best server management panel of the 21st Century  \u2665\ufe0f</p>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 49339841, "answer_count": 4, "score": 4, "last_activity_date": 1521713449, "creation_date": 1521295247, "last_edit_date": 1592644375, "question_id": 49337768, "link": "https://stackoverflow.com/questions/49337768/create-directory-tree-in-perl-that-would-comply-with-fancytree-expected-json-for", "title": "Create directory tree in Perl that would comply with Fancytree expected JSON format", "body": "<p>How to create directory tree in <em>Perl</em> to comply with <em>Fancytree</em> expected JSON <a href=\"https://github.com/mar10/fancytree/wiki#define-the-tree-data\" rel=\"nofollow noreferrer\">format</a>?</p>\n<p>This is the <em>Perl</em> part I came up with, that traverses through given path:</p>\n<pre><code>sub get_tree\n{\n    my ($gpath) = @_;\n    my %r;\n\n    use File::Find;\n    my $c = sub {\n        my $dir  = $File::Find::dir;\n        my $r    = \\%r;\n\n        my $tdir = $dir;\n        $tdir    =~ s|^\\Q$gpath\\E/?||;\n\n        $r = $r-&gt;{$_} ||= {} for split m|/|, $tdir;\n    };\n    find($c, $gpath);\n    return \\%r;\n}\n</code></pre>\n<p>It returns the following result after JSON encode:</p>\n<pre><code> {\n  &quot;dir3&quot;:{\n\n  },\n  &quot;dir1&quot;:{\n    &quot;sub-dir2&quot;:{\n\n    },\n    &quot;sub-dir1&quot;:{\n\n    }\n  },\n  &quot;dir2&quot;:{\n    &quot;sub-dir1&quot;:{\n      &quot;sub-sub-dir1&quot;:{\n        &quot;sub-sub-sub-dir1&quot;:{\n\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>The expected result for <em>Fancytree</em> to comply with its JSON <a href=\"https://github.com/mar10/fancytree/wiki#define-the-tree-data\" rel=\"nofollow noreferrer\">format</a> is:</p>\n<pre><code>[\n    {&quot;parent&quot;: &quot;dir3&quot;},\n    {&quot;parent&quot;: &quot;dir2&quot;, &quot;child&quot;: [\n       {&quot;parent&quot;: &quot;sub-dir1&quot;, &quot;child&quot;: [\n          {&quot;parent&quot;: &quot;sub-sub-dir1&quot;, &quot;child&quot;: [\n             {&quot;parent&quot;: &quot;sub-sub-sub-dir1&quot;}\n          ]}\n       ]}\n    ]},\n    {&quot;parent&quot;: &quot;dir1&quot;, &quot;child&quot;: [\n       {&quot;parent&quot;: &quot;sub-dir1&quot;},\n       {&quot;parent&quot;: &quot;sub-dir1&quot;}\n    ]}\n]\n</code></pre>\n<p>The point is to do it in a single run, without post processing, which would be ideal.</p>\n<p>Any help of how to achieve that?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1521290227, "post_id": 49335711, "comment_id": 85673521, "body": "Ok, but with this approach, it seems like you would effectively have to slip in Content Negotiation code, outside of where it is being handled.  In short, I&#39;m not sure if your code would actually be more efficient because it would have to check both the request, find and scan the appropriate <code>respond_to</code> block to see if it was explicitly handled (Unless you&#39;re going to make the kind of assumptions that get hard to unmake as you maintain such a solution).  Efficiency is not just found in the dispatch, but also in its ability to solve your problem without inefficiency."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1521291408, "post_id": 49335711, "comment_id": 85673868, "body": "@EdwinBuck: sorry, I do not mean speed efficiency. I mean it will be hard to maintain those <code>copy&#47;paste</code> code."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1521292202, "post_id": 49335711, "comment_id": 85674092, "body": "I understand.  To me it seems like you&#39;d be better off with copying / pasting.  Whatever inefficiencies in &quot;code maintenance&quot; you safe will immediately be lost as soon as your framework goes into active maintenance where someone doesn&#39;t realize you&#39;ve effectively rewritten that part of the framework.  It&#39;s nice to not fork frameworks, and you are only one find / sed combination away from mass application of the handling code in a way that permits you to configure pages to not have a JSON handler (or to have 3 non-fallback handlers)."}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1521288444, "post_id": 49335795, "comment_id": 85673023, "body": "This is very inefficient to put same code into each action. Also this will disable auto template selection based on <code>{ format }</code>"}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1521288697, "post_id": 49335795, "comment_id": 85673097, "body": "@EugenKonkov Efficient in what sense?  You didn&#39;t benchmark it, and I have no idea what metric you would benchamark (time, memory, response time, etc).  Efficient in the sense of having to type it?  How did you expect to specify it without some typing?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1521289788, "post_id": 49335795, "comment_id": 85673395, "body": "I have updated the question. I type that in my two templates, there is no need to type those in all ten (hundred?) actions"}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1521291018, "post_id": 49335795, "comment_id": 85673768, "body": "I fully understand your reqeust, and hope you find a better solution than mass application using sed / awk; but, it does seem like you are working against the framework in this case.  Good luck!"}], "tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 1, "last_activity_date": 1521288378, "creation_date": 1521288378, "answer_id": 49335795, "question_id": 49335711, "link": "https://stackoverflow.com/questions/49335711/what-is-the-best-place-in-mojolicious-where-to-put-content-negotiation-logic/49335795#49335795", "title": "What is the best place in Mojolicious where to put content negotiation logic?", "body": "<p>To add a response after handling JSON and HTML, add a <code>any</code> respond_to handler.  That way it is in the same location as all of the other Accept/Response handling logic.</p>\n\n<pre><code>$c-&gt;respond_to(\n  json =&gt; {json =&gt; {hello =&gt; 'world'}},\n  html =&gt; {template =&gt; 'hello', message =&gt; 'world'},\n  any  =&gt; {text =&gt; 'We support only HTML and JSON', status =&gt; 415}\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 1, "last_activity_date": 1521710178, "last_edit_date": 1592644375, "creation_date": 1521710178, "answer_id": 49424662, "question_id": 49335711, "link": "https://stackoverflow.com/questions/49335711/what-is-the-best-place-in-mojolicious-where-to-put-content-negotiation-logic/49424662#49424662", "title": "What is the best place in Mojolicious where to put content negotiation logic?", "body": "<blockquote>\n<p>I do not want to copy/paste this code snippet among all actions. I prefer:</p>\n<pre><code>$c-&gt;render( 'hello', data =&gt; $data );\n</code></pre>\n<p>Which will select automatically one of <code>hello.json.ep</code> or <code>hello.html.ep</code> template.</p>\n</blockquote>\n<p>It sounds like you may need to supplement the behavior of <code>$c-&gt;render</code>, since the only code your controllers and their actions have in common is framework code.</p>\n<p>You could extend <a href=\"https://metacpan.org/pod/Mojolicious::Controller\" rel=\"nofollow noreferrer\"><code>Mojolicious::Controller</code></a> creating a <code>Your::Mojo::Controller</code> module with a specialised <code>render_either</code> (in lack of a better name). In general I'd look at how <code>render</code> is implemented, and in particular I'd want to address <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.71/lib/Mojolicious/Controller.pm#L171\" rel=\"nofollow noreferrer\">the following line</a> in <code>render</code>:</p>\n<pre><code>my ($output, $format) = $app-&gt;renderer-&gt;render($self, $args);\n</code></pre>\n<p>This <code>$app-&gt;renderer</code> is a <a href=\"https://metacpan.org/pod/Mojolicious::Renderer\" rel=\"nofollow noreferrer\"><code>Mojolicious::Renderer</code></a>, and its docs speak of both <a href=\"https://metacpan.org/pod/Mojolicious::Renderer#accepts\" rel=\"nofollow noreferrer\"><code>accepts</code></a> and <a href=\"https://metacpan.org/pod/Mojolicious::Renderer#template_handler\" rel=\"nofollow noreferrer\"><code>template_handler</code></a>:</p>\n<pre><code>-&gt;accepts(..., 'html', 'json')\n-&gt;template_handler(template =&gt; 'foo/bar', format =&gt; 'html', ...)\n</code></pre>\n<p>A custom Controller could look like:</p>\n<pre><code>package Your::Mojo::Controller;\nuse Mojo::Base -base;\n\nsub render_either {\n    my $self = shift;\n    my $template = shift;\n    my $args = {@_};\n\n    # Let the renderer know which formats it should accept.\n    # Let the renderer know which template to render in which format.\n    # Either call $self-&gt;render or reproduce its behavior.\n}\n</code></pre>\n<p>I've seen examples of both <code>use Mojo::Base -base;</code> and <code>use Mojo::Base 'Mojolicious::Controller;</code>. I'm not sure about the implications of picking either.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1521710178, "creation_date": 1521287800, "last_edit_date": 1521289774, "question_id": 49335711, "link": "https://stackoverflow.com/questions/49335711/what-is-the-best-place-in-mojolicious-where-to-put-content-negotiation-logic", "title": "What is the best place in Mojolicious where to put content negotiation logic?", "body": "<p>My <code>Mojolicious</code> application can respond only by <code>json</code> or <code>html</code>.</p>\n\n<p>I want to respond with <code>415 Unsupported Media Type</code> status code when different format is requested.</p>\n\n<pre><code>$c-&gt;render( text =&gt; 'We support only HTML and JSON',  status =&gt; 415 )\n</code></pre>\n\n<p>Which <a href=\"http://mojolicious.org/perldoc/Mojolicious#HOOKS\" rel=\"nofollow noreferrer\"><code>hook</code></a> will be the best place to put this logic to?</p>\n\n<p><strong>UPD</strong>  </p>\n\n<pre><code>$c-&gt;respond_to(\n  json =&gt; {template =&gt; 'hello', data =&gt; $data },\n  html =&gt; {template =&gt; 'hello', data =&gt; $data },\n  any  =&gt; {text =&gt; 'We support only HTML and JSON', status =&gt; 415}\n);\n</code></pre>\n\n<p>The <code>hello</code> template is rendered by many actions. And I do not want to <code>copy/paste</code> this code snippet among all actions. I prefer:</p>\n\n<pre><code>$c-&gt;render( 'hello',  data =&gt; $data );\n</code></pre>\n\n<p>Which will select automatically one of <code>hello.json.ep</code> or <code>hello.html.ep</code> template.</p>\n\n<p>I am going to use <a href=\"http://mojolicious.org/perldoc/Mojolicious#before_routes\" rel=\"nofollow noreferrer\"><code>before_routes</code></a> hook and <code>accepts</code> helper to figure out requested format, but unfortunately it is called for every <code>static</code> file. A static response is dispatched already and this will be useless work.</p>\n\n<p>So, is it OK to use <code>before_routes</code> hook or there are exists better place to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1521284660, "post_id": 49334274, "comment_id": 85671991, "body": "Note: Ethernet related methods are implemented on <i><code>Linux</code></i> and <i><code>*BSD</code></i> only."}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1521285131, "post_id": 49334274, "comment_id": 85672106, "body": "What&#39;s your environment? I can&#39;t reproduce this error with this code! Please post complete sample!"}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1521301343, "post_id": 49334274, "comment_id": 85677600, "body": "I&#39;m using ubuntu. Using digitalocean server."}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1521301908, "post_id": 49334274, "comment_id": 85677773, "body": "$packet-&gt;ethset(source =&gt; $saddr, dest =&gt; $dest); Here I get error"}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1521302830, "post_id": 49334274, "comment_id": 85678070, "body": "@F.Hauri added full code."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1521303114, "post_id": 49334274, "comment_id": 85678156, "body": "This code is malicious. It&#39;s a poorly written attempt at a denial-of-service tool. We will not help you debug it."}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "edited": false, "score": 0, "creation_date": 1521303204, "post_id": 49334274, "comment_id": 85678185, "body": "It is a part of my code as asked a &quot;sample code&quot;. Nowhere related to what you say"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521361122, "post_id": 49334274, "comment_id": 85691461, "body": "Hmm, as @duskwuff said: this look not well! What&#39;s the goal of this!"}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "edited": false, "score": 0, "creation_date": 1521369719, "post_id": 49334274, "comment_id": 85693559, "body": "Used to stress test my own protection"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1521386554, "post_id": 49334274, "comment_id": 85698822, "body": "Can you explain what you are trying to test using this script? And why you (partially) removed the code to send multiple packets in an edit?"}, {"owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "edited": false, "score": 0, "creation_date": 1521400810, "post_id": 49334274, "comment_id": 85703744, "body": "If I didn&#39;t removed i wasn&#39;t gonna get help, so.."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 10237508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4184624e7a51feb68ca9569bcebdf4cc?s=128&d=identicon&r=PG", "display_name": "pPointer", "link": "https://stackoverflow.com/users/10237508/ppointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1534482364, "last_edit_date": 1534482364, "creation_date": 1534481353, "answer_id": 51888543, "question_id": 49334274, "link": "https://stackoverflow.com/questions/49334274/rawip-cant-discover-mac-address/51888543#51888543", "title": "RawIP : Cant discover MAC ADDRESS", "body": "<p>Seems that <code>arp_lookup</code> function used to get the mac-addresses not working, i'm not sure why but you can do something like this (manually):</p>\n\n<pre><code>use Net::ARP;\n\n$dest_mac = \"ff:ff:ff:ff:ff:ff\";\n$src_mac  = Net::ARP::get_mac(\"eth0\");\n\n$packet-&gt;ethnew(\"eth0\");\n$packet-&gt;ethset(source =&gt; $src_mac, dest =&gt; $dest_mac);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9506789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9506789/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1534482364, "creation_date": 1521277460, "last_edit_date": 1521308616, "question_id": 49334274, "link": "https://stackoverflow.com/questions/49334274/rawip-cant-discover-mac-address", "title": "RawIP : Cant discover MAC ADDRESS", "body": "<p><em>My environment is ubuntu. Machine hosted on digitalocean</em></p>\n\n<p>The following is a part of code and gives this error: </p>\n\n<blockquote>\n  <p>Can't discover MAC address for 157.5.172.182</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/perl\n\nuse Net::RawIP;\n\n($dest, $count, $port) = split(/\\s+/, \"@ARGV\");\n$opt = @ARGV;\n\nprint \"+----------------------------------+\\n\";\nprint \"Destination: $dest\\n\";\nprint \"Source: Random\\n\";\nprint \"Port: $port\\n\";\nprint \"+----------------------------------+\\n\";\n\n$saddr = join(\".\", map int rand 256, 1 .. 4);\n$rsport = int rand(65535);\n\n$packet =  Net::RawIP-&gt;new({\n    ip =&gt; {\n        saddr =&gt; $saddr,\n        daddr =&gt; $dest,\n    },\n\n    udp =&gt; {\n        source =&gt; $rsport,\n        dest =&gt; $port,\n        data =&gt; \"\\xFF\\xFF\\xFF\\xFFping\",\n    },\n});\n\n$packet-&gt;send;\n$packet-&gt;ethnew(\"eth0\");\n$packet-&gt;ethset(source =&gt; $saddr, dest =&gt; $dest);    \n$packet-&gt;ethsend;\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "aix", "readdir", "file-processing"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1521260795, "post_id": 49332466, "comment_id": 85666902, "body": "You could move the regular expression out of the loop and pre-compile it with <code>qr</code>, but that won&#39;t save you much.  You should check what the bottleneck is, it may be cpu, memory, or disk (hint....its probably disk)."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1521260900, "post_id": 49332466, "comment_id": 85666918, "body": "Do you have a directory with 80000 files in it?  If so, that itself might be your issue, depending on your filesystem.  I would advise breaking them up into a bunch of subdirectories with fewer files in it...if you have more than say 1000 files, that is probably already too many."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1521261091, "post_id": 49332466, "comment_id": 85666942, "body": "Also, if you split the incoming work over different disks (perhaps on different machines as well), you could run this program several times in parallel, to speed up processing."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1521261190, "post_id": 49332466, "comment_id": 85666958, "body": "What kind of file system do you have?  You can look at <code>&#47;etc&#47;fstab</code> or run the <code>df</code> command to find out."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 2, "creation_date": 1521263806, "post_id": 49332466, "comment_id": 85667350, "body": "As others are implying, you have an I/O bound task with performance entirely determined by the file system. If it turns out you have more than one disk channel, then you <i>might</i> get a speedup by pipelining. E.g. use N copies of the script with an instance number I=0,1,...N-1 given as a command line argument. Sort the <code>readdir</code> result and process file I, I+N, I+2N, ... . Another possibility would be to use one script to determine where to move each file and pass it to another that does the move operation. There&#39;s no way to tell if these will result in a speedup except to try."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521268621, "post_id": 49332466, "comment_id": 85668143, "body": "zdim, you should generate 1 million files (not 80k) as the original poster. There might be a performance issue with such a huge number of files on that particular file system."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521268727, "post_id": 49332466, "comment_id": 85668162, "body": "<code>move</code> is not a perl builtin function. Have you tried <code>rename</code> instead?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521269191, "post_id": 49332466, "comment_id": 85668264, "body": "<code>move</code> is not a perl builtin function. Have you tried <code>rename</code> instead? If <code>move()</code> is something that spawns a sub process, that could be the culprit. If you cannot for some reason use perls <code>rename</code>, collect more than one file and move those to the targets in groups."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1521269314, "post_id": 49332466, "comment_id": 85668290, "body": "With <code>local $&#47;;</code> you read the whole file unnecessary. You only need to read to record #6. Are those large files? (how many records)"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1521284445, "post_id": 49332466, "comment_id": 85671917, "body": "Try putting the files on a RAMdisk to reduce i/o times."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1521441488, "post_id": 49332466, "comment_id": 85714101, "body": "<a href=\"https://www.perlmonks.org/?node_id=1211102\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "edited": false, "score": 0, "creation_date": 1521301125, "post_id": 49333536, "comment_id": 85677530, "body": "I&#39;ll try this and let you know.  Thanks!"}, {"owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "edited": false, "score": 0, "creation_date": 1521315779, "post_id": 49333536, "comment_id": 85682445, "body": "Thank you Kjetil!  First:  The rename was more efficient.  Second:  I modified the script and it ran in 1hr and 39 min."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1521271212, "creation_date": 1521271212, "answer_id": 49333536, "question_id": 49332466, "link": "https://stackoverflow.com/questions/49332466/perl-program-to-efficiently-process-500-000-small-files-in-a-directory/49333536#49333536", "title": "Perl Program to efficiently process 500,000 small files in a directory", "body": "<p>Try something like:</p>\n\n<pre><code>print localtime().\"\\n\";                          #to find where time is spent\nopendir(DIR, $dir) or die \"$!\\n\";\nmy @txtFiles = map \"$dir/$_\", grep /\\.txt$/, readdir DIR;\nclosedir(DIR);\n\nprint localtime().\"\\n\";\nmy %fileGroup;\nfor my $txtFile (@txtFiles){\n    # local $/ = \"\\n\";                           #\\n or other record separator\n    open my $fh, '&lt;', $txtFile or die $!;\n    local $_ = join(\"\", map {&lt;$fh&gt;} 1..6);      #read 6 records, not whole file\n    close($fh);\n    push @{ $fileGroup{$1} }, $txtFile\n      if /A\\|CHNL_ID\\|(\\d+)/i or die \"No channel found in $_\";\n}\n\nfor my $channel (sort keys %fileGroup){\n  moveGroup( @{ $fileGroup{$channel} }, \"$outDir/$channel\" );\n}\nprint localtime().\" finito\\n\";\n\nsub moveGroup {\n  my $dir=pop@_;\n  print localtime().\" &lt;- start $dir\\n\";\n  move($_, $dir) for @_;  #or something else if each move spawns sub process\n  #rename($_,$dir) for @_;\n}\n</code></pre>\n\n<p>This splits the job into three main parts where you can time each part to find where most time is spent.</p>\n"}, {"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553198860, "post_id": 49334580, "comment_id": 97306379, "body": "it works in my laptop, but not in my Enterprise Linux which has Perl 5.10.. how do I copy Path::Tiny module manually and use it here?."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1553202701, "post_id": 49334580, "comment_id": 97307970, "body": "@stack0114106 ah, that -- looking at <a href=\"https://metacpan.org/release/Path-Tiny/source/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny&#39;s code</a> ... seems you can just save the file where you want it?  I see no troubling dependencies and it&#39;s all one file :).  Or you can of course just write a string to a file ... but <code>Path::Tiny</code> is indeed often super handy :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1561714885, "last_edit_date": 1561714885, "creation_date": 1521279861, "answer_id": 49334580, "question_id": 49332466, "link": "https://stackoverflow.com/questions/49332466/perl-program-to-efficiently-process-500-000-small-files-in-a-directory/49334580#49334580", "title": "Perl Program to efficiently process 500,000 small files in a directory", "body": "<p>You are being hurt by the sheer number of files in a single directory.</p>\n\n<p>I created <code>80_000</code> files and ran your script which completed in 5.2 seconds. This is on an older laptop with CentOS7 and v5.16. But with half a million files<sup>&dagger;</sup> it takes nearly 7 minutes. Thus the problem is not about the performance of your code per se (but which can also be tightened).</p>\n\n<p>Then one solution is simple: run the script out of a cron, say every hour, as files are coming. While you move the <code>.txt</code> files also move the others elsewhere and there will never be too many files; the script will always run in seconds. In the end you can move those other files back, if needed.</p>\n\n<p>Another option is to store these files on a partition with a different filesystem, say ReiserFS. However, this doesn't at all address the main problem of having way too many files in a directory.</p>\n\n<p>Another partial fix is to replace </p>\n\n<pre><code>while ( defined( my $txtFile = readdir DIR ) )\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while ( my $path = &lt;\"$dir/*txt\"&gt; )\n</code></pre>\n\n<p>which results in a 1m:12s run (as opposed to near 7 minutes).  Don't forget to adjust file-naming since <code>&lt;&gt;</code> above returns the full path to the file. Again, this doesn't really deal with the problem.</p>\n\n<p>If you had control over how the files are distributed you would want a 3-level (or so) deep directory structure, which can be named using files' MD5, what would result in a very balanced distribution.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> File names and their content were created as</p>\n\n<pre><code>perl -MPath::Tiny -wE'\n    path(\"dir/s\".$_.\".txt\")-&gt;spew(\"A|some_id|$_\\n\") for 1..500_000\n'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1522768100, "last_edit_date": 1522768100, "creation_date": 1522767680, "answer_id": 49633272, "question_id": 49332466, "link": "https://stackoverflow.com/questions/49332466/perl-program-to-efficiently-process-500-000-small-files-in-a-directory/49633272#49633272", "title": "Perl Program to efficiently process 500,000 small files in a directory", "body": "<p>This is the sort of task that I often perform. Some of these were already mentioned in various comments. None of these are special to Perl and the biggest wins will come from changing the environment rather than the language.</p>\n\n<ul>\n<li><p>Segment files into separate directories to keep the directories small. Larger directories take longer to read (sometimes exponentially). This happens in whatever produces the files. The file path would be something like <em>.../ab/cd/ef/filename.txt</em> where the <em>ab/cd/ef</em> come from some function that has unlikely collisions. Or maybe it's like <em>.../2018/04/01/filename.txt</em>.</p></li>\n<li><p>You probably don't have much control over the producer. I'd investigate making it add lines to a single file. Something else makes separate files out of that later. </p></li>\n<li><p>Run more often and move processed files somewhere else (again, possibly with hashing.</p></li>\n<li><p>Run continually and poll the directory periodically to check for new files.</p></li>\n<li><p>Run the program in parallel. If you have a lot of idle cores, get them working on it to. You'd need something to decide who gets to work on what.</p></li>\n<li><p>Instead of creating files, shove them into a lightweight data store, such as Redis. Or maybe a heavyweight data store.</p></li>\n<li><p>Don't actually read the file contents. Use File::Mmap instead. This is often a win for very large files but I haven't played with it much on large collections of small files.</p></li>\n<li><p>Get faster spinning disks or maybe an SSD. I had the misfortune where I accidentally created millions of files in a single directory on a slow disk.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1524636665, "post_id": 49669506, "comment_id": 87046444, "body": "<a href=\"http://search.cpan.org/~mlehmann/Linux-Inotify2-1.22/Inotify2.pm\" rel=\"nofollow noreferrer\">Linux::Inotify2</a> (see <a href=\"https://stackoverflow.com/a/41206434/4653379\">this post</a> for an example)"}], "tags": [], "owner": {"reputation": 758, "user_id": 4211231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c11386378a442612ab14ee7e93ce3c7?s=128&d=identicon&r=PG", "display_name": "Matt Oates", "link": "https://stackoverflow.com/users/4211231/matt-oates"}, "is_accepted": false, "score": 2, "last_activity_date": 1522922468, "creation_date": 1522922468, "answer_id": 49669506, "question_id": 49332466, "link": "https://stackoverflow.com/questions/49332466/perl-program-to-efficiently-process-500-000-small-files-in-a-directory/49669506#49669506", "title": "Perl Program to efficiently process 500,000 small files in a directory", "body": "<p>I don't think anyone brought it up but have you considered running a long term process that uses filesystem notifications as near realtime events, instead of processing in batch? Im sure CPAN will have something for Perl 5, there is a built in object in Perl 6 for this to illustrate what I mean <a href=\"https://docs.perl6.org/type/IO::Notification\" rel=\"nofollow noreferrer\">https://docs.perl6.org/type/IO::Notification</a>  Perhaps someone else can chime in on what is a good module to use in P5?</p>\n"}], "owner": {"reputation": 59, "user_id": 9506048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b9554b51f2302fc3dec478a54007741?s=128&d=identicon&r=PG&f=1", "display_name": "DenairPete", "link": "https://stackoverflow.com/users/9506048/denairpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 1, "accepted_answer_id": 49333536, "answer_count": 4, "score": 4, "last_activity_date": 1561714885, "creation_date": 1521260330, "last_edit_date": 1521552750, "question_id": 49332466, "link": "https://stackoverflow.com/questions/49332466/perl-program-to-efficiently-process-500-000-small-files-in-a-directory", "title": "Perl Program to efficiently process 500,000 small files in a directory", "body": "<p>I am processing a large directory every night. It accumulates around 1 million files each night, half of which are <code>.txt</code> files that I need to move to a different directory according to their contents.</p>\n\n<p>Each <code>.txt</code> file is pipe-delimited and contains only 20 records. Record 6 is the one that contains the information I need to determine which directory to move the file to.</p>\n\n<p>Example Record: </p>\n\n<pre><code>A|CHNL_ID|4\n</code></pre>\n\n<p>In this case the file would be moved to <code>/out/4</code>.</p>\n\n<p>This script is processing at a rate of 80,000 files per hour.</p>\n\n<p>Are there any recommendations on how I could speed this up?</p>\n\n<pre><code>opendir(DIR, $dir) or die \"$!\\n\";\nwhile ( defined( my $txtFile = readdir DIR ) ) {\n    next if( $txtFile !~ /.txt$/ );\n    $cnt++;\n\n    local $/;\n    open my $fh, '&lt;', $txtFile or die $!, $/;\n    my $data  = &lt;$fh&gt;;\n    my ($channel) =  $data =~ /A\\|CHNL_ID\\|(\\d+)/i;\n    close($fh);\n\n    move ($txtFile, \"$outDir/$channel\") or die $!, $/;\n}\nclosedir(DIR);\n</code></pre>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1521241104, "post_id": 49330047, "comment_id": 85663245, "body": "Decode the inputs. (Use <code>use CGI qw( -utf8 );</code>) /// You also need to encode your outputs. (Add <code>binmode STDOUT, &#39;:encoding(UTF-8); binmode STDERR, &#39;:encoding(UTF-8);</code>.)"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1521250565, "post_id": 49330047, "comment_id": 85665350, "body": "<a href=\"https://stackoverflow.com/questions/49309468/perl-validate-chinese-character-input-from-web-page-form/49309829#49309829\" title=\"perl validate chinese character input from web page form\">stackoverflow.com/questions/49309468/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521295965, "post_id": 49330047, "comment_id": 85675945, "body": "@ikegami&#39;s answer did it for me:  &quot;Decode the inputs. (Use use CGI qw( -utf8 );)&quot;  Simply changing the &quot;use CGI;&quot; to &quot;use CGI qw( -utf8 );&quot; made everything work.  Thank you.   [Now how do I mark a comment as the answer?]"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1521302414, "post_id": 49330047, "comment_id": 85677926, "body": "@Jim_1234 you can&#39;t (mark a comment as an answer). You can ask ikegami to write a real answer and then you can validate it."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1521317157, "post_id": 49330047, "comment_id": 85682834, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49309468/perl-validate-chinese-character-input-from-web-page-form\">Perl - Validate Chinese character input from web page form?</a>"}, {"owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521381931, "post_id": 49330047, "comment_id": 85697177, "body": "@ikegami - would you care to post your comment as an answer so I can mark it as the answer?"}], "owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521237927, "creation_date": 1521237336, "last_edit_date": 1521237927, "question_id": 49330047, "link": "https://stackoverflow.com/questions/49330047/perl-how-to-validate-chinese-character-input-from-web-form", "title": "Perl - How to validate Chinese character input from web form?", "body": "<p>My web page uses Charset UTF-8 to allow Chinese character input in a textarea form field.  I want to test if the input contains a certain character.  I've writtena test script to see how Perl is going to handle the Chinese input.  It's not finding the match when there is a known match.  </p>\n\n<p>Here is my test form:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n\n    &lt;form method=\"post\" action=\"http://www.my_domain.com/cgi-bin/my_test_script.pl\"&gt;\n          &lt;textarea name=\"user_input\" rows=\"\" cols=\"\"&gt;&lt;/textarea&gt;\n          &lt;input type=\"submit\" name=\"submit\" value=\"submit\"&gt;\n    &lt;/form&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl -T\nuse strict;\nuse warnings;\nuse CGI;\nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser); \nuse utf8;\n\nprint \"Content-type: text/html; charset=UTF-8\\n\\n\";\nprint \"&lt;meta http-equiv='content-type' content='text/html;charset=UTF-8'&gt;\";\n\nmy $query = new CGI;\nmy $msg = $query-&gt;param('user_input');\nchomp $msg;\nmy $msg_code = ord($msg);\n\nprint \"&lt;p&gt; Message was: \".$msg.\"\\n\";\nprint \"&lt;p&gt; Message Code is: \".$msg_code.\"\\n\";\n\nmy $char_from_code_point = \"\\N{U+89C6}\";\nmy $char_from_code_point_reverse_code = ord($char_from_code_point);\n\nprint \"&lt;p&gt; char_from_code_point= \".$char_from_code_point.\"\\n\";\nprint \"&lt;p&gt; char_from_code_point_reverse_code =     \".$char_from_code_point_reverse_code.\"\\n\";\n\nif ($msg =~ m/$char_from_code_point/) {\n  print \"&lt;p&gt;Matched!\\n\";\n  }\nelse {\n  print \"&lt;p&gt; NOT matched\\n\";\n}\n</code></pre>\n\n<p>And here is the output from submitting the correct character:</p>\n\n<pre><code>Message was: \u89c6\n\nMessage Code is: 232\n\nchar_from_code_point= \u89c6\n\nchar_from_code_point_reverse_code = 35270\n\nNOT matched \n</code></pre>\n\n<p>Could someone please point out what I'm doing wrong?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2007, "user_id": 160984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8de701e21c9b6252d5ae2db9fe92ac47?s=128&d=identicon&r=PG", "display_name": "dabest1", "link": "https://stackoverflow.com/users/160984/dabest1"}, "edited": false, "score": 0, "creation_date": 1521233465, "post_id": 49329264, "comment_id": 85660579, "body": "You should provide a sample of voice_port.txt file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1521233504, "post_id": 49329264, "comment_id": 85660589, "body": "(1) The code misuses <code>grep</code> (2) In the last line <code>@number</code> takes all elements /// But you need to improve the question: what is your input and what output do you expect?"}, {"owner": {"reputation": 29, "user_id": 9433460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb4869797b3c1c0823720661b0499ca?s=128&d=identicon&r=PG&f=1", "display_name": "steba", "link": "https://stackoverflow.com/users/9433460/steba"}, "edited": false, "score": 0, "creation_date": 1521234256, "post_id": 49329264, "comment_id": 85660925, "body": "question updated. also tried with space to separate the group references (/$2 $1/) but extra comma remained"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1521234548, "post_id": 49329264, "comment_id": 85661040, "body": "@number does not get assigned, don&#39;t you see?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521234906, "post_id": 49329264, "comment_id": 85661194, "body": "Thank you, but this is still just too hard to figure out. Do you have repeated sections starting with <code>Router1</code> line, always with same following lines (on which successive <code>grep</code>s are supposed to apply)? For one, the first <code>s&#47;^(\\S+)</code> will match all consecutive non-space characters (up to the last <code>#</code>) <i>on each line</i>, and not only &quot;device&quot; (<code>Router1</code> I presume). Can you explain your processing?"}, {"owner": {"reputation": 29, "user_id": 9433460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb4869797b3c1c0823720661b0499ca?s=128&d=identicon&r=PG&f=1", "display_name": "steba", "link": "https://stackoverflow.com/users/9433460/steba"}, "edited": false, "score": 0, "creation_date": 1521235261, "post_id": 49329264, "comment_id": 85661354, "body": "got it. i see where the issue was. thank you all for the assistance."}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1521272252, "creation_date": 1521272252, "answer_id": 49333653, "question_id": 49329264, "link": "https://stackoverflow.com/questions/49329264/remove-comma-from-print-output/49333653#49333653", "title": "Remove comma from print output", "body": "<p>This line:</p>\n\n<pre><code>my @number, @device_type\n  =grep(s/.*Station-id name\\s(.*)\\sStation-id number\\s(\\+\\d+)\\n$/$2,$1/,@file);\n</code></pre>\n\n<p>...should be changed into two greps since you cannot set both arrays at once like you tried:</p>\n\n<pre><code>my@number =grep(s/.*Station-id name\\s(.*)\\sStation-id number\\s(\\+\\d+)\\n$/$2/,@file);\nmy@devtype=grep(s/.*Station-id name\\s(.*)\\sStation-id number\\s(\\+\\d+)\\n$/$1/,@file);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9433460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb4869797b3c1c0823720661b0499ca?s=128&d=identicon&r=PG&f=1", "display_name": "steba", "link": "https://stackoverflow.com/users/9433460/steba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521274955, "creation_date": 1521233229, "last_edit_date": 1521274955, "question_id": 49329264, "link": "https://stackoverflow.com/questions/49329264/remove-comma-from-print-output", "title": "Remove comma from print output", "body": "<p>Substitution in grep produces an extra comma in the output. </p>\n\n<pre><code>open(READ,\"&lt;\",\"C:/Users/lab/voice_port.txt\");\nmy @file=&lt;READ&gt;;\nclose(READ);\n\nmy @device_name=grep(s/^(\\S+)#.*\\n$/$1/,@file);\nmy @port_number=grep(s/Foreign Exchange Station\\s(\\d{1,2}\\/\\d{1,2}\\/?\\d{0,2})\\s.*\\n$/$1/,@file);\nmy @port_status=grep(s/.*Administrative State is\\s(\\S+).*\\n$/$1/,@file);\nmy @number, @device_type=grep(s/.*Station-id name\\s(.*)\\sStation-id number\\s(\\+\\d+)\\n$/$2,$1/,@file);\n</code></pre>\n\n<p>Printing the values:</p>\n\n<pre><code>for my $x(0..$#port_number)\n{\nprint $device_name[0].\",\".$port_number[$x].\",\".$port_status[$x].\",\".$number[$x].\",\".$device_type[$x].\"\\n\";\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Router1,0/1/1,UP,,+3255413655555,MKD, Reproc\nRouter1,0/1/2,DOWN,,+3289791148755632,Fax Unbek.\nRouter1,0/1/3,UP,,+3217825478220844,Kitfax Ler\n</code></pre>\n\n<p>If comma is removed between port status and number in the \"for\" cycle, it looks as expected (without extra comma). Is there a way to remove this extra comma in the grep function?</p>\n\n<p>Expected result:</p>\n\n<pre><code>Router1,0/1/1,UP,+3255413655555,MKD, Reproc\nRouter1,0/1/2,DOWN,+3289791148755632,Fax Unbek.\nRouter1,0/1/3,UP,+3217825478220844,Kitfax Ler\n</code></pre>\n\n<p>Input file:</p>\n\n<pre><code>#\n#\nRouter1# show voice port \nForeign Exchange Station 0/1/1 Slot is 1, Sub-unit is 1, Port is 1\nOperation State is DORMANT\nAdministrative State is UP\nStation-id name MKD, Reproc Station-id number +3255413655555\nDigit Duration Timing is set to 100 ms\n.\n.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 7, "creation_date": 1521229595, "post_id": 49328308, "comment_id": 85658756, "body": "The point of the warning is to make you stop using <code>when</code>."}, {"owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521399425, "post_id": 49328308, "comment_id": 85703217, "body": "Hardly - it&#39;s been around since 5.10.   If &quot;when&quot; shouldn&#39;t be used, it certainly would have been removed by 5.26.   The real question is why it still generates an &quot;experimental&quot; warning."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1521401215, "post_id": 49328308, "comment_id": 85703933, "body": "@grjash smartmatch/when was added in 5.10 as a cute way to port some Perl6 features to Perl5. This didn&#39;t work, as the two languages have radically different type systems. The feature was then <a href=\"https://perldoc.perl.org/perl5180delta.html#The-smartmatch-family-of-features-are-now-experimental\" rel=\"nofollow noreferrer\">retroactively marked experimental in 5.18</a>: <i>It is clear that smartmatch is almost certainly either going to change or go away in the future. [\u2026] Consider, though, replacing the use of these features, as they may change behavior again before becoming stable.</i>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1521490228, "post_id": 49328308, "comment_id": 85744098, "body": "<code>~~</code>/<code>given</code>/<code>when</code> is due to get a major overhaul and/or even be <b>deprecated</b> as of 5.28. See <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2017/12/msg248507.html\" rel=\"nofollow noreferrer\">smartmatch/switch deprecation for 5.28</a> and for a long read <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2017/08/msg245769.html\" rel=\"nofollow noreferrer\">Revisiting smart match</a>. I would not use any of those three constructs anymore. <code>if</code>/<code>elsif</code> chains it is..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521574526, "post_id": 49328308, "comment_id": 85787034, "body": "@grjash Funny you should mention 5.10. Both <code>when</code> and <code>~~</code> itself underwent <a href=\"https://metacpan.org/pod/perl5101delta#Incompatible-Changes\" rel=\"nofollow noreferrer\">incompatible changes</a> shortly after their introduction. As for &quot;<i>If &quot;when&quot; shouldn&#39;t be used, it certainly would have been removed by 5.26</i>&quot;: Perl doesn&#39;t simply remove bad features because that would break older code (or in your case, new code written despite the warnings). You get a deprecation warning first, then a deprecation error, and then maybe it will be removed. This is why e.g. <a href=\"http://perldoc.perl.org/functions/reset.html\" rel=\"nofollow noreferrer\"><code>reset</code></a> is still here."}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1521229456, "creation_date": 1521229456, "answer_id": 49328425, "question_id": 49328308, "link": "https://stackoverflow.com/questions/49328308/how-do-i-turn-off-when-is-experimental-in-perl-5-24/49328425#49328425", "title": "How do I turn off &quot;when is experimental ...&quot; in perl 5.24?", "body": "<p><code>given</code> and <code>when</code> are part of the <code>smartmatch</code> experiment, so these warnings can be disabled using:</p>\n\n<pre><code>no warnings qw( experimental::smartmatch );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1521230048, "post_id": 49328468, "comment_id": 85658970, "body": "Mapping warning text to categories can be a little tough.  <a href=\"http://perldoc.perl.org/perldiag.html#when-is-experimental\" rel=\"nofollow noreferrer\">perldoc perldiag</a> makes the connection much easier to find."}, {"owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "edited": false, "score": 0, "creation_date": 1521399656, "post_id": 49328468, "comment_id": 85703312, "body": "The official documentation of Perl does not state or even imply that &quot;when&quot; is broken.    It labels &quot;given&quot; as being &quot;highly experimental&quot;. As for the code in the question, it is not accompanied by any warning. - rather, just above on the perlsyn page: &quot;The foreach is the non-experimental way to set a topicalizer.&quot;"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "edited": false, "score": 2, "creation_date": 1521400627, "post_id": 49328468, "comment_id": 85703664, "body": "@grjash There is pretty strong community consensus that smartmatch (and consequently <code>when</code>) in its current form is broken. The <code>perlsyn</code> documentation goes in detail about the extremely complex behaviour of this operator. Maintainable code ought to avoid this complexity, as it&#39;s likely to be a source of bugs. As the docs say about <code>when</code>: <i>Do not rely upon its current (mis)implementation.</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1616509189, "post_id": 49328468, "comment_id": 118020335, "body": "<code>no if $] &gt;= 5.018, warnings =&gt; &#39;experimental::smartmatch&#39;;</code> if you want to support older versions."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 7, "last_activity_date": 1521229656, "creation_date": 1521229656, "answer_id": 49328468, "question_id": 49328308, "link": "https://stackoverflow.com/questions/49328308/how-do-i-turn-off-when-is-experimental-in-perl-5-24/49328468#49328468", "title": "How do I turn off &quot;when is experimental ...&quot; in perl 5.24?", "body": "<p>You can enable this construct without warnings via</p>\n\n<pre><code>use experimental 'switch';\n</code></pre>\n\n<p>or merely disable the \"experimental\" warning category via</p>\n\n<pre><code>no warnings 'experimental::smartmatch';\n</code></pre>\n\n<p>(see the <a href=\"https://metacpan.org/pod/warnings#Category-Hierarchy\" rel=\"noreferrer\">full list of available warning categories in <code>perldoc warnings</code></a>).</p>\n\n<p>But please note that smartmatch, <code>given</code>, and <code>when</code> constructs are considered to be fundamentally broken, and are being removed/redesigned. Just silencing the warning will break your code when you run that code on other perl versions.</p>\n\n<p>Instead, please prefer out to spell this code out explicitly:</p>\n\n<pre><code>for ($var) {\n    if    (/^abc/) { $abc = 1 }\n    elsif (/^def/) { $def = 1 }\n    elsif (/^xyz/) { $xyz = 1 }\n    else { $nothing = 1 }\n}\n</code></pre>\n\n<p>Yes, it's more ugly, but it will also work for all values of <code>$var</code> and for all Perl5 versions.</p>\n"}], "owner": {"reputation": 87, "user_id": 8033725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae947d76e6ab360c79f28d3d1b9bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "grjash", "link": "https://stackoverflow.com/users/8033725/grjash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1521229656, "creation_date": 1521229014, "question_id": 49328308, "link": "https://stackoverflow.com/questions/49328308/how-do-i-turn-off-when-is-experimental-in-perl-5-24", "title": "How do I turn off &quot;when is experimental ...&quot; in perl 5.24?", "body": "<p>The code below was copied directly from the current perlsyn page on perldoc.perl.org.\n[I've added an initialization and declarations as needed to make it run (and it works as expected), but the point is the 'when' keyword]</p>\n\n<p>Perl 5.24 complains about 'when' being experimental.\nFair enough, but I don't want to see this every time I use the keyword.</p>\n\n<p>no warnings qw(experimental::when) does not work - \"Unknown warning category ...\"</p>\n\n<p>I also tried \"switch\" as the category</p>\n\n<p>Is there another way to suppress this warning (other than disabling warnings in general)?</p>\n\n<pre><code>use v5.14;\nfor ($var) {\n    $abc = 1 when /^abc/;\n    $def = 1 when /^def/;\n    $xyz = 1 when /^xyz/;\n    default { $nothing = 1 }\n}\n</code></pre>\n"}, {"tags": ["perl", "gnuplot", "stacked-area-chart"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "edited": false, "score": 0, "creation_date": 1521225915, "post_id": 49326778, "comment_id": 85657013, "body": "no, it&#39;s not how it suppposed to be. The xtics with 0 to 19 represents the number of rows in datafile (excluding first one), as well as its position on x-axis. First column is used by perl for timeformating them in the way i need."}, {"owner": {"reputation": 44000, "user_id": 2604213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ThK.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/2604213/christoph"}, "reply_to_user": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "edited": false, "score": 2, "creation_date": 1521229428, "post_id": 49326778, "comment_id": 85658660, "body": "@genesi5 Then you must also use the row number for plotting <code>plot ... using 0:(sum ...)</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1521222633, "creation_date": 1521222633, "answer_id": 49326778, "question_id": 49326221, "link": "https://stackoverflow.com/questions/49326221/gnuplot-stacked-area-and-custom-tic-strings/49326778#49326778", "title": "Gnuplot, stacked area and custom tic strings", "body": "<p>Your tics are out of range. The real values on the x-axis are taken from the column 1, they start at 1521230521, not 0.</p>\n\n<p>Generate your tics with the correct \"pos\" values:</p>\n\n<pre><code>set xtics (\"16 mar 22:45\" 1521230521, \\\n           \"17 mar 22:45\" 1521316921, \\\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1521282094, "creation_date": 1521220405, "last_edit_date": 1592644375, "question_id": 49326221, "link": "https://stackoverflow.com/questions/49326221/gnuplot-stacked-area-and-custom-tic-strings", "title": "Gnuplot, stacked area and custom tic strings", "body": "<p>So, I've got next problem. I'm writing a Perl plugin for my own Gnuplot wrapper, and I need to plot stacked-area chart, but here's problem with tics.</p>\n<p>I have the following datfile (date in epoch - for Perl functions):</p>\n<pre><code>date    c1  c2  c3  c4  c5  c6  c7  c8  c9  c10 c11 c12\n1521230521  173 830 988 284 165 577 920 749 409 705 703 601\n1521316921  501 691 883 573 325 152 499 526 417 708 259 587\n1521403321  33  193 576 106 397 329 801 857 534 559 527 213\n1521489721  827 186 910 412 688 650 13  201 222 150 468 353\n1521576121  53  425 726 989 362 489 554 986 480 485 414 74\n.....\n</code></pre>\n<p>And I got this script (used variables from Perl script, keep note of this):</p>\n<pre><code>reset\nset encoding utf8\n\nset term pngcairo size $w, $h\nset datafile separator &quot;\\\\t&quot;\n\nset key autotitle\nset key reverse Left outside\nset key samplen 0.25 spacing 1 font &quot;Roboto Mono Medium, 11&quot;\nset key bot center horiz\nset key height 1\n\nset output &quot;img.png&quot;\n\nset xtics (&quot;16 mar 22:45&quot; 0, ...., &quot;04 apr 22:45&quot; 19) # string generated by perl\nset xtics font &quot;Roboto Mono Light, 9&quot; nomirror out \nset ytics font &quot;Roboto Mono Light, 9&quot; nomirror out\n\nset auto y\nset tics front\n\n# $rm # set rmargin\n# $lm # set lmargin\n\nset grid xtics ytics front\nset style data filledcurves x1\nset pointsize 0.8\n\nplot for [i=2:&quot;.($cols+1).&quot;:1] '$datfile' using 1:(sum [col=i:&quot;.($cols+1).&quot;] column(col)) title columnheader(i)\n</code></pre>\n<p>I need tics to look like that:</p>\n<p><a href=\"https://i.stack.imgur.com/F0Mlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F0Mlr.png\" alt=\"enter image description here\" /></a></p>\n<p>but tics don't show up:</p>\n<p><a href=\"https://i.stack.imgur.com/pu0iD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pu0iD.png\" alt=\"enter image description here\" /></a></p>\n<p>You might ask me why I am not using <code>set xdata time</code>? That's because of uncontrollable tic overlapping in case if there's a lot of tics. That's why I'm using strict pre-calculated pairs like this:</p>\n<pre><code>set xtics (&quot;16 mar 22:45&quot; 0, &quot;22 mar 23:02&quot; 6, ...., &quot;04 apr 22:45&quot; 19)\n</code></pre>\n<p>and that worked for the histogram chart.</p>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "edited": false, "score": 0, "creation_date": 1521224289, "post_id": 49326136, "comment_id": 85656068, "body": "have you looked at MyConfig.pm or the used &quot;o conf&quot; command in the CPAN Shell? &quot;perl -MCPAN -e shell&quot; That is how you can declare repo URLs. I think this is what you want. Otherwise, more info please."}, {"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "reply_to_user": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "edited": false, "score": 1, "creation_date": 1521224878, "post_id": 49326136, "comment_id": 85656402, "body": "As I understand, you&#39;re talking about CPAN-like (private, self-hosted) repos. Im asking about GIT repos, like gitlab.com, github.com, etc."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1521225742, "post_id": 49326136, "comment_id": 85656910, "body": "Last time I tried to do this, cpanm could install from git but not handle git dependencies (since the CPAN metadata simply doesn&#39;t support this). The best solution I&#39;ve found so far that doesn&#39;t require extra tooling (pinto, personal repositories, \u2026) is to list all dependencies/git urls one item per line as a <code>requirements.txt</code> file, then install deps via <code>cpanm &lt;requirements.txt</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521231266, "post_id": 49326136, "comment_id": 85659592, "body": "Those parameters are used to create a META file for CPAN. It makes no sense to mention private modules in a CPAN META file."}, {"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521236738, "post_id": 49326136, "comment_id": 85661975, "body": "@ikegami: you&#39;re absolutely right. But this &quot;META file for CPAN&quot; is required by <code>cpanm</code> to successfully install a module from a non-CPAN location - like GIT repo. Its just that its super easy to just do <code>cpanm git@gitlab.com:user&#47;My-Module.git</code> and have this module downloaded, builded, tested and installed. It simple, it works. Well, at least as long as these non-CPAN module doesnt require other non-CPAN modules ;)."}], "owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1521220091, "creation_date": 1521220091, "question_id": 49326136, "link": "https://stackoverflow.com/questions/49326136/define-required-modules-hosted-on-git-repo", "title": "Define required modules hosted on git repo", "body": "<p>I host my private (not shared on CPAN) perl modules at <a href=\"https://gitlab.com\" rel=\"nofollow noreferrer\">gitlab.com</a>, so I can install them on remote hosts by running command: <code>cpanm https://gitlab.com/xxx/My-Module.git</code>. It works fine. But what if my private module, have in dependencies some other private modules? <code>Build.PL</code> like this:</p>\n\n<pre><code>use Module::Build;\nModule::Build-&gt;new(\n    module_name   =&gt; 'My::Module',\n    dist_abstract =&gt; '-',\n    requires      =&gt;\n    {\n        'My::OtherModule' =&gt; 0,\n        'Moo'             =&gt; 0,\n    }\n)-&gt;create_build_script;\n</code></pre>\n\n<p>Is there any way to declare GIT url for the <code>My::OtherModule</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521211318, "post_id": 49323373, "comment_id": 85648081, "body": "Have you looked at the preview of your question? Your formatting is all broken. Please pay closer attention next time."}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521211415, "post_id": 49323373, "comment_id": 85648157, "body": "I did, looked OK.  Thank you for fixing, I am new here."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1521211444, "post_id": 49323373, "comment_id": 85648180, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521211454, "post_id": 49323373, "comment_id": 85648190, "body": "It&#39;s markdown syntax. There is no need to escape things. Just indent code with four spaces."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521211663, "post_id": 49323373, "comment_id": 85648359, "body": "<code>chomp $name;</code> makes no sense here. Your filenames don&#39;t contain trailing newlines."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521211625, "post_id": 49323479, "comment_id": 85648328, "body": "Yeah, a function that implicitly modifies a global variable like <code>$_</code> is naughty."}, {"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521212308, "post_id": 49323479, "comment_id": 85648836, "body": "Yes you are so correct.  Thank you as well @ysth @melpomene!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1521211528, "creation_date": 1521211528, "answer_id": 49323479, "question_id": 49323373, "link": "https://stackoverflow.com/questions/49323373/perl-pathsdirs-array-passed-byreference-to-a-sub-will-not-print-or-open-correc/49323479#49323479", "title": "perl: paths+dirs array passed byreference to a sub will not print or open correctly", "body": "<pre><code>    while (&lt;$i&gt;) {\n        print \"$i,\\n\";\n    }\n</code></pre>\n\n<p>Here you are printing the filehandle for each line in the file.  Print the line you read instead:</p>\n\n<pre><code>print \"$_,\\n\";\n</code></pre>\n\n<p>Better yet:</p>\n\n<pre><code>while (my $line = &lt;$i&gt;) {\n    print \"$line,\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "edited": false, "score": 0, "creation_date": 1521211718, "post_id": 49323489, "comment_id": 85648404, "body": "OmG, duh!  Thank you Sim!  Yes printing $_ is what I wanted."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1521211546, "creation_date": 1521211546, "answer_id": 49323489, "question_id": 49323373, "link": "https://stackoverflow.com/questions/49323373/perl-pathsdirs-array-passed-byreference-to-a-sub-will-not-print-or-open-correc/49323489#49323489", "title": "perl: paths+dirs array passed byreference to a sub will not print or open correctly", "body": "<p>You are outputting the file handle, not the content.</p>\n\n<pre><code>while (&lt;$i&gt;) {\n    print \"$i,\\n\"; # &lt;--- here\n}\n</code></pre>\n\n<p><code>$i</code> is the handle. Since you're reading without a variable, you need to look at <code>$_</code>.</p>\n\n<pre><code>print \"$_,\\n\"; # &lt;--- here\n</code></pre>\n\n<hr>\n\n<p>You might also want to name your handle <code>$fh</code> as per the convention. <code>$i</code> is typically used for a <code>for</code> loop iteration variable that counts something.</p>\n"}], "owner": {"reputation": 65, "user_id": 9503596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBg92.jpg?s=128&g=1", "display_name": "dirman", "link": "https://stackoverflow.com/users/9503596/dirman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1521211756, "creation_date": 1521211211, "last_edit_date": 1521211465, "question_id": 49323373, "link": "https://stackoverflow.com/questions/49323373/perl-pathsdirs-array-passed-byreference-to-a-sub-will-not-print-or-open-correc", "title": "perl: paths+dirs array passed byreference to a sub will not print or open correctly", "body": "<p>I need to open and use the contents of files as they are passed as a reference into my subroutine. I have researched and found </p>\n\n<p><a href=\"https://stackoverflow.com/questions/6845376/how-to-pass-a-file-handle-to-a-function\">How to pass a file handle to a function?</a></p>\n\n<p>but this did not work for me.</p>\n\n<p>I have minimized the code considerably to get to the point.  Here it is.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy @dirs = qw(/opt/r2configs/sapbid00/2018/03/15/lparstat-i.out /opt/r2configs/sapbiq00/2018/03/15/lparstat-i.out);\n\nsub _ce {\n\n    die \"no parameter!\\n\" unless @_;\n    my ($ce_ref) = @_;\n\n    for my $name (@{ $ce_ref }) {\n        print \"$name\\n\";\n        chomp $name;\n        open (my $i, \"+&lt;\", $name) or warn $!;\n        while (&lt;$i&gt;) {\n            print \"$i,\\n\";\n        }\n    }\n}\n\n_ce( \\@dirs );\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code># perl -c foo\nfoo syntax OK\nroot@r2nim01.xxx.com(/usr/local/scripts)$\n# perl foo\n/opt/r2configs/sapbid00/2018/03/15/lparstat-i.out\nGLOB(0x20020148),\nGLOB(0x20020148),\nGLOB(0x20020148),\nGLOB(0x20020148),\nGLOB(0x20020148),\n/opt/r2configs/sapbiq00/2018/03/15/lparstat-i.out\nGLOB(0x20020148),\nGLOB(0x20020148),\n.\n.\n.\n\n### The files do exist and I am root user. ###\n# ls -l /opt/r2configs/sapbiq00/2018/03/15/lparstat-i.out\n-rw-r--r--    1 root     system         2217 Mar 15 20:35 /opt/r2configs/sapbiq00/2018/03/15/lparstat-i.out\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1521208026, "post_id": 49322108, "comment_id": 85645706, "body": "You open <code>FASTA</code>, but then you do nothing with it. Your while loop reads from <code>ARGV</code> instead."}, {"owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521208414, "post_id": 49322108, "comment_id": 85645990, "body": "Ahh thankyou @melpomene."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1521213416, "post_id": 49322108, "comment_id": 85649612, "body": "Please see my updated answer."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1521208073, "post_id": 49322167, "comment_id": 85645737, "body": "or <code>$line =~ &#47;[^AGCT]&#47;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1521208119, "post_id": 49322167, "comment_id": 85645764, "body": "@choroba That&#39;s slightly different in that simbabque&#39;s regex allows a trailing newline whereas yours doesn&#39;t. Also, simbabque&#39;s regex doesn&#39;t accept empty strings."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1521211287, "post_id": 49322167, "comment_id": 85648056, "body": "@choroba and if you were going to do that, it might as well be <code>$line =~ y&#47;AGCT&#47;&#47;c</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1521212998, "post_id": 49322167, "comment_id": 85649327, "body": "<code>$line =~ &#47;^[AGCT]+$&#47;</code> is not the same as <code>$line !~ &#47;[^AGCT]&#47;</code>. The latter matches an empty string."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1521213139, "post_id": 49322167, "comment_id": 85649423, "body": "There&#39;s also the issue that <code>$line</code> might be terminated by <code>\\n&gt;</code>. It probably can even include newlines."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521213188, "post_id": 49322167, "comment_id": 85649463, "body": "The program should really <code>chomp</code>, but I didn&#39;t include that."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1521214139, "post_id": 49322167, "comment_id": 85650093, "body": "@ysth <code>y&#47;&#47;&#47;</code> performs a count, so it&#39;s always O(n) even if the first character of the string is not A/G/C/T."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521217123, "post_id": 49322167, "comment_id": 85652032, "body": "@melpomene it&#39;s clear from the code here that the expectation is that it is; don&#39;t optimize for the unexpected"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 10, "last_activity_date": 1521213404, "last_edit_date": 1521213404, "creation_date": 1521207587, "answer_id": 49322167, "question_id": 49322108, "link": "https://stackoverflow.com/questions/49322108/using-the-and-operator-inside-perl-regex/49322167#49322167", "title": "Using the &#39;and&#39; operator inside Perl regex", "body": "<p>Your regular expression syntax is correct. Your Perl expression in the <code>if</code> condition is wrong.</p>\n\n<pre><code>if ( \n    $line =~ /^[AGCT]/   # this tests $line\n    &amp;&amp; /[AGCT]/          # this defaults to $_\n) {\n</code></pre>\n\n<p>You need to use <code>$line =~ //</code> explicitly both times.</p>\n\n<p>In addition, your second pattern does not do what you want. You are missing a <code>*$</code>, and it would make sense to include the beginning character, too. It should read</p>\n\n<pre><code>/^[AGCT][AGCT]*$/\n</code></pre>\n\n<p>As you can see, essentially you can just have one pattern and be done with it.</p>\n\n<pre><code>if ( $line =~ /^[AGCT]+$/ ) { ... }\n</code></pre>\n\n<p>You can shorten it even further by doing the opposite pattern and saying it shouldn't match.</p>\n\n<pre><code>if ( $line !~ /[^AGCT]/ ) { ... }\n</code></pre>\n\n<p>This is a bit confusing because of the double negation ( <code>!~</code> and <code>[^]</code> though.</p>\n\n<p>In any case, you should <code>chomp</code> your input first. I would write your program like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# the \\n removes the line number from die\nopen my $fh, '&lt;', $fasta or die \"Couldn't read file $fasta\";\n\nlocal $/ = \"\\n&gt;\";\nwhile (my $line = &lt;&gt;) {\n  chomp $line;\n  die if $line =~ /[^AGCT]/;\n}\n</code></pre>\n\n<p>That program will die if any of the lines contains something that is not <code>A</code>, <code>G</code>, <code>C</code> or <code>T</code>. I do believe that's what you wanted to do.</p>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 49322167, "answer_count": 1, "score": 1, "last_activity_date": 1521213404, "creation_date": 1521207402, "last_edit_date": 1521208053, "question_id": 49322108, "link": "https://stackoverflow.com/questions/49322108/using-the-and-operator-inside-perl-regex", "title": "Using the &#39;and&#39; operator inside Perl regex", "body": "<p>I'm using Perl to read in a file line by line and <code>die</code> if a condition is met. The condition being that a line has to begin with any of the letters <code>AGCT</code> and the rest of the line can only contain the letters <code>AGCT</code>.</p>\n\n<pre><code>my $fasta = $ARGV[0];\n\nopen(FASTA, $fasta) || die(\"Couldn't read file $fasta\\n\");\nlocal $/ = \"\\n&gt;\";\nwhile (my $line = &lt;&gt;) {\n  if ( $line =~ /^[AGCT]/ &amp;&amp; /[AGCT]/ ) {\n    die;\n  }\n}\nclose FASTA;\n</code></pre>\n\n<p>I know the syntax in the regexp is wrong, I have tried many variations but can't get it, any ideas?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1521206078, "post_id": 49321565, "comment_id": 85644401, "body": "I would use an INI parser to get the input data into a Perl data structure, then convert that to JSON."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1521206138, "post_id": 49321565, "comment_id": 85644439, "body": "Also, don&#39;t use <code>$a</code>. It&#39;s a reserved global variable for use in <code>sort</code> blocks."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1521210802, "post_id": 49322071, "comment_id": 85647711, "body": "Its not work because &quot;thresholds&quot; is variable. Can have another name like [peaks]. I forgot write this."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "edited": false, "score": 0, "creation_date": 1521211029, "post_id": 49322071, "comment_id": 85647874, "body": "@J.Doe: Fixed. You could have fixed it yourself, right?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1521211002, "last_edit_date": 1521211002, "creation_date": 1521207290, "answer_id": 49322071, "question_id": 49321565, "link": "https://stackoverflow.com/questions/49321565/perl-script-and-regular-expressions/49322071#49322071", "title": "Perl script and regular expressions", "body": "<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $input = '...';\nmy $expected = '...';\n\n$input =~ s/ =/:/g;\n$input =~ s/\\[(.*)\\]/}\\n$1: {/g;\n$input =~ s/^/config.n8_v2_BB_RSI_SL = {\\n/;\n$input =~ s/(?&lt;!\\{)$/,/mg;\n$input =~ s/,\\n}//;\n$input =~ s/,\\n}/ }/g;\n$input =~ s/,$/ }\\n};/;\n\n$input eq $expected or die 'Different';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1521281813, "last_edit_date": 1521281813, "creation_date": 1521281470, "answer_id": 49334769, "question_id": 49321565, "link": "https://stackoverflow.com/questions/49321565/perl-script-and-regular-expressions/49334769#49334769", "title": "Perl script and regular expressions", "body": "<p>You could perhaps <code>use Config::IniFiles</code> to read input and <code>use JSON</code> to generate the output. (Is it JSON?)</p>\n\n<p>Or...</p>\n\n<p>Using a bag of dirty tricks, this:</p>\n\n<pre><code>my $s=join\"\",&lt;DATA&gt;;\nmy $n='00000001';\n$s=~s/^(.*?)(\\w+)/$1_@{[$n++]}_$2/gm;\n$s=sz({conf($s)});\n$s=~s,\\b_(\\d{8})_(\\w+),$2,g;\nprint \"config.n8_v2_BB_RSI_SL = $s;\\n\";\nsub sz {my$c=shift;ref$c?\"{\\n\".(join\",\\n\",map{\"$_: \".sz($$c{$_})}sort keys%$c).\"}\":$c}\nsub conf{\n  my($hr,$section)=({});\n  my@r=(qr/^\\s*\\[\\s*(.*?)\\s*\\]/,\n        qr/^\\s*([^\\:\\=]+?)\\s*[:=]\\s*(.*?)\\s*$/);\n  /$r[0]/ and                 $$hr{$section=$1}||={} or\n  /$r[1]/ and defined$section?$$hr{$section}{$1}:$$hr{$1}=$2\n    for split\"\\n\",shift;\n  %$hr;\n}\n__DATA__\nconstant = 0.015\nhistory = 90\n[thresholds]\nup = 100\ndown = -100\npersistence = 0\n[thresholds]\nup = 20\ndown = -100\npersistence = 0\n[peaks]\nup = 100\ndown = -100\npersistence = 0\n</code></pre>\n\n<p>Produces this:</p>\n\n<pre><code>config.n8_v2_BB_RSI_SL = {\nconstant: 0.015,\nhistory: 90,\nthresholds: {\nup: 100,\ndown: -100,\npersistence: 0},\nthresholds: {\nup: 20,\ndown: -100,\npersistence: 0},\npeaks: {\nup: 100,\ndown: -100,\npersistence: 0}};\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9503210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bfbbc6f888528375e723d9ecba6e82?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9503210/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 49322071, "answer_count": 2, "score": 1, "last_activity_date": 1521281813, "creation_date": 1521205639, "question_id": 49321565, "link": "https://stackoverflow.com/questions/49321565/perl-script-and-regular-expressions", "title": "Perl script and regular expressions", "body": "<p>I have string like this:</p>\n\n<pre><code>constant = 0.015\nhistory = 90\n[thresholds]\nup = 100\ndown = -100\npersistence = 0\n[thresholds]\nup = 100\ndown = -100\npersistence = 0\n</code></pre>\n\n<p>I must convert it to format like this:</p>\n\n<pre><code>config.n8_v2_BB_RSI_SL = {\nconstant: 0.015,\nhistory: 90,\nthresholds: {\nup: 100,\ndown: -100,\npersistence: 0 },\nthresholds: {\nup: 100,\ndown: -100,\npersistence: 0 }\n}; \n</code></pre>\n\n<p>I did all without closing bracket in first [thresholds]. I havent idea how do this.\nMy work:</p>\n\n<pre><code>$a =~ s/(?&lt;!\\])(?=[\\n])/,/g;\n$a =~ s/ =/:/g;\n$a =~ s/(?&lt;![\\D\\d])/config.n8_v2_BB_RSI_SL = {\\n/g;\n$a =~ s/\\[//g;\n$a =~ s/\\]/: {/g;\n\n  if ($a =~ /: \\{/) {\n$a =~ s/(?![\\n\\D\\d])/ \\}/g;\n}\n$a =~ s/(?![\\n\\D\\d])/\\n\\};/g;\n\n\nprint \"$a \\n\"; \nconfig.n8_v2_BB_RSI_SL = {\nconstant: 0.015,\nhistory: 90,\nthresholds: {\nup: 100,\ndown: -100,\npersistence: 0,\nthresholds: {\nup: 100,\ndown: -100,\npersistence: 0 }\n}; \n</code></pre>\n\n<p>After <code>persistence: 0</code> I must add <code>},</code>. How do it? [thresholds] can appear more than 1 times, or never appear.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521202933, "post_id": 49320647, "comment_id": 85642183, "body": "here is the code I&#39;ve written its working but not printing the output in the format i want."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521203130, "post_id": 49320647, "comment_id": 85642297, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521206577, "post_id": 49320647, "comment_id": 85644743, "body": "I&#39;ve spent some time reformatting your code to make it easier to follow. You&#39;re welcome, but please do it yourself in future."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521448528, "post_id": 49320647, "comment_id": 85717194, "body": "You seem to have deleted half of the code!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521454316, "post_id": 49320647, "comment_id": 85720851, "body": "And now you&#39;ve undone all the work I did tidying your code. If you can make your code legible, then I might have another look. But until you do, I&#39;ve lost interest."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521389452, "post_id": 49321483, "comment_id": 85699792, "body": "Thanks @wolfrevokcats I tried this but when I&#39;m adding one matching case in the input for that also it&#39;s printing  see below case added for shop"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521389839, "post_id": 49321483, "comment_id": 85699893, "body": "@Sonal please edit your question, add the matching case and the expected result there"}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521389914, "post_id": 49321483, "comment_id": 85699917, "body": "in case of shop, its saying not matching in the output while the values for the shop are same ( B,shop,80 &amp; D,shop,80)"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521390307, "post_id": 49321483, "comment_id": 85700033, "body": "@Sonal can you clarify, why <code>A,food,75  is not matching with B,food,75 C,food,85</code> -- is ok to output, and    <code>B,shop,80  is not matching with D,shop,80</code> -- is not?"}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521390618, "post_id": 49321483, "comment_id": 85700144, "body": "as all the values in food sections are not matching irrespective of letters (A, B,C)so this case is okay. but in second case B,shop,80 is not matching with D,shop,80 this should not come in output as both values in shop case are matching with each other (irrespective of letters B,D)"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521392297, "post_id": 49321483, "comment_id": 85700749, "body": "@Sonal I&#39;ve updated my answer. It&#39;s not in the same order as  your data, but I guess that&#39;s irrelevant?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521466760, "post_id": 49321483, "comment_id": 85729032, "body": "@Sonal I&#39;ve edited the answer, but I think it&#39;s the last time. Those are insignificant changes to the algorithm; you could have actually easily figured it out yourself."}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521480015, "post_id": 49321483, "comment_id": 85738517, "body": "Thanks @wolfrevokcats"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": -1, "last_activity_date": 1521466609, "last_edit_date": 1521466609, "creation_date": 1521205423, "answer_id": 49321483, "question_id": 49320647, "link": "https://stackoverflow.com/questions/49320647/compare-the-value-of-same-items-with-one-exception-case/49321483#49321483", "title": "compare the value of same items with one exception case", "body": "<p>Really hard to follow the logic of your code.<br>\nBut I seem to get the desired result with this:</p>\n\n<p>[Edit] The code was edited as per the comments  </p>\n\n<pre><code>use strict;\nuse warnings;\nmy (%hash, \n  );\nwhile(my $line=&lt;DATA&gt;) {\n  chomp $line;\n  my ($letter, $object, $number)=split /,/, $line;\n\n  ###  here we are dealing with missing values\n  if ($number =~ m{^\\s*$}) {\n    print $line, \"missing value\\n\";\n    next;\n  }\n\n  ### here we dissever exceptional items apart from the others \n  if ($letter=~m{^E[AC]X\\d$}) {\n    $object = \"exceptional_$object\";\n  }\n\n  $number+=0; # in case there is whitespace at the end\n  push @{$hash{$object}{$number}}, [$letter,$number,$line];\n}\n\nfor my $object(sort keys %hash) {\n  my $oref = $hash{$object};\n  if (1==keys %$oref) {\n    next;\n  }\n  my $str;\n  for my $item (values %$oref) {\n    $str .= $str ? \" $item-&gt;[0][2]\" : \"$item-&gt;[0][2] is not matching with\";\n  }\n  print ($str,\"\\n\");\n}\n\n\n__DATA__\nA,food,75\nB,car,136\nA,car,69\nB,shop,80\nA,house,179\nB,food,75\nC,car,136\nECX5,flight,50\nECX4,train,95\nC,food,85\nB,house,150\nD,shop,80\nEAX5,flight,50\nEAX4,train,75\nF,movie,\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>F,movie,missing value\nA,car,69 is not matching with B,car,136\nEAX4,train,75 is not matching with ECX4,train,95\nC,food,85 is not matching with A,food,75\nA,house,179 is not matching with B,house,150\n</code></pre>\n\n<p>What the algorithm does:  </p>\n\n<p>Looping through the input we remember the all the lines for each unique pair of object and number.<br>\nAfter going through the input loop we do the following:<br>\nFor each object we skip it if it has no different numbers:  </p>\n\n<pre><code>if (1==keys %$oref) {\n    next\n}\n</code></pre>\n\n<p>If it has, we build an output string from a list of the <em>first remembered lines</em> for that object and number (that is we omit the duplicates for the object and number);\nthe first item from the list amended with \"is not matching with\".</p>\n\n<hr>\n\n<p><sub>Also, I am reading from the special filehandle DATA, which accesses embedded data in the script. This is for convenience of demoing the code</sub></p>\n"}], "owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522434869, "creation_date": 1521202857, "last_edit_date": 1522434869, "question_id": 49320647, "link": "https://stackoverflow.com/questions/49320647/compare-the-value-of-same-items-with-one-exception-case", "title": "compare the value of same items with one exception case", "body": "<p>A,food,75</p>\n\n<p>B,car,136</p>\n\n<p>A,car,69</p>\n\n<p>B,shop,80</p>\n\n<p>A,house,179</p>\n\n<p>B,food,75</p>\n\n<p>C,car,136</p>\n\n<p>ECX5,flight,50</p>\n\n<p>QC4,train,95</p>\n\n<p>C,food,85</p>\n\n<p>B,house,150</p>\n\n<p>D,shop,80</p>\n\n<p>EAX5,flight,50</p>\n\n<p>QA4,train,75</p>\n\n<p>F,movie,</p>\n\n<p>It should do comparison between the values of same type (wherever the 2nd column matches) and Print the differ .Now i want output to look like:</p>\n\n<p>**A,food,75 is not matching with B,food,75 C,food,85</p>\n\n<p>A,car,69 is not matching with C,car,136 B,Car,136</p>\n\n<p>A,house,179 is not matching with B,house,150 </p>\n\n<p>QC4,train,95 is not matching with QA4,train,75</p>\n\n<p>F,movie missing value</p>\n\n<hr>\n\n<p>Code I've written is below but its not printing the format the way I want.</p>\n\n<pre><code>  while (FILE) {\n   my $line = $_ ;\n   my @lines = split /,/, $line ;\n   $data{$lines[1]}{$lines[0]} = $lines[2] ;\n   }\n\n foreach my $item (keys %val) {\n  foreach my $letter1 (keys %{$val{$item}}) {\n foreach my $letter2 (keys %{$val{$item}}) {\n  if ( ($val{$item}{$letter1} != $val{$item}{$letter2}) &amp;&amp; ($letter1 ne \n     $letter2) &amp;&amp;  ( (!defined $done{$item}{$letter1}{$letter2}) || \n     (!defined \n   $done{$item}{$letter2}{$letter1}) ) ) {\n     print \"$item : $letter1, $val{$item}{$letter1}, $letter2 , \n     $val{$item}\n   {$letter2}\\n\" ;\n     }\n\n\n }\n</code></pre>\n"}, {"tags": ["mysql", "macos", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521196010, "post_id": 49318029, "comment_id": 85637912, "body": "Is there a database running on that machine? Can you connect to it via the command line with the <code>mysql</code> command and the same credentials?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1521196057, "post_id": 49318029, "comment_id": 85637947, "body": "Your code is very old-fashioned. If you&#39;ve got this from a book, please use a more modern book. It&#39;s teaching you outdated things. You should start by adding <code>use strict</code> and <code>use warnings</code> to the top of your code, then declare your variables with <code>my</code>."}, {"owner": {"reputation": 1, "user_id": 9502320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wRdD1lTgQWM/AAAAAAAAAAI/AAAAAAAAQ2I/iDLRynVmJkI/photo.jpg?sz=128", "display_name": "Swathi J", "link": "https://stackoverflow.com/users/9502320/swathi-j"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1521201453, "post_id": 49318029, "comment_id": 85641239, "body": "Thank you for the input, @simbabque. I do not have any coding experience, so I followed this from the Internet. I will try using strict and warning commands."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1521201934, "post_id": 49318029, "comment_id": 85641529, "body": "There are a lot of good resources for learning modern Perl linked in <a href=\"https://stackoverflow.com/tags/perl/info\">the Perl tag wiki here on Stack Overflow</a>. Take a look at those and forget about the tutorial you&#39;re doing now. You&#39;re making your life hard right now. :)"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1521201766, "creation_date": 1521201766, "answer_id": 49320324, "question_id": 49318029, "link": "https://stackoverflow.com/questions/49318029/how-do-i-connect-mysql-using-perl-cgi-in-mac-os-sierra/49320324#49320324", "title": "How do I connect MySQL using Perl/CGI in Mac OS Sierra?", "body": "<p>Using CGI is an unnecessary distraction here. I recommend that you try writing a non-CGI program that connects to the database first and, when you get that working, you can copy the same connection code into your CGI program.</p>\n\n<p>In fact, even before that, you should ensure that you can use your connection details to connect to the MySQL server using the standard MySQL tools.</p>\n\n<p>What happens if you open a command line window and run the following?:</p>\n\n<pre><code>mysql -h localhost -u root -p -D New\n</code></pre>\n\n<p>Almost certainly, this is a problem with connecting to the database and has nothing to do with Perl or CGI.</p>\n"}, {"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1521221362, "last_edit_date": 1521221362, "creation_date": 1521202097, "answer_id": 49320410, "question_id": 49318029, "link": "https://stackoverflow.com/questions/49318029/how-do-i-connect-mysql-using-perl-cgi-in-mac-os-sierra/49320410#49320410", "title": "How do I connect MySQL using Perl/CGI in Mac OS Sierra?", "body": "<p>Look at the <a href=\"http://search.cpan.org/~timb/DBI-1.640/DBI.pm#connect\" rel=\"nofollow noreferrer\">DBI documentation</a></p>\n\n<blockquote>\n<pre><code>$dbh = DBI-&gt;connect($data_source, $username, $password, \\%attr)\n        or die $DBI::errstr;\n</code></pre>\n</blockquote>\n\n<p>Compare to your code:</p>\n\n<blockquote>\n<pre><code>$dbh=DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password) \n        || die \"couldnt open database:$DBI :: errstr\";\n</code></pre>\n</blockquote>\n\n<p>You've put <code>$DBI::errstr</code> <em>inside</em> a string literal, and added spaces.</p>\n\n<p>This means your error message reporting code is going to try to try report <code>$DBI</code> (followed by <code>:: errstr</code>) instead of the variable containing the error.</p>\n\n<p>Fix that and you can find out what is actually wrong:</p>\n\n<pre><code>$dbh=DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password) \n        || die \"couldnt open database:\" . $DBI::errstr;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9502320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wRdD1lTgQWM/AAAAAAAAAAI/AAAAAAAAQ2I/iDLRynVmJkI/photo.jpg?sz=128", "display_name": "Swathi J", "link": "https://stackoverflow.com/users/9502320/swathi-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521221362, "creation_date": 1521194913, "last_edit_date": 1521195968, "question_id": 49318029, "link": "https://stackoverflow.com/questions/49318029/how-do-i-connect-mysql-using-perl-cgi-in-mac-os-sierra", "title": "How do I connect MySQL using Perl/CGI in Mac OS Sierra?", "body": "<pre><code>#!/usr/bin/perl\nprint \"content-type:text/html\\n\\n\";\nprint \"&lt;html&gt;&lt;body&gt;\";\nuse CGI;\nuse DBI;\nuse CGI qw(:standard);\nuse CGI::Carp qw(fatalsToBrowser);\n$db=\"New\";\n$user=\"root\";\n$password=\"isRovss*%1u\";\n$host=\"localhost\";\n$dbh=DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password) || \ndie \"couldnt open database:$DBI :: errstr\";\n\n$sth=$dbh-&gt;prepare(\"select * from stud\");\n$rv=$sth-&gt;execute();\nprint \"&lt;table&gt;\";\nprint \"&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;name&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;age&lt;/th&gt; \n&lt;/tr&gt;\";\nwhile (@row = $sth-&gt;fetchrow_array()) {\n    $id=$row[0];\n    $name=$row[1];\n    $age=$row[2];;\n}\nprint \"&lt;tr&gt;&lt;td&gt;$id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$age&lt;/td&gt; \n&lt;/tr&gt;\";\nprint \"&lt;/table&gt;\";\n$rc=$sth-&gt;finish();\nprint \"Database closed\";\nprint \"&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n\n<p>I am trying to connect the mysql database using Perl. I am using a Mac OS and it says \"Couldn't connect database\". </p>\n\n<p>The code im using is given above. Please help me out.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "edited": false, "score": 0, "creation_date": 1521194940, "post_id": 49317900, "comment_id": 85637132, "body": "More information please."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 4, "creation_date": 1521195399, "post_id": 49317900, "comment_id": 85637501, "body": "<a href=\"http://whathaveyoutried.com/\" rel=\"nofollow noreferrer\">What have you tried?</a> SO is not a write-some-code-for-me site. You&#39;ll have to try for yourself and when you&#39;re stuck somewhere then state your problem here and you&#39;ll get help."}, {"owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521195446, "post_id": 49317900, "comment_id": 85637532, "body": "i have a file with above sample data... and i need to load the first column to one field.. and the sum of remaining to the next field... hence &quot;A&quot; should be loaded to one field.. and next sum of values to other field..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1521200240, "post_id": 49317900, "comment_id": 85640575, "body": "Please show us your current code. And explain what problems you are having."}], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1521205952, "post_id": 49320207, "comment_id": 85644306, "body": "I like your way better, but bear in mind that the input showed by the OP has a trailing comma in the &quot;A&quot; line that you have omitted. Also, a comment states that the name of each row is also needed (which you have in <code>$row[0]</code>)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1521206129, "post_id": 49320207, "comment_id": 85644433, "body": "Yes. That extra comma throws a warning if you don&#39;t remove it. I&#39;d treat that as a reminder to clean up the input. But if you can&#39;t do that you&#39;d need to use a <code>grep</code> to remove empty fields. The &quot;expected output&quot; in the original question doesn&#39;t include the row name - which is why I omitted it."}, {"owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521449116, "post_id": 49320207, "comment_id": 85717512, "body": "@DaveCross.. is there a way to skip the first field (&quot;A&quot;) and start calculating from 2nd field?"}, {"owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521452803, "post_id": 49320207, "comment_id": 85719836, "body": "@DaveCross.. but I am receiving error.. &quot;Argument &quot;&quot; isn&#39;t numeric at subroutine entry&quot;.."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521454397, "post_id": 49320207, "comment_id": 85720908, "body": "@ricky: That&#39;s probably the extra comma that Javier mentioned in his comment above. You&#39;ll need to clean up your input data."}, {"owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521466277, "post_id": 49320207, "comment_id": 85728720, "body": "thank you.. for the inputs..:) its working for me.. however would like to remove the last line available at EOF..   i tried chomp(my @row = split (&#39;,&#39;, $input_file, -1); its still reading last line.."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "edited": false, "score": 0, "creation_date": 1521466399, "post_id": 49320207, "comment_id": 85728806, "body": "@ricky: If you have a new problem, please ask a new question."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1521458481, "last_edit_date": 1521458481, "creation_date": 1521201379, "answer_id": 49320207, "question_id": 49317900, "link": "https://stackoverflow.com/questions/49317900/perl-how-to-sum-values-in-a-line-using-perl/49320207#49320207", "title": "Perl : how to sum values in a line using PERL", "body": "<p>This should be enough to get you started:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse List::Util 'sum';\n\nwhile (&lt;DATA&gt;) {\n  chomp(my @row = split /,/);\n  say sum @row[1 .. $#row];\n}\n\n__DATA__\n\"A\",1.2,-1.5,4.2,1.4\n\"B\",2.6,-.50,-1.6,0.3,-1.3\n</code></pre>\n\n<p>(I wouldn't usually give code to answer a question that shows absolutely no effort by the OP. But there's a danger that you'll follow the bad advice in at least one of the other answers.)</p>\n\n<p><strong>Update:</strong> In the case where you might have extra commas in your data (as in the sample given) then you would need to filter our none-numbers before passing them to <code>sum()</code>. The easiest approach is probably to use <code>looks_like_number()</code> from the Scalar::Util module.</p>\n\n<pre><code>use Scalar::Util 'looks_like_number';\n</code></pre>\n\n<p>And then, in the <code>sum()</code> line...</p>\n\n<pre><code>say sum grep { looks_like_number($_) } @row[1 .. $#row];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521441563, "post_id": 49323477, "comment_id": 85714118, "body": "I&#39;m not the downvoter, but I&#39;d guess it&#39;s because you&#39;ve posted obscure code without an explanation."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1521459833, "post_id": 49323477, "comment_id": 85724241, "body": "@DaveCross I think this is one more way to get people interested in Perl. Of course, if OP or some <i>newbie</i> asked, I would explain it."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": -1, "last_activity_date": 1521212001, "last_edit_date": 1521212001, "creation_date": 1521211524, "answer_id": 49323477, "question_id": 49317900, "link": "https://stackoverflow.com/questions/49317900/perl-how-to-sum-values-in-a-line-using-perl/49323477#49323477", "title": "Perl : how to sum values in a line using PERL", "body": "<p>If you're interested in a geeky way of summing, look at this:</p>\n\n<pre><code>perl -lpe \"()=m{,(?{$_+=$'})}g\" in.txt\n</code></pre>\n\n<hr>\n\n<pre><code>5.3\n-0.5\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 49320207, "answer_count": 2, "score": -2, "last_activity_date": 1521458481, "creation_date": 1521194566, "last_edit_date": 1521195344, "question_id": 49317900, "link": "https://stackoverflow.com/questions/49317900/perl-how-to-sum-values-in-a-line-using-perl", "title": "Perl : how to sum values in a line using PERL", "body": "<p>Perl : how to sum values in a line.</p>\n\n<p>my Data looks like below.</p>\n\n<pre><code>\"A\",1.2,-1.5,4.2,1.4,\n\"B\",2.6,-.50,-1.6,0.3,-1.3\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>5.3\n-0.5\n</code></pre>\n"}, {"tags": ["windows", "perl", "batch-file", "activeperl"], "comments": [{"owner": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "edited": false, "score": 0, "creation_date": 1521187826, "post_id": 49315827, "comment_id": 85632957, "body": "NOTE: I already closed Anti-Virus while installation and running."}, {"owner": {"reputation": 91, "user_id": 9136252, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KnVj_e_4fH0/AAAAAAAAAAI/AAAAAAAAABs/gNaolC4_Xvg/photo.jpg?sz=128", "display_name": "TalkVideo Network", "link": "https://stackoverflow.com/users/9136252/talkvideo-network"}, "edited": false, "score": 0, "creation_date": 1521191995, "post_id": 49315827, "comment_id": 85635209, "body": "Windows 8 and Windows 10 (and their server equivalents), seem to suppress STDERR when run from the console. There may be a setting to change this. Errors used to appear in the console itself or in a dialog box that pops up. For starters, try running the command like this: perl file.pl &gt; error.txt  Then look at the error file. Also remember to call your perl scripts with &quot;perl &lt;scriptname&gt;&quot; It seems to affect how command-line arguments are parsed if you just call the script by itself."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 1, "creation_date": 1521236220, "post_id": 49315827, "comment_id": 85661770, "body": "In the command prompt run: <code>cd &#47;d %USERPROFILE%\\Desktop</code> . Then run <code>perl myfile.pl</code>"}, {"owner": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "edited": false, "score": 0, "creation_date": 1521258589, "post_id": 49315827, "comment_id": 85666572, "body": "Done. But nothing change. It seems perl don\u2019t know or forget with a code in myfile.pl. Doubt why my sister\u2019s laptop working in first run without file changes."}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "edited": false, "score": 0, "creation_date": 1521211886, "post_id": 49319456, "comment_id": 85648531, "body": "Yes, I running them by double-clicking. But as I try to running on my sister&#39;s laptop (Windows 7 32-bit), it works since first double-clicking!  For a Command Prompt, when I type perl myfile.pl. It warning &quot;Can&#39;t open perl script myfile.pl. No such file or directory.&quot; Note: I place myfile.pl on Desktop as same as place on my sister&#39;s laptop. It&#39;s very strange so much."}, {"owner": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "edited": false, "score": 0, "creation_date": 1521224088, "post_id": 49319456, "comment_id": 85655954, "body": "Did all suggestions but can&#39;t solved anyway. Really doubts with this error."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "edited": false, "score": 0, "creation_date": 1521515747, "post_id": 49319456, "comment_id": 85752684, "body": "You need to run it by giving the path to the file or be in the same directory as the file."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1521198964, "creation_date": 1521198964, "answer_id": 49319456, "question_id": 49315827, "link": "https://stackoverflow.com/questions/49315827/activeperl-not-working-on-windows-8-1-64-bit/49319456#49319456", "title": "ActivePerl not working on Windows 8.1 64-bit", "body": "<p>I suspect you are running them by double-clicking them. This runs the program and immediately exits (losing all output) as soon as the program is done. For toy programs that's practically immediately.</p>\n\n<p>What happens when you run the programs from a Command Prompt (or PowerShell) window?</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4282214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c3e1ade41739dce0b2ae8d604ef8f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff W.", "link": "https://stackoverflow.com/users/4282214/geoff-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1541179557, "last_edit_date": 1541179557, "creation_date": 1541178955, "answer_id": 53123125, "question_id": 49315827, "link": "https://stackoverflow.com/questions/49315827/activeperl-not-working-on-windows-8-1-64-bit/53123125#53123125", "title": "ActivePerl not working on Windows 8.1 64-bit", "body": "<p>I suggest brian d foy's response is on target, but there's more. The windows OS needs to be CAREFULLY APPENDED include the path to the perl interpreter in the <a href=\"https://stackoverflow.com/questions/9546324/adding-directory-to-path-environment-variable-in-windows\">system environment variable</a> PLUS the computer might need a RE-BOOT, or the command window in use will need a PATH revision to update the path to include that same directory location for the perl interpreter. You stated that the path was set, but not clearly; was that in the command prompt window or via the system environment variable? I suggest updating the PATH environment variable in the system via the Windows control panel.</p>\n\n<p>The call to run the perl script could be made from the directory containing the perl script, or the path to the script needs to precede the call, such as: c:\\directory-a\\dirctory-b\\file.pl  ---running file.pl from c:\\users\\mysuername isn't going to cut it, unless that just happens to be where the perl script lives.</p>\n\n<p>A debugging suggestion, add the following statements to your perl script:</p>\n\n<pre><code>print \"my script runs!\";\nsleep 4;\n</code></pre>\n\n<p>and see if anything shows on the screen. If you run from the command window rather than double-clicking the file in File Explorer, the window shouldn't disappear.</p>\n"}], "owner": {"reputation": 437, "user_id": 2971638, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/20c18cb0aa9bbe0c1ee4b49deed4aeb9?s=128&d=identicon&r=PG&f=1", "display_name": "user2971638", "link": "https://stackoverflow.com/users/2971638/user2971638"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541179557, "creation_date": 1521187766, "question_id": 49315827, "link": "https://stackoverflow.com/questions/49315827/activeperl-not-working-on-windows-8-1-64-bit", "title": "ActivePerl not working on Windows 8.1 64-bit", "body": "<p>I'm new to ActivePerl. However, I need to using it on my new Windows 8.1.</p>\n\n<p>I try to download both 5.26.1.2601 and 5.24.3.2404 (x64) to installed.</p>\n\n<p>But when I run with file.pl and file.bat, it would be suddenly closed in few second.</p>\n\n<p>Then I need to test with different Windows OS. I saved these files to my daughter's computer that is Windows 7 32-bit and surprise that all works very well just clicking.</p>\n\n<p>I already set PATH to C:\\Perl64\\bin and C:\\Perl64\\site\\bin but it still not working.</p>\n\n<p>So, I doubt why problem occured on my Windows 8.1 and how to solved its?</p>\n\n<p>Thank</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1521184124, "creation_date": 1521184124, "answer_id": 49314995, "question_id": 49314879, "link": "https://stackoverflow.com/questions/49314879/perl-regex-unrecognized-escape-s-passed-through/49314995#49314995", "title": "Perl: Regex - Unrecognized escape \\s passed through", "body": "<p>You can do that in the first line exactly as you did it in the second line: </p>\n\n<pre><code>my $find = '(.*\\s+)(subject:)(.*)(_1)(\\s+.*)';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>subject:                    Physic_2\n\nsubject:                    Math_2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "edited": false, "score": 0, "creation_date": 1521187478, "post_id": 49315377, "comment_id": 85632810, "body": "If I do something else, like my updated post, seem like couldn&#39;t work"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "edited": false, "score": 2, "creation_date": 1521190471, "post_id": 49315377, "comment_id": 85634299, "body": "To ask a new question, create a new question."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1521185871, "creation_date": 1521185871, "answer_id": 49315377, "question_id": 49314879, "link": "https://stackoverflow.com/questions/49314879/perl-regex-unrecognized-escape-s-passed-through/49315377#49315377", "title": "Perl: Regex - Unrecognized escape \\s passed through", "body": "<p>Double quotes interpolate backslashed characters. <code>\\s</code> has a special meaning in a regex, but not in doublequotes - hence the warning. Use single quotes instead.</p>\n\n<pre><code>my $find = '(.*\\s+)(subject:)(.*)(_1)(\\s+.*)';\n</code></pre>\n\n<p>or, if you need double quotes for some other reasons, double the backslashes that should survive in the regex:</p>\n\n<pre><code>my $find = \"(.*\\\\s+)(subject:)(.*)(_1)(\\\\s+.*)\";\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 5614753, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eccd1802097eddad12e2b12b61470819?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld1234", "link": "https://stackoverflow.com/users/5614753/helloworld1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2930, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521187271, "creation_date": 1521183603, "last_edit_date": 1521187271, "question_id": 49314879, "link": "https://stackoverflow.com/questions/49314879/perl-regex-unrecognized-escape-s-passed-through", "title": "Perl: Regex - Unrecognized escape \\s passed through", "body": "<p>I have the following code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $find = \"(.*\\s+)(subject:)(.*)(_1)(\\s+.*)\";\nmy $replace = '\"\\nsubject: \\t\\t$3_2\"';\n\nmy $var_1 = \"Time: 1000-1200    subject:    Physic_1    Class: Room A\";\nmy $var_2 = \"Time: 1000-1200    subject:    Math_1  Class: Room A\";\n$var_1 =~ s/$find/$replace/ee;\n$var_2 =~ s/$find/$replace/ee;\nprint $var_1.\"\\n\";\nprint $var_2.\"\\n\";\n</code></pre>\n\n<p>I expect the output only extract the subject and change _1 to _2 like:</p>\n\n<pre><code>Output:\nsubject:      Physic_2\nsubject:      Math_2\n</code></pre>\n\n<p>However, what I get is:</p>\n\n<pre><code>Output:\nUnrecognized escape \\s passed through at test.pl line 20.\nUnrecognized escape \\s passed through at test.pl line 20.\nTime: 1000-1200 subject:        Physic_1        Class: Room A\nTime: 1000-1200 subject:        Math_1  Class: Room A\n</code></pre>\n\n<p>How can I escape those \\t, \\s+, \\n as on string variable as perl regex pattern? </p>\n\n<p>UPDATE: \nIf I do something like this:</p>\n\n<pre><code>my $pattern = 's/(.*\\s+)(subject:)(.*)(_1)(\\s+.*)/\\nsubject: \\t\\t$3_2/g';\nmy $var = \"Time: 1000-1200   subject:    Physic_1    Class: Room A\";\n$var =~ $pattern;\nprint $var.\"\\n\";\n</code></pre>\n\n<p>It give the output, seem like nothing change:</p>\n\n<pre><code>Time: 1000-1200   subject:    Physic_1    Class: Room A\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": -1, "last_activity_date": 1575385582, "last_edit_date": 1575385582, "creation_date": 1521175199, "answer_id": 49313321, "question_id": 49312193, "link": "https://stackoverflow.com/questions/49312193/display-content-and-its-related-contents-in-perl-mysql/49313321#49313321", "title": "Display content and its related contents in Perl/Mysql", "body": "<p>You have declared the two subroutines and you are calling one after one so it is executing like that for example consider the following one</p>\n\n<pre><code>sub1();\nsub2();\n\nsub sub1()\n{\n    for(0..5)\n    {\n        print \"hello\\n\";\n        sub sub2()\n        {\n            print \"hi\\n\";\n\n        }\n    }\n}\n\n#output\nhello\nhello\nhello\nhello\nhello\nhello\nhi\n</code></pre>\n\n<p>So you should remove the child <code>query_person_by_target</code> subroutine or call the child subroutine inside the parent subroutine <code>query_sponsor</code>  and declare the child subroutine outside of the sub and loop, like below (not tested)</p>\n\n<pre><code>query_sponsor($dbh);\n\nsub query_sponsor\n{\n    # query from the  table\n    my ($dbh) = @_;\n    my $sql = \"SELECT name,id FROM sponsor\";\n    my $sth = $dbh-&gt;prepare($sql);\n    # execute the query\n    $sth-&gt;execute();\n    print \"&lt;table&gt;\\n\";\n    print \"&lt;thead&gt;\\n\";\n    print \"&lt;tr&gt;\\n\";\n    print \"&lt;th&gt;Id&lt;/th&gt;\\n\";\n    print \"&lt;th&gt;Name&lt;/th&gt;\\n\";\n    print \"&lt;/tr&gt;\\n\";\n    print \"&lt;/thead&gt;\\n\";\n    print \"&lt;tbody&gt;\\n\";\n    while(my @row = $sth-&gt;fetchrow_array())\n    {\n\n        print \"&lt;tr&gt;\\n\";\n        print \"&lt;td&gt;\\n\";\n        print $row['1'];\n\n        query_person_by_target($dbh);\n\n        print \"&lt;/td&gt;\\n\";\n        print \"&lt;td&gt;$row['0']&lt;/td&gt;\\n\";\n        print \"&lt;/tr&gt;\\n\";\n    }\n    $sth-&gt;finish();\n    print \"&lt;/tbody&gt;\\n\";\n    print \"&lt;/table&gt;\\n\";\n}\n\nsub query_person_by_target{\n    my ($dbhPerson) = @_;\n    my $sqlPerson = \"SELECT username, firstname FROM person WHERE sponsor_id = ?\";\n    my $sthPerson = $dbhPerson-&gt;prepare($sqlPerson);\n    $sthPerson-&gt;execute($row['1']) or die \"execution failed: $dbhPerson-&gt;errstr()\";\n    while ( my @rowPerson = $sthPerson-&gt;fetchrow_array()){\n        print \"&lt;p&gt;$rowPerson['0']&lt;/p&gt;\\n\";\n    }\n    $sth-&gt;finish();\n}\n$dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1521197062, "creation_date": 1521197062, "answer_id": 49318820, "question_id": 49312193, "link": "https://stackoverflow.com/questions/49312193/display-content-and-its-related-contents-in-perl-mysql/49318820#49318820", "title": "Display content and its related contents in Perl/Mysql", "body": "<p>You define your subroutines in the middle of other code in your program. This makes me think you expect them to be executed as they are defined, but that's not the case - they are executed as you call them. And you call them like this:</p>\n\n<pre><code>query_sponsor($dbh);\nquery_person_by_target($dbh);\n</code></pre>\n\n<p>So it should come as no surprise that you get all of the output from <code>query_sponsor()</code> followed by all of the output from <code>query_person_by_name()</code>.</p>\n\n<p>A far better approach would be to call <code>query_person_by_target()</code> from within <code>query_sponsor()</code>. I'd also split this into two phases - phase one to extract the data into a data structure and phase two to display that data.</p>\n\n<p>As I don't have your database, this code is untested.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'state'; # for state variables\nuse feature 'say';\nuse CGI 'header';\n\nsub get_dbh {\n  # MySQL database configurations\n  my $dsn = \"DBI:mysql:naxum\";\n  my $username = \"root\";\n  my $password = '';\n  # connect to MySQL database\n  my %attr = (\n    PrintError=&gt;0,  # turn off error reporting via warn()\n    RaiseError=&gt;1,  # report error via die()\n  );\n\n  return DBI-&gt;connect($dsn, $username, $password, \\%attr);\n}\n\nsub query_sponsor {\n  state $dbh = get_dbh();\n\n  my $sql = 'select name, id from sponsor';\n  my $sth = $dbh-&gt;prepare($sql);\n  $sth-&gt;execute;\n\n  my @sponsors;\n\n  while (my @row = $dbh-&gt;fetchrow_array) {\n    push @sponsors, {\n      name   =&gt; $row[0],\n      id     =&gt; $row[1],\n      people =&gt; get_people_for_sponsor($row[1]),\n    };\n  }\n\n  return @sponsors;\n}\n\nsub get_people_for_sponsor {\n  my ($sponsor_id) = @_;\n\n  state $dbh = get_dbh;\n\n  my $sql = 'select username, firstname\n             from   person\n             where  sponsor_id = ?';\n  my $sth = $dbh-&gt;prepare;\n  $sth-&gt;execute($sponsor_id);\n  my @people;\n  while (my @row = $sth-&gt;fetchrow_array) {\n    push @people, {\n      username  =&gt; $row[0],\n      firstname =&gt; $row[1],\n    };\n  }\n\n  return \\@people;\n}\n\nmy @sponsors = query_sponsor();\n\n# Now you have all of your data in @sponsors. You simply need\n# to walk that array and use the data to build the output you\n# want. My example is plain text - it shouldn't be too hard to\n# convert it to HTML.\n\nprint header('text/plain');\n\nfor my $s (@sponsors) {\n  say \"$s-&gt;{id}: $s-&gt;{name}\";\n  for my $p (@{$s-&gt;{people}}) {\n    say \"* $p-&gt;{firstname} / $p-&gt;{username}\";\n  }\n}\n</code></pre>\n\n<p>I'd also recommend that you look at using something like the Template Toolkit to produce your output. Putting raw HTML into your Perl program is a terrible idea - it is guaranteed to turn into an unmaintainable mess :-)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2338925"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575385582, "creation_date": 1521166528, "question_id": 49312193, "link": "https://stackoverflow.com/questions/49312193/display-content-and-its-related-contents-in-perl-mysql", "title": "Display content and its related contents in Perl/Mysql", "body": "<p>I am trying to achieve this sample output from a small Perl project like this</p>\n\n<pre><code>   content1\n        relatedcontent1\n        relatedcontent2\n        relatedcontent2\n   content2\n        relatedcontent1\n        relatedcontent2 \n</code></pre>\n\n<p>here is my code</p>\n\n<pre><code>   #!C:/Perl64/bin/perl.exe\n   use strict;\n   use warnings;\n   use v5.10; # for say() function\n   use DBI;\n   use HTML::Table;\n\n   # MySQL database configurations\n   my $dsn = \"DBI:mysql:naxum\";\n   my $username = \"root\";\n   my $password = '';\n   print \"Content-Type:text/html\\r\\n\\r\\n\";\n   # connect to MySQL database\n   my %attr = ( PrintError=&gt;0,  # turn off error reporting via warn()\n         RaiseError=&gt;1   # report error via die()\n       );\n   my $dbh = DBI-&gt;connect($dsn,$username,$password,\\%attr);\n\n   # query data from the sponsor table\n   query_sponsor($dbh);\n   query_person_by_target($dbh);\n\n   sub query_sponsor{\n   # query from the  table\n    my ($dbh) = @_;\n    my $sql = \"SELECT name,id FROM sponsor\";\n    my $sth = $dbh-&gt;prepare($sql);\n    # execute the query\n   $sth-&gt;execute();\n   print \"&lt;table&gt;\\n\";\n   print \"&lt;thead&gt;\\n\";\n   print \"&lt;tr&gt;\\n\";\n   print \"&lt;th&gt;Id&lt;/th&gt;\\n\";\n   print \"&lt;th&gt;Name&lt;/th&gt;\\n\";\n   print \"&lt;/tr&gt;\\n\";\n   print \"&lt;/thead&gt;\\n\";\n   print \"&lt;tbody&gt;\\n\";\n   while(my @row = $sth-&gt;fetchrow_array()){\n\n print \"&lt;tr&gt;\\n\";\n print \"&lt;td&gt;\\n\";\n print $row['1'];\n\n  sub query_person_by_target{\n      my ($dbhPerson) = @_;\n      my $sqlPerson = \"SELECT username, firstname FROM person WHERE sponsor_id = ?\";\n      my $sthPerson = $dbhPerson-&gt;prepare($sqlPerson);\n     $sthPerson-&gt;execute($row['1']) or die \"execution failed: $dbhPerson-&gt;errstr()\";\n      while ( my @rowPerson = $sthPerson-&gt;fetchrow_array()){\n          print \"&lt;p&gt;$rowPerson['0']&lt;/p&gt;\\n\";\n      }\n      $sth-&gt;finish();\n }\n print \"&lt;/td&gt;\\n\";\n print \"&lt;td&gt;$row['0']&lt;/td&gt;\\n\";\n print \"&lt;/tr&gt;\\n\";\n }\n $sth-&gt;finish();\n print \"&lt;/tbody&gt;\\n\";\n print \"&lt;/table&gt;\\n\";\n }\n $dbh-&gt;disconnect();\n</code></pre>\n\n<p>However, I can't  get the output what I am trying to achieve. Here is the result</p>\n\n<pre><code>   content1\n   content2\n   content3\n   .....\n   relatedcontent1\n</code></pre>\n\n<p>It will just print one related content outside contents. Every content and its own at least 3 relatedcontent each.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 3, "creation_date": 1521159652, "post_id": 49311324, "comment_id": 85624617, "body": "What does the parsing part of <code>script.pl</code> look like? My script consisting of <code>print &quot;$ARGV[0]\\n&quot;;</code> isn&#39;t confused by the semicolon."}, {"owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1521159737, "post_id": 49311324, "comment_id": 85624642, "body": "my $data = param(&quot;data&quot;); print &quot;$data\\n&quot;;"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1521159836, "post_id": 49311324, "comment_id": 85624666, "body": "Then what is <code>param()</code>?"}, {"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 3, "creation_date": 1521159923, "post_id": 49311324, "comment_id": 85624695, "body": "Just to be clear: it&#39;s not a shell problem. <code>read var &lt;&lt;&lt; data=&#39;!&#39;&quot;data\\;more_data&quot;&#39;!&#39;; echo &quot;$var&quot;</code> isn&#39;t confused either."}, {"owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1521159957, "post_id": 49311324, "comment_id": 85624704, "body": "param is a utility function in CGI.  Testing with ARGV looks like it works... meaning something is going on in the perl library.    <a href=\"http://perldoc.perl.org/CGI.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/CGI.html</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1521160294, "post_id": 49311324, "comment_id": 85624784, "body": "@DemiImp Where did you mention CGI?"}, {"owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "edited": false, "score": 0, "creation_date": 1521160450, "post_id": 49311324, "comment_id": 85624826, "body": "I mistook this as a bash problem, I thought the CGI library was &quot;dumb&quot; and was doing the bare minimum.  It looks like if you escape the semicolon via %3b, param reads the whole value."}, {"owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1521161265, "post_id": 49311324, "comment_id": 85625021, "body": "@BenjaminW. If you post/repost an answer similar to mine, I&#39;ll mark it as correct."}], "answers": [{"tags": [], "owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "is_accepted": true, "score": 2, "last_activity_date": 1521161790, "last_edit_date": 1521161790, "creation_date": 1521160569, "answer_id": 49311501, "question_id": 49311324, "link": "https://stackoverflow.com/questions/49311324/how-to-escape-semicolon/49311501#49311501", "title": "How to escape semicolon?", "body": "<p>The problem is in Perl.  The CGI library's param() function will treat semicolons as delimiters, even when a script is called on the command line.</p>\n\n<p>To get param() to work correctly, escape the semicolon as %3b.</p>\n"}], "owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 0, "accepted_answer_id": 49311501, "answer_count": 1, "score": 1, "last_activity_date": 1553575900, "creation_date": 1521159254, "last_edit_date": 1553575900, "question_id": 49311324, "link": "https://stackoverflow.com/questions/49311324/how-to-escape-semicolon", "title": "How to escape semicolon?", "body": "<p>I'm trying to run a command similar to this with bash and can't figure out how to escape the semicolon:</p>\n\n<pre><code>./script.pl data='!'\"data;more_data\"'!'\n</code></pre>\n\n<p>When my script reads the data, all it gets is \"!data\".</p>\n\n<pre><code>./script.pl data='!'\"data\\;more_data\"'!'\n</code></pre>\n\n<p>The value I see is \"!data\\\".</p>\n\n<p>How should I be escaping the semicolon?</p>\n\n<p>The Perl script uses CGI and param to get the data.</p>\n\n<pre><code>my $data = param(\"data\");\nprint \"$data\\n\";\n</code></pre>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 1, "creation_date": 1521149971, "post_id": 49309468, "comment_id": 85621371, "body": "<code>use utf8</code> will only tell Perl that the text inside the script is in UTF-8 encoding. In order to help you, you need to show some of your code. What is the encoding of the Chinese page? How do you get the form input from the form to the script? What is your server software? How does the script interface with it?"}, {"owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "edited": false, "score": 0, "creation_date": 1521164345, "post_id": 49309468, "comment_id": 85625622, "body": "You need to show your 500 error detail"}, {"owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "edited": false, "score": 0, "creation_date": 1521219767, "post_id": 49309468, "comment_id": 85653605, "body": "Thanks for your feedback.  I think I misdirected people.  Please see my clarification below."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "edited": false, "score": 0, "creation_date": 1521219806, "post_id": 49309829, "comment_id": 85653628, "body": "Appreciate the reply, but I think I misdirected the question.  Could you please see my clarification below?  Thanks."}, {"owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "edited": false, "score": 0, "creation_date": 1521236761, "post_id": 49309829, "comment_id": 85661986, "body": "You reply got me thinking in approximately the right direction and doing some more research.  Thanks.  Not completely solved yet, but I&#39;ll start a new Q since this one is not really on the mark."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": true, "score": 0, "last_activity_date": 1521150962, "last_edit_date": 1521150962, "creation_date": 1521150654, "answer_id": 49309829, "question_id": 49309468, "link": "https://stackoverflow.com/questions/49309468/perl-validate-chinese-character-input-from-web-page-form/49309829#49309829", "title": "Perl - Validate Chinese character input from web page form?", "body": "<p>To handle <code>utf8</code> properly :</p>\n\n<pre><code>use strict; use warnings;\n\nuse utf8;\nuse open(IO =&gt; ':encoding(utf8)');\nbinmode $_, \":utf8\" for qw/STDOUT STDIN STDERR/;\n\nopen(my $fh, '&lt;:utf8', '/file/path'); # if you need a file-handle\n\n# code.....\n</code></pre>\n\n<p>Check </p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default/6163129#6163129\">why-does-modern-perl-avoid-utf-8-by-default</a></li>\n<li><a href=\"http://perldoc.perl.org/perluniintro.html\" rel=\"nofollow noreferrer\">perluniintro</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1521219670, "creation_date": 1521219670, "answer_id": 49326037, "question_id": 49309468, "link": "https://stackoverflow.com/questions/49309468/perl-validate-chinese-character-input-from-web-page-form/49326037#49326037", "title": "Perl - Validate Chinese character input from web page form?", "body": "<p>I'm sorry - I think I poorly expressed my question by including too much information.</p>\n\n<p>The issue is - if I save my script in ANSI format and upload it to the server, it works just fine for the English page.  Expecting to want to use Chinese characters in the script, I saved it in UTF-8 format and re-uploaded, and suddenly it throws 500 for the English page.</p>\n\n<p>I tested with a Hello World script:</p>\n\n<pre><code>#!/usr/bin/perl -T\nuse strict;\nuse warnings;\n\nprint \"Content-type: text/html\\n\\n\";\n\nprint \"Hello, world!\\n\";\n</code></pre>\n\n<p>Works fine when saved as ANSI - fails 500 when saved as UTF8.</p>\n"}], "owner": {"reputation": 25, "user_id": 4227333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb69e7263b31b9819dcd14a6bbf29d0?s=128&d=identicon&r=PG&f=1", "display_name": "Jim_1234", "link": "https://stackoverflow.com/users/4227333/jim-1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 49309829, "answer_count": 2, "score": 0, "last_activity_date": 1521219708, "creation_date": 1521148959, "last_edit_date": 1521219708, "question_id": 49309468, "link": "https://stackoverflow.com/questions/49309468/perl-validate-chinese-character-input-from-web-page-form", "title": "Perl - Validate Chinese character input from web page form?", "body": "<p>My Perl script accepts and processes input from a text field in a form on a web page.  It was written for the English version of the web page and works just fine.</p>\n\n<p>There is also a Chinese version of the page (a separate page, not both languages on the same page), and now I need my script to work with that.  The user input on this page is expected to be in Chinese.</p>\n\n<p>Expecting to need to work in UTF-8, I added</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>This continues to function just fine on the English page.</p>\n\n<p>But in order to, for example, define a string variable for comparison that uses Chinese characters, I have to save the Perl script itself with utf-8 encoding.  As soon as I do that, I get the dreaded 500 server error.</p>\n\n<p>Clearly I'm going about this wrong and any helpful direction will be greatly appreciated/</p>\n\n<p>Thanks.</p>\n\n<p>EDIT - please see my clarification post below.</p>\n"}, {"tags": ["regex", "perl", "binaryfiles"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1521142939, "post_id": 49307921, "comment_id": 85617930, "body": "What do you mean by a <i>binary content</i>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1521143551, "post_id": 49307921, "comment_id": 85618248, "body": "If you mean that you read from a &quot;binary&quot; file (under <code>:raw</code>), then you&#39;ll need to <code>unpack</code> what you read before regex can work with it.  (I don&#39;t know whether you consider that &quot;easy&quot; or not :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521144640, "post_id": 49307921, "comment_id": 85618866, "body": "The above comment <b>stands corrected</b> by ikegami answer. I&#39;m leaving it for now since that may well be what you want to do, for convenience."}], "answers": [{"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1521144674, "post_id": 49308240, "comment_id": 85618882, "body": "That works only for single characters I think. I need it for whole strings that are in a scalar (e.g. s/$binval/$newval/)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 1, "creation_date": 1521144870, "post_id": 49308240, "comment_id": 85618983, "body": "No. Perl&#39;s regex engine will work with arbitrary strings. But that doesn&#39;t excuse the need to form a proper regex (<code>s&#47;\\Q$binval\\E&#47;$newval&#47;</code>)."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1521148665, "post_id": 49308240, "comment_id": 85620873, "body": "WOW! That is a real easy way!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1521144368, "last_edit_date": 1521144368, "creation_date": 1521144067, "answer_id": 49308240, "question_id": 49307921, "link": "https://stackoverflow.com/questions/49307921/perl-replace-binary-content/49308240#49308240", "title": "Perl: replace binary content", "body": "<p>Perl's regex engine will work with arbitrary strings.</p>\n\n<pre><code>s/t/T/g\n</code></pre>\n\n<p>is no different than</p>\n\n<pre><code>s/\\x{74}/\\x{54}/g\n</code></pre>\n\n<p>meaning it will change the value of characters from 74<sub>16</sub> to 54<sub>16</sub>. The regex engine doesn't care whether value 74<sub>16</sub> means <code>t</code> or something else.</p>\n\n<p>In binary data, character A<sub>16</sub> doesn't indicate the end of a line, so you'll want to use the <code>s</code> flag, avoid the <code>m</code> flag, and avoid using <code>$</code>.</p>\n\n<p>Furthermore, you'll find the <code>i</code> flag and the built-in character class (e.g. <code>\\d</code>, <code>\\p{Letter}</code>, etc) useless unless you are matching against strings of decoded text (strings of Unicode Code Points), but you may otherwise use any feature of the regex engine.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 1, "accepted_answer_id": 49308240, "answer_count": 1, "score": 2, "last_activity_date": 1521144368, "creation_date": 1521142756, "question_id": 49307921, "link": "https://stackoverflow.com/questions/49307921/perl-replace-binary-content", "title": "Perl: replace binary content", "body": "<p>I need to replace a binary content with some other content (textual or binary) in Perl.</p>\n\n<p>If the content is textual I can use s/// to replace content.</p>\n\n<pre><code> my $txt = \"tomturbo\";\n $txt =~ s/t/T/g;      # TomTurbo\n</code></pre>\n\n<p>But that is not working if the content is binary.</p>\n\n<p>Is there an easy way to handle that??</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 2, "creation_date": 1521138201, "post_id": 49306624, "comment_id": 85615516, "body": "This may be an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>.  You have not indicated what you&#39;re trying to accomplish.  If you want to read the data in a program, the correct solution is to use a CSV parsing tool that handles the line breaks.  In fact, even for the task as stated, use a Perl CSV parsing module.  It understands how to deal with CSV strings containing line breaks."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1521139967, "post_id": 49306624, "comment_id": 85616399, "body": "Please add your desired output for that sample input to your question."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1521139357, "last_edit_date": 1521139357, "creation_date": 1521138608, "answer_id": 49306796, "question_id": 49306624, "link": "https://stackoverflow.com/questions/49306624/how-to-replace-line-breaks-that-are-not-after-a-specific-character/49306796#49306796", "title": "How to replace line breaks that are not after a specific character?", "body": "<p>I understood your question to be a request to replace intra-field newlines (even if they occur immediately after a <code>\"</code>, such as in a field containing <code>\u240afoo</code> or <code>foo \"bar\"\u240abaz</code>). The following achieves that:</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\nmy $qfn_in  = ...;\nmy $qfn_out = ...;\n\nopen(my $fh_in,  '&lt;', $qfn_in)  or die(\"Can't open \\\"$qfn_in\\\": $!\\n\");\nopen(my $fh_out, '&gt;', $qfn_out) or die(\"Can't create \\\"$qfn_out\\\": $!\\n\");\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\nwhile ( my $row = $csv-&gt;getline($fh_in) ) {\n   s/\\n/ /g for @$row;\n   $csv-&gt;say($fh_out, $row);\n}\n</code></pre>\n\n<p>I think it would make more sense to use the following:</p>\n\n<pre><code>for (@$row) {\n   s/^\\s+//;   # Remove leading whitespace.\n   s/\\s+\\z//;  # Remove trailing whitespace.\n   s/\\s+/ /g;  # Replaces whitespace with a single space.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 0, "last_activity_date": 1521142042, "creation_date": 1521142042, "answer_id": 49307751, "question_id": 49306624, "link": "https://stackoverflow.com/questions/49306624/how-to-replace-line-breaks-that-are-not-after-a-specific-character/49307751#49307751", "title": "How to replace line breaks that are not after a specific character?", "body": "<p>You can try this sed but the question is'nt clear enough to know what to do with a line like</p>\n\n<pre><code>497,50,2008-08-02T16:56:53Z,469,4,\"truc biz\",test\n\nsed ':A;/[^\"]$/{N;bA};y/\\n/ /' infile\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1521146902, "last_edit_date": 1521146902, "creation_date": 1521146481, "answer_id": 49308822, "question_id": 49306624, "link": "https://stackoverflow.com/questions/49306624/how-to-replace-line-breaks-that-are-not-after-a-specific-character/49308822#49308822", "title": "How to replace line breaks that are not after a specific character?", "body": "<p>Its fairly easy to match the fields in csv.  </p>\n\n<p>The framework is the stuff between <em>quoted/non-quoted fields</em><br>\nand is either delimiter or end of record tokens.  </p>\n\n<p>So the framework is matched as well to validate the fields.<br>\nAfter doing that, it's just a matter of replacing linebreaks in quoted fields.<br>\nThat can be done in a call back.  </p>\n\n<p>The regex <code>((?:^|,|\\r?\\n)[^\\S\\r\\n]*)(?:(\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"[^\\S\\r\\n]*(?=$|,|\\r?\\n))|([^,\\r\\n]*(?=$|,|\\r?\\n)))</code>   </p>\n\n<p>Here it is in Perl, all in one package.  </p>\n\n<pre><code>use strict;\nuse warnings;\n\n$/ = undef;\n\nsub RmvNLs {\n   my ($delim, $quote, $non_quote) = @_;\n   if ( defined $non_quote ) {\n      return $delim . $non_quote;\n   }\n   $quote =~ s/\\s*\\r?\\n/ /g;\n   return $delim . $quote;\n}\n\nmy $csv = &lt;DATA&gt;;\n\n$csv =~ s/\n     (                                  # (1 start), Delimiter (BOS, comma or newline)\n          (?: ^ | , | \\r? \\n )\n          [^\\S\\r\\n]*                         # Leading optional horizontal whitespaces\n     )                                  # (1 end)\n     (?:\n          (                                  # (2 start), Quoted string field\n               \"                                  # Quoted string\n               [^\"\\\\]* \n               (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n               \"\n               [^\\S\\r\\n]*                         # Trailing optional horizontal whitespaces\n               (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n          )                                  # (2 end)\n       |                                   # OR\n          (                                  # (3 start), Non quoted field\n               [^,\\r\\n]*                          # Not comma or newline\n               (?= $ | , | \\r? \\n )               # Delimiter ahead (EOS, comma or newline)\n          )                                  # (3 end)\n     )\n   /RmvNLs($1,$2,$3)/xeg;\n\nprint $csv;\n\n\n__DATA__\n497,50,2008-08-02T16:56:53Z,469,4,\"foo bar \nfoo\n\n\n\nbar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar\nbar\"\n</code></pre>\n\n<p>Output  </p>\n\n<pre><code>497,50,2008-08-02T16:56:53Z,469,4,\"foo bar foo bar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar bar\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9499062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4149839000b7c38b2073a93418736f70?s=128&d=identicon&r=PG", "display_name": "Dimitrios Verdelis", "link": "https://stackoverflow.com/users/9499062/dimitrios-verdelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1521187097, "creation_date": 1521137899, "last_edit_date": 1521187097, "question_id": 49306624, "link": "https://stackoverflow.com/questions/49306624/how-to-replace-line-breaks-that-are-not-after-a-specific-character", "title": "How to replace line breaks that are not after a specific character?", "body": "<p>I need to process a csv file but one of the fields contains line breaks.</p>\n\n<p>How can I replace all line breaks that are not after the double quote character (\") with space? Any solution with awk, perl, sed etc is acceptable.</p>\n\n<p>The file that is in the form:</p>\n\n<pre><code>497,50,2008-08-02T16:56:53Z,469,4,\"foo bar \nfoo\n\nbar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar\nbar\"\n</code></pre>\n\n<p>The desired output is:</p>\n\n<pre><code>497,50,2008-08-02T16:56:53Z,469,4,\"foo bar foo  bar\"\n518,153,2008-08-02T17:42:28Z,469,2,\"foo bar bar\"\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "reply_to_user": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "edited": false, "score": 0, "creation_date": 1521117234, "post_id": 49298026, "comment_id": 85600821, "body": "Read the documentation. Create just a temp directory and use <code>CLEANUP=&gt;1</code>. Then create the file(s) you need in this temp directory. The directory with all its content will be removed automatically when your program exits."}], "tags": [], "owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "is_accepted": false, "score": -1, "last_activity_date": 1521112525, "creation_date": 1521112525, "answer_id": 49298026, "question_id": 49297928, "link": "https://stackoverflow.com/questions/49297928/temp-file-is-not-removed-when-created-using-filetemp-module/49298026#49298026", "title": "temp file is not removed when created using File::Temp module", "body": "<p>Use the option <code>CLEANUP =&gt; 1</code>.\nSee more in the <a href=\"http://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 2, "last_activity_date": 1521119921, "creation_date": 1521119921, "answer_id": 49300524, "question_id": 49297928, "link": "https://stackoverflow.com/questions/49297928/temp-file-is-not-removed-when-created-using-filetemp-module/49300524#49300524", "title": "temp file is not removed when created using File::Temp module", "body": "<p>I observe the same behavior on version 5.16.3.  Using <code>new</code> and <code>filename</code> on the same line looks odd to me.  If I separate the two functions, the file is automatically removed:</p>\n\n<pre><code>my $tmp = File::Temp-&gt;new(DIR =&gt; $decrypted_file_path, SUFFIX =&gt; '.tmp', UNLINK =&gt; 1);\nmy $file = $tmp-&gt;filename();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "edited": false, "score": 0, "creation_date": 1521180580, "post_id": 49301797, "comment_id": 85629796, "body": "Great explanation man. Thanks!!!    One more concern, will it automatically delete the temp files, if the use ctrl+c to interrupt the program?"}, {"owner": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "edited": false, "score": 0, "creation_date": 1521442492, "post_id": 49301797, "comment_id": 85714508, "body": "Oops. sorry about that. I have another issue with this approach, i have some command written in the temp file, after making the temp file executable, when I try to execute the command :      system(&quot;$temp_file&quot;) ; it says &#39;Text file busy &#39;"}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 7, "last_activity_date": 1521143472, "last_edit_date": 1521143472, "creation_date": 1521123301, "answer_id": 49301797, "question_id": 49297928, "link": "https://stackoverflow.com/questions/49297928/temp-file-is-not-removed-when-created-using-filetemp-module/49301797#49301797", "title": "temp file is not removed when created using File::Temp module", "body": "<p>You are using <a href=\"https://metacpan.org/pod/File::Temp\" rel=\"nofollow noreferrer\">File::Temp</a> the wrong way.\nIt will already give you an object which contains the filehandle and filename.\nIf you do</p>\n\n<pre><code>my $filename = new File::Temp(...)-&gt;filename;\n</code></pre>\n\n<p>then the object returned by File::Temp containing the filehandle will be destroyed immediately. It's similar to:</p>\n\n<pre><code>my $file = new File::Temp(...);\nmy $filename = $file-&gt;filename;\nundef $file;\n</code></pre>\n\n<p>So it creates a file and directly deletes it, and all you are left with is the filename. Then you open this file yourself and never take care of deleting it.</p>\n\n<p>Use it like that:</p>\n\n<pre><code>my $temp = File::Temp-&gt;new(...);\n# is already a filehandle\nprint $temp $content;\n# explicitly remove it, otherwise it will be removed when it falls out of scope\nundef $temp;\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 5242007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddff6465b5493e3c65c1954ab4af10d?s=128&d=identicon&r=PG&f=1", "display_name": "dr__noob", "link": "https://stackoverflow.com/users/5242007/dr-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 49301797, "answer_count": 3, "score": 2, "last_activity_date": 1585260945, "creation_date": 1521112212, "last_edit_date": 1585260945, "question_id": 49297928, "link": "https://stackoverflow.com/questions/49297928/temp-file-is-not-removed-when-created-using-filetemp-module", "title": "temp file is not removed when created using File::Temp module", "body": "<p>The <code>File::Temp</code> module is not deleting the file on exit. </p>\n\n<p>I create a temp file and pass that file to other functions in which the file is opened for reading and writing.  </p>\n\n<p>Here is the code :  </p>\n\n<pre><code>#!/usr/bin/perl  \nuse strict ;  \nuse warnings ;  \nuse Data::Dumper;   \nuse File::Temp qw/ tempfile tempdir /;  \nuse sigtrap qw(die normal-signals error-signals);  \n\nsub temp{  \n    my $decrypted_file_path = \"/home/programming/perl\";  \n    my $file = new File::Temp(DIR =&gt; $decrypted_file_path, SUFFIX =&gt; '.tmp',UNLINK=&gt;1)-&gt;filename;  \n    print Dumper $file;  \n    writeFile($file);  \n    my @arr = parse($file);  \n    return ;  \n}  \n\nsub writeFile{  \n   my ($file) = @_ ;  \n   print $file ;  \n   open(my $fh,'&gt;', $file) or die \"cannot open : $!\";  \n   print $fh 'this is test' ;  \n   close $fh ;    \n}  \n\nsub parse{  \n    my ($file) = @_ ;  \n    open(my $fh,'&lt;', $file) or die \"cannot open : $!\";  \n    my @arr = &lt;$fh&gt; ;  \n    close $fh ;  \n    return @arr ;  \n}  \n\ntemp();  \n</code></pre>\n\n<p>The problem is when the program terminates, the files are still present. How can I automatically remove the files?  </p>\n\n<p>Perl version: v5.10.1 </p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1521109025, "creation_date": 1521109025, "answer_id": 49296800, "question_id": 49296470, "link": "https://stackoverflow.com/questions/49296470/passing-an-argument-to-a-mojolicious-app/49296800#49296800", "title": "Passing an argument to a mojolicious app", "body": "<p>Take a look at the source. When you do <code>start_app</code>, it eventually runs <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.70/lib/Mojolicious.pm#L196\" rel=\"noreferrer\"><code>$app-&gt;start</code></a>, which passes <code>@ARGV</code> to <code>$self-&gt;commands-&gt;run</code>. That's another instance of <a href=\"https://metacpan.org/pod/Mojolicious::Commands\" rel=\"noreferrer\">Mojolicious::Commands</a>, which parses the args and figures out what to do with them.</p>\n\n<p>My best guess is you need to implement a <a href=\"https://metacpan.org/pod/Mojolicious::Command\" rel=\"noreferrer\">Mojolicious::Command</a>, and then you can pass along your args. That could be as simple as setting properties in the app object (which might exist already, not sure).</p>\n"}], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1521109025, "creation_date": 1521108200, "question_id": 49296470, "link": "https://stackoverflow.com/questions/49296470/passing-an-argument-to-a-mojolicious-app", "title": "Passing an argument to a mojolicious app", "body": "<p>I'm trying to figure out if it's possible to give an argument when calling an mojolicious app. <a href=\"https://stackoverflow.com/questions/17594352/how-to-pass-arguments-from-an-plack-app-to-an-mojolicious-app-enabled-in-builder\">This</a> indicates that it's not easily done, at least not five years ago. By looking at the <a href=\"http://mojolicious.org/perldoc/Mojolicious/Commands#start_app\" rel=\"nofollow noreferrer\">documentation</a>, it looks like there is an option for it (or I'm I reading this wrong?).</p>\n\n<pre><code>Mojolicious::Commands-&gt;start_app('MyApp');\nMojolicious::Commands-&gt;start_app(MyApp =&gt; @ARGV);\n</code></pre>\n\n<p>If it's indeed possible, how do I access it from the startup function? I've tried some of the most obvious one, like...</p>\n\n<pre><code>sub startup {\n    my ($self, $arg) = @_;\n    ....\n</code></pre>\n\n<p>This didn't work.</p>\n"}, {"tags": ["perl", "testing", "stderr", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521122614, "post_id": 49301040, "comment_id": 85604800, "body": "But log is already an attribute of the <code>$app</code>. and I am using it. ```   $app-&gt;log-&gt;warn(  &#39;&quot;routes&quot; key must point to an ARRAY reference &#39;                   . &#39;of routes descriptions&#39;                   . $file_msg . &#39;...&#39;) ``` <a href=\"https://github.com/kberov/Mojolicious-Plugin-RoutesConfig/blob/master/lib/Mojolicious/Plugin/RoutesConfig.pm\" rel=\"nofollow noreferrer\">github.com/kberov/Mojolicious-Plugin-RoutesConfig/blob/maste&zwnj;&#8203;r/&hellip;</a>"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521123025, "post_id": 49301040, "comment_id": 85605101, "body": "Yes you are right, I edited the answer. Consider checking the other things"}, {"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521123432, "post_id": 49301040, "comment_id": 85605408, "body": "Setting <code>local $ENV{MOJO_LOG_LEVEL} = &#39;warn&#39;;</code> did the job. Thank you, wolfrevokcats!"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 1, "creation_date": 1521123749, "post_id": 49301040, "comment_id": 85605644, "body": "Glad to hear that. I&#39;ve asked about <code>SUPER::Register</code> because of my own tinkering with the code. I&#39;ll remove that from the answer."}, {"owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1521148615, "post_id": 49301040, "comment_id": 85620842, "body": "One important clarification, which actually explains why setting MOJO_LOG_LEVEL was needed. I found in the Mojo::Log source: <code>$ENV{MOJO_LOG_LEVEL} ||= $ENV{HARNESS_IS_VERBOSE} ? &#39;debug&#39; : &#39;fatal&#39;;</code>"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 2, "last_activity_date": 1521127886, "last_edit_date": 1521127886, "creation_date": 1521121334, "answer_id": 49301040, "question_id": 49296198, "link": "https://stackoverflow.com/questions/49296198/why-stderr-in-this-perl-test-is-empty/49301040#49301040", "title": "Why *STDERR in this perl test is empty?", "body": "<p>[Edited]\nYou may need to set the environment variable <code>MOJO_LOG_LEVEL</code> to <code>warn</code>.\nThe way Mojo checks the level of logging is such that <code>$ENV{MOJO_LOG_LEVEL}</code> (<code>fatal</code> by default if using Test::Mojo) has the priority over the level set in the app.</p>\n\n<p>I used version 7.59 of Mojolicious to check these things.</p>\n"}], "owner": {"reputation": 1335, "user_id": 92795, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4f9179800a79378e74fae4f9d09d1237?s=128&d=identicon&r=PG", "display_name": "\u0411\u0435\u0440\u043e\u0432", "link": "https://stackoverflow.com/users/92795/%d0%91%d0%b5%d1%80%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 49301040, "answer_count": 1, "score": 2, "last_activity_date": 1521127886, "creation_date": 1521107479, "last_edit_date": 1521124163, "question_id": 49296198, "link": "https://stackoverflow.com/questions/49296198/why-stderr-in-this-perl-test-is-empty", "title": "Why *STDERR in this perl test is empty?", "body": "<p>I have the following chunk of code copied from Mojolicious (mojo/log.t).\nThe application which I am testing does <code>$app-&gt;log-&gt;warn('whatever');</code>.\nUnfortunately when I run the test as part of <code>make test</code>, STDERR happens to be empty. When I run it with <code>prove -lv t/basic.t</code> it succeeds. What's wrong with my program. Full source code of the tested program is <a href=\"https://github.com/kberov/Mojolicious-Plugin-RoutesConfig\" rel=\"nofollow noreferrer\">here</a>\nThank you!</p>\n\n<pre><code>my $buffer = '';\n{\n  open my $handle, '&gt;', \\$buffer;\n  local *STDERR = $handle;\n  require Blog;\n  my $blog = Blog-&gt;new;\n  $blog-&gt;startup();\n}\nlike $buffer, qr/\"routes\" key must point to an ARRAY/,\n  'right warning about ARRAY reference';\n</code></pre>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1521114763, "post_id": 49291313, "comment_id": 85599194, "body": "Please don&#39;t use <code>$a</code> and <code>$b</code> as general variable names in Perl. They are special variables used for sorting and using them elsewhere in your code could lead to confusion."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1521113187, "post_id": 49291423, "comment_id": 85598185, "body": "How to print TimeTo value?"}, {"owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1521116173, "post_id": 49291423, "comment_id": 85600061, "body": "<code>print $b-&gt;{&#39;TimeTo&#39;};</code> Result: Can&#39;t call method &quot;TimeTo&quot; on unblessed reference at test.pl line 27."}, {"owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1521118333, "post_id": 49291423, "comment_id": 85601567, "body": "Your original <code>json string</code> assign to variable <code>$a</code> is malformed. I corrected it by adding a comma in the missing place. Copy my complete answer &amp; run it. It works without problem."}, {"owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "reply_to_user": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "edited": false, "score": 0, "creation_date": 1521122669, "post_id": 49291423, "comment_id": 85604847, "body": "To print <code>TimeTo</code> value, see my answer above."}], "tags": [], "owner": {"reputation": 4840, "user_id": 1051441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/XfVDj.png?s=128&g=1", "display_name": "Shuwn Yuan Tee", "link": "https://stackoverflow.com/users/1051441/shuwn-yuan-tee"}, "is_accepted": false, "score": 3, "last_activity_date": 1521118153, "last_edit_date": 1521118153, "creation_date": 1521086883, "answer_id": 49291423, "question_id": 49291313, "link": "https://stackoverflow.com/questions/49291313/working-with-json-in-perl/49291423#49291423", "title": "Working with JSON in perl", "body": "<p>You can try below code to print values of <code>time</code> in your json:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse JSON;\nuse Data::Dumper;\n\nmy $json = q({\"Response\":\"Success\",\"Type\":100,\"Aggregated\":true,\"Data\":[{\"time\":1521064980,\"close\":8130.26,\"high\":8153.57,\"low\":8121.42,\"open\":8152.29,\"volumefrom\":711.3,\"volumeto\":5815443.51},{\"time\":1521065160,\"close\":8161.97,\"high\":8167.7,\"low\":8130.51,\"open\":8130.51,\"volumefrom\":527.3699999999999,\"volumeto\":4348419.180000001},{\"time\":1521075780,\"close\":8129.27,\"high\":8129.71,\"low\":8126.7,\"open\":8127.4,\"volumefrom\":50.35,\"volumeto\":412670.56000000006}],\"TimeTo\":1521075900,\"TimeFrom\":1521064980,\"FirstValueInArray\":true,\"ConversionType\":{\"type\":\"direct\",\"conversionSymbol\":\"\"}});\n\nmy $ref = decode_json $json;\n\n# access 'Data' in hashref $ref\nmy $data = $ref-&gt;{'Data'};\n\n# loop through item in array ref $data\nfor my $item (@{$data}) {\n    # print value of \"time\" with a newline\n    print $item-&gt;{'time'} . \"\\n\";\n}\n\n# print 'TimeTo' value\nprint \"TimeTo: \" . $ref-&gt;{'TimeTo'};\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9495076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0e20d815c07a771cbc3aab0e3328d?s=128&d=identicon&r=PG&f=1", "display_name": "F. Grela", "link": "https://stackoverflow.com/users/9495076/f-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521118153, "creation_date": 1521086157, "question_id": 49291313, "link": "https://stackoverflow.com/questions/49291313/working-with-json-in-perl", "title": "Working with JSON in perl", "body": "<p>I need to print all \"time\" values from below JSON in Perl. How do it?</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse JSON;\nuse Data::Dumper;\n$a = q({\"Response\":\"Success\",\"Type\":100,\"Aggregated\":true,\"Data\":[{\"time\":1521064980,\"close\":8130.26,\"high\":8153.57,\"low\":8121.42,\"open\":8152.29,\"volumefrom\":711.3,\"volumeto\":5815443.51},{\"time\":1521065160,\"close\":8161.97,\"high\":8167.7,\"low\":8130.51,\"open\":8130.51,\"volumefrom\":527.3699999999999,\"volumeto\":4348419.180000001}{\"time\":1521075780,\"close\":8129.27,\"high\":8129.71,\"low\":8126.7,\"open\":8127.4,\"volumefrom\":50.35,\"volumeto\":412670.56000000006}],\"TimeTo\":1521075900,\"TimeFrom\":1521064980,\"FirstValueInArray\":true,\"ConversionType\":{\"type\":\"direct\",\"conversionSymbol\":\"\"}});\n\n$b = decode_json $a;\n</code></pre>\n"}, {"tags": ["bash", "shell", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1521083591, "post_id": 49290875, "comment_id": 85584800, "body": "Re &quot;<i>for some reason it escapes the * metacharacter when it shouldn&#39;t.</i>&quot;, It doesn&#39;t. <code>sh</code> doesn&#39;t expand <code>*</code> when there are no matches."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1521083806, "post_id": 49290875, "comment_id": 85584848, "body": "Exactly, have a look at this link: <a href=\"https://stackoverflow.com/questions/19458104/how-do-i-pass-a-wildcard-parameter-to-a-bash-file\" title=\"how do i pass a wildcard parameter to a bash file\">stackoverflow.com/questions/19458104/&hellip;</a>  it is your shell that will do the magic of interpreting wildcards and not the <code>cat</code> command for the cat command it is completely transparent, it just receives a list of arguments from its parent process, the <code>shell</code>!!! In your case you are directly calling the cat command from the perl process! Also check: <a href=\"http://tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm\" rel=\"nofollow noreferrer\">tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 2, "creation_date": 1521084275, "post_id": 49290875, "comment_id": 85584932, "body": "@Allan is mistaken. You are involving the shell. It simply doesn&#39;t expand <code>*</code> if there are no matches. This can be seen using <code>sh -c &#39;echo nonexistent*&#39;</code>"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521084406, "post_id": 49290875, "comment_id": 85584970, "body": "@ikegami: really? So do you mean there is an intermediate step with a shell generation before the command is called and after it returns? I would like to know more about it!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 2, "creation_date": 1521084482, "post_id": 49290875, "comment_id": 85584989, "body": "@Allan, No, I&#39;m saying <code>system(EXPR)</code> is short for <code>system(&#39;&#47;bin&#47;sh&#39;, &#39;-c&#39;, EXPR)</code> (There is an optimization that avoids the shell if EXPR contains no shell metacharacters other than whitespace, but that&#39;s not the case here.)"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521084490, "post_id": 49290875, "comment_id": 85584991, "body": "@ikegami: Nice!!! I learned something today with this:  <code>system(&quot;cat ${readdir}&#47;RSFV1${lib}*R1_001.fastq &gt; ${outdir}&#47;RSFV1${lib}_R1.fastq&quot;) is the same as system(&#39;&#47;bin&#47;sh&#39;, &#39;-c&#39;, &quot;cat ${readdir}&#47;RSFV1${lib}*R1_001.fastq &gt; ${outdir}&#47;RSFV1${lib}_R1.fastq&quot;)</code> deleting my answer! :-) Thank you a lot for this I had no idea ;-) -&gt; <a href=\"https://stackoverflow.com/questions/872230/how-does-system-exactly-work-in-linux\" title=\"how does system exactly work in linux\">stackoverflow.com/questions/872230/&hellip;</a>"}, {"owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521084668, "post_id": 49290875, "comment_id": 85585033, "body": "@ikegami there are matches tho :/"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1521084705, "post_id": 49290875, "comment_id": 85585040, "body": "Your shell disagrees, and I trust it more than you. You might be looking in the wrong directory, or there might be characters you don&#39;t see in their name. Or maybe they are there, but a permission issue prevents them from being seen, though I think that would give a different error message."}, {"owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521084904, "post_id": 49290875, "comment_id": 85585103, "body": "@ikegami right on. prt sc added."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521085013, "post_id": 49290875, "comment_id": 85585132, "body": "What&#39;s the output of <code>echo &#47;home&#47;data&#47;madzays&#47;finch_data&#47;firstrun&#47;RSFV1S*R2_001.fastq</code>"}, {"owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "edited": false, "score": 0, "creation_date": 1521085065, "post_id": 49290875, "comment_id": 85585142, "body": "/home/data/madzays/finch_data/firstrun/RSFV1S*R2_001.fastq"}, {"owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521085654, "post_id": 49290875, "comment_id": 85585259, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166862/discussion-between-madza-yasodara-farias-virgens-and-ikegami\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "edited": false, "score": 0, "creation_date": 1521086666, "post_id": 49291367, "comment_id": 85585481, "body": "Thank you! You were right when you said &quot;Your shell disagrees, and I trust it more than you&quot;! ;)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1521086483, "creation_date": 1521086483, "answer_id": 49291367, "question_id": 49290875, "link": "https://stackoverflow.com/questions/49290875/perl-system-call-escapes-metacharacter/49291367#49291367", "title": "Perl system() call escapes metacharacter", "body": "<p>Perl is not escaping the <code>*</code>. The issue is that <code>sh</code> doesn't find any matches, and it only expands <code>*</code> when it finds a match.</p>\n\n<pre><code>$ echo fi*le\nfi*le\n\n$ touch file\n\n$ echo fi*le\nfile\n</code></pre>\n\n<p>The problem is that you are using</p>\n\n<pre><code>system(\"cat ${readdir}/RSFV1${lib}*R1_001.fastq &gt; ${outdir}/RSFV1${lib}_R1.fastq\");\n\nsystem(\"cat ${readdir}/RSFV1${lib}*R2_001.fastq &gt; ${outdir}/RSFV1${lib}_R2.fastq\");\n</code></pre>\n\n<p>when you should be using</p>\n\n<pre><code>system(\"cat ${readdir}/RSFV1${lib}*001_R1.fastq &gt; ${outdir}/RSFV1${lib}_R1.fastq\");\n\nsystem(\"cat ${readdir}/RSFV1${lib}*001_R2.fastq &gt; ${outdir}/RSFV1${lib}_R2.fastq\");\n</code></pre>\n"}], "owner": {"reputation": 785, "user_id": 5719890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/730ff3cdf102dcb1fc5e6d8192137901?s=128&d=identicon&r=PG", "display_name": "Madza Farias-Virgens", "link": "https://stackoverflow.com/users/5719890/madza-farias-virgens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 49291367, "answer_count": 1, "score": 1, "last_activity_date": 1521086483, "creation_date": 1521082934, "last_edit_date": 1521084865, "question_id": 49290875, "link": "https://stackoverflow.com/questions/49290875/perl-system-call-escapes-metacharacter", "title": "Perl system() call escapes metacharacter", "body": "<p>My student wrote this simple program that calls system to cat some files, but for some reason it escapes the * metacharacter when it shouldn't. </p>\n\n<pre><code>#!/opt/anaconda3/bin/perl\n\n# catfastq.pl\n\n# the following 'use' just makes the script print warnings and controles variable scoping (i.e. I have to place 'my' before a new variable declaration)\nuse warnings;\nuse strict;\n\n# define array of letters that you will use in the file names\nmy @letter = ('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'X', 'Z');\n\n# store full path to where fastq files are in 'readdir' variable\nmy $readdir = '/home/data/madzays/finch_data/firstrun';\n\n# store name of output directory in 'outdir' variable\nmy $outdir = '/home/data/madzays/finch_data/firstrun/combined';\n\n# make output directory if it doesn't exist already\nif (!-d $outdir)\n{\n        if (!mkdir($outdir))\n        {\n                print STDERR \"Couldn't create output directory\\n\";\n                exit 1;\n        }\n}\n\n# loop through each element of the 'letter' array (note that the element will be stored in the 'lib' variable)\nforeach my $lib (@letter)\n{\n        # the system function executes a command just like if you were to type it in the bash terminal\n\n        # concatenate R1 files\n        system(\"cat ${readdir}/RSFV1${lib}*R1_001.fastq &gt; ${outdir}/RSFV1${lib}_R1.fastq\");\n\n        # concatenate R2 files\n        system(\"cat ${readdir}/RSFV1${lib}*R2_001.fastq &gt; ${outdir}/RSFV1${lib}_R2.fastq\");\n}\n\nexit;\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>cat:/home/data/madzays/finch_data/firstrun/RSFV1S*R2_001.fastq: No such file or directory \ncat:/home/data/madzays/finch_data/firstrun/RSFV1T*R1_001.fastq: No such file or directory \ncat:/home/data/madzays/finch_data/firstrun/RSFV1T*R2_001.fastq: No such file or directory \ncat:/home/data/madzays/finch_data/firstrun/RSFV1U*R1_001.fastq: No such file or directory \ncat:/home/data/madzays/finch_data/firstrun/RSFV1U*R2_001.fastq: No such file or directory\n</code></pre>\n\n<p>Files are there (for example)</p>\n\n<pre><code>RSFV1S_S37_L005_R1.fastq  RSFV1S_S37_L005_R2.fastq  RSFV1S_S37_L006_R1.fastq  RSFV1S_S37_L006_R2.fastq  RSFV1S_S37_L007_R1.fastq  RSFV1S_S37_L007_R2.fastq\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gbj4O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gbj4O.png\" alt=\"enter image description here\"></a>\nAny ideas what could be wrong?</p>\n"}, {"tags": ["perl", "sqlite", "dbi", "dbd"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521082131, "post_id": 49290678, "comment_id": 85584509, "body": "You want to pass <i>a hundred thousand</i> parameters to your SQL query? Maybe I&#39;m just short of imagination, but I can&#39;t think of a situation where that could be a requirement; can you please explain what you&#39;re doing? I would also choose something more heavyweight than SQLite to handle such a query."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521082393, "post_id": 49290678, "comment_id": 85584554, "body": "<code>DBD::SQLite</code> doesn&#39;t use <code>sqlite3</code>, which is a command-line tool. I think you&#39;ll find that the module comes with a prebuilt library. What do you mean by <i>&quot;using a modified header&quot;</i> in this context?"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1521098353, "post_id": 49290678, "comment_id": 85589429, "body": "Modified header means a header containing constants, which gets modified to adjust the limits up to some value I&#39;ll never need to worry about hitting. Thanks for your help, it pointed me to modify the same constant in the DBD::SQLite plugin source."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1521082815, "creation_date": 1521082815, "answer_id": 49290851, "question_id": 49290678, "link": "https://stackoverflow.com/questions/49290678/setting-up-dbdsqlite-to-support-a-custom-version-of-sqlite3/49290851#49290851", "title": "Setting up DBD::SQLite to support a custom version of sqlite3", "body": "<p>Please examine the documentation for\n<a href=\"http://search.cpan.org/~ishigaki/DBD-SQLite-1.56/lib/DBD/SQLite.pm\" rel=\"nofollow noreferrer\"><code>DBD::SQLite</code></a>\nunder the heading\n<a href=\"http://search.cpan.org/~ishigaki/DBD-SQLite-1.56/lib/DBD/SQLite.pm#SQLITE_VERSION\" rel=\"nofollow noreferrer\"><em>SQLITE VERSION</em></a></p>\n\n<p>It has this about the SQLite library that it uses</p>\n\n<blockquote>\n  <p><code>DBD::SQLite</code> is usually compiled with a bundled SQLite library (SQLite version 3.22.0 as of this release) for consistency. However, a different version of SQLite may sometimes be used for some reasons like security, or some new experimental features.</p>\n</blockquote>\n\n<p>See also <code>DBD::SQLite::compile_options()</code> in the same document.</p>\n"}], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 49290851, "answer_count": 1, "score": 2, "last_activity_date": 1521082815, "creation_date": 1521081276, "question_id": 49290678, "link": "https://stackoverflow.com/questions/49290678/setting-up-dbdsqlite-to-support-a-custom-version-of-sqlite3", "title": "Setting up DBD::SQLite to support a custom version of sqlite3", "body": "<p>I get a <code>too many SQL variables</code> error using a package-default version of <code>sqlite3</code>, when I pass in more than 998 variables into a SQL query.</p>\n\n<p>The <code>sqlite3</code> binary packaged with <code>yum</code> for my OS and version was compiled with support for default variable names (indeed, 999 of them). </p>\n\n<p>I have compiled a version of <code>sqlite3</code> from source, using a modified header to bump this default up to a value that is more realistic (e.g., 99999).</p>\n\n<p>In order to integrate this custom version of <code>sqlite3</code> with Perl and its DBI interface to the DBD::SQLite plugin \u2014 to be able to use this new limit \u2014 what modifications do I make to the Perl DBD::SQLite plugin, such that it will use this modified version of <code>sqlite3</code> and not the packaged binary (or its libraries) that it currently seems to use?</p>\n"}, {"tags": ["perl", "parsing", "toml"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521082997, "post_id": 49290314, "comment_id": 85584675, "body": "So what is your question? Does your code work?"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521083089, "post_id": 49290314, "comment_id": 85584696, "body": "I missed quotes in array. Now is working."}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521083157, "post_id": 49290314, "comment_id": 85584712, "body": "But I have another ask: howto parse toml variable to this same variable name in perl? Without hashes. In this case how to my $strategies = strategies(from toml)?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521083202, "post_id": 49290314, "comment_id": 85584719, "body": "Then please write an <i>answer</i> that explains the resolution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521083379, "post_id": 49290314, "comment_id": 85584759, "body": "<i>Stack Overflow</i> is not a chat forum. You need to close this question by writing and accepting the answer that you&#39;ve discovered, and then open a new question, this tine with proper detail."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1521079851, "post_id": 49290439, "comment_id": 85583998, "body": "Error parsing toml: Syntax Error: line:1 strategies1 =[ neuralnet, BBRSI ]"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "edited": false, "score": 0, "creation_date": 1521081082, "post_id": 49290439, "comment_id": 85584301, "body": "I missed quotes. Thanks!"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1521102120, "post_id": 49290439, "comment_id": 85591074, "body": "wondering what is wrong with the accepted answer.  :) (downvoted)"}], "tags": [], "owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "is_accepted": true, "score": -1, "last_activity_date": 1521079475, "creation_date": 1521079475, "answer_id": 49290439, "question_id": 49290314, "link": "https://stackoverflow.com/questions/49290314/how-to-parse-simple-toml-in-perl/49290439#49290439", "title": "How to parse simple toml in perl?", "body": "<p>Check error use the code</p>\n\n<pre><code>my ($data, $err) = from_toml($toml);\nunless ($data) {\n    die \"Error parsing toml: $err\";\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 49290439, "answer_count": 1, "score": -1, "last_activity_date": 1521079475, "creation_date": 1521078575, "question_id": 49290314, "link": "https://stackoverflow.com/questions/49290314/how-to-parse-simple-toml-in-perl", "title": "How to parse simple toml in perl?", "body": "<p>I need implement user friendly configuration file to my perl's script. I choose toml, but im not sure how working TOML parser. </p>\n\n<p>backtest.toml file</p>\n\n<pre><code>strategies1 = [ neuralnet, BBRSI ];\n</code></pre>\n\n<p>script perl:</p>\n\n<pre><code>use TOML qw(from_toml to_toml);\nuse Data::Dumper;\nmy $toml = slurp(\"backtest.toml\");\nmy $data = from_toml($toml);\nprint Dumper($data);\nprint Dumper($strategies1);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521083068, "post_id": 49289659, "comment_id": 85584692, "body": "I don&#39;t understand. <code>fruit</code> doesn&#39;t begin with <code>t</code>. Please show the Perl code that you&#39;re having problems with"}, {"owner": {"reputation": 35, "user_id": 9336343, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/01613fc3fe056209188d4ec4e966d06c?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/9336343/anon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521084376, "post_id": 49289659, "comment_id": 85584959, "body": "Nevermind borodin, and I wrote the question wrong sorry. Each word in the output is supposed to begin with t."}, {"owner": {"reputation": 35, "user_id": 9336343, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/01613fc3fe056209188d4ec4e966d06c?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/9336343/anon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521084392, "post_id": 49289659, "comment_id": 85584965, "body": "I found out how to do it by looking at my notes :) You can also use awk"}], "answers": [{"comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1521075925, "post_id": 49289693, "comment_id": 85583103, "body": "What about <code>find2perl</code> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 2, "creation_date": 1521076005, "post_id": 49289693, "comment_id": 85583116, "body": "@Gilles Quenot, If you have an exiting command you want to convert, you can try it. But you&#39;ll get far cleaner results doing the simple translation to File::Find::Rule manually."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1521086677, "post_id": 49289693, "comment_id": 85585487, "body": "...unless you have different actions for different conditions. In that case, you might have to use the less clean File::Find module, and you might find some benefit in using <code>find2perl</code> if you have an existing command."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1521075689, "last_edit_date": 1521075689, "creation_date": 1521073367, "answer_id": 49289693, "question_id": 49289659, "link": "https://stackoverflow.com/questions/49289659/display-filenames-beginning-with-the-letter-t/49289693#49289693", "title": "Display filenames beginning with the letter t", "body": "<p>You can use</p>\n\n<pre><code>find /etc -maxdepth 1 -name 't*'\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>find /etc -maxdepth 1 -name 't*' -type f        # Plain files only\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>find /etc -name 't*' -type f                    # Recursive search\n</code></pre>\n\n<p>From within Perl, this functionality is provided by <a href=\"http://search.cpan.org/perldoc?File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>.</p>\n\n<pre><code>say for File::Find::Rule-&gt;maxdepth(1)-&gt;name('t*')-&gt;in('/etc');\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>say for File::Find::Rule-&gt;maxdepth(1)-&gt;name('t*')-&gt;file-&gt;in('/etc');\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>say for File::Find::Rule-&gt;name('t*')-&gt;file-&gt;in('/etc');\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9336343, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/01613fc3fe056209188d4ec4e966d06c?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/9336343/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1521150554, "answer_count": 1, "score": -3, "last_activity_date": 1521075689, "creation_date": 1521073129, "last_edit_date": 1521073314, "question_id": 49289659, "link": "https://stackoverflow.com/questions/49289659/display-filenames-beginning-with-the-letter-t", "closed_reason": "Not suitable for this site", "title": "Display filenames beginning with the letter t", "body": "<p>anyone know how to display long listing of the /etc dir whose filenames begins with the letter t and then print the filename column, indicating what you are printing?</p>\n\n<pre><code>Example) perl.pl\n/etc\nfilename: terminfo\nfilename: fruit \nfilename: time\nfilename: birds\n</code></pre>\n"}]