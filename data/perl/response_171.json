[{"tags": ["perl", "hex", "iso9660"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1524085329, "post_id": 49908854, "comment_id": 86833849, "body": "What is so wrong with the beeps that makes it worth this effort?"}, {"owner": {"reputation": 2515, "user_id": 5504709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef1f52e9a909c40c2e04169c1c4b72c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nesa", "link": "https://stackoverflow.com/users/5504709/nesa"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1524086666, "post_id": 49908854, "comment_id": 86834350, "body": "@mob I don&#39;t want to disturb people around me or myself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524122038, "post_id": 49908854, "comment_id": 86845261, "body": "@Nesa: Your &quot;people&quot; must be hugely sensitive to be disturbed by a couple of beeps. Do you reboot the system multiple times per hour? This sounds suspiciously like you&#39;re trying to access a system without anyone knowing."}, {"owner": {"reputation": 2515, "user_id": 5504709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef1f52e9a909c40c2e04169c1c4b72c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nesa", "link": "https://stackoverflow.com/users/5504709/nesa"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1524177695, "post_id": 49908854, "comment_id": 86878384, "body": "@Borodin no it&#39;s just common courtesy, I don&#39;t want to disturb a company&#39;s employees while I am taking down their system"}], "answers": [{"comments": [{"owner": {"reputation": 2515, "user_id": 5504709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef1f52e9a909c40c2e04169c1c4b72c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nesa", "link": "https://stackoverflow.com/users/5504709/nesa"}, "edited": false, "score": 0, "creation_date": 1524090466, "post_id": 49909047, "comment_id": 86835787, "body": "but wouldn&#39;t this remove &quot;insmode play \\n&quot; even without &quot;play 960&quot; on the following line? I think I need to write back the same number of bytes as I deleted"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1524101475, "post_id": 49909047, "comment_id": 86838599, "body": "@mob, You can&#39;t change the size of the .iso like that."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1524085733, "creation_date": 1524085733, "answer_id": 49909047, "question_id": 49908854, "link": "https://stackoverflow.com/questions/49908854/perl-hex-replacement-s-g-has-no-effect-when-used-on-an-iso-file/49909047#49909047", "title": "Perl hex replacement (s///g) has no effect when used on an ISO file", "body": "<p><code>perl -p -e CODE</code> generally runs the specified CODE on each line of the input, where lines (on POSIX-y systems) are separated by newline (<code>\\x0a</code>) characters, so this code will not allow you to make substitutions where the search pattern contains <code>\\x0a</code>.</p>\n\n<p>My approach (and this is Perl, so there are many ways to do this) would be more like</p>\n\n<pre><code>perl -p -i -e '$_=\"\" if $_ eq \"insmod play\\n\" || \n               $_ eq \"play 960 440 1 0 4 440 1\\n\"' your-kali.iso\n</code></pre>\n\n<p>This replaces the input line with the empty string when the line matches one of two target patterns (that is, removes them from the output, not replaces them with strings of spaces).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1524177915, "last_edit_date": 1524177915, "creation_date": 1524108128, "answer_id": 49912200, "question_id": 49908854, "link": "https://stackoverflow.com/questions/49908854/perl-hex-replacement-s-g-has-no-effect-when-used-on-an-iso-file/49912200#49912200", "title": "Perl hex replacement (s///g) has no effect when used on an ISO file", "body": "<p>You are reading a line at a time, which is defined as a sequence of byte up until the line feed (inclusive). So <code>$_</code> is never going to have a line feed anywhere but at the end.</p>\n\n<pre><code>perl -i -pe'\n   s/^i(?=nsmode play$)/#/;\n   s/^p(?=lay 960 440 1 0 4 440 1$)/#/;\n' your-kali.iso\n</code></pre>\n\n<p>That comments out the lines independently. If you want to replace them as a set, you'll need a buffer.</p>\n\n<pre><code>perl -i -pe'\n   if (/^insmode play$/) {\n      $buf = $_;\n      $_ = \"\";\n      next;\n   }\n\n   $_ = $buf . $_;\n   $buf = \"\";\n   s/^insmode play\\nplay 960 440 1 0 4 440 1\\n/#nsmode play\\n#lay 960 440 1 0 4 440 1\\n/;\n\n   END { print $buf }\n' your-kali.iso\n</code></pre>\n"}], "owner": {"reputation": 2515, "user_id": 5504709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef1f52e9a909c40c2e04169c1c4b72c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nesa", "link": "https://stackoverflow.com/users/5504709/nesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 49912200, "answer_count": 2, "score": 0, "last_activity_date": 1536541882, "creation_date": 1524084819, "last_edit_date": 1536541882, "question_id": 49908854, "link": "https://stackoverflow.com/questions/49908854/perl-hex-replacement-s-g-has-no-effect-when-used-on-an-iso-file", "title": "Perl hex replacement (s///g) has no effect when used on an ISO file", "body": "<p>I am trying to install a Live Kali Linux on a USB without the two beeps at booting. I found <a href=\"https://forums.kali.org/showthread.php?37280-kali-linux-2017-1-boot-menu-beep\" rel=\"nofollow noreferrer\">the fifth post in this thread</a> that says:</p>\n\n<blockquote>\n  <p>This can also depend on UEFI vs BIOS</p>\n  \n  <p>For BIOS you can use the following PERL script on the ISO file itself\n  and it will take care of any place ^G exists in the iso:</p>\n\n<pre><code>perl -p -i -e 's;\\x6d\\x65\\x6e\\x75\\x07;\\x6d\\x65\\x6e\\x75\\x20;g' your-kali.iso\n</code></pre>\n  \n  <p>The beep was added for accessibility to the UEFI boot menu as well so\n  you may still get the beep. To remove that you must edit grub.cfg and\n  comment out or remove the following two lines:</p>\n  \n  <p><em>insmode play</em><br>\n  <em>play 960 440 1 0 4 440 1</em></p>\n  \n  <p>I used live build to make the changes to grub.cfg, generated the iso,\n  and then ran the perl script prior to flashing to the usb.</p>\n</blockquote>\n\n<p>I managed to delete the (x07) byte for BIOS with the given Perl script, so I tried the same thing with \"<em>insmode play play 60 440 1 0 4 440 1</em>\" (I opened grub.cfg in a hex editor, copied the hex of this string, 696E736D6F6420706C61790A706C61792039363020343430203120302034203434302031, and put 20 in the place of every byte).</p>\n\n<p>I ran this script <code>perl -p -i -e 's;\\x69\\x6e\\x73\\x6d\\x6f\\x64\\x20\\x70\\x6c\\x61\\x79\\x0a\\x70\\x6c\\x61\\x79\\x20\\x39\\x36\\x30\\x20\\x34\\x34\\x30\\x20\\x31\\x20\\x30\\x20\\x34\\x20\\x34\\x34\\x30\\x20\\x31;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20;g' your-kali.iso</code>.</p>\n\n<p>But the string is still in the iso. </p>\n\n<p>Why does it not get replaced?</p>\n"}, {"tags": ["python", "linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 12, "creation_date": 1524083195, "post_id": 49908444, "comment_id": 86832832, "body": "<code>ripgrep -F</code> =&gt; four minutes for the whole file - not too bad for 100GB.  It probably took you longer than that to write this question ;) .  Allow me to suggest using an actual database for datasets of that size :) ."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1524083264, "post_id": 49908444, "comment_id": 86832859, "body": "The above analysis is for 6 GB file only."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1524083305, "post_id": 49908444, "comment_id": 86832888, "body": "<code>((100&#47;6)*14)&#47;60</code> = about 4 minutes. His math is right."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1524083352, "post_id": 49908444, "comment_id": 86832912, "body": "What will be the benefit of using database , like what will you use for string search in database ?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1524083382, "post_id": 49908444, "comment_id": 86832934, "body": "Have you considered using a less bad data structure?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1524083509, "post_id": 49908444, "comment_id": 86833009, "body": "the problem is that you&#39;re relying on linear search with <code>grep</code>. If you had a hash table structure you could be much faster."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1524083581, "post_id": 49908444, "comment_id": 86833042, "body": "Here&#39;s a couple of links I found via Google - <a href=\"http://www.drdobbs.com/rdb-a-unix-command-line-database/199101326\" rel=\"nofollow noreferrer\">RDB</a> (actually uses text files - not sure if it would be any faster), <a href=\"https://dev.mysql.com/doc/refman/5.6/en/mysql-commands.html\" rel=\"nofollow noreferrer\">MySQL command reference</a>"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1524083653, "post_id": 49908444, "comment_id": 86833070, "body": "What exactly are you looking for? Complete email, username or password_hash or substring of email, username or password_hash?"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1524083772, "post_id": 49908444, "comment_id": 86833129, "body": "the user can search a string, which can be either a part of email or part of user name."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1524084131, "post_id": 49908444, "comment_id": 86833295, "body": "At what frequency is the file updated, and is it ordered in any way? An advantage to using a database is the potential for indexed queries."}, {"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084201, "post_id": 49908444, "comment_id": 86833331, "body": "GNU Parallel, I can not recommend enough, break the file into tiny chunks and then feed it into parallel"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1524084262, "post_id": 49908444, "comment_id": 86833366, "body": "@DavidO, the frequency is very low."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084285, "post_id": 49908444, "comment_id": 86833385, "body": "@eagle, I tried the parallel command also, but still slower."}, {"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084370, "post_id": 49908444, "comment_id": 86833421, "body": "you might not be using it properly, but at this point you can also go the map reduce route"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 7, "creation_date": 1524085667, "post_id": 49908444, "comment_id": 86833967, "body": "what is your expectation of good timing? Is this a frequent query which might be worth creating index or even using a small db?  Can it be sorted in the searched field?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1524101639, "post_id": 49908444, "comment_id": 86838639, "body": "Also see <a href=\"https://stackoverflow.com/q/6219141/608639\">Searching for a string in a large text file - profiling various methods in python</a>, <a href=\"https://stackoverflow.com/q/13913014/608639\">Grepping a huge file (80GB) any way to speed it up?</a>, etc."}, {"owner": {"reputation": 5790, "user_id": 5407270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NsKU95wNnz8/AAAAAAAAAAI/AAAAAAAAAlI/JsEGfhwPOqU/photo.jpg?sz=128", "display_name": "Andriy Makukha", "link": "https://stackoverflow.com/users/5407270/andriy-makukha"}, "edited": false, "score": 1, "creation_date": 1524107058, "post_id": 49908444, "comment_id": 86839793, "body": "If the query is frequent, you might want to learn about &quot;full-text search&quot; and set up an indexing engine, like Lucene or Sphinx. If your rows are all uniform, you can use MySQL table."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524123858, "post_id": 49908444, "comment_id": 86846420, "body": "Unless your file is on an SSD, you are getting extremely good performance as it is. A reasonable guess for the read speed of a hard disk is about 100MB/s, so it will take about one minute to read through a 6GB text file, even without the overhead of searching the data. I can only guess that the superior speeds you are seeing are because the file has been partially cached in memory from your previous attempts. I would stick with <code>ripgrep -F</code> as it&#39;s very much faster than you should expect. To improve the access time further you need to put the data into a proper database."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1524133050, "post_id": 49908444, "comment_id": 86852401, "body": "Is your file sorted?"}, {"owner": {"reputation": 10090, "user_id": 619216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c07104de771c3b6f6c30be8f592ef8f7?s=128&d=identicon&r=PG", "display_name": "BurntSushi5", "link": "https://stackoverflow.com/users/619216/burntsushi5"}, "edited": false, "score": 1, "creation_date": 1524136290, "post_id": 49908444, "comment_id": 86854588, "body": "The fact that <code>rg literal</code> and <code>rg -F literal</code> take different times to run strongly suggests that your search is disk bound, which isn&#39;t a surprise given the size of the file you&#39;re searching. Notably, there is zero performance difference between <code>rg foo</code> and <code>rg -F foo</code>. Therefore, the only way to speed it up is to get a faster disk or index it."}], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1524134438, "post_id": 49915445, "comment_id": 86853268, "body": "Reason for the down-vote? I&#39;m curious"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1524123856, "creation_date": 1524123856, "answer_id": 49915445, "question_id": 49908444, "link": "https://stackoverflow.com/questions/49908444/search-for-a-string-in-a-100-gb-file/49915445#49915445", "title": "Search for a string in a 100 GB file", "body": "<p>If you have to do this just once: Use grep and wait until it finishes. </p>\n\n<p>If searching for a strings in 600GB csv files is part of your regular process then you'll have to change the process. Options are: use a database instead of a text file, use map/reduce and spread the load across multiple machines and cores (hadoop), ...</p>\n"}], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 1, "closed_date": 1524125891, "answer_count": 1, "score": 3, "last_activity_date": 1524123856, "creation_date": 1524083013, "last_edit_date": 1524123345, "question_id": 49908444, "link": "https://stackoverflow.com/questions/49908444/search-for-a-string-in-a-100-gb-file", "closed_reason": "Not suitable for this site", "title": "Search for a string in a 100 GB file", "body": "<p>I have a 100GB text file. The data in that file is in this format:</p>\n\n<pre><code>email||username||password_hash\n</code></pre>\n\n<p>I am testing on a 6GB file which I made separately by splitting the bigger file.</p>\n\n<p>I am running <code>grep</code> to match the lines and output them.</p>\n\n<ol>\n<li><p>I used <code>grep</code>. It is taking around 1 minute 22 seconds</p></li>\n<li><p>I used other options with <code>grep</code>, like, <code>LC_ALL=C and -F</code>, but the time is reduced to <code>1 minute 15 seconds</code>, which is still not good for a 6GB file.</p></li>\n<li><p>Then I used <code>ripgrep,</code> it is taking <code>27 seconds</code> on my machine, still not good.</p></li>\n<li><p>Then I used <code>ripgrep with -F option</code>, it is taking <code>14 seconds</code>, still not good.</p></li>\n<li><p>I tried <code>ag also (the silver searcher)</code>, but I found that it won't work for files bigger than 2 GB.</p></li>\n</ol>\n\n<p>I need your help which command line tool (or language) to achieve better results, or some way I can take advantage of the format of data to search by column. Like if I am searching by username, then instead of matching the whole line, I search only on the second column. I tried that using <code>awk</code>, but it is still slower.</p>\n"}, {"tags": ["perl", "amazon-s3"], "comments": [{"owner": {"reputation": 48744, "user_id": 40468, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43722cb1e955874a8eb721e9dfe101d1?s=128&d=identicon&r=PG", "display_name": "Ether", "link": "https://stackoverflow.com/users/40468/ether"}, "edited": false, "score": 0, "creation_date": 1528140634, "post_id": 49907690, "comment_id": 88384808, "body": "You should probably submit this as an issue at <a href=\"https://github.com/pplu/aws-sdk-perl\" rel=\"nofollow noreferrer\">github.com/pplu/aws-sdk-perl</a>."}], "owner": {"reputation": 11, "user_id": 9666224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K8SEOC0cMME/AAAAAAAAAAI/AAAAAAAAHyw/yJUYHWmrdiw/photo.jpg?sz=128", "display_name": "Tanzil", "link": "https://stackoverflow.com/users/9666224/tanzil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524130036, "creation_date": 1524080043, "last_edit_date": 1524130036, "question_id": 49907690, "link": "https://stackoverflow.com/questions/49907690/generating-a-presigned-s3-url-using-paws", "title": "Generating a presigned S3 URL using PAWS", "body": "<p>I have uploaded a CSV file to S3 Web Services using PAWS (that's the only Amazon Perl SDK I can use. I won't be able to use <code>Amazon::S3</code> or so on).</p>\n\n<p>I am trying to get a pre-signed URL for the file I have uploaded to the S3 bucket.</p>\n"}, {"tags": ["perl", "perldoc"], "answers": [{"tags": [], "owner": {"reputation": 10958, "user_id": 4830165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sss6o.jpg?s=128&g=1", "display_name": "Matthieu Moy", "link": "https://stackoverflow.com/users/4830165/matthieu-moy"}, "is_accepted": true, "score": 7, "last_activity_date": 1524060118, "last_edit_date": 1524060118, "creation_date": 1524054194, "answer_id": 49899634, "question_id": 49899633, "link": "https://stackoverflow.com/questions/49899633/perls-pod2usage-verbose-2-shows-the-source-code-instead-of-the-formatted-d/49899634#49899634", "title": "perl&#39;s pod2usage(-verbose =&gt; 2) shows the source code instead of the formatted documentation", "body": "<p>The issue is that <code>pod2usage</code> uses the command-line program <code>perldoc</code>. If this program is not installed, then no formatting is done and you get the full source code in the output.</p>\n\n<p>Note that in the question, the text \"<code>You need to install the perl-doc package to use this program.</code>\" appears in the output to give you a hint about what's going on (but when the help text is long and piped to a pager, this line is not always visible).</p>\n\n<p>Solution: install perldoc (e.g. <code>apt install perl-doc</code> on Ubuntu). After this:</p>\n\n<pre><code>$ perl test.perl \nNAME\n    Minimal example\n\nSYNOPSIS\n    This is the synopsys section.\n</code></pre>\n"}], "owner": {"reputation": 10958, "user_id": 4830165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sss6o.jpg?s=128&g=1", "display_name": "Matthieu Moy", "link": "https://stackoverflow.com/users/4830165/matthieu-moy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 1, "accepted_answer_id": 49899634, "answer_count": 1, "score": 6, "last_activity_date": 1524235459, "creation_date": 1524054194, "last_edit_date": 1524235459, "question_id": 49899633, "link": "https://stackoverflow.com/questions/49899633/perls-pod2usage-verbose-2-shows-the-source-code-instead-of-the-formatted-d", "title": "perl&#39;s pod2usage(-verbose =&gt; 2) shows the source code instead of the formatted documentation", "body": "<p>According to the <a href=\"http://search.cpan.org/~jhi/perl-5.8.1/lib/Pod/Usage.pm\" rel=\"nofollow noreferrer\">documentation of Pod::Usage</a>, with <code>pod2usage(-verbose =&gt; 2)</code> \"the entire manpage is printed\". However, in some cases, the perl source code for the script is displayed instead of the properly formatted manpage.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>use Pod::Usage qw(pod2usage);\npod2usage(-verbose =&gt; 2);\n\n__END__\n\n=head1 NAME\n\nMinimal example\n\n=head1 SYNOPSIS\n\nThis is the synopsys section.\n\n=cut\n</code></pre>\n\n<p>Running the script:</p>\n\n<pre><code>$ perl test.perl            \nYou need to install the perl-doc package to use this program.\nuse Pod::Usage qw(pod2usage);\npod2usage(-verbose =&gt; 2);\n\n__END__\n\n=head1 NAME\n\nMinimal example\n\n=head1 SYNOPSIS\n\nThis is the synopsys section.\n\n=cut\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 4, "creation_date": 1524038805, "post_id": 49894349, "comment_id": 86804115, "body": "<a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/-X.html</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1524040074, "post_id": 49894349, "comment_id": 86804878, "body": "Don&#39;t use lexical <code>$a</code> and <code>$b</code>, they&#39;re special variables used in <a href=\"http://p3rl.org/sort\" rel=\"nofollow noreferrer\">sort</a>."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 10, "last_activity_date": 1524038983, "creation_date": 1524038983, "answer_id": 49894443, "question_id": 49894349, "link": "https://stackoverflow.com/questions/49894349/what-is-meaning-of-expression-my-var-s-abc-in-perl/49894443#49894443", "title": "What is meaning of expression my $var = -s $abc in perl;", "body": "<p>It depends on the content of the file named <code>1048576</code>.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n<pre><code>-s  File has nonzero size (returns size in bytes).\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 7377411, "user_type": "registered", "profile_image": "https://graph.facebook.com/1335002613232618/picture?type=large", "display_name": "Chavan Maharshi", "link": "https://stackoverflow.com/users/7377411/chavan-maharshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1524143223, "creation_date": 1524038685, "last_edit_date": 1524143223, "question_id": 49894349, "link": "https://stackoverflow.com/questions/49894349/what-is-meaning-of-expression-my-var-s-abc-in-perl", "title": "What is meaning of expression my $var = -s $abc in perl;", "body": "<p>I was trying to understand the meaning of the switch -s in perl.\nWhat does -s signify. I tried to google, did not find any answers.</p>\n\n<pre><code>my $a = 1 * 1024 * 1024;\nmy $b = -s $a;\n</code></pre>\n\n<p>what value will b have? (In terms of a) </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1524025454, "post_id": 49889964, "comment_id": 86797904, "body": "You forgot to tell us the problem you\u2019re having!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1524039843, "post_id": 49889964, "comment_id": 86804742, "body": "Please don&#39;t post screenshots of code. It&#39;s good that you have already also included your code as text, but you should have formatted your post properly. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Right now people just guessed what the problem might be."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1524042620, "post_id": 49889964, "comment_id": 86806526, "body": "<code>print ucfirst lc reverse $name</code>"}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "edited": false, "score": 0, "creation_date": 1524060416, "post_id": 49889964, "comment_id": 86819022, "body": "I&#39;m sorry guys! So the problem I was having is that the output is not what I thought it would be. When I typed my name Seho, then it returns &quot;ohs&quot;. This was what I was supposed to include in the question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524062037, "post_id": 49889964, "comment_id": 86820254, "body": "@Seho: Are you sure about that? Not <b><i>Ohes</i></b>? That&#39;s a major mistake to make."}, {"owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524195270, "post_id": 49889964, "comment_id": 86882641, "body": "@Borodin when I implement the program, it returns &#39;Ohs&#39; I guess it had something to do with substr($function_applied_name,0,-1). Overall, the program worked fine with help from you guys. Thank you #Brodin and everyone else."}], "answers": [{"tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": false, "score": 1, "last_activity_date": 1524033470, "last_edit_date": 1524033470, "creation_date": 1524030209, "answer_id": 49892011, "question_id": 49889964, "link": "https://stackoverflow.com/questions/49889964/perl-reverses-the-input-name-and-uppercase-the-first-letter-and-lowercase-the/49892011#49892011", "title": "Perl : Reverses the input name and uppercase the first letter and lowercase the last one", "body": "<p>Always <code>Use strict;</code> and <code>Use warnings;</code></p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Please type in your first name here :\";\n\nmy $name = &lt;STDIN&gt;;\n\nchomp($name);\n\nmy $reversed_name = reverse($name);  #at this point Name becomes emaN\n\nmy $lower_cased = lc($reversed_name); #emaN becomes \"eman\"\n\nmy $final_string = ucfirst($lower_cased); #then upper-case the first character which is \"E\" so that the string becomes \"Eman\" here \n\nprint \"$final_string\" . \"\\n\";\n</code></pre>\n\n<p>This will take the input, reverse the string, conver to lowercase, then capitalize first letter.</p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1524036141, "last_edit_date": 1524036141, "creation_date": 1524035785, "answer_id": 49893447, "question_id": 49889964, "link": "https://stackoverflow.com/questions/49889964/perl-reverses-the-input-name-and-uppercase-the-first-letter-and-lowercase-the/49893447#49893447", "title": "Perl : Reverses the input name and uppercase the first letter and lowercase the last one", "body": "<p>I don't know what exactly you are asking might be check the below brief code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nprint \"Please type in your first name here :\";\n\nmy $name = &lt;STDIN&gt;;\nchomp($name); # $name = \"Name\";\n\nmy $function_applied_name = reverse($name);\n\n$function_applied_name=~s/^([a-z])/my $nw=uc($1);/e; #First letter Upper case `uc`\n\n$function_applied_name=~s/([A-Z])$/my $nw=lc($1);/e; #Last letter Lower case `lc`\n\nprint $function_applied_name;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9639111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjWc4.png?s=128&g=1", "display_name": "mr-wacker", "link": "https://stackoverflow.com/users/9639111/mr-wacker"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1524080482, "answer_count": 2, "score": -5, "last_activity_date": 1524056252, "creation_date": 1524016483, "last_edit_date": 1524016689, "question_id": 49889964, "link": "https://stackoverflow.com/questions/49889964/perl-reverses-the-input-name-and-uppercase-the-first-letter-and-lowercase-the", "closed_reason": "Needs details or clarity", "title": "Perl : Reverses the input name and uppercase the first letter and lowercase the last one", "body": "<p>I'm currently writing a script which ask the user for their first name and reverses the input then prints the string with lowercased last character and uppercased first character. I'll be more than happy if I can get a help here.<a href=\"https://i.stack.imgur.com/mVglf.png%60\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>print \"Please type in your first name here :\";\n\nmy$name = &lt;STDIN&gt;;\n\nchomp($name);\n\n$function_applied_name = reverse($name);  #at this point Name becomes emaN\n\n$chopped_last_character = chop($function_applied_name); #taking out the last N so that ema \"N\" \n\n$lower_cased = lc($chopped_last_character); #\"N\" becomes lower-cased letter so \"n\"\n\n$pre_uppsercase_process = substr($function_applied_name,0,-1); # here picks \"ema\" from the string \"emaN\"\n\n$upper_cased = ucfirst($pre_uppercase_process); #then upper-case the first character which is \"E\" so that the string becomes \"Ema\" here \n\nprint \"$upper_cased\" . \"$lower_cased\" . \"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "sftp", "put"], "answers": [{"comments": [{"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524013936, "post_id": 49889430, "comment_id": 86795292, "body": "Thanks for your answer. Perhaps I should just do it via SSH. Do you know of any good resources about using SSH for perl that you could point me to? I&#39;ve looked but the ones I find are pretty vague."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524015527, "post_id": 49889430, "comment_id": 86795679, "body": "@CoryKleiser Net::OpenSSH is really the one you want to use, and it also includes <code>sftp</code> command support.  Yes, it requires <code>IO::Pty</code> but according to the link above, you should be able to use <code>Glib</code> to get IO::Pty working for Windows."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524015601, "post_id": 49889430, "comment_id": 86795696, "body": "@CoryKleiser PS.  I tested the above snipped of code (with real values) against one of my systems.  It will work.  Getting it to work on Windows with the <code>Glib</code> will probably be the bigger challenge."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524017933, "post_id": 49889430, "comment_id": 86796149, "body": "Do you know if <code>Net::SSH::Perl;</code> is safe for Windows? Sorry if that&#39;s a stupid question. I just started using perl less than a week ago and also use unix overwhelmingly."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 1, "creation_date": 1524018133, "post_id": 49889430, "comment_id": 86796188, "body": "@CoryKleiser I know that Net::SSH::Perl is very old and not maintained properly.  It failed to connect to my remote machine in testing; because, it was not updated to accommodate changes made to the SSH protocol some years back.  That means you&#39;ll get a protocol error using it to connect to modern remote hosts.  Net::SSH requires a <code>ssh</code> command line.  The one I used as an example is an up-to-date maintained version.  As far as Windows?  I don&#39;t use Windows anymore, so I&#39;m in the dark there; but, you&#39;ll have SSH issues with some of the other versions."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1524033389, "post_id": 49889430, "comment_id": 86800952, "body": "That&#39;s wrong. SFTP is not a wrapper for SSH commands. SFTP is a fully binary protocol that uses SSH channels as the transport layer!"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524036322, "post_id": 49889430, "comment_id": 86802645, "body": "@CoryKleiser: Net::SSH::Perl used to be not well maintaned, but the situation has improved in the last years with a new maintainer. Now it supports most recent algorithms. On the other hand, it is still hard to install and <code>Net::SFTP</code> has lots of quirks."}], "tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 0, "last_activity_date": 1524015452, "last_edit_date": 1524015452, "creation_date": 1524012115, "answer_id": 49889430, "question_id": 49889341, "link": "https://stackoverflow.com/questions/49889341/perl-best-way-to-establish-an-sftp-connection-on-windows/49889430#49889430", "title": "Perl - Best way to establish an SFTP connection on windows", "body": "<p>SFTP is actually SSH with a wrapper to simulate the FTP like commands, so a <code>mdir</code> is actually a <code>ssh 'ls /path/to/dir'</code>.  </p>\n\n<p>While there might be a Perl SFTP package that avoids <code>IO::Pty</code>, you might get to your solution much faster by just translating the \"FTP\" commands into their ssh / scp equivalents and looking at <code>Net::SSH</code></p>\n\n<p>--- Adding an Example as requested ---</p>\n\n<pre><code>#!/bin/env perl\n\nuse Net::OpenSSH ();\n\nmy $connection = Net::OpenSSH-&gt;new('somehost.com', user =&gt; 'myuser', password =&gt; 'mypassword' );\nmy @ls = $connection-&gt;capture(\"ls\");\nprintf \"remote listing is %s\\n\", join(', ', @ls);\n</code></pre>\n\n<p>This should list the files to your console.</p>\n\n<p>You mentioned not having IO::Pty because it is not available for a windows machine.  Perhaps you should be attempting to install IO::Pty::Easy.  Note that <code>Net::OpenSSH</code> uses <code>IO::Pty</code> too, but that should be possible to do on windows, provided you also install <code>Glib</code> as indicated in this post <a href=\"http://www.perlmonks.org/bare/?node_id=856863\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/bare/?node_id=856863</a></p>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524036730, "post_id": 49892957, "comment_id": 86802884, "body": "Are all these solutions Windows friendly? Will I need to install any misc modules? Or do they all use basic perl modules? I&#39;m not authorized to be installing 3rd party software on the machine which is why I picked up perl."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524041054, "post_id": 49892957, "comment_id": 86805499, "body": "Yes, those solutions are Windows specific. See my updates above."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524096392, "post_id": 49892957, "comment_id": 86837334, "body": "When I attempt to use your first solution I&#39;m getting a weird error before it dies: <code>Usage: Net::SSH2::timeout(ss, timeout) at C:&#47;Strawberry&#47;perl&#47;site&#47;lib&#47;Net&#47;SSH2.pm line 111, &lt;STDIN&gt; line 1.</code> Do you know what could be causing this?"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524123065, "post_id": 49892957, "comment_id": 86845919, "body": "@CoryKleiser: I can&#39;t reproduce that error. Could you post your script code and tell us the module versions you are using (<code>Net::SFTP::Foreign</code>, <code>Net::SSH2</code> and <code>Net::SFTP::Foreign::Backend::Net_SSH2</code>)?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524124094, "post_id": 49892957, "comment_id": 86846556, "body": "I believe I added all the necessary information. Please let me know if you need any other updates."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524126770, "post_id": 49892957, "comment_id": 86848094, "body": "It looks as if you had a broken installation of <code>Net::SSH2</code> mixing code from several versions. Could you reinstall <code>Net::SSH2</code> running <code>cpan Net::SSH2</code> and try your script again?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524126963, "post_id": 49892957, "comment_id": 86848183, "body": "when I try to run that command it just tells me <code>Net::SSH2 is up to date (0.69)</code>"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524127525, "post_id": 49892957, "comment_id": 86848513, "body": "@CoryKleiser: You can force the installation using <code>cpan -fi Net::SSH2</code>."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524128173, "post_id": 49892957, "comment_id": 86848908, "body": "I reinstalled <code>Net::SSH2</code> and it is throwing the same error."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524130015, "post_id": 49892957, "comment_id": 86850143, "body": "Could you search for files named <code>SSH2.xs.dll</code> in your system and post here the listing? Also, could you search and send me (salva@cpan.org) a file named <code>SSH2.c</code> inside a directory whose name starts by <code>Net-SSH2-0.69</code>?"}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524162616, "post_id": 49892957, "comment_id": 86871718, "body": "Never mind, I installed it on a different machine and everything is working fine. Thanks for all the help!"}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": true, "score": 3, "last_activity_date": 1524041427, "last_edit_date": 1524041427, "creation_date": 1524034046, "answer_id": 49892957, "question_id": 49889341, "link": "https://stackoverflow.com/questions/49889341/perl-best-way-to-establish-an-sftp-connection-on-windows/49892957#49892957", "title": "Perl - Best way to establish an SFTP connection on windows", "body": "<p>The preferred way to use <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a> in Windows is probably to use the <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign::Backend::Net_SSH2\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign::Backend::Net_SSH2</a> backend (<strong>update</strong>: a Perl module available from CPAN) which uses <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\">Net::SSH2</a> under the hood (which is already included with Strawberry Perl, <strong>update</strong>: otherwise, you will need to build and install libssh2 yourself which sometimes is not as easy as it should be).</p>\n\n<p>Another option is to <a href=\"https://metacpan.org/pod/Net::SFTP::Foreign#ssh_cmd-=%3E-%5C@sshcmd\" rel=\"nofollow noreferrer\">tell</a> <code>Net::SFTP::Foreign</code> to use the <code>plink</code> command to run the SSH connection (search for <code>plink</code> on the module docs). <strong>Update</strong>:<code>plink</code> is part of the <code>PuTTY</code> application distribution, a very popular SSH client that may be already installed in that machine.</p>\n\n<p>Finally you can also try using <a href=\"https://metacpan.org/pod/Net::SSH::Any\" rel=\"nofollow noreferrer\">Net::SSH::Any</a> which provides its own backend for <code>Net::SFTP::Foreign</code> and can run on top of several SSH clients and modules... but it is still in beta!</p>\n"}, {"comments": [{"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524168651, "post_id": 49928664, "comment_id": 86874850, "body": "Hi there, thanks for the answer. The problem is that I am not able to download putty on the windows machine I&#39;m running them on. Fortunately salva&#39;s first option worked for me."}, {"owner": {"reputation": 501, "user_id": 1608238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cfa98712f93b0dfc91bb0994ce4e90?s=128&d=identicon&r=PG", "display_name": "Shizeon", "link": "https://stackoverflow.com/users/1608238/shizeon"}, "reply_to_user": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524180913, "post_id": 49928664, "comment_id": 86879206, "body": "Great, glad you got it working. The plink.exe doesn&#39;t have to be &#39;installed&#39; and can exist in the same directory as the script you will be uploading too."}, {"owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "edited": false, "score": 0, "creation_date": 1524181438, "post_id": 49928664, "comment_id": 86879320, "body": "Interesting. I\u2019ll keep that in mind for the future. Thanks."}], "tags": [], "owner": {"reputation": 501, "user_id": 1608238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cfa98712f93b0dfc91bb0994ce4e90?s=128&d=identicon&r=PG", "display_name": "Shizeon", "link": "https://stackoverflow.com/users/1608238/shizeon"}, "is_accepted": false, "score": 2, "last_activity_date": 1524165496, "creation_date": 1524165496, "answer_id": 49928664, "question_id": 49889341, "link": "https://stackoverflow.com/questions/49889341/perl-best-way-to-establish-an-sftp-connection-on-windows/49928664#49928664", "title": "Perl - Best way to establish an SFTP connection on windows", "body": "<p>I have several cross-platform scripts that are using Net::SFTP::Foreign using plink on windows and openssh on linux and it works great. Windows is using the latest strawberry perl release. </p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new(\n    host=&gt; $server,\n    ssh_cmd =&gt; $plink, #Contains full path to plink or path to ssh\n    user=&gt; $user,\n    more =&gt; ['-i', $keyfile],\n    stderr_discard =&gt; 1,\n);\n</code></pre>\n\n<p>The only thing about using the plink backend is that you have to first manually establish a connection using psftp or Putty gui so it stores the trust confirmation in the registry. After that it is good to go from the script.</p>\n\n<p>The nice thing is you can just have the actual path to ssh or to plink defined in a system level config file and the script just reads what is needed on that particular platform. ie (...\\bin\\Putty\\plink.exe or /usr/bin/ssh )</p>\n\n<p>Not a pure Perl solution, but has been very robust. I don't see IO::Pty on any of my windows boxes so no dependency there for plink.</p>\n"}], "owner": {"reputation": 1811, "user_id": 6713829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ze4QsHGadfw/AAAAAAAAAAI/AAAAAAAABaI/2dGHraiIlPQ/photo.jpg?sz=128", "display_name": "Cory Kleiser", "link": "https://stackoverflow.com/users/6713829/cory-kleiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2346, "favorite_count": 2, "accepted_answer_id": 49892957, "answer_count": 3, "score": 2, "last_activity_date": 1524165496, "creation_date": 1524011335, "last_edit_date": 1524124380, "question_id": 49889341, "link": "https://stackoverflow.com/questions/49889341/perl-best-way-to-establish-an-sftp-connection-on-windows", "title": "Perl - Best way to establish an SFTP connection on windows", "body": "<p>I need to put files in a remote directory using SFTP on a Windows machine. I've tried <code>Net::SFTP::Foreign</code> though I can't use it because it needs <code>IO::Pty</code> which is not available on Windows machine. What's the best/simplest way to do this?</p>\n\n<p><strong>Update With Requested Info:</strong></p>\n\n<p>Here are the versions I'm using:</p>\n\n<p><code>Net::SFTP::Foreign</code> : v 1.89</p>\n\n<p><code>Net::SSH2</code> : v 0.69</p>\n\n<p><code>Net::SFTP::Foreign::Backend::Net_SSH2</code> : v 0.09</p>\n\n<p>and here is the gist of my code:</p>\n\n<pre><code>$ssh2 = Net::SSH2-&gt;new();\n$ssh2-&gt;connect($host) || die \"connect failed\";\n$ssh2-&gt;auth_password($user, $pass) || die \"password auth failed\";\n$sftp = Net::SFTP::Foreign-&gt;new(ssh2 =&gt; $ssh2,\n                                   backend =&gt; 'Net_SSH2');\n$sftp-&gt;error and\n  die \"Unable to stablish SFTP connection: \". $sftp-&gt;error;\n</code></pre>\n\n<p>Right now I'm just trying to establish a connection. I will need to put files on the server. The erro I'm receiving is as follows:</p>\n\n<pre><code>Net::SSH2::timeout(ss, timeout) at C:/Strawberry/perl/site/lib/Net/SSH2.pm line 111, &lt;STDIN&gt; line 1.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523990250, "post_id": 49885186, "comment_id": 86786493, "body": "You should check that the <code>open</code> succeeded, and the <code>while</code> loop should read lines from the file. As the loop is now, it just iterates forever without reading anything"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1523990412, "post_id": 49885186, "comment_id": 86786582, "body": "Use <code>open my $file, &#39;&lt;&#39;, &#39;players.txt&#39; or die &quot;$!:players.txt&quot;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1523990860, "post_id": 49885186, "comment_id": 86786838, "body": "What you show altogether doesn&#39;t make sense; the second line of your program is fine (even as there is a better way) and shouldn&#39;t throw a syntax error.  What&#39;s wrong is <code>while ()</code> -- there must be something in <code>()</code>.  To read from <code>MYFILE</code> filehandle it&#39;s <code>while (&lt;MYFILE&gt;)</code>.  Then the program should work. But open the file using code in Pursell&#39;s comment above."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 1, "creation_date": 1523991736, "post_id": 49885186, "comment_id": 86787311, "body": "<code>[can&#39;t] find a guide that works for reading in a file in Perl</code> What <i>did</i> you find? What version/implementation of Perl do you (intend to) use? Do you know <a href=\"https://rosettacode.org/wiki/Read_a_file_line_by_line#Perl\" rel=\"nofollow noreferrer\">Rosetta Code</a>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523992097, "post_id": 49885186, "comment_id": 86787497, "body": "@Borodin Interesting, didn&#39;t know it&#39;s intended.  In my opinion, allowing such syntax is just a design bug. For one, we can&#39;t say <code>if ()</code> or <code>for ()</code> (not that I would want to)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1523992973, "post_id": 49885186, "comment_id": 86787973, "body": "@zdim: You can write <code>for ( ; ; ) { ... }</code> which has the same effect as <code>while()</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523993904, "post_id": 49885186, "comment_id": 86788465, "body": "@Borodin  Right (and I used that form for a period of time) -- but there is <i>something</i> inside <code>()</code>, and it&#39;s rather distinct.  The <code>while ()</code> freaks me out a little"}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 9377575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fccde8f5dda75996917673032acdc454?s=128&d=identicon&r=PG&f=1", "display_name": "Some_Dude", "link": "https://stackoverflow.com/users/9377575/some-dude"}, "edited": false, "score": 0, "creation_date": 1523997331, "post_id": 49885540, "comment_id": 86790152, "body": "&quot;perl myprog.pl&quot; worked. I dont know what is wrong with &quot;#!/usr/local/bin/perl&quot;. That must not be the right path to the perl directory. At least i can run my program now though, thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 189, "user_id": 9377575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fccde8f5dda75996917673032acdc454?s=128&d=identicon&r=PG&f=1", "display_name": "Some_Dude", "link": "https://stackoverflow.com/users/9377575/some-dude"}, "edited": false, "score": 1, "creation_date": 1523997798, "post_id": 49885540, "comment_id": 86790378, "body": "@Some: Use <code>type -a perl</code> to show you where <code>perl</code> is."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1524005504, "last_edit_date": 1524005504, "creation_date": 1523991280, "answer_id": 49885540, "question_id": 49885186, "link": "https://stackoverflow.com/questions/49885186/perl-error-reading-text-file/49885540#49885540", "title": "Perl - error reading text file", "body": "<p>The errors you're getting are bash errors, which means that you're asking bash to process Perl code. That isn't going to work</p>\n\n<p>At a guess, your shebang line <code>#!/usr/local/bin/perl</code> doesn't start at the beginning of the very first line. The two characters <code>#!</code> must be the first two bytes of the file</p>\n\n<p>Alternatively you can drop the shebang line if you specify that <code>perl</code> should run the program:</p>\n\n<pre><code>perl program5.pl\n</code></pre>\n\n<p>You also have an error in <code>while ()</code>, which is an endless loop and doesn't read from the file. You need</p>\n\n<pre><code>while ( &lt;MYFILE&gt; ) {\n    ...\n}\n</code></pre>\n\n<p>You have found a very poor and old-fashioned source of advice to learn Perl. I suggest you take a look at the\n<a href=\"https://stackoverflow.com/tags/perl/info\">Perl tag information</a>\nwhich has a list of many excellent tutorials and resources</p>\n"}], "owner": {"reputation": 189, "user_id": 9377575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fccde8f5dda75996917673032acdc454?s=128&d=identicon&r=PG&f=1", "display_name": "Some_Dude", "link": "https://stackoverflow.com/users/9377575/some-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 49885540, "answer_count": 1, "score": 1, "last_activity_date": 1524005504, "creation_date": 1523990049, "last_edit_date": 1523998294, "question_id": 49885186, "link": "https://stackoverflow.com/questions/49885186/perl-error-reading-text-file", "title": "Perl - error reading text file", "body": "<p>I am trying to read a file in perl. </p>\n\n<p>I just want to print the names of each line of file <code>players.txt</code>. </p>\n\n<p>I am using this code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nopen (MYFILE, 'players.txt');\nwhile () {\n    chomp;\n    print \"$_\\n\";\n}\nclose (MYFILE);\n</code></pre>\n\n<p>This produces this error:</p>\n\n<pre><code>./program5.pl: line 2: syntax error near unexpected token `MYFILE,'\n./program5.pl: line 2: `    open (MYFILE, 'players.txt');'\n</code></pre>\n\n<p>I am using a Unix operation system to do this. I can't find a guide that works for reading in a file in Perl.</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1523984059, "post_id": 49882457, "comment_id": 86783128, "body": "Did you reconnect after doing <code>$dbh-&gt;disconnect();</code>???"}, {"owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "edited": false, "score": 0, "creation_date": 1524144181, "post_id": 49882457, "comment_id": 86860100, "body": "Please make a more minimal example that still produces the same error."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9659625, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RhMy4jxNjAU/AAAAAAAAAAI/AAAAAAAABHk/omdj6Gq1_zs/photo.jpg?sz=128", "display_name": "sanchit raut", "link": "https://stackoverflow.com/users/9659625/sanchit-raut"}, "edited": false, "score": 1, "creation_date": 1524153184, "post_id": 49882946, "comment_id": 86866499, "body": "Thanks as ikegami said i wasn&#39;t reconnecting that caused the problem."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1524028793, "last_edit_date": 1524028793, "creation_date": 1523981724, "answer_id": 49882946, "question_id": 49882457, "link": "https://stackoverflow.com/questions/49882457/mysql-error-while-updating-data-using-perl-language/49882946#49882946", "title": "Mysql error while updating data using perl language", "body": "<p>The error message means that the connection to your database has been lost.</p>\n\n<p>You don't show us any code that creates your connection, so it's hard to know what might have gone wrong there. You might consider adding the <code>mysql_auto_reconnect</code> flag when connecting to the database.</p>\n\n<pre><code>my $dbh = DBI-&gt;connect($dsn, $user, $password, {\n   mysql_auto_reconnect =&gt; 1,\n});\n</code></pre>\n\n<p>You can also change this setting after the database connection has been set up.</p>\n\n<pre><code>$dbh-&gt;{mysql_auto_reconnect} = 1;\n</code></pre>\n\n<p><strong>Update:</strong> As ikegami points out in a comment, you disconnect from the database at the end of <code>update()</code> - and you don't show any code demonstrating that you reconnect before using the connection again in <code>query_links()</code>. That will cause this problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 9659625, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RhMy4jxNjAU/AAAAAAAAAAI/AAAAAAAABHk/omdj6Gq1_zs/photo.jpg?sz=128", "display_name": "sanchit raut", "link": "https://stackoverflow.com/users/9659625/sanchit-raut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524028793, "creation_date": 1523980147, "last_edit_date": 1523986739, "question_id": 49882457, "link": "https://stackoverflow.com/questions/49882457/mysql-error-while-updating-data-using-perl-language", "title": "Mysql error while updating data using perl language", "body": "<h1>Update function</h1>\n\n<p>I am getting an error while updating data from database.</p>\n\n<pre><code>  sub update\n    {\n        my $sql = \"UPDATE Data SET NAME = ?, ADDRESS=?, PHONE_NO=?, \n        DATE_OF_JOINING=?, ROLE_ASSIGN=?, SALARY=? WHERE ID = ?\";\n\n        my $sth = $dbh-&gt;prepare($sql);\n\n        print(\"Enter ID to update : \");\n              chomp(my $ID = &lt;STDIN&gt;);\n\n        print(\"NAME            : \");\n        chomp(my $NAME = &lt;STDIN&gt;);\n\n        print(\"ADDRESS         : \");\n        chomp(my $ADDRESS = &lt;STDIN&gt;);\n\n        print(\"PHONE_NO        : \");\n        chomp(my $PHONE_NO = &lt;STDIN&gt;);\n\n        print(\"DATE_OF_JOINING : \");\n        chomp(my $DATE_OF_JOINING = &lt;STDIN&gt;);\n\n        print(\"ROLE_ASSIGN     : \");\n        chomp(my $ROLE_ASSIGN = &lt;STDIN&gt;);\n\n        print(\"SALARY          : \");\n        chomp(my $SALARY = &lt;STDIN&gt;);\n\n        $sth-&gt;bind_param(1,$NAME);\n        $sth-&gt;bind_param(2,$ADDRESS);\n        $sth-&gt;bind_param(3,$PHONE_NO);\n        $sth-&gt;bind_param(4,$DATE_OF_JOINING);\n        $sth-&gt;bind_param(5,$ROLE_ASSIGN);\n        $sth-&gt;bind_param(6,$SALARY);\n        $sth-&gt;bind_param(7,$ID);\n\n        $sth-&gt;execute();\n\n         print(\"The record has been updated successfully!\");\n\n        $sth-&gt;finish();\n        $dbh-&gt;disconnect();\n        }\n</code></pre>\n\n<h1>After executing above function when i try to view updated data :</h1>\n\n<pre><code>   sub query_links\n    {    \n\n      my ($dbh) = @_;\n      my $sql = \"SELECT * FROM Data\";\n\n      my $sth = $dbh-&gt;prepare($sql) or die $DBI::errstr;\n\n      $sth-&gt;execute() or die $DBI::errstr; \n\n      $sth-&gt;dump_results();\n\n      $sth-&gt;finish();\n    }\n</code></pre>\n\n<h1>Error:</h1>\n\n<pre><code> DBD::mysql::st execute failed: MySQL server has gone away at mini.plx line 94,\n\n &lt;STDIN&gt; line 9.MySQL server has gone away\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523978815, "post_id": 49881554, "comment_id": 86779887, "body": "Please don&#39;t edit your code to remove the errors you&#39;re asking about."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4844286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10152769399546892/picture?type=large", "display_name": "Aaron Ross", "link": "https://stackoverflow.com/users/4844286/aaron-ross"}, "edited": false, "score": 0, "creation_date": 1523978625, "post_id": 49881839, "comment_id": 86779761, "body": "Amended, sorry meant worked without any regex, and i didn&#39;t have the s/. I was just trying heaps of different things. thanks for your reply"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1523978948, "last_edit_date": 1523978948, "creation_date": 1523978174, "answer_id": 49881839, "question_id": 49881554, "link": "https://stackoverflow.com/questions/49881554/perl-regex-case-insensitive/49881839#49881839", "title": "Perl Regex case insensitive", "body": "<p>Your code doesn't match, it replaces:</p>\n\n<pre><code>$comp =~ s/$lines[$count]//i\n</code></pre>\n\n<p>The <code>$lines[$count]</code> is interpreted as a regular expression, but you stored strings into the array. Not every string matches a regular expression created from it, e.g.</p>\n\n<pre><code>my $string = 'a+b';\n$string =~ s/$string//;  # $string is unchanged\n</code></pre>\n\n<p><code>a+b</code> as a regex means <em>at least one <code>a</code> followed by <code>b</code></em>, which clearly doesn't apply to the string. See <a href=\"http://p3rl.org/quotemeta\" rel=\"noreferrer\">quotemeta</a>.</p>\n\n<p>You haven't shown what lines you had problems with, but you can see that it doesn't work even without case sensitivity.</p>\n\n<p>To compare that $s1 and $s2 are the same regardless the case, you can use</p>\n\n<pre><code>lc $s1 eq lc $s2\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/lc\" rel=\"noreferrer\">lc</a>, <a href=\"http://p3rl.org/uc\" rel=\"noreferrer\">uc</a>, and also <a href=\"https://perldoc.perl.org/functions/fc.html\" rel=\"noreferrer\">fc</a> for unicode casefolding.</p>\n\n<p>You also need to store the unified string in the hash!</p>\n"}], "owner": {"reputation": 49, "user_id": 4844286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10152769399546892/picture?type=large", "display_name": "Aaron Ross", "link": "https://stackoverflow.com/users/4844286/aaron-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8672, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523978948, "creation_date": 1523977395, "last_edit_date": 1523978782, "question_id": 49881554, "link": "https://stackoverflow.com/questions/49881554/perl-regex-case-insensitive", "title": "Perl Regex case insensitive", "body": "<p>I'm sure I am missing something simple. The following code I am trying to match two lines of a file with regex case insensitive(//i). It still matches if the file lines are not the same with different cases. </p>\n\n<p>It works fine without the pattern matching, going through the files and comparing line by line. Just trying to add case insensitivity.</p>\n\n<pre><code>#add file lines to array for comparison\nwhile (my $fileLine = &lt;FILE1&gt;)\n{\n   chomp($fileLine);\n   push @lines, $fileLine;\n   $compare{$fileLine}++;\n}\n#comparison of second file to first file\nwhile (my $fileLine2 = &lt;FILE2&gt;)\n{\n\n   chomp($fileLine2);\n   $lineNum = 1 + $count;\n   my $comp = $fileLine2;\n\n   if ($comp =~ s/$lines[$count]//i)\n   {\n     print \"The different line is at Line Number: $lineNum \\n\" unless(exists($compare{$fileLine2}));\n     print \"File A: $fileLine2\\n\" unless (exists($compare{$fileLine2}));\n     print \"File B: $lines[$count]\\n\" unless (exists($compare{$fileLine2}));\n   }\n\n}\n</code></pre>\n"}, {"tags": ["encoding", "appender", "perl", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 283, "user_id": 5748354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47659b961a189d372bc9d3efbb519ccd?s=128&d=identicon&r=PG", "display_name": "gapsf", "link": "https://stackoverflow.com/users/5748354/gapsf"}, "is_accepted": false, "score": 0, "last_activity_date": 1524155647, "creation_date": 1524155647, "answer_id": 49926047, "question_id": 49877622, "link": "https://stackoverflow.com/questions/49877622/loglog4perl-one-appender-to-the-file-in-utf-8-and-another-to-the-screen-in-cp/49926047#49926047", "title": "Log::Log4perl: one appender to the file in UTF-8 and another to the screen in CP866 on win32", "body": "<p>I created a new appender module (by copy original <strong>Log::Log4perl::Appender::Screen</strong>) with decoding/encoding added and use it insteed of <strong>Log::Log4perl::Appender::Screen</strong> in my code.</p>\n"}], "owner": {"reputation": 283, "user_id": 5748354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47659b961a189d372bc9d3efbb519ccd?s=128&d=identicon&r=PG", "display_name": "gapsf", "link": "https://stackoverflow.com/users/5748354/gapsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524155647, "creation_date": 1523966613, "question_id": 49877622, "link": "https://stackoverflow.com/questions/49877622/loglog4perl-one-appender-to-the-file-in-utf-8-and-another-to-the-screen-in-cp", "title": "Log::Log4perl: one appender to the file in UTF-8 and another to the screen in CP866 on win32", "body": "<p>I have <strong>Log::Log4perl</strong> config with two appenders to file and screen, like this:</p>\n\n<pre><code>  log4perl.logger.bc_log             = INFO, bc_log, console\n  log4perl.appender.bc_log           = Log::Log4perl::Appender::File\n  log4perl.appender.bc_log.filename  = bc.log\n  log4perl.appender.bc_log.layout    = Log::Log4perl::Layout::PatternLayout\n  log4perl.appender.bc_log.layout.ConversionPattern = %d{ISO8601}%d{Z} %H %m%n\n\n  log4perl.appender.console           = Log::Log4perl::Appender::Screen\n  log4perl.appender.console.stderr    = 1\n  log4perl.appender.console.layout    = Log::Log4perl::Layout::PatternLayout\n  log4perl.appender.console.layout.ConversionPattern = %m%n\n</code></pre>\n\n<p>In my program all output explicitly converted to <strong>utf8</strong> (from <strong>cp1251</strong> for example) and somewhere in my program:</p>\n\n<pre><code>my $bc_log = Log::Log4perl-&gt;get_logger('bc_log');\n$bc_log-&gt;info('Some-utf8-encoded-string');\n</code></pre>\n\n<p>So message goes in <strong>utf8</strong> both to file and console, but I would like\n<strong>utf8</strong> for file and <strong>cp866</strong> for console in one shot.\nI can't figure out is it possible in <strong>Log::Log4perl</strong>?\nLooks like <strong>Log::Log4perl::Appender::File</strong> has no encoding options.</p>\n"}, {"tags": ["perl", "hash", "newline", "splice"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1523960592, "post_id": 49875580, "comment_id": 86766560, "body": "Is your input data read from file/STDIN? It looks like you&#39;re forgetting to <code>chomp</code>."}], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 6285099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30ae18ca8ecdc9b5e833ec53c2d8c486?s=128&d=identicon&r=PG&f=1", "display_name": "Azaghal", "link": "https://stackoverflow.com/users/6285099/azaghal"}, "edited": false, "score": 0, "creation_date": 1523968297, "post_id": 49875734, "comment_id": 86771962, "body": "Thanks a lot, I had indeed forgotten to chomp the values of %hash1 !"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1523963417, "last_edit_date": 1523963417, "creation_date": 1523960953, "answer_id": 49875734, "question_id": 49875580, "link": "https://stackoverflow.com/questions/49875580/splicing-an-array-generates-an-unwanted-new-line/49875734#49875734", "title": "Splicing an array generates an unwanted new line", "body": "<p>The values in <code>%hash1</code> are clearly terminated by newlines</p>\n\n<p>The code you show works fine; you need to debug the population of <code>%hash1</code></p>\n"}], "owner": {"reputation": 390, "user_id": 6285099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30ae18ca8ecdc9b5e833ec53c2d8c486?s=128&d=identicon&r=PG&f=1", "display_name": "Azaghal", "link": "https://stackoverflow.com/users/6285099/azaghal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 49875734, "answer_count": 1, "score": 0, "last_activity_date": 1524034027, "creation_date": 1523960489, "last_edit_date": 1524034027, "question_id": 49875580, "link": "https://stackoverflow.com/questions/49875580/splicing-an-array-generates-an-unwanted-new-line", "title": "Splicing an array generates an unwanted new line", "body": "<p>What I want to do is to compare the keys of two hashes, and if a key from the hash1 exists in hash2, then insert the corresponding value from hash1 in the value of the hash2, and retrieve the modified value.<br/>\nI'm trying to do so by splitting the value from hash2 in an array (said value is a tab delimited string) and splicing the array.<br/>\nI expect the output to look like this :</p>\n\n<pre><code>foo    bar    baz    qux\n</code></pre>\n\n<p>but it generates an unwanted newline right after the splice : </p>\n\n<pre><code>foo    bar    modified\nqux\n</code></pre>\n\n<p>How can I avoid this newline? </p>\n\n<p>Here is the corresponding code :</p>\n\n<pre><code>foreach my $hash1key ( keys %hash1 ) {\n    if ( exists $hash2{($hash1key)} ) {\n        my $line = $hash2{$hash1key};\n        my @results = split /\\t/, $line;        \n        splice @results, 2, 1, $hash1{$hash1key};\n        for ( @results ){ \n            print OUT $_.\"\\t\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "django", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1523958715, "post_id": 49874899, "comment_id": 86765295, "body": "Hope you have missed to give the compiler <code>perl</code> before the filename ex: <code>perl svntasktag.pl </code>"}, {"owner": {"reputation": 9, "user_id": 4684608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxB1.jpg?s=128&g=1", "display_name": "SinghB", "link": "https://stackoverflow.com/users/4684608/singhb"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1523959158, "post_id": 49874899, "comment_id": 86765651, "body": "but in the log i am not getting the values of the variables. it is directly replacing variable names. once if i get values then only we can able to run the perl script right? Please correct me if I am wrong"}, {"owner": {"reputation": 9, "user_id": 4684608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxB1.jpg?s=128&g=1", "display_name": "SinghB", "link": "https://stackoverflow.com/users/4684608/singhb"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1523959701, "post_id": 49874899, "comment_id": 86766035, "body": "In the log the command is showing as below:                                                    (&#39; Command is %s &#39;, [&#39;f\\x00\\x00\\x00l\\x00\\x00\\x00e\\x00\\x00\\x00x\\x00\\x00\\x00i\\x00\\&zwnj;&#8203;x00\\x00s\\x00\\x00\\x00&zwnj;&#8203;e\\x00\\x00\\x00r\\x00\\x&zwnj;&#8203;00\\x00v\\x00\\x00\\x00e&zwnj;&#8203;\\x00\\x00\\x00r\\x00\\x0&zwnj;&#8203;0\\x00/\\x00\\x00\\x00b\\&zwnj;&#8203;x00\\x00\\x00u\\x00\\x00&zwnj;&#8203;\\x00i\\x00\\x00\\x00l"}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1523961648, "post_id": 49874899, "comment_id": 86767220, "body": "It&#39;s much better to pass the command line as a list, instead of a string. Then it doesn&#39;t go through the shell, so you don&#39;t have to worry about quoting and escaping."}, {"owner": {"reputation": 9, "user_id": 4684608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxB1.jpg?s=128&g=1", "display_name": "SinghB", "link": "https://stackoverflow.com/users/4684608/singhb"}, "edited": false, "score": 0, "creation_date": 1523964876, "post_id": 49874899, "comment_id": 86769439, "body": "can you give me an example how to do that ? I am new to django and python it would be really helpful to me."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 4684608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxB1.jpg?s=128&g=1", "display_name": "SinghB", "link": "https://stackoverflow.com/users/4684608/singhb"}, "is_accepted": false, "score": 0, "last_activity_date": 1524658584, "creation_date": 1524658584, "answer_id": 50022130, "question_id": 49874899, "link": "https://stackoverflow.com/questions/49874899/passing-python-variables-as-an-arguments-to-a-perl-script/50022130#50022130", "title": "Passing Python variables as an arguments to a perl script", "body": "<p>This issue has been resolved by using replace in python.\nI replaced back slash as follows</p>\n\n<pre><code>args_str1 = \"flexiserver/build/svnenv.sh -j 'svntasktag_pdash.pl -u \" + i_uname + \" -a \" + i_passw + \" -c \\\"\" + i_desc + \"\\\" ss_fvnteste'\"\n\n            args2 = str(args_str1).replace(\"\\\\\",\"\")\n</code></pre>\n\n<p>This worked for me</p>\n"}], "owner": {"reputation": 9, "user_id": 4684608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQxB1.jpg?s=128&g=1", "display_name": "SinghB", "link": "https://stackoverflow.com/users/4684608/singhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524658584, "creation_date": 1523958516, "last_edit_date": 1592644375, "question_id": 49874899, "link": "https://stackoverflow.com/questions/49874899/passing-python-variables-as-an-arguments-to-a-perl-script", "title": "Passing Python variables as an arguments to a perl script", "body": "<p>I have a Django project where one of the Python functions uses a Perl script, and I am passing Python variables as arguments.</p>\n<p>But instead of using the values of the Python variables it is passing the variable names.</p>\n<p>How can I pass these variables generically to a Perl script?</p>\n<pre><code>log output is as follows:\n('Isource username is %s ', u'sudhb')\n('Isource password is %s ', u'123456')\n(' Command is %s ', ['flexiserver/build/svnenv.sh', '-j', 'svntasktag.pl -u i_uname -a i_passw ss_fvnteste'])\n</code></pre>\n<h3>Python code</h3>\n<pre><code>i_uname = request.POST.get('uname')\ni_passw = request.POST.get('ispsw')\n\nargs_str1 = &quot;flexiserver/build/svnenv.sh -j 'svntasktag.pl -u &quot; + i_uname + &quot; -a &quot; + i_passw + &quot; -c \\&quot;&quot; + i_desc + &quot;\\&quot; ss_fvnteste'&quot;\nargs1     = shlex.split(args_str2)\npi = subprocess.Popen(args1, stdout=subprocess.PIPE)\nstdout = pi.communicate()\n</code></pre>\n"}, {"tags": ["perl", "substring", "substr"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1523953437, "post_id": 49872082, "comment_id": 86761547, "body": "Please take a look at <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a> to learn about the different types of data in Perl. An array <code>@foo</code> is constructed from a <i>list</i>, which uses parentheses <code>()</code>. The curly braces you used <code>{}</code> are for making an anonymous hash reference, which implies key/value pairs. Your code example will not compile."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523953782, "post_id": 49872082, "comment_id": 86761775, "body": "@simbabque: It will, but warn under <a href=\"http://p3rl.org/warnings\" rel=\"nofollow noreferrer\">warnings</a>: &quot;Odd number of elements in anonymous hash&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1523950635, "creation_date": 1523950635, "answer_id": 49872376, "question_id": 49872082, "link": "https://stackoverflow.com/questions/49872082/how-to-substring-a-string-with-several-position-with-perl/49872376#49872376", "title": "How to substring a string with several position with Perl?", "body": "<p>To populate an array, use round parentheses, not curly brackets (they're used for hash references).</p>\n\n<p>One possible way is to use <a href=\"http://p3rl.org/substr\" rel=\"noreferrer\">substr</a> where the first argument is the position, so you can use the array elements. You just need to compute the length by subtracting the position from the following one; and to be able to compute the last length, you need the length of the whole string, too:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $string = 'AACCAAGTAA';\nmy @cut_places = (0, 4, 8);\n\npush @cut_places, length $string;\nmy @parts = map {\n    substr $string, $cut_places[$_], $cut_places[$_+1] - $cut_places[$_]\n} 0 .. $#cut_places - 1;\n\nsay for @parts;\n</code></pre>\n\n<p>If the original array contained lengths instead of positions, the code would  be much easier.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $string = 'AACCAAGTAA';\nmy @lengths = (4, 4, 2);  # 4, 4, 4 would work, too\n\nmy @parts = unpack join(\"\", map \"A$_\", @lengths), $string;\n\nsay for @parts;\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/unpack\" rel=\"noreferrer\">unpack</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1523984352, "last_edit_date": 1523984352, "creation_date": 1523955280, "answer_id": 49873773, "question_id": 49872082, "link": "https://stackoverflow.com/questions/49872082/how-to-substring-a-string-with-several-position-with-perl/49873773#49873773", "title": "How to substring a string with several position with Perl?", "body": "<p>Work out the lengths of needed parts first, then all methods are easier.  Here regex is used</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $string = 'AACCAAGTAA';\n\nmy @pos = (0, 4, 8); \n\nmy @lens = do {\n    my $prev = shift @pos;\n    \"$prev\", map { my $e = $_ - $prev; $prev = $_; $e } @pos;\n};\n\nmy $patt = join '', map { '(.{'.$_.'})' } @lens;\nmy $re = qr/$patt/;\n\nmy @parts = grep { /./ } $string =~ /$re(.*)/g;\nsay for @parts; \n</code></pre>\n\n<p>The lengths <code>@lens</code> are computed by subtracting the successive positions, 2-1, 3-2 (etc).  I use <code>do</code> merely so that the <code>@prev</code> variable, unneeded elsewhere, doesn't \"pollute\" the rest of the code. \nThe <code>\"$prev\"</code> is quoted so that it is evaluated first, before it changes in <code>map</code>.  </p>\n\n<p>The matches returned by regex are passed through <code>grep</code> to filter out empty string(s) due to the <code>0</code> position (or whenever successive positions are the same).</p>\n\n<p>This works for position arrays of any lengths, as long as positions are consistent with a string.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1523962656, "creation_date": 1523962656, "answer_id": 49876294, "question_id": 49872082, "link": "https://stackoverflow.com/questions/49872082/how-to-substring-a-string-with-several-position-with-perl/49876294#49876294", "title": "How to substring a string with several position with Perl?", "body": "<p>Here's a solution that starts by calculating the <em>forward differences</em> in the list of positions. The length of the string is first appended to the end of the list of it doesn't already span the full string</p>\n\n<p>The differences are then used to build an <code>unpack</code> format string, which is used to build the required sequence of substrings.</p>\n\n<p>I have written the functionality as a <code>do</code> block, which would be simple to convert to a subroutine if desired.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $string     = 'AACCAAGTAA';\nmy @cut_places = ( 0, 4, 8 );\n\nmy @parts = do {\n\n    my @places = @cut_places;\n    my $len    = length $string;\n    push @places, $len unless $places[-1] &gt;= $len;\n\n    my @w    = map { $places[$_]-$places[$_-1] } 1 .. $#places;\n    my $patt = join ' ', map { \"A$_\" } @w;\n\n    unpack $patt, $string;\n};\n\nsay \"@parts\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>AACC AAGT AA\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9657089, "user_type": "registered", "profile_image": "https://graph.facebook.com/1637368176313030/picture?type=large", "display_name": "Ernesta Petraityt\u0117", "link": "https://stackoverflow.com/users/9657089/ernesta-petraityt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1523984352, "creation_date": 1523949623, "last_edit_date": 1523949791, "question_id": 49872082, "link": "https://stackoverflow.com/questions/49872082/how-to-substring-a-string-with-several-position-with-perl", "title": "How to substring a string with several position with Perl?", "body": "<p>I have several places where I want to cut my string in several parts.<br>\nFor example:  </p>\n\n<pre><code>$string= \"AACCAAGTAA\";\n@cut_places= {0,4, 8 };\n</code></pre>\n\n<p>My <code>$string</code> should look like this: <code>AACC AAGT AA;</code><br>\nHow can I do that?</p>\n"}, {"tags": ["perl", "replace", "find"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1523944205, "post_id": 49870702, "comment_id": 86756688, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1523957254, "post_id": 49870702, "comment_id": 86764143, "body": "Don&#39;t give up. Please try to solve first. Error says <code>No such file or directory at find.pl line 85</code>, means its unable to open that file for writing (refer to line 85). It would have created file by itself as its opened in write mode, but if you are writing file in a directory, you have to create that directory first."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523957342, "post_id": 49870702, "comment_id": 86764202, "body": "Your first error appears at line 74. But if I count lines from the top, line 74 is just the comment:  <code>#$temp[$j] = &quot;&quot;;</code> . What is exactly line 74 in your code?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523957956, "post_id": 49870702, "comment_id": 86764698, "body": "Also provide a small sample of the XML file"}, {"owner": {"reputation": 81, "user_id": 9080224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748db98d32a598d06c4f795505a11d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9080224/ali"}, "edited": false, "score": 0, "creation_date": 1524014085, "post_id": 49870702, "comment_id": 86795332, "body": "H&#229;kon &amp; Kamal, thanks for reply the problem is solved. The issue was with $DIR = &#39;/Users/moody/Desktop/chinese/&#39;;"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 9080224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748db98d32a598d06c4f795505a11d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9080224/ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1524014824, "creation_date": 1524014824, "answer_id": 49889747, "question_id": 49870702, "link": "https://stackoverflow.com/questions/49870702/find-and-replace-multiple-texts-from-file-a-in-file-b/49889747#49889747", "title": "Find and Replace multiple texts from file a in file b", "body": "<p>The issue was with $DIR = '/Users/moody/Desktop/chinese/';\nIt had to be changed to $DIR =~ s/$FILENAME//g;</p>\n"}], "owner": {"reputation": 81, "user_id": 9080224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748db98d32a598d06c4f795505a11d1d?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9080224/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1524014824, "creation_date": 1523943945, "last_edit_date": 1523944074, "question_id": 49870702, "link": "https://stackoverflow.com/questions/49870702/find-and-replace-multiple-texts-from-file-a-in-file-b", "title": "Find and Replace multiple texts from file a in file b", "body": "<p>I have a csv file which has on column A (chinese phrases) and on column B (their english equivalents).</p>\n\n<p>On another .xml file I have large amounts of chinese texts. I want to make the script to search from csv file and if found replace the terms on xml file. </p>\n\n<p>The closest that I got to my aim is this code.</p>\n\n<pre><code>use Cwd;\nuse File::Basename;\nuse File::Copy;\nuse strict;\nuse warnings;\n\n\nmy $DIR = $0;\nmy $filename = basename($0);\n$DIR = '/Users/moody/Desktop/chinese/';\n#my $tablecounter = 0;\nmy @GLOSSARY;\nmy $glossaryFile = 'Chinese.csv';\nmy $glossaryCount = 1;\nmy $RAWFILE = \"Chinese.xml\";\nmy @MODDEDFILES = ('Chinese-modded.html');\n\nBuildGlossary();\n\nmy $FILETEXT = \"\";\nmy @MODDED_FILETEXT = ('','','','','','','','','');\nReadRaw($RAWFILE);\n\nmy $k = 1;\nwhile ($k &lt; $glossaryCount) {\n  my $search = $GLOSSARY[$k][0];\n  my $replace = $GLOSSARY[$k][1];\n  $FILETEXT =~ s/$search/$replace/g;\n  $k += 1;\n}\n$FILETEXT =~ s/&lt;p&gt;&lt;\\/p&gt;/&lt;\\/br&gt;/g;\n\nPrintText($MODDEDFILES[0]);\nSplitText();\n$k = 1;\nwhile ($k &lt; 3) {\n  PrintTextModded($MODDEDFILES[$k], $k);\n  $k += 1;\n}\n\nexit;\n\n\n\nsub PrintText {\n  my $filename = $_[0];\n  open(my $fh, '&gt;:encoding(UTF-8)', $filename)\n    or die \"Could not open file '$filename' $!\";\n  print $fh \"&lt;html&gt;&lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=utf-8\\\" /&gt;&lt;head&gt;&lt;style&gt;body {background-color: #bfbfbf; margin-right: 20%; margin-left: 20%;} p {margin: 0px; text-indent: 1.5em; word-wrap: break-word;} h3 {margin: 0px; text-align: center;} hr {border-color:black;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;\\n\\n\";\n  print $fh $FILETEXT;\n  print $fh \"&lt;/body&gt;&lt;/html&gt;\\n\";\n  close $fh;\n}\n\nsub SplitText {\n  my @temp = split(/(&lt;p&gt;------------------------------------&lt;\\/p&gt;)/, $FILETEXT);\n  shift @temp;\n  my $tempSize = @temp;\n  for (my $i=1; $i &lt;= $tempSize; $i+=4) {\n    $temp[$i] =~ s/&lt;p&gt;/&lt;h3&gt;/g;\n    $temp[$i] =~ s/&lt;\\/p&gt;/&lt;\\/h3&gt;/g;\n  }\n  for (my $i=0; $i &lt;= $tempSize; $i+=2) {\n    $temp[$i] = \"&lt;hr noshade&gt;\\n\";\n  }\n\n  my @volumes = ([0,111],[112,224]);\n  for (my $k=0; $k &lt; 2; $k++) {\n    my $temptext = \"\";\n    my $i = int($volumes[$k][0]);\n    my $u = $volumes[$k][1];\n    for (my $j=$i; $j &lt;= $u; $j++) {\n      $temptext = $temptext.$temp[$j];\n      #$temp[$j] = \"\";\n    }\n    $MODDED_FILETEXT[$k] = $temptext;\n  }\n}\n\nsub PrintTextModded {\n  my $filename = $_[0];\n  my $num = $_[1];\n  open(my $fh, '&gt;:encoding(UTF-8)', $filename)\n    or die \"Could not open file '$filename' $!\";\n  print $fh \"&lt;html&gt;&lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=utf-8\\\" /&gt;&lt;head&gt;&lt;style&gt;body {background-color: #bfbfbf; margin-right: 20%; margin-left: 20%;} p {margin: 0px; text-indent: 1.5em; word-wrap: break-word;} h3 {margin: 0px; text-align: center;} hr {border-color:black;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;\\n\\n\";\n\n  print $fh $MODDED_FILETEXT[$num-1];\n  print $fh \"&lt;/body&gt;&lt;/html&gt;\\n\";\n  close $fh;\n}\n\n\nsub ReadRaw {\n  my $filename = $_[0];\n  open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n    or die \"Could not open file '$filename' $!\";\n  $FILETEXT = \"\";\n  while (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    $FILETEXT = $FILETEXT.\"&lt;p&gt;\".$row.\"&lt;/p&gt;\\n\";\n  }\n  close $fh;\n}\n\nsub BuildGlossary {\n  open(my $fh, '&lt;:encoding(UTF-8)', $glossaryFile)\n    or die \"Could not open file '$glossaryFile' $!\";\n  my $num = 1;\n  while (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    my @temp = split \",\" , $row;\n    $GLOSSARY[$num][0] = $temp[0];\n    $GLOSSARY[$num][1] = $temp[1];\n    $num += 1;\n    $glossaryCount += 1;\n  }\n  close $fh;\n}\n</code></pre>\n\n<p>However, the problem is that it still doesn't work. The problems that I face at the moment are:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Use of uninitialized value in concatenation (.) or string at find.pl line 74.\nUse of uninitialized value $filename in open at find.pl line 85.\nUse of uninitialized value $filename in concatenation (.) or string at find.pl line 85.\nCould not open file '' No such file or directory at find.pl line 85.\n</code></pre>\n\n<p>Is there anyone who could help me out?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 312, "user_id": 3814817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2be9806badbefc0091d6c94e90bd5b89?s=128&d=identicon&r=PG&f=1", "display_name": "Ancora Imparo", "link": "https://stackoverflow.com/users/3814817/ancora-imparo"}, "edited": false, "score": 0, "creation_date": 1523928664, "post_id": 49868152, "comment_id": 86752472, "body": "Which version of Perl running under what OS environment?"}], "answers": [{"comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523948271, "post_id": 49870823, "comment_id": 86758603, "body": "I feel this this does not solve the OP&#39;s issue. <code>perl -ne &#39;print if &#47;\\s+\\n?$&#47;&#39; example</code> gives the same result as the original regex."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 1, "creation_date": 1523951756, "post_id": 49870823, "comment_id": 86760563, "body": "@wp78de: OP has issue because he has <code>\\n</code> character at the end of second line. And it seems it is a <code>grep</code> bug, because second line is not showed. Do you notice that <code>-P</code> option is <code>highly experimental</code>?"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1523981907, "post_id": 49870823, "comment_id": 86781870, "body": "Nice catch. I wish the OP gave clearer direction whether it is about the unexpected results or solving the problem with the match."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1523986095, "post_id": 49870823, "comment_id": 86784242, "body": "I did notice the &#39;highly experimental&#39; but still couldn&#39;t figure out how the perl result was correct.  I think the key is that <code>$</code> matches both before AND after the \\n (because that&#39;s the end of the string)"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1523987064, "post_id": 49870823, "comment_id": 86784795, "body": "I accepted this answer because the quote from <code>perlretut</code> answered my question, but the proposed regex <code>\\s+\\n?$</code> is incorrect and still returns every line.  <code>[\\t ]+$</code> works."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1523987363, "post_id": 49870823, "comment_id": 86784979, "body": "Bonus points if anyone can explain to me why <code>$</code> matches at end of string AND at <code>\\n</code> before end of string?  Does this make for more intuitive behavior in some situations?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1523987474, "post_id": 49870823, "comment_id": 86785048, "body": "Also I just noticed <code>-l</code> caused expected behavior.  I assume this is because perl abstracts line-endings away at this point and it therefore is missing from the scanned string."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 2, "creation_date": 1524032437, "post_id": 49870823, "comment_id": 86800472, "body": "@zzxyz: Imagine next regex: <code>&quot;abcd\\nfgh&quot; =~ &#47;(.*)$&#47;gm</code>. Here <code>$</code>  match after <code>d</code> because <code>\\n</code> mark the end of string. Also it match after <code>h</code> because it is physical end of string/text. Another example: <code>abcd\\nfgh\\n</code>. Here three strings: <code>abcd</code>, <code>fgh</code> and empty string ``. Here <code>$</code> match  before <code>\\n</code> after <code>d</code>, before <code>\\n</code> after <code>h</code>, before physical end of line, by coincidence, after <code>\\n</code> because of empty line. To see what had happened step by step run <code>perl -Mre=debug -ne &#39;print if &#47;\\s+$&#47;&#39; example</code>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1524072052, "post_id": 49870823, "comment_id": 86826894, "body": "@EugenKonkov - I didn&#39;t know about <code>re=debug</code>.  That&#39;s nice."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1524120867, "post_id": 49870823, "comment_id": 86844562, "body": "@zzxyz: In perl there is many interesting things from the box"}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1524032783, "last_edit_date": 1524032783, "creation_date": 1523944481, "answer_id": 49870823, "question_id": 49868152, "link": "https://stackoverflow.com/questions/49868152/line-anchor-behavior-with-perl-regex/49870823#49870823", "title": "line anchor behavior with perl regex", "body": "<p>You see your current behavior because in <code>example</code> file the second line has <code>\\n</code> character at the end. <code>\\n</code> is the space which matched by <code>\\s</code></p>\n\n<hr>\n\n<p><a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perlretut</code></a></p>\n\n<blockquote>\n  <p>no modifiers: Default behavior. ... '$' matches only at the end or before a newline at the end.</p>\n</blockquote>\n\n<p>At your regex <code>\\s matches a whitespace character, the set [\\ \\t\\v\\r\\n\\f]</code>. In other words it matches the spaces and <code>\\n</code> character. Then <code>$</code> matches the end of line (no characters, just the position itself). Like <code>word anchor \\b</code> matches word boundary, and <code>^</code> matches the beginning of the line and not the first character</p>\n\n<p>You could rewrite your regex like this:</p>\n\n<pre><code>/[\\t ]+$/\n</code></pre>\n\n<hr>\n\n<p>The content of <code>example</code> would look like this if second line didn't end with a <code>\\n</code> character:</p>\n\n<pre><code>\u00a3 cat example\nI have space after me\nI do not\u00a3\n</code></pre>\n\n<p>NOTICE that shell prompt <code>\u00a3</code> is not on next line</p>\n\n<hr>\n\n<p>The results are different because <code>grep</code> abstracts out line endings like Perl's <code>-l</code> flag. (<code>grep -P '\\n'</code> will return no results on a text file where <code>grep -Pz '\\n'</code> will.)</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1523986019, "post_id": 49871373, "comment_id": 86784204, "body": "And sorry, my question should&#39;ve made it clear I found a workaround and was just confused by the behavior.  I ended up using <code>[ \\t]</code> instead of \\s"}], "tags": [], "owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "is_accepted": false, "score": 2, "last_activity_date": 1523946948, "creation_date": 1523946948, "answer_id": 49871373, "question_id": 49868152, "link": "https://stackoverflow.com/questions/49868152/line-anchor-behavior-with-perl-regex/49871373#49871373", "title": "line anchor behavior with perl regex", "body": "<p>Your problems stem from the <code>-n</code> option and the use of <code>\\s</code>. The <code>-n</code> flag feeds the input to Perl line by line into <code>$_</code>, then it calls the <code>print if match</code> statement. </p>\n\n<p>In your match you use the <code>$</code> anchor to match the end of the line. The anchor is purely positional and does not consume the newline or any other character.</p>\n\n<p>Check it yourself <a href=\"https://regex101.com/r/PJMuvO/1\" rel=\"nofollow noreferrer\">here</a> with <code>\\s+</code>: Whether your add a <code>$</code> or not, the regex matches the same number of characters.<br>\nThis is because <code>\\s</code> is equal to <code>[\\r\\n\\t\\f\\v ]</code> and matches any whitespace character and you have added the <code>+</code> quantifier. So, it matches between one and unlimited times, as many times as possible (greedy).</p>\n\n<p>If you searched just for trailing space characters instead you are good: <code>[ ]+$</code> (here escaped with a group):</p>\n\n<pre><code>\u00a3 perl -ne 'print if /[ ]+$/' example\n</code></pre>\n\n<p>That way it does not match the <code>\\n</code> like <code>\\s</code> does. Try it yourself <a href=\"https://regex101.com/r/PJMuvO/2\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><strong>Bonus</strong>:</p>\n\n<p>Here are some common Perl one-liners to trim spaces:</p>\n\n<pre><code># Strip leading whitespace (spaces, tabs) from the beginning of each line\nperl -ple 's/^[ \\t]+//'\nperl -ple 's/^\\s+//'\n\n# Strip trailing whitespace (space, tabs) from the end of each line\nperl -ple 's/[ \\t]+$//'\n\n# Strip whitespace from the beginning and end of each line\nperl -ple 's/^[ \\t]+|[ \\t]+$//g'\n</code></pre>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 49870823, "answer_count": 2, "score": 1, "last_activity_date": 1524032783, "creation_date": 1523925715, "last_edit_date": 1523929093, "question_id": 49868152, "link": "https://stackoverflow.com/questions/49868152/line-anchor-behavior-with-perl-regex", "title": "line anchor behavior with perl regex", "body": "<p>I recently wrote a little Perl script to trim whitespace from the end of lines and ran into unexpected behavior.  I decided that Perl must include line-end characters when breaking up lines, so tested that theory and got even more unexpected behavior.  <code>I do not</code> should either match <code>\\s+$</code> or <code>t$</code>...Not both.  Very confused.  Can anyone enlighten me?</p>\n\n<pre><code>\u00a3 cat example\nI have space after me\nI do not\n\u00a3 perl -ne 'print if /\\s+$/' example\nI have a space after me\nI do not\n\u00a3 perl -ne 'print if /t$/' example\nI do not\n\u00a3\n</code></pre>\n\n<p>PCRE tester gives expected results.  I've also tried the <code>/m</code> suffix with no change in behavior.</p>\n\n<p>edit.  for completeness:</p>\n\n<pre><code>\u00a3 perl -ne 'print if /e$/' example\n\u00a3\n</code></pre>\n\n<p>Expected behavior from <code>perl -ne 'print if...'</code> was the same as <code>grep -P</code>:</p>\n\n<pre><code>\u00a3 grep -P '\\s+$' example\nI have a space after me\n\u00a3\n</code></pre>\n\n<p>Can repro under Ubuntu 16.04 perl v5.22.1 (both 60 and 68 patch version) and MINGW perl v5.26.1.</p>\n"}, {"tags": ["perl", "date", "unix", "solaris"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1523912532, "post_id": 49865795, "comment_id": 86747744, "body": "<a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">metacpan.org/pod/local::lib</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1523913336, "post_id": 49865795, "comment_id": 86748130, "body": "<code>Time::Piece</code> is a core Perl module"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1523914444, "post_id": 49865795, "comment_id": 86748604, "body": "\ud83d\udc4d ...yup, since version 5.10"}, {"owner": {"reputation": 27410, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1523957092, "post_id": 49865795, "comment_id": 86764010, "body": "<i>Our Solaris 10 system does not have the -d option for date, not even under /usr/xpg4/bin/date.</i> That&#39;s because the <code>-d</code> option is a non-standard GNU extension to the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/date.html\" rel=\"nofollow noreferrer\">POSIX standard <code>date</code> utility</a>."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1525989825, "post_id": 49865795, "comment_id": 87580808, "body": "@JimR, please show some sample input and output: Do you mean &quot;today minus n days&quot;? Or some arbitrary date?"}, {"owner": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1526670709, "post_id": 49865795, "comment_id": 87851312, "body": "@glennjackman For example, date -d &quot;+2 days&quot;  Would return &quot;Sun  May 20 15:12:17 EDT 2018&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "edited": false, "score": 0, "creation_date": 1523982466, "post_id": 49866538, "comment_id": 86782213, "body": "Yep, these all work well.  What is the purpose of the -- in you 2nd example?  Sadly, I am not able to install anything due to our regulated environment."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "edited": false, "score": 1, "creation_date": 1524052868, "post_id": 49866538, "comment_id": 86813807, "body": "Try without <code>--</code> and see what happens! <code>--</code> means end of options (at least in bash, and probably most if not all other unix/gnu/linux shells as well). Without that the <code>-7</code> days would be seen as an command line option to perl itself, not a negative integer argument for my little one-liner program."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1523914190, "creation_date": 1523914190, "answer_id": 49866538, "question_id": 49865795, "link": "https://stackoverflow.com/questions/49865795/unix-time-n-days-on-solaris-without-date-d-option/49866538#49866538", "title": "Unix time +n days on Solaris without date -d option", "body": "<p>Not exactly sure what you want.</p>\n\n<p>Some examples that might help:</p>\n\n<pre><code>perl -e'$days=shift; print \"\".localtime(time + $days*24*3600)' 3      #in 3 days\nThu Apr 19 23:13:53 2018\n\nperl -e'$days=shift; print \"\".localtime(time + $days*24*3600)' -- -7  #a week ago\nMon Apr  9 23:14:16 2018\n\nchmod +x date_formatted.pl\ncat date_formatted.pl\n#!/usr/bin/perl\nfor(@ARGV){\n  my @lt=localtime( time() + $_*24*3600 );\n  printf \"%04d-%02d-%02dT%02d:%02d:%02d\\n\",\n    $lt[5]+1900,\n    $lt[4]+1,\n    @lt[3,2,1,0];\n}\n\n./date_formatted.pl -2\n2018-04-14T23:25:21\n\n./date_formatted.pl 3\n2018-04-19T23:25:21\n\n./date_formatted.pl 0.5\n2018-04-17T11:25:21\n\n./date_formatted.pl -1 0 1\n2018-04-15T23:25:21\n2018-04-16T23:25:21\n2018-04-17T23:25:21\n</code></pre>\n\n<p>If you are allowed to, install <code>Date::Manip</code> and have a look at <a href=\"http://search.cpan.org/~sbeck/Date-Manip-6.70/lib/Date/Manip/Examples.pod#TO_ADD_AN_AMOUNT_OF_TIME_TO_A_DATE\" rel=\"nofollow noreferrer\">http://search.cpan.org/~sbeck/Date-Manip-6.70/lib/Date/Manip/Examples.pod#TO_ADD_AN_AMOUNT_OF_TIME_TO_A_DATE</a></p>\n"}, {"comments": [{"owner": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "edited": false, "score": 0, "creation_date": 1523981231, "post_id": 49867274, "comment_id": 86781477, "body": "No joy.  We seem to have perl 5.8.4.  perl -MTime::Piece -E &#39;say((gmtime()+24*60*60)-&gt;ymd)&#39; Unrecognized switch: -E  (-h will show valid options)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "edited": false, "score": 1, "creation_date": 1523984031, "post_id": 49867274, "comment_id": 86783112, "body": "@JimR: That&#39;s ridiculous. That version is fourteen years old! There&#39;s a slim  chance that you have <code>Time::Piece</code>, so try <code>perl -MTime::Piece -e &#39;print((gmtime()+24*60*60)-&gt;ymd, &quot;\\n&quot;)&#39;</code> Otherwise you&#39;ll have to look at installing a private copy. How can they expect you to work with a &quot;heavily-regulated&quot; out-of-date system?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1525990061, "post_id": 49867274, "comment_id": 87580887, "body": "@Borodin, &quot;enterprise&quot;"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "edited": false, "score": 0, "creation_date": 1526673323, "post_id": 49867274, "comment_id": 87852321, "body": "@JimR, you should be able to use <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a> to install more a modern perl release into your home directory."}, {"owner": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1526922716, "post_id": 49867274, "comment_id": 87920388, "body": "@glennjackman As I stated in my original post, &quot;Our system is heavily regulated, so I cannot expect to install any utilities or libraries that are not already here&quot;"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523918393, "creation_date": 1523918393, "answer_id": 49867274, "question_id": 49865795, "link": "https://stackoverflow.com/questions/49865795/unix-time-n-days-on-solaris-without-date-d-option/49867274#49867274", "title": "Unix time +n days on Solaris without date -d option", "body": "<p>Perl's <code>Time::Piece</code> module has been part of the core distribution since perl v5.10</p>\n\n<p>You don't say what format you want the date in, but this will generate the date one day ahead in the format <code>YYYY-MM-DD</code></p>\n\n<pre><code>perl -MTime::Piece -E 'say((gmtime()+24*60*60)-&gt;ymd)'\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>2018-04-17\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "is_accepted": false, "score": 2, "last_activity_date": 1523942041, "creation_date": 1523942041, "answer_id": 49870352, "question_id": 49865795, "link": "https://stackoverflow.com/questions/49865795/unix-time-n-days-on-solaris-without-date-d-option/49870352#49870352", "title": "Unix time +n days on Solaris without date -d option", "body": "<pre><code>perl -e 'use strict;use warnings;use POSIX; my $date_folder_to_be_deleted=strftime \"%Y-%m-%d\",localtime(time() - 24*60*60); print \"$date_folder_to_be_deleted\"'\n</code></pre>\n\n<p>Hope this works if yes you can use for loop to get different days by multiplying loop variable with 24*60*60*n </p>\n"}], "owner": {"reputation": 453, "user_id": 1007557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2d4200a0aa3ec50456cfb2dbb8d5a9ae?s=128&d=identicon&r=PG", "display_name": "JimR", "link": "https://stackoverflow.com/users/1007557/jimr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 49866538, "answer_count": 3, "score": 0, "last_activity_date": 1523942041, "creation_date": 1523910866, "question_id": 49865795, "link": "https://stackoverflow.com/questions/49865795/unix-time-n-days-on-solaris-without-date-d-option", "title": "Unix time +n days on Solaris without date -d option", "body": "<p>I am looking for a way to return date plus (or minus) n days.  Our Solaris 10 system does not have the -d option for date, not even under /usr/xpg4/bin/date.</p>\n\n<p>I considered perl, found a couple of examples on another thread, but system does not include</p>\n\n<pre><code>use Time::ParseDate;\nuse Time::CTime;\n</code></pre>\n\n<p>nor</p>\n\n<pre><code>use DateTime;\nuse DateTime::Format::Strptime;\n</code></pre>\n\n<p>Our system is heavily regulated, so I cannot expect to install any utilities or libraries that are not already here.</p>\n\n<p>Any other suggestions are welcome.</p>\n"}, {"tags": ["apache", "perl"], "comments": [{"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1523987796, "post_id": 49859764, "comment_id": 86785230, "body": "Would the down voter please explain the down vote? Seems like a good question to me."}], "answers": [{"comments": [{"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1523987696, "post_id": 49860706, "comment_id": 86785155, "body": "I super appreciate your answer! And it has a lot of points that I think are pertinent, but in the end, the code still takes 6 seconds. I pasted your code as is into my counter, called the subroutine in place of my code to create the montage, fixed the one line that didn&#39;t pass the image args correctly, and timed at 6 seconds."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1524010695, "post_id": 49860706, "comment_id": 86794612, "body": "You are welcome. When I get a chance, I&#39;ll try to replicate what you are seeing on Linux, and update my answer if I figure out anything."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1523987587, "last_edit_date": 1523987587, "creation_date": 1523891528, "answer_id": 49860706, "question_id": 49859764, "link": "https://stackoverflow.com/questions/49859764/why-does-perl-execute-a-command-take-longer-than-running-the-command-alone/49860706#49860706", "title": "Why does perl execute a command take longer than running the command alone?", "body": "<p>You are using <code>print &lt;GRFX&gt;;</code> to print the output, reading all the lines of output from the piped shell command.</p>\n\n<p><strong>LINES</strong> is the operative word here. Presumably, the trailing sequence of bytes does not end in a newline, and therefore Perl is waiting around for it. Eventually, it times out.</p>\n\n<p>You can set <code>local $/ = 4096</code> to read 4096 byte chunks at a time. Then, output using <code>print while &lt;GRFX&gt;</code>.</p>\n\n<p>It would be good form to also <a href=\"https://perldoc.perl.org/\" rel=\"nofollow noreferrer\"><code>binmode</code></a> both <code>GRFX</code> and <code>STDOUT</code> so you don't get bit by <a href=\"https://www.nu42.com/2014/12/when-bits-dont-stick.html\" rel=\"nofollow noreferrer\">problems like this</a>. See also my <a href=\"https://www.nu42.com/2012/05/file-download-cgi-script-in-perl.html\" rel=\"nofollow noreferrer\">blog post</a> on a <a href=\"https://stackoverflow.com/q/10563275/100754\">related question</a>.</p>\n\n<p>I would be tempted to re-write your code like this (untested):</p>\n\n<pre><code>sub output_image {\n    my $num_digits = shift;\n    my $filelist = shift;\n\n    print LOG \"starting montage\\n\";\n\n    my @cmd = (\n        montage =&gt; qw(\n        -background black\n        -geometry +0+0\n        -mode Unframe\n        -tile),\n        \"${num_digits}x1\",\n        split(/ /,$filelist),\n        'gif:-'\n    );\n\n    open my $GRFX, '-|', @cmd\n        or die \"Failed to open pipe: $!\";\n\n    {\n        local $/ = 4096;\n        binmode $GRFX;\n        binmode STDOUT;\n        print while &lt;$GRFX&gt;;\n    }\n\n    close $GRFX\n        or die \"Failed to close pipe: $!\";\n\n    print LOG \"finish montage\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1523988186, "creation_date": 1523888837, "last_edit_date": 1523988186, "question_id": 49859764, "link": "https://stackoverflow.com/questions/49859764/why-does-perl-execute-a-command-take-longer-than-running-the-command-alone", "title": "Why does perl execute a command take longer than running the command alone?", "body": "<p>When I run the command</p>\n\n<pre><code>montage -background black -geometry +0+0 -mode Unframe -tile ${num_digits}x1 $filelist gif:- &gt; ~/temp/count.gif\n</code></pre>\n\n<p>It takes 0.1 seconds to execute (I used <code>time montage...</code>).</p>\n\n<p>When I put that command in my perl cgi script</p>\n\n<pre><code>print LOG \"starting montage\\n\";\nopen(GRFX,\n    \"montage -background black -geometry +0+0 -mode Unframe -tile ${num_digits}x1 $filelist gif:- |\"\n);\nprint LOG \"finish montage\\n\";\nprint &lt;GRFX&gt;;\nprint LOG \"finish output\\n\";\nclose(GRFX);\n</code></pre>\n\n<p>The time between \"finish montage\" and \"finish output\" is 6 seconds!!</p>\n\n<p>If I run the cgi script from the command line it takes 0.1 seconds. But from within Apache it takes the 6 seconds, even when accessed with a browser on the same computer as Apache (so it is not the Internet slowing things down, also, all other pages load fast regardless of whether the browser is on the same computer).</p>\n\n<p>The resulting gif file generated by montage is 1.7k.</p>\n\n<p>Any ideas why this is so slow when run within Apache?</p>\n\n<p>The only header output is <code>print \"Content-type: image/gif\\n\\n\";</code></p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": true, "score": 4, "last_activity_date": 1523888236, "creation_date": 1523888236, "answer_id": 49859537, "question_id": 49859343, "link": "https://stackoverflow.com/questions/49859343/perl-use-of-unintialized-value-in-concatenation-or-at-string-error/49859537#49859537", "title": "perl - use of unintialized value in concatenation (.) or at string error", "body": "<blockquote>\n  <p>You can refer <code>perldoc -f split</code></p>\n</blockquote>\n\n<pre><code>my $test = \"1234.test.csv\"; #I don't know actual input\n\nmy @array = split/\\./, $test; #split /PATTERN/,EXPR,LIMIT\n\nprint $array[0]; #Prints the first element `0` value `1234`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 10, "last_activity_date": 1523889036, "last_edit_date": 1523889036, "creation_date": 1523888549, "answer_id": 49859646, "question_id": 49859343, "link": "https://stackoverflow.com/questions/49859343/perl-use-of-unintialized-value-in-concatenation-or-at-string-error/49859646#49859646", "title": "perl - use of unintialized value in concatenation (.) or at string error", "body": "<p>After fixing your code by adding quotes</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $test = '1234.test.csv';\n\nmy @array = split '.', $test;\nprint $array[0];\n</code></pre>\n\n<p>I'm getting the same warning (yes, it's not an error).</p>\n\n<p>The reason is that the first argument to <a href=\"http://p3rl.org/split\" rel=\"noreferrer\">split</a> is a regular expression, not a string. If you provide a string, it's converted to a regex. <code>.</code> in a regex matches any character, so the string gets split into empty spaces between all the characters. Trailing empty fields are stripped, though, as no LIMIT argument has been provided, so the array remains empty.</p>\n\n<p>Backslash the dot to make it match literally:</p>\n\n<pre><code>my @array = split /\\./, $test;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9502310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ec99589232fb42207ad475e392522?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/9502310/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 49859537, "answer_count": 2, "score": -3, "last_activity_date": 1523889036, "creation_date": 1523887737, "last_edit_date": 1523888181, "question_id": 49859343, "link": "https://stackoverflow.com/questions/49859343/perl-use-of-unintialized-value-in-concatenation-or-at-string-error", "title": "perl - use of unintialized value in concatenation (.) or at string error", "body": "<p>Why printing an array is giving me an unitialized error in below code? <br> Could you please let me know what is the wrong here:</p>\n\n<pre><code>my $test = 1234.test.csv;\n\nmy @array = split '.', $test;\n\nprint $array[0];\n</code></pre>\n\n<p>the above print line is giving me an error.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1523873260, "post_id": 49853805, "comment_id": 86723746, "body": "I&#39;ve cleaned up the indentation of your code. You&#39;re welcome, but please consider doing it yourself next time. Good indentation is one of the most useful tools for understanding code and if you&#39;re asking a group of strangers to read and understand your code, it is only polite to make that as easy as possible for them."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1523873398, "post_id": 49853805, "comment_id": 86723827, "body": "Please show us the contents of <code>@mylogFileLines</code> when this code is executed."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 12, "last_activity_date": 1535555745, "last_edit_date": 1535555745, "creation_date": 1523871415, "answer_id": 49854076, "question_id": 49853805, "link": "https://stackoverflow.com/questions/49853805/perl-if-condition-is-not-working-as-expect/49854076#49854076", "title": "Perl - &quot;if&quot; condition is not working as expect", "body": "<p>Use the <code>eq</code> operator for string equality. <code>=~</code> interprets the right hand side as a regular expression, where <code>+</code> has a special meaning, so</p>\n\n<pre><code>'a+b' eq 'a+b'  # true\n'a+b' =~ /a+b/  # false, `+` is not matched\n</code></pre>\n\n<p>To interpret <code>+</code> literally in a regex, you need to escape it:</p>\n\n<pre><code>'a+b' =~ /a\\+b/  # true\n</code></pre>\n\n<p>You can use the <a href=\"http://p3rl.org/quotemeta\" rel=\"nofollow noreferrer\">quotemeta</a> function to auto-escape all non-word characters.</p>\n"}], "owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535555745, "creation_date": 1523870607, "last_edit_date": 1523873149, "question_id": 49853805, "link": "https://stackoverflow.com/questions/49853805/perl-if-condition-is-not-working-as-expect", "title": "Perl - &quot;if&quot; condition is not working as expect", "body": "<p>i want to compare two strings and print \"yes\" if it matches. when i print string values are same. But script prints \"No\" matching.</p>\n\n<p>Perl script:</p>\n\n<pre><code>foreach my $lines(@mylogFileLines)\n{\n    if ($lines =~ m/^*.ERROR/i)\n    {\n\n        my @errorline = split ('/',$lines);\n        my @getline = split ('  ',$errorline[4]);\n        my @vresp_id = $resp_id;\n        @mygetline = $getline[0];\n        foreach my $resp (@vresp_id)\n        {\n\n            print \"$resp --- $getline[0]\\n\";\n            if ($resp =~ $getline[0])\n            {\n                $remarks = \"Error\";\n                print \"yesss-\\n\";\n            }\n            else\n            {\n                print \"no\\n\";\n                $remarks = \"-\";\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>Command line output:</p>\n\n<pre><code>dom_RESP_2018-03-02T14-26-29-029+10-00.xml --- dom_RESP_2018-03-02T14-26-29-029+10-00.xml\nno\ntesting_RESP_2018-03-02T14-26-29-029+10-00.xml --- dom_RESP_2018-03-02T14-26-29-\n029+10-00.xml\n</code></pre>\n"}, {"tags": ["perl", "file", "csv", "seek", "fileparsing"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1523869370, "post_id": 49852811, "comment_id": 86721128, "body": "What is the output supposed to look like from the input you&#39;ve provided?"}, {"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "reply_to_user": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1523870016, "post_id": 49852811, "comment_id": 86721503, "body": "@ialarmedalien Hi, please see that I have added the output. First two lines of each syntax type are clubbed together and put at the top. Followed by the rest of the lines. In this example I have tried to do it for two line for each type, it could be any fixed number (3,4,5). I believe if the moving of lines can be done for 2 lines, doing it for 3,4 or 5 lines should be same. Please let me know if the requirement is not clear. Please ignore the space at the beginning which got added while copy/pasting. The indentation should remain same as the input."}], "answers": [{"comments": [{"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523876253, "post_id": 49854828, "comment_id": 86725587, "body": "I think your output is slightly different. As &#39;nlp&#39;  and &#39;js&#39; are also a different &#39;syntax&#39; type (although they are occurring only once, still) hence they should have been moved up after the line &#39;a,yb,c,c,ddf&#39;. Rest of the line should be written as per original sequence, they need not to be written as per the sequence of same syntax one after another. Lastly, the lines need to be moved up in the same file instead of printing them on the terminal and the first line with column names should also be there in the csv file as is."}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523877828, "post_id": 49854828, "comment_id": 86726590, "body": "I have made it on the basis of sequece in the input, say <code>perl, java, perl, python, perl, python, perl, nlp, python, python</code> then as per sequence it would be <code>perl, perl, java, perl (skip), python, python, perl, perl, python (skip), perl (skip), nlp, python, python</code> i.e. <code>perl, perl, java, python, python, perl, perl, nlp, python, python</code>. Please correct if I have misunderstood something."}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523878171, "post_id": 49854828, "comment_id": 86726791, "body": "And for writing in same file, read whole file in a array <code>@data = &lt;$fh&gt;</code>, loop over it and then open same file in write mode. I&#39;ld suggest to write in a seperate file, rather than reading whole file in an array, unless its a requirement. I&#39;ll come up with any more efficient way, if anything strikes my mind."}, {"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523878641, "post_id": 49854828, "comment_id": 86727080, "body": "well in this comment the sequence example you have given is correct, but I am not sure whether your code is generating as per that sequence. Never mind. I will see if I can do that. Yes, efficiency I need because it a huge text file so parsing the whole in array or using another file is not what I want. Thanks."}, {"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523878941, "post_id": 49854828, "comment_id": 86727291, "body": "My code is not functioning correctly ..so is the problem. I have included the expected output  which my code is not able to produce."}], "tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 2, "last_activity_date": 1523873715, "creation_date": 1523873715, "answer_id": 49854828, "question_id": 49852811, "link": "https://stackoverflow.com/questions/49852811/how-to-optimally-move-lines-with-a-specific-pattern-at-the-top-in-a-huge-file-us/49854828#49854828", "title": "How to optimally move lines with a specific pattern at the top in a huge file using Perl?", "body": "<p>I'm getting little different output than yours for the same logic. Can you please go through this output and let me know if any change is required? Approach is mentioned inline with the comments.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nmy $syntax = [];\nmy $NUM = 2;   # change number if needed\nmy $filename = 'file.txt';\nmy $data = {};  # make a hash of data\n\nopen(my $fh, '&lt;:encoding(UTF-8)', $filename)\nor die \"Could not open file '$filename' $!\";\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    next if $. == 1; # skip header row\n    my @columns = split (',', $row);\n\n    push @$syntax, $columns[3];   # make a list of all syntaxes available\n    push @{$data-&gt;{$columns[3]}}, $row;\n}\nclose $fh;\n\nmy $processed = {};\n# loop throught the syntax array and print data from hash\n# also, make a counter of the number of times that syntax is used.\n# it will help us to skip next (n-1) occurence of that syntax\nfor my $syntax (@$syntax) {\n    if (!$processed-&gt;{$syntax}){\n        for my $s (splice @{$data-&gt;{$syntax}}, 0, $NUM) {\n            $processed-&gt;{$syntax} += 1;\n            say $s;\n        }\n    } else {\n        $processed-&gt;{$syntax} -= 1;\n    }\n}\n# print out the remaining values\nfor my $rem (values %$data){\n    say for @$rem;    \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a,b,c,perl,d\na,e,c,perl,d\na,w,c33,java,d\nwa,b,c33,java,d\na,s,c,python,d1\na,f,c,python,dd\na,n,c,php,d3\nwa,b,c33,php,d\nd,r,hhh,cpp,d0\nd,buuu,hhh,cpp,d0\nd,m,hhh,c#,d0\nwa,b,c33,c#,d\na,o,c,pdf,d3\na,yb,c,c,ddf\na,h,c,perl,dg\na,b,c,perl,dt\nd44,b,hhh,nlp,d0\na,be,c,js,d4\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,php,d\nwa,b,c33,php,d\nwa,b,c33,java,d\nwa,b,c33,java,d\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,perl,d\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523954364, "post_id": 49857030, "comment_id": 86762148, "body": "@i alarmed alien can&#39;t we do it without opening multiple files. In the same file , is it possible to move lines up and down ? If yes, please let me know or point me to something which shows how to do it. Thanks for the post."}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "reply_to_user": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 1, "creation_date": 1523966815, "post_id": 49857030, "comment_id": 86770843, "body": "It is possible, yes, but IMO much easier to create a temp file and then delete it. You can also do the whole thing in memory\u2014instead of printing to a temp file, push lines on to an array, which you print out once you&#39;ve gone through the input file and found the first occurrences of each type. There are lots of different ways to handle this task; I&#39;m not a fan of rewriting files in place as if something goes wrong, you lose your original file. Creating a new output file leaves your input file untouched if it needs to be used for something else (or if you find a bug in your code!)."}], "tags": [], "owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "is_accepted": true, "score": 2, "last_activity_date": 1523880659, "creation_date": 1523880659, "answer_id": 49857030, "question_id": 49852811, "link": "https://stackoverflow.com/questions/49852811/how-to-optimally-move-lines-with-a-specific-pattern-at-the-top-in-a-huge-file-us/49857030#49857030", "title": "How to optimally move lines with a specific pattern at the top in a huge file using Perl?", "body": "<p>I'd approach this by parsing the file to collect those first pairs of lines in a data structure and sending the other lines to a temp file. Once you've finished parsing the file, print out the pairs of lines from the data structure into your output file, and then add the temp file on to the end of the output file.</p>\n\n<p>sample code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature ':5.16';\n\nmy $infile = 'infile';\nmy $outfile = 'outfile';\nmy $tempfile = 'temp';\nmy $quantity = 2;  # or whatever\n\nopen my $in, '&lt;', $infile or die 'Could not open infile: ' . $!;\nopen my $out, '&gt;', $outfile or die 'Could not create output file: ' . $!;\nopen my $temp, '&gt;', $tempfile or die 'Could not create tempfile: ' . $!;\n\nmy $hash = {};\nmy @order;\nmy $hdr;\n\nwhile ( &lt;$in&gt; ) {\n  if ( $hdr ) {\n    my @cols = split \",\", $_;\n    my $key = $cols[3];\n\n    # have we seen this key before?\n    if ( ! $hash-&gt;{$key} ) {\n      push @order, $key;\n      $hash-&gt;{$key} = [ $_ ];\n    }\n    elsif ( scalar @{$hash-&gt;{$key}} &lt; $quantity ) {\n      push @{$hash-&gt;{$key}}, $_;\n    }\n    else {\n      print { $temp } $_;\n    }\n  }\n  else {\n    # the header line\n    print { $out } $_;\n    $hdr = $_;\n  }\n}\n\n# print the collected twofers out into the tempfile\nfor my $key ( @order ) {\n  print { $out } @{$hash-&gt;{$key}};\n}\nclose $out;\nclose $temp;\n\n# concatenate the files\nsystem join ' ', ( 'cat', $tempfile, '&gt;&gt;', $outfile );\n</code></pre>\n\n<p>If the paired lines don't have to be in the order that they appear in the source file, you can skip the <code>@order</code> stuff.</p>\n"}, {"comments": [{"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523951033, "post_id": 49857078, "comment_id": 86760144, "body": "%idx = map +($header[$_] =&gt; $_), 0 .. $#hdr , I understood what it is doing but i am more familiar with map {$hash{$_}=&gt; &#39;something&#39;} @arr kind of syntax. If you explain the map+() thing would be great. uniqstr is not available to me in List::Util, so had to do it by using a hash.  Maybe 20k is not huge, but it may go up to 2000k , so I need an optimized way. You did not show how to write to the file, should I do it with tie::file? or I can simply print those lines  in another file. But not sure about the optimization part. Lastly, thanks for the code."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1523961327, "post_id": 49857078, "comment_id": 86767032, "body": "&quot;<i>Maybe 20k is not huge, but it may go up to 2000k</i>&quot; ... Now, you are changing problem parameters. Still 2 million rows is only about 160 MB, still no where near &quot;huge&quot;. If you had 160 GB, then you are getting into largish file sizes. The trade-off between multiple passes over a file versus an array is not obvious, and you&#39;d have to measure to see which one performs better. I used <code>uniquestr</code> because it preserves the order of appearance in the data file (which seemed to be one of your criteria), one could have also utilized <code>Tie::IxHash</code>. <code>map expr, list</code> is faster than <code>map block list</code>."}, {"owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "edited": false, "score": 0, "creation_date": 1524066585, "post_id": 49857078, "comment_id": 86823691, "body": "If I use Tie::File and read the entire file in <code>@arr</code> at first , then I use <code>@arr</code> instead of <code>@lines</code>  in the line <code>my %syntax_of = map +($_ =&gt; (split &#47;,&#47;, $_)[$idx{syntax}]), @lines;</code>. In that case it splits the header and any blank line again. Since you are reading the header at first and the rest of the lines as <code>my @lines = grep &#47;\\S&#47;, &lt;DATA&gt;;</code> so it is working for you. How do I take care of this using Tie::File. Or instead of using map , I do them with loop and keep doing next when I get headers or blank lines?"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1523883305, "last_edit_date": 1523883305, "creation_date": 1523880804, "answer_id": 49857078, "question_id": 49852811, "link": "https://stackoverflow.com/questions/49852811/how-to-optimally-move-lines-with-a-specific-pattern-at-the-top-in-a-huge-file-us/49857078#49857078", "title": "How to optimally move lines with a specific pattern at the top in a huge file using Perl?", "body": "<blockquote>\n  <p>I have a huge CSV file of nearly 20k rows with below format:</p>\n</blockquote>\n\n<p>That is not huge by any stretch. The file size is probably about a megabyte.</p>\n\n<p>While I normally recommend line-by-line processing to ensure robustness with respect to file size, in this case, you know that the files you are dealing with are small. The question is whether the time you spend optimizing this thing is worth it.</p>\n\n<p>If I understand you correctly, your problem can be solved quickly (in programmer time) by wasting some memory:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse List::Util qw( uniqstr );\n\nmy $TOP = 2;\n\n(my $header = &lt;DATA&gt;) =~ s/\\s+\\z//;\nmy @header = split /,|\\s+/, $header;\nmy %idx = map +($header[$_] =&gt; $_), 0 .. $#header;\n\nmy @lines = grep /\\S/, &lt;DATA&gt;;\nmy %syntax_of = map +($_ =&gt; (split /,/, $_)[$idx{syntax}]), @lines;\n\nmy @syntaxes = uniqstr map $syntax_of{$_}, @lines;\n\nmy %lines_of;\nfor my $n (0 .. $#lines) {\n    push @{$lines_of{$syntax_of{$lines[$n]}}}, $n;\n}\n\nprint \"$header\\n\";\n\nfor my $syntax (@syntaxes) {\n    my @top = grep defined, map $lines_of{$syntax}-&gt;[$_ - 1], 1 .. $TOP;\n    print @lines[@top];\n    # normally, invoking delete on an array slice is not\n    # but it is just what we need here.\n    delete @lines[@top];\n}\n\nprint grep defined, @lines;\n\n__DATA__\nfile,tools,edit,syntax,buffers\na,b,c,perl,d\na,w,c33,java,d\na,e,c,perl,d\na,s,c,python,d1\na,n,c,php,d3\nd,r,hhh,cpp,d0\nd,m,hhh,c#,d0\na,o,c,pdf,d3\na,f,c,python,dd\na,h,c,perl,dg\na,yb,c,c,ddf\na,b,c,perl,dt\nwa,b,c33,java,d\nd,buuu,hhh,cpp,d0\nd44,b,hhh,nlp,d0\na,be,c,js,d4\nwa,b,c33,java,d\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,c#,d\nwa,b,c33,python,d\nwa,b,c33,php,d\nwa,b,c33,python,d\nwa,b,c33,php,d\nwa,b,c33,python,d\nwa,b,c33,perl,d\nwa,b,c33,php,d\nwa,b,c33,java,d\nwa,b,c33,python,d\n</code></pre>\n\n<p>PS: See also <a href=\"https://metacpan.org/pod/Tie::File\" rel=\"nofollow noreferrer\">Tie::File</a></p>\n\n<p>PPS: At first sight, there are at least six things one might be inclined to tweak here if one wanted to spend time on it.</p>\n"}], "owner": {"reputation": 680, "user_id": 6038082, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/354cfd22c3080b02a5ae540f5b5abfc2?s=128&d=identicon&r=PG&f=1", "display_name": "A.G.Progm.Enthusiast", "link": "https://stackoverflow.com/users/6038082/a-g-progm-enthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 49857030, "answer_count": 3, "score": 0, "last_activity_date": 1523883305, "creation_date": 1523867450, "last_edit_date": 1523879067, "question_id": 49852811, "link": "https://stackoverflow.com/questions/49852811/how-to-optimally-move-lines-with-a-specific-pattern-at-the-top-in-a-huge-file-us", "title": "How to optimally move lines with a specific pattern at the top in a huge file using Perl?", "body": "<p>I have a huge csv file of nearly 20k rows with below format:</p>\n\n<pre><code>file,tools,edit,syntax,buffers\na,b,c,perl,d\na,w,c33,java,d\na,e,c,perl,d\na,s,c,python,d1\na,n,c,php,d3\nd,r,hhh,cpp,d0\nd,m,hhh,c#,d0\na,o,c,pdf,d3\na,f,c,python,dd\na,h,c,perl,dg\na,yb,c,c,ddf\na,b,c,perl,dt\nwa,b,c33,java,d\nd,buuu,hhh,cpp,d0\nd44,b,hhh,nlp,d0\na,be,c,js,d4\nwa,b,c33,java,d\nwa,b,c33,python,d\nwa,b,c33,python,d\nwa,b,c33,c#,d\nwa,b,c33,python,d\nwa,b,c33,php,d\nwa,b,c33,python,d\nwa,b,c33,php,d\nwa,b,c33,python,d\nwa,b,c33,perl,d\nwa,b,c33,php,d\nwa,b,c33,java,d\nwa,b,c33,python,d\n</code></pre>\n\n<p>I need to put 2 lines of pattern with same syntax (i.e 4th column) at the top. And then the rest of the lines will be there as is. That means first two lines with syntax as 'perl', then followed by 'java' , 'python' etc that way.</p>\n\n<p>I have so far written this below code using seek and tell to make it optimized. However, it is not working as expected.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(FP, \"+&lt;mycsv.csv\");\n\nmy %hash = ();\nmy $cur_pos;    \n\n\nwhile(&lt;FP&gt;) {\n\n    my $line = $_;\n    chomp $line;\n    #print \"$line aaa\\n\";\n    if($line =~ /^file\\,tools,/) {next;}\n\n    if($line =~ /^\\w+\\,\\w+\\,\\w+,(\\w+)\\,.*$/) {\n        my $type = $1;\n        #print \"type $type\\n\";\n\n    if($hash{$type}-&gt;{count} &lt; 2 ) {\n        #print \"--- here type = $type | lastpos = \", $hash{$type}-&gt;{lastpos} , \"\\n\";\n        $cur_pos = tell(FP);\n        my $pos = tell(FP) - length($line); \n        if($hash{$type}-&gt;{lastpos} ) {\n\n            my $lastpos = $hash{$type}-&gt;{lastpos};\n            seek(FP, $lastpos, 1);\n            print FP $line;\n            seek(FP, $cur_pos, 1);\n        } \n\n        $hash{$type}-&gt;{lastpos} = $pos;\n\n\n    }\n        if(exists $hash{$type} ) {\n            $hash{$type}-&gt;{count} += 1;\n        } else {\n            $hash{$type}-&gt;{count} = 1;\n        }\n\n\n    }\n}\n\n\nclose(FP);\n</code></pre>\n\n<p>The expected output should look like below:</p>\n\n<pre><code> file,tools,edit,syntax,buffers\n    a,b,c,perl,d\n    a,e,c,perl,d\n    a,w,c33,java,d\n    wa,b,c33,java,d\n    a,s,c,python,d1\n    a,f,c,python,dd\n    a,n,c,php,d3\n    wa,b,c33,php,d\n    d,r,hhh,cpp,d0\n    d,buuu,hhh,cpp,d0\n    d,m,hhh,c#,d0\n    wa,b,c33,c#,d\n    a,o,c,pdf,d3 \n    a,yb,c,c,ddf \n    d44,b,hhh,nlp,d0\n    a,be,c,js,d4  \n    a,h,c,perl,dg   \n    a,b,c,perl,dt   \n    wa,b,c33,java,d\n    wa,b,c33,python,d\n    wa,b,c33,python,d\n    wa,b,c33,python,d\n    wa,b,c33,python,d\n    wa,b,c33,php,d\n    wa,b,c33,python,d\n    wa,b,c33,perl,d\n    wa,b,c33,php,d\n    wa,b,c33,java,d\n    wa,b,c33,python,d\n</code></pre>\n\n<p>Any help to make it work would be much appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "mailx"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1523859225, "post_id": 49850526, "comment_id": 86715751, "body": "Remove those stray <code>&amp;&amp;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1523859279, "post_id": 49850526, "comment_id": 86715775, "body": "Pay attention to the syntax highlighting. Your quotes are a mess."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1523859709, "post_id": 49850526, "comment_id": 86715937, "body": "Do you know any Perl? Or any programming language in general?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523860855, "post_id": 49850526, "comment_id": 86716452, "body": "I recommend to get rid of the more fancy conditionals provided by perl (e.g. <code>statement if ...</code> and the use of <code>&amp;&amp;</code>). Clean up to use conditionals the boring way (boring is sometimes good). <code>if (condition){...} else {...}</code>. Do that and you will either be able yourself to straighten the logic or find more ready help here."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1523866420, "creation_date": 1523866420, "answer_id": 49852502, "question_id": 49850526, "link": "https://stackoverflow.com/questions/49850526/sending-email-only-if-two-counts-dont-match-and-execute-a-separate-script-in-pe/49852502#49852502", "title": "Sending email only if two counts don&#39;t match and execute a separate script in Perl", "body": "<pre><code>use String::ShellQuote qw( shell_quote );\n\nwhile (condition) {\n    if ($current_count{$ip_port} == $normal_count) {\n        print \"$ip_port is good\";\n        next;\n    }\n\n    my $body = \"$ip_port is bad- Need $normal_count, found only $current_count{$ip_port}\\n\";\n    print($body);\n\n    my $cmd =\n       shell_quote('printf', '%s', $body) .\n       ' | ' .\n       shell_quote('mailx', '-s', 'Missing Counts', 'Frank.Robertson@Yahoo.com');\n\n    system($cmd);\n    die \"Can't spawn child: $!\\n\"                    if $? == -1;\n    die \"Child killed by signal \".( $? &amp; 0x7F ).\"\\n\" if $? &amp; 0x7F;\n    die \"Child returned error \".( $? &gt;&gt; 8 ).\"\\n\"     if $? &gt;&gt; 8;\n\n    system('/home/roberston/stats.sh');\n    die \"Can't spawn child: $!\\n\"                    if $? == -1;\n    die \"Child killed by signal \".( $? &amp; 0x7F ).\"\\n\" if $? &amp; 0x7F;\n    die \"Child returned error \".( $? &gt;&gt; 8 ).\"\\n\"     if $? &gt;&gt; 8;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523866420, "creation_date": 1523858669, "question_id": 49850526, "link": "https://stackoverflow.com/questions/49850526/sending-email-only-if-two-counts-dont-match-and-execute-a-separate-script-in-pe", "title": "Sending email only if two counts don&#39;t match and execute a separate script in Perl", "body": "<p>I am working on a script written in perl that compairs a current_count of IP address and compares it with an expected count.</p>\n\n<p>Currently if current count == normal count then print the word good... if current count does not equal normal count then print the word bad and shows the IP address and current count.</p>\n\n<p>What I'm trying to accomplish is if current count does not equal normal count then print the word bad on screen as it does now but also do two additional things.</p>\n\n<ol>\n<li>Send a mailx alert</li>\n<li>run another script called /home/robertson/stats.sh</li>\n</ol>\n\n<p>Currently it works when i print only on screen:</p>\n\n<pre><code>while ..............{\n     next if $current_count{$ip_port} == $normal_count &amp;&amp; print \"ip_port is good\";      \n     print \"$ip_port is bad- Need $normal_count, found only $current_count{$ip_port}\\n\";\n</code></pre>\n\n<p>My attempt trying to send an email alert and execute stats.sh script if count is bad:</p>\n\n<pre><code>while ..............{\n     next if $current_count{$ip_port} == $normal_count &amp;&amp; print \"ip_port is good \\n\";      \n     print \"$ip_port is bad- Need $normal_count, found only $current_count{$ip_port} \n&amp;&amp;\n my $body = \"$ip_port is bad- Need $normal_count, found only $current_count{$ip_port}\";\n    my $cmd_email = \"echo $body | \" .\n        \"mailx -s \\\"Missing Counts\" Frank.Robertson\\@Yahoo.com\";\n    system($cmd_email) == 0  or die \"Error sending email -- $!\";\n&amp;&amp;\n/home/roberston/stats.sh;\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1523877741, "creation_date": 1523877741, "answer_id": 49856062, "question_id": 49847290, "link": "https://stackoverflow.com/questions/49847290/mojolicious-parameter-validation/49856062#49856062", "title": "Mojolicious Parameter Validation", "body": "<p>Mojolicious validation uses <a href=\"http://mojolicious.org/perldoc/Mojolicious/Validator/Validation\" rel=\"noreferrer\">a fluent interface</a>, so most methods return the validation object. Objects are truthy by default, so your condition is always true.</p>\n\n<p>Instead, you can check</p>\n\n<ul>\n<li><code>-&gt;is_valid()</code> \u2013 whether validation for the current topic was sucessful, or</li>\n<li><code>-&gt;has_error()</code> \u2013 whether there were any validation errors.</li>\n</ul>\n\n<p>You introduce a new validation topic by calling <code>-&gt;required('name')</code> or <code>-&gt;optional('name')</code> on the validation object. So you could write:</p>\n\n<pre><code>$c-&gt;render(text =&gt; \"Hello from $foo.\")\n  if $v-&gt;required('y')-&gt;like(q/[A-Z]/)-&gt;is_valid;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$v-&gt;required('y')-&gt;like(q/[A-Z]/);\n$c-&gt;render(text =&gt; \"Hello from $foo.\") unless $v-&gt;has_error;\n</code></pre>\n"}], "owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 3, "accepted_answer_id": 49856062, "answer_count": 1, "score": 2, "last_activity_date": 1523877741, "creation_date": 1523830364, "question_id": 49847290, "link": "https://stackoverflow.com/questions/49847290/mojolicious-parameter-validation", "title": "Mojolicious Parameter Validation", "body": "<p>I have the following code :</p>\n\n<pre><code>get '/:foo' =&gt; sub {\n  my $c   = shift;\n  my $v = $c-&gt;validation;\n\n\n\n   my $foo = $c-&gt;param('y');\n\n  $c-&gt;render(text =&gt; \"Hello from $foo.\") if  $v-&gt;required('y')-&gt;like(q/[A-Z]/);\n};\n</code></pre>\n\n<p>and want to verify the y paremter on the http requeste i connect to the above web page using : <a href=\"http://myserver:3000?x=2&amp;y=1\" rel=\"nofollow noreferrer\">http://myserver:3000?x=2&amp;y=1</a> </p>\n\n<p>it prints  => Hello from 1.\neven there is $v->required('y')->like(q/[A-Z]/);</p>\n\n<p>what could be my problem here ?</p>\n"}, {"tags": ["perl", "dbix-class"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1523872150, "last_edit_date": 1523872150, "creation_date": 1523870414, "answer_id": 49853741, "question_id": 49845278, "link": "https://stackoverflow.com/questions/49845278/recursively-inflate-columns/49853741#49853741", "title": "recursively inflate columns", "body": "<p>Use <a href=\"http://p3rl.org/DBIx::Class::Helper::Row::ToJSON\" rel=\"nofollow noreferrer\">DBIx::Class::Helper::Row::ToJSON</a>. Calling <code>TO_JSON</code> gives you a hashref of resultclass objects, which neatly serialises recursively. See output in comments below.</p>\n\n<pre><code>use DBIx::Class::Schema::Loader qw();\nrequire DBIx::Class::Helper::Row::ToJSON;\nuse JSON::MaybeXS qw();\n\nDBIx::Class::Schema::Loader-&gt;loader_options(\n    naming =&gt; undef,\n    preserve_case =&gt; 1,\n    moniker_map =&gt; sub { shift-&gt;name },\n    col_accessor_map =&gt; sub { shift-&gt;name },\n    rel_name_map =&gt; sub {\n        my $t = shift;\n        $t-&gt;{type} eq 'belongs_to'\n            ? $t-&gt;{local_columns}[0]\n            : $t-&gt;{remote_moniker}\n    },\n);\nmy $schema = DBIx::Class::Schema::Loader-&gt;connect(\n    'DBI:Pg:', (undef) x 2, {quote_names =&gt; 1}\n);\nfor my $sourcename ($schema-&gt;sources) {\n    my $src = $schema-&gt;source($sourcename);\n    $src-&gt;result_class-&gt;load_components('Helper::Row::ToJSON');\n    for my $colname ($src-&gt;columns) {\n        $src-&gt;{_columns}{$colname}{is_serializable} = 1\n            if 'text' eq $src-&gt;column_info($colname)-&gt;{data_type};\n    }\n};\n\n# hashref of resultclass objects\nmy $h = $schema-&gt;resultset('users')-&gt;find({idUser=&gt;1})-&gt;user_has_roles_has_projects-&gt;first-&gt;TO_JSON;\n# {\n#     idProject =&gt; DBIx::Class::Schema::Loader::Result::projects  {\n#         internals: {\n#             _column_data     {\n#                 idProject   2,\n#                 path        \"/prj/bar\",\n#                 prj         \"bar\"\n#             },\n#             _in_storage      1,\n#             _result_source   DBIx::Class::ResultSource::Table\n#         }\n#     },\n#     idRole =&gt; DBIx::Class::Schema::Loader::Result::roles  {\n#         internals: {\n#             _column_data     {\n#                 idRole   2,\n#                 role     \"Developer\"\n#             },\n#             _in_storage      1,\n#             _result_source   DBIx::Class::ResultSource::Table\n#         }\n#     },\n#     idUser =&gt; DBIx::Class::Schema::Loader::Result::users  {\n#         internals: {\n#             _column_data     {\n#                 idUser   1,\n#                 name     \"Vijay\"\n#             },\n#             _in_storage      1,\n#             _result_source   DBIx::Class::ResultSource::Table\n#         }\n#     }\n# }\n\nprint JSON::MaybeXS-&gt;new(convert_blessed =&gt; 1, pretty =&gt; 1)-&gt;encode($h);\n\n# {\n#     \"idUser\" : {\n#         \"name\" : \"Vijay\",\n#         \"idUser\" : 1\n#     },\n#     \"idProject\" : {\n#         \"idProject\" : 2,\n#         \"path\" : \"/prj/bar\",\n#         \"prj\" : \"bar\"\n#     },\n#     \"idRole\" : {\n#         \"role\" : \"Developer\",\n#         \"idRole\" : 2\n#     }\n# }\n\n__END__\ncreate table \"users\" (\n    \"idUser\" bigint primary key,\n    \"name\" text not null\n);\ninsert into \"users\" (\"idUser\", \"name\") values (1, 'Vijay');\ncreate type \"e_role\" as enum ('Manager', 'Developer');\ncreate table \"roles\" (\n    \"idRole\" int primary key,\n    \"role\" e_role null\n);\ninsert into \"roles\" (\"idRole\", \"role\") values (1, 'Manager');\ninsert into \"roles\" (\"idRole\", \"role\") values (2, 'Developer');\ncreate table \"projects\" (\n    \"idProject\" int primary key,\n    \"prj\" text not null,\n    \"path\" text not null\n);\ninsert into \"projects\" (\"idProject\", \"prj\", \"path\") values (1, 'foo', '/prj/foo');\ninsert into \"projects\" (\"idProject\", \"prj\", \"path\") values (2, 'bar', '/prj/bar');\ncreate table \"user_has_roles_has_projects\" (\n    \"idUser\" int references \"users\" (\"idUser\"),\n    \"idRole\" int references \"roles\" (\"idRole\"),\n    \"idProject\" int references \"projects\" (\"idProject\")\n);\ninsert into \"user_has_roles_has_projects\" (\"idUser\", \"idRole\", \"idProject\") values (1, 2, 2);\n</code></pre>\n"}], "owner": {"reputation": 471, "user_id": 1742886, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/320ca9e6ae5feefbfa9a9f8df9f60bd7?s=128&d=identicon&r=PG", "display_name": "vijayvithal", "link": "https://stackoverflow.com/users/1742886/vijayvithal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523872150, "creation_date": 1523816181, "question_id": 49845278, "link": "https://stackoverflow.com/questions/49845278/recursively-inflate-columns", "title": "recursively inflate columns", "body": "<p>I have a many to many relationship between 3 tables User, Role and Project.\nThis results in a mapping table User_has_Roles_has_Projects\nNow In my code I can get to the mapping table by writing\n<code>@a=$s-&gt;resultset('User')-&gt;find({idUser=&gt;1})-&gt;user_has_roles_has_projects-&gt;all</code></p>\n\n<p>I would like to get something equivalent to a left join of the mapping table with the other 3 tables.\ni.e.</p>\n\n<pre><code>idUser|name\n1     |Vijay\n\nidRole|role\n1     | Manager\n2     | Developer\n\nidProject |prj|path\n1         |foo | /prj/foo\n2         | bar| /prj/bar\n</code></pre>\n\n<p>and mapping table as</p>\n\n<pre><code>idUser|idRole|idProject\n1     | 2    | 2\n</code></pre>\n\n<p>The query should give me</p>\n\n<pre><code>idUser|idRole|idProject|name|role|prj|path\n1     | 2    | 2       | Vijay|Developer|bar|/prj/bar\n</code></pre>\n\n<p>I would like to have the above as an either a simple AOH or an AOA.\nThe closest that I can come to the above is by calling get_inflate_columns on each row of the mapping table and then again calling get_inflate_columns on each values of the result. and finally merging the result in the desired format.\ni.e. something similar to </p>\n\n<pre><code>   foreach my $idx (@a){\n    my %b=$a[0]-&gt;get_inflated_columns\n        foreach my $val (keys %b){\n       @val= $b{$val}-&gt;get_columns \n       $b{$val}=\\@val\n\n    }\n  push @result,\\%b \n}\n # Post process @result to get a simple AOA or AOH\n</code></pre>\n\n<p>Is there a better way to achieve the above result?</p>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523880802, "post_id": 49845040, "comment_id": 86728454, "body": "Do you really need to represent numbers as big as 1E48? If so then your original question is very misleading, and your values in fact have nothing to do with IP addresses."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523887302, "post_id": 49845040, "comment_id": 86733219, "body": "@Borodin Well, I have to admit that the digits won&#39;t be that exaggerated :)  So I finally fully re-accepted melpomene&#39;s answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523889489, "post_id": 49845040, "comment_id": 86734845, "body": "So what is a realistic upper limit to the values? The solution is highly dependent on this limit."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523939124, "post_id": 49845040, "comment_id": 86754992, "body": "@Borodin Yours are already fully satisfied with the demand~"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523857119, "post_id": 49845365, "comment_id": 86714927, "body": "Grateful for so detailed!!! But input <code>0.0.0.256</code> will get ERROR <code>Character in &#39;C&#39; format wrapped in pack at ...</code> and WRONG output <code>0.0.0.0</code>. <b>How to deal with numbers of &quot;any&quot; length?</b>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523857579, "post_id": 49845365, "comment_id": 86715103, "body": "@ooo <code>C</code> is for octets. If you need to support characters wider than that, use <code>W</code> instead (in pack/unpack)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523858423, "post_id": 49845365, "comment_id": 86715442, "body": "@ooo That&#39;s the maximum integer value on your platform. Your original code won&#39;t work right with those values either."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523859040, "post_id": 49845365, "comment_id": 86715669, "body": "@ooo I have no idea what you&#39;re trying to tell me."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523859311, "post_id": 49845365, "comment_id": 86715789, "body": "I mean, is there a way to get around the limit of digits on my machine while still using the GRT to sort?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523859431, "post_id": 49845365, "comment_id": 86715826, "body": "@ooo Have you tried getting it to work without the GRT?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523859621, "post_id": 49845365, "comment_id": 86715900, "body": "@ooo No, it doesn&#39;t. Borodin is also converting the numbers to characters to build a string. Your code doesn&#39;t work either; it loses precision when given big numbers."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523875129, "post_id": 49845365, "comment_id": 86724889, "body": "I think your method is really nice, but can you help recover (or avoid breaking) the &quot;shape&quot; of the output data? Now compare the outputs - yours: <code>9.9.9.18446744073709551615</code> vs Borodin&#39;s: <code>9.9.9.99999999999999999999</code>. (Both are in the correct order.)"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1523817058, "last_edit_date": 1523817058, "creation_date": 1523816655, "answer_id": 49845365, "question_id": 49845040, "link": "https://stackoverflow.com/questions/49845040/sort-keys-of-hash-by-numerals-and-dots-that-like-ipv4/49845365#49845365", "title": "Sort keys of hash by numerals and dots that like IPv4", "body": "<p>The way I would solve this is by using a Guttman Rosler Transform (GRT). The GRT is a variation of the Schwartzian Transform in which the <code>sort</code> block is empty (i.e. standard lexicographic string comparison is used). This is more efficient because <code>sort</code> can then run entirely in C code without calling back into Perl code O(n*log n) times (for each comparison). In your case this is even more important because your code invokes <code>eval</code> repeatedly, which is slow.</p>\n\n<p>The tricky part of a GRT is how to construct your keys such that</p>\n\n<ol>\n<li>they compare correctly, and</li>\n<li>they allow you to extract the original data afterwards.</li>\n</ol>\n\n<p><a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"noreferrer\"><code>pack</code></a> / <a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"noreferrer\"><code>unpack</code></a> are often useful here.</p>\n\n<p>Here's how you could apply this to your problem:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @values = qw(\n    139.8.0.2\n    127.0.0.11\n    1.1.1.1.1\n    217.0.22.3\n    8.8.8.8\n    127.0.0.1\n    139.12.0.2\n);\n\nmy @sorted =\n    map join('.', unpack 'J&gt;/C'),\n    sort\n    map pack('J&gt;/C', split /\\./),\n    @values;\n\nprint \"$_\\n\" for @sorted;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>8.8.8.8\n127.0.0.1\n127.0.0.11\n139.8.0.2\n139.12.0.2\n217.0.22.3\n1.1.1.1.1\n</code></pre>\n\n<p>The idea is to take each string, split it on <code>.</code>, then pack the numbers using the format string <code>J&gt;/C</code>. This tells <code>pack</code> to pack a sequence of chars (octets really) whose codepoints are given as unsigned integers (<code>C</code>), but prefix this by a count (<code>/</code>) in UV format (<code>J</code>), big endian (<code>&gt;</code>). <code>UV</code> is the C type Perl uses internally for unsigned integers; it's usually 4 bytes (for 32-bit machines) or 8 bytes (for 64-bit machines) wide, and <code>split</code> can't produce more fields than what fits in this type.</p>\n\n<p>Thus for e.g. <code>'139.8.0.2'</code>, <code>split</code> produces <code>139, 8, 0, 2</code>, which <code>pack</code> turns into <code>\"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\\x8b\\x08\\x00\\x02\"</code>, i.e. a length value of 4 encoded as a big-endian 8-byte integer (<code>\"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x04\"</code>) followed by bytes corresponding to the dotted decimal numbers.</p>\n\n<p>When compared lexicographically, this string sorts according to your criteria:</p>\n\n<ul>\n<li>The length field is compared first (because it appears first in the string). Big-endian integers sort in ascending numeric order, so strings with fewer numeric components (i.e. fewer dots) are sorted first.</li>\n<li>For strings with identical length fields (i.e. same number of numeric components), the packed contents are compared (each numeric component has been encoded as a byte), which again results in the desired order.</li>\n</ul>\n\n<p>Finally we undo the encoding produced by <code>split</code> / <code>pack</code> by applying the inverse operations, <code>join</code> and <code>unpack</code>.</p>\n\n<hr>\n\n<p>That said, a general method to use multiple criteria with the Schwartzian transform is to just produce multiple fields from the first <code>map</code>:</p>\n\n<pre><code>my @sorted = \n    map $_-&gt;[0],\n    sort {\n        $a-&gt;[1] &lt;=&gt; $b-&gt;[1] ||\n        $a-&gt;[2] &lt;=&gt; $b-&gt;[2] ||\n        $a-&gt;[3] &lt;=&gt; $b-&gt;[3]\n    }\n    map [ $_, compute_key_1($_), compute_key_2($_), compute_key_3($_) ],\n    @values;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523839833, "post_id": 49845374, "comment_id": 86711304, "body": "Does your code intelligently judge on-demand of comparison? That is, for example, will <code>$a-&gt;[1000] &lt;=&gt; $b-&gt;[1000]</code> still be &quot;generated&quot; when it is not needed?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523844381, "post_id": 49845374, "comment_id": 86712132, "body": "@ooo there is no <code>-&gt;[1000]</code>, ever, only 0, 1, and 2. And nothing is &quot;generated&quot;."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1523844780, "post_id": 49845374, "comment_id": 86712215, "body": "@hobbs Even if <code>1. ...(998 &quot;1&quot;)... .1</code> vs <code>1. ...(998 &quot;1&quot;)... .2</code>?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 1, "creation_date": 1523846506, "post_id": 49845374, "comment_id": 86712556, "body": "@ooo yes. Look at the code. <code>-&gt;[0]</code> is the original string, <code>-&gt;[1]</code> is the number of dots (i.e. the number of elements, minus one), and <code>-&gt;[2]</code> would be <code>&quot;\\x01\\x01\\x01</code>...<code>\\x01&quot;</code> vs. <code>&quot;\\x01\\x01\\x01</code>...<code>\\x02&quot;</code>."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523874224, "post_id": 49845374, "comment_id": 86724327, "body": "Great. When meets many digits, your code sort roughly, output correctly while holding the shape."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1523817363, "last_edit_date": 1523817363, "creation_date": 1523816701, "answer_id": 49845374, "question_id": 49845040, "link": "https://stackoverflow.com/questions/49845040/sort-keys-of-hash-by-numerals-and-dots-that-like-ipv4/49845374#49845374", "title": "Sort keys of hash by numerals and dots that like IPv4", "body": "<p>This shows the sorting of the IP addresses and ignores the remaining parts of your code</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @ips = qw/\n    139.8.0.2\n    127.0.0.11\n    1.1.1.1.1\n    217.0.22.3\n    8.8.8.8\n    127.0.0.1\n    139.12.0.2\n/;\n\nmy @sorted = map { $_-&gt;[0] }\nsort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] or $a-&gt;[2] cmp $b-&gt;[2] }\nmap { [ $_, tr/.//, join ('', map chr, /\\d+/g) ] } @ips;\n\nsay for @sorted;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>8.8.8.8\n127.0.0.1\n127.0.0.11\n139.8.0.2\n139.12.0.2\n217.0.22.3\n1.1.1.1.1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523888861, "post_id": 49857146, "comment_id": 86734416, "body": "Hey guy, plz do not ignore the two requirements at the beginning of my post. I&#39;ve already tried this module before I posted my question and it isn&#39;t suitable for my cases at all!"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523905280, "post_id": 49857146, "comment_id": 86744292, "body": "@ooo It is? Where? BTW, Perl is CPAN and CPAN is Perl. Using one without the other is like using a bicycle without only one wheel."}, {"owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "edited": false, "score": 0, "creation_date": 1523939306, "post_id": 49857146, "comment_id": 86755040, "body": "Show me your output. Then you&#39;ll see it&#39;s not sorted in the order I want."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": -2, "last_activity_date": 1523880998, "creation_date": 1523880998, "answer_id": 49857146, "question_id": 49845040, "link": "https://stackoverflow.com/questions/49845040/sort-keys-of-hash-by-numerals-and-dots-that-like-ipv4/49857146#49857146", "title": "Sort keys of hash by numerals and dots that like IPv4", "body": "<p>Use <a href=\"https://metacpan.org/pod/Sort::Naturally\" rel=\"nofollow noreferrer\"><code>Sort::Naturally</code></a> from CPAN. Why reinvent the wheel?</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# always use these two\nuse strict;\nuse warnings;\n# use autodie to automatically die on open errors\nuse autodie;\n\nuse Sort::Naturally;\nmy %IP_counter =\n    (\n    '1.1.1.1.1'   =&gt; 1,\n    '127.0.0.1'   =&gt; 2,\n    '8.8.8.8'     =&gt; 3,\n    '20.0.0.1'    =&gt; 4,\n    '999999999999999999999999999999999999999999999999.9'\n                  =&gt; 5,\n    '8.8.8.8.0'   =&gt; 6,\n    '888888888888888888888888888888888888888888888888.8'\n                  =&gt; 7,\n    );\n\nmy @sorted_keys = nsort( keys %IP_counter );\nprint \"$_\\n\" for @sorted_keys;\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 4501837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542093e0137f12cc8bea664b79164a1c?s=128&d=identicon&r=PG&f=1", "display_name": "ooo", "link": "https://stackoverflow.com/users/4501837/ooo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 49845365, "answer_count": 3, "score": 1, "last_activity_date": 1523880998, "creation_date": 1523814671, "last_edit_date": 1592644375, "question_id": 49845040, "link": "https://stackoverflow.com/questions/49845040/sort-keys-of-hash-by-numerals-and-dots-that-like-ipv4", "title": "Sort keys of hash by numerals and dots that like IPv4", "body": "<p>Suppose my IPvN is a sequence with almost the same format as IPv4, the only difference is that there can be any number of dots or digits. I want to sort a list of such sequences as follows.</p>\n<ul>\n<li>IPv4 is before IPv5, and so on.</li>\n<li>For the same number of decimal points, sorting in ascending order of numbers in the same vertical position from left to right.</li>\n</ul>\n\n<pre><code>    8.8.8.8\n    20.0.0.0\n    1.2.3.4.5\n</code></pre>\n<br>\n<hr>\n<h1>Questions</h1>\n<h3>1. How to make it smarter?</h3>\n<p>I used a crude way to synthesize logical conditional expressions. I know that doing so is quite inefficient and wasteful of memory, especially when there is only a few of abnormally long IPvN, what humans can solve at a glance but I was dragging completely redundant and useless code tails such as <code>... or $a-&gt;[1000] &lt;=&gt; $b-&gt;[1000]</code>.</p>\n<h3>2. How to implement sorting that meets multiple conditions in a single <a href=\"https://wikibooks.org/wiki/Algorithm_Implementation/Sorting/Schwartzian_transform\" rel=\"nofollow noreferrer\"><strong>&quot;Schwartzian transform&quot;</strong></a>?</h3>\n<p>As you can see below, I made a superimposed Schwartzian transform of double layers.</p>\n<h3>3. Why did this error occur?</h3>\n<p>(The first line of my output.)</p>\n<pre><code>Use of uninitialized value in numeric comparison (&lt;=&gt;) at (eval 4) line 1.\n</code></pre>\n<p>However, if it is <br>\n<code>'8.8.8.6.0'   =&gt; 6</code> instead of <br>\n<code>'8.8.8.8.0'   =&gt; 6</code> in <code>%IP_counter</code>, there will be no warning.</p>\n<p>I only know that this error is related to <br>\n<code>'8.8.8.8'     =&gt; 3</code>.</p>\n<br>\n<hr>\n<h2>My trash code</h2>\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse List::Util qw(max);\n\n\nmy %IP_counter =\n    (\n    '1.1.1.1.1'   =&gt; 1,\n    '127.0.0.1'   =&gt; 2,\n    '8.8.8.8'     =&gt; 3,\n    '20.0.0.1'    =&gt; 4,\n    '999999999999999999999999999999999999999999999999.9'\n                  =&gt; 5,\n    '8.8.8.8.0'   =&gt; 6,\n    '888888888888888888888888888888888888888888888888.8'\n                  =&gt; 7,\n    );\n\n\n# Find the max length\n# Abbr. &quot;c_n_d_m&quot; -&gt; &quot;count numbers divided (max)&quot;.\nmy @c_n_d;\nmy $c_n_d_m = 0;\nforeach (keys %IP_counter) {\n    @c_n_d = split /\\./, $_;\n    $c_n_d_m = @c_n_d if $c_n_d_m &lt; @c_n_d\n}\n\n\n# ?Q1. Question 1 arises here\n# Concatenation of hardcode\nmy @m = (1..$c_n_d_m);\n\nmy $cond;\nforeach my $i (0..@m-1) {$cond .= '$a-&gt;['.$m[$i].'] &lt;=&gt; $b-&gt;['.$m[$i].'] or '}\n$cond = substr $cond, 0, rindex($cond, ' or ');\n\n\n# ?Q2. Question 2 arises here\n# Sort keys by numeral\n# Do a double &quot;Schwartzian transform&quot;\nmy @sort_by_num =\n    # Sort by number of dots:\n    map  { $_ }\n    sort { (split /\\./, $a) &lt;=&gt; (split /\\./, $b) }\n    map  { [ $_, /(\\d+)/g ] -&gt; [@_] }\n    # Sort by (regarded as) shift floats:\n    map  { $_-&gt;[0] }\n    sort { eval $cond }\n    map  { [ $_, /(\\d+)/g ] }\n         keys %IP_counter;\n\n\n# Print the result\nmy $width = max map {length $_} keys %IP_counter;\n\nforeach my $IP (@sort_by_num) {\n    printf &quot;%-*s  =&gt;  $IP_counter{$IP}\\n&quot;, $width, $IP\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>Use of uninitialized value in numeric comparison (&lt;=&gt;) at (eval 4) line 1.\n888888888888888888888888888888888888888888888888.8  =&gt;  7\n999999999999999999999999999999999999999999999999.9  =&gt;  5\n8.8.8.8                                             =&gt;  3\n20.0.0.1                                            =&gt;  4\n127.0.0.1                                           =&gt;  2\n1.1.1.1.1                                           =&gt;  1\n8.8.8.8.0                                           =&gt;  6\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 5, "last_activity_date": 1523788644, "last_edit_date": 1523788644, "creation_date": 1523787763, "answer_id": 49840853, "question_id": 49840740, "link": "https://stackoverflow.com/questions/49840740/iterating-through-an-array-of-classstruct-objects/49840853#49840853", "title": "Iterating through an array of Class::Struct objects", "body": "<p>You should initialize 'kittens' to be an array (using <code>'@'</code>) and use curly brackets for precedence in the dereference. I have flagged the changed lines with the comment <code># CHANGED</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Class::Struct;\nuse Data::Dumper;\n\nstruct Cat =&gt;\n[\n    name     =&gt; '$',\n    age     =&gt; '$',\n    kittens  =&gt; '@',   # CHANGED\n];\n\nstruct Kitten =&gt;\n[\n  name     =&gt; '$',\n  age     =&gt; '$',\n];\n\nmy $lil_kitten = Kitten-&gt;new( name =&gt; 'Lil Socks', age=&gt; 2);\nmy $big_kitten = Kitten-&gt;new( name =&gt; 'Big Socks', age=&gt; 3);\nmy $old_kitten = Kitten-&gt;new( name =&gt; 'Old Socks', age=&gt; 4);\n\nmy @kitten_array = ($lil_kitten, $big_kitten, $old_kitten);\n\nmy $kitten_count = scalar @kitten_array;\nprint \"There were $kitten_count kittens\\n\";\n\nforeach my $k(@kitten_array) {\n  bless $k, 'Kitten';\n  print \"Kitten: \", $k-&gt;name, \" is \", $k-&gt;age, \" years old.\\n\";\n  print Dumper($k), \"\\n\";\n}\n\nmy $cat = Cat-&gt;new( name =&gt; 'Socks');\n$cat-&gt;age(17);\n#$cat-&gt;kittens(@kitten_array);\n$cat-&gt;kittens(\\@kitten_array);\n\nmy $ref_type = $cat-&gt;kittens;\nprint \"Ref type: \", $ref_type, \"\\n\\n\\n\\n\";\n$kitten_count = scalar @{$cat-&gt;kittens};   # CHANGED\nprint \"There were $kitten_count kittens\\n\";\n\nprint \"Once a cat called \", $cat-&gt;name, \" who was \", $cat-&gt;age, \"\\n\";\n\n#foreach my $kat(@$cat-&gt;kittens) {\nforeach my $kat($cat-&gt;kittens) {\n    bless $kat, 'Kitten';\n    print \"Kitten: \", $kat-&gt;name, \" is \", $kat-&gt;age, \" years old.\\n\";\n    print Dumper($kat), \"\\n\";\n}\n</code></pre>\n\n<p>The problem with <code>@$cat-&gt;kittens</code> is that it first dereferences <code>$cat</code> to become an array, then tries to call the method <code>kittens()</code> on that array. This involves Perl trying to interpret <code>@$cat</code> as a class name by turning it into a string - that is, <code>scalar @$cat</code>, which is the size of the array. You end up calling <code>\"3\"-&gt;kittens()</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 9648361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53b8b139da066b4d44d92ceaf7c9671?s=128&d=identicon&r=PG&f=1", "display_name": "scott math", "link": "https://stackoverflow.com/users/9648361/scott-math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 49840853, "answer_count": 1, "score": 1, "last_activity_date": 1523802022, "creation_date": 1523786971, "last_edit_date": 1523802022, "question_id": 49840740, "link": "https://stackoverflow.com/questions/49840740/iterating-through-an-array-of-classstruct-objects", "title": "Iterating through an array of Class::Struct objects", "body": "<p>I'm using the <a href=\"https://metacpan.org/pod/Class::Struct\" rel=\"nofollow noreferrer\"><code>Class::Struct</code></a> module\nand have two structures, <code>Cat</code> and <code>Kitten</code>, <code>Cat</code> is a mother cat, and one of the attributes of <code>Cat</code> should be an array of <code>Kitten</code> objects.  I'm having difficulty getting this right.</p>\n\n<p>If I save the <code>kittens</code> array as an object I cannot iterate through it as expected; I just get an array with one element which appears to be an array. If I save it as a reference I can not figure out how to deference it correctly.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Class::Struct;\nuse Data::Dumper;\n\nstruct Cat =&gt; [\n    name    =&gt; '$',\n    age     =&gt; '$',\n    kittens =&gt; '$',\n];\n\nstruct Kitten =&gt; [\n    name =&gt; '$',\n    age  =&gt; '$',\n];\n\nmy $lil_kitten = Kitten-&gt;new( name =&gt; 'Lil Socks', age =&gt; 2 );\nmy $big_kitten = Kitten-&gt;new( name =&gt; 'Big Socks', age =&gt; 3 );\nmy $old_kitten = Kitten-&gt;new( name =&gt; 'Old Socks', age =&gt; 4 );\n\nmy @kitten_array = ( $lil_kitten, $big_kitten, $old_kitten );\n\nmy $kitten_count = scalar @kitten_array;\nprint \"There were $kitten_count kittens\\n\";\n\nforeach my $k ( @kitten_array ) {\n    bless $k, 'Kitten';\n    print \"Kitten: \", $k-&gt;name, \" is \", $k-&gt;age, \" years old.\\n\";\n    print Dumper($k), \"\\n\";\n}\n\nmy $cat = Cat-&gt;new( name =&gt; 'Socks' );\n$cat-&gt;age(17);\n#$cat-&gt;kittens(@kitten_array);\n$cat-&gt;kittens(\\@kitten_array);\n\nmy $ref_type = $cat-&gt;kittens;\nprint \"Ref type: \", $ref_type, \"\\n\\n\\n\\n\";\n#$kitten_count = scalar @$cat-&gt;kittens;\n#print \"There were $kitten_count kittens\\n\";\n\nprint \"Once a cat called \", $cat-&gt;name, \" who was \", $cat-&gt;age, \"\\n\";\n#foreach my $kat(@$cat-&gt;kittens) {\nforeach my $kat($cat-&gt;kittens) {\n    bless $kat, 'Kitten';\n    print \"Kitten: \", $kat-&gt;name, \" is \", $kat-&gt;age, \" years old.\\n\";\n    print Dumper($kat), \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "sockets", "freeze"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523866809, "post_id": 49837713, "comment_id": 86719624, "body": "Always use <code>use strict; use warnings qw( all );</code>!!!"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1523800799, "last_edit_date": 1523800799, "creation_date": 1523774904, "answer_id": 49839243, "question_id": 49837713, "link": "https://stackoverflow.com/questions/49837713/perl-socket-connection-hangs-on-external-host/49839243#49839243", "title": "Perl socket connection hangs on external host", "body": "<p>There is nothing really wrong with your code, you simply have wrong assumptions.</p>\n\n<p>Your assumption is that <code>Net::Ping</code> can be used to find out if a host is valid, but this assumption is wrong. <code>Net::Ping</code> by default just tries to send an ICMP echo request to the host and expects an ICMP echo response back. But many hosts (like <code>smtp.gmail.com</code>) will not reply to such requests even though the host might be reachable by other means, such as connecting via TCP to a specific port like you do next. </p>\n\n<p>I simply recommend to remove this use of <code>Net::Ping</code>. If the host cannot be connected to then  the <code>connect</code> will fail, which should be sufficient. But even if <code>connect</code> succeeds it might happen that your code hangs, since you rely on the server to send some data first. In protocols like SMTP (port 25) or FTP (port 21) the server will send some greeting first, but in other protocols like HTTP (port 80) the client is expected to send data before the server replies. In these cases your code will hang since it does not send any data, and so the server just hangs waiting for a proper request before sending a response.</p>\n\n<p>Apart from that, I recommend to use <code>IO::Socket::IP</code> instead of plain sockets. It not only makes the code simpler, but also works transparently with IPv6. Your code explicitly uses of <code>inet_aton</code> and so only works with IPv4.</p>\n"}], "owner": {"reputation": 1167, "user_id": 3066571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c229fff899ffd9f6ace71937b5cfda5d?s=128&d=identicon&r=PG&f=1", "display_name": "user3066571", "link": "https://stackoverflow.com/users/3066571/user3066571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 49839243, "answer_count": 1, "score": 2, "last_activity_date": 1523800799, "creation_date": 1523755945, "question_id": 49837713, "link": "https://stackoverflow.com/questions/49837713/perl-socket-connection-hangs-on-external-host", "title": "Perl socket connection hangs on external host", "body": "<p>I have the below program that makes a socket connection and just reads back the first line the server returns.  It works on anything inside my network, but if I try to go outside, it just hangs and doesn't do anything.  i.e. <code>smtp.gmail.com</code> on port <code>25</code>.  Not sure what's wrong with it, google searches are not giving me much.</p>\n\n<pre><code>use Socket;\nuse Net::Ping;\n\n$remote = $ARGV[0];\n$port = $ARGV[1];\n\nmy $p = Net::Ping-&gt;new();\nif (!$p-&gt;ping($remote)) {\n    print STDERR \"Error: Invalid hostname\\n\";\n    exit(1);\n}\n\nif ($port =~ /\\D/) {\n    $port = getservbyname($port, 'tcp')\n}\nif ($port &gt; 65535 || $port &lt; 0) {\n    print STDERR \"Error: Invalid port\\n\";\n    exit(1);\n}\n$iaddr = inet_aton($remote);\n$paddr = sockaddr_in($port, $iaddr);\n$proto = getprotobyname('tcp');\nsocket(SOCK, PF_INET, SOCK_STREAM, $proto);\nconnect(SOCK, $paddr);\n$line = &lt;SOCK&gt;;\nprint STDOUT \"$line\\n\";\nclose(SOCK);\n\nexit(0);\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523681078, "post_id": 49826565, "comment_id": 86671394, "body": "It is called string interpolation. A variable is interpolated into a string constant. See <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">perlop</a> for more information. Note that in Perl case matters, so <code>$somestring</code> is different from <code>$SomeString</code>."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 2, "creation_date": 1523692914, "post_id": 49826565, "comment_id": 86673766, "body": "Maybe the first <code>$somestring</code> should be <code>$someString</code>? It&#39;s going to loop forever otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6366580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIEHS.jpg?s=128&g=1", "display_name": "rawatsandeep1989", "link": "https://stackoverflow.com/users/6366580/rawatsandeep1989"}, "is_accepted": false, "score": 1, "last_activity_date": 1523664950, "creation_date": 1523664950, "answer_id": 49826651, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49826651#49826651", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p>I believe it is just appending 0 to the value of $Something and assigning it to $somestring. \nNote : both variables are different on L.H.S and R.H.S\nfinally it check if length of variable is less than 10 or more.</p>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": true, "score": 5, "last_activity_date": 1523667081, "creation_date": 1523667081, "answer_id": 49826849, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49826849#49826849", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p>I know code-only answers are discouraged...but this seems straightforward enough:</p>\n\n<pre><code>\u00a3 perl -e '\nquote&gt; $mystring = \"48\";\nquote&gt; $mystring = \"0$mystring\" while(length($mystring)&lt;10);\nquote&gt; print \"$mystring\\n\";\nquote&gt; '\n0000000048\n\u00a3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1523692372, "creation_date": 1523692372, "answer_id": 49829149, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49829149#49829149", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p><code>\"0$SomeString\"</code> is a double-quoted string. It contains the character \"0\" followed by the contents of the variable <code>$SomeString</code>.</p>\n\n<p>If that's not clear, please explain which part of it is confusing you.</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 3, "last_activity_date": 1523695899, "creation_date": 1523695899, "answer_id": 49829609, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49829609#49829609", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p>(Note that, in Perl, <code>$somestring</code>, <code>$SomeString</code>, and <code>$someString</code> are <em>not</em> equivalent.  For the purposes of this answer, I'm assuming that all three were meant to be <code>$somestring</code>.  If they really were meant to be three separate variables, then the line of code in the question will either do nothing at all or loop forever, depending on the length of <code>$someString</code>.)</p>\n\n<p><code>$somestring = \"0$somestring\"</code> modifies the value of <code>$somestring</code> to insert a <code>0</code> at the beginning of the string.</p>\n\n<p>With the <code>while</code> part added, the overall effect of the line of code you asked about is to pad <code>$somestring</code> to a length of 10 characters with leading zeroes.</p>\n"}, {"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 1, "last_activity_date": 1523703183, "creation_date": 1523703183, "answer_id": 49830634, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49830634#49830634", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p>Original very perl<em>ish</em> version:<br>\n<code>$somestring = \"0$SomeString\" while(length($someString) &lt; 10)</code></p>\n\n<p>Equivalent more readable version:</p>\n\n<pre><code>while( length($someString) &lt; 10 ) {\n   # prepend \"0\" to $someString (increases length of $someString by 1) \n   $someString = '0' . $someString; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523718117, "post_id": 49832051, "comment_id": 86680864, "body": "<code>sprintf &#39;%010s&#39;, $somestring</code> also works fine, even for non-numeric values."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523719434, "post_id": 49832051, "comment_id": 86681236, "body": "@Borodin Did anyone claim otherwise?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523719831, "post_id": 49832051, "comment_id": 86681360, "body": "Why do you think I&#39;m claiming that someone did? <i>&quot;If <code>$somestring</code> is supposed to hold an integer value&quot;</i> seems unnecessarily restrictive."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523720599, "post_id": 49832051, "comment_id": 86681580, "body": "My example demonstrates the case where <code>$somestring</code> is assumed to hold an integer value, so it is exactly as restrictive as it needs to be. For other possible alternatives, the interested reader can consult the manual. The answer is in three parts: 1) I identify what problem the original snippet is attempting to solve; 2) I show a way of doing it without loops and without using any other function than <code>length</code> which is already in the original snippet; and 3) I point the OP to <code>sprintf</code> which solves this and similar problems."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1523713121, "creation_date": 1523713121, "answer_id": 49832051, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl/49832051#49832051", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p><a href=\"https://metacpan.org/pod/LeftPad\" rel=\"nofollow noreferrer\">Left pad</a> <a href=\"http://www.haneycodes.net/npm-left-pad-have-we-forgotten-how-to-program/\" rel=\"nofollow noreferrer\">strikes again</a>.</p>\n\n<p>A saner way of doing this is <code>$somestring = '0' x (10 - length($somestring)) . $somestring</code>.</p>\n\n<p>If, <code>$somestring</code> is supposed to hold an integer value, and you want to left pad that numeric value with <code>0</code>s, you have <a href=\"https://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a>: <code>sprintf '%010d', $somestring</code>.</p>\n"}], "owner": {"reputation": 8122, "user_id": 280772, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ac6e884cd370d2091c1ed5253fb127aa?s=128&d=identicon&r=PG", "display_name": "Lost", "link": "https://stackoverflow.com/users/280772/lost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 49826849, "answer_count": 6, "score": -1, "last_activity_date": 1523713121, "creation_date": 1523663915, "question_id": 49826565, "link": "https://stackoverflow.com/questions/49826565/what-does-0variable-mean-in-perl", "title": "what does &quot;0$variable&quot; mean in perl?", "body": "<p>I am looking at a line of code in perl and trying to make sense on what does it actually mean. It looks like following</p>\n\n<p><code>$somestring = \"0$SomeString\" while(length($someString) &lt; 10)</code></p>\n\n<p>I understand other parts of this assignment except when it says <code>0$somestring</code> here?</p>\n"}, {"tags": ["perl", "fork", "stdin"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523672952, "post_id": 49825753, "comment_id": 86670127, "body": "How do you demote the end of a request? How do you denote the end of a response? Is the child&#39;s output truly unbuffered?"}, {"owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523675059, "post_id": 49825753, "comment_id": 86670439, "body": "Both the request and the response are one &quot;line&quot; of text terminated by <code>\\n</code>. And doesn&#39;t <code>$|++</code> guarantee that the child&#39;s newline-terminated line will get flushed?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523972430, "post_id": 49857887, "comment_id": 86775067, "body": "Yeah, that works. Just make sure not to send another request before receiving the response of the previous one."}], "tags": [], "owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "is_accepted": true, "score": 2, "last_activity_date": 1523883305, "creation_date": 1523883305, "answer_id": 49857887, "question_id": 49825753, "link": "https://stackoverflow.com/questions/49825753/spawn-a-program-from-perl-and-communicate-with-it-via-stdin-stdout/49857887#49857887", "title": "Spawn a program from Perl and communicate with it via STDIN/STDOUT", "body": "<p>Given these conditions from the original question ...</p>\n\n<ul>\n<li>You don't care about reading STDERR </li>\n<li>You control the child source code and can therefore guarantee that autoflushing occurs. </li>\n<li>The protocol is strictly send one line, receive one line.</li>\n</ul>\n\n<p>... the following will work. (Note that the child is written here in Perl but could also be C.)</p>\n\n<p><strong>parent.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl \nuse warnings;\nuse strict;\nuse IPC::Open2;\n$|=1;\nmy $pid = open2(my $ifh, my $ofh, 'child.pl') or die;\nwhile (1) {\n    print STDOUT \"Enter text to send to the child: \";\n    my $message = &lt;STDIN&gt;;\n    last if !defined $message;\n    print $ofh $message;   # comes with \\n\n    my $reply = &lt;$ifh&gt;;\n    print STDOUT $reply;\n}\nclose $ifh or die;\nclose $ofh or die;\nwaitpid $pid, 0;\n</code></pre>\n\n<p><strong>child.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl \nuse warnings;\nuse strict;\n$|=1;\n\nwhile (my $line = &lt;STDIN&gt;) {\n    chomp $line;\n    print STDOUT $line . \", back atcha.\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 49857887, "answer_count": 1, "score": 2, "last_activity_date": 1523904654, "creation_date": 1523657438, "last_edit_date": 1523883322, "question_id": 49825753, "link": "https://stackoverflow.com/questions/49825753/spawn-a-program-from-perl-and-communicate-with-it-via-stdin-stdout", "title": "Spawn a program from Perl and communicate with it via STDIN/STDOUT", "body": "<p>I have a C program that simply runs a loop that reads a JSON structure from STDIN and writes a line to STDOUT. </p>\n\n<p>In order to support a variety of front-end formats, I want to write a Perl program that repeatedly reads data, converts it to JSON, submits it to the C program, and receives the output -- as if I were using <code>qx//</code> to invoke the C program, only without launching it afresh each time.</p>\n\n<p><a href=\"https://stackoverflow.com/q/39693924/522385\">This thread</a> describes the same problem, except the parent process is in C. I wondered whether Perl provided a way to do this more easily. It would be preferable (but not essential) for the C program to stay the same and be unaware whether it was forked by Perl or run from the command line, if possible.</p>\n\n<p>To illustrate (note - using Perl for the child, but hopefully the same principles apply):</p>\n\n<p>File <code>parent.pl</code></p>\n\n<pre><code>#!/usr/bin/env perl \nuse warnings;\nuse strict;\n$|++;\n\n# {{ spawn child.pl }}\nwhile (1) {\n    print \"Enter text to send to the child: \";\n    my $text = &lt;&gt;;\n    last if !defined $text;\n    # {{ send $text on some file descriptor to child.pl }}\n    # {{ receive $reply on some file descriptor from child.pl }}\n}\n</code></pre>\n\n<p>File <code>child.pl</code>:</p>\n\n<pre><code>#!/usr/bin/env perl \nuse warnings;\nuse strict;\n$|++;\nwhile (my $line = &lt;STDIN&gt;) {\n    chomp $line;\n    $line .= \", back atcha.\\n\";\n    print $line;\n}\n</code></pre>\n\n<p>Execution:</p>\n\n<pre><code>$ parent.pl\nEnter text to send to the child: hello\nhello, back atcha.\nEnter text to send to the child: \n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>The caveats for using <code>open2</code>, stated both by @ikegami below and in <a href=\"https://docstore.mik.ua/orelly/perl2/prog/ch16_03.htm\" rel=\"nofollow noreferrer\">Programming Perl / Interprocess Communication</a>, don't seem to me to apply here, given: </p>\n\n<ul>\n<li>I don't care about STDERR (which would require <code>open3</code> and <code>select</code>) </li>\n<li>I control the child source code and can therefore guarantee that autoflushing occurs. </li>\n<li>The protocol is strictly send one line, receive one line.</li>\n</ul>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1523622510, "post_id": 49816050, "comment_id": 86648388, "body": "Is the config key on the left of the <code>=</code> always one word?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1523622676, "post_id": 49816050, "comment_id": 86648500, "body": "Also, you want to use <code>use strict</code> and <code>use warnings</code> and make your script compile with that please, and then update the code. You can <a href=\"https://stackoverflow.com/posts/49816050/edit\">edit</a> your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1523622821, "post_id": 49816050, "comment_id": 86648616, "body": "So far your code only gets the <code>key: value....</code> stuff, but it does not deal with the individual pairs inside that value. Have you forgotten to add that code to the question?"}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 4, "last_activity_date": 1523637829, "last_edit_date": 1523637829, "creation_date": 1523626797, "answer_id": 49818397, "question_id": 49816050, "link": "https://stackoverflow.com/questions/49816050/how-can-i-parse-the-output-of-lshw-using-perl-regexes/49818397#49818397", "title": "How can I parse the output of lshw using Perl regexes?", "body": "<p>What you need is to capture all characters after an equal sign which are not followed by the pattern <code>somekeyname=</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $s = q{configuration: autonegotiation=on broadcast=yes driver=igb driverversion=5.3.0-k duplex=full firmware=1.63, 0x800009fa ip=[REMOVED] latency=0 link=yes multicast=yes port=twisted pair speed=1Gbit/s};\n\nmy ($key, $rest) = split /:\\s*/, $s, 2;\n\nmy %params = ($rest =~ / (\\w+) = ((?:. (?! \\w+ = ))+) /gx);\n\nuse YAML::XS;\nprint Dump \\%params;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>---\nautonegotiation: on\nbroadcast: yes\ndriver: igb\ndriverversion: 5.3.0-k\nduplex: full\nfirmware: 1.63, 0x800009fa\nip: '[REMOVED]'\nlatency: '0'\nlink: yes\nmulticast: yes\nport: twisted pair\nspeed: 1Gbit/s\n</code></pre>\n\n<p>In addition, your initial loop can be improved:</p>\n\n<pre><code> while (&lt;&gt;) {\n     next if /^#/; # skip comments\n     /\\S/ or next; # skip blank lines\n     s/^\\s+//;\n     s/\\s+\\z//;\n     # ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 9484649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8b9adfdb786a3ad25e6f14c1601e66?s=128&d=identicon&r=PG&f=1", "display_name": "Moeru", "link": "https://stackoverflow.com/users/9484649/moeru"}, "edited": false, "score": 0, "creation_date": 1523969412, "post_id": 49818698, "comment_id": 86772789, "body": "Cool, mastering regex is on my next wish-list ;-)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523627793, "creation_date": 1523627793, "answer_id": 49818698, "question_id": 49816050, "link": "https://stackoverflow.com/questions/49816050/how-can-i-parse-the-output-of-lshw-using-perl-regexes/49818698#49818698", "title": "How can I parse the output of lshw using Perl regexes?", "body": "<p>You simply need to <code>split</code> the config string as so</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'configuration: autonegotiation=on broadcast=yes driver=igb driverversion=5.3.0-k duplex=full firmware=1.63, 0x800009fa ip=[REMOVED] latency=0 link=yes multicast=yes port=twisted pair speed=1Gbit/s';\n\nsay for split /\\s+(?=[^\\s=]+=)/, $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>configuration:\nautonegotiation=on\nbroadcast=yes\ndriver=igb\ndriverversion=5.3.0-k\nduplex=full\nfirmware=1.63, 0x800009fa\nip=[REMOVED]\nlatency=0\nlink=yes\nmulticast=yes\nport=twisted pair\nspeed=1Gbit/s\n</code></pre>\n\n<p>You now have a list of keys and their values, correctly divided by key name. This should be simple to process</p>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "is_accepted": false, "score": 0, "last_activity_date": 1523631467, "creation_date": 1523631467, "answer_id": 49819886, "question_id": 49816050, "link": "https://stackoverflow.com/questions/49816050/how-can-i-parse-the-output-of-lshw-using-perl-regexes/49819886#49819886", "title": "How can I parse the output of lshw using Perl regexes?", "body": "<p>The approach of Borodin is it.</p>\n\n<p>Just in case you want to parse it with regexp this will work and separates the keys from its values.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings FATAL =&gt; 'all';\nuse strict;\nmy $s = 'configuration: autonegotiation=on broadcast=yes driver=igb driverversion=5.3.0-k duplex=full firmware=1.63, 0x800009fa ip=[REMOVED] latency=0 link=yes multicast=yes port=twisted pair speed=1Gbit/s';\n\nwhile ($s =~ m/(?&lt;key&gt;[A-Za-z0-9]+)=(?&lt;value&gt;([\\/\\[\\]A-Za-z0-9., -]+)(?= [a-z]+)|([\\/\\[\\]A-Za-z0-9., -]+))/g) {\n    print \"$+{key} &gt;&gt;  $+{value}\\n\";\n    $s =~ s/$+{key}//;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>autonegotiation &gt;&gt;  on\nbroadcast &gt;&gt;  yes\ndriver &gt;&gt;  igb\ndriverversion &gt;&gt;  5.3.0-k\nduplex &gt;&gt;  full\nfirmware &gt;&gt;  1.63, 0x800009fa\nip &gt;&gt;  [REMOVED]\nlatency &gt;&gt;  0\nlink &gt;&gt;  yes\nmulticast &gt;&gt;  yes\nport &gt;&gt;  twisted pair\nspeed &gt;&gt;  1Gbit/s\n</code></pre>\n\n<p><strong>Pros</strong></p>\n\n<ul>\n<li>key/value separation</li>\n</ul>\n\n<p><strong>Cons</strong></p>\n\n<ul>\n<li>expensive positive lookahead in regular expression</li>\n</ul>\n\n<p><strong>Refactoring proposal</strong></p>\n\n<ul>\n<li>get rid of complex character group in regex <code>[\\/\\[\\]A-Za-z0-9., -]</code></li>\n<li>get rid of replacement of found patterns in loop</li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 9484649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8b9adfdb786a3ad25e6f14c1601e66?s=128&d=identicon&r=PG&f=1", "display_name": "Moeru", "link": "https://stackoverflow.com/users/9484649/moeru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1523637829, "creation_date": 1523619240, "last_edit_date": 1523627674, "question_id": 49816050, "link": "https://stackoverflow.com/questions/49816050/how-can-i-parse-the-output-of-lshw-using-perl-regexes", "title": "How can I parse the output of lshw using Perl regexes?", "body": "<p>I am trying to parse <a href=\"http://manpages.ubuntu.com/manpages/artful/man1/lshw.1.html\" rel=\"nofollow noreferrer\"><code>lshw</code></a> output into a hash with this code, what works so far.</p>\n\n<pre><code>  use strict;\n  use warnings;\n\n  my (%lshw,$key,$value);\n  while (&lt;&gt;){\n  s/#.*//;                # no comments\n  s/^\\s+//;               # no leading whites\n  s/\\s+$//;               # no trailing whites\n  next unless length;     # anything left?\n  if (/(?&lt;key&gt;.*?):\\s+(?&lt;value&gt;.*)/x){\n    $lshw{$+{key}} = $+{value};\n  }\n}\n\n# remove white spaces in hash keys\nfor $key (keys %lshw){\n  $value = delete $lshw{$key};\n  for ($key){\n    s/\\s+//g;\n   }\n  $lshw{$key} = $value;\n  }\n\nmy $logname   = $lshw{'logicalname'};\nprint \"Logical name\\t $logname\\n\";\n</code></pre>\n\n<p>but I strugle when I come to the line with configurations like:</p>\n\n<pre><code>clock: 33Mhz \nwidth: 32 bits \ncapacity: 1Gbit/s \nconfiguration:autonegotiation=on broadcast=yes driver=igb driverversion=5.3.0-k duplex=full firmware=1.63, 0x800009fa ip=[REMOVED] latency=0 link=yes multicast=yes port=twisted pair speed=1Gbit/s`\n</code></pre>\n\n<p>I was trying a hoh approach, but did not find a solution how to split key/values, as it contains multi word values like <code>port=twisted pair</code>.\nThe key is always a single word.</p>\n\n<p>Can anyone please give me a hint how to solve this?</p>\n\n<p>(thanks simbabque for the strict/warnings hint)</p>\n"}, {"tags": ["perl", "module", "subroutine", "scalar"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1523642798, "last_edit_date": 1523642798, "creation_date": 1523609680, "answer_id": 49812980, "question_id": 49812558, "link": "https://stackoverflow.com/questions/49812558/program-unexpectedly-reports-use-of-uninitialized-value/49812980#49812980", "title": "Program unexpectedly reports &quot;Use of uninitialized value&quot;", "body": "<p>Statements in a module run when the module is loaded, at <code>use Module;</code>.  At that time <code>thesub()</code> still wasn't called with an argument and <code>$stored</code> in it is undefined. So that is what <code>$testvar</code> gets when it's assigned and the warning is emitted when it's printed.</p>\n\n<p>The <code>$testvar</code> can be used in main</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Module;\n\nModule::thesub(\"hello\");\n\nmy $testvar = Module::thesub();\n</code></pre>\n\n<p>even though I am not sure from the question what the purpose of this is.</p>\n\n<p>Remove the assignment and print of <code>$testvar</code> from the module. Note that you'll also need <code>use feature 'state';</code> at the beginning of the module, to enable the <a href=\"https://perldoc.perl.org/feature.html\" rel=\"nofollow noreferrer\">feature pragma</a>.</p>\n\n<hr>\n\n<p>A few comments on the module you show</p>\n\n<ul>\n<li><p>No need for <code>#!/usr/bin/perl</code>, as a module is generally not meant to be run</p></li>\n<li><p>The <code>package Module;</code> is commonly the first line</p></li>\n<li><p>While what you have works, consider making symbols from the module available to the calling code, so that it can import them and simply say <code>thesub()</code>.  A common way is</p>\n\n<pre><code>package Module;\n\nuse warnings;\nuse strict;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(thesub);\n\nsub thesub { ... }\n\n1;\n</code></pre>\n\n<p>and in the main</p>\n\n<pre><code>use Module qw(thesub);\n\nthesub(\"hello\");\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a> for starters and search SO, where there are great many posts on this.</p></li>\n</ul>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528908038, "creation_date": 1523608188, "last_edit_date": 1528908038, "question_id": 49812558, "link": "https://stackoverflow.com/questions/49812558/program-unexpectedly-reports-use-of-uninitialized-value", "title": "Program unexpectedly reports &quot;Use of uninitialized value&quot;", "body": "<p>This is with regard to my previous question\n<a href=\"https://stackoverflow.com/questions/49791034/hold-subroutine-response-and-set-to-variable-in-perl\"><em>Hold Subroutine response and set to variable in Perl</em></a></p>\n\n<p>The statement <code>Module::thesub(\"hello\")</code>\nworked in <code>Module.pm</code> but fails if I move it to <code>main.pl</code></p>\n\n<h3>main.pl</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Module;\n\nModule::thesub(\"hello\");\n</code></pre>\n\n<h3>Module.pm</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\npackage Module;\n\nsub thesub {\n    state $stored;\n\n    $stored = shift if @_;\n    return $stored;\n}\n\nmy $testvar = thesub();\n\nprint $testvar;\n\n1;\n</code></pre>\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>Use of uninitialized value <code>$testvar</code></p>\n</blockquote>\n\n<p>which means the variable <code>$testvar</code> has no value.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["perl", "intellij-idea"], "comments": [{"owner": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1523625536, "post_id": 49810310, "comment_id": 86650414, "body": "Have you tried to run &quot;Reformat Code&quot;?"}, {"owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "reply_to_user": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1523862467, "post_id": 49810310, "comment_id": 86717276, "body": "I&#39;m using <code>Re-Format with Perl::Tidy</code> instead of <code>Reformat Code</code> because we have defined standards. That&#39;s the reasion why I&#39;d like to change the behaviour of <code>Comment with line comment</code> because Perl::Tidy will move the line to the current block if the <code>#</code> is on the first column instead before the first character."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "is_accepted": true, "score": 0, "last_activity_date": 1524643644, "creation_date": 1524643644, "answer_id": 50017087, "question_id": 49810310, "link": "https://stackoverflow.com/questions/49810310/intellij-perl-camelcade-comment-at-first-column/50017087#50017087", "title": "IntelliJ Perl Camelcade - Comment at first column", "body": "<p><a href=\"https://github.com/Camelcade/Perl5-IDEA/issues/1767\" rel=\"nofollow noreferrer\">Issue 1767</a> on github.</p>\n\n<blockquote>\n  <p>Cooming in Milestone <a href=\"https://github.com/Camelcade/Perl5-IDEA/milestone/22\" rel=\"nofollow noreferrer\">2018.1.2</a></p>\n</blockquote>\n"}], "owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50017087, "answer_count": 1, "score": 1, "last_activity_date": 1524643644, "creation_date": 1523599595, "last_edit_date": 1523862802, "question_id": 49810310, "link": "https://stackoverflow.com/questions/49810310/intellij-perl-camelcade-comment-at-first-column", "title": "IntelliJ Perl Camelcade - Comment at first column", "body": "<p>I'd like to change the behaviour of the <code>Comment with line comment</code> function. I'm using the Perl (Camelcade) Plugin.</p>\n\n<p>When I comment with line comment the <code>#</code> will be added at the first column of the line. Is there any chance to set this on the first character?</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>sub test {\n    my $log           = $self-&gt;{__logger};\n    my $sRegexPattern = $self-&gt;getMetaFields;\n</code></pre>\n\n<p><strong>is actual becoming:</strong></p>\n\n<pre><code>sub test {\n    my $log            = $self-&gt;{__logger};\n#    my $sRegexPattern = $self-&gt;getMetaFields;\n</code></pre>\n\n<p><strong>My preference would be:</strong></p>\n\n<pre><code>sub test {\n    my $log            = $self-&gt;{__logger};\n    # my $sRegexPattern = $self-&gt;getMetaFields;\n</code></pre>\n\n<p>Is there way to change this behaviour?</p>\n\n<pre><code>IntelliJ IDEA 2017.3.3 (Community Edition)\nBuild #IC-173.4301.25, built on January 15, 2018\nJRE: 1.8.0_152-release-1024-b11 x86_64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nMac OS X 10.13.4\n+ Perl Camelcade Plugin\n</code></pre>\n\n<p><hr>\n<strong>Addition:</strong></p>\n\n<p>We use Perl::Tidy and Perl::Tidy will do:</p>\n\n<pre><code>sub test {\n    if ( something ) {\n        my $log           = $self-&gt;{__logger};\n#        my $sRegexPattern = $self-&gt;getMetaFields;\n    }\n    ...\n</code></pre>\n\n<p>--></p>\n\n<pre><code>sub test {\n    if ( something ) {\n        my $log           = $self-&gt;{__logger};\n        #        my $sRegexPattern = $self-&gt;getMetaFields;\n    }\n    ...\n</code></pre>\n\n<p>That is the reasion why I'd like to change this behaviour. E.g.: Visual Studio Code and other editors do:</p>\n\n<pre><code>sub test {\n    if ( something ) {\n        my $log           = $self-&gt;{__logger};\n        # my $sRegexPattern = $self-&gt;getMetaFields;\n    }\n    ...\n</code></pre>\n\n<p>--></p>\n\n<pre><code>sub test {\n    if ( something ) {\n        my $log           = $self-&gt;{__logger};\n        # my $sRegexPattern = $self-&gt;getMetaFields;\n    }\n    ...\n</code></pre>\n\n<p>so Perl::Tidy won't ruin the look.</p>\n"}, {"tags": ["string", "perl", "compare"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523599602, "post_id": 49810258, "comment_id": 86635131, "body": "Instead of assigning variables <code>$a</code> and <code>$b</code> you could extract directly from the <code>@_</code> array for example"}, {"owner": {"reputation": 9, "user_id": 6690782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c757b0931d7b9fa2f9e28c883492428?s=128&d=identicon&r=PG&f=1", "display_name": "Darius Aero", "link": "https://stackoverflow.com/users/6690782/darius-aero"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523599668, "post_id": 49810258, "comment_id": 86635159, "body": "how to extract it? @H&#229;konH&#230;gland"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523599717, "post_id": 49810258, "comment_id": 86635182, "body": "Have a look at <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html</a>"}, {"owner": {"reputation": 9, "user_id": 6690782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c757b0931d7b9fa2f9e28c883492428?s=128&d=identicon&r=PG&f=1", "display_name": "Darius Aero", "link": "https://stackoverflow.com/users/6690782/darius-aero"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523599815, "post_id": 49810258, "comment_id": 86635230, "body": "AUTOLOAD {      $_[0]&gt;$_[1]?&quot;greater&quot;:$_[0]&lt;$_[1]?&quot;less&quot;:&quot;equal&quot; } need the shorter"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523637305, "post_id": 49810258, "comment_id": 86658348, "body": "What is <i>&quot;Other people can achieve 42 char&quot;</i>? Is this a code golf competition?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523638049, "post_id": 49810258, "comment_id": 86658764, "body": "I think you&#39;ve probably read something that you didn&#39;t understand. We can&#39;t disabuse you of your misconceptions unless you give a lot more detail about your circumstances."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1523612918, "post_id": 49813219, "comment_id": 86642335, "body": "I was considering <code>(&#39;equal to&#39;, &#39;greater than&#39;, &#39;less than&#39;)[ $a &lt;=&gt; $b ]</code> which avoids the need to add one. But might be a little obscure :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1523614438, "post_id": 49813219, "comment_id": 86643337, "body": "Yes, I was similarly wary of that option! I also considered <code>no warnings &#39;deprecated&#39;; \tlocal $[ = -1;</code> but I doubt if <code>$[</code> has much longer to live with the current state of affairs."}, {"owner": {"reputation": 9, "user_id": 6690782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c757b0931d7b9fa2f9e28c883492428?s=128&d=identicon&r=PG&f=1", "display_name": "Darius Aero", "link": "https://stackoverflow.com/users/6690782/darius-aero"}, "edited": false, "score": 0, "creation_date": 1523634934, "post_id": 49813219, "comment_id": 86656953, "body": "no, this too long, i was trying to shorten the code. My code is simple. There are two argument will be passed to autoload, $a and $b as a string. and we will compare it and return &quot;greater&quot; or &quot;less&quot; or &quot;equals&quot;"}, {"owner": {"reputation": 9, "user_id": 6690782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c757b0931d7b9fa2f9e28c883492428?s=128&d=identicon&r=PG&f=1", "display_name": "Darius Aero", "link": "https://stackoverflow.com/users/6690782/darius-aero"}, "edited": false, "score": 0, "creation_date": 1523636342, "post_id": 49813219, "comment_id": 86657865, "body": "AUTOLOAD {      (&quot;equal&quot;,&quot;greater&quot;,&quot;less&quot;)[$_[0] &lt;=&gt; $_[1]]; }  here how i do it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1523637158, "post_id": 49813219, "comment_id": 86658272, "body": "The length of a piece of code isn&#39;t a good measure of its quality. In fact, <b>Dave Cross</b> says in his comment that it may be too obscure. What are you doing that requires your code to be so short? Why are you using <code>AUTOLOAD</code>?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1523610411, "creation_date": 1523610411, "answer_id": 49813219, "question_id": 49810258, "link": "https://stackoverflow.com/questions/49810258/perl-parse-string-to-integer-from-arguments-and-compare-it/49813219#49813219", "title": "Perl - parse string to integer from arguments and compare it", "body": "<p>This will do as you ask, but you give almost no information on your program so it is very difficult to suggest anything</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nfor ( [ 1, 2 ], [2, 2], [3, 2] ) {\n    my ($aa, $bb) = @$_;\n    printf \"%d is %s %d\\n\", $aa, compare($aa, $bb), $bb;\n}\n\nsub compare {\n    my ($aa, $bb) = @_;\n\n    ('less than', 'equal to', 'greater than')[($aa &lt;=&gt; $bb) + 1];\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1 is less than 2\n2 is equal to 2\n3 is greater than 2\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6690782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c757b0931d7b9fa2f9e28c883492428?s=128&d=identicon&r=PG&f=1", "display_name": "Darius Aero", "link": "https://stackoverflow.com/users/6690782/darius-aero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1523610411, "creation_date": 1523599358, "last_edit_date": 1523609216, "question_id": 49810258, "link": "https://stackoverflow.com/questions/49810258/perl-parse-string-to-integer-from-arguments-and-compare-it", "title": "Perl - parse string to integer from arguments and compare it", "body": "<p>There are two arguments: <code>$a</code> and <code>$b</code>, and both are strings. They are will be compared, if a is greater/less/equal to b.</p>\n\n<p>Other people can achieve 42 char, I don't know how to achieve it.</p>\n\n<pre><code>AUTOLOAD { \n    $_[0] + 0 &gt; $_[1] + 0 ? \"greater\" :\n    $_[1] == $_[0] ? \"equal\" : \"less\"\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "grep"], "answers": [{"tags": [], "owner": {"reputation": 4196, "user_id": 5255593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KNKCm.jpg?s=128&g=1", "display_name": "Mohammed Elhag", "link": "https://stackoverflow.com/users/5255593/mohammed-elhag"}, "is_accepted": false, "score": 1, "last_activity_date": 1523577468, "creation_date": 1523577468, "answer_id": 49807426, "question_id": 49807307, "link": "https://stackoverflow.com/questions/49807307/regexp-to-parse-test-output-and-print-only-failure-cases/49807426#49807426", "title": "Regexp to parse test output and print only failure cases", "body": "<p>Try this :</p>\n\n<pre><code>\\[.*RUN.*\\]+.+\\nFailure.*\\nFailure.*\\n\\[.*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/i0aacp/2/\" rel=\"nofollow noreferrer\">https://regex101.com/r/i0aacp/2/</a></p>\n"}, {"tags": [], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "is_accepted": false, "score": 1, "last_activity_date": 1523577559, "creation_date": 1523577559, "answer_id": 49807432, "question_id": 49807307, "link": "https://stackoverflow.com/questions/49807307/regexp-to-parse-test-output-and-print-only-failure-cases/49807432#49807432", "title": "Regexp to parse test output and print only failure cases", "body": "<p>You could do:</p>\n\n<p><a href=\"https://regex101.com/r/s85o9F/1\" rel=\"nofollow noreferrer\"><code>(.*\\d\\n(?:F.*\\n)+.*\\d)</code></a></p>\n\n<p>This captures lines ending with a digit (<code>\\d\\n</code>) followed by one or more instances of <code>F.*\\n</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1523643125, "last_edit_date": 1523643125, "creation_date": 1523599422, "answer_id": 49810269, "question_id": 49807307, "link": "https://stackoverflow.com/questions/49807307/regexp-to-parse-test-output-and-print-only-failure-cases/49810269#49810269", "title": "Regexp to parse test output and print only failure cases", "body": "<p>With Perl</p>\n\n<pre><code>perl -0777 -ne'print grep /Failure/, split /^(?=\\[ RUN)/m' test.log\n</code></pre>\n\n<p>This prints the desired output with the provided example in <code>test.log</code></p>\n\n<p>The <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\"><code>-0777</code></a> enables \"slurp\" mode so the whole file is read into <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\"><code>$_</code></a>. This is <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> on <code>^</code>, matching line beginning with <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>/m</code></a>, with a <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookahead</a> for the pattern <code>[ RUN</code>. The list returned by <code>split</code> is passed through <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a>, which passes blocks with <code>Failure</code>, and this output list is printed.</p>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 3, "last_activity_date": 1523601602, "creation_date": 1523601602, "answer_id": 49810765, "question_id": 49807307, "link": "https://stackoverflow.com/questions/49807307/regexp-to-parse-test-output-and-print-only-failure-cases/49810765#49810765", "title": "Regexp to parse test output and print only failure cases", "body": "\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -ne 'BEGIN{$/=\"[ RUN \"} chomp; print $/,$_ if /FAILED/' ip.txt\n[ RUN      ] testname 2\nFailure details 1\nFailure details 1\n[  FAILED  ] testname 2\n[ RUN      ] testname 4\nFailure details 2\nFailure details 2\n[  FAILED  ] testname 4\n</code></pre>\n\n<ul>\n<li><code>BEGIN{$/=\"[ RUN \"}</code> change input record separator from newline to <code>[ RUN </code></li>\n<li><code>chomp</code> remove record separator from each record</li>\n<li><code>print $/,$_ if /FAILED/</code> print record separator and the record if it contains <code>FAILED</code></li>\n</ul>\n\n<p><br>\nThis is similar to</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>gawk -v RS='\\\\[ RUN ' -v ORS= '/FAILED/{print \"[ RUN \" $0}' ip.txt\n</code></pre>\n"}], "owner": {"reputation": 1563, "user_id": 556141, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/febf4a6f28c25aa85ac8388e8ed8bb06?s=128&d=identicon&r=PG", "display_name": "Muffo", "link": "https://stackoverflow.com/users/556141/muffo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1523643125, "creation_date": 1523576317, "last_edit_date": 1523576739, "question_id": 49807307, "link": "https://stackoverflow.com/questions/49807307/regexp-to-parse-test-output-and-print-only-failure-cases", "title": "Regexp to parse test output and print only failure cases", "body": "<p>I am trying to parse the output log of unit tests using a regular expression.\nMy goal is to print only the details of the error cases.</p>\n\n<p>Here is an example of the output:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>[ RUN      ] testname 1\nSuccess log\n[       OK ] testname 1\n[ RUN      ] testname 2\nFailure details 1\nFailure details 1\n[  FAILED  ] testname 2\n[ RUN      ] testname 3\nSuccess log\n[       OK ] testname 3\n[ RUN      ] testname 4\nFailure details 2\nFailure details 2\n[  FAILED  ] testname 4\n[ RUN      ] testname\nSuccess log\n[       OK ] testname\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[ RUN      ] testname 2\nFailure details 1\nFailure details 1\n[  FAILED  ] testname 2\n[ RUN      ] testname 4\nFailure details 2\nFailure details 2\n[  FAILED  ] testname 4\n</code></pre>\n\n<p>Here is what I tried so far:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>grep -Pzo \"(?s)^\\[ RUN      \\].*?^\\[  FAILED  \\].*?$\" test.log\n</code></pre>\n\n<p>However, the output is not correct because the sequence <code>.*?</code> does not exclude the <code>[       OK ]</code>.</p>\n\n<p>In practice, I get two matches:</p>\n\n<p>1.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[ RUN      ] testname 1\nSuccess log\n[       OK ] testname 1\n[ RUN      ] testname 2\nFailure details 1\nFailure details 1\n[  FAILED  ] testname 2\n</code></pre>\n\n<p>2.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[ RUN      ] testname 3\nSuccess log\n[       OK ] testname 3\n[ RUN      ] testname 4\nFailure details 2\nFailure details 2\n[  FAILED  ] testname 4\n</code></pre>\n\n<p>I think I should use something called Negative Lookahead, but I wasn't able to get it working.</p>\n\n<p>Do you have any suggestion?</p>\n"}, {"tags": ["perl", "subprocess", "python-2.6"], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523647700, "post_id": 49806612, "comment_id": 86663679, "body": "Right . . . . ."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1523570965, "creation_date": 1523570965, "answer_id": 49806612, "question_id": 49805705, "link": "https://stackoverflow.com/questions/49805705/calling-perl-script-from-python-with-argument/49806612#49806612", "title": "Calling Perl Script from Python With Argument", "body": "<p>There's one more step:</p>\n\n<pre><code>print(p.stdout.read())\n</code></pre>\n\n<p>The output of the Perl process is stored in the object <code>p.stdout</code>, not written to the console. </p>\n"}], "owner": {"reputation": 1, "user_id": 9637478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80c6a8d4736497ee1175aa749b718c3b?s=128&d=identicon&r=PG&f=1", "display_name": "user9637478", "link": "https://stackoverflow.com/users/9637478/user9637478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1864, "favorite_count": 1, "accepted_answer_id": 49806612, "answer_count": 1, "score": 0, "last_activity_date": 1523570965, "creation_date": 1523566512, "question_id": 49805705, "link": "https://stackoverflow.com/questions/49805705/calling-perl-script-from-python-with-argument", "title": "Calling Perl Script from Python With Argument", "body": "<p>I am working on Python 2.6.6.I looked at various examples but I am not able call perl script in Python with arguments. Perl takes couple of arguments and display it.I am new to both Perl and Python and might me missing some basic thing. I am able to call perl script without giving any argument but once I try giving any argument,It's not calling the perl script</p>\n\n<p>Python :test.py</p>\n\n<pre><code> import subprocess\n import shlex\n p=subprocess.Popen(['perl','start.pl','1','2'],stdout=subprocess.PIPE)\n</code></pre>\n\n<p>Perl :start.pl</p>\n\n<pre><code>use strict;\nprint \"Called::\\n\";\nmy $name=\"$ARGV[0]\";\nprint \"$name\\n\";\nmy $next_name=$ARGV[1];\nprint \"$next_name\\n\"\n</code></pre>\n\n<p>I am not sure how does perl takes the argument from python.Can someone please advice me where am I going wrong</p>\n"}, {"tags": ["perl", "hex", "pack"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1523541471, "post_id": 49798503, "comment_id": 86611577, "body": "I am sure it is an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY-problem</a>"}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 4, "creation_date": 1523541908, "post_id": 49798503, "comment_id": 86611896, "body": "If you convert it back, how do you know that <code>FDD5</code> is <code>-555</code> instead of <code>64981</code>?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1523543099, "post_id": 49798503, "comment_id": 86612737, "body": "I completely agree with the previous commenters. <a href=\"https://english.stackexchange.com/q/105551\">Just enough rope</a>: <code>perl -le &#39;print unpack(&quot;H*&quot;,pack(&quot;s&gt;&quot;,-555))&#39;</code> prints <code>fdd5</code> - try it also with the <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\"><code>pack</code></a> patterns <code>&quot;c&quot;</code>, <code>&quot;l&gt;&quot;</code>, and <code>&quot;q&gt;&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1523561508, "last_edit_date": 1523561508, "creation_date": 1523549466, "answer_id": 49801320, "question_id": 49798503, "link": "https://stackoverflow.com/questions/49798503/minimum-bytes-required-to-represent-a-signed-hexadecimal-value/49801320#49801320", "title": "Minimum bytes required to represent a signed hexadecimal value", "body": "<p>There are two problems with your approach.</p>\n\n<ol>\n<li><p>It's unparsable.</p>\n\n<p>For example, even if you only know you have two numbers,<br>\nBytes 12 34 56 78<sub>16</sub> could refer to 12<sub>16</sub> and 345678<sub>16</sub>.<br>\nBytes 12 34 56 78<sub>16</sub> could refer to 1234<sub>16</sub> and 5678<sub>16</sub>.<br>\nBytes 12 34 56 78<sub>16</sub> could refer to 123456<sub>16</sub> and 78<sub>16</sub>.</p>\n\n<p>You could use some external means of identifying the length of the encoded number, but that would nullify some or all of the savings.</p></li>\n<li><p>It's ambiguous.</p>\n\n<p>For example,<br>\nBytes FD D5<sub>16</sub> could refer to 64981<sub>10</sub> (Bytes 00 00 FD D5<sub>16</sub> as an int32).<br>\nBytes FD D5<sub>16</sub> could refer to -555<sub>10</sub> (Bytes FF FF FD D5<sub>16</sub> as an int32).</p></li>\n</ol>\n\n<p>One solution is to use a length prefix (like UTF-8).</p>\n\n<pre><code>-2^13..2^13-1  2 bytes  00xx xxxx  xxxx xxxx\n-2^21..2^21-1  3 bytes  01xx xxxx  xxxx xxxx  xxxx xxxx\n-2^29..2^29-1  4 bytes  10xx xxxx  xxxx xxxx  xxxx xxxx  xxxx xxxx\n-2^31..2^31-1  5 bytes  1100 0000  xxxx xxxx  xxxx xxxx  xxxx xxxx  xxxx xxxx\n</code></pre>\n\n<p>The optimal scheme will depend on the distribution of your numbers.</p>\n\n<hr>\n\n<p>The packing/encoding function for the above scheme could be written as follows:</p>\n\n<pre><code>sub pack_vint32 {\n   my $n = shift;\n   my $nn = $n &gt;= 0 ? $n : ~$n;\n   return substr(pack('L&gt;', ($n &amp; 0x3FFF    ) | 0x0000    ), -2) if !($nn &amp; ~0x1FFF);\n   return substr(pack('L&gt;', ($n &amp; 0x3FFFFF  ) | 0x400000  ), -3) if !($nn &amp; ~0x1FFFFF);\n   return substr(pack('L&gt;', ($n &amp; 0x3FFFFFFF) | 0x80000000), -4) if !($nn &amp; ~0x1FFFFFFF);\n   return \"\\xC0\".pack('L&gt;', $n);\n}\n</code></pre>\n\n<p>And the unpacking/decoding function for the above scheme could be written as follows:</p>\n\n<pre><code>sub unpack_vint32 {\n   for (shift) {\n      if (/^[\\x00-\\x3F]/) {\n         return if length() &lt; 2;\n         my $n = unpack('L&gt;', \"\\x00\\x00\".substr($_, 0, 2, '')) &amp; 0x3FFF;\n         $n -= 0x4000 if $n &amp; 0x2000;\n         return $n;\n      }\n      elsif (/^[\\x40-\\x7F]/) {\n         return if length() &lt; 3;\n         my $n = unpack('L&gt;', \"\\x00\".substr($_, 0, 3, '')) &amp; 0x3FFFFF;\n         $n -= 0x400000 if $n &amp; 0x200000;\n         return $n;\n      }\n      elsif (/^[\\x80-\\xBF]/) {\n         return if length() &lt; 4;\n         my $n = unpack('L&gt;', substr($_, 0, 4, '')) &amp; 0x3FFFFFFF;\n         $n -= 0x40000000 if $n &amp; 0x20000000;\n         return $n;\n      }\n      elsif (/^\\xC0/) {\n         return if length() &lt; 5;\n         return unpack('xl&gt;', substr($_, 0, 5, ''));\n      }\n      elsif (length() == 0) {\n         return;\n      }\n   }\n\n   croak(\"Bad data\");\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>my $s =\n   join '',\n      map { pack_vint32($_) }\n         map { $_, -$_ }\n            130, 555, 0x12, 0x345678, 0x12345678;\n\nsay length($s);\nsay sprintf(\"%v02X\", $s);\n\nwhile ( my ($n) = unpack_vint32($s) ) {\n   say $n;\n}\n\ncroak(\"Bad data\") if length($s);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>28\n00.82.3F.7E.02.2B.3D.D5.00.12.3F.EE.80.34.56.78.BF.CB.A9.88.92.34.56.78.AD.CB.A9.88\n----- ----- ----- ----- ----- ----- ----------- ----------- ----------- -----------\n130     |     |     |     |     |        |           |           |           |\n-130 ---+     |     |     |     |        |           |           |           |\n555 ----------+     |     |     |        |           |           |           |\n-555 ---------------+     |     |        |           |           |           |\n18 -----------------------+     |        |           |           |           |\n-18 ----------------------------+        |           |           |           |\n3430008 ---------------------------------+           |           |           |\n-3430008 --------------------------------------------+           |           |\n305419896 -------------------------------------------------------+           |\n-305419896 ------------------------------------------------------------------+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523557315, "post_id": 49803175, "comment_id": 86621458, "body": "@ikegami, I love your answer, but I think we are reading the question differently. The way I understand it, the OP wants the hex representation of a number using the minimum number of bytes. For <code>-555</code> wants <code>FDD5</code> and not <code>FFFFFDD5</code>. That&#180;s represented with two bytes, which in hex is four bytes as you point out. Of course, I may be wrong..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523561623, "post_id": 49803175, "comment_id": 86623695, "body": "Your solution converts <code>-555</code> into 4 bytes, but I believe the wants it to be converted into 2 bytes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523565005, "post_id": 49803175, "comment_id": 86625560, "body": "Your program lies about the sizes. For example, <code>-555</code> takes four bytes in your program, but the program claims it only takes two. To get the correct size, use <code>length($s)</code>. (This was fixed, but the fix got reverted???)"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523565272, "post_id": 49803175, "comment_id": 86625670, "body": "The size returned is the minimum number of bytes required to store the number in binary using two&#39;s complement. That is used to produce the string with the same number represented in hexadecimal."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523565316, "post_id": 49803175, "comment_id": 86625690, "body": "Re &quot;<i>The size returned is the minimum number of bytes required to store the number in binary using two&#39;s complement.</i>&quot;, I know, and that doesn&#39;t contradict anything I said. Perhaps you should change the output to &quot;-10 would take 1 byte(s) as a two&#39;s-completement number&quot;? But it&#39;s surely best to report what the program actually does instead of what it could do."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": -1, "last_activity_date": 1523897472, "last_edit_date": 1523897472, "creation_date": 1523556008, "answer_id": 49803175, "question_id": 49798503, "link": "https://stackoverflow.com/questions/49798503/minimum-bytes-required-to-represent-a-signed-hexadecimal-value/49803175#49803175", "title": "Minimum bytes required to represent a signed hexadecimal value", "body": "<p>I think the question wants the string (ASCII) representation in hexadecimal that takes the minimum number of bytes in two's complement. I agree with comments and another answer regarding this being ambiguous, but it may be fine for \"human\" consumption. In this case:</p>\n\n<pre><code>sub min_bytes {\n  my $n = shift;\n\n  my $s = 256; # Fits in one byte\n  my $i = 1;   # Bytes counter\n  while( 1 ) {\n    if( $n &lt; 0 &amp;&amp; -$n &lt;= $s / 2 ) {\n      return $i;\n    }\n    elsif( $n &gt;= 0 &amp;&amp; $n &lt; ($s / 2) - 1 ) {\n      return $i;\n    }\n    $s *= 256;\n    $i++;\n  }\n}\n\nsub to_hex {\n  my $n = shift;\n\n  my $l = min_bytes($n);\n  my $h = $n &gt; 0 ? $n : (256 ** $l) + $n;\n\n  my $s = '';\n  for( my $i = 0; $i &lt; $l; $i++ ) {\n    $s = unpack('H2', pack('C', $n % 256)) . $s;\n    $n = $n &gt;&gt; 8;\n  }\n\n  return $s;\n}\n\n# Let's try a few numbers\nmy @numbers = (-10, -555, -100000, -100000000, -10000000000, -10000000000000);\n\nfor my $n (@numbers) {\n  my $l = min_bytes($n);\n  my $h = to_hex($n);\n  print $n, \" takes \", $l, \" byte(s) and looks like \", uc $h, \"\\n\";\n}\n</code></pre>\n\n<p>I have tried not to use anything complicated. The bit <code>unpack('H2', pack('C', $n % 256))</code> converts a single byte decimal number into hex.</p>\n\n<p>This prints:</p>\n\n<pre><code>-10 takes 1 byte(s) and looks like F6\n-555 takes 2 byte(s) and looks like FDD5\n-100000 takes 3 byte(s) and looks like FE7960\n-100000000 takes 4 byte(s) and looks like FA0A1F00\n-10000000000 takes 5 byte(s) and looks like FDABF41C00\n-10000000000000 takes 6 byte(s) and looks like F6E7B18D6000\n</code></pre>\n\n<p>The code uses Perl arithmetic, which may give wrong results for bigger numbers than the internal representation's precision.</p>\n"}], "owner": {"reputation": 1, "user_id": 4968049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d24dd9e246dbd5e1ad48d39623dbe9b?s=128&d=identicon&r=PG&f=1", "display_name": "Pallavi Prabhu", "link": "https://stackoverflow.com/users/4968049/pallavi-prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523897472, "creation_date": 1523541366, "last_edit_date": 1523550293, "question_id": 49798503, "link": "https://stackoverflow.com/questions/49798503/minimum-bytes-required-to-represent-a-signed-hexadecimal-value", "title": "Minimum bytes required to represent a signed hexadecimal value", "body": "<p>Can anyone tell me is there any function in Perl which converts signed decimal to Hex with minimum number of bytes.</p>\n\n<p>ex: -555(dec) => FFFFFDD5(hex) [ converted using $Hex = sprintf( \"%X\", -555 )]</p>\n\n<p>I want the result to be FDD5 instead of FFFFFDD5.</p>\n\n<p>2 bytes are enough to represent -555.But i am getting 4 bytes conversion.</p>\n\n<p>Please help!</p>\n"}, {"tags": ["linux", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1523538954, "post_id": 49797238, "comment_id": 86609612, "body": "<a href=\"https://stackoverflow.com/tags/sed/info\">stackoverflow.com/tags/sed/info</a> page has couple of links related to this: <a href=\"https://stackoverflow.com/questions/5864146/use-slashes-in-sed-replace\" title=\"use slashes in sed replace\">stackoverflow.com/questions/5864146/use-slashes-in-sed-repla&zwnj;&#8203;ce</a> and <a href=\"https://stackoverflow.com/questions/29613304/is-it-possible-to-escape-regex-metacharacters-reliably-with-sed\" title=\"is it possible to escape regex metacharacters reliably with sed\">stackoverflow.com/questions/29613304/&hellip;</a>"}, {"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "edited": false, "score": 1, "creation_date": 1523539077, "post_id": 49797238, "comment_id": 86609722, "body": "Yes, but it just moves the problem to another char I can&#39;t use."}, {"owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1523539182, "post_id": 49797238, "comment_id": 86609801, "body": "@hek2mgl No real reason I suppose. Now fixed."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1523539443, "post_id": 49797238, "comment_id": 86610002, "body": "You can use <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>\\Q...\\E</code></a> in Perl. If I understand your intentions correctly, try e.g. <code>function comment { ( perl -i -slpe &#39;s&#47;^(?=\\Q$string\\E)&#47;$add&#47;&#39; -- -string=&quot;$1&quot; -add=&quot;$2&quot; $3 ) }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 5, "last_activity_date": 1523541935, "last_edit_date": 1523541935, "creation_date": 1523539815, "answer_id": 49797888, "question_id": 49797238, "link": "https://stackoverflow.com/questions/49797238/use-anything-as-input-to-sed-or-perl-regex/49797888#49797888", "title": "Use anything as input to sed or Perl regex?", "body": "<p>Sure, use bash parameter substitution to escape the troublesome slash character:</p>\n\n<pre><code>comment () { sed -i \"/${1//\\//\\\\/}/ s/^/${2//\\//\\\\/} /\" \"$3\"; }\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>You need to protect slashes in both the pattern and the replacement parts.</li>\n<li>if your search is anchored, using \"g\" is pointless because the pattern can match at most once.</li>\n<li>quote all your variables: if the filename contains a space, your code breaks.</li>\n<li>one line functions require a semicolon before the closing brace.</li>\n</ul>\n\n<p>Demo</p>\n\n<pre><code>$ cat file\ntest/1/\ntest/2/\ntest/3/\n\n$ comment 'test/2' '//' file\n\n$ cat file\ntest/1/\n// test/2/\ntest/3/\n</code></pre>\n\n<hr>\n\n<p>I realized I'm not escaping regex special characters. The safest way is to escape any non-alphanumeric characters:</p>\n\n<pre><code>comment () { \n    local pattern=$(sed 's/[^[:alnum:]]/\\\\&amp;/g' &lt;&lt;&lt;\"$1\")\n    local replace=${2//\\//\\\\/}\n    local file=$3\n    sed -i \"/$pattern/ s/^/$replace /\" \"$file\"\n}\n</code></pre>\n\n<p>But since you want to do plain text matching, sed is probably not the best tool:</p>\n\n<pre><code>comment() { \n    perl -i -pse '$_ = \"$leader $_\" if index($_, $search) &gt; -1' -- \\\n        -search=\"$1\" \\\n        -leader=\"$2\" \\\n        \"$3\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1523635569, "last_edit_date": 1523635569, "creation_date": 1523567160, "answer_id": 49805851, "question_id": 49797238, "link": "https://stackoverflow.com/questions/49797238/use-anything-as-input-to-sed-or-perl-regex/49805851#49805851", "title": "Use anything as input to sed or Perl regex?", "body": "<p>Best to avoid generating code from a shell script.</p>\n\n<pre><code>comment () {\n   perl -i -pe'BEGIN { ($s,$r)=splice(@ARGV,0,2) }  $_ = \"$r $_\" if /\\Q$s/' -- \"$@\"\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>comment () {\n   s=\"$1\" r=\"$2\" perl -i -pe'$_ = \"$ENV{r} $_\" if /\\Q$ENV{s}/' -- \"$3\"\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>comment () {\n   perl -i -spe'$_ = \"$r $_\" if /\\Q$s/' -- -s=\"$1\" -r=\"$2\" -- \"$3\"\n}\n</code></pre>\n\n<p>Supports:</p>\n\n<ul>\n<li><p>Arbitrary text for the search string (including characters that might normally be special in regex patterns, such as <code>*</code>). This is achieved by using <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a> (as <code>\\Q</code>) to convert the text into a regex pattern that matches that text.</p></li>\n<li><p>Arbitrary file names (including those that contain spaces or start with <code>-</code>), thanks to proper quoting and the use of <code>--</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 49797888, "answer_count": 2, "score": 1, "last_activity_date": 1523635569, "creation_date": 1523537914, "last_edit_date": 1523539161, "question_id": 49797238, "link": "https://stackoverflow.com/questions/49797238/use-anything-as-input-to-sed-or-perl-regex", "title": "Use anything as input to sed or Perl regex?", "body": "<p>If I do</p>\n\n<pre><code>comment () { sed -i \"/$1/s/^/$2 /g\" $3 }\n\ncomment /dev/sysmsg '#' /tmp/1\ncomment '*.err'     '#' /tmp/1\n</code></pre>\n\n<p>with input file</p>\n\n<pre><code>*.err;kern.notice;auth.notice   /dev/sysmsg\nfff\nff\n</code></pre>\n\n<p>then it breaks, as <code>/</code> is used in <code>sed</code> as separator, and <code>*</code> also be treated as a regex.</p>\n\n<p><strong>Question</strong></p>\n\n<p>Is there a way to make it robust, so the input string in <code>$1</code> can contain whatever I want? Or would I need to move to Perl?</p>\n"}, {"tags": ["regex", "linux", "bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": true, "score": 5, "last_activity_date": 1523532293, "creation_date": 1523532293, "answer_id": 49795312, "question_id": 49795090, "link": "https://stackoverflow.com/questions/49795090/perls-k-in-bash-function/49795312#49795312", "title": "Perl&#39;s \\K in bash function", "body": "<p>Your <code>\\K</code> and <code>.*</code> are in wrong place altogether, what you have done is with <code>^$string.*\\K</code> is have matched the whole line(<code>.*</code> is greedy) before inserting the <code>\\K</code> quantifier so that means the insertion happens after the whole line match. You should change it to be more effective as</p>\n\n<pre><code>perl -i -slpe 's/^$string\\s+\\K.*/$add/' -- -string=\"$1\" -add=\"$2\" \"$3\"\n</code></pre>\n\n<p>This way you take care of the proper spacing after the search string and add the replacement part after that. Also you don't need the <code>function</code> keyword in shell functions and also drop the <code>()</code> altogether and just do</p>\n\n<pre><code>replace () {\n    perl -i -slpe 's/^$string\\s+\\K.*/$add/' -- -string=\"$1\" -add=\"$2\" \"$3\"\n}\n</code></pre>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 49795312, "answer_count": 1, "score": 3, "last_activity_date": 1523945560, "creation_date": 1523531696, "last_edit_date": 1523945560, "question_id": 49795090, "link": "https://stackoverflow.com/questions/49795090/perls-k-in-bash-function", "title": "Perl&#39;s \\K in bash function", "body": "<p>When I do</p>\n\n<pre><code>function replace { ( perl -i -slpe 's/^$string.*\\K/$add/' -- -string=\"$1\" -add=\"$2\" $3 ) } \n\nreplace 'passwd:' 'files dns' /tmp/1\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>passwd:     filesfiles dns\ngroup:      files\n</code></pre>\n\n<p>which should have been</p>\n\n<pre><code>passwd:     files dns\ngroup:      files\n</code></pre>\n\n<p>The input files is</p>\n\n<pre><code>passwd:     files\ngroup:      files\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Can anyone explain why it doesn't do that?</p>\n"}, {"tags": ["perl", "variables", "subroutine"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523528308, "post_id": 49791034, "comment_id": 86602197, "body": "Please explain more of what you are trying to do. Why are you using <code>$class</code> and returning <code>$self</code>? Why are you shifting two items off the stack, and only passing a single parameter in? An immediate fix: try <code>return $class</code> instead of <code>return $self</code>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1523537870, "post_id": 49791034, "comment_id": 86608764, "body": "<i>&quot;I read that In Perl, scalar variables cannot hold subroutines directly.&quot;</i> Yes, they can, scalars can hold references to subroutines, see <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>. Please explain why you would want to do so in this example?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1523538585, "post_id": 49794046, "comment_id": 86609330, "body": "<i>&quot;Also, I can&#39;t think of a situation in OO Perl where you&#39;d pass both $class and $self to a method&quot;</i> Maybe <code>Class-&gt;clone($class_ob)</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1523538699, "post_id": 49794046, "comment_id": 86609426, "body": "@Borodin: I didn&#39;t claim to be thinking particularly <i>*hard</i> :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1523528445, "creation_date": 1523528445, "answer_id": 49794046, "question_id": 49791034, "link": "https://stackoverflow.com/questions/49791034/hold-subroutine-response-and-set-to-variable-in-perl/49794046#49794046", "title": "Hold Subroutine response and set to variable in Perl", "body": "<p>You are passing one parameter into <code>thesub()</code>, but it expects two. So \"hello\" ends up in <code>$class</code> and <code>$self</code> ends up containing nothing (or, more precisely, <code>undef</code>). The easiest fix is to remove the line which assigns to <code>$class</code>. But I'm not sure if that's the best fix as I'm pretty unclear on what you're actually trying to do here.</p>\n\n<p>The variable names (<code>$class</code>, <code>$self</code>) make me think you're reading a tutorial about object-oriented programming. But there's no OO going on here.</p>\n\n<p>Also, I can't think of a situation in OO Perl where you'd pass both <code>$class</code> and <code>$self</code> to a methd.</p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "edited": false, "score": 0, "creation_date": 1523535269, "post_id": 49794113, "comment_id": 86606754, "body": "Hi @\u0421\u0443\u0445\u043e\u043927, I want to <b>used this in package</b>, in main script I have,   <code>use Mymodule;</code> <code>Mymodule::thesub(&quot;hello from main script\\n&quot;);</code>   <code>package Mymodule;</code> ..........  I get this error:   <b>Use of uninitialized value $testvar in print line</b>  can you please suggest me how to fixed ?"}, {"owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "edited": false, "score": 0, "creation_date": 1523535388, "post_id": 49794113, "comment_id": 86606833, "body": "How to send value from main script to that function without get undef value return ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "edited": false, "score": 3, "creation_date": 1523537504, "post_id": 49794113, "comment_id": 86608475, "body": "@Imylor: You description is unclear and it&#39;s a bad idea to try and share code in comments. Please ask a new question, including this information."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1523528665, "creation_date": 1523528665, "answer_id": 49794113, "question_id": 49791034, "link": "https://stackoverflow.com/questions/49791034/hold-subroutine-response-and-set-to-variable-in-perl/49794113#49794113", "title": "Hold Subroutine response and set to variable in Perl", "body": "<p>You don't have package, so I'll assume you don't want to use a class,</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n\nsub thesub {\n    state $stored;\n\n    $stored = shift if @_;\n    return $stored;\n}\n\nthesub(\"hello\");\nprint thesub();\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 49794113, "answer_count": 2, "score": 0, "last_activity_date": 1523528665, "creation_date": 1523519990, "last_edit_date": 1523527745, "question_id": 49791034, "link": "https://stackoverflow.com/questions/49791034/hold-subroutine-response-and-set-to-variable-in-perl", "title": "Hold Subroutine response and set to variable in Perl", "body": "<p>My code:</p>\n\n<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\n\nthesub(\"hello\");\n\nsub thesub {\n   my $class = shift;\n   my $self = shift;\n   return $self;\n\n}\nmy $testvar = thesub();\n\nprint $testvar;\n</code></pre>\n\n<p>$testvar print nothing, <strong>I want to print  hello.</strong>\nI have intent to change thesub() to \\&amp;thesub, but not work.</p>\n\n<p>I read that In Perl, scalar variables cannot hold subroutines directly.</p>\n\n<p>How can I fixed this case ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "perldoc", "perl-core"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523512994, "post_id": 49787980, "comment_id": 86593005, "body": "Re &quot;<i>And then it never actually bothers to explain the Special Case path handling for &quot;./&quot; or &quot;../&quot; - an important omission!</i>&quot;, Huh, &quot;<code>do &#39;.&#47;stat.pl&#39;</code> is largely like <code>eval `cat stat.pl`;</code>&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1523513177, "post_id": 49787980, "comment_id": 86593085, "body": "Re &quot;<i>From whose perspective is &quot;./&quot; anyway</i>&quot;, Perl just passes the path to the OS, to whom <code>.</code> references the CWD."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1523513271, "post_id": 49787980, "comment_id": 86593125, "body": "Re &quot;<i>Are there security risks to be aware of?</i>&quot;, Forget security risks, how about getting it to work at all. Don&#39;t make assumptions about the CWD. <a href=\"https://stackoverflow.com/questions/46549671/doesnt-perl-include-current-directory-in-inc-by-default/46550384#46550384\">Solutions</a>. (And yes, it&#39;s a security risk for setuid scripts.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1523514828, "post_id": 49787980, "comment_id": 86593910, "body": "The questions being answered, I&#39;d like to add -- why would you want to do that? Just use the full path properly, like in the link from ikegami for instance."}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1523873321, "post_id": 49791928, "comment_id": 86723785, "body": "related: <a href=\"https://stackoverflow.com/questions/5969417/why-is-it-a-bad-idea-to-write-configuration-data-in-code\" title=\"why is it a bad idea to write configuration data in code\">stackoverflow.com/questions/5969417/&hellip;</a>"}, {"owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 0, "creation_date": 1525183450, "post_id": 49791928, "comment_id": 87253070, "body": "It&#39;s funny that <code>do</code> to parse a config file is apparently frowned upon now... because I got the idea specifically from the official Perl documentation!  <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/do.html</a>  (scroll to the bottom)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1525184281, "post_id": 49791928, "comment_id": 87253487, "body": "That&#39;s an example of how you <i>can</i> use it, not to say that you must. Both <code>do</code> and <code>eval</code> have a place - they <i>do</i> let you run almost arbitrary/user specified code. By doing that, you&#39;re introducing a hazard into your code - sometimes it&#39;s worth the risk, but for something simple like &#39;load a config file&#39;... it&#39;s simply not worth a run time &#39;exploding messily&#39; when a simpler and safer approach is available."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1523523243, "last_edit_date": 1523523243, "creation_date": 1523522689, "answer_id": 49791928, "question_id": 49787980, "link": "https://stackoverflow.com/questions/49787980/perl-do-with-relative-path-beginning-with-or/49791928#49791928", "title": "Perl &quot;do&quot;, with relative path beginning with &quot;.&quot; or &quot;..&quot;", "body": "<p>OK, so - to start with, I'm not sure your <code>config.pl</code> is really the right approach - it's not <code>perl</code> for starters, because it doesn't compile. Either way though, trying to evaluate stuff to 'parse config' isn't a great plan generally - it's rather prone to unpleasant glitches and security flaws, so should be reserved for when it's needed.</p>\n\n<p>I would urge you to do it differently by either:</p>\n\n<h2>Write it as a module</h2>\n\n<p>Something like this:</p>\n\n<pre><code>package MyConfig;\n\n# Configuration file for main script\nour %config = (\n   username       =&gt; \"username\",\n   password       =&gt; \"none_of_your_business\",\n   favorite_color =&gt; \"0x0000FF\",\n);\n</code></pre>\n\n<p>You could then in your main script:</p>\n\n<pre><code>use MyConfig; #note - the file needs to be the same name, and in @INC\n</code></pre>\n\n<p>and access it as:</p>\n\n<pre><code>print $MyConfig::config{username},\"\\n\"; \n</code></pre>\n\n<p>If you can't put it in the existing <code>@INC</code> - which there may be reasons you can't, <code>FindBin</code> lets you use paths relative to your script location:</p>\n\n<pre><code>use FindBin; \nuse lib \"$FindBin::Bin\"; \nuse MyConfig;\n</code></pre>\n\n<h2>Write your 'config' as a defined parsable format, rather than executable code.</h2>\n\n<h3>YAML</h3>\n\n<p><code>YAML</code> is very solid for a config file particularly:</p>\n\n<pre><code>use YAML::XS;\n\nopen ( my $config_file, '&lt;', 'config.yml' ) or die $!; \nmy $config = Load ( do { local $/; &lt;$config_file&gt; });\n\nprint $config -&gt; {username};\n</code></pre>\n\n<p>And your config file looks like:</p>\n\n<pre><code>username: \"username\"\npassword: \"password_here\"\nfavourite_color: \"green\"\nair_speed_of_unladen_swallow: \"african_or_european?\"\n</code></pre>\n\n<p>(YAML also supports multi-dimensional data structures, arrays etc. You don't seem to need these though.)</p>\n\n<h3>JSON</h3>\n\n<p><code>JSON</code> based looks much the same, just the input is:</p>\n\n<pre><code>{\n  \"username\": \"username\",\n  \"password\": \"password_here\",\n  \"favourite_color\": \"green\",\n  \"air_speed_of_unladen_swallow\": \"african_or_european?\"\n}\n</code></pre>\n\n<p>You read it with:</p>\n\n<pre><code>use JSON;\nopen ( my $config_file, '&lt;', 'config.json' ) or die $!; \nmy $config = from_json ( do { local $/; &lt;$config_file&gt; });\n</code></pre>\n\n<h2>Using relative paths to config:</h2>\n\n<p>You don't have to worry about <code>@INC</code> at all. You can simply use based on relative path... but a better bet would be to NOT do that, and use <code>FindBin</code> instead - which lets you specify \"relative to my script path\" and that's much more  robust.</p>\n\n<pre><code> use FindBin;\n open ( my $config_file, '&lt;', \"$FindBin::Bin/config.yml\" ) or die $!; \n</code></pre>\n\n<p>And then you'll know you're reading the one in the same directory as your script, no matter where it's invoked from. </p>\n\n<h3>specific questions:</h3>\n\n<blockquote>\n  <p>From whose perspective is \"./\" anyway: the Perl binary, the Perl script executed, CWD from the user's shell, or something else?</p>\n</blockquote>\n\n<p>Current working directory passes down through processes. So user's shell by default, unless the perl script does a <code>chdir</code></p>\n\n<blockquote>\n  <p>Are there security risks to be aware of?</p>\n</blockquote>\n\n<p>Any time you 'evaluate' something as if it were executable code (and <code>EXPR</code> can be) there's a security risk. It's probably not huge, because the script will be running as the user, and the user is the person who can tamper with <code>CWD</code>. The core risks are:</p>\n\n<ul>\n<li>user is in a 'different' directory where someone else has put a malicious thing for them to run. (e.g. imagine of 'config.pl' had <code>rm -rf /*</code> in it for example). Maybe there's a 'config.pl' in <code>/tmp</code> that they 'run' accidentally? \n\n<ul>\n<li>The thing you're <code>eval</code>ing has a typo, and breaks the script in funky and unexpected ways. (E.g. maybe it redefines <code>$[</code> and messes with program logic henceforth in ways that are hard to debug)</li>\n</ul></li>\n<li>script does anything in a privileged context. Which doesn't appear to be the case, but see the previous point and imagine if you're <code>root</code> or other privileged user. </li>\n</ul>\n\n<blockquote>\n  <p>Is this better or worse than modifying @INC and just using a base filename?</p>\n</blockquote>\n\n<p>Worse IMO. Actually just don't modify <code>@INC</code> at all, and use a full path, or relative one using <code>FindBin</code>. And don't <code>eval</code> things when it's not necessary. </p>\n"}], "owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 49791928, "answer_count": 1, "score": 3, "last_activity_date": 1523523243, "creation_date": 1523507122, "last_edit_date": 1592644375, "question_id": 49787980, "link": "https://stackoverflow.com/questions/49787980/perl-do-with-relative-path-beginning-with-or", "title": "Perl &quot;do&quot;, with relative path beginning with &quot;.&quot; or &quot;..&quot;", "body": "<p>I'm trying to use Perl's <code>do EXPR</code> function as a poor man's config parser, using a second .pl file that just returns a list as configuration information.  (I think this is probably the ideal use for <code>do</code>, not least because I can write &quot;<code>do or die</code>&quot; in my code.)  Here's an example:</p>\n<p><em>main.pl</em></p>\n<pre><code># Go read the config file\nmy %config = do './config.pl';\n\n# do something with it\n$web_object-&gt;login($config{username}, $config{password});\n</code></pre>\n<p><em>config.pl</em></p>\n<pre><code># Configuration file for main script\n(\n  username =&gt; &quot;username&quot;,\n  password =&gt; &quot;none_of_your_business&quot;,\n  favorite_color =&gt; &quot;0x0000FF&quot;,\n);\n</code></pre>\n<p>Reading <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">Perldoc for <code>do</code></a> gives a lot of helpful advice about relative paths - searching @INC and modifying %INC, special warnings about 5.26 not searching &quot;.&quot; any more, etc.  But it also has these bits:</p>\n<blockquote>\n<p># load the exact specified file <strong>(./ and ../ special-cased)</strong>...</p>\n<hr />\n<p>Using do with a relative path <strong>(except for ./ and ../)</strong>, like...</p>\n</blockquote>\n<p>And then it never actually bothers to explain the Special Case path handling for &quot;./&quot; or &quot;../&quot; - an important omission!</p>\n<p>So my question(s) are all variations on &quot;what <em>really</em> happens when you <code>do './file.pl';</code>&quot;?  For instance...</p>\n<ul>\n<li>Does this syntax still work in 5.26, though CWD is removed from @INC?</li>\n<li>From whose perspective is &quot;./&quot; anyway: the Perl binary, the Perl script executed, CWD from the user's shell, or something else?</li>\n<li>Are there security risks to be aware of?</li>\n<li>Is this better or worse than modifying @INC and just using a base filename?</li>\n</ul>\n<p>Any insight is appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1523507366, "post_id": 49787840, "comment_id": 86591041, "body": "Since your replace variable contains Perl code, try to add an <code>e</code> modifier to your regex: <code>my $string =~ s&#47;$find&#47;$replace&#47;isge</code>"}, {"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1523509756, "post_id": 49787840, "comment_id": 86591754, "body": "Hi Hakon thanks for answer, I checked your code and modify the above code. but still not working. It&#39;s given the error Use of uninitialized value $1 in string"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1523510313, "post_id": 49787840, "comment_id": 86591945, "body": "Yes you are right. You need to double the <code>e</code> modifier in this case"}], "answers": [{"tags": [], "owner": {"reputation": 1762, "user_id": 1388544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdcb9dac7a69173fef3d2182edb6547c?s=128&d=identicon&r=PG&f=1", "display_name": "D.B.", "link": "https://stackoverflow.com/users/1388544/d-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1523509774, "creation_date": 1523509774, "answer_id": 49788425, "question_id": 49787840, "link": "https://stackoverflow.com/questions/49787840/how-can-i-take-a-dynamic-variable-in-value-of-json/49788425#49788425", "title": "how can I take a dynamic variable in value of JSON?", "body": "<p>Some things to consider. First, the regex <code>([^&amp;]+)</code> may not give the desired result, as it is really going to capture and replace with the same capture.. resulting in the same output string (confusing I bet). </p>\n\n<p>Next, the replace string <code>\"$1\"</code>has to be quoted again and <code>e</code> modifier has to be doubled. </p>\n\n<p>So try this:</p>\n\n<pre><code>my $data =  \n{\n    \"find_replace\" =&gt; [\n        {   \"find\" =&gt; \"^(.+?)&amp;.*\",\n            \"replace\"=&gt; '\"$1\"'\n        }\n    ]\n};\n\nmy $find_replace_arr = $data-&gt;{'find_replace'};\nmy $string  = \"http://www.website.com/test.html&amp;code=236523\";\n\nmy $find = $find_replace_arr-&gt;[0]-&gt;{find};\nmy $replace = $find_replace_arr-&gt;[0]-&gt;{replace};\n\n$string =~ s/$find/$replace/isgee;\n\nprint $string;\nexit();\n</code></pre>\n\n<p>Notice the new regex, <code>^(.+?)&amp;.*</code> will match the entire string, but the capture <code>(...)</code> will be the result to replace.</p>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 49788425, "answer_count": 1, "score": 0, "last_activity_date": 1523515073, "creation_date": 1523506030, "last_edit_date": 1523515073, "question_id": 49787840, "link": "https://stackoverflow.com/questions/49787840/how-can-i-take-a-dynamic-variable-in-value-of-json", "title": "how can I take a dynamic variable in value of JSON?", "body": "<p>I need use the find and replace through regular expression like following </p>\n\n<pre><code>use strict;\nno strict 'refs';\nuse warnings;\nuse JSON;\nuse Encode qw( encode decode encode_utf8 decode_utf8);\n\nmy $data =  \n{\n    \"find_replace\" =&gt; [\n        {   \"find\" =&gt; \"(.+?)&amp;\",\n            \"replace\"=&gt; \"$1\"\n        }\n    ]\n};\n\nmy $find_replace_arr = $data-&gt;{'find_replace'};\nmy $string  = \"http://www.website.com/test.html&amp;code=236523\";\n\nmy $find = $find_replace_arr-&gt;[0]-&gt;{find};\nmy $replace = $find_replace_arr-&gt;[0]-&gt;{replace};\n\n$string =~ s/$find/$replace/isge;\n\nprint $string;\nexit();\n</code></pre>\n\n<p>in this code, I only want to \"<a href=\"http://www.website.com/test.html\" rel=\"nofollow noreferrer\">http://www.website.com/test.html</a>\" from the string.</p>\n\n<p>I am not able to get replace (key)'s value dynamically, which is $1.</p>\n\n<p>You can Run the above code.</p>\n\n<blockquote>\n  <p>This code throw the Error Use of uninitialized value $1 in string</p>\n</blockquote>\n"}]