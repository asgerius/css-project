[{"tags": ["perl", "unix", "awk"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564089832, "post_id": 57189103, "comment_id": 100926935, "body": "Voted to reopen, since (reasonable?) code has been added, with a statement on what it produces and what is wanted.  @Rv555 -- in the future, please always include what you tried and what it did or didn&#39;t do."}], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1564003265, "post_id": 57189337, "comment_id": 100892390, "body": "You should mention that&#39;s relying on undefined behavior (unparenthesized expression on the right side of input/output redirection) so it&#39;ll do different things in different awks. It&#39;ll also fail in all awks except gawk after creating about 15 output files with the &quot;Too many open files&quot; error. If I were you I&#39;d just say &quot;Using gawk...&quot; up front!"}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 1, "last_activity_date": 1564027587, "last_edit_date": 1564027587, "creation_date": 1563993627, "answer_id": 57189337, "question_id": 57189103, "link": "https://stackoverflow.com/questions/57189103/split-file-with-pattern-and-use-pattern-as-file-names/57189337#57189337", "title": "Split file with pattern and use pattern as file names", "body": "<p>This <code>gnu awk</code> should do:</p>\n\n<pre><code>awk -F\"[ &lt;]+\" '/&lt;p&gt; ([0-9][0-9]-){2}[0-9][0-9]/ {f=$3\" \"$4\" \"$5\" \"$6} {print &gt;f \".txt\"}' file\n\ncat \"21-01-72 XXXXX YYYY ZZZZ.txt\"\n  &lt;p&gt; 21-01-72  XXXXX YYYY ZZZZ&lt;/p&gt;\n\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n\ncat \"22-01-72 XXXXX YYYY ZZZZ.txt\"\n  &lt;p&gt; 22-01-72  XXXXX YYYY ZZZZ&lt;/p&gt;\n\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n</code></pre>\n\n<p>It will search for date section and use that as a file name.</p>\n"}], "owner": {"reputation": 1, "user_id": 11832080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee384af0e42ed305685b5e682a230c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Rv555", "link": "https://stackoverflow.com/users/11832080/rv555"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1564018571, "answer_count": 1, "score": -3, "last_activity_date": 1564028340, "creation_date": 1563992602, "last_edit_date": 1564028340, "question_id": 57189103, "link": "https://stackoverflow.com/questions/57189103/split-file-with-pattern-and-use-pattern-as-file-names", "closed_reason": "Needs more focus", "title": "Split file with pattern and use pattern as file names", "body": "<p>File contain data like below</p>\n\n<pre><code>  &lt;p&gt;\u00a021-01-72  XXXXX YYYY ZZZZ&lt;/p&gt;\n\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n\n  &lt;p&gt;\u00a022-01-72  XXXXX YYYY ZZZZ&lt;/p&gt;\n\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n\n  &lt;p&gt;\u00a023-01-72  XXXXX YYYY ZZZZ&lt;/p&gt;\n\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n</code></pre>\n\n<p>Used below command to split into multiple files where first line becomes file name</p>\n\n<pre><code>awk '/-72/{gsub(/&lt;p&gt; /,\"\"); gsub(\"&lt;/p&gt;\",\"\"); gsub(\" \",\"\"); fname=$0\".dat\"; next} {print &gt; fname}' data.xml\n</code></pre>\n\n<p>Got 3 files created with data </p>\n\n<pre><code>  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n</code></pre>\n\n<p>Now, all new files needs to append with <code>&lt;article&gt;</code> in beginning and <code>&lt;/article&gt;</code> in the end. How we can do it in the same awk command? or it is better to use separate commands later?</p>\n\n<p>Required file with data</p>\n\n<pre><code>&lt;article&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n  &lt;p&gt;Line Data XX YY ZZ&lt;/p&gt;\n&lt;/article&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 2, "creation_date": 1563975169, "post_id": 57183758, "comment_id": 100878876, "body": "This is very bad code. Please start by adding <code>use strict;</code> <code>use warnings;</code> at the top of your code and fix all the errors / warnings that you get"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1563978346, "post_id": 57183758, "comment_id": 100880878, "body": "See also <a href=\"https://stackoverflow.com/questions/40041051/two-perl-formats-on-a-page\">Two perl formats on a page</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1563982239, "post_id": 57183758, "comment_id": 100883184, "body": "I strongly recommend using <a href=\"http://search.cpan.org/perldoc?Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a> (a module for Perl 5) instead of the builtin forms."}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1563979464, "post_id": 57184762, "comment_id": 100881627, "body": "As a counterpoint, I use formats for formatted output fairly often; they&#39;re nicer than <code>printf</code> for anything non-trivial. Also handy for easy word wrapping, especially of multiple columns."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1563979705, "post_id": 57184762, "comment_id": 100881758, "body": "@Shawn: You might well find that <a href=\"https://metacpan.org/pod/Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a> is even better."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1563979605, "last_edit_date": 1563979605, "creation_date": 1563976834, "answer_id": 57184762, "question_id": 57183758, "link": "https://stackoverflow.com/questions/57183758/what-to-do-to-remove-error-in-following-script/57184762#57184762", "title": "what to do to remove error in following script", "body": "<p>Firstly, I have used formats exactly once in almost twenty-five years of writing Perl code. People just don't use them. Whatever it is that you're doing, you can almost certainly do it more easily without formats.</p>\n\n<p>Secondly, let's look at that first error message:</p>\n\n<blockquote>\n  <p>Use of comma-less variable list is deprecated at main.pl line 5. </p>\n</blockquote>\n\n<p>And your line 5 is:</p>\n\n<pre><code>$name $age\n</code></pre>\n\n<p>That looks a lot like a list of variables to me. And it's certainly comma-less. So perhaps a good first attempt at fixing the problem would be to add a comma.</p>\n\n<pre><code>$name, $age\n</code></pre>\n\n<p>And, yes, that fixes the error. You could also have looked at the examples in <a href=\"https://perldoc.perl.org/perlform.html\" rel=\"nofollow noreferrer\">the documentation</a> and seen that every list of variables in a format definition has the variables separated by commas.</p>\n\n<blockquote>\n  <p>sometimes I am also getting error that header 'abc_top' is not defined.why so?</p>\n</blockquote>\n\n<p>Presumably, because you seem to use 'abc_top' and 'abc_Top' interchangeably.</p>\n\n<p>I'm not sure about your final problem. But I'm pretty confident that it will go away if you fix the many problems that you'll find if you add <code>use strict</code> and <code>use warnings</code> to your code.</p>\n\n<p><strong>Update:</strong> Actually, my last paragraph was wrong. I mean, yes, you should still fix those issues. But that's not going to fix your main problem.</p>\n\n<p>The problem is that you've already printed a page header format (<code>EMPLOYEE_TOP</code>) at the top of your output page. So Perl won't print another until it thinks you're at a new page.</p>\n\n<p>The easiest way to trick Perl into thinking that is probably to set <code>$-</code> (the number of lines left on the current page) to zero. So add this line just before your second call to <code>write()</code>.</p>\n\n<pre><code>$- = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1563978923, "creation_date": 1563978923, "answer_id": 57185442, "question_id": 57183758, "link": "https://stackoverflow.com/questions/57183758/what-to-do-to-remove-error-in-following-script/57185442#57185442", "title": "what to do to remove error in following script", "body": "<p>Here is an example that worked for me:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ($name, $age, $salary);\n\nformat EMPLOYEE =\n===================================\n@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt; \n$name, $age\n@#####.##\n$salary\n===================================\n.\nformat EMPLOYEE_TOP =\n===================================\nName                    Age\n===================================\n.\nselect(STDOUT);\n$~ = \"EMPLOYEE\";\n$^ = \"EMPLOYEE_TOP\";\n$= =7;  # &lt;- Page length. A new top of page format is printed for each page.\nmy $n = \"prateek\";\nmy $a = \"24\";\nmy $s = \"31500.00\";\n$name = $n;\n$age = $a;\n$salary = $s;\nwrite;\n\nformat abc_Top =\n-----------------------------------------\nname\n-----------------------------------------\n.\nformat abc =\n@|||||||||||||||||||||||||\n$name\n.\n#$- = 0;  # &lt;-- Set this to zero to force a new page (so top of page format is printed)\n$~ = \"abc\";\n$^ = \"abc_Top\";\nmy $na = \"ankur\";\n$name = $na;\nwrite;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>===================================\nName                    Age\n===================================\n===================================\nprateek                 24\n 31500.00\n===================================\n\n-----------------------------------------\nname\n-----------------------------------------\n          ankur\n</code></pre>\n\n<p>See also <a href=\"https://metacpan.org/pod/Perl6::Form\" rel=\"nofollow noreferrer\">Perl6::Form</a> for more advanced formatting.</p>\n"}], "owner": {"reputation": 11, "user_id": 11790327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2lxNCx6zyfQ/AAAAAAAAAAI/AAAAAAAAAi0/T_ArTURvGm8/photo.jpg?sz=128", "display_name": "PRATEEK MISHRA", "link": "https://stackoverflow.com/users/11790327/prateek-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1563979605, "creation_date": 1563973774, "question_id": 57183758, "link": "https://stackoverflow.com/questions/57183758/what-to-do-to-remove-error-in-following-script", "title": "what to do to remove error in following script", "body": "<p>I am new to perl .I am getting an error when I am trying to define second format after first one .please go through to my script and point out to me what mistake I have made and help me to resolve that error.</p>\n\n<p>sometimes I am also getting error that header 'abc_top' is not defined.why so?</p>\n\n<pre><code>#!/usr/bin/perl\nformat EMPLOYEE =\n===================================\n@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt; \n$name $age\n@#####.##\n$salary\n===================================\n.\nformat EMPLOYEE_TOP =\n===================================\nName                    Age\n===================================\n.\nselect(STDOUT);\n$~ = EMPLOYEE;\n$^ = EMPLOYEE_TOP;\n$= =8;\n$n=\"prateek\";\n$a=\"24\";\n$s=\"31500.00\";\n$name = $n;\n$age=$a;\n$salary=$s;\nwrite;\nformat abc_Top=\n----------------------------------------\nname\n----------------------------------------\n.\nformat abc=\n@|||||||||||||||||||||||||\n$name\n.\nselect(STDOUT);\n$~=abc;\n$^=abc_top;\n$na=\"ankur\";\n$name=$na;\nwrite;\n</code></pre>\n\n<p>expected result:header of second format should be present .</p>\n\n<p>actual result:</p>\n\n<pre><code>===================================\nName                    Age\nSalary\n===================================\n===================================\nprateek                 24\n 31500.00\n===================================\n          ankur\nUse of comma-less variable list is deprecated at main.pl line 5.\n</code></pre>\n"}, {"tags": ["perl", "design-patterns", "fasta"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1563961659, "post_id": 57179282, "comment_id": 100871062, "body": "What kind of problems are you encountering? Are there error messages? Does it do something else than what you expect? Please be more specific. You can <a href=\"https://stackoverflow.com/posts/57179282/edit\">edit</a> your question to add details."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1563961686, "post_id": 57179282, "comment_id": 100871076, "body": "In the line <code>check_pattern($content) if $content=$otu;</code> you are <i>assigning</i> <code>$otu</code> to <code>$content</code>. That is always true (unless <code>$otu</code> is <code>undef</code>, <code>&quot;&quot;</code> or <code>0</code>) and changes the value of <code>$content</code>."}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1563961759, "post_id": 57179282, "comment_id": 100871121, "body": "you didnt declared the variable <code>$filename</code> in the following code:  <code>sub check_otu {     my $content = shift;     open(my $fh, &#39;&lt;&#39; , $filename) || die &quot;File not found: $!&quot;;</code> you may change it to <code>open(my $fh, &#39;&lt;&#39; , $content)</code>, because <code>$content</code> is actually <code>&quot;file.txt&quot;</code>"}, {"owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "edited": false, "score": 0, "creation_date": 1563962967, "post_id": 57179282, "comment_id": 100871840, "body": "in line : check_pattern($content) if $content=$otu , I am attempting to check if input name $otu is found in the file $content"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1563964410, "post_id": 57179282, "comment_id": 100872715, "body": "It would be helpful if you could explain shortly what is a &quot;motif&quot; and a &quot;cite&quot; is to help others that are not familiar with bioinformatics."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1563965793, "post_id": 57179282, "comment_id": 100873521, "body": "Using a fasta reader module like the one in bioperl would make the first part really easy (And there&#39;s probably something in bioperl for the second part too)"}, {"owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "edited": false, "score": 0, "creation_date": 1563966098, "post_id": 57179282, "comment_id": 100873695, "body": "the expression motifs is here similar to pattern, that means a specific combination of letters ordered in a sequence. Now the term is replaced in the question"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1563967335, "creation_date": 1563967335, "answer_id": 57181751, "question_id": 57179282, "link": "https://stackoverflow.com/questions/57179282/find-pattern-mulifasta-list-based-on-user-input-in-perl/57181751#57181751", "title": "Find pattern mulifasta list based on user input in Perl", "body": "<p>bioperl <a href=\"https://bioperl.org/howtos/SeqIO_HOWTO.html\" rel=\"nofollow noreferrer\">makes it easy</a> to read fasta files. Use it instead of trying to re-invent the wheel.</p>\n\n<p>The special variables <code>@-</code> and <code>@+</code> hold the indexes of the start and end of the last matched pattern (And any capturing groups inside it). You'll need that for your third bit.</p>\n\n<p>You might end up with something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse Bio::SeqIO;\n\nmy ($file, $otu) = @ARGV;\nmy $fasta = Bio::SeqIO-&gt;new(-file =&gt; $file, -format =&gt; 'fasta');\nmy $found = 0;\n\nwhile (my $seq = $fasta-&gt;next_seq()) {\n  next unless $seq-&gt;primary_id() eq $otu;\n  $found = 1;\n  my $s = $seq-&gt;seq();\n  while ($s =~ m/[NC].[CT]/g) {\n    my $start = $-[0];\n    my $stop = $+[0] - 1; # Index in this array is 1 past the last character\n    say \"$start $stop\";\n  }\n}\n\nsay \"$otu not found\" unless $found;\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl otu.pl sample.fasta otu2\n15 17\n31 33\n37 39\n40 42\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 11562346, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HbOdHQ-ZcI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfC6LLHMkb1SiGuqx_42piI2fmZCw/mo/photo.jpg?sz=128", "display_name": "RebiKirl", "link": "https://stackoverflow.com/users/11562346/rebikirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57181751, "answer_count": 1, "score": 1, "last_activity_date": 1563967335, "creation_date": 1563959512, "last_edit_date": 1563965805, "question_id": 57179282, "link": "https://stackoverflow.com/questions/57179282/find-pattern-mulifasta-list-based-on-user-input-in-perl", "title": "Find pattern mulifasta list based on user input in Perl", "body": "<p>I am trying to fix a Perl code. Given the following \"file.txt\":</p>\n\n<pre><code>&gt;otu1  \nAACGCCTTTCCNGGATGGCAAAATTTNTNGTAAA\nAGGGCACCCANTTCTGGCTCGAAA  \n&gt;otu2\nNNAATCGGNNNGGGGCGTAANGAGGTTNCGGCACGG\nTNCCCGTTTANCG\n&gt;otu3   \nCTGGNATAAAAAANNNNTACTTAA\n</code></pre>\n\n<p>After providing a otu number as argument (i.e. otu2) when calling the program, \nI want to first (1) check if that otu is present in the file.txt, \nthen (2) find the pattern [NC].[CT] (element N or C, followed by any element . and followed by an element C or T) within the otu sequence, and finally\n(3) print out the start\u2010 and end\u2010position of every site.</p>\n\n<p>For the first two questions I am trying with the following code but I am encountering problems by integrating subroutines. </p>\n\n<pre><code>\n#!/usr/bin/perl -w\n\nuse warnings;\nuse strict;\n\n$otu = $ARGV[0];   \ncheck_otu(\"file.txt\");\n\nsub check_otu {\n    my $content = shift;\n    open(my $fh, '&lt;' , $content) || die \"File not found: $!\";\n    my $content;    \n\n    while( my $line = &lt;$fh&gt; ) {\n        if ( $line =~ /^&gt;/ ) {\n            check_pattern($content) if $content=$otu;\n            $content = $line;\n        }\n        else {\n            $content .= $line;\n        }\n    }\n    check_motifs($content);\n}\n\n}\nsub check_pattern{\n    my $fasta = $content;\n    $count++ if count_pattern($fasta);\n}\nsub count_pattern {\n    my $chain = $content;\n    my @all = $chain =~ /([NC].[CT])/g;\n    scalar @all;\n}\n</code></pre>\n\n<p>I got these errors:</p>\n\n<pre><code>\"my\" variable $content masks earlier declaration in same scope at proof.pl line 12.\nName \"main::count\" used only once: possible typo at proof.pl line 28.\nUndefined subroutine &amp;main::check_motifs called at proof.pl line 23, &lt;$fh&gt; line 8.\n</code></pre>\n\n<p>Would you have any suggestion? Any hint for the third question?\nThanks for your help</p>\n"}, {"tags": ["regex", "perl", "parsing"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1563945832, "post_id": 57175749, "comment_id": 100863530, "body": "Regex is sort of what you would want to use going in the opposite direction.  That is, the pattern <code>You can&#39;t make (?:omlets|omlettes|an omlet|an omelette) without breaking eggs</code> is what you would use to match any of the four variants."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1563946027, "post_id": 57175749, "comment_id": 100863597, "body": "Yeah, I guess to extract is harder than to match. :)"}, {"owner": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1563946440, "post_id": 57175749, "comment_id": 100863730, "body": "There is a Java library called <a href=\"https://code.google.com/archive/p/xeger/\" rel=\"nofollow noreferrer\">Xeger</a> that does this kind of thing."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1563946652, "post_id": 57175749, "comment_id": 100863793, "body": "Xegger looks interesting. I&#39;ll look into this. Thanks for the recommendation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563986818, "post_id": 57175749, "comment_id": 100885591, "body": "This is not a duplicate of that page; further, the solution for that question doesn&#39;t even work here as there is no regex to test against here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563987159, "post_id": 57175749, "comment_id": 100885756, "body": "As you write code to break the string by <code>(or</code>  you&#39;ll find the possibility of nested parens inside the <code>(or...)</code> to be a problem: how to find the closing paren? That&#39;s where a module like <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> can help, but there&#39;s still going to be some good work to do.  If nested parens were disallowed (so, no <code>(or ... ab(c(d)))</code> but only one level of parens inside <code>(or...)</code> can happen), which is  a reasonable possibility, then you can parse the <code>(or...</code> away to find the closing paren.  This is still a nice little parser that you need to write."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563989339, "post_id": 57175749, "comment_id": 100886714, "body": "This had been closed as a duplicate of an interesting page <a href=\"https://stackoverflow.com/q/46796737/4653379\">perl to generate string to match regex</a>.  I voted to &quot;reopen,&quot; since I don&#39;t think it&#39;s a dupe as I stated in a comment above, but I didn&#39;t realize that my vote alone would do it; if anybody has a problem with mine reopening please let me know."}], "answers": [{"comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 5, "creation_date": 1563946091, "post_id": 57175810, "comment_id": 100863621, "body": "This doesn&#39;t answer the question, and regex alone can&#39;t extract the various combinations which your pattern is using.  Please re-read the question."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 0, "last_activity_date": 1563946265, "last_edit_date": 1592644375, "creation_date": 1563945996, "answer_id": 57175810, "question_id": 57175749, "link": "https://stackoverflow.com/questions/57175749/parse-strings-of-certain-patterns-extract-multiple-phrases-from-one-phrase/57175810#57175810", "title": "Parse strings of certain patterns: Extract multiple phrases from one phrase", "body": "<p>Maybe yes, it would be possible with an expression similar to:</p>\n<pre><code>You can't make (?:an)?\\s*\\b(?:omelett?e?s?)\\b\\swithout breaking eggs\n</code></pre>\n<hr />\n<p>The expression is explained on the top right panel of <a href=\"https://regex101.com/r/LkAUfx/1/\" rel=\"nofollow noreferrer\">regex101.com</a>, if you wish to explore/simplify/modify it, and in <a href=\"https://regex101.com/r/LkAUfx/1/debugger\" rel=\"nofollow noreferrer\">this link</a>, you can watch how it would match against some sample inputs, if you like.</p>\n<h3>Test</h3>\n<pre><code>use strict;\nuse warnings;\n\nmy $str = 'You can\\'t make omelets without breaking eggs';\nmy $regex = qr/^You can't make (?:an)?\\s*\\b(?:omelett?e?s?)\\b\\swithout breaking eggs$/p;\n\nif ( $str =~ /$regex/g ) {\n  print &quot;${^MATCH}&quot;;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1563950344, "post_id": 57176389, "comment_id": 100865237, "body": "Thanks for your answer. @hashtagjet One thing though, <code>You can&#39;t make omelet(te)s(or an omelet(te)) without breaking eggs</code> is one of many examples of similar pattern. i.e. there could be multiple <code>(or\u2026)</code> in one phrase."}, {"owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "reply_to_user": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1563961551, "post_id": 57176389, "comment_id": 100871007, "body": "I will make an edit for multiple or but using that ()|() method."}], "tags": [], "owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "is_accepted": false, "score": 3, "last_activity_date": 1563963046, "last_edit_date": 1563963046, "creation_date": 1563949042, "answer_id": 57176389, "question_id": 57175749, "link": "https://stackoverflow.com/questions/57175749/parse-strings-of-certain-patterns-extract-multiple-phrases-from-one-phrase/57176389#57176389", "title": "Parse strings of certain patterns: Extract multiple phrases from one phrase", "body": "<p>Edited with updated code. Original message after &lt;=====> line. </p>\n\n<p>Here is an updated code for multiple or, but again using the parenthesis and pipe method.  </p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $string = \"You can't make (omelet(te)s)|(an omelet(te))|(the omlet(te))|(scrambbled egg(s)) without breaking eggs\";\nmy @count = $string=~m/\\|/g;\nmy $x = scalar @count;\nmy $a= '\\\\|(\\\\(.+\\\\))';\nmy $search='(\\\\(.+\\\\))';\n## Build your search string\nfor (my $i=1;$i&lt;=$x;$i++) {\n  $search.=$a;\n}\n$search.=$end;\nmy @c = $string=~m/$search/gm;\n\n##  Create another string to destroy and reconstruct later. ($stripped)\nmy $stripped = $string;\n$stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$3/;\nforeach(@c) {\n\n#remove parenthesis\n  $_=~s/^\\((.+)\\)$/$1/;\n  $pattern1 = $_;\n## Recontruct $stripped to original\n  $stripped = $string;\n##  Strip enclosed item out of string\n  $_=~s/\\(.+\\)//;\n##  Insert manipulated string into $stripped\n  $stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$_$3/;\n  print \"$stripped\\n\";\n##  Pattern 1 Strip enclosed item out of string\n  $pattern1=~s/\\((.+)\\)/$1/;\n## Recontruct $stripped to original\n  $stripped = $string;\n##  Insert manipulated string into $stripped\n  $stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$pattern1$3/;\n  print \"$stripped\\n\";\n\n}\n</code></pre>\n\n<p>That should cover multiple options. </p>\n\n<p>Original message below:\n&lt;======></p>\n\n<p>Maybe if you reconstruct the phrase a bit, it would be easier.  Like putting the options within a parenthesis and separators, then it would be easier. If the option of syntaxing the phrase is not an option, then ignore my suggestion :-)  </p>\n\n<p>Sample phrase:\nYou can't make (omelet(te)s)|(an omelet(te)) without breaking eggs</p>\n\n<pre><code>#!/usr/bin/perl\nmy $string = \"You can't make (omelet(te)s)|(an omelet(te)) without breaking eggs\";\nmy @c = $string=~m/(\\(.+\\))\\|(\\(.+\\))/gm;\n\n##  Create another string to destroy and reconstruct later. ($stripped)\nmy $stripped = $string;\n$stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$3/;\n\nforeach(@c) {\n#remove parenthesis\n  $_=~s/^\\((.+)\\)$/$1/;\n  $pattern1 = $_;\n## Recontruct $stripped to original\n  $stripped = $string;\n##  Strip enclosed item out of string\n  $_=~s/\\(.+\\)//;\n##  Insert manipulated string into $stripped\n  $stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$_$3/;\n  print \"$stripped\\n\";\n##  Pattern 1 Strip enclosed item out of string\n  $pattern1=~s/\\((.+)\\)/$1/;\n##  Recontruct $stripped to original\n  $stripped = $string;\n##  Insert manipulated string into $stripped\n  $stripped=~s/^(.*?)(\\(.+\\)\\|\\(.+\\))((.*?$)|($))/$1$pattern1$3/;\nprint \"$stripped\\n\";\n\n}\n</code></pre>\n\n<p>If you want to go deeper, you can add multiple enclosed parenthesis within the outside parenthesis to replace and loop it like with did on the initial string @c.  </p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1563987326, "creation_date": 1563945693, "last_edit_date": 1563950464, "question_id": 57175749, "link": "https://stackoverflow.com/questions/57175749/parse-strings-of-certain-patterns-extract-multiple-phrases-from-one-phrase", "title": "Parse strings of certain patterns: Extract multiple phrases from one phrase", "body": "<p>So from one of the phrases of this pattern: <code>You can't make omelet(te)s(or an omelet(te)) without breaking eggs</code>, I need to extract four phrases:<br/>\n<code>You can't make omelets without breaking eggs</code><br/>\n<code>You can't make omelettes without breaking eggs</code><br/>\n<code>You can't make an omelet without breaking eggs</code><br/>\n<code>You can't make an omelette without breaking eggs</code><br/></p>\n\n<p>Is this possible using just <code>Regex</code> or if not, how to implement this in the programming languages?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["php", "bash", "perl", "sed", "zsh"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1563920655, "post_id": 57172846, "comment_id": 100858896, "body": "In single quotes in bash, backslash doesn&#39;t have a special meaning. You can&#39;t include a single quote in single quotes. <code>&#39;&#47;(include.+)[&quot;&#39;\\&#39;&#39;]...</code>"}, {"owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "edited": false, "score": 0, "creation_date": 1563920846, "post_id": 57172846, "comment_id": 100858939, "body": "Also the <code>find</code> command can match case-insensitive file names with <code>-iname</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563925024, "post_id": 57172846, "comment_id": 100859762, "body": "Can you show a few examples of realistic <code>include</code> statements to process?  (For one, what can follow <code>&#39;name.php&#39;</code>?)  How can we provide something that will &quot;work&quot; without any test cases? :)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1563930389, "post_id": 57172846, "comment_id": 100860567, "body": "<a href=\"https://stackoverflow.com/posts/57172846/edit\">edit</a> your question to show the expected output given your posted sample input."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1563987588, "post_id": 57172846, "comment_id": 100885922, "body": "@choroba  As a curiosity, apparently one <i>can</i> use bash&#39;s <code>$&#39;...&#39;</code> quoting (that dollar&#39;s for real!) to allow for some <code>&#39;</code> inside: <code>perl -wE$&#39;say &quot;\\&#39;hi\\&#39;&quot;&#39;</code> (I found that I have to also escape <code>&#39;</code> for it to show, otherwise this is parsed fine but <code>&#39;</code> is not printed)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564047130, "post_id": 57172846, "comment_id": 100905652, "body": "@zdim: <code>$&#39;...&#39;</code> is not single quotes, the dollar turns on the ANSI C escaping rules."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564073640, "post_id": 57172846, "comment_id": 100920331, "body": "@choroba I meant to say that with <code>$&#39;...&#39;</code> quotes one can use single quotes inside (otherwise not possible, as your comment said).  Is that not right?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564075718, "post_id": 57172846, "comment_id": 100921210, "body": "@zdim Yes, but you need to be careful as some combinations of characters now have different meaning (e.g. <code>\\a</code>, <code>\\b</code>, etc.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1564076256, "post_id": 57172846, "comment_id": 100921450, "body": "@choroba Right, and my comment should&#39;ve been more careful.  So for completeness: <a href=\"https://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html\" rel=\"nofollow noreferrer\">bash &quot;ANSI-C quoting&quot;</a> (bash feature that they call &quot;ANSI C quoting&quot; but that differs a little from ANSI-C standard)"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563926839, "post_id": 57173274, "comment_id": 100860072, "body": "@richbai90 I did have a typo -- had <code>\\27</code> instead of intended <code>\\x27</code>.  duh. Fixed"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1563930212, "post_id": 57173274, "comment_id": 100860542, "body": "idk if the sames true in perl but in awk we avoid hex <code>\\x27</code> in favor of octal <code>\\047</code> for the reasons discussed at <a href=\"http://awk.freeshell.org/PrintASingleQuote\" rel=\"nofollow noreferrer\">awk.freeshell.org/PrintASingleQuote</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1563956936, "post_id": 57173274, "comment_id": 100868543, "body": "@EdMorton  Interesting, thank you for the comment and for the link. It appears (by awk-manual page linked in your link) that the origin of such <code>awk</code> practice goes back to <code>gawk</code>, which allowed &quot;runaway&quot; (my term for &quot;<i>...allows more than two successive hex bytes...</i>&quot; from the manual) hex sequences, leading to problems.  Apparently not a problem in Perl, where &quot;<i>... sequence <code>\\x</code>. This is followed by either exactly two hexadecimal digits forming a number, or a hexadecimal number of arbitrary length surrounded by curly braces.</i>&quot;  [...]"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1563957033, "post_id": 57173274, "comment_id": 100868598, "body": "@EdMorton [...]  The quote above is from &quot;<i>Hexadecimal escapes</i>&quot; section in <a href=\"https://perldoc.perl.org/perlrebackslash.html\" rel=\"nofollow noreferrer\">perlrebackslash</a>. It also seems that it is octal that may turn out less worry-free in Perl, as it&#39;s possible for traditional <code>\\123</code> sequences to be interpreted in unwanted ways (in 5.14+ Perls the <code>\\o{...}</code> form is safe). This is discussed in section &quot;<i>Octal escapes</i>&quot; in <code>perlrebackslash</code>, preceding the (quoted) section on hex."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1565012954, "post_id": 57173274, "comment_id": 101206880, "body": "so adding \\L without the /e qualifer makes it lowercase!.. great to know"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1565023910, "post_id": 57173274, "comment_id": 101212340, "body": "@stack0114106  Hello! :))   Yes, that&#39;s one of those escapes that work in normal double-quoted strings, like <code>$lc_var = &quot;\\L$var&quot;;</code> (I can&#39;t recall the exact documentation page that states that and lists them.  The link I gave make it look like it&#39;s just for regex!)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1565161751, "post_id": 57173274, "comment_id": 101260290, "body": "@stack0114106 I found it -- <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">in perlop</a>  (by the end of the section, look for &quot;<i>... escape sequences ...</i>&quot;)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1565161634, "last_edit_date": 1565161634, "creation_date": 1563923397, "answer_id": 57173274, "question_id": 57172846, "link": "https://stackoverflow.com/questions/57172846/perl-sed-replace-all-matches-in-capture-group-with-lowercase-version/57173274#57173274", "title": "Perl/Sed replace all matches in capture group with lowercase version", "body": "<p>To lowercase what is in the <code>include</code> statement, changing the input file in-place</p>\n\n<pre><code>perl -i.bak -wpe's/include.*\\K (([\\x22\\x27]) \\w+\\.php \\g{-1})/\\L$1/x;' file\n</code></pre>\n\n<p>Tested using a file with provided <code>include</code> statements.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>The <code>include.*</code> preceding the name under quotes is matched (to identify that line), but then dropped with <code>\\K</code> so that we don't have to capture and copy it in the replacement part. See \"<em>Lookaround Assertions</em>\" <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">in Extended Patterns in perlre</a> for <code>\\K</code></p></li>\n<li><p>The quotes <code>\"</code> and <code>'</code> are matched using <code>\\x22</code> and <code>\\x27</code>, in a character class (it's tricky with literal quotes). The closing quote is then matched using the (relative) <a href=\"https://perldoc.perl.org/perlretut.html#Backreferences\" rel=\"nofollow noreferrer\">backreference</a> <code>\\g{-1}</code>, so that it must be the same as the opening one  </p></li>\n<li><p>The whole <code>'AbC.php'</code>, captured first (so in <code>$1</code>), is lowercased with <a href=\"https://perldoc.perl.org/perlrebackslash.html#Modifiers\" rel=\"nofollow noreferrer\"><code>\\L</code> sequence</a>. This is one of the few escapes that work in any <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">interpolated constructs</a></p></li>\n<li><p>Consider adding anchor <code>/^\\s*</code> (with optional spaces), to only match at string beginning</p></li>\n<li><p>The <code>/x</code> modifier allows use of spaces (and comments) inside regex, for readability</p></li>\n</ul>\n\n<p>I added to flags the <code>.bak</code> to keep backup and <code>-w</code> to print warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "is_accepted": false, "score": 0, "last_activity_date": 1563985808, "last_edit_date": 1563985808, "creation_date": 1563924713, "answer_id": 57173425, "question_id": 57172846, "link": "https://stackoverflow.com/questions/57172846/perl-sed-replace-all-matches-in-capture-group-with-lowercase-version/57173425#57173425", "title": "Perl/Sed replace all matches in capture group with lowercase version", "body": "<p><strong>EDIT:</strong>\nThe accepted answer did solve the problem, the script below also works, keeping it here for posterity sake.</p>\n\n<p>I wasn't able to make @zdim answer work, but borrowing from his answer and some of the comments I was able to get the following command to do what I needed</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>find ./ -name *.php -print0 | xargs -0 perl -i.bak -wpe \"s/(include.+)[\\\"'](\\w+\\.php)[\\\"'](.*)/\\1\\x27\\L\\2\\x27\\3/\"\n</code></pre>\n"}], "owner": {"reputation": 4157, "user_id": 2115971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zkMcT.jpg?s=128&g=1", "display_name": "richbai90", "link": "https://stackoverflow.com/users/2115971/richbai90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 57173274, "answer_count": 2, "score": 1, "last_activity_date": 1565161634, "creation_date": 1563919749, "last_edit_date": 1563925486, "question_id": 57172846, "link": "https://stackoverflow.com/questions/57172846/perl-sed-replace-all-matches-in-capture-group-with-lowercase-version", "title": "Perl/Sed replace all matches in capture group with lowercase version", "body": "<p>I need to replace all of my includes in a php application with their lowercase equivalent. I'm converting a legacy application to Docker, and the application was built in windows.</p>\n\n<p>I have the following regular expression that I have tested</p>\n\n<pre class=\"lang-regex prettyprint-override\"><code>(include.+)[\"'](\\w+\\.php)[\"'](.*)\n</code></pre>\n\n<p>And I've tried putting this into a one-liner perl command like so</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -p -i -e '/(include.+)[\\\"\\'](\\w+\\.php)[\\\"\\'](.*)/\\1\\'\\L\\2\\'\\E\\3/ `find ./ -name *.php`\n</code></pre>\n\n<p>But I get an error</p>\n\n<blockquote>\n  <p>(Missing operator before 'L2'?)\n  Bareword found where operator expected at -e line 1, near \"'L2'E3\"\n      (Missing operator before E3?)\n  Unknown regexp modifier \"/1\" at -e line 1, at end of line\n  syntax error at -e line 1, near \"/(include.+)[\\\"](w+.php)\"'/1'L2'\"\n  Execution of -e aborted due to compilation errors.</p>\n</blockquote>\n\n<p>I just need to replace the matched string with <code>$1'{lowercase $2}'$3</code> But I'm not much of a perl or sed wizard.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>A couple of examples of php include statements</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>include \"something.php\";\ninclude_once \"something.php\";\ninclude(\"SomethingElse.php\");\ninclude ('Something.php');\ninclude_once(\"something.php\");\ninclude_once (\"something.php\");\n</code></pre>\n"}, {"tags": ["regex", "perl", "line"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1563911994, "post_id": 57170327, "comment_id": 100856025, "body": "Please include a small example of the input file <code>$file</code> and what would be the expected output for that file. And then show another file that does not contain <code>D001</code>, and the corresponding output for that file. For example: &quot;expected output is: <code>$FSIZE = 5</code>&quot; or something like that"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563913534, "post_id": 57170327, "comment_id": 100856677, "body": "Thanks for the update! What would be the expected output for the file you included? If you remove the lines with a &quot;.&quot;? What would be the expected output if the line with <code>D0001</code> was missing?"}, {"owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563915867, "post_id": 57170327, "comment_id": 100857587, "body": "The expected output if I remove &#39;.&#39; would be 3. Basically, I want to count the number of lines until the delimiter. The delimiter is &quot;D0001&quot; and &quot;0000&quot; in the following line."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1563917348, "creation_date": 1563917348, "answer_id": 57172466, "question_id": 57170327, "link": "https://stackoverflow.com/questions/57170327/perl-match-multiple-lines/57172466#57172466", "title": "Perl : match multiple lines", "body": "<p>Here is an example. This sets <code>$FSIZE</code> to <code>undef</code> if it cannot find the marker lines:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $fn = 'test.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nchomp (my @lines = &lt;$fh&gt;);\nclose $fh;\n\nmy $FSIZE = undef;\nfor my $i (0..$#lines) {\n    if ($lines[$i] =~ /D0001/) {\n        if ( $i &lt; $#lines ) {\n            if ( $lines[$i+1] =~ /00000/ ) {\n                $FSIZE = $i + 1;\n                last;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57172466, "answer_count": 1, "score": 0, "last_activity_date": 1563917348, "creation_date": 1563907117, "last_edit_date": 1563913170, "question_id": 57170327, "link": "https://stackoverflow.com/questions/57170327/perl-match-multiple-lines", "title": "Perl : match multiple lines", "body": "<p>With the use of perl regex, if two consecutive lines match than count the number of lines.</p>\n\n<p>I want the number of lines until matches the pattern</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>D001\n0000\n</code></pre>\n\n<pre><code>open ($file, \"$file\") || die; \n   my @lines_f = $file;\n   my $total_size = $#lines_f +1;\n\n   foreach my $line (@lines_f)\n   {\n       if ($line =~ /D001/) {\n           $FSIZE = $k + 1;\n       } else { \n           $k++;}\n    }  \n</code></pre>\n\n<p>Instead of just D001, I also want to check if the next line is 0000. If so $FSIZE is the $file size.\nThe $file would look something like this</p>\n\n<pre><code>00001 \n00002\n.\n.\n.\nD0001\n00000\n00000\n</code></pre>\n"}, {"tags": ["perl", "bitbucket", "bitbucket-pipelines", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563905125, "post_id": 57169588, "comment_id": 100853146, "body": "<code>cat &#47;root&#47;.cpanm&#47;work&#47;1562605191.55&#47;build.log</code>"}, {"owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563905426, "post_id": 57169588, "comment_id": 100853297, "body": "That would be fine if I had access to the machine after it finished running, but AFAIK I don&#39;t have."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563905538, "post_id": 57169588, "comment_id": 100853345, "body": "wut. How and why are you installing a module on a machine you can&#39;t use?!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563905680, "post_id": 57169588, "comment_id": 100853397, "body": "That said, you could use <code>cpan</code> instead of <code>cpanm</code>. <code>cpan</code> doesn&#39;t hide useful information like <code>cpanm</code> does."}, {"owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563905995, "post_id": 57169588, "comment_id": 100853528, "body": "It&#39;s a CI system. It spins up a Docker image, installs stuff, runs the tests, destroys the instance. I juts found they have added an option to run a script after failure. I&#39;ll check if that can be used to display the log files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563906038, "post_id": 57169588, "comment_id": 100853543, "body": "I suspect the name of the file changes each time. But since it&#39;s a fresh instance, <code>&#47;root&#47;.cpanm&#47;work&#47;*&#47;build.log</code> should only match relevant files."}], "answers": [{"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1563917283, "post_id": 57170998, "comment_id": 100858013, "body": "I don&#39;t think you need the <code>-1</code> on your <code>ls</code> command since <code>ls</code> always lists one file per line when STDOUT is not connected to a tty (i.e.: if it is connected to a pipe or file). Also I&#39;m curious what advantage the <code>ls &lt;pattern&gt; | xargs cat</code> construct gives you over just <code>cat &lt;pattern&gt;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1563931311, "post_id": 57170998, "comment_id": 100860686, "body": "@Grant McLean, The <code>xargs</code> version will help if the list is long enough to hit the command line length limits, but that&#39;s not likely to happen in the scenario the OP gave"}, {"owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1563936224, "post_id": 57170998, "comment_id": 100861485, "body": "@GrantMcLean probably just overengineering. Now added that solution as well."}], "tags": [], "owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "is_accepted": false, "score": 3, "last_activity_date": 1563936415, "last_edit_date": 1563936415, "creation_date": 1563910249, "answer_id": 57170998, "question_id": 57169588, "link": "https://stackoverflow.com/questions/57169588/viewing-the-cpanm-error-log-in-bitbucket-pipelines-when-installing-a-perl-module/57170998#57170998", "title": "Viewing the cpanm error log in Bitbucket pipelines when installing a Perl module fails", "body": "<p>Apparently recently Bitbucket added a feature called \"after-script\" so I could add the following and that would print the content of the log files.</p>\n\n<pre><code>       after-script:\n          - ls -1 /root/.cpanm/work/*/build.log | xargs cat\n</code></pre>\n\n<p>or maybe even this:</p>\n\n<pre><code>       after-script:\n          - cat /root/.cpanm/work/*/build.log\n</code></pre>\n\n<p>and the following, I think, will only show the content of the log files if the build failed:</p>\n\n<pre><code>       after-script:\n          - $BITBUCKET_EXIT_CODE &amp;&amp; cat /root/.cpanm/work/*/build.log\n</code></pre>\n\n<p>Read more here: <a href=\"https://bitbucket.org/blog/after-scripts-now-available-for-bitbucket-pipelines\" rel=\"nofollow noreferrer\">https://bitbucket.org/blog/after-scripts-now-available-for-bitbucket-pipelines</a></p>\n"}], "owner": {"reputation": 5844, "user_id": 11827, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/19821078d3ecf265b2af009548e98ef3?s=128&d=identicon&r=PG", "display_name": "szabgab", "link": "https://stackoverflow.com/users/11827/szabgab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1563936415, "creation_date": 1563903781, "last_edit_date": 1563904140, "question_id": 57169588, "link": "https://stackoverflow.com/questions/57169588/viewing-the-cpanm-error-log-in-bitbucket-pipelines-when-installing-a-perl-module", "title": "Viewing the cpanm error log in Bitbucket pipelines when installing a Perl module fails", "body": "<p>I have a BitBucket Pipeline that installs a bunch of Perl modules using cpanm. One of them fails and this is the snippet I can see in the log:</p>\n\n<pre><code>Fetching http://www.cpan.org/authors/id/P/PE/PETDANCE/ack-v3.0.2.tar.gz ... OK\nConfiguring ack-v3.0.2 ... OK\n==&gt; Found dependencies: File::Next\n--&gt; Working on File::Next\nFetching http://www.cpan.org/authors/id/P/PE/PETDANCE/File-Next-1.16.tar.gz ... OK\nConfiguring File-Next-1.16 ... OK\nBuilding and testing File-Next-1.16 ... OK\nSuccessfully installed File-Next-1.16\n! Installing App::Ack failed. See /root/.cpanm/work/1562605191.55/build.log for details. Retry with --force to force install it.\n! Installing the dependencies failed: Module 'App::Ack' is not installed\n! Bailing out the installation for ..\nBuilding and testing ack-v3.0.2 ... FAIL\n</code></pre>\n\n<p>How could I access the build.log that was created by the installation process?</p>\n"}, {"tags": ["regex", "shell", "perl"], "comments": [{"owner": {"reputation": 1857, "user_id": 9565139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t0SKo.png?s=128&g=1", "display_name": "vqf", "link": "https://stackoverflow.com/users/9565139/vqf"}, "edited": false, "score": 0, "creation_date": 1563898620, "post_id": 57168222, "comment_id": 100850265, "body": "I am assuming you want to capture the second group, but your are setting it to non-capture with the <code>?:</code>. You want the second group as <code>(.*)</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563911078, "post_id": 57168222, "comment_id": 100855644, "body": "Please provide a minimal runnable example that shows the problem"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1563928896, "post_id": 57168222, "comment_id": 100860361, "body": "I don&#39;t understand what you want your regular expression to do for you. Which part of the string do you want to match and/or extract exactly?"}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1563929397, "post_id": 57168222, "comment_id": 100860431, "body": "The regex both work. The problem is elsewhere in your program."}, {"owner": {"reputation": 127, "user_id": 4314038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e95442372b77eb38a30ea9c992cab4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kume8sit", "link": "https://stackoverflow.com/users/4314038/kume8sit"}, "edited": false, "score": 0, "creation_date": 1563929428, "post_id": 57168222, "comment_id": 100860435, "body": "I am trying to match the DHT.BENT.RSEC.ETNS.DHT.2019-07-22-210004.TXT full match but must have  middle <i>(DNT)</i> or should be the first group to match on this particular string and return a full match for (DHT.BENT.RSEC.ETNS. DHT.2019-07-22-210004.TXT"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": true, "score": 0, "last_activity_date": 1563935708, "creation_date": 1563935708, "answer_id": 57174462, "question_id": 57168222, "link": "https://stackoverflow.com/questions/57168222/regex-to-find-exact-match-based-on-middle-of-a-string/57174462#57174462", "title": "Regex to find exact match based on middle of a string", "body": "<p>You expression seems to be just fine, maybe we would include some more constraints, if that'd be OK, such as:</p>\n\n<pre><code>^(?:DHT\\.BENT\\.RSEC\\.ETNS\\.DHT)\\.\\d{4}-\\d{1,2}-\\d{1,2}-\\d+\\.TXT$\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/IM8QhI/1\" rel=\"nofollow noreferrer\">DEMO 1</a></h3>\n\n<p>Or:</p>\n\n<pre><code>^(?:DHT\\.BENT\\.RSEC\\.ETNS\\.BNT)\\.\\d{4}-\\d{1,2}-\\d{1,2}-\\d+\\.TXT$\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/wzTWdj/1\" rel=\"nofollow noreferrer\">DEMO 2</a></h3>\n\n<p>The expression is explained on the top right panel of <a href=\"https://regex101.com/r/wzTWdj/1\" rel=\"nofollow noreferrer\">regex101.com</a>, if you wish to explore/simplify/modify it, and in <a href=\"https://regex101.com/r/wzTWdj/1debugger\" rel=\"nofollow noreferrer\">this link</a>, you can watch how it would match against some sample inputs, if you like. </p>\n\n<h3>RegEx Circuit</h3>\n\n<p><a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a> visualizes regular expressions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uu9Cw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uu9Cw.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 127, "user_id": 4314038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e95442372b77eb38a30ea9c992cab4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kume8sit", "link": "https://stackoverflow.com/users/4314038/kume8sit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 57174462, "answer_count": 1, "score": 0, "last_activity_date": 1563935708, "creation_date": 1563898041, "last_edit_date": 1563928694, "question_id": 57168222, "link": "https://stackoverflow.com/questions/57168222/regex-to-find-exact-match-based-on-middle-of-a-string", "title": "Regex to find exact match based on middle of a string", "body": "<p>Trying to file single file based on a string before the date. File named as follows;\nAll begin with DHT.BENT.RSEC.ETNS*  then identifier .DHT or *BNT, then timestamp.TXT</p>\n\n<pre><code>DHT.BENT.RSEC.ETNS.DHT.2019-07-22-210004.TXT\nDHT.BENT.RSEC.ETNS.BNT.2019-04-23-190824.TXT\n</code></pre>\n\n<p>Tried as follows</p>\n\n<pre><code>/(?:DHT\\.BENT\\.RSEC\\.ETNS\\.DHT)(?:.*).TXT/\n/(?:DHT\\.BENT\\.RSEC\\.ETNS\\.BNT)(?:.*).TXT/\n</code></pre>\n\n<p>I expect each to give me the code individual line on full string match</p>\n\n<pre><code>DHT.BENT.RSEC.ETNS.DHT.2019-07-22-210004.TXT\nDHT.BENT.RSEC.ETNS.BNT.2019-04-23-190824.TXT\n</code></pre>\n\n<p>.   Need help to improve the regex</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "edited": false, "score": 0, "creation_date": 1563896320, "post_id": 57167527, "comment_id": 100849077, "body": "Please provide sample outputs and your length-calculation mechanism by <a href=\"https://stackoverflow.com/posts/57167527/edit\">edit</a>ing your Q."}], "answers": [{"comments": [{"owner": {"reputation": 1902, "user_id": 1467943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xzOGe.png?s=128&g=1", "display_name": "ales_t", "link": "https://stackoverflow.com/users/1467943/ales-t"}, "edited": false, "score": 0, "creation_date": 1563895765, "post_id": 57167565, "comment_id": 100848720, "body": "For completeness, <code>echo</code> also has an <code>-n</code> flag that suppresses the trailing newline."}, {"owner": {"reputation": 163, "user_id": 2233364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e7f01ac6cc619b0e20639a85fc41029?s=128&d=identicon&r=PG", "display_name": "Hahihula", "link": "https://stackoverflow.com/users/2233364/hahihula"}, "edited": false, "score": 0, "creation_date": 1563895798, "post_id": 57167565, "comment_id": 100848742, "body": "I count the length piping it to wc ` | wc -c ` but my main problem is that the second one has one more digit (readable digin from 0 to 9) when later saved i nthe file"}, {"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "reply_to_user": {"reputation": 1902, "user_id": 1467943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xzOGe.png?s=128&g=1", "display_name": "ales_t", "link": "https://stackoverflow.com/users/1467943/ales-t"}, "edited": false, "score": 2, "creation_date": 1563895946, "post_id": 57167565, "comment_id": 100848833, "body": "@ales_t which is highly non-portable. Hell, <code>echo</code> is highly non-portable (ever tried to <code>echo</code> the literal string <code>-n</code>? There\u2019s practically no mechanism to disable echo\u2019s options, but POSIX says echo prints exactly its arguments with a trailing newline. I have yet to find a POSIX echo beyond <code>printf &#39;%s\\n&#39; -- &quot;$@&quot;</code>). I recommend against it almost always."}, {"owner": {"reputation": 163, "user_id": 2233364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e7f01ac6cc619b0e20639a85fc41029?s=128&d=identicon&r=PG", "display_name": "Hahihula", "link": "https://stackoverflow.com/users/2233364/hahihula"}, "edited": false, "score": 0, "creation_date": 1563896337, "post_id": 57167565, "comment_id": 100849092, "body": "<code>\u21d2  printf &#39;%s&#39; $X | xxd</code> <code>00000000: 3439 3537 3937 3737 3636 3439 3938 3138  4957977766499818</code> <code>00000010: 3338 3336                                3836</code> <code>\u21d2  echo $X | xxd</code> <code>00000000: 3439 3537 3937 3737 3636 3439 3938 3138  4957977766499818</code> <code>00000010: 3338 3336 0a                             3836.</code>"}, {"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "reply_to_user": {"reputation": 163, "user_id": 2233364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e7f01ac6cc619b0e20639a85fc41029?s=128&d=identicon&r=PG", "display_name": "Hahihula", "link": "https://stackoverflow.com/users/2233364/hahihula"}, "edited": false, "score": 0, "creation_date": 1563896453, "post_id": 57167565, "comment_id": 100849156, "body": "@Hahihula <code>wc</code> like that probably counts the newline (<code>0a</code> in xxd\u2019s output). Do you see the difference now?"}, {"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "reply_to_user": {"reputation": 1902, "user_id": 1467943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xzOGe.png?s=128&g=1", "display_name": "ales_t", "link": "https://stackoverflow.com/users/1467943/ales-t"}, "edited": false, "score": 0, "creation_date": 1563902303, "post_id": 57167565, "comment_id": 100851864, "body": "@ales_t And I was still wrong. A closer version is <code>echo () { printf &#39;%s&#39; &quot;$@&quot;; printf &#39;\\n&#39;;}</code> but that doesn&#39;t preserve the separation of arguments. <code>echo</code> is hard to get POSIX. <code>printf</code> is not."}], "tags": [], "owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "is_accepted": true, "score": 2, "last_activity_date": 1563901258, "last_edit_date": 1563901258, "creation_date": 1563895710, "answer_id": 57167565, "question_id": 57167527, "link": "https://stackoverflow.com/questions/57167527/storing-value-in-variable-adds-one-character-of-length/57167565#57167565", "title": "Storing value in variable adds one character of length", "body": "<p>You don\u2019t show how you\u2019re computing length, but <code>echo</code> prints arguments with a trailing newline. </p>\n\n<p>In <code>sh</code> and descendants, you can use <code>printf '%s' \"$ID\"</code> to print without a trailing newline.</p>\n\n<p>Pipe your <code>echo</code> and my <code>printf</code> through <code>xxd</code> to observe the difference.</p>\n\n<h2>Examples</h2>\n\n<p>Setup:</p>\n\n<pre><code># ID=\"$(perl -e 'my @chars=(\"0\"..\"9\");my $string;$string.=$chars[rand @chars] for 0..19;print $string')\"\n</code></pre>\n\n<h3><code>printf</code></h3>\n\n<pre><code># printf '\"%s\" ' \"$ID\" \"no trailing whitespace\"\n\"37308262201981702169\" \"no trailing whitespace\" # printf '%s' \"$ID\" | wc -c\n      20\n# printf '%s' \"$ID\" | xxd\n00000000: 3337 3330 3832 3632 3230 3139 3831 3730  3730826220198170\n00000010: 3231 3639                                2169\n</code></pre>\n\n<p>This is an output of 20 characters exactly. You can even see how the prompt doesn't appear on the next line in the printf versions.</p>\n\n<h3><code>echo</code></h3>\n\n<pre><code># echo \"$ID\"\n37308262201981702169\n# echo \"$ID\" | wc -c\n      21\n# echo \"$ID\" | xxd\n00000000: 3337 3330 3832 3632 3230 3139 3831 3730  3730826220198170\n00000010: 3231 3639 0a                             2169.\n</code></pre>\n\n<p>This is an output of 21 characters exactly. The last character is <code>0x0a</code> is a newline.</p>\n"}], "owner": {"reputation": 163, "user_id": 2233364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e7f01ac6cc619b0e20639a85fc41029?s=128&d=identicon&r=PG", "display_name": "Hahihula", "link": "https://stackoverflow.com/users/2233364/hahihula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57167565, "answer_count": 1, "score": 0, "last_activity_date": 1563901258, "creation_date": 1563895573, "question_id": 57167527, "link": "https://stackoverflow.com/questions/57167527/storing-value-in-variable-adds-one-character-of-length", "title": "Storing value in variable adds one character of length", "body": "<p>I am generating 20 digits long id using perl inside bash script. When I run only the perl, it gives me 20 digits long string. If I save it to variable and then echo it, it's 21 digits long. \nCan someone please explain this to me?\nThe code:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>perl -e 'my @chars = (\"0\"..\"9\",);my $string;$string .= $chars[rand @chars] for 0..19; print $string;'\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>ID=$(perl -e 'my @chars = (\"0\"..\"9\",);my $string;$string .= $chars[rand @chars] for 0..19; print $string;' )\necho $ID\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1563888897, "post_id": 57163905, "comment_id": 100844489, "body": "A literal <code>&amp;#10;</code>? Like an html/xml escaped character?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563890112, "post_id": 57163905, "comment_id": 100845293, "body": "I tried this with <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\"><code>Excel::Writer::XLSX</code></a> on a windows machine. I wrote an <code>.xlsx</code> file with a cell containing a new line &quot;\\n&quot;. Then I transferred the <code>.xlsx</code> to a linux machine and used <a href=\"https://metacpan.org/pod/Spreadsheet::ParseXLSX\" rel=\"nofollow noreferrer\"><code>Spreadsheet::ParseXLSX</code></a> to read the file back, and used <code>$cell-&gt;{Val}</code> to extract the data in the cell, but there was nothing special happening. The newline had not been converted, i.e. the cell value was exactly the same as on the windows machine. Please show how you created the .xlsx on the windows machine"}, {"owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "edited": false, "score": 0, "creation_date": 1563946443, "post_id": 57163905, "comment_id": 100863734, "body": "Thanks for the reply , I used <code>libreoffice Calc</code> to store the excel sheet(.xlsx) in a <code>linux</code> machine. In that, i saved the data as <code>Text format</code> in a cell and tried to read the data using perl as : <code>$cell-&gt;{Val} </code> , exact value stored was <code>0x08</code> in spreadsheet , but while reading the data was taken as <code>0x08&amp;#10</code>"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1563977681, "post_id": 57163905, "comment_id": 100880465, "body": "It seems like you are getting <code>&amp;#10</code> as that 4-character string, rather than a single newline character. If that&#39;s the case, how about <code>$var =~ s&#47;\\&amp;#10&#47;&#47;;</code>?"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1563977947, "post_id": 57163905, "comment_id": 100880636, "body": "And if you actually meant the single character with ascii value 10, <code>s&#47;\\x0a&#47;&#47;</code> should work, although in this case what you tried should have already worked."}, {"owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "edited": false, "score": 0, "creation_date": 1564031496, "post_id": 57163905, "comment_id": 100898042, "body": "Thanks for everyone who answered my question,I removed the linefeed character from the string using the command: <code>$var  =~ s&#47;&amp;#10;&#47;&#47;g;</code> , and its working fine in my code."}], "owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564031538, "creation_date": 1563883762, "last_edit_date": 1564031538, "question_id": 57163905, "link": "https://stackoverflow.com/questions/57163905/removing-line-feed-new-line-in-a-cellspreadsheet-using-perl-in-linux", "title": "removing line feed / new line in a cell(spreadsheet) using perl in linux", "body": "<p>how to remove the line feed/carriage return in a cell using perl ?</p>\n\n<p>I tried to read a cell in spreadsheet using perl in linux platform, while reading the text in a cell,it got converted into the <code>&amp;#10;</code> in the perl variable. later while searching,i got that it was due to the <code>carriage return/line feed</code>.</p>\n\n<p>example:</p>\n\n<p><code>$var1 = $cell -&gt;{Val};</code>// text format : value stored as <code>0x08</code></p>\n\n<p>here while checking $var1 value i got <code>0x08 &amp;#10;</code>, so i tried to remove the space/ line feed and tired using regx statement like :</p>\n\n<p><code>$var=~ s/[\\r\\n]//g</code> , <code>$var=~s/\\n//g</code> ..,chomp($var) ..etc, but i didn't get the expected result as <code>0x08</code></p>\n"}, {"tags": ["perl", "dbix-class"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1563880672, "post_id": 57162868, "comment_id": 100839626, "body": "Please show the program you are running as well, and a directory listing. Use <code>tree</code> or something similar to make that listing so we can see what&#39;s where."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1563882181, "post_id": 57162868, "comment_id": 100840495, "body": "I edited it, I hope it is good enough"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1563883418, "post_id": 57162868, "comment_id": 100841305, "body": "Works for me. <code>\u203a find|grep pm|parallel perl -c</code>\u2424<code>.&#47;MyApp&#47;Schema.pm syntax OK</code>\u2424<code>.&#47;MyApp&#47;Schema&#47;Result&#47;CD.pm syntax OK</code>\u2424<code>.&#47;MyApp&#47;Schema&#47;Result&#47;Artist.pm syntax OK</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563884239, "post_id": 57162868, "comment_id": 100841783, "body": "Where is the script relative to the module? How do you tell Perl where to look for the module? <a href=\"https://stackoverflow.com/q/46549671/589924\">Is this relevant?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "edited": false, "score": 0, "creation_date": 1563887604, "post_id": 57162868, "comment_id": 100843668, "body": "Sorry man, I really don&#39;t know how to answer to this question. I am new in creating the back-end side for a web page so I don&#39;t know what I am doing. If you know a good tutorial where I can learn all of these I will be grateful."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563892509, "post_id": 57162868, "comment_id": 100846781, "body": "Let me phrase is differently. What is the full path to the program/script you are running, and what is the full path to <code>Schema.pm</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "edited": false, "score": 0, "creation_date": 1563892736, "post_id": 57162868, "comment_id": 100846906, "body": "I used the command realpath in terminal and the path to the application directory is /home/alex/MyApp and the path to Schema.pm is /home/alex/Schema.pm"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "edited": false, "score": 0, "creation_date": 1563891340, "post_id": 57165621, "comment_id": 100846034, "body": "Thank you, but it doesn&#39;t work . I used use lib &#39;.&#39; and use FindBin &#39;$RealBin&#39;; use lib $RealBin; but I am getting the same error : <a href=\"https://pastebin.com/PdYyVesc\" rel=\"nofollow noreferrer\">pastebin.com/PdYyVesc</a> . (I inserted in CD.pm exactly use FindBin &#39;$RealBin&#39;; use lib $RealBin; on the top of the file, I don&#39;t know if I must to modify the RealBin with someting else). I am not that new in programming, I use C++ and Java before Perl to make problems, use oop and datebase with postgresql, I understand a little bit of what create the error but I don&#39;t know how to solve it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1563892591, "post_id": 57165621, "comment_id": 100846817, "body": "Re &quot;<i>I inserted in CD.pm</i>&quot;, No, in the main program file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1563892652, "post_id": 57165621, "comment_id": 100846856, "body": "DO NOT USE <code>use lib &#39;.&#39;;</code>. It&#39;s buggy and a security risk."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563893668, "post_id": 57165621, "comment_id": 100847470, "body": "@AlexUnLimited: If your problem is that Perl can&#39;t find your modules, then it&#39;s really hard to see how making a change to one of your modules is going to improve the situation. As I said in my answer, you need to add the code to your program, not the module."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "edited": false, "score": 0, "creation_date": 1563894341, "post_id": 57165621, "comment_id": 100847929, "body": "Sorry guys because I wasted your time, I don&#39;t even have a main file in the projects, I was running file by file just to see if everything is ok, I think that is the problem."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1563893823, "last_edit_date": 1563893823, "creation_date": 1563889587, "answer_id": 57165621, "question_id": 57162868, "link": "https://stackoverflow.com/questions/57162868/cant-locate-myapp-schema-pm-in-inc/57165621#57165621", "title": "Can&#39;t locate MyApp/Schema.pm in @INC", "body": "<blockquote>\n  <p>I am new in creating the back-end side for a web page so I don't know what I am doing</p>\n</blockquote>\n\n<p>If that's the case, then I really think that building an application that uses DBIx::Class is a bit of a stretch for your first attempt. I'd recommend spending some time getting to grips with writing command-line programs with Perl first.</p>\n\n<p>But that might not be possible. In which case, read on...</p>\n\n<p>You haven't given us the full error message that you're getting (and, for future reference, that would have been really useful) but I suspect that it goes on to tell you the list of directories that are currently in <code>@INC</code>.</p>\n\n<p>When Perl loads a module, it needs to know where it might find the file that contains that module. It does that by using a special array variable called <code>@INC</code>. <code>@INC</code> contains a list of all of the directories that Perl should search to find module code. There are a number of directories that are \"baked-in\" to your Perl installation when it is set up, but there are various ways to add to that list.</p>\n\n<p>Your error message will have given you the current list of directories in <code>@INC</code>, but you can also get it from this simple command-line Perl program:</p>\n\n<pre><code>perl -E'say for @INC'\n</code></pre>\n\n<p>That list contains the \"baked-in\" directories that I mentioned before. These are the standard directories where Perl expects to find modules. But the modules that are part of your application (the <code>MyApp::Schema</code> modules) aren't stored in those directories. They are in the same directory tree as your program.</p>\n\n<p>In older versions of Perl, the current directory was automatically added to <code>@INC</code> (you would see '.' included in the output of the program I mentioned above) but that was seen as a security risk so it was removed (that's why ikegami pointed you to <a href=\"https://stackoverflow.com/q/46549671/589924\">this answer</a>).</p>\n\n<p>So we need to add the current directory to <code>@INC</code>. We can add directories to <code>@INC</code> using the <a href=\"https://metacpan.org/pod/distribution/perl/dist/lib/lib_pm.PL\" rel=\"nofollow noreferrer\">lib</a> pragma. The easiest option would be to add this line near the top of your program (before the <code>use MyApp::Schema</code> line):</p>\n\n<p>[<strong>Note:</strong> The current directory was removed from the default <code>@INC</code> for VERY GOOD REASONS. And the line of code below just undoes the good work that the Perl development team did by removing it. As I say above, this is certainly the easiest option, but it's also a really stupid idea.]</p>\n\n<pre><code># Don't do this. Use the next code block instead.\nuse lib '.';\n</code></pre>\n\n<p>But that's not going to work if you run your program from somewhere other  than the directory where it lives. So a more robust solution is:</p>\n\n<pre><code>use FindBin '$RealBin';\nuse lib $RealBin;\n</code></pre>\n\n<p>If that doesn't work, then it might be that you have put your libraries in a different directory structure and we'll need more information.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11178707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 57165621, "answer_count": 1, "score": 0, "last_activity_date": 1563893823, "creation_date": 1563880311, "last_edit_date": 1563881007, "question_id": 57162868, "link": "https://stackoverflow.com/questions/57162868/cant-locate-myapp-schema-pm-in-inc", "title": "Can&#39;t locate MyApp/Schema.pm in @INC", "body": "<p>I am trying to connect to a database using perl. I tried to follow this tutorial <a href=\"https://metacpan.org/pod/release/RIBASUSHI/DBIx-Class-0.082840/lib/DBIx/Class.pod\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/RIBASUSHI/DBIx-Class-0.082840/lib/DBIx/Class.pod</a> and create a simple app named MyApp as they made and create the files exactly as they did but when I compile the CD.pm file I am getting the error Can't locate MyApp/Schema.pm in @INC (you may need to install the MyApp::Schema module).</p>\n\n<p>The program is looking like that in Atom using package Script to run the code on ubuntu:</p>\n\n<pre><code>MyApp---\n     |  |\n     |  Schema--\n     |         |\n     |          Result-----\n     |                |    |\n     |       Artist.pm     CD.pm\n     |\nSchema.pm\n\n\n#Schema.pm\npackage MyApp::Schema;\nuse base qw/DBIx::Class::Schema/;\n\n__PACKAGE__-&gt;load_namespaces();\n\n1;\n#CD.pm\npackage MyApp::Schema::Result::CD;\nuse base qw/DBIx::Class::Core/;\n\n__PACKAGE__-&gt;load_components(qw/InflateColumn::DateTime/);\n__PACKAGE__-&gt;table('cd');\n__PACKAGE__-&gt;add_columns(qw/ cdid artistid title year /);\n__PACKAGE__-&gt;set_primary_key('cdid');\n__PACKAGE__-&gt;belongs_to(artist =&gt; 'MyApp::Schema::Result::Artist', 'artistid');\n\n 1;\n#Artist.pm\npackage MyApp::Schema::Result::Artist;\nuse base qw/DBIx::Class::Core/;\n\n__PACKAGE__-&gt;table('artist');\n__PACKAGE__-&gt;add_columns(qw/ artistid name /);\n__PACKAGE__-&gt;set_primary_key('artistid');\n__PACKAGE__-&gt;has_many(cds =&gt; 'MyApp::Schema::Result::CD', 'artistid');\n\n1;\n</code></pre>\n"}, {"tags": ["perl", "google-app-engine"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 4, "last_activity_date": 1563882771, "creation_date": 1563882771, "answer_id": 57163651, "question_id": 57162675, "link": "https://stackoverflow.com/questions/57162675/access-bucket-file-from-perl-in-google-cloud-shell/57163651#57163651", "title": "Access Bucket File from Perl in Google Cloud Shell", "body": "<p><a href=\"https://cloud.google.com/storage/docs/gcs-fuse\" rel=\"nofollow noreferrer\">Mount the bucket into the file system with fuse.</a></p>\n"}], "owner": {"reputation": 166, "user_id": 4154806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f4443a15ca179dd626a141be9227933?s=128&d=identicon&r=PG&f=1", "display_name": "user90346", "link": "https://stackoverflow.com/users/4154806/user90346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57163651, "answer_count": 1, "score": 1, "last_activity_date": 1563882771, "creation_date": 1563879700, "question_id": 57162675, "link": "https://stackoverflow.com/questions/57162675/access-bucket-file-from-perl-in-google-cloud-shell", "title": "Access Bucket File from Perl in Google Cloud Shell", "body": "<p>How does one open file in a Bucket from Perl program running in a Google Cloud Shell running in the same project?</p>\n\n<p>One can upload a file into the shell file system and open it and also put the file in a bucket for access by others but that seems counter-productive never mind that the files will be out of sync a day later.</p>\n\n<p>I've tried various forms of </p>\n\n<p><code>open($fh, '&lt;', \"gs://bucketname/filename\");</code></p>\n\n<p>without any luck.</p>\n"}, {"tags": ["python", "perl"], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 11744580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626660118718965b71889c71ace27e05?s=128&d=identicon&r=PG&f=1", "display_name": "neko", "link": "https://stackoverflow.com/users/11744580/neko"}, "is_accepted": true, "score": 1, "last_activity_date": 1563875963, "creation_date": 1563875963, "answer_id": 57161501, "question_id": 57160748, "link": "https://stackoverflow.com/questions/57160748/best-way-to-import-time-series-from-csv-and-plot-a-graph-using-python/57161501#57161501", "title": "Best way to import time series from CSV and plot a graph using Python", "body": "<p>Since you are new at python, I recommend that you take a look at <code>numpy</code> and <code>pandas</code> for general math and data manipulation, and at <code>matplotlib</code> for plotting.</p>\n\n<p>As for this problem, a possible solution is this:</p>\n\n<pre><code>from collections import defaultdict\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ndata = [[\"Mark\", 2014, 29000],\n        [\"Paul\", 2013, 33000],\n        [\"Paul\", 2014, 34000],\n        [\"Mark\", 2011, 20000],\n        [\"Mark\", 2012, 24000],\n        [\"Mark\", 2015, 30000]]\n\ndata_csv = pd.DataFrame(data, columns=[\"Employee\", \"Year\", \"Salary\"])\n\n\ndata_dict = defaultdict(list)\n\nfor row in data_csv.values:\n        data_dict[row[0]].append(row[1:])\n\n\nfig = plt.figure()\nax = plt.gca()\n\n\nfor name in data_dict.keys():\n        data_dict[name] = np.concatenate(data_dict[name]).reshape(-1, 2)\n        ax.scatter(data_dict[name][:,0], data_dict[name][:,1], label=name)\n\nplt.legend()\nplt.show()\n\n</code></pre>\n\n<p>In the first lines I create a dummy csv file with <code>pandas</code>, while in your case you will load it with <code>pd.read_csv</code>.</p>\n\n<p>The core is the <code>defaultdict</code>: since a priori the number of employees is not known, the values of the dictionaries are initialized as lists. Then I go over every row in the csv and for every name (a key in the dict) I append to the list the year and salary. At that point it is just a matter of reshaping everything in a 2d array with <code>numpy</code> and plot the results.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1563881939, "creation_date": 1563881939, "answer_id": 57163375, "question_id": 57160748, "link": "https://stackoverflow.com/questions/57160748/best-way-to-import-time-series-from-csv-and-plot-a-graph-using-python/57163375#57163375", "title": "Best way to import time series from CSV and plot a graph using Python", "body": "<p>Here is another example, using <code>numpy</code>, <code>defaultdict</code>, <code>csv.reader()</code>, and classes:</p>\n\n<pre><code>from collections import defaultdict\nimport csv\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ndef main():\n    raw_data = FileReader(fn='salary.csv')\n    data = ProcessData(raw_data)\n    Plotter(data)\n\nclass ProcessData:\n    def __init__(self, data):\n        self.data = data\n        self.t = sorted(data.years, key=int)\n        self.names = sorted(list(data.salary.keys()))\n        self.salary = dict()\n        self.create_salary_data()\n\n    def create_salary_data(self):\n        for name in self.names:\n            s = []\n            for year in self.t:\n                if year in self.data.salary[name]:\n                    s.append(self.data.salary[name][year])\n                else:\n                    s.append(None)\n            self.salary[name] = s\n\nclass FileReader:\n    def __init__(self, **kwargs):\n        if not 'fn' in kwargs:\n            raise Exception('No file name given')\n        self.fn = kwargs['fn']\n        self.salary = defaultdict(lambda: defaultdict(float))\n        self.years = set()\n        self.read_file()\n\n    def read_file(self):\n        with open('salary.csv', newline='') as csvfile:\n            reader = csv.reader(csvfile, delimiter=';')\n            header = next(reader)\n            for row in reader:\n                if len(row)==0:\n                    continue\n                if len(row) != 3:\n                    raise Exception('Bad row length in csv file')\n                name, year, salary = row\n                self.salary[name][year] = salary\n                self.years.add(year)\n\nclass Plotter:\n    def __init__(self, data):\n        self.data = data\n        t = data.t\n        names = sorted(list(data.salary.keys()))\n        fig, ax = plt.subplots()\n        for name in names:\n            temp = data.salary[name]\n            s = list(map(lambda ss: np.nan if ss is None else float(ss), temp))\n            ax.plot(t, s, label=name)\n\n        ax.set(xlabel='Date (year)', ylabel='Salary (\\$\\$)',\n           title='Employee salary')\n        ax.grid()\n        ax.legend(loc='upper right')\n        plt.show()\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 11823600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6ee3bb1ed524a88859f4abccd94df0?s=128&d=identicon&r=PG&f=1", "display_name": "eliteA92", "link": "https://stackoverflow.com/users/11823600/elitea92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 1, "accepted_answer_id": 57161501, "answer_count": 2, "score": 2, "last_activity_date": 1563881939, "creation_date": 1563873473, "last_edit_date": 1563873622, "question_id": 57160748, "link": "https://stackoverflow.com/questions/57160748/best-way-to-import-time-series-from-csv-and-plot-a-graph-using-python", "title": "Best way to import time series from CSV and plot a graph using Python", "body": "<p>One task I have to do many times is to read a CSV file with some time series data and then plot a graph showing it all.</p>\n\n<p>I have to import the data from a CSV file. It may not be sorted, it may have gaps and each series can start and end in different dates. For example:</p>\n\n<pre><code>Employee;Year;Salary\nMark;2014;29000\nPaul;2013;33000\nPaul;2014;34000\nMark;2011;20000\nMark;2012;24000\nMark;2015;30000\n</code></pre>\n\n<p>And I want to put it all in a graph showing each time series (two lines where X-axis will be the date and Y-axis the salary of the employee). It is crucial to take into account any existing gaps in data. </p>\n\n<p>Ok, so I started to learn programming with Perl. And my first approach to the problem was:</p>\n\n<p>First, import the data from the CSV and store it into a hash, like this:</p>\n\n<pre><code>$imported_data-&gt;{$employee}{$year} = $salary;\n</code></pre>\n\n<p>After importing the data, I generate a sorted series of dates without gaps using a loop and the DateTime module. It will result in an array like this:</p>\n\n<pre><code>[ 2011, 2012, 2013, 2014, 2015 ]\n</code></pre>\n\n<p>Then, I generate the arrays of salary data for each employee. I use the array of dates to make a loop finding the salary for each date and returning an undef if the data is missing:</p>\n\n<pre><code>for my $date (@dates) {\n    $salary = $imported_data-&gt;{$employee}{$year};\n    if ( defined $salary ) {\n        push @salary_array, $salary;\n    } else {\n        push @salary_array, undef;\n    }\n}\n</code></pre>\n\n<p>This will result in the following arrays (one for each employee):</p>\n\n<pre><code>[ 20000, 24000, undef, 29000, 30000 ]\n[ undef, undef, 33000, 34000, undef ]\n</code></pre>\n\n<p>And now I can plot the data pairing the array of dates (X values) with each array of salaries (Y values), resulting in an XY graph with two series. The data is now sorted and the gaps will be shown properly.</p>\n\n<p>Ok, I don't know if this is the best way (probably not...), but it worked fine.</p>\n\n<p>However, now I am starting to use Phyton and I want to rethink this way of doing the task. As you can see, in Perl I have used a hash of hashes to store the imported data. I don't know if Phyton's dictionaries can do this and if it is easy to manage. </p>\n\n<p>So I am open to ideas from more experienced programmers. How would you do it? Is there any useful module for this kind of things?</p>\n"}, {"tags": ["perl", "marc"], "comments": [{"owner": {"reputation": 375, "user_id": 2560906, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa351109d2708e6089041ea705eeba05?s=128&d=identicon&r=PG", "display_name": "Elie Roux", "link": "https://stackoverflow.com/users/2560906/elie-roux"}, "edited": false, "score": 0, "creation_date": 1563870236, "post_id": 57159722, "comment_id": 100833758, "body": "perhaps related to <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=31521\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=31521</a> ?"}, {"owner": {"reputation": 375, "user_id": 2560906, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa351109d2708e6089041ea705eeba05?s=128&d=identicon&r=PG", "display_name": "Elie Roux", "link": "https://stackoverflow.com/users/2560906/elie-roux"}, "edited": false, "score": 0, "creation_date": 1563870619, "post_id": 57159722, "comment_id": 100833935, "body": "if I apply this patch: <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=32332\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=32332</a> everything works, I suppose the problem is lying there"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1563875250, "post_id": 57159722, "comment_id": 100836616, "body": "Hint: run the program with <a href=\"http://p3rl.org/Carp::Always\" rel=\"nofollow noreferrer\"><code>-MCarp::Always</code></a> to get a helpful stacktrace, it will identify the faulty record. \u2013\u2013\u2013 The mrc file is full of <code>0xCA</code> octets (evident through the use of a hex dumper), but that&#39;s fine. It&#39;s always part of the UTF-8 sequence 0xCA 0xBC which after decoding turns into <code>U+02BC \u2039\u02bc\u203a \\N{MODIFIER LETTER APOSTROPHE}</code> used in Tibetan romanisation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563886888, "post_id": 57159722, "comment_id": 100843247, "body": "There are definitely problems with MARC::File::USMARC. The whole approach taken to handle the encoding is wrong --it uses bytes.pm!!!-- so the solution isn&#39;t trivial. Whether that&#39;s why you are getting those warnings or not is unknown."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1563933319, "last_edit_date": 1563933319, "creation_date": 1563891838, "answer_id": 57166324, "question_id": 57159722, "link": "https://stackoverflow.com/questions/57159722/perl-utf8-something-does-not-map-to-unicode-while-something-doesnt-seem-to/57166324#57166324", "title": "perl: utf8 &lt;something&gt; does not map to Unicode while &lt;something&gt; doesn&#39;t seem to be present present", "body": "<p>The problem has nothing to do with MARC::Lint. Remove the lint check, and you'll still get the error.</p>\n\n<p>The problem is a bad data file.</p>\n\n<p>The file contains a \"directory\" of where the information is located in the file. The following is a human-readable rendition of the directory for the file you provided:</p>\n\n<pre><code>tagno|offset|len   # Offsets are from the start of the data portion.\n001|00000|0017     # Length include the single-byte field terminator.\n006|00017|0019     # Offset and lengths are in bytes.\n007|00036|0015\n008|00051|0041\n035|00092|0021\n035|00113|0021\n040|00134|0018\n050|00152|0022\n066|00174|0009\n245|00183|0101\n246|00284|0135\n264|00419|0086\n300|00505|0034\n336|00539|0026\n337|00565|0026\n338|00591|0036\n546|00627|0016\n500|00643|0112\n505|00755|9999  &lt;--\n506|29349|0051\n520|29400|0087\n533|29487|0115\n542|29602|0070\n588|29672|0070\n653|29742|0013\n710|29755|0038\n720|29793|0130\n776|29923|0066\n856|29989|0061\n880|30050|0181\n880|30231|0262\n</code></pre>\n\n<p>Notice the length of the field with tag 505, <code>9999</code>. This is the maximum value supported (because the length is stored as four decimal digits). The catch is that value of that field is far larger than 9,999 bytes; it's actually 28,594 bytes in size.</p>\n\n<p>What happens is that the module extracts 9,999 bytes rather than 28,594. This happens to cut a UTF-8 sequence in half. (The specific sequence is  <code>CA BA</code>, the encoding of <code>\u02bc</code>.) Later, when the module attempts to decode that text, an error is thrown. (<code>CA</code> must be followed by another byte to be valid.)</p>\n\n<p>Are these records you are generating? If so, you need to make sure that no field requires more than 9,999 bytes.</p>\n\n<p>Still, the module should handle this better. It could read until it finds a end-of-field marker instead of using the length when it finds no end-of-field marker where it expects one and/or it could handle decoding errors in a non-fatal manner. It already has a mechanism to report these problems (<code>$marc-&gt;warnings</code>).</p>\n\n<p>In fact, if it hadn't died (say if the cut happened to occur in between characters instead of in the middle of one), <code>$marc-&gt;warnings</code> would have returned the following message:</p>\n\n<pre><code>field does not end in end of field character in tag 505 in record 1\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 2560906, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa351109d2708e6089041ea705eeba05?s=128&d=identicon&r=PG", "display_name": "Elie Roux", "link": "https://stackoverflow.com/users/2560906/elie-roux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 57166324, "answer_count": 1, "score": 1, "last_activity_date": 1563933319, "creation_date": 1563869983, "question_id": 57159722, "link": "https://stackoverflow.com/questions/57159722/perl-utf8-something-does-not-map-to-unicode-while-something-doesnt-seem-to", "title": "perl: utf8 &lt;something&gt; does not map to Unicode while &lt;something&gt; doesn&#39;t seem to be present present", "body": "<p>I'm using <code>MARC::Lint</code> to lint some MARC records, but every now and them I'm getting an error (on about 1% of the files):</p>\n\n<pre><code>utf8 \"\\xCA\" does not map to Unicode at /usr/lib/x86_64-linux-gnu/perl/5.26/Encode.pm line 212.\n</code></pre>\n\n<p>The problem is that I've tried different methods but cannot find <code>\"\\xCA\"</code> in the file...</p>\n\n<p>My script is:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!perl -w\nuse MARC::File::USMARC;\nuse MARC::Lint;\nuse utf8;\n\nuse open OUT =&gt; ':utf8';\n\nmy $lint = new MARC::Lint;\nmy $filename = shift;\n\nmy $file = MARC::File::USMARC-&gt;in( $filename );\nwhile ( my $marc = $file-&gt;next() ) {\n    $lint-&gt;check_record( $marc );\n    # Print the errors that were found\n    print join( \"\\n\", $lint-&gt;warnings ), \"\\n\";\n} # while\n</code></pre>\n\n<p>and the file can be downloaded here: <a href=\"http://eroux.fr/I14376.mrc\" rel=\"nofollow noreferrer\">http://eroux.fr/I14376.mrc</a> </p>\n\n<p>Is \"\\xCA\" hidden somewhere? Or is this a bug in MARC::Lint?</p>\n"}, {"tags": ["perl", "stdout", "filehandle"], "comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 2, "creation_date": 1563851541, "post_id": 57155796, "comment_id": 100827241, "body": "The <code>STDOUT</code> in <code>printf STDERR (&quot;STDOUT = %s\\n&quot;, STDOUT);</code> is an example of the &quot;poetry optimization&quot; compatibility misfeature -- the <code>STDOUT</code> bareword is treated as a literal string, the same as <code>&quot;STDOUT&quot;</code>. That&#39;s an error with <code>use strict</code>, which you should <b>always</b> use. As to your claim of understanding typeglobs and handles -- great for you! I always have to think of how they&#39;re implemented in the interpreter in order to make sense of the mess."}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563850998, "post_id": 57156057, "comment_id": 100827151, "body": "<code>select</code> is probably the more perl/lisp thing to do.  I was also thinking of a dynamically scoped <code>STDOUT</code>.  This may be how select is implemented.  Thanks."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 4, "last_activity_date": 1563850739, "creation_date": 1563850739, "answer_id": 57156057, "question_id": 57155796, "link": "https://stackoverflow.com/questions/57155796/what-type-is-stdout-and-how-do-i-optionally-write-to-it/57156057#57156057", "title": "What type is STDOUT, and how do I optionally write to it?", "body": "<p>From <a href=\"https://perldoc.perl.org/perlvar.html#The-Syntax-of-Variable-Names\" rel=\"nofollow noreferrer\">perlvar</a>:</p>\n\n<blockquote>\n  <p>Perl identifiers that begin with digits or punctuation characters are exempt from the effects of the <code>package</code> declaration and are always forced to be in package <code>main</code>; they are also exempt from <code>strict 'vars'</code> errors. A few other names are also exempt in these ways: [...] <code>STDOUT</code></p>\n</blockquote>\n\n<p>So, <code>STDOUT</code> is a global variable containing a pre-opened file handle.</p>\n\n<p>From <a href=\"https://perldoc.perl.org/perlfunc.html#open-FILEHANDLE%2cEXPR\" rel=\"nofollow noreferrer\">perlfunc</a>:</p>\n\n<blockquote>\n  <p>If FILEHANDLE is an undefined scalar variable (or array or hash element), a new filehandle is autovivified, meaning that the variable is assigned a reference to a newly allocated anonymous filehandle. Otherwise if FILEHANDLE is an expression, its value is the real filehandle.</p>\n</blockquote>\n\n<p>Your <code>$OUT_FILE_HANDLE</code> is not undefined, so it is its value, <code>STDOUT</code>, that is being opened. AFAIK, if you open an already open handle, it is implicitly closed first.</p>\n\n<p>There are several ways to do what you want. The first is obvious from the above quote \u2014 do not define <code>$OUT_FILE_HANDLE</code> before the <code>open</code>:</p>\n\n<pre><code>if (@ARGV &gt; 0 ) {\n  open($OUT_FILE_HANDLE, \"&gt;\", \"$ARGV[0]\") or die $!;\n} else {\n  $OUT_FILE_HANDLE = \\*STDOUT;\n}\n# do stuff to $OUT_FILE_HANDLE\n</code></pre>\n\n<p>Another is to use <code>select</code>, so you don't need to pass a file handle:</p>\n\n<pre><code>if (@ARGV &gt; 0 ) {\n  open($OUT_FILE_HANDLE, \"&gt;\", \"$ARGV[0]\") or die $!;\n  select $OUT_FILE_HANDLE;\n}\n# do stuff (without specifying a file handle)\nselect STDOUT;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1614244874, "last_edit_date": 1614244874, "creation_date": 1563858161, "answer_id": 57156978, "question_id": 57155796, "link": "https://stackoverflow.com/questions/57155796/what-type-is-stdout-and-how-do-i-optionally-write-to-it/57156978#57156978", "title": "What type is STDOUT, and how do I optionally write to it?", "body": "<p>Create a lexical filehandle to be a copy of <code>STDOUT</code></p>\n<pre><code>sub manip_fh { \n    my ($fh) = @_;\n    say $fh &quot;hi&quot;;                              # goes to STDOUT\n    open my $fh, '&gt;', 'a_file.txt' or die $!;  # now it's to a file\n    say $fh &quot;hello&quot;;\n}\n\nopen my $fh, '&gt;&amp;', STDOUT;  # via dup2\n\nmanip_fh($fh);\n\nsay &quot;hi&quot;;  # still goes where STDOUT went before being dup-ed (terminal)\n</code></pre>\n<p>This new, independent, filehandle can then be reopened to another resource without affecting <code>STDOUT</code>.  See <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a>.</p>\n<p>The <code>$OUT_FILE_HANDLE = \\*STDOUT;</code> from the question creates an alias and so the <code>STDOUT</code> does indeed get changed when the &quot;new&quot; one changes. You can see that by printing the <a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">typeglob</a></p>\n<pre><code>our $NEW = \\*STDOUT;\nsay *{$main::NEW};    #--&gt; *main::STDOUT\n</code></pre>\n<p>or by printing the <code>IO</code> slot from the symbol table for both</p>\n<pre><code>say for *{$main::NEW}{IO}, *{$main::{STDOUT}}{IO};\n</code></pre>\n<p>and seeing (that the object stringifies to) the same (eg <code>IO::File=IO(0x1a8ca50)</code>).</p>\n<p>When it's duped using <code>open</code> with mode <code>&gt;&amp;</code> as in the first code snippet (but as global <code>our</code>) it prints <code>*main::NEW</code>, and its <code>IO::File</code> object is not the same as for <code>STDOUT</code>.  (Make it a global <code>our</code> so that it is in the symbol table for this check, but not for real use; it's <em>much</em> better having a lexical.)</p>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563966556, "post_id": 57174186, "comment_id": 100873943, "body": "I thought it sometime was interpreted as a <code>sub</code>?  I don&#39;t know, since I always <code>use strict</code>.  I had to take it out for this example, just to see what would happen."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563974381, "post_id": 57174186, "comment_id": 100878443, "body": "It&#39;s interpreted as a sub call if a sub with that name has previously been declared. That&#39;s one of the &quot;other meanings&quot; to which I referred."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1564156098, "post_id": 57174186, "comment_id": 100951096, "body": "I&#39;ve got another question, but I don&#39;t know how to phrase it.  Is there a programmatic way to see/know  how the compiler is going to interpret a bare word?  In my program above, I tried to print STDOUT, and it hit #8, and not #7.  I think."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1564156873, "post_id": 57174186, "comment_id": 100951456, "body": "You can use <code>-MO=Concise</code> or <code>-MO=Concise,-exec</code> to see how the program is compiled. /// That list is original content created for this answer. There could be a mistake, but I&#39;m pretty confident due to extensive testing. (If anyone thinks there&#39;s a situation in which they think Perl interprets an identifier differently than this chart, I would very much like to hear about it so I can fix the chart). /// If you&#39;re referring to <code>printf STDERR (&quot;STDOUT = %s\\n&quot;, STDOUT);</code>, <code>printf</code>: #5, <code>STDERR</code>: #7, <code>STDOUT</code>: #8"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 1, "creation_date": 1564264185, "post_id": 57174186, "comment_id": 100974965, "body": "The two examples of <b>4</b> are completely different, and only one of them will override <b>5</b>. Compare <code>perl -le &#39;use constant length =&gt; 7; print length&#39;</code> (fails to override <code>length</code>) with <code>perl -le &#39;BEGIN { package P; *{main::length} = sub(){ 17 } } print length&#39;</code> (handcrafted Exporter, overrides <code>length</code>, constant folding just like <code>use constant</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1564264266, "post_id": 57174186, "comment_id": 100974988, "body": "@mosvy, Thanks. Moved <code>use constant</code> from #4 to #6"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1570419253, "last_edit_date": 1570419253, "creation_date": 1563933055, "answer_id": 57174186, "question_id": 57155796, "link": "https://stackoverflow.com/questions/57155796/what-type-is-stdout-and-how-do-i-optionally-write-to-it/57174186#57174186", "title": "What type is STDOUT, and how do I optionally write to it?", "body": "<p>This part of your question wasn't answered:</p>\n\n<blockquote>\n  <p><em>The \"bareword\" one leaves me curious.</em></p>\n</blockquote>\n\n<p>An identifier with no other meaning is a string literal that produces itself.<sup>[1]</sup> For example, <code>foo</code> is the same as <code>'foo'</code>.</p>\n\n<pre><code>$ perl -e'my $x = foo; print \"$x\\n\";'\nfoo\n</code></pre>\n\n<p>This is error-prone, so we use <code>use strict qw( subs );</code> to prevent this.</p>\n\n<pre><code>$ perl -e'use strict; my $x = foo; print \"$x\\n\";'\nBareword \"foo\" not allowed while \"strict subs\" in use at -e line 1.\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<hr>\n\n<ol>\n<li>See <a href=\"https://stackoverflow.com/q/58263206/589924\">this</a> for other meanings Perl could assign.</li>\n</ol>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 57156057, "answer_count": 3, "score": 4, "last_activity_date": 1614244874, "creation_date": 1563847989, "question_id": 57155796, "link": "https://stackoverflow.com/questions/57155796/what-type-is-stdout-and-how-do-i-optionally-write-to-it", "title": "What type is STDOUT, and how do I optionally write to it?", "body": "<p>Does STDOUT have a \"type\"?</p>\n\n<pre><code>printf STDERR (\"STDOUT = %s\\n\", STDOUT);\nprintf STDERR (\"\\*STDOUT = %s\\n\", *STDOUT);\nprintf STDERR (\"\\\\\\*STDOUT = %s\\n\", \\*STDOUT);\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>STDOUT = STDOUT\n*STDOUT = *main::STDOUT\n\\*STDOUT = GLOB(0x600078848)\n</code></pre>\n\n<p>I understand the <code>*main::STDOUT</code> and <code>GLOB(0x600078848)</code> entries.  The \"bareword\" one leaves me curious.</p>\n\n<p>I'm asking because I want to pass a file handle-like argument to a method call.  In 'C', I'd use a file descriptor or a File *.  I want it to default to STDOUT.  What I've done is:</p>\n\n<pre><code>$OUT_FILE_HANDLE = \\*STDOUT;\nif(@ARGV &gt; 0 ) {\n    open($OUT_FILE_HANDLE, \"&gt;\", \"$ARGV[0]\") or die $!;\n}\n</code></pre>\n\n<p>It works, but I don't know exactly what I've done.  Have I botched up STDOUT?  I suspect I have \"ruined\" (overwritten) STDOUT, which is NOT what I want.</p>\n\n<p>Please pardon the compound question;  they seemed related.</p>\n"}, {"tags": ["perl", "cookies", "lwp-useragent", "mojo-useragent"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1563854247, "post_id": 57148539, "comment_id": 100827708, "body": "I&#39;ve uploaded a new version of HTTP::Cookies::Mozilla and it includes a sample program that solves this issue."}], "answers": [{"comments": [{"owner": {"reputation": 3045, "user_id": 951615, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/32f59de3e1040fae90a803448e43316f?s=128&d=identicon&r=PG", "display_name": "smith", "link": "https://stackoverflow.com/users/951615/smith"}, "edited": false, "score": 0, "creation_date": 1563810419, "post_id": 57149215, "comment_id": 100814568, "body": "I see ,What i am trying to do is to use HTTP::Cookies::Mozilla which is a subclass of HTTP::Cookies to copy all my Firefox cookies to mojo::cookies and use them with Mojo::UserAgent , what is the fast solution to do this ?"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563809238, "creation_date": 1563809238, "answer_id": 57149215, "question_id": 57148539, "link": "https://stackoverflow.com/questions/57148539/httpcookies-to-mojouseragentcookiejar/57149215#57149215", "title": "HTTP::Cookies to Mojo::UserAgent::CookieJar", "body": "<p>They are not compatible objects, and nothing other than HTTP::Cookies can read the file it creates. You need to use a <a href=\"https://metacpan.org/pod/Mojo::UserAgent::CookieJar\" rel=\"nofollow noreferrer\">Mojo::UserAgent::CookieJar</a> with Mojo::UserAgent. Note that it will create one by default, accessed via $ua->cookie_jar. It does not have file serialization support, but the <a href=\"https://metacpan.org/pod/Mojo::UserAgent::CookieJar::Role::Persistent\" rel=\"nofollow noreferrer\">Persistent role</a> can add this functionality -- it still will not read the HTTP::Cookies format however.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563810894, "post_id": 57149523, "comment_id": 100814766, "body": "I thought about the as_string method but it won&#39;t work, it creates a string in the same format it exports to, not in the format that would be expected from response data by other cookie jars. scan is probably the best bet."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1563854230, "last_edit_date": 1563854230, "creation_date": 1563810321, "answer_id": 57149523, "question_id": 57148539, "link": "https://stackoverflow.com/questions/57148539/httpcookies-to-mojouseragentcookiejar/57149523#57149523", "title": "HTTP::Cookies to Mojo::UserAgent::CookieJar", "body": "<p>I've uploaded a new version of <a href=\"https://metacpan.org/pod/HTTP::Cookies::Mozilla\" rel=\"nofollow noreferrer\">HTTP::Cookies::Mozilla</a> and it includes a sample program that solves this issue.</p>\n\n<p><hr/>\nLoad your data using <code>HTTP::Cookie</code> then convert it whatever format that you like by calling <code>scan</code> with a callback:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$cookie_jar = HTTP::Cookies-&gt;new(\n  file =&gt; \"my$path/my_cookies.dat\",\n  autosave =&gt; 1,\n);\n$cookie_jar-&gt;scan( \\&amp;callback )\n</code></pre>\n\n<p>Inside that callback, convert it to the <code>Mojo::Cookie::Response</code> object:</p>\n\n<pre><code>{\nmy $jar = Mojo::UserAgent::CookieJar-&gt;new\n\n# access the scoped variable after you've run all the callbacks.\nsub jar { $jar }\n\nsub callback {\n    my( $version, $key, $val, $path, $domain, $port, \n        $path_spec, $secure, $expires, $discard, $hash ) = @_;\n\n    my $cookie = Mojo::Cookie::Response-&gt;new;\n    ...fill in data...\n\n    $jar-&gt;add( $mojo_cookie);\n    )\n}\n</code></pre>\n\n<p>Alternately, write a subclass of <code>HTTP::Cookies</code> that reads your format the <code>HTTP::Cookies</code> way but populates a <code>Mojo::CookieJar</code> instead. It's not that hard (and I've written several such things, some of which are on CPAN).</p>\n\n<p><strike><code>HTTP::Cookies</code> also has the <code>as_string</code> method which makes a multi-line string with one cookie per string. You can use those lines to feed into <code>Mojo::Cookie</code> to re-parse them, but that's not as appealing to me.</strike></p>\n"}], "owner": {"reputation": 75, "user_id": 10546869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3_LmQqfkVxE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCk5Nau3q6Zn2oOdR5W6HLTv-Rg3g/mo/photo.jpg?sz=128", "display_name": "jsor", "link": "https://stackoverflow.com/users/10546869/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 57149523, "answer_count": 2, "score": 1, "last_activity_date": 1563905226, "creation_date": 1563806893, "last_edit_date": 1563905226, "question_id": 57148539, "link": "https://stackoverflow.com/questions/57148539/httpcookies-to-mojouseragentcookiejar", "title": "HTTP::Cookies to Mojo::UserAgent::CookieJar", "body": "<p>I have <code>$cookie_jar</code> which created using <a href=\"https://metacpan.org/pod/HTTP::Cookies\" rel=\"nofollow noreferrer\">HTTP::Cookies</a>:</p>\n\n<pre><code>$cookie_jar = HTTP::Cookies-&gt;new(\n  file =&gt; \"my$path/my_cookies.dat\",\n  autosave =&gt; 1,\n);\n</code></pre>\n\n<p>I want to use this <code>$cookie_jar</code> using <a href=\"https://mojolicious.org/perldoc/Mojo/Cookie\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> but didn't find an option, the only option I see is parsing raw string:</p>\n\n<pre><code>my $cookies = $cookie-&gt;parse($str);\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 2, "creation_date": 1563803273, "post_id": 57147340, "comment_id": 100810078, "body": "You&#39;ll need the <code>N</code> command in sed to do this: <code>sed &#39;{N;s&#47;line1\\n&#47;line1&#47;;}</code> See <a href=\"https://stackoverflow.com/questions/7852132/sed-join-lines-together\" title=\"sed join lines together\">stackoverflow.com/questions/7852132/sed-join-lines-together</a>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1563803698, "post_id": 57147340, "comment_id": 100810375, "body": "Probably <code>sed -Ez &#39;s&#47;(line1)\\r?\\n&#47;\\1&#47;&#39; my_file</code> will work for you (with GNU sed)"}, {"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1563803836, "post_id": 57147340, "comment_id": 100810456, "body": "@WiktorStribi\u017cew unfortunately it doesn&#39;t."}, {"owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "edited": false, "score": 0, "creation_date": 1563803904, "post_id": 57147340, "comment_id": 100810503, "body": "Or <code>sed &#39;N;s&#47;line1[[:space:]]*&#47;line1 &#47;&#39; my_file</code> to remove extra leading spaces from line2 as well."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563803636, "post_id": 57147461, "comment_id": 100810331, "body": "This one merged only first two lines. The rest remained unchanged. Nevertheless thank you."}, {"owner": {"reputation": 1134, "user_id": 1776732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/YdwnN.jpg?s=128&g=1", "display_name": "Paul Dawson", "link": "https://stackoverflow.com/users/1776732/paul-dawson"}, "reply_to_user": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 1, "creation_date": 1563803764, "post_id": 57147461, "comment_id": 100810416, "body": "How do you mean? It will go through the whole file and print alternate lines on one line. You could use <code>paste -d&quot; &quot; - - -</code> will print every 3 lines onto one and so forth."}, {"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563803983, "post_id": 57147461, "comment_id": 100810565, "body": "Ok than it works. Is there any way to not specify dashes? Can&#39;t it go to the end of the file itself?"}, {"owner": {"reputation": 1134, "user_id": 1776732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/YdwnN.jpg?s=128&g=1", "display_name": "Paul Dawson", "link": "https://stackoverflow.com/users/1776732/paul-dawson"}, "reply_to_user": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563804070, "post_id": 57147461, "comment_id": 100810638, "body": "No, that&#39;s part of the command <code>- -</code> is 2 lines <code>- - -</code> is 3 lines <code>- - - -</code> is 4 lines etc."}, {"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 1, "creation_date": 1563804282, "post_id": 57147461, "comment_id": 100810795, "body": "Oh now I understand. It was working the whole time what I forgot to mention was that I had empty lines in between and hence I thought it was broken. Now I think that I like your answer the most."}], "tags": [], "owner": {"reputation": 1134, "user_id": 1776732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/YdwnN.jpg?s=128&g=1", "display_name": "Paul Dawson", "link": "https://stackoverflow.com/users/1776732/paul-dawson"}, "is_accepted": true, "score": 1, "last_activity_date": 1563803311, "creation_date": 1563803311, "answer_id": 57147461, "question_id": 57147340, "link": "https://stackoverflow.com/questions/57147340/bash-merge-two-specific-lines-into-one/57147461#57147461", "title": "Bash merge two specific lines into one", "body": "<p>You can use <code>paste</code> and <code>tr</code> for this:</p>\n\n<pre><code>cat file | paste -d\" \" - - | tr -s ' '\n\nline1 line2\nline1 line2\nline1 line2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563803733, "post_id": 57147515, "comment_id": 100810399, "body": "Awesome this is exactly what I wanted. Doesn&#39;t sed really have any flag or something to match the whole line?"}, {"owner": {"reputation": 1134, "user_id": 1776732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/YdwnN.jpg?s=128&g=1", "display_name": "Paul Dawson", "link": "https://stackoverflow.com/users/1776732/paul-dawson"}, "edited": false, "score": 0, "creation_date": 1563803876, "post_id": 57147515, "comment_id": 100810482, "body": "There are four spaces between line1 and line2"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563803904, "post_id": 57147515, "comment_id": 100810502, "body": "@Z.Szymon: Using sed you can do: <code>sed -E &#39;N;s&#47;(line1)\\n&#47;\\1&#47;;&#39; file</code>"}, {"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563804106, "post_id": 57147515, "comment_id": 100810668, "body": "@anubhava it has taken care of only the first two lines, the rest remained unchanged"}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1563804258, "post_id": 57147515, "comment_id": 100810774, "body": "Strangely on my sed or perl, it is changing full file."}, {"owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "edited": false, "score": 0, "creation_date": 1563804424, "post_id": 57147515, "comment_id": 100810887, "body": "It was working the whole time what I forgot to mention was that I had empty lines in between and hence I thought it was broken. I&#39;m sorry."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 1134, "user_id": 1776732, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/YdwnN.jpg?s=128&g=1", "display_name": "Paul Dawson", "link": "https://stackoverflow.com/users/1776732/paul-dawson"}, "edited": false, "score": 2, "creation_date": 1563804430, "post_id": 57147515, "comment_id": 100810891, "body": "@AlfredE.Noobman: Thanks, I overlooked space removal requirement in question, It is fixed now."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1563804507, "post_id": 57147515, "comment_id": 100810941, "body": "@Z.SzymonL Then you may need <code>perl -0777 -pe &#39;s&#47;(line1)R+\\h+&#47;$1 &#47;g&#39; file</code>"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1563804521, "last_edit_date": 1563804521, "creation_date": 1563803457, "answer_id": 57147515, "question_id": 57147340, "link": "https://stackoverflow.com/questions/57147340/bash-merge-two-specific-lines-into-one/57147515#57147515", "title": "Bash merge two specific lines into one", "body": "<p><code>sed</code> doesn't match across the line. You may use <code>perl</code> in slurp mode:</p>\n\n<pre><code>perl -0777 -pe 's/(line1)\\R+\\h+/$1 /g' file\n</code></pre>\n\n<p></p>\n\n<pre><code>line1 line2\nline1 line2\nline1 line2\nline1 line2\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 8960867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b43014e0531e5af12d85f6855af003?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Szymon", "link": "https://stackoverflow.com/users/8960867/z-szymon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1563803562, "accepted_answer_id": 57147461, "answer_count": 2, "score": -2, "last_activity_date": 1563804521, "creation_date": 1563802823, "last_edit_date": 1563804285, "question_id": 57147340, "link": "https://stackoverflow.com/questions/57147340/bash-merge-two-specific-lines-into-one", "closed_reason": "Duplicate", "title": "Bash merge two specific lines into one", "body": "<p>I have a file that consists of two repeatedly occurring lines. </p>\n\n<pre><code>line1\n     line2\nline1\n     line2\nline1\n     line2\n</code></pre>\n\n<p>I want to merge them so that the output file would look like:</p>\n\n<pre><code>line1 line2\nline1 line2\nline1 line2\n</code></pre>\n\n<p>Unfortunately I didn't succeed. \nIn notepad++ I could do something like:</p>\n\n<pre><code>search: (line1)(\\r\\n)\nreplace: \\1\n</code></pre>\n\n<p>Here I wanted to do the same but this:</p>\n\n<pre><code>sed -E 's/(line1)(\\n)/\\1/' my_file\n</code></pre>\n\n<p>doesn't work</p>\n"}, {"tags": ["regex", "perl", "datetime"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1563803560, "post_id": 57146961, "comment_id": 100810286, "body": "Did you missed <code>.log</code> in the regex at the end? Because you are matching the log file. But your pattern ends with to match the digit."}, {"owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1563804158, "post_id": 57146961, "comment_id": 100810696, "body": "@mkHun These are zip files filled with .log files. But that is not my problem. The problem is that I can&#39;t convert the value from the regex to a DateTime"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563808806, "post_id": 57146961, "comment_id": 100813607, "body": "The only use of <code>ne</code> in your code is on line 205. Your error message says it is on line 224. There is an unexplained discrepancy of 19 lines. But if you take account of that discrepancy then the rest of the errors seem to match up with your code. But really, not everyone is going to take the time to investigate that discrepancy. You need to make it easier for people to help you."}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "edited": false, "score": 0, "creation_date": 1563806091, "post_id": 57148180, "comment_id": 100812011, "body": "I&#39;m sorry the program is a lot bigger so I only posted the sub routine. I&#39;ll edit my post"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "edited": false, "score": 0, "creation_date": 1563806661, "post_id": 57148180, "comment_id": 100812357, "body": "@poisn: Ok, you&#39;ve made the heading more accurate. But that&#39;s not really very helpful, is it? I&#39;m still guessing at parts of your program. And those parts are apparently the bits that are causing your problems."}, {"owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "edited": false, "score": 0, "creation_date": 1563807464, "post_id": 57148180, "comment_id": 100812828, "body": "Yeah the problem is still here. I&#39;ll update the code again"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "edited": false, "score": 0, "creation_date": 1563807635, "post_id": 57148180, "comment_id": 100812934, "body": "@poisn: <i>I&#39;ll update the code again</i> Again? You&#39;ve haven&#39;t updated the code yet :-) And also, the error messages you quote should contain line numbers (but you&#39;ve removed them). It would be helpful to know which lines of your code match those line numbers."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1563809058, "last_edit_date": 1563809058, "creation_date": 1563805688, "answer_id": 57148180, "question_id": 57146961, "link": "https://stackoverflow.com/questions/57146961/parse-datetime-with-1-and-2-value-from-regex/57148180#57148180", "title": "Parse DateTime with $1 and $2 value from regex", "body": "<blockquote>\n  <p><strong>The full code</strong></p>\n</blockquote>\n\n<p>It's not though, is it? I needed to add a bit more in order to test your code. Here's what I ended up with.</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Added these three essential lines\nuse strict;\nuse warnings;\nuse DateTime::Format::Strptime;\n\n# Added sample log file names\nmy @logs = (qw[\n  stdout.log.190605113009-190605115714\n  stdout.log.190605110200-190605113009.gz_2019-06-07\n  stdout.log.unknown-190618025803.gz_2019-06-19\n]);\n\n# Added call to subroutine\nStdoutFile($_) for @logs;\n\nsub StdoutFile {\n    # Added parameter handling\n    my $filename = shift;\n\n    print \"$filename\\n\";\n    $filename =~ /^stdout\\.log\\.((?:\\d+?)|unknown)-(\\d+?)(?:\\.gz_\\d{4}-\\d{1,2}-\\d{1,2})?$/g;\n\n    if ($1 ne \"unknown\") {\n\n        my $firstDate = substr($1, 0, 6);\n        my ($year, $month, $day) = unpack(\"(a2)*\", $firstDate);\n        $year = \"20\" . $year;\n        $firstDate = $year . \"_\" . $month . \"_\" . $day;\n        print \"$firstDate\\n\";\n    }\n\n    my $secondDate = substr($2, 0, 6);\n    my ($year, $month, $day) = unpack(\"(a2)*\", $secondDate);\n    $year = \"20\" . $year;\n    $secondDate = $year . \"_\" . $month . \"_\" . $day;\n    print \"$secondDate\\n\";\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($secondDate);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( weeks =&gt; 2);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete\\n\";\n    }\n# Added missing closing brace\n}\n</code></pre>\n\n<p>And when I run it, I get the following output:</p>\n\n<pre><code>stdout.log.190605113009-190605115714\n2019_06_05\n2019_06_05\ndelete\nstdout.log.190605110200-190605113009.gz_2019-06-07\n2019_06_05\n2019_06_05\ndelete\nstdout.log.unknown-190618025803.gz_2019-06-19\n2019_06_18\ndelete\n</code></pre>\n\n<p>And no errors.</p>\n\n<p>So presumably, the additions I've made (all of which are marked with comments) don't match the code that I haven't seen.</p>\n\n<p>If you give us a program that we can run and that demonstrates the error, then we can probably help you fix it. If we have to guess at some of your code, then we'll be less useful.</p>\n\n<p><strong>Update:</strong> Looking at your error messages, it seems very likely that you have some log file names that don't match your regex. The best way to deal with that is probably to present a warning and to return immediately from the subroutine in these circumstances.</p>\n\n<p>After the regex check, you could add something like this:</p>\n\n<pre><code>unless (defined $1 and defined $2) {\n  warn \"Log file '$filename' does not match regex\\n\";\n  return;\n}\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 9892631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9270664e143242e154d99f1401acab12?s=128&d=identicon&r=PG&f=1", "display_name": "poisn", "link": "https://stackoverflow.com/users/9892631/poisn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57148180, "answer_count": 1, "score": -2, "last_activity_date": 1563809058, "creation_date": 1563801461, "last_edit_date": 1563808544, "question_id": 57146961, "link": "https://stackoverflow.com/questions/57146961/parse-datetime-with-1-and-2-value-from-regex", "title": "Parse DateTime with $1 and $2 value from regex", "body": "<p>I'm trying to delete some <strong>.log</strong> Files with perl.\nI have three different variants of filenames.</p>\n\n<p><code>1: stdout.log.190605113009-190605115714</code><br>\n<code>2: stdout.log.190605110200-190605113009.gz_2019-06-07</code> and<br>\n<code>3: stdout.log.unknown-190618025803.gz_2019-06-19</code></p>\n\n<p>Now with my regex I'm splitting the name so that I get two groups with the date.  </p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse v5.10;\nuse strict;\nuse warnings;\n\n\nuse local::lib;\nuse Data::Dumper qw(Dumper);\nuse File::Basename;\nuse DateTime;\nuse DateTime::Format::Strptime;\nuse DateTime::Duration;\nuse POSIX qw(strftime);\nuse Time::Local;\nuse Time::Piece;\nuse Time::Seconds 'ONE_WEEK';\n\n#How to use dry Flag in cmd:\n#prove --dry C:/path/to/file/file.pl [start argument]\n\n#Get the script parameter\nmy $path = $ARGV[0];\nmy $file;\nmy $filename;\n\n#Looks if script parameter != null\nif (not defined $path) {\n    die \"Need a path\\n\"\n}\n\n#Looks if $path is a existing directory\nif (-d $path) {\n    print \"Directory exist\\n\";\n\n    DoDir($path);\n} else {\n    die \"Directory don't exist\";\n}\n\n#Goes recursively through the directory\n#and looks for other directories and .log files.\nsub DoDir {\n\n    my $dir = shift;\n\n    opendir(DIR, $dir) || die \"Unable to open $dir: $!\";\n    my(@files) = grep {!/^\\.\\.?$/ } readdir(DIR);\n    closedir(DIR);\n\n    foreach (@files) {\n        #Looks for child directories.\n        if (-d ($file = \"$dir\\\\$_\")) {\n            print \"Found a directory: $file\\n\";\n            DoDir($file);\n        } else {\n\n            checkDate($file);\n        }\n    }\n}\n\nsub checkDate {\n\n    $filename = basename($file);\n\n    if ($filename =~ m/^\\D?20\\d{2}_\\d{2}_\\d{2}_[\\w_]+.log$/) {\n\n        NormalFile();\n\n\n    }\n    elsif($filename =~ m/^wl-deploy-\\d+_[\\w\\-_.]+\\d+\\.log$/) {\n\n        DeployFile();\n    }\n    elsif ($filename =~ m/^\\D?20(\\d{2}_){3}[\\w_]+\\.log\\.gz_\\D?20(\\d{2}-){2}\\d{2}$/) {\n\n        #print \"$filename: File match .log.gz\\n\";\n    }\n    elsif ($filename =~ m/^stdout\\.log(\\.\\w+?-\\w+?(\\.gz_\\d{4}-\\d{2}-\\d{2})?)?$/) {\n\n        StdoutFile();\n        #print \"$filename: File match stdout\\n\";\n    }\n    elsif ($filename =~ m/^\\D?20\\d{2}\\-\\d{2}\\-\\d{2}\\-\\d{2}\\-\\d{2}\\.[\\w\\-]+\\.error$/) {\n\n        ErrorFile();\n    }\n    elsif ($filename =~ m/^[\\w]{2}\\_[\\w]+\\.log\\.lck$/) {\n\n        LckFile();\n    }\n    elsif ($filename =~ m/^server\\.log(\\d{5})?$/) {\n\n        #print \"$filename: File Match server\\n\";\n    }\n    elsif ($filename =~ m/^access\\.log(\\d{5})?$/) {\n\n        #print \"$filename: File match access\\n\";\n    }\n    else{\n\n        print \"$filename: don't match\\n\";\n    }\n\n}\n\nsub NormalFile() {\n\n    my $chars = substr($filename, 0 , 10);\n    #Check if extension is equals .log\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($chars);\n\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( weeks =&gt; 2);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        #print \"don't delete\\n\";\n    }\n    else {\n        #print \"delete\\n\";\n    }\n}\n\nsub DeployFile() {\n\n    $filename =~ s/[^\\d]//g;\n    my $dateFromString = substr($filename, 0 , 6);\n\n    my ($year, $month, $day) = unpack(\"(a2)*\", $dateFromString);\n    $year = \"20\".$year;\n\n    my $dateFromFile = $year.\"_\".$month.\"_\".$day;\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($dateFromFile);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( weeks =&gt; 2);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        #print \"don't delete\\n\";\n    }\n    else {\n        #print \"delete\\n\";\n    }\n}\n\nsub LckFile {\n\n    #print \"$file delete\\n\";\n}\n\nsub ErrorFile {\n\n    $filename = substr($filename, 0 , 10);\n    $filename =~ s/-/_/g;\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($filename);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( weeks =&gt; 2);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        #print \"don't delete\\n\";\n    }\n    else {\n        #print \"delete\\n\";\n    }\n}\n\nsub StdoutFile {\n\n    print \"$filename\\n\";\n    $filename =~ /^stdout\\.log\\.((?:\\d+?)|unknown)-(\\d+?)(?:\\.gz_\\d{4}-\\d{1,2}-\\d{1,2})?$/g;\n\n    if ($1 ne \"unknown\") {\n\n        my $firstDate = substr($1, 0, 6);\n        my ($year, $month, $day) = unpack(\"(a2)*\", $firstDate);\n        $year = \"20\" . $year;\n        $firstDate = $year . \"_\" . $month . \"_\" . $day;\n        print \"$firstDate\\n\";\n    }\n\n    my $secondDate = substr($2, 0, 6);\n    my ($year, $month, $day) = unpack(\"(a2)*\", $secondDate);\n    $year = \"20\" . $year;\n    $secondDate = $year . \"_\" . $month . \"_\" . $day;\n    print \"$secondDate\\n\";\n\n    my $date_parser = DateTime::Format::Strptime-&gt;new(\n\n        pattern  =&gt; '%Y_%m_%d',\n        on_error =&gt; 'croak',\n    );\n\n    my $dt = $date_parser-&gt;parse_datetime($secondDate);\n\n    my $day14 = DateTime-&gt;now-&gt;subtract ( weeks =&gt; 2);\n    #print \"$day14\\n\";\n\n    my $cmp = DateTime-&gt;compare($day14, $dt);\n    #print \"$cmp\\n\";\n\n    if ($cmp == -1 || $cmp == 0) {\n        print \"don't delete\\n\";\n    }\n    else {\n        print \"delete\\n\";\n    }\n}\n</code></pre>\n\n<p><strong>Error Message</strong>\nUse of uninitialized value $1 in string ne at line 224.<br>\nUse of uninitialized value $1 in substr at line 226.<br>\nUse of uninitialized value $year in concatenation (.) or string at line 228.<br>\nUse of uninitialized value $month in concatenation (.) or string at line 229.<br>\nUse of uninitialized value $day in concatenation (.) or string at line 229.<br>\n20__<br>\nUse of uninitialized value $2 in substr at line 233.<br>\nUse of uninitialized value $year in concatenation (.) or string at line 235.<br>\nUse of uninitialized value $month in concatenation (.) or string at line 236.<br>\nUse of uninitialized value $day in concatenation (.) or string at line 236.<br>\n20__<br>\nYour datetime does not match your pattern. at line 245.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1563799566, "post_id": 57145741, "comment_id": 100807815, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=11103133\" rel=\"nofollow noreferrer\">PerlMonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11724288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f635624a9c5c357b0d1dffef4de67c?s=128&d=identicon&r=PG&f=1", "display_name": "sevonchan", "link": "https://stackoverflow.com/users/11724288/sevonchan"}, "edited": false, "score": 0, "creation_date": 1563849722, "post_id": 57146079, "comment_id": 100826938, "body": "I am a bit confused with what does $n&gt;max[0] and @max = ($n, $line) mean, could you please give a bit more explanation?"}, {"owner": {"reputation": 51, "user_id": 11724288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f635624a9c5c357b0d1dffef4de67c?s=128&d=identicon&r=PG&f=1", "display_name": "sevonchan", "link": "https://stackoverflow.com/users/11724288/sevonchan"}, "edited": false, "score": 0, "creation_date": 1563850576, "post_id": 57146079, "comment_id": 100827074, "body": "If I have multiple lines with their largest number the same, how could I print out all of them instead of $max[1]?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 51, "user_id": 11724288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f635624a9c5c357b0d1dffef4de67c?s=128&d=identicon&r=PG&f=1", "display_name": "sevonchan", "link": "https://stackoverflow.com/users/11724288/sevonchan"}, "edited": false, "score": 0, "creation_date": 1563870464, "post_id": 57146079, "comment_id": 100833861, "body": "<code>$max[0]</code> is the largest number, <code>$n &gt; $max[0]</code> checks whether <code>$n</code> is greater to the largest number found so far. <code>@max = ($n, $line)</code> populates the array <code>@max</code> with two elements, the number <code>$n</code> as <code>$max[0]</code>, and the whole line as <code>$max[1]</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 51, "user_id": 11724288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f635624a9c5c357b0d1dffef4de67c?s=128&d=identicon&r=PG&f=1", "display_name": "sevonchan", "link": "https://stackoverflow.com/users/11724288/sevonchan"}, "edited": false, "score": 0, "creation_date": 1563872074, "post_id": 57146079, "comment_id": 100834704, "body": "Check the update to see how to output all the matching lines."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1563872058, "last_edit_date": 1563872058, "creation_date": 1563798547, "answer_id": 57146079, "question_id": 57145741, "link": "https://stackoverflow.com/questions/57145741/perl-print-the-line-with-the-largest-number-from-standard-input/57146079#57146079", "title": "Perl: print the line with the largest number from standard input", "body": "<p><code>@input[0]</code> returns just the first value from the array. You probably want to use <code>@input</code> instead - but this way you'd get the numbers from one line sorted. Also, you need to store the whole line somewhere in order to be able to display it later.</p>\n\n<p>Here's how I would do it:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @max;\nwhile (my $line = &lt;&gt;) {\n    my @numbers = $line =~ /\\d+/g;\n    for my $n (@numbers) {\n        if (! @max || $n &gt; $max[0]) {\n            @max = ($n, $line);\n        }\n    }\n}\n\nprint $max[1] if @max;\n</code></pre>\n\n<p>The <code>@max</code> array stores the largest number in <code>$max[0]</code>, while <code>$max[1]</code> keeps the whole line. You just compare each number to the largest one, there's no need to search for the maximum for each line.</p>\n\n<p>To store all the lines containing the largest number, change the loop body to</p>\n\n<pre><code>        if (! @max || $n &gt; $max[0]) {\n            @max = ($n, $line);\n        } elsif ($n == $max[0]) {\n            push @max, $line;\n        }\n</code></pre>\n\n<p>and the last line to</p>\n\n<pre><code>print @max[ 1 .. $#max ] if @max;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 11724288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f635624a9c5c357b0d1dffef4de67c?s=128&d=identicon&r=PG&f=1", "display_name": "sevonchan", "link": "https://stackoverflow.com/users/11724288/sevonchan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 57146079, "answer_count": 1, "score": 1, "last_activity_date": 1563872058, "creation_date": 1563797264, "question_id": 57145741, "link": "https://stackoverflow.com/questions/57145741/perl-print-the-line-with-the-largest-number-from-standard-input", "title": "Perl: print the line with the largest number from standard input", "body": "<p>i'm very new to Perl and I've been trying to implement a function that print out the line with the largest number from the standard input. For example, If the input is: </p>\n\n<p>\nHello, i'm 18\n</p>\n\n<p>\n1 this year is 2019 1\n</p>\n\n<p> \n1 2 3 - 4\n</p> \n\n<p>The output should be: 1 this year is 2019 1 </p>\n\n<p>And secondly, I would like to know what does <strong>$line =~ /-?(?:\\d+.?\\d*|.\\d+)/g</strong> mean?</p>\n\n<p>The following is what I've tried, it is not working and I hope someone could fix it for me. I'm struggling with filtering out random characters but leaving out the digit. </p>\n\n<p>\nIs it necessary to push the largest number onto an array? Is there any way that once we could do this in one step?\n</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nwhile ($lines = &lt;STDIN&gt;){\n    @input = $lines =~ /\\d+/g;\n    if (!@input){\n    } else {\n        $largest_number = sort {$a &lt;=&gt; $b} @input[0];\n        push(@number, $largest_number);\n    }\n}\n    if (!@number){\n    }else{\n        print $largest_number;\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1563796592, "post_id": 57145427, "comment_id": 100806082, "body": "Please provide the output of <code>use Devel::Peek qw(Dump); \u2026\u2026\u2026 Dump $ip;</code> after reading it from the file. \u2013\u2013 Just as a basic sanity check, add the usual <code>use strict; use warnings; use autodie;</code> to the program and see whether that uncovers hidden problems."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1563796710, "post_id": 57145427, "comment_id": 100806145, "body": "What does &quot;it acts differently from the original string&quot; mean? Exactly what unexpected behaviour do you see?"}, {"owner": {"reputation": 31, "user_id": 11818909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef47355bad6f7e29ae710d4e64ea4d6?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/11818909/tom"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563797483, "post_id": 57145427, "comment_id": 100806591, "body": "@DaveCross - the first snippet connects successfully. In the second, I don&#39;t get a connection. I can&#39;t see the output of the script, only write log lines to a file"}, {"owner": {"reputation": 31, "user_id": 11818909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef47355bad6f7e29ae710d4e64ea4d6?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/11818909/tom"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1563797719, "post_id": 57145427, "comment_id": 100806750, "body": "@daxim - I can&#39;t see the standard output and error of the program. When I try to run the script in a regular perl environment where I can see the output, it works and connects successfully"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1563799512, "post_id": 57145427, "comment_id": 100807781, "body": "@tom, redirect STDERR into a file: <code>open *STDERR, &quot;&gt;&gt;&quot;, &quot;&#47;tmp&#47;STDERR.log&quot;;</code>"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1563801045, "post_id": 57145427, "comment_id": 100808672, "body": "The file gets created and has the content you expect?   Neither open() here is necessarily working because you don&#39;t catch errors from it."}, {"owner": {"reputation": 31, "user_id": 11818909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef47355bad6f7e29ae710d4e64ea4d6?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/11818909/tom"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1563801642, "post_id": 57145427, "comment_id": 100809030, "body": "@stevesliva - yeah, the file contains the ip address and nothing but the ip address."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11818909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef47355bad6f7e29ae710d4e64ea4d6?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/11818909/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1563802208, "creation_date": 1563802208, "answer_id": 57147156, "question_id": 57145427, "link": "https://stackoverflow.com/questions/57145427/saving-strings-to-files/57147156#57147156", "title": "Saving Strings to Files", "body": "<p>OK, it seems that the perl was run with -T cmd line option, which means it runs in \"taint mode\" and distrust data it read from files.</p>\n\n<p>When printing the errors to a file, I saw a warning\n\"Insecure dependency in connect while running with -T switch\"</p>\n\n<p>Thanks for the tips!</p>\n"}], "owner": {"reputation": 31, "user_id": 11818909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef47355bad6f7e29ae710d4e64ea4d6?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/11818909/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563802208, "creation_date": 1563796113, "question_id": 57145427, "link": "https://stackoverflow.com/questions/57145427/saving-strings-to-files", "title": "Saving Strings to Files", "body": "<p>When I save a string to a file, and than load it back from the same file, it acts differently from the original string.</p>\n\n<p>It seems that the first code with the hardcoded ip address works, but the second code where I write to the file and than read back, won't work. If I print $ip after loading from the file, it looks the same.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ip = \"100.10.100.1\";\n$port = 1337;\nsocket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));\nconnect(S,sockaddr_in($port,inet_aton($ip)));\n</code></pre>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ip = \"100.10.100.1\";\n\nmy $filename = 'c:\\\\tmp\\\\ip.txt';\nopen(my $fh, '&gt;', $filename);\nprint $fh \"$ip\";\nclose $fh;\n\nopen(my $fh, '&lt;', $filename);\n$i = 0;\nwhile (my $row = &lt;$fh&gt;) {\n    chomp $row;\n    if ($i eq 0) {\n        $ip = $row;\n    }\n    $i = $i + 1;\n}\n\n$port = 1337;\nsocket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));\nconnect(S,sockaddr_in($port,inet_aton($ip)));\n</code></pre>\n"}, {"tags": ["shell", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 3365, "user_id": 1335601, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/defef3dd7b7aa584df6a02e50f9b0cf9?s=128&d=identicon&r=PG", "display_name": "Ibrahim Quraish", "link": "https://stackoverflow.com/users/1335601/ibrahim-quraish"}, "edited": false, "score": 0, "creation_date": 1563980201, "post_id": 57144587, "comment_id": 100882050, "body": "Thank you @Kent. I am executing your <code>awk</code> solution through our python wrapper which accepts this entire command as a string and executes it in the given cluster of nodes. <code>wrapper.py -n $CLUSTER_NODES -R -e &quot;awk -v p=\\&quot;$1\\&quot; &#39;$0 ~ \\&quot;^\\&quot;p {d=1; next} d &amp;&amp; &#47;^\\S&#47; {d=0} !d&#39; &#47;etc&#47;haproxy&#47;haproxy.conf &gt; tmp &amp;&amp;  mv tmp &#47;etc&#47;haproxy&#47;haproxy.conf&quot;</code>. I am struggling with the quotes and <code>$0</code> is expanding to the current shell script name. Basically how to debug <code>awk</code> script?"}, {"owner": {"reputation": 3365, "user_id": 1335601, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/defef3dd7b7aa584df6a02e50f9b0cf9?s=128&d=identicon&r=PG", "display_name": "Ibrahim Quraish", "link": "https://stackoverflow.com/users/1335601/ibrahim-quraish"}, "edited": false, "score": 0, "creation_date": 1564052837, "post_id": 57144587, "comment_id": 100908907, "body": "ok achieved it like this: <code>wrapper.py -n $CLUSTER_NODES -R -e &quot;awk -v p=\\&quot;$1\\&quot; &#39;\\$0 ~ \\&quot;^\\&quot;p {d=1; next} d &amp;&amp; &#47;^\\S&#47; {d=0} !d&#39; &#47;etc&#47;haproxy&#47;haproxy.conf &gt; tmp &amp;&amp; mv tmp &#47;etc&#47;haproxy&#47;haproxy.conf&quot;</code>"}], "tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": true, "score": 2, "last_activity_date": 1563793192, "creation_date": 1563793192, "answer_id": 57144587, "question_id": 57143269, "link": "https://stackoverflow.com/questions/57143269/shell-script-to-delete-lines-matching-a-pattern-and-next-subsequent-lines-follow/57144587#57144587", "title": "Shell script to delete lines matching a pattern and next subsequent lines following a different indentation", "body": "<p>This one-liner should help: (gawk)</p>\n\n<pre><code>awk -v p=\"YOURLINE\" '$0~\"^\"p{d=1;next}d&amp;&amp;/^\\S/{d=0}!d' file\n</code></pre>\n\n<ul>\n<li>replace the <code>YOURLINE</code> by the pattern you want.</li>\n<li>This one-liner will remove the whole \"block\" of data, instead of limiting to fixed lines after the pattern. (in your example, it is three lines).</li>\n</ul>\n\n<p>Little test:</p>\n\n<pre><code>kent$  cat f\nfoo\n        a\n        b\n        c\n        d\nbar\n        x\n        y\n        z\nblah\n        some\n        thing\n        here\n\nkent$  awk -v p=\"foo\" '$0~\"^\"p{d=1;next}d&amp;&amp;/^\\S/{d=0}!d' f\nbar\n        x\n        y\n        z\nblah\n        some\n        thing\n        here\n\nkent$  awk -v p=\"bar\" '$0~\"^\"p{d=1;next}d&amp;&amp;/^\\S/{d=0}!d' f\nfoo\n        a\n        b\n        c\n        d\nblah\n        some\n        thing\n        here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3365, "user_id": 1335601, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/defef3dd7b7aa584df6a02e50f9b0cf9?s=128&d=identicon&r=PG", "display_name": "Ibrahim Quraish", "link": "https://stackoverflow.com/users/1335601/ibrahim-quraish"}, "edited": false, "score": 0, "creation_date": 1563863001, "post_id": 57144777, "comment_id": 100830236, "body": "Thank you @Ed Morton. Any <code>Perl</code> oneliner?"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1563794101, "last_edit_date": 1563794101, "creation_date": 1563793778, "answer_id": 57144777, "question_id": 57143269, "link": "https://stackoverflow.com/questions/57143269/shell-script-to-delete-lines-matching-a-pattern-and-next-subsequent-lines-follow/57144777#57144777", "title": "Shell script to delete lines matching a pattern and next subsequent lines following a different indentation", "body": "<p>With GNU awk and regexp matching:</p>\n\n<pre><code>$ awk -v re='frontend bocluster' '/^\\S/{f=($0~\"^\"re)} !f' file\nbackend boservers\n    balance roundrobin\n    server boserver1 &lt;HMASTER PRIVATE IP&gt;:8780 check\n    server boserver2 &lt;HSECMASTER PRIVATE IP&gt;:8780 check\n</code></pre>\n\n<p>With any awk and regexp matching:</p>\n\n<pre><code>$ awk -v re='frontend bocluster' '/^[^[:space:]]/{f=($0~\"^\"re)} !f' file\nbackend boservers\n    balance roundrobin\n    server boserver1 &lt;HMASTER PRIVATE IP&gt;:8780 check\n    server boserver2 &lt;HSECMASTER PRIVATE IP&gt;:8780 check\n</code></pre>\n\n<p>With any awk and string matching:</p>\n\n<pre><code>$ awk -v str='frontend bocluster' '/^[^[:space:]]/{f=(index($0,str)==1)} !f' file\nbackend boservers\n    balance roundrobin\n    server boserver1 &lt;HMASTER PRIVATE IP&gt;:8780 check\n    server boserver2 &lt;HSECMASTER PRIVATE IP&gt;:8780 check\n</code></pre>\n\n<p>etc.... It just depends what awk version you have and what kind of matching you want to do - string vs regexp, whole vs partial, etc.</p>\n"}], "owner": {"reputation": 3365, "user_id": 1335601, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/defef3dd7b7aa584df6a02e50f9b0cf9?s=128&d=identicon&r=PG", "display_name": "Ibrahim Quraish", "link": "https://stackoverflow.com/users/1335601/ibrahim-quraish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57144587, "answer_count": 2, "score": 0, "last_activity_date": 1563794101, "creation_date": 1563788710, "last_edit_date": 1563793759, "question_id": 57143269, "link": "https://stackoverflow.com/questions/57143269/shell-script-to-delete-lines-matching-a-pattern-and-next-subsequent-lines-follow", "title": "Shell script to delete lines matching a pattern and next subsequent lines following a different indentation", "body": "<p>I have <strong>haxproxy</strong> configuration as below:</p>\n\n<pre><code>frontend bocluster\n    bind &lt;VIRTUAL IP&gt;:8680\n    mode tcp\n    default_backend boservers\nbackend boservers\n    balance roundrobin\n    server boserver1 &lt;HMASTER PRIVATE IP&gt;:8780 check\n    server boserver2 &lt;HSECMASTER PRIVATE IP&gt;:8780 check\n</code></pre>\n\n<p>I have to delete lines starting from the matched pattern and next subsequent lines until a line that starts in a different indentation, for eg: if I choose the pattern as <code>frontend bocluster</code>, the script has to delete this pattern and the next three lines under it.</p>\n"}, {"tags": ["perl", "sdk", "vmware"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5714031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd26a47a88d2cddc3fa825499c80527?s=128&d=identicon&r=PG&f=1", "display_name": "Denis.A", "link": "https://stackoverflow.com/users/5714031/denis-a"}, "edited": false, "score": 0, "creation_date": 1563800909, "post_id": 57144896, "comment_id": 100808595, "body": "Thanks, it works. In my (too old ?) documentation, datastore was not present (tried dataStore, DataStore but not Datastore...)."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1563794168, "creation_date": 1563794168, "answer_id": 57144896, "question_id": 57143260, "link": "https://stackoverflow.com/questions/57143260/finding-full-folders-list-of-a-datastore/57144896#57144896", "title": "Finding full folders list of a datastore", "body": "<p>See <a href=\"https://vdc-repo.vmware.com/vmwb-repository/dcr-public/5e83c02a-0e6c-4bcc-9f0f-c545b230a0de/bf50706a-8886-43b6-acc2-2faf7954fb4f/doc/GUID-9A6D2E51-CCC1-4B82-B4B0-18C968CD2E73.html\" rel=\"nofollow noreferrer\"><code>find_entity_view</code> in <code>Vim</code></a>.</p>\n\n<pre><code>view_type =&gt; \"Datastore\"\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5714031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bd26a47a88d2cddc3fa825499c80527?s=128&d=identicon&r=PG&f=1", "display_name": "Denis.A", "link": "https://stackoverflow.com/users/5714031/denis-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57144896, "answer_count": 1, "score": 0, "last_activity_date": 1563794168, "creation_date": 1563788664, "question_id": 57143260, "link": "https://stackoverflow.com/questions/57143260/finding-full-folders-list-of-a-datastore", "title": "Finding full folders list of a datastore", "body": "<p>I'm trying to get the entire folder name list of a VMWARE datastore (like folder1/folder2/datastore1, for example)</p>\n\n<p>Found some code for a VM :</p>\n\n<pre><code>$vmtmp = Vim::find_entity_view(view_type =&gt; \"VirtualMachine\", filter =&gt; { name =&gt; $vm-&gt;name });\n$path = Util::get_inventory_path($vmtmp ,Vim::get_vim());\n</code></pre>\n\n<p>but the find_entity_view function does not manage datastore data type.</p>\n\n<p>Any clue to get this list (I'm newbie to perl sdk for vmware and a bit confused with the documentation) ?</p>\n"}, {"tags": ["bash", "perl", "validation", "ip", "cidr"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1563785236, "creation_date": 1563785236, "answer_id": 57142253, "question_id": 57140911, "link": "https://stackoverflow.com/questions/57140911/validating-a-cidr-ip-to-set-for-an-interface/57142253#57142253", "title": "Validating a CIDR IP to set for an interface", "body": "<p>See <a href=\"http://p3rl.org/Net::CIDR::Lite#$cidr-&gt;find()\" rel=\"nofollow noreferrer\"><code>find</code> in Net::CIDR::Lite</a>.</p>\n\n<pre><code>perl -mNet::CIDR::Lite -E'\n    my $c = Net::CIDR::Lite-&gt;new;\n    $c-&gt;add(\"209.152.214.112/30\");\n    $c-&gt;add(\"209.152.214.116/31\");\n    $c-&gt;add(\"209.152.214.118/31\");\n    for (qw(209.152.214.111 209.152.214.112)) {\n        say $c-&gt;find($_) ? \"$_ valid\" : \"$_ invalid\";\n    }\n'\n</code></pre>\n\n<p>output</p>\n\n<pre><code>209.152.214.111 invalid\n209.152.214.112 valid\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10158850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YaP2.png?s=128&g=1", "display_name": "GarlicCheese", "link": "https://stackoverflow.com/users/10158850/garliccheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563785791, "creation_date": 1563779987, "last_edit_date": 1563785791, "question_id": 57140911, "link": "https://stackoverflow.com/questions/57140911/validating-a-cidr-ip-to-set-for-an-interface", "title": "Validating a CIDR IP to set for an interface", "body": "<p>I'm writing a bash script, which sets a fixed IP for an interface. I'd set the chosen IP with <code>sudo ip addr change dev eth0 192.168.3.14/24</code>.</p>\n\n<p>For this I'll need to validate the user given CIDR IP and came across this perl command: <code>perl -MNet::CIDR=cidrvalidate -e 'printf(\"%s\\n\", cidrvalidate($ARGV[0]) ? \"valid\" : \"invalid\")' -- 1.2.3.0/24</code></p>\n\n<p>Now this would be a great one-liner for the bash script, but it only checks if it is a valid network, not if it's valid client IP on the network.</p>\n\n<p>Bash-only solutions become rather extensive quickly, so I'd be fine to use perl or python for this.</p>\n\n<p>I could not identify the appropriate perl command to check if the user entered a valid client IP (CIDR).</p>\n\n<p>I started implementing a regex check in bash, but that became rather extensive quickly.</p>\n\n<p>This perl command almost does the job perfectly, except it states client IPs on the network are \"invalid\".\n<code>perl -MNet::CIDR=cidrvalidate -e 'printf(\"%s\\n\", cidrvalidate($ARGV[0]) ? \"valid\" : \"invalid\")' -- 1.2.3.0/24</code></p>\n\n<p>I'd expect the function to identify valid CIDR client IPs. For example:</p>\n\n<p><code>127.0.0.1/32</code> = True</p>\n\n<p>What perl/python/bash function can I use to check if a user define IP (CIDR) is a valid client IP?</p>\n\n<p><strong>edit:</strong> I've resorted to using <code>ipcalc</code>:</p>\n\n<pre><code>        while true; do\n            read -p \"Enter IP: \" ip\n            ipcalc=`ipcalc ${ip}`\n            if [[ ${ipcalc} =~ \"INVALID\" ]]; then\n                   echo \"Invalid.\"\n             else\n                       break\n            fi\n       done\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15, "user_id": 11813992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3BXF_Xr3PKU/AAAAAAAAAAI/AAAAAAAAHhM/xvYf85a543U/photo.jpg?sz=128", "display_name": "Bharat Mv", "link": "https://stackoverflow.com/users/11813992/bharat-mv"}, "edited": false, "score": 0, "creation_date": 1563690165, "post_id": 57130654, "comment_id": 100777823, "body": "Sry the actual result is 18.and it is  $_[0] and not $[0],similarly for all."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 2, "creation_date": 1563692162, "post_id": 57130654, "comment_id": 100778124, "body": "Welcome to StackOverflow. When you see something in your post that you want to be significantly different, edit your post (the <a href=\"https://stackoverflow.com/posts/57130654/edit\">edit</a> below the tags (<code>perl</code>, here). Please <i>quote, literally</i> what you read and indicate <i>where</i> (Schwartz, d foy, Phoenix: &quot;Learning Perl&quot;? Which edition?)."}], "answers": [{"comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1563726894, "post_id": 57132170, "comment_id": 100785988, "body": "In Learning Perl, we initially start off with the leading <code>&amp;</code> (and I think they are looking  at one of the first examples) because people don&#39;t know all the built-in functions yet and we want to ensure they call their own version. The <code>&amp;</code> ensures you always get the one you defined and not a built-in. From there, we explain the <code>&amp;</code> and stop using it. Furthermore, this is the first time in the book that there&#39;s a scope, and the example I think he&#39;s looking at is right before we introduce lexical variables."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1563711555, "last_edit_date": 1563711555, "creation_date": 1563703932, "answer_id": 57132170, "question_id": 57130654, "link": "https://stackoverflow.com/questions/57130654/handle-multiple-arguments-to-a-perl-subroutine/57132170#57132170", "title": "Handle multiple arguments to a Perl subroutine", "body": "<p>If that's what they said, and if that's the code they were talking about, then they are wrong. The sub clearly \"looks at <code>$_[2]</code>\".</p>\n\n<p>3+4+5+6 is 18, and that's exactly what the code the outputs.</p>\n\n<pre><code>$ perl -e'\n   sub privacy{\n      $_[0]+$_[1]+$_[2]+$_[3];\n   }\n\n   $x=&amp;privacy(3,4,5,6);\n   print $x,\"\\n\";\n'\n18\n</code></pre>\n\n<p>Note that the code has issues (<code>&amp;</code> used on the sub call even though they are no prototypes to override, and <code>$x</code> isn't scoped), so you shouldn't be taking lessons from whomever wrote that code.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1563854311, "last_edit_date": 1563854311, "creation_date": 1563726656, "answer_id": 57135032, "question_id": 57130654, "link": "https://stackoverflow.com/questions/57130654/handle-multiple-arguments-to-a-perl-subroutine/57135032#57135032", "title": "Handle multiple arguments to a Perl subroutine", "body": "<p>I think you're reading <a href=\"https://www.learning-perl.com\" rel=\"nofollow noreferrer\">Learning Perl</a>. We present a subroutine that finds the maximum of two arguments. It looks something like this:</p>\n\n<pre><code>sub max {\n    if( $_[0] &gt; $_[1] ) { ... }\n    else { $_[0] }\n    }\n</code></pre>\n\n<p>If you call it with two arguments, it works out:</p>\n\n<pre><code>max( 1, 2 )\nmax( 5, 6 )\nmax( 9, 0 )\n</code></pre>\n\n<p>If you call it with three arguments, that particular subroutine ignores the third argument because that particular subroutine only looks at the first two:</p>\n\n<pre><code>max( 1, 2, 3 )   # ignores 3, so returns 2\n</code></pre>\n\n<p>You can write some other subroutine that looks at more arguments, but that's a different subroutine.</p>\n\n<p>Unless you tell Perl otherwise (and I'll ignore that here), it will take as many arguments as you care to give it and they all show up in the special variable <code>@_</code>. How you use that is up to you.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 11626637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLnpB.jpg?s=128&g=1", "display_name": "Rob Sweet", "link": "https://stackoverflow.com/users/11626637/rob-sweet"}, "is_accepted": false, "score": 2, "last_activity_date": 1563729808, "creation_date": 1563729808, "answer_id": 57135421, "question_id": 57130654, "link": "https://stackoverflow.com/questions/57130654/handle-multiple-arguments-to-a-perl-subroutine/57135421#57135421", "title": "Handle multiple arguments to a Perl subroutine", "body": "<p>You are misunderstanding the meaning of the sentence: </p>\n\n<blockquote>\n  <p>Excess parameters are ignored\u2014since the subroutine never looks at\n  $_[2]</p>\n</blockquote>\n\n<p>What is meant by that is that in a perl subroutine (as in any language) if you don't use a parameter then it's not used.</p>\n\n<p>In the particular example that the above sentence refers to, parameter 2, etc., are not used in the code so they are 'ignored'.   They're <em>available</em> if you want to use them, they're just not used in that particular example.</p>\n\n<p>However in YOUR code you are using them.</p>\n"}], "owner": {"reputation": 15, "user_id": 11813992, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3BXF_Xr3PKU/AAAAAAAAAAI/AAAAAAAAHhM/xvYf85a543U/photo.jpg?sz=128", "display_name": "Bharat Mv", "link": "https://stackoverflow.com/users/11813992/bharat-mv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "closed_date": 1563753131, "answer_count": 3, "score": -1, "last_activity_date": 1563854311, "creation_date": 1563688124, "last_edit_date": 1563854290, "question_id": 57130654, "link": "https://stackoverflow.com/questions/57130654/handle-multiple-arguments-to-a-perl-subroutine", "closed_reason": "Needs details or clarity", "title": "Handle multiple arguments to a Perl subroutine", "body": "<p>As i have read ,\"There\u2019s another problem with this subroutine.This subroutine works properly only if called with exactly two</p>\n\n<blockquote>\n  <p>Excess parameters are ignored\u2014since the subroutine never looks at <code>$_[2]</code> \"</p>\n</blockquote>\n\n<p>but when I passed multiple arguments its working,so I'm not able to conclude the above statement so can anyone help me in sorting out this problem.</p>\n\n<pre><code> sub privacy{\n     $_[0]+$_[1]+$_[2]+$_[3];\n }\n\n $x=&amp;privacy(3,4,5,6);\n print $x,\"\\n\";`\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>7\n</code></pre>\n\n<p>Actual:</p>\n\n<pre><code>18\n</code></pre>\n\n<p>but this result is contradicting.</p>\n"}, {"tags": ["regex", "perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563674662, "post_id": 57129491, "comment_id": 100776022, "body": "What do you mean by &quot;<i>doesn&#39;t work</i>&quot;?  If that line is your complete code it&#39;s not set up to do unicode at all.  Also, how do you get input?"}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563702610, "post_id": 57129491, "comment_id": 100780242, "body": "I&#39;ve putted the essential part of the code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563702859, "post_id": 57129491, "comment_id": 100780297, "body": "Thank you for the update.  A question: the text after &quot;<i>I&#39;ve these files:</i>&quot; --- is that a file, and you want the count of artist from it?  Is that the whole job?  (The code that you show is way, way too complicated.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563702945, "post_id": 57129491, "comment_id": 100780323, "body": "Is it always the first two words on the line that make up the name?"}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563723732, "post_id": 57129491, "comment_id": 100785317, "body": "I reply you. I&#39;ve updated the question because I need of many characters"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563736848, "post_id": 57129491, "comment_id": 100788259, "body": "Thank you; that&#39;s a <i>much</i> more difficult problem.  (1) Getting your code to do unicode properly isn&#39;t hard, which was the original question and what my answer addressed (2) Parsing <i>names</i> in natural languages correctly is so hard that it really isn&#39;t possible to solve in general. But here you&#39;ve got criteria for how to truncate the string, so that helps.  However, I don&#39;t understand your rules well so I offer only a basic framework for it. see edit."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1565023695, "post_id": 57129491, "comment_id": 101212233, "body": "I suggest you see the short and informative help page: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563728499, "post_id": 57129889, "comment_id": 100786332, "body": "**About the code **       [perl -CSD -wnE&#39;     ++$name_count{ (/(\\w+\\s+\\w+)/)[0] };      END { say &quot;$_; $name_count{$_}&quot; for sort keys %name_count } &#39; input]     ** I cannot understand how it could be substitute the code **     [perl -pe &#39;s/^(\\D\\X+ \\X+)( Con )/\\1;Con/gi&#39; | perl -pe &#39;s/^(\\D\\X+ \\X+ \\X+)( Con )/\\1;Con/gi&#39;| perl -pe &#39;s/^(\\D\\X+ \\X+ \\X+ \\X+)( Con )/\\1;Con/gi&#39;| perl -pe &#39;s/^(\\D\\X+ \\X+ \\X+ \\X+ \\X+)( Con )/\\1;Con/gi&#39;|]"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563735918, "post_id": 57129889, "comment_id": 100788086, "body": "@manub  &quot;<i>I cannot understand how it could be substitute</i>&quot;  ---  I didn&#39;t try to substitute for your code.  The question wants to extract names from text, so i wrote code for that.  I can&#39;t imagine that you really need code as complicated as shown, so I&#39;ve tried to offer you a simpler approach.  But I don&#39;t know what your rules are for what a &quot;name&quot; is; that is a difficult problem in general."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563845299, "post_id": 57129889, "comment_id": 100826183, "body": "@manub  You say &quot;<i>remove conjunctions if the name has two or more words.</i>&quot; -- OK, that&#39;s clear ... but the question doesn&#39;t quite say that (read it again carefully).          After &quot;<i>Through the work of the script that produces this file</i>&quot; you repeat the text from before? (Or are details that I am missing?)  Then you give the total count for a two-word name (&quot;Duke Elington&quot;).  <i>I don&#39;t understand.</i>  Then, you say &quot;<i>30 cases (rules) in addition to \u201c&amp;\u201d</i>&quot; and then roll off unformatted phrases like &quot;_ e _` (single e with spaces) ... is that with an accent of some sort?  Please be clearer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563845480, "post_id": 57129889, "comment_id": 100826212, "body": "@manub Please recall the question -- &quot;<i>Issue matching accented characters</i>&quot; -- that&#39;s because you didn&#39;t turn on unicode support, and I answered that.  All this other stuff is extra.  But I&#39;d be happy to help you out with that, too, if you can clarify your criteria."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563845885, "post_id": 57129889, "comment_id": 100826279, "body": "@manub Now can you please clarify your criteria for this <i>additional problem</i> ?  (As I  have solved the one with accented characters.) Is it like this: truncate the line at any one of those (30-ish) characters, if it&#39;s more than two words long? Is that correct and is that it?"}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563872117, "post_id": 57129889, "comment_id": 100834724, "body": "#1 &quot;then another one for three words, then for four, then five ..&quot;. Do you&#39;ve dowloaded the code at the link at the bottom of the anwser? Where there is &quot;Duke Ellington 208&quot;.  #2 &quot;After &quot;Through the work of the script that produces this file&quot; you repeat the text from before? (Or are details that I am missing?) &quot; Yes, look at the carachters &quot;;&quot; after &quot;Ellington&quot;. See how it repeats itself regularly to cut off strings. #3 &quot;My first response above got deleted (??)&quot; I have difficulty using this forum. There may be misunderstandings. Please answer the 3 points and then I&#39;ll clarify everything"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563872716, "post_id": 57129889, "comment_id": 100835083, "body": "@manub (1) yes, I looked at complete code and I see the long pipelines for two words (different from the question?).  (2) Ah, the semicolon, I see that now; have no clue what that means though. An intermediate result? (3) I had posted a comment first, which then disappeared. (Never mind, I repeated what mattered)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563872935, "post_id": 57129889, "comment_id": 100835222, "body": "@manub  Thank you for providing the whole program (I cannot afford the time to study that but I see better what you are doing).  Those pipelines are not needed -- that can be all done in a line or a few, in a script.  If you can state clearly the rules for extracting the name from a line I can help you out with Perl for that.  (I asked in a comment above -- is it like: &quot;truncate the line at any one of particular characters/phrases, if the line is more than two words long&quot; ... ?) It&#39;s late here and I need to go now but I&#39;ll look tomorrow if you can clarify."}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563878025, "post_id": 57129889, "comment_id": 100838121, "body": "#1 &quot;different from the question?&quot; Yes, stimulated by the discussion, I solved it. Now with 2 &quot;w +&quot; it also captures more words. There are also 2 &quot;X +&quot; because &quot;w&quot; works on words without accents and &quot;X&quot; works on words with accents #2 &quot;intermediate result?&quot; Yes. #3 &quot;truncate the line in particular characters / phrases, if the line is more than two words long&quot; My script does just that thanks to Perl -pe w + X +"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1563908314, "post_id": 57129889, "comment_id": 100854499, "body": "@manub Edited my post.  Now the second part (crudely) implements your criteria for extracting names from the line; please adjust as needed, and let me know if code isn&#39;t clear."}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1564083974, "post_id": 57129889, "comment_id": 100924792, "body": "I created a script file with chmod + x but doesen&#39;t works."}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1564085191, "post_id": 57129889, "comment_id": 100925279, "body": "There are big issues.&gt;    line 2: sub: command not found    &gt;    line 3: syntax error near unexpected token <code>$line&#39;   &gt;    line 3: </code>    my ($line) = @_;&#39;    I put my path here:  my $file = /MYPATH/ &quot;Usage: $0 file\\n&quot;;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1564089510, "post_id": 57129889, "comment_id": 100926847, "body": "@manub I have no idea what that means. (<code>sub</code> command? there is no such thing in my program?)  I just copy-pasted this again, to check just in case, and it runs as intended.  Did you copy it correctly? (Btw, what is your Perl version?)"}, {"owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "edited": false, "score": 0, "creation_date": 1564131919, "post_id": 57129889, "comment_id": 100937808, "body": "I&#39;ve Perl 5, version 18, subversion 2 (v5.18.2) built for darwin-thread-multi-2level.  I tried again, saved new file with chmod + x. It gives errors of which two tell #1:  &quot;line 6: syntax error near unexpected token <code>(&#39;&quot;  #2: &quot;line 6: </code>use open qw(:std :encoding(UTF-8));  # for standard streams&#39;&quot;"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 7, "last_activity_date": 1563914821, "last_edit_date": 1563914821, "creation_date": 1563675197, "answer_id": 57129889, "question_id": 57129491, "link": "https://stackoverflow.com/questions/57129491/issue-matching-accented-characters-with-perl/57129889#57129889", "title": "Issue matching accented characters with Perl", "body": "<p>The shown one-liner doesn't enable any unicode support.<sup>&dagger;</sup>  You'd want, at least, to set up input/output streams for it, and in a script I'd recommend</p>\n\n<pre><code>use open qw(:std :encoding(UTF-8));\n</code></pre>\n\n<p>In a one-liner there are switches; see what combination you need <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">in perlrun</a>, under <code>-C</code>.  For example</p>\n\n<pre><code>echo \"\u00e1, \u0218.\" | perl -CASD -wnE'@m = /\\w+/g; say for @m'\n</code></pre>\n\n<p>prints </p>\n\n<pre>\n\u00e1\n\u0218\n</pre>\n\n<p>so the accented characters are understood.</p>\n\n<p>Additionally, you may need <a href=\"https://perldoc.perl.org/perlrebackslash.html#Misc\" rel=\"nofollow noreferrer\"><code>\\X</code></a> (instead of <code>\\w</code>) to match an <a href=\"https://perldoc.perl.org/perlunicode.html#Extended-Grapheme-Clusters-(Logical-characters)\" rel=\"nofollow noreferrer\">extended grapheme cluster</a>.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;<a href=\"https://stackoverflow.com/a/6163129/4653379\">This post</a> may be relevant, with a comforting first part but scary (and informative) rest.</p>\n\n<p>Literature: <a href=\"https://perldoc.perl.org/perlunitut.html\" rel=\"nofollow noreferrer\">perlunitut</a>, <a href=\"https://perldoc.perl.org/perlunifaq.html\" rel=\"nofollow noreferrer\">perlunifaq</a>, <a href=\"https://perldoc.perl.org/perluniintro.html\" rel=\"nofollow noreferrer\">perluniintro</a> (with its <a href=\"https://perldoc.perl.org/perluniintro.html#Unicode-I%2fO\" rel=\"nofollow noreferrer\">Unicode I/O</a> for example), and <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"nofollow noreferrer\">perlunicode</a>. There is also a cookbook of sorts, <a href=\"https://perldoc.perl.org/perlunicook.html\" rel=\"nofollow noreferrer\">perlunicook</a> (see <a href=\"https://perldoc.perl.org/perlunicook.html#%211e-0%3a-Standard-preamble\" rel=\"nofollow noreferrer\">Standard preamble</a> for starters), and there's <a href=\"https://perldoc.perl.org/Encode.html\" rel=\"nofollow noreferrer\">Encode</a>.</p>\n\n<p>Note that the regex per se is unicode aware.</p>\n\n<hr>\n\n<p>The question got edited, with additions of code, example input and its processing, and a link to a complete program. Some clarification on how names are decided are added, for example: </p>\n\n<blockquote>\n  <p>The rule is to truncate the name if there are conjunctions, or paranthesis, except if the name is composed of a single word. If there are no conjunctions, or paranthesis, the name is saved in full</p>\n</blockquote>\n\n<p>which means that the truncated name need be at least two-words long, or the string shouldn't be truncated (as clarified in comments).  This bypasses almost completely the <em>very</em> difficult problem of parsing names in natural languages, since the \"<em>conjunctions</em>\" are meant to be provided.</p>\n\n<p>Using a few from that list (from a program linked in the question), for a demo</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse utf8;                            # for utf8 characters in this script\nuse open qw(:std :encoding(UTF-8));  # for standard streams\n\nsub extract_name {\n    my ($line) = @_;\n    # Rule for extracting the name:\n    #   Truncate at $cutoff phrase if there are at least two words before it\n    #   (incomplete list of alternations for a demo, from linked program)\n    my $cutoff = qr{\\s+(?:-|&amp;|And|Con|\u0218i)(?:\\s+|\\z)};  # with spaces\n    my $parens = qr{\\s+\\(};                            # no space after\n\n    # If there is a cut-off phrase on the line, extract what's before it\n    # If that is at least two words long, return it;\n    #   otherwise, return the whole line \n    if ( my ($name) = $line =~ /(.*?)(?:$cutoff|$parens)/ ) {\n        return $name if split(' ', $name) &gt;= 2;\n    }\n    return $line;\n}\n\nmy $file = shift // die \"Usage: $0 file\\n\";\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy %name_count;\nwhile (my $line = &lt;$fh&gt;) { \n    chomp $line;\n    ++$name_count{ extract_name($line) };\n}\n\nsay \"$_; $name_count{$_}\" for sort keys %name_count;\n</code></pre>\n\n<p>The regex pattern for a \"conjunction\" (cutoff phrase) is formed using <code>qr</code> operator for easier work.  It is simply an alternation (<code>|</code>) of given conjunctions, here a few picked up from the linked program. I separate those that <em>don't</em> need a trailing space into another pattern, here only for parenthesis.</p>\n\n<p>It is a good idea to sort reports as they are printed so I do this even though <code>sort</code> with <code>cmp</code> may produce incorrect results with unicode; please see <a href=\"https://stackoverflow.com/a/49215736/4653379\">this post</a> for how to correctly sort with utf8.</p>\n\n<p>I test this with the input shown in the question, to which I add lines</p>\n\n<pre>\nJohnny & The Hurricanes\nAn Awesome Band (Unknown)\n</pre>\n\n<p>so to be able to test the finer points of the criteria for the name.  It prints</p>\n\n<pre>\nAn Awesome Band; 1\nBetty Curtis; 3\nJohny & The Hurricanes; 1\nMargareta P\u00e2slaru; 3\nMatilde S\u00e1nchez; 2\n</pre>\n\n<hr>\n\n<p>I strongly advise against a \"one\"-liner for a job of this complexity (I could barely get the above sub to parse and work correctly when packed into a command-line).</p>\n\n<p>If this program needs to work with lines piped into it let me know and I can add that.</p>\n"}], "owner": {"reputation": 53, "user_id": 11563274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662e3c23188f1c661e46585f87e0238a?s=128&d=identicon&r=PG&f=1", "display_name": "manub", "link": "https://stackoverflow.com/users/11563274/manub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1563960631, "creation_date": 1563667768, "last_edit_date": 1563960631, "question_id": 57129491, "link": "https://stackoverflow.com/questions/57129491/issue-matching-accented-characters-with-perl", "title": "Issue matching accented characters with Perl", "body": "<p>This code:</p>\n\n<pre><code>perl -pe 's/^(\\D\\w+ \\w+)( word )/\\1;word/gi'\n</code></pre>\n\n<p>doesn't work when the input has words with accented or particular characters like: <code>a\u0301, \u0218.</code></p>\n\n<p>Precisations:</p>\n\n<p>I have this code to make a count of the only artist files.</p>\n\n<pre><code>find /PATH/ -type f -exec basename \"{}\" + 2&gt;/dev/null |\n\nperl -pe 's/ - .*//g' | LC_ALL=C  sort -f | uniq -c -i|\n\ngsed -e 's/$/;/'|\n\nawk '{numero=$1;$1=\"\"}{print $0,numero}'|\n\nperl -pe 's/^(\\D\\w+ \\w+)( &amp; )/\\1;&amp;/g' | \nperl -pe 's/^(\\D\\w+ \\w+ \\w+)( &amp; &gt;)/\\1;&amp;/g' | \nperl -pe 's/^(\\D\\w+ \\w+ \\w+ \\w+)( &amp; )/\\1;&amp;/g' | \nperl -pe &gt;'s/^(\\D\\w+ \\w+ \\w+ \\w+ \\w+)( &amp; )/\\1;&amp;/g' |\n\nperl -pe 's/^(\\D\\w+ \\w+)( Con )/\\1;Con/gi' | \nperl -pe 's/^(\\D\\w+ \\w+ &gt;\\w+)( Con )/\\1;Con/gi' | \nperl -pe 's/^(\\D\\w+ \\w+ \\w+ \\w+)( Con &gt;)/\\1;Con/gi' |  \nperl -pe 's/^(\\D\\w+ \\w+ \\w+ \\w+ \\w+)( Con )/\\1;Con/gi'|\n\nperl -pe 's/^(\\D\\w+ \\w+)( S\u0326i )/\\1;S\u0326i/gi' | \nperl -pe 's/^(\\D\\w+ \\w+ \\w+)( &gt;S\u0326i )/\\1;S\u0326i/gi' | \nperl -pe 's/^(\\D\\w+ \\w+ \\w+ \\w+)( S\u0326i )/\\1;S\u0326i/gi' | \nperl &gt;-pe 's/^(\\D\\w+ \\w+ \\w+ \\w+ \\w+)( S\u0326i )/\\1;S\u0326i/gi'| &gt; /PATH/File.txt\n</code></pre>\n\n<p>I\u2019ve these files:</p>\n\n<pre>\nBetty Curtis & Orchestra - Song Title\nBetty Curtis Con Johnny Dorelli - Song Title\nBetty Curtis - Song Title\nMargareta Pa\u0302slaru - Song Title\nMargareta Pa\u0302slaru & Grup - Song Title\nMargareta Pa\u0302slaru S\u0326i Sincron - Song Title\nMatilde Sa\u0301nchez - Song Title\nMatilde Sa\u0301nchez Con El Mariachi Vargas De Tecalitla\u0301n - Song Title\n</pre>\n\n<p>The output desidered would be:</p>\n\n<pre>\nBetty Curtis; 3\nMargareta P\u00e2slaru; 3\nMatilde S\u00e1nchez; 2\n</pre>\n\n<p>The output that comes instead is:</p>\n\n<pre>\nBetty Curtis; 3\nMargareta P\u00e2slaru; 1\nMargareta Pa\u0302slaru & Grup; 1\nMargareta P\u00e2slaru S\u0326i Sincron; 1\nMatilde S\u00e1nchez; 1\nMatilde S\u00e1nchez Con El Mariachi Vargas De Tecalitl\u00e1n; 1\n</pre>\n\n<p>Exactly, the code is very complicated (the entire script counts nineteen lines...). \n<strong><em>The rule is to truncate the name if there are conjunctions, or paranthesis, except if the name is composed of a single word.\nIf there are no conjunctions, or paranthesis, the name is saved in full</em></strong></p>\n\n<p>eg: \u201cGervis Quebodeaux Rayne Serenaders\u201d remains \u201cGervis Quebodeaux Rayne Serenaders; </p>\n\n<p>I'd like to compact the \"Perl -pe\" section: (D w + w +), (D w + w + w +) etc ... is boring. But I do not know how I can do it.</p>\n\n<p>I had to find a balance between summary to make the count and the need to keep as much information as possible.</p>\n\n<p>I have, at the moment, 30 cases (rules) in addition to \u201c&amp;\u201d  I\u2019ve \u201c With \u201d \u201c Con \u201d \u201c e \u201d \u201c Y \u201d \u201c Et \u201d \u201c Und \u201c\u2026 etc in many languages of the world.</p>\n\n<p>The script works fine but <strong><em>does not work with names where there are accented and particular letters</em></strong></p>\n\n<p>The script works like this:</p>\n\n<p>For example, I have many files of Duke Ellington, with many different historical headers.</p>\n\n<pre>\nDuke Ellington: 2 files\nDuke Ellington & Cotton Club O.: 3\nDuke Ellington & His Famous O.: 7\nDuke Ellington & His Famous O.;(Ft. Ben Webster): 4\nDuke Ellington & His Famous O.;(Ft. Johnny Hodges): 3\nDuke Ellington & His O.: 129 \nDuke Ellington & His O. (ft. Ben Webster): 14\nDuke Ellington & His O. (Ft. Johnny Hodges): 8\nDuke Ellington & His O. (pn.): 2\nDuke Ellington &His O. (v. Al Hibble): 1\nDuke Ellington &His O. (v. Al Hibbler): 1\nDuke Ellington &His O. (v. Herb Jeffries): 9\nDuke Ellington &His O. (v. Ozzie Bailey): 1\nDuke Ellington &His O. (v. Ozzie Bailey, Ray Nance Vln.): 1\nDuke Ellington &His O.;(v. Ray Nance?): 1\nDuke Ellington &His O.;(v.M): 1\nDuke Ellington (Ft. Rhythm Boys (2\u00b0c Bing Crosby, Al Rinker, & Harry Barris)): 1\nDuke Ellington (Ft. Rhythm Boys (Bing Crosby, Al Rinker, & Harry Barris)): 1\nDuke Ellington (v. Dick Robertson): 1\nDuke Ellington w Count Basie: 3\nDuke Ellington w Gerald Wilson: 13\nDuke Ellington\u2019s Spacemen: 1\nDuke Ellington\u2019s Washingtonians: 1\n</pre>\n\n<p>Through the work of the script that produces this file</p>\n\n<pre>\nDuke Ellington; 2\nDuke Ellington;&Cotton Club O.; 3\nDuke Ellington;&His Famous O.; 7\nDuke Ellington;&His Famous O.;(Ft. Ben Webster); 4\nDuke Ellington;&His Famous O.;(Ft. Johnny Hodges); 3\nDuke Ellington;&His O.; 129\nDuke Ellington;&His O.;(ft. Ben Webster); 14\nDuke Ellington;&His O.;(Ft. Johnny Hodges); 8\nDuke Ellington;&His O.;(pn.); 2\nDuke Ellington;&His O.;(v. Al Hibble); 1\nDuke Ellington;&His O.;(v. Al Hibbler); 1\nDuke Ellington;&His O.;(v. Herb Jeffries); 9\nDuke Ellington;&His O.;(v. Ozzie Bailey); 1\nDuke Ellington;&His O.;(v. Ozzie Bailey, Ray Nance Vln.); 1\nDuke Ellington;&His O.;(v. Ray Nance?); 1\nDuke Ellington;&His O.;(v.M); 1\nDuke Ellington;(Ft. Rhythm Boys (2\u00b0c Bing Crosby, Al Rinker, & Harry Barris)); 1\nDuke Ellington;(Ft. Rhythm Boys (Bing Crosby, Al Rinker, & Harry Barris)); 1\nDuke Ellington;(v. Dick Robertson); 1\nDuke Ellington;w Count Basie; 3\nDuke Ellington;w Gerald Wilson; 13\nDuke Ellington; Spacemen; 1\nDuke Ellington; Washingtonians; 1\n</pre>\n\n<p>This is the output:</p>\n\n<pre>\nDuke Ellington: 208\n</pre>\n\n<p>Code complete:\n<a href=\"https://www.sendspace.com/file/dlep9q\" rel=\"nofollow noreferrer\">https://www.sendspace.com/file/dlep9q</a></p>\n"}, {"tags": ["perl", "hash", "comparison"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563658697, "post_id": 57128736, "comment_id": 100773926, "body": "There is no library that&#39;ll do something so specific, while <code>List::Util</code> and <code>List;:MoreUtils</code> will certainly help with some bits. And, with Perl&#39;s expressiveness this should be a quick job."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1563659837, "post_id": 57128736, "comment_id": 100774144, "body": "<code>Test::</code> utilities can also help.  Can you not show us what you have already?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1563663336, "post_id": 57128736, "comment_id": 100774775, "body": "Presumably, the test for the keys (part 1) can be done by comparing the (sorted?) lists of keys from each hash \u2014 recursively if need so be. You should have the tools to do that. I don&#39;t think I understand what you mean by your second part of the question. Is the requirement that each entry in the list for <code>category1</code> and <code>key1</code> in the user hash is also present in the corresponding list of the reference hash? How will you report deviations? Messages? Statuses? Just a Boolean condition: &#39;same enough&#39; or &#39;not same enough&#39;? Will you need to know which key is missing, or extra? What did you try?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563663935, "post_id": 57128736, "comment_id": 100774864, "body": "Is it always two levels, with &quot;lists&quot; only at the second level, and only &quot;lists&quot; at the second level?"}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563665917, "post_id": 57128736, "comment_id": 100775110, "body": "@ikegami - I did not understand the downvoting. When I tried to use some modules, perl is complaining it cannot find them. On the machine on which I am working, I dont have admin rights."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563666005, "post_id": 57128736, "comment_id": 100775118, "body": "You don&#39;t need admin rights to install a module"}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1563666257, "post_id": 57128736, "comment_id": 100775144, "body": "@ Jonathan - I need to report which &quot;key&quot; in <code>$user_hash</code> is failing my check. My hashes are of varying depth. I tried using <code>is_deeply()</code> &amp; <code>cmp_deeply()</code> but they are checking for exact match of hashes."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1563665715, "post_id": 57129264, "comment_id": 100775084, "body": "Sorry, its not just two levels, depth is variable per category."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 1, "creation_date": 1563665799, "post_id": 57129264, "comment_id": 100775097, "body": "Then how can you tell if you should recurse or check against a list of acceptable values?"}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1563666643, "post_id": 57129264, "comment_id": 100775176, "body": "Updated my question with more info."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 1, "creation_date": 1563667529, "post_id": 57129264, "comment_id": 100775275, "body": "You didn&#39;t answer my question. How can you tell if it&#39;s a leaf?"}, {"owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1563673481, "post_id": 57129264, "comment_id": 100775887, "body": "its a leaf <code>if (ref $value ne &#39;HASH&#39;)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "edited": false, "score": 0, "creation_date": 1563704097, "post_id": 57129264, "comment_id": 100780610, "body": "You should never use that; it doesn&#39;t detect all hashes. In fact, it&#39;s technically impossible to always distinguish a hash from an array in Perl, so your API is fundamentally flawed. But it it&#39;s what you want to do, it&#39;s trivial to incorporate in the code I&#39;ve already presented."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1563808378, "last_edit_date": 1563808378, "creation_date": 1563664362, "answer_id": 57129264, "question_id": 57128736, "link": "https://stackoverflow.com/questions/57128736/perl-compare-hash-with-reference-template-hash/57129264#57129264", "title": "perl - compare hash with reference/template hash", "body": "<pre><code>sub test {\n   my ($ref, $hash) = @_;\n\n   my %keys = map { $_ =&gt; 1 } keys(%$ref);\n\n   for my $key (keys(%$hash)) {\n      return 0 if --$keys{$key};\n\n      if (ref($ref-&gt;{$key}) eq 'HASH') {\n         return 0 if !test($ref-&gt;{$key}, $hash-&gt;{$key});\n      } else {\n         my $val = $hash-&gt;{$key};\n         return 0 if !grep { $_ eq $val } @$ref;\n      }\n   }\n\n   return 0 if grep { $_ } values(%keys};\n   return 1;\n}\n\ntest($ref_hash, user_hash)\n   or die(\"Bad data\");\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 1549490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcdeb11a84554b79145451575246a262?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1549490/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563808378, "creation_date": 1563658181, "last_edit_date": 1563666555, "question_id": 57128736, "link": "https://stackoverflow.com/questions/57128736/perl-compare-hash-with-reference-template-hash", "title": "perl - compare hash with reference/template hash", "body": "<p>I have a reference (nested) hash like:</p>\n\n<pre><code>$ref_hash = { \n   category1 =&gt; {\n      key1 =&gt; [list1],\n      key2 =&gt; [list2],\n   },\n   category2 =&gt; {\n      key3 =&gt; [list3],\n      key4 =&gt; [list4],\n   }\n}\n</code></pre>\n\n<p>And a user passed reference to a hash (<code>$user_hash</code>). I want to:</p>\n\n<ol>\n<li><p>Check if <code>$user_hash</code> has exactly same \"keys\" as in <code>$ref_hash</code>; no more, no less.</p></li>\n<li><p>Check if all values in <code>$user_hash</code> are within the respective \"listX\" in <code>$ref_hash</code>. e.g.: <code>$user_hash{category2}{key3} ~~ @list3</code>.</p></li>\n</ol>\n\n<p>I know I can iterate through each key and check it, but for efficient implementation, is there any inbuilt Perl function that can do this? Or at least some parts of this task?</p>\n\n<p>I don't have access modules like <code>Array::Utils</code>, <code>List::Compare</code>.\nI do have access to <code>Test::More</code>, <code>Test::Deep</code>, <code>Data::Compare</code>, <code>List::MoreUtils</code>.</p>\n\n<p>Note: My hashes are of varying depth (not just two levels). I have to match all keys of <code>$user_hash</code> with <code>$ref_hash</code> and also for all leaf (last level) keys - check if their values are in the \"range\" of corresponding key in <code>$ref_hash</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1563639840, "post_id": 57126450, "comment_id": 100769851, "body": "Welcome to SO! I&#39;m not clear on the transformation here--it looks like the last 3 lines were chopped off on the output. Where did they go?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1563653370, "post_id": 57126450, "comment_id": 100772873, "body": "It&#39;d be easier if your data was an array of JSON objects. Did it start out as that by chance and something stripped out all the brackets and braces?"}, {"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563657576, "post_id": 57126450, "comment_id": 100773690, "body": "it does &quot;start&quot; as JSON but then it is picked up through &quot;wireshark&quot; where I get the &quot;raw&quot; data"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563642031, "post_id": 57126643, "comment_id": 100770388, "body": "not sure what I did wrong but...now it does not print anything...   use strict;  my $find1 = &quot;latDD&quot;; my $find2 = &quot;lonDD&quot;; my $find3 = &#39;&quot;callsign&quot;&#39;; my $find4 = &quot;timeStamp&quot;;  open (NEW1, &quot;&gt;&quot;, &quot;new1.txt&quot; ) or die &quot;could not open:$!&quot;; open (FILE, &quot;&lt;&quot;, &quot;test revam.txt&quot;) or die &quot;could not open:$!&quot;;  while (&lt;FILE&gt;) {    defined( my $line1 = &lt;$find1&gt; ) or last;    defined( my $line2 = &lt;$find2&gt; ) or die;    defined( my $line3 = &lt;$find3&gt; ) or die;    defined( my $line4 = &lt;$find4&gt; ) or die;     print $line3, $line1, $line2, $line4; }   close (FILE); close (NEW1);"}, {"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563642077, "post_id": 57126643, "comment_id": 100770395, "body": "where in my code is you code suppose to sit? is there script/code that goes into &lt;&gt;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563643140, "post_id": 57126643, "comment_id": 100770702, "body": "You can specify a file handle. But if you don&#39;t, it will read from the file(s) passed as arguments to the script, or from STDIN if no arguments were provided. This is generally preferable to hardcoding the paths, but it&#39;s up to you"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1563640433, "creation_date": 1563640433, "answer_id": 57126643, "question_id": 57126450, "link": "https://stackoverflow.com/questions/57126450/rearrange-print-order-of-key-value-data-read-from-file-in-perl/57126643#57126643", "title": "Rearrange print order of key-value data read from file in Perl", "body": "<pre><code>while (1) {\n   defined( my $line1 = &lt;&gt; ) or last;\n   defined( my $line2 = &lt;&gt; ) or die;\n   defined( my $line3 = &lt;&gt; ) or die;\n   defined( my $line4 = &lt;&gt; ) or die;\n\n   print $line3, $line1, $line2, $line4;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563647272, "post_id": 57126803, "comment_id": 100771667, "body": "sir, say that my data is in a file named &quot;NEW&quot; how do I insert the file name into your code so that your code works?"}, {"owner": {"reputation": 176, "user_id": 11626637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLnpB.jpg?s=128&g=1", "display_name": "Rob Sweet", "link": "https://stackoverflow.com/users/11626637/rob-sweet"}, "reply_to_user": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563662046, "post_id": 57126803, "comment_id": 100774571, "body": "Replace the &#39;for my $line ...&quot; line with the following two lines:              open (IN, &#39;&lt; NEW&#39;) or die &quot;Failed to open file $!&quot;;     while (my $line = &lt;IN&gt;) {"}], "tags": [], "owner": {"reputation": 176, "user_id": 11626637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLnpB.jpg?s=128&g=1", "display_name": "Rob Sweet", "link": "https://stackoverflow.com/users/11626637/rob-sweet"}, "is_accepted": false, "score": 2, "last_activity_date": 1563641656, "creation_date": 1563641656, "answer_id": 57126803, "question_id": 57126450, "link": "https://stackoverflow.com/questions/57126450/rearrange-print-order-of-key-value-data-read-from-file-in-perl/57126803#57126803", "title": "Rearrange print order of key-value data read from file in Perl", "body": "<p>You need to keep track of one set of your data (one of each of line) and then when you have a last line in the set (in this case timestamp) print them all in the order you prefer.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nmy %vals;   # hash to hold a set of lines\n\n# read data (I'm using __DATA__, you probably want a file or stdin)\nfor my $line (&lt;DATA&gt;) {\n    my ($key) = $line =~ /\"(.+?)\"/; # parse the key out of the line\n    $vals{$key} = $line;        # save the line for this key\n    if ($key eq 'timeStamp') {  # are we done with this set of lines?\n        printBlock();   # print them\n        %vals = ();     # clear the hash for the next set of lines\n    }\n}\nprintBlock();\n\nsub printBlock {\n    print '-'x50 . \"\\n\";    # OPTIONAL print a line between each set\n    print $vals{callsign};\n    print $vals{latDD};\n    print $vals{lonDD};\n    print $vals{timeStamp};\n}\n\n__DATA__\n\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"callsign\":\"AAL1300 \",\n\"timeStamp\":\"2019-07-19T13:47:49.46Z\",\n\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"callsign\":\"AAL1300 \",\n\"timeStamp\":\"2019-07-19T13:47:50.186Z\",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"callsign\":\"GT017   \",\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"callsign\":\"GT017   \",\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"latDD\":33.732867,\n\"lonDD\":-84.401664,\n\"callsign\":\"AAL1300 \"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563641656, "creation_date": 1563639119, "last_edit_date": 1563639538, "question_id": 57126450, "link": "https://stackoverflow.com/questions/57126450/rearrange-print-order-of-key-value-data-read-from-file-in-perl", "title": "Rearrange print order of key-value data read from file in Perl", "body": "<p>My data looks like:</p>\n\n<pre><code>\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"callsign\":\"AAL1300 \",\n\"timeStamp\":\"2019-07-19T13:47:49.46Z\",\n\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"callsign\":\"AAL1300 \",\n\"timeStamp\":\"2019-07-19T13:47:50.186Z\",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"callsign\":\"GT017   \",\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"callsign\":\"GT017   \",\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"latDD\":33.732867,\n\"lonDD\":-84.401664,\n\"callsign\":\"AAL1300 \",\n</code></pre>\n\n<p>I want to print <code>callsign</code> first, then print the <code>latDD</code> that is before <code>callsign</code> second, then print the <code>lonDD</code> that is before <code>callsign</code> third,\nthen the <code>timeStamp</code> that is after <code>callsign</code> fourth.</p>\n\n<p>the finished data should look like:</p>\n\n<pre><code>\"callsign\":\"AAL1300 \",\n\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"timeStamp\":\"2019-07-19T13:47:49.46Z\",\n\"callsign\":\"AAL1300 \",\n\"latDD\":33.732867,\n\"lonDD\":-84.404525,\n\"timeStamp\":\"2019-07-19T13:47:50.186Z\",\n\"callsign\":\"GT017   \",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"callsign\":\"GT017   \",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n</code></pre>\n\n<p>I've tried shifting the print statements around in the code but since the data is in a specific order, it seems to only want to print the data out in the order that it is originally in.</p>\n\n<pre><code>use strict;\n\nmy $find3 = \"latDD\";\nmy $find4 = \"lonDD\";\nmy $find1 = '\"callsign\"';\nmy $find2 = \"timeStamp\";\n\nopen (NEW1, \"&gt;\", \"new1.txt\" ) or die \"could not open:$!\";\nopen (FILE, \"&lt;\", \"test revam.txt\") or die \"could not open:$!\";\n\nwhile (&lt;FILE&gt;) {\n    print NEW1 if (/$find1/);\n    print NEW1 if (/$find2/);\n    print NEW1 if (/$find3/);\n    print NEW1 if (/$find4/);\n}\n\nclose (FILE);\nclose (NEW1);\n</code></pre>\n"}, {"tags": ["perl", "encoding", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1563574964, "post_id": 57120084, "comment_id": 100758654, "body": "Cool, works nicely. It would have never occurred to me to do command-line parsing in a BEGIN block, but it works, so why not. It means declaring the variables for my options outside the BEGIN block instead of inside my <code>GetOptions()</code> as a like to do, but that&#39;s an easy detail to fix. I just learned the <code>use if...</code> syntax today."}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1563575117, "post_id": 57120084, "comment_id": 100758678, "body": "About <code>-C</code>: besides the less safe <code>:utf8</code>, I really hate to call my scripts explicitly with <code>perl ... script name</code>, so your first solution is by far my preferred choice. I did find out about <code>-C</code> in my research, and I think it&#39;s an option to remember for when I want to make a script utf8 friendly temporarily without modifying it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 1, "creation_date": 1563575455, "post_id": 57120084, "comment_id": 100758735, "body": "@joanis It&#39;s because <code>use</code>, and lexical scopes, are both compile-time concepts."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1563574472, "last_edit_date": 1563574472, "creation_date": 1563574167, "answer_id": 57120084, "question_id": 57120046, "link": "https://stackoverflow.com/questions/57120046/setting-default-encoding-to-utf-8-in-perl-conditionally-on-command-line-option/57120084#57120084", "title": "Setting default encoding to utf-8 in perl conditionally on command-line option", "body": "<p>First: you can use <a href=\"https://perldoc.pl/if\" rel=\"nofollow noreferrer\">if</a> to conditionally apply a lexical pragma. Just make sure the condition is available at compile time (you may need to use a BEGIN block before).</p>\n\n<pre><code>my $use_utf8;\nBEGIN { $use_utf8 = 1; }\nuse if $use_utf8, 'open', ':std', ':encoding(UTF-8)';\n</code></pre>\n\n<p>The <a href=\"https://perldoc.pl/perlrun#-C-%5Bnumber/list%5D\" rel=\"nofollow noreferrer\">-C</a> option works similarly to the open pragma for utf8 layers. <code>-CSD</code> will set it on the standard handles (S) and any handles opened (D). Unfortunately it uses the less safe <code>:utf8</code> layer instead of <code>:encoding(UTF-8)</code>, so you may end up with broken strings if you use it for input that is not actually UTF-8. Also, <code>-CD</code> sets a default for any handles opened in the whole program, not just the lexical scope of your script, this can possibly break usage of modules that don't expect it. (<code>-CS</code> is always global, as is the ':std' effect of the open pragma, since the standard handles are global.)</p>\n\n<pre><code>perl -CSD problem.pl input\n</code></pre>\n"}], "owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 57120084, "answer_count": 1, "score": 0, "last_activity_date": 1563574472, "creation_date": 1563573861, "question_id": 57120046, "link": "https://stackoverflow.com/questions/57120046/setting-default-encoding-to-utf-8-in-perl-conditionally-on-command-line-option", "title": "Setting default encoding to utf-8 in perl conditionally on command-line option", "body": "<p>In order to process text in utf-8 in Perl, I have been using <code>binmode(&lt;file-handle&gt;, \":encoding(UTF-8)\");</code> on each stream I use. I just discovered that</p>\n\n<pre><code>use open ( \":encoding(UTF-8)\", \":std\" );\n</code></pre>\n\n<p>can be used to do the same thing globally. This is great, since it means a lot less repetitive code.</p>\n\n<p>But now I have a problem: I would like to have a command line option to my script, <code>-utf8</code>, which turns everything utf-8 only when supplied. Since <code>use open</code> is a pragma, it is lexically scoped and I cannot put it in an if statement, but without an if statement it cannot depend on command line options.</p>\n\n<p>Here is a minimal example illustrating the problem, call it problem.pl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\n# hard-coded in my minimal example, normally set by command line option -utf8\nmy $use_utf8 = 1;\n\n# use only applies within its lexical scope - this does not work\nif ($use_utf8) {\n   use open ( \":encoding(UTF-8)\", \":std\" );\n}\n\n# if I put it at the right lexical scope, it's not conditional on $use_utf8\n#..e open ( \":encoding(UTF-8)\", \":std\" );\n\nwhile (&lt;&gt;) {\n   print length($_);\n}\n</code></pre>\n\n<p>When I run this code on a file, call in <code>input</code>, containing one line with a 2-byte UTF-8 character, say <code>\u00e0</code>, it outputs 3:</p>\n\n<pre><code>$ ./problem.pl input\n3\n</code></pre>\n\n<p>If I move the <code>use open</code> statement to the global scope, I get the expected results of a length of 2 (one character plus one newline):</p>\n\n<pre><code>$ ./problem.pl input\n2\n</code></pre>\n\n<p>So how can I set the encoding to utf-8 globally, but conditionally on a command-line option, so that I would get 2 with <code>-utf8</code> but 3 without.</p>\n\n<p>Also, in my real use case, I use the spaceship operator (<code>while (&lt;&gt;)</code>) to provide high flexibility in the command line syntax to process multiple files, but in this case I can't call <code>binmode</code> since the file handles are managed automatically by Perl. <code>use open</code> would be a much nicer option, if I could make it conditional.</p>\n\n<p>PS: Yes, I really do still have non-utf8 data that I want to continue to be able to handle. Thank God most of our data is now in utf-8, but unfortunately not all of it yet.</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1563568652, "post_id": 57119213, "comment_id": 100757087, "body": "You could use the Core module <code>charnames</code>&#39;s <code>viacode</code>. Support for Unicode 5.0 was added in Perl 5.10 and 5.2 in 5.12. (Perl 5.30 supports Unicode 12.1.)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563570223, "post_id": 57119213, "comment_id": 100757519, "body": "<i>&quot;Where should I put my version of Unicode::CharName&quot;</i> Write a simple <code>Makefile.PL</code> for you module, see <a href=\"https://perldoc.perl.org/ExtUtils/MakeMaker.html\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a> and then run <code>perl Makefile.PL; make; make install</code> it should overwrite the original module."}, {"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563572372, "post_id": 57119213, "comment_id": 100758071, "body": "@ikegami, 1) I don&#39;t want to change the calling script. As well Unicode::CharName gives me the Unicode block name as well."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1563614854, "post_id": 57119213, "comment_id": 100764356, "body": "Note to potential answerers: This question has been crossposted to PerlMonks at <a href=\"https://www.perlmonks.org/?node_id=11103047\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=11103047</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1563575824, "last_edit_date": 1563575824, "creation_date": 1563575179, "answer_id": 57120207, "question_id": 57119213, "link": "https://stackoverflow.com/questions/57119213/using-local-perl-module-instead-of-one-installed-by-cpan/57120207#57120207", "title": "Using local Perl module instead of one installed by CPAN", "body": "<p>Using <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a> you could download the module, patch it, and install it as normal:</p>\n\n<pre><code>$ cpanm --look Unicode::CharName\n# new shell opens\n$ patch lib/Unicode/CharName.pm custom.patch # or whatever process\n$ perl Makefile.PL\n$ make install\n$ exit\n</code></pre>\n\n<p>You can also install it to a <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> to avoid overwriting it globally, by adding the <code>-l local/</code> option to the <code>cpanm</code> command. Then you can add the absolute path of this local::lib to your PERL5LIB or via <code>-I</code> or <code>use lib</code>. If you specified <code>/path/to/local</code> for the <code>-l</code> option, it would be <code>/path/to/local/lib/perl5</code>.</p>\n\n<p>Manually copying files rather than going through the normal installation process is likely to lead to problems. Many distributions depend on the installation process to build the modules correctly. Also, you will need to install the module separately for each Perl you want to use it for; installed Perl modules are not generally cross-compatible between Perl versions or architectures. (A strictly simple pure-Perl module can be an exception to these rules, but the only module I feel comfortable abusing this way is App::cpanminus, because it was designed to do this.)</p>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 1, "accepted_answer_id": 57120207, "answer_count": 1, "score": 4, "last_activity_date": 1563575824, "creation_date": 1563567793, "last_edit_date": 1563568374, "question_id": 57119213, "link": "https://stackoverflow.com/questions/57119213/using-local-perl-module-instead-of-one-installed-by-cpan", "title": "Using local Perl module instead of one installed by CPAN", "body": "<p>I have found it necessary to expand upon a CPAN module. (Unicode::CharName goes up to Unicode 4.1; I need some characters from Unicode 5.0 &amp; 5.1).</p>\n\n<p>I've made the changes needed and have my own CharName.pm module.</p>\n\n<p>I now would like to use it with my various Perls. I currently use:</p>\n\n<ul>\n<li>Strawberry Perl for Windows</li>\n<li>git for Windows MINGW64; My .bashrc sets\n$PATH to Strawberry perl and   $PERL5LIB=/c/Strawberry/perl/vendor/lib:/c/Strawberry/perl/site/lib</li>\n<li>WSL Ubuntu</li>\n</ul>\n\n<p>Where should I put my version of Unicode::CharName, so that it over-rides the ones installed by CPAN?</p>\n\n<p>I don't want to have to change any scripts that currently</p>\n\n<pre><code>use Unicode::CharName;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563559979, "post_id": 57117435, "comment_id": 100753875, "body": "Why not just print 3 lines after you find the callsign?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563567691, "post_id": 57117742, "comment_id": 100756799, "body": "Thank you!!! your recommendation certainly works but I will have to pull in the file pre-filtered... the original data looks like:   \t\t&quot;icaoAddress&quot;:&quot;ACD0CA&quot;, \t\t&quot;trafficSource&quot;:0, \t\t&quot;latDD&quot;:33.733200,     *want this \t\t&quot;lonDD&quot;:-84.475667,    * want this \t\t&quot;altitudeMM&quot;:2994660, \t\t&quot;headingDE2&quot;:9066, \t\t&quot;horVelocityCMS&quot;:13221, \t\t&quot;verVelocityCMS&quot;:-812, \t\t&quot;squawk&quot;:6202, \t\t&quot;altitudeType&quot;:0, \t\t&quot;callsign&quot;:&quot;GT017 &quot;,      **search on this \t\t&quot;emitterType&quot;:3, \t\t&quot;sequenceNumber&quot;:10794, \t\t&quot;pingStationGuid&quot;:&quot;754104714b1002aa&quot;, \t\t&quot;utcSync&quot;:1, \t\t&quot;timeStamp&quot;:&quot;2019-07-19T13:46:57.8Z&quot;,    **want this"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 0, "creation_date": 1563569706, "post_id": 57117742, "comment_id": 100757393, "body": "You are welcome! What do you mean by <i>&quot;..pull in file pre-filtered..&quot;</i> and what is meant by <i>&quot;.. want this&quot;</i> and <i>&quot;..search on this&quot;</i>?"}, {"owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 1, "creation_date": 1563581700, "post_id": 57117742, "comment_id": 100759830, "body": "Hakon; first thank you again for the code. initially it took 2 steps to get the code to work the way I wanted..step 1....was my code that filtered the data down to essential elements... step 2...your code filtered the remaining data and put it in the needed desired format....I ended up putting your code in my initial script at the bottom and it now works as expected in one step....sincerely....THANK YOU"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "edited": false, "score": 1, "creation_date": 1563791166, "post_id": 57117742, "comment_id": 100802934, "body": "@kirk: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1563560044, "creation_date": 1563560044, "answer_id": 57117742, "question_id": 57117435, "link": "https://stackoverflow.com/questions/57117435/if-statement-filter-for-perl/57117742#57117742", "title": "&quot;if statement filter for Perl&quot;", "body": "<p>Here is an example:</p>\n\n<pre><code>my $find = '\"callsign\":\"GT017   \"';\nwhile (&lt;FILE&gt;) {\n    if (/\\Q$find\\E/) {\n        print NEW1 $_;\n        for (1..3) {\n            print NEW1 scalar &lt;FILE&gt;;\n        }\n    }\n}\n</code></pre>\n\n<p>this will print the line with callsign and the following 3 lines.</p>\n"}], "owner": {"reputation": 11, "user_id": 11809536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66ef7414b42e963efecf8deaed2eb80?s=128&d=identicon&r=PG&f=1", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11809536/kirk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563563063, "creation_date": 1563558597, "last_edit_date": 1563563063, "question_id": 57117435, "link": "https://stackoverflow.com/questions/57117435/if-statement-filter-for-perl", "title": "&quot;if statement filter for Perl&quot;", "body": "<p>I'm using Perl to search a large file for specific Lat/Long data.\nbut I only want the Lat/Long data that belongs to the data that contains \"GT017   \" just before it</p>\n\n<p>I've successfully grabbed the following data types\nCall sign\nLat\nLong\ntimestamp</p>\n\n<p>But , I can not seem to limit the data acquired to only the Lat/Long/Timestamp that is tied to the Call sign GT017</p>\n\n<p>I've tried if statements and sub routines but neither seem to allow me to only print the Lat/Long/timestamp that is specifically tied to the Call sign GT017</p>\n\n<pre><code>use strict;\n\n#search for headers\nmy $find1= \"GT017   \";\nmy $find2 = \"timeStamp\";\nmy $find3 = \"latDD\";\nmy $find4= \"lonDD\";\n\n#above provides in response to my $find\n\n#\"callsign\":\"GT017   \"\n#\"latDD\":33.733200,\n#\"lonDD\":-84.475667,\n#\"timeStamp\":\"2019-07-19T13:46:57.8Z\",\n\n\nopen (NEW1, \"&gt;\", \"new1.txt\" ) or die \"could not open:$!\";\nopen (FILE, \"&lt;\", \"test revab.txt\") or die \"could not open:$!\";\nwhile (&lt;FILE&gt;) {\n\n#I want only a specific callsign's lat/long/timestamp printed\n\nif ($find1 =~ /GT017/) {\n\nprint NEW1 if (/$find1/);\nprint NEW1 if (/$find2/);\nprint NEW1 if (/$find3/);\nprint NEW1 if (/$find4/);\n\n}\n\n}\nclose (FILE);\nclose (NEW1);\n</code></pre>\n\n<p>I get a large file with every Lat/Long/timestamp from the original file.</p>\n\n<pre><code>\"latDD\":33.733200,\n\"lonDD\":-84.474266,\n\"timeStamp\":\"2019-07-19T13:46:58.22Z\",\n\"latDD\":33.733200,\n\"lonDD\":-84.474266,\n\"timeStamp\":\"2019-07-19T13:46:58.8Z\",\n\"latDD\":33.708528,\n\"lonDD\":-84.388506,\n\"timeStamp\":\"2019-07-19T13:46:58.33Z\",\n</code></pre>\n\n<p>The below is what I want for each occurrence of \"callsign\":\"GT017   \",</p>\n\n<pre><code>\"callsign\":\"GT017   \",\n\"timeStamp\":\"2019-07-19T13:47:50.0Z\",\n\"latDD\":33.781071,\n\"lonDD\":-84.401736,\n</code></pre>\n"}, {"tags": ["perl", "hash", "reference", "subroutine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1563558792, "post_id": 57117067, "comment_id": 100753420, "body": "The first one makes a copy of the hash for no reason."}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 2, "last_activity_date": 1563558623, "last_edit_date": 1563558623, "creation_date": 1563557889, "answer_id": 57117298, "question_id": 57117067, "link": "https://stackoverflow.com/questions/57117067/is-instantiating-a-hash-in-a-function-inefficient-in-perl/57117298#57117298", "title": "Is instantiating a hash in a function inefficient in perl?", "body": "<p>1st snippet is silly. But it's <a href=\"https://github.com/OTRS/otrs/blob/rel-6_0/Kernel/System/HTMLUtils.pm#L64\" rel=\"nofollow noreferrer\">convenient practice</a> to emulate named arguments:</p>\n\n<pre><code>sub function {\n   my ($self, %params ) = @_;\n   ...\n} \n</code></pre>\n\n<p>So, pass arrays/hashes by reference, creation of new (especially big) hash will be much slower. But there is nothing bad in \"named arguments\" hack.</p>\n\n<p>And did you now that there exist key/value slice (v5.20+ only)? You can copy part of hash easily this way:\n   my %foo = ( one => 1, two => 2, three => 3, four => 4);\n   my %bar = %foo{'one', 'four'};</p>\n\n<p>More information in <code>perldoc perldata</code></p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563561173, "post_id": 57117925, "comment_id": 100754397, "body": "One tiny benefit of the pattern in the first snippet: One can&#39;t accidentally vivify an element of <code>%$hash_ref</code>. But that never happens in practice, so it&#39;s a rather worthless benefit."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1563561633, "post_id": 57117925, "comment_id": 100754613, "body": "I wouldn&#39;t say &quot;never happens&quot;. It happens quite often when dealing with multi-level structures. But moreso I would only use the first method when I explicitly didn&#39;t want to modify the original hash in general."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563562746, "post_id": 57117925, "comment_id": 100755023, "body": "@Grinnz, Fine, I&#39;ve never seen it happen. I&#39;m not even sure I&#39;ve heard of it happening. This is mostly because <code>f($h{$k})</code> specifically prevents the autovivification from happening even though the <code>$h{$k}</code> is evaluated as an lvalue. Only <code>for ($h{$k}) { }</code> would do it, and who does that?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563562897, "post_id": 57117925, "comment_id": 100755072, "body": "@Grinnz, Maybe you&#39;re thinking of the autovivification of references? <code>no autovivification;</code> is a better protection against that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1563561414, "last_edit_date": 1563561414, "creation_date": 1563560935, "answer_id": 57117925, "question_id": 57117067, "link": "https://stackoverflow.com/questions/57117067/is-instantiating-a-hash-in-a-function-inefficient-in-perl/57117925#57117925", "title": "Is instantiating a hash in a function inefficient in perl?", "body": "<p>Let's say <code>%$hash_ref</code> contains N elements.</p>\n\n<p>The first snippet does the following in addition to what the second snippet does:</p>\n\n<ul>\n<li>Creates N scalars. (Can involve multiple memory allocations each.)</li>\n<li>Adds N*2 scalars to the stack. (Cheap.)</li>\n<li>Creates a hash. (More memory allocations...)</li>\n<li>Adds N elements to a hash. (More memory allocations...)</li>\n</ul>\n\n<p>The second snippet does the following in addition to what the first snippet does:</p>\n\n<ul>\n<li>[Nothing. It's a complete subset of the first snippet]</li>\n</ul>\n\n<p>The first snippet is therefore far less efficient than the second. It also more complicated by virtue of having extra code. The complete lack of benefit and the numerous costs dictate that one should avoid the pattern used in the first snippet.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1563611315, "last_edit_date": 1563611315, "creation_date": 1563561792, "answer_id": 57118087, "question_id": 57117067, "link": "https://stackoverflow.com/questions/57117067/is-instantiating-a-hash-in-a-function-inefficient-in-perl/57118087#57118087", "title": "Is instantiating a hash in a function inefficient in perl?", "body": "<p>The first version of the sub creates a local copy of the data structure which reference is passed to it. As such it is far less efficient, of course.</p>\n\n<p>There is one legitimate reason for this: to make sure the data in the caller isn't changed.  That local <code>%hash</code> can be changed in the sub as needed or convenient and the data in the calling code is not affected. This way the data in the caller is also protected against accidental changes.</p>\n\n<p>Another reason why a local copy of data is done, in particular with deeper data structures, is to avoid long chains of dereferencing and thus simplify code; so parts of deep hierarchies may be copied for simpler access. Then this is merely for (presumed) programming convenience.</p>\n\n<p>So in the shown example there'd be absolutely no reason to make a local copy. However, presumably the question is about subs where more work is done and then what's best depends on details.</p>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 57117925, "answer_count": 3, "score": 1, "last_activity_date": 1563777984, "creation_date": 1563556794, "last_edit_date": 1563777984, "question_id": 57117067, "link": "https://stackoverflow.com/questions/57117067/is-instantiating-a-hash-in-a-function-inefficient-in-perl", "title": "Is instantiating a hash in a function inefficient in perl?", "body": "<p>Is there any difference in doing the following, efficiency, bad practice...?</p>\n\n<p>(In a context of bigger hashes and sending them through many functions)</p>\n\n<pre><code>sub function {\n  my ($self, $hash_ref) = @_;\n  my %hash = %{$hash_ref};\n  print $hash{$key};\n  return;\n}\n</code></pre>\n\n<p>Compared to:</p>\n\n<pre><code>sub function {\n  my ($self, $hash_ref) = @_;\n  print $hash_ref-&gt;{$key};\n  return;\n}\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563556182, "post_id": 57116518, "comment_id": 100752402, "body": "Try this: <code>perl -F&#39;;&#39; -lane &#39;$F[5] = sprintf &quot;%-25d&quot;, $F[5]; $&quot; = &quot;;&quot;; print &quot;@F&quot;&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 3, "last_activity_date": 1563554589, "creation_date": 1563554589, "answer_id": 57116585, "question_id": 57116518, "link": "https://stackoverflow.com/questions/57116518/normalize-column-fill-with-space-on-right/57116585#57116585", "title": "Normalize column fill with space on right", "body": "<pre><code>$ awk 'BEGIN{FS=OFS=\";\"} {$NF=sprintf(\"%-25s\",$NF)}1' file\n1;000117;20190529;055529;9521;0988388019\n1;000015;20190529;071944;2222;2231\n1;000012;20190529;072734;4258;4252\n1;000006;20190529;073336;2226;1000\n3;000005;20190529;073715;1000;037760967\n3;000004;20190529;073751;1000;037760967\n</code></pre>\n\n<p>So you can see the blanks:</p>\n\n<pre><code>$ awk 'BEGIN{FS=OFS=\";\"} {$NF=sprintf(\"%-25s\",$NF)}1' file | tr ' ' '#'\n1;000117;20190529;055529;9521;0988388019###############\n1;000015;20190529;071944;2222;2231#####################\n1;000012;20190529;072734;4258;4252#####################\n1;000006;20190529;073336;2226;1000#####################\n3;000005;20190529;073715;1000;037760967################\n3;000004;20190529;073751;1000;037760967################\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1563556602, "creation_date": 1563556602, "answer_id": 57117025, "question_id": 57116518, "link": "https://stackoverflow.com/questions/57116518/normalize-column-fill-with-space-on-right/57117025#57117025", "title": "Normalize column fill with space on right", "body": "<p>You were on the right track. More successful Perl codes:</p>\n\n<pre><code>perl -F';' -lane '$F[5]=sprintf(\"%-25s\",$F[5]);print join \";\",@F'\nperl -F';' -pane '$F[5]=sprintf(\"%-25s\",$F[5]);$_=join \";\",@F'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1563573775, "creation_date": 1563573775, "answer_id": 57120033, "question_id": 57116518, "link": "https://stackoverflow.com/questions/57116518/normalize-column-fill-with-space-on-right/57120033#57120033", "title": "Normalize column fill with space on right", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -i ':a;/;[^;]\\{25\\}$/!s/$/ /;ta' file\n</code></pre>\n\n<p>If the last field is not 25 characters long, add a space until it is.</p>\n"}], "owner": {"reputation": 59, "user_id": 5152023, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXHr003rkRk/AAAAAAAAAAI/AAAAAAAAATo/1iUdBtuKwBI/photo.jpg?sz=128", "display_name": "marloncos", "link": "https://stackoverflow.com/users/5152023/marloncos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57116585, "answer_count": 3, "score": 1, "last_activity_date": 1563573775, "creation_date": 1563554248, "last_edit_date": 1563554656, "question_id": 57116518, "link": "https://stackoverflow.com/questions/57116518/normalize-column-fill-with-space-on-right", "title": "Normalize column fill with space on right", "body": "<p>Working with the example log file below:</p>\n\n<pre><code>1;000117;20190529;055529;9521;0988388019\n1;000015;20190529;071944;2222;2231\n1;000012;20190529;072734;4258;4252\n1;000006;20190529;073336;2226;1000\n3;000005;20190529;073715;1000;037760967\n3;000004;20190529;073751;1000;037760967\n</code></pre>\n\n<p>I need to normalize the last column filling with spaces until they has the lenght = 25</p>\n\n<p>Tryed with unsuccessful perl code:</p>\n\n<pre><code>perl -F';' -lane '$F[5] = $F[5], sprintf \"% 25d\"; $\" = \";\"; print \"@F\"'\n</code></pre>\n\n<p>I need the output below:</p>\n\n<pre><code>1;000117;20190529;055529;9521;0988388019               \n1;000015;20190529;071944;2222;2231                     \n1;000012;20190529;072734;4258;4252                     \n1;000006;20190529;073336;2226;1000                     \n3;000005;20190529;073715;1000;037760967                \n3;000004;20190529;073751;1000;037760967                \n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "http-put", "mojo-useragent"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 4, "last_activity_date": 1563536526, "creation_date": 1563536526, "answer_id": 57111814, "question_id": 57109294, "link": "https://stackoverflow.com/questions/57109294/how-to-put-a-file-using-mojouseragent/57111814#57111814", "title": "How to PUT a file using Mojo::Useragent?", "body": "<p>See <a href=\"http://p3rl.org/Mojo::UserAgent#build_tx\" rel=\"nofollow noreferrer\"><code>build_tx</code> in Mojo::UserAgent</a> and the example commented</p>\n\n<pre><code># PUT request with content streamed from file\n</code></pre>\n\n<p>at <a href=\"http://p3rl.org/Mojo::UserAgent::Transactor#tx\" rel=\"nofollow noreferrer\"><code>tx</code> in Mojo::UserAgent::Transactor</a>.</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new;\nmy $put = $ua-&gt;build_tx(PUT =&gt; '\u2026' =&gt; {'X-Test' =&gt; '123G'});\n$put-&gt;req-&gt;content-&gt;asset(Mojo::Asset::File-&gt;new(path =&gt; $file));\nmy $tx = $ua-&gt;start($put);\n</code></pre>\n"}], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 57111814, "answer_count": 1, "score": 5, "last_activity_date": 1563536526, "creation_date": 1563527812, "question_id": 57109294, "link": "https://stackoverflow.com/questions/57109294/how-to-put-a-file-using-mojouseragent", "title": "How to PUT a file using Mojo::Useragent?", "body": "<p>I am trying to use the PUT method to upload a file using Mojo::UserAgent, the file may be large, instead of passing the file contents as scalar, is there any other way?</p>\n\n<p>This is what I have tried:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::UserAgent;\nuse Mojo::Asset::File;\n\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $file = $ARGV[0];\n\ndie(\"File not found\") unless(-f $file);\n\nmy $a_file = Mojo::Asset::File-&gt;new(path =&gt; $file);\n\nmy $tx = $ua-&gt;put('https://postman-echo.com/put' =&gt; {'X-Test' =&gt; '123G'} =&gt; $a_file);\n\nprint $tx-&gt;success;\n\nprint \"\\n\\n\";\n\nprint $tx-&gt;result-&gt;body;\n\nprint \"\\n\\n\";\n\nprint $tx-&gt;req-&gt;text;\n</code></pre>\n"}, {"tags": ["perl", "voip", "freeswitch"], "owner": {"reputation": 6148, "user_id": 1383889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Xk8P.jpg?s=128&g=1", "display_name": "Yasiru G", "link": "https://stackoverflow.com/users/1383889/yasiru-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565150488, "creation_date": 1563519031, "last_edit_date": 1565150488, "question_id": 57107005, "link": "https://stackoverflow.com/questions/57107005/how-to-detect-hangup-event-in-freeswitch", "title": "How to detect hangup event in Freeswitch?", "body": "<p>I'm new to <code>Freeswitch</code> and looking for help from experts. My problem is below.</p>\n\n<p>I'm trying to do below scenario in <code>Perl</code>:</p>\n\n<p>When I'm getting an incoming call to script (<code>test.pl</code>) I play a file to it and then put inbound session to on-hold. Then I try to make new outbound session from a separate script (<code>test2.pl</code>). If outbound call get answer, then I <code>break</code> inbound session from on-hold and <code>bridge</code> both sessions. The scrips are like below.</p>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nour $session;\n\nif( $session-&gt;ready() ) {\n    $session-&gt;setVariable( 'hangup_after_bridge', 'false' );\n    $session-&gt;setVariable( 'continue_on_fail', 'true' );\n    $session-&gt;answer();\n\n    my $api = new freeswitch::API;\n    $api-&gt;execute('perlrun', '/usr/share/freeswitch/scripts/test2.pl ' . $session-&gt;get_uuid());\n    $session-&gt;setVariable('playback_timeout_sec', '70');\n    $session-&gt;execute(\"playback\", '$${hold_music}');\n\n    if ($session-&gt;getVariable('outbound_answered') == 'true') {\n        my $outbound_uuid = $session-&gt;getVariable('outbound_uuid');\n        my $outbound_session = new freeswitch::Session($outbound_uuid);\n\n        if ($outbound_session-&gt;ready()) {\n            $session-&gt;bridge($outbound_session);\n        } else {\n            # outbound session disconnected.\n        }\n    }  else {\n        # outbound session didn't answer.\n    }\n} else {\n    # Inbound disconneected.\n}\n1;\n</code></pre>\n\n<p><strong>test2.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $api = new freeswitch::API;\nmy $inbound_uuid = $ARGV[0];\nmy $inbound_session = new freeswitch::Session( $inbound_uuid );\n\nmy $originate_str = \"sofia/gateway/outbound/0416661666\";\nmy $outbound_session = new freeswitch::Session( $originate_str );\nmy $hangup_cause_out = $outbound_session-&gt;hangupCause();\n$inbound_session-&gt;setVariable( 'outbound_uuid', $outbound_session-&gt;get_uuid() );\n\nif ( $outbound_session-&gt;ready() ) {\n    if ( $inbound_session-&gt;ready() ) {\n        $inbound_session-&gt;setVariable('outbound_answered', 'true');\n        $outbound_session-&gt;streamFile(\"/usr/share/freeswitch/sounds/en/us/callie/ivr/8000/ivr-please_hold_while_party_contacted.wav\");\n        $inbound_session-&gt;execute('break');\n        while ($inbound_session-&gt;ready()) {\n            sleep(10);\n            # Inbound sessnio ok, continue outbound session.\n        }\n    } else {\n        # Inbound session got disconnected while we trying outbound.\n    }\n} else {\n    # Outbound call failed.\n}\n1;\n</code></pre>\n\n<p><strong>Debian syslog:</strong></p>\n\n<pre><code>Jul 19 13:14:50 XXX systemd[1]: freeswitch.service: Main process exited, code=killed, status=6/ABRT\nJul 19 13:14:50 XXX systemd[1]: freeswitch.service: Unit entered failed state.\nJul 19 13:14:50 XXX systemd[1]: freeswitch.service: Failed with result 'signal'.\nJul 19 13:14:50 XXX systemd[1]: freeswitch.service: Service hold-off time over, scheduling restart.\nJul 19 13:14:50 XXX systemd[1]: Stopped freeswitch.\nJul 19 13:14:50 XXX systemd[1]: Starting freeswitch...\n</code></pre>\n\n<p>The expected scenario work without issues. But my issue is Freeswitch getting restart when inbound session hangup by incoming call party while <code>Freeswitch</code> ringing outbound party. </p>\n\n<p>UPDATE1:\nI think I need to handle inbound session hangup event but kinda lost here. May be I'm doing all wrong.</p>\n\n<p>UPDATE2:\nI been seen this issue in Freeswitch 1.8.7. I tried testing the same code in Freeswitch 1.6.20 and it didn't crash, but gave below error,\n<code>[ERR] freeswitch_perl.cpp:114 session is not initalized</code>\nSo it seems Freeswitch 1.8 mod_perl module not handling it properly.</p>\n\n<p>Looking for suggestions from <code>Freeswitch</code> experts.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1563499763, "post_id": 57104387, "comment_id": 100729586, "body": "<code>==</code> is for numbers, <code>eq</code> for strings. You have to tell Perl which way you want to treat a scalar value as."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1563499910, "post_id": 57104387, "comment_id": 100729604, "body": "Read <a href=\"https://perldoc.pl/perldata#Scalar-values\" rel=\"nofollow noreferrer\">perldoc.pl/perldata#Scalar-values</a>"}], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 11794107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a10cc5a0eb73584c8b29f67147cd10?s=128&d=identicon&r=PG&f=1", "display_name": "Harlan", "link": "https://stackoverflow.com/users/11794107/harlan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1563547622, "post_id": 57104456, "comment_id": 100748425, "body": "Sorry, @zdim is absolutely correct.  I wasn&#39;t trying to say that this was destructive to the variable $name, that it was changed in any way.  I was trying not to tie my sentence up in too many details, even though I couldn&#39;t help myself and used the term &quot;cast&quot; later."}, {"owner": {"reputation": 96, "user_id": 11794107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a10cc5a0eb73584c8b29f67147cd10?s=128&d=identicon&r=PG&f=1", "display_name": "Harlan", "link": "https://stackoverflow.com/users/11794107/harlan"}, "edited": false, "score": 1, "creation_date": 1563547744, "post_id": 57104456, "comment_id": 100748493, "body": "Oh, also, adding since you&#39;re new to Perl, that it&#39;d be much more common to write:     print &quot;Right name!\\n&quot;;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1563562701, "post_id": 57104456, "comment_id": 100755007, "body": "&quot;<i>I wasn&#39;t trying to say that this was destructive to the variable</i>&quot; -- I thought so and commented just so that the phrasing is adjusted to be accurate. This was done (thanks to ikegami) and I&#39;ve removed the comment"}], "tags": [], "owner": {"reputation": 96, "user_id": 11794107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a10cc5a0eb73584c8b29f67147cd10?s=128&d=identicon&r=PG&f=1", "display_name": "Harlan", "link": "https://stackoverflow.com/users/11794107/harlan"}, "is_accepted": false, "score": 6, "last_activity_date": 1563503976, "last_edit_date": 1563503976, "creation_date": 1563499735, "answer_id": 57104456, "question_id": 57104387, "link": "https://stackoverflow.com/questions/57104387/why-comparison-operator-does-not-work-for-strings-in-perl/57104456#57104456", "title": "Why comparison operator == does not work for strings in perl?", "body": "<p>Interpreter realizes (from the == operator) that it's doing a numeric comparison.  The value of $name is converted to a numeric, which gets you a 0.  \"rahul\" is converted to a numeric, which is a 0.  0 == 0, so that's true, and thus \"Right name\" is chosen.</p>\n\n<p>If I compare it against my name, works the same way.</p>\n\n<p>However, if there really is a string with a number in it, like you made either string \"12345\" (specifically with the quotes), Perl will assume you knew what you were doing by requesting the == operator, and will dutifully auto-convert (\"cast\" in programmer-speak) that to numeric 12345.  Then your comparison will fail.</p>\n\n<p>TL/DR: use 'eq' for string comparison!  :-)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 11, "last_activity_date": 1563499778, "creation_date": 1563499778, "answer_id": 57104458, "question_id": 57104387, "link": "https://stackoverflow.com/questions/57104387/why-comparison-operator-does-not-work-for-strings-in-perl/57104458#57104458", "title": "Why comparison operator == does not work for strings in perl?", "body": "<p>You are mistaken. The numerical equality comparison operator works perfectly fine with strings!</p>\n\n<pre><code>$ perl -e'CORE::say \"123\" == \"123.0\" ? \"same\" : \"different\"'\nsame\n\n$ perl -e'CORE::say \"123\" == \"123.1\" ? \"same\" : \"different\"'\ndifferent\n</code></pre>\n\n<p>In your example, you are asking Perl to compare the numerical value of the string <code>kuldeep</code> (zero with a warning) with the numerical value of the string <code>rahul</code> (zero with a warning), and they are indeed equal.</p>\n\n<p>ALWAYS USE <code>use strict; use warnings;</code>!!!</p>\n\n<p>And use <code>eq</code> to compare strings.</p>\n"}], "owner": {"reputation": 21, "user_id": 6309197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e60793fa8ff32b4407921417e3b3eb?s=128&d=identicon&r=PG&f=1", "display_name": "Kaydee7", "link": "https://stackoverflow.com/users/6309197/kaydee7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563503976, "creation_date": 1563499024, "question_id": 57104387, "link": "https://stackoverflow.com/questions/57104387/why-comparison-operator-does-not-work-for-strings-in-perl", "title": "Why comparison operator == does not work for strings in perl?", "body": "<p>I'm new to Perl. I want to understand why does == operator is treating both these strings alike? It works ok if I use eq instead if ==. If name is kuldeep or rahul, it prints 'Right name'.</p>\n\n<pre><code>my $name=\"kuldeep\";\n\nif ($name == \"rahul\")\n{\n  print 'Right name!',\"\\n\";\n}\nelse\n{\n  print 'Wrong name!','\\n';\n}\n</code></pre>\n"}, {"tags": ["perl", "enums", "exporter"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563500191, "post_id": 57104401, "comment_id": 100729655, "body": "Splendid!  This works like a champ.  Why?  Is it because the other way, the assignment wasn&#39;t executed until after <code>use enum::fields</code> had already been run?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1563500341, "post_id": 57104401, "comment_id": 100729681, "body": "Yes, so <code>@EXPORT</code> was empty"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1563499155, "creation_date": 1563499155, "answer_id": 57104401, "question_id": 57104371, "link": "https://stackoverflow.com/questions/57104371/weirdness-exporting-constants-created-with-enumfields-in-perl/57104401#57104401", "title": "Weirdness exporting constants created with enum::fields in perl", "body": "<p>Use statements are executed as soon as they are compiled, so </p>\n\n<pre><code>use enum::fields (@EXPORT);\n</code></pre>\n\n<p>is executed before </p>\n\n<pre><code>our @EXPORT = qw(I2_VAL);\n</code></pre>\n\n<p>This would work:</p>\n\n<pre><code>package X3;\n\nuse strict;\nuse warnings;\n\nmy @enum; BEGIN { @enum = qw( I2_VAL ); }\n\nuse Exporter     qw( import );\nuse enum::fields @enum;\n\nour @EXPORT = @enum;\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57104401, "answer_count": 1, "score": 1, "last_activity_date": 1563499155, "creation_date": 1563498852, "question_id": 57104371, "link": "https://stackoverflow.com/questions/57104371/weirdness-exporting-constants-created-with-enumfields-in-perl", "title": "Weirdness exporting constants created with enum::fields in perl", "body": "<p>I've created two test modules, <code>X.pm</code> and <code>X2.pm</code>.  The <code>X.pm</code> module works.  The <code>X2.pm</code> module doesn't, at least not like I'd expect it to.</p>\n\n<p>X.pm</p>\n\n<pre><code>package X {\n\n    use enum::fields qw(I_VAL);\n    use parent qw(Exporter);\n\n    our @EXPORT = qw(I_VAL);\n}\n</code></pre>\n\n<p>X2.pm</p>\n\n<pre><code>package X2 {\n\n    our @EXPORT = qw(I2_VAL);\n\n    use enum::fields (@EXPORT);\n    use parent qw(Exporter);\n\n}\n</code></pre>\n\n<p>The test program is:</p>\n\n<pre><code>use X;\nuse X2;\n\nprintf(\"I_VAL = %d\\n\", I_VAL);\nprintf(\"I2_VAL = %d\\n\", I2_VAL);\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>bash$ ./tmp/testit\nI_VAL = 0\nUndefined subroutine &amp;X2::I2_VAL called at /home/bennett/tmp/testit line 15.\n</code></pre>\n\n<p>The real project has several dozen <code>enum::fields</code>, and <code>X2.pm</code> is my attempt to keep the enumerations in sync with the exports.</p>\n\n<p>My questions are these:</p>\n\n<ul>\n<li>Why doesn't <code>X2</code> work?  Is it exporting(importing) before\n<code>enum::fields</code> runs?</li>\n<li>What do I do about it?</li>\n</ul>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1563490768, "post_id": 57103546, "comment_id": 100728085, "body": "Your code does not do what you claim it does."}, {"owner": {"reputation": 127, "user_id": 4314038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e95442372b77eb38a30ea9c992cab4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kume8sit", "link": "https://stackoverflow.com/users/4314038/kume8sit"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1563504432, "post_id": 57103546, "comment_id": 100730317, "body": "I was trying to find help not claim  that the code..."}], "answers": [{"tags": [], "owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "is_accepted": true, "score": 1, "last_activity_date": 1563686904, "last_edit_date": 1563686904, "creation_date": 1563685126, "answer_id": 57130450, "question_id": 57103546, "link": "https://stackoverflow.com/questions/57103546/find-merge-log-files-in-a-directory-based-on-rotation/57130450#57130450", "title": "Find &amp; Merge log files in a directory based on rotation", "body": "<p>Sorting the files by the date part of the filename can be done using what is called the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian transform</a>, named after Perl god Randal L. Schwartz who invented it.</p>\n\n<p>Here is a script that sorts the filenames by date and then prints a suggested command to do with them. I assume you'll be able to adjust the rest to match your needs.</p>\n\n<p>Also, to list files in a directory, it is easiest to use builtin function <code>glob()</code>, and probably most efficient too.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $dir=\"/mydirectory\";\nmy @files = glob \"$dir/FILE[AB]*.LOG\";\n\n# Schwartzian transform to sort by the date part of the file name\nmy @sorted_files =\n    # return just the file name:\n    map  { $_-&gt;[0] }\n    # sort by date, then whole file name:\n    sort { $a-&gt;[1] cmp $b-&gt;[1] or $a-&gt;[0] cmp $b-&gt;[0] }\n    # build a pair [filename, date] for each file, with date as \"\" when none found:\n    map  { $_ =~ /(\\d{4}-\\d{2}-\\d{2})/; [$_, $1 || \"\"] }\n    @files;\n\nforeach my $file (@sorted_files) {\n   print \"$file\\n\";\n   my $outfile = $file;\n   # construct your output file name as you need - I'm not sure what you\n   # want to do with timestamps since in your example, FILEA and FILEB had\n   # different timestamps\n   $outfile =~ s/[^\\/]*(\\d{4}-\\d{2}-\\d{2}).*/FILEC.$1.LOG/;\n   print \"cat $file &gt;&gt; $outfile\\n\";\n   # Uncomment this once you're confident it's doing the right thing:\n   #system(\"cat $file &gt;&gt; $outfile\");\n   #unlink($file); # Not reversible... Safer to clean up by hand instead?\n}\n</code></pre>\n\n<p>Important note: I wrote the <code>glob</code> patterns is such a way that it would not match <code>FILEC*, because otherwise the commented-out lines (</code>system<code>and</code>unlink`) could destroy your logs completely if your uncommented them and ran the script twice.</p>\n\n<p>Of course, you can make all this a lot more concise once you're comfortable with the construct:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @files =\n    map  { $_-&gt;[0] }\n    sort { $a-&gt;[1] cmp $b-&gt;[1] or $a-&gt;[0] cmp $b-&gt;[0] }\n    map  { $_ =~ /(\\d{4}-\\d{2}-\\d{2})/; [$_, $1 || \"\"] }\n    glob \"/mydirectory/FILE[AB]*.LOG\";\n\nforeach my $file (@files) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4314038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e95442372b77eb38a30ea9c992cab4ff?s=128&d=identicon&r=PG&f=1", "display_name": "kume8sit", "link": "https://stackoverflow.com/users/4314038/kume8sit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57130450, "answer_count": 1, "score": -1, "last_activity_date": 1563686904, "creation_date": 1563490228, "question_id": 57103546, "link": "https://stackoverflow.com/questions/57103546/find-merge-log-files-in-a-directory-based-on-rotation", "title": "Find &amp; Merge log files in a directory based on rotation", "body": "<p>In a directory of log files are rotated daily by date FILEX*date +%F-%H%M.LOG and placed in a directory...\nI am attempting to de-clutter the directory since I have too many files and merge the file by date.\nEveryday I have at  2 files call it FILE A and B on different nodes. For example today....</p>\n\n<p>Content is as follow (not actual, but for illustration purpose)</p>\n\n<p>FILEA.2019-07-18-1701.LOG</p>\n\n<pre><code>111AAA\n222BBB\n</code></pre>\n\n<p>FILEB.2019-07-18-1703.LOG</p>\n\n<pre><code>333CCC\n444DDD\n</code></pre>\n\n<p>After merging  FILEA<em>date.LOG and FILEB</em>date.LOG are removed/deleted. </p>\n\n<p>Manual way:</p>\n\n<pre><code>cat  fileA fileB &gt; FILEC.date +%F-%H%M.LOG\n</code></pre>\n\n<p>I started writing the following code but stuck on how to proceed since it is returning filenames but I don't know how to pick the them by date and merge.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopendir(DIR, \"/mydirectory/\");\nmy @files = grep(/\\*.*LOG$/,readdir(DIR));\nclosedir(DIR);\nforeach my $file (@files) {\n   print \"$file\\n\";\n}\n</code></pre>\n\n<p>Above only prints the files in the directory.</p>\n\n<p>FILEA.2019-07-18-1701.LOG\nFILEB.2019-07-18-1703.LOG\nmore...from older dates.</p>\n\n<p>the print returns all my logs directory. I planned to place them in an array, sort them by date and merge two... but that where I am stuck with how to proceed with the logic... [ either shell or perl help will do]\nExpected output after combining the two files...</p>\n\n<pre><code>111AAA\n222BBB\n333CCC\n444DDD\n</code></pre>\n"}, {"tags": ["perl", "closures"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563488041, "post_id": 57103198, "comment_id": 100727524, "body": "You are creating an extra level of reference. Just pass <code>$val</code>, <code>$inc</code>, etc as the values, no backslash. <code>sub</code> in an expression already returns a reference."}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1563488296, "post_id": 57103198, "comment_id": 100727578, "body": "@Grinnz, thank you! it works. Please post your note as an answer in order to accept it. Please, contribute to how I can improve the example according to the Perl Best Practices."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1563488646, "post_id": 57103198, "comment_id": 100727660, "body": "Perl Best Practices are just suggestions, and many of those from the book of that name have not aged well. My current suggestions are mostly encompassed in <a href=\"https://metacpan.org/pod/Perl::Critic::Freenode\" rel=\"nofollow noreferrer\">this Perl::Critic policy theme</a> and this example seems fine to me, though returning a hash reference rather than a hash (which gets flattened into a list, then assigned back to a hash) is more common."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563497033, "post_id": 57103198, "comment_id": 100729135, "body": "I like how you changed <code>return %api;</code> to <code>return \\%api;</code>. The former returns a list of keys and value (since one can&#39;t return a hash from a sub), which means the hash must be reconstructed on the outside. That&#39;s a lot of needless work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563497145, "post_id": 57103198, "comment_id": 100729152, "body": "Re &quot;<i>Perl Best Practices are just suggestions, and many of those from the book of that name have not aged well.</i>&quot;, Not quite. The good practices in the book are still good practices. It&#39;s just that the book included some practices that were considered poor even when the book was published."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563561836, "post_id": 57103198, "comment_id": 100754687, "body": "@ikegami The big one is that it recommends <code>return;</code> over <code>return undef;</code> which falls prey to context sensitivity traps. Was that considered a poor practice at the time? (I only really was witness to the aftermath of that.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1563563252, "post_id": 57103198, "comment_id": 100755177, "body": "@Grinnz, For such a specific question, I can only speak for myself, and yes, I have always considered return; in a sub expected to return a scalar to be a bad practice. But that wasn&#39;t an isolated case. When the book came out, we on PerlMonks regularly had to point out on that PBP was one person&#39;s opinion and not the views of the community as a whole."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1563488693, "creation_date": 1563488693, "answer_id": 57103332, "question_id": 57103198, "link": "https://stackoverflow.com/questions/57103198/how-do-i-call-a-sub-returned-by-reference-by-a-perl-closure/57103332#57103332", "title": "How do I call a sub returned by reference by a Perl closure?", "body": "<p>As discussed in <a href=\"https://perldoc.pl/perlref#4.\" rel=\"nofollow noreferrer\">perlref</a>, the <code>sub</code> keyword without a name creates an anonymous subroutine and returns a reference to it. So you don't need to create another level of reference using the backslash; just pass the reference you already have as the value in the hash.</p>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 57103332, "answer_count": 1, "score": 1, "last_activity_date": 1563489763, "creation_date": 1563487632, "last_edit_date": 1563489763, "question_id": 57103198, "link": "https://stackoverflow.com/questions/57103198/how-do-i-call-a-sub-returned-by-reference-by-a-perl-closure", "title": "How do I call a sub returned by reference by a Perl closure?", "body": "<p>I'm trying to make subroutine closure working like an object.\nHowever, I cannot call the returned subs references properly.</p>\n\n<p>I receive <code>Not a CODE reference at .\\closure.pl line 22.</code> error.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub number {\n    my ($value) = @_;\n\n    my $val = sub {   $value };\n    my $inc = sub { ++$value };\n    my $dec = sub { --$value };\n\n    my %api = (\n        'val' =&gt; \\$val,\n        'inc' =&gt; \\$inc,\n        'dec' =&gt; \\$dec,\n    );\n\n    return %api;\n}\n\nmy %numb = number(42);\n$numb{'inc'}-&gt;();\nprint $numb{'val'}-&gt;();\n</code></pre>\n\n<p>How to fix the code?</p>\n\n<p><strong>Code fixed</strong></p>\n\n<p>Yes, of course, an anonymous definition must return a reference. it means that it can be put directly in the <code>%api</code>. Perl doesn't complain and works like a charm :) </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub number {\n    my ($value) = @_;\n\n    my %api = (\n        'val' =&gt; sub {   $value },\n        'inc' =&gt; sub { ++$value },\n        'dec' =&gt; sub { --$value },\n    );\n\n    return \\%api;\n}\n\nmy $m = number(14);\nmy $n = number(41);\n\n$m-&gt;{'dec'}-&gt;();\n$n-&gt;{'inc'}-&gt;();\n\nprint $m-&gt;{'val'}-&gt;() . \"\\n\"; # -&gt; 13\nprint $n-&gt;{'val'}-&gt;() . \"\\n\"; # -&gt; 42\n</code></pre>\n"}, {"tags": ["perl", "expect.pm", "perlnetssh"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1563490651, "post_id": 57102908, "comment_id": 100728063, "body": "Your waitfor patterns look odd. You have a newline character and then a literal newline: are you sure you need both?"}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1563520445, "post_id": 57102908, "comment_id": 100734502, "body": "I tried that also but the output was still the same."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563521389, "post_id": 57103533, "comment_id": 100734939, "body": "I tried doing that but now my next waitfor die is prompting. I tried executing a simple command to check whether any command is executing or not. It is but the output is still what I expected. If you can just check the update of my question."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563535127, "post_id": 57103533, "comment_id": 100741711, "body": "Try not include all the text in the <code>waitfor()</code> call. It still succeeds if only part of the string matches, and then it is less likely that there is something in the string that is slightly different from what the server echos, and then the <code>waitfor</code> will fail. For example: Try: <code>$ssh-&gt;waitfor(&quot;UNIX password: &quot;) or die ...</code>"}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 1, "creation_date": 1563548343, "post_id": 57103533, "comment_id": 100748802, "body": "Thanks now it&#39;s working after removing some of the words."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1563490118, "creation_date": 1563490118, "answer_id": 57103533, "question_id": 57102908, "link": "https://stackoverflow.com/questions/57102908/not-able-to-execute-command-in-remote-machine-using-netsshexpect/57103533#57103533", "title": "Not able to execute command in remote machine Using Net::SSH::Expect", "body": "<p>According to <a href=\"https://metacpan.org/pod/Net::SSH::Expect\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p><strong>void send($string)</strong> - sends <code>$string</code> to the SSH server, returns <strong>nothing</strong><br>\n  Sends the string to the SSH server.</p>\n</blockquote>\n\n<p>So don't check the return value, just remove the <code>or die ..</code> part after the <code>send()</code>:</p>\n\n<pre><code>$ssh-&gt;send(\"passwd\");   # &lt;-- no error code is returned here..\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 57103533, "answer_count": 1, "score": 1, "last_activity_date": 1606886026, "creation_date": 1563485706, "last_edit_date": 1606886026, "question_id": 57102908, "link": "https://stackoverflow.com/questions/57102908/not-able-to-execute-command-in-remote-machine-using-netsshexpect", "title": "Not able to execute command in remote machine Using Net::SSH::Expect", "body": "<p>I wanted to make the remote connection and automate the change password of any user account in that remote machine so I am using Perl Net::SSH:: Expect module. My connection is happening but I'm not able to perform any command on the remote machine. I am new to Perl language so there might be some mistakes in my code. I have tried searching for this but wasn't able to find something related to it.</p>\n\n<p>Initially, I tried using Net:: OpenSSH and Expect module in combination but wasn't able to achieve the use-case.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Net::OpenSSH;\nuse Expect;\n\nuse Net::SSH::Expect;\n\nmy $uName= \"user\";\n\nmy $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; \"IPAddress\",\n    password=&gt; \"userPassword\",\n    user =&gt; $uName,\n    raw_pty =&gt; 1\n);\n\n# logon to the SSH server using those credentials.\nmy $login_output = $ssh-&gt;login();\nif ($login_output !~ /Welcome/) {\n    die \"Login has failed. Login output was $login_output\";\n}\n#Random line display \nprint \"Connected to $uName\\n\";\n\n#This is where I was trying the change password use case\n\n$ssh-&gt;send(\"passwd\") or die \"Cannot execute the passwd command: $!\\n\";\n$ssh-&gt;waitfor(\"Changing password for user.\\n\n(current) UNIX password: \", 3) or die \"prompt 'password' not found after 1 second\";\n$ssh-&gt;send(\"oldPassword\\n\");\n$ssh-&gt;waitfor(\"\\n\nEnter new UNIX password: \" , 2) or die \"prompt 'New password:' not found\";\n$ssh-&gt;send(\"newPassword\");\n$ssh-&gt;waitfor(\"\\n\nRetype new UNIX password: \", 1) or die \"prompt 'Confirm new password:' not found\";\n$ssh-&gt;send(\"newPassword\");\n\n#$ssh-&gt;send(\"\") or die \"Cannot spawn: $!\\n\";\n$ssh-&gt;close();\n</code></pre>\n\n<p>This the output i am getting</p>\n\n<pre><code>Cannot execute the passwd command\n</code></pre>\n\n<h2>New Update</h2>\n\n<p>I tried executing a simple command just to check whether any command is getting executed or not. It is but still, my change password use case using send(passwd) is not.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n#use Net::OpenSSH;\n#use Expect;\n\nuse Net::SSH::Expect;\n\n#\n# You can do SSH authentication with user-password or without it.\n#\nmy $uName= \"admin1\";\n# Making an ssh connection with user-password authentication\n# 1) construct the object\nmy $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; \"192.168.56.101\",\n    password=&gt; \"Passw0rd1\",\n    user =&gt; \"admin1\",\n    raw_pty =&gt; 1\n);\n\n# 2) logon to the SSH server using those credentials.\n# test the login output to make sure we had success\nmy $login_output = $ssh-&gt;login();\nif ($login_output !~ /Welcome/) {\n    die \"Login has failed. Login output was $login_output\";\n}\nprint \"Connected to $uName\\n\";\n</code></pre>\n\n<p>This is the new simple command i am trying to execute   </p>\n\n<pre><code>my $who = $ssh-&gt;exec(\"who\");\nprint ($who);\n</code></pre>\n\n<p>My old use case with die removed from send()</p>\n\n<pre><code>$ssh-&gt;send(\"passwd\");\n$ssh-&gt;waitfor(\"Changing password for $uName.\\n(current) UNIX password: \", 2) or die \"prompt 'password' not found after 2 second\";\n$ssh-&gt;send(\"Passw0rd1\\n\");\n$ssh-&gt;waitfor(\"\\nEnter new UNIX password: \" , 2) or die \"prompt 'New password:' not found\";\n$ssh-&gt;send(\"qwerty123\");\n$ssh-&gt;waitfor(\"\\nRetype new UNIX password: \", 1) or die \"prompt 'Confirm new password:' not found\";\n$ssh-&gt;send(\"qwerty123\");\n\n\n$ssh-&gt;close();\n</code></pre>\n\n<p>Now the output is coming like this</p>\n\n<pre><code>admin3@admin3-VirtualBox:~/Desktop$ perl NetSSHExpect.pl \nConnected to admin1\nadmin1   :0           2019-07-19 11:49 (:0)\nadmin1   pts/1        2019-07-19 12:41 (192.168.56.1)\nadmin1@admin1-VirtualBox:~$ prompt 'password' not found after 2 second at NetSSHExpect.pl line 36.\nadmin3@admin3-VirtualBox:~/Desktop$\n</code></pre>\n"}, {"tags": ["perl", "libxml2"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563485251, "post_id": 57102788, "comment_id": 100726662, "body": "This is basically how any XML generation I&#39;ve done goes. The Mojo::DOM <a href=\"https://metacpan.org/pod/Mojo::DOM#new_tag\" rel=\"nofollow noreferrer\">new_tag</a> method can make it slightly nicer, but usually I end up just using an XML-escaping templater (like Mojo::Template with auto_escape =&gt; 1)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563497246, "post_id": 57102788, "comment_id": 100729168, "body": "Why not create a sub that provides a suitable interface for what you want to do?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1563531404, "post_id": 57102788, "comment_id": 100739947, "body": "You can write <code>$_-&gt;appendText(...)</code> instead of <code>$_-&gt;appendChild($doc-&gt;createTextNode(...))</code>. Another useful method is <code>appendTextChild</code>. Other than that, I&#39;m not sure how you&#39;d expect to simplify the code."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1563549427, "post_id": 57102788, "comment_id": 100749360, "body": "@nwellnhof the thing that is bothering me is not seeing something to just create the document fragment, having to call load_xml and then throw away the document it creates and just keep the root element.  It seems wrong that libxml has a document fragment type but seemingly no direct way to create one, or way to parse an xml fragment and produce just a node owned by an existing document."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1563554263, "post_id": 57102788, "comment_id": 100751631, "body": "libxml2 has <a href=\"http://xmlsoft.org/html/libxml-parser.html#xmlParseBalancedChunkMemory\" rel=\"nofollow noreferrer\"><code>xmlParseBalancedChunkMemory</code></a> which also takes a document. XML::LibXML has <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Parser.pod#parse_balanced_chunk\" rel=\"nofollow noreferrer\"><code>parse_balanced_chunk</code></a> but this doesn&#39;t allow to set the document. AFAIK, you don&#39;t have to call <code>setOwnerDocument</code> anyway but it should be more performant if you do."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1563555965, "post_id": 57102788, "comment_id": 100752337, "body": "@nwellnhof that looks like what I was looking for and not finding.  can you make it an answer?  (I was having weird problems when I didn&#39;t setOwnerDocument)"}], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1563568431, "creation_date": 1563568431, "answer_id": 57119320, "question_id": 57102788, "link": "https://stackoverflow.com/questions/57102788/how-to-create-nodes-to-append-when-using-xmllibxml-to-write-xml/57119320#57119320", "title": "How to create nodes to append when using XML::LibXML to write XML?", "body": "<p>libxml2 has <a href=\"http://xmlsoft.org/html/libxml-parser.html#xmlParseBalancedChunkMemory\" rel=\"nofollow noreferrer\"><code>xmlParseBalancedChunkMemory</code></a> which also takes a document. XML::LibXML has <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Parser.pod#parse_balanced_chunk\" rel=\"nofollow noreferrer\"><code>parse_balanced_chunk</code></a> but this doesn't allow to set the document. I'm not sure whether you have to call <code>setOwnerDocument</code>. When appending the cloned node, the owner document should be set automatically.</p>\n"}], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 57119320, "answer_count": 1, "score": 2, "last_activity_date": 1563568431, "creation_date": 1563484939, "question_id": 57102788, "link": "https://stackoverflow.com/questions/57102788/how-to-create-nodes-to-append-when-using-xmllibxml-to-write-xml", "title": "How to create nodes to append when using XML::LibXML to write XML?", "body": "<p>I am creating an XML document and adding a complicated node to it in a loop, similar to the following example.</p>\n\n<p>The following works, but feels kludgy in how it creates <code>$row_template</code>.  Is there not some more specific way to create a document fragment to reuse from an xml string?</p>\n\n<pre><code>use 5.022;\nuse warnings;\nuse XML::LibXML;\n\nmy $xml = '&lt;?xml version=\"1.0\"?&gt;&lt;RootNode&gt;&lt;Outer1&gt;&lt;Outer2/&gt;&lt;/Outer1&gt;&lt;/RootNode&gt;';\nmy $row_parent_xpath = '//Outer2';\nmy $row_xml = '&lt;DetailNode&gt;&lt;Field1/&gt;&lt;Field2/&gt;&lt;/DetailNode&gt;';\n\n# create the document\nmy $doc = XML::LibXML-&gt;load_xml('string' =&gt; $xml);\n# find where we will be inserting nodes\nmy ($parent) = $doc-&gt;findnodes($row_parent_xpath);\n\n# create a template for the nodes to insert\nmy $row_template = XML::LibXML-&gt;load_xml('string' =&gt; $row_xml)-&gt;documentElement;\n$row_template-&gt;setOwnerDocument($doc);\n\nfor my $row_data ({field1=&gt;'Foo',field2=&gt;'Bar'}, {field1=&gt;'Baz',field2=&gt;'Quux'}) {\n    my $row = $row_template-&gt;cloneNode(1);\n    $parent-&gt;appendChild($row);\n    $_-&gt;appendChild($doc-&gt;createTextNode($row_data-&gt;{field1})) for $row-&gt;findnodes('Field1');\n    $_-&gt;appendChild($doc-&gt;createTextNode($row_data-&gt;{field2})) for $row-&gt;findnodes('Field2');\n}\n\nsay $doc-&gt;toString(1);\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;RootNode&gt;\n  &lt;Outer1&gt;\n    &lt;Outer2&gt;\n      &lt;DetailNode&gt;\n        &lt;Field1&gt;Foo&lt;/Field1&gt;\n        &lt;Field2&gt;Bar&lt;/Field2&gt;\n      &lt;/DetailNode&gt;\n      &lt;DetailNode&gt;\n        &lt;Field1&gt;Baz&lt;/Field1&gt;\n        &lt;Field2&gt;Quux&lt;/Field2&gt;\n      &lt;/DetailNode&gt;\n    &lt;/Outer2&gt;\n  &lt;/Outer1&gt;\n&lt;/RootNode&gt;\n</code></pre>\n"}, {"tags": ["perl", "sendgrid"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484311, "post_id": 57102492, "comment_id": 100726312, "body": "Thanks ! I get what you are saying. Should I then assume I will need to use the send methods several times, one for each recipient? I actually tried to specify two add_content in the same block but it didn&#39;t like it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484398, "post_id": 57102492, "comment_id": 100726346, "body": "@Questionz Yes; since each recipient needs different contents, they need to be sent as separate emails."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484553, "post_id": 57102492, "comment_id": 100726397, "body": "@Questionz I actually missed that SendGrid does templating itself; you could certainly use it for this, though you&#39;ll need to keep in mind the HTML escaping I mentioned, and it does still look like each needs to be sent separately."}, {"owner": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484685, "post_id": 57102492, "comment_id": 100726442, "body": "Interesting, thanks, I really thought the API would be able to handle substitutions from reading their documention. As they say its possible to add a substitution hash within the envelope and thought that was it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484860, "post_id": 57102492, "comment_id": 100726503, "body": "@Questionz If it is possible, I suspect it would by adding multiple envelopes each with their own &#39;substitutions&#39; hash directly in the add_envelope call. Unfortunately I can&#39;t find any documentation for what that hash actually is."}, {"owner": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "edited": false, "score": 0, "creation_date": 1563484899, "post_id": 57102492, "comment_id": 100726522, "body": "Thanks a mil for your help !"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563483256, "creation_date": 1563483256, "answer_id": 57102492, "question_id": 57102330, "link": "https://stackoverflow.com/questions/57102330/how-to-implement-substitutions/57102492#57102492", "title": "How to implement substitutions?", "body": "<p>This is just templating; you have a template, and you want to fill in values. <a href=\"https://metacpan.org/pod/Text::Template\" rel=\"nofollow noreferrer\">Text::Template</a> is a straightforward implementation of this, though since your result is HTML, you want an HTML-aware template engine like <a href=\"https://metacpan.org/pod/Text::Xslate\" rel=\"nofollow noreferrer\">Text::Xslate</a> or <a href=\"https://metacpan.org/pod/Mojo::Template\" rel=\"nofollow noreferrer\">Mojo::Template</a> so you don't have to remember to HTML-escape each value. There is also <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template::Toolkit</a> that is the overall most-used and most configurable templating system. Below is an example using Mojo::Template.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::Template;\n\nmy $mt = Mojo::Template-&gt;new(vars =&gt; 1, auto_escape =&gt; 1);\nmy $template = 'Hello &lt;%= $name %&gt;, how are you?';\nmy $rendered = $mt-&gt;render($template, {name =&gt; 'John'});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "is_accepted": true, "score": 2, "last_activity_date": 1563486402, "creation_date": 1563486402, "answer_id": 57103011, "question_id": 57102330, "link": "https://stackoverflow.com/questions/57102330/how-to-implement-substitutions/57103011#57103011", "title": "How to implement substitutions?", "body": "<p>I had the chance to get quick feedback from the developer, and the solution is the following:</p>\n\n<pre><code>my $result = $sg-&gt;from('noreply@mydomain.com')\n-&gt;subject('This is a subject line')\n-&gt;add_content('text/html', 'Hello -NAME-, how are you?')\n-&gt;add_envelope( to =&gt; [ {email =&gt; 'fred@mydomain.com', name =&gt; 'Fred Smith' }], substitutions =&gt; { '-NAME-' =&gt; 'Fred' } )\n-&gt;add_envelope( to =&gt; [ {email =&gt; 'john@mydomain.com', name =&gt; 'John Smith' }], substitutions =&gt; { '-NAME-' =&gt; 'John' } )\n-&gt;send;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4907879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c328285134c0c9cbc7299f657834ec?s=128&d=identicon&r=PG&f=1", "display_name": "Questionz", "link": "https://stackoverflow.com/users/4907879/questionz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57103011, "answer_count": 2, "score": 1, "last_activity_date": 1563488814, "creation_date": 1563482312, "last_edit_date": 1563488814, "question_id": 57102330, "link": "https://stackoverflow.com/questions/57102330/how-to-implement-substitutions", "title": "How to implement substitutions?", "body": "<p>I am using the Email::SendGrid::V3 Perl library and my goal is to send one e-mail to many recipients by greeting them using their first name. I however cannot figure out how to perform the personalization using their online documentation:</p>\n\n<p><a href=\"https://metacpan.org/pod/Email::SendGrid::V3#$self-%3Eset_section($key,-$value);\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Email::SendGrid::V3#$self-%3Eset_section($key,-$value);</a></p>\n\n<p>I can send a single email to two different persons but I lack information on how to approach the body substitutions.</p>\n\n<pre><code>use Email::SendGrid::V3;\n\nmy $sg = Email::SendGrid::V3-&gt;new(api_key =&gt; 'ABCDE');\n\nmy $result = $sg-&gt;from('noreply@mydomain.com')\n-&gt;subject('This is a subject line')\n-&gt;add_envelope( to =&gt; [ {email =&gt; 'john@mydomain.com', name =&gt; 'John Smith' }] )\n-&gt;set_section('-NAME-', 'John')\n-&gt;add_content('text/html', 'Hello -NAME-, how are you?')\n-&gt;send;\n\nprint $result-&gt;{success} ? \"It worked\" : \"It failed: \" . $result-&gt;{reason};\n</code></pre>\n\n<p>Any hint will be greatly appreciated.</p>\n"}, {"tags": ["perl", "centos7"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1563480127, "post_id": 57100952, "comment_id": 100724685, "body": "<i>&quot;..that i have to call my programs with &quot;perl test.pl&quot; instead of just &quot;test.pl&quot;...&quot;</i> Then the shebang of <code>test.pl</code> contains a wrong path to the <code>perl</code> interpreter I guess?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563527781, "post_id": 57100952, "comment_id": 100738140, "body": "<i>One Problem is, that i have to call my programs with &quot;perl test.pl&quot; instead of just &quot;test.pl&quot;.</i> What happens if you run <code>test.pl</code>? What error messages do you see?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563527874, "post_id": 57100952, "comment_id": 100738187, "body": "How did you install this tool? Did you clone the Github repo? Or did you just download the program? The program needs libraries which are also included in the repo - so you need to have the whole thing."}, {"owner": {"reputation": 1, "user_id": 11804747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J23-vMBYGKE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIGmwxzhl_0Ivs03bNOVnTgoQECw/photo.jpg?sz=128", "display_name": "Hellmood", "link": "https://stackoverflow.com/users/11804747/hellmood"}, "edited": false, "score": 0, "creation_date": 1563567865, "post_id": 57100952, "comment_id": 100756850, "body": "I downloaded the complete zip file and used cpanm for to install the dependencies from the file. The files it&#39;s looking for are there, but when the program loads them with &quot;require&quot;, it can&#39;t find them"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1563570519, "post_id": 57100952, "comment_id": 100757595, "body": "Looks like you have a <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> set up for the root user. You probably installed your modules there (under <code>~root&#47;perl5</code>)."}, {"owner": {"reputation": 1, "user_id": 11804747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J23-vMBYGKE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIGmwxzhl_0Ivs03bNOVnTgoQECw/photo.jpg?sz=128", "display_name": "Hellmood", "link": "https://stackoverflow.com/users/11804747/hellmood"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1563574908, "post_id": 57100952, "comment_id": 100758646, "body": "@melpomene Thanks, that gave me the hint i needed to solve the issue."}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563528802, "post_id": 57107449, "comment_id": 100738671, "body": "You are wrong. Try <code>cat .&#47;cpanfile</code>. And you can check syntax for pl and pm files from module-tools, to detect broken dependencies: <code>perl -c .&#47;bin&#47;otrs.ModuleTools.pl</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1563532387, "post_id": 57107449, "comment_id": 100740383, "body": "Yeah. I see what you mean. I&#39;ve deleted my comment."}, {"owner": {"reputation": 1, "user_id": 11804747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J23-vMBYGKE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIGmwxzhl_0Ivs03bNOVnTgoQECw/photo.jpg?sz=128", "display_name": "Hellmood", "link": "https://stackoverflow.com/users/11804747/hellmood"}, "edited": false, "score": 0, "creation_date": 1563567925, "post_id": 57107449, "comment_id": 100756867, "body": "I installed the dependencies with cpanm. The files it&#39;s looking for are there (local program files), but when the program loads them with &quot;require&quot;, it can&#39;t find them"}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1563631526, "last_edit_date": 1563631526, "creation_date": 1563520918, "answer_id": 57107449, "question_id": 57100952, "link": "https://stackoverflow.com/questions/57100952/perl-program-cant-load-modules-centos-7/57107449#57107449", "title": "Perl program can&#39;t load modules (CentOS 7)", "body": "<p>Install dependencies from cpanfile. If you have cpanm on your server, you can do it this way: </p>\n\n<pre><code>cd ./module-tools\ncpanm -l ./deps --installdeps .\nperl -I ./deps/lib/perl5/ ./bin/otrs.ModuleTools.pl\n</code></pre>\n\n<p>We can force cpanm to install all dependencies into chooses directory with <code>-l</code> flag, and than, we show to interpreter where is all dependencies with <code>-I ./deps/lib/perl5/</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11804747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J23-vMBYGKE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIGmwxzhl_0Ivs03bNOVnTgoQECw/photo.jpg?sz=128", "display_name": "Hellmood", "link": "https://stackoverflow.com/users/11804747/hellmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 805, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563631526, "creation_date": 1563475837, "last_edit_date": 1563574844, "question_id": 57100952, "link": "https://stackoverflow.com/questions/57100952/perl-program-cant-load-modules-centos-7", "title": "Perl program can&#39;t load modules (CentOS 7)", "body": "<p>I installed and used the program module-tools on several machines, but this time i can't get it to work (CentOS 7). One Problem is, that i have to call my programs with \"perl test.pl\" instead of just \"test.pl\". \nThe bigger problem is, that the program doesn't run, it stops with an error.</p>\n\n<p><a href=\"https://github.com/OTRS/module-tools\" rel=\"nofollow noreferrer\">https://github.com/OTRS/module-tools</a></p>\n\n<pre><code>[root@localhost bin]# sudo -u otrs perl otrs.ModuleTools.pl Module::File::Link\nCould not require Console::Command::List:\nAttempt to reload Console/BaseCommand.pm aborted.\nCompilation failed in require at /usr/share/perl5/vendor_perl/parent.pm line 20.\nBEGIN failed--compilation aborted at /opt/module-tools/lib/Console/Command/List.pm line 16.\nCompilation failed in require at /opt/module-tools/lib/System.pm line 60.\n</code></pre>\n\n<p>Anybody any ideas?</p>\n\n<p>Edit: I installed the dependencies with cpanm.\nIt also looks like the program runs further as root. It should not run as root, so it closes with an error for that, but it loads the file it can't run as the other user</p>\n\n<p>Edit2:\nWhen i run \"perl -V\" it get a difference at the end.\nRoot:</p>\n\n<pre><code>Built under linux\n  Compiled at Jan 21 2019 22:09:19\n  %ENV:\n    PERL5LIB=\"/root/perl5/lib/perl5\"\n    PERL_LOCAL_LIB_ROOT=\"/root/perl5\"\n    PERL_MB_OPT=\"--install_base \"/root/perl5\"\"\n    PERL_MM_OPT=\"INSTALL_BASE=/root/perl5\"\n  @INC:\n    /root/perl5/lib/perl5/5.16.3/x86_64-linux-thread-multi\n    /root/perl5/lib/perl5/5.16.3\n    /root/perl5/lib/perl5/x86_64-linux-thread-multi\n    /root/perl5/lib/perl5\n    /usr/local/lib64/perl5\n    /usr/local/share/perl5\n    /usr/lib64/perl5/vendor_perl\n    /usr/share/perl5/vendor_perl\n    /usr/lib64/perl5\n    /usr/share/perl5\n</code></pre>\n\n<p>Other User:</p>\n\n<pre><code>Built under linux\n  Compiled at Jan 21 2019 22:09:19\n  @INC:\n    /usr/local/lib64/perl5\n    /usr/local/share/perl5\n    /usr/lib64/perl5/vendor_perl\n    /usr/share/perl5/vendor_perl\n    /usr/lib64/perl5\n    /usr/share/perl5\n    .\n</code></pre>\n\n<p>Could this have something to do with that? Everything else from the output is identical.</p>\n\n<p>RESOLVED!:\nI installed the whole vm again, and this time i installed cpanm with </p>\n\n<pre><code>sudo yum install \"perl(App::cpanminus)\"\n</code></pre>\n\n<p>I don't remember how i did that before, but the last time i had to give cpanm a few settings and choose at one point \"local::lib\" instead of \"sudo\". I  gues i should have chosen \"sudo\". But it wirks now, thanks</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 2, "creation_date": 1563473127, "post_id": 57100288, "comment_id": 100721792, "body": "The answer starts with <code>sed</code>, the rest left as an exercise to the reader."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1563485903, "creation_date": 1563485903, "answer_id": 57102941, "question_id": 57100288, "link": "https://stackoverflow.com/questions/57100288/convert-all-section-headers-containing-specific-path-pattern-in-markdown-file-to/57102941#57102941", "title": "Convert all section headers containing specific path pattern in Markdown file to different format", "body": "<p>GNU sed, possibly others:</p>\n\n<pre><code>$ sed -r 's!^## lib/.*/([^/.]+)\\.[^/.]+$!## \\u\\1!' test.md\n...\n## FileA\n...\n## scripts/**/fileB.js\n...\n## FileC\n...\n</code></pre>\n\n<p>perl:</p>\n\n<pre><code>$ perl -lpe 's{^## lib/.*/([^/.]+)\\.[^\\.]+$}{## \\u$1}' test.md\n...\n## FileA\n...\n## scripts/**/fileB.js\n...\n## FileC\n...\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 8207842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03ec1cc8757f8a102a9c2ee6f93e453?s=128&d=identicon&r=PG&f=1", "display_name": "dols3m", "link": "https://stackoverflow.com/users/8207842/dols3m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57102941, "answer_count": 1, "score": -3, "last_activity_date": 1563485903, "creation_date": 1563472855, "last_edit_date": 1563475756, "question_id": 57100288, "link": "https://stackoverflow.com/questions/57100288/convert-all-section-headers-containing-specific-path-pattern-in-markdown-file-to", "title": "Convert all section headers containing specific path pattern in Markdown file to different format", "body": "<p>I have a Markdown file like this:</p>\n\n<pre><code>...\n## lib/**/fileA.js\n...\n## scripts/**/fileB.js\n...\n## lib/**/fileC.js\n...\n</code></pre>\n\n<p>I am looking for a one-liner (preferably one command without pipes) that will replace lines that include paths starting with lib with capitalized basename:</p>\n\n<pre><code>...\n## FileA\n...\n## scripts/**/fileB.js\n...\n## FileC\n...\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 765, "user_id": 11611377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bfe36467335f1479bba4b6ac60f69c3?s=128&d=identicon&r=PG&f=1", "display_name": "cdub", "link": "https://stackoverflow.com/users/11611377/cdub"}, "edited": false, "score": 0, "creation_date": 1563469189, "post_id": 57099180, "comment_id": 100720075, "body": "What logic is used to generate the first column in the output (<code>Staphylococcus_aureus&lt;0.8</code>)?"}], "answers": [{"tags": [], "owner": {"reputation": 765, "user_id": 11611377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bfe36467335f1479bba4b6ac60f69c3?s=128&d=identicon&r=PG&f=1", "display_name": "cdub", "link": "https://stackoverflow.com/users/11611377/cdub"}, "is_accepted": false, "score": 2, "last_activity_date": 1563469986, "last_edit_date": 1563469986, "creation_date": 1563469433, "answer_id": 57099507, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column/57099507#57099507", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>To output the sum total columns 2-4, you could use awk:</p>\n\n<pre><code>awk '{ col2+=$2; col3+=$3; col4+=$4 } END { printf \"%d %d %d\\n\", col2, col3, col4 }' file1 &gt; file2\n</code></pre>\n\n<p>Update your post to explain the logic for generating column 1 in the output and we can see how to best incorporate that part into the answer.</p>\n"}, {"tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": false, "score": -1, "last_activity_date": 1563472546, "last_edit_date": 1563472546, "creation_date": 1563472179, "answer_id": 57100124, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column/57100124#57100124", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>Perl solution:</p>\n\n<pre><code>$ perl -ne '@c=split; $k=$c[0] if $.==1; $c1+=$c[1]; $c2+=$c[2]; $c3+=$c[3]; }{ print \"$k $c1 $c2 $c3\\n\"' file1\nStaphylococcus_aureus&lt;0.8 4 2 5\n</code></pre>\n\n<p>The <code>$k</code> key is just grabbed from the first column of the first line (when <code>$.==1</code>)</p>\n\n<p>Otherwise this is the awk solution with the column indices starting at zero</p>\n\n<p>The incrementing variables could be conditionally incremented for lines starting with some part of $k... but as said, it's not clear what you want to do there.</p>\n"}, {"comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1563480936, "post_id": 57100277, "comment_id": 100725002, "body": "thx, right, the intention was <code>index</code>, somehow ended up <code>match</code>"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1563480934, "last_edit_date": 1563480934, "creation_date": 1563472816, "answer_id": 57100277, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column/57100277#57100277", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>for one sum</p>\n\n<pre><code>$ awk 'NR==1          {f1=$1; split($1,ks,\"&lt;\"); k=ks[1]} \n       index($1,k)==1 {f2+=$2; f3+=$3; f4+=$4} \n       END            {print f1,f2,f3,f4}' file\n\nStaphylococcus_aureus&lt;0.8 4 2 5\n</code></pre>\n\n<p>grab the key from first line, add the fields and at the end print the result.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 2055824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1146e79e262ad0b586c439ed040a5fc?s=128&d=identicon&r=PG", "display_name": "Bosz", "link": "https://stackoverflow.com/users/2055824/bosz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563474756, "last_edit_date": 1563474756, "creation_date": 1563473666, "answer_id": 57100472, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column/57100472#57100472", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>Bash solution:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>tac file1 | while read c1 c2 c3 c4; do echo $c1 $((A+=c2)) $((B+=c3)) $((C+=c4)) &gt; file2; done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1563475737, "creation_date": 1563475737, "answer_id": 57100928, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column/57100928#57100928", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>This might work for you (GNU sed &amp; bash):</p>\n\n<pre><code>sed -E ':a;N;/^([^&lt;]+)&lt;(\\S+) (\\S+) (\\S+) (\\S+)\\n\\1\\S+\\2 (\\S+) (\\S+) (\\S+)$/s//printf \"%s&lt;%s %s %s %s\" \\1 \\2 $((\\3+\\6)) $((\\4+\\7)) $((\\5+\\8))/e;$!ta;P;D' file\n</code></pre>\n\n<p>Use pattern matching and back references to accumulate the last 3 fields of each line with a common key.</p>\n\n<p>N.B. The use of the <code>e</code> flag on the substitution command to replace the pattern space by a <code>printf</code> command which when evaluated dynamically updates the accumulated values.</p>\n"}], "owner": {"reputation": 9, "user_id": 11031265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bef5fecf4bad34a9c6af11c89a2080d?s=128&d=identicon&r=PG&f=1", "display_name": "FredL", "link": "https://stackoverflow.com/users/11031265/fredl"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "closed_date": 1563483496, "answer_count": 5, "score": -1, "last_activity_date": 1563480934, "creation_date": 1563468014, "question_id": 57099180, "link": "https://stackoverflow.com/questions/57099180/merge-several-lines-in-a-txt-based-on-the-beginning-of-the-first-column", "closed_reason": "Not suitable for this site", "title": "merge several lines in a txt based on the beginning of the first column", "body": "<p>I have a txt file1 which has four columns:</p>\n\n<pre><code>Staphylococcus_aureus&lt;0.8 1 0 3\nStaphylococcus_aureus_subsp_aureus&lt;0.8 1 2 0\nStaphylococcus_aureus_subsp_aureus_S228&lt;0.8 2 0 2\n</code></pre>\n\n<p>I want generate an output txt file2 looks like:</p>\n\n<pre><code>Staphylococcus_aureus&lt;0.8 4 2 5\n</code></pre>\n\n<p>explanation: the first column has the same beginning \"Staphylococcus_aureus&lt;0.8\" and i want to add the 2nd, 3rd, 4th columns.</p>\n\n<p>I'm thinking awk, sed, perl, or python.</p>\n\n<p>any ideas?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1563462817, "post_id": 57097625, "comment_id": 100716681, "body": "Context: <a href=\"https://stackoverflow.com/q/57067500\">stackoverflow.com/q/57067500</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563462958, "post_id": 57097625, "comment_id": 100716764, "body": "<code>s&#47;$&amp;&#47;$new_string&#47;g</code> : You may need to quote the content of <code>$&amp;</code>, i.e. <code>s&#47;\\Q$&amp;\\E&#47;$new_string&#47;g</code>, see <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> for more information"}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1563464598, "post_id": 57097625, "comment_id": 100717748, "body": "Thanks @H&#229;konH&#230;gland  That works so well. :) wow"}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1563464930, "post_id": 57098153, "comment_id": 100717971, "body": "Indeed, the $new_string is all right. I guess I just got too confused\u2026 Thanks @Harlan for the explanation. <code>regex</code> is such\u2026 though I love it.:)"}, {"owner": {"reputation": 96, "user_id": 11794107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a10cc5a0eb73584c8b29f67147cd10?s=128&d=identicon&r=PG&f=1", "display_name": "Harlan", "link": "https://stackoverflow.com/users/11794107/harlan"}, "reply_to_user": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1563499893, "post_id": 57098153, "comment_id": 100729602, "body": "Agreed; regex is a bear sometimes, but amazingly useful after the learning curve.  And Perl&#39;s implementation of regex is really fantastic."}], "tags": [], "owner": {"reputation": 96, "user_id": 11794107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a10cc5a0eb73584c8b29f67147cd10?s=128&d=identicon&r=PG&f=1", "display_name": "Harlan", "link": "https://stackoverflow.com/users/11794107/harlan"}, "is_accepted": true, "score": 1, "last_activity_date": 1563464245, "creation_date": 1563464245, "answer_id": 57098153, "question_id": 57097625, "link": "https://stackoverflow.com/questions/57097625/unmatched-in-regex-marked-by-here-when-replace-a-word-wrapped-in-half/57098153#57098153", "title": "Unmatched ( in regex; marked by &lt;-- HERE when replace a word wrapped in half ()", "body": "<p>I agree with H\u00e5kon; the final substitution is interpreting the parenthesis that's in this input stream, and not finding a match to it. Can you not just print/emit your $new_string?</p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57098153, "answer_count": 1, "score": 0, "last_activity_date": 1563464245, "creation_date": 1563462458, "question_id": 57097625, "link": "https://stackoverflow.com/questions/57097625/unmatched-in-regex-marked-by-here-when-replace-a-word-wrapped-in-half", "title": "Unmatched ( in regex; marked by &lt;-- HERE when replace a word wrapped in half ()", "body": "<p>This one file contains one line of text:</p>\n\n\n\n<pre><code>&lt;p&gt;detached, (disconnected, unfastened&lt;/p&gt;   \n</code></pre>\n\n<p>I need the three words separated by <code>,</code> to be wrapped in <code>&lt;a&gt;&lt;/a&gt;</code>tags, like this:</p>\n\n\n\n<pre><code>&lt;p&gt;&lt;a href=\"entry://detached\"&gt;detached&lt;/a&gt;, &lt;a href=\"entry://(disconnected\"&gt;(disconnected&lt;/a&gt;, &lt;a href=\"entry://unfastened\"&gt;unfastened&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p>When I run \n</p>\n\n<pre><code>perl -pE'/&lt;p&gt;\\K.*?(?=&lt;\\/p&gt;)/; @words=split(/, /, $&amp;); $new_string=join \", \", map {qq|&lt;a href=\"entry://$_\"&gt;$_&lt;/a&gt;|} @words; $_=~s/$&amp;/$new_string/g;' a.txt\n</code></pre>\n\n<p>It gives the following error:</p>\n\n<blockquote>\n  <p>Unmatched ( in regex; marked by &lt;-- HERE \u2026</p>\n</blockquote>\n\n<p>This one does work though:\n</p>\n\n<pre><code>perl -pE's{&lt;p&gt;\\K.*?(?=&lt;\\/p&gt;)}{join \", \", map {qq|&lt;a href=\"entry://$_\"&gt;$_&lt;/a&gt;|} split(/, /, $&amp;)}eg' a.txt\n</code></pre>\n\n<p>I don't know why, because basically behind them is the same idea. How does the first one not work as expected?</p>\n\n<blockquote>\n  <p>I'm on macOS Catalina with Perl v5.28.1 if this matters.</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1563461046, "post_id": 57097099, "comment_id": 100715609, "body": "I&#39;m not clear what you mean by &quot;define a set of strings&quot;. Do you mean find the capitalized word that is next to <code>&quot;is&quot;</code>? Do you mean find the subject of the sentence? Do you mean find the last noun in the sentence? Do you mean find the first word that is different from all the others in the sentence? In any event, this sounds like a natural language processing task. Please clarify what you&#39;re trying to accomplish, exactly. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1563462514, "creation_date": 1563462514, "answer_id": 57097640, "question_id": 57097099, "link": "https://stackoverflow.com/questions/57097099/how-do-i-find-patterns-from-an-array-of-strings/57097640#57097640", "title": "How do i find patterns from an array of strings", "body": "<pre><code>use 5.010;\nuse Perl6::Junction qw(all);\n\nsub pattern_from_wordset {\n    my (@wordset) = @_;\n    my @transposed;\n    for my $string (@wordset) {\n        my @parts = split / /, $string;\n        while (my ($index, $part) = each @parts) {\n            push $transposed[$index]-&gt;@*, $part;\n        }\n    }\n    my @pattern;\n    for my $words (@transposed) {\n        push @pattern, (all($words-&gt;@*) eq $words-&gt;[0])\n            ? $words-&gt;[0]\n            : '*';\n    }\n    return @pattern;\n}\n\nmy @single = \u2026\nmy @multi = \u2026\n\nsay join ' ', pattern_from_wordset @single;\nsay join ' ', pattern_from_wordset @multi;\n__END__\nHello World my name is *\nThat * is very *\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1722235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/994749ea8e85555733a3353ef804943a?s=128&d=identicon&r=PG", "display_name": "Abiz", "link": "https://stackoverflow.com/users/1722235/abiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57097640, "answer_count": 1, "score": 0, "last_activity_date": 1571823088, "creation_date": 1563460673, "last_edit_date": 1571823088, "question_id": 57097099, "link": "https://stackoverflow.com/questions/57097099/how-do-i-find-patterns-from-an-array-of-strings", "title": "How do i find patterns from an array of strings", "body": "<p>How do i find a pattern that can define a set of strings?\nFor example if I have these strings</p>\n\n<pre><code>my @single = (\n  \"Hello World my name is Alice\",\n  \"Hello World my name is Bob\",\n  \"Hello World my name is Charlie\"\n);\n\nmy @multi = (\n  \"That Building is very small\",\n  \"That Ladder is very tall\"\n);\n</code></pre>\n\n<p>What i currently have tried is to separate the sentences into groups with the exact amount of words. Then build a tree where the nodes are the words, if a node has many branches they will be replaced by a *. But this only works if the * is at the end (@single) but it won't work when the * is not at the end (@multi)</p>\n\n<p>Basically What I want is to output a pattern where the input are an array of strings. How can i generate these patterns below given the strings above?</p>\n\n<pre><code>my $single_pattern = \"Hello World my name is *\"\nmy $multi_pattern = \"That * is very *\"\n</code></pre>\n"}, {"tags": ["javascript", "html", "perl"], "comments": [{"owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563479046, "post_id": 57095501, "comment_id": 100724256, "body": "Here is the full code"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563457464, "post_id": 57095801, "comment_id": 100713232, "body": "Hi merlintintin thank you for this link. How would I store the value to a file? I wouldn&#39;t want to make a DB for only handling check/unchecked checkboxes."}], "tags": [], "owner": {"reputation": 23, "user_id": 3202571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b763ac89efdd2ce200f5957baa1793?s=128&d=identicon&r=PG&f=1", "display_name": "merlintintin", "link": "https://stackoverflow.com/users/3202571/merlintintin"}, "is_accepted": false, "score": -1, "last_activity_date": 1563456883, "creation_date": 1563456883, "answer_id": 57095801, "question_id": 57095501, "link": "https://stackoverflow.com/questions/57095501/how-to-keep-a-checkbox-checked-after-refresh-so-both-users-can-see-it/57095801#57095801", "title": "how to Keep a checkbox checked after refresh so both users can see it", "body": "<p>Once the checkbox is checked you have to post his value and store the value on the server (on a file or in a database). </p>\n\n<p>-> <a href=\"https://stackoverflow.com/questions/28217425/html-checkbox-automatically-send-post\">HTML Checkbox automatically send POST</a></p>\n\n<p>When the page is loaded you have to read your storage and set the checkbox value.</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563484166, "post_id": 57096712, "comment_id": 100726253, "body": "Hi Daxim so I need to install plackup? Sorry I am still new to programming."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563518976, "post_id": 57096712, "comment_id": 100733839, "body": "Yes. When you install Plack::Request, you get <code>plackup</code> automatically because they are both part of the <a href=\"https://metacpan.org/release/Plack\" rel=\"nofollow noreferrer\">same dist</a>. \u2013\u2013 You changed the code after my answer. It looks like your Perl app runs under CGI. Plack apps can run under CGI, just <a href=\"http://p3rl.org/Plack::Handler::CGI\" rel=\"nofollow noreferrer\">add a shebang as first line</a>."}, {"owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563540844, "post_id": 57096712, "comment_id": 100744631, "body": "Hi Daxim, would you happen to know another way? I can&#39;t install Plack on that server that holds this application."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "edited": false, "score": 0, "creation_date": 1563551579, "post_id": 57096712, "comment_id": 100750402, "body": "Well, you wanted to learn how to use a file to store and retrieve the checkbox state. Learn that from the example above and ignore the rest that you cannot use. \u2013\u2013 <a href=\"https://stackoverflow.com/questions/ask\">Open a new question</a> if you need further help integrating into your own codebase."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1563459547, "creation_date": 1563459547, "answer_id": 57096712, "question_id": 57095501, "link": "https://stackoverflow.com/questions/57095501/how-to-keep-a-checkbox-checked-after-refresh-so-both-users-can-see-it/57096712#57096712", "title": "how to Keep a checkbox checked after refresh so both users can see it", "body": "<p>Run with <a href=\"http://p3rl.org/plackup\" rel=\"nofollow noreferrer\">plackup</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie qw(:all);\nuse Plack::Request qw();\nuse HTTP::Status qw(HTTP_OK HTTP_METHOD_NOT_ALLOWED);\n\nmy $file = 'global-checkbox-status';\nmy $app = sub {\n    my ($env) = @_;\n    my $req = Plack::Request-&gt;new($env);\n    if ('GET' eq $req-&gt;method) {\n        my $status = eval {\n            open my $fh, '&lt;', $file;\n            !!$fh-&gt;getline\n        } ? 'checked=\"checked\"' : '';\n        my $html = &lt;&lt;~\"HTML\";\n        &lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n            &lt;body&gt;\n                &lt;form method=\"POST\"&gt;\n                    &lt;label for=\"global_checkbox\"&gt;Checkbox with global status:&lt;/label&gt;\n                    &lt;input type=\"checkbox\" id=\"global_checkbox\" name=\"global_checkbox\" $status /&gt;\n                    &lt;input type=\"submit\" /&gt;\n                &lt;/form&gt;\n            &lt;/body&gt;\n        &lt;/html&gt;\n        HTML\n        return $req-&gt;new_response(\n            HTTP_OK, ['Content-Type' =&gt; 'application/xhtml+xml'], [$html]\n        )-&gt;finalize;\n    } elsif ('POST' eq $req-&gt;method) {\n        {\n            open my $fh, '&gt;', $file;\n            $fh-&gt;print(!!$req-&gt;parameters-&gt;get('global_checkbox'));\n        }\n        return $req-&gt;new_response(\n            HTTP_OK, ['Content-Type' =&gt; 'text/plain'], ['done']\n        )-&gt;finalize;\n    } else {\n        return $req-&gt;new_response(HTTP_METHOD_NOT_ALLOWED)-&gt;finalize;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 10100529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e832048030d543dbdd934c78045967?s=128&d=identicon&r=PG&f=1", "display_name": "Dc5nipe", "link": "https://stackoverflow.com/users/10100529/dc5nipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563479155, "creation_date": 1563456047, "last_edit_date": 1563479155, "question_id": 57095501, "link": "https://stackoverflow.com/questions/57095501/how-to-keep-a-checkbox-checked-after-refresh-so-both-users-can-see-it", "title": "how to Keep a checkbox checked after refresh so both users can see it", "body": "<p>I'm not sure if this is possible but how can I get a checkbox to stay checked even after a page refreshed. If user 1 checks a box and closes the web browser is it possible for user 2 to see the checkbox checked? I'm trying to get that accomplished on my current HTML page. I have looked up local storage but seems like it only stores that users actions locally and only that user can see what was done. Thank you in advance!</p>\n\n<pre><code>    print \"             \n&lt;div id='wrapper'&gt;\n        &lt;nav class='navbar navbar-inverse navbar-fixed-top' role='navigation'&gt;\n            &lt;div class='navbar-header'&gt;\n                &lt;button type='button' class='navbar-toggle' data-toggle='collapse' data-target=''.navbar-ex1-collapse'&gt;\n                    &lt;span class='sr-only'&gt;Toggle navigation&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                    &lt;span class='icon-bar'&gt;&lt;/span&gt;\n                &lt;/button&gt;\n                &lt;a class='logo' href='#'&gt;\n                    &lt;img src='images/ti-logo.png' alt='CoolAdmin' /&gt;\n                &lt;/a&gt;\n                &lt;/div&gt;\n            &lt;div class='collapse navbar-collapse navbar-ex1-collapse'&gt;\n                &lt;ul id='active' class='nav navbar-nav side-nav'&gt;\n\n                    &lt;li&gt;&lt;a href='CriticalToolsMet.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; METROLOGY&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsCMPIMP1.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; CMP/IMP&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsDIFFWET.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; DIFF/WET&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsPHOTO.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; PHOTO&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsPLASMA.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; PLASMA&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href='CriticalToolsTHINFILM.html'&gt;&lt;i class='fa fa-globe'&gt;&lt;/i&gt; THINFILM&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n                &lt;ul class='nav navbar-nav navbar-right navbar-user'&gt;\n                    &lt;li class='divider-vertical'&gt;&lt;/li&gt;\n                    &lt;li&gt;\n                        &lt;form class='navbar-search'&gt;\n                            &lt;input type='text' placeholder='Search' class='form-control'&gt;\n                        &lt;/form&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/nav&gt;\n        &lt;div id='page-wrapper'&gt;\n            &lt;div class='row'&gt;\n                &lt;div class='col-lg-12'&gt;\n                    &lt;h1&gt;Critical Dashboard &lt;small&gt;PLASMA&lt;/small&gt;&lt;/h1&gt;\n\n                &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;div class='row'&gt;\n                &lt;div class='col-lg-12'&gt;\n                    &lt;div class='panel panel-primary'&gt;\n                        &lt;div class='panel-heading'&gt;\n                            &lt;h3 class='panel-title'&gt;&lt;i class='fa fa-bar-chart-o'&gt;&lt;/i&gt; Fab Dashboard - DMOS5 &lt;/h3&gt;\n                        &lt;/div&gt;\n                        &lt;table class='table'&gt;\n                            &lt;thead&gt;\n\n                            &lt;tr&gt;\n                                    &lt;th&gt;ZUM_TOOL_GROUP&lt;/th&gt;\n                                    &lt;th&gt;MISTI&lt;/th&gt;\n                                    &lt;th&gt;STATE&lt;/th&gt;\n                                    &lt;th&gt;HRS&lt;/th&gt;\n\n                                &lt;/tr&gt;\n                            &lt;/thead&gt;\n                    &lt;/div&gt;\";\n\n$sqlstr=\"Select \nCASE WHEN g.entity like 'ET328%' then 'CTVIA_YTR'                   \nWHEN g.entity like 'ET328-A%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET328-B%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET329-A%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET329-B%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET330-A%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET330-B%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET331-A%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET331-B%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET332-A%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET332-B%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET333-A%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET333-B%' then 'VIA_ET_LIT' \nWHEN g.entity like 'ET334%' then 'CTVIA_YTR'                    \nWHEN g.entity like 'ET334-A%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET334-B%' then 'CTVIA_YTR'\nWHEN g.entity like 'ET335%' then 'CTVIA_YTR'                    \nWHEN g.entity like 'ET335-A%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET335-B%' then 'CTVIAETCHS'                 \nWHEN g.entity like 'ET336-A%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET336-B%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET337-A%' then 'VIA_ET_LIT'                 \nWHEN g.entity like 'ET337-B%' then 'VIA_ET_LIT' \nWHEN g.entity like 'ET338%' then 'CTVIA_YTR'                    \nWHEN g.entity like 'ET338-A%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET338-B%' then 'CTVIA_YTR'  \nWHEN g.entity like 'ET339%' then 'CTVIA_YTR'                    \nWHEN g.entity like 'ET339-A%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET339-B%' then 'CTVIA_YTR'                  \nWHEN g.entity like 'ET620%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET621%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET622%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET623%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET624%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET625%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET626%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET627%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET628%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET629%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET630%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET631%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ET632%' then 'MTL_ET_SOU'                   \nWHEN g.entity like 'ETA32%' then 'MTL_ET_TOP'                   \nWHEN g.entity like 'ETA33%' then 'MTL_ET_TOP'                   \nWHEN g.entity like 'ETA34%' then 'MTL_ET_TOP'                   \nWHEN g.entity like 'ETA41%' then 'SICR_ETCH'                    \n\n         ELSE 'NONE'\n       end as ZUM_TOOL_GROUP,\n       g.entity as MISTI,\n       t.cur_state      as STATE,\n       ROUND(((SYSDATE-t.cur_state_dttm)*24),2) AS HRS\n\nFrom Entity_Grp_Lst g\nleft outer join trk_id_def t\non g.facility = t.facility\nand g.grp_type = t.grp_type\nand g.entity=t.entity\nand g.grp_type = '720'\nWHERE t.cur_state NOT IN ('PROD','NM','TERM','NULL','IDLE', 'YER', 'I05', 'I07', 'TFKT', 'EMOD', 'DVLP', 'MFGM', 'PENG', 'EENG')\nand Entity_Grp_type = '041'\nand g.ENTITY_GRP in ('PLASMA')\nand (g.entity like 'ET328%' or                  \ng.entity like 'ET328-A%' or                     \ng.entity like 'ET328-B%' or                     \ng.entity like 'ET329-A%' or                     \ng.entity like 'ET329-B%' or                     \ng.entity like 'ET330-A%' or                     \ng.entity like 'ET330-B%' or                     \ng.entity like 'ET331-A%' or                     \ng.entity like 'ET331-B%' or                     \ng.entity like 'ET332-A%' or                     \ng.entity like 'ET332-B%' or                     \ng.entity like 'ET333-A%' or                     \ng.entity like 'ET333-B%' or     \ng.entity like 'ET334%' or                   \ng.entity like 'ET334-A%' or                     \ng.entity like 'ET334-B%' or \ng.entity like 'ET335%' or                   \ng.entity like 'ET335-A%' or                     \ng.entity like 'ET335-B%' or                     \ng.entity like 'ET336-A%' or                     \ng.entity like 'ET336-B%' or                     \ng.entity like 'ET337-A%' or                     \ng.entity like 'ET337-B%' or     \ng.entity like 'ET338%' or                   \ng.entity like 'ET338-A%' or                     \ng.entity like 'ET338-B%' or     \ng.entity like 'ET339%' or                   \ng.entity like 'ET339-A%' or                     \ng.entity like 'ET339-B%' or                     \ng.entity like 'ET620%' or                   \ng.entity like 'ET621%' or                   \ng.entity like 'ET622%' or                   \ng.entity like 'ET623%' or                   \ng.entity like 'ET624%' or                   \ng.entity like 'ET625%' or                   \ng.entity like 'ET626%' or                   \ng.entity like 'ET627%' or                   \ng.entity like 'ET628%' or                   \ng.entity like 'ET629%' or                   \ng.entity like 'ET630%' or                   \ng.entity like 'ET631%' or                   \ng.entity like 'ET632%' or                   \ng.entity like 'ETA32%' or                   \ng.entity like 'ETA33%' or                   \ng.entity like 'ETA34%' or                   \ng.entity like 'ETA41%' )\n\nAND ROUND(((SYSDATE-t.cur_state_dttm)*24),2) &gt; 48  \norder by ZUM_TOOL_GROUP ASC\n\n\";\n$sth = $dbh-&gt;prepare($sqlstr);\n$sth-&gt;execute();\n$sth-&gt;bind_columns(undef, \\$ZUM_TOOL_GROUP, \\$MISTI, \\$STATE, \\$HRS);\nwhile($sth-&gt;fetch()) {\n\n   print \"\n\n                            &lt;tbody&gt;\n                                &lt;tr class='row100 body'&gt;\n                                    &lt;td class='cell100 column1'&gt; &lt;input type='checkbox'/&gt;$ZUM_TOOL_GROUP&lt;/td&gt;\n                                    &lt;td class='cell100 column2'&gt;&lt;FORM ACTION='http://d5lxgenwebapp01z.dal.make.xxx.com/get_de1_de2_misti_comments.pl' METHOD='POST' target='_blank' NAME='userInput2'&gt;\n        &lt;INPUT TYPE='hidden' NAME='eq' MAXLENGTH='8' VALUE='$MISTI'&gt;\n              &lt;INPUT TYPE='hidden' NAME='pages' SIZE='3' MAXLENGTH='2' VALUE='50'&gt;\n        &lt;INPUT TYPE='submit' NAME='submit' VALUE='$MISTI'&gt;&lt;/form&gt;&lt;/td&gt;\n                                    &lt;td class='cell100 column3 $STATE'&gt;$STATE&lt;/td&gt;\n                                    &lt;td class='cell100 column4'&gt;$HRS&lt;/td&gt;\n\n                                &lt;/tr&gt;\n\n   &lt;/tr&gt;\";\n}\n\nprint \"&lt;/tbody&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                    &lt;p &gt;Email: &lt;a href='mailto:r-medina@xx.com?subject=CRITICAL TOOLS DASHBOARD WEBPAGE'&gt;R-\n                                M&lt;/a&gt;&lt;/p&gt;\n                &lt;/div&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\";\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n\nprint \"\n\n\n&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n"}, {"tags": ["xml", "file", "perl"], "comments": [{"owner": {"reputation": 2449, "user_id": 574351, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66fbd45b5b851874e01def08c8491610?s=128&d=identicon&r=PG", "display_name": "Nicola Ambrosetti", "link": "https://stackoverflow.com/users/574351/nicola-ambrosetti"}, "edited": false, "score": 1, "creation_date": 1563456352, "post_id": 57095444, "comment_id": 100712495, "body": "What is the actual question you are asking: how to remove the &quot;-&quot; or how to parse XML in perl? Try to limit to one question per post."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1563456433, "post_id": 57095444, "comment_id": 100712562, "body": "It is recommended that you do not use <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a>, please consider using e.g. <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> instead. Please explain more clearly what are the purposes of the <code>-</code> signs in <code>finesse.txt</code>?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563456839, "post_id": 57095444, "comment_id": 100712837, "body": "Why is the expected output <code>C.Person : Active</code>? Also there are no <code>READY</code> strings in the file, what does that mean?"}, {"owner": {"reputation": 3, "user_id": 11802991, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UriqW44_X70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reByJzwxopkMxteNsCwRLBKDOlMgw/photo.jpg?sz=128", "display_name": "rene verkerke", "link": "https://stackoverflow.com/users/11802991/rene-verkerke"}, "edited": false, "score": 0, "creation_date": 1563459421, "post_id": 57095444, "comment_id": 100714587, "body": "the - signs in the finesse.txt are produced by a webpage, and I can not change that output, so I have to deal with it.  you are right, READY should have been ACTIVE"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1563460041, "post_id": 57095444, "comment_id": 100714970, "body": "I recognise this as copy/paste from Firefox default style for XML. Just <b>save</b> the browser document, then you don&#39;t have +/- collapse markers in it."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1563499409, "creation_date": 1563499409, "answer_id": 57104432, "question_id": 57095444, "link": "https://stackoverflow.com/questions/57095444/i-want-to-read-a-xml-file-but-it-contains-a-before-the/57104432#57104432", "title": "i want to read a xml file, but it contains a &#39;-&#39; before the &lt;", "body": "<p>That's not a valid XML file. You'll need to fix it. Fortunately, this can be done quite easily.</p>\n\n<pre><code>$xml =~ s/^[\\- ] //mg;\n</code></pre>\n\n<p>By the way, you are using a module whose own documentation recommends against using it. Despite its name, XML::Simple is <a href=\"https://stackoverflow.com/q/33267765/589924\">the most complicated XML parser to use</a>. Please use something else such as XML::LibXML.</p>\n"}], "owner": {"reputation": 3, "user_id": 11802991, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UriqW44_X70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reByJzwxopkMxteNsCwRLBKDOlMgw/photo.jpg?sz=128", "display_name": "rene verkerke", "link": "https://stackoverflow.com/users/11802991/rene-verkerke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57104432, "answer_count": 1, "score": -1, "last_activity_date": 1563528627, "creation_date": 1563455857, "last_edit_date": 1563528627, "question_id": 57095444, "link": "https://stackoverflow.com/questions/57095444/i-want-to-read-a-xml-file-but-it-contains-a-before-the", "title": "i want to read a xml file, but it contains a &#39;-&#39; before the &lt;", "body": "<p>remove the - so it can be read as xml</p>\n\n<p>Solution:</p>\n\n<pre><code># read XML file\nmy $filename = 'Finesse.txt';\nopen $FILE, '&lt;', $filename or die \"Can't open file $!\";\nmy $document = do { local $/; &lt;$FILE&gt; };\n$document =~ s/^[\\- ] //mg; \n\nmy $dom = XML::LibXML-&gt;load_xml(string =&gt; $document);\n\nsay \"Users in READY mode:\";\nsay \" \";\n$teller = 0;\n\nforeach my $title ($dom-&gt;findnodes('Team/users/User')) {\n$status = $title-&gt;findvalue('./state');\nif ($status eq \"READY\") {\n    say 'Naam  : ', $title-&gt;findvalue('./firstName');\n    $teller++;\n    }\n}\nsay \"Total = \", $teller;\n</code></pre>\n\n<p>the below file is created from the output of a website</p>\n\n<p>the finesse.txt</p>\n\n<pre><code>- &lt;Team&gt;\n  &lt;id&gt;8&lt;/id&gt; \n  &lt;name&gt;OurSupport&lt;/name&gt; \n  &lt;uri&gt;/finesse/api/Team/8&lt;/uri&gt; \n- &lt;users&gt;\n- &lt;User&gt;\n  &lt;dialogs&gt;/finesse/api/User/C.person/Dialogs&lt;/dialogs&gt; \n  &lt;extension /&gt; \n  &lt;firstName&gt;Caz&lt;/firstName&gt; \n  &lt;lastName&gt;Person&lt;/lastName&gt; \n  &lt;loginId&gt;C.Person&lt;/loginId&gt; \n  &lt;pendingState /&gt; \n  &lt;state&gt;ACTIVE&lt;/state&gt; \n  &lt;stateChangeTime&gt;2019-07-15T19:54:40.846Z&lt;/stateChangeTime&gt; \n  &lt;uri&gt;/finesse/api/User/C.Person&lt;/uri&gt; \n  &lt;/User&gt;\n  &lt;/users&gt;\n  &lt;/Team&gt;\n</code></pre>\n\n<p>thanks for giving hints for the solution.</p>\n"}, {"tags": ["perl", "getopt"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1563449035, "post_id": 57093074, "comment_id": 100708162, "body": "See also <a href=\"https://stackoverflow.com/q/37453445/2173773\">How to pass both mandatory and optional command line arguments to perl script?</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1563460603, "post_id": 57093074, "comment_id": 100715304, "body": "Getopt::Long does not support mandatory options. You must check if it was changed from the value it started with, or you can use a custom subroutine to detect if an option was set."}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": true, "score": 1, "last_activity_date": 1563560004, "last_edit_date": 1563560004, "creation_date": 1563521623, "answer_id": 57107638, "question_id": 57093074, "link": "https://stackoverflow.com/questions/57093074/script-does-not-die-if-there-are-incorrect-arguments/57107638#57107638", "title": "Script does not die if there are incorrect arguments", "body": "<p>Your script will die only this way:</p>\n\n<p><code>perl ./foo.pl --src_xml=</code></p>\n\n<p>Check arguments with custom subroutine?</p>\n\n<pre><code>GetOptions(\n    'dec-to-base35=i' =&gt; \\&amp;dec_to_base35,\n    'base35-to-dec=s' =&gt; \\&amp;base35_to_dec,\n);\n\nsub dec_to_base35 ( $opt_name, $decimal_value ) {\n...\n</code></pre>\n\n<p>Complete example <a href=\"https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-002/maxim-kolodyazhny/perl5/ch-2.pl\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>BTW, you can join <a href=\"https://perlweeklychallenge.org/\" rel=\"nofollow noreferrer\">\"Perl weekly challenge\"</a>, this may help to learn something new</p>\n"}], "owner": {"reputation": 117, "user_id": 8065797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccf0cdde904fbc7795b54d48d0303c11?s=128&d=identicon&r=PG&f=1", "display_name": "JanFi86", "link": "https://stackoverflow.com/users/8065797/janfi86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57107638, "answer_count": 1, "score": 0, "last_activity_date": 1563560004, "creation_date": 1563447942, "last_edit_date": 1563448025, "question_id": 57093074, "link": "https://stackoverflow.com/questions/57093074/script-does-not-die-if-there-are-incorrect-arguments", "title": "Script does not die if there are incorrect arguments", "body": "<p>I'm quite new to the Perl programming. I want to use GetOptions to parse input arguments for my script. I have simple problem - I want script to exit with usage message if there's mess in arguments or arguments are missing values (for mandatory arguments). \nsrc_xml is mandatory argument but if I run the script not providing value for this argument, I get an error message about usage of uninitialized value $src_xml in -e at tenant_tenant.pl. What am I doing wrong? Or do I have to check every variable if its defined?</p>\n\n<pre><code>my $dev;\nmy $src_xml;\nmy $tgt_syscd = 'L86'; \nmy $tgt_path = '/tmp/test/exports'; \nmy $help;\n\nGetOptions('src_xml=s' =&gt; \\$src_xml,\n        'tgt_syscd=s' =&gt; \\$tgt_syscd,\n        'tgt_path=s' =&gt; \\$tgt_path,\n        'dev' =&gt; \\$dev,\n        'h|help' =&gt; \\$help\n) or die \"Usage: perl $0 --src_xml NAME --tgt_syscd NAME  --tgt_path NAME \n\\n\";\n\n#checking for help\nif ( defined $help ) {\n    die $help_message;\n}\n</code></pre>\n"}, {"tags": ["perl", "expect.pm"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1563437835, "post_id": 57089644, "comment_id": 100702078, "body": "Why are you using <code>\\r</code> instead of <code>\\n</code>?"}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1563437967, "post_id": 57089644, "comment_id": 100702149, "body": "I tried using \\n also for the new line but I am getting the same output"}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563441544, "post_id": 57089644, "comment_id": 100704074, "body": "Okay I have: Ubuntu 18.04, Expect version 1.35, perl version 5.26.1"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563444180, "post_id": 57089644, "comment_id": 100705613, "body": "@luffy008 Actually, only the first <code>expect()</code> did not time out (though the output is not echoed twice as for you). I will have a closer look to see what can be the problem"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563480108, "post_id": 57092619, "comment_id": 100724677, "body": "Thanks. But still, the output is the same as earlier even after trying your code."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563535358, "post_id": 57092619, "comment_id": 100741818, "body": "So it is still echoing twice? What terminal emulator are you using? Maybe you have to turn off echo?"}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563544300, "post_id": 57092619, "comment_id": 100746574, "body": "I&#39;m running it on a Ubuntu VM terminal only. And thanks for your code. After adding a new line character &#39;\\n&#39; after &#39;&#39;What is your name &quot; like  <code>$exp-&gt;expect (1, &quot;What is your name\\n&quot;);</code> it&#39;s working fine. But still, I&#39;m not able to understand the flow of the program like why we are sending input(for fine and 21) before expecting a string.Shouldn&#39;t we send it like after expecting some expected string ."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563544608, "post_id": 57092619, "comment_id": 100746755, "body": "<i>&quot;...why we are sending input(for fine and 21) before expecting a string..&quot;</i> I am not sure I understand the question, but we need to send input, since the program is waiting for input. If we did not send anything, the program will never end."}, {"owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563549479, "post_id": 57092619, "comment_id": 100749394, "body": "What I was trying to ask is that when my program starts, we first EXPECT the string <code>What is your name</code>, then only we SEND it the string <code>Alen</code>.Then my main program prompts <code>How are you</code> which we didn&#39;t EXPECT in our expect code. We first provided the string <code>Fine</code>, then we are EXPECTING the string <code>How are you Fine</code>(same with <code>How old are you 21</code>). Can&#39;t we first EXPECT <code>How are you</code> then SEND it the string <code>Fine</code>.I don&#39;t know if my question made any sense or not"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "edited": false, "score": 0, "creation_date": 1563550422, "post_id": 57092619, "comment_id": 100749873, "body": "Yes that makes sense, and seems to be a more appropriate approach. So you can try with: <code>$exp-&gt;expect (1, &quot;Alen&quot;); $exp-&gt;(1, &quot;How are you&quot;);</code> and then do a <code>send()</code>. Please try and see if that works."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1563446283, "creation_date": 1563446283, "answer_id": 57092619, "question_id": 57089644, "link": "https://stackoverflow.com/questions/57089644/perl-expect-module-not-able-to-understand/57092619#57092619", "title": "Perl expect module not able to understand", "body": "<p>The following works for me (Ubuntu 19.04, Expect version 1.35, perl version 5.28.1):</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Expect;\n\nmy $cmd='perl';\nmy @param=qw(Welcome.pl);\nmy $exp = Expect-&gt;new();\n$exp-&gt;spawn($cmd, @param) or die \"Cannot spawn $cmd: $!\\n\";\n\n$exp-&gt;expect (1, \"What is your name \");\n$exp-&gt;send(\"Alen\\n\");\n$exp-&gt;expect (1, \"Alen\");\n$exp-&gt;send(\"Fine\\n\");\n$exp-&gt;expect (1, \"\\nHow are you Fine\");\n$exp-&gt;send(\"21\\n\");\n$exp-&gt;expect (1, \"\\nHow old are you 21\");\n$exp-&gt;soft_close();\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57092619, "answer_count": 1, "score": 0, "last_activity_date": 1586916331, "creation_date": 1563436461, "last_edit_date": 1586916331, "question_id": 57089644, "link": "https://stackoverflow.com/questions/57089644/perl-expect-module-not-able-to-understand", "title": "Perl expect module not able to understand", "body": "<p>I am new to Perl. I am using Perl Expect module to automate a simple prog but the output is mismatched.\nThis is my Perl code which I wanted to be automated</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\nuse Path::Tiny qw(path);\nuse IO::Prompter;\n\n\nmy $username= prompt \"What is your name\";\nmy $hry= prompt \"How are you\";\nmy $age= prompt \"How old are you\";\n</code></pre>\n\n<p>and this is my Expectfile code..</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Expect;\nmy $cmd='perl';\nmy @param=qw(Welcome.pl);\nmy $exp = Expect-&gt;spawn($cmd,@param) or die \"Cannot spawn $cmd: $!\\n\";\n\n$exp-&gt;expect (1,\"What is your name\");\n$exp-&gt;send(\"Alen\\r\");\n\n$exp-&gt;expect (1,\"Alen\\rHow are you\");\n$exp-&gt;send(\"Fine\\r\");\n\n$exp-&gt;expect (1,\"Fine\\rHow old are you\");\n$exp-&gt;send(\"21\\r\");\n$exp-&gt;hard_close();\n</code></pre>\n\n<p>This is the output I'm getting</p>\n\n<pre><code>admin3@admin3-VirtualBox:~/Desktop$ perl WelcomeExpect.pl\n What is your name Alen\n Alen\n How are you Fine\n How old are you admin3@admin3-VirtualBox:~/Desktop$\n</code></pre>\n\n<p>My name is appearing again on the next line and the age input is not at all showing.</p>\n\n<p>New Update-->Now when I'm using soft_close instead of hard_close, my age input is coming. But still, my name input is coming two times.                                       admin3@admin3-VirtualBox:~/Desktop$ perl WelcomeExpect.pl</p>\n\n<pre><code>What is your name Alen\nAlen\nHow are you Fine\nHow old are you 21\nadmin3@admin3-VirtualBox:~/Desktop$\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1563449375, "post_id": 57089594, "comment_id": 100708322, "body": "Please provide a minimal runnable script that illustrates the problem you have"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563527554, "post_id": 57089594, "comment_id": 100738023, "body": "See also <a href=\"https://stackoverflow.com/q/26934786/2173773\">reading dates from xls to csv through Perl</a>, and according to <a href=\"https://www.perlmonks.org/?node_id=1140328\" rel=\"nofollow noreferrer\">this thread</a> you could try use <code>Spreadsheet::ParseXLSX</code> instead of <code>Spreadsheet::ParseExcel</code>"}, {"owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1563535804, "post_id": 57089594, "comment_id": 100742016, "body": "thanks for your Reply, but the even though i used <code>$cell-&gt;unformatted()</code> method / <code>$cell-&gt;Value</code> : both are acting the same way as <code>$cell-&gt; {Val}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1563791021, "creation_date": 1563791021, "answer_id": 57143936, "question_id": 57089594, "link": "https://stackoverflow.com/questions/57089594/reading-time-format-data-in-spreadsheet-using-perl/57143936#57143936", "title": "Reading Time format data in spreadsheet using perl", "body": "<p>In most cases (maybe all, but I've learned to be wary of statements like that), dates in Excel spreadsheets are stored as floating-point numbers where the integer part of the number is the number of days since the start of 1900 and the decimal part is how far through the day we are.</p>\n\n<p>You can, of course, use that information to parse the data yourself. But there's no need to do that in a world where <a href=\"https://metacpan.org/pod/DateTime::Format::Excel\" rel=\"nofollow noreferrer\">DateTime::Format::Excel</a> exists.</p>\n"}], "owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 57143936, "answer_count": 1, "score": 2, "last_activity_date": 1563791021, "creation_date": 1563436272, "last_edit_date": 1563513313, "question_id": 57089594, "link": "https://stackoverflow.com/questions/57089594/reading-time-format-data-in-spreadsheet-using-perl", "title": "Reading Time format data in spreadsheet using perl", "body": "<p>while reading the spreadsheet using perl, how the time format data (in a cell) in spreadsheet got read by perl ?</p>\n\n<p>I tried to read text and numeric type data from a cell in worksheet, as a result, it got read as text and numeric in perl, \nbut while reading a time format data, it got converted to some float value(of format - <code>HH:MM:SS/HH:MM/MM:SS</code>), my doubt is that, how the time format (<code>[H]:MM:SS</code>) from a cell got read by perl ?</p>\n\n<p>For example:\n$cell holds the value of 13:7(is in time format <code>[H]:MM:SS</code> format in spreadsheet)</p>\n\n<p>while reading it using perl,</p>\n\n<p><code>$type = $cell-&gt;type()</code> //returns the type : Numeric/Text</p>\n\n<p><code>$format = $cell-&gt;get_format()</code> // returns the format (i.e)if Numeric :returns time format of <code>HH:MM:SS / HH:MM / MM:SS</code> formats only</p>\n\n<p>In such case, how data present in <code>$cell</code> can be read by perl? and how\nother time formats such as <code>MM:SS.0/[H]:MM:SS/YYYY-MM-DD HH:MM:SS/ [HH]:MM:SS...</code>are identified?</p>\n"}, {"tags": ["perl", "redirect", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1563430901, "post_id": 57087084, "comment_id": 100698764, "body": "I believe what Steffen Ullrich is trying to say is that browsers shouldn&#39;t heed a Location header in a 200 response, so one should use the appropriate 3xx response rather then relying on the browser to guess what was meant."}, {"owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1563457586, "post_id": 57087084, "comment_id": 100713318, "body": "Actually, up until today, I thought it automatically added Status: 302. But the interesting thing I noticed is how the data was delivered.  Here&#39;s a screenshot. <a href=\"https://snag.gy/rYMzuL.jpg\" rel=\"nofollow noreferrer\">snag.gy/rYMzuL.jpg</a> The one that I forgot to add a 302 status to actually loaded the redirected page but in a different manner.  Trying to understand how that happened basically.  It&#39;s as if the server loaded the content of the page or am I reading it wrong?"}, {"owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "edited": false, "score": 0, "creation_date": 1563459022, "post_id": 57087084, "comment_id": 100714327, "body": "I think I may have looked at the issue incorrectly. It should be how Apache responds, not how the browser responds.  So it seems that when I made the script say &quot;Location: /sample.html\\n\\n&quot;; the server just loaded the page sample.html directly since it&#39;s in the same server thus having a 200 status. When I tried it with &quot;Location: <a href=\"http://some-othersite.com\" rel=\"nofollow noreferrer\">some-othersite.com</a>\\n\\n&quot;; the server added a 302 response header automatically.I have a bit of clarity now.  :-)"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1563442240, "last_edit_date": 1563442240, "creation_date": 1563423711, "answer_id": 57087084, "question_id": 57087032, "link": "https://stackoverflow.com/questions/57087032/general-information-about-cgi-redirections/57087084#57087084", "title": "General information about CGI redirections", "body": "<blockquote>\n  <p>I would just like to understand how a browser processes a Location: Header but has 200 status and what are pros and cons of doing this instead of using 302 or 301?</p>\n</blockquote>\n\n<p>A <code>Location</code> header causes only a redirect when combined with some 3xx code. This behavior is clearly defined in the HTTP standard. From <a href=\"https://tools.ietf.org/html/rfc7231#section-7.1.2\" rel=\"nofollow noreferrer\">RFC 7231 7.1.2 Location</a>:</p>\n\n<blockquote>\n  <p>For 201 (Created) responses, the Location value refers to the primary\n     resource created by the request.  <strong>For 3xx (Redirection) responses,\n     the Location value refers to the preferred target resource for\n     automatically redirecting the request.</strong></p>\n</blockquote>\n\n<p>In other words: it makes no sense at all to use a <code>Location</code> header together with a response code 200. The <code>Location</code> header will simply be ignored by the browser in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1563790686, "creation_date": 1563790686, "answer_id": 57143846, "question_id": 57087032, "link": "https://stackoverflow.com/questions/57087032/general-information-about-cgi-redirections/57143846#57143846", "title": "General information about CGI redirections", "body": "<p>Make your life easier by using the <a href=\"https://metacpan.org/pod/CGI#Generating-a-redirection-header\" rel=\"nofollow noreferrer\"><code>redirect()</code> subroutine from CGI.pm</a>.</p>\n\n<pre><code>$ perl -MCGI=redirect -E'say redirect(\"https://example.com\")'\nStatus: 302 Found\nLocation: https://example.com\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3668624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/822545251/picture?type=large", "display_name": "hashtagjet", "link": "https://stackoverflow.com/users/3668624/hashtagjet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563790686, "creation_date": 1563423276, "question_id": 57087032, "link": "https://stackoverflow.com/questions/57087032/general-information-about-cgi-redirections", "title": "General information about CGI redirections", "body": "<p>When I run my redirect cgi script (Perl), I just do the following:</p>\n\n<pre><code>print \"Location: /new/url\\n\\n\";\n</code></pre>\n\n<p>This works, but by default, it says Status:200 OK.  If I specify the status like 302 or 301 in the header, then the browser redirects. Otherwise, it still loads the content of the new url without changing the URL in a browser.  </p>\n\n<p>I would just like to understand how a browser processes a Location: Header but has 200 status and what are pros and cons of doing this instead of using 302 or 301? </p>\n\n<p>Either a feedback or a link to an article discussing this would be great. Thanks.</p>\n"}]