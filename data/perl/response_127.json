[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497469897, "post_id": 44553537, "comment_id": 76097462, "body": "What the heck is a &quot;perl sed operation&quot;?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497469934, "post_id": 44553537, "comment_id": 76097485, "body": "That code doesn&#39;t produce any output."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497470787, "post_id": 44553537, "comment_id": 76097948, "body": "@Sinan&#220;n&#252;r &quot;In mathematics, summation (capital Greek sigma symbol: \u2211) is the addition of a sequence of numbers&quot; says Wikipedia. I already edited the title once."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497624092, "post_id": 44553537, "comment_id": 76171714, "body": "For reference, in English, we have <a href=\"http://www.bennetyee.org/http_webster.cgi?summation&amp;method=exact\" rel=\"nofollow noreferrer\">summation</a>:  <i>The act of summing, or forming a sum</i>."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497511902, "post_id": 44553606, "comment_id": 76111684, "body": "@tt_pre  Just in case: note that &quot;<i>the result of <code>$_ =~ s&#47;...&#47;...&#47;</code>&quot;</i> is the number of substitutions made.  Not the new string.  (From v5.14 you <i>can</i> do <code>$new_var = $var =~ s&#47;...&#47;...&#47;r</code> (note <code>&#47;r</code>), where <code>$var</code> is unchanged and the new string after substitutions is retured and assigned to <code>$new_var</code>)"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1497470310, "last_edit_date": 1497470310, "creation_date": 1497470054, "answer_id": 44553606, "question_id": 44553537, "link": "https://stackoverflow.com/questions/44553537/in-perl-why-is-my-regex-replace-failing-when-the-pattern-contains-a-parenthesiz/44553606#44553606", "title": "In Perl, why is my regex replace failing when the pattern contains a parenthesized addition?", "body": "<p>You have</p>\n\n<pre><code>my $substitute = \"(1+l_tax)\";\n</code></pre>\n\n<p>which you then use in a regex match:</p>\n\n<pre><code>if($line=~ /$substitute/){\n</code></pre>\n\n<p>But, of course, <code>1+</code> means \"<em>match one or more 1's in the string</em>\". Also, <code>(...)</code> means capture. So, you need to escape those characters which have special meaning in a regex pattern.</p>\n\n<p>Also, you do not need to match first to replace:</p>\n\n<pre><code>my $line = \"(l_extendedprice*(THISISREPLACED)*(1+l_tax))\";\n\nmy $substitute = \"(1+l_tax)\";\n\n$line =~ s/\\Q$substitute/matched/;\n</code></pre>\n\n<p>Note <code>$line =~ s/.../.../</code> instead of <code>$line = s/.../.../</code>. The latter (which is how you have it in your code) would replace the value in <code>$line</code> with the result of <code>$_ =~ s/.../.../</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 14375, "user_id": 344669, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8JOSf.gif?s=128&g=1", "display_name": "sfgroups", "link": "https://stackoverflow.com/users/344669/sfgroups"}, "is_accepted": false, "score": -2, "last_activity_date": 1497470187, "creation_date": 1497470187, "answer_id": 44553653, "question_id": 44553537, "link": "https://stackoverflow.com/questions/44553537/in-perl-why-is-my-regex-replace-failing-when-the-pattern-contains-a-parenthesiz/44553653#44553653", "title": "In Perl, why is my regex replace failing when the pattern contains a parenthesized addition?", "body": "<p>escape the + sign.</p>\n\n<pre><code>echo \"(l_extendedprice*(THISISREPLACED)*(1+l_tax))\" |perl -npe 's/1\\+l_tax/matched/'\n\n(l_extendedprice*(THISISREPLACED)*(matched))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1497471183, "last_edit_date": 1497471183, "creation_date": 1497470805, "answer_id": 44553822, "question_id": 44553537, "link": "https://stackoverflow.com/questions/44553537/in-perl-why-is-my-regex-replace-failing-when-the-pattern-contains-a-parenthesiz/44553822#44553822", "title": "In Perl, why is my regex replace failing when the pattern contains a parenthesized addition?", "body": "<p>The match and substitution operators expect a regex pattern.</p>\n\n<p>The regex pattern <code>(1+l_tax)</code> does not match the string <code>(1+l_tax)</code>.</p>\n\n<p>The regex pattern <code>\\(1\\+l_tax\\)</code> is one that only matches the string <code>(1+l_tax)</code>.</p>\n\n<p>You can get a pattern that matches a specific string by using <code>quotemeta</code> on that string.</p>\n\n<pre><code>my $substr_re = quotemeta($substr);\nif ($string =~ /$substr_re/) { ... }\n</code></pre>\n\n<p>You can use <code>\\Q..\\E</code> in a regex-expecting operator as a shortcut for <code>quotemeta</code>.</p>\n\n<pre><code>if ($string =~ /\\Q$substr\\E/) { ... }\n</code></pre>\n\n<p>The <code>\\E</code> is optional if it's at the end of the literal.</p>\n\n<pre><code>if ($string =~ /\\Q$substr/) { ... }\n</code></pre>\n\n<hr>\n\n<p>In your case, you need to start by fixing <code>$substitute</code> to be the string you want to substitute.</p>\n\n<pre><code>my $substitute = \"1+l_tax\";\n</code></pre>\n\n<p>Then, you can use what I showed earlier to match and substitute it.</p>\n\n<pre><code>if ($line =~ /\\Q$substitute/) {\n    $line =~ s/\\Q$substitute/matched/;\n}\n</code></pre>\n\n<p>That simplifies to the following:</p>\n\n<pre><code>$line =~ s/\\Q$substitute/matched/;\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 44553822, "answer_count": 3, "score": -1, "last_activity_date": 1497471183, "creation_date": 1497469822, "last_edit_date": 1497470979, "question_id": 44553537, "link": "https://stackoverflow.com/questions/44553537/in-perl-why-is-my-regex-replace-failing-when-the-pattern-contains-a-parenthesiz", "title": "In Perl, why is my regex replace failing when the pattern contains a parenthesized addition?", "body": "<p>I am stumbling over a very basic perl sed operation. Cannot figure out where is the problem. at some point in my program, I have a string that has the following line:</p>\n\n<pre><code>my $line = \"(l_extendedprice*(THISISREPLACED)*(1+l_tax))\";\n\nmy $substitute = \"(1+l_tax)\";\n\nif($line=~ /$substitute/){\n$line =~ s/$substitute/matched/;\n}\n</code></pre>\n\n<p>Observed output:</p>\n\n<pre><code>(l_extendedprice*(THISISREPLACED)*(1+l_tax))\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>(l_extendedprice*(THISISREPLACED)*(matched))\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>The value of $line and <code>$substitute</code> are generated from a part of the code. So, is there way to deal with <code>*</code>, <code>+</code> without breaking <code>$substitute</code> into pieces?</p>\n"}, {"tags": ["json", "perl", "jsonschema"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1497467892, "post_id": 44552890, "comment_id": 76096405, "body": "You&#39;ve misdiagnosed the situation. <code>JSON::Validator</code> depends on <code>Mojolicious</code> which requires <code>perl</code> 5.10.1."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497468141, "post_id": 44552890, "comment_id": 76096533, "body": "Did you try <a href=\"https://metacpan.org/pod/JSV::Validator\" rel=\"nofollow noreferrer\">JSV::Validator</a>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497468375, "post_id": 44552890, "comment_id": 76096658, "body": "<a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/FAQ#Which-versions-of-Perl-are-supported-by-Mojolicious\" rel=\"nofollow noreferrer\"><i>Which versions of Perl are supported by Mojolicious?</i></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497468856, "post_id": 44552890, "comment_id": 76096909, "body": "If you&#39;re developing a significant project then you really should upgrade your Perl installation to a version that is still supported. Perl v5.8.0 is fifteen years old now, and so is probably older than your computer system."}, {"owner": {"reputation": 153, "user_id": 5376182, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206090505395883/picture?type=large", "display_name": "vp8", "link": "https://stackoverflow.com/users/5376182/vp8"}, "edited": false, "score": 0, "creation_date": 1497468897, "post_id": 44552890, "comment_id": 76096936, "body": "<code>JSV::Validator</code> does not seem to work well. It does not have proper documentation and <code>validate</code> method is always returning &quot;0&quot;."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497469830, "post_id": 44552890, "comment_id": 76097421, "body": "That is not what I observed, at least with the code from the module&#39;s synopsis. Also, it seems to me there isn&#39;t a need for much documentation: Pass the schema and data (not JSON string) to <code>validate</code>."}, {"owner": {"reputation": 153, "user_id": 5376182, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206090505395883/picture?type=large", "display_name": "vp8", "link": "https://stackoverflow.com/users/5376182/vp8"}, "edited": false, "score": 0, "creation_date": 1497473325, "post_id": 44552890, "comment_id": 76099269, "body": "Thanks! <code>JSV::Validator</code> is now working well after providing schema and data to <code>validate</code> method instead of their string values."}, {"owner": {"reputation": 8891, "user_id": 89211, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d8b4889359df45a8c8099ef16bd96be9?s=128&d=identicon&r=PG", "display_name": "Relequestual", "link": "https://stackoverflow.com/users/89211/relequestual"}, "edited": false, "score": 0, "creation_date": 1517562363, "post_id": 44552890, "comment_id": 84154437, "body": "@vp8 You&#39;re welcome to write an answer to your own question, which you can later accept as the answer. Might be helpful for others."}], "owner": {"reputation": 153, "user_id": 5376182, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206090505395883/picture?type=large", "display_name": "vp8", "link": "https://stackoverflow.com/users/5376182/vp8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1497469694, "creation_date": 1497467539, "last_edit_date": 1497469694, "question_id": 44552890, "link": "https://stackoverflow.com/questions/44552890/how-to-use-jsonvalidator-with-perl-5-8", "title": "How to use JSON::Validator with Perl 5.8?", "body": "<p>There are not many modules which offer functionality to validate JSON files when a JSON schema is provided.</p>\n\n<p>I found out that\n<a href=\"https://metacpan.org/pod/JSON::Validator\" rel=\"nofollow noreferrer\"><code>JSON::Validator</code></a>\nhas a dependency on the <code>Mojolicious</code>. And, <code>Mojolicious</code> has dependency on <code>feature</code> pragma which was introduced in Perl 5.10.</p>\n\n<p>Is there any way to avoid using <code>feature</code>, or using it in Perl 5.8?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1497459960, "post_id": 44550461, "comment_id": 76092024, "body": "Build a look-up table, party_description =&gt; code_to_run. You can use a dispatch table, hash with values being coderefs. (Btw, you show Perl data structures -- how do you &quot;<i>receive</i>&quot; that from a 3rd party?)"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "edited": false, "score": 0, "creation_date": 1497461136, "post_id": 44550859, "comment_id": 76092656, "body": "Those are valid Perl data structures that I&#39;m getting from decoded JWT tokens using <a href=\"https://metacpan.org/pod/Crypt::JWT\" rel=\"nofollow noreferrer\">Crypt::JWT</a>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1497463602, "post_id": 44550859, "comment_id": 76094126, "body": "LOL! If I wouldn&#39;t have used such a dispatch table myself a few days ago, I wouldn&#39;t have noticed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "edited": false, "score": 0, "creation_date": 1497463642, "post_id": 44550859, "comment_id": 76094142, "body": "@BetterDeal OK -- that helps, if they don&#39;t &quot;evolve&quot; (change without notice over time or some such).  If the lowest level &quot;identifiers&quot; -- keys in your example -- are consistent you can build a really nice system.   I&#39;d suggest to first give it a little thought, in the first place on how to store data.  It needn&#39;t be spelled out in each sub."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "edited": false, "score": 0, "creation_date": 1497464970, "post_id": 44550859, "comment_id": 76094841, "body": "@BetterDeal  I had a typo there (<code>\\%...</code> instead of <code>\\&amp;...</code>), which would make it fail miserably. Just a note in case you didn&#39;t notice the chage (fixed)."}, {"owner": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "edited": false, "score": 0, "creation_date": 1497476268, "post_id": 44550859, "comment_id": 76100652, "body": "Thanks heaps, @zdim much appreciated :)  I&#39;ve used a dispatch table, as you suggested."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "edited": false, "score": 0, "creation_date": 1497479414, "post_id": 44550859, "comment_id": 76101886, "body": "@BetterDeal Great :)  Let me know if questions pop up. Note that has a lot of room for adjustment and further learning.  For one, it seems to be a nice way to get going with OO, either Perl&#39;s own or <a href=\"http://search.cpan.org/~haarg/Moo-2.003002/lib/Moo.pm\" rel=\"nofollow noreferrer\">Moo</a> (a light-weight sibling of the great big <a href=\"http://search.cpan.org/~ether/Moose-2.2005/lib/Moose.pm\" rel=\"nofollow noreferrer\">Moose</a>).  Even if it is not necessary (for small and well formed data sets) once you wish to look at OO this may be a good starting point."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1564771133, "last_edit_date": 1564771133, "creation_date": 1497460279, "answer_id": 44550859, "question_id": 44550461, "link": "https://stackoverflow.com/questions/44550461/traversing-hashes-in-perl-based-on-config/44550859#44550859", "title": "Traversing hashes in Perl based on config", "body": "<p>Build a look-up table. And you can use a <em>dispatch table</em>, hash with values being <em>code references</em>, so that when a party-identification is used as the key the code for that party executes</p>\n\n<pre><code>my %get_value = ( first =&gt; \\&amp;fetch_first, second =&gt; \\&amp;fetch_second );\n\nmy $party = 'first';  # input via command-line options, STDIN ...\n\nmy $email = $get_value{$party}-&gt;();\n</code></pre>\n\n<p>where <code>\\&amp;fetch_first</code> is a reference to the subroutine <code>fetch_first</code>. You can also enter it directly, <code>first =&gt; sub { ... }</code>, suitable for simple code. See <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>, and <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perlsub</a>.</p>\n\n<p>There are many ways to carry data in your program, and so to implement the lookup itself. </p>\n\n<p>Here is an illustration, built in steps. It uses the (confirmed) fact that the data is in valid Perl data structures, and for simplicity it specifies the data right in each sub.</p>\n\n<pre><code>sub fetch_first {\n   my $data = {\n       email     =&gt; '...',\n       firstName =&gt; '...',\n   };\n   return $data-&gt;{email};\n}\n</code></pre>\n\n<p>This only delivers the email address, but we can do better.</p>\n\n<p>Once you <em>dereference</em> a code reference you can also pass arguments</p>\n\n<pre><code>my $first_name = $get_value{$party}-&gt;('firstName');\n</code></pre>\n\n<p>where the subs are now written to use this input to return the required field</p>\n\n<pre><code>sub fetch_first {\n    my ($query) = @_;\n    my $data = {\n       email     =&gt; '...',\n       firstName =&gt; '...',\n    };\n    return $data-&gt;{$query};\n}\n</code></pre>\n\n<p>A big weakness of the above is that the calling code must use valid names of keys, so it needs to <em>know the details of implementation</em> of what it is using. </p>\n\n<p>This can be improved, for example by choosing an interface for the call which is then translated in the subs into key names (or via yet another look-up structure).  Then you make calls such as</p>\n\n<pre><code>my $email = $get_value{$party}-&gt;('email');  # or: 'first', 'last'\n</code></pre>\n\n<p>and somewhere you have association <code>first =&gt; 'firstName'</code> (etc) which subs can look up.</p>\n\n<p>The flexibility is greatly helped by data being set up in a consistent way. The whole thing can also be quite maintainable if the code is organized thoughtfully.</p>\n\n<p>If this grows more complex the solution is to write a class. Then you can build a very nice system.</p>\n"}], "owner": {"reputation": 43, "user_id": 1182570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2L62m.jpg?s=128&g=1", "display_name": "Better Deal", "link": "https://stackoverflow.com/users/1182570/better-deal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 44550859, "answer_count": 1, "score": 1, "last_activity_date": 1564771133, "creation_date": 1497458845, "question_id": 44550461, "link": "https://stackoverflow.com/questions/44550461/traversing-hashes-in-perl-based-on-config", "title": "Traversing hashes in Perl based on config", "body": "<p>I need to be able to pluck specific values from data that I receive from different 3rd parties. The data can structured differently depending on the 3rd party. For example:</p>\n\n<pre><code>my $first = \n{\n    email     =&gt; \"joe\\@example.com\",\n    firstname =&gt; \"Joe\",\n    lastname  =&gt; \"Regular\",\n};\n\nmy $second =  \n{\n    user =&gt; {\n        e-mail    =&gt; \"joe\\@example.com\",\n        firstName =&gt; \"Joe\",\n        lastName  =&gt; \"Regular\",\n      }\n};\n</code></pre>\n\n<p>I know what the data structure will be for each 3rd party, so I can define that as config. What I want to end up with is</p>\n\n<pre><code>my $email = _magic($first_config,$first);\nmy $other_email = _magic($second_config,$second);\n</code></pre>\n\n<p>Any ideas much appreciated.</p>\n"}, {"tags": ["perl", "process", "real-time", "filehandle"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497458712, "post_id": 44550240, "comment_id": 76091286, "body": "I&#39;m sure there&#39;s got to be a canonical answer that says that, but I can&#39;t find it."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497462324, "post_id": 44550240, "comment_id": 76093408, "body": "It is not about line-buffering the <i>input</i> filehandle. It&#39;s about the fact that lines you read from <code>XIN</code> have newlines at the end. <i>Shocking</i>, I know. So, when you print them, the output gets flushed. Whereas, if you just print dots, the output sits in the buffer until it&#39;s filled."}, {"owner": {"reputation": 121, "user_id": 5937008, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0KGqNgCf5cU/AAAAAAAAAAI/AAAAAAAAA6U/UwOtPYYDSx8/photo.jpg?sz=128", "display_name": "Nonny Moose", "link": "https://stackoverflow.com/users/5937008/nonny-moose"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497537230, "post_id": 44550240, "comment_id": 76129295, "body": "@Sinan&#220;n&#252;r Thanks, you found the solution to my problem."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1497459594, "last_edit_date": 1497459594, "creation_date": 1497459038, "answer_id": 44550507, "question_id": 44550240, "link": "https://stackoverflow.com/questions/44550240/why-does-perl-allow-reading-in-real-time-from-a-process-filehandle-if-i-print/44550507#44550507", "title": "Why does perl allow reading in real time from a process filehandle if I print $_?", "body": "<p>By default, if STDOUT is connected to a terminal, STDOUT is only flushed when a newline is encountered or when the buffer is full. There's a newline causing the buffer to be flushed in your second snippet, but not in your first snippet.</p>\n\n<p>Add the following after the <code>print</code> to force the output to be flushed:</p>\n\n<pre><code>STDOUT-&gt;flush();\n</code></pre>\n\n<p>Add the following to your program to always flush after writing to STDOUT:</p>\n\n<pre><code>STDOUT-&gt;autoflush();\n</code></pre>\n\n<p>(Older versions of Perl require <code>use IO::Handle qw( );</code> to use these.)</p>\n"}], "owner": {"reputation": 121, "user_id": 5937008, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0KGqNgCf5cU/AAAAAAAAAAI/AAAAAAAAA6U/UwOtPYYDSx8/photo.jpg?sz=128", "display_name": "Nonny Moose", "link": "https://stackoverflow.com/users/5937008/nonny-moose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1497462192, "accepted_answer_id": 44550507, "answer_count": 1, "score": -1, "last_activity_date": 1497462222, "creation_date": 1497458152, "question_id": 44550240, "link": "https://stackoverflow.com/questions/44550240/why-does-perl-allow-reading-in-real-time-from-a-process-filehandle-if-i-print", "closed_reason": "Duplicate", "title": "Why does perl allow reading in real time from a process filehandle if I print $_?", "body": "<p>I'm writing a perl program that captures the output of another program, and I noticed that in a <code>while &lt;FILEHANDLE&gt;</code> loop (so <code>$_</code> contains the line read), the following occurs:</p>\n\n<pre><code>open XIN, \"-|\", \"test_xsr\"; # not getting in real time! FIX\nwhile (&lt;XIN&gt;) {\n    print \".\";\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>....\n</code></pre>\n\n<p><strong>after the program finishes</strong> while</p>\n\n<pre><code>open XIN, \"-|\", \"test_xsr\"; # not getting in real time! FIX\nwhile (&lt;XIN&gt;) {\n    print $_;\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>1\n2\n3\ndone\n</code></pre>\n\n<p><strong>in real time <em>while</em> the program runs</strong>. (While I'm testing, the program <em>always</em> produces that output.)</p>\n\n<p>Why does this inconsistency occur?<br>\nIs it possible to process output in real time without <code>print</code>ing<code>$_</code>?</p>\n"}, {"tags": ["perl", "replace", "substring"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1497455580, "post_id": 44549300, "comment_id": 76089478, "body": "&quot;<i>I will welcome a suggestion on how to rewrite the code</i>&quot; ... Sure, but what the heck are you trying to do? Explain with sample data."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1497455710, "post_id": 44549300, "comment_id": 76089571, "body": "It&#39;s almost certainly a lot easier if you&#39;re using some of perl&#39;s build in elements - a search and replace using a lookup table is really easy using a hash. But without some example input/output we can&#39;t even begin to start."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497456023, "post_id": 44549300, "comment_id": 76089792, "body": "I added the example. I use Perl 5.20."}], "answers": [{"comments": [{"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497456257, "post_id": 44549547, "comment_id": 76089945, "body": "Wow, this looks promising I didn&#39;t hope that such construct would be possible. I will have time to try it only tomorrow."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1497457671, "post_id": 44549547, "comment_id": 76090714, "body": "Perl is a much higher level language than C, so you can do all sorts of nice things like that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1497457741, "post_id": 44549547, "comment_id": 76090758, "body": "@Sobrique, I would expect C regex libraries to provide exactly the same functionally"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1497457837, "post_id": 44549547, "comment_id": 76090815, "body": "Yes, I reckon. But with fewer <code>$</code> signs and more function calls. ;-)"}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497510592, "post_id": 44549547, "comment_id": 76110882, "body": "The same as I commented for Sinan&#39;s answer: Does not work: <code>Use of uninitialized value $1 in hash element at .\\&#47;Encode&#47;fmx3.pm line 153, &lt;$in&gt; line 1.</code> the line 153 contains <code>my $res = $str =~ s&#47;$reg&#47;$tbl-&gt;{$1}&#47;gr;</code> The $1 does not refer to a match but to a variable that is expected to be initialized before this line."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497514008, "post_id": 44549547, "comment_id": 76113026, "body": "apparently there should be <code>s&#47;($re)&#47;$tbl-&gt;{$1}&#47;g</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497540410, "post_id": 44549547, "comment_id": 76131597, "body": "No. I already included the capture in <code>$re</code>. My program works as-is. (Well, you need to add <code>use strict; use warnings; use feature qw( say );</code>, but that&#39;s it.) Whatever you ran is different than what I posted."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1497456823, "last_edit_date": 1497456823, "creation_date": 1497455903, "answer_id": 44549547, "question_id": 44549300, "link": "https://stackoverflow.com/questions/44549300/perl-create-a-string-without-copying/44549547#44549547", "title": "Perl: create a string without copying", "body": "<pre><code>my $str = \"abcde\";\nmy $tbl = {ab=&gt;\"xy\", bc=&gt;\"rq\", e=&gt;\"a\"};\nmy $re = join '|', map quotemeta, keys %$tbl;\n$re = qr/($re)/;\n\n$str =~ s/$re/$tbl-&gt;{$1}/g;\nsay $str;  # xycda\n</code></pre>\n\n<hr>\n\n<p>If you don't want to change the original:</p>\n\n<pre><code>my $res = $str =~ s/$re/$tbl-&gt;{$1}/rg;     # 5.14+\n</code></pre>\n\n<p>or</p>\n\n<pre><code>( my $res = $str ) =~ s/$re/$tbl-&gt;{$1}/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1497457667, "post_id": 44549904, "comment_id": 76090712, "body": "This is ikegami&#39;s answer <i>plus</i> an explanation. I like that."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497510546, "post_id": 44549904, "comment_id": 76110859, "body": "Does not work: <code>Use of uninitialized value $1 in hash element at .\\&#47;Encode&#47;fmx3.pm line 153, &lt;$in&gt; line 1.</code> the line 153 contains <code>my $res = $str =~ s&#47;$reg&#47;$tbl-&gt;{$1}&#47;gr;</code> The $1 does not refer to a match but to a variable that is expected to be initialized before this line."}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497513222, "post_id": 44549904, "comment_id": 76112515, "body": "Sorry, I forgot $reg in (), now <code>s&#47;($reg)&#47;...</code> looks better"}, {"owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "edited": false, "score": 0, "creation_date": 1497514209, "post_id": 44549904, "comment_id": 76113166, "body": "ikegami, Sinan &#220;n&#252;r: Thanks a lot guys. I am actually sorry that there is no solution for the no copying of the string (and terrified, I realized that even in Java 7+ the String.substring method is now O(n) instead of O(1) in the past...), but I definitely improved my Perl knowledge here."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 6, "last_activity_date": 1497457055, "last_edit_date": 1497457055, "creation_date": 1497457002, "answer_id": 44549904, "question_id": 44549300, "link": "https://stackoverflow.com/questions/44549300/perl-create-a-string-without-copying/44549904#44549904", "title": "Perl: create a string without copying", "body": "<p>Perl is not C. And, using regular expressions is another step beyond that. So, I am going to break down steps required to implement something that might seem trivial once you have seen it, but might be hard to come up with if you are still in the C mindset.</p>\n\n<p>Your example is:</p>\n\n<pre><code>$str: \"abcde\"\n$tbl: {ab=&gt;\"xy\", bc=&gt;\"rq\", e=&gt;\"a\"}\n$reg: qr/ab|bc|e/\nexpected output: xycda\n</code></pre>\n\n<p>Let's think about how to implement this just for this particular case.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = 'abcde';\nmy $tbl = { ab =&gt; \"xy\", bc =&gt; \"rq\", e =&gt; \"a\"};\nmy $pat = qr{ ( ab | bc | e ) }x;\n\n$str =~ s/$pat/$tbl-&gt;{$1}/g;\n\nprint \"$str\\n\";\n</code></pre>\n\n<p>That is, we have three possible substrings we want to match against. When a match is found, we want to capture it, and replace it with the corresponding string in the lookup table.</p>\n\n<p>I constructed the pattern separately, because I want to avoid manually typing it when I can actually derive it from the keys of the lookup table:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = 'abcde';\nmy $tbl = { ab =&gt; \"xy\", bc =&gt; \"rq\", e =&gt; \"a\"};\nmy $pat = join '|', map quotemeta($_), sort keys %$tbl;\n\n$str =~ s/($pat)/$tbl-&gt;{$1}/g;\n\nprint \"$str\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2494, "user_id": 1182474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/750e3aee55edca56937b6b399a86e756?s=128&d=identicon&r=PG", "display_name": "David L.", "link": "https://stackoverflow.com/users/1182474/david-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 44549904, "answer_count": 2, "score": 1, "last_activity_date": 1497462492, "creation_date": 1497455210, "last_edit_date": 1497462492, "question_id": 44549300, "link": "https://stackoverflow.com/questions/44549300/perl-create-a-string-without-copying", "title": "Perl: create a string without copying", "body": "<p>In Perl 5.20 I need to run a regular expression on a substring without copying it into a new string. So some equivalent to <code>$str[$to]</code> in the C language.</p>\n\n<p>The reason is that it is executed in a loop and if it each time copies the string so the resulting code is <code>O(n^2)</code> while what without the copying it would be just <code>O(n)</code>. So with an input of 2MB string it is unusable.</p>\n\n<p>Alternatively, I will welcome a suggestion on how to rewrite the code: I need to do a search and replace using a lookup table.</p>\n\n<p>Example input</p>\n\n<pre><code>$str: \"abcde\"\n$tbl: {ab=&gt;\"xy\", bc=&gt;\"rq\", e=&gt;\"a\"}\n$reg: qr/ab|bc|e/\nexpected output: xycda\n</code></pre>\n\n<p>This is my current code that runs fine for short strings, but it does not finish for large ones:</p>\n\n<pre><code>#translate $str: if $reg match found, replace the match with a value in $tbl hash that corresponds to the match\nsub internalEncode {\n    my ($str, $tbl, $reg) = @_;\n    my $res=\"\";\n    my $prevTo = 0;\n    my $to = 0;\n    #the substr($str,$to) makes it slow; in C with 0 terminated strings\n    #I would need to write here something like: $str[$to]\n    while (substr($str,$to) =~ $reg) {\n        my $match = $&amp;;\n        my $from = $prevTo + $-[0];\n        $to = $prevTo + $+[0];\n        $res .= substr($str,$prevTo,$from - $prevTo);\n        $res .= $tbl-&gt;{quotemeta $match};\n        $prevTo = $to;\n    }\n    $res .= substr($str,$prevTo);\n    return $res;\n}\n</code></pre>\n"}, {"tags": ["perl", "parameter-passing", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1497454872, "post_id": 44548960, "comment_id": 76089008, "body": "Actually, <i>great</i>!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1497454956, "last_edit_date": 1497454956, "creation_date": 1497454192, "answer_id": 44548960, "question_id": 44548797, "link": "https://stackoverflow.com/questions/44548797/in-perl-how-can-i-pass-a-variable-as-an-argument-to-a-subroutine/44548960#44548960", "title": "In Perl, how can I pass a variable as an argument to a subroutine?", "body": "<p>The argument to your subroutine is not in <code>$_</code>. It's in the array <code>@_</code>, and you need to get it out.</p>\n\n<pre><code>sub analyze_name {\n    my $name = shift; # implicitly shifts @_\n    if ($name =~ m/.../) { ... }\n}\n</code></pre>\n\n<p>Or alternatively as a list assignment</p>\n\n<pre><code>sub analyze_name {\n    my ($name) = @_;\n    ....\n}\n</code></pre>\n\n<p>Or, if you wanted to operate on the <code>@_</code> array directly</p>\n\n<pre><code>sub analyze_name {\n    if ($_[0] =~ m/.../) { ... }\n}\n</code></pre>\n\n<p>Now we are accessing the first element in the array <code>@_</code>. The sign in front of the variable name (called a <em>sigil</em>) in Perl changes with the type of value that that expression returns. So for the array it's <code>@_</code>, but when you access an element, it becomes <code>$_[0]</code> because the value inside is scalar, which means it is only one value. This is different from <code>$_</code>, which is a scalar variable. The same thing is true about <code>@array</code>, <code>$array[4]</code> and the scalar variable <code>$array</code> (which is a badly chosen name).</p>\n\n<p>In most cases you want to do either the <code>shift</code> or the list assignment. If you have two or three arguments, the list is often easier to read. If there are a lot of args, having them one per line makes sense. Operating on <code>@_</code> directly usually only makes sense if speed is an issue because your sub is called millions of times in your program. <strong>My advice is to take readable code over brevity and go with properly named arguments</strong>.</p>\n\n<hr>\n\n<p>The <code>$name</code> in the above code is <em>lexical</em> to that subroutine. That means it exists only there, and every time you call that sub, you get a new <code>$name</code>. The variable name of the variable you pass in when you call it doesn't matter.</p>\n\n<pre><code>analyze_name($foo);\nanalyze_name($bar);\nanalyze_name('foobar');\n</code></pre>\n\n<p>All of those pass a value to the sub. The sub does not care about the variable name. In the sub, it's always <code>$name</code>. Outside of the sub, <code>$name</code> does not exist.</p>\n\n<hr>\n\n<p>Note that you should not call subs with <code>&amp;</code> in Perl. That used to be the syntax in Perl 4 about 20 years ago. In Perl 5 this <code>&amp;foo()</code> has a special meaning that you probably do not want. Drop the <code>&amp;</code>, and look for <em>subroutine prototypes</em> if you want to know more about that.</p>\n"}, {"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 0, "last_activity_date": 1497464988, "last_edit_date": 1497464988, "creation_date": 1497454270, "answer_id": 44548993, "question_id": 44548797, "link": "https://stackoverflow.com/questions/44548797/in-perl-how-can-i-pass-a-variable-as-an-argument-to-a-subroutine/44548993#44548993", "title": "In Perl, how can I pass a variable as an argument to a subroutine?", "body": "<p>If you just want your code to work you need to change:</p>\n\n<pre><code>if ($_ =~ /^\\w+\\s+\\w+$/) {\n</code></pre>\n\n<p><strong>To</strong></p>\n\n<p><code>if ($_[0] =~ /^\\w+\\s+\\w+$/)</code> {</p>\n\n<p>Perl's documentation, <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perldoc perlsub</a> which is installed alongside <code>perl</code>, says:</p>\n\n<blockquote>\n  <p>Any arguments passed in show up in the array @_ . \n  ...\n   if you called a\n  function with two arguments, those would be stored in <code>$_[0]</code> and <code>$_[1]</code>\n  . The array @_ is a local array, but its elements are aliases for the\n  actual scalar parameters.</p>\n</blockquote>\n\n<p>Instead using this I'd recommend you store your argument to a variable and also avoid calling subroutines with \"&amp;\" as <strong>simbabque</strong> said in his answer , so:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nprint \"Please enter your first name followed by your last name. For example: John Smith.\\n\";\n\nchomp(my $name = &lt;STDIN&gt;);\n\nanalyze_name($name);\n\nsub analyze_name {\n  my ( $name ) = @_;\n\n    if ($name =~ /^\\w+\\s+\\w+$/) {\n            print \"You entered $name.\";\n                    } else {\n            print \"Incorrect convention\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8022431, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W0Dl5ATqPGU/AAAAAAAAAAI/AAAAAAAAVd4/o7yD9Na0Gzk/photo.jpg?sz=128", "display_name": "Jason Husbands", "link": "https://stackoverflow.com/users/8022431/jason-husbands"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3486, "favorite_count": 0, "closed_date": 1497454560, "accepted_answer_id": 44548960, "answer_count": 2, "score": 0, "last_activity_date": 1497464988, "creation_date": 1497453757, "last_edit_date": 1497454718, "question_id": 44548797, "link": "https://stackoverflow.com/questions/44548797/in-perl-how-can-i-pass-a-variable-as-an-argument-to-a-subroutine", "closed_reason": "Duplicate", "title": "In Perl, how can I pass a variable as an argument to a subroutine?", "body": "<p>I am passing a scalar variable to subroutine in which I want to test if the argument matches a regex:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nprint \"Please enter your first name followed by your last name. For example: John Smith.\\n\";\n\nchomp(my $name = &lt;STDIN&gt;);\n\n&amp;analyze_name($name);\n\nsub analyze_name {\n    if ($_ =~ /^\\w+\\s+\\w+$/) {\n            print \"You entered $_.\";\n                    } else {\n            print \"Incorrect convention\";\n    }\n}\n</code></pre>\n\n<p>I am getting output with the following error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Please enter your first name followed by your last name. For example: John Smith.\nfirstname lastname\nIncorrect convention\nUse of uninitialized value $_ in pattern match (m//) at /home/jhusbands/scripts/examples/test.pl line 13, &lt;STDIN&gt; line 1.\n</code></pre>\n\n<p>My thinking is it would pass <code>$name</code> to the \"magic variable\" <code>$_</code>.  I need to reuse this subroutine on multiple <code>&lt;STDIN&gt;</code> variables. How do I initialize <code>$_</code>?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1497453046, "creation_date": 1497453046, "answer_id": 44548551, "question_id": 44548437, "link": "https://stackoverflow.com/questions/44548437/perl-how-does-1-behave-in-a-loop/44548551#44548551", "title": "perl: how does `$1` behave in a loop?", "body": "<p>One way would be to avoid the special numbered variables entirely, which don't get reset in between runs. Instead, use a local variable, and reset it at the beginning of each loop:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @words = qw(\n    one\n    two\n    three\n);\n\nfor my $w (@words){\n    my $store;\n\n    if (($store = $w) =~ /(t)/){\n        print \"$store\\n\";\n    }\n    else {\n        print \"no match\\n\";\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>two\nthree\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1497454072, "last_edit_date": 1497454072, "creation_date": 1497453152, "answer_id": 44548572, "question_id": 44548437, "link": "https://stackoverflow.com/questions/44548437/perl-how-does-1-behave-in-a-loop/44548572#44548572", "title": "perl: how does `$1` behave in a loop?", "body": "<p>Check the return of the match:</p>\n\n<pre><code>if ($word =~ /(el)/) {\n  print \"$word matched with [$1]\\n\";\n} else {\n  print \"$word did not match\\n\";\n}\n</code></pre>\n\n<p>I suspect your test environment is doing a bit more when you run them separately than your script does, including reseting <code>$1</code>, among other things.</p>\n"}, {"comments": [{"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1497453918, "post_id": 44548690, "comment_id": 76088380, "body": "the logic I&#39;m using is a bit more complex than just printing the match. That was a simplified case I used to try to understand what&#39;s going on.  Is there any way to do what I want? i.e. set <code>$1</code>, <code>$2</code> (or something else) each time I get a match, and set them to <code>undef</code> if I don&#39;t get a match, for each iteration?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1497453980, "post_id": 44548690, "comment_id": 76088436, "body": "<code>my ($capture) = $word =~ &#47;(el)&#47;</code> and <code>my $capture = $word =~ &#47;(el)&#47; ? $1 : undef;</code> set <code>$capture</code> in the manner you describe wanting <code>$1</code> set."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1497454278, "post_id": 44548690, "comment_id": 76088644, "body": "perfect. Does that mean I could use something along the lines of <code>my @matches = $word =~ &#47;(list) (of) (match) (patterns)&#47;;</code> to get an array of matches?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1497454332, "post_id": 44548690, "comment_id": 76088678, "body": "@ewok, Yes, it does. I avoid using <code>$1</code> in favour of these."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1497453471, "creation_date": 1497453471, "answer_id": 44548690, "question_id": 44548437, "link": "https://stackoverflow.com/questions/44548437/perl-how-does-1-behave-in-a-loop/44548690#44548690", "title": "perl: how does `$1` behave in a loop?", "body": "<p>There's nothing special about the loop.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nmy @words = ('hello', 'there');\n$words[0] =~ /(el)/; say $1 // \"[undef]\";\n$words[1] =~ /(el)/; say $1 // \"[undef]\";\n\nmy @words = ('hello', 'there');\nforeach my $word (@words){\n    $word =~ /(el)/;\n    say $1 // \"[undef]\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>el\nel\nel\nel\n</code></pre>\n\n<p><code>$1</code> and friends are only changed on a successful match, so you want</p>\n\n<pre><code>for my $word (@words) {\n    if ( $word =~ /el/ ) {\n        print \"$word matched\\n\";\n    } else {\n        print \"$word did not match\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 44548690, "answer_count": 3, "score": 1, "last_activity_date": 1497454072, "creation_date": 1497452721, "question_id": 44548437, "link": "https://stackoverflow.com/questions/44548437/perl-how-does-1-behave-in-a-loop", "title": "perl: how does `$1` behave in a loop?", "body": "<p>I'm getting some behavior I don't understand in perl:</p>\n\n<pre><code>&gt;&gt;&gt; my @words = ('hello', 'there');\n&gt;&gt;&gt; $words[0] =~ /(el)/; print $1;\nel\n&gt;&gt;&gt; $words[1] =~ /(el)/; print $1;\nundef\n</code></pre>\n\n<p>but in a loop:</p>\n\n<pre><code>&gt;&gt;&gt; my @words = ('hello', 'there');\n&gt;&gt;&gt; foreach my $word (@words){\n&gt;&gt;&gt;    $word =~ /(el)/;\n&gt;&gt;&gt;    print \"$1\\n\";\n&gt;&gt;&gt; }\nel\nel\n</code></pre>\n\n<p>What's going on here? And how can I, in the loop, get $1 to be undefined when it doesn't match in the most recent regex, so that something like this will work:</p>\n\n<pre><code>foreach my $word (@words) {\n    $word =~ /(el)/;\n    if ($1) {\n        print \"$word matched\\n\";\n    } else {\n        print \"$word did not match\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "cpan", "postfix", "email-bounces"], "comments": [{"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1497449692, "post_id": 44546801, "comment_id": 76085212, "body": "I am not sure, but if your directory is locked, you can try to modify it creating a new <a href=\"https://metacpan.org/pod/distribution/Mail-Box/lib/Mail/Box/Locker.pod\" rel=\"nofollow noreferrer\">Mail::Box::Locker</a> and passing it  when you create your Mail::Box::Mbox object."}, {"owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1497451893, "post_id": 44546801, "comment_id": 76086867, "body": "Thanks for the idea ^_^,  I&#39;m now checking how Postfix delivery <i>mailbox_delivery_lock</i> parameter works.- maybe they are using different default locking methods? I&#39;ll update."}, {"owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "edited": false, "score": 0, "creation_date": 1497452930, "post_id": 44546801, "comment_id": 76087599, "body": "This is my first Perl code ^_^ but I&#39;m just having the lock issue randomly for now, and most of the times the related code works properly.- For parsing the messages I&#39;m using <a href=\"http://libsisimai.org/en/\" rel=\"nofollow noreferrer\">Sisimai</a>, not the Mail::Box parse functions..."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1497454420, "post_id": 44546801, "comment_id": 76088729, "body": "If the  mail box is in mbox format (i.e. all mails within one file) it needs to be locked if you modify it because otherwise it gets corrupt when two processes modify the file (i.e. delete from it and append at the same time). You need to use maildir or similar formats where each mail is a separate file."}, {"owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "edited": false, "score": 0, "creation_date": 1497454567, "post_id": 44546801, "comment_id": 76088847, "body": "Ok, I see that Postfix use <i>mailbox_delivery_lock = fcntl, dotlock</i> default values for mail delivery locks, and Mail::Box use DotLock as the default value for locking. I don&#39;t know what means to have 2 methods for Postfix (it checks both?), but I&#39;m going to change config to just use dotlock. I will update if that solves the issue..."}, {"owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1497454764, "post_id": 44546801, "comment_id": 76088948, "body": "@SteffenUllrich I would like to get default Postfix delivery agent, may I expect that my previous message will solve the issue?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1497456904, "post_id": 44546801, "comment_id": 76090296, "body": "@NachoColl: the previous comment does not solve the issue, i.e. either you will still get a lock conflict or you might end up with a corrupt mailbox.The default delivery agent in postfix supports multiple mailbox formats, including maildir. To cite from <a href=\"http://www.postfix.org/local.8.html\" rel=\"nofollow noreferrer\">local</a>: <i>Specify  a  name        ending in / for qmail-compatible maildir delivery.</i>"}, {"owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1497512451, "post_id": 44546801, "comment_id": 76112023, "body": "Ok, if I set both to use dotlock locking Postfix then gets blocked when trying to deliver the message: &quot;cannot update mailbox /var/mail/bounceparser for user bounceparser. unable to create lock file /var/mail/bounceparser.lock: File exists&quot;.- So basically it&#39;s bad to use single file model.- As @SteffenUllrich suggested I must go for another mailbox model ^_^ .- Let&#39;s check if Sisimai and Mail::Box work properly then ..."}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "is_accepted": true, "score": 0, "last_activity_date": 1497527525, "last_edit_date": 1497527525, "creation_date": 1497527189, "answer_id": 44566700, "question_id": 44546801, "link": "https://stackoverflow.com/questions/44546801/how-can-i-delete-a-message-without-mailbox-file-lock-im-using-perls-mailbox/44566700#44566700", "title": "How can I delete a message without mailbox file lock? I&#39;m using Perl&#39;s Mail::Box", "body": "<p>As suggested by @SteffenUllrich using mailbox single file box it's not a good idea (sincerely I was using it just because it's the default Postfix configured value ^_^).</p>\n\n<p>So, if you have a similar issue 1.- Configure Postfix to use <strong>Maildir</strong> instead of Mailbox for messages delivery (main.cf file):</p>\n\n<pre><code># Set Postfix to deliver messages to Maildir user folder\nhome_mailbox = Maildir/\n</code></pre>\n\n<p>and 2.- use <strong>Mail::Box:Maildir</strong> and not the Mail::Box:Mbox I was using to find-delete the messages.</p>\n\n<pre><code>my $mbox = Mail::Box::Maildir-&gt;new(folder =&gt;'/home/bounceparser/Maildir', access =&gt; 'rw');\n\n# @mailbox_pending_deletes contains the list of message ids to delete\nfor my $message_id (@mailbox_pending_deletes){\n   $message = $mbox-&gt;find($message_id);\n   $message-&gt;delete;    \n}    \nmy $delete_result = $mbox-&gt;close(write=&gt;'MODIFIED');\n</code></pre>\n\n<p>Fortunately the Sisimai library I use to parse the bounce/delivery/etc messages also accepts a Maildir path to go for the messages:</p>\n\n<pre><code>my $v = Sisimai-&gt;make('/home/bounceparser/Maildir/new','hook'=&gt;$x);\n</code></pre>\n\n<p>Thanks for helping!</p>\n"}], "owner": {"reputation": 383, "user_id": 7975865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a2ef1b128973e6b61969b6872674e9a?s=128&d=identicon&r=PG", "display_name": "Nacho Coll", "link": "https://stackoverflow.com/users/7975865/nacho-coll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 44566700, "answer_count": 1, "score": 1, "last_activity_date": 1497527525, "creation_date": 1497448357, "question_id": 44546801, "link": "https://stackoverflow.com/questions/44546801/how-can-i-delete-a-message-without-mailbox-file-lock-im-using-perls-mailbox", "title": "How can I delete a message without mailbox file lock? I&#39;m using Perl&#39;s Mail::Box", "body": "<p>I run <strong>Postfix</strong> on Ubuntu 16.04 server to send \"internal email\" messages and a crontab Perl job to parse the related bounce messages (delivered to local mailbox <em>/var/mail/bounceparser</em>). The Perl code basically checks the <em>bounceparser</em> mailbox, parse all the messages and take some actions (delete bounced addresses, etc). </p>\n\n<p>The problem is that when I try to delete those already-parsed messages using <strong>Mail::Box</strong> library, the mailbox gets locked and if a new message arrives the postfix daemon throws an exception trying to deliver the message: \"cannot update mailbox /var/mail/bounceparser for user bounceparser. cannot open file: Permission denied\".</p>\n\n<p>Is there a way to delete a message without locking the mailbox file? If it's not possible, any other suggested strategy?</p>\n\n<p>The code I use to delete the messages:</p>\n\n<pre><code>my $mbox = Mail::Box::Mbox-&gt;new(folder =&gt;'/var/mail/bounceparser', access =&gt; 'rw');\n\n# @mailbox_pending_deletes contains the list of message ids to delete\nfor my $message_id (@mailbox_pending_deletes){\n   $message = $mbox-&gt;find($message_id);\n   $message-&gt;delete;    \n}    \nmy $delete_result = $mbox-&gt;close(write=&gt;'MODIFIED');\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "awk", "range"], "comments": [{"owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "edited": false, "score": 0, "creation_date": 1497442919, "post_id": 44544122, "comment_id": 76079849, "body": "U know there is a progamm awk2perl which you could try?"}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1497445249, "post_id": 44544122, "comment_id": 76081609, "body": "for awk, see <a href=\"https://stackoverflow.com/a/38972737/4082052\">stackoverflow.com/a/38972737/4082052</a> for better ways... if you know how to write perl script, see <a href=\"https://stackoverflow.com/documentation/perl/3696/perl-one-liners#t=201706141257567028325\">stackoverflow.com/documentation/perl/3696/&hellip;</a> and <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html#Command-Switches</a> .. you&#39;ll want to use <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Range-Operators</a>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497507014, "post_id": 44551215, "comment_id": 76109025, "body": "I actually need the script to print only the start and the lines in between, excluding the end of the range. The awk script does exactly that. Is there a way to modify your perl one-liner to do the same?"}], "tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 0, "last_activity_date": 1497462928, "last_edit_date": 1497462928, "creation_date": 1497461555, "answer_id": 44551215, "question_id": 44544122, "link": "https://stackoverflow.com/questions/44544122/perl-one-liner-to-simulate-awk-script/44551215#44551215", "title": "Perl one liner to simulate awk script", "body": "<p>Not sure if awk prints both the start and end of the range, but Perl does:</p>\n\n<pre><code>perl -ne 'if(/regex2/ ... /regex1/){print}' file\n</code></pre>\n\n<p>Edit: Awk (at least Gnu awk) also has a range operator, so this could have been done more simply as:</p>\n\n<pre><code>awk '/regex2/,/regex1/' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497510524, "post_id": 44560202, "comment_id": 76110842, "body": "Thanks for the explanation. That is crazy indeed. I actually gave a very general example in the question, for which your code works. I also need to print the cases where regex1 and regex2 are on the same line(giving priority to regex2). But I believe I can do that on my own, thanks to your explanation."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497511379, "post_id": 44560202, "comment_id": 76111347, "body": "@AkhilAvinash That sounds like it can be done with something like <code>my $p = &#47;regex2&#47; .. &#47;regex1&#47;; print if $p &amp;&amp; ($p == 1 || $p !~ &#47;E&#47;);</code>"}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497518660, "post_id": 44560202, "comment_id": 76116183, "body": "No, that didn&#39;t do the job. When we have something line <code>regex1 regex2</code> It only prints that line but not the lines after, as the value of $p is somehow set to 1E0 inside the line itself. I believe that each $_ is matched with both /regex2/ and /regex1/, and hence the range ends inside the line itself. Let me know if there&#39;s a way around this."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497524066, "post_id": 44560202, "comment_id": 76119845, "body": "@AkhilAvinash Oh! If I understand you correctly, that&#39;s just <code>...</code> instead of <code>..</code>."}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497525166, "post_id": 44560202, "comment_id": 76120592, "body": "I&#39;m sorry this is becoming such a mess. But  there&#39;s another problem. When  we have : <code>regex1 regex2</code>\\n <code>multiple lines</code>  \\n <code>regex1 regex2</code>  The script doesn&#39;t print the last line. The above given practical example is what I&#39;m testing on. My script is <code>perl -ne &#39;my $p = (&#47;123456&#47;...&#47;[0-9]+ \\w+ [0-9]{4}&#47;); print if $p &amp;&amp; ($p == 1 || $p !~ &#47;E&#47;);&#39;  file</code>"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1497509171, "last_edit_date": 1497509171, "creation_date": 1497508306, "answer_id": 44560202, "question_id": 44544122, "link": "https://stackoverflow.com/questions/44544122/perl-one-liner-to-simulate-awk-script/44560202#44560202", "title": "Perl one liner to simulate awk script", "body": "<pre><code>perl -ne 'print if (/regex2/ .. /regex1/) =~ /^\\d+$/'\n</code></pre>\n\n<p>This is slightly crazy, but here's how it works:</p>\n\n<ul>\n<li><code>-n</code> adds an implicit loop over the input lines</li>\n<li>the current line is in <code>$_</code></li>\n<li>the two bare regex matches (<code>/regex2/</code>, <code>/regex1</code>/) implicitly test against <code>$_</code></li>\n<li><p>we use <code>..</code> in scalar context, which turns it into a stateful flip-flop operator</p>\n\n<p>By that I mean: <code>X .. Y</code> starts out in the \"false\" state. In the \"false\" state it only evaluates <code>X</code>. If <code>X</code> returns a false value, it remains in the \"false\" state (and returns false itself). Once <code>X</code> returns a true value, it moves into the \"true\" state and returns true.</p>\n\n<p>In the \"true\" state it only evaluates <code>Y</code>. If <code>Y</code> returns false, it remains in the \"true\" state (and returns true itself). Once <code>Y</code> returns a true value, it moves into the \"false\" state but it still returns true.</p></li>\n<li><p>had we just used <code>print if /regex2/ .. /regex1/</code>, it would have printed all the terminating <code>regex1</code> lines, too</p></li>\n<li>a close reading of <a href=\"https://metacpan.org/pod/perlop#Range-Operators\" rel=\"nofollow noreferrer\">Range Operators in <code>perldoc perlop</code></a> reveals that you can distinguish the end points of the range</li>\n<li>the \"true\" value returned by <code>..</code> is actually a sequence number starting from <code>1</code>, so the start of a range can be identified by checking for <code>1</code></li>\n<li><p>when the end of the range is reached (i.e. we're about to move from the \"true\" state to the \"false\" state again), the return value gets a <code>\"E0\"</code> tacked on to the end</p>\n\n<p>Adding <code>\"E0\"</code> to an integer doesn't affect its numeric value. Perl implicitly converts strings to numbers when needed, and something like <code>\"5E0\"</code> is just scientific notation (meaning <code>5 * 10**0</code>, which is <code>5 * 1</code>, which is <code>5</code>).</p></li>\n<li>the \"false\" value returned by <code>..</code> is the empty string, <code>\"\"</code></li>\n</ul>\n\n<p>We check that the result of <code>..</code> matches the regex <code>/^\\d+$/</code>, i.e. is all digits. This excludes the empty string (because we require at least one digit to match), so we don't print lines outside of the range. It also excludes the last line in our range, because <code>E</code> is not a digit.</p>\n"}], "owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 44560202, "answer_count": 2, "score": 0, "last_activity_date": 1497511287, "creation_date": 1497441451, "last_edit_date": 1497511287, "question_id": 44544122, "link": "https://stackoverflow.com/questions/44544122/perl-one-liner-to-simulate-awk-script", "title": "Perl one liner to simulate awk script", "body": "<p>I'm new to both <code>awk</code> and <code>perl</code>, so please bear with me. \nI have the following <code>awk</code> script:  </p>\n\n<pre><code>awk '/regex1/{p = 0;} /regex2/{p = 1;} p'\n</code></pre>\n\n<p>What this basically does is print all lines staring from line matching with regex2 until a line matching with regex1 is found.</p>\n\n<p>Example:</p>\n\n<pre><code> regex1\n regex2\n line 1\n line 2\n regex1\n regex2\n regex1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> regex2\n line 1\n line 2\n regex2\n</code></pre>\n\n<p>Is it possible to simulate this using a <code>perl</code> one-liner? I know I can do it with a script saved in a file.</p>\n\n<p>Edit: </p>\n\n<p>A practical example:</p>\n\n<blockquote>\n  <p>24 May 2017 17:00:06,827 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n  \n  <p>24 May 2017 17:00:06,828 [INFO] 567890 (Blah : Blah1) Service-name:: Content( May span multiple lines)</p>\n  \n  <p>24 May 2017 17:00:06,829 [INFO] 123456 (Blah : Blah2)\n  Service-name: Multiple line content. Printing Object[ ID1=fac-adasd \n  ID2=123231<br>\n  ID3=123108  Status=Unknown<br>\n  Code=530007   Dest=CA<br>\n  ]</p>\n  \n  <p>24 May 2017 17:00:06,830 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n  \n  <p>24 May 2017 17:00:06,831 [INFO] 567890 (Blah : Blah2) Service-name:: Content( May span multiple lines)  </p>\n</blockquote>\n\n<p>Given the search key 123456 I want to extract the following: </p>\n\n<blockquote>\n  <p>24 May 2017 17:00:06,827 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n  \n  <p>24 May 2017 17:00:06,829 [INFO] 123456 (Blah : Blah2)\n  Service-name: Multiple line content. Printing Object[ ID1=fac-adasd \n  ID2=123231<br>\n  ID3=123108  Status=Unknown<br>\n  Code=530007   Dest=CA<br>\n  ]</p>\n  \n  <p>24 May 2017 17:00:06,830 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n</blockquote>\n\n<p>The following awk script does the job:<br>\n<code>awk '/[0-9]{2}\\s\\w+\\s[0-9]{4}/{n = 0} /123456/ {n =1}n' file</code></p>\n"}, {"tags": ["perl", "redis", "perl-module", "cpan", "nagios"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1497439852, "post_id": 44542634, "comment_id": 76077520, "body": "Do you have <i>any</i> computer with internet access? Then you can create a <a href=\"http://www.cpan.org/misc/how-to-mirror.html\" rel=\"nofollow noreferrer\">CPAN mirror</a> there and copy/mount the resulting CPAN directory to your Nagios station and install from there using regular CPAN tools (including all dep&#39;s). The mirror&#39;s size will be ~3-4 GB and includes the latest versions of <i>all</i> modules. I did that at $work, it works well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497440546, "post_id": 44542634, "comment_id": 76078017, "body": "You can also use <a href=\"https://metacpan.org/pod/distribution/App-FatPacker/bin/fatpack\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/App-FatPacker/bin/fatpack</a> to create a fatpacked version of your check_nagios.pl that has the Redis module built in. You will have to do a bit of tweaking to get it to pack exactly what you want. I gave it a short try and think that should work."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1497441853, "last_edit_date": 1497441853, "creation_date": 1497438195, "answer_id": 44542946, "question_id": 44542634, "link": "https://stackoverflow.com/questions/44542634/how-can-i-install-redis-perl-library-manually-i-e-offline-and-from-where-can-i-g/44542946#44542946", "title": "How Can I Install Redis perl library Manually i.e offline.And From Where Can I Get All The Dependencies To Install", "body": "<p>You can install thing manually, of course, but it will be painful.</p>\n\n<p>You can download the <a href=\"https://cpan.metacpan.org/authors/id/D/DA/DAMS/Redis-1.991.tar.gz\" rel=\"nofollow noreferrer\">Redis distribution tarball</a> from CPAN. But it might well require other modules that you don't have installed. You can see its list of requirements in its <a href=\"https://metacpan.org/source/DAMS/Redis-1.991/META.yml\" rel=\"nofollow noreferrer\">META.yml</a> file. So you can download the distribution tarballs for each of those modules too. But, of course, each of those modules is likely to require other modules that you don't have. So you can look at all of their META.yml files. And so it goes on...</p>\n\n<p>Honestly, it might be easier to work out how hard it would be to get the machine connected to the internet temporarily :-)</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497440578, "post_id": 44543813, "comment_id": 76078040, "body": "You write your notes in Q&amp;A style and they&#39;re in English?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497440597, "post_id": 44543813, "comment_id": 76078060, "body": "Also, are you coming to the German Perl Workshop in Hamburg in two weeks? <a href=\"http://act.yapc.eu/gpw2017\" rel=\"nofollow noreferrer\">act.yapc.eu/gpw2017</a>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497440753, "post_id": 44543813, "comment_id": 76078158, "body": "Exactly. I found this Q&amp;A style very helpful for me. Plus: in German it sounds kindergarten like to me. &quot;Finde einen CPAN-Mirror hier: ...&quot; sounds really odd."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1497440931, "post_id": 44543813, "comment_id": 76078294, "body": "That&#39;s neat. And I agree, it&#39;s really hard for me to do stuff in German nowadays. My <code>$work</code> has a rule to write commit messages in German. My stuff sounds so wrong to me."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1497444074, "last_edit_date": 1497444074, "creation_date": 1497440553, "answer_id": 44543813, "question_id": 44542634, "link": "https://stackoverflow.com/questions/44542634/how-can-i-install-redis-perl-library-manually-i-e-offline-and-from-where-can-i-g/44543813#44543813", "title": "How Can I Install Redis perl library Manually i.e offline.And From Where Can I Get All The Dependencies To Install", "body": "<p>Because I had a similar problem at work I happened to write my personal Q&amp;A on this topic. Here it is:</p>\n\n<pre><code>Q: How to install CPAN modules without Internet access?\nA: 1. Install CPAN::Mini on the internet machine:\n          $ cpan CPAN::Mini\n   2. Find a CPAN mirror here: http://mirrors.cpan.org/#de\n          e.g. http://ftp.hosteurope.de/pub/CPAN/\n   3. on the internet machine:\n          $ minicpan -l /path/to/local/cpan/mirror -r http://ftp.hosteurope.de/pub/CPAN/\n   4. Copy /path/to/local/cpan/mirror to the non-internet machine (or mount it)\n   5. On the non-internet machine add the directory to CPAN's search path:\n          $ cpan\n              cpan shell -- CPAN exploration and modules installation (v1.xxxx)\n            cpan&gt; o conf urllist unshift file:///path/to/local/cpan/mirror\n            cpan&gt; o conf commit\n            commit: wrote /home/user/.cpan/CPAN/MyConfig.pm\n   6. Install as usual on the non-internet machine.\n</code></pre>\n\n<p>To update your CPAN mirror go to your internet machine and repeat steps 3 and 4.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://www.perlmonks.org/?node_id=590386\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=590386</a></li>\n<li><a href=\"http://www.cpan.org/misc/how-to-mirror.html\" rel=\"nofollow noreferrer\">http://www.cpan.org/misc/how-to-mirror.html</a></li>\n<li><a href=\"http://search.cpan.org/~rjbs/CPAN-Mini-1.111016/lib/CPAN/Mini.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~rjbs/CPAN-Mini-1.111016/lib/CPAN/Mini.pm</a></li>\n<li><a href=\"http://search.cpan.org/~rjbs/CPAN-Mini-1.111016/bin/minicpan\" rel=\"nofollow noreferrer\">http://search.cpan.org/~rjbs/CPAN-Mini-1.111016/bin/minicpan</a></li>\n</ul>\n\n<hr>\n\n<p><strong>Some notes</strong></p>\n\n<p>Although CPAN says the initial mirror will only occupy around 1 GB it will need around 3.5 GB. I think their documentation is outdated in this regard.</p>\n\n<p>The mirror will initially contain the latest versions of <em>all</em> modules on CPAN. Every time you update your mirror the then-latest versions will be downloaded (leaving the old versions on your disk), so the mirror will <em>grow</em> with each update as new versions arrive.</p>\n\n<p>I updated my mirror three or four times and it now has 3.9 GB.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1497442972, "creation_date": 1497442972, "answer_id": 44544706, "question_id": 44542634, "link": "https://stackoverflow.com/questions/44542634/how-can-i-install-redis-perl-library-manually-i-e-offline-and-from-where-can-i-g/44544706#44544706", "title": "How Can I Install Redis perl library Manually i.e offline.And From Where Can I Get All The Dependencies To Install", "body": "<p>You could fatpack all the dependencies you cannot install into the check_nagios.pl using <a href=\"https://metacpan.org/release/App-FatPacker\" rel=\"nofollow noreferrer\">App::FatPacker</a>. I'll outline how to do that.</p>\n\n<p>First, let's make sure that <a href=\"https://github.com/willixix/WL-NagiosPlugins/blob/master/check_redis.pl#L13\" rel=\"nofollow noreferrer\">the Nagios plugin</a> has a licence that allows us to do this.</p>\n\n<blockquote>\n  <p>This program is free software; you can redistribute it and/or modify\n  it under the terms of the GNU General Public License as published by\n  the Free Software Foundation; either version 2 of the License, or\n  (at your option) any later version.</p>\n</blockquote>\n\n<p>Ok, that's great. We're allowed to alter the source. Now let's clone it so we have the whole thing.</p>\n\n<pre><code>$ git clone git@github.com:willixix/WL-NagiosPlugins.git\n$ cd WL-NagiosPlugins\n</code></pre>\n\n<p>Now we need to install App::FatPacker to our local Perl. We need to do this on a machine were installing stuff from the internet is not a problem. You can do it on the machine you used to write your question.</p>\n\n<pre><code>$ cpanm App::FatPacker\n</code></pre>\n\n<p>Afterwards, we need to also install all the dependencies. We know this needs Redis, so</p>\n\n<pre><code>$ cpanm Redis\n</code></pre>\n\n<p>Now typically all you need to do is run the <a href=\"https://metacpan.org/pod/distribution/App-FatPacker/bin/fatpack\" rel=\"nofollow noreferrer\"><code>fatpack pack</code></a> command, but that would pack everything. And we don't really need that. We do have core modules on the target system after all. So we will do this step by step.</p>\n\n<p>First, we need to tell <code>fatpack</code> to find all the dependencies.</p>\n\n<pre><code>$ fatpack trace check_redis.pl\n</code></pre>\n\n<p>This will create a <code>fatpacker.trace</code> file. </p>\n\n<pre><code>$ cat fatpacker.trace \nIO/Handle.pm\nData/Dumper.pm\nIO.pm\nbytes.pm\nSocket.pm\noverload.pm\nvars.pm\nRedis/Sentinel.pm\nlib.pm\nSymbol.pm\nRedis.pm\nIO/Select.pm\nPerlIO/via/Timeout.pm\nbase.pm\nScalar/Util.pm\nfields.pm\nIO/Socket/UNIX.pm\nDynaLoader.pm\nconstant.pm\noverloading.pm\nErrno.pm\nGetopt/Long.pm\nwarnings/register.pm\nCarp.pm\nIO/Socket.pm\nSelectSaver.pm\nExporter/Heavy.pm\nIO/Socket/Timeout.pm\nList/Util.pm\nSub/Util.pm\nFcntl.pm\nTime/HiRes.pm\nIO/Socket/INET.pm\nTry/Tiny.pm\nConfig.pm\nText/ParseWords.pm\n</code></pre>\n\n<p>I would suggest removing everything that looks like a core module. You turn the file names back into module names by replacing <code>/</code> with <code>::</code> and removing the <code>.pm</code>, and then pass that into the <code>corelist</code> utility that ships with Perl on the target machine. All the pragmata (the ones that start with small letters) can be ignored, they are part of the core.</p>\n\n<p>Here is the list after I cut it down to what I think makes sense to include. This might not be complete, or incorrect, but I can't try on your machine. The file now looks like this.</p>\n\n<pre><code>$ cat fatpacker.trace \nRedis/Sentinel.pm\nRedis.pm\nTry/Tiny.pm\n</code></pre>\n\n<p>Now we follow the manual in <a href=\"https://metacpan.org/pod/distribution/App-FatPacker/bin/fatpack#RECIPES\" rel=\"nofollow noreferrer\">RECIPES in the <code>fatpack</code> documentation</a>.</p>\n\n<pre><code>$ fatpack packlists-for `cat fatpacker.trace` &gt;packlists\n</code></pre>\n\n<p>The <code>packlists</code> file contains a couple of paths for where to find the packlists for those modules. This is specific to your Perl installation.</p>\n\n<pre><code>$ fatpack tree `cat packlists`\n</code></pre>\n\n<p>This will create a directory <code>fatlib</code> that contains all the stuff we want to bundle.</p>\n\n<pre><code>$ tree fatlib/\nfatlib/\n\u251c\u2500\u2500 Redis\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Hash.pm\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 List.pm\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Sentinel.pm\n\u251c\u2500\u2500 Redis.pm\n\u2514\u2500\u2500 Try\n    \u2514\u2500\u2500 Tiny.pm\n\n2 directories, 5 files\n</code></pre>\n\n<p>Last, we need to run the actual packing command.</p>\n\n<pre><code>$ fatpack file check_redis.pl &gt;check_redis.packed.pl\n</code></pre>\n\n<p>And now we have a file called <code>check_redis.packed.pl</code> that. If you open that and look at it, you'll see a <code>BEGIN</code> block that loads a bunch of stuff. That stuff is the dependencies that you could not install. They are now bundled into the script.</p>\n\n<p>Move that script to the machine with your Nagios, and use it instead of the <code>check_nagios.pl</code>. It should now just work.</p>\n\n<p>Please note that I have not actually tried if it works because I neither have a Redis nor a Nagios to try it. But it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4886019, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FM2wSn2Logg/AAAAAAAAAAI/AAAAAAAAAC8/RHnGs4G4rO0/photo.jpg?sz=128", "display_name": "Mehdi Talebi", "link": "https://stackoverflow.com/users/4886019/mehdi-talebi"}, "is_accepted": false, "score": 0, "last_activity_date": 1569759406, "creation_date": 1569759406, "answer_id": 58155130, "question_id": 44542634, "link": "https://stackoverflow.com/questions/44542634/how-can-i-install-redis-perl-library-manually-i-e-offline-and-from-where-can-i-g/58155130#58155130", "title": "How Can I Install Redis perl library Manually i.e offline.And From Where Can I Get All The Dependencies To Install", "body": "<p>This worked for me in centOs 7.</p>\n\n<p>step 1: Download dependencies in a centOs7 that is connected to internet by these commands:</p>\n\n<pre><code>yumdownloader --destdir=/etc/LinuxRepos/Redis epel-release\nyumdownloader --destdir=/etc/LinuxRepos/Redis jemalloc\nyumdownloader --destdir=/etc/LinuxRepos/Redis epel-release\n</code></pre>\n\n<p>step 2: copy downloaded files from /etc/LinuxRepos/Redis and copy them to destination centOS 7.</p>\n\n<p>step 3: Install packages by </p>\n\n<pre><code>yum localinstal epel-release-7-11.noarch.rpm\nyum localinstall jemalloc-3.6.0-1.el7.x86_64.rpm\nyum localinstall epel-release-7-11.noarch.rpm\n</code></pre>\n\n<blockquote>\n  <p>NOTICE: The name of files in step 3 may be changed due to current last\n  version.</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 8154592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7f73c9848183b5a19c675c483c51b4?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj", "link": "https://stackoverflow.com/users/8154592/manoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1569759406, "creation_date": 1497437324, "question_id": 44542634, "link": "https://stackoverflow.com/questions/44542634/how-can-i-install-redis-perl-library-manually-i-e-offline-and-from-where-can-i-g", "title": "How Can I Install Redis perl library Manually i.e offline.And From Where Can I Get All The Dependencies To Install", "body": "<p>I am trying to install check_redis plugin and for that i need redis perl library but i don't have access to CPAN and internet.So Is there any way to install by downloading zip file and all the dependencies.I am using nagios core.<a href=\"https://exchange.nagios.org/directory/Plugins/Databases/check_redis-2Epl/details\" rel=\"nofollow noreferrer\">Here is the plugin i am trying to install</a> </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497447101, "post_id": 44541789, "comment_id": 76083111, "body": "You&#39;d probably find it a lot easier and more reliable to use a HTML parser rather than hacking around with the content using regex etc..."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497499573, "post_id": 44541789, "comment_id": 76106479, "body": "With HTML PARSER i feel it is impossible to do. Could please show me examples @ChrisTurner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497517741, "post_id": 44541789, "comment_id": 76115556, "body": "Typing &quot;HTML parsing perl&quot; into the search box got me dozens of examples that you could look at"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497517944, "post_id": 44541789, "comment_id": 76115677, "body": "In regards to the warning you&#39;re getting, it&#39;s due to your code to extract the table rows returning an undefined cos it&#39;s not working properly."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497585784, "post_id": 44541789, "comment_id": 76149526, "body": "am not clear what you trying to convey me is your are talking about  my $cleaned is not defined .@ChrisTurner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497603083, "post_id": 44541789, "comment_id": 76157471, "body": "Not quite - I&#39;m talking about what is being assigned to <code>$cleaned</code>. You&#39;re concatenating 3 things, two of which are string literals, the middle one is a complicated expression. The warning is telling you that one of those 3 things is undefined, which means the complicated expression isn&#39;t working"}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1497613616, "post_id": 44541789, "comment_id": 76164521, "body": "But without taking that expression how can i fix the expected output. Because that line is necessary one. @ChrisTurner"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1497631226, "post_id": 44541789, "comment_id": 76176026, "body": "You have <code>my $cleaned = \u2026 . ( sort {\u2026} grep {\u2026} split \u2026 join \u2026 &lt;$fh&gt; )[0] . \u2026;</code>. From my experience with such code it is better to step back and use some intermediate variables for the subresults and split the code into multiple statements. You can then perhaps better localize <i>what</i> exactly is undefined here."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497855926, "post_id": 44590448, "comment_id": 76233983, "body": "But your script will just print that maximum name and i want to remove other minimum named strings (like rev1,rev2 and rev3) and using argv[0] we should give the exact .html file location .I need to read the entire folder and take the all .html files.I think this method wont support for taking all .html files and removing the minimum digit character strings(i.e rev1,rev2 and rev3 expect rev4).beacuse here rev4 is maximum one. @Chris Turner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497865144, "post_id": 44590448, "comment_id": 76239681, "body": "OK - I&#39;ve simplified the example so that it focuses on the important part, namely the parsing of the HTML and extracting out the part you want. How you specify <code>$max_file</code> or what you do with <code>$cleaned</code> afterwards is up to you."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497866848, "post_id": 44590448, "comment_id": 76240854, "body": "updated my new code .Here the code fails to run for multiple .html files under my folders and sub folders.If i gave the .html file location manually then it runs fine.If i try to use it for multiple .html files under my folders and sub folders that your code fails,This is what i about to convey you.My query is i want to do same action for multple .html files  @Chris Turner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497867309, "post_id": 44590448, "comment_id": 76241181, "body": "Obviously what you&#39;ve done won&#39;t work - you&#39;re combining all the filenames into <code>$max_file</code> which won&#39;t be a valid file name. You need to pass each member of <code>@files</code> through the parsing code 1 at a time with a for loop."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497871469, "post_id": 44590448, "comment_id": 76244024, "body": "i had tried woth for loop too it fails will update in my code.You can view it @Chris Turner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497873687, "post_id": 44590448, "comment_id": 76245534, "body": "How does it fail? Aside from that <code>print @nodes;</code> being outside the <code>if</code> statement, it looks like it should process all the files and update them."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497874141, "post_id": 44590448, "comment_id": 76245853, "body": "But the nothing is processing inside for loop. It looks Empty @Chris Turner"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497876292, "post_id": 44590448, "comment_id": 76247356, "body": "That means the files you&#39;re trying to process don&#39;t have any of the HTML you&#39;re looking for inside of them. I tested my example code with the example HTML you have in the question and it pulled out the right chunk."}, {"owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "edited": false, "score": 0, "creation_date": 1497931747, "post_id": 44590448, "comment_id": 76272689, "body": "yes am looking inside the .html files.Inside those html files trying to sort the contents (i.e rev1,rev2 and rev3,rev4).Here rev4 is the maximum one so i try to remove the other terms like rev1,rev2 and rev3 from my .html file @Chris Turner"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1497864943, "last_edit_date": 1497864943, "creation_date": 1497619613, "answer_id": 44590448, "question_id": 44541789, "link": "https://stackoverflow.com/questions/44541789/how-can-we-delete-the-table-row-by-specific-word-along-with-its-digits-from-all/44590448#44590448", "title": "How can we delete the table row by specific word along with its digits from all .html files using perl?", "body": "<p>The warning you're getting is from concatenating an undefined value. You're getting an undefined value because your attempt to grab out all the relevant chunks of HTML from the file isn't working.</p>\n\n<p>Trying to parse HTML with regular expressions isn't very reliable. It's far better and easier to use one of the many existing modules for parsing HTML as they should be able to cope with whatever HTML you happen to end up with.</p>\n\n<p>Here is an example of how to do this. </p>\n\n<p>It uses an XPath query to get the <code>a</code> tags we're after and sorts them in descending order by the <code>href</code> attribute. If there were any found, it takes the first one and wraps up the grandparent inside a <code>table</code> tag.</p>\n\n<pre><code>use HTML::TreeBuilder::XPath;\nmy $tree=new HTML::TreeBuilder::XPath;\n\n$tree-&gt;parse_file($max_file);\n\nmy @nodes=sort {$b-&gt;attr(\"href\") cmp $a-&gt;attr(\"href\")} $tree-&gt;findnodes(\"//tr/td/a[contains(\\@href,'/rev')]\");\nif($#nodes!=-1)\n    {\n    my $cleaned=\"&lt;table&gt;\".$nodes[0]-&gt;parent-&gt;parent-&gt;as_HTML.\"&lt;/table&gt;\";\n    }\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8112693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160bb7d1fdfe7de4fa25bc7daa56db45?s=128&d=identicon&r=PG&f=1", "display_name": "closedaccount", "link": "https://stackoverflow.com/users/8112693/closedaccount"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1497871596, "creation_date": 1497435181, "last_edit_date": 1497871596, "question_id": 44541789, "link": "https://stackoverflow.com/questions/44541789/how-can-we-delete-the-table-row-by-specific-word-along-with-its-digits-from-all", "title": "How can we delete the table row by specific word along with its digits from all .html files using perl?", "body": "<hr>\n\n<p>In the following code i had tried to delete the table from the .html files if it contains miminum digits along with specific character.Here every .html files will have some table row contents.Here the contents are named as like(rev1,rev2,rev3,rev4).</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\n#use diagnostics;\nuse File::Find::Rule;\n\nmy $output_dir = \"/projects/Griffin\"; \n\nmy @files_filter = sort\n   File::Find::Rule-&gt;file()-&gt;name('*.html')-&gt;in($output_dir);\n#print @files_filter;\nmy $max_file = pop @files_filter;\n#print $max_file;\nunlink $_ for @files_filter;\n\nopen my $fh, '&lt;', $max_file or die $!;\n#######refrence from #linux command #######\n#perl -e 'print q(&lt;table&gt;&lt;tr class=\"normal\"&gt;). (sort {$b cmp $a} grep {/rev/i} split /(?:&lt;\\/?tr[^&gt;]*&gt;\\s*)+/i, join \"\", &lt;&gt;)[0] .q(&lt;/tr&gt;&lt;/table&gt;)' database.html &gt; database_reedit.html\nmy $cleaned = '&lt;table&gt;&lt;tr class=\"normal\"&gt;'.\n (\n      sort {\n          my ($n) = $b =~ /rev(\\d+)\\.html/;\n         my ($m) = $a =~ /rev(\\d+)\\.html/;\n         $n &lt;=&gt; $m\n#$b &lt;=&gt; $a\n      }\n\n          grep {/rev(\\d+)/i}\n             split /(?:&lt;\\/?tr[^&gt;]*&gt;\\s*)+/i,   \n                join \"\", &lt;$fh&gt;\n     )[0] .\n    '&lt;/tr&gt;&lt;/table&gt;';\n#print $cleaned;\nclose $fh;\n\nopen my $fh2, '&gt;', $max_file or die $!;\nprint $fh2 $cleaned;\nclose $fh2;\n</code></pre>\n\n<p>From my above code i got the following error i am unable to fix the above error why it ocurs?</p>\n\n<p><strong>Use of uninitialized value in concatenation (.) or string at sample_rev.pl line 28,</strong></p>\n\n<p>WHat i trying to convey you is from the code :</p>\n\n<pre><code>Here print @filter_files will have the following print statements:\n\n/projects/griffin/chiptop/chiptop.html\n/projects/griffin/svn/svn.hmtl\n/project/griffin/chiptop/rev8/rev8.html\n</code></pre>\n\n<p>So now inside the chiptop.html i will have the following table row lines.</p>\n\n<pre><code>&lt;tr class=\"normal\"&gt;\n                &lt;td&gt;&lt;a href=\"rev7/rev7.html\"&gt;rev1&lt;/a&gt;&lt;/td&gt;\n                &lt;td&gt; 88.89% &lt;/td&gt;\n                &lt;td&gt; 88.89%&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"normal\"&gt;\n                &lt;td&gt;&lt;a href=\"rev2/rev2.html\"&gt;rev2&lt;/a&gt;&lt;/td&gt;\n                &lt;td&gt; 98.41% &lt;/td&gt;\n                &lt;td&gt; 98.41%&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"normal\"&gt;\n                &lt;td&gt;&lt;a href=\"rev8/rev8.html\"&gt;rev3&lt;/a&gt;&lt;/td&gt;\n                &lt;td&gt; 98.41% &lt;/td&gt;\n                &lt;td&gt; 100.00%&lt;/td&gt;\n            &lt;/tr&gt;\n</code></pre>\n\n<p>So i tried to remove the table row which is not having maximum digit along with the word rev.So i had tried the above code to remove minimum digits from the html files .But it fails in my case .How can i do it?</p>\n\n<p>IF the above file run properly means the only following contents should appear from the chiptop.html and other table row contents to be removed because here rev8 is the maximum one compared to other rev.</p>\n\n<pre><code>&lt;tr class=\"normal\"&gt;\n                    &lt;td&gt;&lt;a href=\"rev8/rev8.html\"&gt;rev3&lt;/a&gt;&lt;/td&gt;\n                    &lt;td&gt; 98.41% &lt;/td&gt;\n                    &lt;td&gt; 100.00%&lt;/td&gt;\n                &lt;/tr&gt;\n</code></pre>\n\n<p>NEW UPDATED CODE:</p>\n\n<pre><code>#!/usr/local/bin/perl -I /projects/lib\nuse strict;\nuse warnings;\nuse File::Find::Rule;\nuse HTML::TreeBuilder::XPath;\nmy $tree=HTML::TreeBuilder::XPath-&gt;new();\nmy $output_dir=\"/projects/Xenon_R3\";\nmy @files=File::Find::Rule-&gt;file()\n                -&gt;name('*.html')                \n                #-&gt;not( File::Find::Rule-&gt;name(qr/\\d/) )\n                -&gt;in($output_dir);\n\n\n# my $max_file=join \"\\n\",@files;\n    #print $max_file;\nfor $max_file (@files)\n{\n$tree-&gt;parse_file($max_file);\n\nmy @nodes=sort {$b-&gt;attr(\"href\") cmp $a-&gt;attr(\"href\")} $tree-&gt;findnodes(\"//tr/td/a[contains(\\@href,'/rev')]\");\nprint @nodes;\nif($#nodes!=-1)\n    {\n    my $cleaned=\"&lt;table&gt;\".$nodes[0]-&gt;parent-&gt;parent-&gt;as_HTML.\"&lt;/table&gt;\";\n#last;\nprint $cleaned;\n\n\n\nopen my $fh2, '&gt;', $max_file or die $!;\nprint $fh2 $cleaned;\nclose $fh2;\n}\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "html-entities", "html-encode"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 4, "creation_date": 1497433709, "post_id": 44541090, "comment_id": 76072960, "body": "Why would you expect there to be? The function doesn&#39;t print anything, it just modifies <code>$_</code>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5207995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mgCHnR0Kb2k/AAAAAAAAAAI/AAAAAAAABso/wC5zrlRv700/photo.jpg?sz=128", "display_name": "Atlas Sullivan", "link": "https://stackoverflow.com/users/5207995/atlas-sullivan"}, "edited": false, "score": 0, "creation_date": 1497570100, "post_id": 44541249, "comment_id": 76146030, "body": "wait, I can&#39;t believe I was <i>that</i> stupid, I completely forgot you needed to do that."}], "tags": [], "owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "is_accepted": true, "score": 1, "last_activity_date": 1497444921, "last_edit_date": 1497444921, "creation_date": 1497433846, "answer_id": 44541249, "question_id": 44541090, "link": "https://stackoverflow.com/questions/44541090/perl-script-with-library-function-produces-no-output/44541249#44541249", "title": "Perl script with library function produces no output", "body": "<p>If you want to see some output, you'd better <code>print</code>/<code>say</code> the return value:</p>\n\n<pre><code>use HTML::Entities;\n\nuse warnings;\n\nwhile (&lt;&gt;) {\n    print decode_entities($_);\n}\n</code></pre>\n\n<p>Since in void context, the function modifies the string in-place, you could convert your script into a one-liner pretty easily:</p>\n\n<pre><code>perl -MHTML::Entities -pe 'decode_entities($_)'\n</code></pre>\n\n<p>Like a <code>while (&lt;&gt;)</code>, loop, the <code>-p</code> switch loops over each line of the input (either standard input, or the filename arguments), with the addition of a <code>print</code> in the <code>continue</code> block, which is run once at the end of each iteration of the loop.</p>\n"}], "owner": {"reputation": 41, "user_id": 5207995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mgCHnR0Kb2k/AAAAAAAAAAI/AAAAAAAABso/wC5zrlRv700/photo.jpg?sz=128", "display_name": "Atlas Sullivan", "link": "https://stackoverflow.com/users/5207995/atlas-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 44541249, "answer_count": 1, "score": -2, "last_activity_date": 1497444921, "creation_date": 1497433427, "last_edit_date": 1497442406, "question_id": 44541090, "link": "https://stackoverflow.com/questions/44541090/perl-script-with-library-function-produces-no-output", "title": "Perl script with library function produces no output", "body": "<p>I created this small little maintenance script to unescape HTML entities.</p>\n\n<pre><code>use HTML::Entities;\n\nuse warnings;\n\nwhile ( &lt;&gt; ) {\n    decode_entities($_);\n}\n</code></pre>\n\n<p>The problem is, it produces no output when I pipe it through bash like so,</p>\n\n<pre><code>echo \"&amp;quot;a&amp;quot;\" | perl ../../tmp.pl\n</code></pre>\n"}, {"tags": ["regex", "perl", "bioinformatics", "dna-sequence", "bioperl"], "comments": [{"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1497433495, "post_id": 44541031, "comment_id": 76072787, "body": "<code>^</code> should be in <code>[]</code> : <code>if (&#47;[^ATCG]&#47;)</code>"}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "reply_to_user": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1497433629, "post_id": 44541031, "comment_id": 76072896, "body": "okay, now it prints the sequence instead of the error message, BUT: it prints the sequence even when it includes invalid letters"}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "reply_to_user": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1497433915, "post_id": 44541031, "comment_id": 76073129, "body": "also not working :/"}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1507920466, "post_id": 44541031, "comment_id": 80419300, "body": "Be advised: bioperl&#39;s <code>seqIO</code> is ~10x faster than reading fasta files in native perl.  If you&#39;re dealing with higher organisms (large genome), this can be a substantial boon."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1497433772, "post_id": 44541145, "comment_id": 76073022, "body": "doesn&#39;t work either, prints out &#39;invalid sequence&#39; even when sequence is valid"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 2, "creation_date": 1497433886, "post_id": 44541145, "comment_id": 76073113, "body": "@ic23oluk Because of new line. Add  <code>chomp</code> in your script."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1497434634, "post_id": 44541145, "comment_id": 76073675, "body": "@ic23oluk In every fasta file last line is a new line. Please remove die from your <code>else</code> condition. And print the <code>$sequence</code>."}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1497435538, "post_id": 44541145, "comment_id": 76074318, "body": "that&#39;s not exactly what i want: If i leave out &#39;die&#39; it prints the sequence even when it harbors invalid letters, but without the lines in which these invalid letters are. I want to write an algorithm that stops when one or more invalid letters are included and return an error message"}, {"owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "edited": false, "score": 0, "creation_date": 1497437009, "post_id": 44541145, "comment_id": 76075368, "body": "When removing the last newline in the fasta file it works as desired, but how can I do this automatically?"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1497437530, "last_edit_date": 1497437530, "creation_date": 1497433580, "answer_id": 44541145, "question_id": 44541031, "link": "https://stackoverflow.com/questions/44541031/perl-check-for-valid-dna-sequence-with-regex/44541145#44541145", "title": "perl check for valid DNA sequence with regex", "body": "<p>The problem is here <code>/^[ATCG]/</code> this line should be <code>/^[ATCG]+$/</code></p>\n\n<p>Your code should be</p>\n\n<pre><code>chomp;  \nnext if (/^&gt;/); # skip for header\nnext if(/^\\s*$/);  #skip for empty line\nif (/^[ATCG]+$/){\n        $sequence .= $_;\n    } else {\n        die \"invalid sequence\\n\";\n    }\n</code></pre>\n\n<p>You are only consider the beginning of the line start wit A or T or G or C. You should expand the matches.</p>\n"}], "owner": {"reputation": 113, "user_id": 8159524, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2c3d055c75d0873fb3c0b190620c9ab5?s=128&d=identicon&r=PG&f=1", "display_name": "ic23oluk", "link": "https://stackoverflow.com/users/8159524/ic23oluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 44541145, "answer_count": 1, "score": 1, "last_activity_date": 1497437530, "creation_date": 1497433281, "question_id": 44541031, "link": "https://stackoverflow.com/questions/44541031/perl-check-for-valid-dna-sequence-with-regex", "title": "perl check for valid DNA sequence with regex", "body": "<p>I want to write a subroutine that takes a FASTA file as an argument and prints out the sequence (without the header). \nThe subroutine should check if the sequence contains any other letters than DNA bases (A, T, G, C).</p>\n\n<p>Here's my code:</p>\n\n<pre><code>scalar_sequence (\"sequence.fa\");\n\nsub scalar_sequence {\n    my $file = $_[0];\n    my $sequence;\n    open (READ, $file) || die \"Cannot open $file: $!.\\n\";\n    while (&lt;READ&gt;){\n        if (/^&gt;/){\n            next;\n        } \n        if (/^[ATCG]/){\n            $sequence .= $_;\n        } else {\n            die \"invalid sequence\\n\";\n        }\n    }\n    print $sequence, \"\\n\";\n}\n</code></pre>\n\n<p>When I run this code, I get 'invalid sequence' as output.\nWhen I leave the 'else' out, it prints out the sequence even when the sequence contains another letter.</p>\n\n<p>What's the problem?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "awk", "readfile", "logfile"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1497424438, "post_id": 44537880, "comment_id": 76066506, "body": "Suggestion: please show what you tried. (Edit the question to add your code.)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "edited": false, "score": 1, "creation_date": 1497425837, "post_id": 44537912, "comment_id": 76067484, "body": "Thank you @PS. it works perfect, my bad didn&#39;t consider grep or sed earlier"}], "tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 0, "last_activity_date": 1497424752, "last_edit_date": 1497424752, "creation_date": 1497424415, "answer_id": 44537912, "question_id": 44537880, "link": "https://stackoverflow.com/questions/44537880/how-to-read-a-particular-string-from-the-log-file-inside-a-perl-script/44537912#44537912", "title": "how to read a particular string from the log file inside a perl script", "body": "<pre><code>grep -oP 'tenantName\": \"\\K[^\"]+' inputfile\nsale1\n</code></pre>\n\n<p>or <code>sed</code>:</p>\n\n<pre><code>sed -r 's/.*\"tenantName\": \"([^\"]+).*/\\1/g' inputfile\nsale1\n</code></pre>\n\n<p>Exaplanation: \n<code>grep</code> : <code>-o</code> flag will print only the matching part of the string not the whole line.\n<code>-P</code> flag will enable the <code>perl</code> regex for <code>grep</code>. \n<code>\\K</code>: Means forget everything on the left of it.    </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "edited": false, "score": 0, "creation_date": 1500918427, "post_id": 44540518, "comment_id": 77536084, "body": "Thanks for you suggestions"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1497431846, "creation_date": 1497431846, "answer_id": 44540518, "question_id": 44537880, "link": "https://stackoverflow.com/questions/44537880/how-to-read-a-particular-string-from-the-log-file-inside-a-perl-script/44540518#44540518", "title": "how to read a particular string from the log file inside a perl script", "body": "<p>Don't awk and sed inside a perl script anyway. </p>\n\n<p>This is JSON, so best parsed as JSON. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse JSON;\n\nwhile ( &lt;&gt; ) {\n   my ( $json_text ) = m/(\\{.*\\})/; \n   my $json = decode_json ( $json_text ); \n   print $json -&gt; {extraInfo} -&gt; {tenantName};\n}\n</code></pre>\n\n<p>Or simplifying down to one liners, because that's the hoopy thing to be doing:</p>\n\n<pre><code>perl -MJSON -ne 'print decode_json (/(\\{.*\\})/ &amp;&amp; $1)-&gt;{extraInfo}{tenantName}'\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 44540518, "answer_count": 2, "score": -2, "last_activity_date": 1500918385, "creation_date": 1497424295, "last_edit_date": 1500918385, "question_id": 44537880, "link": "https://stackoverflow.com/questions/44537880/how-to-read-a-particular-string-from-the-log-file-inside-a-perl-script", "title": "how to read a particular string from the log file inside a perl script", "body": "<p>sample log,</p>\n\n<blockquote>\n  <p>2016-03-29 10:57:28 UTC 642 [31871] INFO node information:\n  {\"datacenter\": \"TEST-DC\", \"infraType\": \"saas\", \"service\": \"fusion\",\n  \"extraInfo\": {\"systemType\": \"secondary-ha1\", \"tenantType\": \"sales\",\n  \"tenantName\": \"sale1\"}</p>\n</blockquote>\n\n<p>I want to read \"tenantName\": \"sale1\" and the final string I need is \"sale1\"</p>\n\n<p>tried with awk and cut inside the Perl script but didn't work out Any suggestions and/or hints will be appreciable</p>\n\n<p>I got the solution with the answer from @Sobrique </p>\n\n<p>used the modules JSON &amp; List::MoreUtils</p>\n\n<pre><code>find( \\&amp;Count, $logDir);\n\nmy @uniqtotal = uniq @totCount;\n$totalcount = @uniqtotal;\n\nsub Count {\n    if( $File::Find::name =~m!$logDir/(.*?)/$pattern! and -f $File::Find::name ) {\n    my $jsonLine = `grep 'tenantName' $File::Find::name`;\n    if ($jsonLine ne \"\") {\n      $jsonLine =~ m/(\\{.*\\})/ ; \n      my $json_text = $1;\n      my $json = decode_json ( $json_text ); \n      push @totCount, $json -&gt; {extraInfo} -&gt; {tenantName};\n    }\n   }\n}\n</code></pre>\n"}, {"tags": ["perl", "email", "gmail", "google-workspace"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1497415736, "post_id": 44535293, "comment_id": 76062341, "body": "I&#39;m voting to close this question as off-topic because this is obviously not related to Perl  or programming at all but to the content of the delivered mail. It was probably considered a phishing mail because of the syntax of the included URL."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497420266, "post_id": 44535293, "comment_id": 76064217, "body": "I agree with Steffen. If you&#39;re a legitimate Google customer and you&#39;re allowed to use their mail relay, just write them and explain the situation. You might be able to go with their <i>abuse</i> address. Typically that&#39;s used to report abuse, but have a situation where your legitimate stuff is falsely classified as something abuse-related. Let them know. Ask them nicely. They will probably fix it."}, {"owner": {"reputation": 141, "user_id": 4880521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d886f28133c30b5739b82bbf636fcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Tarbet", "link": "https://stackoverflow.com/users/4880521/cole-tarbet"}, "edited": false, "score": 0, "creation_date": 1497464051, "post_id": 44535293, "comment_id": 76094366, "body": "Well ok.  I wasn&#39;t sure if it was some kind of bad coding practice that I wasn&#39;t aware of.   Maybe it&#39;s ok for the correct answer to be &quot;you did everything correctly&quot;."}, {"owner": {"reputation": 558, "user_id": 1901635, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2F7r9QDEZoA/AAAAAAAAAAI/AAAAAAAAAGI/e782I8i7qUQ/photo.jpg?sz=128", "display_name": "Mike Brockington", "link": "https://stackoverflow.com/users/1901635/mike-brockington"}, "edited": false, "score": 0, "creation_date": 1555409322, "post_id": 44535293, "comment_id": 98092146, "body": "For me, this was a useful example of a complete/working script!!"}], "owner": {"reputation": 141, "user_id": 4880521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d886f28133c30b5739b82bbf636fcdb?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Tarbet", "link": "https://stackoverflow.com/users/4880521/cole-tarbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497413615, "creation_date": 1497413615, "question_id": 44535293, "link": "https://stackoverflow.com/questions/44535293/email-sent-by-perl-netsmtp-script-dropped-silently-by-gmail", "title": "Email Sent By Perl (Net::SMTP) Script Dropped Silently by Gmail", "body": "<p>I have a Perl script that sends simple HTML emails to users with status updates and a link to more information.  I'm creating mail with Net::SMTP and sending mail using smtp-relay.gmail.com.  It has been working great for years.</p>\n\n<p>In the last month, the emails stopped appearing - just gone with no errors and not in SPAM.  Hours of troubleshooting later, I've narrowed the problem down to Gmail silently dropping emails that contain my specific URL.</p>\n\n<pre><code>http://DOMAIN/cgi-bin/requests/single_request.pl?requestid=111111\n</code></pre>\n\n<p>I changed one character and POOF! working again.</p>\n\n<pre><code>http://DOMAIN/cgi-bin/requests/single-request.pl?requestid=111111\n</code></pre>\n\n<p>I know this is a vague question, but what is going on?  The workaround is fine, but I sure didn't learn anything about the root cause.</p>\n\n<pre><code>#!c:\\strawberry\\perl\\bin -w\n\nuse strict;\nuse warnings;\n\nuse Net::SMTP;\nuse Net::Config;\n\n# use this function to send email\n#\n# example:\n#\n# send_mail(\"RECIPIENT\\@DOMAIN\", \"SUBJECT HERE\", \"BODY HERE\");\n\n\nsub send_mail{\nmy $recipient = shift;\nmy $subject = shift;\nmy $body = shift;\n\n# connect to an SMTP server\nmy $smtp = Net::SMTP-&gt;new(\"smtp-relay.gmail.com\", Debug =&gt; 0, Timeout =&gt; 30, Hello =&gt; 'REDACTED') or die \"SMTP Connection Failed: smtp-relay.gmail.com\"; \n\n# sender's address here\n$smtp-&gt;mail('REDACTED');\n\n# recipient\"s address\n$smtp-&gt;to($recipient);\n\n# Start the mail\n$smtp-&gt;data(); \n\n# Send the header.\n$smtp-&gt;datasend(\"MIME-Version: 1.0\\n\");\n$smtp-&gt;datasend(\"Content-Type: text/html; charset=\\\"UTF-8\\\" \\n\");\n$smtp-&gt;datasend(\"To: $recipient . \\n\");\n$smtp-&gt;datasend(\"From: REDACTED\\n\");\n$smtp-&gt;datasend(\"Reply-to: REDACTED\\n\");\n$smtp-&gt;datasend(\"Subject: $subject \\n\");\n$smtp-&gt;datasend(\"\\n\");\n\n# Send the body.\n$smtp-&gt;datasend($body);\n\n# Finish sending the mail\n$smtp-&gt;dataend(); \n\n# Close the SMTP connection\n$smtp-&gt;quit(); \n}\n1;\n</code></pre>\n"}, {"tags": ["perl", "jsonschema", "moose"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497419696, "post_id": 44534208, "comment_id": 76063908, "body": "What you describe is the wrong way around. Your example for generating an object is the code for storing. Also, that approach is not very smart as the additional Moose behavior and all the MOP stuff is not going to work properly if you simply <code>bless</code> into a package that uses Moose. You should use <a href=\"https://metacpan.org/pod/MooseX::Storage\" rel=\"nofollow noreferrer\">metacpan.org/pod/MooseX::Storage</a> instead. It&#39;s for exactly that purpose."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497419937, "post_id": 44534208, "comment_id": 76064038, "body": "In terms of your actual question, this is going to be hard. The types that Moose uses (or can use) are not something that is included with Perl. They are usually just functions that validate something. As soon as you deviate from the ones that Moose brings it&#39;s going to be... tricky, unless you include serialization meta magic in your types. If you have that, you should be able to write something that uses the MOP to walk a class recursively to spit out JSON schema. If you do, please release it on CPAN."}], "owner": {"reputation": 177, "user_id": 4970085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b524a9bd8ccab933d9cb01ffcdb4e415?s=128&d=identicon&r=PG", "display_name": "BReddy", "link": "https://stackoverflow.com/users/4970085/breddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1600796500, "creation_date": 1497405522, "last_edit_date": 1600796500, "question_id": 44534208, "link": "https://stackoverflow.com/questions/44534208/generating-json-schema-from-moose-classes", "title": "Generating JSON schema from Moose classes", "body": "<p>I have perl Moose classes. I am able to generate Moose objects for each class from JSON data ( <code>JSON-&gt;new-&gt;convert_blessed-&gt;utf8-&gt;pretty-&gt;encode($mooseObj);</code> ) and also generate JSON documents from Moose objects ( <code>bless( JSON-&gt;new-&gt;decode($json), 'CLASS_NAME' );</code> ).</p>\n<p>However, I am not able to find a way to generate JSON schema from Moose classes. I need this schema for each Moose class, so that the browser client validates JSON data being sent to the server side. Currently, my approach is to hand-code JSON schema, but it has many drawbacks (every time Moose classes change, JSON schema needs updates; manual errors; time consuming; kinda difficult for nested classes; not able to map enum types; etc.). I see posts on generating JSON schema from Java class, C# class, XSD, Objective C class, etc. but not from perl or Moose classes. Any information on this is appreciated.</p>\n"}, {"tags": ["perl", "gethostbyname"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1497413364, "post_id": 44533600, "comment_id": 76061574, "body": "Try it with <code>eval</code>"}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1497416360, "post_id": 44535265, "comment_id": 76062585, "body": "The timeout in IO::Socket::* is only for socket activity, i.e. connect. It does not include the DNS lookup which is done blocking using gethostbyname or gethostbyaddr."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1497417475, "post_id": 44535265, "comment_id": 76062948, "body": "@SteffenUllrich  Thank you! I saw that somewhere but wasn&#39;t sure. Edited to the post."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1615442133, "last_edit_date": 1615442133, "creation_date": 1497413423, "answer_id": 44535265, "question_id": 44533600, "link": "https://stackoverflow.com/questions/44533600/perl-host-to-ip-resolution/44535265#44535265", "title": "Perl Host to Ip Resolution", "body": "<p>The timeout on <code>gethostbyname</code> is very, very long.  I assume that you kill the program before you can see that it is just taking a long time. It seems that you really need a shorter timeout.<sup>\u2020</sup></p>\n<p>You can set up your own timer using <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\">alarm</a>. When it goes off a SIGALRM signal is delivered to the process, which would terminate it by default. So we set up a handler for that signal in which a <code>die</code> is issued, thus turning it into an exception. This is <code>eval</code>-ed and we get the control back.</p>\n<pre><code>eval {\n    local $SIG{ALRM} = sub { die &quot;Timed out&quot; };\n\n    alarm 5;  # or what you find most suitable\n\n    # your code that may need a timeout\n\n    alarm 0;\n};\nif ($@ and $@ !~ /Timed out/) { die }  # re-raise if it was something else\n\nif ($@ and $@ =~ /Timed out/) {  # test\n    print &quot;We timed out\\n&quot;;\n}\n</code></pre>\n<p>If your code completes in less than <code>5</code> seconds we get to <code>alarm 0;</code> which cancels the previous alarm and the program continues.  Otherwise the <code>SIGALRM</code> is emitted, but is handled and made into a <code>die</code> which is <code>eval</code>-ed, and so altogether the signal is caught and the control drops to right after the block. We test whether the <code>die</code> was indeed due to our alarm and if not we re-raise it.</p>\n<p>Also see <a href=\"https://stackoverflow.com/a/37817494/4653379\">this post</a> for more comments, and please search for more.</p>\n<hr />\n<p><sup>\u2020</sup> \u00a0 The <code>Timeout</code> functionality that exists in the module <code>IO::Socket</code> is for connect and not for the DNS lookup, which is the culprit here. Thanks to <a href=\"https://stackoverflow.com/users/3081018/steffen-ullrich\">Steffen Ullrich</a> for a comment.</p>\n"}], "owner": {"reputation": 31, "user_id": 2593348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bfdb63bf8ffce1addcf8612c93b086de?s=128&d=identicon&r=PG", "display_name": "user2593348", "link": "https://stackoverflow.com/users/2593348/user2593348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1615442133, "creation_date": 1497400648, "last_edit_date": 1497471271, "question_id": 44533600, "link": "https://stackoverflow.com/questions/44533600/perl-host-to-ip-resolution", "title": "Perl Host to Ip Resolution", "body": "<p>I am wanting to resolve a host name to an ip address which is all fine using Socket with the following:</p>\n\n<pre><code>$ip = gethostbyname($host) or die \"Can't resolve ip for $host.\\n\";\n$ip = inet_ntoa(inet_aton($host));\n</code></pre>\n\n<p>This works fine until it hits a host name that no longer resolves to an IP and the code just stops.  How can I get my script to continue processing the remainder ip the host names to be resolved.\nIdeally I would simply set the <code>$ip</code> variable to equal <code>\"\"</code>.</p>\n\n<p>I have tried even without the die command and the code still stops when it cannot resolve the name to ip.</p>\n"}, {"tags": ["perl", "bioinformatics", "bioperl"], "comments": [{"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1497404960, "post_id": 44533546, "comment_id": 76059559, "body": "If you run this without any of the <code>fork</code> code do you see the same issue? If so, it may be some gene IDs or BAM files that are malformed. I would simplify the code first because it may not be module."}, {"owner": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1497405925, "post_id": 44533546, "comment_id": 76059785, "body": "Also, you mention 3 different versions of samtools. Please clarify that this is a typo and one of those is installed/linked correctly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497420389, "post_id": 44533546, "comment_id": 76064271, "body": "Unrelated, but take a look at <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">metacpan.org/pod/Parallel::ForkManager</a>. It will make your life easier."}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "reply_to_user": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1497552103, "post_id": 44533546, "comment_id": 76138181, "body": "@SES samtools version numbers fixed, thank you."}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "reply_to_user": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1497552262, "post_id": 44533546, "comment_id": 76138276, "body": "@SES: I have written the code to not fork, and I do not get the same issue.  It seems to work fine.  However, the code as I originally inherited it does use the fork, and, oddly enough, it seems to work fine when installed on MacOSX machines.  Also, if I manually throttle back the number of forks that are used, it also seems to work, which initially made me suspect a resources issue (open file descriptors, etc)."}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "reply_to_user": {"reputation": 860, "user_id": 1543853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72dc5271019735b6ec8f979e4dc17ef9?s=128&d=identicon&r=PG", "display_name": "SES", "link": "https://stackoverflow.com/users/1543853/ses"}, "edited": false, "score": 0, "creation_date": 1497552384, "post_id": 44533546, "comment_id": 76138351, "body": "@SES: the .bam file in question is created once, and used as an input to Bio::DB::Sam-&gt;new(), so I don&#39;t think it is malformed.  Also, I can run the single-fork version of the code against the same .bam file and it seems ok, even after a crash, so I think the file is ok.  I&#39;ll double check, though.  Thx!"}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497552434, "post_id": 44533546, "comment_id": 76138372, "body": "@simbabque If I wind up going in and re-writing the code, I&#39;ll definitely look into Parallel::ForkManager.  Thx!"}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1507920696, "post_id": 44533546, "comment_id": 80419421, "body": "What&#39;s the <code>exit</code> statement doing there?"}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "reply_to_user": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1508186685, "post_id": 44533546, "comment_id": 80503385, "body": "@flies: The exit statement is there because each iteration of the loop  is spawning a new process (via the fork call), then doing it&#39;s work, then quitting."}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1508336309, "post_id": 44533546, "comment_id": 80571857, "body": "but it&#39;s inside the loop over gene ids, so it seems as though the forked processes will all quit after looking at the first gene? (I&#39;ve not used fork hardly at all, so IDK if I&#39;m missing something.)"}, {"owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "edited": false, "score": 0, "creation_date": 1508430729, "post_id": 44533546, "comment_id": 80616982, "body": "I see what you&#39;re saying; there is a missing brace ( &#39;}&#39; ) in the for-loop.  You&#39;re correct that it would exit after one iteration.  It was a typo."}], "owner": {"reputation": 35, "user_id": 1247587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb846cc7ae64b38739694181ad3758d3?s=128&d=identicon&r=PG", "display_name": "phonybone", "link": "https://stackoverflow.com/users/1247587/phonybone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1508430832, "creation_date": 1497400172, "last_edit_date": 1508430832, "question_id": 44533546, "link": "https://stackoverflow.com/questions/44533546/perl-biodbsam-crashes-during-call-to-get-features-by-id", "title": "Perl Bio::DB::Sam crashes during call to get_features_by_id()", "body": "<p>I am using Bio::DB::Sam in a Centos7 environment, using version 0.1.17 of samtools.  I am using this procedure to perform my installation:</p>\n\n<pre><code>wget http://sourceforge.net/projects/samtools/files/samtools/0.1.17/samtools-0.1.17.tar.bz2\ntar xjf samtools-0.1.17.tar.bz2 &amp;&amp; cd samtools-0.1.17\nmake CFLAGS=-fPIC\nexport SAMTOOLS=`pwd`\ncpanm Bio::DB::Sam\n</code></pre>\n\n<p>which I discovered <a href=\"https://stackoverflow.com/questions/25556178/installing-biodbsam-perl-module/25611671#25611671\">here</a> (notice I changed the version of samtools)</p>\n\n<p>The crash occurs intermittently, sometimes on the same input files.  My general procedure is as follows:</p>\n\n<ol>\n<li>Use bowtie to generate a .sam file from a .fastq file, using a custom bowtie index</li>\n<li>Use samtools to convert my .sam to a .bam, sorting and indexing the file along the way</li>\n<li>Issue the following Perl commands:</li>\n</ol>\n\n<p>Perl:</p>\n\n<pre><code>my $sortbam = align_and_sort_and_index($reads_file);   # steps 1 and 2\nmy @all_gene_ids = qw(gene_id1 gene_id2 gene_id3);   # really lots more\nfor (my $worker=0; $worker &lt;= $n_threads; $worker++) {\n    my $pid = fork;\n    die \"fork error: $!\" unless defined $pid;\n    next if $pid;     # parent\n    my @gene_ids = get_unique_subset(@all_gene_ids, $worker);\n    my $sam = Bio::DB::Sam-&gt;new(-bam=&gt;$sortbam, -fasta=&gt;$ampl_seqfile, -autoindex=&gt;0);\n    foreach my $gene_id (@gene_ids) {\n        # THIS NEXT LINE IS THE ONE THAT SEGFAULTS (SOMETIMES):\n        my @alignments = $sam-&gt;get_features_by_location(-seq_id =&gt; $gene_id);\n        # do something interesting with @alignments...\n    }\n    exit;\n}\n\nwhile ((my $pid=wait()) != -1) {\n    print \"reaped $pid\\n\";\n}\n</code></pre>\n\n<p>To date I have tried the following:</p>\n\n<ol>\n<li>Increased the number of allowed open files (ulimit -n)</li>\n<li>Increased the number of number of allowed subprocesses</li>\n<li>Increased the limit of pipe buffers</li>\n<li>Increased the swap space</li>\n</ol>\n\n<p>Any and all suggestions would be greatly appreciated.  Thank you!</p>\n"}, {"tags": ["perl", "oop", "moo"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1497389558, "post_id": 44531846, "comment_id": 76055492, "body": "Re &quot;<i>Both Moo and Moose support this</i>&quot;, It&#39;s part of Perl&#39;s method dispatching, so it&#39;s always available."}, {"owner": {"reputation": 848, "user_id": 224912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00e03cc05ee696503f9ee660d2e1b99a?s=128&d=identicon&r=PG", "display_name": "dmn", "link": "https://stackoverflow.com/users/224912/dmn"}, "edited": false, "score": 0, "creation_date": 1497393315, "post_id": 44531846, "comment_id": 76056923, "body": "Thanks for your help.  Unfortunately this didn&#39;t work for me and I&#39;m not entirely sure why..."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1497390681, "last_edit_date": 1497390681, "creation_date": 1497389245, "answer_id": 44531846, "question_id": 44531769, "link": "https://stackoverflow.com/questions/44531769/perl-with-moo-how-to-call-superclasss-implementation-of-a-method/44531846#44531846", "title": "Perl with Moo: How to call superclass&#39;s implementation of a method?", "body": "<p>This can be done in Perl via the <a href=\"https://perldoc.perl.org/perlobj.html#Inheritance\" rel=\"nofollow noreferrer\"><code>SUPER::</code> pseudo-class</a>, which is part of Perl's method resolution system. You just put it in front of the method-call. It does not work for class methods or function calls.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\npackage Foo;\nuse Moo;\n\nsub frobnicate {\n    my $self = shift;\n    say \"foo\";\n}\n\npackage Bar;\nuse Moo;\nextends 'Foo';\n\nsub frobnicate {\n    my $self = shift;\n    say \"bar\";\n    $self-&gt;SUPER::frobnicate;    \n}\n\npackage main;\nBar-&gt;new-&gt;frobnicate;\n</code></pre>\n\n<p>You can even use this to call each parent's method if you have multi-level inheritance.</p>\n\n<pre><code>package Grandparent;\nsub foo { ... }\n\npackage Parent;\nuse parent 'Grandparent';\nsub foo { $_[0]-&gt;SUPER::foo }\n\npackage Child;\nuse parent 'Parent';\nsub foo { $_[0]-&gt;SUPER::foo }\n</code></pre>\n\n<p>This will subsequently call <code>foo</code> in Child, Parent and Grandparent.</p>\n"}, {"comments": [{"owner": {"reputation": 848, "user_id": 224912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00e03cc05ee696503f9ee660d2e1b99a?s=128&d=identicon&r=PG", "display_name": "dmn", "link": "https://stackoverflow.com/users/224912/dmn"}, "edited": false, "score": 1, "creation_date": 1497393268, "post_id": 44531934, "comment_id": 76056908, "body": "Yes!  Thank you, this is exactly what I needed!  The docs are so terrible on this.  I thought I needed to use <code>before</code> but even then I couldn&#39;t figure out how to do it!  Thanks again for your help.  Perfection."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 3, "last_activity_date": 1497389599, "creation_date": 1497389599, "answer_id": 44531934, "question_id": 44531769, "link": "https://stackoverflow.com/questions/44531769/perl-with-moo-how-to-call-superclasss-implementation-of-a-method/44531934#44531934", "title": "Perl with Moo: How to call superclass&#39;s implementation of a method?", "body": "<p>As the <a href=\"https://metacpan.org/pod/Moo#INCOMPATIBILITIES-WITH-MOOSE\" rel=\"nofollow noreferrer\">docs</a> point out:</p>\n\n<blockquote>\n  <p>No support for <code>super</code>, <code>override</code>, <code>inner</code>, or <code>augment</code> - the author considers augment to be a bad idea, and <strong><em><code>override</code> can be translated</em></strong>:</p>\n\n<pre><code>around foo =&gt; sub {\n  my ($orig, $self) = (shift, shift);\n  ...\n  $self-&gt;$orig(@_);\n  ...\n};\n</code></pre>\n  \n  <p>(emphasis mine)</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage X;\n\nuse Moo;\n\nsub calculate {\n    return 'Hello!'\n}\n\n\npackage Y;\n\nuse Moo;\n\nextends 'X';\n\naround calculate =&gt; sub {\n    my $orig = shift;\n    my $self = shift;\n\n    if ( $_[0] &gt; 5 ) {\n        return $self-&gt;$orig(@_);\n    }\n\n    return 'Goodbye!';\n};\n\npackage main;\n\nmy $y = Y-&gt;new;\n\nprint $y-&gt;calculate(3), \"\\n\";\nprint $y-&gt;calculate(11), \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 848, "user_id": 224912, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00e03cc05ee696503f9ee660d2e1b99a?s=128&d=identicon&r=PG", "display_name": "dmn", "link": "https://stackoverflow.com/users/224912/dmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 44531934, "answer_count": 2, "score": 2, "last_activity_date": 1497390681, "creation_date": 1497388853, "question_id": 44531769, "link": "https://stackoverflow.com/questions/44531769/perl-with-moo-how-to-call-superclasss-implementation-of-a-method", "title": "Perl with Moo: How to call superclass&#39;s implementation of a method?", "body": "<p>I have a class <code>X</code> with a subclass <code>Y</code>.  <code>X</code> has a method <code>calculate()</code> that I'd like to override in <code>Y</code> with some additional behaviour, an <code>if</code> statement that, if it fails, call <code>X.calculate()</code>.  In Python this would be accomplished with:</p>\n\n<pre><code>class X(object):\n    def calculate(self, my_arg):\n        return \"Hello!\"\n\nclass Y(X):\n    def calculate(self, my_arg):\n        if type(my_arg) is int and my_arg &gt; 5:\n            return \"Goodbye!\"\n        return super(Y, self).calculate(my_arg)\n</code></pre>\n\n<p>How can I do this in Perl using the <code>Moo</code> module?</p>\n"}, {"tags": ["perl", "jenkins"], "comments": [{"owner": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "edited": false, "score": 0, "creation_date": 1497381756, "post_id": 44529783, "comment_id": 76051417, "body": "What kind of job is it? Are you using a jenkinsfile? Can we see your pipeline script?"}, {"owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "reply_to_user": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "edited": false, "score": 0, "creation_date": 1497387206, "post_id": 44529783, "comment_id": 76054289, "body": "Job type is &quot;Execute Windows batch command&quot; with one line: &quot;C:\\QA\\xxx\\Perl\\Tests\\runxxxTests.bat&quot; the contents of that file is &quot;cd C:\\QA\\xxx\\Perl\\Tests; runxxxTests.pl -f test_suite_test.list&quot; if I run it using WMI &quot;WMIC /node:xxx process call create &quot;cmd.exe /c C:\\QA\\xxx\\Perl\\Tests\\runxxxTests.bat&quot; that works."}, {"owner": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "edited": false, "score": 0, "creation_date": 1497387658, "post_id": 44529783, "comment_id": 76054570, "body": "Where is the log file being saved?  Is it possible its being saved to the workspace when calling it from jenkins?"}, {"owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "reply_to_user": {"reputation": 993, "user_id": 4403376, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wysy6.png?s=128&g=1", "display_name": "Derek Lawrence", "link": "https://stackoverflow.com/users/4403376/derek-lawrence"}, "edited": false, "score": 0, "creation_date": 1497387840, "post_id": 44529783, "comment_id": 76054648, "body": "The log file would be created in the &quot;C:\\QA\\xxx\\Perl\\Tests&quot; directory. The script also sends me an email when complete and that isn&#39;t happening either when the jenkins job runs."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "is_accepted": true, "score": 0, "last_activity_date": 1497446714, "creation_date": 1497446714, "answer_id": 44546163, "question_id": 44529783, "link": "https://stackoverflow.com/questions/44529783/jenkins-windows-slave-batch-job-says-success-but-job-did-not-run/44546163#44546163", "title": "Jenkins windows slave batch job says success but job did not run", "body": "<p>The fix to this was changing the log on rights of the Jenkins and Jenkins Agent services on the windows slave from LocalSystem to a privileged account.</p>\n"}], "owner": {"reputation": 31, "user_id": 8156569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2467c9d16f891c14a839f2a742d2e?s=128&d=identicon&r=PG&f=1", "display_name": "cliftonf", "link": "https://stackoverflow.com/users/8156569/cliftonf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 44546163, "answer_count": 1, "score": -3, "last_activity_date": 1497446714, "creation_date": 1497381285, "last_edit_date": 1497386012, "question_id": 44529783, "link": "https://stackoverflow.com/questions/44529783/jenkins-windows-slave-batch-job-says-success-but-job-did-not-run", "title": "Jenkins windows slave batch job says success but job did not run", "body": "<p>Trying to set up a jenkins v2.46.3 slave on windows 2016 server to run a batch file.</p>\n\n<p>It looks like it is working but the batch file does not actually run. The script does not generate the expected log file and nothing shows up in task manager on the slave</p>\n\n<p>The console output of the job looks like this:</p>\n\n<pre><code>Started by user xxx\nBuilding remotely on xxx-Windows (windows) in workspace c:\\Jenkins\\workspace\\xxx\n[xxx] $ cmd /c call C:\\Windows\\TEMP\\hudson4948156451026881586.bat\nc:\\Jenkins\\workspace\\xxx&gt;C:\\QA\\xxx\\Perl\\Tests\\runxxxTests.bat\nc:\\Jenkins\\workspace\\xxx&gt;cd C:\\QA\\xxx\\Perl\\Tests \nC:\\QA\\xxx\\Perl\\Tests&gt;runxxxTests.pl -f test_suite_test.list \nFinished: SUCCESS\n</code></pre>\n\n<p>If I run the batch file manually it works as expected.</p>\n\n<p>There do not seem to be any errors. How can I troubleshoot this further ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "edited": false, "score": 0, "creation_date": 1497377833, "post_id": 44528615, "comment_id": 76049310, "body": "If you need IP to be printed after the close. It is out of scope. So that you may declare the $ip variable globally or before the loop gets starts"}, {"owner": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "edited": false, "score": 0, "creation_date": 1497377915, "post_id": 44528615, "comment_id": 76049354, "body": "Give me a sample input data in a file, that would be easier for us"}, {"owner": {"reputation": 51, "user_id": 4450286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/287ed63937673dd3c8af124f39a981f4?s=128&d=identicon&r=PG&f=1", "display_name": "Premchand", "link": "https://stackoverflow.com/users/4450286/premchand"}, "reply_to_user": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "edited": false, "score": 0, "creation_date": 1497378352, "post_id": 44528615, "comment_id": 76049586, "body": "sample data in file in each line: country us  ip_address  192.168.1.1 server  dell"}, {"owner": {"reputation": 51, "user_id": 4450286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/287ed63937673dd3c8af124f39a981f4?s=128&d=identicon&r=PG&f=1", "display_name": "Premchand", "link": "https://stackoverflow.com/users/4450286/premchand"}, "reply_to_user": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "edited": false, "score": 0, "creation_date": 1497378840, "post_id": 44528615, "comment_id": 76049864, "body": "Edited the question with /tmp/example file details."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4450286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/287ed63937673dd3c8af124f39a981f4?s=128&d=identicon&r=PG&f=1", "display_name": "Premchand", "link": "https://stackoverflow.com/users/4450286/premchand"}, "edited": false, "score": 0, "creation_date": 1497379337, "post_id": 44529030, "comment_id": 76050165, "body": "<code>Use of uninitialized value $ip in concatenation (.) or string at .&#47;test.pl line 15. IP address is:</code>  $ip is not printing and getting an error"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51, "user_id": 4450286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/287ed63937673dd3c8af124f39a981f4?s=128&d=identicon&r=PG&f=1", "display_name": "Premchand", "link": "https://stackoverflow.com/users/4450286/premchand"}, "edited": false, "score": 0, "creation_date": 1497385838, "post_id": 44529030, "comment_id": 76053579, "body": "@Premchand: <b>Harini&#39;s</b> code isn&#39;t great, but it does work given the data in your question. You must have made a mistake to get that <i>Use of uninitialized value</i> error."}, {"owner": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "edited": false, "score": 0, "creation_date": 1497404293, "post_id": 44529030, "comment_id": 76059394, "body": "There is no error I get that you specified here@Premchand"}], "tags": [], "owner": {"reputation": 539, "user_id": 7162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wr6Gu.jpg?s=128&g=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/7162389/harini"}, "is_accepted": false, "score": 0, "last_activity_date": 1497414505, "last_edit_date": 1497414505, "creation_date": 1497378809, "answer_id": 44529030, "question_id": 44528615, "link": "https://stackoverflow.com/questions/44528615/print-variable-after-closing-the-file-in-perl/44529030#44529030", "title": "Print variable after closing the file in Perl", "body": "<pre><code>use warnings;\nuse strict;\n\nmy $file = \"test\";\nmy ( $string,$ip);\nopen my $FH, \"&lt;\",$file) or die $!;\nwhile (my $lines = &lt;FH&gt;) {\n if ($lines =~ m/address/){\n   ($string, $ip) = (split ' ', $lines);\n  }\n }\n\nprint \"IP address is: $ip\\n\";\n</code></pre>\n\n<p>This will give you the output you needed. But fails in the case of multiple IP match lines in the input file overwrites the last $ip variable.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1497380313, "last_edit_date": 1497380313, "creation_date": 1497379605, "answer_id": 44529288, "question_id": 44528615, "link": "https://stackoverflow.com/questions/44528615/print-variable-after-closing-the-file-in-perl/44529288#44529288", "title": "Print variable after closing the file in Perl", "body": "<p>Store all ips in an array and you'll then have it for later processing.\nThe shown code can also be simplified a lot. This assumes a four-number ip and data like that shown in the sample</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = '/tmp/example';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @ips;\n\nwhile (&lt;$fh&gt;) {\n     if (my ($ip) = /ip_address\\s*(\\d+\\.\\d+\\.\\d+\\.\\d+)/) {\n         push @ips, $ip;\n     }\n}\nclose $fh;\n\nsay for @ips; \n</code></pre>\n\n<p>Or, once you open the file, process all lines with a <code>map</code></p>\n\n<pre><code>my @ips = map { /ip_address\\s*(\\d+\\.\\d+\\.\\d+\\.\\d+)/ } &lt;$fh&gt;;\n</code></pre>\n\n<p>The filehandle is here read in a list context, imposed by <code>map</code>, so all lines from the file are returned.  The block in <code>map</code> applies to each in turn, and <code>map</code> returns a flattened list with results.</p>\n\n<p>Some notes</p>\n\n<ul>\n<li><p>Use three-argument <code>open</code>, it is better</p></li>\n<li><p>Don't assign <code>$_</code> to a variable. To work with a lexical use <code>while (my $line = &lt;$fh&gt;)</code></p></li>\n<li><p>You can use <code>split</code> but here regex is more direct and it allows you to assign its match so that it is scoped.  If there is no match the <code>if</code> fails and nothing goes onto the array</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1497414967, "post_id": 44530915, "comment_id": 76062057, "body": "Is there any reason for using another scope? If we use multiple files there we use the scope. For this program, File handle will automatically close when the program terminate. Please explain is there any other reason.?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1497385631, "creation_date": 1497385631, "answer_id": 44530915, "question_id": 44528615, "link": "https://stackoverflow.com/questions/44528615/print-variable-after-closing-the-file-in-perl/44530915#44530915", "title": "Print variable after closing the file in Perl", "body": "<p>This solution looks for the first line that contains <code>ip_address</code> followed by some space and a sequence of digits and dots</p>\n\n<p>Wrapping the search in a block makes perl delete the lexical variable <code>$fh</code>. Because it is a file handle, that handle will also be automatically closed</p>\n\n<p>Note that I've used <code>autodie</code> to avoid the need to explicitly check the status of the <code>open</code> call</p>\n\n<p>This algorithm will find the <em>first</em> occurrence of <code>ip_address</code> and stop reading the file immediately</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy $file = '/tmp/example';\n\nmy $ip;\n\n{\n    open my $fh, '&lt;', $file;\n\n    while ( &lt;$fh&gt; ) {\n\n        if ( /ip_address\\h+([\\d.]+)/ ) {\n            $ip = $1;\n            last;\n        }\n    }\n}\n\nprint $ip // 'undef', \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>192.168.1.1\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4450286, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/287ed63937673dd3c8af124f39a981f4?s=128&d=identicon&r=PG&f=1", "display_name": "Premchand", "link": "https://stackoverflow.com/users/4450286/premchand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 44529288, "answer_count": 3, "score": -2, "last_activity_date": 1497414505, "creation_date": 1497377276, "last_edit_date": 1497382004, "question_id": 44528615, "link": "https://stackoverflow.com/questions/44528615/print-variable-after-closing-the-file-in-perl", "title": "Print variable after closing the file in Perl", "body": "<p>Below code works fine but I want <code>$ip</code> to be printed after closing the file.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse POSIX;\n\nmy $file = \"/tmp/example\";\n\nopen(FILE, \"&lt;$file\") or die $!;\n\nwhile ( &lt;FILE&gt; ) {\n\n    my $lines = $_;\n\n    if ( $lines =~ m/address/ ) {\n        my ($string, $ip) = (split ' ', $lines);\n        print \"IP address is: $ip\\n\";\n    }\n}\n\nclose(FILE);\n</code></pre>\n\n<p>sample data in /tmp/example file</p>\n\n<pre><code> $cat /tmp/example\n country us \n ip_address  192.168.1.1\n server  dell\n</code></pre>\n"}, {"tags": ["xml", "perl", "libxml2", "xml-libxml"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497373013, "post_id": 44527111, "comment_id": 76046660, "body": "This smells like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Why do you need to walk a tree of nodes, and print them in exactly the same way? I mean, normally I&#39;d just to <code>XML::LibXML</code> and use toString"}, {"owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497375747, "post_id": 44527111, "comment_id": 76048193, "body": "I didn&#39;t make clear my full requirement because I was hoping it was a small tweak in my current script. I&#39;m sorry for the confusion.  This method would be great if I could do some manipulation to each line. For example, let&#39;s say I want to change every line that says:  &lt;xsl:element name=&quot;foo&quot;&gt;  to:  &lt;xsl:element name=&quot;foobar&quot;&gt;  I hope this resolves any confusion."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497428193, "post_id": 44527111, "comment_id": 76069039, "body": "OK. I&#39;ve edited my answer - the question is easier to solve than you might think, thanks to <code>xpath</code>."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "edited": false, "score": 0, "creation_date": 1497375728, "post_id": 44527507, "comment_id": 76048182, "body": "I didn&#39;t make clear my full requirement because I was hoping it was a small tweak in my current script. I&#39;m sorry for the confusion.  This method would be great if I could do some manipulation to each line. For example, let&#39;s say I want to change every line that says:  &lt;xsl:element name=&quot;foo&quot;&gt;  to:  &lt;xsl:element name=&quot;foobar&quot;&gt;  I hope this resolves any confusion."}, {"owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "edited": false, "score": 0, "creation_date": 1497471639, "post_id": 44527507, "comment_id": 76098371, "body": "Awesome! Exactly what I&#39;m looking for. Thank you."}, {"owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "edited": false, "score": 0, "creation_date": 1498486128, "post_id": 44527507, "comment_id": 76504070, "body": "Is there a way to change an xml node from:   <code>&lt;xsl:element name=&quot;foobar&quot;&gt;</code>  to  <code>&lt;foobar&gt;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "edited": false, "score": 0, "creation_date": 1498490650, "post_id": 44527507, "comment_id": 76507192, "body": "Yes. You need <code>setNodeName</code>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1497428142, "last_edit_date": 1497428142, "creation_date": 1497373267, "answer_id": 44527507, "question_id": 44527111, "link": "https://stackoverflow.com/questions/44527111/how-to-read-a-whole-xml-node/44527507#44527507", "title": "How to read a whole XML node", "body": "<p>Ok, the problem here is - you're essentially misunderstanding the tree nature of XML. You've got a bunch of nodes - that 'you're \"walking\"' but actually the <code>xsl:stylesheet</code> node is a parent of the <code>xsl:element</code> node. </p>\n\n<p>By far the easiest way is to <em>not</em> do it the way you are, and instead:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $reader = XML::LibXML-&gt;load_xml(location =&gt; \"test.xml\") or die \"cannot read input file\\n\";\nprint $reader -&gt; toString\n</code></pre>\n\n<p>But I'm pretty sure your requirement is something slightly more complicated.</p>\n\n<p>Edit: And sure enough, it was.</p>\n\n<p>So - change every 'foo' name to a 'foobar' name:</p>\n\n<pre><code> #!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $reader = XML::LibXML-&gt;load_xml(location =&gt; \"test.xml\") or die \"cannot read input file\\n\";\nmy $xpath_context = XML::LibXML::XPathContext-&gt;new($reader);\n\nforeach my $foo_node ( $xpath_context -&gt; findnodes('//xsl:element[@name=\"foo\"]') ) {\n  $foo_node -&gt; setAttribute ( 'name', 'foobar' );\n}\n\nprint $reader -&gt; toString\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 44527507, "answer_count": 1, "score": -1, "last_activity_date": 1497428142, "creation_date": 1497371808, "last_edit_date": 1497376592, "question_id": 44527111, "link": "https://stackoverflow.com/questions/44527111/how-to-read-a-whole-xml-node", "title": "How to read a whole XML node", "body": "<p>My XML file looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n&lt;xsl:element name=\"foo\"&gt;\n&lt;xsl:value-of select=\"bar\"/&gt;\n&lt;/xsl:element&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>I'm using XML:LibXML::Reader and trying to perform logic on each node when certain criteria are meet. For example:</p>\n\n<pre><code>&lt;xsl:element name=\"foo\"&gt;\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>&lt;xsl:element name=\"foobar\"&gt;\n</code></pre>\n\n<p>Here is what I currently have:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML::Reader;\n\nmy $reader = XML::LibXML::Reader-&gt;new(location =&gt; \"test.xml\") or die \"cannot read input file\\n\";\n\nwhile ($reader-&gt;read){\n    processNode($reader);\n}\n\nsub processNode{\n    my $reader = shift;\n    printf \"%s\\n\", ($reader-&gt;name);\n}\n</code></pre>\n\n<p>My output looks like this:</p>\n\n<pre><code>xsl:stylesheet\n#text\nxsl:element\n#text\nxsl:value-of\n#text\nxsl:element\n#text\nxsl:stylesheet\n</code></pre>\n"}, {"tags": ["perl", "oop", "cgi"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1497370765, "post_id": 44526625, "comment_id": 76045310, "body": "&quot;Bring me up to date in Perl 2017? &quot; \u2014 <code>use strict; use warnings;</code> (well, that&#39;s Perl 2000 although it holds true in 2017) &amp; <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/CGI/lib/&hellip;</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1497370892, "post_id": 44526625, "comment_id": 76045390, "body": "@Quentin: The point about CGI being removed from the core is moot. He&#39;s using a Red Hat version of Linux, so it&#39;s not included anyway."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497371141, "post_id": 44526625, "comment_id": 76045531, "body": "if CGI has been removed, is there a better library?  I&#39;m not so attached to CGI, I had html libraries of my own."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497371450, "post_id": 44526625, "comment_id": 76045733, "body": "CGI still works. And, as you&#39;ve seen, you can easily install the module even when it&#39;s not part of your standard installation. But please don&#39;t use the HTML generation functions in CGI.pm. Far better to use a <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">templating system</a> to separate your HTML from your code. If you want to go further down the road of Modern Perl Web Dev, then start by reading <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a>."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497372782, "post_id": 44526625, "comment_id": 76046517, "body": "Excellent, should I use CGI for PUSH and GET then?  You said not for HTML generation, so I query what should it be used for."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497428643, "post_id": 44526625, "comment_id": 76069314, "body": "Perhaps some confusion over two similar terms here. <b>CGI</b> is a web protocol that defines the interaction between a web server and programs that generate dynamic content. <b>CGI,pm</b> is a Perl module which helps to you write programs that use that protocol. Unfortunately, CGI.pm also contains unrelated stuff like content generation. I&#39;m saying use CGI.pm for the CGI parts of your program (accessing the various types of input, producing the CGI headers) and use other, better, tools for the content generation."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497370534, "post_id": 44526647, "comment_id": 76045167, "body": "and yes it is.  DANG! and thanks.. that took me two hours before posting."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497370801, "post_id": 44526647, "comment_id": 76045332, "body": "@LightBringer: <a href=\"https://stackoverflow.com/help/someone-answers\">What to do when someone answers my question.</a>"}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497370861, "post_id": 44526647, "comment_id": 76045373, "body": "thanks, I knew I&#39;d feel simple.   Now got a permission denied from webserver, though this is a different question."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497370880, "post_id": 44526647, "comment_id": 76045384, "body": "I should delete this question shouldn&#39;t I ... thanks though."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497370984, "post_id": 44526647, "comment_id": 76045444, "body": "Ah, an undeletable example of my occasional simplicity."}, {"owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "edited": false, "score": 0, "creation_date": 1497371447, "post_id": 44526647, "comment_id": 76045731, "body": "no worries, was a chmod on the file, everything is peachy keen, thanks again."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1497370596, "last_edit_date": 1497370596, "creation_date": 1497370234, "answer_id": 44526647, "question_id": 44526625, "link": "https://stackoverflow.com/questions/44526625/perl-use-cgi-cant-call-method-header-without-a-package-or-object-reference/44526647#44526647", "title": "Perl (use CGI) Can&#39;t call method &quot;header&quot; without a package or object reference", "body": "<p>Looks like a typo.</p>\n\n<pre><code>my $q = CGI&gt;new;\n</code></pre>\n\n<p>should probably be</p>\n\n<pre><code>my $q = CGI-&gt;new;\n</code></pre>\n\n<p>Perl is interpreting your code as:</p>\n\n<pre><code>my $q = 'CGI' &gt; 'new';\n</code></pre>\n\n<p>So you end up with a false value (probably an empty string) in <code>$q</code>. And you can't call methods on an empty string :-)</p>\n"}], "owner": {"reputation": 187, "user_id": 7382283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQcg4.jpg?s=128&g=1", "display_name": "Light Bringer", "link": "https://stackoverflow.com/users/7382283/light-bringer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 44526647, "answer_count": 1, "score": 0, "last_activity_date": 1497370614, "creation_date": 1497370153, "last_edit_date": 1497370614, "question_id": 44526625, "link": "https://stackoverflow.com/questions/44526625/perl-use-cgi-cant-call-method-header-without-a-package-or-object-reference", "title": "Perl (use CGI) Can&#39;t call method &quot;header&quot; without a package or object reference", "body": "<p>Alright, using Perl for the first time in a decade, sort of rusty.  Thinking perhaps some updates since then (genius huh?)  </p>\n\n<p>Alrighty, This is Perl 5, version 16, subversion 3 x86_64-linux-thread-multi with 29 registered patches on AWS micro.</p>\n\n<p>Perl came with it, I just yum installed perl-CGI perl-Data-Dumper</p>\n\n<pre><code>#!/usr/bin/perl\nuse CGI;                                        # load cgi routines\nmy $q = CGI&gt;new;                                # cgi object\nprint   $q-&gt;header(),\n        $q-&gt;start_html(\"Hello World\"),\n        $q-&gt;h1('Hello'),\n        $q-&gt;end_html;\n~\n</code></pre>\n\n<p>Seems about a simple and straightforward as it can be, as I build programs bit by bit.  But I have got an error at if I run it at the command line (or browser).</p>\n\n<blockquote>\n  <p>Can't call method \"header\" without a package or object reference at create line 4.</p>\n</blockquote>\n\n<p>Line 4 is the print $q->header();  \"create\" is the file name.</p>\n\n<p>Any ideas?  Bring me up to date in Perl 2017?  My problems, being rusty are always something fabulously simple.</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1497374520, "last_edit_date": 1497374520, "creation_date": 1497368464, "answer_id": 44526011, "question_id": 44525877, "link": "https://stackoverflow.com/questions/44525877/generate-array-and-subarray-dynamically-perl/44526011#44526011", "title": "Generate array and subarray dynamically (perl)", "body": "<p>Unless you can guaranteed the records with the same key will be next to each other, it's easier to start with a HoA.</p>\n\n<pre><code>my %data;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($key, $val) = split /:/;\n   push @{ $data{$key} }, $val;\n}\n</code></pre>\n\n<p>Then convert to AoA:</p>\n\n<pre><code>my @data = values(%data);\n</code></pre>\n\n<hr>\n\n<p>Order-preserving:</p>\n\n<pre><code>my %data;\nmy @data;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($key, $val) = split /:/;\n   push @data, $data{$key} = []\n      if !$data{$key};\n\n   push @{ $data{$key} }, $val;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8155539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b354dc17cc841e7e06d336cfa0bf7f?s=128&d=identicon&r=PG&f=1", "display_name": "emptyowe", "link": "https://stackoverflow.com/users/8155539/emptyowe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497374520, "creation_date": 1497368055, "question_id": 44525877, "link": "https://stackoverflow.com/questions/44525877/generate-array-and-subarray-dynamically-perl", "title": "Generate array and subarray dynamically (perl)", "body": "<p>I have a several files that have contain product install information. \nI am able to grep for the elements that I want (for example, \"version\") from the files. And I end up with something like this:</p>\n\n<pre><code>instancefile1:ABC_version=1.2.3 \ninstancefile1:XYZ_version=2.5 \ninstancefile2:ABC_version=3.4.5 \ninstancefile3:XYZ_version=1.1\n</code></pre>\n\n<p>Where the components are named ABC or XYZ.</p>\n\n<p>What I'd like to do is take this grep output and parse it through perl to build arrays on the file.\nThe first array would be composed of the instance number (pulled from the filenames) - above, I'd have an array that would have 1,2,3 as elements.</p>\n\n<p>And inside each of those arrays would be the components that that particular instance has.</p>\n\n<p>Full expected arrays and components from above:</p>\n\n<blockquote>\n  <p>array[0] = instancefile1     # can keep this named like the filename,\n  or assign name. Does not matter</p>\n\n<pre><code> array[0][0] = ABC_version=1.2.3\n array[0][1] = XYZ_version=2.5\n</code></pre>\n  \n  <p>array[1] = instancefile2</p>\n\n<pre><code>array[1][0] = ABC_version=3.4.5\n</code></pre>\n  \n  <p>array[2] = instancefile3</p>\n\n<pre><code>array[2][0] = XYZ_version=1.1\n</code></pre>\n</blockquote>\n\n<p>(I know my notation for referencing subarrays is not correct - I'm rusty on my perl.)</p>\n\n<p>How might I do that?\n(I've been doing it with just bash arrays and grep and then reiterating through the initial grep output with my first array and doing another grep to fill another array - but this seems like it is going through the data more than one time, instead of building it on the fly.)</p>\n\n<p>The idea is for it to build each array as it sees it. It sees \"fileinstance1\", it stores the values to the right in that array, as it sees it. Then if it sees \"fileinstance2\", it creates that array and populates with those values, all in one pass. I believe perl is the best tool for this?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 4, "last_activity_date": 1497365402, "creation_date": 1497365402, "answer_id": 44524903, "question_id": 44524783, "link": "https://stackoverflow.com/questions/44524783/how-can-i-correct-the-following-perl-program-to-check-directory-existence/44524903#44524903", "title": "How can I correct the following perl program to check directory existence", "body": "<p>You need to remove the newline character from your variable using <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a>:</p>\n\n<pre><code>$path = &lt;STDIN&gt;;\nchomp $path;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1497371855, "creation_date": 1497371855, "answer_id": 44527127, "question_id": 44524783, "link": "https://stackoverflow.com/questions/44524783/how-can-i-correct-the-following-perl-program-to-check-directory-existence/44527127#44527127", "title": "How can I correct the following perl program to check directory existence", "body": "<ul>\n<li>You forgot to check for EOF.</li>\n<li>You forgot to remove the trailing newline.</li>\n<li>You say the directory doesn't exists when you are unable to check if it exists or not.</li>\n</ul>\n\n<p>&#x20;</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings qw( all );\n\ndefined( my $path = &lt;STDIN&gt; );\n   or exit;\n\nif (-e $path) {\n    print \"Present\";\n}\nelsif ($!{ENOENT}) {\n    print \"Not present\";\n}\nelse {\n    die(\"stat: $!\");\n}\n</code></pre>\n\n<p>Finally, it's probably wrong to use <code>-e</code> in the first place. It's always a symptom of a bug in your code. Don't check if a file exists before trying to open it; just try to open it. Don't check if a directory exists before trying to create it; just try to create it. </p>\n"}], "owner": {"reputation": 21, "user_id": 8106471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68682683c9dfa0b44ca33f736549a74a?s=128&d=identicon&r=PG&f=1", "display_name": "Vikki", "link": "https://stackoverflow.com/users/8106471/vikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 44524903, "answer_count": 2, "score": 1, "last_activity_date": 1497371855, "creation_date": 1497365115, "last_edit_date": 1497365569, "question_id": 44524783, "link": "https://stackoverflow.com/questions/44524783/how-can-i-correct-the-following-perl-program-to-check-directory-existence", "title": "How can I correct the following perl program to check directory existence", "body": "<pre><code>#!/usr/bin/perl\n\n$path = &lt;STDIN&gt;;\n\nif (-e $path) {\n    print \"present\";\n}\nelse {\n    print \"Not present\";\n}\n</code></pre>\n\n<p>Why is it always printing \"Not present\"?</p>\n"}, {"tags": ["perl", "lua", "redis"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1497361889, "post_id": 44523195, "comment_id": 76038920, "body": "Perl 5.8.7 is from twelve years ago. Why do that to yourself?"}, {"owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1497361966, "post_id": 44523195, "comment_id": 76038988, "body": "@DaveCross, :( yes i know that , but i working on a legacy product"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1497361995, "post_id": 44523195, "comment_id": 76039016, "body": "With Lua and Redis? Interesting legacy."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1497361641, "creation_date": 1497361641, "answer_id": 44523433, "question_id": 44523195, "link": "https://stackoverflow.com/questions/44523195/err-error-compiling-script-new-function-user-script2-expected-near-end/44523433#44523433", "title": "ERR Error compiling script (new function): user_script:2: &#39;=&#39; expected near &#39;end&#39; , .../lib/site_perl/5.8.7/Redis.pm line 163", "body": "<p>Checking the <a href=\"https://redis.io/commands/eval\" rel=\"noreferrer\">Redis documentation</a> linked from <a href=\"http://p3rl.org/Redis\" rel=\"noreferrer\">Redis</a>, it seems the <code>eval</code> method takes the script contents as the first parameter, not the filename.</p>\n\n<p>Try</p>\n\n<pre><code>open my $SCRIPT, '&lt;', 'test.lua' or die $!;\nmy $result = $r-&gt;eval( do { local $/; &lt;$SCRIPT&gt; }, 0, 'A' );\n</code></pre>\n"}], "owner": {"reputation": 1007, "user_id": 1288120, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f73d7fb82a257fe648b351096ec71098?s=128&d=identicon&r=PG", "display_name": "Bharat", "link": "https://stackoverflow.com/users/1288120/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 0, "accepted_answer_id": 44523433, "answer_count": 1, "score": 0, "last_activity_date": 1497361641, "creation_date": 1497361049, "question_id": 44523195, "link": "https://stackoverflow.com/questions/44523195/err-error-compiling-script-new-function-user-script2-expected-near-end", "title": "ERR Error compiling script (new function): user_script:2: &#39;=&#39; expected near &#39;end&#39; , .../lib/site_perl/5.8.7/Redis.pm line 163", "body": "<p>I have created basic lua script to except a argument and print its value, using redis-cli its executing with no error and o/p is printed in log file.</p>\n\n<pre><code>$ cat test.lua\n redis.replicate_commands()\n local var = ARGV[1]\n print ( 'var ', var)\n$ redis-cli --eval test.lua , A\n nil \n$\n</code></pre>\n\n<p>I want to run lua script using perl script : </p>\n\n<pre><code>$ cat eval.pl\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Redis;\n\nmy $r = Redis-&gt;new(\n    server    =&gt; '127.0.0.1:6379',\n    reconnect =&gt; 3,\n    every     =&gt; 1.5 * 1000000,\n    conservative_reconnect =&gt; 1,\n    no_auto_connect_on_new =&gt; 1,\n    cnx_timeout            =&gt; 15,\n);\neval {\n    $r-&gt;connect;\n};\nif ($@) {\n    print '$@ : '.$@;\n}\nmy $result = $r-&gt;eval( \"test.lua\", 0, 'A' );\nprint \"result : $result\\n\";\n$\n</code></pre>\n\n<p>But i am getting error: </p>\n\n<p><strong>[eval] ERR Error compiling script (new function): user_script:2: '=' expected near 'end' ,  at /../lib/site_perl/5.8.7/Redis.pm line 163</strong></p>\n\n<p>my redis version is 1.991</p>\n\n<p>error message is not descriptive enough to debug </p>\n\n<p>Redis.pm's code at line 163 is </p>\n\n<pre><code> 141 sub __with_reconnect {\n 142   my ($self, $cb) = @_;\n 143 \n 144   ## Fast path, no reconnect\n 145   $self-&gt;{reconnect}\n 146     or return $cb-&gt;();\n 147 \n 148   return &amp;try(\n 149     $cb,\n 150     catch {\n 151       ref($_) eq 'Redis::X::Reconnect'\n 152         or die $_;\n 153 \n 154       $self-&gt;{__inside_transaction} || $self-&gt;{__inside_watch}\n 155         and croak(\"reconnect disabled inside transaction or watch\");\n 156 \n 157       scalar @{$self-&gt;{queue} || []} &amp;&amp; $self-&gt;{conservative_reconnect}\n 158         and croak(\"reconnect disabled while responses are pending and conservative reconnect mode enabled\");\n 159 \n 160       $self-&gt;connect;\n 161       $cb-&gt;();\n 162     }\n 163   );\n 164 }\n</code></pre>\n\n<p>Am i using sub eval wrong way ?</p>\n"}, {"tags": ["perl", "matrix", "hash"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1497357696, "post_id": 44521776, "comment_id": 76035402, "body": "What have you tried? What problems are you having? Please show us your code. If you don&#39;t have any code to show, then Stack Overflow might not be the best place to ask this question."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1497359763, "post_id": 44521776, "comment_id": 76037131, "body": "Please also include the sample output."}, {"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1497360044, "post_id": 44521776, "comment_id": 76037373, "body": "Sorry for the missing information, i just completed my post. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1497361853, "post_id": 44523197, "comment_id": 76038888, "body": "Thank you for your help. It&#39;n very kind. I tried to rub this code with the command but it doesn&#39;t recognize the variable $RFH. Is their a specific module that i should load before ?  Thanks."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1497362441, "post_id": 44523197, "comment_id": 76039373, "body": "@AmyNdy: Looks like <code>$RFH</code> is a typo. It should be <code>$GENOTYPE</code>."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1497362518, "post_id": 44523197, "comment_id": 76039429, "body": "Yup, Sorry, Fixed it."}, {"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 1, "creation_date": 1497428223, "post_id": 44523197, "comment_id": 76069062, "body": "Thanks guys. You both just saved a perl beginner&#39;s life !"}], "tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": true, "score": 2, "last_activity_date": 1497362489, "last_edit_date": 1497362489, "creation_date": 1497361057, "answer_id": 44523197, "question_id": 44521776, "link": "https://stackoverflow.com/questions/44521776/turn-a-bi-dimensional-matrix-into-perl-hash/44523197#44523197", "title": "Turn a bi-dimensional matrix into perl hash", "body": "<p><strong>Code:</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict; use warnings; use Data::Dumper;\n\nmy $matrix_geno = 'input.io';\n\nopen ( my $GENOTYPE, '&lt;', \"$matrix_geno\" ) or die ($!);\n\nmy $header = &lt;$GENOTYPE&gt;;\nchomp($header);\n\nmy @headers = split( /\\s+/, $header );\n\nmy %hash = ();\n\nwhile ( my $line = &lt;$GENOTYPE&gt; ) {\n    chomp($line);\n\n    my @columns_data = split( /\\s+/, $line );\n\n    $hash{$columns_data[0]}{$headers[1]} = $columns_data[1];\n    $hash{$columns_data[0]}{$headers[2]} = $columns_data[2];\n    $hash{$columns_data[0]}{$headers[3]} = $columns_data[3];\n\n}\n\nprint Dumper(\\%hash);\n\nclose($GENOTYPE);\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>$VAR1 = {\n          'LOC105031933' =&gt; {\n                              'BC1-III' =&gt; 'P1/P1',\n                              'BC10-II' =&gt; 'P1/P1',\n                              'BC1-IV' =&gt; 'P1/P1'\n                            },\n          'LOC105031934' =&gt; {\n                              'BC1-III' =&gt; 'NA',\n                              'BC10-II' =&gt; 'NA',\n                              'BC1-IV' =&gt; 'NA'\n                            },\n          'LOC105031938' =&gt; {\n                              'BC1-IV' =&gt; 'P1/P1',\n                              'BC1-III' =&gt; 'P1/P1',\n                              'BC10-II' =&gt; 'P1/P1'\n                            },\n          'LOC105031931' =&gt; {\n                              'BC10-II' =&gt; 'P1/P1',\n                              'BC1-III' =&gt; 'P1/P1',\n                              'BC1-IV' =&gt; 'P1/P1'\n                            },\n          'LOC105031937' =&gt; {\n                              'BC1-IV' =&gt; 'NA',\n                              'BC10-II' =&gt; 'NA',\n                              'BC1-III' =&gt; 'NA'\n                            },\n          'LOC105031935' =&gt; {\n                              'BC1-III' =&gt; 'P1/P1',\n                              'BC10-II' =&gt; 'P1/P1',\n                              'BC1-IV' =&gt; 'P1/P1'\n                            },\n          'LOC105031928' =&gt; {\n                              'BC1-IV' =&gt; 'P1/P2',\n                              'BC10-II' =&gt; 'P1/P2',\n                              'BC1-III' =&gt; 'P1/P2'\n                            },\n          'LOC105031930' =&gt; {\n                              'BC1-III' =&gt; 'NA',\n                              'BC10-II' =&gt; 'NA',\n                              'BC1-IV' =&gt; 'NA'\n                            }\n        };\n</code></pre>\n\n<p>Is this is the output you wanted?</p>\n\n<p>Hope this helps and please change it your need.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1497428292, "post_id": 44523320, "comment_id": 76069107, "body": "Thank you @Dave Cross. With little modification to adapt with my perl script it gave me exactly what I needed."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1497361374, "creation_date": 1497361374, "answer_id": 44523320, "question_id": 44521776, "link": "https://stackoverflow.com/questions/44521776/turn-a-bi-dimensional-matrix-into-perl-hash/44523320#44523320", "title": "Turn a bi-dimensional matrix into perl hash", "body": "<p>This seems to do what you want. I'm reading from <code>DATA</code> for simplicity.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Data::Dumper;\n\n# Read headers\nchomp(my $headers = &lt;DATA&gt;);\nmy @samples = split /\\s+/, $headers;\n# Remove 'CDS'\nshift @samples;\n\nmy %genotype;\n\nwhile (&lt;DATA&gt;) {\n  chomp;\n  my ($locus, @genotypes) = split;\n  for my $x (0 .. $#samples) {\n    $genotype{$samples[$x]}{$locus} = $genotypes[$x];\n  }\n}\n\n# Display the data structure\nsay Dumper \\%genotype;\n\n# Simple test\nsay $genotype{'BC10-II'}{LOC105031935};\n\n__DATA__\nCDS             BC1-III     BC1-IV      BC10-II     \nLOC105031928    P1/P2       P1/P2      P1/P2    \nLOC105031930    NA          NA         NA   \nLOC105031931    P1/P1       P1/P1      P1/P1    \nLOC105031933    P1/P1       P1/P1      P1/P1    \nLOC105031934    NA          NA         NA   \nLOC105031935    P1/P1       P1/P1      P1/P1    \nLOC105031937    NA          NA         NA   \nLOC105031938    P1/P1       P1/P1      P1/P1\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>$VAR1 = {\n          'BC10-II' =&gt; {\n                         'LOC105031931' =&gt; 'P1/P1',\n                         'LOC105031935' =&gt; 'P1/P1',\n                         'LOC105031930' =&gt; 'NA',\n                         'LOC105031928' =&gt; 'P1/P2',\n                         'LOC105031937' =&gt; 'NA',\n                         'LOC105031938' =&gt; 'P1/P1',\n                         'LOC105031933' =&gt; 'P1/P1',\n                         'LOC105031934' =&gt; 'NA'\n                       },\n          'BC1-IV' =&gt; {\n                        'LOC105031934' =&gt; 'NA',\n                        'LOC105031933' =&gt; 'P1/P1',\n                        'LOC105031938' =&gt; 'P1/P1',\n                        'LOC105031937' =&gt; 'NA',\n                        'LOC105031928' =&gt; 'P1/P2',\n                        'LOC105031930' =&gt; 'NA',\n                        'LOC105031935' =&gt; 'P1/P1',\n                        'LOC105031931' =&gt; 'P1/P1'\n                      },\n          'BC1-III' =&gt; {\n                         'LOC105031931' =&gt; 'P1/P1',\n                         'LOC105031935' =&gt; 'P1/P1',\n                         'LOC105031930' =&gt; 'NA',\n                         'LOC105031928' =&gt; 'P1/P2',\n                         'LOC105031937' =&gt; 'NA',\n                         'LOC105031938' =&gt; 'P1/P1',\n                         'LOC105031933' =&gt; 'P1/P1',\n                         'LOC105031934' =&gt; 'NA'\n                       }\n        };\n\nP1/P1\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 44523197, "answer_count": 2, "score": 1, "last_activity_date": 1497362489, "creation_date": 1497357463, "last_edit_date": 1497359997, "question_id": 44521776, "link": "https://stackoverflow.com/questions/44521776/turn-a-bi-dimensional-matrix-into-perl-hash", "title": "Turn a bi-dimensional matrix into perl hash", "body": "<p>I have a genotype matrix in which:</p>\n\n<ul>\n<li>Rows represent locus </li>\n<li>Columns represent samples </li>\n<li>Each value represents a genotype which could be either P1/P1, P2/P2, P1/P2 or NA if the genotype is not determined.</li>\n</ul>\n\n<p>I'd like to turn this matrix into a perl HoH in order to get the genotype (specific then to the single sample and its locus). </p>\n\n<p>My matrix looks like: </p>\n\n<pre><code>CDS             BC1-III     BC1-IV      BC10-II     \nLOC105031928    P1/P2       P1/P2      P1/P2    \nLOC105031930    NA          NA         NA   \nLOC105031931    P1/P1       P1/P1      P1/P1    \nLOC105031933    P1/P1       P1/P1      P1/P1    \nLOC105031934    NA          NA         NA   \nLOC105031935    P1/P1       P1/P1      P1/P1    \nLOC105031937    NA          NA         NA   \nLOC105031938    P1/P1       P1/P1      P1/P1\n</code></pre>\n\n<p>As an output, the code should give:</p>\n\n<pre><code>$hash{$sample}{$locus} = P1/P1 #(for locus LOC105031935 in sample BC10-II for example)\n</code></pre>\n\n<p>Here's what i've tried to solve the problem but I cant figure out yet how to assign in the hash each locus of the first column as a second key of this hashtable. @sample_names is a list of the three samples.</p>\n\n<pre><code>open(GENOTYPE, '&lt;', \"$matrix_geno\") or die (\"Cannot open $matrix_geno\\n\");\nmy %hash;\nwhile (my $line = &lt;GENOTYPE&gt;) \n{\n\n    my @columns = split(/\\s+/, $line);\n    @hash{@sample_names} = @columns;\n    #print Dumper \\%hash;\n}\n</code></pre>\n\n<p>Any help will be seriously welcomed. </p>\n\n<p>PS: This example is a small part of my data. I'm actually seeking for a more general solution</p>\n\n<p>Thank you very much.  </p>\n"}, {"tags": ["perl", "ssh", "vnc-server", "www-mechanize-firefox"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497347858, "post_id": 44518110, "comment_id": 76028342, "body": "Iirc WWW::Mechanize::Firefox doesn&#39;t start a browser instance. You need to start it yourself. You can try issuing a <code>firefox &amp;</code> via SSH."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497347958, "post_id": 44518110, "comment_id": 76028413, "body": "@simbabque Ya I tried it but firefox is not starting in ssh. But as the same way I connect the server via <code>krdc</code> then type the <code>firefox &amp;</code> it is started."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497348282, "post_id": 44518110, "comment_id": 76028631, "body": "Maybe because the SSH session is not the one that has the xserver attached. Can you maybe attach through the vnc?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497348307, "post_id": 44518110, "comment_id": 76028647, "body": "@simbabque When I&#39;m starting firefox in ssh it is showing <code>Error: GDK_BACKEND does not match available displays</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497348336, "post_id": 44518110, "comment_id": 76028670, "body": "Yeah that&#39;s what I mean. Hmm. Try using <a href=\"https://metacpan.org/pod/Net::VNC\" rel=\"nofollow noreferrer\">metacpan.org/pod/Net::VNC</a> to create the VNC connection with Perl."}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497520582, "creation_date": 1497347695, "question_id": 44518110, "link": "https://stackoverflow.com/questions/44518110/run-the-mechanizefirefox-script-in-vnc-server-using-netsshperl", "title": "Run the Mechanize::Firefox script in VNC server using Net::SSH::perl?", "body": "<p>I have done the script with <code>Mechanize::Firefox</code>. I need to run the script in VNC server. I'm working on ubuntu. I have installed <code>krdc</code> software to run the scripts. </p>\n\n<p>Before running the script I'm starting the vnc server by using the following command <code>vncserver</code>. </p>\n\n<p>To connect the server via ssh I have using one password for example <code>sshpassword</code>. When open the <code>krdc</code> software there I'm using the <code>vncpassword</code>.</p>\n\n<p>My problem is, I have trying to run the <code>Mechanize::Firefox</code> script using <code>Net::SSH::perl</code> script it is running but the firefox is not starting. So I cannot crawl the content. </p>\n\n<p>How can I fix this issue.? I don't know from where need to start. </p>\n"}, {"tags": ["regex", "perl", "maven"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497344823, "post_id": 44516947, "comment_id": 76026072, "body": "You need to filter out the <code>[INFO] </code>. Get rid of the <code>^</code> and <code>$</code> anchors for a start."}, {"owner": {"reputation": 81177, "user_id": 296328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DSpH6.jpg?s=128&g=1", "display_name": "khmarbaise", "link": "https://stackoverflow.com/users/296328/khmarbaise"}, "edited": false, "score": 0, "creation_date": 1497346066, "post_id": 44516947, "comment_id": 76026963, "body": "You can give a configuration option to maven-depenedency-plugin like <code>-DoutputFile=result.txt</code> which contains everything as text...The question is why do you need that? Reporting ?"}], "answers": [{"tags": [], "owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "is_accepted": false, "score": 0, "last_activity_date": 1497369090, "last_edit_date": 1497369090, "creation_date": 1497362812, "answer_id": 44523920, "question_id": 44516947, "link": "https://stackoverflow.com/questions/44516947/how-to-read-relevant-information-from-maven-dependency-tree-using-regex-in-perl/44523920#44523920", "title": "How to read relevant information from maven dependency tree using regex in Perl", "body": "<p>Instead of slurping the whole file in <code>$content</code>, you can process each line in the file, and use the following regexp with each line: <code>/^\\[INFO\\]\\s.*?com\\.myProject\\.sample:([^:]+)/</code> to capture the dependency you need, and concatenate the matches as you find them.</p>\n\n<p>Your sub would be something like:</p>\n\n<pre><code>sub readDependencyTreeFile(){\n    my ($dependencyTreeFile) = @_;\n    open my $fh, '&lt;', $dependencyTreeFile or die \"error opening $dependencyTreeFile: $!\";\n    my $content;\n    while (my $line = &lt;$fh&gt;) {\n        if ($line =~ /^\\[INFO\\]\\s.*?com\\.myProject\\.sample:([^:]+)/) {\n            $content .= $1 . \"\\n\";\n        }\n    }\n    return $content;\n}\n</code></pre>\n\n<p>This assumes that there is only one \"dependency\" written on any given line, and that the lines having such information have the format you mentioned in your sample data, i.e.:</p>\n\n<ul>\n<li>they start with \"[INFO]\"</li>\n<li>there is a blank after that</li>\n<li>possibly after something the string \"com.myProject.sample:\" is found</li>\n<li>and it captures any following characters that are not a \":\" (at least one character is needed for matching, i.e.: it has to be non-empty)</li>\n<li>the rest of the line is ignored</li>\n</ul>\n\n<p>You should also add a <code>use warnings;</code> after your <code>use strict;</code>.</p>\n"}], "owner": {"reputation": 3559, "user_id": 4318982, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/f43ul.jpg?s=128&g=1", "display_name": "gihan-maduranga", "link": "https://stackoverflow.com/users/4318982/gihan-maduranga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497369090, "creation_date": 1497344725, "question_id": 44516947, "link": "https://stackoverflow.com/questions/44516947/how-to-read-relevant-information-from-maven-dependency-tree-using-regex-in-perl", "title": "How to read relevant information from maven dependency tree using regex in Perl", "body": "<p>I am writing a script using Perl that should be able to generate list of dependent projects of given project. </p>\n\n<p><strong>dependency-tree Perl script</strong></p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n#Read dependency-tree file and split the dependencies\nsub readDependencyTreeFile(){\n  my ($dependencyTreeFile) = @_;\n    open my $fh, '&lt;', $dependencyTreeFile or die \"error opening $dependencyTreeFile: $!\";\n    my $content = do { local $/; &lt;$fh&gt; };\n\n\n    $content= ~/^com.myProject.sample:(.*?):jar:$/; \n    return $content;\n\n\n}\nmy $dependencyTreeFile = \"./dependency-tree.txt\";\nmy $content = readDependencyTreeFile($dependencyTreeFile);\nprint $content;\n</code></pre>\n\n<p><strong>Dependency-tree.txt</strong> </p>\n\n<pre><code>INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building myProject_10.5 10.5-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO]\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ myProject_10.5 ---\n[INFO] com.myProject.sample:myProject_10.5:jar:10.5-SNAPSHOT\n[INFO] \\- com.myProject.sample:common_0.1:jar:0.1-SNAPSHOT:compile\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3.594 s\n[INFO] Finished at: 2017-06-13T13:21:29+05:30\n[INFO] Final Memory: 18M/309M\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Expected Output</strong></p>\n\n<pre><code>myProject_10.5\ncommon_0.1\n</code></pre>\n\n<p>But in my case regex is not worked as expected.Please let me know where it went  wrong.<code>$content= ~/^com.myProject.sample:(.*?):jar:$/;</code> this should filter <code>maven dependency tree</code> string into above out put. </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1497345416, "last_edit_date": 1497345416, "creation_date": 1497344319, "answer_id": 44516786, "question_id": 44516691, "link": "https://stackoverflow.com/questions/44516691/capturing-the-part-after-a-special-character-along-with-a-string-in-perl/44516786#44516786", "title": "capturing the part after a special character along with a string in perl", "body": "<p>You are declaring <code>\\S</code> as two time it means it should match two non white space character (minimum possible match). So your regex can't considering the <code>.t</code> so your regex should be</p>\n\n<p><a href=\"https://regex101.com/r/ZPRNjN/3\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<pre><code>perl\\/(\\S+)\\s+\n</code></pre>\n\n<p>or</p>\n\n<p><a href=\"https://regex101.com/r/ZPRNjN/5\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<pre><code>perl\\/([^\\s]+)\n</code></pre>\n\n<p>See this <a href=\"https://regex101.com/r/ZPRNjN/1/debugger\" rel=\"nofollow noreferrer\">debugger</a> \n see the step <code>12</code> <code>13</code>.</p>\n\n<p>For your first <code>\\S+</code>, <code>abc.t</code> is matching (step 12).</p>\n\n<p>Then you have mention another <code>\\S+</code>. So your RegEx involving in <a href=\"https://perldoc.perl.org/perlre.html#Backtracking\" rel=\"nofollow noreferrer\">backtracking</a> to match the another non white space character (step 13). </p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1497362344, "last_edit_date": 1497362344, "creation_date": 1497361959, "answer_id": 44523569, "question_id": 44516691, "link": "https://stackoverflow.com/questions/44516691/capturing-the-part-after-a-special-character-along-with-a-string-in-perl/44523569#44523569", "title": "capturing the part after a special character along with a string in perl", "body": "<p>Look at your input string:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>'perl/abc.t wstat[0]';\n           \u25b2\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2794 That's a space\n</code></pre>\n\n<p>Your pattern is <code>^.*perl\\/(\\S+)\\S+}</code>: That is, you want to find two spans of <strong><em>non</em></strong>-space characters one after the other following <code>perl/</code> (BTW, you <em>probably</em> don't need to anchor the pattern if you are just going to look for \"a span of any number of characters other than newline from the beginning\").</p>\n\n<p>The only way to greedily satisfy the requirement of <em>two</em> spans of non-space characters after <code>perl/</code> is to put the character sequence <code>abc.</code> (all non-space) in the first span, and put the last remaining character <code>t</code> in the second.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $string = 'perl/abc.t wstat[0]';\n\nif ( $string =~ m{ perl/ (\\S+) }x ) {\n    print \"Basename is '$1'\\n\";\n}\n</code></pre>\n\n<p><code>use re 'debug'</code> or <code>use re 'debugcolor'</code> to get more detailed information about the regexes in your program. In this case, note that:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Compiling REx \" ^.* perl/ (\\S+) \"\nFinal program:\n   1: SBOL /^/ (2)\n   2: STAR (4)\n   3:   REG_ANY (0)\n   4: EXACT &lt;perl/&gt; (7)\n   7: OPEN1 (9)\n   9:   PLUS (11)\n  10:     NPOSIXD[\\s] (0)\n  11: CLOSE1 (13)\n  13: END (0)\n</code></pre>\n\n<p>and</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Compiling REx \" perl/ (\\S+) \"\nFinal program:\n   1: EXACT &lt;perl/&gt; (4)\n   4: OPEN1 (6)\n   6:   PLUS (8)\n   7:     NPOSIXD[\\s] (0)\n   8: CLOSE1 (10)\n  10: END (0)\n</code></pre>\n\n<p>If that is too complicated, there is also <a href=\"https://metacpan.org/pod/YAPE::Regex::Explain\" rel=\"nofollow noreferrer\">YAPE::Regex::Explain</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>C:\\Temp&gt; perl -MYAPE::Regex::Explain -e \"print YAPE::Regex::Explain-&gt;new(qr{perl/(\\S+)\\S+})-&gt;explain\"\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>The regular expression:\n\n(?-imsx:perl/(\\S+)\\S+)\n\nmatches as follows:\n\nNODE                     EXPLANATION\n----------------------------------------------------------------------\n(?-imsx:                 group, but do not capture (case-sensitive)\n                         (with ^ and $ matching normally) (with . not\n                         matching \\n) (matching whitespace and #\n                         normally):\n----------------------------------------------------------------------\n  perl/                    'perl/'\n----------------------------------------------------------------------\n  (                        group and capture to \\1:\n----------------------------------------------------------------------\n    \\S+                      non-whitespace (all but \\n, \\r, \\t, \\f,\n                             and \" \") (1 or more times (matching the\n                             most amount possible))\n----------------------------------------------------------------------\n  )                        end of \\1\n----------------------------------------------------------------------\n  \\S+                      non-whitespace (all but \\n, \\r, \\t, \\f,\n                           and \" \") (1 or more times (matching the\n                           most amount possible))\n----------------------------------------------------------------------\n)                        end of grouping\n----------------------------------------------------------------------\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 5483086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-Jy4zcLAdO1g/AAAAAAAAAAI/AAAAAAAAADs/WAgYfacy-7o/photo.jpg?sz=128", "display_name": "aman", "link": "https://stackoverflow.com/users/5483086/aman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1497362344, "creation_date": 1497344072, "question_id": 44516691, "link": "https://stackoverflow.com/questions/44516691/capturing-the-part-after-a-special-character-along-with-a-string-in-perl", "title": "capturing the part after a special character along with a string in perl", "body": "<p>I have the following string:</p>\n\n<pre><code>$string = 'perl/abc.t wstat[0]';\n</code></pre>\n\n<p>I need to extract the portion abc.t from the string. I tried the following regex and got only the abc. portion in the variable $1.</p>\n\n<pre><code> if ($string =~ qr{^.*perl\\/(\\S+)\\S+}) {\n    print Dumper $1;\n}\n</code></pre>\n\n<p>This gives the $1 as 'abc.'\nNew to regex.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1497343816, "post_id": 44516577, "comment_id": 76025346, "body": "You cannot tear those parts apart, that is all. Even when using <code>x</code> modifier. See <a href=\"https://ideone.com/U7Vfkh\" rel=\"nofollow noreferrer\">ideone.com/U7Vfkh</a>. The non-capturing group markers must go right after <code>(</code>."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1497343878, "post_id": 44516577, "comment_id": 76025378, "body": "@WiktorStribi\u017cew - so just move it all onto one string then? This is how it always used to work, so I guess that must be a change in this version of Perl? ...and wow, that was a super fast response! haha"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1497343925, "post_id": 44516577, "comment_id": 76025410, "body": "Not all in one line, just <code>(?:</code>."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1497344093, "post_id": 44516577, "comment_id": 76025539, "body": "Awesome, that did the trick :) Thanks guys! If someone could post an answer, then I&#39;ll accept Wiktors (as he got in just before), but if you also post one PerlDuck, then I&#39;ll upvote it :) That has to be a record... 5 minutes from posting, and all fixed!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497362685, "post_id": 44516577, "comment_id": 76039575, "body": "I&#39;m really not sure how that error message could be any clearer. @AndrewNewby, do you have any suggestions on how we could rephrase it?"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497456426, "post_id": 44516577, "comment_id": 76090056, "body": "@DaveCross ??? Are you asking how to rephrase the subject?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497456598, "post_id": 44516577, "comment_id": 76090149, "body": "@AndrewNewby: No, I&#39;m asking how you think the error message you could be made clearer. I thought it was very clear; you obviously didn&#39;t. You are therefore in a really good position to help improve Perl by suggesting improvements to the error message."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497456832, "post_id": 44516577, "comment_id": 76090263, "body": "@DaveCross - I had done a 14 hour day, so nothing was very clear ;) Reading back now (knowing the answer), and I can see what it was saying"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1497456953, "post_id": 44516577, "comment_id": 76090318, "body": "@AndrewNewby: So the only potential improvement you&#39;re suggesting is to preface it with &quot;if this seems to make no sense to you, try getting a good eight hours sleep and reading it again in the morning&quot; :-)"}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497457029, "post_id": 44516577, "comment_id": 76090368, "body": "@DaveCross - sounds like a good call ;)"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 5, "last_activity_date": 1497344504, "last_edit_date": 1497344504, "creation_date": 1497344201, "answer_id": 44516744, "question_id": 44516577, "link": "https://stackoverflow.com/questions/44516577/regex-matching-issue-on-newer-version-of-perl/44516744#44516744", "title": "Regex matching issue on newer version of Perl", "body": "<p>You need to make sure <code>?:</code> (the non-capturing group markers) go <em>right after the opening parenthesis</em> <strong>even when <code>x</code> modifier is used</strong>.</p>\n\n<p>See the fixed regex declaration:</p>\n\n<pre><code>$html =~ m{\n    ( # $1 the whole tag\n        &lt;\n        (?:\n            !--\n            ( # $2 the attributes are all the data between\n                .*?\n            )\n            --\n            | # or\n            (?:\n                ( # $3 the name of the tag\n                    /?\\S+?\\b\n                )\n                ( # $4 the attributes\n                    [^'\"&gt;]*\n                    (?:\n                        ( # $5 just to match quotes\n                            ['\"]\n                        )\n                        .*?\\5\n                        [^'\"&gt;]*\n                    )*\n                )\n            )\n        )\n        &gt;\n    )\n}gsx\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/perlre.html#%2Fx\" rel=\"nofollow noreferrer\">this reference</a>:</p>\n\n<blockquote>\n  <p>Note that anything inside a <code>\\Q...\\E</code> stays unaffected by <code>/x</code>. And note that <code>/x</code> doesn't affect space interpretation within a single multi-character construct. For example in <code>\\x{...}</code>, regardless of the <code>/x</code> modifier, there can be no spaces. Same for a quantifier such as <code>{3}</code> or <code>{5,}</code>. <strong>Similarly, <code>(?:...)</code> can't have a space between the <code>\"{\"</code> , <code>\"?\"</code> , and <code>\":\"</code></strong>. Within any delimiters for such a construct, allowed spaces are not affected by <code>/x</code>, and depend on the construct. For example, <code>\\x{...}</code> can't have spaces because hexadecimal numbers don't have spaces in them.</p>\n</blockquote>\n\n<p>I think there is a typo - <code>{</code> must be actually <code>(</code>. I bolded the part of text that is relevant for the current scenario.</p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 44516744, "answer_count": 1, "score": 3, "last_activity_date": 1497344504, "creation_date": 1497343755, "question_id": 44516577, "link": "https://stackoverflow.com/questions/44516577/regex-matching-issue-on-newer-version-of-perl", "title": "Regex matching issue on newer version of Perl", "body": "<p>I've moved over to a new server, with <strong>Perl 5.22.1</strong>. I have this bit of code:</p>\n\n<pre><code>$html =~ m{\n    ( # $1 the whole tag\n        &lt;\n        (\n            ?:\n            !--\n            ( # $2 the attributes are all the data between\n                .*?\n            )\n            --\n            | # or\n            (\n                ?:\n                ( # $3 the name of the tag\n                    /?\\S+?\\b\n                )\n                ( # $4 the attributes\n                    [^'\"&gt;]*\n                    (\n                        ?:\n                        ( # $5 just to match quotes\n                            ['\"]\n                        )\n                        .*?\\5\n                        [^'\"&gt;]*\n                    )*\n                )\n            )\n        )\n        &gt;\n    )\n}gsx\n</code></pre>\n\n<p>...and it now gives me this error:</p>\n\n<pre><code>A fatal error has occurred:\n\n    In '(?...)', the '(' and '?' must be adjacent in regex; marked by &lt;-- HERE in m/\n                ( # $1 the whole tag\n                    &lt;\n                    (\n                        ? &lt;-- HERE :\n                        !--\n                        ( # $2 the attributes are all the data between\n                            .*?\n                        )\n                        --\n                        | # or\n                        (\n                            ?:\n                            ( # $3 the name of the tag\n                                /?\\S+?\\b\n                            )\n                            ( # $4 the attributes\n                                [^'\"&gt;]*\n                                (\n                                    ?:\n                                    ( # $5 just to match quotes\n                                        ['\"]\n                                    )\n                                    .*?\\5\n                                    [^'\"&gt;]*\n                                )*\n                            )\n                        )\n                    )\n                    &gt;\n                )\n            / at ./admin/GT/HTML/Parser.pm line 207.\n    Compilation failed in require at (eval 25) line 8.\n\nPlease enable debugging in setup for more details.\n</code></pre>\n\n<p>I'm not really sure what it's complaining about. Any ideas?</p>\n"}, {"tags": ["perl", "mod-perl", "perlbrew", "pari", "perl-xs"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6355793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dd7d9c4b810953447efab064c5328c9?s=128&d=identicon&r=PG", "display_name": "vti", "link": "https://stackoverflow.com/users/6355793/vti"}, "is_accepted": false, "score": 0, "last_activity_date": 1505478149, "creation_date": 1505478149, "answer_id": 46239493, "question_id": 44515575, "link": "https://stackoverflow.com/questions/44515575/troubleshooting-mathpari-crash-inside-mod-perl/46239493#46239493", "title": "Troubleshooting Math::PARI crash inside mod_perl", "body": "<p>Math::Pari is not thread safe, so probably you are running under threaded MPM, try installing prefork model for Apache2. If you're on Debian/Ubuntu try this:</p>\n\n<pre><code>sudo apt-get install apache2-mpm-prefork\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6181762, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a27f4cae1760d8f3e582b7dbe6481134?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Dwojc", "link": "https://stackoverflow.com/users/6181762/andrew-dwojc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1505478149, "creation_date": 1497340824, "last_edit_date": 1497342847, "question_id": 44515575, "link": "https://stackoverflow.com/questions/44515575/troubleshooting-mathpari-crash-inside-mod-perl", "title": "Troubleshooting Math::PARI crash inside mod_perl", "body": "<p>I build (brewed) my own perl, then the mod_perl module, and then installed all required perl libraries.</p>\n\n<p>The mod_perl environment works fine. One-liners with Math::PARI also work, for example:</p>\n\n<p>perl -MMath::Pari -e \"use Math::Pari ':float', 'type_name'; warn type_name 22222222222222222222222;\"\n  t_INT at -e line 1.</p>\n\n<p>However, when I start apache2/mod_perl and try to load Math::PARI I get the following crash:</p>\n\n<pre><code>root@paris:/usr/apps/test/config# gdb -q /usr/sbin/apache2\nReading symbols from /usr/sbin/apache2...(no debugging symbols found)...done.\n(gdb) set args -f /usr/apps/test/config/httpd.conf -k start\n(gdb) run\nStarting program: /usr/sbin/apache2 -f /usr/apps/test/config/httpd.conf -k start\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff367bea7 in moveoffstack_newer_than () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/x86_64-linux-thread-multi/auto/Math/Pari/Pari.so\n(gdb) bt\n#0  0x00007ffff367bea7 in moveoffstack_newer_than () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/x86_64-linux-thread-multi/auto/Math/Pari/Pari.so\n#1  0x00007ffff367c008 in XS_Math__Pari_DESTROY () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/x86_64-linux-thread-multi/auto/Math/Pari/Pari.so\n#2  0x00007ffff5bca17c in Perl_pp_entersub () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#3  0x00007ffff5b5c771 in Perl_call_sv () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#4  0x00007ffff5bd0629 in Perl_sv_clear () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#5  0x00007ffff5bd0ce2 in Perl_sv_free2 () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#6  0x00007ffff5bcb647 in S_visit () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#7  0x00007ffff5bd1456 in Perl_sv_clean_objs () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#8  0x00007ffff5b5e4a7 in perl_destruct () from /opt/perl5/perlbrew/perls/perl-5.14.2/lib/5.14.2/x86_64-linux-thread-multi/CORE/libperl.so\n#9  0x00007ffff7f8d477 in modperl_perl_destruct () from /opt/perl5/perlbrew/perls/perl-5.14.2/usr/lib/apache2/modules/mod_perl.so\n#10 0x00007ffff7f7d81e in modperl_interp_destroy () from /opt/perl5/perlbrew/perls/perl-5.14.2/usr/lib/apache2/modules/mod_perl.so\n#11 0x00007ffff7f7e3c5 in modperl_tipool_destroy () from /opt/perl5/perlbrew/perls/perl-5.14.2/usr/lib/apache2/modules/mod_perl.so\n#12 0x00007ffff7f7d882 in modperl_interp_pool_destroy () from /opt/perl5/perlbrew/perls/perl-5.14.2/usr/lib/apache2/modules/mod_perl.so\n#13 0x00007ffff776499e in apr_pool_destroy () from /usr/lib/libapr-1.so.0\n#14 0x00007ffff7764b95 in apr_pool_clear () from /usr/lib/libapr-1.so.0\n#15 0x0000555555585e67 in main ()\n</code></pre>\n\n<p>More info about the environment:</p>\n\n<ul>\n<li>Debian 7.11</li>\n<li>perl-5.14.2 (same as system perl but built with perlbrew)</li>\n<li>mod_perl2 (built manually)</li>\n</ul>\n\n<p>How can I get to the root cause of this?</p>\n"}, {"tags": ["regex", "perl", "awk", "pcregrep"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 2, "creation_date": 1497338957, "post_id": 44514856, "comment_id": 76022303, "body": "where is your code?"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1497380555, "post_id": 44514856, "comment_id": 76050837, "body": "We get requests for write-a-regex-for-me several times every day - readers should be making it clear that Stack Overflow is not a clearing house for free labour. Please <i>always</i> make an effort before posting."}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1497437308, "post_id": 44514856, "comment_id": 76075597, "body": "@halfer I did make an effort. I just didn&#39;t include it in my question. Also I wasn&#39;t aware of awk&#39;s filter{action} method and therefore I thought that I need some complicated multiline recognizing regex, hence the question. I will definitely keep in mind, to include my efforts along with the question next time."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497346866, "post_id": 44515726, "comment_id": 76027559, "body": "Thanks for answering. But the awk script isn&#39;t working. It&#39;s never going into the first filter&#39;s action( i.e setting n=0) and thus its printing everything. I can&#39;t seem to figure out where the error is, in the regex. Can you please recheck?"}, {"owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "reply_to_user": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497350231, "post_id": 44515726, "comment_id": 76029962, "body": "Mhhhh, for me it works. Maybe it is due to our awk version. Because with the regex it should be fine. You can check here <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>. The regex is matching the date format 24 May 2017."}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497353660, "post_id": 44515726, "comment_id": 76032387, "body": "@JFS31 Thanks. I&#39;m working on a mac and it has BSD awk, and as Ed mentioned, I used the POSIX char classes and it&#39;s working."}, {"owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1497353784, "post_id": 44515726, "comment_id": 76032469, "body": "@EdMorton Thank you for the input. That was helpful :)"}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497353835, "post_id": 44515726, "comment_id": 76032510, "body": "@EdMortonThanks. One problem I face now is with the { } meta. I&#39;ve even tried GNU awk, but there doesn&#39;t seem to be a way to specify the count of the char class. For now I&#39;m using +. Let me know if there&#39;s a way to make it work."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "edited": false, "score": 0, "creation_date": 1497354367, "post_id": 44515726, "comment_id": 76032935, "body": "@AkhilAvinash Regexp intervals (<code>{}</code>) are part of POSIX so if your awk doesn&#39;t support it then get a new awk. In very old versions of gawk you had to enable it by <code>gawk --re-interval &#39;script&#39;</code> so try that and if it works then, again, get a new version of gawk as that would mean yours is years behind and you&#39;re missing a ton of extremely useful functionality. If that doesn&#39;t work for you then I must not understand what you are asking about so provide a code segment."}, {"owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1497355324, "post_id": 44515726, "comment_id": 76033647, "body": "@EdMorton Mistake! I was to fast in changing it. Thx again."}, {"owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "edited": false, "score": 0, "creation_date": 1497355697, "post_id": 44515726, "comment_id": 76033889, "body": "Not supposed to be. I guess when I added the POSIX char classes I messed up the copying."}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1497357979, "post_id": 44515726, "comment_id": 76035651, "body": "@EdMorton Here&#39;s the code: When I use :  <code>gawk &#39;&#47;[0-9]{2}[[:space:]][[:alpha:]]+[[:space:]][0-9]{4}&#47;{print}&zwnj;&#8203;&#39; test.txt</code>  There is no output where as when I use: <code>gawk &#39;&#47;[0-9]+[[:space:]][[:alpha:]]+[[:space:]][0-9]+&#47;{print}&#39; test.txt</code> The regex recognizes the date and gives the output. I even tried the command you mentioned but it still doesn&#39;t work."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1497358109, "post_id": 44515726, "comment_id": 76035753, "body": "And did you try adding <code>--re-interval</code> as I suggested? What is the output of <code>gawk --version</code>?"}, {"owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1497363146, "post_id": 44515726, "comment_id": 76039908, "body": "@EdMorton Sorry for the late reply. The --re-interval worked. Thank you.  The version is GNU Awk 3.1.7. I guess I need to update it."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1497363411, "post_id": 44515726, "comment_id": 76040114, "body": "Yes you&#39;re about 5 years and multiple versions (including major releases) behind."}], "tags": [], "owner": {"reputation": 518, "user_id": 5902546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276ef1db24c197f21b1e2a21b9a627d0?s=128&d=identicon&r=PG&f=1", "display_name": "JFS31", "link": "https://stackoverflow.com/users/5902546/jfs31"}, "is_accepted": true, "score": 0, "last_activity_date": 1497355607, "last_edit_date": 1497355607, "creation_date": 1497341242, "answer_id": 44515726, "question_id": 44514856, "link": "https://stackoverflow.com/questions/44514856/regex-to-search-pattern-and-output-multiple-lines-until-another-pattern/44515726#44515726", "title": "regex to search pattern and output multiple lines until another pattern", "body": "<p>How about that: </p>\n\n<pre><code>awk '/[0-9]{2}[[:space:]][[:alnum:]_]+[[:space:]][0-9]{4}/{ n = 0 }/123456/{ n = 1 }n' file\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    24 May 2017 17:00:06,827 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content\n\n    24 May 2017 17:00:06,829 [INFO] 123456 (Blah : Blah2) Service-name: Multiple line content. Printing Object[ ID1=fac-adasd ID2=123231\n    ID3=123108 Status=Unknown\n    Code=530007 Dest=CA\n    ]\n\n    24 May 2017 17:00:06,830 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content\n</code></pre>\n\n<p>The regex in the beginning is matching the Date at the start of each entry and is setting n to zero. But when there is your desired ID in the line n is set to one and everything is printed until the next date. </p>\n"}], "owner": {"reputation": 143, "user_id": 8152806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8AnwU.png?s=128&g=1", "display_name": "gitmorty", "link": "https://stackoverflow.com/users/8152806/gitmorty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 44515726, "answer_count": 1, "score": -1, "last_activity_date": 1497355607, "creation_date": 1497338600, "last_edit_date": 1592644375, "question_id": 44514856, "link": "https://stackoverflow.com/questions/44514856/regex-to-search-pattern-and-output-multiple-lines-until-another-pattern", "title": "regex to search pattern and output multiple lines until another pattern", "body": "<p>I have a log file, where every log follows a pattern:<br />\nDate [FLAG] LogRequestID : Content</p>\n<p>The Content part of each log might span multiple lines. Given a LogRequestID, I need to search for all occurrences, and get the entire log. I need this to be done using either perl, awk, sed or pcregrep.</p>\n<p>Example input ( Note there is no empty line between the logs):</p>\n<blockquote>\n<p>24 May 2017 17:00:06,827 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n<p>24 May 2017 17:00:06,828 [INFO] 567890 (Blah : Blah1) Service-name:: Content( May span multiple lines)</p>\n<p>24 May 2017 17:00:06,829 [INFO] 123456 (Blah : Blah2)\nService-name: Multiple line content. Printing Object[ ID1=fac-adasd\nID2=123231<br />\nID3=123108  Status=Unknown<br />\nCode=530007   Dest=CA<br />\n]</p>\n<p>24 May 2017 17:00:06,830 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n<p>24 May 2017 17:00:06,831 [INFO] 567890 (Blah : Blah2) Service-name:: Content( May span multiple lines)</p>\n</blockquote>\n<p>Given the search key 123456 I want to extract the following:</p>\n<blockquote>\n<p>24 May 2017 17:00:06,827 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n<p>24 May 2017 17:00:06,829 [INFO] 123456 (Blah : Blah2)\nService-name: Multiple line content. Printing Object[ ID1=fac-adasd\nID2=123231<br />\nID3=123108  Status=Unknown<br />\nCode=530007   Dest=CA<br />\n]</p>\n<p>24 May 2017 17:00:06,830 [INFO] 123456 (Blah : Blah1) Service-name:: Single line content</p>\n</blockquote>\n<p>Using grep gives me the single line logs, but only gives me part of the multi-line logs.</p>\n<p>I tried checking for few lines after the search pattern, using awk, and checking if another log is reached, but it becomes to inefficient. I need some sort of regex that can be used with pcregrep or perl or even awk, to fetch this output.</p>\n<p>Please help me out as I'm pretty bad with regular expressions.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 890, "user_id": 4887859, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-2eKmBnMxguY/AAAAAAAAAAI/AAAAAAAAM48/Ydry74oRJRc/photo.jpg?sz=128", "display_name": "mquantin", "link": "https://stackoverflow.com/users/4887859/mquantin"}, "edited": false, "score": 0, "creation_date": 1497340927, "post_id": 44514809, "comment_id": 76023586, "body": "if you accept to reformulate the problem, it could be &quot;match any string inside single quote after a <code>where anystring = </code> pattern&quot;. This solves your specific problem but doesn&#39;t really answer the question: <code>(?&lt;=where)[\\w\\s]*=\\s*&#39;(\\w*)&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1499146160, "post_id": 44516222, "comment_id": 76772720, "body": "@Aiswarya have you tried the answer, does that work for you ?"}], "tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 0, "last_activity_date": 1497342831, "creation_date": 1497342831, "answer_id": 44516222, "question_id": 44514809, "link": "https://stackoverflow.com/questions/44514809/how-do-i-match-a-pattern-which-can-be-anywhere-in-a-string-but-not-between-two-w/44516222#44516222", "title": "How do I match a pattern which can be anywhere in a string but not between two words?", "body": "<p>You can try this approach:</p>\n\n<pre><code>where(?!.*select|insert|update|delete).*?'([^']+)'\n</code></pre>\n\n<p>and get the result in group 1</p>\n\n<p><a href=\"https://regex101.com/r/BJFvjr/2\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p>For the following 3 input:</p>\n\n<pre><code>$string1 = \"select * from auditor where name in (select 'Jack0' name from employee where id = 1)\";\n\n$string2 = \"select * from auditor where name in (blablabla 'Jack1' name from employee where id = 'jack2')\";\n\n$string3 = \"select * from employee where name = 'Jack3'\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>You will get jack1,jack2,jack3 in the first capture group but not won't get jack0\n</code></pre>\n\n<p>p.s: plz note that you don't need insert/update/delete these were put in the regex just to make it a bit more generic</p>\n"}, {"tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1604886062, "creation_date": 1604886062, "answer_id": 64744852, "question_id": 44514809, "link": "https://stackoverflow.com/questions/44514809/how-do-i-match-a-pattern-which-can-be-anywhere-in-a-string-but-not-between-two-w/64744852#64744852", "title": "How do I match a pattern which can be anywhere in a string but not between two words?", "body": "<p>The correct advice if the queries can be arbitrarily complex is to use a parser because SQL is context-sensitive and thus beyond the power of sane regexes.</p>\n<p>If the <code>where</code> clauses will always be simple, you can constrain the patterns with, for example</p>\n<pre><code>if (/\\bwhere\\s+\\w+\\s+=\\s+'([^']*)'/i) {\n  print &quot;  MATCH [$1]\\n&quot;;\n}\n</code></pre>\n<p>to look for a quoted string in a clause of the form <code>where column = 'foo'</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 8152961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-R-CzDhE6kss/AAAAAAAAAAI/AAAAAAAAAHQ/RFsiKB4bnSQ/photo.jpg?sz=128", "display_name": "Aiswarya", "link": "https://stackoverflow.com/users/8152961/aiswarya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1604886062, "creation_date": 1497338465, "last_edit_date": 1497338511, "question_id": 44514809, "link": "https://stackoverflow.com/questions/44514809/how-do-i-match-a-pattern-which-can-be-anywhere-in-a-string-but-not-between-two-w", "title": "How do I match a pattern which can be anywhere in a string but not between two words?", "body": "<p>Say I've two strings,</p>\n\n<pre><code>$string1 = \"select * from auditor where name in (select 'Jack' name from employee where id = 1)\";\n\n$string2 = \"select * from employee where name = 'Jack'\";\n</code></pre>\n\n<p>Now, I need a RegEx to find anything enclosed inside a single quote only in where clause. i.e., in $string1 it should not match, as the single quotes are used in select clause and $string2 should match as it is used in where clause.</p>\n\n<p>I tried</p>\n\n<pre><code>(?!select .*\\'(.*)\\' where)where (.*\\'(.*)\\')\n</code></pre>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 21839, "user_id": 6521116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U2zHq.jpg?s=128&g=1", "display_name": "LF00", "link": "https://stackoverflow.com/users/6521116/lf00"}, "edited": false, "score": 4, "creation_date": 1497335545, "post_id": 44513803, "comment_id": 76020258, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/16595044/6521116\">Run executable from php without spawning a shell</a>"}], "answers": [{"tags": [], "owner": {"reputation": 492, "user_id": 3136329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56576788ffa5568944623620e157a37?s=128&d=identicon&r=PG&f=1", "display_name": "Eimsas", "link": "https://stackoverflow.com/users/3136329/eimsas"}, "is_accepted": false, "score": 0, "last_activity_date": 1497352537, "last_edit_date": 1497352537, "creation_date": 1497335398, "answer_id": 44513852, "question_id": 44513803, "link": "https://stackoverflow.com/questions/44513803/how-to-run-perl-script-inside-php-without-by-terminal-linux/44513852#44513852", "title": "how to run perl script inside php without by terminal linux", "body": "<p>Use <code>exec</code></p>\n\n<pre><code>exec(\"perl /var/www/app/site_by_corp.pl &amp;\", $output);\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 4473581, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2e8030f63beaeebb90a52a68505b305d?s=128&d=identicon&r=PG&f=1", "display_name": "JeevaRekha", "link": "https://stackoverflow.com/users/4473581/jeevarekha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1497369943, "answer_count": 1, "score": 0, "last_activity_date": 1497352537, "creation_date": 1497335236, "question_id": 44513803, "link": "https://stackoverflow.com/questions/44513803/how-to-run-perl-script-inside-php-without-by-terminal-linux", "closed_reason": "Duplicate", "title": "how to run perl script inside php without by terminal linux", "body": "<p>I have a perl script which i have to run in php code. Here is my perl script.</p>\n\n<pre><code>perl /var/www/app/site_by_corp.pl &amp;\n</code></pre>\n\n<p>I was running this perl script in terminal by manual. Now i want to run this inside php code.</p>\n"}, {"tags": ["perl", "public-key-encryption"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497324933, "post_id": 44510941, "comment_id": 76016579, "body": "Looking at the source, the digest algorithm used must produce a digest that&#39;s at least the size of the plaintext. The default algorithm is SHA1, which produces 20-byte digests."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497325144, "post_id": 44510941, "comment_id": 76016623, "body": "Looks like DH is meant to be used to exchange a key to be used for (more efficient) symetric encryption. Read <a href=\"https://en.wikipedia.org/wiki/Key_exchange\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 1, "user_id": 8151798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7c5c9890db654bb4d85feabceefba8?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSoft", "link": "https://stackoverflow.com/users/8151798/codesoft"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497481050, "post_id": 44510941, "comment_id": 76102367, "body": "Roger, that makes sense - appreciate the feedback! Thank you"}], "owner": {"reputation": 1, "user_id": 8151798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7c5c9890db654bb4d85feabceefba8?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSoft", "link": "https://stackoverflow.com/users/8151798/codesoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497321662, "creation_date": 1497316834, "last_edit_date": 1497321662, "question_id": 44510941, "link": "https://stackoverflow.com/questions/44510941/message-length-encryption-failure-using-perl-cryptpkdh", "title": "Message Length Encryption Failure using Perl Crypt::PK::DH", "body": "<p>Why does a change in Message Length Cause the decryption to fail in the Below Snippet? </p>\n\n<p>I Receive the following Error \"FATAL: dh_encrypt_key failed: Invalid hash specified. at C:/Perl/perl/site/lib/Crypt/PK/DH.pm line 225.\" </p>\n\n<p>Occurs on Perl (v5.14.2) built for MSWin32-x86-multi-thread,  Win10 </p>\n\n<pre><code>use Crypt::PK::DH;\n\nmy $pub = Crypt::PK::DH-&gt;new('bob_pub_key.gpg');\n\nprint \"encrypting secret message... \\n\";\n\nmy $ct = $pub-&gt;encrypt(\"1-2-3-4-5-6-7-8-9-10\");  # This Works\n\n# my $ct = $pub-&gt;encrypt(\"1-2-3-4-5-6-7-8-9-10-\"); # Why Does This Not Work???\n\nmy $priv = Crypt::PK::DH-&gt;new('bob_priv_key.gpg');\n\nprint \"decrypting secret message \\n\";\n\nmy $pt = $priv-&gt;decrypt($ct);\n\nprint \"$pt\\n\";\n</code></pre>\n"}, {"tags": ["html", "forms", "perl", "post", "get"], "comments": [{"owner": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 2, "creation_date": 1497312701, "post_id": 44510478, "comment_id": 76013948, "body": "Considering this is for a school assignment, you&#39;re going to need to show a significant amount of effort. Could you please update your question to show <a href=\"http://meta.stackoverflow.com/questions/261592\"><b>what you have already tried</b></a> with regards to the new approach, showcasing the specific problem you are facing in a <a href=\"http://stackoverflow.com/help/mcve\"><b>minimal, complete, and verifiable example</b></a>."}, {"owner": {"reputation": 69, "user_id": 6622169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51cb541388df0bb73d4b10af8383b907?s=128&d=identicon&r=PG&f=1", "display_name": "OrcMan", "link": "https://stackoverflow.com/users/6622169/orcman"}, "reply_to_user": {"reputation": 36566, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1497313057, "post_id": 44510478, "comment_id": 76014020, "body": "My issue I believe resides in the environment variable since testing I have not been able to find a way to pull the form elements. Edited to show my script so far."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1497321144, "post_id": 44510478, "comment_id": 76015744, "body": "Use <a href=\"https://metacpan.org/pod/CGI::Simple\" rel=\"nofollow noreferrer\">CGI::Simple</a> instead of cargo-culted code from the last decade of the 20th century. Also, if this is what they are teaching you, ask for a refund."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1497323232, "post_id": 44510478, "comment_id": 76016189, "body": "I would assume that you&#39;re supposed to <code>use strict</code> and <code>use warnings</code> and indent your code properly? I&#39;ve tidied the Perl that you&#39;ve shown so that I could read it and it becomes immediately obvious that it won&#39;t even compile. We&#39;re not here to sort out your junk code. If you can&#39;t make an effort with what you write then I certainly won&#39;t fix it for you."}, {"owner": {"reputation": 69, "user_id": 6622169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51cb541388df0bb73d4b10af8383b907?s=128&d=identicon&r=PG&f=1", "display_name": "OrcMan", "link": "https://stackoverflow.com/users/6622169/orcman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1500553361, "post_id": 44510478, "comment_id": 77395113, "body": "@Borodin Actually I have not missed any lectures and maintain a GPA of 4.0, but the class is being taught by a prof who has no prior knowledge of perl and cgi because the regular prof died. The course has been removed for students who started a semester after me, but all we have is a log book written 15 years ago by the prof who created the course. I have had to perform 3 lectures for the class now that I have learned more about perl from perlmonks. Thanks for your snarky reply though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1500553794, "post_id": 44510478, "comment_id": 77395436, "body": "@KieranO&#39;Connor: Note that your question got three downvotes (none of them mine) and my comment got an upvote. The best way to learn a language is to read the documentation and experiment with what you have read. If you want to ask a question then it should be oriented towards learning the language rather than getting an answer to your problem."}, {"owner": {"reputation": 69, "user_id": 6622169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51cb541388df0bb73d4b10af8383b907?s=128&d=identicon&r=PG&f=1", "display_name": "OrcMan", "link": "https://stackoverflow.com/users/6622169/orcman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1500553940, "post_id": 44510478, "comment_id": 77395565, "body": "@Borodin It doesn&#39;t matter what you think, I have reported your comments. Best of luck with your endeavors."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1500554319, "post_id": 44510478, "comment_id": 77395879, "body": "@KieranO&#39;Connor: All that reporting my comments may do is to get them deleted, which is an odd thing to want if you say it doesn&#39;t matter what I think. If you&#39;re passing on your knowledge then I hope you&#39;ve started using <code>use strict</code> and stopped calling subroutines with an ampersand?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1500563405, "post_id": 44510478, "comment_id": 77403623, "body": "@Borodin: I&#39;m pretty sure you misunderstood <i>the information is no longer stored in the environment variable</i>. I suspect it means &quot;I can get the parameters from the environment variable for a GET request, but for a POST request, the data appears to be stored elsewhere - and I can&#39;t work out where&quot;. It sounds like this is a really badly-run course and I&#39;m getting flashbacks to 1988 when I was being taught C by a lecturer who was reading K&amp;R two chapters ahead of the class :-/"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1500565460, "post_id": 44510478, "comment_id": 77405208, "body": "@DaveCross: Ah thank you, that helps. If this is with regard to the same course as his most recent question then it is being taken by a professor who doesn&#39;t know the subject based on some old notes from a different lecturer who has now passed away. I can understand that writing CGI code without using them module may be beneficial, but I don&#39;t like the insistence on embedding HTML in the source."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1500565768, "post_id": 44510478, "comment_id": 77405444, "body": "@DaveCross: Maybe you can help Kieran out with <a href=\"https://stackoverflow.com/questions/45214778/\">today&#39;s question</a> as he seems to approve of you!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1500565811, "post_id": 44510478, "comment_id": 77405472, "body": "@Borodin: I was just looking at that."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6622169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51cb541388df0bb73d4b10af8383b907?s=128&d=identicon&r=PG&f=1", "display_name": "OrcMan", "link": "https://stackoverflow.com/users/6622169/orcman"}, "edited": false, "score": 0, "creation_date": 1500553467, "post_id": 44515892, "comment_id": 77395193, "body": "Thanks, I have already finished the assignment long ago, and built it the exact way you have showed.  Yes the course is based on a prof who wrote it 15+ years ago and never changed anything."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1497343817, "last_edit_date": 1497343817, "creation_date": 1497341780, "answer_id": 44515892, "question_id": 44510478, "link": "https://stackoverflow.com/questions/44510478/how-do-i-use-embedded-html-form-data-when-method-is-post/44515892#44515892", "title": "How do I use embedded HTML form data when method is POST?", "body": "<p>Someone is teaching you very bad practices. I don't know whether your sample code is following examples supplied by your school or whether you have cobbled it together from bad examples on the internet - but either way, this code uses techniques that have been out of date for twenty years.</p>\n\n<p>There's a whole debate to be had about the wisdom of teaching CGI programming in 2017 (see <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> for a brief discussion of some better approaches) but let's ignore that and assume that CGI is a good idea here.</p>\n\n<p>If you're writing a CGI program, then you should use the <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">CGI.pm</a> library which has been part of the standard Perl distribution for over twenty years (it was removed recently, but the chances of your school using a version this up to date is tiny).</p>\n\n<p>A standard CGI program, using CGI.pm looks like this:</p>\n\n<pre><code>#!/user/bin/env perl\n\nuse strict;\nuse warnings;\nuse CGI qw[header param]; # Load the two functions we're going to use\n\n# Display the content-type header\nprint header;\n\n# See if we have been passed parameters.\nif (param) {\n  # Display the parameters\n  # Note: I've ignored HTML here. You shouldn't\n  print 'Name: ', param('person');\n  print 'Sport: ', param('sport');\n  # etc... \n} else {\n  # Display the form\n  ...\n}\n</code></pre>\n\n<p>I ignored HTML in my example because embedding HTML in your Perl code is a terrible idea. It's a much better idea to use a templating system (I recommend the <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template Toolkit</a>).</p>\n\n<p>A few other points:</p>\n\n<ul>\n<li>Always <code>use strict</code> and <code>use warnings</code>.</li>\n<li><code>-w</code> on the shebang was obsoleted by <code>use warnings</code> in 2000.</li>\n<li>Using <code>&amp;</code> on subroutine calls has been unnecessary since Perl 5 was released in 1994.</li>\n</ul>\n\n<p>I know that you don't know any better and that you're just following what your teacher is telling you to do. But it's really depressing to see such outdated practices been taught in school.</p>\n\n<p><strong>Update:</strong> And just to add the answer to your original question. You're right that in a POST request, the parameter data is no longer available in the <code>QUERY_STRING</code> environment variable - you need to read it from <code>STDIN</code> instead. That's one of the many advantages of CGI.pm - you use the same method (the <code>param()</code> subroutine) to access both GET and POST parameters.</p>\n"}], "owner": {"reputation": 69, "user_id": 6622169, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51cb541388df0bb73d4b10af8383b907?s=128&d=identicon&r=PG&f=1", "display_name": "OrcMan", "link": "https://stackoverflow.com/users/6622169/orcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 44515892, "answer_count": 1, "score": -3, "last_activity_date": 1497343817, "creation_date": 1497312577, "last_edit_date": 1497323641, "question_id": 44510478, "link": "https://stackoverflow.com/questions/44510478/how-do-i-use-embedded-html-form-data-when-method-is-post", "title": "How do I use embedded HTML form data when method is POST?", "body": "<p>I have an assignment for school. We need to use the POST method to pass data from an embedded HTML form to a Perl script. The Perl will then loop through the data and display it back to the user.</p>\n\n<p>I was using a separate file and the GET method but my instructor said I had to embed the HTML and use POST. But the information is no longer stored in the environment variable.</p>\n\n<p>Is there a built-in variable I can use to access this information?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nprint \"Content-Type:text/html\\n\\n\";\n\n$qstring = $ENV{'QUERY_STRING'};\n$rmethod = $ENV{'REQUEST_METHOD'};\n\nif ( $rmethod eq \"GET\" ) {\n    &amp;displayform();\n}\nelsif ( $rmethod eq \"POST\" ) {\n\n    @pairs = split(/&amp;/, $qstring);\n\n    foreach (@pairs) {\n        ($key, $value) = split(/=/);\n        $value =~ tr/+/ /;\n        $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack(\"C\", hex($1))/eg;\n        $form{$key} = $value;\n    }\n\n    print \"&lt;html&gt;&lt;head&gt;&lt;title&gt;Student Survey&lt;/title&gt;&lt;/head&gt;\\n\";\n    print \"&lt;body&gt;\\n\";\n\n    &amp;displayInfo();\n\n    print \"&lt;/body&gt;&lt;/html&gt;\\n\";\n}\n\nprint \"&lt;/body&gt;&lt;/html&gt;\\n\";\n}\n\nsub displayInfo {\n    print \"Full Name:\",        $form{\"person\"}, \"&lt;br&gt;\";\n    print \"Favourite:\",        $form{\"sport\"},  \"&lt;br&gt;\";\n    print \"Favourite Course:\", $form{\"course\"}, \"&lt;br&gt;\";\n    print \"GPA:\",              $form{\"gpa\"},    \"&lt;br&gt;\";\n}\n\nsub displayform {\n    print qq~ (FORM GOES HERE)\n</code></pre>\n"}, {"tags": ["perl", "testing", "mojolicious"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497301811, "post_id": 44508344, "comment_id": 76010749, "body": "Is it Build.PL that does something special when it&#39;s in a git dir? That might be the difference."}, {"owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497319996, "post_id": 44508344, "comment_id": 76015485, "body": "Not that I know of; regardless, on both systems it&#39;s in a git directory.  I think this has more to do with the way Mojolicious is finding the config file (using <code>Mojolicious::Plugin::JSONConfig</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "edited": false, "score": 0, "creation_date": 1497320711, "post_id": 44508751, "comment_id": 76015650, "body": "True.  However, the config file is being loaded through <code>Mojolicious::Plugin::JSONConfig</code> which complicates matters in this case; it&#39;s supposed to be defaulting to looking &quot; in the application home directory&quot;.  I may be coming at this from the wrong angle, though the blib subdir seems to point to Module::Build being involved, and the Mojo app otherwise seemed to find the config file without a problem.  I&#39;ll troubleshoot further."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "edited": false, "score": 0, "creation_date": 1497325423, "post_id": 44508751, "comment_id": 76016679, "body": "<code>blib</code> is the staging dir. The <code>make</code> step places the files to install in <code>blib</code> (by copying and creating them), and the <code>install</code> step copies from them from <code>blib</code> into their final location. <code>blib</code> is technically the &quot;application&#39;s home directory&quot; when testing."}, {"owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "edited": false, "score": 0, "creation_date": 1497325756, "post_id": 44508751, "comment_id": 76016757, "body": "To clarify - even after <code>install</code>, doesn&#39;t a <code>test</code> always go against the files in <code>blib</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "edited": false, "score": 1, "creation_date": 1497326279, "post_id": 44508751, "comment_id": 76016875, "body": "Yes. <code>install</code> has no effect on the staging environnent, so you can pretend it never happened and still run the tests."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1497301735, "creation_date": 1497301735, "answer_id": 44508751, "question_id": 44508344, "link": "https://stackoverflow.com/questions/44508344/modulebuild-test-looks-in-different-directories-on-different-systems/44508751#44508751", "title": "Module::Build test looks in different directories on different systems", "body": "<p>Generally speaking, you can't make assumptions about the current work directory you're given. </p>\n\n<pre><code>use Cwd            qw( abs_path );\nuse File::Basename qw( dirname );\n\nuse constant PROJ_DIR =&gt; dirname(abs_path(__FILE__)) . '/..';\n\nmy $config_qfn = PROJ_DIR.'/project.json';\n</code></pre>\n"}], "owner": {"reputation": 2444, "user_id": 584940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4fd36b5abead93bfd3575c08cd923e9?s=128&d=identicon&r=PG", "display_name": "Randall", "link": "https://stackoverflow.com/users/584940/randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 44508751, "answer_count": 1, "score": 0, "last_activity_date": 1497301735, "creation_date": 1497299964, "question_id": 44508344, "link": "https://stackoverflow.com/questions/44508344/modulebuild-test-looks-in-different-directories-on-different-systems", "title": "Module::Build test looks in different directories on different systems", "body": "<p>I'm trying to install a Perl Mojolicious project from a development system onto a staging system.  On the staging system (Centos), the tests are looking in the wrong place for the config file. That is, eg, </p>\n\n<pre><code>./Build test --test-files t/001_basic.t\n</code></pre>\n\n<p>errors out with </p>\n\n<blockquote>\n  <p>t/001_basic.t .. 1/? Configuration file \"/home/randall/git/Project/blib/project.json\" missing, maybe you need to create it?</p>\n</blockquote>\n\n<p>On the development system (Ubuntu), the same <code>Build test</code> command is reading the config file out of the parent directory (ie, /home/randall/git/Project/project.json) which is what I want.</p>\n\n<p>I've already ruled out the working directory as a possible culprit, and reran <code>perl Build.PL</code>, regenerating the Build script.</p>\n\n<p>What am I missing that would cause <em>only</em> the staging system to be looking in the blib directory?</p>\n\n<p><strong>Edit</strong>: Added that dev is Ubuntu and staging is Centos, though I don't expect that to be a factor</p>\n"}, {"tags": ["android", "python", "perl", "data-transfer", "transmission"], "answers": [{"comments": [{"owner": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "edited": false, "score": 0, "creation_date": 1497298775, "post_id": 44508044, "comment_id": 76009313, "body": "Thanks, that sounds easy. And how can I view the front cam remotely?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "edited": false, "score": 0, "creation_date": 1497298806, "post_id": 44508044, "comment_id": 76009328, "body": "@machinery open the camera app?"}, {"owner": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497299519, "post_id": 44508044, "comment_id": 76009683, "body": "@simbabque But the user should not be disturbed, i.e. he should not notify it. I will conduct a study on the tablet and would like to observe the screen and front cam during the study."}], "tags": [], "owner": {"reputation": 867, "user_id": 677624, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05de8d6239cd093cb12120cb0ab5f3a2?s=128&d=identicon&r=PG", "display_name": "Skyler", "link": "https://stackoverflow.com/users/677624/skyler"}, "is_accepted": true, "score": 2, "last_activity_date": 1497298659, "creation_date": 1497298659, "answer_id": 44508044, "question_id": 44507989, "link": "https://stackoverflow.com/questions/44507989/streaming-android-tablet-display-to-notebook/44508044#44508044", "title": "Streaming Android tablet display to notebook", "body": "<p>Use a VNC server on your tablet. There are several out there; I've used Alpha VNC. Then on the computer use a VNC viewer such as RealVNC to connect to it, and this will allow you to view the tablet screen on the PC.</p>\n"}], "owner": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44508044, "answer_count": 1, "score": 0, "last_activity_date": 1497298659, "creation_date": 1497298467, "question_id": 44507989, "link": "https://stackoverflow.com/questions/44507989/streaming-android-tablet-display-to-notebook", "title": "Streaming Android tablet display to notebook", "body": "<p>I'm recording (external and internal) sensor data on my Android tablet. Now I would like to stream these recorded sensor data over internet to my notebook / PC and display a graph of the data there. I have found this nice tutorial: <a href=\"http://simena86.github.io/blog/2013/04/30/logging-accelerometer-from-android-to-pc/\" rel=\"nofollow noreferrer\">http://simena86.github.io/blog/2013/04/30/logging-accelerometer-from-android-to-pc/</a></p>\n\n<p>In this tutorial the data is streamed from Android over sockets to a python application which in turn uses a Perl script for plotting (I have never used perl before).</p>\n\n<p>Now I would also like to stream the tablet display as well as the front cam recording (i.e. video data) from the tablet to the notebook / PC. Is there an easy way for doing this or can the above method be altered to achieve this?</p>\n"}, {"tags": ["perl", "hash", "key"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1497288219, "post_id": 44505186, "comment_id": 76003973, "body": "Where in your example do you need multiple values for the same key?"}, {"owner": {"reputation": 125, "user_id": 3900110, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/097a315fb250b342e3202986e83d8b01?s=128&d=identicon&r=PG&f=1", "display_name": "kawther", "link": "https://stackoverflow.com/users/3900110/kawther"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1497288473, "post_id": 44505186, "comment_id": 76004093, "body": "@choroba yes , i need multiple values for the same key ."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1497288606, "post_id": 44505186, "comment_id": 76004169, "body": "Answer to &quot;Where&quot; shouldn&#39;t be &quot;Yes&quot;."}, {"owner": {"reputation": 125, "user_id": 3900110, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/097a315fb250b342e3202986e83d8b01?s=128&d=identicon&r=PG&f=1", "display_name": "kawther", "link": "https://stackoverflow.com/users/3900110/kawther"}, "edited": false, "score": 0, "creation_date": 1497288956, "post_id": 44505186, "comment_id": 76004348, "body": "sorry ,@choroba i mean , i want to combine the two hash by the key"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497293425, "post_id": 44505186, "comment_id": 76006682, "body": "Rolled back changes of the question because they were either incomplete (because the desired output wasn&#39;t adjusted too) or unrelated to the existing question."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 3900110, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/097a315fb250b342e3202986e83d8b01?s=128&d=identicon&r=PG&f=1", "display_name": "kawther", "link": "https://stackoverflow.com/users/3900110/kawther"}, "edited": false, "score": 0, "creation_date": 1497290056, "post_id": 44505346, "comment_id": 76004936, "body": "please how can i do the sum of the same values; like &#39;amg&#39; 6 + 32 ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 125, "user_id": 3900110, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/097a315fb250b342e3202986e83d8b01?s=128&d=identicon&r=PG&f=1", "display_name": "kawther", "link": "https://stackoverflow.com/users/3900110/kawther"}, "edited": false, "score": 9, "creation_date": 1497290374, "post_id": 44505346, "comment_id": 76005081, "body": "For a new question, ask a new question."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1497288816, "last_edit_date": 1497288816, "creation_date": 1497288376, "answer_id": 44505346, "question_id": 44505186, "link": "https://stackoverflow.com/questions/44505186/adding-multiple-values-to-the-same-key-in-perl-hash/44505346#44505346", "title": "Adding multiple values to the same key in perl hash", "body": "<p>You can store an array reference at each key:</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %hash1 = qw( cavallaro amg\n                gariboldi amg\n                dalfabbro mdg_dig\n                valerio apb_fmtrd );\n\nmy %hash2 = qw( cavallaro 32\n                gariboldi 6\n                dalfabbro 62\n                valerio 19 );\n\nmy %r;\nfor my $k1 (keys %hash1) {\n    $r{$k1} = [ $hash2{$k1}, $hash1{$k1} ];\n}\n\nuse Data::Dumper; print Dumper \\%r;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'gariboldi' =&gt; [\n                           '6',\n                           'amg'\n                         ],\n          'valerio' =&gt; [\n                         '19',\n                         'apb_fmtrd'\n                       ],\n          'dalfabbro' =&gt; [\n                           '62',\n                           'mdg_dig'\n                         ],\n          'cavallaro' =&gt; [\n                           '32',\n                           'amg'\n                         ]\n        };\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3900110, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/097a315fb250b342e3202986e83d8b01?s=128&d=identicon&r=PG&f=1", "display_name": "kawther", "link": "https://stackoverflow.com/users/3900110/kawther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1497293367, "creation_date": 1497287752, "last_edit_date": 1497293367, "question_id": 44505186, "link": "https://stackoverflow.com/questions/44505186/adding-multiple-values-to-the-same-key-in-perl-hash", "title": "Adding multiple values to the same key in perl hash", "body": "<p>I have tow hash.</p>\n\n<p>%hash1 : </p>\n\n<pre><code>cavallaro; amg; \ngariboldi; amg; \ndalfabbro; mdg_dig; \nvalerio; apb_fmtrd; \n</code></pre>\n\n<p>%hash2 :</p>\n\n<pre><code>cavallaro; 32; \ngariboldi; 6; \ndalfabbro; 62; \nvalerio; 19; \n</code></pre>\n\n<p>I want to combinate them by key like this ;  </p>\n\n<pre><code>cavallaro; 32; amg; \ngariboldi; 6; amg; \ndalfabbro; 62; mdg_dig; \nvalerio; 19; apb_fmtrd;\n</code></pre>\n\n<p>How would I add multiple values for the same key.\nPlease, any suggestions will be appreciated.</p>\n"}, {"tags": ["linux", "perl", "bioinformatics"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497637812, "post_id": 44505073, "comment_id": 76179640, "body": "Welcome to stackoverflow. Have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>.  There are a number of other short and useful help pages there."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1499458127, "post_id": 44505400, "comment_id": 76933017, "body": "This doesn&#39;t matter for genomes, but generally speaking <code>&#39;0&#39;</code> is a false value, so you probably want <code>while (length $str)</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1499618637, "last_edit_date": 1499618637, "creation_date": 1497288568, "answer_id": 44505400, "question_id": 44505073, "link": "https://stackoverflow.com/questions/44505073/how-can-i-split-my-data-in-small-enough-chunks-to-feed-to-seq/44505400#44505400", "title": "How can I split my data in small enough chunks to feed to Seq?", "body": "<p><a href=\"http://p3rl.org/substr\" rel=\"nofollow noreferrer\">substr</a> returns the removed part of a string; you can just run it in a loop:</p>\n\n<pre><code>while (length $str) {\n    my $substr = substr $str, 0, 17, \"\";\n    print $substr, \"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497637454, "post_id": 44505966, "comment_id": 76179439, "body": "@Tvega  Added a shorter way to do this, edited a bit"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1499665248, "post_id": 44505966, "comment_id": 76982611, "body": "@Tvega I added a line to process the very last batch of data, from after the last time the buffer was emptied until the end of the file. Since the file is likely not exactly a multiple of 135 lines that doesn&#39;t get processed in the loop."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1499590261, "last_edit_date": 1499590261, "creation_date": 1497290618, "answer_id": 44505966, "question_id": 44505073, "link": "https://stackoverflow.com/questions/44505073/how-can-i-split-my-data-in-small-enough-chunks-to-feed-to-seq/44505966#44505966", "title": "How can I split my data in small enough chunks to feed to Seq?", "body": "<p>I assume that the \"<em>very large genome</em>\" is stored in a very large file, and that it is fine to collect data by number of lines (and not by number of characters) since this is the first mentioned criterion.</p>\n\n<p>Then you can read the file line by line and assemble lines until there is 135 of them.  Then hand them off to a program or routine that processes that, empty your buffer, and keep going</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift || 'default_filename.txt';\nmy $num_lines_to_process = 135;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy ($line_counter, @buffer);\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if ($line_counter == $num_lines_to_process) \n    {\n        process_data(\\@buffer);\n        @buffer = ();\n        $line_counter = 0;\n    }\n    push @buffer, $_;\n    ++$line_counter;\n}\n\nprocess_data(\\@buffer) if @buffer;  # last batch\n\nsub process_data {\n    my ($rdata) = @_;\n    say for @$rdata; say '---';  # print data for a test\n}\n</code></pre>\n\n<p>If your processing application/routine wants a string, you can append to a string every time instead of adding to an array, <code>$buffer .= $_;</code> and clear that by <code>$buffer = '';</code> as needed.  </p>\n\n<p>If you need to pass a string but there is also some use of an array while collecting data (intermediate checks/pruning/processing?), then collect lines into an array and use as needed, and join into a string before handing it off, <code>my $data = join '', @buffer;</code></p>\n\n<p>You can also make use of the <a href=\"http://perldoc.perl.org/perlvar.html#$.\" rel=\"nofollow noreferrer\"><code>$.</code> variable</a> and the <a href=\"http://perldoc.perl.org/perlop.html#Multiplicative-Operators\" rel=\"nofollow noreferrer\">modulo operator (<code>%</code>)</a></p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    chomp;\n\n    push @buffer, $_;\n\n    if ($. % $num_lines_to_process == 0)  # every $num_lines_to_process\n    {\n         process_data(\\@buffer);\n         @buffer = ();\n    }\n}\n\nprocess_data(\\@buffer) if @buffer;  # last batch\n</code></pre>\n\n<p>In this case we need to first store a line and then check its number, since <code>$.</code> (line number read from a filehandle, see docs linked above) starts from 1 (not 0).</p>\n"}], "owner": {"reputation": 11, "user_id": 8150275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad99faaa0044d148366421f7147e0628?s=128&d=identicon&r=PG&f=1", "display_name": "Tvega ", "link": "https://stackoverflow.com/users/8150275/tvega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499618637, "creation_date": 1497287366, "last_edit_date": 1499519848, "question_id": 44505073, "link": "https://stackoverflow.com/questions/44505073/how-can-i-split-my-data-in-small-enough-chunks-to-feed-to-seq", "title": "How can I split my data in small enough chunks to feed to Seq?", "body": "<p>I am working on a bioinformatics project where I am looking at very large genomes. Seg only reads 135 lines at a time, so when we feed the genomes in it gets overloaded. I am trying to create a perl command that will split the sections into 135 line sections. The character limit would be 10,800 since there are 80 columns. This is what i have so far </p>\n\n<pre><code>#!usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $str = \n'&gt;AATTCCGG\nTTCCGGAA\nCCGGTTAA\nAAGGTTCC\n&gt;AATTCCGG';\n\n\n\nsubstr($str,17) = \"\";\n\nprint \"$str\";\n</code></pre>\n\n<p>It splits at the 17th character but only prints that section, I want it to continue printing the rest of the data. How do i add a command that allows the rest of the data to be shown. Like it should split at every 17th character continuing. (then of course i can go back in and scale it up to the size i actually need. ) </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497271182, "post_id": 44499630, "comment_id": 75992596, "body": "Plus one for <i>humongous</i>. Why is the <code>split</code> in line 63 so slow? Can you give some example data? Possibly changing your algorithm might help. Also in line 64 you have <code>$sub_str_1[3] . $sub_str_1[4] . $sub_str_1[5] . $sub_str_1[6]</code> twice, which gets rebuilt for every iteration. You can move that outside the inner loop and put it in its own variable. That should save a little."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497271374, "post_id": 44499630, "comment_id": 75992751, "body": "<a href=\"https://stackoverflow.com/posts/44499630/edit\">Edit</a> the question, don&#39;t post code or data into comments please."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497271522, "post_id": 44499630, "comment_id": 75992870, "body": "Great, thank you. Now we are missing <code>%MATCHED_RESISTORS</code> and <code>%COORDINATES</code> and <code>%NETS</code> and <code>%IR_VALUES</code> and <code>$loop_count</code>. Can you please turn the block of code into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so I can run it?"}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497271602, "post_id": 44499630, "comment_id": 75992933, "body": "I only pasted a part of the code. Do you want me to post the entire code?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497271703, "post_id": 44499630, "comment_id": 75993011, "body": "No, not the entire code. I want you to turn it into something that reproduces the problem that I can run. Boil it down to taking input and processing it, and show what the final output should be, so we don&#39;t break it when we try to make it faster."}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1497272351, "post_id": 44499630, "comment_id": 75993505, "body": "Edit done. Let me know whether it&#39;s enough to reproduce."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497272356, "post_id": 44499630, "comment_id": 75993510, "body": "I think it&#39;ll be because you have a 3 deep loop, and that is going to be a multiplicative sort of a problem. You can <i>probably</i> optimise there, but without more information it&#39;s hard to say how."}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497272556, "post_id": 44499630, "comment_id": 75993664, "body": "please shade some light on &quot;more information&quot;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497272664, "post_id": 44499630, "comment_id": 75993737, "body": "OK. So - given your desired output - it <i>looks</i> like you&#39;re value matching between file 1 and 2, and fields 2,3,4,5,6,7,8,9 - (ay_viabar ...) and just printing the ones in file2 that exist in file1. Is that correct?"}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497272753, "post_id": 44499630, "comment_id": 75993810, "body": "This is what I observed: Say, for $net=1, $NETS{1}{$net} refer to an array with 846 elements, $NETS{2}{$net} refer to an array with 115 elements. The matching elements are 42. The $loop_count in this case is 15660. Does this info help?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1497272922, "post_id": 44499630, "comment_id": 75993933, "body": "Thing is though - no, it doesn&#39;t, because we don&#39;t have the sample data needed to reconstruct a test case of &#39;nets&#39;. Your runnable sample ... well, it runs, which is a good start. But because we&#39;ve no example &#39;nets&#39; data, then we can&#39;t run it ourselves, and optimise.   I suspect you can splice your comparison values into a hash, and test key existence, but I can&#39;t give you a firmer answer."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497273028, "post_id": 44499630, "comment_id": 75994001, "body": "E.g. at which point do you read &#39;sample1&#39; that you&#39;ve given us - does that connect with &quot;NETS&quot;? Because this looks like a lot simpler problem."}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497273042, "post_id": 44499630, "comment_id": 75994011, "body": "@Sobrique, first of all, column 2 , 3,4,5,6 should match between 2 files. and then print out both matching lines from two files(sorry about the op data example).  column 3,4,5,6 from one file can match with column 5,6,3,4. This should also be treated as a match."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497273103, "post_id": 44499630, "comment_id": 75994060, "body": "Lovely. I&#39;ll draft a sample snippet that does that then."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1497273129, "post_id": 44499630, "comment_id": 75994083, "body": "Are your columns named? That might help clarity."}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497273213, "post_id": 44499630, "comment_id": 75994154, "body": "You can see in my code, before comparison, the sample 1 and 2 are read and kept in hash $NETS{1}{$net} and $NETS{2}{$net}"}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497273255, "post_id": 44499630, "comment_id": 75994190, "body": "The columns are not named, but they follow exact order."}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497273462, "post_id": 44499630, "comment_id": 75994340, "body": "@Sinan&#220;n&#252;r I am not a pro. this is rather a quick and dirty solution to something. this needs to run fast. having said that, are you suggesting that I store $sub_str_1[3].$sub_str_1[4].$sub_str_1[5].\u200c\u200b$sub_str_1[6] to a variable and compare? wouldn&#39;t that also rebuilt for every iteration of the hash. becuase it needs to be rebuilt. Again, I am not a pro on either perl or data-structure"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1497273631, "post_id": 44499630, "comment_id": 75994480, "body": "It doesn&#39;t matter whether you are a pro or not. By looking at your code and your attemtps at explaining the problem, the only conclusion I am able to reach is that you do not fully understand the problem you are trying to solve. I am suggesting understanding the problem first, so that you do not end up writing conditions like that. Take a step back, and write everything again from scratch, if necessary. Even if someone here is able to double or triple the speed of your code here, this code is an unmaintainable mess which may be hiding much better optimization opportunities."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497274491, "post_id": 44500485, "comment_id": 75995150, "body": "I did not understand the second while loop. Care to explain! thanks!"}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497274689, "post_id": 44500485, "comment_id": 75995326, "body": "okay, understood. but, I am losing the entire lines. In this way, I will only have the columns 2,3,4,5,6"}, {"owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497274909, "post_id": 44500485, "comment_id": 75995476, "body": "I am wrong again. I can print the lines from $sample_1. Just another question: Is loop within loop is worse than having two separate loops, in terms of memory and speed?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "edited": false, "score": 0, "creation_date": 1497288355, "post_id": 44500485, "comment_id": 76004038, "body": "Nested loops multiply operation. Two for loops - 100 elements - gives 10,000 iterations. Add an outer loop of 100, you have 1,000,000 iterations. So mostly, unrolling the loops - if you can or making one as small as possible avoids this problem. Hash traversal is an efficient operation, as it doesn&#39;t loop. It&#39;s a binary tree search. So is much faster."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1497288658, "last_edit_date": 1497288658, "creation_date": 1497273504, "answer_id": 44500485, "question_id": 44499630, "link": "https://stackoverflow.com/questions/44499630/how-to-make-a-difference-between-two-data-files-more-efficient-run-time/44500485#44500485", "title": "how to make a difference between two data files more efficient (run time)", "body": "<p>OK, so my first thought is - you've a 3 deep loop, and that will always be inefficient. We can probably trade memory for a lot of speed there. </p>\n\n<p>Assuming the 'bigger' file is 'sample_1', otherwise swap them.</p>\n\n<p>In this example - <code>sample_2</code> will consume memory proportionate to the number of rows - so we ideally want that to be the smaller file. You may need to swap the match/test around, depending on whether file1 cols 5,6,3,4 matches file2 or vice versa. </p>\n\n<p>But hopefully this illustrates a useful concept for solving your problem, if not entirely solving it? </p>\n\n<p>Something like this will do the trick:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %is_match; \n\nopen ( my $sample_1, '&lt;', 'sample1.txt' ) or die $!;\nopen ( my $sample_2, '&lt;', 'sample2.txt' ) or die $!;\n\n#    first of all, column 2 , 3,4,5,6 should match between 2 files. \n# and then print out both matching lines from two files.     \n#    column 3,4,5,6 from one file can match with column 5,6,3,4. \n\nwhile ( &lt;$sample_2&gt; ) { \n   my @row = split; \n   #insert into hash\n   #this would be much clearer if the fields were named rather than numbered\n   #I think. \n   $is_match{$row[3]}{$row[4]}{$row[5]}{$row[6]}++; \n   $is_match{$row[5]}{$row[6]}{$row[3]}{$row[4]}++; \n}\n\nwhile ( &lt;$sample_1&gt; ) {\n   my @row = split;\n   #print the current line if it matches from the hash above.\n   print if $is_match{$row[3]}{$row[4]}{$row[5]}{$row[6]};\n}\n</code></pre>\n\n<p>Because this iterates each file once, it should be a lot faster. and because one of your files is small, then that's the one you should read first into memory. </p>\n\n<p>With your sample data as provided, this gives you the desired output. </p>\n\n<p>The first loop reads though the file, selects your interest fields and inserts them into a hash, based on your 4 keys. </p>\n\n<p>And then it does so again for the other set of valid matching keys. </p>\n\n<p>The second loop reads the other file, selects the keys and just checks if either combination exists in the hash. And prints the current line if it does.</p>\n"}], "owner": {"reputation": 137, "user_id": 8102349, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a69396b9faef27629c858af092faeada?s=128&d=identicon&r=PG&f=1", "display_name": "tt_pre", "link": "https://stackoverflow.com/users/8102349/tt-pre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 44500485, "answer_count": 1, "score": 0, "last_activity_date": 1497288658, "creation_date": 1497270901, "last_edit_date": 1497272320, "question_id": 44499630, "link": "https://stackoverflow.com/questions/44499630/how-to-make-a-difference-between-two-data-files-more-efficient-run-time", "title": "how to make a difference between two data files more efficient (run time)", "body": "<p>I have a code which compares values on some specific terms between two files. The main time-consuming part of the code as follows:</p>\n\n<pre><code>my @ENTIRE_FILE;\nmy %NETS;\nmy %COORDINATES;\nmy $INT=1;\nmy %IR_VALUES;\n################################# READING\nforeach my $IR_REPORT_FILE_1(@IR_REPORT_FILES){\n   {\n      open (FHIN, \"&lt;\", $IR_REPORT_FILE_1) or die(\"Could not open $! for reading\\n\");\n      # chomp(my @ENTIRE_FILE = &lt;FHIN&gt;);                            # READS THE ENTIRE FILE\n      local undef $/;\n      @ENTIRE_FILE = split(/\\n(.*NET.*)/,&lt;FHIN&gt;);\n      close (FHIN);\n   }\n   ############################### BUILDING HASH\n   for my $i(1..$#ENTIRE_FILE/2){\n     if($ENTIRE_FILE[$i*2-1]=~ /^----.*\\s+\"(\\w+)\"\\s+/){\n       my $net =$1;\n       my @ir_values_of_net = split(/\\n/,$ENTIRE_FILE[$i*2]);\n       for my $val (@ir_values_of_net){\n       push ( @{ $NETS{$INT}{$net} }, $val ) if ($val =~ /^r.*\\s+m1|v1_viadg|v1_viabar|m2|ay_viabar|ay_viadg|c1\\s+/); # NETS{1}{VDD}=array of values, NETS{1}{VSS}, NETS{1}{AVDD}\n       }\n     }\n   }\n   $INT++;                                          # For the next file:  NETS{2}{VDD}, NETS{2}{VSS}, NETS{2}{AVDD}\n}\n############################### COMPARISON\nmy $loop_count=0;\nforeach my $net(keys %{ $NETS{1} }){\n   print \"net is $net\\n\";\n   foreach my $file_1_net( @{ $NETS{1}{$net} }){\n     my @sub_str_1 = split (' ', $file_1_net);\n     foreach my $file_2_net ( @{ $NETS{2}{$net} } ){\n       $loop_count++;\n#        my @sub_str_1 = split (' ', $file_1_net);\n       my @sub_str_2 = split (' ', $file_2_net);\n       if(($sub_str_1[2] eq $sub_str_2[2])&amp;&amp;(($sub_str_1[3].$sub_str_1[4].$sub_str_1[5].$sub_str_1[6] eq $sub_str_2[3].$sub_str_2[4].$sub_str_2[5].$sub_str_2[6]) || ($sub_str_1[3].$sub_str_1[4].$sub_str_1[5].$sub_str_1[6] eq $sub_str_2[5].$sub_str_2[6].$sub_str_2[3].$sub_str_2[4]))){\n         push (@{ $COORDINATES{$net}{X} },$sub_str_1[3],$sub_str_1[5]) if ($sub_str_1[3] &amp;&amp; $sub_str_1[5]);\n         push (@{ $COORDINATES{$net}{Y} },$sub_str_1[4],$sub_str_1[6]) if ($sub_str_1[4] &amp;&amp; $sub_str_1[6]);\n         my $difference=$sub_str_1[1]-$sub_str_2[1];\n         if($sub_str_1[3]=~/^-/){\n           push (@{ $MATCHED_RESISTORS{$net}{$sub_str_1[2].$sub_str_1[3].$sub_str_1[4].$sub_str_1[5].$sub_str_1[6]} }, $file_1_net,$file_2_net,$difference);\n         }else{\n           push (@{ $MATCHED_RESISTORS{$net}{$sub_str_1[2].\"-\".$sub_str_1[3].$sub_str_1[4].$sub_str_1[5].$sub_str_1[6]} }, $file_1_net,$file_2_net,$difference);\n         }\n         push (@{ $IR_VALUES{$net} }, $sub_str_2[1]);\n         last;\n       }\n     }\n   } \n   print max @{ $IR_VALUES{$net} };\n   print \"\\nloop count is $loop_count\\n\";\n   $loop_count = 0;\n#    &lt;&gt;;  \n}\n</code></pre>\n\n<p>I ran a profiler on the code. Below is the output on the above part of code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YA7Oy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YA7Oy.png\" alt=\"snapshot from html report of the profiler\"></a></p>\n\n<p><strong>Some statistics:</strong></p>\n\n<ol>\n<li>For my testcase, the outer-most foreach has 3 elements. Below is the\nnumber of matched elements for each iteration:  </li>\n</ol>\n\n<blockquote>\n<pre><code>element_1: 14\nelement_1: 316\nelement_1: 8\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li>The file sizes are 8.3 MB and 518.3KB. </li>\n<li>Run time for the entire code is: 220s</li>\n<li>My main concern is when I have a file size of 8.3MB each, and there are more numbers of matching between two files, the run-time is humongous e.g. 3 hours. </li>\n</ol>\n\n<p>My question is really simple: How do I make my code run faster?</p>\n\n<p><strong>Sample Data File_1:</strong></p>\n\n<pre><code>r6_2389         1.29029e-05     ay_viabar       23.076   57.755   22.628   57.755   4.5      0        0        3.68449e-06      -5.99170336965613\nr6_2397         1.29029e-05     ay_viabar       22.948   57.755   22.628   57.755   4.5      0        0        3.68449e-06      -5.99170336965613\nr6_2400         1.29029e-05     ay_viabar       22.82    57.755   22.628   57.755   4.5      0        0        3.68449e-06      -5.99170336965613\nr6_2403         1.29029e-05     ay_viabar       22.692   57.755   22.628   57.755   4.5      0        0        3.68449e-06      -5.99170336965613\nr6_971          1.3279e-05      c1              9.492    45.742   -0.011   46.779   0.001    9.5589   10       0.0508653\n</code></pre>\n\n<p><strong>Sample Data File_2:</strong></p>\n\n<pre><code>r6_9261         0.00206167      ay_viabar       23.076   57.755   22.628   57.755   4.5      0        0        0.0207546    \nr6_9258         0.00206167      ay_viabar       22.948   57.755   22.628   57.755   4.5      0        0        0.0161057    \nr6_9399         0.00206167      ay_viabar       22.82    57.755   22.628   57.755   4.5      0        0        0.0127128    \nr6_9486         0.00206167      ay_viabar       22.692   57.755   22.628   57.755   4.5      0        0        0.0103186    \nr6_1061         1.3279e-05      cb_pc_viadg     -6.696   44.157   -0.159   44.847   0.001    0        0        0   \n</code></pre>\n\n<p><strong>Sample Output:</strong>        </p>\n\n<pre><code>   r6_9261         0.00206167      ay_viabar       23.076   57.755   22.628   57.755   4.5      0        0        0.0207546    \n    r6_9258         0.00206167      ay_viabar       22.948   57.755   22.628   57.755   4.5      0        0        0.0161057    \n    r6_9399         0.00206167      ay_viabar       22.82    57.755   22.628   57.755   4.5      0        0        0.0127128    \n    r6_9486         0.00206167      ay_viabar       22.692   57.755   22.628   57.755   4.5      0        0        0.0103186 \n</code></pre>\n\n<p>The sample output is basically pushed into another hash which is further processed. But building up this hash consumes about 90% of the total run-time as per the profiler.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1497266579, "post_id": 44497338, "comment_id": 75989391, "body": "You haven&#39;t shown the line that produces the timestamp."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1497268534, "post_id": 44497338, "comment_id": 75990687, "body": "Is this a command line program or some kind of web application? How is it deployed? How is this line generated? Where is it displayed? If you want people to help you for free, then it&#39;s useful to give them as much information as possible."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1497269150, "post_id": 44497338, "comment_id": 75991118, "body": "Looks like Log4Perl or similar."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497281278, "post_id": 44497338, "comment_id": 76000042, "body": "<code>warn</code> doesn&#39;t normally add timestamps, but you might have a <code>$SIG{__WARN__}</code> handler that adds the timestamps."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1497266714, "creation_date": 1497266714, "answer_id": 44498288, "question_id": 44497338, "link": "https://stackoverflow.com/questions/44497338/how-to-disable-timestamps-from-perl-warn-command/44498288#44498288", "title": "how to disable timestamps from perl warn command", "body": "<p>That message isn't generated by Perl's <code>warn</code></p>\n\n<p>If I generate a generic warning message, it looks like this</p>\n\n<pre><code>$ perl -e 'warn \"Warning message\"'\nWarning message at -e line 1.\n</code></pre>\n\n<p>So it is your program that is building strings and passing them to <code>warn</code>. You have to look at that to remove the time stamp</p>\n"}], "owner": {"reputation": 1, "user_id": 8148359, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155184470032626/picture?type=large", "display_name": "David Tiberio", "link": "https://stackoverflow.com/users/8148359/david-tiberio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1497270954, "answer_count": 1, "score": -2, "last_activity_date": 1497266714, "creation_date": 1497263719, "last_edit_date": 1497266371, "question_id": 44497338, "link": "https://stackoverflow.com/questions/44497338/how-to-disable-timestamps-from-perl-warn-command", "closed_reason": "Not suitable for this site", "title": "how to disable timestamps from perl warn command", "body": "<p>how do I get rid of the timestamp and script name from warn():</p>\n\n<pre><code>[Mon Jun 12 10:31:38 2017] db_insert.pl:  \"subjects\": [\"Government - Comparative\", \"Politics / Current Events\"], \"revision\": 4}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497261754, "post_id": 44492173, "comment_id": 75986327, "body": "Okay, and what is the &quot;error&quot; that you&#39;re getting? Which &quot;specific jar file&quot; are you looking for? What&#39;s wrong with the code you&#39;ve written?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497285161, "post_id": 44492173, "comment_id": 76002328, "body": "Re &quot;<i>$application, $location, $version are command line arguments</i>&quot;, Then wouldn&#39;t <code>while($application eq &#39;abc&#39;) { ... }</code> form an infinite loop?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1497258985, "post_id": 44492801, "comment_id": 75984528, "body": "thanks it worked can you please explain me or point me to a link where i can understand about this grep { (/.jar$/) &amp;&amp; -f &quot;$dir/$_&quot; } morly"}, {"owner": {"reputation": 67, "user_id": 6448637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ysjkJlysa0A/AAAAAAAAAAI/AAAAAAAAAuU/gaeQ1gdXunI/photo.jpg?sz=128", "display_name": "Naveen P", "link": "https://stackoverflow.com/users/6448637/naveen-p"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1497259255, "post_id": 44492801, "comment_id": 75984712, "body": "From the list of files in a given directory, we are trying to extract valid .jar files. The first condition is a regex <code>&#47;.jar$&#47;</code> which restricts only the file names ending with extension .jar, the second condition <code>-f &quot;$dir&#47;$_&quot;</code> checks if it is a valid file.  For more information:  <a href=\"https://perlmaven.com/filtering-values-with-perl-grep\" rel=\"nofollow noreferrer\">perlmaven.com/filtering-values-with-perl-grep</a> ,  <a href=\"https://stackoverflow.com/questions/2483875/how-does-perls-grep-function-work-with-a-regex\" title=\"how does perls grep function work with a regex\">stackoverflow.com/questions/2483875/&hellip;</a>"}], "tags": [], "owner": {"reputation": 67, "user_id": 6448637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ysjkJlysa0A/AAAAAAAAAAI/AAAAAAAAAuU/gaeQ1gdXunI/photo.jpg?sz=128", "display_name": "Naveen P", "link": "https://stackoverflow.com/users/6448637/naveen-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1497259573, "last_edit_date": 1497259573, "creation_date": 1497249377, "answer_id": 44492801, "question_id": 44492173, "link": "https://stackoverflow.com/questions/44492173/error-while-trying-to-search-for-specific-file-with-in-while-loop/44492801#44492801", "title": "Error while trying to search for specific file with in while loop", "body": "<p>The following code should work for you. Currently you are not iterating the files inside your specified directory.</p>\n\n<pre><code>sub do_verify {\n\n    while($application eq 'abc') {\n\n        my $dir = \"/viewstore/ccabc/dst_${application}_${version}/abcportal/${location}/target\";\n\n        opendir(DIR, $dir) or die $!;\n\n        my @jarfiles = grep { (/\\.jar$/) &amp;&amp; -f \"$dir/$_\" } readdir(DIR);\n\n        foreach (@jarfiles) {\n\n            my $jarfile = $_;\n\n            print \"$jarfile\\n\";\n\n            do_upload();\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 44492801, "answer_count": 1, "score": -1, "last_activity_date": 1497259573, "creation_date": 1497246449, "last_edit_date": 1497249272, "question_id": 44492173, "link": "https://stackoverflow.com/questions/44492173/error-while-trying-to-search-for-specific-file-with-in-while-loop", "title": "Error while trying to search for specific file with in while loop", "body": "<p>How do I search for a specific jar file within a while loop?  In the code below, <code>$application</code>, <code>$location</code>, <code>$version</code> are command line arguments</p>\n\n<pre><code>sub do_verify\n{\n    while($application eq 'abc')\n    {\n        my $dir = \"/viewstore/ccabc/dst_${application}_${version}/abcportal/${location}/target\";\n        opendir(DIR, $dir) or die $!;\n        my $jarfile;\n        next unless ($jarfile =~ /\\.jar$/);\n        print \"$jarfile\\n\";\n        do_upload();\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "unix", "grep", "tail"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1497246208, "post_id": 44491833, "comment_id": 75977904, "body": "Please add sample input and your desired output <b>for that</b> sample input to your question."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1497247034, "post_id": 44491833, "comment_id": 75978183, "body": "It is already specified in the question.."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1497292262, "post_id": 44493583, "comment_id": 76006076, "body": "@Zaid  Thank you, yes, very related!  A little screw here is about matches on lines 0,1 and -2,-1. As for making one pass and not pulling the whole file -- the other nice answer there won&#39;t work here because we&#39;d need multiple buffers (or index counters), which is what I meant by &quot;<i>far more complicated</i>&quot;"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1497293599, "post_id": 44493583, "comment_id": 76006782, "body": "There is one gripe I have with both my answer and yours: if the match occurs on consecutive lines there will be duplicate lines printed. That may be OK here, but the purist in me says that the same context should be extended in such situations"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1497294838, "post_id": 44493583, "comment_id": 76007448, "body": "@Zaid  Well, I agree. I think that <code>grep</code>&#39;s solution to that is rather reasonable; at least no repetitions.  This question, though, is exactly about that -- they <i>want</i> the repeated output, they want the whole context every time. I can understand that, too, but I would not design a general purpose tool that way either, agreed."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1497305141, "last_edit_date": 1497305141, "creation_date": 1497252311, "answer_id": 44493583, "question_id": 44491833, "link": "https://stackoverflow.com/questions/44491833/grep-3-latest-occurences-and-some-lines-around-the-occurence/44493583#44493583", "title": "grep 3 latest occurences and some lines around the occurence", "body": "<p>The output you get is because <code>grep</code> stops printing context (<code>-C</code>) at the next match. I don't see how to make it behave otherwise.</p>\n\n<p>The script below (written on the command-line) reads the whole file and forms an array of lines. Then it goes through it and prints surrounding two lines for each match, or up to start/end of array.</p>\n\n<pre><code>perl -MList::Util=min,max -0777 -wnE'\n    @m = split /\\n/; \n    for (0..$#m) { \n        if ($m[$_] =~ /exception/) { \n            $bi = max(0,$_-2); \n            $ei = min($_+2, $#m);\n            say for @m[$bi..$ei]; \n            say \"---\" \n         } \n     }\n' input.txt\n</code></pre>\n\n<p>The <code>---</code> are printed for easier reviewing of output. This prints the desired output.</p>\n\n<p>The <code>-0777</code> option makes it <em>slurp</em> the whole file into the <code>$_</code> variable, which is <code>split</code> by newline. The iteration goes over the array index (<code>$#m</code> is the index of the last element of <code>@m</code>). The <code>$bi</code> and <code>$ei</code> are begin/end index to print, which cannot be +/- 2 near the beginning and end of the array.</p>\n\n<p>The output can be piped to <code>tail</code> but this can't be automated: if a match is within the last two lines there'll be (one or two) fewer lines of output so input need be known for precise cut-off. Or find indices of matches in the script, <code>@idx = grep { $m[$_] =~ /exception/} for 0..$#m;</code>, and use that in the condition to only print the last two.</p>\n\n<p>If you are going to use something like this I'd make it a script. Then read all lines into an array directly, provide command-line options (like <code>-C</code> in <code>grep</code>), etc.</p>\n\n<p>Maintaining line-by-line processing would make the job far more complicated. We need to keep track of a match so that we can print the following lines once we read them. But here we need <em>multiple</em> such records -- for the next match(es) as well, if they come within the following lines to be printed.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1497311917, "last_edit_date": 1497311917, "creation_date": 1497311513, "answer_id": 44510338, "question_id": 44491833, "link": "https://stackoverflow.com/questions/44491833/grep-3-latest-occurences-and-some-lines-around-the-occurence/44510338#44510338", "title": "grep 3 latest occurences and some lines around the occurence", "body": "<p>Here is a start:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { bufSize = 5 }\n{ updBuf(NR) }\n/exception/ { rangeEndNrs[NR+int(bufSize/2)] }\nNR in rangeEndNrs { prtBuf(NR) }\nEND { prtBuf(NR+1) }\n\nfunction updBuf(nr) {\n    buf[((nr-1)%bufSize)+1] = $0\n}\n\nfunction prtBuf(nr,     i) {\n    for (i=1; i&lt;=bufSize; i++) {\n        print buf[((nr+i-1)%bufSize)+1]\n    }\n    print \"---\"\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ awk -f tst.awk file\nabdgjsd\nabdgjsd\nexception\nexception\nexception\n---\nabdgjsd\nexception\nexception\nexception\nabcd\n---\nexception\nexception\nexception\nabcd\nabdgjsd\n---\n</code></pre>\n\n<p>It works by just keeping a 5-line buffer of input lines and everywhere \"exception\" is found setting an indicator that 2 lines later the buffer should be printed, thus printing the \"exception\" line plus the 2 lines before and after it. You just need to massage it to handle the cases of \"exception\" occurring less than 2 lines from the start or end of the input file however you want that handled (see how the last output block above is, presumably undesirably, wrapping around the buffer since it's run off the end of the input file).</p>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 44493583, "answer_count": 2, "score": 2, "last_activity_date": 1497311917, "creation_date": 1497244566, "last_edit_date": 1497245131, "question_id": 44491833, "link": "https://stackoverflow.com/questions/44491833/grep-3-latest-occurences-and-some-lines-around-the-occurence", "title": "grep 3 latest occurences and some lines around the occurence", "body": "<p>I have a file like:</p>\n\n<pre><code>exception: anythinggggg...\nexception: anythinggggg...\nabchdhjsdhsd\nygsuhesnkc\nexception: anythingggg...\nexception: anything...\n..\n..\n</code></pre>\n\n<p>I want to grep the latest 2 occurrences of exception keyword along with 3 lines before and 3 lines after it.</p>\n\n<p>I am using something like</p>\n\n<pre><code>grep -C 3 exception | tail -12\n</code></pre>\n\n<p>I am using tail -12 here as I want 6 lines per occurrence and latest 2 occurrences. this works fine when occurrences of exception are far off from each other but gives me useless lines if say both occurrences are consecutive.</p>\n\n<pre><code>abdgjsd\nabdgjsd\nabdgjsd\nabdgjsd\nabdgjsd\nabdgjsd\nabdgjsd\nabdgjsd\nexception\nexception\nexception\nabcd\n</code></pre>\n\n<p>In the above case, it gives me </p>\n\n<pre><code>abdgjsd\nabdgjsd\nabdgjsd\nexception\nexception\nexception\nabcd\n</code></pre>\n\n<p>however, what I want is </p>\n\n<pre><code>abdgjsd\nexception\nexception -----------------&gt; OUTPUT FOR FIRST OCCURRENCE\nexception\nabcd\n\nabdgjsd\nabdgjsd\nexception-----------------&gt; OUTPUT FOR SECOND OCCURRENCE\nexception\nexception\nabcd\n</code></pre>\n\n<p>Is there another way to this? Probably something in whch I can also specify the number of occurrences and not just grep lines and tail some output from it.</p>\n"}, {"tags": ["perl", "winapi"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1497218104, "post_id": 44488898, "comment_id": 75972310, "body": "Please post code of what you tried, what you expected, and what you got instead."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1497218202, "post_id": 44488898, "comment_id": 75972346, "body": "@andlabs, I understand the question, and I know there&#39;s really not much more the OP could provide. I&#39;m in the middle of writing an answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497263679, "post_id": 44488898, "comment_id": 75987575, "body": "<i>&quot;I have tried both <code>Unicode::String</code> and <code>Encode::decode</code>&quot;</i> Please include the code to show exactly what you tried and describe the problems you had. It will help us to write more accurate answers, and your question&#39;s primary value is to the many other people who may be looking for a solution to a similar  problem. &quot;Without success&quot; isn&#39;t much of a problem statement and it will be impossible to tell whether your situation is a match with just that."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497248539, "post_id": 44489228, "comment_id": 75978733, "body": "Fixed so it&#39;s correct for both 32-bit and 64-bit builds of Perl."}, {"owner": {"reputation": 83, "user_id": 3993632, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005618439585/picture?type=large", "display_name": "Freon Sandoz", "link": "https://stackoverflow.com/users/3993632/freon-sandoz"}, "edited": false, "score": 0, "creation_date": 1497461709, "post_id": 44489228, "comment_id": 76093020, "body": "Thank you so much for such a clear and useful implementation. It shows nicely the concepts needed to effectively use Win32::API. I wrote a replacement for decode_LPCWSTR() that is probably efficient enough for most purposes:  <code>code</code>  sub decode_LPCWSTR {     state $lstrlenW = Win32::API-&gt;new(&#39;kernel32&#39;, &#39;lstrlenW&#39;, PTR_WIN32API_TYPE, &#39;N&#39;)       or die($^E);     my ($ptr) = @_;    return undef if !$ptr;     my $nchars = $lstrlenW-&gt;Call($ptr);    return &#39;&#39; if $nchars == 0;     my $sW = ReadMemory($ptr, $nchars * 2);    return decode(&#39;UTF-16le&#39;, $sW);    }"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 83, "user_id": 3993632, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005618439585/picture?type=large", "display_name": "Freon Sandoz", "link": "https://stackoverflow.com/users/3993632/freon-sandoz"}, "edited": false, "score": 0, "creation_date": 1497461953, "post_id": 44489228, "comment_id": 76093166, "body": "Indeed. I shall replace the one in my answer with that!"}, {"owner": {"reputation": 83, "user_id": 3993632, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005618439585/picture?type=large", "display_name": "Freon Sandoz", "link": "https://stackoverflow.com/users/3993632/freon-sandoz"}, "edited": false, "score": 1, "creation_date": 1497462168, "post_id": 44489228, "comment_id": 76093307, "body": "(Can someone please format my response and then delete this? I couldn&#39;t get &quot;<code>code</code>&quot; to work. Thanks.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 83, "user_id": 3993632, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005618439585/picture?type=large", "display_name": "Freon Sandoz", "link": "https://stackoverflow.com/users/3993632/freon-sandoz"}, "edited": false, "score": 0, "creation_date": 1497462253, "post_id": 44489228, "comment_id": 76093362, "body": "1) We can&#39;t edit comments, 2) Can&#39;t format code in comments. 3) It&#39;s been incorporated into my answer, so its readability in the comments is moot."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1603091375, "last_edit_date": 1603091375, "creation_date": 1497218945, "answer_id": 44489228, "question_id": 44488898, "link": "https://stackoverflow.com/questions/44488898/handling-wide-char-values-returned-by-win32api/44489228#44489228", "title": "Handling wide char values returned by Win32::API", "body": "<p>When you specify the return value is a string, Win32::API assumes it's a terminated by a byte with value 0, but bytes with that value are common in UTF-16le text.</p>\n<p>As Win32::API suggests, you should use the <code>N</code> type (or <code>Q</code> on 64-bit builds) to get the pointer as a number, then read the pointed memory yourself. Win32::API's provides <code>ReadMemory</code> to read memory, but it requires knowing how much memory to read. That's not useful for NUL-terminated strings and wide NUL-terminated strings.</p>\n<p>For wide NUL-terminated strings, Win32::API provides <code>SafeReadWideCString</code>. But <code>SafeReadWideCString</code> can return a string unrelated to the input on error, so I use my own <code>decode_LPCWSTR</code> instead.</p>\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say state );\n\nuse open ':std', ':encoding('.do { require Win32; &quot;cp&quot;.Win32::GetConsoleOutputCP() }.')';\n\nuse Config     qw( %Config );\nuse Encode     qw( decode encode );\nuse Win32::API qw( ReadMemory );\n\nuse constant PTR_SIZE =&gt; $Config{ptrsize};\n\nuse constant PTR_PACK_FORMAT =&gt;\n     PTR_SIZE == 8 ? 'Q'\n   : PTR_SIZE == 4 ? 'L'\n   : die(&quot;Unrecognized ptrsize\\n&quot;);\n\nuse constant PTR_WIN32API_TYPE =&gt;\n     PTR_SIZE == 8 ? 'Q'\n   : PTR_SIZE == 4 ? 'N'\n   : die(&quot;Unrecognized ptrsize\\n&quot;);\n\n    \nsub lstrlenW {\n   my ($ptr) = @_;\n\n   state $lstrlenW = Win32::API-&gt;new('kernel32', 'lstrlenW', PTR_WIN32API_TYPE, 'i')\n      or die($^E);\n\n   return $lstrlenW-&gt;Call($ptr);\n}\n\n\nsub decode_LPCWSTR {\n   my ($ptr) = @_;\n   return undef if !$ptr;\n\n   my $num_chars = lstrlenW($ptr)\n      or return '';\n\n   return decode('UTF-16le', ReadMemory($ptr, $num_chars * 2));\n}\n\n\n# Returns true on success. Returns false and sets $^E on error.\nsub LocalFree {\n   my ($ptr) = @_;\n\n   state $LocalFree = Win32::API-&gt;new('kernel32', 'LocalFree', PTR_WIN32API_TYPE, PTR_WIN32API_TYPE)\n      or die($^E);\n\n   return $LocalFree-&gt;Call($ptr) == 0;\n}\n\n\nsub GetCommandLine {\n   state $GetCommandLine = Win32::API-&gt;new('kernel32', 'GetCommandLineW', '', PTR_WIN32API_TYPE)\n      or die($^E);\n\n   return decode_LPCWSTR($GetCommandLine-&gt;Call());\n}\n\n\n# Returns a reference to an array on success. Returns undef and sets $^E on error.\nsub CommandLineToArgv {\n   my ($cmd_line) = @_;\n\n   state $CommandLineToArgv = Win32::API-&gt;new('shell32', 'CommandLineToArgvW', 'PP', PTR_WIN32API_TYPE)\n      or die($^E);\n\n   my $cmd_line_encoded = encode('UTF-16le', $cmd_line.&quot;\\0&quot;);\n   my $num_args_buf = pack('i', 0);  # Allocate space for an &quot;int&quot;.\n\n   my $arg_ptrs_ptr = $CommandLineToArgv-&gt;Call($cmd_line_encoded, $num_args_buf)\n      or return undef;\n\n   my $num_args = unpack('i', $num_args_buf);\n   my @args =\n      map { decode_LPCWSTR($_) }\n         unpack PTR_PACK_FORMAT.'*',\n            ReadMemory($arg_ptrs_ptr, PTR_SIZE * $num_args);\n\n   LocalFree($arg_ptrs_ptr);\n   return \\@args;\n}\n\n\n{\n   my $cmd_line = GetCommandLine();\n\n   say $cmd_line;\n\n   my $args = CommandLineToArgv($cmd_line)\n      or die(&quot;CommandLineToArgv: $^E\\n&quot;);\n\n   for my $arg (@$args) {\n      say &quot;&lt;$arg&gt;&quot;;\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 3993632, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005618439585/picture?type=large", "display_name": "Freon Sandoz", "link": "https://stackoverflow.com/users/3993632/freon-sandoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 2, "accepted_answer_id": 44489228, "answer_count": 1, "score": 5, "last_activity_date": 1603091375, "creation_date": 1497216109, "last_edit_date": 1497251817, "question_id": 44488898, "link": "https://stackoverflow.com/questions/44488898/handling-wide-char-values-returned-by-win32api", "title": "Handling wide char values returned by Win32::API", "body": "<p>The answer provided in <a href=\"https://stackoverflow.com/questions/32425948/wide-char-and-win32api\">wide char and win32::api</a> works for <em>passing</em> utf-16 to the Win API. But how do I convert utf16 strings <em>returned</em> by the Win API? (I am trying to use <code>GetCommandLineW</code>).</p>\n\n<p>I have tried both <code>Unicode::String</code> and <code>Encode::decode</code> without success. I'm guessing that perhaps the data needs to be packed or unpacked first, but how? </p>\n\n<p>After that, the next problem is how to deal with a pointer-to-pointer-to-utf16 like the one returned by <code>CommandLineToArgvW</code>.</p>\n\n<p>Thanks for any help. </p>\n"}, {"tags": ["bash", "perl", "shell", "loops", "sh"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1497325303, "post_id": 44488871, "comment_id": 76016653, "body": "Get your script checked at <a href=\"http://shellcheck.net\" rel=\"nofollow noreferrer\">shellcheck.net</a>"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "edited": false, "score": 0, "creation_date": 1497275901, "post_id": 44489324, "comment_id": 75996211, "body": "Thanks for the suggestion. I was trying to get the script to run in a loop but increase the rudate{date}.sh to increase by one everytime it runs over."}], "tags": [], "owner": {"reputation": 388, "user_id": 4990430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4V8ro.jpg?s=128&g=1", "display_name": "Seifeddine Besbes", "link": "https://stackoverflow.com/users/4990430/seifeddine-besbes"}, "is_accepted": false, "score": 0, "last_activity_date": 1497219994, "creation_date": 1497219994, "answer_id": 44489324, "question_id": 44488871, "link": "https://stackoverflow.com/questions/44488871/shell-script-loop/44489324#44489324", "title": "Shell Script loop", "body": "<p>you could use regular expression inside loop for example :</p>\n\n<pre><code>select x in (\\.\\/rundate)[0-9]+\\.sh ; do $x ; break ; done\n</code></pre>\n\n<p>hope it helps.</p>\n"}], "owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497323419, "creation_date": 1497215890, "last_edit_date": 1497323419, "question_id": 44488871, "link": "https://stackoverflow.com/questions/44488871/shell-script-loop", "title": "Shell Script loop", "body": "<p>I'm trying to get the below code into a loop where it runs over and over again while increasing the ./rundate????????.sh by 1 day</p>\n\n<p>For example:\nFirst it runs \"rundate20170101.sh\"\nsecond it runs \"rundate20170102.sh\"\n..\n..\n..\n..\nfifteenth time runs \"rundate20170115.sh\"</p>\n\n<p>Trying to get the loop to end after 15 days then it goes to the next question \"do you want to run the patch\"</p>\n\n<p>any help would be greatly appreciated. </p>\n\n<p>Thanks!</p>\n\n<pre><code>yn() { echo -n \"$1: \"\n       while read  -sN1 x ; do\n           x=${x,}\n           case $x in [yn]) break ;; *) : ;; esac\n       done\n       echo $x\n       [ $x = y ] ; }\n\nyn \"Do you want to install the new update? [Y/n]\" || exit\n./install.sh\necho \"Pick a rundate file: \"\nselect x in ./rundate????????.sh ; do $x ; break ; done\nyn \"Would you like to run the patch? [Y/n]\" || exit\n./patch.sh\n</code></pre>\n\n<p>Just to clarify I'm trying to get this script to run from the start to finish. then loop back to the start but change the .rundate2070101.sh to rundate20170102.sh but the other questions still asked after the first loop.</p>\n\n<p>If this can be better written in perl would love an example!</p>\n"}, {"tags": ["fasta", "fastq", "compression", "perl"], "comments": [{"owner": {"reputation": 1115, "user_id": 528691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb484e2ee9555ec814a02533e738b630?s=128&d=identicon&r=PG", "display_name": "winni2k", "link": "https://stackoverflow.com/users/528691/winni2k"}, "edited": false, "score": 1, "creation_date": 1497211354, "post_id": 44781446, "comment_id": 76543445, "body": "Why are you calling chomp twice? Isn&#39;t the second chomp redundant?"}, {"owner": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "reply_to_user": {"reputation": 1115, "user_id": 528691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb484e2ee9555ec814a02533e738b630?s=128&d=identicon&r=PG", "display_name": "winni2k", "link": "https://stackoverflow.com/users/528691/winni2k"}, "edited": false, "score": 0, "creation_date": 1497215860, "post_id": 44781446, "comment_id": 76543446, "body": "It&#39;s for removing CR/LF on windows-formatted files when they are used on a Linux system (which I do from time to time, because most of the people I collaborate with have Windows computers). See <a href=\"http://www.perlmonks.org/?node_id=830687\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1115, "user_id": 528691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb484e2ee9555ec814a02533e738b630?s=128&d=identicon&r=PG", "display_name": "winni2k", "link": "https://stackoverflow.com/users/528691/winni2k"}, "edited": false, "score": 0, "creation_date": 1497221712, "post_id": 44781446, "comment_id": 76543447, "body": "Lol. I should really get out more..."}], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "is_accepted": false, "score": 0, "last_activity_date": 1497136467, "creation_date": 1497136467, "answer_id": 44781447, "question_id": 44781446, "link": "https://stackoverflow.com/questions/44781446/how-can-i-do-a-transparent-gzip-uncompress-from-both-stdin-and-files-in-perl/44781447#44781447", "title": "How can I do a transparent gzip uncompress from both stdin and files in perl?", "body": "<p>I think what I'm mostly struggling with is teasing apart the different bits of the diamond operator. I found some help in the <code>Compress::Zlib</code> <a href=\"https://perldoc.perl.org/Compress/Zlib.html\" rel=\"nofollow noreferrer\">documentation</a> that seemed close to what I wanted to do, except it tries to uncompress <em>everything</em> (ending up with rubbish output for uncompressed files):</p>\n\n<pre><code>use strict ;\nuse warnings ;\nuse Compress::Zlib ;\n\n# use stdin if no files supplied\n@ARGV = '-' unless @ARGV ;\n\nforeach my $file (@ARGV) {\n    my $buffer ;\n\n    my $gz = gzopen($file, \"rb\") \n         or die \"Cannot open $file: $gzerrno\\n\" ;\n\n    print $buffer while $gz-&gt;gzread($buffer) &gt; 0 ;\n\n    die \"Error reading from $file: $gzerrno\" . ($gzerrno+0) . \"\\n\" \n        if $gzerrno != Z_STREAM_END ;\n\n    $gz-&gt;gzclose() ;\n}\n</code></pre>\n\n<p>Here's my modification to change to <code>IO::Uncompress::Gunzip</code> and get the transparent uncompression working:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\n\n# use stdin if no files supplied\n@ARGV = '-' unless @ARGV\n\nforeach my $file (@ARGV) {\n    my $z = new IO::Uncompress::Gunzip($file, \"transparent\", 1)\n        or die \"gunzip failed: $GunzipError\\n\";\n    while(&lt;$z&gt;){\n        print;\n    }\n    close($z);\n}\n</code></pre>\n\n<p>This seems to work for just reading and writing files (i.e. like zcat), but I have yet to test it out in my scripts.</p>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "edited": false, "score": 0, "creation_date": 1497175213, "post_id": 44781448, "comment_id": 76543448, "body": "Does this work on Windows as well? I would have expected that Windows didn&#39;t have such luxuries as gzip and bzip2."}, {"owner": {"reputation": 4058, "user_id": 172818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36a97b25d182f3710cf1cc5b1cdb91f?s=128&d=identicon&r=PG", "display_name": "user172818", "link": "https://stackoverflow.com/users/172818/user172818"}, "reply_to_user": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "edited": false, "score": 0, "creation_date": 1497217431, "post_id": 44781448, "comment_id": 76543450, "body": "Thanks. Point taken."}], "tags": [], "owner": {"reputation": 4058, "user_id": 172818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36a97b25d182f3710cf1cc5b1cdb91f?s=128&d=identicon&r=PG", "display_name": "user172818", "link": "https://stackoverflow.com/users/172818/user172818"}, "is_accepted": false, "score": 5, "last_activity_date": 1497217421, "creation_date": 1497148820, "answer_id": 44781448, "question_id": 44781446, "link": "https://stackoverflow.com/questions/44781446/how-can-i-do-a-transparent-gzip-uncompress-from-both-stdin-and-files-in-perl/44781448#44781448", "title": "How can I do a transparent gzip uncompress from both stdin and files in perl?", "body": "<p>I often use:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>die(\"Usage: prog.pl [file [...]]\\n\") if @ARGV == 0 &amp;&amp; -t STDIN;\npush(@ARGV, \"-\") unless @ARGV;\nfor my $fn (@ARGV) {\n    open(FH, $fn =~ /\\.gz$/? \"gzip -dc $fn |\" : $fn =~ /\\.bz2$/? \"bzip2 -dc $fn |\" : $fn) || die;\n    print while (&lt;FH&gt;);\n    close(FH);\n}\n</code></pre>\n\n<p>This strategy only works when you have <code>gzip</code> etc and name files with proper file extensions, but once you meet these requirements, it works with a variety of file types at the same time. As to <code>-t STDIN</code>, see <a href=\"https://stackoverflow.com/questions/2976578/in-perl-how-do-i-determine-if-theres-a-standard-input-present\">explanation here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "edited": false, "score": 0, "creation_date": 1497216293, "post_id": 44781449, "comment_id": 76543451, "body": "Unfortunately I can&#39;t assume that a file can be reopened. The &quot;files&quot; provided might be data from a stream, so any bytes read to detect magic numbers in a file will need to be stored in a sampling buffer."}, {"owner": {"reputation": 1115, "user_id": 528691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb484e2ee9555ec814a02533e738b630?s=128&d=identicon&r=PG", "display_name": "winni2k", "link": "https://stackoverflow.com/users/528691/winni2k"}, "reply_to_user": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "edited": false, "score": 0, "creation_date": 1497222036, "post_id": 44781449, "comment_id": 76543452, "body": "Right. If you can get a hold of the initial buffer, then you should be able to peek at the first two bytes and feed them to <code>is_line_gzipped</code>.  However, then you still have the problem of unzipping the stream with something like open2 if I am not mistaken?"}], "tags": [], "owner": {"reputation": 1115, "user_id": 528691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb484e2ee9555ec814a02533e738b630?s=128&d=identicon&r=PG", "display_name": "winni2k", "link": "https://stackoverflow.com/users/528691/winni2k"}, "is_accepted": false, "score": 2, "last_activity_date": 1497213344, "creation_date": 1497210646, "answer_id": 44781449, "question_id": 44781446, "link": "https://stackoverflow.com/questions/44781446/how-can-i-do-a-transparent-gzip-uncompress-from-both-stdin-and-files-in-perl/44781449#44781449", "title": "How can I do a transparent gzip uncompress from both stdin and files in perl?", "body": "<p>This is something I have wanted to do for a long time as well. It's only recently that I learned how to do it robustly.</p>\n\n<p>The approach does not require any file naming conventions. Instead it checks <a href=\"http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html\" rel=\"nofollow noreferrer\">the gzip magic number</a>, which is <a href=\"https://stackoverflow.com/questions/2670639/why-are-hexadecimal-numbers-prefixed-with-0x\">0x1f8b</a>.  It requires reading the first two bytes of each file as a binary stream (using a really nifty function called <a href=\"http://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow noreferrer\">unpack</a>), and checking to see if the bytes match gzip's magic number. This seems to work for me:</p>\n\n<pre><code>$ echo \"hi world\" | gzip -c &gt; hi_world.gz\n$ echo \"hi world\" &gt; hi_world.txt\n$ echo \"hi world\" | gzip -c &gt; not_a_gz_file\n$ perl testgz.pl hi_world.gz hi_world.txt not_a_gz_file\nhi_world.gz is gzipped!\nhi_world.txt is not gzipped :(\nnot_a_gz_file is gzipped!\n</code></pre>\n\n<p>The contents of <code>testgz.pl</code> is below.  Please excuse my perl.  It's been a while...</p>\n\n<pre><code># testgz.pl\nmy $GZIP_MAGIC_NUMBER = \"1f8b\";\nmy $GZIP_MAGIC_NUMBER_LENGTH = 2; # in bytes\n\nfor my $arg (@ARGV){\n    if(is_gzipped($arg)){\n        print \"$arg is gzipped!\\n\";\n    } else{\n        print \"$arg is not gzipped :(\\n\";\n    }\n}\n\n\nsub is_gzipped{\n    my $file_name = shift;\n    open(my $fh, \"&lt;\", $file_name)\n      or die \"Can't open &lt; $file_name: $!\";\n    read($fh, $line, $GZIP_MAGIC_NUMBER_LENGTH);\n    close($fh);\n    return is_line_gzipped($line);\n}\n\nsub is_line_gzipped{\n    my $line = shift;\n    my $is_gzipped = 0;\n    if (length($line) &gt;= $GZIP_MAGIC_NUMBER_LENGTH){\n        my $magic_number = unpack(\"H4\", $line);\n        $is_gzipped = 1 if($magic_number == $GZIP_MAGIC_NUMBER);\n    }\n    return $is_gzipped\n}\n</code></pre>\n\n<p>In answer to the question, I would suggest checking a file you are about to open with the function <code>is_gzipped</code>, and then choosing an approach based on the result.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["MathJax", "Prettify"], "open_beta_date": 1496770227, "closed_beta_date": 1494961200, "site_state": "open_beta", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/bioinformatics/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/bioinformatics/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/bioinformatics/Img/apple-touch-icon.png", "audience": "researchers, developers, students, teachers, and end users interested in bioinformatics", "site_url": "https://bioinformatics.stackexchange.com", "api_site_parameter": "bioinformatics", "logo_url": "https://cdn.sstatic.net/Sites/bioinformatics/Img/logo.png", "name": "Bioinformatics", "site_type": "main_site"}, "on_date": 1498569825, "question_id": 635}, "owner": {"reputation": 380, "user_id": 3389895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4431ac37f6478a9f804b491b5f3b79?s=128&d=identicon&r=PG", "display_name": "gringer", "link": "https://stackoverflow.com/users/3389895/gringer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1498569825, "creation_date": 1497136467, "question_id": 44781446, "link": "https://stackoverflow.com/questions/44781446/how-can-i-do-a-transparent-gzip-uncompress-from-both-stdin-and-files-in-perl", "title": "How can I do a transparent gzip uncompress from both stdin and files in perl?", "body": "<p>I've written a few scripts for processing FASTA/FASTQ files (e.g. <a href=\"https://github.com/gringer/bioinfscripts/blob/master/fastx-length.pl\" rel=\"nofollow noreferrer\">fastx-length.pl</a>), but would like to make them more generic and accept both compressed and uncompressed files as both command line parameters and as standard input (so that the scripts \"just work\" when you throw random files at them). It's quite common for me to be doing work on both uncompressed and compressed files (e.g. compressed read files, uncompressed assembled genomes), and slotting in things like <code>&lt;(zcat file.fastq.gz)</code> gets quickly annoying.</p>\n\n<p>Here's an example chunk from the <code>fastx-length.pl</code> script:</p>\n\n<pre><code>...\nmy @lengths = ();\nmy $inQual = 0; # false\nmy $seqID = \"\";\nmy $qualID = \"\";\nmy $seq = \"\";\nmy $qual = \"\";\nwhile(&lt;&gt;){\n  chomp; chomp; # double chomp for Windows CR/LF on Linux machines\n  if(!$inQual){\n    if(/^(&gt;|@)((.+?)( .*?\\s*)?)$/){\n      my $newSeqID = $2;\n      my $newShortID = $3;\n      if($seqID){\n        printf(\"%d %s\\n\", length($seq), $seqID);\n        push(@lengths, length($seq));\n      }\n...\n</code></pre>\n\n<p>I can see that <code>IO::Uncompress::Gunzip</code> supports transparent uncompression via :</p>\n\n<blockquote>\n  <p>If this option is set and the input file/buffer is not compressed data, the module will allow reading of it anyway.</p>\n  \n  <p>In addition, if the input file/buffer does contain compressed data and there is non-compressed data immediately following it, setting this option will make this module treat the whole file/buffer as a single data stream.</p>\n</blockquote>\n\n<p>I would like to basically slot a transparent uncompress into <a href=\"https://perlmaven.com/the-diamond-operator\" rel=\"nofollow noreferrer\">the diamond operator</a>, between loading each file and reading a line from the file inputs. Does anyone know how I can do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497189860, "post_id": 44477163, "comment_id": 75963390, "body": "It looks like you&#39;re used to Lua?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7976366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a107bf6da11144cd6c9b4cd4b32d377?s=128&d=identicon&r=PG&f=1", "display_name": "Justplayit", "link": "https://stackoverflow.com/users/7976366/justplayit"}, "edited": false, "score": 0, "creation_date": 1497128826, "post_id": 44477339, "comment_id": 75951296, "body": "Yeah, that was the problem. I figured it out eventually."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 1, "last_activity_date": 1497123403, "creation_date": 1497123403, "answer_id": 44477339, "question_id": 44477163, "link": "https://stackoverflow.com/questions/44477163/odd-number-in-anonymous-hash/44477339#44477339", "title": "Odd number in anonymous hash", "body": "<p>You're calling <code>performanta{$clone-&gt;{_secventa}}</code>.  When perl tries to parse this, it's getting <code>performanta( { $clone-&gt;{_secventa} } )</code> which is:</p>\n\n<ul>\n<li>call the performanta sub</li>\n<li>it gets one parameter</li>\n<li>that one parameter is an anonymous hash ref, initialised with <code>{ ... }</code></li>\n<li>the list that initialises that hash ref is only one item long, <code>$clone-&gt;{_secventa}</code>.</li>\n</ul>\n\n<p>It's not entirely clear to me what you intended, but it's entirely clear to perl that whatever you told it isn't going to be what you intended to tell it, thus the helpful warning.</p>\n"}], "owner": {"reputation": 15, "user_id": 7976366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a107bf6da11144cd6c9b4cd4b32d377?s=128&d=identicon&r=PG&f=1", "display_name": "Justplayit", "link": "https://stackoverflow.com/users/7976366/justplayit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 44477339, "answer_count": 1, "score": 0, "last_activity_date": 1497123403, "creation_date": 1497122250, "question_id": 44477163, "link": "https://stackoverflow.com/questions/44477163/odd-number-in-anonymous-hash", "title": "Odd number in anonymous hash", "body": "<p>Anyone can explain me why this warning occurs in my program. So far my limited knowledge of <code>perl</code>, this should work properly.  </p>\n\n<pre><code>$clone = $cromozom;\nprint \"-- Clone: $clone-&gt;{_secventa} | $clone-&gt;{_performanta} \\n\";\nmutatie($clone);\nprint \"-- After mutation: $clone-&gt;{_secventa} | $clone-&gt;{_performanta} \\n\";\n$clone-&gt;{_performanta} = performanta{$clone-&gt;{_secventa}};\n$counter += 1;\n</code></pre>\n\n<p>And this is the <code>performanta</code> subroutine.  </p>\n\n<pre><code>sub performanta{\n    my $sir = shift;\n    my $distanta = 0;\n    my $index;\n\n    for($index = 0; $index &lt; length($sir); $index +=1){\n        $distanta += abs(ord(substr($sir, $index, 1)) - ord(substr($solutieOptima, $index, 1)));\n    }\n\n   return $distanta;\n</code></pre>\n\n<p>}</p>\n\n<p>It says <code>Odd number of elements in anonymous hash</code> at this line: <code>$clone-&gt;{_performanta} = performanta{$clone-&gt;{_secventa}};</code>.<br>\nThank you.</p>\n"}, {"tags": ["java", "perl", "cron"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1497107085, "post_id": 44474619, "comment_id": 75945070, "body": "When running something under <code>cron</code> the environment is usually <i>very</i> limited. In your case <code>boilerpipe-wrapper.jar</code> isn&#39;t found by <code>java</code> (I think). Presumably the <code>CLASSPATH</code> isn&#39;t set? Try <code>24 7 * * * (env; perl &#47;home&#47;retrievetext.pl) &gt;&gt; &#47;home&#47;cron-msgs 2&gt;&amp;1</code> to see cron&#39;s environment when it invokes your script."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1497107418, "post_id": 44474619, "comment_id": 75945134, "body": "Also: <i>Whose cronjob is that?</i> Yours? or e.g. root&#39;s?"}, {"owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1497108141, "post_id": 44474619, "comment_id": 75945334, "body": "Based on your hunch that the .jar wasn&#39;t being found, I did some searching around and found that I needed to specify the full path to the jar file in the perl script.  I guess I should have known that cron wouldn&#39;t know what path the perl script was in :-/  It&#39;s working now.  Thanks!"}, {"owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1497108665, "post_id": 44474619, "comment_id": 75945498, "body": "Wait...I spoke too soon.  It appeared to run but the .jar still failed.  Running the cron as you specified above the env shows HOME = /root, LOGNAME = root, PATH = /usr/bin:/bin, LANG=en_US.UTF-8, SHELL=/bin/sh,PWD=root.  So obviously root owns the cron job.  But I thought the jar world execute permissions would take care of that."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 3, "creation_date": 1497109358, "post_id": 44474619, "comment_id": 75945691, "body": "Well, <code>root</code> can execute your jar, but it still does so as user <code>root</code>, not as <code>steve</code>. Either drop the root&#39;s cronjob and re-install it as your own (steve&#39;s) OR change root&#39;s cronjob to <code>su - steve -c &quot;perl &#47;home&#47;retrievetext.pl&quot;</code>. I&#39;d prefer a cronjob for <code>steve</code>. And don&#39;t worry: cronjobs are always a mess if not setup very precisely. ;-)"}], "owner": {"reputation": 805, "user_id": 396014, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9c44d60482dd671799ac303bddb0a6b3?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/396014/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497105933, "creation_date": 1497105933, "question_id": 44474619, "link": "https://stackoverflow.com/questions/44474619/perl-system-call-to-jar-file-failing-in-cron", "title": "Perl system call to jar file failing in cron", "body": "<p>I am trying to execute a perl script via a cron job that uses the system command to execute a java wrapper for boilerpipe.  It fails when executed via cron.  The script (simplified) is</p>\n\n<pre><code>my $link = \"http://foo.bar\"; # with a real link\nmy $cmdstring = 'java -jar boilerpipe-wrapper.jar url '.$link.' out.txt';\nmy $result = system($cmdstring);\nif ($? == -1) {\n    print LOG \"failed to execute system command: $!\\n\";\n    die;\n}\nelsif ($? &amp; 127) {\n    printf LOG \"child died with signal %d, %s coredump\\n\",\n        ($? &amp; 127),  ($? &amp; 128) ? 'with' : 'without';\n    die;\n}\nelse {\n    printf LOG \"child exited with value %d\\n\", $? &gt;&gt; 8;\n    die;\n}\n</code></pre>\n\n<p>The die commands are in there for debugging purposes.  What appears in LOG is</p>\n\n<pre><code>child exited with value 1\n</code></pre>\n\n<p>The crontab line is</p>\n\n<pre><code>24 7 * * * perl /home/retrievetext.pl &gt;&gt; /home/cron-msgs 2&gt;&amp;1\n</code></pre>\n\n<p>What appears in cron-msgs is</p>\n\n<pre><code>Error: unable to access jarfile boilerpipe-wrapper.jar\nDied at /home/retrievetext.pl line 15\n</code></pre>\n\n<p>The ls -la for boilerpipe-wrapper.jar is</p>\n\n<pre><code>-rwxr-xr-x 1 steve sudo 1945275 Apr 29 03:53 boilerpipe-wrapper.jar\n</code></pre>\n\n<p>The Perl script and the system call work as expected when executed from the terminal.  Anyone know what the problem is?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497117021, "post_id": 44472767, "comment_id": 75947989, "body": "Are these hex numbers?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497117299, "post_id": 44472767, "comment_id": 75948080, "body": "<code>print $string =~ s&#47;b&#47;$_&#47;gr, &quot; &quot; for 0 .. 2</code> output <code>a0c0 a1c1 a2c2 </code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497125960, "post_id": 44472767, "comment_id": 75950575, "body": "<code>say join &#39; &#39;, map { $string =~ s&#47;b&#47;$_&#47;gr } 0..2;</code> (No trailing space. Adds missing newline.)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1497122301, "post_id": 44472889, "comment_id": 75949558, "body": "@ikegami right. I should have tried that, but I didn&#39;t have a perl when I was writing it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1497122336, "last_edit_date": 1497122336, "creation_date": 1497094666, "answer_id": 44472889, "question_id": 44472767, "link": "https://stackoverflow.com/questions/44472767/perl-regex-substituting-all-instances-of-a-character-with-different-values-in-di/44472889#44472889", "title": "Perl Regex substituting all instances of a character with different values in different iterations", "body": "<p>Your code does not work because you are replacing the two <code>b</code>s inside <code>$string</code> in the first iteration of the loop. Afterwards the regex does not match any more, because there are no <code>b</code>s left. There are already two zeroes <code>0</code> in the string.</p>\n\n<p>You have several options to solve this.</p>\n\n<p>If you have Perl >= 5.14, you can use <a href=\"http://perldoc.perl.org/perl5140delta.html#Non-destructive-substitution\" rel=\"nofollow noreferrer\">the <code>/r</code> modifier</a> on the substitution. It will return the replacement instead of doing in-place substitution.</p>\n\n<pre><code>my $string=\"abcb\";\nforeach my $i (0 .. 2) {\n    #                        V here\n    print $string =~ s/b/$i/gr;\n    print \" \";          \n}\n</code></pre>\n\n<p>Another way is to copy <code>$string</code> to a new variable inside of the loop. Make sure it's a lexical (with <code>my</code>), because it's good style in Perl do declare variables in the smallest scope needed.</p>\n\n<pre><code>foreach my $i (0 .. 2) {\n    my $copy = $string;\n    $copy =~ s/b/$i/g;\n    print $copy, \" \";          \n}\n</code></pre>\n\n<p>In all cases, I have replaced your C-style <code>for</code> with a more perlish <code>foreach</code> (though the <code>for</code> and <code>foreach</code> keywords are completely interchangeable in Perl). That does the same thing, but is way easier to read.</p>\n"}], "owner": {"reputation": 21, "user_id": 8141119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6fadf494b9ed8efbc57d6463ed160f8?s=128&d=identicon&r=PG&f=1", "display_name": "durgesh", "link": "https://stackoverflow.com/users/8141119/durgesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 44472889, "answer_count": 1, "score": 1, "last_activity_date": 1497122336, "creation_date": 1497093823, "last_edit_date": 1497095740, "question_id": 44472767, "link": "https://stackoverflow.com/questions/44472767/perl-regex-substituting-all-instances-of-a-character-with-different-values-in-di", "title": "Perl Regex substituting all instances of a character with different values in different iterations", "body": "<p>I have a simple question related to Regex in Perl.\nLet's say I have a string <code>abcb</code> and I am iterating through a loop. All I want is both of the <code>b</code> characters in <code>abcb</code> to be substituted by the value of iterator in each loop. When I use the <code>$string=~s/b/$iterator/g</code>, it replaces all <code>b</code> by the first value of iterator.    </p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nmy $string=\"abcb\";\nfor (my $iterator=0;$iterator&lt;3;$iterator++)\n{\n    $string=~s/b/$iterator/g;\n    print $string;\n    print \" \";          \n}\n</code></pre>\n\n<p>Output Obtained: <code>a0c0 a0c0 a0c0</code></p>\n\n<p>Desired Output: <code>a0c0 a1c1 a2c2</code></p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1497044239, "post_id": 44466315, "comment_id": 75930744, "body": "You are lucky to get any answers at all, as Stack Overflow isn&#39;t a place to farm out your work and get it done for free. If you&#39;re really in a position where you can&#39;t even begin to write your own solution then you should be employing someone who can, not freeloading from the internet. That is probably why your question has two down votes and a close vote (none of which are mine)."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 8139165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bebd0c29be4940f8dc9ffca9ae9e2ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Wilson", "link": "https://stackoverflow.com/users/8139165/alan-wilson"}, "edited": false, "score": 0, "creation_date": 1497041660, "post_id": 44466421, "comment_id": 75929883, "body": "Thanks! This was exactly what I wanted"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1497041057, "creation_date": 1497041057, "answer_id": 44466421, "question_id": 44466315, "link": "https://stackoverflow.com/questions/44466315/take-second-of-three-numbers-from-a-line-in-a-file/44466421#44466421", "title": "Take second of three numbers from a line in a file", "body": "<p>One thing you could do is extract all numbers, then use the second one:</p>\n\n<pre><code>my $astring = \"cool more 23423 random words of 1234 random other [wordssssssss] 23\";\n\nmy @numbers = $astring =~ /[0-9]+/g;\nprint \"The second number is $numbers[1]\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1497043815, "creation_date": 1497043815, "answer_id": 44466959, "question_id": 44466315, "link": "https://stackoverflow.com/questions/44466315/take-second-of-three-numbers-from-a-line-in-a-file/44466959#44466959", "title": "Take second of three numbers from a line in a file", "body": "<pre><code>my ($second_num) = $astring =~ /^\\D*\\d+\\D+(\\d+)/;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $second_num = ( $astring =~ /\\d+/g )[1];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1497044991, "last_edit_date": 1497044991, "creation_date": 1497044015, "answer_id": 44467002, "question_id": 44466315, "link": "https://stackoverflow.com/questions/44466315/take-second-of-three-numbers-from-a-line-in-a-file/44467002#44467002", "title": "Take second of three numbers from a line in a file", "body": "<p>Your question isn't very specific, so any solution that grabs one of the numbers out of a string may be correct for you</p>\n\n<p>For instance, what would you want from a value like this?</p>\n\n<pre><code>$astring = 'a2b3c 45g 12 12/3'\n</code></pre>\n\n<p>This solution splits the whole string on whitespace, and selects into <code>@nums</code> only those \"words\" that contain at least one digit and no non-digit characters. It then prints the second of these found</p>\n\n<p>Depending on exactly what variation you expect in the input data this may or may not be sufficient</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $astring = \"cool more 23423 random words of 1234 random other [wordssssssss] 23\";\n\nmy @nums = grep { /\\d/ and not /\\D/ } split ' ', $astring;\n\nprint $nums[1], \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1234\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8139165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bebd0c29be4940f8dc9ffca9ae9e2ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Wilson", "link": "https://stackoverflow.com/users/8139165/alan-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1497272474, "accepted_answer_id": 44466421, "answer_count": 3, "score": -7, "last_activity_date": 1497044991, "creation_date": 1497040515, "last_edit_date": 1497043397, "question_id": 44466315, "link": "https://stackoverflow.com/questions/44466315/take-second-of-three-numbers-from-a-line-in-a-file", "closed_reason": "Needs more focus", "title": "Take second of three numbers from a line in a file", "body": "<p>I have a text file with a line that I'm trying to get a certain number from.</p>\n\n<p>There are some numbers at the beginning of the line, in the middle, and the end. The one I need is in the middle.</p>\n\n<p>Is there a way to get the middle number? Perhaps ignoring everything up to and following it?</p>\n\n<p>Example of a line:</p>\n\n<pre><code>my $astring = \"cool more 23423 random words of 1234 random other [wordssssssss] 23\";\n</code></pre>\n\n<p>So in the above example, I would like to take the <code>1234</code> that follows <code>of</code>.</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1497034614, "post_id": 44464835, "comment_id": 75926634, "body": "Apart from your dreadful formatting which I have fixed, your code doesn&#39;t do anything that your narrative says it does. To the general question of whether you can represent an array in JSON, the answer is <b>yes</b>. But it sounds very much like you don&#39;t understand that the JSON format is just a string of characters. Maybe you should ask a different question?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1497035526, "post_id": 44464835, "comment_id": 75927085, "body": "And <code>test_1_get_install_info_of_machines_under_test</code> is a horrible name for a subroutine, and it underlines for me that you don&#39;t know what&#39;s going on. Any identifier must be concise and meaningful. To do that requires that the ID has a <i>context</i>. I&#39;m known by <code>Borodin</code> here, which contains all the information that you need. If you forever referred to me as <code>Borodin of 83 Royal Gardens, Yeovil, Somerset England, alias of John Smith age 12</code> then everyone would soon get weary."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497036961, "post_id": 44464835, "comment_id": 75927778, "body": "The code you show really doesn&#39;t make sense: (1) the sub gets <code>$self</code> as if it were a method while this isn&#39;t a package (let alone a class).  You don&#39;t show how it&#39;s called either (2) The way you write to <code>%output</code> disagrees with the description -- you are making a <i>key</i> be the output and <code>$ip</code> being added to its arrayref-value. Huh?  Presumably you&#39;d want <code>$output{$ip} = $output</code>, but I&#39;m merely guessing here.  //  Can you update  your code so that it is clear what you do/want/have?  // Can you clafiry how you want this info organized in your JSON?  Read up on JSON first if needed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497037470, "post_id": 44464835, "comment_id": 75928018, "body": "On the face of it, yes a Perl data structure can easily be cast into a JSON string.  But you should explain clearly what is going on and what exactly you want in JSON, with code that you have (and that agrees with the description).  Otherwise people have to guess and that is no way to go."}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 2, "last_activity_date": 1497084811, "creation_date": 1497084811, "answer_id": 44471412, "question_id": 44464835, "link": "https://stackoverflow.com/questions/44464835/how-to-store-the-output-of-a-perl-script-as-a-json-array/44471412#44471412", "title": "How to store the output of a Perl script as a JSON array", "body": "<p>So it looks like you're building a hash, <code>%output</code>, which has software version numbers for keys and (references to) arrays of IP addresses for values, correct?  To output that structure as JSON, just use the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> module and print the output of the <code>to_json</code> function:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse warnings;\nuse strict;\nuse 5.010;\n\nuse JSON 'to_json';\n\nmy %output = (\n  '1.0' =&gt; [ qw( 1.2.3.4 5.6.7.8 ) ],\n  '1.1' =&gt; [ qw( 192.168.0.3 192.168.37.42 192.168.0.123 ) ]\n);\n\n# Note that to_json takes a reference to the structure, not the raw hash\nsay to_json(\\%output);\n</code></pre>\n\n<p>Which produces the output:</p>\n\n<pre><code>{\"1.0\":[\"1.2.3.4\",\"5.6.7.8\"],\"1.1\":[\"192.168.0.3\",\"192.168.37.42\",\"192.168.0.123\"]}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 44471412, "answer_count": 1, "score": -2, "last_activity_date": 1497084811, "creation_date": 1497034116, "last_edit_date": 1497034437, "question_id": 44464835, "link": "https://stackoverflow.com/questions/44464835/how-to-store-the-output-of-a-perl-script-as-a-json-array", "title": "How to store the output of a Perl script as a JSON array", "body": "<p>My program logs in to a list of IPs, identifies the software running on it, and prints the output.</p>\n\n<p>I want the output to be in the form of a JSON array.</p>\n\n<p>Can a JSON encode function be used for this?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse QA::unit::testbedinfo;\n\nmy @machines_under_test = ( ... ); # list of ip's listed here\n\nsub test_1_get_install_info_of_machines_under_test {\n\n    my ( $self ) = @_;\n    my %output;\n\n    foreach my $ip ( @machines_under_test ) {\n\n        my $output = $self-&gt;{'queryObj'}-&gt;get_install_info( $ip );\n\n        push @{ $output{$output} }, $ip;\n\n        INFO( ' software version  running on machine ' . $ip . ' : ' . $output );\n    }\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["string", "perl", "replace"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1497023897, "post_id": 44462058, "comment_id": 75920737, "body": "Missing <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497024199, "post_id": 44462058, "comment_id": 75920935, "body": "@melpomene well, after putting strict and warnings. I got warnings like &#39;my is not used&#39;. But still issue is not solved. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1497025621, "post_id": 44462058, "comment_id": 75921772, "body": "@bharatesh: <code>use strict</code> and <code>use warnings &#39;all&#39;</code> don&#39;t magically fix your program, they draw your attention to errors in your code, which you then must fix yourself. Do that, and post your new code if you are still unable to fix it yourself."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497030860, "post_id": 44462058, "comment_id": 75924736, "body": "@Sinan&#220;n&#252;r: <i>&quot;Use <code>Regexp::Common</code>&quot;</i> That was my first thought, but having tried in the past to do something similar, I found that <code>Regexp::Common::URI</code> is in a half-finished state. It doesn&#39;t seem to support an authority or a fragment on the URL, and if you use <code>$RE{URI}{HTTP}{-keep}</code> then the captured fields aren&#39;t documented. I started to assemble a solution for the OP along those lines, but realised that I needed <code>URI</code> as well and soon gave up. I may write to the maintainer to see if this can be fixed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497032115, "post_id": 44462058, "comment_id": 75925377, "body": "@Sinan&#220;n&#252;r: The problem is that <code>URI</code> can&#39;t find the URLs in a block of text on its own. As I described, I considered a solution using both <code>Regexp::Common::URI</code> and <code>URI</code>, but it quickly became untenable. It&#39;s entirely possible that I have made a mistake, but I couldn&#39;t find it and so have emailed the maintainer. If you want to experiment then my example was <code>http:&#47;&#47;user:pass@www.example.com:88&#47;path?query#fragment</code> which the module recognizes but doesn&#39;t split into parts correctly using the <code>{-keep}</code> option. Even if it did, those parts are undocumented."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497032528, "post_id": 44462058, "comment_id": 75925597, "body": "@bharatesh: As far as I can tell, you want to search for all URLs in a document and replace them with a different host name if the original host name is in <code>@white_list</code>. Is that right?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1497033968, "post_id": 44462058, "comment_id": 75926314, "body": "@Sinan&#220;n&#252;r: That&#39;s the primary option of course. Any substring of an HTML document that happens to look like a URL may well not be eligible, and the OP is probably looking for the contents of <code>href</code> or <code>src</code> attributes. However they seem to have gone silent, and it may be that we will never know."}, {"owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497076848, "post_id": 44462058, "comment_id": 75936574, "body": "@Borodin thank you for your advice. I know using use of strict or warnings won&#39;t fix any problems. At least any body who does programming can understand without any doubt. I am here to discuss, some issues as I am not a perl developer. Otherwise I would not asked in first place. Well please read the post carefully before you come to any conclusions. Try to read the comments in the code, Try to run the example code, infact it works without any issues. The problem start to appears when text contains line breaks or empty lines."}, {"owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497076960, "post_id": 44462058, "comment_id": 75936598, "body": "@Borodin The set of environment I am working is a lagacy code. Had tons or restrictions."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1497025008, "creation_date": 1497025008, "answer_id": 44462468, "question_id": 44462058, "link": "https://stackoverflow.com/questions/44462058/perl-url-replace/44462468#44462468", "title": "Perl URL replace", "body": "<p>The URL in <code>$old</code> contains characters that Perl's regex engine treats as part of the pattern, not as literal characters, when you use it inside the pattern match.</p>\n\n<pre><code>$text =~ s/$old/$new/g;\n</code></pre>\n\n<p>You need to escape those. You can do that with the <code>\\Q</code> and <code>\\E</code> commands.</p>\n\n<pre><code>$text =~ s/\\Q$old\\E/$new/g;\n</code></pre>\n\n<p>That should do the trick, assuming the rest of your code is working, which I have not tried.</p>\n"}, {"comments": [{"owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "edited": false, "score": 0, "creation_date": 1497077102, "post_id": 44464735, "comment_id": 75936631, "body": "The code already works without any issues in any of online compilers."}, {"owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "edited": false, "score": 0, "creation_date": 1497078167, "post_id": 44464735, "comment_id": 75936872, "body": "Thank you, I will try to run your code, since it looks cleaner."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1497034032, "last_edit_date": 1497034032, "creation_date": 1497033709, "answer_id": 44464735, "question_id": 44462058, "link": "https://stackoverflow.com/questions/44462058/perl-url-replace/44464735#44464735", "title": "Perl URL replace", "body": "\n\n<p>I would use <a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\"><code>Regexp::Common</code></a> in conjunction with <a href=\"https://metacpan.org/pod/Regexp::Common::URI\" rel=\"nofollow noreferrer\"><code>Regexp::Common::URI</code></a> to locate the URLs, and \n<a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> to parse and transform them</p>\n\n<p>Your very minimal data sample doesn't help, but here is a proof of my idea using that data</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Regexp::Common 'URI';\nuse URI;\nuse List::Util 'any';\n\nuse constant NEW_HOST =&gt; 'test.xyz.pqr';\n\nmy $text = &lt;&lt;'END';\n&lt;a href=\"http://www.amazon.de/Lenovo-Moto-Smartphone-Android-schwarz/dp/B01FLZC8ZI\"&gt;\n&lt;img src=\"http://www.testurl.de/Sasdfhopr.jpg\" width=\"80%\"&gt;\n&lt;/a&gt;\nEND\n\nmy @white_list = qw/ www.amazon.de /;\n\n$text =~ s{ ( $RE{URI}{HTTP} ) } {\n    my $uri = URI-&gt;new($1);\n    my $host = $uri-&gt;host;\n    $uri-&gt;host(NEW_HOST) if any { $host eq $_ } @white_list;\n    $uri-&gt;as_string;\n}exg;\n\nprint $text, \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;a href=\"http://test.xyz.pqr/Lenovo-Moto-Smartphone-Android-schwarz/dp/B01FLZC8ZI\"&gt;\n&lt;img src=\"http://www.testurl.de/Sasdfhopr.jpg\" width=\"80%\"&gt;\n&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 832, "user_id": 1770715, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/a061d867d23ee2d5169d8cea01cb1222?s=128&d=identicon&r=PG", "display_name": "bharatesh", "link": "https://stackoverflow.com/users/1770715/bharatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1497034032, "creation_date": 1497023625, "question_id": 44462058, "link": "https://stackoverflow.com/questions/44462058/perl-url-replace", "title": "Perl URL replace", "body": "<p>I am trying to achieve following task, </p>\n\n<ol>\n<li>Extract all urls from the text.</li>\n<li>If domain belongs to white list, then replace them with modified urls.</li>\n</ol>\n\n<p>Following is the code.</p>\n\n<pre><code>$text = '&lt;a href=\"http://www.amazon.de/Lenovo-Moto-Smartphone-Android-schwarz/dp/B01FLZC8ZI\"&gt;&lt;img src=\"http://www.testurl.de/Sasdfhopr.jpg\" width=\"80%\"&gt;&lt;/a&gt;';\n\n$regex = '(http|ftp|https):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&amp;:\\/~+#-]*[\\w@?^=%&amp;\\/~+#-])?';\n\n@whiteList = (\"www.amazon.de\");\n\nwhile ($text =~ /$regex/g) {\n       # regex result has following groups as matches\n       # $1 = scheme\n       # $2 = domain\n       # $3 = query parameters\n\n       # check if domain is in white list\n       if ( grep( /^$2$/, @whiteList ) ) {\n           # build new url\n           $new = \"http://test.xyz.pqr/url=\".$1.\"://\".$2.$3;\n\n           # recreate old url\n           $old = $1.\"://\".$2.$3;\n\n           # replace it here, but its not replacing\n           $text =~ s/$old/$new/g;\n\n           # but as an example replacing \n           # domain name with test, its working. \n           # it appears to be something to with back slash or forward \n           # slashes\n           $text =~ s/$2/test/g;\n         }\n    } print $text;\n</code></pre>\n\n<p>Any help or hint would be great. As I am new to perl programming. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 29, "user_id": 7104850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc629a57960364c5359428f1449ea58?s=128&d=identicon&r=PG&f=1", "display_name": "Seigfried", "link": "https://stackoverflow.com/users/7104850/seigfried"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1497019209, "post_id": 44459922, "comment_id": 75917654, "body": "I forgot to type the } in this snippet I posted but yes a lot of errors"}], "answers": [{"comments": [{"owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1497020865, "post_id": 44460345, "comment_id": 75918870, "body": "Fixed the answer"}], "tags": [], "owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1497026612, "last_edit_date": 1497026612, "creation_date": 1497018409, "answer_id": 44460345, "question_id": 44459922, "link": "https://stackoverflow.com/questions/44459922/perl-capture-and-add-to-end-of-string/44460345#44460345", "title": "Perl capture and add to end of string", "body": "<p>Try this:</p>\n\n<pre><code>use strict;\nuse warnings;\nopen(my $fh, '&lt;', 'annotation.gff') or die $!;\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    /Gene=([a-zA-Z0-9\\-]+)\\;/ and $_ .= \",$1\";\n    print \"$_\\n\";\n}\n\nclose $fh;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 3, "last_activity_date": 1497021936, "last_edit_date": 1497021936, "creation_date": 1497020397, "answer_id": 44461014, "question_id": 44459922, "link": "https://stackoverflow.com/questions/44459922/perl-capture-and-add-to-end-of-string/44461014#44461014", "title": "Perl capture and add to end of string", "body": "<p>Let's go through your code:</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>Good. However, trying to run your code gives:</p>\n\n<blockquote>\n  <p><code>syntax error at ss.pl line 9, near \")\n  printf\"\n  syntax error at ss.pl line 11, near \"else\"</code></p>\n</blockquote>\n\n<p>which means you did not post the code you ran, so we can't really trust it. Don't do that. Reduce your problem to a small, self-contained script others can run.</p>\n\n<pre><code>open(SOURCE,\"&lt;annotation.gff\") or die \"Source file not found!\\n\";\n</code></pre>\n\n<ul>\n<li><p>Don't use bareword filehandles such as <code>SOURCE</code>. Instead, use lexical filehandles.</p></li>\n<li><p>Don't hard code the name of the file you are trying to open. Doing so makes it hard to accurately convey the name of the file your program failed to open in case of a failure.</p></li>\n<li><p>In the error message, include actual error your program encountered, rather than hardcoding your unwarranted assumptions.</p></li>\n<li><p>Don't use the two argument form of <code>open</code>, especially if you are going to want the flexibility to specify file names as command line arguments instead of having to edit the script every time you get a new input file. That is, use</p>\n\n<pre><code>my $annotation_file = 'annotation.gff';\nopen my $source, '&lt;', $annotation_file\n    or die \"Failed to open annotation source '$annotation_file': $!\";\n</code></pre></li>\n<li><p>Don't declare the iteration variable for a loop outside the scope of the loop.That is, instead of:</p>\n\n<pre><code>my $line1;\nforeach $line1 ( ... )\n</code></pre>\n\n<p>use</p>\n\n<pre><code>foreach my $line1 ( ... )\n</code></pre></li>\n<li><p>But, of course, you should not use a <code>for</code> loop to iterate over the contents of a file because doing so makes your program <em>slurp</em> (i.e. read the entire contents of) the file into memory as a list of lines. This makes the memory footprint of your program depend on the size of its input instead of the size of the longest line. Also, drop the <code>1</code> suffix: You are iterating through <em>every</em> line in the file, not just the first one.</p>\n\n<pre><code> while (my $line = &lt;$source&gt;) {\n</code></pre></li>\n<li><p>Don't use <code>printf</code> if you are just printing plain strings. That is, instead of <code>printf \"$line1,$1\"</code>, use <code>print \"$line,$1\\n\"</code>.</p></li>\n<li><p>And, that brings us to another problem. When you read the line, you never remove the newline off its end. Therefore, the string you print is <code>\"...\\n...\"</code> which creates the effect of <em>prepending</em> the captured string to the beginning of the following line.</p></li>\n</ul>\n\n<p>That brings us to something that works:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $annotation_file = 'annotation.gff';\n\nopen my $source, '&lt;', $annotation_file\n    or die \"Cannot open annotation source '$annotation_file': $!\";\n\nwhile (my $line = &lt;$source&gt;) {\n    if( $line =~ /Gene = ( [^;]+ ) ;/x ) {\n        chomp $line;\n        print join(',' =&gt; $line, $1), \"\\n\";\n    }\n    else {\n        print $line;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7104850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc629a57960364c5359428f1449ea58?s=128&d=identicon&r=PG&f=1", "display_name": "Seigfried", "link": "https://stackoverflow.com/users/7104850/seigfried"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 44461014, "answer_count": 2, "score": -3, "last_activity_date": 1497026612, "creation_date": 1497017237, "last_edit_date": 1497022035, "question_id": 44459922, "link": "https://stackoverflow.com/questions/44459922/perl-capture-and-add-to-end-of-string", "title": "Perl capture and add to end of string", "body": "<p>I have a file with a lot of lines like this:</p>\n\n<pre><code>ChrVIII_A_nidulans_FGSC_A4  AspGD   gene    3861520 3863875 .   +   .   ID=AN0338;Name=AN0338;Gene=CYP680A1;Note=Putative%20cytochrome%20P450;orf_classification=Uncharacterized;Alias=ANIA_00338,ANID_00338\n</code></pre>\n\n<p>My region of interest is <code>;Gene=_____;</code> -- the stuff between the <code>=</code> and <code>;</code>.</p>\n\n<p>If this region exists, I want to append it to the end of the line with a , attached to the front. If it does not exist I want to print the line anyway!</p>\n\n<pre><code>ChrVIII_A_nidulans_FGSC_A4  AspGD   gene    3861520 3863875 .   +   .   ID=AN0338;Name=AN0338;Gene=CYP680A1;Note=Putative%20cytochrome%20P450;orf_classification=Uncharacterized;Alias=ANIA_00338,ANID_00338,CYP680A1\n</code></pre>\n\n<p>This is what I tried in Perl and I don't know why it doesn't work.</p>\n\n<pre><code>use strict;\nuse warnings;\nopen(SOURCE,\"&lt;annotation.gff\") or die \"Source file not found!\\n\";\n\nmy $line1;\nforeach $line1(&lt;SOURCE&gt;)            #iterating over SOURCE file\n{\nif($line1=~/Gene\\=([a-zA-Z0-9\\-]+)\\;/)\nprintf \"$line1,$1\";\n}\nelse {printf \"$line1\";}\n}\n</code></pre>\n\n<p>Can anyone show me what I am doing wrong?</p>\n"}, {"tags": ["perl", "stored-procedures", "sybase"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1497012389, "post_id": 44458058, "comment_id": 75912644, "body": "If you can do it via SQL, you sure can do it from Perl."}], "answers": [{"tags": [], "owner": {"reputation": 8716, "user_id": 7366100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/426e64e0d4a4ee822821a63c62424ddb?s=128&d=identicon&r=PG&f=1", "display_name": "markp-fuso", "link": "https://stackoverflow.com/users/7366100/markp-fuso"}, "is_accepted": true, "score": 2, "last_activity_date": 1497013115, "creation_date": 1497013115, "answer_id": 44458488, "question_id": 44458058, "link": "https://stackoverflow.com/questions/44458058/can-i-create-a-temporary-table-in-a-perl-script-and-access-it-in-stored-procedur/44458488#44458488", "title": "Can I create a temporary table in a perl script and access it in stored procedure?", "body": "<p>I'm assuming your stored proc works on multiple rows of data (otherwise you could call the proc once for each row of data) so fwiw ...</p>\n\n<hr>\n\n<p>Some basics ....</p>\n\n<p>A temp table ('#' prefix) is associated with the login session that creates it.  </p>\n\n<p>As long as the login session remains active then the #temp table remains accessible (assuming you don't issue a 'drop table').</p>\n\n<p>When the login session ends the temp table goes away.</p>\n\n<p>The temp table cannot be accessed by another login session.</p>\n\n<hr>\n\n<p>Your perl script should be able to create, populate and query the temp table as long as the perl script uses the same login session (aka connection) to perform all actions (create table, insert, select) against the temp table.</p>\n\n<p>Your stored proc would also need to be invoked on the same login session if it's to access the temp table.</p>\n"}], "owner": {"reputation": 339, "user_id": 4138675, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/r4teQ.jpg?s=128&g=1", "display_name": "Chetan Joshi", "link": "https://stackoverflow.com/users/4138675/chetan-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 44458488, "answer_count": 1, "score": 0, "last_activity_date": 1497013115, "creation_date": 1497011837, "question_id": 44458058, "link": "https://stackoverflow.com/questions/44458058/can-i-create-a-temporary-table-in-a-perl-script-and-access-it-in-stored-procedur", "title": "Can I create a temporary table in a perl script and access it in stored procedure?", "body": "<p>I have a perl script through which I'm executing a stored procedure (sybase db).\nIn the same perl script I'm reading records from a .csv file. somehow I want to get these records in my stored procedure. \nIs there anyway I can do this without writing these records onto a new table in db.</p>\n\n<p>I thought of using a temporary table. Can I create a temporary table in a perl script and access it in stored procedure?</p>\n"}, {"tags": ["regex", "bash", "perl", "shell", "grep"], "comments": [{"owner": {"reputation": 27, "user_id": 3514037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94461a7f6e8cc60ffa6a41bba7d6adf1?s=128&d=identicon&r=PG&f=1", "display_name": "syedalisait", "link": "https://stackoverflow.com/users/3514037/syedalisait"}, "edited": false, "score": 0, "creation_date": 1497006952, "post_id": 44456396, "comment_id": 75908916, "body": "Please let me know if you have any questions."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1497007043, "post_id": 44456396, "comment_id": 75908980, "body": "This is the problem, What have you tried so far? Show us the code."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 3, "creation_date": 1497007404, "post_id": 44456396, "comment_id": 75909216, "body": "I have a question, where&#39;s your code?"}, {"owner": {"reputation": 27, "user_id": 3514037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94461a7f6e8cc60ffa6a41bba7d6adf1?s=128&d=identicon&r=PG&f=1", "display_name": "syedalisait", "link": "https://stackoverflow.com/users/3514037/syedalisait"}, "edited": false, "score": 0, "creation_date": 1497009692, "post_id": 44456396, "comment_id": 75910748, "body": "Added the code that I use"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 1, "creation_date": 1497010878, "post_id": 44456396, "comment_id": 75911589, "body": "why use many processes <code>grep</code>, <code>awk</code>, <code>sed</code> when this can be done by one. <code>perl</code> has the advantage of being more stable, regarding syntax, than unix tools which can differ depending version"}], "answers": [{"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": false, "score": 0, "last_activity_date": 1497011826, "last_edit_date": 1497011826, "creation_date": 1497011482, "answer_id": 44457938, "question_id": 44456396, "link": "https://stackoverflow.com/questions/44456396/grep-for-multiple-patterns-with-end-of-line-as-a-string/44457938#44457938", "title": "grep for multiple patterns with end of line as a string", "body": "<p>The <code>$/=\"EOE\"</code> must be in <code>BEGIN</code> otherwise there's a risk of missing one match.</p>\n\n<p>The grep process is useless it can be done in perl process.</p>\n\n<pre><code>perl -ne 'BEGIN{$/=\"\\nEOE\\n\"} next unless /Client=WebsiteContent/ &amp;&amp; /Operation=Eligibility/; /Program=.*/ &amp;&amp; print \"$&amp;\\n\";'\n</code></pre>\n\n<p>Otherwise to do it only with unix tools and pipelines</p>\n\n<pre><code>...| tr '\\n' , | sed 's/,EOE,/\\n/g' | grep Client=WebsiteContent | grep Operation=Eligibility | tr , '\\n' | grep Program=\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 3514037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94461a7f6e8cc60ffa6a41bba7d6adf1?s=128&d=identicon&r=PG&f=1", "display_name": "syedalisait", "link": "https://stackoverflow.com/users/3514037/syedalisait"}, "edited": false, "score": 0, "creation_date": 1497258220, "post_id": 44458152, "comment_id": 75984025, "body": "Works like a charm. Thanks @Jack"}], "tags": [], "owner": {"reputation": 4578, "user_id": 2584475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73e3a5a31ca53c6e58b1679a86c7a48?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2584475/jack"}, "is_accepted": true, "score": 0, "last_activity_date": 1497012131, "creation_date": 1497012131, "answer_id": 44458152, "question_id": 44456396, "link": "https://stackoverflow.com/questions/44456396/grep-for-multiple-patterns-with-end-of-line-as-a-string/44458152#44458152", "title": "grep for multiple patterns with end of line as a string", "body": "<p>You can run that though pipes with convert each record to a line with colons (or some other unused character) delimiting fields.  Temporarily, you will need another unused character (such as a semicolon) to delimit records:</p>\n\n<pre><code>cat input_file.txt | tr '\\n' ':' | sed 's/---:/---;/' | tr ';' '\\n'\n</code></pre>\n\n<p>You can then pipe the results of that through <code>grep</code>:</p>\n\n<pre><code>| grep 'Client=WebsiteContent' | grep 'Operation=Eligibility' \n</code></pre>\n\n<p>Then pipe the results of that back through <code>tr</code>:</p>\n\n<pre><code>| tr ':' '\\n'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 3514037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94461a7f6e8cc60ffa6a41bba7d6adf1?s=128&d=identicon&r=PG&f=1", "display_name": "syedalisait", "link": "https://stackoverflow.com/users/3514037/syedalisait"}, "edited": false, "score": 0, "creation_date": 1497167527, "post_id": 44458842, "comment_id": 75957613, "body": "I love this answer pretty much. If no answers with shell, I&#39;ll up vote and mark it as right and close this thread."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1497014185, "creation_date": 1497014185, "answer_id": 44458842, "question_id": 44456396, "link": "https://stackoverflow.com/questions/44456396/grep-for-multiple-patterns-with-end-of-line-as-a-string/44458842#44458842", "title": "grep for multiple patterns with end of line as a string", "body": "<p>First off - don't try and coerce this into a one liner. It's not all that useful. Especially if you're trying to daisy chain shell commands.</p>\n\n<p>How about:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nlocal $/ = 'EOE'; \nwhile ( &lt;&gt; ) { \n   my %record = m/(\\w+)=(\\w+)/g;\n   print $record{'Program'},\"\\n\";\n}\n</code></pre>\n\n<p>This uses key-value matching into a hash, and extracts a named value. </p>\n\n<p>Which you can then extend:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nlocal $/ = 'EOE';\nwhile (&lt;&gt;) {\n   my %record = m/(\\w+)=(\\w+)/g;\n   if (   $record{'Operation'} eq \"Eligibility\"\n      and $record{'Client'} eq \"WebsiteContent\" )\n   {\n      print $record{'Program'}, \"\\n\";\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3514037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94461a7f6e8cc60ffa6a41bba7d6adf1?s=128&d=identicon&r=PG&f=1", "display_name": "syedalisait", "link": "https://stackoverflow.com/users/3514037/syedalisait"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "closed_date": 1497273306, "accepted_answer_id": 44458152, "answer_count": 3, "score": -4, "last_activity_date": 1497029397, "creation_date": 1497006912, "last_edit_date": 1497029280, "question_id": 44456396, "link": "https://stackoverflow.com/questions/44456396/grep-for-multiple-patterns-with-end-of-line-as-a-string", "closed_reason": "Not suitable for this site", "title": "grep for multiple patterns with end of line as a string", "body": "<p>I have multiple files in a directory.</p>\n\n<p>Contents of all the files:</p>\n\n<pre><code>Client=WebsiteContent\nOperation=Eligibility\nEnvName=StoreWebsite\nProgram=DummyService\nEOE\n-----------------------------------------------\nClient=WebsiteContent\nOperation=Eligibility\nDummy=Hello\nEnvName=StoreWebsite\nProgram=DummyService\nMetric=Helloworld\nEOE\n-----------------------------------------------\n</code></pre>\n\n<p><code>grep</code> usually works line by line. Instead I want to consider the string <code>EOE</code> as the <a href=\"https://metacpan.org/pod/perlvar#$INPUT_RECORD_SEPARATOR\" rel=\"nofollow noreferrer\">input record separator</a> so that I can grep for multiple fields.</p>\n\n<p>Example:</p>\n\n<p>I want to grep for different 'Program' where the <code>Client</code> attribute contains <code>WebsiteContent</code> and the <code>Operation</code> attribute contains <code>Eligibility</code>.</p>\n\n<p>Output:</p>\n\n<pre><code>Program=Dummy\nProgram=Something\nProgram=Hello\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I do this in Perl using</p>\n\n<pre><code>zcat * | perl -ne '$/=\"EOE\"; next unless /Client=WebsiteContent/ &amp;&amp; Operation=Eligibility/; print $_;' | grep 'Program=.*'\n</code></pre>\n\n<p>The above command gives me the results. But, I want to do this using shell (<code>grep</code>, <code>awk</code>, <code>sed</code> etc.)</p>\n"}, {"tags": ["perl", "cmd", "windows-server-2008", "wmic"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1497003685, "post_id": 44450438, "comment_id": 75906841, "body": "ok, it is a bit unclear. How is the remote server accessed? UNC? Mapped drive?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1497004472, "post_id": 44450438, "comment_id": 75907349, "body": "also, if you are searching for a specific file name, why do you want to retrieve the name if you already know it? Do you want to check if it exists and print the path to it or what is the purpose."}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1497021680, "post_id": 44450438, "comment_id": 75919389, "body": "@GerhardBarnard : I normally used the wmic / node serverName command to narrow down to a particular server  and i want to dynamically check if  the file exists"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497022010, "post_id": 44456535, "comment_id": 75919601, "body": "Can the code be narrowed down to particular server ,for instance can i give the server name as an argument, i am really sorry for posting a vague question"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497023846, "post_id": 44456535, "comment_id": 75920701, "body": "Yes, but then you would need to build in the code. I answered the answer to the specific question, if you need anything additionally, then please create a new question"}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497240402, "post_id": 44456535, "comment_id": 75976393, "body": "how can i tweak the code to make it work for a UNC path and will the find file method find folders present in sub directories from the path."}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497369576, "post_id": 44456535, "comment_id": 76044553, "body": "The command runs forever , it is not stopping ,its not returning anything"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497369766, "post_id": 44456535, "comment_id": 76044663, "body": "have you enabled strict and warnings? is it giving you any errors? Mine works 100%"}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497370071, "post_id": 44456535, "comment_id": 76044865, "body": "in the UNC path the share name is it same as any directory name in the server"}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497370799, "post_id": 44456535, "comment_id": 76045330, "body": "I have taken a part of the code and placed along the description field, i have specified the unc path and i am finding a file named data.html which is in a d: drive ,how can get its unc path ,i just need to find if it exists"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497371285, "post_id": 44456535, "comment_id": 76045626, "body": "`\\\\\\\\servername\\\\d` I assume.  How do you currently access it?"}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497372550, "post_id": 44456535, "comment_id": 76046412, "body": "does the @files contain the file names"}, {"owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "edited": false, "score": 0, "creation_date": 1497429644, "post_id": 44456535, "comment_id": 76069966, "body": "I don&#39;t think the path can be a unc file path"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1497369741, "last_edit_date": 1497369741, "creation_date": 1497007348, "answer_id": 44456535, "question_id": 44450438, "link": "https://stackoverflow.com/questions/44450438/is-there-a-command-to-go-to-a-remote-server-and-traverse-through-a-path-and-get/44456535#44456535", "title": "Is there a command to go to a remote server and traverse through a path and get the file names", "body": "<p>You would need to use <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm\" rel=\"nofollow noreferrer\">File::Find::Rule</a> module from CPAN with <a href=\"http://search.cpan.org/~rclamp/Number-Compare-0.03/lib/Number/Compare.pm\" rel=\"nofollow noreferrer\">Number::Compare</a> being a dependency. see comments next to some parts of the script.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Basename qw(basename);\n\nmy $path = \"\\\\\\\\devicename\\\\sharename\";                  #Enter your path here, i.e Network drive\nmy $report = 'notfound.txt';        #This is just a log to tell you which files you searched for does not exist on the drive\n\nprint 'Enter file that contains list of files to search: ';\nmy $expected = &lt;STDIN&gt;;\n   chomp $expected;\n   open(my $fh, '&lt;', $expected) or die \"Could not open '$expected' $!\\n\";\n   open(my $out, '&gt;', $report) or die \"Could not open '$report' $!\\n\";\n\nmy @full_pathes = File::Find::Rule-&gt;file-&gt;name('*')-&gt;in($path);\nmy @files = map { lc basename $_ } @full_pathes;\nmy %file = map { $_ =&gt; 1 } @files;\n\nwhile (my $name = &lt;$fh&gt;) {\n    chomp $name;\n    if ($file{lc $name}) {  \n        print \"$name found\\n\";\n    } else {\n        print $out \"$name\\n\";\n    }\n}\nclose $out;\nclose $fh;\n</code></pre>\n\n<p>Then create a file with a list of files you want to search for. Let's call it <code>myfiles.txt</code> and enter the files in list form:</p>\n\n<pre><code>filename1.txt\nfilename2.pdf\nfilename3.bat\n</code></pre>\n\n<p>then Run the script and upon request, enter the filename <code>myfiles.txt</code> to the prompt and enter.</p>\n\n<p><strong>EDIT</strong> modified the code to take UNC paths.</p>\n"}], "owner": {"reputation": 41, "user_id": 7455779, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b34fa8607f1fec3463b5276299ac1fb9?s=128&d=identicon&r=PG&f=1", "display_name": "senor elanza", "link": "https://stackoverflow.com/users/7455779/senor-elanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497370507, "creation_date": 1496988519, "last_edit_date": 1497370507, "question_id": 44450438, "link": "https://stackoverflow.com/questions/44450438/is-there-a-command-to-go-to-a-remote-server-and-traverse-through-a-path-and-get", "title": "Is there a command to go to a remote server and traverse through a path and get the file names", "body": "<p>I am writing a perl script to get a filename present in a directory in a remote server , i couldn't find any WMIC command to traverse through directory ,is there  any other command to access a remote server and traverse in a specific path to find a file and retrieve the file name.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Basename qw(basename);\nmy $path = \"\\\\\\\\vmw2160\\\\dir1\"; \n\nmy @full_pathes = File::Find::Rule-&gt;file-&gt;name('data.html')-&gt;in($path);print \".\";\nmy @files = map { lc basename $_ } @full_pathes;\nprint foreach(@files);\n\nmy %file = map { $_ =&gt; 1 } @files;\nprint foreach(%file);     \n</code></pre>\n"}, {"tags": ["sql", "perl", "db2"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496986299, "post_id": 44449905, "comment_id": 75896841, "body": "I really don&#39;t know Perl or DB2, but I can suggest that you print out the raw query which your Perl code is executing.  Then try running that directly on DB2 and see if you get errors."}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496986530, "post_id": 44449905, "comment_id": 75896933, "body": "Hi tim, i searched for ways to do so but couldn&#39;t find a way in perl to print the update statement with placeholders populated with values. We can just print the statement and also the values what we are trying to bind. But couldn&#39;t find any way to print the query will values."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496986904, "post_id": 44449905, "comment_id": 75897078, "body": "I suspect that your <code>WHERE</code> clause is not matching any records.  Where do you bind the parameters?  I see this nowhere in your code."}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496987521, "post_id": 44449905, "comment_id": 75897290, "body": "In execute statement i am sending binding values.$sth-&gt;execute(@$row);"}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496987576, "post_id": 44449905, "comment_id": 75897316, "body": "Check the binding values and make sure you have matching records.  Any chance the prepared statement needs to be told what types that placeholder values are?"}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496989050, "post_id": 44449905, "comment_id": 75898004, "body": "s i believe there is some problem in binding. As i have placed a trigger in DB2 on update of this table and writting the update data into new table. But the trigger is not invoked which means update query was not fired on the table or there was some issue with update query."}, {"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1496989135, "post_id": 44449905, "comment_id": 75898051, "body": "My guess is that it is the query, in particular the way you are binding values."}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1496990777, "post_id": 44449905, "comment_id": 75898857, "body": "Perl experts pls help me in resolving this issue. I also updated question with  part of DBI trace logs for the update."}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1496991166, "post_id": 44449905, "comment_id": 75899093, "body": "It is impossible to justify from you code snippet, but for DB2 you have to execute <code>SET CURRENT SCHEMA XXX</code> before some other query"}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "edited": false, "score": 0, "creation_date": 1496991601, "post_id": 44449905, "comment_id": 75899348, "body": "In the above update query &lt;table&gt; = &lt;schema&gt;.&lt;tablename&gt; and the above table exist under default schema. I think the problem is with binding because if i give some dummy values directly into the update statement it works but with binding not working. In binding the first one is integer field and remaining 3 are varchar fields at DB2 and also the binding variables are maintained in same way. Pls guide me if i am wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 0, "creation_date": 1497008899, "post_id": 44449905, "comment_id": 75910214, "body": "The error means that the <code>where</code> clause didn&#39;t match any rows.  The most likely cause is that <code>@$row</code> does not contain the data you expect it to.  I would use the debugger or some other method to inspect this."}, {"owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "edited": false, "score": 0, "creation_date": 1497240524, "post_id": 44449905, "comment_id": 75976422, "body": "Thanks Guys. The problem was with the data in the array. I dont know from where but a dot was getting added for two values which was causing problem while forming update statement. Resolved it using chop and now its working fine."}], "owner": {"reputation": 45, "user_id": 3072043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/38d937d9ccac20be8bb8f918580e86d7?s=128&d=identicon&r=PG&f=1", "display_name": "user3072043", "link": "https://stackoverflow.com/users/3072043/user3072043"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496991188, "creation_date": 1496986125, "last_edit_date": 1496991188, "question_id": 44449905, "link": "https://stackoverflow.com/questions/44449905/perl-db2-update-sql-issue", "title": "Perl DB2 update sql issue", "body": "<p>I am facing an issue while updating into DB2 using Perl.</p>\n\n<p>Even though the data exist in the table update query is throwing below error:\nSQL0100W  No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.  SQLSTATE=02000</p>\n\n<p>Below is the code:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"UPDATE &lt;table&gt; SET &lt;column1&gt; = ?, &lt;column2&gt; = ? WHERE &lt;column3&gt; = ? AND &lt;column4&gt; = ?\");\n\n#  start new transaction #\n$dbh-&gt;begin_work();\n\nforeach my $row (@status_ary)\n{\n    $sth-&gt;execute(@$row);\n\n    if ( $sth-&gt;errstr )\n    {\n         print $sth-&gt;errstr, \"\\n\";\n    }\n}\n$dbh-&gt;commit();\n$sth-&gt;finish;\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>I am also performing inserting of data into this table way before and there is no issue in that but when it comes to update i am getting now row exist error even though row exist for the specified where clause. \nI also checked the values being passed for place holders and are fine.</p>\n\n<p>I also enabled DBI trace and below is the part of log:</p>\n\n<pre><code>&lt;- connect= DBI::db=HASH(0x2cc9e70)\n    &lt;- STORE('dbi_connect_closure', CODE(0x2d571b8))= 1 at DBI.pm line 755\n    &lt;- prepare('UPDATE &lt;table&gt; SET &lt;column1&gt; = ?, &lt;column2&gt; = ? WHERE &lt;column3&gt; = ? AND &lt;column4&gt; = ?')= DBI::st=HASH(0x30189c8) at library.pm line 308\n    &lt;- DESTROY(DBI::st=HASH(0x2d8ca28))= undef at library.pm line 311\n    &lt;- begin_work= 1 at library.pm line 311\n    !! info: '' '[IBM][CLI Driver][DB2/LINUXX8664] SQL0100W  No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.  SQLSTATE=02000\n' (err#0)\n&lt;- execute(1, '760.38', ...)= '0E0' at library.pm line 322\n       info: '' '[IBM][CLI Driver][DB2/LINUXX8664] SQL0100W  No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.  SQLSTATE=02000\n' (err#0)\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1496980168, "post_id": 44448844, "comment_id": 75895122, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2322822/how-do-i-manage-multiple-subprocesses-in-perl\">How do I manage multiple subprocesses in Perl?</a> (The accepted answer is a direct answer to your question -- you shouldn&#39;t be using threads for this.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1496981872, "post_id": 44448844, "comment_id": 75895497, "body": "You cannot execute 500 of anything at the same time, not with Perl for sure. (Even in C or C++ 500 threads would push it way too far.)  In particular, threads in Perl are very heavy.  If this is critical for your purpose, you&#39;ll have to go back to the drawing board. If it is not, consider the post linked by @duskwuff in their comment -- you&#39;ll want the <code>Parallel::ForkManager</code> metioned there, to keep a certain number of forked processes running.  You could use thread queues but it&#39;s tricky territory in Perl, to say the least."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1496992667, "post_id": 44448844, "comment_id": 75899919, "body": "As for your direct question -- I am not sure what you mean by &quot;at the same time.&quot;  If you mean that you are getting sequential execution, try <code>threads-&gt;create</code> (or <code>async</code>) instead of using <code>new</code> (I&#39;ve never used <code>new</code> so I don&#39;t know what it does).  If you mean that you want them to <i>start</i> at the exact same time, you can&#39;t have that."}, {"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1496995812, "post_id": 44448844, "comment_id": 75901659, "body": "Thanks for your comments! I wonder why 500 threads would be a push if the hardware should support it. When I say &quot;at the same time&quot;, I want my threads to start at not exact time but once they all start to work simultaneously parallel to each other with relatively equal priority. Meaning, I don&#39;t want thread x to capture data at a faster rate than thread y."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1496998581, "post_id": 44448844, "comment_id": 75903255, "body": "@zdim <code>thread-&gt;new</code> starts a new thread running. That isn&#39;t the problem here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497030891, "post_id": 44448844, "comment_id": 75924749, "body": "@zad0xlik  OK, thanks for clarification -- so you just want normal concurrent processing.  Is there a need for real-time action by the script? If not, you can keep a pool of processes that fetch data in a rolling manner -- and tag their catch with timestamps.  Then every half a second or a second you can sort them and report their outputs at the &quot;same&quot; (more or less) time.  So there would be a lag but you&#39;d get results as they were at the same time (half a second or a second ago each time)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497031130, "post_id": 44448844, "comment_id": 75924852, "body": "@zad0xlik  Just try to fork 500 times and see what happens. I&#39;d suggest you make sure there is nothing of value running at a time, since if resources are abused by forking nothing&#39;s off limits (you may even end up needing to push the button to restart).  Clearly, it surely won&#39;t really run all in parallel, unless you have 500 cores (even if you did I don&#39;t know that there is I/O system that can do that).  <i>Do not try this with threads</i> though. They&#39;re much heavier in Perl.  To improve your chances you can write C code that does this; then do use threads (and still be ready to reboot)."}, {"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1497039556, "post_id": 44448844, "comment_id": 75928989, "body": "Thanks zdim, I think I would need to port over my code to C to make it faster and to use threads. Launched all 500 at ones multiple times and certain threads don&#39;t even get to being executed. Should I use C or maybe Rust? Do you know if there is an easy way to port over Perl code to C?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497291582, "post_id": 44448844, "comment_id": 76005716, "body": "@zad0xlik   I just saw your last comment accidentally -- please tag the username with the &quot;at&quot; symbol (&quot;ATusername&quot;) so user is notified.  As for porting Perl to C, you&#39;ll need to just write the C code. It&#39;s going to be a bit different of course.  Don&#39;t know about Rust, haven&#39;t used it myself. I would <i>not</i> rely on 500 things running at the same time, even if it works.  Note again, they can&#39;t really unless there&#39;s 500 cores and monster hardware. (And I still don&#39;t think that they can all go together.) If you ran Perl code with 500 <i>threads</i> you are lucky that some merely didn&#39;t execute."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1497027498, "post_id": 44453493, "comment_id": 75922821, "body": "Thanks Sobrique and I am trying the approaches you suggested. The reason 500 threads is because I have that many stock options that I need to track tick by tick change. Unfortunately, the exchange does not accept multiple stock requests at one time for options data, but one request for each stock. So I have to create these many connections (the code that is being threaded) to start tracking them simultaneously."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1497131614, "post_id": 44453493, "comment_id": 75951902, "body": "That sounds like a really good way to DOS your exchange, and will upset them hugely."}, {"owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "edited": false, "score": 0, "creation_date": 1497137802, "post_id": 44453493, "comment_id": 75953072, "body": "Well at least I got that going for me."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1496998855, "last_edit_date": 1496998855, "creation_date": 1496998542, "answer_id": 44453493, "question_id": 44448844, "link": "https://stackoverflow.com/questions/44448844/threading-with-perl-how-can-i-execute-my-thread-at-the-same-time/44453493#44453493", "title": "Threading with Perl, how can I execute my thread at the same time", "body": "<p>OK. You've really misunderstood how threads work in perl. They aren't lightweight. You shouldn't be using 500 of them. </p>\n\n<p>... and even if you did, threading to call <code>system</code> to run another perl script is a bad solution. And 500 concurrent would require 500 processors to run all at once. So they'll all queue anyway. </p>\n\n<p>If you really want to do threading, I'd suggest a <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">worker threads model</a>, where you spawn 2 threads per core, and queue work to them.  </p>\n\n<p>As for all starting at 'the same time' - the answer here would be to instantiate your threads first, and use a <a href=\"http://perldoc.perl.org/Thread/Semaphore.html\" rel=\"nofollow noreferrer\">semaphore</a> to start them going.</p>\n\n<p>But I'd really suggest you ask another question, outlining what you're trying to accomplish (and offer the code so far) as I'm pretty sure there'll be a better approach than 500 threads. </p>\n\n<p>In particular - I would be thinking that you want to just open an exec filehandle, and use <code>IO::Select</code> to read from your subprocessess.</p>\n\n<p>E.g.:</p>\n\n<pre><code>while ( stuff ) { #e.g. your query\n  open ( my $data, '-|,' $prod_filter ); \n  push @all_filehandles, $data;  \n}\nmy $select = IO::Select -&gt; new ( @all_filehandles ); \n\nwhile ( my @readable = $select -&gt; can_read ) {\n    foreach my $fh ( @readable ) { \n       my $line = &lt;$fh&gt;;\n       print $line;\n    }\n}\n</code></pre>\n\n<p>Something like that at any rate. </p>\n"}], "owner": {"reputation": 173, "user_id": 1586123, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/908defd9349adfdf0df02fe4c660dca0?s=128&d=identicon&r=PG", "display_name": "zad0xlik", "link": "https://stackoverflow.com/users/1586123/zad0xlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 2, "accepted_answer_id": 44453493, "answer_count": 1, "score": 0, "last_activity_date": 1496998855, "creation_date": 1496979170, "question_id": 44448844, "link": "https://stackoverflow.com/questions/44448844/threading-with-perl-how-can-i-execute-my-thread-at-the-same-time", "title": "Threading with Perl, how can I execute my thread at the same time", "body": "<p>I need to execute ~500 threads all at the same time and below is the code that I currently developed. The issue that I am running into is that my threads are being executed one after another (not async). </p>\n\n<p>The code below essentially runs through a loop of symbols that tells what type of thread to execute, BUT I need them to start at the same time. </p>\n\n<pre><code>no warnings;\nwhile ( my $row =\n       shift( @{$rowcache} )\n    || shift( @{ $rowcache = $sth-&gt;fetchall_arrayref( undef, $max_rows ) } ) )\n{    \n    my $prod_filter = \"perl /home/zad0xlik/qtrack/1.2.v.chain_pg_sputnik.pl @{$row} \" . lc(substr(join('', @{$row}), 0, 1)) . \"_optsputnik\";\n\n    @running = threads-&gt;list(threads::running);\n    print \"LOOP $i\\n\";\n    print \"  - BEGIN LOOP &gt;&gt; NB running threads = \"\n      . ( scalar @running ) . \"\\n\";\n\n    if ( scalar @running &lt; $nb_process ) {\n\n        my $thread = threads-&gt;new( sub { system( ${prod_filter} ); } );\n\n        #my $thread = threads-&gt;new( sub { sleeping_sub($i, \\@a, \\@b) });\n        push( @Threads, $thread );\n        my $tid = $thread-&gt;tid;\n        print \"  - starting thread $tid\\n\";\n    }\n    @running = threads-&gt;list(threads::running);\n    print \"  - AFTER STARTING &gt;&gt; NB running Threads = \"\n      . ( scalar @running ) . \"\\n\";\n    foreach my $thr (@Threads) {\n        if ( $thr-&gt;is_running() ) {\n            my $tid = $thr-&gt;tid;\n            print \"  - Thread $tid running\\n\";\n        }\n        elsif ( $thr-&gt;is_joinable() ) {\n            my $tid = $thr-&gt;tid;\n            $thr-&gt;join;\n            print \"  - Results for thread $tid:\\n\";\n            print \"  - Thread $tid has been joined\\n\";\n        }\n    }\n\n    @running = threads-&gt;list(threads::running);\n    print \"  - END LOOP &gt;&gt; NB Threads = \" . ( scalar @running ) . \"\\n\";\n    $i++;\n\n}\n\nprint \"\\nJOINING pending threads\\n\";\nwhile ( scalar @running != 0 ) {\n    foreach my $thr (@Threads) {\n        $thr-&gt;join if ( $thr-&gt;is_joinable() );\n    }\n    @running = threads-&gt;list(threads::running);\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "edited": false, "score": 0, "creation_date": 1496977720, "post_id": 44448097, "comment_id": 75894545, "body": "Why do you <code>open FILE1</code> twice? Don&#39;t do it."}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1496985725, "post_id": 44449668, "comment_id": 75896643, "body": "As doing following steps you will get the API links. Goto <code>Network</code>  by clicking the <code>Network</code> tap, then select the <code>XHR</code> option then reload the page, it will shows the API links."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1496985816, "last_edit_date": 1496985816, "creation_date": 1496984763, "answer_id": 44449668, "question_id": 44448097, "link": "https://stackoverflow.com/questions/44448097/get-the-whole-content-from-the-web-site-using-perl-script/44449668#44449668", "title": "get the whole content from the web site using perl script", "body": "<p>Contents are loading from JavaScript. So you can't crawl the content using simple methods.</p>\n\n<p>There is two option for this kind of situation.</p>\n\n<p>1) Some API contains the original data and JavaScript loads/formating the data in front end. If you want to parse the JavaScript loading content try to use the\n<code>WWW::Mechanize::Firefox</code></p>\n\n<p>2) Try to figure out from where it is loading, for your IP following link has the corresponding data, which is JSON formated, so parse the content using JSON module. it is so simple compare to using RegEx. </p>\n\n<p><a href=\"https://www.talosintelligence.com/sb_api/query_lookup?query=%2Fapi%2Fv2%2Frelated_ips%2Fip%2F&amp;query_entry=27.34.246.62\" rel=\"nofollow noreferrer\"><a href=\"https://www.talosintelligence.com/sb_api/query_lookup?query=%2Fapi%2Fv2%2Frelated_ips%2Fip%2F&amp;query_entry=27.34.246.62\" rel=\"nofollow noreferrer\">https://www.talosintelligence.com/sb_api/query_lookup?query=%2Fapi%2Fv2%2Frelated_ips%2Fip%2F&amp;query_entry=27.34.246.62</a></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8134346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496985816, "creation_date": 1496973229, "last_edit_date": 1496977598, "question_id": 44448097, "link": "https://stackoverflow.com/questions/44448097/get-the-whole-content-from-the-web-site-using-perl-script", "title": "get the whole content from the web site using perl script", "body": "<p>I am a new hire in my company and first time I am working on Perl.\n   I get a task in which I find IP-Reputation from this link: <a href=\"https://www.talosintelligence.com/reputation_center/lookup?search=27.34.246.62\" rel=\"nofollow noreferrer\">https://www.talosintelligence.com/reputation_center/lookup?search=27.34.246.62</a></p>\n\n<p>But in perl when we use: </p>\n\n<pre><code>#!/bin/perl\nuse strict;\nuse warnings;\nuse WWW::Mechanize;\n\nopen FILE1, \"&gt;./Reports/Reputation.txt\" or die \"Cannot open Reputation.txt!\";\nmy $mech = WWW::Mechanize-&gt;new( autocheck =&gt; 1 );\n\nmy $url=\"https://www.talosintelligence.com/reputation_center/lookup?search=27.34.246.62\";\n$mech-&gt;get($url);\nprint $mech-&gt;status();\nmy $content = $mech-&gt;content();\nopen FILE1, \"&gt;./Reports/Reputation.txt\" or die \"Cannot open Reputation.txt!\";\nprint FILE1 ($content);\nclose FILE1;\nprint \"\\nIP Reputation Report Generated \\n\";\n</code></pre>\n\n<p>I don't get the whole content. What can I do to get this?</p>\n"}, {"tags": ["arrays", "perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1497021305, "post_id": 44448213, "comment_id": 75919172, "body": "That needlessly creates a new array, which needlessly avoids <code>sort</code>&#39;s in-place optimization."}], "tags": [], "owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1497021270, "last_edit_date": 1497021270, "creation_date": 1496974201, "answer_id": 44448213, "question_id": 44448040, "link": "https://stackoverflow.com/questions/44448040/perl-sort-arrayref-inside-a-hashref/44448213#44448213", "title": "perl: sort arrayref inside a hashref", "body": "<pre><code>$hsh-&gt;{arr} = [sort @{$hsh-&gt;{arr}}];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1496974264, "creation_date": 1496974264, "answer_id": 44448222, "question_id": 44448040, "link": "https://stackoverflow.com/questions/44448040/perl-sort-arrayref-inside-a-hashref/44448222#44448222", "title": "perl: sort arrayref inside a hashref", "body": "<pre><code>sort @{ $hsh-&gt;{arr} }\n</code></pre>\n\n<p>See <a href=\"http://perlmonks.org/?node=References+Quick+Reference\" rel=\"nofollow noreferrer\">http://perlmonks.org/?node=References+Quick+Reference</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1497021246, "creation_date": 1497021246, "answer_id": 44461301, "question_id": 44448040, "link": "https://stackoverflow.com/questions/44448040/perl-sort-arrayref-inside-a-hashref/44461301#44461301", "title": "perl: sort arrayref inside a hashref", "body": "<pre><code>sort @{ $hsh-&gt;{arr} }\n</code></pre>\n\n<p>References about references:</p>\n\n<ul>\n<li><a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"nofollow noreferrer\">Mini-Tutorial: Dereferencing Syntax</a></li>\n<li><a href=\"http://www.perlmonks.org/?node_id=69927\" rel=\"nofollow noreferrer\">References quick reference</a></li>\n<li><a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a></li>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a></li>\n<li><a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a></li>\n<li><a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a></li>\n</ul>\n\n<hr>\n\n<p>If you want to sort in-place<sup>[1]</sup>, use:</p>\n\n<pre><code>@{ $hsh-&gt;{arr} } = sort @{ $hsh-&gt;{arr} };\n</code></pre>\n\n<p>If you want to create a new array:</p>\n\n<pre><code>my @a = sort @{ $hsh-&gt;{arr} };\n</code></pre>\n\n<p>If you want to create a new anonymous array:</p>\n\n<pre><code>my $a = [ sort @{ $hsh-&gt;{arr} } ];\n</code></pre>\n\n<hr>\n\n<ol>\n<li>This doesn't just effectively sort in place, but actually does sort in-place. because <code>sort</code> is optimized to sort in-place when you have something of form <code>ARRAY = sort ARRAY</code> (or with a compare block of function).</li>\n</ol>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 44448213, "answer_count": 3, "score": 0, "last_activity_date": 1497021270, "creation_date": 1496972763, "question_id": 44448040, "link": "https://stackoverflow.com/questions/44448040/perl-sort-arrayref-inside-a-hashref", "title": "perl: sort arrayref inside a hashref", "body": "<p>I have the following structure:</p>\n\n<pre><code>my $hsh = {\n  arr =&gt; [\n    1,\n    3,\n    6,\n    4,\n    2\n  ]\n}\n</code></pre>\n\n<p>I want to sort <code>$hsh-&gt;{arr}</code>, but I can't figure out how.  <code>sort $h-&gt;{arr}</code> doesn't work.</p>\n"}, {"tags": ["arrays", "json", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "edited": false, "score": 0, "creation_date": 1496974554, "post_id": 44448068, "comment_id": 75893740, "body": "<code>It&#39;s been formatted by Dumper() back into Perl code.</code> -- into the string."}, {"owner": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "edited": false, "score": 0, "creation_date": 1496976116, "post_id": 44448068, "comment_id": 75894113, "body": "This got me closer so I appreciate the help."}, {"owner": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "edited": false, "score": 0, "creation_date": 1496976162, "post_id": 44448068, "comment_id": 75894128, "body": "Just need some further help as it&#39;s now throwing another error.   Need to check again and will post the error that is now showing up"}, {"owner": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "edited": false, "score": 0, "creation_date": 1496977220, "post_id": 44448068, "comment_id": 75894410, "body": "print Dumper $catcherJSON-&gt;[0]{id};   Can&#39;t use string (&quot;[ {   &quot;id&quot; : &quot;128&quot;,   &quot;name&quot; : &quot;&quot;...) as an ARRAY ref while &quot;strict refs&quot; in use at ./avcm.catchers.parse.pl line 81."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "edited": false, "score": 0, "creation_date": 1496978322, "post_id": 44448068, "comment_id": 75894696, "body": "@JeffGrubb <code>my $catcherJSON = decode_json $response-&gt;content; print Dumper $catcherJSON-&gt;[0]{id};</code> should work. Your error suggests you removed the <code>decode_json</code>."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1496976415, "last_edit_date": 1592644375, "creation_date": 1496972979, "answer_id": 44448068, "question_id": 44447978, "link": "https://stackoverflow.com/questions/44447978/perl-parsing-json-string-of-hash/44448068#44448068", "title": "perl -&gt; Parsing json string of hash", "body": "<blockquote>\n<p><em>Any way that I can easily convert this into a proper array of hashes so I can iterate through it?</em></p>\n</blockquote>\n<p>You've already done it.</p>\n<blockquote>\n<p><em>so I took a curl output of a json formatted output and assigned it to a variable.</em></p>\n<pre><code>my $catcherJSON = decode_json $response-&gt;content;`\n</code></pre>\n</blockquote>\n<p>That's not correct.</p>\n<p>You took the JSON formatted string from <code>$response-&gt;content</code>, decoded the JSON into a Perl data structure, and stored it in <code>$catcherJSON</code>.</p>\n<blockquote>\n<p><em>When I view the $catcherJSON, I want to see an array of hashes, but I just get a massive string of json.</em></p>\n</blockquote>\n<p><code>$catcherJSON</code> is not a string of JSON. <code>$catcherJSON</code> is a Perl array of hashes. You've already decoded the JSON into a Perl data structure with <code>decode_json</code>. It's been formatted by <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\"><code>Dumper()</code></a> back into Perl code so you can read it.</p>\n<p>Your code is fine, you have what you want. For example, <code>$catcherJSON-&gt;[0]{ingestPath}</code> will be <code>'/vg/24CHVOD_en'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "is_accepted": false, "score": 0, "last_activity_date": 1497012036, "creation_date": 1497012036, "answer_id": 44458119, "question_id": 44447978, "link": "https://stackoverflow.com/questions/44447978/perl-parsing-json-string-of-hash/44458119#44458119", "title": "perl -&gt; Parsing json string of hash", "body": "<pre><code>my $catcherJSON = $response-&gt;content;\n$catcherJSON =~ s/\\n//g;\n$catcherJSON = decode_json($catcherJSON);\n</code></pre>\n\n<p>This was my eventual solution.\nWhen the curl response comes in, all json has line breaks.  As soon as line breaks are removed, my decode_json will now refence all as $catcherJSON->[0]{id}, etc...</p>\n\n<p>Thanks everyone for the help here.\nMuch appreciated.</p>\n"}], "owner": {"reputation": 1, "user_id": 8134381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68fe2c644d76f933c969be08b54e324?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Grubb", "link": "https://stackoverflow.com/users/8134381/jeff-grubb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1497012036, "creation_date": 1496972307, "question_id": 44447978, "link": "https://stackoverflow.com/questions/44447978/perl-parsing-json-string-of-hash", "title": "perl -&gt; Parsing json string of hash", "body": "<p>so I took a curl output of a json formatted output and assigned it to a variable.</p>\n\n<pre><code>my $catcherJSON = decode_json $response-&gt;content;\nprint Dumper $catcherJSON;\n</code></pre>\n\n<p>When I view the $catcherJSON, I want to see an array of hashes, but I just get a massive string of json.</p>\n\n<pre><code>$VAR1 = [\n      {\n        'priority' =&gt; 5,\n        'ingestPath' =&gt; '/vg/24CHVOD_en',\n...\n...\n...\n      },\n      {\n        'priority' =&gt; 5,\n        'ingestPath' =&gt; \n...\n...\n      },\n      {\n        'priority' =&gt; 5,\n        'ingestPath' =&gt; \n\n... \n...  \n      },\n      {\n        'priority' =&gt; 5,\n        'ingestPath' =&gt; \n\n ...\n ...},\n      {\n        'priority' =&gt; 5,\n        'ingestPath' =&gt; \n  ....\n  ...                 \n      }\n    ];\n</code></pre>\n\n<p>The hashes repeat (There are about 300 unique results) and I'm trying to figure out in perl how I can split this 1 string into my array of hashes simply.</p>\n\n<p>Any way that I can easily convert this into a proper array of hashes so I can iterate through it?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "shell", "grep", "command"], "comments": [{"owner": {"reputation": 191, "user_id": 6577318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/366e286b753b6f393f1abd32db89ea73?s=128&d=identicon&r=PG&f=1", "display_name": "sady", "link": "https://stackoverflow.com/users/6577318/sady"}, "edited": false, "score": 0, "creation_date": 1496973433, "post_id": 44447874, "comment_id": 75893489, "body": "I got the below command <code>grep -q &quot;LogID: 1005534&quot; logfile.txt &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</code>. But how to iterate the command it with all the log-id&#39;s I have."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1496982072, "post_id": 44447874, "comment_id": 75895549, "body": "Stack Overflow is a place where you can ask others for help to get your program working if you have encountered a <i>specific problem</i>. For us to do that you need to have written a program. It is expected that you at least make an effort rather than just dumping your requirement here and waiting for a solution to pop out."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1496986687, "post_id": 44447874, "comment_id": 75897003, "body": "Please provide your textual information as text in the question, not as a picture."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496987235, "post_id": 44447874, "comment_id": 75897192, "body": "@Borodin You know there <b>is</b> a (quite decent) coding attempt. Just in the comment, not in the question."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 1, "last_activity_date": 1496989783, "creation_date": 1496989783, "answer_id": 44450771, "question_id": 44447874, "link": "https://stackoverflow.com/questions/44447874/command-to-search-a-file-based-on-the-input-in-the-other-file/44450771#44450771", "title": "Command to search a file based on the input in the other file", "body": "<p>I think your own attempt, using grep, is quite close.<br>\nBased on the two files quoted at the end of this answer as demo<br>\n(a MCVE by you would have been nice...), I propose to make three lists, using:   </p>\n\n<ul>\n<li>positive: <code>grep -of Ids.txt Logfile.txt | sort -u</code>  </li>\n<li>negative a: <code>grep -vf Ids.txt Logfile.txt | grep -o \"LogID: .*\" | sort -u</code>  </li>\n<li>negative b: <code>grep -o \"LogID: .*\" Logfile.txt &gt;InIDs.txt &amp;&amp; grep -vf InIDs.txt IDs.txt | sort -u</code></li>\n</ul>\n\n<p>Note:</p>\n\n<ul>\n<li>If you system has two \"sort\" programs, e.g. Windows and GNU, make sure to use the GNU version, i.e. by giving full path to binary; windows sort does not know <code>-u</code> option.</li>\n<li>These files have <strong>UNIX line endings</strong> (only LF, not CRLF), that is important.</li>\n<li>Assumption: The string \"LogID: dddddd\" only occurs at the end of lines<br>\n(this assumption can be slightly relaxed, maybe removed, with more sophisticated regexes)</li>\n</ul>\n\n<p>Environment IDs.txt<br>\n(note the 1005539, 1005540 <strong>not</strong> contained in Logfile.txt):</p>\n\n<pre><code>LogID: 1005534\nLogID: 1005535\nLogID: 1005536\nLogID: 1005537\nLogID: 1005538\nLogID: 1005539\nLogID: 1005540\n</code></pre>\n\n<p>Environment Logfile.txt<br>\n(note the 1005548 <strong>not</strong> contained in IDs.txt and the lines with identical ID):  </p>\n\n<pre><code>blabla LogID: 1005534\nbloblo LogID: 1005536\nblaablaa LogID: 1005534\nblublu LogID: 1005537\nblibli LogID: 1005548\nbluubluu LogID: 1005537\nbleble LogID: 1005538\n</code></pre>\n\n<p>Output, positive:  </p>\n\n<pre><code>LogID: 1005534\nLogID: 1005536\nLogID: 1005537\nLogID: 1005538\n</code></pre>\n\n<p>Output, negative a<br>\n(those which are in Logfile.txt but not in IDs.txt):  </p>\n\n<pre><code>LogID: 1005548\n</code></pre>\n\n<p>Output, negative b<br>\n(those which are in IDs.txt but not in Logfile.txt):</p>\n\n<pre><code>LogID: 1005535\nLogID: 1005539\nLogID: 1005540\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1497025242, "post_id": 44462243, "comment_id": 75921511, "body": "Respect, nice alternative way of going about this."}], "tags": [], "owner": {"reputation": 79, "user_id": 8132476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZVxv.gif?s=128&g=1", "display_name": "ky bof", "link": "https://stackoverflow.com/users/8132476/ky-bof"}, "is_accepted": false, "score": 1, "last_activity_date": 1497024228, "creation_date": 1497024228, "answer_id": 44462243, "question_id": 44447874, "link": "https://stackoverflow.com/questions/44447874/command-to-search-a-file-based-on-the-input-in-the-other-file/44462243#44462243", "title": "Command to search a file based on the input in the other file", "body": "<p>1: Get unique IDs fr file1. For each ID, search it in file2</p>\n\n<pre><code>sort -u file1 | while read ID; do\n  grep -q $ID file2 &amp;&amp; echo $ID: YES || echo $ID: no # costly operation &amp; repetitive\ndone\n</code></pre>\n\n<p>2: If you have lots of entries (particularly on file2). Uniquely, obtain all IDs from the two files and compare notes</p>\n\n<pre><code>sort -u file1 &gt; /tmp/f1\ngrep -i target.*logID file2 |sed 's/.*target://' |sort -u &gt; /tmp/f2 # one-pass\ndiff -y /tmp/f1 /tmp/f2 | grep -q \"&gt;\" # YES list\ndiff -y /tmp/f1 /tmp/f2 | grep \"&gt;\" # no list\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 6577318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/366e286b753b6f393f1abd32db89ea73?s=128&d=identicon&r=PG&f=1", "display_name": "sady", "link": "https://stackoverflow.com/users/6577318/sady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 44450771, "answer_count": 2, "score": -2, "last_activity_date": 1497024228, "creation_date": 1496971387, "last_edit_date": 1497019559, "question_id": 44447874, "link": "https://stackoverflow.com/questions/44447874/command-to-search-a-file-based-on-the-input-in-the-other-file", "title": "Command to search a file based on the input in the other file", "body": "<p>I am on Linux platform and I would need help with the command that will accomplish my task or any suggestion on how to accomplish this.</p>\n\n<p>I have 2 text files, the first file has a list of ID's (Log ID ) and the second file is a log file that has entries of various activities with Log ID.</p>\n\n<p>Basically, I would like to pick a log id from the first file and search if this log id is present in the second file. </p>\n\n<p>The first file has 15000 Log Id's and manually it wouldn't be possible to check each. </p>\n\n<p>Here is my coding attempt:<br>\n<code>grep -q \"LogID: 1005534\" logfile.txt &amp;&amp; echo \"yes\" || echo \"no\"</code>  </p>\n\n<p>But how to iterate the command with all the log-id's I have?  </p>\n\n<p>Here is the logID and actual log file</p>\n\n<p><a href=\"https://i.stack.imgur.com/k4jpi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k4jpi.png\" alt=\"enter image description here\"></a> <a href=\"https://i.stack.imgur.com/cH9Q2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cH9Q2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["image", "perl", "image-resizing", "imlib2"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496970821, "post_id": 44444768, "comment_id": 75892948, "body": "Would it help to use the <a href=\"https://metacpan.org/pod/Image::Magick\" rel=\"nofollow noreferrer\"><code>Image::Magick</code></a> Perl module if you&#39;re familiar with that library? It&#39;s much more flexible than <code>Imlib2</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1496957752, "post_id": 44444906, "comment_id": 75889517, "body": "thanks @zdim, really thanks for those priceless information."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496969413, "post_id": 44444906, "comment_id": 75892613, "body": "@zdim: All of this text should be part of your answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496982111, "post_id": 44444906, "comment_id": 75895560, "body": "@Borodin  Alright, thank you for advice.  I wasn&#39;t sure that it belongs in the answer proper, will incorporate it a little later (it&#39;s busy now).  Btw, would you have any idea what the -1 is for -- for that?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496982296, "post_id": 44444906, "comment_id": 75895601, "body": "That&#39;s fine. I don&#39;t what the down vote could be for; it would be rather mean to mark you down because of your comments."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1497031544, "post_id": 44444906, "comment_id": 75925084, "body": "@marmeladze  Thank you for that supportive comment.  Apparently it got removed (I guess for improper language).  I transferred these comments into the answer."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1497297193, "post_id": 44444906, "comment_id": 76008592, "body": "thanks -)) it&#39;s all up to you. if you want them here, let them stay here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1497479728, "post_id": 44444906, "comment_id": 76101989, "body": "Extensive comments with explanations, referred to in the above comments, were transferred into the answer and removed."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1497079474, "last_edit_date": 1497079474, "creation_date": 1496953364, "answer_id": 44444906, "question_id": 44444768, "link": "https://stackoverflow.com/questions/44444768/what-is-the-difference-between-cropping-resizing-and-scaling-an-image/44444906#44444906", "title": "What is the difference between cropping, resizing and scaling an image?", "body": "<p>The code you use isn't preserving the aspect-ratio.  From <a href=\"http://search.cpan.org/~lbrocard/Image-Imlib2-2.03/lib/Image/Imlib2.pm#create_scaled_image_%28x,_y%29\" rel=\"nofollow noreferrer\">Image::Imlib2::create_scaled_image</a></p>\n\n<blockquote>\n  <p>If x or y are 0, then retain the aspect ratio given in the other.</p>\n</blockquote>\n\n<p>So change the line</p>\n\n<pre><code>my $cropped_image = $image-&gt;create_scaled_image(50, 50);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my $scaled_image  = $image-&gt;create_scaled_image(50, 0);\n</code></pre>\n\n<p>and the new image will be 50 pixels wide, and its height computed so to keep the original aspect-ratio.</p>\n\n<p>Since this is not cropping I've changed the variable name as well.</p>\n\n<p>As for other questions, below is a basic discussion from comments. Please search for tutorials on image processing. Also, documentation of major libraries often have short and good explanations.</p>\n\n<hr>\n\n<p>This is aggregated from comments deemed helpful. Also see <strong>Borodin</strong>'s short and clear answer.</p>\n\n<p>Imagine that you want to draw a picture (of some nice photograph) yourself in the following way. You draw a grid of, say, 120 (horizontally) by 60 (vertically) boxes. So 120 x 60, 720 boxes. These are your \"pixels,\" and each you may fill with only one color. If the photo you are re-drawing is \"mostly\" blue at some spot, you color that pixel blue. Etc. It is not easy to end up with a faithful redrawing -- the denser the pixels the beter.</p>\n\n<p>Now imagine that you want to draw another copy of this, just smaller. If you make it 20x20 that will be completely different, since it's a square. The best chance of getting it to \"look the same\" is to pick 2-to-1 ratio (like 120x60), so say 40x20. That's \"aspect-ratio.\" But there is still a problem, since now you have to decide all over again what color to pick for each box, so to represent what is \"mostly\" on the photo at that spot. There are algorithms for that (\"sampling,\" see your second link). That's involved with \"resizing.\" The \"quality\" of the obtained drawing clearly must be much worse.</p>\n\n<p>So \"resizing\" isn't all that simple. But, for us users, we mostly need to roughly know what is involved, and to find out how to use these features in a library. So read documentation. Some uses are very simple, while sometimes you'll have to decide which \"algorithm\" to let it use, or some such. Again, what I do is <em>read manuals carefully</em>.</p>\n\n<p>The basic version of \"cropping\" is simple -- you just cut off a part of the picture.  Say, remove the first and last 20 columns and the bottom and top 10 rows, and from the initial 120x60 you get a picture of 80x40. This is normally done when outer parts of an image have just white areas (or, worse, black!). So you want to \"cut out\" the picture itself from the whole image. Many graphics tools can do that on their own, by analyzing the image and figuring out those areas. Or, we select and hit a button.</p>\n"}, {"comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1496953991, "post_id": 44444914, "comment_id": 75887693, "body": "i really have no idea what is proper, what is not. but someone from design team showed me what resized image should look like - and they were really different -))"}, {"owner": {"reputation": 17623, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1496954318, "post_id": 44444914, "comment_id": 75887871, "body": "the most important thing in scaling is that you maintain the aspect ratio as zdim already pointed out. if you scale width and height differently you distort the image making it look weird. making it smaller while maintaining the aspect ratio will of course also make the image look weird/bad once you have too few pixels. here also display resolution and size become important. 50x50 pixels on a stamp might look ok, on a tv they will look terrible."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1496955285, "post_id": 44444914, "comment_id": 75888345, "body": "what should be the calculation order, to achieve best looking results?  get width, get height, then width minus half of height, and height minus half of width and start cropping image from that coordinates?"}, {"owner": {"reputation": 17623, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1497023958, "post_id": 44444914, "comment_id": 75920783, "body": "@marmeladze no. where do these weird formulas come from? I don&#39;t even know what you want, so I can&#39;t tell you what how you can achieve &quot;best looking results&quot;...  do you want to crop or scale? that&#39;s two different things."}], "tags": [], "owner": {"reputation": 17623, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "is_accepted": false, "score": 0, "last_activity_date": 1496969802, "last_edit_date": 1496969802, "creation_date": 1496953385, "answer_id": 44444914, "question_id": 44444768, "link": "https://stackoverflow.com/questions/44444768/what-is-the-difference-between-cropping-resizing-and-scaling-an-image/44444914#44444914", "title": "What is the difference between cropping, resizing and scaling an image?", "body": "<p>Resizing and scaling is the same; you just change the size of the image. You can make it smaller or bigger.</p>\n\n<p>Depending on the interface, you have to give either the new dimensions or a scaling factor for the operation. A factor less than or greater than 1.0 would make the image smaller or bigger. Smaller images are created by <em>subsampling</em> and bigger images by <em>interpolation</em>.</p>\n\n<p>Cropping is very simple. You select a rectangular region of an image and that's your new image. It's like using scissors.</p>\n\n<p>In your code example the image is named <code>cropped_image</code> although it is created through scaling, or resizing.</p>\n\n<p>The output image is an image of size 50 x 50 pixels. That's what you did here:</p>\n\n<pre><code>  my $cropped_image = $image-&gt;create_scaled_image(50, 50);\n</code></pre>\n\n<p>So no matter how your image looks before, you stuff it into 50 x 50 pixels. In this case not only reducing the resolution but also changing the aspect ratio.</p>\n\n<p>The image is not displayed improperly, it's displayed perfectly fine.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1496981832, "last_edit_date": 1496981832, "creation_date": 1496972052, "answer_id": 44447952, "question_id": 44444768, "link": "https://stackoverflow.com/questions/44444768/what-is-the-difference-between-cropping-resizing-and-scaling-an-image/44447952#44447952", "title": "What is the difference between cropping, resizing and scaling an image?", "body": "<p>I'm still not certain that you understand the difference between these terms</p>\n\n<ul>\n<li><p>Your original image is 752 \u00d7 500 pixels</p></li>\n<li><p><em>Resizing</em> is a vague term that just means making a picture a different size somehow</p></li>\n<li><p><em>Scaling</em> is to change the size of an image proportionally. Scaling your picture down by a factor of ten would result in an image 75 \u00d7 50 (it should be 75.2 but we can't have 0.2 of a pixel). Scaling it up would make it bigger</p>\n\n<p>You have <em>scaled</em> your picture to 50 \u00d7 50 pixels, which is a vertical scale of 10 (500 \u00f7 5) but a horizontal scale of 15 (752 \u00f7 50), so it appears squashed horizontally (or stretched vertically)</p></li>\n<li><p><em>Cropping</em> is to reduce an image by removing parts of it. To crop your image to 50 \u00d7 50 you would choose a 50 \u00d7 50 rectangle out of the whole picture and remove the rest. It would be a piece about the size of your monkey's nose, but you can pick any region you wish</p></li>\n</ul>\n\n<p><strong>zdim</strong> has shown you how you can call</p>\n\n<pre><code>$image-&gt;create_scaled_image(0, 50)\n</code></pre>\n\n<p>so that the height, or y-dimension, is reduced to 50, while the width, or x-dimension, is scaled <em>by the same factor</em>. That will result in a thumbnail 75 \u00d7 50 as above</p>\n\n<p>I hope that helps</p>\n\n<p>As I said in my comment, there is an\n<a href=\"https://metacpan.org/pod/Image::Magick\" rel=\"nofollow noreferrer\"><code>Image::Magick</code></a>\nPerl module if you would prefer to be back on familiar ground</p>\n"}], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 44444906, "answer_count": 3, "score": 2, "last_activity_date": 1497079474, "creation_date": 1496952764, "last_edit_date": 1496972993, "question_id": 44444768, "link": "https://stackoverflow.com/questions/44444768/what-is-the-difference-between-cropping-resizing-and-scaling-an-image", "title": "What is the difference between cropping, resizing and scaling an image?", "body": "<p>I am using Perl's\n<a href=\"https://metacpan.org/pod/Image::Imlib2\" rel=\"nofollow noreferrer\"><code>Image::Imlib2</code></a>\npackage to generate thumbnails from larger images. </p>\n\n<p>I've done such tasks before with several ImageMagick interfaces (PHP, Ruby, Python) and it was relatively easy. I have no prior experience with <code>Imlib2</code> and it is a long time since I wrote something in Perl, so I am sorry if this seems naive!</p>\n\n<p>This is what I've tried so far. It is simple, and assumes that scaling an image will keep the aspect ratio, and the generated thumbnail will be an exact miniature copy of the original image. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Image::Imlib2;\n\nmy $dir = 'imgs/*';\n\nmy @files = glob ($dir);\n\nforeach my $img ( @files ) {\n    my $image = Image::Imlib2-&gt;load($img);\n    my $cropped_image = $image-&gt;create_scaled_image(50, 50);\n    $cropped_image-&gt;save($img);\n}\n</code></pre>\n\n<p>Original image</p>\n\n<p><img src=\"https://i.stack.imgur.com/uexfH.jpg\" alt=\"Original image\"></p>\n\n<p>Generated image</p>\n\n<p><img src=\"https://i.stack.imgur.com/BbN20.jpg\" alt=\"Generated image\"></p>\n\n<p>My first look at the image tells me that something is wrong. It may be my ignorance on cropping, resizing and scaling, but the generated image is displaying wrongly on small screens.  </p>\n\n<p>I've read <a href=\"https://www.shutterstock.com/support/article/What-s-the-difference-between-cropping-and-resizing\" rel=\"nofollow noreferrer\"><em>What's the difference between cropping and resizing?</em></a>, and honestly didn't understand anything. Also this one <a href=\"https://en.wikipedia.org/wiki/Image_scaling\" rel=\"nofollow noreferrer\"><em>Image scaling</em></a>. </p>\n\n<p>Could someone explain the differences between those three ideas, and if possible give examples (preferably with Perl) to achieve better results? Or at least describe what I should consider when I want to create thumbnails?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1496948777, "post_id": 44443612, "comment_id": 75885016, "body": "&quot;The code works.&quot; &quot;Everything works.&quot; Impossible! It doesn&#39;t even compile!"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1496948851, "post_id": 44443612, "comment_id": 75885045, "body": "Hint: <code>readdir</code> does not return a full path"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1496950055, "post_id": 44443612, "comment_id": 75885676, "body": "Is it because <code>copy</code> was never called, or because it returned an error? If it&#39;s the latter, what error did it return?"}, {"owner": {"reputation": 165, "user_id": 5988165, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/05aa042ad0f1c6d6de7af447611da1c9?s=128&d=identicon&r=PG&f=1", "display_name": "WitchKing17", "link": "https://stackoverflow.com/users/5988165/witchking17"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1496950076, "post_id": 44443612, "comment_id": 75885689, "body": "@MattJacob fixed, haha. Good catch."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1496950111, "post_id": 44443612, "comment_id": 75885714, "body": "@RustyX, That won&#39;t affect the above program except for <code>closedir</code>."}, {"owner": {"reputation": 165, "user_id": 5988165, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/05aa042ad0f1c6d6de7af447611da1c9?s=128&d=identicon&r=PG&f=1", "display_name": "WitchKing17", "link": "https://stackoverflow.com/users/5988165/witchking17"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1496950346, "post_id": 44443612, "comment_id": 75885849, "body": "@MattJacob Thanks! That was a good hint. I knew it was something small that I was missing."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1496951171, "post_id": 44443612, "comment_id": 75886265, "body": "So, so you use <code>system &#39;mkdir ...&#39;</code> <i>and</i> <code>File::Copy</code> ... That&#39;s rather incongruous ... In fact, why not just replace the whole script with a simple <code>system xcopy =&gt; ...</code>? This would be a four line batch file. Or just use <code>Path::Tiny</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496952240, "post_id": 44443612, "comment_id": 75886811, "body": "Using <code>jar cMf</code> to create a zip file? Really? How do you create your jar files?!"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1496951786, "post_id": 44444057, "comment_id": 75886568, "body": "<i>&quot;<code>system(&#39;mkdir files&#39;);</code> should be: <code>system(&quot;mkdir $dest_dir&quot;);</code>&quot;</i> No it shouldn&#39;t. It should be <code>mkdir $dest_dir;</code>. It&#39;s ridiculous to fork and execute a bash process just to do something that is part of Perl in the first place."}], "tags": [], "owner": {"reputation": 76, "user_id": 4731156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e41c49ab922c0bdd66bec2d70f0df87?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Packard", "link": "https://stackoverflow.com/users/4731156/bill-packard"}, "is_accepted": true, "score": 3, "last_activity_date": 1496950048, "creation_date": 1496950048, "answer_id": 44444057, "question_id": 44443612, "link": "https://stackoverflow.com/questions/44443612/perl-filecopy-is-not-actually-copying-the-file/44444057#44444057", "title": "Perl File::Copy is not actually copying the file", "body": "<p>I think there is a typo in your script: \n    <code>system('mkdir files');</code>\nshould be:\n    <code>system(\"mkdir $dest_dir\");</code></p>\n\n<p>but, the real issue is that you are not using the full path of the source file. Change your copy to:\n    <code>copy(\"$source_dir/$file\", $dest_dir);</code></p>\n\n<p>and see if that helps.\nYou might also want to look at: File::Path and Archive::Zip, they would eliminate the system calls.</p>\n"}], "owner": {"reputation": 165, "user_id": 5988165, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/05aa042ad0f1c6d6de7af447611da1c9?s=128&d=identicon&r=PG&f=1", "display_name": "WitchKing17", "link": "https://stackoverflow.com/users/5988165/witchking17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 44444057, "answer_count": 1, "score": -1, "last_activity_date": 1496950048, "creation_date": 1496948326, "last_edit_date": 1496950025, "question_id": 44443612, "link": "https://stackoverflow.com/questions/44443612/perl-filecopy-is-not-actually-copying-the-file", "title": "Perl File::Copy is not actually copying the file", "body": "<p><strong>Quick synopsis</strong>: Let's say there are multiple of the same file type in one directory (in this example, 10 .txt files). I am trying to use Perl's copy function to copy 5 of them into a new directory, then zip up that directory. </p>\n\n<p>The code works...except the folder that is supposed to have the .txt files copied, doesn't actually have anything in it, and I don't know why. Here is my complete code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse File::Copy;\n\nmy $source_dir = \"C:\\\\Users\\\\user\\\\Documents\\\\test\";\nmy $dest_dir = \"C:\\\\Users\\\\user\\\\Desktop\\\\files\";\nmy $count = 0;\n\nopendir(DIR, $source_dir) or die $!;\nsystem('mkdir files');\n\nwhile (my $file = readdir(DIR)) {\n    print \"$file\\n\";\n    if ($count eq 5) {\n        last;\n    }\n\n    if ($file =~ /\\.txt/) {\n        copy(\"$file\", \"$dest_dir/$file\");\n        $count++;\n    }\n}\n\nclosedir DIR;\n\nsystem('\"C:\\Program Files\\Java\\jdk1.8.0_66\\bin\\jar.exe\" -cMf files.zip files');\n\nsystem('del /S /F /Q files');\nsystem('rmdir files');\n</code></pre>\n\n<p>Everything works...the directory <code>files</code> is created, then zipped up into files.zip...when I open the zip file, the <code>files</code> directory is empty, so it's as if the copy statement didn't copy anything over. </p>\n\n<p>In the <code>$source_dir</code> are 10 <code>.txt</code> files, like this (for testing purposes): </p>\n\n<ul>\n<li>test1.txt</li>\n<li>test2.txt</li>\n<li>test3.txt</li>\n<li>test4.txt</li>\n<li>test5.txt</li>\n<li>test6.txt</li>\n<li>test7.txt</li>\n<li>test8.txt</li>\n<li>test9.txt</li>\n<li>test10.txt</li>\n</ul>\n\n<p>The files don't actually get copied over...<strong><em>NOTE:</em></strong> the <code>print \"$file\\n\"</code> was added for testing, and it indeed is printing out <code>test1.txt</code>, <code>test2.txt</code>, etc. up to <code>test6.txt</code> so I know that it is <em>finding</em> the files, just not <em>copying</em> them over. </p>\n\n<p>Any thoughts as to where I'm going wrong?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1496941767, "post_id": 44441690, "comment_id": 75881169, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44420759/multi-line-regex-expression\" title=\"multi line regex expression\">stackoverflow.com/questions/44420759/&hellip;</a>  <a href=\"https://stackoverflow.com/questions/44420164/escape-csv-file-with-sed-or-other-command-line-tool\" title=\"escape csv file with sed or other command line tool\">stackoverflow.com/questions/44420164/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1496941772, "post_id": 44441690, "comment_id": 75881173, "body": "As someone with your experience should know, you will need to show the code that&#39;s causing you problems before we can help you."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1496942503, "creation_date": 1496942503, "answer_id": 44442055, "question_id": 44441690, "link": "https://stackoverflow.com/questions/44441690/perl-escaple-new-line-character-using-regex-in-a-file-from-the-command-line/44442055#44442055", "title": "Perl - escaple new line character using regex in a file from the command line", "body": "<p>Typically you'd do it like <code>s =~ /(?:(?!\\A)\\G[^\"\\r\\n]*\\K|\\|\"[^\"\\r\\n]*\\K)(?&lt;!\\/)(\\R)/\\/$1/g</code>  </p>\n\n<p>Since you've shown no effort, you get no explanation.</p>\n"}], "owner": {"reputation": 4713, "user_id": 1187968, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/55c10b3b35dba52324314052e9cf84dc?s=128&d=identicon&r=PG", "display_name": "user1187968", "link": "https://stackoverflow.com/users/1187968/user1187968"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1496942503, "creation_date": 1496941276, "question_id": 44441690, "link": "https://stackoverflow.com/questions/44441690/perl-escaple-new-line-character-using-regex-in-a-file-from-the-command-line", "title": "Perl - escaple new line character using regex in a file from the command line", "body": "<p>I have the following CSV file, and need the escape the new line inside the double quote with the character \"/\"</p>\n\n<pre><code>101|abc|this is desc|2017\n102|xyz|\"thie is a long desc\ndes for xyz continue here.\"|2017\n103|abc|this is is another long desc\nand it stop here\"|2017\n</code></pre>\n\n<p>and the output should looks like below file. How can I use Perl from the command to perform this?  </p>\n\n<pre><code>101|abc|this is desc|2017\n102|xyz|\"thie is a long desc/\ndes for xyz continue here.\"|2017\n103|bbb|\"this is is another long desc/\nand it stop here\"|2017\n</code></pre>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496934143, "post_id": 44438817, "comment_id": 75876121, "body": "If you&#39;re not sure, you should just run it. See what happens. It looks correct, though you don&#39;t need to use the <code>[]</code> because if you only have one thing in a character group you don&#39;t need a group."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496943029, "post_id": 44438817, "comment_id": 75881868, "body": "Okay so the problem here is that you don&#39;t know PHP, and the solution is to learn it. We can&#39;t help you there, but I&#39;m sure you can google for tutorials on line."}], "answers": [{"comments": [{"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1496934289, "post_id": 44439338, "comment_id": 75876239, "body": "What does the W do in this order? I understand changing dashes to spaces, spaces to blanks, and then what does the W do?"}, {"owner": {"reputation": 832, "user_id": 4433067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pk9iI.jpg?s=128&g=1", "display_name": "Jenne", "link": "https://stackoverflow.com/users/4433067/jenne"}, "reply_to_user": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1496935258, "post_id": 44439338, "comment_id": 75876930, "body": "Added the steps and more text."}], "tags": [], "owner": {"reputation": 832, "user_id": 4433067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pk9iI.jpg?s=128&g=1", "display_name": "Jenne", "link": "https://stackoverflow.com/users/4433067/jenne"}, "is_accepted": true, "score": -1, "last_activity_date": 1496999768, "last_edit_date": 1496999768, "creation_date": 1496934198, "answer_id": 44439338, "question_id": 44438817, "link": "https://stackoverflow.com/questions/44438817/convert-perl-regex-to-php/44439338#44439338", "title": "Convert Perl regex to PHP", "body": "<p>Always try before asking, you could figure this out if you got this far.</p>\n\n<p>Outside of that you don't need the []'s. The regex itself doesn't change when moving to php (or at least for the common things, when it looks like it has too <a href=\"http://php.net/manual/en/reference.pcre.pattern.differences.php\" rel=\"nofollow noreferrer\">php has a page</a> that lists all differences). However from what I can see it should work correct either way. Character sets are only useful if they have more then one character. In text the regexes do this:</p>\n\n<ol>\n<li>Replaces dashes with spaces.</li>\n<li>Replaces any continues length of spaces with a single underscore.</li>\n<li>Replaces any non word characters with nothing. These include <code>a-z</code>, <code>A-Z</code>, <code>0-9</code>, <code>_</code> and some other special/unicode chars like eg <code>\u00eb\u00e8</code> etc. Capital \\W negates where as \\w matches word characters.</li>\n</ol>\n\n<p>Secondly don't change the order its very confusing (and if you actually do it in the code it won't come back as expected).</p>\n\n<p>Thirdly PHP allows arrays as arguments for <code>preg_replace</code>.</p>\n\n<p>All together one could do something like:</p>\n\n<pre><code>$string = 'Hello im a test-able string!';\necho preg_replace(\n    [\n        '/-/',\n        '/\\s+/',\n        '/\\W/',\n    ],\n    [\n        ' ',\n        '_',\n        '',\n    ],\n    $string\n);\n</code></pre>\n\n<p>Although the readability is still somewhat dubious. And one might just go for the three preg_replace functions instead, especially once they get lengthy.</p>\n\n<p>Finally if you ever need a playground for regex testing give <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> a try, its awesome.</p>\n\n<hr>\n\n<p>Also you made 3 edits during me typing this which I'm going to ignore for now.</p>\n"}, {"tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1496936795, "creation_date": 1496936795, "answer_id": 44440235, "question_id": 44438817, "link": "https://stackoverflow.com/questions/44438817/convert-perl-regex-to-php/44440235#44440235", "title": "Convert Perl regex to PHP", "body": "<p>The Perl code</p>\n\n<pre><code>$url=~s/\\W//g;\n</code></pre>\n\n<p>replaces all characters in <code>$url</code> matching <code>\\W</code> (non-<a href=\"https://perldoc.perl.org/perlrecharclass.html#Word-characters\" rel=\"nofollow noreferrer\">word</a> character) with emptiness and assigns the result back to <code>$url</code> variable.</p>\n\n<p>Equivalent PHP code:</p>\n\n<pre><code>$url = preg_replace('/\\W/', '', $url);\n</code></pre>\n\n<p>The number of maximum possible replacements can be set via the 4<sup>th</sup> argument (<code>$limit</code>). By default, <code>$limit</code> is equal to <code>-1</code> (no limit). So the replacement is performed globally (the Perl code uses the <code>g</code> modifier to achieve that).</p>\n\n<p>Note, the definition of \"word\" depends on the current locale settings (see <a href=\"http://php.net/manual/en/regexp.reference.escape.php\" rel=\"nofollow noreferrer\">Escape Sequences</a>):</p>\n\n<blockquote>\n  <p>A \"word\" character is any letter or digit or the underscore character,\n  that is, any character which can be part of a Perl \"word\". The\n  definition of letters and digits is controlled by PCRE's character\n  tables, and may vary if locale-specific matching is taking place. For\n  example, in the \"fr\" (French) locale, some character codes greater\n  than 128 are used for accented letters, and these are matched by \\w.</p>\n</blockquote>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 44439338, "answer_count": 2, "score": -2, "last_activity_date": 1496999768, "creation_date": 1496932972, "last_edit_date": 1496942795, "question_id": 44438817, "link": "https://stackoverflow.com/questions/44438817/convert-perl-regex-to-php", "title": "Convert Perl regex to PHP", "body": "<p>I have the following Perl code:</p>\n\n<pre><code>$url=~s/\\W//g;\n</code></pre>\n\n<p>I'd like to translate this to PHP <code>preg_replace</code>.</p>\n\n<pre><code>preg_replace(\"/[\\W]/\", \"\", $url);\n</code></pre>\n\n<p>I'm not sure this is correct. I don't really know what it does.</p>\n\n<p>It comes from this function, which formats a URL to a canonical format:</p>\n\n<pre><code>sub formatcanonical {\n    my $url = lc(shift);\n\n    $url =~ s/-/ /g;\n    $url =~ s/\\s+/_/g;\n    $url =~ s/\\W//g;\n\n    return $url;\n}\n</code></pre>\n"}, {"tags": ["perl", "ubuntu", "cassandra"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1496930667, "post_id": 44437887, "comment_id": 75873299, "body": "You never bind values to the placeholder."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1496930694, "post_id": 44437887, "comment_id": 75873316, "body": "What means <code>doesn&#39;t work</code>. any error Messages?"}, {"owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1496930958, "post_id": 44437887, "comment_id": 75873542, "body": "it said &quot; Can&#39;t locate DBD/Cassandra.pm in @INC (you may need to install the DBD::Cassandra module) &quot; ,"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1496930985, "post_id": 44437887, "comment_id": 75873567, "body": "Do you have installed this package?"}, {"owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1496931095, "post_id": 44437887, "comment_id": 75873662, "body": "no, but I have doubt more about  this code , if it can really do the task"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "edited": false, "score": 0, "creation_date": 1496931513, "post_id": 44438120, "comment_id": 75874002, "body": "nothing happen when i lunch this cmd line, and the error stays the same"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "edited": false, "score": 0, "creation_date": 1496931597, "post_id": 44438120, "comment_id": 75874071, "body": "@KhaledAssandi You are working on Windows, mac or Linux?"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "edited": false, "score": 0, "creation_date": 1496931639, "post_id": 44438120, "comment_id": 75874106, "body": "@KhaledAssandi I can not belive that <i>nothing</i> happens if you enter the command there must be some output"}, {"owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "edited": false, "score": 0, "creation_date": 1496931863, "post_id": 44438120, "comment_id": 75874304, "body": "im working in Linux (ubuntu) , yes nothing i don&#39;t know why , if the module is already installed, so why it give me the error message"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1496943759, "post_id": 44438120, "comment_id": 75882285, "body": "<code>perl -MCPAN -e install &quot;DBD::Cassandra&quot;</code> is generally written <code>cpan DBD::Cassandra</code>"}, {"owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "edited": false, "score": 0, "creation_date": 1540382772, "post_id": 44438120, "comment_id": 92843314, "body": "Thanks for you all"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 1, "last_activity_date": 1496931081, "creation_date": 1496931081, "answer_id": 44438120, "question_id": 44437887, "link": "https://stackoverflow.com/questions/44437887/connect-and-insert-into-cassandra-using-perl/44438120#44438120", "title": "connect and insert into Cassandra using perl", "body": "<p>You have to install the reqired perl module <code>DBD::Cassandra</code></p>\n\n<p>You can do this with <code>perl -MCPAN -e install \"DBD::Cassandra\"</code></p>\n"}], "owner": {"reputation": 87, "user_id": 8097996, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80d6ea1bd4b473c14061c57749a1f218?s=128&d=identicon&r=PG&f=1", "display_name": "Ussopokingo", "link": "https://stackoverflow.com/users/8097996/ussopokingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "closed_date": 1496934695, "accepted_answer_id": 44438120, "answer_count": 1, "score": -2, "last_activity_date": 1496943684, "creation_date": 1496930500, "last_edit_date": 1496943684, "question_id": 44437887, "link": "https://stackoverflow.com/questions/44437887/connect-and-insert-into-cassandra-using-perl", "closed_reason": "Duplicate", "title": "connect and insert into Cassandra using perl", "body": "<p>I want to know how to connect to Cassandra using Perl, and insert, select, update etc.</p>\n\n<p>I tried this</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\n    \"dbi:Cassandra:host=localhost;keyspace=nomkeyspace\",\n    \"root\",\n    '',\n    { RaiseError =&gt; 1 }\n);\n\nmy $rows = $dbh-&gt;selectall_arratref( \"SELECT id, nom\" );\n\nfor my $row ( @$rows ) {\n    print( \"ok\" );\n}\n\n$dbh-&gt;do( \"insert into resultat (ip, nom) values (?,?)\" );\n\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>but it's give me this error</p>\n\n<blockquote>\n  <p>Can't locate DBD/Cassandra.pm in @INC (you may need to install the DBD::Cassandra module)</p>\n</blockquote>\n\n<p>thanks  </p>\n"}, {"tags": ["perl", "shell", "unix", "awk"], "comments": [{"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 1, "creation_date": 1496923675, "post_id": 44434975, "comment_id": 75867773, "body": "Why did you address your <i>test.file</i> two times, on command line? I don&#39;t understand which rule keep <i>dexter</i> out!? You wrote: <i>value in column 2 is greater than value in column 3</i>, but I don&#39;t see, in your sample, one line matching this."}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "reply_to_user": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 1, "creation_date": 1496925105, "post_id": 44434975, "comment_id": 75868791, "body": "I understand why you put the file twice, but @F.Hauri&#39;s other questions are quite important: <i>which rule keep dexter out?</i>   and &quot;<i>You wrote: value in column 2 is greater than value in column 3, but I don&#39;t see, in your sample, one line matching this.</i>&quot;"}, {"owner": {"reputation": 119, "user_id": 1784480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3419ea4468650ab513945a0b65108de3?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/1784480/amit"}, "edited": false, "score": 0, "creation_date": 1496925281, "post_id": 44434975, "comment_id": 75868934, "body": "To print characters in column 1 that are  repeated at least twice, using array, I passed the file twice.  I agree there are more ways. Sorry for not being clear in original question. I need to compare values in column 2 and 3, across rows,  only if they are associated with same string in column 1."}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 1, "creation_date": 1496925282, "post_id": 44434975, "comment_id": 75868937, "body": "<b>NOT clear enough</b>"}, {"owner": {"reputation": 119, "user_id": 1784480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3419ea4468650ab513945a0b65108de3?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/1784480/amit"}, "edited": false, "score": 0, "creation_date": 1496925487, "post_id": 44434975, "comment_id": 75869085, "body": "Yes, I meant associated with same string. Sorry my original question was not clear."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496925550, "post_id": 44434975, "comment_id": 75869134, "body": "<i>&quot;its not working&quot;</i> That is a terrible statement of your problem. Please explain properly what is wrong."}, {"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1496926104, "post_id": 44434975, "comment_id": 75869570, "body": "But all of there lines have <code>$2&lt;$3</code>? And even if you mean <code>$2&lt;$3</code>, why is <code>dexter</code> absent in otput?"}, {"owner": {"reputation": 119, "user_id": 1784480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3419ea4468650ab513945a0b65108de3?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/1784480/amit"}, "edited": false, "score": 0, "creation_date": 1496926409, "post_id": 44434975, "comment_id": 75869812, "body": "Hi Ed, sorry for not being clear in original question. I am comparing between col2 and col3 across rows associated with same string in column 1. Three rows have clarice in col1, the 2nd col in row2 has 510, which is bigger than 500 in col3 of rows 1 and 3."}], "answers": [{"comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1496929572, "post_id": 44436990, "comment_id": 75872369, "body": "<code>__&#47;__</code> for decoding the OP&#39;s requirements..."}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 0, "creation_date": 1496935020, "post_id": 44436990, "comment_id": 75876758, "body": "I&#39;ve added some comments to the code. If you need more info to understand it well let me know."}, {"owner": {"reputation": 119, "user_id": 1784480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3419ea4468650ab513945a0b65108de3?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/1784480/amit"}, "edited": false, "score": 0, "creation_date": 1496935338, "post_id": 44436990, "comment_id": 75876997, "body": "Thank you so much for a perfectly working code and for understanding my question . Could not think of assigning minimum and maximum value. To understand the code better, could you explain using &#39;if&#39; and &#39;else&#39;. Could we not just define the minimum and maximum for col2 and col3 while passing first time, with out if and else statements."}, {"owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "edited": false, "score": 0, "creation_date": 1496936371, "post_id": 44436990, "comment_id": 75877825, "body": "Good question.  You say <i>... just define the minimum and maximum for col2 and col3 while passing first time</i> and that&#39;s the point.  We have to know whether it&#39;s the first time <i>for each value in column_1</i>. The way we know it&#39;s the first time is if <code>a[$1]</code> has it&#39;s initial value of <code>0</code>.  In that case (the else block) we just assign the values. If we have previously seen the value (the if block) we only update for higher or lower values as needed."}], "tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": true, "score": 1, "last_activity_date": 1496937235, "last_edit_date": 1496937235, "creation_date": 1496928215, "answer_id": 44436990, "question_id": 44434975, "link": "https://stackoverflow.com/questions/44434975/comparing-values-associates-with-same-string/44436990#44436990", "title": "comparing values associates with same string", "body": "<p>As you did in your attempt, we make two passes over the file. In the first, we capture for each person the number of occurrences along with their max value for column_2 and min value for column_3. For the second pass we simply test the given condition for printing.</p>\n\n<pre><code>NR == FNR {\n    if (a[$1]) {\n        # we've seen this value before in column_1\n        # update the min and max values if necessary\n        if ($2 &gt; col2max[$1]) col2max[$1] = $2\n        if ($3 &lt; col3min[$1]) col3min[$1] = $3\n    }\n    else {\n        # first time we've seen this value in column_1\n        # initial the min and max to the current values\n        col2max[$1] = $2\n        col3min[$1] = $3\n    }\n    ++a[$1]\n    next\n}\na[$1] &gt; 1 &amp;&amp; col2max[$1] &gt; col3min[$1]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ awk -f a.awk file file\njohn    0   100\njohn    120 200\nclaris  300 500\nclaris  510 700\nclaris  300 500\nsam 200 300\nsam 310 500\nbruce   200 500\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 1784480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3419ea4468650ab513945a0b65108de3?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/1784480/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1496940518, "accepted_answer_id": 44436990, "answer_count": 1, "score": -4, "last_activity_date": 1497002973, "creation_date": 1496922563, "last_edit_date": 1497002973, "question_id": 44434975, "link": "https://stackoverflow.com/questions/44434975/comparing-values-associates-with-same-string", "closed_reason": "Needs details or clarity", "title": "comparing values associates with same string", "body": "<p>I am trying to compare values in column 2 with values in column 3, across the rows. The comparison is not between values in column 2 and 3 in the same row. \nThe conditions for comparison are:</p>\n\n<p>(1) Value in col2 in one row is to be compared with value in col 3 in another row, when these rows have same string in column 1.</p>\n\n<p>(2) Comparison only when the string in column 1 is repeated at least twice.</p>\n\n<p>(3) Value in column 2 is greater than value in column 3 in a different row, when both rows have same string in column 1. </p>\n\n<p>An example input file is:</p>\n\n<pre>\njohn    0   100\njohn    120 200\nsmith   1   400\nclaris  300 500\nclaris  510 700\nclaris  300 500\ndexter  10  400\ndexter  100 300\nsam 200 300\nsam 310 500\ntom 100 300\nbruce   200 500\nbruce   520 900\n</pre>\n\n<p>Desired output </p>\n\n<pre>\njohn    0   100\njohn    120 200\nclaris  300 500\nclaris  510 700\nclaris  300 500\nsam 200 300\nsam 310 500\nbruce   200 500\nbruce   520 900\n</pre>\n\n<p>Rows with \u2018dexter\u2019  in col1 are not printed. \u2018dexter\u2019  is present in two rows but values in col 2 are smaller than values in col3 in other rows, i.e. 10 is less than  300 and 100 is less than 400. While rows with \u2018bruce\u2019 are printed because; because 2nd row with bruce has 520 in col 2 which is bigger than 500 in col3 in other row.  </p>\n\n<p>I tried it with awk, an example is below. Looks like I can not figure out comparing col2 with col3 in another rows, which have same string in col1 </p>\n\n<pre><code>awk -F \"\\t\" 'NR==FNR{a[$1]++; b[$1]=$2; c[$1]=$3;next}   {for (i in b) if (a[$1] &gt;2 &amp;&amp; b[i]&gt;c[i] ) print}' test.file test.file \n</code></pre>\n\n<p>I also tried to it in steps, first by printing only repeated lines and then comparing the associated values.\nI am not able to figure out how to compare the values associated with the same string. </p>\n"}, {"tags": ["perl", "getopt"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 5, "creation_date": 1496923233, "post_id": 44434127, "comment_id": 75867423, "body": "Conceptually, your code is a fragile mess with no foundation: There <i>is</i> a single set of command line arguments passed to your program. It does not make sense to keep processing <code>@ARGV</code> over and over in different parts. Your modules should not be doing their <code>@ARGV</code> processing. That said,  you <i>could</i> make a copy of <code>@ARGV</code> ... But I would implore you to fix your design instead."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1496924684, "post_id": 44434127, "comment_id": 75868480, "body": "I agree with Sinan. You should put the command line argument handling into your program, and map the arguments so each module can get what it wants. Alternatively you can give each module a functionality that lets them <i>define</i> an interface for the command line, and then you can have your program use that to compile a full list of arguments and parse them."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1496929052, "creation_date": 1496929052, "answer_id": 44437285, "question_id": 44434127, "link": "https://stackoverflow.com/questions/44434127/is-it-possible-to-use-perls-getoptstd-in-2-packages/44437285#44437285", "title": "Is it possible to use Perl&#39;s Getopt::Std in 2 packages?", "body": "<p><code>Getopt::Std</code> operates on and \"consumes\" the global <code>@ARGV</code> array. To run <code>getopt</code> or <code>getopts</code> multiple times, you could use <code>local</code> to make a temporary copy of <code>@ARGV</code>.</p>\n\n<pre><code>sub GetPackage1Option {\n    local @ARGV = @ARGV;\n    getopt('b');\n    our ($opt_b);    \n    my $argb = $opt_b || '';    \n    return $argb;\n}        # end of scope, original @ARGV restored\n</code></pre>\n\n<p>Though like Sinan and simbabque say, this is an unorthodox design that you should probably reconsider.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1496938542, "creation_date": 1496938542, "answer_id": 44440836, "question_id": 44434127, "link": "https://stackoverflow.com/questions/44434127/is-it-possible-to-use-perls-getoptstd-in-2-packages/44440836#44440836", "title": "Is it possible to use Perl&#39;s Getopt::Std in 2 packages?", "body": "<p>The easiest way out of the conundrum is for command line argument parsing to happen at the entry point of your program where the values of the arguments can be saved in a hash, where you can provide default values for those not specified on the command line etc. Then, you can decide how to communicate the values each module is interested in (e.g. package variables or constructor arguments).</p>\n\n<p>I would strongly recommend against this kind of action at a distance, but here's how one might go about automating the setting of values of package variables in different modules in response to values given on the command line. Each package is responsible for declaring the command line switches in which it is interested.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\npackage X;\n\nour @PACKAGE_OPTS = qw( v x: );\n\nour ($OPT_V, $OPT_X);\n\nsub func {\n    print \"$OPT_V\\t$OPT_X\\n\";\n}\n\npackage Y;\n\nour @PACKAGE_OPTS = qw( t y: z);\n\nour ($OPT_T, $OPT_Y, $OPT_Z);\n\nsub func {\n    print join(\"\\t\", $OPT_T, $OPT_Y, $OPT_Z), \"\\n\";\n}\n\npackage main;\n\nuse Getopt::Std;\n\nmain();\n\nsub main {\n    init_opts(qw( X Y ));\n    X::func();\n    Y::func();\n}\n\nsub init_opts {\n    my %opts;\n    my $opt_string;\n    my %opt_to_package;\n\n    for my $pkg ( @_ ) {\n        my @opts = eval \"\\@${pkg}::PACKAGE_OPTS\";\n        $opt_string .= join '', @opts;\n\n        for my $opt ( @opts ) {\n            (my $var = $opt) =~ s/[^A-Za-z]+//g;\n            $opts{$var} = '-not provided-';\n            $opt_to_package{$var} = $pkg;\n        }\n    }\n\n    getopts($opt_string, \\%opts);\n\n    for my $opt (keys %opts) {\n        my $pkg = $opt_to_package{$opt};\n        my $var = 'OPT_' . uc $opt;\n        eval \"\\$${pkg}::${var} = \\$opts{\\$opt}\"\n    }\n\n    return;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>C:\\...\\Temp&gt; perl tt.pl -zvx a -y b\n1       a\n-not provided-  b       1\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496938542, "creation_date": 1496920360, "question_id": 44434127, "link": "https://stackoverflow.com/questions/44434127/is-it-possible-to-use-perls-getoptstd-in-2-packages", "title": "Is it possible to use Perl&#39;s Getopt::Std in 2 packages?", "body": "<p>[perl script]\nperl_script.pl -b \"HELLO\" -v</p>\n\n<pre><code>use package1;\nuse package2;\n\nmy $argb = GetPackage1Option;\nmy $argv = GetPackage2Option;\n\nprint \"$argb\\n\";                                # Print -b argument\nprint \"v is found!\\n\" if ( GetPackage2Option ); # Print\n</code></pre>\n\n<p>[package1.pm]</p>\n\n<pre><code>use Getopt::Std;\nrequire Exporter;\n@ISA = qw(Exporter);\n@EXPORT = qw( GetPackage1Option );\n\nsub GetPackage1Option {\n\n    getopt('b');\n    our ($opt_b);\n\n    my $argb = $opt_b || '';\n\n    return $argb;\n}\n</code></pre>\n\n<p>[package2.pm]</p>\n\n<pre><code>use Getopt::Std;\nrequire Exporter;\n@ISA = qw(Exporter);\n@EXPORT = qw( GetPackage2Option );\n\nsub GetPackage2Option {\n\n    my $bool = 0;\n    my %opt;\n    getopts('v', \\%opt);\n\n    return ( defined $optHash{v} ) ? $optHash{v} : $bool;\n}\n</code></pre>\n\n<p>I am calling 2 functions from 2 separate packages and each function uses a different option.</p>\n\n<p>I tried this but I am only getting the option for -b. The -v option works if I remove the functions that use -b.</p>\n\n<p>Apologies this only sort of a summary of my original code.</p>\n\n<p>Please let me know if my question is confusing. Thanks :)</p>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1496922730, "post_id": 44433637, "comment_id": 75867006, "body": "Your code does not compile and run as posted. You claim to use <code>strict</code>, yet, you have <code>print &quot;$argument\\n&quot;;</code> with no <code>$argument</code> declared anywhere. It is best not to lie to people whose help you are seeking."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1496919657, "creation_date": 1496919657, "answer_id": 44433904, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my/44433904#44433904", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>There's two problems here - the first is that the shell is unwrapping your quotes <em>first</em> before passing them to perl. So you need to escape them. </p>\n\n<p>The second is - <code>@ARGV</code> splits on whitespace. </p>\n\n<p>So to do what you want:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nuse Text::ParseWords qw ( quotewords ) ;\n\nmy $input =  \"name1 \\\"name2 and name3\\\"\";\nmy @words = quotewords ( \" \", 0, $input );\n\nprint Dumper \\@words;\n</code></pre>\n\n<p>Or reading <code>@ARGV</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse Text::ParseWords qw ( quotewords ) ;\n\nmy @words = quotewords ( \" \", 0, join (\" \", @ARGV) );\n\nprint Dumper \\@words;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 432, "user_id": 5168007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bdecacf38aba3f18a066bf056dc871?s=128&d=identicon&r=PG&f=1", "display_name": "asatsi", "link": "https://stackoverflow.com/users/5168007/asatsi"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1496920143, "post_id": 44433924, "comment_id": 75865200, "body": "Thanks @Sinan&#220;n&#252;r. Corrected it. I didn&#39;t execute it on the command line, instead used it as an argument to perl interpreter hence it worked with that mistake."}], "tags": [], "owner": {"reputation": 432, "user_id": 5168007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bdecacf38aba3f18a066bf056dc871?s=128&d=identicon&r=PG&f=1", "display_name": "asatsi", "link": "https://stackoverflow.com/users/5168007/asatsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1496920080, "last_edit_date": 1496920080, "creation_date": 1496919713, "answer_id": 44433924, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my/44433924#44433924", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>Your code snippet is not working as the $argument is undefined. However I tried this updated and it works as you desired. See the output below:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n#use Data::Dumper;\n\nmy $argument_list = join(\" \",@ARGV);\n\nprint \"$argument_list\\n\";\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>$ perl test1.pl name1 \\\"name2 and name3\\\"\nname1 \"name2 and name3\"\n$ perl test1.pl name1 name2 and name3\nname1 name2 and name3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1496940760, "last_edit_date": 1496940760, "creation_date": 1496923625, "answer_id": 44435367, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my/44435367#44435367", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>The behavior you are seeing is a function of the shell you are using, and does not have anything to do with <code>perl</code>. You would see the same results whether you used Python or C or some other language.</p>\n\n<p>It is up to you to understand how the programming environment <em>you</em> chose works before starting to program. For example, with this script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nprint join('|', @ARGV), \"\\n\";\n</code></pre>\n\n<p>in <code>zsh</code>:</p>\n\n<pre><code> ./1tt.pl name1 \"name2 and name3\"\nname1|name2 and name3\n</code></pre>\n\n<p>That is, the script gets two arguments. <code>name1</code> and <code>name2 and name3</code>. The double-quoted string is passed as a single argument. On the other hand, see:</p>\n\n<pre><code>$ ./1tt.pl name1 \"name2 and name3\"\nname1|name2 and name3\n$ ./1tt.pl name1 \"\\\"name2 and name3\\\"\"\nname1|\"name2 and name3\"\n$ ./1tt.pl name1 '\"name2 and name3\"'\nname1|\"name2 and name3\"\n$ ./1tt.pl name1 \"'name2 and name3'\"\nname1|'name2 and name3'\n</code></pre>\n\n<p>On the other hand, on Windows 10, in a <code>cmd.exe</code> window:</p>\n\n<pre><code>C:\\&gt; perl t.pl name1 \"name2 and name3\"\nname1|name2 and name3\nC:\\&gt; perl t.pl name1 \"\"\"name2 and name3\"\"\"\nname1|\"name2 and name3\"\nC:\\&gt; perl t.pl name1 \"\\\"name2 and name3\\\"\"\nname1|\"name2 and name3\"\nC:\\&gt; perl t.pl name1 '\"name2 and name3\"'\nname1|'name2 and name3'\n</code></pre>\n\n<p>etc</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 8132476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZVxv.gif?s=128&g=1", "display_name": "ky bof", "link": "https://stackoverflow.com/users/8132476/ky-bof"}, "is_accepted": false, "score": 0, "last_activity_date": 1496962204, "creation_date": 1496962204, "answer_id": 44446747, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my/44446747#44446747", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>I changed your code a bit to illustrate the points:</p>\n\n<pre><code>for ($c=0; $c&lt;=$#ARGV; $c++) {print \"ARGV[$c] = $ARGV[$c]\\n\";}\nmy $argument_list = join(\" \",@ARGV);\nprint \"$argument\\n\"; # you meant argument_list\nprint \"ArgLst = $argument_list\\n\";\n\n$ perl test.pl 1  two       \"3 four\" \" 5 six\"\nARGV[0] = 1\nARGV[1] = two\nARGV[2] = 3 four\nARGV[3] =  5 six\n\nArgLst = 1 two 3 four  5 six\n</code></pre>\n\n<p>NOTE:</p>\n\n<ol>\n<li>Without the quote, arguments are separated by space(s)</li>\n<li>The quote forces the interpreter to treat characters (including spaces) inside the quote as one string</li>\n<li>\"join\" command concatenates the arguments together. Looking at the ArgLst alone, you wont be able to tell which is the 2nd argument.</li>\n</ol>\n\n<p>I dont know 100% about your question. I hope the code indirectly answer your question.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 8132476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZVxv.gif?s=128&g=1", "display_name": "ky bof", "link": "https://stackoverflow.com/users/8132476/ky-bof"}, "is_accepted": false, "score": 0, "last_activity_date": 1497022173, "creation_date": 1497022173, "answer_id": 44461608, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my/44461608#44461608", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>Oh I think I know what you're after now.</p>\n\n<pre><code>$ perl test1.pl name1 \"\\\"n2 and n3\\\"\" \n$ name1 \"n2 and n3\"\n</code></pre>\n\n<p>1st &amp; last double-quotes are for the string the \\\" is a char and not part of the delimiter. More elegantly, you can have it as follows:</p>\n\n<pre><code>$ perl test1.pl name1 '\"n2 and n3\"'\n$ name1 \"n2 and n3\"\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7344661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-D9AelVM4jsg/AAAAAAAAAAI/AAAAAAAAAEE/CtOqFh_LmZE/photo.jpg?sz=128", "display_name": "Tarun Vikash", "link": "https://stackoverflow.com/users/7344661/tarun-vikash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "answer_count": 5, "score": -3, "last_activity_date": 1497022173, "creation_date": 1496918866, "last_edit_date": 1496922762, "question_id": 44433637, "link": "https://stackoverflow.com/questions/44433637/how-do-i-read-double-quotes-or-single-quotes-through-command-line-into-my", "title": "How do I read double quotes(&quot;) or single quotes(&#39;) through command line into my perl program?", "body": "<p>I am trying to use use arguments passed as command line arguments into my script, But while doing so the double quotes(\") and single quotes(') vanishes.\nfor example on running the following:</p>\n\n<pre><code>#!usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $argument_list = join(\" \",@ARGV);\n\nprint \"$argument\\n\";\n</code></pre>\n\n<p>Upon running the above code:</p>\n\n<pre><code>perl test1.pl name1 \"name2 and name3\"\n</code></pre>\n\n<p>I am getting the following output:</p>\n\n<pre><code>name1 name2 and name3\n</code></pre>\n\n<p>Is there any way to include the double quotes along with the command line arguments so that the final argument is <code>\"name2 and name3\"</code> and not just <code>name2 and name3</code> ?</p>\n\n<p>I have tried using '\\' to escape double quotes <code>perl test1.pl name1 \\\"name2 and name3\\\"</code> but it only makes it worse by considering <code>\"name2</code> as a separate argument <code>and</code> as a separate argument and <code>name3\"</code> as another argument.</p>\n"}, {"tags": ["perl", "unix", "ssh", "openssh"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1496914726, "post_id": 44432033, "comment_id": 75861548, "body": "Not enough detail here to answer. We need to know where <code>$ssh</code> is coming from. My guess would be it&#39;s not being instantiated correctly."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1496915753, "post_id": 44432033, "comment_id": 75862327, "body": "Object of ssh is being passed to the function as $ssh. it was working completely fine until the $var =1 loop was introduced. So ow, it works fine if loop is being entered else it gives the error"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1496918340, "post_id": 44432033, "comment_id": 75864054, "body": "Still can&#39;t answer without the rest of the code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1496920446, "post_id": 44432033, "comment_id": 75865398, "body": "The error is saying that you are treating <code>$ssh</code> as an object, it&#39;s actually, just a plain (&quot;unblessed&quot;) object. Try printing <code>ref $ssh</code> and you&#39;ll see it&#39;s not an object. As @Sobrique says, you&#39;ll need to trace where <code>$ssh</code> comes from and how it gets into that state."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1496921548, "post_id": 44432033, "comment_id": 75866138, "body": "Thank you so much for that elaborate description. was able to identify the actual error because of the direction ur answer provided @DaveCross and @Sobrique!!  Cheerzz!!"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1496938151, "post_id": 44434621, "comment_id": 75879043, "body": "As it stands, this isn&#39;t a very useful answer. It would be great if you could take the time to write up what the problem was in a bit more detail."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1496941253, "post_id": 44434621, "comment_id": 75880900, "body": "Please remember that, although it may not feel that way, the primary purpose of a Stack Overflow page is to help the hundreds of people with a similar problem who come across your question. Please show your gratitude for the help you have received by writing up a solution that will help those people."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1497327355, "post_id": 44434621, "comment_id": 76017154, "body": "My bad @DaveCross Actually, I forgot to pass the $ssh object in the particular function and id id not notice this as many arguments were being passed to the function. So, honestly, I thought that it would very silly to specify such a silly solution. Will edit immediately.."}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497327371, "post_id": 44434621, "comment_id": 76017159, "body": "my bad @Borodin Actually, I forgot to pass the $ssh object in the particular function and id id not notice this as many arguments were being passed to the function. So, honestly, I thought that it would very silly to specify such a silly solution. Will edit immediately.."}], "tags": [], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "is_accepted": false, "score": -1, "last_activity_date": 1497327413, "last_edit_date": 1497327413, "creation_date": 1496921748, "answer_id": 44434621, "question_id": 44432033, "link": "https://stackoverflow.com/questions/44432033/cant-call-method-capture2-on-unblessed-reference/44434621#44434621", "title": "Can&#39;t call method &quot;capture2&quot; on unblessed reference", "body": "<p>Solved! Problem was in $ssh only! Actually, I forgot to pass the $ssh object in the particular function and i did not notice this as many arguments were being passed to the function.</p>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 938, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1497327413, "creation_date": 1496914651, "question_id": 44432033, "link": "https://stackoverflow.com/questions/44432033/cant-call-method-capture2-on-unblessed-reference", "title": "Can&#39;t call method &quot;capture2&quot; on unblessed reference", "body": "<pre><code>if($var ==1){\n    function($host);}\n#OTHER PROCESSING   \n#***\n#****\n# ****  \n$hostForSsh =$host;\nmy $whatever =\"xyz\"\nmy $something= $ssh-&gt;capture2(qq(/user/somePlace $whatever) );#--line A\n</code></pre>\n\n<p>The function above runs perfectly when value of $var passed is 1 but gives\nCan't call method \"capture2\" on unblessed reference -->error on line A if $var =0.</p>\n"}, {"tags": ["perl", "plugins", "lua", "lightroom"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496914809, "post_id": 44431720, "comment_id": 75861614, "body": "Are we talking about a Perl module? Or a command line utility? ExifTool is both, right? My guess is, you can shell out to the program, but you will not be able to use the module. Perl code is not compiled, so this is not like creating bindings for a C library (a .so file), which you can probably do in Lua. You&#39;d have to hack your own bindings by creating functions that call the program with the right args."}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496915117, "post_id": 44431720, "comment_id": 75861840, "body": "It&#39;s a module.  Can you explain how I&#39;d go about it?  It&#39;s apparently possible as there are a couple of other plugins out there that access ExifTool."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496917137, "post_id": 44431720, "comment_id": 75863269, "body": "I am pretty sure they just use the command line utility that comes with it. Or you can build your own tool in Perl that does exactly what you want and bind that with shelling out."}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496918222, "post_id": 44431720, "comment_id": 75863982, "body": "No, they use the library, not the command line.  Regarding the second suggestion, can you expand on that?  The script has to be in Lua for Lightroom to read it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496923157, "post_id": 44431720, "comment_id": 75867358, "body": "Well, I have used Lightroom, and I have used the ExifTool on the commandline, but my Lua skills ended when I stopped playing World of Warcraft, where I tinkered with interface addons. But I can barely read Lua nowadays. I&#39;m a Perl guy. When I say <i>shell out</i> I mean, you can call an external program and read the result (or deal with the state it leaves afterwards). So you could save the image into a temporary file, then call <code>exiftool --whatever $tempfile</code>, then read in the altered temporary file again. But pay attention that actions in LR are always undoable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1496923214, "post_id": 44431720, "comment_id": 75867404, "body": "Also, if you <i>know</i> that there are other plugins that do this with the Perl module, and not the program, then how do you know? Can you look at their source code? There&#39;s your explanation. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496923323, "post_id": 44431720, "comment_id": 75867493, "body": "This document <a href=\"http://lua-users.org/wiki/LuaVersusPerl\" rel=\"nofollow noreferrer\">lua-users.org/wiki/LuaVersusPerl</a> talks about embedding Lua in Perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1496923879, "post_id": 44431720, "comment_id": 75867910, "body": "This question is <a href=\"https://forums.adobe.com/thread/2343760\" rel=\"nofollow noreferrer\"><b>cross-posted</b></a>"}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "edited": false, "score": 0, "creation_date": 1496923949, "post_id": 44431720, "comment_id": 75867957, "body": "Is that a problem?"}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1496925121, "post_id": 44431720, "comment_id": 75868805, "body": "@simbabque, I only know from people (not the original author who seems to be dead :(  ) who claim that it specifically uses the library.  Someone on a photography forum suggested that the LrTasks.execute() command in the LR SDK can run a command on the command-line, but the documentation doesn&#39;t really explain how you get any return data to the script."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1496925139, "post_id": 44431720, "comment_id": 75868823, "body": "If you&#39;re referring to <a href=\"http://u88.n24.queensu.ca/exiftool/forum/index.php?topic=6780.0\" rel=\"nofollow noreferrer\"><i>Lua: Lightroom plugin using exiftool for exif translations</i></a> then that works by running the exiftool <i>executable</i> as a daemon in stay-open mode, and sending it commands by appending to a command file which it constantly monitors. It&#39;s not possible to call a Perl library directly from any language other than Perl."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1496925818, "post_id": 44431720, "comment_id": 75869337, "body": "The link in Borodin&#39;s comment contains a link to github with code that that author used. <a href=\"https://github.com/flingo64/PhotoStation-Upload-Lr-Plugin/blob/master/PhotoStation_upload.lrplugin/PSExiftoolAPI.lua\" rel=\"nofollow noreferrer\">github.com/flingo64/PhotoStation-Upload-Lr-Plugin/blob/maste&zwnj;&#8203;r/&hellip;</a>"}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "edited": false, "score": 0, "creation_date": 1496928016, "post_id": 44431720, "comment_id": 75871104, "body": "yeah I&#39;m looking at it now.  I can&#39;t really parse it."}, {"owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1497256440, "post_id": 44431720, "comment_id": 75982943, "body": "Cheers for that @Borodin. I&#39;ve got it working via that method."}], "owner": {"reputation": 563, "user_id": 7067693, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86317b65cc26a372b8129fcb495c91bd?s=128&d=identicon&r=PG&f=1", "display_name": "erv", "link": "https://stackoverflow.com/users/7067693/erv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496913926, "creation_date": 1496913926, "question_id": 44431720, "link": "https://stackoverflow.com/questions/44431720/how-to-import-perl-library-in-lua-script", "title": "How to import perl library in Lua script", "body": "<p>I'm writing a Lightroom plugin with Lua and want to utilise the perl ExifTool library.  I'm a reasonably experienced coder but have never coded in Lua before.  Can someone show me how to include a perl library in my Lua script and how to access its functions? Cheers.</p>\n"}, {"tags": ["perl", "imap"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496913312, "post_id": 44431305, "comment_id": 75860533, "body": "What does <code>perl -MNet::IMAP::Simple -E &#39;say $Net::IMAP::Simple::VERSION&#39;</code> print?"}, {"owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496913478, "post_id": 44431305, "comment_id": 75860631, "body": "@dada: right now i don&#39;t have access to system (on my phone). will check for sure. but can you tell me details? like what it should print and what would it mean?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496913705, "post_id": 44431305, "comment_id": 75860810, "body": "@dada is probably right. It looks like you have an outdated version of  Net::IMAP::Simple. You can also just do <code>perl -MNet::IMAP::Simple\\ 999</code> to get the version (as an error message)."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496913762, "post_id": 44431305, "comment_id": 75860848, "body": "If you have the latest version of <code>Net::IMAP::Simple</code>, it should print <code>1.2207</code>. After a quick look at the previous versions of the module, it seems that the <code>see</code> method wasn&#39;t always there. So if you have an outdated version of the module, it would make sense that you can call the method."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496913896, "post_id": 44431305, "comment_id": 75860945, "body": "@Dada I took the liberty to write that up. Hope you don&#39;t mind."}, {"owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "edited": false, "score": 0, "creation_date": 1496914000, "post_id": 44431305, "comment_id": 75861017, "body": "@ simbabque &amp; dada : sure guys. I guess so too. will check and get back to you."}, {"owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1496914298, "post_id": 44431305, "comment_id": 75861219, "body": "@dada : bro ,i&#39;m having hard time trying to retrieve the body of the mail. can you tell me how can i retrieve only the mail body using Net::IMAP::Client?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1496915032, "post_id": 44431305, "comment_id": 75861773, "body": "@simbabque I don&#39;t mind at all; on the contrary, I wasn&#39;t too sure on which version the <code>see</code> method had been added, so I was hoping that someone would post an answer with the details :)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "edited": false, "score": 0, "creation_date": 1496914119, "post_id": 44431695, "comment_id": 75861099, "body": "sure buddy. anyways , i&#39;m having hard time retrieving the body of the mail. can you tell me how can i retrieve only the mail body using Net::IMAP::Client?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "edited": false, "score": 0, "creation_date": 1496914157, "post_id": 44431695, "comment_id": 75861126, "body": "@RaJ sorry, I&#39;ve never used that thing before. I&#39;m just good at reading documentation. ;) Please ask a new question for that."}, {"owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "edited": false, "score": 0, "creation_date": 1497438861, "post_id": 44431695, "comment_id": 76076763, "body": "where can i download the package  Net::IMAP::Simple version 1.1899_05. I can apt or yum or rpm through command line in linux. so i want to manually download it and place it in a separate folder."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "edited": false, "score": 0, "creation_date": 1497438969, "post_id": 44431695, "comment_id": 76076852, "body": "@RaJ you could just install it from CPAN, or build it yourself. I don&#39;t know where you would get a system package for your OS. If you just install the newest version from CPAN you should be fine. <code>cpan NET::IMAP::Simple</code> or similar."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1496913868, "creation_date": 1496913868, "answer_id": 44431695, "question_id": 44431305, "link": "https://stackoverflow.com/questions/44431305/cant-locate-object-method-see-via-package-netimapsimple/44431695#44431695", "title": "can&#39;t locate object method &quot;see&quot; via package &quot;Net::IMAP::Simple&quot;", "body": "<p>The methods <a href=\"https://metacpan.org/pod/distribution/Net-IMAP-Simple/Simple.pod#see\" rel=\"nofollow noreferrer\"><code>see</code></a> and <a href=\"https://metacpan.org/pod/distribution/Net-IMAP-Simple/Simple.pod#unsee\" rel=\"nofollow noreferrer\"><code>unsee</code></a> were added in <a href=\"https://metacpan.org/changes/distribution/Net-IMAP-Simple#L391\" rel=\"nofollow noreferrer\">Net::IMAP::Simple version 1.1899_05</a>.</p>\n\n<pre><code>&gt; 1.1899_05: Tue Jun 16 06:42:16 EDT 2009\n&gt;    - I started working on ticket 45953,\n&gt;    - created sub_flags() and add_flags()\n&gt;    - taught delete() to use add_flags() -- adds \\Deleted\n&gt;    - providing see() and unsee() for ticket 45953\n&gt;    - I started building tests for the flag manipulation stuff and\n&gt;      put reselect stuff ... noticed a possible bug in\n&gt;      Net::IMAP::Server\n</code></pre>\n\n<p>You likely have an older version on your production system. Update it, and include a minimum version in your Makefile.PL or cpanfile or whatever you use to track dependencies.</p>\n"}], "owner": {"reputation": 129, "user_id": 4054747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mdNy8.jpg?s=128&g=1", "display_name": "RaJ", "link": "https://stackoverflow.com/users/4054747/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 44431695, "answer_count": 1, "score": 0, "last_activity_date": 1496913868, "creation_date": 1496912835, "question_id": 44431305, "link": "https://stackoverflow.com/questions/44431305/cant-locate-object-method-see-via-package-netimapsimple", "title": "can&#39;t locate object method &quot;see&quot; via package &quot;Net::IMAP::Simple&quot;", "body": "<p>I am trying to fetch unread emails from server and mark them as seen (read) after fetching. I'm using perl script and the package Net::IMAP::Simple. I'm writing this script for the office work.</p>\n\n<p>Below is some code :</p>\n\n<pre><code>use strict;    \nuse warnings;\nuse Net::IMAP::Simple;\nuse Email::Simple;\nuse HTTP::Date;\n#some code....\n\n# Create the object\nmy $server = Net::IMAP::Simple-&gt;new($imap_server) or die \"Can't connect to server: $imap_server \";\n\n# Log on\nmy $login = $server-&gt;login($imap_user,$imap_passwd) or die \"Login failed (bad username or password)\";\n\n#some code.....\n\n# set the message as seen\n$server-&gt;see($i);\n\n# i also used $server-&gt;add_flags($i,'\\Seen'); but it throws same error.\n</code></pre>\n\n<p>The Irony is, this code works fine on my Gmail account , which i use for testing. but when i test it in office it throws error ;</p>\n\n<p>can't locate object method \"see\" via package \"Net::IMAP::Simple\"</p>\n\n<p>I don't know what's the issue here.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 2, "creation_date": 1496905619, "post_id": 44428825, "comment_id": 75855622, "body": "Sow the error message please"}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1496905667, "post_id": 44428825, "comment_id": 75855651, "body": "show some expected output instead of your expected capture group... that will help"}, {"owner": {"reputation": 78, "user_id": 3054344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/538e61157032cdbcf1811170e6daeed4?s=128&d=identicon&r=PG&f=1", "display_name": "Corex Cain", "link": "https://stackoverflow.com/users/3054344/corex-cain"}, "edited": false, "score": 0, "creation_date": 1496905840, "post_id": 44428825, "comment_id": 75855734, "body": "Just guessing since there is no errors. Did you forget to put &#39;my&#39; infront of the vars?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1496906630, "post_id": 44428825, "comment_id": 75856230, "body": "what&#39;s with the <code>if $_</code> regular expression? if you are reading this from file, does the lines differ? why not just split into array from string?"}, {"owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1496908083, "post_id": 44428825, "comment_id": 75857238, "body": "I forgot to put use strict; and use warnings; just know. After that, it does not displays error but the output im expecting is not there. I really do not know much on perl."}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 2, "creation_date": 1496908748, "post_id": 44428825, "comment_id": 75857632, "body": "The output is not there because the regex fails to match. You&#39;re using <code>\\d+</code> to match numerals like <code>21.303</code> whilst the dot is not included in the <code>\\d</code> class. Use <code>[\\d.]+</code> or <code>\\d+(?:\\.\\d+)?</code> instead."}, {"owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1496911616, "post_id": 44428825, "comment_id": 75859393, "body": "After i changed it, where should i see the output because its like nothing happen?"}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1496913650, "post_id": 44428825, "comment_id": 75860759, "body": "Ensure you declare every used variable with <code>my</code>. Otherwise, the code should be working fine: <a href=\"https://ideone.com/Q4CbqF\" rel=\"nofollow noreferrer\">ideone.com/Q4CbqF</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1496973322, "post_id": 44432321, "comment_id": 75893463, "body": "Hi, thanks for the reply, but my data is in input.txt, how do i run the perl script for input.txt that is in the same folder as my perl script? and is it possible for the output to be in new .txt file?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1496998110, "post_id": 44432321, "comment_id": 75902950, "body": "Use <code>while ( &lt;&gt; ) { </code> like you do in your original script. And open a file for output and print to that ."}, {"owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1497232164, "post_id": 44432321, "comment_id": 75974810, "body": "Hi @Sobrique, i&#39;ve tried using the code that you suggest but it appears error: Use of uninitialized value in concatenation (.) or string for grabbing $file_name. The $io, $portname and $value works fine."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1497256442, "post_id": 44432321, "comment_id": 75982945, "body": "That means the regex isn&#39;t matching for some reason. It did for your sample data. So see how that differs."}, {"owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1497326564, "post_id": 44432321, "comment_id": 76016951, "body": "Hi @Sobrique, your answer works just fine, however, in the input.txt, there are not only input lines, there are also output line, that is why i think i need to use the if condition eventhough its complicated right? because as i only wants input, not output, im afraid it will take everything."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "edited": false, "score": 0, "creation_date": 1497345053, "post_id": 44432321, "comment_id": 76026226, "body": "Well, if your sample data doesn&#39;t reflect your question, it won&#39;t work the same.   So - how about <code>next unless m&#47;^input&#47;;</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1496915379, "creation_date": 1496915379, "answer_id": 44432321, "question_id": 44428825, "link": "https://stackoverflow.com/questions/44428825/error-when-taking-some-variables-from-multiple-lines-with-same-pattern/44432321#44432321", "title": "Error when taking some variables from multiple lines with same pattern", "body": "<p>Honestly, that regex is way too complicated. You're doing a load of matching, and it's brittle.</p>\n\n<p>Most likely you're being tripped up on <code>21.303</code> isn't matched by <code>\\d+</code>. </p>\n\n<p>So your regex breaks, and that's... that. </p>\n\n<p>But can I suggest a different approach? Don't regex  the whole thing, that means complicated and hard to read - and brittle - regular expressions.</p>\n\n<p>Why not instead:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) { \n\n   my ( $io ) = m/^(\\w+)/; #first word on line\n   my ( $portname, $value ) = m/-port (\\w+) ([\\d\\.]+)/;  #look for 'port' keyword. \n   my ( $file_name ) = m/file_name == (\\S+)\\\"/; #look for 'file_name' keyword \n\n   print \"$io $portname $value $file_name\\n\";\n}\n\n__DATA__\ninput -input_port -port top_port 21.303 [open_port -op {input_port[0]} -file \"file_name == top_input_port[0]\"]\ninput -input_port -port bot_port 98.324 [open_port -op {input_port[10]} -file \"file_name == bot_input_port[10]\"]\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7892746, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/41310627d746b07402b15829c958043e?s=128&d=identicon&r=PG&f=1", "display_name": "mmaz", "link": "https://stackoverflow.com/users/7892746/mmaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496915379, "creation_date": 1496905469, "last_edit_date": 1496909642, "question_id": 44428825, "link": "https://stackoverflow.com/questions/44428825/error-when-taking-some-variables-from-multiple-lines-with-same-pattern", "title": "Error when taking some variables from multiple lines with same pattern", "body": "<p>I am really new to perl. I need to grab some variables from multiple lines with same pattern using perl script. </p>\n\n<p>These are the example of multiple lines with same pattern and are stored in input.txt:</p>\n\n<pre><code>input -input_port -port top_port 21.303 [open_port -op {input_port[0]} -file \"file_name == top_input_port[0]\"]\ninput -input_port -port bot_port 98.324 [open_port -op {input_port[10]} -file \"file_name == bot_input_port[10]\"]\n</code></pre>\n\n<p>The format of the line is :</p>\n\n<pre><code>input -input_port -port portname value [open_port -op {input_port[10]} -file \"file_name == filename\"]\n</code></pre>\n\n<p>So, i tried to create this script using examples in Google:</p>\n\n<pre><code>#! /tools/perl/5.8.8/linux/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n    if ($_ =~ /^(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\d+)\\s+\n              \\[(\\S+)\\s+(\\S+)\\s\n              \\{(\\S+)\\[(\\d+)\\]\\}\\s(\\S+)\\s(\\S+)\\s*==\\s(\\S+)*\"\\]$/x ) {\n        $io = $1;\n        $io_port = $2;\n        $port = $3;\n        $portname = $4;\n        $value = $5;\n        $openclose = $6;\n        $op = $7;\n        $io_num = $8;\n        $number = $9;\n        $filetype = $10;\n        $file = $11;\n        $file_name = $12;\n        print \"$io $portname $value $file_name\\n\";\n    }\n}\n</code></pre>\n\n<p>I only want to print $io, $portname, $value and $file_name. However, it displays compilation errors. How do i fix this error? </p>\n\n<p>I am expecting the output to be in new txt file:</p>\n\n<p>input top_port 21.303 top_input_port[0]</p>\n\n<p>input bot_port 98.324 bot_input_port[10]</p>\n"}, {"tags": ["regex", "perl", "hp-idol-ondemand"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1496902079, "post_id": 44427828, "comment_id": 75853619, "body": "Why not use <a href=\"http://perldoc.perl.org/CGI.html\" rel=\"nofollow noreferrer\">CGI</a> to parse the query parameters?"}, {"owner": {"reputation": 79, "user_id": 6637280, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67d78bb1223adcb3a06c578f298e86f3?s=128&d=identicon&r=PG&f=1", "display_name": "Himan", "link": "https://stackoverflow.com/users/6637280/himan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1496902192, "post_id": 44427828, "comment_id": 75853665, "body": "The perl is written to generate stats from StatsServer of HPE IDOL. No option but have to do this way."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1496903616, "post_id": 44427828, "comment_id": 75854446, "body": "We&#39;re talking about Perl here. Of course there&#39;s options."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1496905229, "post_id": 44427828, "comment_id": 75855411, "body": "<code>if ($text =~ &#47;\\bText=\\b(.*?)\\bSummary\\b&#47;) {     $result = $1;     $result =~ tr&#47;%20A&amp;&#47; &#47;;     $result =~ s&#47; &#47;&#47;g;     print $result; }</code> that is not very complex and it strips exactly <code>iphone5hasnonetwork</code>"}, {"owner": {"reputation": 78, "user_id": 3054344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/538e61157032cdbcf1811170e6daeed4?s=128&d=identicon&r=PG&f=1", "display_name": "Corex Cain", "link": "https://stackoverflow.com/users/3054344/corex-cain"}, "edited": false, "score": 0, "creation_date": 1496905579, "post_id": 44427828, "comment_id": 75855592, "body": "When I test the regex the output of $3 is &#39;iphone%205%20has%20no%20network%2A&#39;, do you just wan&#39;t to replace the uri characters?"}], "answers": [{"tags": [], "owner": {"reputation": 14587, "user_id": 5724303, "user_type": "registered", "profile_image": "https://graph.facebook.com/1100229700001875/picture?type=large", "display_name": "Kosh", "link": "https://stackoverflow.com/users/5724303/kosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1496974991, "creation_date": 1496974991, "answer_id": 44448303, "question_id": 44427828, "link": "https://stackoverflow.com/questions/44427828/issue-with-regex-in-perl-script/44448303#44448303", "title": "Issue with regex in perl script", "body": "<p>You forgot to add ignore case modifier to your regexp:</p>\n\n<pre><code>$query =~ m!/?a.*?=(\\w+)([?&amp;].*(?&lt;=[?&amp;])Text=([^?&amp;]*))?!i\n</code></pre>\n\n<p>see <code>i</code> in the end?</p>\n\n<p>read more here: <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlre.html#Modifiers</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8139847, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/675f66ec033d7a56a7ddc5d7e6f9bc12?s=128&d=identicon&r=PG", "display_name": "GWP", "link": "https://stackoverflow.com/users/8139847/gwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1497058968, "creation_date": 1497058968, "answer_id": 44468731, "question_id": 44427828, "link": "https://stackoverflow.com/questions/44427828/issue-with-regex-in-perl-script/44468731#44468731", "title": "Issue with regex in perl script", "body": "<p>I'm not sure what other problems your regex has, but off the bat I see:\n1) capture groups are numbered by the opening parenthesis, so I think you want $4, not $3\n2) 'Text' might match 'FieldText' later in the string</p>\n\n<p>You really ought to just parse the URI correctly by splitting all the arguments (&amp;) and then splitting the key-value pairs (=)</p>\n"}], "owner": {"reputation": 79, "user_id": 6637280, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67d78bb1223adcb3a06c578f298e86f3?s=128&d=identicon&r=PG&f=1", "display_name": "Himan", "link": "https://stackoverflow.com/users/6637280/himan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 44448303, "answer_count": 2, "score": 0, "last_activity_date": 1497058968, "creation_date": 1496901998, "last_edit_date": 1496902221, "question_id": 44427828, "link": "https://stackoverflow.com/questions/44427828/issue-with-regex-in-perl-script", "title": "Issue with regex in perl script", "body": "<pre><code>processLine('23/05/2017 07:10:58 [6] 00-Always: ACTION=QUERY&amp;Text=iphone%205%20has%20no%20network%2A&amp;Summary=Context&amp;SpellCheck=true&amp;QuerySummary=false&amp;Sort=AutnRank%2BRelevance&amp;Synonym=true&amp;TotalResults=true&amp;MaxResults=10&amp;PrintFields=drereference%2Cdretitle%2Ccontenttype%2Cautnrank%2COPTUS%5FFILTER1%2COPTUS%5FFILTER2%2COPTUS%5FFILTER3%2CCANONICAL%5FURL&amp;Start=1&amp;Predict=false&amp;FieldText=%28MATCH%7BMy%20Optus%20Community%7D%3AOPTUS%5FFILTER1%3AOPTUS%5FFILTER2%3AOPTUS%5FFILTER3%20NOT%20MATCH%7Bsmb%7D%3ACONTEXT%20NOT%20MATCH%7BCustom%5FPromotions%7D%3ADREDBNAME%29%2BOR%2B%28%28MATCH%7BCustom%5FPromotions%7D%3ADREDBNAME%29%2BAND%2B%28BIASVAL%7Biphone%205%20has%20no%20network%2A%2C100%7D%3APromotion%5FKeywords%29%2BAND%2B%28MATCH%7Biphone%205%20has%20no%20network%2A%7D%3APromotion%5FKeywords%29%29&amp;Combine=Simple&amp;Characters=250 (127.0.0.1)');\nif (defined $query &amp;&amp; defined $ip &amp;&amp; $query =~ m!/?a.*?=(\\w+)([?&amp;].*(?&lt;=[?&amp;])Text=([^?&amp;]*))?!) \n{\n        $events++;\n        my $action = $1;\n        my $terms = uri_unescape($3) || \"\";\n}\n</code></pre>\n\n<p>I am looking to strip <code>iphone%205%20has%20no%20network%2A</code> from <code>Text=iphone%205%20has%20no%20network%2</code>A and store in <code>$3</code>. I tested regex and do not seem find an issue. It prints <code>$3</code> as Context. </p>\n\n<p>Expectation is <code>$3</code> outputs value as <code>iphonehasnonetwork</code></p>\n\n<p>When I pass,</p>\n\n<pre><code>processLine('25/05/2017 14:48:10 [9] 00-Always: action=Query&amp;text=samsung&amp;databasematch=Help_Support&amp;ResponseFormat=json&amp;_=1495687690880 (127.0.0.1)');\n</code></pre>\n\n<p>It prints <code>$3</code> as <code>QuerySamsung</code>. This is the expected result. </p>\n\n<p>I am new to Perl, and I am looking to modify this regex and sort this issue out. I have already stripped down my perl script and diagnosed the root problem. This regex looks fine to me after testing individual components of regex in <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1496897996, "post_id": 44426774, "comment_id": 75851860, "body": "This is not real code. <code>&#39;chir&#39;</code>?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1496900264, "post_id": 44426774, "comment_id": 75852743, "body": "Despite its name, Getopt::Std is not a good choice; Getopt::Long is needed to support the way most commands use command line options"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496900452, "post_id": 44426774, "comment_id": 75852818, "body": "i tried getopts::long i am getting so many exception since i am passing the command line arguments to a variable in the script"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496899033, "post_id": 44426971, "comment_id": 75852226, "body": "Undefined subroutine &amp;main::getopts called at ./test1.pl line 15."}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496899587, "post_id": 44426971, "comment_id": 75852432, "body": "shebang line should be added to your script if you want execute <code>.&#47;test1.pl</code>"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496900404, "post_id": 44426971, "comment_id": 75852796, "body": "is path in your shebang <code>&#47;usr&#47;bin&#47;perl</code> correct? if not use <code>&#47;usr&#47;bin&#47;env perl</code>. Try to call <code>getopts</code> explicit <code>Getopt::Std::getopts</code>."}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496900586, "post_id": 44426971, "comment_id": 75852882, "body": "i just changed  my %opts = ();  getopts(&#39;a:v:l:h&#39;, \\%opts); &amp;usage if($opts{h}); sub usage {   print &lt;&lt;&#39;HERE&#39;; -a application example -v version of the application -l location of the pom.xml HERE   exit; }"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496900614, "post_id": 44426971, "comment_id": 75852897, "body": "are u asking me to replace getopts in the code with Getopt::Std::getopts"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496900640, "post_id": 44426971, "comment_id": 75852909, "body": "or shall i call in script as use Getopt::Std::getopts"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496901445, "post_id": 44426971, "comment_id": 75853283, "body": "actually you shouldn&#39;t get <code>Undefined soubroutine &amp;main::getopts</code> because <code>getopts</code> will be exported by <code>Getopt::Std</code>. <code>Getopt::Std::getopts</code> could be used instead of <code>getopts</code>"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496901633, "post_id": 44426971, "comment_id": 75853402, "body": "Undefined subroutine &amp;Getopt::Std::getopts called at"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496902058, "post_id": 44426971, "comment_id": 75853607, "body": "something messy with <code>Getopt::Std</code>. I suppose <code>perl -MGetopt::Std -E &#39;getopts(&quot;h&quot;, %o);&#39;</code> shows the same exception. What <code>perl -MGetopt::Std -E &#39;say Getopt::Std-&gt;VERSION&#39;</code> says?"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496902463, "post_id": 44426971, "comment_id": 75853805, "body": "i think getopts was working fine until i introduce sub usage function"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496902925, "post_id": 44426971, "comment_id": 75854067, "body": "There is nothing wrong with <code>sub usage</code>. Post you actual code and perl version you use, please"}], "tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 1, "last_activity_date": 1496899389, "last_edit_date": 1496899389, "creation_date": 1496898074, "answer_id": 44426971, "question_id": 44426774, "link": "https://stackoverflow.com/questions/44426774/how-do-i-enable-help-option-in-below-script/44426971#44426971", "title": "How do I enable help option in below script?", "body": "<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Getopt::Std;\nuse Cwd 'chdir';\n\nsub usage {\n  print &lt;&lt;'HERE';\ntbd\nHERE\n  exit;\n}\nmy %opts = ();\n\ngetopts('a:v:l:h', \\%opts);\n$opts{h} &amp;&amp; usage();\n\nmy $application = $opts{a};\n\nmy $version = $opts{v};\n\nmy $location = $opts{l};\n\nprint \"$application, $version, $location\\n\";\n\nif ($application eq 'abc') {\n    chdir \"/viewstore/ccwww/dst_${application}_${version}/abc/${location}\";\n\n    print $ENV{PWD};\n} ## end if ($application eq 'abc')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496915377, "post_id": 44429753, "comment_id": 75862035, "body": "Thanks i got the logic now"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496915983, "post_id": 44429753, "comment_id": 75862490, "body": "@mahesh: As I said, it would be really useful to know what you didn&#39;t get previously so that we can improve the documentation."}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 1, "creation_date": 1496918244, "post_id": 44429753, "comment_id": 75863995, "body": "the explanation which you have provided how getopts function work like &#39;:&#39; helped me to understand"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496922879, "post_id": 44429753, "comment_id": 75867133, "body": "can you please explain the Getopts::Long function"}, {"owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496922997, "post_id": 44429753, "comment_id": 75867236, "body": "like how do we pass the inputs from getopts:long to a variable"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "edited": false, "score": 0, "creation_date": 1496926389, "post_id": 44429753, "comment_id": 75869798, "body": "If you have a new question, then it&#39;s probably best to ask it as a separate question. But Getopt::Long works a lot like Getopt::Std in simple cases."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1496908226, "creation_date": 1496908226, "answer_id": 44429753, "question_id": 44426774, "link": "https://stackoverflow.com/questions/44426774/how-do-i-enable-help-option-in-below-script/44429753#44429753", "title": "How do I enable help option in below script?", "body": "<p>Did you read the documentation for <a href=\"https://metacpan.org/pod/Getopt::Std\" rel=\"nofollow noreferrer\">Getopt::Std</a>? Do you know how the <code>getopts()</code> function works?</p>\n\n<p>The first argument to <code>getopts()</code> is string defining the options that you want it to parse. So you need to add 'h' to that string.</p>\n\n<pre><code>getopts('a:v:l:h', \\%opts);\n</code></pre>\n\n<p>As you'll see in the documentation, the ':' following the existing options, indicates that they need a value following them on the command line (for example <code>-a foobar</code>). The <code>-h</code> option doesn't need that, so we don't have a ':'.</p>\n\n<p>The second argument to <code>getopts()</code> is a reference to a hash which will be populated with your options. As your new <code>-h</code> option has no value, the 'h' key in the hash will be given the value 1 if the option is given on the command line. So all you need to do is to check that value and take appropriate action.</p>\n\n<pre><code>if ($opts{h}) {\n  # display your help message\n  exit;\n}\n</code></pre>\n\n<p>But, really, all of this is in the documentation. It would be helpful for us to know what you found difficult in the documentation so that we can improve it.</p>\n"}], "owner": {"reputation": 31, "user_id": 8104407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f4a10c1591e69fe6d10a6f16b89b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/8104407/mahesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497085514, "creation_date": 1496896959, "last_edit_date": 1497085514, "question_id": 44426774, "link": "https://stackoverflow.com/questions/44426774/how-do-i-enable-help-option-in-below-script", "title": "How do I enable help option in below script?", "body": "<p>My program takes command line arguments.</p>\n\n<pre><code>test.pl --help\n</code></pre>\n\n<p>I want to enable a \"help\" option in the code. How can I print usage in the code?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Cwd 'chdir';\nuse Getopt::Long;\nmy ($application,$version, $location,$artifactid,$pomversion,$groupid);\nGetOptions('application=s' =&gt; \\$application,\n\n                   'version=s' =&gt; \\$version,\n\n        'location=s' =&gt; \\$location,\n\n        'artifactid=s' =&gt; \\$artifactid,\n\n        'pomversion=s' =&gt; \\$pomversion,\n\n        'groupid=s' =&gt; \\$groupid)\n or die \"Usage od the script: $!\\n\";\n\nprint \"$application, $version, $location, $artifactid, $versionnumber, $groupid \\n\";\n\nif($application eq 'abc')\n\n{      chdir(\"/var/ccabc/dst_${application}_${version}/abc/${location}\") or die \"Cannot Change Directory: $!\\n\";\n\nprint $ENV{PWD};\n\ndo_compile();\n\n}\n</code></pre>\n\n<p>I have tried my best..</p>\n"}]