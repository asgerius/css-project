[{"tags": ["perl", "sockets"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1473284340, "post_id": 39379254, "comment_id": 66086702, "body": "Seems to work if I change <code>LocalAddr</code> to <code>Local</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1473284644, "post_id": 39379432, "comment_id": 66086818, "body": "The Perl Cookbook dates to 1998 and I have no idea how <code>IO::Socket::UNIX</code> worked back then."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1473285721, "post_id": 39379432, "comment_id": 66087201, "body": "Yes seems like the information in the book is not very accurate. Are there any newer resources? If I add a client ( a new program) that will write to the same socket should I then use <code>Peer</code> and <code>Timeout</code> instead of <code>Listen</code> and <code>Local</code> as is used by the server?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1473287710, "post_id": 39379432, "comment_id": 66087845, "body": "I don&#39;t know anything good except <a href=\"http://metacpan.org/pod/IO::Socket\" rel=\"nofollow noreferrer\"><code>IO::Socket</code></a> and <a href=\"http://metacpan.org/pod/perlipc\" rel=\"nofollow noreferrer\">&#39;perlipc`</a>. These have also been around for a long time but they are occasionally refreshed with up-to-date examples."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1473284459, "creation_date": 1473284459, "answer_id": 39379432, "question_id": 39379254, "link": "https://stackoverflow.com/questions/39379254/how-to-create-a-unix-domain-socket/39379432#39379432", "title": "How to create a Unix Domain socket?", "body": "<p>It doesn't set <code>$@</code> because <code>IO::Socket::UNIX</code> doesn't use <code>eval</code> anywhere.\nIf you print out <code>$!</code> instead of <code>$@</code>, you might see:</p>\n\n<pre><code>Invalid argument at xxx.pl line 10.\n</code></pre>\n\n<p>At which point you may consult the <a href=\"http://metacpan.org/pod/IO::Socket::UNIX\" rel=\"nofollow\"><code>IO::Socket::UNIX</code> docs</a> and see that the correct parameter to pass is <code>Local</code> and not <code>LocalAddr</code>.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 1, "accepted_answer_id": 39379432, "answer_count": 1, "score": 1, "last_activity_date": 1473313556, "creation_date": 1473283592, "last_edit_date": 1473313556, "question_id": 39379254, "link": "https://stackoverflow.com/questions/39379254/how-to-create-a-unix-domain-socket", "title": "How to create a Unix Domain socket?", "body": "<p>I am trying to learn how to use sockets to communicate between processes on the same machine. I started with this simple test program taken from Perl Cookbook:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse IO::Socket;\n\nmy $socket_file = 'mysocket';\nif ( -e $socket_file ) {\n    unlink $socket_file or die \"Could not delete socket file '$socket_file': $!\";\n}\nmy $sock = IO::Socket::UNIX-&gt;new(\n    LocalAddr =&gt; $socket_file,\n    Type      =&gt; SOCK_STREAM,\n    Listen    =&gt; 5, # listen to max 5 connections\n) or die \"Could not create socket: '$@'\";\n\nsay \"Created socket successfully..\";\nsleep 1;\nclose $sock;\nsay \"Closed socket..\";\n\nexit;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Could not create socket: '' at ./test.pl line 10.\n</code></pre>\n\n<p>So the question is: Why does <code>IO::Socket::UNIX-&gt;new()</code> fail, and why does it not set <code>$@</code> when it fails?</p>\n"}, {"tags": ["xml", "perl", "hash", "attributes", "libxml2"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1473277560, "post_id": 39377881, "comment_id": 66083758, "body": "The script work on my system, but if <code>$entry-&gt;getAttribute(&#39;atr1&#39;)</code> works, why do you care about <code>$entry-&gt;{&#39;atr1&#39;}</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1473278859, "post_id": 39377881, "comment_id": 66084351, "body": "Would be nice if you included <code>$XML::LibXML::VERSION</code> too."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473284027, "post_id": 39377881, "comment_id": 66086581, "body": "<code>XML::LibXML::LIBXML_DOTTED_VERSION</code> is a function that returns the version of the underlying libxml library. It&#39;s more useful to show the value of scalar <code>$XML::LibXML::VERSION</code>, which is the version of the Perl library. The version currently available is 2.0128, and I have established that your code works fine with 2.0124. But please take note of <a href=\"http://stackoverflow.com/a/39378246/622310\">ikegami&#39;s words below</a> that the feature you&#39;re trying to use is undocumented and so should be considered to be unavailable. I would be interested to learn how you came to think that it would work at all?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1473284326, "post_id": 39377881, "comment_id": 66086693, "body": "You must be running a <i>very</i> old version of <code>XML::LibXML</code>. Although you don&#39;t show the version of the module, your output shows that it is based on libxml 2.7.6, released seven years ago in October 2009."}, {"owner": {"reputation": 237, "user_id": 3552168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/52b2c2e453b07c0d9611e21a9c8edf08?s=128&d=identicon&r=PG&f=1", "display_name": "cms", "link": "https://stackoverflow.com/users/3552168/cms"}, "edited": false, "score": 0, "creation_date": 1473425985, "post_id": 39377881, "comment_id": 66148552, "body": "Thanks everyone for responding. I was unable to access a <code>$XML::LibXML::VERSION</code> function but was able to find <code>XML::LibXML::LIBXML_VERSION</code> so I assume that is what you meant. However these version numbers don&#39;t seem that old. Can you elaborate on which version number I should be looking at?"}], "answers": [{"comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1473327582, "post_id": 39379830, "comment_id": 66101524, "body": "&quot;I&#39;d probably use <code>$entry-&gt;findvalue(&#39;.&#47;@atr1&#39;)</code>&quot;. Unless you care about performance. Tied hashes are also incredibly slow. Unfortunately, even <code>getAttribute</code> got a Perl wrapper in 1.61 for dubious reasons which made me switch to <code>_getAttribute</code> in performance-critical code. This is undocumented and bad practice, of course, but it was the only way to avoid serious performance regressions."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473333166, "post_id": 39379830, "comment_id": 66104977, "body": "I like the guide. Good job. :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1473348696, "post_id": 39379830, "comment_id": 66115986, "body": "@nwellnhof, Re &quot;<i>Tied hashes are also incredibly slow</i>&quot;, Mostly because they translate into Perl method calls. As such, they&#39;re not nearly as slow when compared against an actual Perl sub/method call. However, in this case, we have the method call to get the tied hash on top of the sub call to the tied method, so it should still be very slow."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 2, "last_activity_date": 1473568234, "last_edit_date": 1473568234, "creation_date": 1473286595, "answer_id": 39379830, "question_id": 39377881, "link": "https://stackoverflow.com/questions/39377881/xmllibxml-unexpected-error-accessing-attribute-values/39379830#39379830", "title": "XML::LibXML unexpected error accessing attribute values", "body": "<p>As the author of the guide that you have been using, I'm sorry that you've encountered this problem and feel that the tone of some of the comments and replies here has been unduly harsh.</p>\n\n<p>The code you posted <strong>does</strong> work on versions of XML::LibXML that support it and <strong>is</strong> covered in the <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Element.pod#OVERLOADING\" rel=\"nofollow\">OVERLOADING section of the XML::LibXML::Element docs</a>.  This \"tied hash\" interface is a more 'Perlish' way to access attribute values than calling the <code>getAttribute()</code> method. One advantage is that the hash access works inside a double-quoted string whereas an explicit method call will not.</p>\n\n<p>From my reading of the <a href=\"https://metacpan.org/changes/distribution/XML-LibXML\" rel=\"nofollow\">ChangeLog</a>, this overloading behaviour was added to the Element class in version 1.91 released on 2012-02-21, although the AttributeHash interface has been available since at least 2009.</p>\n\n<p>I have updated the <a href=\"http://grantm.github.io/perl-libxml-by-example/basics.html#tied-attribute-hash\" rel=\"nofollow\">tutorial section</a> to mention that this function is not available on older versions of XML::LibXML.  I did originally consider including that warning, but decided against it since the feature has been in XML::LibXML for so long.</p>\n\n<p>As a general rule, if you're using a Perl object, it would be considered very poor practice to assume the object was a hashref and poke around inside it to access hash values.  However that's not what's happening in this case and the hash you're accessing has been provided and documented for exactly that purpose.</p>\n\n<p>If I was going to use a method call to get the value, I'd probably use:</p>\n\n<pre><code>$entry-&gt;findvalue('./@atr1')\n</code></pre>\n\n<p>since this can easily be adapted to access text or attribute content from nested elements as well.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1473297009, "creation_date": 1473297009, "answer_id": 39381127, "question_id": 39377881, "link": "https://stackoverflow.com/questions/39377881/xmllibxml-unexpected-error-accessing-attribute-values/39381127#39381127", "title": "XML::LibXML unexpected error accessing attribute values", "body": "<p>The ability to use</p>\n\n<pre><code>$entry-&gt;{'atr1'}\n</code></pre>\n\n<p>was added to XML::LibXML in version 1.91. It's equivalent to</p>\n\n<pre><code>$entry-&gt;getAttributeHash()-&gt;{$name}\n</code></pre>\n\n<p>You must have an older version of XML::LibXML. You could upgrade XML::LibXML, but you might as well use</p>\n\n<pre><code>$entry-&gt;getAttribute('atr1')\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 3552168, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/52b2c2e453b07c0d9611e21a9c8edf08?s=128&d=identicon&r=PG&f=1", "display_name": "cms", "link": "https://stackoverflow.com/users/3552168/cms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473568234, "creation_date": 1473277331, "last_edit_date": 1473425784, "question_id": 39377881, "link": "https://stackoverflow.com/questions/39377881/xmllibxml-unexpected-error-accessing-attribute-values", "title": "XML::LibXML unexpected error accessing attribute values", "body": "\n\n<p>I am running through the gentle introduction to <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> at <a href=\"http://grantm.github.io/perl-libxml-by-example/index.html\" rel=\"nofollow\"><em>Perl XML::LibXML by Example</em></a> and cannot seem to get hash attributes working. For example, what is wrong with the following code?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $version = XML::LibXML::LIBXML_VERSION;\nmy $dot_version = XML::LibXML::LIBXML_DOTTED_VERSION;\nmy $run_version = XML::LibXML::LIBXML_RUNTIME_VERSION;\nprint \"LibXML version: $version\\n\";\nprint \"LibXML dotted version: $dot_version\\n\";\nprint \"LibXML runtime version: $run_version\\n\";\nprint \"Perl version: $^V\\n\";\n\nmy $xml = q{\n&lt;record&gt;\n  &lt;entry atr1=\"a\" atr2=\"b\" atr3=\"c\" /&gt;\n&lt;/record&gt;\n};\n\nmy $dom = XML::LibXML-&gt;load_xml( string =&gt; $xml );\nmy ($entry) = $dom-&gt;documentElement-&gt;getChildrenByTagName('entry');\n\nprint \"\\$entry is a: \", ref($entry), \"\\n\";\nprint \"node name: \", $entry-&gt;nodeName, \"\\n\";\nprint \"Attribute: \", $entry-&gt;getAttribute('atr1'), \"\\n\";    # Line 26\nprint \"Attribute: \", $entry-&gt;{'atr1'}, \"\\n\";                # Line 27\n</code></pre>\n\n<p>With the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$./hashtest.pl \nLibXML version: 20706\nLibXML dotted version: 2.7.6\nLibXML runtime version: 20706\nPerl version: v5.10.1\n$entry is a: XML::LibXML::Element\nnode name: entry\nAttribute: a\nNot a HASH reference at ./hashtest.pl line 27.\n</code></pre>\n\n<p>I am expecting lines 26 and 27 to have the same output. Any guidance would be much appreciated.</p>\n\n<p><strong>Edit: Added more complete version information</strong></p>\n"}, {"tags": ["arrays", "perl", "sorting", "perl-module", "perl-data-structures"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1473275680, "post_id": 39377460, "comment_id": 66082872, "body": "I don&#39;t understand your question at all. Can you post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1473276166, "post_id": 39377460, "comment_id": 66083114, "body": "Please show the content of <code>@output</code> (first few lines), the output of <code>print $t;</code>, and your desired output."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1473276472, "post_id": 39377460, "comment_id": 66083253, "body": "Edited my question. Please advice.."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1473276504, "post_id": 39377460, "comment_id": 66083276, "body": "Your &quot;code&quot; contains syntax errors. &quot;<i>Verifiable \u2013 Test the code you&#39;re about to provide to make sure it reproduces the problem.</i>&quot;"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1473276951, "post_id": 39377460, "comment_id": 66083485, "body": "The code <code>my @v = values $val;</code> (when corrected to <code>my @v = values %$val;</code>) returns the values in <i>random</i> order. That&#39;s how hashes work. Also, you don&#39;t use <code>@v</code> at all but push <code>@output</code> instead."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1473277118, "post_id": 39377460, "comment_id": 66083567, "body": "@PerlDog Except <code>@output</code> only has a single element and <code>$val</code> is an array reference. Or it would be if the data was in valid Perl syntax."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1473278283, "post_id": 39377460, "comment_id": 66084075, "body": "<code>one: &quot;1&quot;</code> is not valid Perl. That looks like broken JSON if anything."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473280371, "post_id": 39377460, "comment_id": 66085026, "body": "Note: <code>values $val</code> is <i>experimental</i>. You should be using <code>values %$val</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1473282376, "post_id": 39377460, "comment_id": 66085912, "body": "@PerlDog: It&#39;s probably better to think of it as <i>arbitary</i> order rather than random. <code>perldoc -f values</code> does say &quot;Hash entries are returned in an apparently random order.&quot;, but you shouldn&#39;t depend on that; for example, depending on <code>values %whatever</code> to be in a truly random order is a bad idea. (As I recall, in old versions of Perl the order was decidedly non-random -- but still arbitrary.)"}], "answers": [{"comments": [{"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1473292370, "post_id": 39378450, "comment_id": 66089037, "body": "Wow! Thank you :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1473281159, "last_edit_date": 1473281159, "creation_date": 1473280005, "answer_id": 39378450, "question_id": 39377460, "link": "https://stackoverflow.com/questions/39377460/how-to-stop-array-sort-in-perl/39378450#39378450", "title": "How to stop array sort in Perl", "body": "<p>It's not being sorted. Quite the opposite, the problem is that you <em>didn't</em> order the values. Fixed:</p>\n\n<pre><code>my @field_names = qw( one two three four );\n\n$t-&gt;setCols(@field_names);\n\nfor my $val ( @output ) {\n   push @$t, @$val{@field_names};\n}\n</code></pre>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 39378450, "answer_count": 1, "score": -2, "last_activity_date": 1473281159, "creation_date": 1473275446, "last_edit_date": 1473280359, "question_id": 39377460, "link": "https://stackoverflow.com/questions/39377460/how-to-stop-array-sort-in-perl", "title": "How to stop array sort in Perl", "body": "<p>I knew this is a very basic question in Perl so i could not find solution for this anywhere. </p>\n\n<p>I am using Perl package <a href=\"https://metacpan.org/pod/Text::ASCIITable\" rel=\"nofollow\">Text::ASCIITable</a> to beautify the output. </p>\n\n<p>Below is my code, where i am constructing table row using array. </p>\n\n<pre><code>my @output =  [\n    {\n        one =&gt; \"1\",\n        two =&gt; \"2\",\n        three =&gt; \"3\",\n        four =&gt; \"4\",        \n    },\n    {\n        one =&gt; \"1\",\n        two =&gt; \"2\",\n        three =&gt; \"3\",\n        four =&gt; \"4\",    \n    }\n];  \n\nmy $t = Text::ASCIITable-&gt;new();\n\n# Table header values as static. \n$t-&gt;setCols('one','two','three','four');\n\nforeach my $val ( @output ) {\n    my @v = values $val;\n    push @$t, @v;\n}\n\nprint $t;\n</code></pre>\n\n<p>This gives me output as below</p>\n\n<pre><code>.-----+-----+-------+------.\n| one | two | three | four |\n|=----+-----+-------+-----=|\n| 1   | 2   | 3     | 4    |  \n| 2   | 4   | 3     | 1    |  \n'-----+-----+-------+------'\n</code></pre>\n\n<p>The problem is, the table row is getting shuffled and it does not match with table header.  Because the given input array sort itself that makes me annoying. </p>\n\n<p>So how to stop Perl to sort array? I just want get the result as it is. </p>\n\n<p>Any help would be appreciated greatly. </p>\n"}, {"tags": ["perl", "inheritance", "perl-module"], "comments": [{"owner": {"reputation": 4464, "user_id": 1695393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c21cf77652a5e0fd60403a1cca57d68?s=128&d=identicon&r=PG", "display_name": "dubes", "link": "https://stackoverflow.com/users/1695393/dubes"}, "edited": false, "score": 0, "creation_date": 1473279223, "post_id": 39377418, "comment_id": 66084514, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe\">How is Perl&#39;s @INC constructed? (aka What are all the ways of affecting where Perl modules are searched for?)</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 4464, "user_id": 1695393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c21cf77652a5e0fd60403a1cca57d68?s=128&d=identicon&r=PG", "display_name": "dubes", "link": "https://stackoverflow.com/users/1695393/dubes"}, "edited": false, "score": 1, "creation_date": 1473283120, "post_id": 39377418, "comment_id": 66086252, "body": "@dubes I disagree with that assessment."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1473283291, "last_edit_date": 1473283291, "creation_date": 1473276567, "answer_id": 39377701, "question_id": 39377418, "link": "https://stackoverflow.com/questions/39377418/inheritance-in-perl-is-showing-a-error-in-my-case/39377701#39377701", "title": "Inheritance in perl is showing a error in my case", "body": "<p>The inheritance has nothing to do with it. You are not exporting anything, so the <code>foo</code> subroutine is not in your script's namespace. </p>\n\n<p>In fact you are also mixing up object oriented concepts (the inheritance) and classic Perl modules. If you have a non oop module, you can have exporter and bring subs into your script. If you have a class, you can inherit from another class. But then you would typically not export anything. </p>\n\n<p>Now if you wanted to use <code>two</code> to import something from <code>one</code>, essentially building something like a collection of common functions, you would need to use Exporter in <code>one</code>, then <code>use one</code> in <code>two</code>, and then use Exporter in <code>two</code> to export the functions imported from <code>one</code>. </p>\n\n<p>Sounds complicated? It does because it is complicated. There is no real benefit from doing that unless saving one line of <code>use one</code> in your script.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6401465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAlcL.png?s=128&g=1", "display_name": "Yugandhar Reddy Akkisetty", "link": "https://stackoverflow.com/users/6401465/yugandhar-reddy-akkisetty"}, "edited": false, "score": 1, "creation_date": 1473321103, "post_id": 39377788, "comment_id": 66097729, "body": "Thank you for explaining  inheritance and import"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1498191970, "last_edit_date": 1498191970, "creation_date": 1473276993, "answer_id": 39377788, "question_id": 39377418, "link": "https://stackoverflow.com/questions/39377418/inheritance-in-perl-is-showing-a-error-in-my-case/39377788#39377788", "title": "Inheritance in perl is showing a error in my case", "body": "<p>Inheritance works on objects. What you're trying to do is importing, not inherit. I've outlined both an example of inheritance and importing below.</p>\n\n<p>Inheritance:</p>\n\n<p><code>One.pm</code>:</p>\n\n<pre><code>package One;\n\nsub foo {\n    print \"this is one\\n\";\n}\n1;\n</code></pre>\n\n<p><code>Two.pm</code>:</p>\n\n<pre><code>package Two;\n\n# Note the use of 'use base ...;'. That means that we'll inherit \n# all functions from the package we're calling it on. We can override\n# any inherited methods by re-defining them if we need/want\n\nuse base 'One';\n\nsub new {\n    return bless {}, shift;\n}\n1;\n</code></pre>\n\n<p><code>inherit.pl</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Two;\n\nmy $obj = Two-&gt;new;\n$obj-&gt;foo;\n</code></pre>\n\n<p>Importing:</p>\n\n<p><code>One.pm</code>:</p>\n\n<pre><code>package One;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(foo); # allow user to import the 'foo' function if desired\n\nsub foo {\n    print \"this is one\\n\";\n}\n1;\n</code></pre>\n\n<p><code>Two.pm</code>:</p>\n\n<pre><code>package Two;\nuse One qw(foo); # import foo() from One\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(foo); # re-export it so users of Two can import it\n\n1;\n</code></pre>\n\n<p><code>import.pl</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Two qw(foo);\n\nfoo();\n</code></pre>\n\n<p>Note that in the next Perl Release (5.26.0), <code>@INC</code> will not include the current working directory by default, so to <code>use One;</code> or <code>use Two;</code> if those module files are in the local directory, you'll have to add <code>use lib '.';</code> or <code>unshift @INC, '.';</code> or the like.</p>\n"}], "owner": {"reputation": 1, "user_id": 6401465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BAlcL.png?s=128&g=1", "display_name": "Yugandhar Reddy Akkisetty", "link": "https://stackoverflow.com/users/6401465/yugandhar-reddy-akkisetty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 39377788, "answer_count": 2, "score": 0, "last_activity_date": 1498191970, "creation_date": 1473275242, "last_edit_date": 1473326903, "question_id": 39377418, "link": "https://stackoverflow.com/questions/39377418/inheritance-in-perl-is-showing-a-error-in-my-case", "title": "Inheritance in perl is showing a error in my case", "body": "<p>I have two perl modules onee.pm and two.pm and one perl script.Following is one.pm</p>\n\n<pre><code> package one;\nsub foo\n{\n print \"this is one\\n\";\n}\nsub goo\n{\n print \"This is two\\n\";\n}\n1;\n</code></pre>\n\n<p>two.pm</p>\n\n<pre><code>package two;\nuse one;\n@ISA=(one);\nsub hoo\n{\n  print \"this is three \\n\";\n}\n1;\n</code></pre>\n\n<p>inherit.pl</p>\n\n<pre><code>use two;\nfoo();\n</code></pre>\n\n<p>when i execute inherit.pl am getting following error.</p>\n\n<pre><code> Undefined subroutine &amp;main::foo called at inherit.pl line 2.\n</code></pre>\n"}, {"tags": ["perl", "dbi", "freetds"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1473270972, "post_id": 39376395, "comment_id": 66080722, "body": "What happens if you omit the call to <code>bind_param</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473271292, "post_id": 39376395, "comment_id": 66080871, "body": "What happens if you omit the call to <code>bind_param</code> and use <code>$sth-&gt;execute($xml)</code> instead?"}, {"owner": {"reputation": 301, "user_id": 1502055, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc79e2560b7c41a3533cd983c7cc9120?s=128&d=identicon&r=PG", "display_name": "Shashi", "link": "https://stackoverflow.com/users/1502055/shashi"}, "edited": false, "score": 0, "creation_date": 1473271319, "post_id": 39376395, "comment_id": 66080882, "body": "Same Result <code>DBD::Sybase::st execute failed: Server message number=9400 severity=16 state=1 line=0 server=... procedure=... text=XML parsing: line 3, character 7976, unexpected end of input</code> , getting truncated to ~7K"}, {"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 1, "creation_date": 1473279638, "post_id": 39376395, "comment_id": 66084687, "body": "I&#39;m not sure (it&#39;s been a while since I&#39;ve used FreeTDS with DBI), but are you sure the truncation happens around 7K? Or is the error saying lines 1 and 2, plus the 7k+ characters on line 3? Either way, check the value of <code>text size</code> in <code>freetds.conf</code>; you can set it to a max of <code>4294967295</code> and see if that has any effect."}, {"owner": {"reputation": 301, "user_id": 1502055, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc79e2560b7c41a3533cd983c7cc9120?s=128&d=identicon&r=PG", "display_name": "Shashi", "link": "https://stackoverflow.com/users/1502055/shashi"}, "edited": false, "score": 0, "creation_date": 1473341772, "post_id": 39376395, "comment_id": 66110952, "body": "Tried setting <code>text size in freetds.conf to 4294967295</code> , did not help."}, {"owner": {"reputation": 301, "user_id": 1502055, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc79e2560b7c41a3533cd983c7cc9120?s=128&d=identicon&r=PG", "display_name": "Shashi", "link": "https://stackoverflow.com/users/1502055/shashi"}, "edited": false, "score": 0, "creation_date": 1473342348, "post_id": 39376395, "comment_id": 66111345, "body": "One observation to share on <b>SAMPLE CODE 2</b> , <code>by enabling freeTDS logs</code> , observe that Client sent two packets , but before sending third packet it receives XML Error packet from server and closes the connection."}], "owner": {"reputation": 301, "user_id": 1502055, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fc79e2560b7c41a3533cd983c7cc9120?s=128&d=identicon&r=PG", "display_name": "Shashi", "link": "https://stackoverflow.com/users/1502055/shashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1479767812, "creation_date": 1473270802, "last_edit_date": 1479767812, "question_id": 39376395, "link": "https://stackoverflow.com/questions/39376395/perl-dbi-quote-function-v-s-bind-params-handling-large-inputs", "title": "Perl DBI : quote function v/s bind_params , handling large inputs", "body": "<p>Want to understand the difference between DBI::quote v/s bind_params of statement handlers, while handling large inputs to a stored procedure.</p>\n\n<p><strong>Environment :</strong> Perl + DBI + FreedTDS -> SQL Server</p>\n\n<p><strong>SAMPLE CODE 1</strong> : using function quote()</p>\n\n<pre><code>$xml = `cat bigfile_insrt.txt.xml.5k`; \nmy $qouted = $dbh-&gt;quote($xml);\n$dbh-&gt;do(qq{exec sp_toload \\@XML = $qouted});\n\nThis code seems like can handle till 100MB worth of $xml\n</code></pre>\n\n<p><strong>SAMPLE CODE 2</strong> : using bind_params as CLOB</p>\n\n<pre><code>my $qry = \"exec sp_toload \\@XML = ?\";\n$xml = `cat bigfile_insrt.txt.xml.5k`;\nmy $sth = $dbh-&gt;prepare($qry);\n#$sth-&gt;bind_param(1,$xml,SQL_LONGVARBINARY);\n$sth-&gt;bind_param(1,$xml,SQL_CLOB);\n$sth-&gt;execute();\n\ngets truncated to 7K bytes max for $xml\n</code></pre>\n\n<p>Wondering why bind_params with both SQL_LONGVARBINARY or SQL_CLOB <strong>cannot</strong> go beyond 7K bytes, while Sample 1 using quote can handle ~100MB of data</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 2, "creation_date": 1473267936, "post_id": 39375623, "comment_id": 66079254, "body": "<code>s&#47;\\\\\\\\&#47;\\\\&#47;g</code> - you also have to escape the backslash in the regex"}, {"owner": {"reputation": 1025, "user_id": 5823128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Ymiy.jpg?s=128&g=1", "display_name": "Faibbus", "link": "https://stackoverflow.com/users/5823128/faibbus"}, "edited": false, "score": 0, "creation_date": 1473268176, "post_id": 39375623, "comment_id": 66079359, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2115398/how-can-i-unescape-backslashes-in-a-perl-string\">How can I unescape backslashes in a Perl string?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 4, "last_activity_date": 1473268654, "last_edit_date": 1473268654, "creation_date": 1473267910, "answer_id": 39375666, "question_id": 39375623, "link": "https://stackoverflow.com/questions/39375623/how-can-i-substitute-double-backslash-with-1/39375666#39375666", "title": "How can I substitute double backslash with 1?", "body": "<p>You need four backslashes as the backslash itself needs to be escaped as well:</p>\n\n<pre><code>$string =~ s/\\\\\\\\/\\\\/g\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/mP7gQ9/2\" rel=\"nofollow\"><strong>a demo on regex101.com</strong></a>.\n<hr>\nA complete example in <code>Perl</code>:</p>\n\n<pre><code>my $string = 'this is a double backslash: \\\\\\\\';\nprint $string . \"\\n\";\n$string =~ s/\\\\\\\\/\\\\/g;\nprint $string;\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/poOtIN\" rel=\"nofollow\"><strong>demo on ideone.com</strong></a>.</p>\n"}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 39375666, "answer_count": 1, "score": 1, "last_activity_date": 1473268654, "creation_date": 1473267699, "question_id": 39375623, "link": "https://stackoverflow.com/questions/39375623/how-can-i-substitute-double-backslash-with-1", "title": "How can I substitute double backslash with 1?", "body": "<p>Having a string that has the backslash escaped i.e. <code>\\\\</code> how can I make it single backslash?<br>\nThe <code>$string =~ s/\\\\/\\/g;</code> does not work. </p>\n"}, {"tags": ["perl", "date", "time", "compare", "zone"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1473264589, "post_id": 39374720, "comment_id": 66077470, "body": "You&#39;ll need to convert $current_time into epoch format or into some kind of date-time object. I&#39;d use DateTime::Format::Strptime for that."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1473264741, "post_id": 39374720, "comment_id": 66077563, "body": "Where did you get the <code>$creation_time</code> from? Is it guaranteed to always be a GMT time?"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1473264952, "post_id": 39374720, "comment_id": 66077690, "body": "Thanks ikegami. I will try DateTime::Format. redneb: $creation_time is the time when my file was created and yes it is always in GMT time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1473321631, "post_id": 39374720, "comment_id": 66098047, "body": "How is <code>$creation_time</code> populated? Could you change that code to get the value in a more useful format?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1473276651, "post_id": 39375558, "comment_id": 66083350, "body": "Thanks Dave, but Time::Piece is not available in our /usr/bin/"}, {"owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1473276752, "post_id": 39375558, "comment_id": 66083392, "body": "Is there a way to atleast convert any given time format into epoch using DateTime or Time::Local?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "edited": false, "score": 0, "creation_date": 1473281351, "post_id": 39375558, "comment_id": 66085451, "body": "Well, I wouldn&#39;t expect to see Time::Piece in /usr/bin - as a library, it belongs in /usr/lib :-) But if you don&#39;t have Time::Piece installed, you either have a really old version of Perl or a Red Hat-style broken installation. You should get that fixed as soon as possible."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1473267403, "creation_date": 1473267403, "answer_id": 39375558, "question_id": 39374720, "link": "https://stackoverflow.com/questions/39374720/compare-date-time-zone-with-time-in-perl/39375558#39375558", "title": "Compare date time zone with time() in perl", "body": "<p><a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\">Time::Piece</a> has been a standard part of Perl since 2007.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse Time::Piece;\nuse Time::Seconds;\n\nmy $creation_string = '08-07-2016 08:16:26 GMT';\n\nmy $creation_time = Time::Piece-&gt;strptime($creation_string, '%d-%m-%Y %H:%M:%S %Z');\nmy $current_time = gmtime;\n\nmy $diff = $current_time - $creation_time;\n\nsay $diff; # Difference in seconds\nsay $diff-&gt;pretty;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 2461335, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc3adb904ac4d1f2059022583c089c25?s=128&d=identicon&r=PG", "display_name": "user2461335", "link": "https://stackoverflow.com/users/2461335/user2461335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 1, "accepted_answer_id": 39375558, "answer_count": 1, "score": 1, "last_activity_date": 1473277033, "creation_date": 1473264418, "last_edit_date": 1473277033, "question_id": 39374720, "link": "https://stackoverflow.com/questions/39374720/compare-date-time-zone-with-time-in-perl", "title": "Compare date time zone with time() in perl", "body": "<p>I am trying to compare a file creation time which is in the format: 08-07-2016 08:16:26 GMT with the current time using time() in perl.\nSince time() returns epoch time, I am not sure how to find the time difference between these two different time formats.</p>\n\n<p>I tried something like below and for obvious reasons, I get an error saying: \"Argument 08-07-2016 08:16:26 GMT\" isn't numeric in subtraction\".</p>\n\n<pre><code>my $current_time = time();\nmy $time_diff = $creation_time - $current_time;\nif ($time_diff &gt; 10) {                  #compare if the difference is greater than 10hours\n    # do something...\n}\n</code></pre>\n\n<p>Some of the questions I have:</p>\n\n<ol>\n<li>Since I want to compare only the hour difference, how can I extract just the hours from both these time formats?</li>\n<li>I am unsure if the comparison of $time_diff > 10 is right. How to represent 10hours? 10*60?</li>\n</ol>\n\n<p>OR is there a way to at least convert any given time format into epoch using DateTime or Time::Local?</p>\n\n<p>How can I pass a a date parameter to a DateTime constructor?</p>\n\n<pre><code>my $dt1 = DateTime-&gt; new (\n                 year =&gt;'1998',\n                 month =&gt;'4',\n                 day   =&gt;'4',\n                 hour  =&gt;'21',\n                 time_zone =&gt;'local'\n                 );\n</code></pre>\n\n<p>Instead can we do something like</p>\n\n<pre><code>my $date = '08-07-2016 08:16:26 GMT';\nmy $dt1 = DateTime-&gt;new($date);  # how can i pass a parameter to the constructor\nprint Dumper($dt1-&gt;epoch);\n</code></pre>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1473259732, "post_id": 39372918, "comment_id": 66074166, "body": "So, what have you considered doing?  It looks pretty straight-forward.  Grab the version from the first; check whether all the others are the same, printing any discrepant versions.  Of course, there&#39;s a risk that the first machine is the one with the odd version. You could also create a hash with the count of each version (keyed by the version) and when you&#39;ve finished the loop above, iterate over the keys of that new hash to report versions and counts. You could also create a hash keyed on version with the list of machines using that version.  Etc.  All good clean basic Perl programming fun."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473260536, "post_id": 39372918, "comment_id": 66074806, "body": "It looks like you are writing object-oriented software, in which case you should be using accessor methods instead of treating <code>$self</code> as an ordinary hash reference."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1473260414, "creation_date": 1473260414, "answer_id": 39373332, "question_id": 39372918, "link": "https://stackoverflow.com/questions/39372918/string-comparison-in-foreach/39373332#39373332", "title": "string comparison in foreach", "body": "<p>This will do as you ask</p>\n\n<pre><code>sub check_matching_info {\n\n    my ($self) = @_;\n\n    my $ips = $self-&gt;{queryObj}-&gt;get_machine_ip;\n\n    my %info;\n\n    for my $ip ( @$ips ) {\n        my $info = $self-&gt;{queryObj}-&gt;get_install_info($ip);\n        push @{ $info{$info} }, $ip;\n    }\n\n    print keys %info == 1 ? \"All IPs have the same install info\" : \"IPs have different install info\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4973, "user_id": 153891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b287bcae476beaa660680430cd399c0?s=128&d=identicon&r=PG", "display_name": "woolstar", "link": "https://stackoverflow.com/users/153891/woolstar"}, "is_accepted": false, "score": 0, "last_activity_date": 1473263352, "creation_date": 1473263352, "answer_id": 39374347, "question_id": 39372918, "link": "https://stackoverflow.com/questions/39372918/string-comparison-in-foreach/39374347#39374347", "title": "string comparison in foreach", "body": "<p>As always, everything has already been written for you, you just have to find it.  While there are some gems in core available through <code>List::Util</code>, what we want today is not in core, but is in <code>List::MoreUtils</code>.</p>\n\n<pre><code>use List::MoreUtils ('all') ;\n\nsub check_versions_equal\n{\n  my ($self)= @_ ;\n  my @vers= map ( $self-&gt;{queryObj}-&gt;get_install_info($_) }\n            @{$self-&gt;{queryObjs}-&gt;get_machine_ip ;}\n  return true unless @vers ;  # empty list case ;\n  my ($v)= @vers ;\n  return all { $_ eq $v } @vers ;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6190552, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c49c39feb0218eb3a5e6372e16a71029?s=128&d=identicon&r=PG&f=1", "display_name": "nims", "link": "https://stackoverflow.com/users/6190552/nims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 39373332, "answer_count": 2, "score": -1, "last_activity_date": 1473264660, "creation_date": 1473259282, "last_edit_date": 1473259949, "question_id": 39372918, "link": "https://stackoverflow.com/questions/39372918/string-comparison-in-foreach", "title": "string comparison in foreach", "body": "\n\n<p>The below test is to check the software information on a list of IP addresses. \nThe program prints the version of software running on all the IPs as expected.</p>\n\n<p>Now, I would like to test whether the software running on all the IPs are identical? How do I do that?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub test_check_software_info_on_all_the_ips {\n\n    my ($self) = @_;\n\n    $self-&gt;{'machine_ip'} = $self-&gt;{'queryObj'}-&gt;get_machine_ip();\n\n    foreach my $ip ( @{ $self-&gt;{'machine_ip'} } ) {\n\n        $self-&gt;{'install_info'} = $self-&gt;{'queryObj'}-&gt;get_install_info($ip);\n\n        INFO( 'Software info of ' . $ip . ' is ' . $self-&gt;{'install_info'} );\n    }\n}\n</code></pre>\n\n<p>Sample output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>20160907T141846   INFO    Software info of 1.1.1.1 is r-2016-08-27-03\n20160907T141846   INFO    Software info of 2.2.2.2 is r-2016-08-27-03\n20160907T141847   INFO    Software info of 3.3.3.3 is r-2016-08-27-03\n20160907T141847   INFO    Software info of 4.4.4.4 is r-2016-08-27-03\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1473259373, "post_id": 39372863, "comment_id": 66073870, "body": "Why did you put the two <code>select FH;</code> statements there?"}, {"owner": {"reputation": 804, "user_id": 1210825, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/H0lE8.png?s=128&g=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/1210825/sascha"}, "edited": false, "score": 0, "creation_date": 1473259397, "post_id": 39372863, "comment_id": 66073895, "body": "I think the problem is with select. Without it, it works. see <a href=\"http://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/select.html</a> for missing flags/bitmasks"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 804, "user_id": 1210825, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/H0lE8.png?s=128&g=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/1210825/sascha"}, "edited": false, "score": 2, "creation_date": 1473262463, "post_id": 39372863, "comment_id": 66076122, "body": "@Sascha: I think you might be getting confused between the two Perl functions called <code>select</code>. This is the one with a single argument - which has nothing to do with flags or bitmasks."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473259723, "post_id": 39372990, "comment_id": 66074158, "body": "also, enabling warnings would have shown this, with a <code>print() on closed filehandle</code> warning on the print."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1473259865, "post_id": 39372990, "comment_id": 66074281, "body": "Oops. That&#39;s what I get for walking away from the screen in the middle of a post :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1473259478, "creation_date": 1473259478, "answer_id": 39372990, "question_id": 39372863, "link": "https://stackoverflow.com/questions/39372863/write-into-a-file-and-open-the-same-file-for-input/39372990#39372990", "title": "Write into a file and open the same file for input", "body": "<p>Your <code>print $_</code> goes into a closed file handle. Since you selected <code>FH</code> to be the default output file handle, and you closed it, you can't write there any more. In any case, that file handle is not the screen. So even if it was open, you would not see it on the screen. </p>\n\n<p>You need to save STDOUT and reselect it.</p>\n\n<pre><code>open(FH,'&gt;',  \"temp.out\") or die \"cannot open\";\nmy $stdout = select FH;\nprint \"Hello World!\";\nclose FH;\nselect $stdout;  # here\nopen (FI, \"temp.out\") or die \"cannot open\";\nwhile(&lt;FI&gt;){\n    print $_;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473260011, "post_id": 39373099, "comment_id": 66074409, "body": "Yes. I didn&#39;t add that. Not enough time. Take the credit, you are right. :-)"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473260190, "post_id": 39373099, "comment_id": 66074549, "body": "NP, first is first! :)"}], "tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": false, "score": 5, "last_activity_date": 1473259762, "creation_date": 1473259762, "answer_id": 39373099, "question_id": 39372863, "link": "https://stackoverflow.com/questions/39372863/write-into-a-file-and-open-the-same-file-for-input/39373099#39373099", "title": "Write into a file and open the same file for input", "body": "<p>Always use <code>strict</code> and <code>warnings</code> in your scripts, this would have caught the error you encountered:</p>\n\n<pre><code>print() on closed filehandle FH at t.pl line 10, &lt;FI&gt; line 1.\n</code></pre>\n\n<p>Your <code>FH</code> is still selected after all, even if you closed it. Unless you have a lot of print statements and can somehow isolate your <code>select</code> (e.g. select at the start of a function and restore the previous default at the end) I'd say it's preferable to explicitly specify the file handle in the <code>print</code> statement.</p>\n"}], "owner": {"reputation": 61, "user_id": 6557410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IESuiJZiLxU/AAAAAAAAAAI/AAAAAAAAACs/OSlboD-eSPI/photo.jpg?sz=128", "display_name": "Lalit Somnathe", "link": "https://stackoverflow.com/users/6557410/lalit-somnathe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473259768, "creation_date": 1473259118, "last_edit_date": 1473259768, "question_id": 39372863, "link": "https://stackoverflow.com/questions/39372863/write-into-a-file-and-open-the-same-file-for-input", "title": "Write into a file and open the same file for input", "body": "<p>I was writing a Perl script like below</p>\n\n<pre><code>open(FH, '&gt;', \"temp.out\") or die \"cannot open\";\nselect FH;\n\nprint \"Hello World!\";\nclose FH;\n\nopen (FI, \"temp.out\") or die \"cannot open\";\nwhile ( &lt;FI&gt; ) {\n    print $_;\n}\n</code></pre>\n\n<p>Unfortunately when I am running this script I am not getting \"Hello World!\" printed. This should be an ideal case, isn't it?</p>\n\n<p>However in the <code>temp.out</code> file I can see \"Hello World!\" printed.</p>\n\n<p>I tried using a variable for the filename, but that also didn't work.</p>\n"}, {"tags": ["regex", "perl", "file", "loops"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 1, "last_activity_date": 1473259493, "last_edit_date": 1473259493, "creation_date": 1473258992, "answer_id": 39372822, "question_id": 39372711, "link": "https://stackoverflow.com/questions/39372711/how-to-extract-titles-from-a-text-file-and-use-those-titles-to-open-other-files/39372822#39372822", "title": "how to extract titles from a text file and use those titles to open other files and search for patterns", "body": "<p>My approach would be like below to solve the problem.</p>\n\n<pre><code>my $filename = 'names.txt';\nopen (my $fh, \"&lt;\", $filename) or die $!;\n\n# assuming each line contains file name\nwhile ( &lt;$fh&gt; ) {\n    chomp $_;\n    my $file_contents;\n    {\n        open (my $fh, '&lt;', $_) or die $!;\n        local $/ = undef;\n        $file_contents = &lt;$fh&gt;;\n        close $fh;\n    }\n    print \"Matched!\" if $file_contents =~ /GGGGG/;\n}\n</code></pre>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"http://perlmaven.com/open-and-read-from-files\" rel=\"nofollow\">Open and read from text files</a></li>\n<li><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">Regex in Perl</a></li>\n<li><a href=\"http://perldoc.perl.org/perlsyn.html#Loop-Control\" rel=\"nofollow\">Loops in Perl</a></li>\n</ul>\n"}], "owner": {"reputation": 53, "user_id": 6804908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e49096a7b3636481a885407cc4f66c2?s=128&d=identicon&r=PG&f=1", "display_name": "Megiddo", "link": "https://stackoverflow.com/users/6804908/megiddo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 39372822, "answer_count": 1, "score": -2, "last_activity_date": 1473455671, "creation_date": 1473258683, "last_edit_date": 1473265910, "question_id": 39372711, "link": "https://stackoverflow.com/questions/39372711/how-to-extract-titles-from-a-text-file-and-use-those-titles-to-open-other-files", "title": "how to extract titles from a text file and use those titles to open other files and search for patterns", "body": "<p>I am trying to figure out a Perl program that reads a text file containing file names, opens each of those files and searches them for a regular expression (eg GGggG).</p>\n\n<p>I am reasoning that first I need to read the file and save everything into an array.</p>\n\n<p>Then <code>foreach</code> element of the array, <code>open</code> the corresponding file and search within it.</p>\n\n<p>Can someone please help?</p>\n\n<p>This code works (gratia Chankey Pathak) for lines containing only one title thus not needing any processing:</p>\n\n<pre><code> my $filename = 'names.txt';\n    open (my $fh, \"&lt;\", $filename) or die $!;\n    while ( &lt;$fh&gt; ) {\n        chomp $_;\n        my $file_contents;\n        {\n            open (my $fh, '&lt;', $_) or die $!;\n\n            my $file_contents = '';\n               while (&lt;$fh&gt;) {\n               $file_contents .= $_;\n        print \"Matched!\" if $file_contents =~ /gggggg/i;\n}\n}\n}\n</code></pre>\n\n<p>But what if the name file is full of names (few/line) separated only by \\t?</p>\n"}, {"tags": ["bash", "perl", "sed", "tr"], "comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 2, "creation_date": 1473254364, "post_id": 39370869, "comment_id": 66070077, "body": "There&#39;s nothing wrong with what you have written, other than that the semicolons aren&#39;t needed as you are separating your sed commands with line breaks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473270575, "post_id": 39370869, "comment_id": 66080527, "body": "<code>xB0 -&gt; x20</code> is redundant."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 0, "creation_date": 1473254129, "post_id": 39370918, "comment_id": 66069896, "body": "Thank you, can i ask you if this will re-read the file from the beginning for every application of sed / change i require, i m asking because the files are upwards of 300 mb each. Thank you again."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "reply_to_user": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 0, "creation_date": 1473254222, "post_id": 39370918, "comment_id": 66069967, "body": "I don&#39;t know definitely, but my gut tells me that it does not re-read the file for each <code>-e</code> as that would be very inefficient."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "reply_to_user": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 1, "creation_date": 1473254401, "post_id": 39370918, "comment_id": 66070102, "body": "Just looked at the source code to <code>sed</code> and it compiles all of the expressions (<code>-e</code>) into a single &quot;program&quot; that it then runs. So no, it does not re-read the file each time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473271275, "post_id": 39370918, "comment_id": 66080867, "body": "Be careful. This approach breaks if you have mappings such as A-&gt;B plus B-&gt;C"}], "tags": [], "owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "is_accepted": true, "score": 6, "last_activity_date": 1473254160, "last_edit_date": 1473254160, "creation_date": 1473254036, "answer_id": 39370918, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash/39370918#39370918", "title": "Transliterate Characters in Hex in Bash", "body": "<p>You can pass multiple expressions (<code>-e</code>) to <code>sed</code>:</p>\n\n<pre><code>sed \\\n    -e 's/\\x00/\\x20/g' \\\n    -e 's/\\xB0/\\x20/g' \\\n    -e 's/\\x21/\\x40/g' \\\n    -e 's/[\\x80-\\xFF]/\\x20/g' \\\n    -e 's/\\x22/\\x43/g' File_In &gt; File_out\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 1, "last_activity_date": 1473256225, "last_edit_date": 1473256225, "creation_date": 1473255668, "answer_id": 39371537, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash/39371537#39371537", "title": "Transliterate Characters in Hex in Bash", "body": "<p>You can also use the <code>y</code> command to <a href=\"http://www.grymoire.com/Unix/Sed.html#uh-49\" rel=\"nofollow\">transliterate</a>:</p>\n\n<pre><code>$ sed 'y/\\x20\\x2B/\\x21\\x2D/' &lt;&lt;&lt; \"foo bar+more\"\nfoo!bar-more\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1473258495, "creation_date": 1473258495, "answer_id": 39372640, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash/39372640#39372640", "title": "Transliterate Characters in Hex in Bash", "body": "<p>In Perl that would look like</p>\n\n<pre><code>perl -i.bak -pe '\n    tr/\\x00\\x80-\\xFF\\xB0/\\x20/;\n    tr/\\x21/\\x40/;\n    tr/\\x22/\\x43/;\n' myfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1473271471, "last_edit_date": 1473271471, "creation_date": 1473270799, "answer_id": 39376390, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash/39376390#39376390", "title": "Transliterate Characters in Hex in Bash", "body": "<p>The following still defines the mapping as a map, but generates a single, efficient <code>tr///</code> to do the actual work.</p>\n\n<pre><code>perl -i~ -p &lt;(\n   perl -e'\n      my %tr = (\n         ( map { chr($_) =&gt; \" \" } 0x00, 0x80..0xFF ),\n         q{!} =&gt; q{@},\n         q{\"} =&gt; q{C},\n      );\n\n      my $s = join \"\", map { sprintf \"\\\\x%02X\", ord($_) } keys   %tr;\n      my $r = join \"\", map { sprintf \"\\\\x%02X\", ord($_) } values %tr;\n      print(\"tr/$s/$r/\");\n  '\n) myfile\n</code></pre>\n\n<hr>\n\n<p>Faster?</p>\n\n<pre><code>sed -i~ &lt;(\n   perl -e'\n      my %tr = (\n         ( map { chr($_) =&gt; \" \" } 0x00, 0x80..0xFF ),\n         q{!} =&gt; q{@},\n         q{\"} =&gt; q{C},\n      );\n\n      my $s = join \"\", map { sprintf \"\\\\x%02X\", ord($_) } keys   %tr;\n      my $r = join \"\", map { sprintf \"\\\\x%02X\", ord($_) } values %tr;\n      print(\"y/$s/$r/\");\n  '\n) myfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1473322261, "creation_date": 1473322261, "answer_id": 39385756, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash/39385756#39385756", "title": "Transliterate Characters in Hex in Bash", "body": "<p>This might work for you (GNU sed and Bash):</p>\n\n<pre><code>cat &lt;&lt;\\! | sed -f - fileIn &gt; fileOut\ns/\\x00/\\x20/g\ns/\\xB0/\\x20/g\n.\n.\n.\n!\n</code></pre>\n\n<p>Use a here-document and pass it as a script to sed using the <code>-f -</code> option. </p>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 39370918, "answer_count": 5, "score": 2, "last_activity_date": 1473322261, "creation_date": 1473253914, "question_id": 39370869, "link": "https://stackoverflow.com/questions/39370869/transliterate-characters-in-hex-in-bash", "title": "Transliterate Characters in Hex in Bash", "body": "<p>i have a set of hexadecimals that i d like to transliterate to another set of hexadecimals, in example :</p>\n\n<pre><code>x00 -&gt; x20\nxB0 -&gt; x20\nx21 -&gt; x40\nx80-xFF -&gt; x20\nx22 -&gt; x43\n</code></pre>\n\n<p>I know i can chain sed statements like :</p>\n\n<pre><code>sed -i.bak $'s/[\\x80-\\xFF]/\\x20/g'\n</code></pre>\n\n<p>or like :</p>\n\n<pre><code>sed -e 's/\\x00/\\x20/g;s/\\xB0/\\x20/g'\n</code></pre>\n\n<p>but is there a way to \"break\" those separate changes by line so its more readable? Like :</p>\n\n<pre><code>sed -e '\n s/\\x00/\\x20/g;\n s/\\xB0/\\x20/g;\n .\n .\n .\n ' File_In &gt; File_out\n</code></pre>\n\n<p>If its not possible, could this be done with perl? Thank you.</p>\n"}, {"tags": ["perl", "getopt-long"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473259218, "post_id": 39370464, "comment_id": 66073743, "body": "It&#39;s unclear what you mean by &quot;flags&quot;. if you run your code above with just <code>-lf</code> as an option then <code>GetOptions</code> will return an error status. Do you mean you want some of the options to be mandatory?"}, {"owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473260335, "post_id": 39370464, "comment_id": 66074657, "body": "@Borodin By flags I mean -lf, -uf, -trd and -vd. I can run the script without a false result by: script.pl arg1 arg2 arg3 arg4. It was my expectation that this would fail to run as this was not provided: script.pl -lf arg1 -uf arg2 -trd arg3 -vd arg4."}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 4, "last_activity_date": 1473253101, "creation_date": 1473253101, "answer_id": 39370596, "question_id": 39370464, "link": "https://stackoverflow.com/questions/39370464/force-use-of-flags-getoptlong/39370596#39370596", "title": "Force use of flags Getopt::Long", "body": "<blockquote>\n  <p><strong>Q:</strong> GetOptions does not return a false result when an option is not supplied </p>\n  \n  <p><strong>A:</strong> That's why they're called 'options'.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://perldoc.perl.org/Getopt/Long.html#GetOptions-does-not-return-a-false-result-when-an-option-is-not-supplied\" rel=\"nofollow\">Getopt::Long documentation</a></p>\n\n<p>You could add conditionals to check value of flags and if they are not defined then call <code>die</code> or call <code>usage</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1473261106, "creation_date": 1473261106, "answer_id": 39373582, "question_id": 39370464, "link": "https://stackoverflow.com/questions/39370464/force-use-of-flags-getoptlong/39373582#39373582", "title": "Force use of flags Getopt::Long", "body": "<p><code>Getopt::Long</code> will search for all the command line options that you specify in the <code>GetOptions</code> call. None of them are required, but an individual option may be required to have a value of a specific type, and <code>GetOptions</code> will return a <em>false</em> status if a value is missing or has the wrong type</p>\n\n<p>Any options and their values are removed from the command line, and anything that is left is passed to the program through <code>@ARGV</code> as normal</p>\n\n<p>Most programs don't require all of the possible options to be provided on the command line, so if you want to insist that all are specified then you can simply test them with</p>\n\n<pre><code>use List::Util 'all';\n\ndie $usage unless all { defined } $var1, $var2, $var3, $var4, $var5;\n</code></pre>\n\n<p>You may also want to require that there is no input which isn't specified as one of the options, in which case you can just check <code>@ARGV</code></p>\n\n<pre><code>die $usage if @ARGV;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1473263256, "creation_date": 1473263256, "answer_id": 39374318, "question_id": 39370464, "link": "https://stackoverflow.com/questions/39370464/force-use-of-flags-getoptlong/39374318#39374318", "title": "Force use of flags Getopt::Long", "body": "<p>Just check afterwards.</p>\n\n<pre><code>use File::Basename qw( basename );\n\nsub help {\n    print(...);\n    exit(0);\n}\n\nsub usage {\n   if (@_) {\n      my ($msg) = @_;\n      chomp($msg);\n      warn(\"$msg\\n\");\n   }\n\n   my $prog_name = basename($0);\n\n   warn(\"Use $prog_name --help for more information\\n\");\n   exit(1);\n}\n\nmy ($var1, $var2, $var3, $var4, $var5);\n\nGetOptions(\n   'help|h|?' =&gt; \\&amp;help,\n   'r=s'      =&gt; \\$var1,\n   'lf=f'     =&gt; \\$var2,\n   'uf=f'     =&gt; \\$var3,\n   'trd=i'    =&gt; \\$var4,\n   'vd=f'     =&gt; \\$var5\n)\n    or usage();\n\ndefined($var2)\n   or usage(\"-lf must be provided\");\n</code></pre>\n"}], "owner": {"reputation": 1261, "user_id": 4030463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b152908db1fb6d0e205df83a47478488?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaSchumann", "link": "https://stackoverflow.com/users/4030463/annaschumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 39370596, "answer_count": 3, "score": 3, "last_activity_date": 1473263256, "creation_date": 1473252719, "last_edit_date": 1473252973, "question_id": 39370464, "link": "https://stackoverflow.com/questions/39370464/force-use-of-flags-getoptlong", "title": "Force use of flags Getopt::Long", "body": "<p>Is there a way to force the use of -flags when reading in command-line arguments using Getopt::Long? For example in my current situation:</p>\n\n<pre><code>GetOptions('r=s' =&gt; \\$var1,\n              'lf=f' =&gt; \\$var2,\n              'uf=f' =&gt; \\$var3,\n              'trd=i' =&gt; \\$var4,\n              'vd=f' =&gt; \\$var5)\nor die(\"$usage\");\n</code></pre>\n\n<p>The script does not exit or display $usage if the arguments are still provided but without the flags (such as -lf). Instead it runs regardless until it inevitably errors later on as the arguments were not read into their respective variables (and may well be in the wrong order). </p>\n"}, {"tags": ["perl", "ms-word", "ole"], "answers": [{"comments": [{"owner": {"reputation": 817, "user_id": 1862675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330824231944b516d5b2b77c084295ef?s=128&d=identicon&r=PG", "display_name": "yossiz74", "link": "https://stackoverflow.com/users/1862675/yossiz74"}, "edited": false, "score": 0, "creation_date": 1473277583, "post_id": 39370091, "comment_id": 66083771, "body": "Thanks! Added $tbl-&gt;Columns-&gt;AutoFit(); and it works just great."}], "tags": [], "owner": {"reputation": 804, "user_id": 1210825, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/H0lE8.png?s=128&g=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/1210825/sascha"}, "is_accepted": true, "score": 2, "last_activity_date": 1473251606, "creation_date": 1473251606, "answer_id": 39370091, "question_id": 39369824, "link": "https://stackoverflow.com/questions/39369824/win32-ole-perl-resize-table-column-width-to-text/39370091#39370091", "title": "Win32 OLE (perl) - resize table column width to text", "body": "<p>Have you tried the Cells.AutoFit() method? e.g. <code>Columns.AutoFit</code></p>\n\n<p>It seems only supported for Excel 2010 and newer, though.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/office/ff837476.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/office/ff837476.aspx</a></p>\n"}], "owner": {"reputation": 817, "user_id": 1862675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330824231944b516d5b2b77c084295ef?s=128&d=identicon&r=PG", "display_name": "yossiz74", "link": "https://stackoverflow.com/users/1862675/yossiz74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 39370091, "answer_count": 1, "score": 0, "last_activity_date": 1473251606, "creation_date": 1473250839, "question_id": 39369824, "link": "https://stackoverflow.com/questions/39369824/win32-ole-perl-resize-table-column-width-to-text", "title": "Win32 OLE (perl) - resize table column width to text", "body": "<p>I have a Perl script which adds rows with some text to an existing table in a Word document using Win32::OLE.<br>\nNow, I would like to have it also resize the table's columns to match the text size (just like double-clicking on the vertical line between two columns)\nI know how to set a column to a specific width, but I can't seem to find an API for resizing a column to match the text size.</p>\n\n<p>Can anyone tell me what to look for? </p>\n\n<p>For reference, here is a code snippet from my script:</p>\n\n<pre><code>my $tbl = $document-&gt;Tables(1);\nmy $row = $tbl-&gt;Rows-&gt;Add();\n$row-&gt;Cells(1)-&gt;Range()-&gt;InsertAfter($timestamp);\n$row-&gt;Cells(2)-&gt;Range()-&gt;InsertAfter($comment);\n$row-&gt;Cells(3)-&gt;Range()-&gt;InsertAfter($username);\n# TODO: resize columns to match the content\n</code></pre>\n"}, {"tags": ["arrays", "perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473250756, "post_id": 39369612, "comment_id": 66067396, "body": "Hi redneb , this is a very nice trick I didn&#39;t know about.  But this is not working for me , I get the value 0 when trying to do this although there are IPS in the output. are you sure about this line &quot; <code>netstat -Aa | grep &#39;@IPS&#39; | wc -l</code>&quot;?"}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473251221, "post_id": 39369612, "comment_id": 66067720, "body": "Well , I do not type it myself , I take it from external source and this is why I won&#39;t be able to know the number of IPS in the array.  any other way you know to do this?"}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473253086, "post_id": 39369612, "comment_id": 66069138, "body": "Thanks , I will try this."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 0, "last_activity_date": 1473252019, "last_edit_date": 1473252019, "creation_date": 1473250228, "answer_id": 39369612, "question_id": 39369534, "link": "https://stackoverflow.com/questions/39369534/grep-elements-from-array-that-exists-in-output/39369612#39369612", "title": "Grep elements from array that exists in output", "body": "<p>A quick and dirty way to do this is by utilizing the <code>$\"</code> variable in perl:</p>\n\n<pre><code>my @IPS =(\"10.20.30\",\"12.13.14\",\"30.40.50\");\nlocal $\"='|';\nmy $cmd = `netstat -Aa | grep '@IPS' | wc -l`\nprint \"$cmd\";\n</code></pre>\n\n<p>The idea is that <code>$\"</code> controls how an array variable is appears when interpolated inside some quotes. So by saying <code>$\"='|'</code> we cause the <code>@IPS</code> array to be interpolated as a concatenation of its elements separated by <code>|</code>. <strong>Note</strong>: you should only use this if you trust of the source of <code>@IPS</code> e.g. if you type it yourself in the code. If it comes from an untrusted external source, the above trick might be dangerous.</p>\n\n<p><strong>Edit</strong>: If <code>@IPS</code> does come from an untrusted source, you can validate it first like so</p>\n\n<pre><code>/^[\\d.]+$/ or die \"Invalid IP address\" for @IPS;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473252393, "post_id": 39369966, "comment_id": 66068580, "body": "Thanks for the detailed answer , I tried the alternative to the regex and the array contains nothing. in this case is it matter how I insert the IPS into IPS array? because I do it by using command :    my @IPS = <code>$cmd | tr &quot; &quot; &quot;\\n&quot;</code>;  chomp @IPS"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473252549, "post_id": 39369966, "comment_id": 66068693, "body": "See my update. That alternative version doesn&#39;t work. It doesn&#39;t matter how the array is populated - but you need to be sure that the elements contain <b>only</b> the IP addresses. It&#39;s very easy, for example, to get newline characters included too - and that won&#39;t work."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 1, "creation_date": 1473252641, "post_id": 39369966, "comment_id": 66068753, "body": "You need to stop passing so much stuff on to external programs. Perl has its own perfectly useable <code>tr&#47;...&#47;...&#47;</code> operator :-)"}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473253063, "post_id": 39369966, "comment_id": 66069117, "body": "Thanks for the advice , I will try the first solution soon and approve if it works."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1473252316, "last_edit_date": 1473252316, "creation_date": 1473251244, "answer_id": 39369966, "question_id": 39369534, "link": "https://stackoverflow.com/questions/39369534/grep-elements-from-array-that-exists-in-output/39369966#39369966", "title": "Grep elements from array that exists in output", "body": "<p>Your <code>@IPS</code> array does not contain what you think it contains. I think you probably wanted:</p>\n\n<pre><code>my @IPS = (\"10.20.30\",\"12.13.14\",\"30.40.50\");\n</code></pre>\n\n<p>And I'd write that as:</p>\n\n<pre><code>my @IPS = qw(10.20.30 12.13.14 30.40.50);\n</code></pre>\n\n<blockquote>\n  <p>I know I can use \" | \" or condition but assume that I do not know the number of elements in array</p>\n</blockquote>\n\n<p>I don't think that matters at all.</p>\n\n<pre><code># Need quotemeta() to escape the dots\nmy $IP_str = join '|', map { quotemeta $_ } @IPS;\nmy $IP_re  = qr/$IP_str/;\n\n# Keep as much of the processing as possible in Perl-space\nmy @found = grep { /$IP_str/ } `netstat -Aa`;\nsay scalar @found;\n</code></pre>\n\n<p>An alternative to the regex, is to turn @IPS into a hash.</p>\n\n<pre><code>my %IP = map { $_ =&gt; 1 } @IPS;\nmy @found = grep { $IP{$_} } `netstat -Aa`;\nsay scalar @found;\n</code></pre>\n\n<p><strong>Update:</strong> Actually, that last example doesn't work. You would need to extract the IP addresses from the <code>netstat</code> output before matching against the hash. but I've left it there in case it inspires anyone to expand it.</p>\n"}], "owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 39369966, "answer_count": 2, "score": 0, "last_activity_date": 1473252316, "creation_date": 1473250011, "last_edit_date": 1473251013, "question_id": 39369534, "link": "https://stackoverflow.com/questions/39369534/grep-elements-from-array-that-exists-in-output", "title": "Grep elements from array that exists in output", "body": "<p>Is there any way to use grep to find only elements that exists in specific array?\nFor example :</p>\n\n<pre><code>my @IPS ={\"10.20.30\",\"12.13.14\",\"30.40.50\"};\n\nmy $cmd = `netstat -Aa | grep -c IPS[0] OR IPS[1] OR IPS[2]  `\n\nprint \"$cmd\";\n</code></pre>\n\n<p>I want cmd to return the number of IPS (only those found in the array) that exists in the output of netstat command.\nI know I can use \" | \" or condition but assume that I do not know the number of elements in array.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1473242752, "post_id": 39366700, "comment_id": 66062041, "body": "Which version of Perl are you using?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1473242848, "post_id": 39366700, "comment_id": 66062100, "body": "@Zaid The version of perl is <code>5.14</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1473243223, "post_id": 39367045, "comment_id": 66062329, "body": "I forgot about concatenation now I got it.  It is really nice and thank you :)"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1473243507, "post_id": 39367045, "comment_id": 66062496, "body": "@mkHun you&#39;re welcome. Do try out the <code>\\K</code> suggestion in my edit as well; it&#39;s cleaner because you don&#39;t have to muck around with <code>$1</code> in the replacement string more than necessary"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1473243766, "post_id": 39367045, "comment_id": 66062657, "body": "FYI: <code>\\K</code> is a <i>variable-length <b>positive</b> lookbehind</i> workaround."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1473243901, "post_id": 39367045, "comment_id": 66062754, "body": "@WiktorStribi\u017cew : true, though the context of this problem should make that clear :)"}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": true, "score": 2, "last_activity_date": 1473244193, "last_edit_date": 1473244193, "creation_date": 1473243099, "answer_id": 39367045, "question_id": 39366700, "link": "https://stackoverflow.com/questions/39366700/substitution-with-eval-and-repeat-the-character-by-grouping-string-length/39367045#39367045", "title": "substitution with eval and repeat the character by grouping string length?", "body": "<p>The <code>e</code> modifier returns back just the last-executed statement, so</p>\n\n<pre><code>$s=~s/&lt;B&gt;(.+?)&lt;\\/B&gt;/\"$1\\\\n\";\"-\" x length($1)/seg;\n</code></pre>\n\n<p>throws away the <code>\"$1\\\\n\"</code> (which should really be <code>\"$1\\n\"</code>)</p>\n\n<p>This works:</p>\n\n<pre><code>$s=~s/&lt;B&gt;(.+?)&lt;\\/B&gt;/\"$1\\n\" . \"-\" x length($1)/seg;\n</code></pre>\n\n<p>The reason I was asking about your Perl version was to assess if it was possible to do what is effectively a variable-length lookbehind with <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\"><code>\\K</code></a>:</p>\n\n<pre><code>$s=~s/&lt;B&gt;(.+?)&lt;\\/B&gt;\\K/ \"\\n\" . \"-\" x length($1)/seg;\n</code></pre>\n\n<p><code>\\K</code> is available for Perl versions 5.10+.</p>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 2, "accepted_answer_id": 39367045, "answer_count": 1, "score": 2, "last_activity_date": 1473296250, "creation_date": 1473242041, "last_edit_date": 1473296250, "question_id": 39366700, "link": "https://stackoverflow.com/questions/39366700/substitution-with-eval-and-repeat-the-character-by-grouping-string-length", "title": "substitution with eval and repeat the character by grouping string length?", "body": "<p>My input as follow</p>\n\n<pre><code>my $s = '&lt;B&gt;Estimated:&lt;/B&gt;\n\nThe N-terminal of the sequence considered is M (Met).\n\nThe estimated half-life is: 30 hours (mammalian reticulocytes, in vitro).\n                        &gt;20 hours (yeast, in vivo).\n                        &gt;10 hours (Escherichia coli, in vivo).\n\n\n&lt;B&gt;Instability index:&lt;/B&gt;\n\nThe instability index (II) is computed to be 31.98\nThis classifies the protein as stable.';\n</code></pre>\n\n<p>I want to remove the <code>&lt;B&gt;&lt;/B&gt;</code> tags from string and put the underline for bold tags.</p>\n\n<p>I expected output is</p>\n\n<pre><code>Estimated:\n---------\nThe N-terminal of the sequence considered is M (Met).\n\nThe estimated half-life is: 30 hours (mammalian reticulocytes, in vitro).\n                        &gt;20 hours (yeast, in vivo).\n                        &gt;10 hours (Escherichia coli, in vivo).\n\n\nInstability index:\n------------------\nThe instability index (II) is computed to be 31.98\nThis classifies the protein as stable.\n</code></pre>\n\n<p>For this tried the following regex but I don't know what is the problem there.</p>\n\n<pre><code>$s=~s/&lt;B&gt;(.+?)&lt;\\/B&gt;/\"$1\\n\";\"-\" x length($1)/seg; # $1\\n in not working\n</code></pre>\n\n<p>In the above regex I don't know how to put this <code>\"$1\\n\"</code>? And how to use the continuous statement in substitution separated by <code>;</code> or anything else?</p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1473240673, "post_id": 39366153, "comment_id": 66060772, "body": "With <a href=\"http://p3rl.org/Moose\" rel=\"nofollow noreferrer\">Moose</a>, one doesn&#39;t write <code>sub new</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6818959"}, "edited": false, "score": 0, "creation_date": 1473240846, "post_id": 39366237, "comment_id": 66060884, "body": "Where, specifically, do you mean, please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6818959"}, "edited": false, "score": 0, "creation_date": 1473241719, "post_id": 39366237, "comment_id": 66061451, "body": "Thank you.  The problem was exactly as you said - no need for &quot;sub new&quot;.  In fact the sub in question seems to bu... stuff up the whole thing.  Either &quot;sub new&quot; in M or Foo seems to do it."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1473241822, "post_id": 39366237, "comment_id": 66061522, "body": "@DiamondGeezer: &quot;Thank you&quot; on StackOverflow = vote up / accept :-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6818959"}, "edited": false, "score": 0, "creation_date": 1473243478, "post_id": 39366237, "comment_id": 66062470, "body": "Indeed, but one needs more rep before one is able to do that :-D"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473263320, "post_id": 39366237, "comment_id": 66076669, "body": "Lots of OO modules export constants, though <code>use Exporter; @ISA = qw( Exporter );</code> has been replaced with <code>use Exporter qw( import );</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1473241002, "last_edit_date": 1473241002, "creation_date": 1473240728, "answer_id": 39366237, "question_id": 39366153, "link": "https://stackoverflow.com/questions/39366153/perl-moose-cant-call-method-x-on-an-undefined-value/39366237#39366237", "title": "Perl + moose: Can&#39;t call method &quot;x&quot; on an undefined value", "body": "<p>With <a href=\"http://p3rl.org/Moose\" rel=\"nofollow\">Moose</a>, you shouldn't write <code>sub new</code>. Moose provides the constructor for you.</p>\n\n<p>Also, using <a href=\"http://p3rl.org/Exporter\" rel=\"nofollow\">Exporter</a> makes no sense with object-oriented modules. The following program works for me:</p>\n\n<pre><code>#!/usr/bin/perl\n\n{   package M;\n    use Moose;\n    use Data::Dumper;\n\n    sub x {\n        my ($self, $stuff) = @_;\n        print Dumper($stuff);\n    }\n}\n\n\n{   package Foo;\n    use Moose;\n\n    has mS =&gt; ( is =&gt; 'ro', default =&gt; sub { 'M'-&gt;new } );\n\n    sub bar {\n        my ($self, $data) = @_;\n        my $foo = $self-&gt;mS;\n        $foo-&gt;x($data);\n    }\n}\n\nmy $foo = 'Foo'-&gt;new;\n$foo-&gt;bar('test');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1473247749, "creation_date": 1473247749, "answer_id": 39368714, "question_id": 39366153, "link": "https://stackoverflow.com/questions/39366153/perl-moose-cant-call-method-x-on-an-undefined-value/39368714#39368714", "title": "Perl + moose: Can&#39;t call method &quot;x&quot; on an undefined value", "body": "<p>You have a solution - don't write your own <code>new()</code> method when you're using Moose. But there's one other little point that might be worth making.</p>\n\n<p>The constructor that Moose will give you for your Foo class will work pretty well as a drop-in replacement for your <code>new()</code> method. But the one that Moose gives you for your M class will be missing a feature - it won't print your \"M::new!\\n\" message. How do we get round that?</p>\n\n<p>In Moose, you can define a <code>BUILD()</code> method which will be called immediately after <code>new()</code> has returned a new object. That's a good place to put any extra initialisation that your new object needs. It would also be be a good place for your <code>print()</code> call (although it happens <strong>after</strong> object construction, not before - so it's not an exact replacement).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6818959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473247749, "creation_date": 1473240534, "last_edit_date": 1473247214, "question_id": 39366153, "link": "https://stackoverflow.com/questions/39366153/perl-moose-cant-call-method-x-on-an-undefined-value", "title": "Perl + moose: Can&#39;t call method &quot;x&quot; on an undefined value", "body": "<p>I'm just trying to do this: <a href=\"http://modernperlbooks.com/mt/2011/08/youre-already-using-dependency-injection.html\" rel=\"nofollow\">http://modernperlbooks.com/mt/2011/08/youre-already-using-dependency-injection.html</a>.  Really not deviating too much at all from that example code.</p>\n\n<p>Here's what I've got:</p>\n\n<pre><code>package M;\nuse Moose;\nuse Exporter;\nuse Data::Dumper;\n\nsub new {\n    print \"M::new!\\n\";\n    my $class = shift;\n    return bless {}, $class;\n}\n\nsub x {\n    my ($self, $stuff) = @_;\n\n    print Dumper($stuff);\n}\n\n\n#################################\n\n\npackage Foo;\nuse Moose;\nuse Exporter;\n\nour @ISA = qw(Exporter);\nour @EXPORT = ();\n\nhas 'mS', is =&gt; 'ro', default =&gt; sub { M-&gt;new };\n\nsub new {\n    my $class = shift;\n    return bless {}, $class;\n}\n\nsub bar {\n    my ($self, $data) = @_;\n\n    # do stuff here...\n    # ...\n\n\n    my $foo = $self-&gt;mS;\n    # this...\n    $foo-&gt;x($data);\n    # ...causes \"Can't call method \"x\" on an undefined value at Foo.pm line 45.\"\n}\n\n1;\n</code></pre>\n\n<p>It's worth noting that the <code>M::new!</code> message never appears, so I'm guessing that it's never reached.  What's going on?</p>\n"}, {"tags": ["perl", "fork", "exec"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1473264363, "creation_date": 1473264363, "answer_id": 39374707, "question_id": 39365603, "link": "https://stackoverflow.com/questions/39365603/how-come-my-fork-exec-and-close-is-losing-the-error-code-from-the-child/39374707#39374707", "title": "How come my fork/exec and close is losing the error code from the child", "body": "<p>I don't know. It shouldn't happen. You could use the following instead:</p>\n\n<pre><code>use IPC::Open qw( open3 );\n\nmy $pid = open3(local *PIPE, '&gt;&amp;STDOUT', undef, @cmd);\nwhile (&lt;PIPE&gt;) {\n   ...\n}\n\nwaitpid($pid, 0);\n</code></pre>\n\n<p>Bonus: An error that occur while launching the child (e.g. an error from duping or from <code>exec</code>) throws an exception in the <em>parent</em>, so it doesn't look like the command ran and returned an error.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473269896, "post_id": 39374883, "comment_id": 66080206, "body": "I would still switch to <code>open3</code> for its better error handling"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473270034, "post_id": 39374883, "comment_id": 66080265, "body": "You could have added <code>local $?;</code> before the call to <code>system</code>"}], "tags": [], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "is_accepted": true, "score": 0, "last_activity_date": 1473264882, "creation_date": 1473264882, "answer_id": 39374883, "question_id": 39365603, "link": "https://stackoverflow.com/questions/39365603/how-come-my-fork-exec-and-close-is-losing-the-error-code-from-the-child/39374883#39374883", "title": "How come my fork/exec and close is losing the error code from the child", "body": "<p>Well, I found what it was.</p>\n\n<p>Someone had added an <code>END{}</code> block in a library that was destroying the return codes (by calling system and hence destroying $?). I backed out the change and everything was happy.</p>\n"}], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 39374883, "answer_count": 2, "score": 2, "last_activity_date": 1473264882, "creation_date": 1473239035, "question_id": 39365603, "link": "https://stackoverflow.com/questions/39365603/how-come-my-fork-exec-and-close-is-losing-the-error-code-from-the-child", "title": "How come my fork/exec and close is losing the error code from the child", "body": "<p>I have a piece of perl code that is roughly like this</p>\n\n<pre><code>my $pid = open(PIPE, '-|');\ndie \"Unable to fork: $!\\n\" if !defined $pid;\nif ($pid == 0)\n{\n    open STDERR, '&gt;&amp;STDOUT' or die \"Can't redirect STDERR to STDOUT\\n\";\n    exec(@cmd);\n    die \"Unexpected exec failure: $!\\n\";\n}\nmy @lines = (&lt;PIPE&gt;);\nclose PIPE;\nif ($? != 0) { do stuff; }\n</code></pre>\n\n<p>However, for reasons I can't understand, possibly related to the actual program being called not existing, sometimes this fails to pick up the error from the child in <code>$?</code></p>\n\n<p><code>@lines</code> contains the \"Unexpected exec failure: File or directory does not exist\" as expected (and some other output from a <code>$SIG{__DIE__}</code> handler), but <code>$?</code> is set to 0. I'm working round this for now by also checking the return from <code>close</code> which is fortunately set to 1. But where did my error code go?</p>\n"}, {"tags": ["perl", "firefox", "browser-automation", "www-mechanize", "mozrepl"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1473240897, "post_id": 39365265, "comment_id": 66060917, "body": "Could you share your code?"}, {"owner": {"reputation": 2045, "user_id": 1567109, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/674a19cc2cd50025003f4d198bbfa6fb?s=128&d=identicon&r=PG", "display_name": "Jeremy Gwa", "link": "https://stackoverflow.com/users/1567109/jeremy-gwa"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1473244321, "post_id": 39365265, "comment_id": 66063039, "body": "#!perl -w     use strict;     use WWW::Mechanize::Firefox;          my $mech = WWW::Mechanize::Firefox-&gt;new(         activate =&gt; 1, # bring the tab to the foreground     );     $mech-&gt;get(&#39;<a href=\"http://www.perlworkshop.de&#39;\" rel=\"nofollow noreferrer\">perlworkshop.de&#39;</a>);          &lt;&gt;;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473245043, "post_id": 39365265, "comment_id": 66063507, "body": "@JeremyGwa: Please don&#39;t put code in comments: it is impossible to read. You should <i>edit</i> your question to give additional information."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1473244316, "creation_date": 1473244316, "answer_id": 39367490, "question_id": 39365265, "link": "https://stackoverflow.com/questions/39365265/wwwmechanizefirefox-remove-welcome-text/39367490#39367490", "title": "WWW::Mechanize::Firefox - remove welcome text", "body": "<p>The banner is only displayed when <code>WWW::Mechanize::Firefox</code> creates a new browser tab to work with, so the obvious way is to use an existing tab in the browser</p>\n\n<p>If this isn't convenient then you must create a new <code>Firefox::Application</code> object, and use that to create a tab of your own without the banner</p>\n\n<p>The problem is that <code>WWW::Mechanize::Firefox</code> ordinarily passes its options to both of these steps, and writing the code manually breaks that connection. The best way is perhaps to subclass <code>WWW::Mechanize::Firefox</code> to provide a new constructor that behaves to your liking</p>\n\n<p>May I ask why you want to do this? What is the nature of your application that you need to see specific results on the browser?</p>\n"}], "owner": {"reputation": 2045, "user_id": 1567109, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/674a19cc2cd50025003f4d198bbfa6fb?s=128&d=identicon&r=PG", "display_name": "Jeremy Gwa", "link": "https://stackoverflow.com/users/1567109/jeremy-gwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473245112, "creation_date": 1473238094, "last_edit_date": 1592644375, "question_id": 39365265, "link": "https://stackoverflow.com/questions/39365265/wwwmechanizefirefox-remove-welcome-text", "title": "WWW::Mechanize::Firefox - remove welcome text", "body": "<p>Whenever I start a <a href=\"https://metacpan.org/pod/WWW::Mechanize::Firefox\" rel=\"nofollow noreferrer\"><code>WWW::Mechanize::Firefox</code></a> Perl script, the first thing that loads into the browser screen are the words &quot;WWW::Mechanize::Firefox&quot;.</p>\n<p>How do I disable this?</p>\n<h3>My Perl code</h3>\n<pre><code>#!perl -w\n\nuse strict;\n\nuse WWW::Mechanize::Firefox;\n\nmy $mech = WWW::Mechanize::Firefox-&gt;new( activate =&gt; 1 ); # bring the tab to the foreground\n\n$mech-&gt;get('perlworkshop.de');\n\n&lt;&gt;; \n</code></pre>\n"}, {"tags": ["perl", "perl-data-structures"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473254532, "post_id": 39364999, "comment_id": 66070212, "body": "What is <code>false</code>? Why are you comparing the result of <code>getDateInFileName</code> and <code>getDateInName</code> in the <code>sort</code> block?"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473254703, "post_id": 39364999, "comment_id": 66070309, "body": "@Borodin corrected"}], "answers": [{"comments": [{"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1473239039, "post_id": 39365397, "comment_id": 66059741, "body": "if (-s $reportFile) , will this check if all the files are not empty. I would want ot return only if ALL the files are empty Even if a single file out of 10000 files  has content , i would not return"}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1473241565, "post_id": 39365397, "comment_id": 66061342, "body": "@LearningCpp Yes, check the code again. The sub <code>all_empty</code> checks if all files are empty."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 1, "last_activity_date": 1473241516, "last_edit_date": 1473241516, "creation_date": 1473238456, "answer_id": 39365397, "question_id": 39364999, "link": "https://stackoverflow.com/questions/39364999/how-to-check-whether-file-content-is-empty-by-traversing-the-array-of-filename/39365397#39365397", "title": "How to check whether file content is empty , by traversing the array of filenames", "body": "<p>First off, if you only want to check if a file is empty, you should not try to read it. This might be dangerous as you might ending up reading a huge file in memory. You can test for a file being empty like that <code>if (-s $reportFile) {...}</code>. Secondly, to fix the problem that you have with returning if any file is empty, you need to invert the logic of you code, i.e. you must check if any file is <em>not</em> empty. This is because of the following logical equivalence: saying that \"all the files are empty\" is the same as \"no file is nonempty\". Putting it all together, you get something like that:</p>\n\n<pre><code>sub all_empty {\n    foreach my $reportFile (sort { getDateInFileName($b) &lt;=&gt; getDateInName($a)} @ReportFiles)\n    {\n       if (-s $reportFile) {\n           return 0;\n       }\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "is_accepted": false, "score": -1, "last_activity_date": 1473242245, "last_edit_date": 1473242245, "creation_date": 1473238669, "answer_id": 39365470, "question_id": 39364999, "link": "https://stackoverflow.com/questions/39364999/how-to-check-whether-file-content-is-empty-by-traversing-the-array-of-filename/39365470#39365470", "title": "How to check whether file content is empty , by traversing the array of filenames", "body": "<p>Try to have a boolean flag, which is set to one if u have content in atleast one file, so that you do not have to traverse through the array and return as soon as u find a file with content\n    And if there is no content in the file, go to next iteration to check if the content is avaialble.\n    And come out of loop if content is present in any of the file</p>\n\n<pre><code>my $isFileEmpty = 0 ;\nforeach my $reportFile (sort { getDateInFileName($b) &lt;=&gt; getDateInName($a)} @ReportFiles)\n{\n    my @fileData = readFile($reportFile);\n   if(@fileData) {\n      $isFileEmpty = 1;\n      last;     \n   }\n   else {\n      next ; \n    } \n}\nif($isFileEmpty eq 0)\n{\n\n    return;\n\n}\n\n\nPS : Do you have content available in most of the cases ?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473315574, "post_id": 39368695, "comment_id": 66094681, "body": "This is good of course, but the posted code suggests that they would like to have a record on which files are empty/non-empty.  It makes sense that we&#39;d like to know that, what in my mind makes clean and nice solutions far trickier. (Unless the recording in the posted code in fact isn&#39;t essential.)"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473317031, "post_id": 39368695, "comment_id": 66095427, "body": "@zdim if the individual status of each file is required then I&#39;d do something like <code>map -z, @_;</code> and work with the resultant array."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473317526, "post_id": 39368695, "comment_id": 66095669, "body": "Right, for example. Unfortunately it won&#39;t be as direct and clean.  In which case the loop might well be just as good."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473318022, "post_id": 39368695, "comment_id": 66095954, "body": "Let the OP clarify their intent first. What do they want the code to do?"}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": true, "score": 2, "last_activity_date": 1473249369, "last_edit_date": 1473249369, "creation_date": 1473247701, "answer_id": 39368695, "question_id": 39364999, "link": "https://stackoverflow.com/questions/39364999/how-to-check-whether-file-content-is-empty-by-traversing-the-array-of-filename/39368695#39368695", "title": "How to check whether file content is empty , by traversing the array of filenames", "body": "<p>Use <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow\"><code>List::Util::all</code></a>:</p>\n\n<blockquote>\n  <p>Similar to <code>any</code>, except that it requires all elements of the <code>@list</code> to make the <code>BLOCK</code> return true. If any element returns false, then it returns false. If the <code>BLOCK</code> never returns false or the <code>@list</code> was empty then it returns true.</p>\n</blockquote>\n\n<hr>\n\n<pre><code>use List::Util 'all';\n\nsub check_files {\n  ...\n  warn( \"All files empty\" ), return\n    if all { -z } @_;\n  ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub are_all_empty { all { -z } @_ }\n</code></pre>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 39368695, "answer_count": 3, "score": 0, "last_activity_date": 1480744642, "creation_date": 1473237287, "last_edit_date": 1473254660, "question_id": 39364999, "link": "https://stackoverflow.com/questions/39364999/how-to-check-whether-file-content-is-empty-by-traversing-the-array-of-filename", "title": "How to check whether file content is empty , by traversing the array of filenames", "body": "<p>i have a array of filenames , and i have to traverse this array and check whether the content of ALL the files is empty.</p>\n\n<p>Here is the code</p>\n\n<pre><code>foreach my $reportFile (sort { getDateInName($b) &lt;=&gt; getDateInName($a)} @ReportFiles)\n{\n   my @fileData = readFile($reportFile);\n   if(!@fileData)\n   {\n        outputLog(\"FAIL: File Doesnt Contain Any Data.\");\n        return;\n   }\n}\n</code></pre>\n\n<p>But in the code above, iam returning even if a single file is empty, \nI would like to know how can we check whether ALL the content of ALL files is empty and then return.</p>\n\n<p>So I would like to return only if none of the files in the array has content.</p>\n\n<p>Even if one file has content i wouldnt return</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "perl", "awk"], "comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473232727, "post_id": 39363480, "comment_id": 66055977, "body": "How many different kinds of ids are there about in file1? 10^9? Your example has 3 lines and 3 different ids."}, {"owner": {"reputation": 415, "user_id": 3402502, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1436fff0da27a15ebdd76e568e9e56be?s=128&d=identicon&r=PG", "display_name": "shutdown -h now", "link": "https://stackoverflow.com/users/3402502/shutdown-h-now"}, "edited": false, "score": 1, "creation_date": 1473232755, "post_id": 39363480, "comment_id": 66055988, "body": "i think you should try to do maybe piece of code in one of technology, now you just asked about your whole ready to work program."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473232771, "post_id": 39363480, "comment_id": 66055996, "body": "@JamesBrown About 10^9 sadly."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 1, "creation_date": 1473233055, "post_id": 39363480, "comment_id": 66056161, "body": "Probably in two phases then. For example using AWK read all ids from file2 into memory, match those ids against file1 and you have a list of ids to fetch from file2. That way no need to store 10^9 keys in memory but only 10^6."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473233231, "post_id": 39363480, "comment_id": 66056273, "body": "Do you need to preserve the order of the lines from file2?"}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473233259, "post_id": 39363480, "comment_id": 66056291, "body": "@ysth No I do not."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1473233343, "post_id": 39363480, "comment_id": 66056345, "body": "More context may be useful, for example are the ids sequential? Are the two files already sorted, or can they actually be sorted? If that&#39;s the case there you can easily find on the net a python or perl implementation of a binary search. I&#39;ve used it in perl with a 4 million record file and it handled 50.000 queries per second."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1473233479, "post_id": 39363480, "comment_id": 66056430, "body": "@ChatterOne Sadly neither presorted nor are the ids sequential."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473234411, "post_id": 39363480, "comment_id": 66056933, "body": "Is there any other data than the ids, like real payload, the third field or something?"}], "answers": [{"comments": [{"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473233321, "post_id": 39363699, "comment_id": 66056335, "body": "Thank you. I have never used sqlite. Do I just add from sqlite3 import *  ?"}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 2, "creation_date": 1473233425, "post_id": 39363699, "comment_id": 66056397, "body": "<code>sqlite3</code> is a stand alone executable. You just execute it with <code>sqlite3 test.sqlite</code> and it will create a new database called <code>test.sqlite</code>. Then it will give you a prompt where you can type sql commands. In that prompt, just type the commands I gave above."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473233500, "post_id": 39363699, "comment_id": 66056444, "body": "Ah yes. There is also a python sqlite module I think which might also work."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473233591, "post_id": 39363699, "comment_id": 66056485, "body": "Yes there is python sqlite module, but there is no need to use python for something so simple like that."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473233621, "post_id": 39363699, "comment_id": 66056498, "body": "<code>UNION ALL</code> will include duplicates from <code>id2</code> and in worst case doubles the amount of ids in <code>all_ids</code>."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473233708, "post_id": 39363699, "comment_id": 66056549, "body": "@JamesBrown You are right. I changed it to <code>UNION</code>. Semantically it didn&#39;t matter though because <code>IN</code> doesn&#39;t care about duplicates, but yes, it is better to take care of duplicates with <code>UNION</code> here."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473235067, "post_id": 39363699, "comment_id": 66057309, "body": "@eleanora, please check back after trying this solution. I&#39;d like to know how long it took? Thank you."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 4, "last_activity_date": 1473233717, "last_edit_date": 1473233717, "creation_date": 1473233134, "answer_id": 39363699, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file/39363699#39363699", "title": "Filter a smaller file using another huge file", "body": "<p>I would actually use <code>sqlite</code> for something like that. You could create a new database from the same directory as two files with <code>sqlite3 test.sqlite</code> and then do something like that:</p>\n\n<pre><code>create table file1(id1, id2);\ncreate table file2(id1, id2);\n.separator \",\"\n.import file1.csv file1\n.import file2.csv file2\nWITH all_ids AS (\n    SELECT id1 FROM file1 UNION SELECT id2 FROM file1\n)\nSELECT * FROM file2 WHERE id1 IN all_ids OR id2 IN all_ids;\n</code></pre>\n\n<p>The advantage of using <code>sqlite</code> is that you can manage the memory more intelligently than a simple script that you could write in some scripting language.</p>\n"}, {"comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1473235616, "post_id": 39364010, "comment_id": 66057639, "body": "This is Perl for anyone who hasn&#39;t worked it out ;-)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1473263188, "post_id": 39364010, "comment_id": 66076586, "body": "Curious to know how long this takes to run"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1473237136, "last_edit_date": 1473237136, "creation_date": 1473234154, "answer_id": 39364010, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file/39364010#39364010", "title": "Filter a smaller file using another huge file", "body": "<p>In perl,</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\n# read file2\nopen my $file2, '&lt;', 'file2';\nchomp( my @file2 = &lt;$file2&gt; );\nclose $file2;\n\n# record file2 line numbers each id is found on\nmy %id;\nfor my $line_number (0..$#file2) {\n    for my $id ( split /,/, $file2[$line_number] ) {\n        push @{ $id{$id} }, $line_number;\n    }\n}\n\n# look for those ids in file1\nmy @use_line;\nopen my $file1, '&lt;', 'file1';\nwhile ( my $line = &lt;$file1&gt; ) {\n    chomp $line;\n    for my $id ( split /,/, $line ) {\n        if ( exists $id{$id} ) {\n            @use_line[ @{ $id{$id} } ] = @{ $id{$id} };\n        }\n    }\n}\nclose $file1;\n\n# print lines whose ids were found\nprint \"$_\\n\" for @file2[ grep defined, @use_line ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473260818, "post_id": 39364025, "comment_id": 66075012, "body": "The OP wants to print the lines from file2, not from file1. Printing the lines from file1 would be MUCH simpler! If you meant to use <code>file2</code> instead of <code>file1</code> as the argument for your 2nd script - it would only print the first line from file2 that matched a field from file1 so that wouldn&#39;t work."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473264139, "post_id": 39364025, "comment_id": 66077208, "body": "Oops, <code>file2</code> definitely. Thanks."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473269274, "post_id": 39364025, "comment_id": 66079916, "body": "You&#39;re welcome. It&#39;ll still fail when the same key value appears multiple times in file2 though. Try it with <code>IDb,IDx</code> added to the end of your current file2. The statements in your 2nd script are just much more complicated than they should be - instead of <code>($1 in a&amp;&amp;++a[$1]==1){print $0;next} ($2 in a&amp;&amp;++a[$2]==1){print $0}</code>, all you need is <code>($1 in a) || ($2 in a)</code>."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473270505, "post_id": 39364025, "comment_id": 66080484, "body": "w00t?! Where did that come from. Thanks again. I really should stop doing these between jobs..."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473270941, "post_id": 39364025, "comment_id": 66080704, "body": "You&#39;re welcome and you don&#39;t need to write <code>{print $0}</code> - that&#39;s the default action when a condition is true. And if you&#39;d like to see how to do the same approach without a temp file, see <a href=\"http://stackoverflow.com/a/39372191/1745001\">stackoverflow.com/a/39372191/1745001</a> and imagine <code>inBothFiles[]</code> was named <code>a[]</code> :-)."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473271566, "post_id": 39364025, "comment_id": 66081003, "body": ":D Yeah, I was thinking trying to combine those two into one but since I made a comment in the question of a two-phased solution I had to stand by my words..."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1473278283, "post_id": 39364025, "comment_id": 66084076, "body": "looks like the OP prefers to need a temp file so... good choice? ;-)."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1473278480, "post_id": 39364025, "comment_id": 66084174, "body": "After all that fixin&#39; there can&#39;t be (m)any errors left... :D"}], "tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": true, "score": 5, "last_activity_date": 1473270416, "last_edit_date": 1473270416, "creation_date": 1473234189, "answer_id": 39364025, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file/39364025#39364025", "title": "Filter a smaller file using another huge file", "body": "<pre><code>$ cat &gt; file2 # make test file2\nIDb,IDa\n$ awk -F, 'NR==FNR{a[$1];a[$2];next} ($1 in a&amp;&amp;++a[$1]==1){print $1} ($2 in a&amp;&amp;++a[$2]==1){print $2}' file2 file1 &gt; file3\n$ cat file3 # file2 ids in file1 put to file3\nIDa\nIDb\n$ awk -F, 'NR==FNR{a[$1];next} ($1 in a)||($2 in a){print $0}' file3 file2\nIDb,IDa\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473234558, "post_id": 39364064, "comment_id": 66057023, "body": "<i>which contain at least one ID that exists somewhere</i> - wouldn&#39;t <code>a[]</code> be enough?"}, {"owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "reply_to_user": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473234679, "post_id": 39364064, "comment_id": 66057089, "body": "@JamesBrown , OP mentioned pair of ID&#39;s . So I am assuming both columns as IDs."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1473234924, "post_id": 39364064, "comment_id": 66057235, "body": "<i>I want to simply find the lines in file2 which contain ...</i> - This solution returns lines from <code>file1</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1473236761, "post_id": 39364064, "comment_id": 66058344, "body": "it looks to me like this needs to store in memory all the data from the bigger file (multiple gigabytes)"}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473236897, "post_id": 39364064, "comment_id": 66058438, "body": "There are two ids per line."}], "tags": [], "owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "is_accepted": false, "score": 0, "last_activity_date": 1473235397, "last_edit_date": 1473235397, "creation_date": 1473234314, "answer_id": 39364064, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file/39364064#39364064", "title": "Filter a smaller file using another huge file", "body": "<p>Sample files:</p>\n\n<pre><code>cat f1\nIDa,IDb\nIDb,IDa\nIDc,IDd\n\n\ncat f2\nIDt,IDy\nIDb,IDj\n</code></pre>\n\n<p>Awk solution:  </p>\n\n<pre><code>awk -F, 'NR==FNR {a[$1]=$1;b[$2]=$2;next} ($1 in a)||($2 in b)' f1 f2\nIDb,IDj\n</code></pre>\n\n<p>This will store first and second columns of file1 in array a and b. Then print those line if either first or second column is seen for second file.</p>\n"}, {"comments": [{"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473260125, "post_id": 39372191, "comment_id": 66074489, "body": "file2 can fit in memory (but not file1)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1473260198, "post_id": 39372191, "comment_id": 66074556, "body": "OK, then the 2nd solution above will work for you. Enjoy... :-)."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1473280398, "last_edit_date": 1473280398, "creation_date": 1473257367, "answer_id": 39372191, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file/39372191#39372191", "title": "Filter a smaller file using another huge file", "body": "<p>Using these input files for testing:</p>\n\n<pre><code>$ cat file1\nIDa,IDb\nIDb,IDa\nIDc,IDd\n\n$ cat file2\nIDd,IDw\nIDx,IDc\nIDy,IDz\n</code></pre>\n\n<p>If file1 can fit in memory:</p>\n\n<pre><code>$ awk -F, 'NR==FNR{a[$1];a[$2];next} ($1 in a) || ($2 in a)' file1 file2\nIDd,IDw\nIDx,IDc\n</code></pre>\n\n<p>If not but file2 can fit in memory:</p>\n\n<pre><code>$ awk -F, '\n    ARGIND==2 {\n        if ($1 in inBothFiles) {\n            inBothFiles[$1] = 1\n        }\n        if ($2 in inBothFiles) {\n            inBothFiles[$2] = 1\n        }\n        next\n    }\n    ARGIND==1 {\n        inBothFiles[$1] = 0\n        inBothFiles[$2] = 0\n        next\n    }\n    ARGIND==3 {\n        if (inBothFiles[$1] || inBothFiles[$2]) {\n            print\n        }\n    }\n' file2 file1 file2\nIDd,IDw\nIDx,IDc\n</code></pre>\n\n<p>The above uses GNU awk for ARGIND - with other awks just add a <code>FNR==1{ARGIND++}</code> block at the start.</p>\n\n<p>I have the <code>ARGIND==2</code> block (i.e. the part that processes the 2nd argument which in this case is the 10^9 <code>file1</code>) listed first for efficiency so we don't unnecessarily test <code>ARGIND==1</code> for every line in the much larger file.</p>\n"}], "owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 39364025, "answer_count": 5, "score": 1, "last_activity_date": 1473280398, "creation_date": 1473232498, "question_id": 39363480, "link": "https://stackoverflow.com/questions/39363480/filter-a-smaller-file-using-another-huge-file", "title": "Filter a smaller file using another huge file", "body": "<p>I have a huge csv file with about 10^9 lines where each line has a pair of ids such as:</p>\n\n<pre><code>IDa,IDb\nIDb,IDa\nIDc,IDd\n</code></pre>\n\n<p>Call this file1.  I have another much smaller csv file with about 10^6 lines in the same format. Call this file2. </p>\n\n<p>I want to simply find the lines in file2 which contain at least one ID that exists somewhere in file1.</p>\n\n<p>Is there a fast way to do this?  I don't mind if it is in awk, python or perl.</p>\n"}, {"tags": ["linux", "perl", "ssh"], "comments": [{"owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1473232403, "post_id": 39363364, "comment_id": 66055800, "body": "Please paste the command to you are executing from shell."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 2, "creation_date": 1473232431, "post_id": 39363364, "comment_id": 66055815, "body": "You probably have to change <code>@IP[0]</code> to <code>$IP[0]</code>."}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "edited": false, "score": 0, "creation_date": 1473232701, "post_id": 39363364, "comment_id": 66055967, "body": "Tried your suggestion to change from @IP[0] to $IP[0] and issue persists."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1473232769, "post_id": 39363364, "comment_id": 66055994, "body": "@user3586606: Remove single quotes or escape them with \\."}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "reply_to_user": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "edited": false, "score": 0, "creation_date": 1473232814, "post_id": 39363364, "comment_id": 66056020, "body": "@DineshPundkar , I cant paste the command online , but believe me it is working."}, {"owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1473233000, "post_id": 39363364, "comment_id": 66056123, "body": "Hi , @ChankeyPathak , thanks for the suggestion , but this didnt not solve the problem .  I escaped it that way:       \\&#39;@IP[0]\\&#39;"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 2, "creation_date": 1473233102, "post_id": 39363364, "comment_id": 66056187, "body": "Please print output of the following: <code>my $command = qq{$sudo $ssh $server netstat -Aan | &#47;bin&#47;grep 1158 | &#47;bin&#47;egrep $IP[0] | wc -l}; print $command;</code>"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1473233469, "post_id": 39363364, "comment_id": 66056424, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/36806520/ssh-perl-script-not-running\">ssh perl script not running</a>"}], "owner": {"reputation": 287, "user_id": 3586606, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/636d3767d1bfe8261766799095f10f9a?s=128&d=identicon&r=PG&f=1", "display_name": "CleverDev", "link": "https://stackoverflow.com/users/3586606/cleverdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1473232530, "creation_date": 1473232139, "question_id": 39363364, "link": "https://stackoverflow.com/questions/39363364/ssh-inside-perl-script-hangs", "title": "SSH inside perl script hangs", "body": "<p>I am trying to execute the following command using perl script :</p>\n\n<pre><code>my $sum = `$sudo $ssh $server netstat -Aan | /bin/grep 1158 | /bin/egrep '@IP[0]' | wc -l`;\n</code></pre>\n\n<p>Where $sudo = full path to sudo command , same for $ssh , $server = the file server that I want to pull the data from , and @Ip[0] = ip address.</p>\n\n<p>When I run the exact command from the shell (not as a script) I get the required result (which is an integer number). However , when I run the script it just gets hangs when it reaches to that point.</p>\n\n<p>I cant see anything wrong with the syntax , I am using back ticks to save the returned output , could you please assist?  </p>\n"}, {"tags": ["perl", "unix", "cat"], "comments": [{"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 0, "creation_date": 1473231478, "post_id": 39363057, "comment_id": 66055277, "body": "Is your <code>foreach...</code> code is running ? Is it <code>perl</code> or <code>shell-script</code> ?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1473231854, "post_id": 39363057, "comment_id": 66055488, "body": "That syntax isn&#39;t Perl. I&#39;m not sure what it is."}], "answers": [{"tags": [], "owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1473232192, "last_edit_date": 1473232192, "creation_date": 1473231638, "answer_id": 39363209, "question_id": 39363057, "link": "https://stackoverflow.com/questions/39363057/foreach-x-cat-file-in-perl/39363209#39363209", "title": "foreach x ( cat file ) in perl?", "body": "<p>Please check the below code :</p>\n\n<ul>\n<li>I think you want to print element on new line. You just need to attach new line character with the element.</li>\n</ul>\n\n<p></p>\n\n<pre><code>@array = (1..10);\nforeach my $x (@array)\n{\n    print \"$x\\n\";\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>C:\\Users\\dinesh_pundkar\\Desktop&gt;perl a.pl\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 0, "last_activity_date": 1473232858, "last_edit_date": 1473232858, "creation_date": 1473232072, "answer_id": 39363344, "question_id": 39363057, "link": "https://stackoverflow.com/questions/39363057/foreach-x-cat-file-in-perl/39363344#39363344", "title": "foreach x ( cat file ) in perl?", "body": "<p>Your code is not even in Perl</p>\n\n<pre><code>foreach x ( `cat file`)\necho $x\nend\n</code></pre>\n\n<ol>\n<li>There's no echo or end command in Perl.</li>\n<li>Why are you using system's cat command? You should use pure Perl for such trivial tasks.</li>\n</ol>\n\n<p>I assume you are trying to loop over contents of a file and then print each line.</p>\n\n<p>In Perl you can do it using below:</p>\n\n<pre><code>#!/usr/bin/perl\n#always use the below 2 lines in your Perl program\nuse strict;\nuse warnings;\n\nmy $filename = '/path/to/file';\n#open file in read mode\nopen (my $fh, \"&lt;\", $filename) or die \"Could not open file $!\";\n#use while to iterate over each line\nwhile my $line (&lt;$fh&gt;){\n    print $line;\n}\n</code></pre>\n\n<p>Or you could take file's content in an array then loop over it</p>\n\n<pre><code>my @lines = &lt;$fh&gt;;\nforeach my $line (@lines){\n    print $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 2341389, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98239fa39c48e254850d338c8f6efc2f?s=128&d=identicon&r=PG", "display_name": "Newbph", "link": "https://stackoverflow.com/users/2341389/newbph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 0, "accepted_answer_id": 39363344, "answer_count": 2, "score": -3, "last_activity_date": 1473234187, "creation_date": 1473231223, "question_id": 39363057, "link": "https://stackoverflow.com/questions/39363057/foreach-x-cat-file-in-perl", "title": "foreach x ( cat file ) in perl?", "body": "<p>Trying to run the code:</p>\n\n<pre><code>foreach x ( `cat file`)\necho $x\nend\n</code></pre>\n\n<p>Expected output when ran on unix:</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>When ran on perl script:</p>\n\n<pre><code>1 2 3 4 5 \n</code></pre>\n\n<p>Please advise on how to achieve output like in unix in perl?</p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1473214001, "post_id": 39360205, "comment_id": 66049968, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17411126/why-does-perl-translate-a-tick-into-a-colon\">Why does perl translate a tick into a colon?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1473215686, "post_id": 39360205, "comment_id": 66050290, "body": "This is a clearer question and answer than the mentioned &quot;duplicate&quot;. I&#39;d rather have this question open to reference than the other."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473256796, "post_id": 39360205, "comment_id": 66071849, "body": "@ikegami Close the other one, then?"}], "answers": [{"tags": [], "owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "is_accepted": true, "score": 6, "last_activity_date": 1473215615, "last_edit_date": 1473215615, "creation_date": 1473214603, "answer_id": 39360303, "question_id": 39360205, "link": "https://stackoverflow.com/questions/39360205/perl-string-a-variable-in-a-string-followed-by-a-single-quote-and-another-chara/39360303#39360303", "title": "Perl string, a variable in a string followed by a single quote and another character does what?", "body": "<p>Quoting <a href=\"http://perldoc.perl.org/perlmod.html\">perlmod</a>,</p>\n\n<blockquote>\n  <p>The old package delimiter was a single quote, but double colon is now\n  the preferred delimiter, in part because it's more readable to humans,\n  and in part because it's more readable to emacs macros. It also makes\n  C++ programmers feel like they know what's going on--as opposed to\n  using the single quote as separator, which was there to make Ada\n  programmers feel like they knew what was going on. Because the\n  old-fashioned syntax is still supported for backwards compatibility,\n  if you try to use a string like <code>\"This is $owner's house\"</code>, you'll be\n  accessing <code>$owner::s</code>; that is, the $s variable in package <code>owner</code>,\n  which is probably not what you meant. Use braces to disambiguate, as\n  in <code>\"This is ${owner}'s house\"</code>.</p>\n</blockquote>\n\n<p>You could also use <code>\"This is $owner\\'s house\"</code>.</p>\n"}], "owner": {"reputation": 858, "user_id": 1620482, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0a05865f1f583dca2497708af20b1c36?s=128&d=identicon&r=PG", "display_name": "DemiImp", "link": "https://stackoverflow.com/users/1620482/demiimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 39360303, "answer_count": 1, "score": 4, "last_activity_date": 1473215615, "creation_date": 1473213762, "question_id": 39360205, "link": "https://stackoverflow.com/questions/39360205/perl-string-a-variable-in-a-string-followed-by-a-single-quote-and-another-chara", "title": "Perl string, a variable in a string followed by a single quote and another character does what?", "body": "<p>I just encountered my first odd \"quirk\" of Perl in a long time.  I can't seem to find any documentation of it online and I don't know what Perl is doing.</p>\n\n<p>Let's just cut to the chase:</p>\n\n<pre><code>my $name = \"Steve\";\nmy $v = \"$name's name is $name\";\n</code></pre>\n\n<p>The value of $v would turn out to be \" name is Steve\".  I use vim and the first $name turns an odd color (green instead of the normal teal).  So I know this is a known feature, but I don't understand what is happening.</p>\n\n<p>For those who might want to suggest alternatives, I know I can do either of the following without any problems:</p>\n\n<pre><code>$v = $name . \"'s name is $name\";\n$v = \"${name}'s name is $name\";\n</code></pre>\n\n<p>I just am curious as to what Perl is doing in the first case I gave and what its uses are.</p>\n"}, {"tags": ["regex", "perl", "svg", "graphviz", "dot"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1473195919, "post_id": 39357763, "comment_id": 66045525, "body": "I would start by writing a few test cases. Then rewrite each of your one-liners into actual programs that don&#39;t have the <code>-p</code> or other flags. Then you can turn them into functions inside the same program and refactor them into step by step into something that works over the whole file in one go. Keep using your test cases while you do it."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473202008, "post_id": 39357763, "comment_id": 66047469, "body": "1. Create a variable to store output ($txt). 2. Open and Read file line by line.  3. For each line     a. if it matches one of your patterns, then concatenate the replacement string to $txt with a newline.     b. If it does not match, just concatenate the line ($_) to ($txt). 4. After reading all of the lines, perform a multi-line regexp substitution on $txt to remove the &lt;!-- ... &lt;g&gt; ... blocks. 5. Print $txt"}], "owner": {"reputation": 372, "user_id": 5208540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533c54d15799ab9120e8257601e6dc04?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Stragies", "link": "https://stackoverflow.com/users/5208540/alex-stragies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473195617, "creation_date": 1473195617, "question_id": 39357763, "link": "https://stackoverflow.com/questions/39357763/for-postproc-of-graphviz-svg-i-now-uses-several-perl-exps-with-differing-input-o", "title": "For postproc of graphviz svg I now uses several perl exps with differing input opts. How to combine?", "body": "<p>I use <code>graphviz</code> to generate SVG graphs, and use some perl expressions (some <code>-lane</code>, some <code>-0pe</code>) to post-process/slim the <code>dot</code> output.</p>\n\n<p>The following shell/perl command pipeline will:</p>\n\n<ul>\n<li>convert some <code>&lt;polygons</code> into <code>&lt;rect</code>, because <code>dot</code> outputs even perfect rectangles as polygons.</li>\n<li>convert some more polygons, because \"clusters\" -though rectangular- are layed out differently to \"normal\" nodes</li>\n<li>removes/rounds some \".9999999\" fractions somehow resulting from the first 2 commands...</li>\n<li>rewrites straight lines (h+v) from <code>&lt;path</code> to <code>&lt;line</code></li>\n<li>remove empty groups resulting from invisible nodes and paths still being \"rendered\" to the SVG.</li>\n<li>Ultimately make the file smaller and also easier to read.</li>\n</ul>\n\n<p>How would I optimize this script and/or compact it into less statements under one perl invocation?</p>\n\n<pre><code>$ cat Graph.dot.svg |\nperl -lane '# Rectangular Nodes: Polygons like DR-DL-UL-UR-DR\n/^&lt;polygon( .* )points=\"([-\\d.]*),([-\\d.]*) ([-\\d.]*),\\3 \\4,([-\\d.]*) \\2,\\5 \\2,\\3\"(.*)$/\nand do {\n  $x=($2&lt;$4?$2:$4); $y=($3&lt;$5?$3:$5);\n  $w=abs($2-$4); $h=abs($3-$5);\n  print \"&lt;rect$1x=\\\"$x\\\" y=\\\"$y\\\" width=\\\"$w\\\" height=\\\"$h\\\"$6\";\n} or print $_;' |\nperl -lane '# Cluster Nodes -also rects-, but layed out differntly:\n/^&lt;polygon( .* )points=\"([-\\d.]*),([-\\d.]*) \\2,([-\\d.]*) ([-\\d.]*),\\4 \\5,\\3 \\2,\\3\"(.*)$/\nand do {\n  $x=($2&lt;$5?$2:$5); $y=($3&lt;$4?$3:$4);\n  $w=abs($2-$5); $h=abs($3-$4);\n  print \"&lt;rect$1x=\\\"$x\\\" y=\\\"$y\\\" width=\\\"$w\\\" height=\\\"$h\\\"$6\";\n} or print $_;\n' | perl -pe '# Rounds \".999999\" and \"\\d*[36]99+7\" \"errors\"\n/^&lt;rect/ and s/([0-9]+\\.)99+/$1+1/e;s/([36])99+7/$1+1/e\n' | perl -lane '# Straight vertical lines as paths -&gt; \"&lt;line\"\nprint /^&lt;path( .* )d=\"M([-\\d.]*),([-\\d.]*)C(([-\\d.]*),\\3 ?){3}\"(.*)$/\n  ?\"&lt;line$1x1=\\\"$2\\\" y1=\\\"$3\\\" x2=\\\"$5\\\" y2=\\\"$3\\\" stroke-width=\\\"2\\\"$6\" : $_;\n' | perl -lane '# Straight horizontal lines as paths -&gt; \"&lt;line\"\nprint /^&lt;path( .* )d=\"M([-\\d.]*),([-\\d.]*)C(\\2,([-\\d.]*) ?){3}\"(.*)$/\n  ?\"&lt;line$1x1=\\\"$2\\\" y1=\\\"$3\\\" x2=\\\"$2\\\" y2=\\\"$5\\\" stroke-width=\\\"2\\\"$6\" : $_;\n' | perl -0777 -pe '\ns/^&lt;!-- [^ ]\\* --&gt;\\s&lt;g [^&lt;]*&lt;title&gt;[^&gt;]*&gt;\\s&lt;\\/g&gt;$//mg' &gt; Output.dot.svg\n</code></pre>\n\n<p>Example Input data below generated from graph:</p>\n\n<pre><code>graph G {\nnode[shape=box,height=0,width=0,margin=0]\n  subgraph cluster_1 {\n    start -- b1;\n  }\n rank=same{b1 -- end};\n end [shape=circle];\n}\n</code></pre>\n\n<p>with either <code>dot -Tsvg</code> or online <a href=\"http://mdaines.github.io/viz.js/\" rel=\"nofollow\">here(viz.je)</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\r\n&lt;!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\r\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"&gt;\r\n&lt;svg width=\"89pt\" height=\"105pt\"\r\n viewBox=\"0.00 0.00 89.29 105.39\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"&gt;\r\n&lt;g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 101.388)\"&gt;\r\n&lt;polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-101.388 85.2939,-101.388 85.2939,4 -4,4\"/&gt;\r\n&lt;g id=\"clust1\" class=\"cluster\"&gt;&lt;title&gt;cluster_1&lt;/title&gt;\r\n&lt;polygon fill=\"none\" stroke=\"black\" points=\"8,-56.5878 8,-89.3878 48,-89.3878 48,-56.5878 8,-56.5878\"/&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node1\" class=\"node\"&gt;&lt;title&gt;start&lt;/title&gt;\r\n&lt;polygon fill=\"none\" stroke=\"black\" points=\"40.1012,-81.2889 15.8988,-81.2889 15.8988,-64.6866 40.1012,-64.6866 40.1012,-81.2889\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"28\" y=\"-68.7878\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;start&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node2\" class=\"node\"&gt;&lt;title&gt;b1&lt;/title&gt;\r\n&lt;polygon fill=\"none\" stroke=\"black\" points=\"35,-22.5951 21,-22.5951 21,-5.9927 35,-5.9927 35,-22.5951\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"28\" y=\"-10.0939\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;b1&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;!-- start&amp;#45;&amp;#45;b1 --&gt;\r\n&lt;g id=\"edge1\" class=\"edge\"&gt;&lt;title&gt;start&amp;#45;&amp;#45;b1&lt;/title&gt;\r\n&lt;path fill=\"none\" stroke=\"black\" d=\"M28,-64.576C28,-53.7707 28,-33.796 28,-22.8884\"/&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node3\" class=\"node\"&gt;&lt;title&gt;end&lt;/title&gt;\r\n&lt;ellipse fill=\"none\" stroke=\"black\" cx=\"67\" cy=\"-14.2939\" rx=\"14.0907\" ry=\"14.0907\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"67\" y=\"-10.0939\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;end&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;!-- b1&amp;#45;&amp;#45;end --&gt;\r\n&lt;g id=\"edge2\" class=\"edge\"&gt;&lt;title&gt;b1&amp;#45;&amp;#45;end&lt;/title&gt;\r\n&lt;path fill=\"none\" stroke=\"black\" d=\"M35.0078,-14.2939C40.8397,-14.2939 46.6716,-14.2939 52.5035,-14.2939\"/&gt;\r\n&lt;/g&gt;\r\n&lt;/g&gt;\r\n&lt;/svg&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The result after feeding the above input into the perl pipeline (Notice all the polygons and paths have been converted to rectangles and lines.)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\r\n&lt;!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\r\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"&gt;\r\n&lt;svg width=\"89pt\" height=\"105pt\"\r\n viewBox=\"0.00 0.00 89.29 105.39\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"&gt;\r\n&lt;g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 101.388)\"&gt;\r\n&lt;rect fill=\"white\" stroke=\"none\" x=\"-4\" y=\"-101.388\" width=\"89.2939\" height=\"105.388\"/&gt;\r\n&lt;g id=\"clust1\" class=\"cluster\"&gt;&lt;title&gt;cluster_1&lt;/title&gt;\r\n&lt;rect fill=\"none\" stroke=\"black\" x=\"8\" y=\"-89.3878\" width=\"40\" height=\"32.8\"/&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node1\" class=\"node\"&gt;&lt;title&gt;start&lt;/title&gt;\r\n&lt;rect fill=\"none\" stroke=\"black\" x=\"15.8988\" y=\"-81.2889\" width=\"24.2024\" height=\"16.6023\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"28\" y=\"-68.7878\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;start&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node2\" class=\"node\"&gt;&lt;title&gt;b1&lt;/title&gt;\r\n&lt;rect fill=\"none\" stroke=\"black\" x=\"21\" y=\"-22.5951\" width=\"14\" height=\"16.6024\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"28\" y=\"-10.0939\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;b1&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;!-- start&amp;#45;&amp;#45;b1 --&gt;\r\n&lt;g id=\"edge1\" class=\"edge\"&gt;&lt;title&gt;start&amp;#45;&amp;#45;b1&lt;/title&gt;\r\n&lt;line fill=\"none\" stroke=\"black\" x1=\"28\" y1=\"-64.576\" x2=\"28\" y2=\"-22.8884\" stroke-width=\"2\"/&gt;\r\n&lt;/g&gt;\r\n&lt;g id=\"node3\" class=\"node\"&gt;&lt;title&gt;end&lt;/title&gt;\r\n&lt;ellipse fill=\"none\" stroke=\"black\" cx=\"67\" cy=\"-14.2939\" rx=\"14.0907\" ry=\"14.0907\"/&gt;\r\n&lt;text text-anchor=\"middle\" x=\"67\" y=\"-10.0939\" font-family=\"Times,serif\" font-size=\"14.00\"&gt;end&lt;/text&gt;\r\n&lt;/g&gt;\r\n&lt;!-- b1&amp;#45;&amp;#45;end --&gt;\r\n&lt;g id=\"edge2\" class=\"edge\"&gt;&lt;title&gt;b1&amp;#45;&amp;#45;end&lt;/title&gt;\r\n&lt;line fill=\"none\" stroke=\"black\" x1=\"35.0078\" y1=\"-14.2939\" x2=\"52.5035\" y2=\"-14.2939\" stroke-width=\"2\"/&gt;\r\n&lt;/g&gt;\r\n&lt;/g&gt;\r\n&lt;/svg&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["linux", "perl", "ssh"], "comments": [{"owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "edited": false, "score": 0, "creation_date": 1473196248, "post_id": 39357544, "comment_id": 66045675, "body": "I forgot to add this: it says that the error is on line 13. It&#39;s actually line 12, since this code doesn&#39;t have another line which is originally commented out."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473197596, "post_id": 39357544, "comment_id": 66046215, "body": "I&#39;m confused. Why is ssh involved here?"}, {"owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473198013, "post_id": 39357544, "comment_id": 66046369, "body": "Actually, that&#39;s a very good question. The answer is; my state of confusion and googling skills led me to that. I remember starting with Perl&#39;s <code>exec();</code> function, not having any success, and the rest is blurry. But hey, I&#39;ve made it work, see below if you&#39;re interested."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473198592, "post_id": 39357544, "comment_id": 66046590, "body": "<a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\"><code>perldoc -f exec</code></a>: &quot;The exec function executes a system command <i>and never returns</i>; use system instead of exec if you want it to return.&quot;"}, {"owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473198883, "post_id": 39357544, "comment_id": 66046718, "body": "That might actually be the problem. IIRC, when running the CGI from a browser, it would just hang, as if it&#39;s having trouble loading the site. Talk about a roundabout way of using ssh... Thanks for pointing that out, I&#39;ll try it again using <code>system();</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "edited": false, "score": 0, "creation_date": 1473198608, "post_id": 39358287, "comment_id": 66046595, "body": "Oh, and by the way, I removed that line after running the code once and it still works. Running the code with that line has done some SSH key black magic on the server (I&#39;m still very new to this)."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1473931618, "post_id": 39358287, "comment_id": 66331342, "body": "The section <a href=\"https://metacpan.org/pod/Net::OpenSSH#TROUBLESHOOTING\" rel=\"nofollow noreferrer\">TROUBLESHOOTING</a> from the module docs, tries to explain that, specifically point <a href=\"https://metacpan.org/pod/Net::OpenSSH#run-ssh-from-the-command-line\" rel=\"nofollow noreferrer\">3</a>."}], "tags": [], "owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "is_accepted": false, "score": 0, "last_activity_date": 1473198236, "creation_date": 1473198236, "answer_id": 39358287, "question_id": 39357544, "link": "https://stackoverflow.com/questions/39357544/how-to-execute-a-system-command-on-a-remote-linux-server-using-cgi-and-perls-ne/39358287#39358287", "title": "How to execute a system command on a remote Linux server using CGI and Perl&#39;s Net::OpenSSH module?", "body": "<p>It's me again, the guy who posted the question. It's funny how I've spent hours trying to make this work, and stumbled upon a solution maybe an hour after posting the question here. But here it is:</p>\n\n<p>I've added <code>master_opts =&gt; [-o =&gt; \"StrictKeyChecking=no\"]</code> as an additional argument to the creation of the Net::OpenSSH object (the line with <code>user</code>, <code>password</code>, etc).</p>\n"}], "owner": {"reputation": 11, "user_id": 6801976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8117b61747a6622fd70cade7c3d45e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Hramyzn", "link": "https://stackoverflow.com/users/6801976/hramyzn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 775, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473218037, "creation_date": 1473194637, "last_edit_date": 1473218037, "question_id": 39357544, "link": "https://stackoverflow.com/questions/39357544/how-to-execute-a-system-command-on-a-remote-linux-server-using-cgi-and-perls-ne", "title": "How to execute a system command on a remote Linux server using CGI and Perl&#39;s Net::OpenSSH module?", "body": "<p>EDIT: Read this first: What I was trying to do here is the result of extreme tunnel visioning, the post might be amusing, but not informative. You don't need to SSH into your own server to execute a command, what was I even thinking...</p>\n\n<p>the title pretty much says it all. I want to host a CGI website on a Linux server (Debian, if it matters) and when clicking a button, perform a system command on the server itself. I'm doing this through Perl and it's <code>Net::OpenSSH</code> module.</p>\n\n<p>Here is the problem. I can run the script through the terminal on the server itself, but <em>only</em> if I use sudo. It doesn't matter if the command is simply \"<code>ls</code>\". Unsurprisingly, when clicking on a button on a website which calls the module, it doesn't work either.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Net::OpenSSH;\n\nprint(\"Content-type: text/html\\n\\n\");\n\nprint(\"TEST\");\n\nmy $ssh = Net::OpenSSH-&gt;new('localhost', user =&gt; 'myusername', password =&gt; 'mypassword');\n\n$ssh-&gt;system(\"ls\") or die \"ERROR: \" . $ssh-&gt;error;\n\nprint(\"TEST2\");\n</code></pre>\n\n<p>When running it in the terminal using sudo, the script prints out <code>TEST</code>, then lists the folders in my home directory (Desktop, Documents, etc) and finally, <code>TEST2</code>.</p>\n\n<p>When I'm not using sudo, it prints only <code>TEST</code> and after that this error message:</p>\n\n<blockquote>\n  <p>ERROR: unable to establish master SSH connection: the authenticity of\n  the target host can't be established; the remote host public key is\n  probably not present on the '~/.shh/known_hosts' file at\n  opensshtest.pl line 13.</p>\n</blockquote>\n\n<p>I'm not using SSH keys at all, I'm trying to supply the username and password by hardcoding them into the script.</p>\n\n<p>Also, when opened in a browser, it only prints out the first <code>TEST</code>.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["perl", "crc"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473195542, "post_id": 39357316, "comment_id": 66045370, "body": "Can you please <a href=\"https://stackoverflow.com/posts/39357316/edit\">edit</a> your question and add complete example input and expected output?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473200972, "post_id": 39357316, "comment_id": 66047220, "body": "Are you sure about your poly value of <code>0x9EB3</code> ?  That converts to <code>1001111010110011</code> which does not match your polynomial.  Your polynomial would be <code>1001111010110101</code> which is <code>0x9EB5</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473201081, "post_id": 39357316, "comment_id": 66047243, "body": "Also, according to <a href=\"https://en.wikipedia.org/wiki/Mathematics_of_cyclic_redundancy_checks#Polynomial_representations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> - <code>All the well-known CRC generator polynomials of degree  n n have two common hexadecimal representations. In both cases, the coefficient of  x n x^{n} is omitted and understood to be 1.</code> so you may need to try the variant without the leading coefficient.  ( I am not sure if this module uses that convention or not, its documentation could be improved... )"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473201946, "post_id": 39357316, "comment_id": 66047444, "body": "Your text and title mention <a href=\"https://metacpan.org/pod/Digest\" rel=\"nofollow noreferrer\">Digest</a>, but your code uses <a href=\"https://metacpan.org/pod/Digest::CRC\" rel=\"nofollow noreferrer\">Digest::CRC</a>. Which is it?"}, {"owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "edited": false, "score": 0, "creation_date": 1473254361, "post_id": 39357316, "comment_id": 66070073, "body": "Added complete routine and updated to use poly from Gammatester.  Still no joy."}], "answers": [{"tags": [], "owner": {"reputation": 1091, "user_id": 2160562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CcQEn.png?s=128&g=1", "display_name": "gammatester", "link": "https://stackoverflow.com/users/2160562/gammatester"}, "is_accepted": false, "score": 1, "last_activity_date": 1473234367, "last_edit_date": 1473234367, "creation_date": 1473232658, "answer_id": 39363533, "question_id": 39357316, "link": "https://stackoverflow.com/questions/39357316/how-to-use-perls-digestcrc-module-to-calculate-dnp3-crc/39363533#39363533", "title": "How to use Perl&#39;s &#39;Digest::CRC&#39; module to calculate DNP3 CRC", "body": "<p>Your data is compatible with <strong>CRC-16/DNP</strong> from <a href=\"http://reveng.sourceforge.net/crc-catalogue/16.htm\" rel=\"nofollow\">http://reveng.sourceforge.net/crc-catalogue/16.htm</a></p>\n\n<pre><code>width=16  \npoly=0x3d65  \ninit=0x0000  \nrefin=true  \nrefout=true \nxorout=0xffff  \ncheck=0xea82  \nname=\"CRC-16/DNP\"\n</code></pre>\n\n<p>You can verify this with <a href=\"https://www.lammertbies.nl/comm/info/crc-calculation.html\" rel=\"nofollow\">https://www.lammertbies.nl/comm/info/crc-calculation.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 6027771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e6b84a2a791c8e260ed0b95cbac292?s=128&d=identicon&r=PG&f=1", "display_name": "dasgar", "link": "https://stackoverflow.com/users/6027771/dasgar"}, "is_accepted": false, "score": 1, "last_activity_date": 1473313680, "creation_date": 1473313680, "answer_id": 39383391, "question_id": 39357316, "link": "https://stackoverflow.com/questions/39357316/how-to-use-perls-digestcrc-module-to-calculate-dnp3-crc/39383391#39383391", "title": "How to use Perl&#39;s &#39;Digest::CRC&#39; module to calculate DNP3 CRC", "body": "<p>(This question is cross posted at PerlMonks - see <a href=\"http://perlmonks.org/?node_id=1171326\" rel=\"nofollow\">here</a>. The answer below is also cross posted at PerlMonks - see <a href=\"http://perlmonks.org/?node_id=1171362\" rel=\"nofollow\">here</a>)</p>\n\n<p>I thought I'd challenge myself to see if I could figure this out. As I started looking into CRC algorithms, I quickly found myself in over my head. But I think that I was actually able to figure it out.</p>\n\n<p>Looking at the source code of Digest::CRC, I took a guess that the value for 'const' should be 0 instead of '0xea82'. That got me closer for ASCII input. Combining that with the suggestion from the <a href=\"http://perlmonks.org/?node_id=1171335\" rel=\"nofollow\">Anonymous Monk</a> got me closer for hex input. In both cases what I mean by getting closer is that I got the right characters, but in the wrong order. Basically, I needed to reverse the output by bits. For example, with your sample header, I was getting 'c52' instead of '520c'. The two bits here are '0c' and '52'. Reversing the two bits of 'c52' (or '0c52') produces '520c'.</p>\n\n<p>In searching for references for CRC-DNP checksums, I found an online checksum calculator (found <a href=\"https://www.lammertbies.nl/comm/info/crc-calculation.html\" rel=\"nofollow\">here</a> - and is referenced in gammatester's answer). I used it to 'verify' the output of the following code.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nuse Digest::CRC;\n\nsub Left_Pad {\n    my $value = shift;\n\n    if (length($value) % 2) {$value = '0'.$value;}\n    return $value;\n}\n\nsub Bitwise_Reverse {\n    my $value = shift;\n\n    $value = Left_Pad($value);\n    my $offset = length($value);\n    my $reversed;\n    while ($offset &gt; 0) {\n        $offset -= 2;\n        my $string = substr($value,$offset,2);\n        $reversed .= $string;\n    }\n    return $reversed;\n}\n\nsub CRC_DNP_ASCII {\n    my $value = shift;\n\n    my $ctx = Digest::CRC-&gt;new(width=&gt;16, init=&gt;0x0, xorout=&gt;0xffff, refin=&gt;1,\n                               refout=&gt;1, poly=&gt;0x3d65, cont=&gt;0);\n    $ctx-&gt;add($value);\n    my $digest = $ctx-&gt;hexdigest;\n    my $crc = Bitwise_Reverse($digest);\n    return $crc;\n}\n\nsub CRC_DNP_HEX {\n    my $value = shift;\n\n    my $ctx = Digest::CRC-&gt;new(width=&gt;16, init=&gt;0x0, xorout=&gt;0xffff, refin=&gt;1,\n                               refout=&gt;1, poly=&gt;0x3d65, cont=&gt;0);\n    my $offset = 0;\n    while ($offset &lt; length($value)) {\n        my $string = substr($value,$offset,2);\n\n        $ctx-&gt;add(chr(hex($string)));\n        $offset += 2;\n    }\n    my $digest = $ctx-&gt;hexdigest;\n    my $crc = Bitwise_Reverse($digest);\n    return $crc;\n}\n\nmy @data_list = ('056405F201000000','56405F201000000');\nforeach my $data (@data_list) {\n    say \"Calculating CRC-DNP checksum for '$data':\";\n    my $ascii = CRC_DNP_ASCII($data);\n    say \"    ASCII input:  $ascii\";\n    my $hex = CRC_DNP_HEX($data);\n    say \"      Hex input:  $hex\\n\";\n}\n</code></pre>\n\n<p>That produced the following output:</p>\n\n<pre><code>Calculating CRC-DNP checksum for '056405F201000000':\n    ASCII input:  99fc\n      Hex input:  520c\n\nCalculating CRC-DNP checksum for '56405F201000000':\n    ASCII input:  0751\n      Hex input:  11e3\n</code></pre>\n\n<p>I've tried a few other examples to compare the output of my code versus the online calculator and I'm getting the same values for the CRC-DNP checksums.</p>\n\n<p>Perhaps more knowledgeable folks might be able to identify issues with my code, but I think it should help you get further along with what you're trying to do.</p>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "is_accepted": true, "score": 0, "last_activity_date": 1473340098, "creation_date": 1473340098, "answer_id": 39391842, "question_id": 39357316, "link": "https://stackoverflow.com/questions/39357316/how-to-use-perls-digestcrc-module-to-calculate-dnp3-crc/39391842#39391842", "title": "How to use Perl&#39;s &#39;Digest::CRC&#39; module to calculate DNP3 CRC", "body": "<p>OK, with a little help from you folks, and hacking into the Digest::CRC and comparing, step-by-step the results given by the C Sample CRC calculations in the IEEE Std 1815, I came up with the following code:</p>\n\n<pre><code>my $ctx = Digest::CRC-&gt;new(width=&gt;16, init=&gt;0, xorout=&gt;0xffff, refin=&gt;1, refout=&gt;1, poly=&gt;0x3d65, cont=&gt;0);\n\n$ctx-&gt;add(chr(0x05));\n$ctx-&gt;add(chr(0x64));\n$ctx-&gt;add(chr(0x05));\n$ctx-&gt;add(chr(0xF2));\n$ctx-&gt;add(chr(0x01));\n$ctx-&gt;add(chr(0x00));\n$ctx-&gt;add(chr(0x00));\n$ctx-&gt;add(chr(0x00));\n\nmy $x=$ctx-&gt;digest;\nprintf(\"x=%02X %02X\\n\",$x&gt;&gt;8, $x&amp;0xFF);\n</code></pre>\n\n<p>The problem with my original code wasn't in the CRC digest, but the way I was passing the data into the module.  I passed it in as a single scalar value.  Digest::CRC would then append this to the data buffer with the code:</p>\n\n<pre><code>$self-&gt;{_data} .= join '', @_ if @_;\n</code></pre>\n\n<p>This (apparently) converted the scalar to a string (i.e. 0x05 to a \"5\").  Along comes the digest subroutine that access the first byte with the code:</p>\n\n<pre><code>ord(substr($message, $pos++, 1))\n</code></pre>\n\n<p>This resulted in digesting the value 0x35, not 0x05 as I had intended.</p>\n\n<p>The solution was to pass the data into the module by wrapping the data as a string (i.e. chr(0x05)).</p>\n\n<p>Thank you all, especially gammatester and dasgar, for pointing me in the right direction.  </p>\n"}], "owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 39391842, "answer_count": 3, "score": 2, "last_activity_date": 1473340098, "creation_date": 1473193627, "last_edit_date": 1473254048, "question_id": 39357316, "link": "https://stackoverflow.com/questions/39357316/how-to-use-perls-digestcrc-module-to-calculate-dnp3-crc", "title": "How to use Perl&#39;s &#39;Digest::CRC&#39; module to calculate DNP3 CRC", "body": "<p>I'm trying to calculate a CRC for DNP3's link level.  The spec says it's a 2 octet CRC based on the polynomial X^16 + X^13 + X^12 + X^11 + X^10 + X^8 + X^6 + X^5 + X^2 + 1.  It's also inverted and put in the data block LSB first.  </p>\n\n<p>With Perl's Digest package, I set up the algorithm as:</p>\n\n<pre><code>my $ctx = Digest::CRC-&gt;new(width=&gt;16, init=&gt;0, xorout=&gt;0xffff, refin=&gt;1, refout=&gt;1, poly=&gt;0x3d65, cont=&gt;0xea82);\n\n$ctx-&gt;add(0x05);\n$ctx-&gt;add(0x64);\n$ctx-&gt;add(0x05);\n$ctx-&gt;add(0xF2);\n$ctx-&gt;add(0x01);\n$ctx-&gt;add(0x00);\n$ctx-&gt;add(0x00);\n$ctx-&gt;add(0x00);\n\nmy $x=$ctx-&gt;digest;\nprintf(\"x=%04x\\n\",$x);\n</code></pre>\n\n<p>The example in the spec shown for the header:\n05 64 05 F2 01 00 00 00 \nthe checksum should be\n52 0C. I get x=91fc.</p>\n\n<p>I've tried playing with all the parameters but can't seem to get it to come out.  Any suggestions?  Do I need to add() the data byte by byte? word (2 byte) by word?  </p>\n"}, {"tags": ["perl", "perl-module", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1473191103, "post_id": 39356660, "comment_id": 66043327, "body": "What is this <code>wsgrep.pl</code> that you use?"}], "answers": [{"comments": [{"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1473193385, "post_id": 39356980, "comment_id": 66044386, "body": "Wow! Works like a charm. Thank you Sir!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1473193983, "last_edit_date": 1473193983, "creation_date": 1473192211, "answer_id": 39356980, "question_id": 39356660, "link": "https://stackoverflow.com/questions/39356660/pass-perl-file-arguments-to-lwp-http-request/39356980#39356980", "title": "Pass perl file arguments to LWP HTTP request", "body": "<p>Normally, to url-encode params, I'd use the following:</p>\n\n<pre><code>use URI;\n\nmy $url = URI-&gt;new('http://example.com/query');\n$url-&gt;query_form(%params);\n\nsay $url;\n</code></pre>\n\n<p>Your needs are more elaborate.</p>\n\n<pre><code>use URI         qw( );\nuse URI::Escape qw( uri_escape );\n\nmy $url = URI-&gt;new('http://example.com/query');\n\nmy @escaped_args;\nfor (@ARGV) {\n   my ($arg) = /^-(.*)/s\n      or die(\"usage\");\n\n   push @escaped_args,\n      join '=',\n         map uri_escape($_),\n            split /=/, $arg, 2;\n}\n\n$url-&gt;query(@escaped_args ? join('&amp;', @escaped_args) : undef);\n\nsay $url;\n</code></pre>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 39356980, "answer_count": 1, "score": 0, "last_activity_date": 1473193983, "creation_date": 1473190982, "last_edit_date": 1473192821, "question_id": 39356660, "link": "https://stackoverflow.com/questions/39356660/pass-perl-file-arguments-to-lwp-http-request", "title": "Pass perl file arguments to LWP HTTP request", "body": "<p>Here is my issue with handling argument Perl. I need to pass Perl argument argument to a http request (Webservice) whatever Argument given to the perl file.</p>\n\n<pre><code>perl wsgrep.pl  -name=john -weight -employeeid -cardtype=physical\n</code></pre>\n\n<p>In the wsgrep.pl file, i need to pass the above arguments to http post params.</p>\n\n<p>like below,</p>\n\n<pre><code>http://example.com/query?name=john&amp;weight&amp;employeeid&amp;cardtype=physical. \n</code></pre>\n\n<p>I am using LWP Package for this url to get response. </p>\n\n<p>Is there any good approach to do this?</p>\n\n<p>Updated:\nInside the wsgrep.pl</p>\n\n<pre><code>my ( %args, %config );\n\nmy $ws_url =\n\"http://example.com/query\";\n\nmy $browser  = LWP::UserAgent-&gt;new;\n# Currently i have hard-coded the post param arguments. But it should dynamic based on the file arguments. \nmy $response = $browser-&gt;post(\n    $ws_url,\n    [\n        'name' =&gt; 'john',\n        'cardtype'  =&gt; 'physical'\n    ],\n);\n\nif ( $response-&gt;is_success ) {\n    print $response-&gt;content;\n}\nelse {\n    print \"Failed to query webservice\";\n    return 0;\n}\n</code></pre>\n\n<p>I need to construct post parameter part from the given arguments. </p>\n\n<pre><code>[\n            'name' =&gt; 'john',\n            'cardtype'  =&gt; 'physical'\n        ],\n</code></pre>\n"}, {"tags": ["perl", "ssl", "server", "newline"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473174936, "post_id": 39352392, "comment_id": 66034738, "body": "Your packages (and the modules&#39; filenames) should be capitalised, so <code>MyServer.pm</code> and <code>Communicator.pm</code>. Also, are you aware that all of those hash keys need no quotes? <code>reverse_lookups =&gt; 1</code> is fine."}, {"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473175239, "post_id": 39352392, "comment_id": 66034918, "body": "In reality the package names start with an uppercase letter, sorry for the confusion. I prefer to have quotes around hash keys for better syntax highlighting, though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473177038, "post_id": 39352392, "comment_id": 66036056, "body": "Tip: <code>print(pack(&quot;N&quot;, bytes($msg)); print(bytes($msg));</code> can be reduced to <code>print(pack(&quot;N&quot;, bytes($msg)), bytes($msg));</code> and even to <code>print(pack(&quot;N&#47;a*&quot;, bytes($msg)));</code> (This also makes it obvious that you&#39;re missing a call to <code>bytes</code>!)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473177137, "post_id": 39352392, "comment_id": 66036121, "body": "Re &quot;<i>for better syntax highlighting</i>&quot;, That makes them look like strings when they actually serve the purpose of identifiers. That&#39;s exactly why you <i>shouldn&#39;t</i> use quotes."}, {"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 0, "creation_date": 1473246138, "post_id": 39352392, "comment_id": 66064248, "body": "Update: I found out that any <code>say</code> called when <code>Net::Server</code> is running sets <code>\\$ </code> to &quot;\\n&quot;, so any <code>print</code> or <code>say</code> after the first say prints an additional newline"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473176421, "post_id": 39352555, "comment_id": 66035645, "body": "This seems like a solid reason for the misbehaviour. @Marcus: can you test for this please?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473176948, "post_id": 39352555, "comment_id": 66035990, "body": "Or use <code>-&gt;printf(&quot;%s&quot;, ...)</code>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473177937, "post_id": 39352555, "comment_id": 66036603, "body": "@ikegami: or just <code>-&gt;syswrite(...)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473178416, "post_id": 39352555, "comment_id": 66036855, "body": "@Steffen Ullrich, I don&#39;t think <code>syswrite</code> is guaranteed to write the whole buffer (especially when writing to a socket), so you&#39;d need a loop. That&#39;s far more complicated."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473178526, "post_id": 39352555, "comment_id": 66036921, "body": "@ikegami: that&#39;s true, you need to check the return code to find out how much was transferred."}, {"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 0, "creation_date": 1473179210, "post_id": 39352555, "comment_id": 66037276, "body": "That&#39;s it, $\\ was set to &quot;\\n&quot;. Never would have guessed, thanks guys! Can&#39;t locate where this is set, though, but that&#39;s a different story."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1473176856, "last_edit_date": 1473176856, "creation_date": 1473175046, "answer_id": 39352555, "question_id": 39352392, "link": "https://stackoverflow.com/questions/39352392/iosocketssl-sometimes-adds-newline-when-printing-on-socket/39352555#39352555", "title": "IO::Socket:SSL sometimes adds newline when printing on socket", "body": "<p><code>print</code> on an IO::Socket::SSL handle behaves like <code>print</code> on other file handles in that it respects the setting of <code>$\\</code>. From <code>perldoc perlvar</code>:</p>\n\n<pre><code>  $\\      The output record separator for the print operator.  \n          If defined, this value is printed after the last of print's\n          arguments.  Default is \"undef\".\n</code></pre>\n\n<p>Since this variable is undef by default there will only be changes if somebody sets this variable explicitly. I cannot see Net::Server set this variable anywhere. Maybe it's instead in your own code or other modules you use? In case you will not affect your other code you could localize the variable, i.e.</p>\n\n<pre><code>if ($self-&gt;{'SOCK'}) {\n    local $\\ = undef; ### make sure to disable side effects\n    my $length = pack(\"N\", bytes($msg));\n    ($self-&gt;{'SOCK'})-&gt;print($length);\n    ($self-&gt;{'SOCK'})-&gt;print($msg);\n};\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 39352555, "answer_count": 1, "score": 4, "last_activity_date": 1473176856, "creation_date": 1473174602, "last_edit_date": 1473176266, "question_id": 39352392, "link": "https://stackoverflow.com/questions/39352392/iosocketssl-sometimes-adds-newline-when-printing-on-socket", "title": "IO::Socket:SSL sometimes adds newline when printing on socket", "body": "\n\n<p>I have a method that sends a message to a remote SSL server. The class is embedded in a program that may be called from the command line, or the program can be started as a daemon and may call the class method on request. I use <a href=\"https://metacpan.org/pod/Net::Server::Fork\" rel=\"nofollow\"><code>Net::Server::Fork</code></a> to launch the daemon:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package myserver;\n\nuse 5.10.1;\nuse strict;\nuse warnings;\n\nuse parent 'Net::Server::Fork';\n\nmyserver-&gt;run(\n    'port'            =&gt; $main::config{'backend.ssl.host'} . '/ssl',\n    'ipv'             =&gt; '*',\n    'log_level'       =&gt; $main::config{'backend.loglevel'},\n    'log_file'        =&gt; $main::config{'backend.logfile'},\n    'pid_file'        =&gt; $main::config{'backend.pidfile'},\n    'user'            =&gt; $main::config{'backend.user'},\n    'group'           =&gt; $main::config{'backend.group'},\n    'max_servers'     =&gt; $main::config{'backend.maxconnections'},\n    'background'      =&gt; !$main::config{'backend.foreground'},\n    'leave_children_open_on_hup' =&gt; 1,\n    'allow'           =&gt; $main::config{'ip'},\n    'reverse_lookups' =&gt; 1,\n    'SSL_key_file'    =&gt; $main::config{'backend.ssl.key'},\n    'SSL_cert_file'   =&gt; $main::config{'backend.ssl.crt'},\n    'SSL_ca_file'     =&gt; $main::config{'backend.ssl.bundle'},\n);\n\nsub process_request {\n    # call connect and sendframe if requested\n};\n</code></pre>\n\n<p>The external communication class connects with <a href=\"https://metacpan.org/pod/IO::Socket::SSL\" rel=\"nofollow\"><code>IO::Socket::SSL</code></a> and sends data by prepending the packet length as a 4-byte header and then sends the message as-is:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package communicator;\n\nuse 5.10.1;\nuse strict;\nuse warnings;\n\nuse IO::Socket::SSL;\n\nsub connect {\n    my $self   = shift @_;\n    my $server = shift @_;\n    my @field    = split /\\:/, $server;\n\n    my $socket;\n\n    $socket = IO::Socket::SSL-&gt;new(\n        'PeerAddr' =&gt; $field[0],\n        'PeerPort' =&gt; $field[1],\n        'Blocking' =&gt; 1,\n    );\n\n    if ( $socket ) {\n        binmode $socket;\n    }\n    else {\n        # error handling\n    };\n\n    $self-&gt;{'SOCK'} = $socket;\n};\n\nsub sendframe {\n    my $self = shift @_;\n    my $msg  = shift @_;\n\n    if ($self-&gt;{'SOCK'}) {\n        my $length = pack(\"N\", bytes($msg));\n        ($self-&gt;{'SOCK'})-&gt;print($length);\n        ($self-&gt;{'SOCK'})-&gt;print($msg);\n    };\n};\n</code></pre>\n\n<p>This works when called from the command line, but fails when running as a <a href=\"https://metacpan.org/pod/Net::Server\" rel=\"nofollow\"><code>Net::Server</code></a> process. I have tried logging the content that is sent to the remote server, but the log files are identical for both approaches.</p>\n\n<p>I have written a minimal SSL server to capture the content, and found out that when <code>Net::Server</code> is running, each print on a socket adds a newline to what is being sent. So the server receives</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[packet length in binary]Line 1\nLine 2\n--- [Received announced length + 4 bytes]\n</code></pre>\n\n<p>on a direct call and</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[packet length in binary]\nLine 1\nLine 2\n\n--- [Received announced length + 6 bytes]\n</code></pre>\n\n<p>on a call with <code>Net::Server</code> running. Of course this breaks communication with the external server.</p>\n\n<p>I suspect that <code>Net::Server</code> sets a global config variable in <code>IO::Socket::SSL</code> that confuses subsequent calls to <code>sendframe</code>, but I cannot figure out which variable it might be.</p>\n\n<p><strong>Note that</strong> I am using an external library to connect to other servers in addition to my own <code>communicator</code> class. That library also uses <code>IO::Socket::SSL</code> and suffers from the same issue, so I'd prefer to fix <code>IO::Socket::SSL</code> over using something other than <code>$socket-&gt;print</code>.</p>\n\n<p>I would be able to patch the external library, but would likely have to do that every time there is an update.</p>\n\n<p>My system is Debian 7 with Perl 5.14, IO::Socket::SSL 2.020 and Net::Server 2.006</p>\n"}, {"tags": ["perl", "https", "proxy", "lwp", "lwp-useragent"], "comments": [{"owner": {"reputation": 1683, "user_id": 862763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e7de5dad6c72ebdadbf4f6b69268c4d0?s=128&d=identicon&r=PG", "display_name": "alpha_cod", "link": "https://stackoverflow.com/users/862763/alpha-cod"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473158245, "post_id": 39346745, "comment_id": 66023300, "body": "Fixed! Any suggestions for me to try out"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473158503, "post_id": 39346745, "comment_id": 66023457, "body": "Not really I&#39;m afraid. If you can provide a server to test with, I can play around. But off the top of my head I have no ideas."}, {"owner": {"reputation": 1683, "user_id": 862763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e7de5dad6c72ebdadbf4f6b69268c4d0?s=128&d=identicon&r=PG", "display_name": "alpha_cod", "link": "https://stackoverflow.com/users/862763/alpha-cod"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473158711, "post_id": 39346745, "comment_id": 66023594, "body": "Its a private proxy cloud with credentials.."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1473170397, "post_id": 39346745, "comment_id": 66031586, "body": "Why are you setting <code>SSLv3</code>? Is that because you really need it, or because you saw it somewhere?"}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1473173059, "post_id": 39347240, "comment_id": 66033480, "body": "The <code>connect:&#47;&#47;</code> scheme works only if you have <code>LWP::Protocol::connect</code> installed. It works also with version of LWP before 6.06. But with versions starting with 6.06 I recommend to use the builtin proxy facility because you  don&#39;t have to install an additional modul."}], "tags": [], "owner": {"reputation": 1683, "user_id": 862763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e7de5dad6c72ebdadbf4f6b69268c4d0?s=128&d=identicon&r=PG", "display_name": "alpha_cod", "link": "https://stackoverflow.com/users/862763/alpha-cod"}, "is_accepted": false, "score": 2, "last_activity_date": 1473159134, "last_edit_date": 1495541778, "creation_date": 1473159134, "answer_id": 39347240, "question_id": 39346745, "link": "https://stackoverflow.com/questions/39346745/perl-https-over-proxy-using-lwpuseragent/39347240#39347240", "title": "Perl HTTPS over proxy using LWP::UserAgent", "body": "<p>This worked for me:</p>\n\n<pre><code>use LWP::UserAgent;\n\n$ua = LWP::UserAgent-&gt;new(); \n$ua-&gt;proxy('https', 'connect://&lt;USER&gt;:&lt;PSWD&gt;@&lt;IP&gt;:&lt;PORT&gt;/');\n\n$ua-&gt;get('https://www.somesslsite.com');\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/12116244/https-proxy-and-lwpuseragent?rq=1\">HTTPS Proxy and LWP::UserAgent</a></p>\n\n<p>Note: The environment credentials (HTTPS_PROXY_USERNAME) didnt work for me. I had to enter it in the URL like above.</p>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1473170690, "post_id": 39349751, "comment_id": 66031765, "body": "Agreed. OP, please see <a href=\"https://metacpan.org/pod/Crypt::SSLeay#DO-YOU-NEED-Crypt::SSLeay\" rel=\"nofollow noreferrer\">Do you need Crypt::SSLeay?</a> and <a href=\"https://www.nu42.com/2014/04/does-your-code-really-depend-on.html\" rel=\"nofollow noreferrer\">Does your code really depend on Crypt::SSLeay?</a>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1473167102, "creation_date": 1473167102, "answer_id": 39349751, "question_id": 39346745, "link": "https://stackoverflow.com/questions/39346745/perl-https-over-proxy-using-lwpuseragent/39349751#39349751", "title": "Perl HTTPS over proxy using LWP::UserAgent", "body": "<p>The correct setup with recent versions of LWP (starting with version 6.06 which you have) is to just use the same syntax as found in other applications together with the <code>proxy</code> function:</p>\n\n<pre><code> my $ua = LWP::UserAgent-&gt;new;\n $ua-&gt;proxy(https =&gt; 'http://user:pass@proxy');\n $ua-&gt;get('https://server');\n</code></pre>\n\n<p>Alternatively you could set the environment variable <code>https_proxy</code> to the same value, i.e. <code>http://user:pass@proxy</code>.</p>\n\n<p>Before 6.06 proxy support was broken at least when used together with IO::Socket::SSL (default since version 6.0). The syntax you have in your question is for the old backend <code>Crypt::SSLeay</code> which is no longer recommended because it does not check the certificates properly.</p>\n"}], "owner": {"reputation": 1683, "user_id": 862763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e7de5dad6c72ebdadbf4f6b69268c4d0?s=128&d=identicon&r=PG", "display_name": "alpha_cod", "link": "https://stackoverflow.com/users/862763/alpha-cod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2317, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1473167102, "creation_date": 1473157645, "last_edit_date": 1473158208, "question_id": 39346745, "link": "https://stackoverflow.com/questions/39346745/perl-https-over-proxy-using-lwpuseragent", "title": "Perl HTTPS over proxy using LWP::UserAgent", "body": "<p>I wish to request a URL via a HTTPS proxy using perl's LWP::UserAgent module. There is quite a few reference around this, but nothing could help me get it work. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse Data::Dumper;\n\nBEGIN {\n    $ENV{HTTPS_PROXY} = 'https://&lt;IP&gt;:&lt;PORT&gt;';\n    $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n    $ENV{HTTPS_PROXY_USERNAME} = '&lt;API_KEY&gt;';\n    $ENV{HTTPS_PROXY_PASSWORD} = '';\n    $ENV{HTTPS_DEBUG} = 1;  #Add debug output\n}\n\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; {verify_hostname =&gt; 0}, SSL_version =&gt; 'SSLv3', allowed_protocols =&gt; ['https', 'http']);\n$ua-&gt;proxy(['https', 'http'], 'https://&lt;IP&gt;:&lt;PORT&gt;');\nmy $req = HTTP::Request-&gt;new('GET','https://&lt;DOMAIN_URL&gt;');\nprint STDERR Dumper($ua);\nmy $response = $ua-&gt;request($req);\nprint $response-&gt;code .\"\\n\";\nprint STDERR Dumper($response);\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>SSL connect attempt failed error:140770FC:SSL\n  routines:SSL23_GET_SERVER_HELLO:unknown protocol at\n  /home/user/project/local/lib/perl5/LWP/Protocol/http.pm line 51.</p>\n</blockquote>\n\n<p>Despite me specifying allowed_protocols in LWP, https scheme in proxy and the url scheme being https, it still goes to LWP::Protocol::HTTP above and not to LWP::Protocol::HTTPS. </p>\n\n<p>I also verified that the version of LWP::Protocol::HTTPS is 6.06 which is the same as LWP::UserAgent (which was mentioned in one of the forums)</p>\n"}, {"tags": ["python", "perl", "tcl", "tclsh"], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 1514773, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f557430d473800dde8036532580a278?s=128&d=identicon&r=PG", "display_name": "sarbjit", "link": "https://stackoverflow.com/users/1514773/sarbjit"}, "edited": false, "score": 0, "creation_date": 1473160140, "post_id": 39347224, "comment_id": 66024543, "body": "my requirement is to extract the sub-string &quot;ABC_547_d&quot;. I have deliberately used <code>?</code> to make it non greedy. I just want to understand why it works in Python and not TCL"}, {"owner": {"reputation": 14819, "user_id": 974155, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jz7oo.jpg?s=128&g=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/974155/dinesh"}, "reply_to_user": {"reputation": 3234, "user_id": 1514773, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f557430d473800dde8036532580a278?s=128&d=identicon&r=PG", "display_name": "sarbjit", "link": "https://stackoverflow.com/users/1514773/sarbjit"}, "edited": false, "score": 0, "creation_date": 1473160406, "post_id": 39347224, "comment_id": 66024707, "body": "This is with respect to <code>Tcl</code>.  Since the first quantifier is non-greedy, the <code>.*</code> will only match empty string. If you have used <code>.+</code>, then it will give you the letter <code>A</code> alone."}, {"owner": {"reputation": 3234, "user_id": 1514773, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f557430d473800dde8036532580a278?s=128&d=identicon&r=PG", "display_name": "sarbjit", "link": "https://stackoverflow.com/users/1514773/sarbjit"}, "edited": false, "score": 0, "creation_date": 1473165638, "post_id": 39347224, "comment_id": 66028214, "body": "Can you please suggest on how to achieve the desired result using Tcl regex with grouping method. I can see the original regex working in Perl and Python. Does TCL handles regex differently?"}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "reply_to_user": {"reputation": 3234, "user_id": 1514773, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f557430d473800dde8036532580a278?s=128&d=identicon&r=PG", "display_name": "sarbjit", "link": "https://stackoverflow.com/users/1514773/sarbjit"}, "edited": false, "score": 1, "creation_date": 1473173970, "post_id": 39347224, "comment_id": 66034106, "body": "@sarbjit Python and Tcl use different regex engines. (Perl&#39;s is also different, but Python&#39;s is derived from the Perl one by a complicated route.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473173973, "post_id": 39347224, "comment_id": 66034110, "body": "@Dinesh: That is complete nonsense. <code>.*?</code> can&#39;t match the empty string because the pattern requires that it is followed by an underscore."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473183715, "post_id": 39347224, "comment_id": 66039736, "body": "@Borodin, Dinesh is referring to the capturing <code>(.*)</code> which, since it is implicitly non-greedy, will match the empty string following the second underscore."}], "tags": [], "owner": {"reputation": 14819, "user_id": 974155, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jz7oo.jpg?s=128&g=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/974155/dinesh"}, "is_accepted": false, "score": 4, "last_activity_date": 1473159076, "creation_date": 1473159076, "answer_id": 39347224, "question_id": 39346524, "link": "https://stackoverflow.com/questions/39346524/regex-pattern-behaving-differently-in-tcl-compared-with-perl-python/39347224#39347224", "title": "Regex pattern behaving differently in TCL compared with Perl &amp; Python", "body": "<blockquote>\n  <p>A branch has the same preference as the first quantified atom in it\n  which has a preference.</p>\n</blockquote>\n\n<p>So if you have <code>.*</code> as the first quantifier, the whole RE will be greedy,\nand if you have <code>.*?</code> as the first quantifier, the whole RE will be non-greedy.</p>\n\n<p>Since you have used the <code>.*?</code> in the first place itself, the further expression follow lazy mode only. </p>\n\n<p>If you add end of line <code>$</code>, then it will match the whole. </p>\n\n<pre><code>% regexp -inline \"CAR_.*?_(.*)$\" \"CAR_2_ABC_547_d\"\nCAR_2_ABC_547_d ABC_547_d\n</code></pre>\n\n<p><strong>Reference :</strong> <a href=\"https://www.tcl.tk/man/tcl8.6/TclCmd/re_syntax.htm#M95\" rel=\"nofollow\">re_syntax</a></p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1473183498, "creation_date": 1473183498, "answer_id": 39354872, "question_id": 39346524, "link": "https://stackoverflow.com/questions/39346524/regex-pattern-behaving-differently-in-tcl-compared-with-perl-python/39354872#39354872", "title": "Regex pattern behaving differently in TCL compared with Perl &amp; Python", "body": "<p>Another approach, instead of capturing the text that follows the prefix, is to just remove the prefix:</p>\n\n<pre><code>% set result [regsub {^CAR_.*?_} \"CAR_2_ABC_547_d\" {}]\nABC_547_d\n</code></pre>\n"}], "owner": {"reputation": 3234, "user_id": 1514773, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f557430d473800dde8036532580a278?s=128&d=identicon&r=PG", "display_name": "sarbjit", "link": "https://stackoverflow.com/users/1514773/sarbjit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1473183498, "creation_date": 1473157081, "last_edit_date": 1473168099, "question_id": 39346524, "link": "https://stackoverflow.com/questions/39346524/regex-pattern-behaving-differently-in-tcl-compared-with-perl-python", "title": "Regex pattern behaving differently in TCL compared with Perl &amp; Python", "body": "<p>I am trying to extract a sub-string from a string using regular expressions. Below is the working code in <code>Python</code> (giving desired results)</p>\n\n<p><strong>Python Solution</strong></p>\n\n<pre><code>x = r'CAR_2_ABC_547_d'\n&gt;&gt;&gt; spattern = re.compile(\"CAR_.*?_(.*)\")\n&gt;&gt;&gt; spattern.search(x).group(1)\n'ABC_547_d'\n&gt;&gt;&gt;\n</code></pre>\n\n<p><strong>Perl Solution</strong> </p>\n\n<pre><code>$ echo \"CAR_2_ABC_547_d\" | perl -pe's/CAR_.*?_(.*)/$1/'\nABC_547_d\n</code></pre>\n\n<p><strong>TCL Solution</strong> </p>\n\n<p>However, when I try to utilize this approach in <code>Tcl</code>, it is giving me different results. Can someone please comment on this behavior</p>\n\n<pre><code>% regexp -inline \"CAR_.*?_(.*)\" \"CAR_2_ABC_547_d\"\nCAR_2_ {}\n</code></pre>\n"}, {"tags": ["perl", "fedex"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1473155623, "post_id": 39345786, "comment_id": 66021646, "body": "Welcome to Stack Overflow. Your question is not clear. All you show is a bunch of data, but no code. We don&#39;t know what you are trying to do, how that API works or how you are trying to do it. Please <a href=\"https://stackoverflow.com/posts/39345786/edit\">edit</a> your question and include more information, like the code you are running, if you think that the problem is code-related. However, I think it is not. The error message is pretty clear. You should look at the FedEx developer documentation, find error 8522 and read more about it there. It seems like your shipment is too big. But that is hardly a Perl issue I&#39;m afraid."}, {"owner": {"reputation": 1434, "user_id": 180677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WXNGZ.jpg?s=128&g=1", "display_name": "Randy Gamage", "link": "https://stackoverflow.com/users/180677/randy-gamage"}, "edited": false, "score": 0, "creation_date": 1615923957, "post_id": 39345786, "comment_id": 117841734, "body": "Your request says <code>&lt;PackageCount&gt;3&lt;&#47;PackageCount&gt;</code>, but you only list one package.  I think that is your problem.  Package count needs to match the number of packages you are providing."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6799470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823319546dd054a525af86b4919dc2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Mukta", "link": "https://stackoverflow.com/users/6799470/mukta"}, "edited": false, "score": 0, "creation_date": 1473163627, "post_id": 39346627, "comment_id": 66026910, "body": "Hi Dave, Original was a perl datastructure which we are internally refining so that a proper XML request is generated. The final XML request that I&#39;m sending to FEDEX API is now updated in my original question. As you can see from there &lt;PackageCount&gt; is 3 and with that I&#39;m sending details of 1st package. The answer that you gave pointed out the use of array ref, which is not an issue here since I&#39;m converting it to XML. And the same code is working fine if it is a single package request."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 6799470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823319546dd054a525af86b4919dc2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Mukta", "link": "https://stackoverflow.com/users/6799470/mukta"}, "edited": false, "score": 0, "creation_date": 1473163742, "post_id": 39346627, "comment_id": 66026990, "body": "But that Perl data structure has a possible error in it (as I&#39;ve described in my answer). Have you addressed that? Can we see how you get from the Perl data structure to the XML?"}, {"owner": {"reputation": 1, "user_id": 6799470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823319546dd054a525af86b4919dc2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Mukta", "link": "https://stackoverflow.com/users/6799470/mukta"}, "edited": false, "score": 0, "creation_date": 1473165162, "post_id": 39346627, "comment_id": 66027916, "body": "Dave, I have updated my reply. I&#39;m new to SO, so excuse me regarding updating old comments. So, again, the final request that I&#39;m sending is in XML and which is a correct one as you can see. I&#39;m not sure if it is still significant how I&#39;m converting perl data to XML, since my XML output is actually correct. I have gone through the FEDEX API documentation and it is mentioned there that in case of multiple package shipment, this is how we should make request and for further requests we should include &#39;MasterTrackingId&#39; which we receive from first request. Does this clear your doubts?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 6799470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823319546dd054a525af86b4919dc2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Mukta", "link": "https://stackoverflow.com/users/6799470/mukta"}, "edited": false, "score": 0, "creation_date": 1473165264, "post_id": 39346627, "comment_id": 66027973, "body": "Ok. Sounds like you have a question for the Fedex API support team, rather than Stack Overflow :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1473163325, "last_edit_date": 1473163325, "creation_date": 1473157348, "answer_id": 39346627, "question_id": 39345786, "link": "https://stackoverflow.com/questions/39345786/getting-the-error-number-of-packages-exceeds-maximum-from-fedex-api/39346627#39346627", "title": "Getting the error &quot;Number of packages exceeds maximum&quot; from FedEX API", "body": "<p>You give us almost nothing to work with, so it's hard to be any help at all. But there's one thing that seems strange in your request body. Assuming that you're showing us a dump of a Perl data structure, it seems weird that all of your scalar values are implemented as anonymous arrays. For example, the line defining the package count is:</p>\n\n<pre><code>'PackageCount' =&gt; [ 3],\n</code></pre>\n\n<p>Where I'd expect to see:</p>\n\n<pre><code>'PackageCount' =&gt; 3,\n</code></pre>\n\n<p>It's possible that you have access to some documentation that tells you to do it this way, but it seems strange to me.</p>\n\n<p>It would also explain the error message as the array reference would be interpreted as an integer which would almost certainly be far greater than any number expected by the API!</p>\n\n<p><strong>Update:</strong> When I wrote this answer, the question included what looked like a large Perl data structure which exhibited the weirdness that I discuss above. Now that has been changed to an XML document which seems to have the correct values. I have no idea where the original data structure came from or how it was used. And, in the absence of any feedback from the original poster, I have no idea how useful this answer is.</p>\n"}], "owner": {"reputation": 1, "user_id": 6799470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823319546dd054a525af86b4919dc2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Mukta", "link": "https://stackoverflow.com/users/6799470/mukta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473163325, "creation_date": 1473155087, "last_edit_date": 1473160585, "question_id": 39345786, "link": "https://stackoverflow.com/questions/39345786/getting-the-error-number-of-packages-exceeds-maximum-from-fedex-api", "title": "Getting the error &quot;Number of packages exceeds maximum&quot; from FedEX API", "body": "<p>I am getting \"FedEx Ship Error: (8522) Number of packages exceeds maximum\" error. I am trying to send a multiple-package shipment request to fedEX, but it is getting failed in first package request only.</p>\n\n<p>For sending multiple shipment request to FedEX, we have to send separate request for each package, the master tracking information will be returned in reply from the first package requested. That master tracking information is then inserted into the requests for each additional package requested for that multiple-package shipment. </p>\n\n<p>The example below is first package request.</p>\n\n<p>Below is the XML request Body I am sending to FedEX API \"<a href=\"https://wsbeta.fedex.com:443/xml\" rel=\"nofollow\">https://wsbeta.fedex.com:443/xml</a>\"</p>\n\n<p>The code is just preparing the data structure, converting it into XML and hitting the fedEX API with XML request.</p>\n\n<pre><code>my $http_request = HTTP::Request-&gt;new('POST', $config-&gt;{'URL'});\n$http_request-&gt;content_type('application/x-www-form-urlencoded');\n$http_request-&gt;content(Encode::encode_utf8($xml_request_body));\n\nmy $http_response;\neval {\n    $http_response = $ua-&gt;request($http_request);\n};\nreturn errorShipResponse($p) if (!defined $http_response || !$http_response-&gt;is_success);\n\nmy $response;\neval {\n    $response = XML::Simple::XMLin(\n        $http_response-&gt;content,\n        ForceArray =&gt; 1,\n        NSExpand =&gt; 1\n    );\n};\n</code></pre>\n\n<p><strong>$xml_request_body</strong></p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ProcessShipmentRequest xmlns=\"http://fedex.com/ws/ship/v12\"&gt;\n   &lt;WebAuthenticationDetail&gt;\n      &lt;UserCredential&gt;\n         &lt;Key&gt;aaaaaaaaaaa&lt;/Key&gt;\n         &lt;Password&gt;aaaaaaaaaaaaaaaa&lt;/Password&gt;\n      &lt;/UserCredential&gt;\n   &lt;/WebAuthenticationDetail&gt;\n   &lt;ClientDetail&gt;\n      &lt;AccountNumber&gt;111111111&lt;/AccountNumber&gt;\n      &lt;MeterNumber&gt;111111111111&lt;/MeterNumber&gt;\n   &lt;/ClientDetail&gt;\n   &lt;Version&gt;\n      &lt;ServiceId&gt;ship&lt;/ServiceId&gt;\n      &lt;Major&gt;12&lt;/Major&gt;\n      &lt;Intermediate&gt;0&lt;/Intermediate&gt;\n      &lt;Minor&gt;0&lt;/Minor&gt;\n   &lt;/Version&gt;\n   &lt;RequestedShipment&gt;\n      &lt;ShipTimestamp&gt;2016-09-06T06:42:41-04:00&lt;/ShipTimestamp&gt;\n      &lt;DropoffType&gt;REGULAR_PICKUP&lt;/DropoffType&gt;\n      &lt;ServiceType&gt;SMART_POST&lt;/ServiceType&gt;\n      &lt;PackagingType&gt;YOUR_PACKAGING&lt;/PackagingType&gt;\n      &lt;TotalWeight&gt;\n         &lt;Units&gt;LB&lt;/Units&gt;\n         &lt;Value&gt;15.00&lt;/Value&gt;\n      &lt;/TotalWeight&gt;\n      &lt;Shipper&gt;\n         &lt;AccountNumber&gt;111111111111&lt;/AccountNumber&gt;\n         &lt;Tins&gt;\n            &lt;TinType&gt;BUSINESS_STATE&lt;/TinType&gt;\n            &lt;Number444444444444&lt;/Number&gt;\n         &lt;/Tins&gt;\n         &lt;Contact&gt;\n            &lt;CompanyName&gt;aaaaaaaaaaaa&lt;/CompanyName&gt;\n            &lt;PhoneNumber&gt;11111111&lt;/PhoneNumber&gt;\n         &lt;/Contact&gt;\n         &lt;Address&gt;\n            ADDRESS HERE\n         &lt;/Address&gt;\n      &lt;/Shipper&gt;\n      &lt;Recipient&gt;\n         &lt;Contact&gt;\n            &lt;PersonName&gt;mukta jain&lt;/PersonName&gt;\n            &lt;PhoneNumber&gt;1234567899&lt;/PhoneNumber&gt;\n         &lt;/Contact&gt;\n         &lt;Address&gt;\n            &lt;StreetLines&gt;lwehcfkwdjh&lt;/StreetLines&gt;\n            &lt;City&gt;NY&lt;/City&gt;\n            &lt;StateOrProvinceCode&gt;NY&lt;/StateOrProvinceCode&gt;\n            &lt;PostalCode&gt;12345&lt;/PostalCode&gt;\n            &lt;CountryCode&gt;US&lt;/CountryCode&gt;\n            &lt;Residential&gt;true&lt;/Residential&gt;\n         &lt;/Address&gt;\n      &lt;/Recipient&gt;\n      &lt;ShippingChargesPayment&gt;\n         &lt;PaymentType&gt;SENDER&lt;/PaymentType&gt;\n         &lt;Payor&gt;\n            &lt;ResponsibleParty&gt;\n               &lt;AccountNumber&gt;444444444&lt;/AccountNumber&gt;\n               &lt;Tins&gt;\n                  &lt;TinType&gt;BUSINESS_STATE&lt;/TinType&gt;\n                  &lt;Number&gt;4444444444&lt;/Number&gt;\n               &lt;/Tins&gt;\n               &lt;Contact&gt;\n                  &lt;CompanyName&gt;aaaaaaaaa&lt;/CompanyName&gt;\n                  &lt;PhoneNumber&gt;111111111&lt;/PhoneNumber&gt;\n               &lt;/Contact&gt;\n               &lt;Address&gt;\n                  &lt;ADDRESS HERE&gt;\n               &lt;/Address&gt;\n            &lt;/ResponsibleParty&gt;\n         &lt;/Payor&gt;\n      &lt;/ShippingChargesPayment&gt;\n      &lt;SmartPostDetail&gt;\n         &lt;Indicia&gt;PARCEL_SELECT&lt;/Indicia&gt;\n         &lt;AncillaryEndorsement&gt;ADDRESS_CORRECTION&lt;/AncillaryEndorsement&gt;\n         &lt;SpecialServices&gt;USPS_DELIVERY_CONFIRMATION&lt;/SpecialServices&gt;\n         &lt;HubId&gt;1234&lt;/HubId&gt;\n         &lt;CustomerManifestId&gt;123456&lt;/CustomerManifestId&gt;\n      &lt;/SmartPostDetail&gt;\n      &lt;LabelSpecification&gt;\n         &lt;LabelFormatType&gt;COMMON2D&lt;/LabelFormatType&gt;\n         &lt;ImageType&gt;EPL2&lt;/ImageType&gt;\n         &lt;LabelStockType&gt;STOCK_4X6&lt;/LabelStockType&gt;\n      &lt;/LabelSpecification&gt;\n      &lt;RateRequestTypes&gt;LIST&lt;/RateRequestTypes&gt;\n      &lt;PackageCount&gt;3&lt;/PackageCount&gt;\n      &lt;RequestedPackageLineItems&gt;\n         &lt;SequenceNumber&gt;1&lt;/SequenceNumber&gt;\n         &lt;GroupPackageCount&gt;1&lt;/GroupPackageCount&gt;\n         &lt;Weight&gt;\n            &lt;Units&gt;LB&lt;/Units&gt;\n            &lt;Value&gt;5&lt;/Value&gt;\n         &lt;/Weight&gt;\n         &lt;Dimensions&gt;\n            &lt;Length&gt;7&lt;/Length&gt;\n            &lt;Width&gt;7&lt;/Width&gt;\n            &lt;Height&gt;7&lt;/Height&gt;\n            &lt;Units&gt;IN&lt;/Units&gt;\n         &lt;/Dimensions&gt;\n         &lt;CustomerReferences&gt;\n            &lt;CustomerReferenceType&gt;INVOICE_NUMBER&lt;/CustomerReferenceType&gt;\n            &lt;Value&gt;E2315141&lt;/Value&gt;\n         &lt;/CustomerReferences&gt;\n         &lt;CustomerReferences&gt;\n            &lt;CustomerReferenceType&gt;CUSTOMER_REFERENCE&lt;/CustomerReferenceType&gt;\n            &lt;Value&gt;E2315141&lt;/Value&gt;\n         &lt;/CustomerReferences&gt;\n      &lt;/RequestedPackageLineItems&gt;\n   &lt;/RequestedShipment&gt;\n&lt;/ProcessShipmentRequest&gt;\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "win32ole"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473156478, "post_id": 39345023, "comment_id": 66022177, "body": "I apologise if I&#39;m being dim, but what does DBI have to do with Win32::OLE? I see no problem with allowing multithreaded access to a database using <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a>"}, {"owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473164786, "post_id": 39345023, "comment_id": 66027662, "body": "I thought, that perl DBI library use in my case Win32::OLE library and thus is not save connect to database by $con = DBI-&gt;connect(&quot;dbi:ADO:...)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473168547, "post_id": 39345023, "comment_id": 66030172, "body": "You will need to use an ODBC connection using the <a href=\"https://metacpan.org/pod/DBD::ODBC\" rel=\"nofollow noreferrer\">DBD::ODBC</a> driver, but <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> isn&#39;t dependent on any modules other than some build-time requirements and the <code>DBD</code> drivers."}, {"owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473182465, "post_id": 39345023, "comment_id": 66039012, "body": "I tried ODBC connection, if I create new connection in each perl thread, so far everything is working without errors. Thank you !"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473239280, "post_id": 39345023, "comment_id": 66059903, "body": "I&#39;m pleased that it&#39;s working for you. You should take note of the warning in my answer, that you must set <code>$dbh-&gt;{AutoInactiveDestroy} = 1</code> directly after the <code>connect</code> call for safer multithreading operation."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473173434, "post_id": 39349039, "comment_id": 66033752, "body": "There is a huge learning curve for <code>DBIx::Class</code>, and it is dependent on a vast number of non-core subsidiary modules: <code>Class::Accessor::Grouped</code>, <code>Class::C3::Componentised</code>, <code>Config::Any</code>, <code>Context::Preserve</code>, <code>DBD::SQLite</code>, <code>Data::Dumper::Concise</code>, <code>Data::Page</code>, <code>MRO::Compat</code>, <code>Module::Find</code>, <code>Package::Stash</code>, <code>Path::Class</code>, <code>SQL::Abstract</code>, <code>Scope::Guard</code>, <code>Sub::Name</code>, <code>Test::Deep</code>, <code>Try::Tiny</code> and <code>namespace::clean</code>. I am certain that a simple <code>DBI</code> application will serve."}], "tags": [], "owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "is_accepted": false, "score": 0, "last_activity_date": 1473164877, "creation_date": 1473164877, "answer_id": 39349039, "question_id": 39345023, "link": "https://stackoverflow.com/questions/39345023/perl-and-ms-sql-thread-issue/39349039#39349039", "title": "Perl and MS SQL thread issue", "body": "<p>As suggested by @Borodin why not use <a href=\"http://search.cpan.org/~ribasushi/DBIx-Class-0.082840/lib/DBIx/Class.pod\" rel=\"nofollow\">DBIx::Class</a> ?</p>\n\n<p>It is thread safe. Maybe you should explain better the way your application have access to database. It seems that you have a \"Windows server\" that is a sort of Perl Module that use Win32::OLE and this server acctually talks with the database.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1473169038, "creation_date": 1473169038, "answer_id": 39350433, "question_id": 39345023, "link": "https://stackoverflow.com/questions/39345023/perl-and-ms-sql-thread-issue/39350433#39350433", "title": "Perl and MS SQL thread issue", "body": "<p><a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow\"><code>DBI</code></a> isn't dependent on anything other than the usual build and test modules that are used during installation</p>\n\n<p>There is no <code>DBD</code> driver for SQL Server (I'm not clear why. Perhaps someone would enlighten me?) so you will need to use an ODBC connection using the <a href=\"https://metacpan.org/pod/DBD::ODBC\" rel=\"nofollow\"><code>DBD::ODBC</code></a> driver</p>\n\n<p>I'm unsure how <code>DBI</code> behaves under threads, and I suggest you use <code>fork</code> instead which is emulated on Windows versions of Perl. You will need to set <code>$dbh-&gt;{AutoInactiveDestroy} = 1</code> to prevent processes from auto-destroying database and statement handles when they shouldn't</p>\n"}], "owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 39350433, "answer_count": 2, "score": 0, "last_activity_date": 1473169038, "creation_date": 1473153023, "last_edit_date": 1473156448, "question_id": 39345023, "link": "https://stackoverflow.com/questions/39345023/perl-and-ms-sql-thread-issue", "title": "Perl and MS SQL thread issue", "body": "<p>I have a Perl application on Windows which uses threads which run in parallel. Each thread accesses an MSSQL database.</p>\n\n<p>I understand that I can't use <a href=\"https://metacpan.org/pod/Win32::OLE\" rel=\"nofollow\"><code>Win32::OLE</code></a> because it is not thread safe.</p>\n\n<p>Could you suggest me some another suitable solution for doing this?</p>\n\n<ul>\n<li><p>Create a Windows service, which will access the database as a single thread and Perl will use this service?</p></li>\n<li><p>Create another Perl app \"server\", which will access to DB as single thread app, and the Perl threads will use this service? </p></li>\n<li><p>Use <code>Win32::OLE</code> (DBI) library only in child threads or by some safe way?</p></li>\n</ul>\n\n<p>I don't know what the right way is, and what the ways to solve it might be.</p>\n"}, {"tags": ["perl", "pdf", "temporary-files", "data-uri"], "comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1473150282, "post_id": 39343941, "comment_id": 66018283, "body": "How does <code>file output.pdf</code> parse the output file as? what does it suggest it is?"}, {"owner": {"reputation": 1665, "user_id": 4665781, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/vqN2k.png?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4665781/jordan"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1473150522, "post_id": 39343941, "comment_id": 66018429, "body": "adobe reader, preview and firefox recognise it&#39;s a pdf, but when trying to open it, I get errors like &#39;There was an error opening this document, the file is damaged and could not be repaired&#39;."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1473150722, "post_id": 39343941, "comment_id": 66018533, "body": "Does the <code>file</code> command suggest it is a PDF? (I have a feeling it might actually be a <code>.jpg</code> or <code>.bmp</code> instead...)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1473151117, "post_id": 39343941, "comment_id": 66018766, "body": "I think you need to show a specific example which is not working and the code you use to parse it. I could imagine that there is some junk at the end of the output which gets ignored by some PDF readers but not by others."}, {"owner": {"reputation": 1665, "user_id": 4665781, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/vqN2k.png?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4665781/jordan"}, "edited": false, "score": 0, "creation_date": 1473151126, "post_id": 39343941, "comment_id": 66018777, "body": "What do you mean by &#39;file command&#39;?"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1473152221, "post_id": 39343941, "comment_id": 66019417, "body": "@Jordan unix has a command, called <code>file</code>, which tells you what type of file passed to it is (it looks at the file for specific &quot;magic cookies&quot;, identifiers that define what data type the file is). For example: <code>file output.pdf</code> gives <code>output.pdf: JPEG image data, EXIF standard</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1473153036, "post_id": 39343941, "comment_id": 66019971, "body": "Are you working on Windows? You should use <code>binmode</code> on the file handle before you print to it."}], "owner": {"reputation": 1665, "user_id": 4665781, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/vqN2k.png?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4665781/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473152725, "creation_date": 1473149810, "last_edit_date": 1473152725, "question_id": 39343941, "link": "https://stackoverflow.com/questions/39343941/perl-data-uri-to-filetemp", "title": "Perl - Data URI to File::Temp", "body": "<p>I have a Data URI string, for example:</p>\n\n<pre><code>data:application/pdf;base64,ABCDEFBLAHBLAH=\n</code></pre>\n\n<p>How do I convert this to a <code>File::Temp</code> object?</p>\n\n<p>I've tried taking the string after the first comma and using <code>Mime::Base64</code> to decode that string, then printing the decoded string to a new <code>Temp::File</code> handler. It works fine for images, but not for PDFs as it believes the file is corrupted (weirdly, Chrome has no problem reading the PDF, but adobe reader, preview, and firefox all claim it's corrupt).</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["regex", "perl", "pcre"], "answers": [{"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473153140, "post_id": 39344984, "comment_id": 66020027, "body": "It&#39;s not only regex101 (PCRE and Python) debugger that shows it as a backtrack step but Perl debugger does it too. What about them?"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473153375, "post_id": 39344984, "comment_id": 66020181, "body": "@revo Perl is a different engine, but it all boils down to <i>how</i> you define what a backtrack is. If you define it as &quot;go back in the matched string&quot;, then yes, a backtrack occurs. If you define it as &quot;try some other alternative&quot;, then what occurs is just an assertion ending. My guess is that the definition was guided by the implementation (it was probably just easier to go with the first definition)."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473153600, "post_id": 39344984, "comment_id": 66020318, "body": "I know that, that&#39;s why I point to it as a <i>kind of</i> backtrack in question. If it is call out that&#39;s the culprit then Perl should have a difference that has not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473154542, "post_id": 39344984, "comment_id": 66020990, "body": "@revo: <i>&quot;Perl debugger does it too&quot;</i> I mentioned this before: I don&#39;t see any reference to &quot;backtracking&quot; in the Perl re debug output. What makes you think it&#39;s there?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473154836, "post_id": 39344984, "comment_id": 66021187, "body": "Sorry but you didn&#39;t mention that before. Re-check <code>Regexp::Debugger</code> output for a clear representation of what is going on. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473156091, "post_id": 39344984, "comment_id": 66021934, "body": "@revo: Ah I see. It says <i>Back-tracked within regex and reend of positive lookahead</i>. I don&#39;t understand <i>reend</i> but I see your point."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473156193, "post_id": 39344984, "comment_id": 66022004, "body": "I don&#39;t get it either. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1473238839, "post_id": 39344984, "comment_id": 66059620, "body": "@revo: I raised this with the module&#39;s author, Damian Conway, who replied with this <i>&quot;It&#39;s a bug in the automatic description generation. I&#39;ve just patched it and uploaded a new release that changes the message to</i> <b><i>Resetting match position after end of positive lookahead</i></b> <i>which is much more descriptive&quot;</i>"}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473239135, "post_id": 39344984, "comment_id": 66059796, "body": "@Borodin nice, that description makes sense"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473248807, "post_id": 39344984, "comment_id": 66066005, "body": "This is now <i>entirely</i> something different. Did you send an email? I appreciate your effort on this. @Borodin"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473250047, "post_id": 39344984, "comment_id": 66066878, "body": "In case of a lookbehind it shows such description: <i>Back-tracked within regex and retrying a literal &#39;_&#39; character</i> What do you think about this? @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473250981, "post_id": 39344984, "comment_id": 66067551, "body": "@revo: What is your exact regex and target string? I think that may be another error that the author may want to fix. I&#39;ll get in touch again."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473251508, "post_id": 39344984, "comment_id": 66067929, "body": "It doesn&#39;t differ, in my case it is <code>&#47;a_(?&lt;=_)b&#47;</code> @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473281695, "post_id": 39344984, "comment_id": 66085610, "body": "@revo: Well that&#39;s different from the forward look-ahead: it clearly has to be. I just wanted a definitive expression to discuss, and I guess that&#39;s <code>&#39;a_b&#39; =~ &#47;a_(?&lt;=_)b&#47;</code>. Thanks."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473281888, "post_id": 39344984, "comment_id": 66085703, "body": "Sorry I didn&#39;t get your comment. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473282766, "post_id": 39344984, "comment_id": 66086108, "body": "I&#39;m questioning <i>&quot;It doesn&#39;t differ&quot;</i> as we have never discussed the look-behind construct at all."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473286105, "post_id": 39344984, "comment_id": 66087339, "body": "In question I&#39;m asking about lookarounds (both lookaheads and lookbhinds). You asked about exact regex that I&#39;m pointing to, and I said it doesn&#39;t differ. Whole regex could be something different. It only needs a lookbehind inside it for <code>Regexp::Debugger</code> to produce a similar description. Am I clear? @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1473286279, "post_id": 39344984, "comment_id": 66087392, "body": "@revo: Okay, I think you mean &quot;it doesn&#39;t matter&quot;. &quot;It doesn&#39;t differ&quot; means &quot;it isn&#39;t different&quot;."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473286946, "post_id": 39344984, "comment_id": 66087599, "body": "Yea, I could say that but I think we were just thinking about a different subject. Nevermind. @Borodin"}], "tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 4, "last_activity_date": 1473153663, "last_edit_date": 1473153663, "creation_date": 1473152901, "answer_id": 39344984, "question_id": 39343821, "link": "https://stackoverflow.com/questions/39343821/lookaround-backtracks-right-before-closing-bracket/39344984#39344984", "title": "Lookaround backtracks right before closing bracket", "body": "<p>The backtrack is a lie.</p>\n\n<p>It's just a consequence of how the regex101 debugger is implemented. It uses a PCRE feature (flag) called <code>PCRE_AUTO_CALLOUT</code>. This flag tells the PCRE engine to invoke a user-defined function at <em>every</em> step of matching. This function receives the current match status as input.</p>\n\n<p>The catch is that PCRE <em>doesn't</em> tell the callout when it <em>really</em> backtracks. Regex101 has to infer that from the match status.</p>\n\n<p>As you can see, in the step before the <em>\"backtrack\"</em> occurs, the current matched text is <code>a_</code>, and just after you get out of the lookahead, it's reverted to <code>a</code>. Regex101 notices the matched text is <em>shorter</em> and therefore it infers that a backtrack <em>must have happened</em>, with the confusing outcome you noticed.</p>\n\n<hr>\n\n<p>For reference, here's the internal PCRE representation of the pattern with auto-callout enabled:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>$ pcretest\nPCRE version 8.38 2015-11-23\n\n  re&gt; /a(?=_)_b/DC\n------------------------------------------------------------------\n  0  59 Bra\n  3     Callout 255 0 1\n  9     a\n 11     Callout 255 1 5\n 17  17 Assert\n 20     Callout 255 4 1\n 26     _\n 28     Callout 255 5 0\n 34  17 Ket\n 37     Callout 255 6 1\n 43     _\n 45     Callout 255 7 1\n 51     b\n 53     Callout 255 8 0\n 59  59 Ket\n 62     End\n------------------------------------------------------------------\nCapturing subpattern count = 0\nOptions:\nFirst char = 'a'\nNeed char = 'b'\n</code></pre>\n\n<p>As you can see, there's no branching opcode there, just an <code>Assert</code>.</p>\n"}], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 39344984, "answer_count": 1, "score": 3, "last_activity_date": 1473153663, "creation_date": 1473149445, "last_edit_date": 1495542357, "question_id": 39343821, "link": "https://stackoverflow.com/questions/39343821/lookaround-backtracks-right-before-closing-bracket", "title": "Lookaround backtracks right before closing bracket", "body": "<p><sub>Note: this question is an outcome from <a href=\"https://stackoverflow.com/a/39321555/1020526\"><strong>another answer</strong></a> that as of now all its comments are removed.</sub></p>\n\n<p>In case of using a lookaround construct within a RegEx there is a backtrack or a <em>kind of</em> that takes place right before closing bracket. As I'm aware this backtrack comes to output of Perl and PCRE debuggers:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OVu10.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OVu10.png\" alt=\"enter image description here\"></a></p>\n\n<p>The question is what is this <em>backtrack</em>, why is it there and how is it interpreted as a <a href=\"https://en.wikipedia.org/wiki/Backtracking\" rel=\"nofollow noreferrer\">backtrack</a>?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1473147466, "post_id": 39343089, "comment_id": 66016724, "body": "I just tried your original code on Perl 5.22 on Xenial and it works fine. I think you need to show us more of your code."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1473147682, "post_id": 39343089, "comment_id": 66016835, "body": "I think that at some point in time, <code>JSON</code> switched to using <code>JSON::XS</code> or <code>JSON::PP</code> (in order of preference). Maybe when that happened, the semantics of it changed slightly."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1473150549, "post_id": 39343089, "comment_id": 66018446, "body": "I added a <code>handler();</code> line at the end and installed libapache2-request-perl and libapache2-mod-perl2 and it works fine. Are you using the system Perl and modules or something like Perlbrew to manage the environment?"}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "edited": false, "score": 0, "creation_date": 1473152427, "post_id": 39343089, "comment_id": 66019557, "body": "Apart from libapache2-request-perl and libapache2-mod-perl2 I have not installed any custom perl packages. JSON is installed via CPAN"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1473155200, "post_id": 39343089, "comment_id": 66021403, "body": "Is there a reason why you installed JSON through CPAN instead of just using libjson-perl? Did you update your CPAN modules after the distro update completed?"}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "edited": false, "score": 0, "creation_date": 1473166329, "post_id": 39343089, "comment_id": 66028647, "body": "Not really. The person I inherited the projet from said to install some packages via apt-get and some via CPAN. After upgrading I used apt-get update/upgrade and even &quot;reinstalled&quot; all packages (apt-get &amp; CPAN). I now manually deleted all JSON files and installed it via apt-get. Still not working, with the same error."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1473170324, "post_id": 39343089, "comment_id": 66031533, "body": "Are you positive that this example: <code>my $json_lang = to_json(\\%lang);</code> failed?"}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "edited": false, "score": 0, "creation_date": 1473174566, "post_id": 39343089, "comment_id": 66034485, "body": "Just retried all my tests above with the non-CPAN JSON, still does not work. I guess I have to do a fresh 16.04 install, transfer my code and see if that works \u2026"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1473176855, "post_id": 39343089, "comment_id": 66035926, "body": "Please provide the output of <code>perl -E&#39;use JSON; eval { require JSON::XS }; eval { require JSON::PP }; say &quot;&lt;$_&gt;&quot; for $JSON::VERSION, $JSON::XS::VERSION, $JSON::PP::VERSION, $INC{&quot;JSON.pm&quot;}, JSON-&gt;backend, to_json({a=&gt;&quot;b&quot;,c=&gt;&quot;d&quot;})&#39;</code>"}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473228861, "post_id": 39343089, "comment_id": 66053858, "body": "@ikegami: &lt;2.90&gt; &lt;3.01&gt; &lt;2.27202&gt; &lt;/usr/local/share/perl/5.18.2/JSON.pm&gt; &lt;JSON::XS&gt; &lt;{&quot;c&quot;:&quot;d&quot;,&quot;a&quot;:&quot;b&quot;}&gt;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473230977, "post_id": 39343089, "comment_id": 66054963, "body": "Huh? You just showed <code>to_json</code> working for the same data you previously said it didn&#39;t work. Did you use a different <code>perl</code> this time?"}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "edited": false, "score": 0, "creation_date": 1473234165, "post_id": 39343089, "comment_id": 66056794, "body": "No \u2026 the output is the same for sudo an non-sudo btw."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473262072, "post_id": 39343089, "comment_id": 66075837, "body": "Well, you used <i>something</i> different, because <code>to_json</code> worked."}, {"owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "edited": false, "score": 0, "creation_date": 1473263493, "post_id": 39343089, "comment_id": 66076765, "body": "My first tests with a fresh 16.04 install seems promising. Did not install any json via CPAN, only via apt-get. Until now I found no places where any to_json or from_json calls broke."}], "answers": [{"tags": [], "owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "is_accepted": true, "score": 0, "last_activity_date": 1617693659, "creation_date": 1617693659, "answer_id": 66964308, "question_id": 39343089, "link": "https://stackoverflow.com/questions/39343089/perl-json-to-json-not-working-after-ubuntu-upgrade-14-04-16-04/66964308#66964308", "title": "Perl JSON to_json not working after Ubuntu upgrade (14.04 -&gt; 16.04)", "body": "<p>I now had the same issue with a fresh install, and decided to completely remove JSON::XS\u00a0/ libjson-xs-perl from the project, which instantaneously fixed this problem</p>\n"}], "owner": {"reputation": 1370, "user_id": 534883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3306032b50713338cd18ded6744522ad?s=128&d=identicon&r=PG", "display_name": "Pit", "link": "https://stackoverflow.com/users/534883/pit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 66964308, "answer_count": 1, "score": 0, "last_activity_date": 1617708097, "creation_date": 1473147153, "last_edit_date": 1617708097, "question_id": 39343089, "link": "https://stackoverflow.com/questions/39343089/perl-json-to-json-not-working-after-ubuntu-upgrade-14-04-16-04", "title": "Perl JSON to_json not working after Ubuntu upgrade (14.04 -&gt; 16.04)", "body": "<p><strong>Update</strong>: A fresh install did not have the problem. I gave up on trying to fix the upgraded Ubuntu.</p>\n\n<p><strong>Orignal question:</strong></p>\n\n<p>I'm using the perl CPAN package JSON to convert a hasref to json using the  <code>to_json</code> function.</p>\n\n<p>This worked fine on Ubuntu 14.04 with perl version 5.18.2, but after ugrading to Ubuntu 16.04 with perl version 5.22.1 I get the error message:</p>\n\n<pre><code>hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this)\n</code></pre>\n\n<p>The orignal code was this:</p>\n\n<pre><code>my $lang = {\n        'connection_lost' =&gt; 'Network connection was lost',\n        'connection_lost_more' =&gt; 'Please refresh this page to fix this problem'\n};\nmy $json_lang = to_json($lang);\n</code></pre>\n\n<p>I checked with <code>warn ref($lang)</code> the type of <code>$lang</code> which returned 'HASH', so it should be an hashref?</p>\n\n<p>I tried to change it to this:</p>\n\n<pre><code>my %lang;\n$lang{'connection_lost'} = 'Network connection was lost';\n$lang{'connection_lost_more'} = 'Please refresh this page to fix this problem';\nmy $json_lang = to_json(%lang);\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>my %lang;\n$lang{'connection_lost'} = 'Network connection was lost';\n$lang{'connection_lost_more'} = 'Please refresh this page to fix this problem';\nmy $json_lang = to_json(\\%lang);\n</code></pre>\n\n<p>Both failed.\nThen I tried the <code>allow_nonref</code> switch:</p>\n\n<pre><code>my $lang = {\n        'connection_lost' =&gt; 'Network connection was lost',\n        'connection_lost_more' =&gt; 'Please refresh this page to fix this problem'\n};\nmy $jsonnonref = JSON-&gt;new-&gt;allow_nonref; \nmy $json_lang = $jsonnonref-&gt;to_json($lang);\n</code></pre>\n\n<p>which resulted in the error message <code>to_json should not be called as a method</code></p>\n\n<p>How do I get this to work?</p>\n\n<p>Absolute minimal code that does not work for me:</p>\n\n<pre><code>package Handlers::test_handlers;\n\nuse strict;\nuse warnings;\nuse Apache2::Const -compile =&gt; qw(OK);\nuse Apache2::Request;\n\nuse JSON;\n\nsub handler {\n        my $lang = {\n                'connection_lost' =&gt; 'connection_lost',\n                'connection_lost_more' =&gt; 'connection_lost_more'\n        };\n        #my $json_lang = 'Hello world';\n        my $json_lang = to_json($lang);        \n        print $json_lang;\n        return Apache2::Const::OK;\n}\n\n1;\n</code></pre>\n\n<p>Using the 'Hello world'-line works, while the to_json-line does not.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1473144468, "post_id": 39342221, "comment_id": 66015064, "body": "<code>\\w</code> matches one single character so your best will be <code>n.name2</code>"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 2, "creation_date": 1473144610, "post_id": 39342221, "comment_id": 66015140, "body": "Just add a <code>+</code> after the first <code>\\w</code>"}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": true, "score": 2, "last_activity_date": 1473144713, "creation_date": 1473144713, "answer_id": 39342345, "question_id": 39342221, "link": "https://stackoverflow.com/questions/39342221/struggling-to-pattern-match-using-perl-regex-with-this-file-name-format-word1-w/39342345#39342345", "title": "Struggling to pattern match using Perl/regex with this file name format: word1.word2", "body": "<p>Just modify your regex from <code>(\\w\\.\\w+)</code> to <code>(\\w+\\.\\w+)</code></p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1473144968, "post_id": 39342375, "comment_id": 66015322, "body": "If something is unclear to you just ask the OP for it, instead modifying the code based on your believes."}], "tags": [], "owner": {"reputation": 774, "user_id": 3373429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LERZ2.jpg?s=128&g=1", "display_name": "Steve Kline", "link": "https://stackoverflow.com/users/3373429/steve-kline"}, "is_accepted": false, "score": 0, "last_activity_date": 1473145222, "last_edit_date": 1473145222, "creation_date": 1473144798, "answer_id": 39342375, "question_id": 39342221, "link": "https://stackoverflow.com/questions/39342221/struggling-to-pattern-match-using-perl-regex-with-this-file-name-format-word1-w/39342375#39342375", "title": "Struggling to pattern match using Perl/regex with this file name format: word1.word2", "body": "<p>Just \\w implies a single character.</p>\n\n<p>You have to add parameters to that... </p>\n\n<pre><code>? = 0 or 1 of preceeding char.\n* = 0 or MORE of preceding char.\n+ = 1 or MORE of preceding char.\n\n(?:([-]dbname)\\s*)(\\w+\\.\\w+)\n</code></pre>\n\n<p>Against the string \"-dbname something.cool\" it will return only \"something.cool\".</p>\n\n<p>Adding Regex101 reference so you can see a break down of your regular expression. </p>\n\n<p><a href=\"https://regex101.com/r/pD8uC5/2\" rel=\"nofollow\">Regex Example</a></p>\n\n<p><strong>Update</strong> </p>\n\n<p>Noticed the intent for script arguments. My apologies. Regex updated. It will find the argument but it will only capture the name value... please let me know if you need the -dbname parameter as well or if just the name works for you. This regex is set to \"match\" but not include it.</p>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 5948263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141f7d1e3669e2cbd99fea6fb2f05b2?s=128&d=identicon&r=PG&f=1", "display_name": "BentChainRing", "link": "https://stackoverflow.com/users/5948263/bentchainring"}, "edited": false, "score": 0, "creation_date": 1473267390, "post_id": 39342435, "comment_id": 66078974, "body": "Thank you. Your answer to my immediate problem worked great."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 156, "user_id": 5948263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141f7d1e3669e2cbd99fea6fb2f05b2?s=128&d=identicon&r=PG&f=1", "display_name": "BentChainRing", "link": "https://stackoverflow.com/users/5948263/bentchainring"}, "edited": false, "score": 0, "creation_date": 1473279396, "post_id": 39342435, "comment_id": 66084601, "body": "@BentChainRing Happy to help! Please check the answer that was most helpful to you. :)"}, {"owner": {"reputation": 156, "user_id": 5948263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141f7d1e3669e2cbd99fea6fb2f05b2?s=128&d=identicon&r=PG&f=1", "display_name": "BentChainRing", "link": "https://stackoverflow.com/users/5948263/bentchainring"}, "edited": false, "score": 0, "creation_date": 1473362721, "post_id": 39342435, "comment_id": 66123446, "body": "actually, each answer was helpful, informative, and confirming in its own way. can I check more then one?"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 3, "last_activity_date": 1497290569, "last_edit_date": 1497290569, "creation_date": 1473144929, "answer_id": 39342435, "question_id": 39342221, "link": "https://stackoverflow.com/questions/39342221/struggling-to-pattern-match-using-perl-regex-with-this-file-name-format-word1-w/39342435#39342435", "title": "Struggling to pattern match using Perl/regex with this file name format: word1.word2", "body": "<p>You have a bug in your regex (missing a <code>+</code>). You might consider using one of the <a href=\"http://perldoc.perl.org/Getopt/Std.html\" rel=\"nofollow noreferrer\">Getopt</a> <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">modules</a>, or even the built-in <code>-s</code> switch (see <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perldoc perlrun</a>) to parse your arguments. For an answer to your immediate problem, you can easily take the captured expressions from a regex like so:</p>\n\n<pre><code>my ($db_name) = $parms =~ /-dbname\\s+(\\w+\\.\\w+)/;\n</code></pre>\n\n<p>Alternatively, instead of joining <code>@ARGV</code> into a string and running a regex against it, just iterate through the list and take the argument after the <code>-dbname</code> argument:</p>\n\n<pre><code>my $db_name;\nfor (my $i = 0; $i &lt; @ARGV; $i++) {\n  if ($ARGV[$i] eq '-dbname') {\n    $db_name = $ARGV[++$i];\n  }\n}\n\ndie \"usage: $0 -dbname foo.bar\\n\"\n  unless $db_name;\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 5948263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7141f7d1e3669e2cbd99fea6fb2f05b2?s=128&d=identicon&r=PG&f=1", "display_name": "BentChainRing", "link": "https://stackoverflow.com/users/5948263/bentchainring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 39342345, "answer_count": 3, "score": 1, "last_activity_date": 1497290569, "creation_date": 1473144357, "question_id": 39342221, "link": "https://stackoverflow.com/questions/39342221/struggling-to-pattern-match-using-perl-regex-with-this-file-name-format-word1-w", "title": "Struggling to pattern match using Perl/regex with this file name format: word1.word2", "body": "<p>Im parsing some parameters in a Perl script and I'm struggling to match a parameter that has a file name format of \"name1.name2\". An example name might be \"enroll.peacecorp\"   My code looks like this: </p>\n\n<pre><code>my $parms = join(' ',@ARGV);\n# other params here\n$db_name  = $1  if ( $parms =~ /-dbname\\s+(\\w\\.\\w+)/ ); \n# more params here\n</code></pre>\n\n<p>But it does not seem to be working. I have tried setting the pattern to /-dbname\\s+(\\w.\\w+)/ but no success there either. I also tried this one, which did work properly, but is not as flexible: /-dbname\\s+(enroll.\\w+)/ </p>\n\n<p>I know for some of you regex experts, this is not a tough problem. I'd appreciate some suggestions. Thanks.</p>\n"}, {"tags": ["xml", "macos", "perl", "xslt", "darwin"], "comments": [{"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1473146118, "post_id": 39341672, "comment_id": 66015944, "body": "The link regarding Safari is irrelevant if you&#39;re running libxslt through command line or Perl. Anyway, I am not able to reproduce your problem. What do you get as the result of <code>&lt;xsl:value-of select=&quot;system-property(&#39;xsl:vendor&#39;)&quot;&#47;&gt;</code>?"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1473147956, "post_id": 39341672, "comment_id": 66016992, "body": "I got following error on line where I try to use <code>exsl:document</code> (below which I use the <code>system-property</code> as per your suggestion) <code>runtime error: file trans.xsl line 30 element document xsltApplySequenceConstructor: failed to find extension document</code>"}, {"owner": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1473149677, "post_id": 39341672, "comment_id": 66017967, "body": "I don&#39;t recall recommending you include <code>exsl:document</code> (or anything else) in this test. Anyway, I suggest you edit your question and provide <b>full</b>, step-by-step instructions how to reproduce your problem - see: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 95646, "user_id": 3016153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWA7Z.png?s=128&g=1", "display_name": "michael.hor257k", "link": "https://stackoverflow.com/users/3016153/michael-hor257k"}, "edited": false, "score": 0, "creation_date": 1473151860, "post_id": 39341672, "comment_id": 66019213, "body": "@michael.hor257k I tweaked my example a little bit and I got the output as <code>Vendor :- libxslt</code>"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1473161483, "post_id": 39341672, "comment_id": 66025432, "body": "What&#39;s the output of <code>perl -MXML::LibXSLT -le &#39;print $XML::LibXSLT::VERSION&#39;</code> and <code>perl -MXML::LibXSLT -le &#39;print XML::LibXSLT::HAVE_EXSLT()&#39;</code>?"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1473170762, "post_id": 39341672, "comment_id": 66031813, "body": "@nwellnhof The outputs are <code>1.62</code> and <code>Can&#39;t locate auto&#47;XML&#47;LibXSLT&#47;HAVE_EXSLT.al in @INC (@INC contains: ....all the Perl directories... .) at -e line 1</code> respectively."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1473172189, "post_id": 39341672, "comment_id": 66032847, "body": "This is an ancient version of <code>XML::LibXSLT</code> from 2006. Maybe it wasn&#39;t compiled with EXSLT support but it&#39;s hard to tell because the HAVE_EXSLT function was added only later."}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1473148145, "post_id": 39342426, "comment_id": 66017101, "body": "I still get the same error even when I add the date to <code>extension-element-prefixes</code>. :("}, {"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "reply_to_user": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1473151404, "post_id": 39342426, "comment_id": 66018922, "body": "Hm libxslt doc states &quot;It also implements most of the EXSLT set of processor-portable extensions functions&quot; and on the exslt page libxslt is listed as implementor of date:year... BTW you could write <code>&lt;xsl:variable name=&quot;current-year&quot; select=&quot;date:year()&quot;&#47;&gt;</code> - Maybe it&#39;s best to follow michael.hor257k&#39;s suggestion to post a complete (minimal) example"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1473152302, "post_id": 39342426, "comment_id": 66019463, "body": "I actually tweaked my example and I got the output for his suggestions. Please see my latest comment."}, {"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "reply_to_user": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1473154405, "post_id": 39342426, "comment_id": 66020889, "body": "well I can&#39;t see why it should not work at the moment"}], "tags": [], "owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "is_accepted": false, "score": 1, "last_activity_date": 1473144913, "creation_date": 1473144913, "answer_id": 39342426, "question_id": 39341672, "link": "https://stackoverflow.com/questions/39341672/exsldate-year-in-os-x/39342426#39342426", "title": "exsl:date-year in OS X", "body": "<p>You must declare date as extension element too:</p>\n\n<pre><code>extension-element-prefixes=\"exsl date\"\n</code></pre>\n\n<p>Your declared xalan namespace probably will not be necessary when using libxslt. Otherwise that would probably have to be added to the extension-element-prefixes also.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473153009, "creation_date": 1473142054, "last_edit_date": 1495535352, "question_id": 39341672, "link": "https://stackoverflow.com/questions/39341672/exsldate-year-in-os-x", "title": "exsl:date-year in OS X", "body": "<p>As mentioned in this <a href=\"https://stackoverflow.com/q/38852721/1410711\">question</a>, I am trying to transform my input xml document using Perl and libXSLT. However, when I try to run the same Perl script on OS X with little addition of following in my xsl file under the </p>\n\n<pre><code> &lt;xsl:variable name=\"current-year\"&gt;\n            &lt;xsl:value-of select=\"date:year()\"/&gt;\n    &lt;/xsl:variable&gt;\n</code></pre>\n\n<p>I get following error.</p>\n\n<pre><code>xmlXPathCompOpEval: function year not found\nUnregistered function\nxmlXPathCompiledEval: evaluation failed\nruntime error: file trans.xsl line 24 element value-of\nXPath evaluation returned no result.\n</code></pre>\n\n<p>My XSLT file header has following</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:xalan=\"http://xml.apache.org/xslt\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:exsl=\"http://exslt.org/common\"\n    xmlns:date=\"http://exslt.org/dates-and-times\"\n    extension-element-prefixes=\"exsl\"&gt;\n    &lt;xsl:output method=\"xml\" version=\"1.0\" encoding=\"UTF-8\" indent=\"yes\" media-type=\"text/xml\"/&gt;\n</code></pre>\n\n<p>Running <code>Perl -v</code> fetches me following</p>\n\n<p><code>This is perl, v5.8.8 built for darwin-thread-multi-2level\nCopyright 1987-2006, Larry Wall....</code></p>\n\n<p>and running <code>uname -a</code> fetches me following</p>\n\n<p><code>Darwin machine-maci 15.3.0 Darwin Kernel Version 15.3.0: Thu Dec 10 18:40:58 PST 2015; root:xnu-3248.30.4~1/RELEASE_X86_64 x86_64</code></p>\n\n<p>Why is this error showing up? I thought <a href=\"http://archive.oreilly.com/pub/post/apple_listens_to_community_add.html\" rel=\"nofollow noreferrer\">OS X Vendor</a>  has already exsl extensions to their libXSLT. Aren't exsl extensions supported yet?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tweaked my example a little bit and I got the output as Vendor :- libxslt as suggested by comments below.</p>\n"}, {"tags": ["perl", "email"], "answers": [{"comments": [{"owner": {"reputation": 3497, "user_id": 2703135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/P9jxy.png?s=128&g=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/2703135/wade"}, "edited": false, "score": 0, "creation_date": 1473164542, "post_id": 39340980, "comment_id": 66027504, "body": "Worked great, thank you. This method should be in their docs :) However, they even say you should be using another library. Unfortunately, I didn&#39;t have a choice. So thanks for your quick and concise response."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 3497, "user_id": 2703135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/P9jxy.png?s=128&g=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/2703135/wade"}, "edited": false, "score": 0, "creation_date": 1473165165, "post_id": 39340980, "comment_id": 66027918, "body": "@WadeShuler: actually I&#39;ve just followed the docs. The important part of the documentation is that <code>attach</code> returns the new part and alternatively that you can build and attach a full part. But yes, an example for this more complex but typical use case would be useful in the documentation."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1473138190, "creation_date": 1473138190, "answer_id": 39340980, "question_id": 39340639, "link": "https://stackoverflow.com/questions/39340639/perl-mimelite-nested-boundaries/39340980#39340980", "title": "Perl MIME::Lite nested boundaries", "body": "<p>You have to first create the message as <code>multipart/mixed</code>. Inside this message you need to create an inner part as <code>multipart/alternative</code>. Onto this inner part you should attach the HTML and text parts. And the attachment should be added to the outer (mixed) part. This could be achieved with code like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MIME::Lite;\n\n# main message is multipart/mixed\nmy $msg = MIME::Lite-&gt;new(\n    From    =&gt; 'me@example.com',\n    To      =&gt; 'you@example.com',\n    Subject =&gt; 'some test message',\n    Type    =&gt; 'multipart/mixed'\n);\n\n# inner part as multipart/alternative to include both HTML and text\nmy $alternative = $msg-&gt;attach(\n    Type =&gt; 'multipart/alternative',\n);\n$alternative-&gt;attach(\n    Type =&gt; 'text/plain',\n    Data =&gt; 'some TEXT here'\n);\n$alternative-&gt;attach(\n    Type =&gt; 'text/html',\n    Data =&gt; '&lt;b&gt;some HTML here&lt;/b&gt;'\n);\n\n# attached image goes to main message\n$msg-&gt;attach(\n    Type =&gt; 'image/gif',\n    Data =&gt; 'GIF89a....'\n);\n\nprint $msg-&gt;as_string;\n</code></pre>\n"}], "owner": {"reputation": 3497, "user_id": 2703135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/P9jxy.png?s=128&g=1", "display_name": "Wade", "link": "https://stackoverflow.com/users/2703135/wade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 39340980, "answer_count": 1, "score": 0, "last_activity_date": 1473138190, "creation_date": 1473135864, "question_id": 39340639, "link": "https://stackoverflow.com/questions/39340639/perl-mimelite-nested-boundaries", "title": "Perl MIME::Lite nested boundaries", "body": "<p>I am working on a server that is missing MANY Perl libraries, so I am left with using MIME::Lite. Yes, I should be using something else, but it is not within my control.</p>\n\n<p>Overall, the email package needs to be \"multipart/mixed\". It will have the plain text version, html version, and an attachment. The issue is, it shows BOTH the plain text and html version in the email body.</p>\n\n<p>I would like to still support \"multipart/alternative\" so it shows EITHER plain text or html. However, since I need an attachment, the whole email should be \"multipart/mixed\" with an inner boundary section with \"multipart/alternative\" for text/html versions.</p>\n\n<p>I though I had it working, but it drops off the attachment due to the whole email package was \"multipart/alternative\". Inspecting some emails in my inbox, and I noticed you can have \"mixed\" first, then inside have \"alternative\". Like a div in a div :)</p>\n\n<p>Here is my current code snip (please look for my comments defining the boundary):</p>\n\n<pre><code>my $type = 'multipart/mixed';\n\nsub sendMail {\n    my($from, $to, $subject, $messageHtml, $messageText, $type, %attachment) = @_;\n\n    my $msg = MIME::Lite-&gt;new(\n            From     =&gt; $from,\n            To       =&gt; $to,\n            Subject  =&gt; $subject,\n            Type     =&gt; $type,    # multipart/mixed\n    );\n\n    # -- start new boundary and multipart/alternative\n    if ( $messageText ne '' ) {\n        $msg-&gt;attach(\n                Type =&gt; 'text/plain; charset=UTF-8',\n                Encoding =&gt; 'quoted-printable',\n                Data =&gt; $messageText,\n        );\n    }\n\n    if ( $messageHtml ne '' ) {\n        $msg-&gt;attach(\n                Type =&gt; 'text/html; charset=UTF-8',\n                Encoding =&gt; 'quoted-printable',\n                Data =&gt; $messageHtml,\n        );\n    }\n    # -- end new boundary\n\n    if ( %attachment ) {\n        $msg-&gt;attach(\n                Type        =&gt; $attachment{\"type\"},\n                Encoding    =&gt; 'base64',\n                Path        =&gt; $attachment{\"path\"},\n                Filename    =&gt; $attachment{\"filename\"},\n                Disposition =&gt; 'attachment'\n        );\n    }\n\n    if ($debugmode) {\n        my $result = '';\n        $msg-&gt;print($result);\n        print $result;\n        exit;\n    }\n\n    if ($msg-&gt;send) {\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I would modify the code to check if both html and plain text were passed. I am well aware, that I don't need alternative if only 1 of them are used.</p>\n\n<p>Again, I need the plain text and html sections, to be inside their own boundary as \"multipart/alternative\"</p>\n"}, {"tags": ["perl", "boolean", "equality-operator"], "comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 2, "creation_date": 1473124828, "post_id": 39339318, "comment_id": 66009972, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1134962/why-does-1-give-me-nothing-in-perl\">Why does !1 give me nothing in Perl?</a> and <a href=\"http://stackoverflow.com/questions/3914129/why-does-perl-use-the-empty-string-to-represent-the-boolean-false-value?rq=1\" title=\"why does perl use the empty string to represent the boolean false value\">stackoverflow.com/questions/3914129/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1473176604, "last_edit_date": 1473176604, "creation_date": 1473126170, "answer_id": 39339493, "question_id": 39339318, "link": "https://stackoverflow.com/questions/39339318/why-false-value-outputs-as-empty-string/39339493#39339493", "title": "Why false value outputs as empty string?", "body": "<p>Because in Perl, the false value returned by many operators and builtins is a special value that is 0 in a numeric context and '' in a string context.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1473129412, "answer_count": 1, "score": 1, "last_activity_date": 1473176604, "creation_date": 1473124192, "last_edit_date": 1473124498, "question_id": 39339318, "link": "https://stackoverflow.com/questions/39339318/why-false-value-outputs-as-empty-string", "closed_reason": "Duplicate", "title": "Why false value outputs as empty string?", "body": "<pre><code>print \"Result: \" . (0 == 1); # Result:\nprint \"Result: \" . (1 == 1); # Result: 1\n</code></pre>\n\n<p>Why does perl output an empty string for a false value and not <code>0</code>?</p>\n"}, {"tags": ["json", "perl", "post", "get", "response"], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 2, "last_activity_date": 1473129381, "creation_date": 1473129381, "answer_id": 39339829, "question_id": 39339129, "link": "https://stackoverflow.com/questions/39339129/perl-json-can-i-perform-a-get-within-my-post-processing/39339829#39339829", "title": "Perl : Json : Can I perform a GET within my POST processing?", "body": "<p>Yes, it's possible, and not just in theory.  I've done much the same thing myself.  Just use <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow\"><code>LWP</code></a> (or your preferred HTTP client library) to perform the <code>GET</code> as usual.  Whether you're doing it within a <code>POST</code> handler or not makes no difference.</p>\n"}], "owner": {"reputation": 15, "user_id": 2686602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b55e1906eda6bef2300ead2d51b9b6b?s=128&d=identicon&r=PG&f=1", "display_name": "user2686602", "link": "https://stackoverflow.com/users/2686602/user2686602"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 39339829, "answer_count": 1, "score": 1, "last_activity_date": 1473129381, "creation_date": 1473122239, "question_id": 39339129, "link": "https://stackoverflow.com/questions/39339129/perl-json-can-i-perform-a-get-within-my-post-processing", "title": "Perl : Json : Can I perform a GET within my POST processing?", "body": "<p>In theory... is it possible to \nparse a POST payload in which a url is supplied, \nthen use the supplied url to perform a GET to acquire data,\nthat data is used to query a db and \nthen send my response to the POST? \nOr will my original POST request pick up the GET response and kill everything?</p>\n\n<p>I can't seem to find an example or reference to this being done anywhere... \nThanks!</p>\n"}, {"tags": ["perl", "input", "scripting", "output", "primes"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1473116088, "post_id": 39338406, "comment_id": 66008297, "body": "That&#39;s a Windows shell command, not a Perl command!"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1473116758, "post_id": 39338406, "comment_id": 66008443, "body": "What do you mean by &quot;without viewing the input file&quot;? You obviously can&#39;t transform a file&#39;s content without reading that content at some point."}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 2, "last_activity_date": 1473117040, "creation_date": 1473117040, "answer_id": 39338653, "question_id": 39338406, "link": "https://stackoverflow.com/questions/39338406/using-commands-inside-scripts-for-perl/39338653#39338653", "title": "Using commands inside scripts for Perl?", "body": "<p>The <code>-n</code> switch to <code>perl</code> just wraps the code in <code>while (&lt;&gt;) { ... }</code>, so, to get a similar effect in your own program, just add the loop yourself (untested code; may contain errors):</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature 'say';\nuse ntheory \":all\";\n\n# open filehandle log.txt\nopen (my $LOG, '&gt;&gt;', 'log.txt');\n# select new filehandle\nselect $LOG;\n\nwhile (&lt;&gt;) {\n  chomp; say next_prime($_);\n}\n</code></pre>\n\n<p>Run this with</p>\n\n<pre><code>primenumbers.pl filenumber1.txt\n</code></pre>\n\n<p>and you should be set.</p>\n"}], "owner": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 39338653, "answer_count": 1, "score": 0, "last_activity_date": 1473133752, "creation_date": 1473114857, "question_id": 39338406, "link": "https://stackoverflow.com/questions/39338406/using-commands-inside-scripts-for-perl", "title": "Using commands inside scripts for Perl?", "body": "<p>I trying to run a perl command inside a script and here is what I got:</p>\n\n<p>filenumber1.txt:</p>\n\n<pre><code>94088076164765675\n</code></pre>\n\n<p>The command window looks okay:</p>\n\n<p>C:\\Users\\Guest\\Documents\\Prime Numbers>perl -Mntheory=:all -nE \"chomp; say next_prime($_);\" filenumber1.txt</p>\n\n<p>94088076164765687</p>\n\n<p>I am trying to do this in a script as well called primenumbers.pl and generate another file called log.txt as the output file and filenumber1.txt as the input file:</p>\n\n<pre><code>    #!/usr/bin/env perl\n    use warnings;\n    use strict;\n    use feature 'say';\n    use ntheory \":all\";\n\n# open filehandle log.txt\nopen (my $LOG, '&gt;&gt;', 'log.txt');\n# select new filehandle\nselect $LOG;\n\n    perl -Mntheory=:all -nE \"chomp; say next_prime($_);\" filenumber1.txt\n</code></pre>\n\n<p>primenumbers.pl is in the same directory as filenumbers.txt and something is wrong when I run the script and I do not know what:</p>\n\n<p>C:\\Users\\Guest\\Documents\\Prime Numbers>perl primenumbers.pl</p>\n\n<p>Bareword found where operator expected at primenumbers.pl line 7, near \"\"say next_prime($_);\" filenumber1.txt\"</p>\n\n<pre><code>    (Missing operator before filenumber1.txt?)\n</code></pre>\n\n<p>syntax error at primenumbers.pl line 7, near \"\"say next_prime($_);\" filenumber1.txt\"</p>\n\n<p>Execution of primenumbers.pl aborted due to compilation errors.</p>\n\n<p>I tried fixing it myself, but I only made matters worse, and there were more problems to fix. Does anyone know how to help me from here please on generating the output file \"log.txt\" without viewing the input file \"filenumber1.txt\"? Thanks in advance.</p>\n"}, {"tags": ["perl", "anyevent"], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "is_accepted": true, "score": 1, "last_activity_date": 1519946960, "creation_date": 1519946960, "answer_id": 49060414, "question_id": 39337677, "link": "https://stackoverflow.com/questions/39337677/anyeventstompclient-anyeventforkmanger-intermittent-error/49060414#49060414", "title": "AnyEvent::STOMP::Client + AnyEvent::ForkManger = Intermittent Error", "body": "<p>I was able to solve this by using Try::Catch and wrapping the call to self->process with a try catch like this:</p>\n\n<pre><code>$stomp-&gt;on_message(sub {\n        my ($stomp, $header, $body) = @_;\n        my $href    = decode_json $body;\n        $pm-&gt;start(cb =&gt; sub {\n            my ($pm, @params) = @_;\n            try {\n                $self-&gt;process(@params);\n            }\n            catch {\n                # error handling stuff\n            };\n        },\n        args    =&gt; [ $href-&gt;{id}, $href-&gt;{data}-&gt;{type}, $href-&gt;{data}-&gt;{who} ],\n        );\n    }\n);\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 158575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/50c5f04c098fa8e109cbccc2d116a4d5?s=128&d=identicon&r=PG", "display_name": "Todd", "link": "https://stackoverflow.com/users/158575/todd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 49060414, "answer_count": 1, "score": 2, "last_activity_date": 1519946960, "creation_date": 1473109411, "last_edit_date": 1473178900, "question_id": 39337677, "link": "https://stackoverflow.com/questions/39337677/anyeventstompclient-anyeventforkmanger-intermittent-error", "title": "AnyEvent::STOMP::Client + AnyEvent::ForkManger = Intermittent Error", "body": "<p>I'm trying to write a process that listens to ActiveMQ and based on the message, goes out and grabs data from a webservice, does some processing and then puts the process data to another webservice.  (REST/JSON)</p>\n\n<p>The module below works fine until one of the wonky webservices I talk to returns an error.  I've tried many things to catch the error but to no avail, yet.  Once the webservice error happens though I get the following message:</p>\n\n<blockquote>\n  <p>unhandled callback exception on event (MESSAGE,\n  AnyEvent::STOMP::Client=HASH(0x3ad5e48), HASH(0x3a6bbb0)\n  {\"action\":\"created\",\"data\":{\"id\":40578737,\"type\":\"alert\",\"who\":null},\"guid\":\"ADCCEE0C-73A7-11E6-8084-74B346D1CA67\",\"hostname\":\"myserver\",\"pid\":48632}):\n  $fork_manager->start() should be called within the manager process</p>\n</blockquote>\n\n<p>OK, I conceptually understand that child process is trying to start another process and that fork manager is saying that is a no no. But given the module below, what is the proper way to start a new process to handle the long running processing.  Or why is an child process dying causing this exception and how can I prevent this</p>\n\n<p>Here's the module (stripped down)</p>\n\n<pre><code>package consumer;\n\nuse AnyEvent::ForkManager;\nuse AnyEvent::STOMP::Client;\nuse JSON;\nuse Data::Dumper;\nuse v5.18;\nuse Moose;\n\nsub run {\n    my $self    = shift;\n    my $pm      = AnyEvent::ForkManager-&gt;new(max_workers =&gt; 20);\n    my $stomp   = AnyEvent::STOMP::Client-&gt;new();\n\n    $stomp-&gt;connect();\n    $stomp-&gt;on_connected(sub {\n        my $stomp   = shift;\n        $stomp-&gt;subscribe('/topic/test');\n        say \"Connected to STOMP\";\n    });\n\n    $pm-&gt;on_start(sub {\n        my ($pm,$pid,@params) = @_;\n        say \"Starting $pid worker\";\n    });\n\n    $pm-&gt;on_finish(sub {\n        my ($pm, $pid,@params) = @_;\n        say \"Finished $pid worker\";\n    });\n\n    $pm-&gt;on_error(sub {\n        say Dumper(\\@_);\n    });\n\n    $stomp-&gt;on_message(sub {\n        my ($stomp, $header, $body) = @_;\n        my $href    = decode_json $body;\n        $pm-&gt;start(cb =&gt; sub {\n            my ($pm, @params) = @_;\n            $self-&gt;process(@params);\n        },\n        args    =&gt; [ $href-&gt;{id}, $href-&gt;{data}-&gt;{type}, $href-&gt;{data}-&gt;{who} ],\n        );\n    });\n\n    my $cv = AnyEvent-&gt;condvar;\n    $cv-&gt;recv;\n}\n\nsub process {\n    say \"Processing \".Dumper(\\@_);\n    sleep 5;\n    if ( int(rand(10)) &lt; 5 ) {\n        die \"OOPS\";  # this triggers the error message above\n    }\n    say \"Done Processing $_[1]\";\n}\n\n1;\n</code></pre>\n\n<p>Heres the driver for the module above:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse v5.18;\nuse lib '.';\nuse consumer;\n\nmy $c   = consumer-&gt;new();\n$c-&gt;run;\n</code></pre>\n\n<p>Finally a traffic generator that you can use to see this in action:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse lib '../lib';\nuse lib '../../lib';\nuse v5.18;\n\nuse Data::Dumper;\nuse JSON;\nuse Net::STOMP::Client;\n\n$ENV{'scot_mode'} = \"testing\";\n\nmy $stomp = Net::STOMP::Client-&gt;new(\n    host    =&gt; \"127.0.0.1\",\n    port    =&gt; 61613\n);\n$stomp-&gt;connect();\n\nfor (my $i = 1; $i &lt; 1000000; $i++) {\n    my $href    = {\n        id      =&gt; $i,\n        type    =&gt; \"event\",\n        what    =&gt; \"foo\",\n    };\n    my $json    = encode_json $href;\n    say \"Sending \".Dumper($href);\n    $stomp-&gt;send(\n        destination =&gt; \"/topic/test\",\n        body        =&gt; $json,\n    );\n}\n\n$stomp-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["perl", "output", "primes"], "comments": [{"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "edited": false, "score": 0, "creation_date": 1473106964, "post_id": 39337186, "comment_id": 66005562, "body": "What is that line <i>&lt;&lt;&lt; nextprime(30659918)</i> ? Is that a shell script? or some interactive program? How did you ran it?"}, {"owner": {"reputation": 1953, "user_id": 110452, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93368f94c86dd0d2511e079ce0de45b2?s=128&d=identicon&r=PG", "display_name": "Mike Summers", "link": "https://stackoverflow.com/users/110452/mike-summers"}, "edited": false, "score": 1, "creation_date": 1473109483, "post_id": 39337186, "comment_id": 66006449, "body": "<a href=\"http://www.tldp.org/LDP/abs/html/io-redirection.html\" rel=\"nofollow noreferrer\">Output redirection?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "edited": false, "score": 0, "creation_date": 1473108324, "post_id": 39337434, "comment_id": 66006028, "body": "Thanks for the script, can you please show me a command I can paste in the command line? Thanks"}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "edited": false, "score": 0, "creation_date": 1473108649, "post_id": 39337434, "comment_id": 66006143, "body": "If you are on any of unix/linux systems, just copy paste the above lines into a script, with some name <i>printprime.pl</i>.  Then use following two command to turn it into executable script and run it.      chmod +x printprime.pl     ./printprime.pl"}, {"owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "reply_to_user": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "edited": false, "score": 0, "creation_date": 1473212790, "post_id": 39337434, "comment_id": 66049764, "body": "Whooever downvoted my post, I am assuming that it is because I didn&#39;t mention about command line redirection. I did it because, I was not sure about the expertise of the OP and on what platform he was working."}], "tags": [], "owner": {"reputation": 2119, "user_id": 3196458, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005547696898/picture?type=large", "display_name": "blackpen", "link": "https://stackoverflow.com/users/3196458/blackpen"}, "is_accepted": false, "score": -1, "last_activity_date": 1473108523, "last_edit_date": 1473108523, "creation_date": 1473107994, "answer_id": 39337434, "question_id": 39337186, "link": "https://stackoverflow.com/questions/39337186/how-to-make-perl-generate-output-files-in-a-specific-directory/39337434#39337434", "title": "How to make Perl Generate Output files in a specific directory", "body": "<p>You can redirect output from the command line using operators. Another alternative is to redirect standard output to a file in perl script itself.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature 'say';\nuse ntheory \":all\";\n\n# open filehandle log.txt\nopen (my $LOG, '&gt;&gt;', 'log.txt');\n# select new filehandle\nselect $LOG;\n\nsay next_prime('30659918');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1474300141, "last_edit_date": 1474300141, "creation_date": 1473148510, "answer_id": 39343512, "question_id": 39337186, "link": "https://stackoverflow.com/questions/39337186/how-to-make-perl-generate-output-files-in-a-specific-directory/39343512#39343512", "title": "How to make Perl Generate Output files in a specific directory", "body": "<p>Use output redirection.</p>\n\n<pre><code>perl -Mntheory=:all -E \"say next_prime('30659918')\" &gt; Perl_command1.out\n</code></pre>\n\n<p>That will put the file in your current directory. But you can give it any kind of file path.</p>\n\n<pre><code>perl -Mntheory=:all -E \"say next_prime('30659918')\" &gt; /some/other/directory/Perl_command1.out\n</code></pre>\n\n<p>The same thing works for a Perl program.</p>\n\n<pre><code>./perlscript.pl &gt; Perl_command1.out\n</code></pre>\n\n<p>In general, I find that using I/O redirection like this is far more flexible than hard-coding filenames in your code.</p>\n\n<p>I'm not sure where you got your <code>ntheory.pm</code> file from, but it's an accepted standard in Perl programming that modules like this have a name that starts with a capital letter. So <code>NTheory.pm</code> would be a better name.</p>\n"}], "owner": {"reputation": 244, "user_id": 6797650, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba292a35e8ce6a4517c2d8594bb706cd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Linne", "link": "https://stackoverflow.com/users/6797650/j-linne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 39343512, "answer_count": 2, "score": -2, "last_activity_date": 1474300141, "creation_date": 1473106670, "last_edit_date": 1473107274, "question_id": 39337186, "link": "https://stackoverflow.com/questions/39337186/how-to-make-perl-generate-output-files-in-a-specific-directory", "title": "How to make Perl Generate Output files in a specific directory", "body": "<p>Does anyone know how to use perl so output files can be generated automatically? I am running an input on the command line like this:</p>\n\n<p>&lt;&lt;&lt; nextprime(30659918)</p>\n\n<p>30659947</p>\n\n<p>But instead of the output \"30659947\" being in the command window, I am looking for a quick command that can generate an output file (such as Perl_command1.out in a given directory for example) with the characters \"30659947\" instead. Does anyone know how to do this? (Why I want to do this is so I do not have the command window racked up when I have larger 300k+ digit inputs)</p>\n\n<p>The perl command I am using is: </p>\n\n<p>perl -Mntheory=:all -E \"say next_prime('30659918')</p>\n\n<p>30659947</p>\n\n<h2>or the script file: perlscript.pl</h2>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature 'say';\nuse ntheory \":all\";\n\nsay next_prime('30659918')\n</code></pre>\n\n<hr>\n"}, {"tags": ["python", "regex", "python-2.7", "perl"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1473104256, "post_id": 39336664, "comment_id": 66004672, "body": "no, it can&#39;t. However you should always be able to use <code>&#39;(?:&#39; + re_string + &#39;)&#39;</code> as a string hack."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473111324, "post_id": 39336664, "comment_id": 66007061, "body": "Note that there&#39;s no need for <code>(?# ... )</code> to add comments when you&#39;re using the <code>&#47;x</code> modifier: you can just use bare Perl comments <code>#...</code>. The same rules apply in Python, and there should be no difference between the two patterns."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1473152183, "post_id": 39336664, "comment_id": 66019402, "body": "<b>Note</b>: the <a href=\"https://docs.python.org/3.5/library/re.html#regular-expression-syntax\" rel=\"nofollow noreferrer\">documentation</a> clearly says that the <code>x</code> flag (i.e. <code>re.VERBOSE</code>) <b>cannot</b> be put mid pattern. It must be the first thing in the pattern (eventually preceded by <i>whitespace</i>). Otherwise the results are undefined. So yours is a hack that the documentation clearly states it doesn&#39;t have to work, and it may just work for some patterns or some specific versions of python and fail in others.  You are right tough regarding the <code>(?i)</code> flag."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1473152279, "post_id": 39336664, "comment_id": 66019454, "body": "I&#39;ve deleted your answer from the question. Questions should <b>not</b> contain answers. If you have an answer <i>post it as such</i>, it&#39;s perfectly fine to answer your own questions."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473112563, "post_id": 39336738, "comment_id": 66007470, "body": "This is pretty much the advice that I would give in the Perl domain, so yes. Spot on. There is a difference with Perl that a compiled regex pattern stringifies to include enclosing non-capturing parentheses which also sets the appropriate options. For instance, <code>perl -e &#39;print qr&#47;a b c&#47;x&#39;</code> produces <code>(?^x:a b c)</code>, which is a non-capturing group <code>(?: ... )</code> where the <code>^</code> sets all the default (read &quot;backward-compatible&quot;) flags, while <code>x</code> enables the equivalent to the <code>VERBOSE</code> option. So it is in it&#39;s own little regex-cosm, and would perform properly even if it were inserted into another regex."}, {"owner": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473139133, "post_id": 39336738, "comment_id": 66012971, "body": "The subtle difference - but important difference - is that perl maintains the flags for the compiled regex when it stringifies it as @Borodin points out. See <code>perl -e &#39;print qr&#47;a b c&#47;xi&#39;</code> preserves the case-insensitive &#39;i&#39; option. In @Bakuriu&#39;s final line the <code>re.IGNORECASE</code> applies to the entire regex, not just the extensions as in the Perl example. I guess I&#39;m saying the same thing @Borodin said, but this is a very frustrating reality."}, {"owner": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "edited": false, "score": 0, "creation_date": 1473139511, "post_id": 39336738, "comment_id": 66013073, "body": "I should also comment that the list version proposed does not support several extensions on the full list, like <code>|aiff?</code>, <code>|jpe?g</code>, <code>|pict?</code>, and <code>|tiff?</code>."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "edited": false, "score": 0, "creation_date": 1473141835, "post_id": 39336738, "comment_id": 66013857, "body": "@whereisalext It does. Just add more extensions: <code>exts = [&#39;aiff&#39;, &#39;aif&#39;, &#39;jpeg&#39;, &#39;jpg&#39;, ...]</code>. Yes, a bit longer but the finaly compiled regex should be equivalent. AFAIK there is simply no way to have only part of the expression have a flag, so you&#39;ll have to deal with it: either the whole regex is case insensitive/verbose, or it is not. Period."}, {"owner": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "edited": false, "score": 0, "creation_date": 1473149544, "post_id": 39336738, "comment_id": 66017879, "body": "The expression can have a flag. See my update at the bottom of the OP."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "edited": false, "score": 0, "creation_date": 1473152039, "post_id": 39336738, "comment_id": 66019313, "body": "@whereisalext You are <i>half</i> right. Some flags can be put wherever you want <b>but</b> the <code>x</code> flag (i.e. <code>re.VERBOSE</code>) <b>cannot</b> and the documentation states so. So the OP could put the <code>(?i)</code> flag mid pattern, but there is no way to mix verbose and non-verbose regexes."}], "tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": false, "score": 4, "last_activity_date": 1473104767, "last_edit_date": 1473104767, "creation_date": 1473104378, "answer_id": 39336738, "question_id": 39336664, "link": "https://stackoverflow.com/questions/39336664/reusing-compiled-regular-expressions-in-python/39336738#39336738", "title": "Reusing compiled regular expressions in python", "body": "<p>You are doing this completely wrong. First of all the <code>.pattern</code> attribute is just <strong>a string</strong>. So it's 100% useless calling <code>re.compile</code> and then extracting the initial string used to obtain the regex object to pass to <code>re.search</code>:</p>\n\n<pre><code>&gt;&gt;&gt; regex = re.compile(r'''(\n...     verbose #lol\n...     | pattern  #rofl\n... )\n... ''', re.VERBOSE)\n&gt;&gt;&gt; regex.match('verbose')  # finds the match!\n&lt;_sre.SRE_Match object; span=(0, 7), match='verbose'&gt;\n&gt;&gt;&gt; re.search(regex.pattern, 'verbose')  # does not find the match!\n&gt;&gt;&gt;\n</code></pre>\n\n<p>As you can see the <code>pattern</code> attribute is just the <strong>initial</strong> string used to build the regex object:</p>\n\n<pre><code>&gt;&gt;&gt; regex.pattern\n'(\\n    verbose #lol\\n    | pattern  #rofl\\n)\\n'\n&gt;&gt;&gt; type(regex.pattern)\n&lt;class 'str'&gt;\n</code></pre>\n\n<p>So by passing this into <code>re.search</code> you make <code>re.search</code> <em>recompile</em> it, and since <code>re.search</code> doesn't have the <code>re.VERBOSE</code> flag it compiles it with a different meaning:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(regex.pattern, 'verbose', re.VERBOSE)\n&lt;_sre.SRE_Match object; span=(0, 7), match='verbose'&gt;\n</code></pre>\n\n<p>Also, I'd do this instead:</p>\n\n<pre><code>exts = [\n    'abc',   # extension abc blah blah\n    'cde',   # extension cde blah blah\n]\nexts_pattern = '(?:{})'.format('|'.join(re.escape(extension) for extension in exts))\n\nregex = re.compile(r'^([^.]+\\.{}'.format(exts_pattern), re.IGNORECASE)\n</code></pre>\n\n<p>Or similar. I.e. you keep the various extensions as a <code>list</code> and put whatever python comments you want, and when you build the regex object using <code>compile</code> you iterate over those. This makes adding an extension easier, and also it's probably useful to have such list anyways.</p>\n\n<hr>\n\n<p>And to answer your final question: no python <code>re</code> module does not support \"regex nesting\" in any way. You must provide a <em>string</em> pattern which gets compiled into a regex object.</p>\n"}, {"comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1473142215, "post_id": 39338497, "comment_id": 66014016, "body": "Does perl support flags mid pattern? In python you <b>cannot</b> have flags applied to just a piece of the pattern, so either the whole regex is case insensitive, or it is not. You cannot have the first part case sensitive and the last part case insensitive."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1473151166, "last_edit_date": 1473151166, "creation_date": 1473115591, "answer_id": 39338497, "question_id": 39336664, "link": "https://stackoverflow.com/questions/39336664/reusing-compiled-regular-expressions-in-python/39338497#39338497", "title": "Reusing compiled regular expressions in python", "body": "<p>It is a myth that Perl will interpolate one compiled regular expression into another. If you write this</p>\n\n<pre><code>my $exts = qr/ abc | mi | avi | ma | iff | tga /x;\n\nif ( $f =~ /^([^.]+\\.$exts)/ ) {\n    ...\n}\n</code></pre>\n\n<p>then within <code>$f =~ /^([^.]+\\.$exts)/</code>, the contents of the regex pattern is evaluated in a <em>double-quote context</em>. That means Perl will <em>stringify</em> <code>$exts</code> to something like <code>(?^x: abc | mi | avi | ma | iff | tga )</code> (the exact result depends on what Perl pragma are in place) and <em>interpolate</em> that string before compiling the pattern</p>\n\n<p>So the regex match is actually doing this</p>\n\n<pre><code>$f =~ /^([^.]+\\.(?^x: abc | mi | avi | ma | iff | tga ))/\n</code></pre>\n\n<p>which is clearly correct, because the <code>/x</code> modifier is enabled within the expression</p>\n\n<p>The difference from Python is <strong><em>only</em></strong> that Python is not as careful about what an <code>re</code> object returns by its <code>pattern</code> or <code>__str__</code> methods, so they can't be injected as substrings into other patterns</p>\n\n<p>As far as I know, the <code>pattern</code> method just returns the original regex string that was compiled to create the object. That makes it much like using C <code>#define</code> symbols: you must be very careful with parentheses, either in the definition of the original or in its invocation</p>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "is_accepted": false, "score": 0, "last_activity_date": 1473175618, "creation_date": 1473175618, "answer_id": 39352721, "question_id": 39336664, "link": "https://stackoverflow.com/questions/39336664/reusing-compiled-regular-expressions-in-python/39352721#39352721", "title": "Reusing compiled regular expressions in python", "body": "<p>Yes, it can! In the Python documentation on re I found that you can specify any re flag in the expression itself - similar to how Perl prints the re flag inline. By adding the flag to the string hack you can achieve the result:</p>\n\n<pre><code>exts = '''(?ix)(?:\n                   abc   # alembic\n                  |mi    # mentalray\n                  |avi   # windows video\n                  |ma    # maya ascii\n                  |iff   # amiga bitmap\n                  |tga   # targa bitmap\n               )'''\n\nfor f in sorted(files):\n   m = re.search(r'^([^.]+\\.{EXTS})'.format(EXTS=exts),f)\n   if m:\n      print 'file matches: {0}'.format(f)\n   else:\n      print 'file does not match: {0}'.format(f)\n</code></pre>\n\n<p>The <code>(?ix)</code> is non-grouping, but sets the re.IGNORECASE and re.VERBOSE.</p>\n"}], "owner": {"reputation": 512, "user_id": 322384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5103b3c47e5fedc2971c03c3df93b534?s=128&d=identicon&r=PG", "display_name": "whereisalext", "link": "https://stackoverflow.com/users/322384/whereisalext"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1540, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1473175618, "creation_date": 1473103981, "last_edit_date": 1473152247, "question_id": 39336664, "link": "https://stackoverflow.com/questions/39336664/reusing-compiled-regular-expressions-in-python", "title": "Reusing compiled regular expressions in python", "body": "\n\n<p>I have a program in Perl that uses a regular expression to store supported file extensions. It reuses this regex through the code. Each file extension has a description since the regular expression has the 'x' flag. I cannot figure out how to port this to python (2.7).</p>\n\n<h3>The original Perl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\n\nmy @files = ('foo.abc','foo.ABC','foo.mi','foo.txt','foo.ma','foo.iff','foo.avi');\n\nmy $exts = qr/abc|mi|avi|ma|iff|tga/;\n\nforeach my $f (sort @files) {\n    if ($f =~ m/^([^.]+\\.$exts)/) {\n        print \"file matches: $f\\n\";\n    } \n    else {\n        print \"file does not match: $f\\n\";\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>file does not match: foo.ABC\nfile matches: foo.abc\nfile matches: foo.avi\nfile matches: foo.iff\nfile matches: foo.ma\nfile matches: foo.mi\nfile does not match: foo.txt\n</code></pre>\n\n<p>This works just as well when I add whitespace with the <code>/x</code> modifier</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$exts = qr/\n    abc  (?# alembic )\n    |mi  (?# mentalray )\n    |avi (?# windows video )\n    |ma  (?# maya ascii )\n    |iff (?# amiga bitmap )\n    |tga (?# targa bitmap )\n/ix;\n\nforeach my $f (sort @files) {\n\n    if ( $f =~ m/^([^.]+\\.$exts )/ ) {\n        print \"file matches: $f\\n\";\n    }\n    else {\n        print \"file does not match: $f\\n\";\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>file matches: foo.ABC\nfile matches: foo.abc\nfile matches: foo.avi\nfile matches: foo.iff\nfile matches: foo.ma\nfile matches: foo.mi\nfile does not match: foo.txt\n</code></pre>\n\n<p>Python supports compiled regular expressions, and you can use them as components of other regular expressions</p>\n\n<h3>Python</h3>\n\n<pre class=\"lang-python prettyprint-override\"><code>import re\n\nfiles = [ 'foo.abc','foo.ABC','foo.mi','foo.txt','foo.ma','foo.iff','foo.avi' ]\n\nexts = re.compile(r'(?:abc|mi|avi|ma|iff|tga)')\n\nfor f in sorted(files):\n    m = re.search(r'^([^.]+\\.{EXTS})'.format(EXTS=exts.pattern),f)\n    if m:\n        print 'file matches: {0}'.format(f)\n    else:\n        print 'file does not match: {0}'.format(f)\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>file does not match: foo.ABC\nfile matches: foo.abc\nfile matches: foo.avi\nfile matches: foo.iff\nfile matches: foo.ma\nfile matches: foo.mi\nfile does not match: foo.txt\n'''\n</code></pre>\n\n<p>But as soon as I use <code>re.VERBOSE</code>, the regex fails</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>exts = re.compile(r'''(?:\n                     abc   # alembic\n                    |mi    # mentalray\n                    |avi   # windows video\n                    |ma    # maya ascii\n                    |iff   # amiga bitmap\n                    |tga   # targa bitmap\n                    )''', re.IGNORECASE + re.VERBOSE)\n\nfor f in sorted(files):\n    m = re.search(r'^([^.]+\\.{EXTS})'.format(EXTS=exts.pattern),f)\n    if m:\n        print 'file matches: {0}'.format(f)\n    else:\n        print 'file does not match: {0}'.format(f)\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>file does not match: foo.ABC\nfile does not match: foo.abc\nfile does not match: foo.avi\nfile does not match: foo.iff\nfile does not match: foo.ma\nfile does not match: foo.mi\nfile does not match: foo.txt\n</code></pre>\n\n<p>My actual code has more than 50 extensions, with comments about what they are, so I would really like to support this.</p>\n\n<p>I've searched all the \"nested regular expression\" posts I could find, but all of them are string hacks. No <em>actual</em> regular expression nesting that I can find. </p>\n\n<p>Can Python do this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 1, "creation_date": 1473073736, "post_id": 39329235, "comment_id": 65989929, "body": "What is a typical value of <code>$input</code>? Please add it to your question."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 1, "creation_date": 1473073841, "post_id": 39329235, "comment_id": 65989990, "body": "Your code is not valid Perl 5 code. <code>perl</code> reports a <code>syntax error at ... line 1</code>. Please post code which correctly compiles."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 1, "creation_date": 1473074059, "post_id": 39329235, "comment_id": 65990093, "body": "I&#39;m not quite sure how <code>$a and $b</code> could be mapped to the values of <code>$arg1</code> and <code>$arg2</code> you posted, and how either relates to the title of the question? Please provide the actual value of <code>$input</code> you provide the code, and the actual values of <code>$arg1</code> and <code>$arg2</code> you&#39;re expecting. Also note that depending on what you want to do in fine, regexes may not be the best option."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 0, "creation_date": 1473077766, "post_id": 39329235, "comment_id": 65992233, "body": "Try change <code>(.*)</code> to <code>(.*?)</code>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1473079725, "post_id": 39329235, "comment_id": 65993425, "body": "Parsing numerical expressions properly would seem to call for an expression parser, not a regular expression. Regex is fine for lexical analysis e.g. for separating atomic symbols, but quickly crumbles when a symbol could have different meanings depending on context"}], "answers": [{"tags": [], "owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "is_accepted": false, "score": 1, "last_activity_date": 1473073920, "creation_date": 1473073920, "answer_id": 39329355, "question_id": 39329235, "link": "https://stackoverflow.com/questions/39329235/how-can-i-extract-the-which-a-or-b-in-perl-regex-matching-ab/39329355#39329355", "title": "How can I extract the which a or b in perl regex matching /(a|b)/", "body": "<p>This code works for me:</p>\n\n<pre><code>$input = '$ARGV[0]=~/\\w{4}/ and $num_arg==1';\nif ($input=~/^(.*)\\s(and|or|==|&lt;|&gt;|&gt;=|&lt;=)\\s(.*)$/) {\n        $arg1=$1;\n        $arg2=$3;\n        $opt=$2;\n        print \"$arg1\\n$arg2\\n$opt\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 6317042, "user_type": "registered", "profile_image": "https://graph.facebook.com/1057926774279190/picture?type=large", "display_name": "Marco Silva", "link": "https://stackoverflow.com/users/6317042/marco-silva"}, "is_accepted": false, "score": 1, "last_activity_date": 1473089332, "last_edit_date": 1473089332, "creation_date": 1473083424, "answer_id": 39332076, "question_id": 39329235, "link": "https://stackoverflow.com/questions/39329235/how-can-i-extract-the-which-a-or-b-in-perl-regex-matching-ab/39332076#39332076", "title": "How can I extract the which a or b in perl regex matching /(a|b)/", "body": "<p>You need a little parser able to reveal the structure of a logical expression. That is because you may have another expression inside a term. You can use perl to test your grammar using <a href=\"http://search.cpan.org/~jkegl/Marpa-R2-3.000000/\" rel=\"nofollow\">Marpa::R2</a> package.</p>\n\n<p>As a first attempt I would write:</p>\n\n<pre><code>&lt;expression&gt; ::= &lt;term&gt; | &lt;expression&gt; &lt;binary-op&gt; &lt;term&gt;\n&lt;term&gt; ::= &lt;factor&gt; &lt;binary-op&gt; &lt;factor&gt; | &lt;unary-op&gt;&lt;factor&gt;\n&lt;factor&gt; ::= &lt;id&gt;\n&lt;binary-op&gt; ::= (and|or|==|&lt;|&gt;|&gt;=|&lt;=)\n&lt;unary-op&gt; ::= (not | ! )\n</code></pre>\n\n<p>One thing for sure that you can't complete describe the syntax of a logical expression using only regular expressions, it will always lack some valid case.</p>\n\n<p><strong>The Perl Code for validation</strong></p>\n\n<pre><code>use Modern::Perl;\nuse Marpa::R2;\n\nmy $dsl = &lt;&lt;'END_OF_DSL';\n:default ::= action =&gt; [name,values]\nlexeme default = latm =&gt; 1\n\nExpression       ::= Term\n                     | Expression BinaryOP Term\nTerm             ::= Factor BinaryOP Factor\n                     | UnaryOP Factor\nFactor           ::= ID\nID                ~ [\\w]+\nBinaryOP          ~ 'and' | 'or' | '==' | '&lt;' | '&gt;' | '&gt;=' | '&lt;='\nUnaryOP           ~ 'not' | '!' \n:discard          ~ whitespace\nwhitespace        ~ [\\s]+\nEND_OF_DSL\n\n# your input\nmy $input       = 'a and b or !c';\n\n# your parser\nmy $grammar = Marpa::R2::Scanless::G-&gt;new( { source =&gt; \\$dsl } );\n\n# process input\nmy $recce = Marpa::R2::Scanless::R-&gt;new(\n    { grammar =&gt; $grammar, semantics_package =&gt; 'My_Actions' } );\nmy $length_read = $recce-&gt;read( \\$input );\n\ndie \"Read ended after $length_read of \", length $input, \" characters\"\n  if $length_read != length $input;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6285308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c29628a2b91626bc3ed8af721008ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Eudaemon", "link": "https://stackoverflow.com/users/6285308/eudaemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1473089332, "creation_date": 1473073440, "last_edit_date": 1473074481, "question_id": 39329235, "link": "https://stackoverflow.com/questions/39329235/how-can-i-extract-the-which-a-or-b-in-perl-regex-matching-ab", "title": "How can I extract the which a or b in perl regex matching /(a|b)/", "body": "<p>I am trying to match different logic expression, such as: \"<code>$a and $b</code>\" using Perl regex, here is my code:</p>\n\n<pre><code>$input =~ /^(.*)\\s(and|or|==|&lt;|&gt;|&gt;=|&lt;=)\\s(.*)$/ {\n        $arg1=$1;\n        $arg2=$3;\n        $opt=$2;\n}\n</code></pre>\n\n<p>and my purpose is to get:</p>\n\n<pre><code>$arg1=\"$ARGV[0]=~/\\w{4}/\"\n$arg2=\"$num_arg==1\"\n$opt =\"and\"\n</code></pre>\n\n<p>I want to get the exact value matched in the or expression. I don't want to do the same thing for all the cases to match one by one, and hardcode the operator.</p>\n\n<p>Does anyone know how to solve the problem?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19668, "user_id": 875915, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4170e0148920a64d5a5f4ac1ec7d4f98?s=128&d=identicon&r=PG", "display_name": "Rob Bednark", "link": "https://stackoverflow.com/users/875915/rob-bednark"}, "is_accepted": true, "score": 0, "last_activity_date": 1602107217, "last_edit_date": 1602107217, "creation_date": 1473049455, "answer_id": 39323923, "question_id": 39323922, "link": "https://stackoverflow.com/questions/39323922/what-is-the-difference-between-perl-n-and-perl-p/39323923#39323923", "title": "What is the difference between &quot;perl -n&quot; and &quot;perl -p&quot;?", "body": "<blockquote>\n<p>What is the difference between the perl -n and perl -p options?</p>\n</blockquote>\n<p><code>-p</code> causes each line to be printed; equivalent to:</p>\n<pre><code>    while (&lt;&gt;) { ... } continue { print }\n</code></pre>\n<p><code>-n</code> does not automatically print each line; equivalent to:</p>\n<pre><code>    while(&lt;&gt;) {...}\n</code></pre>\n<hr />\n<blockquote>\n<p>What is a simple example to demonstrate the difference?</p>\n</blockquote>\n<p>e.g., replace <code>foo</code> with <code>FOO</code>:</p>\n<pre><code>$ echo 'foo bar' | perl -pe 's/foo/FOO/'\nFOO bar\n$ echo 'foo bar' | perl -ne 's/foo/FOO/'\n$\n</code></pre>\n<hr />\n<blockquote>\n<p>How do you decide which one to use?</p>\n</blockquote>\n<p>One example where <code>-n</code> is useful is when you don't want every line printed, and there is a conditional print in the code, e.g., only show lines containing <code>foo</code>:</p>\n<pre><code>$ echo -e 'foo\\nbar\\nanother foo' | perl -ne 'print if /foo/;'\nfoo\nanother foo\n$\n</code></pre>\n<p>The command-line options are documented in <a href=\"https://perldoc.perl.org/perlrun\" rel=\"nofollow noreferrer\">perlrun documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1473075341, "post_id": 39324098, "comment_id": 65990792, "body": "Same as @Rob Bednark&#39;s answer : With <code>-p</code>, the print is in a <code>continue</code> block. You can test it easily by running the following command : <code>perl -pe &#39;next&#39;</code>, and see that it prints whatever you enter, whereas <code>while(&lt;&gt;) {next;print;}</code> wouldn&#39;t print anything."}], "tags": [], "owner": {"reputation": 9855, "user_id": 7780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9668c1ebea8ecea9f1ac4474236b5e?s=128&d=identicon&r=PG", "display_name": "dsm", "link": "https://stackoverflow.com/users/7780/dsm"}, "is_accepted": false, "score": -1, "last_activity_date": 1473050946, "creation_date": 1473050946, "answer_id": 39324098, "question_id": 39323922, "link": "https://stackoverflow.com/questions/39323922/what-is-the-difference-between-perl-n-and-perl-p/39324098#39324098", "title": "What is the difference between &quot;perl -n&quot; and &quot;perl -p&quot;?", "body": "<p>perl -n is equivalent to while(&lt;>){...}\nperl -p is equivalent to while(&lt;>){...;print;}</p>\n"}, {"comments": [{"owner": {"reputation": 19668, "user_id": 875915, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4170e0148920a64d5a5f4ac1ec7d4f98?s=128&d=identicon&r=PG", "display_name": "Rob Bednark", "link": "https://stackoverflow.com/users/875915/rob-bednark"}, "edited": false, "score": 0, "creation_date": 1473214300, "post_id": 39324861, "comment_id": 66050011, "body": "What do you mean by <i><code>-p</code> is short for <code>-np</code></i>?  I don&#39;t see that in the documentation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19668, "user_id": 875915, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4170e0148920a64d5a5f4ac1ec7d4f98?s=128&d=identicon&r=PG", "display_name": "Rob Bednark", "link": "https://stackoverflow.com/users/875915/rob-bednark"}, "edited": false, "score": 0, "creation_date": 1473214765, "post_id": 39324861, "comment_id": 66050112, "body": "The docs describe <code>-p</code> differently than I did, but equivalently. My description more accurately reflects the implementation and acknowledges the similarity between the two, while perlrun pretends they&#39;re completely different and unrelated. But again, both explanations, while different, are equivalent."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 8, "last_activity_date": 1473056523, "creation_date": 1473056523, "answer_id": 39324861, "question_id": 39323922, "link": "https://stackoverflow.com/questions/39323922/what-is-the-difference-between-perl-n-and-perl-p/39324861#39324861", "title": "What is the difference between &quot;perl -n&quot; and &quot;perl -p&quot;?", "body": "<p><code>-p</code> is short for <code>-np</code>, and it causes <code>$_</code> to be printed for each pass of the loop created by <code>-n</code>.</p>\n\n<hr>\n\n<pre><code>perl -ne'...'\n</code></pre>\n\n<p>executes the following program:</p>\n\n<pre><code>LINE: while (&lt;&gt;) {\n    ...\n}\n</code></pre>\n\n<p>while</p>\n\n<pre><code>perl -pe'...'\n</code></pre>\n\n<p>executes the following program:</p>\n\n<pre><code>LINE: while (&lt;&gt;) {\n    ...\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<hr>\n\n<p>See <a href=\"http://perldoc.perl.org/perlrun.html\">perlrun</a> for documentation about <code>perl</code>'s command-line options.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 8, "last_activity_date": 1473067354, "creation_date": 1473067354, "answer_id": 39327466, "question_id": 39323922, "link": "https://stackoverflow.com/questions/39323922/what-is-the-difference-between-perl-n-and-perl-p/39327466#39327466", "title": "What is the difference between &quot;perl -n&quot; and &quot;perl -p&quot;?", "body": "<blockquote>\n  <p>How do you decide which one to use?</p>\n</blockquote>\n\n<p>You use <code>-p</code> if you want to automatically print the contents of <code>$_</code> at the end of each iteration of the implied <code>while</code> loop. You use <code>-n</code> if you don't want to print <code>$_</code> automatically.</p>\n\n<p>An example of <code>-p</code>. Adding line numbers to a file:</p>\n\n<pre><code>$ perl -pe '$_ = \"$.: $_\"' your_file.txt\n</code></pre>\n\n<p>An example of <code>-n</code>. A basic <code>grep</code> replacement.</p>\n\n<pre><code>$ perl -ne 'print if /some search text/' your_file.txt\n</code></pre>\n"}], "owner": {"reputation": 19668, "user_id": 875915, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4170e0148920a64d5a5f4ac1ec7d4f98?s=128&d=identicon&r=PG", "display_name": "Rob Bednark", "link": "https://stackoverflow.com/users/875915/rob-bednark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 2, "accepted_answer_id": 39323923, "answer_count": 4, "score": 3, "last_activity_date": 1602107217, "creation_date": 1473049455, "question_id": 39323922, "link": "https://stackoverflow.com/questions/39323922/what-is-the-difference-between-perl-n-and-perl-p", "title": "What is the difference between &quot;perl -n&quot; and &quot;perl -p&quot;?", "body": "<p>What is the difference between the <code>perl -n</code> and <code>perl -p</code> options?</p>\n\n<p>What is a simple example to demonstrate the difference?</p>\n\n<p>How do you decide which one to use?</p>\n"}, {"tags": ["perl", "pdf", "cam-pdf"], "comments": [{"owner": {"reputation": 768, "user_id": 1504161, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20cf9052ce03cc989838106d8a762796?s=128&d=identicon&r=PG", "display_name": "Darajan", "link": "https://stackoverflow.com/users/1504161/darajan"}, "edited": false, "score": 0, "creation_date": 1484125862, "post_id": 39323807, "comment_id": 70377111, "body": "Would you have a corrupt pdf that gives the mupdf errors available? I&#39;m debugging a similar issue and it would be of great assistance :)"}], "answers": [{"comments": [{"owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1473058788, "post_id": 39325174, "comment_id": 65982197, "body": "Why 8? Where does it come from? We wouldn&#39;t be replacing object number 8 in the original document witht a transparent image, would we?"}, {"owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "reply_to_user": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1473063359, "post_id": 39325174, "comment_id": 65984335, "body": "@.n.r. 8 is the object number of the image being imported from <code>transparent.pdf</code>. I&#39;ve added more explanation to the answer."}], "tags": [], "owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "is_accepted": false, "score": 4, "last_activity_date": 1473063238, "last_edit_date": 1473063238, "creation_date": 1473058092, "answer_id": 39325174, "question_id": 39323807, "link": "https://stackoverflow.com/questions/39323807/how-to-delete-all-images-from-a-pdf-without-corrupting-it-using-campdf/39325174#39325174", "title": "How to delete all images from a PDF without corrupting it using CAM::PDF?", "body": "<p>This uses CAM::PDF, but takes a slightly different approach. Rather than attempting to delete the images, which is pretty hard, it replaces each image with a transparent image.</p>\n\n<p>Firstly, note that we can use image magick to generate a blank PDF that contains nothing but a transparent image:</p>\n\n<pre><code>% convert  -size 200x100 xc:none transparent.pdf\n</code></pre>\n\n<p>If we view the generated PDF in a text editor, we can find the main image object:</p>\n\n<pre><code>8 0 obj\n&lt;&lt;\n/Type /XObject\n/Subtype /Image\n/Name /Im0\n...\n</code></pre>\n\n<p>The important thing to note here is that we have generated a transparent image as object number 8.</p>\n\n<p>It then becomes matter of importing this object, and using it to replace each of the real images in the PDF, effectively blanking them.</p>\n\n<pre><code>use warnings; use strict;\nuse CAM::PDF;    \nmy $pdf = new CAM::PDF ( shift ) or die $CAM::PDF::errstr;\n\nmy $trans_pdf = CAM::PDF-&gt;new(\"transparent.pdf\") || die \"$CAM::PDF::errstr\\n\";\nmy $trans_objnum = 8; # object number of transparent image\n\nforeach my $objnum ( sort { $a &lt;=&gt; $b } keys %{ $pdf-&gt;{xref} } ) {\n  my $xobj = $pdf-&gt;dereference ( $objnum );\n\n  if ( $xobj-&gt;{value}-&gt;{type} eq 'dictionary' ) {\n    my $im = $xobj-&gt;{value}-&gt;{value};\n    if\n    (\n      defined $im-&gt;{Type} and defined $im-&gt;{Subtype}\n      and $pdf-&gt;getValue ( $im-&gt;{Type}    ) eq 'XObject'\n      and $pdf-&gt;getValue ( $im-&gt;{Subtype} ) eq 'Image'\n    ) {\n        $pdf-&gt;replaceObject ( $objnum, $trans_pdf, $trans_objnum, 1 );\n    }\n  }\n}\n\n$pdf-&gt;cleanoutput ( '-' );\n</code></pre>\n\n<p>The script now replaces each image in the PDF with the imported transparent image object(object number 8 from <code>transparent.pdf</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1473086170, "creation_date": 1473086170, "answer_id": 39332896, "question_id": 39323807, "link": "https://stackoverflow.com/questions/39323807/how-to-delete-all-images-from-a-pdf-without-corrupting-it-using-campdf/39332896#39332896", "title": "How to delete all images from a PDF without corrupting it using CAM::PDF?", "body": "<p>Another approach, which really deletes the images, is:</p>\n\n<ol>\n<li>find and delete image XObjects in <strong>resource lists</strong>,</li>\n<li>keep an array with <strong>names</strong> of deleted resources,</li>\n<li>substitute <strong>same-length</strong> whitespace for the corresponding <code>Do</code> operators in each page content,</li>\n<li><strong>clean up</strong> and print.</li>\n</ol>\n\n<p>Notice that dwarring's approach is safer, though, as it doesn't have to call <code>$doc-&gt;cleanse</code> at the end. According to the <code>CAM::PDF</code> documentation (<a href=\"http://search.cpan.org/dist/CAM-PDF/lib/CAM/PDF.pm\" rel=\"nofollow\">here</a>), the <code>cleanse</code> method</p>\n\n<blockquote>\n  <p>Remove unused objects. WARNING: this function breaks some PDF documents because it removes objects that are strictly part of the page model hierarchy, but which are required anyway (like some font definition objects).</p>\n</blockquote>\n\n<p>I don't know how much of a problem using <code>cleanse</code> can be.</p>\n\n<pre><code>use CAM::PDF;\nmy $doc = new CAM::PDF ( shift ) or die $CAM::PDF::errstr;\n\n# delete image XObjects among resources\n# but keep their names\n\nmy @names;\n\nforeach my $objnum ( sort { $a &lt;=&gt; $b } keys %{ $doc-&gt;{xref} } ) {\n  my $obj = $doc-&gt;dereference( $objnum );\n  next unless $obj-&gt;{value}-&gt;{type} eq 'dictionary';\n\n  my $n = $obj-&gt;{value}-&gt;{value};\n\n  my $resources = $doc-&gt;getValue ( $n-&gt;{Resources}       ) or next;\n  my $resource  = $doc-&gt;getValue ( $resources-&gt;{XObject} ) or next;\n\n  foreach my $name ( sort keys $resource ) {\n    my $im = $doc-&gt;getValue ( $resource-&gt;{$name} ) or next;\n\n    next unless defined $im-&gt;{Type}\n            and defined $im-&gt;{Subtype}\n            and $doc-&gt;getValue ( $im-&gt;{Type}    ) eq 'XObject'\n            and $doc-&gt;getValue ( $im-&gt;{Subtype} ) eq 'Image';\n\n    delete $resource-&gt;{$name};                                                                                                           \n    push @names, $name;                                                                                                                  \n  }                                                                                                                                      \n}                                                                                                                                        \n\n\n# delete the corresponding Do operators                                                                                                                        \n\nif ( @names ) {                                                                                                                                                               \n  foreach my $p ( 1 .. $doc-&gt;numPages ) {                                                                                                                                     \n    my $content = $doc-&gt;getPageContent ( $p );\n    my $s;\n    foreach my $name ( @names ) {\n      ++$s if $content =~ s{( / \\Q$name\\E \\s+ Do \\b )} { ' ' x length $1 }xeg;\n    }\n    $doc-&gt;setPageContent ( $p, $content ) if $s;\n  }\n}\n\n$doc-&gt;cleanse;\n$doc-&gt;cleanoutput;\n</code></pre>\n"}], "owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1473086170, "creation_date": 1473048482, "last_edit_date": 1495535443, "question_id": 39323807, "link": "https://stackoverflow.com/questions/39323807/how-to-delete-all-images-from-a-pdf-without-corrupting-it-using-campdf", "title": "How to delete all images from a PDF without corrupting it using CAM::PDF?", "body": "<p>The script below is able to remove all images from a PDF file using <code>CAM::PDF</code>. The output, however, is corrupt. PDF readers are nonetheless able to open it, but they complain about errors. For instance, <code>mupdf</code> says:</p>\n\n<pre><code>error: no XObject subtype specified\nerror: cannot draw xobject/image\nwarning: Ignoring errors during rendering\nmupdf: warning: Errors found on page\n</code></pre>\n\n<p>Now, <code>CAM::PDF</code> page at CPAN (<a href=\"http://search.cpan.org/dist/CAM-PDF/lib/CAM/PDF.pm\" rel=\"nofollow noreferrer\">here</a>) lists the <code>deleteObject()</code> method under \"Deeper utilities\", presumably meaning that it's not intended for public usage. Moreover, it warns that:</p>\n\n<blockquote>\n  <p>This function does NOT take care of dependencies on this object.</p>\n</blockquote>\n\n<p>My question is: what is the right way to remove objects from a PDF file using <code>CAM::PDF</code>? If the issue has to do with dependencies, how can I remove an object while taking care of its dependencies?</p>\n\n<p>For how to remove images from a PDF using other tools, see a related question <a href=\"https://stackoverflow.com/q/20676707/1839508\">here</a>.</p>\n\n<pre><code>use CAM::PDF;    \nmy $pdf = new CAM::PDF ( shift ) or die $CAM::PDF::errstr;\n\nforeach my $objnum ( sort { $a &lt;=&gt; $b } keys %{ $pdf-&gt;{xref} } ) {\n  my $xobj = $pdf-&gt;dereference ( $objnum );\n\n  if ( $xobj-&gt;{value}-&gt;{type} eq 'dictionary' ) {\n    my $im = $xobj-&gt;{value}-&gt;{value};\n    if\n    (\n      defined $im-&gt;{Type} and defined $im-&gt;{Subtype}\n      and $pdf-&gt;getValue ( $im-&gt;{Type}    ) eq 'XObject'\n      and $pdf-&gt;getValue ( $im-&gt;{Subtype} ) eq 'Image'\n    )\n    {\n      $pdf-&gt;deleteObject ( $objnum );\n    }\n  }\n}\n\n$pdf-&gt;cleanoutput ( '-' );\n</code></pre>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1473053215, "post_id": 39323724, "comment_id": 65980457, "body": "What&#39;s the question?"}], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 125540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130f18f2dc44c0ff95ff26af5b77bc98?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/125540/harry"}, "edited": false, "score": 0, "creation_date": 1473056061, "post_id": 39324760, "comment_id": 65981268, "body": "Cool! Can we also find out if <code>foo</code> matched but without the grouping/parentheses around <code>foo</code>?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 3234, "user_id": 125540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130f18f2dc44c0ff95ff26af5b77bc98?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/125540/harry"}, "edited": false, "score": 1, "creation_date": 1473056188, "post_id": 39324760, "comment_id": 65981307, "body": "Yes, same result if you remove the parens around foo.   Updated answer."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1473056227, "last_edit_date": 1473056227, "creation_date": 1473055829, "answer_id": 39324760, "question_id": 39323724, "link": "https://stackoverflow.com/questions/39323724/perl-conditional-code-execution-inside-regex-pattern/39324760#39324760", "title": "Perl: Conditional code execution inside regex pattern", "body": "<p>Here is an example.</p>\n\n<p>perldoc perlre:</p>\n\n<blockquote>\n  <p><code>$^N</code> contains whatever was matched by the most-recently closed group (submatch)</p>\n</blockquote>\n\n<p><strong>test_extended_re_code.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy @input = split /\\n/, &lt;&lt;\"END\";\nfoo 123 bar\nfoo 456 bar\nfo  789 bar\nfoo xyz bar\nEND\n\nfor my $input ( @input ) {\n    $input =~ m/foo (\\d+)(?{ process( $^N ) if $^N }) bar/;\n}\n\nsub process {\n    my ($txt) = @_;\n    print \"Processing '$txt'\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Processing '123'\nProcessing '456'\n</code></pre>\n"}], "owner": {"reputation": 3234, "user_id": 125540, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/130f18f2dc44c0ff95ff26af5b77bc98?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/125540/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 39324760, "answer_count": 1, "score": 2, "last_activity_date": 1473056227, "creation_date": 1473047787, "last_edit_date": 1473049855, "question_id": 39323724, "link": "https://stackoverflow.com/questions/39323724/perl-conditional-code-execution-inside-regex-pattern", "title": "Perl: Conditional code execution inside regex pattern", "body": "<p>I'm aware of the so-called experimental <code>(?{ ... })</code> facility in Perl 5 to execute code as such <code>print</code> statements, setting global variables. </p>\n\n<p>However, I have a need to:</p>\n\n<ol>\n<li><p>refer to the matched string inside of the <code>(?{ ... })</code> block; and</p></li>\n<li><p>depending on its value, execute some arbitrary code</p></li>\n</ol>\n\n<p><strong>Desired Usage:</strong></p>\n\n<pre><code>$input =~ m/ (foo) \n               (?{ if (defined (\\1) { process(\\1) } }) \n              bar\n          /x;\n</code></pre>\n\n<p>Note: There may obviously be gazillion alternatives to achieving the same effect (TMTOWDI) but I'm interested only in the above style, for now. Hence, the post.</p>\n"}, {"tags": ["regex", "perl", "csv", "case"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473047325, "post_id": 39323403, "comment_id": 65979245, "body": "Why don&#39;t you print out <code>$columns[$col][$ro]</code> to see what it things it is trying to match."}, {"owner": {"reputation": 1465, "user_id": 1846123, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/559865ebb0f497ca33ab763094cdb971?s=128&d=identicon&r=PG", "display_name": "chuckieDub", "link": "https://stackoverflow.com/users/1846123/chuckiedub"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473047389, "post_id": 39323403, "comment_id": 65979260, "body": "I was printing it out in the beginning. I know that it is matching the exact spellings of the CSV fields, but not when the case is different."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1473047990, "post_id": 39323403, "comment_id": 65979380, "body": "Probably Mex is not matching because there is no space infront of it, and you are searching specifically for a space there <code>\\s</code>."}, {"owner": {"reputation": 1465, "user_id": 1846123, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/559865ebb0f497ca33ab763094cdb971?s=128&d=identicon&r=PG", "display_name": "chuckieDub", "link": "https://stackoverflow.com/users/1846123/chuckiedub"}, "edited": false, "score": 0, "creation_date": 1473069530, "post_id": 39323403, "comment_id": 65987691, "body": "What about usa?"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 6794775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e0f2f06607dc12c035f45d20e4ff1c?s=128&d=identicon&r=PG&f=1", "display_name": "D-Von", "link": "https://stackoverflow.com/users/6794775/d-von"}, "is_accepted": false, "score": 0, "last_activity_date": 1473047538, "creation_date": 1473047538, "answer_id": 39323687, "question_id": 39323403, "link": "https://stackoverflow.com/questions/39323403/case-insensitive-regex-matching-not-working-in-perl/39323687#39323687", "title": "case insensitive regex matching not working in perl", "body": "<p>I don't fully understand what you're doing, but maybe this helps: The \\s in your regex tries to match whitespace but won't match absence-of-whitespace. Since your \"Mex\" is at the beginning of the line, it doesn't have whitespace in front of it. As an experiment, try moving the \"Mex\" to a different position in the line.</p>\n"}, {"comments": [{"owner": {"reputation": 1465, "user_id": 1846123, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/559865ebb0f497ca33ab763094cdb971?s=128&d=identicon&r=PG", "display_name": "chuckieDub", "link": "https://stackoverflow.com/users/1846123/chuckiedub"}, "edited": false, "score": 0, "creation_date": 1473069845, "post_id": 39323866, "comment_id": 65987865, "body": "I can&#39;t strip everything around the alternatives, because this CSV also includes peoples names which might include those characters."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1473049032, "creation_date": 1473049032, "answer_id": 39323866, "question_id": 39323403, "link": "https://stackoverflow.com/questions/39323403/case-insensitive-regex-matching-not-working-in-perl/39323866#39323866", "title": "case insensitive regex matching not working in perl", "body": "<p>It seems like parsing the CSV is not your problem. (I'd still recommend <code>Text::CSV</code> for that.)</p>\n\n<p>Assuming you have your languages and alternatives in an array, and you have an array of these languages-with-alternatives-arrays, you can just compare the inputs. You should probably strip leading and trailing whitespace, and compare case-insensitive, but you don't need a regex for that:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @countries = (   \n    ['United States of America', 'US', 'USA', 'US of A', 'United States'],\n    ['Mexico', 'MX', 'Mex'], \n);\n\nmy @input = ('US ', '  mx   ', ' Mexico', ' us of a');\n\nforeach my $input (@input) {  \n    $input =~ s/^\\s+//;\n    $input =~ s/\\s+$//; \n    my $found = 0;\n    foreach my $country (@countries) {  \n        foreach my $alternative (@$country) {\n            if (lc($input) eq lc($alternative)) {  \n                print \"$input is ${$country}[0]\\n\";\n                $found = 1;\n            }\n        } \n    }   \n    print \"did not find $input\\n\" unless($found);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1465, "user_id": 1846123, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/559865ebb0f497ca33ab763094cdb971?s=128&d=identicon&r=PG", "display_name": "chuckieDub", "link": "https://stackoverflow.com/users/1846123/chuckiedub"}, "is_accepted": true, "score": 0, "last_activity_date": 1473070203, "creation_date": 1473070203, "answer_id": 39328311, "question_id": 39323403, "link": "https://stackoverflow.com/questions/39323403/case-insensitive-regex-matching-not-working-in-perl/39328311#39328311", "title": "case insensitive regex matching not working in perl", "body": "<p>The issue was that I didn't include the \"g\" operator, meaning once it found one instance of the Country name alternative, it stopped looking for others.</p>\n\n<p>By changing <code>$string =~ s/\\s$columns[$col][$ro],/ $head,/i</code> to <code>$string =~ s/\\s$columns[$col][$ro],/ $head,/ig</code> the matching was correct.</p>\n"}], "owner": {"reputation": 1465, "user_id": 1846123, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/559865ebb0f497ca33ab763094cdb971?s=128&d=identicon&r=PG", "display_name": "chuckieDub", "link": "https://stackoverflow.com/users/1846123/chuckiedub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "accepted_answer_id": 39328311, "answer_count": 3, "score": -1, "last_activity_date": 1473070203, "creation_date": 1473044849, "last_edit_date": 1473069630, "question_id": 39323403, "link": "https://stackoverflow.com/questions/39323403/case-insensitive-regex-matching-not-working-in-perl", "title": "case insensitive regex matching not working in perl", "body": "<p>My regex pattern in perl is correctly matching the case sensitive string, but not the string where the case is different. I am parsing a CSV file where the first row is country names, and the other rows are abbreviations or common other spellings of that country.</p>\n\n<p>Example: column 1 of the CSV is United States, USA, US, America. Column 2 is: Mexico, MX, MEX.</p>\n\n<p>Here is the full code::</p>\n\n<pre><code>    #!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\nmy $filename = 'countrycodes.csv';\nmy $line;\nmy @rowStrings;\nmy @rows;\nmy @columns;\n</code></pre>\n\n<p>This is the string I am using to test the code:</p>\n\n<pre><code>my $string = \"Mex, MEX, USA, usa, US, MX, CAN, Canada\";\n\nopen(my $fh, '&lt;', $filename) or die \"Can't open $filename: $!\";\n\n$line = &lt;$fh&gt;;\n@rowStrings = split(\"\\r\", $line);\n\n#make rows strings into arrays\nforeach my $i (0..$#rowStrings){\n    $rows[$i] = [split(\",\",$rowStrings[$i])];\n}\n\n\nmy $columnCount = values scalar $rows[0];\n\nprint \"column count: $columnCount \\n\";\n\n#create array for each column from CSV\nforeach my $column (0..$columnCount){\n    foreach my $row (0..$#rows){\n        $columns[$column][$row] =  $rows[$row][$column];\n        if ($columns[$column][$row]) {\n        }\n    }\n\n}\n</code></pre>\n\n<p>Here I am going through the arrays of abbreviations / spellings and looking for matches. Searching for any abbreviations from the arrays and replacing them with the header / country name from the CSV file ($head).</p>\n\n<pre><code>for my $col (0..$#columns-1){\n    my $head = $columns[$col][0];\n    for my $ro (1..$#rows){\n        if ($columns[$col][$ro]){\n            $string =~ s/\\s$columns[$col][$ro],/ $head,/i;\n            print $string . \"\\n\";\n        }\n    }\n\n}\n</code></pre>\n\n<p>This is the terminal output as the end result: </p>\n\n<pre><code>Mex, Mexico, United States, usa, United States, Mexico, Canada, Canada\n</code></pre>\n\n<p>So as you can see, MEX is matching properly since that is the term it is searching for, but not Mex, even though I am using the /i modifier. What am I doing wrong?</p>\n\n<p>edit: USA is matching, bot not usa.</p>\n\n<p>For reference the regex pattern is <code>$string =~ s/\\s$columns[$col][$ro],/ $head,/i</code></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "edited": false, "score": 0, "creation_date": 1473037219, "post_id": 39322737, "comment_id": 65977521, "body": "Was the multiline flag enabled?"}, {"owner": {"reputation": 23, "user_id": 3700948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df6406cbcfdc0bbbb781b89dce0cc04?s=128&d=identicon&r=PG&f=1", "display_name": "phunchik", "link": "https://stackoverflow.com/users/3700948/phunchik"}, "reply_to_user": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "edited": false, "score": 0, "creation_date": 1473037504, "post_id": 39322737, "comment_id": 65977557, "body": "No, it wasn&#39;t enabled"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1473038396, "post_id": 39322737, "comment_id": 65977692, "body": "FWIW a regex like that can be more readable by using <code>&#47;x</code> and braces. <code>m{ AA [.&lt;] $] ER}x</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "is_accepted": false, "score": 2, "last_activity_date": 1473037388, "creation_date": 1473037388, "answer_id": 39322760, "question_id": 39322737, "link": "https://stackoverflow.com/questions/39322737/what-does-the-dollar-sign-point-to-in-this-particular-perl-regex/39322760#39322760", "title": "What does the dollar sign point to in this particular perl regex", "body": "<p>$] is a special variable that returns the Perl version number. Special variables can occur in regexes.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1473038356, "post_id": 39322767, "comment_id": 65977686, "body": "<code>$OLD_PERL_VERSION</code> is a bit of a mess. I&#39;m not sure when it appeared, but apparently <a href=\"http://perldoc.perl.org/5.20.0/perldelta.html\" rel=\"nofollow noreferrer\">it was documented but didn&#39;t exist until 5.20</a>. It has been <a href=\"http://perldoc.perl.org/perldelta.html#Documentation\" rel=\"nofollow noreferrer\">discouraged in 5.24</a>. I&#39;d recommend pretending it never existed."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": true, "score": 4, "last_activity_date": 1473037435, "creation_date": 1473037435, "answer_id": 39322767, "question_id": 39322737, "link": "https://stackoverflow.com/questions/39322737/what-does-the-dollar-sign-point-to-in-this-particular-perl-regex/39322767#39322767", "title": "What does the dollar sign point to in this particular perl regex", "body": "<p>This might be a mistake by the author, but <code>$]</code> is treated as special variable here. Specifically, it is an alias of the variable <code>$OLD_PERL_VERSION</code> which contains the version of perl encoded as number, e.g. <code>5.020002</code> in my system (corresponding to version number 5.20.2). So that value is inserted in the regex and it is matched literally. So for example, in my system, the above regex will only successfully match against strings that contain the substring <code>AA.5.020002ER</code> or <code>AA&lt;5.020002ER</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 3700948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df6406cbcfdc0bbbb781b89dce0cc04?s=128&d=identicon&r=PG&f=1", "display_name": "phunchik", "link": "https://stackoverflow.com/users/3700948/phunchik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 39322767, "answer_count": 2, "score": 1, "last_activity_date": 1537799852, "creation_date": 1473037077, "last_edit_date": 1537799852, "question_id": 39322737, "link": "https://stackoverflow.com/questions/39322737/what-does-the-dollar-sign-point-to-in-this-particular-perl-regex", "title": "What does the dollar sign point to in this particular perl regex", "body": "<pre><code>/AA[.&lt;]$]ER/\n</code></pre>\n\n<p>I came across this while running through some regex patterns online, but unable to break it down.</p>\n\n<p>I initially thought it would be normal EOS, but those additional characters, don't make sense.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1473023367, "post_id": 39321511, "comment_id": 65974962, "body": "What is wrong with <code>if($s1 =~ &#47;([a-z])_([a-z])&#47;){print &quot;Captured: $1, $2\\n&quot;;}</code> ?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1473023396, "post_id": 39321511, "comment_id": 65974971, "body": "Logically, your match does not work. From the point where you look ahead, the next instruction ensures there should <i>never</i> be an underscore."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473024965, "post_id": 39321511, "comment_id": 65975366, "body": "Yes the regex says find a letter followed by a character that is both an underscore and a letter"}], "answers": [{"tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 6, "last_activity_date": 1473084851, "last_edit_date": 1495542167, "creation_date": 1473023661, "answer_id": 39321555, "question_id": 39321511, "link": "https://stackoverflow.com/questions/39321511/lookahead-in-the-middle-of-regex-doesnt-match/39321555#39321555", "title": "lookahead in the middle of regex doesn&#39;t match", "body": "<p>A lookahead looks for next immediate positions and if a true-assertion takes place it backtracks to previous match - right after <code>a</code> - to continue matching. Your regex would work only if you bring a <code>_</code> next to the positive lookahead <code>([a-z])(?=_)_([a-z])</code></p>\n\n<p>You even don't need (non-)capturing groups in substitution:</p>\n\n<pre><code>if ($s1 =~ /([a-z])_([a-z])/) { print \"Captured: $1, $2\\n\"; }\n</code></pre>\n\n<h2>Edit</h2>\n\n<p><em>In reply to @Borodin's comment</em></p>\n\n<p>I think that moving backwards is the same as a backtrack which is more recognizable by debugging the whole thing (Perl debug mode):</p>\n\n<pre><code>Matching REx \"a(?=_)_b\" against \"a_b\"\n.\n.\n.\n   0 &lt;&gt; &lt;a_b&gt;                |   0| 1:EXACT &lt;a&gt;(3)\n   1 &lt;a&gt; &lt;_b&gt;                |   0| 3:IFMATCH[0](9)\n   1 &lt;a&gt; &lt;_b&gt;                |   1|  5:EXACT &lt;_&gt;(7)\n   2 &lt;a_&gt; &lt;b&gt;                |   1|  7:SUCCEED(0)\n                             |   1|  subpattern success...\n   1 &lt;a&gt; &lt;_b&gt;                |   0| 9:EXACT &lt;_b&gt;(11)\n   3 &lt;a_b&gt; &lt;&gt;                |   0| 11:END(0)\nMatch successful!\n</code></pre>\n\n<p>As above debug output shows at forth line of results (when 3rd step took place) engine consumes characters <code>a_</code> (while being in a lookahead assertion) and then we see a backtrack happens after successful assertion of positive lookahead, engine skips whole sub-pattern in a reverse manner and starts at the position right after <code>a</code>.</p>\n\n<p>At line #5, engine has consumed one character only: <code>a</code>. Regex101 debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OVu10.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OVu10.png\" alt=\"enter image description here\"></a></p>\n\n<p>How I interpret this backtrack is more clear in this illustration (Thanks to @JDB, I borrowed his <a href=\"https://stackoverflow.com/a/37979580/1020526\">style of representation</a>)</p>\n\n<pre><code>a(?=_)_b\n*\n|\\\n| \\\n|  : a (match)\n|  * (?=_)\n|  |\u2196\n|  | \u2196\n|  |\u2198 \u2196\n|  | \u2198 \u2196\n|  |  \u2198 \u2196\n|  |   : _ (match)\n|  |     ^ SUBPATTERN SUCCESS (OP_ASSERT :=&gt; MATCH_MATCH)\n|  * _b\n|  |\\\n|  | \\\n|  |  : _ (match)\n|  |  : b (match)\n|  | /\n|  |/\n| /\n|/\nMATCHED\n</code></pre>\n\n<p>By this I mean if lookahead assertion succeeds - since extraction of parts of input string is happened - it goes back upward (back to previous match offset - (<code>eptr</code> (pointer into the subject) <a href=\"https://github.com/php/php-src/blob/master/ext/pcre/pcrelib/pcre_exec.c#L1585-L1591\" rel=\"nofollow noreferrer\">is not changed but offset is</a>) and while resetting consumed chars it tries to continue matching from there and I call it a backtrack. Below is a visual representation of steps taken by engine with use of <a href=\"https://metacpan.org/release/Regexp-Debugger\" rel=\"nofollow noreferrer\"><code>Regexp::Debugger</code></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/p8WhN.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p8WhN.gif\" alt=\"enter image description here\"></a></p>\n\n<p>So I see it a backtrack or a <em>kind of</em>, however if I'm wrong with all these said, then I'd appreciate any reclaims with open arms.</p>\n"}], "owner": {"reputation": 143, "user_id": 5270129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843704a15ec527ddb1b66bdb8e780a1?s=128&d=identicon&r=PG&f=1", "display_name": "hampadampadoo", "link": "https://stackoverflow.com/users/5270129/hampadampadoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 1, "accepted_answer_id": 39321555, "answer_count": 1, "score": 2, "last_activity_date": 1473084851, "creation_date": 1473023243, "question_id": 39321511, "link": "https://stackoverflow.com/questions/39321511/lookahead-in-the-middle-of-regex-doesnt-match", "title": "lookahead in the middle of regex doesn&#39;t match", "body": "<p>I have a string <code>$s1 = \"a_b\";</code> and I want to match this string but only capture the letters. I tried to use a lookahead:</p>\n\n<pre><code>if($s1 =~ /([a-z])(?=_)([a-z])/){print \"Captured: $1, $2\\n\";}\n</code></pre>\n\n<p>but this does not seem to match my string. I have solved the original problem by using a <code>(?:_)</code>instead, but I am curious to why my original attempt did not work? To my understanding a lookahead matches but do not capture, so what did I do wrong?</p>\n"}, {"tags": ["bash", "perl", "csv", "c++11"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1473023136, "post_id": 39321466, "comment_id": 65974905, "body": "all those tags and no code? add python and code something, you may get some answers."}, {"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 0, "creation_date": 1473024107, "post_id": 39321466, "comment_id": 65975143, "body": "If you have the CSV sorted then you do not need to keep to much in memory at the same time"}], "answers": [{"comments": [{"owner": {"reputation": 264, "user_id": 4379529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5d29577823f3a52a3a6108c92dc9cba?s=128&d=identicon&r=PG&f=1", "display_name": "Mojtaba", "link": "https://stackoverflow.com/users/4379529/mojtaba"}, "edited": false, "score": 0, "creation_date": 1473026253, "post_id": 39321565, "comment_id": 65975695, "body": "I followed your suggestion with bash and calculate hash for each column. I have the following command in a for loop. hash=$(tail -n +2 train.csv | cut -d&#39;,&#39; -f$i | sha256sum)"}], "tags": [], "owner": {"reputation": 59901, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1473023785, "creation_date": 1473023785, "answer_id": 39321565, "question_id": 39321466, "link": "https://stackoverflow.com/questions/39321466/searching-for-similar-columns-in-a-huge-csv-file/39321565#39321565", "title": "Searching for similar columns in a huge csv file", "body": "<p>Exactly the same?</p>\n\n<p>I suppose you can verify it with hash functions.</p>\n\n<p>step 1 - You can load the 5'000 values of first row and calculate 5'000 hash values; exclude the values (the columns) without a corresponding value.</p>\n\n<p>step 2 - Load the value (only the column survived) and calculate the hash of the concatenation of preceding hash with the loaded value; exclude the values (the columns) without a corresponding value.</p>\n\n<p>following steps: exactly as step 2: load and concatenate/hash, excluding columns without matches.</p>\n"}], "owner": {"reputation": 264, "user_id": 4379529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5d29577823f3a52a3a6108c92dc9cba?s=128&d=identicon&r=PG&f=1", "display_name": "Mojtaba", "link": "https://stackoverflow.com/users/4379529/mojtaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1473422010, "accepted_answer_id": 39321565, "answer_count": 1, "score": -2, "last_activity_date": 1502380112, "creation_date": 1473022894, "last_edit_date": 1502380112, "question_id": 39321466, "link": "https://stackoverflow.com/questions/39321466/searching-for-similar-columns-in-a-huge-csv-file", "closed_reason": "Not suitable for this site", "title": "Searching for similar columns in a huge csv file", "body": "<p>I have a huge csv file which has 5000 columns and 5,000,000 rows. I know that there are some columns in this file which are exactly the same. I want to identify such columns. Please not that I cannot fetch this huge file into the memory and runtime is also important.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 508, "user_id": 1396177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e636a61029e51540594084fc6cf5e357?s=128&d=identicon&r=PG", "display_name": "Buster", "link": "https://stackoverflow.com/users/1396177/buster"}, "edited": false, "score": 2, "creation_date": 1473021172, "post_id": 39321141, "comment_id": 65974347, "body": "It would be useful for you to show a readable version of the program."}], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 1396177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e636a61029e51540594084fc6cf5e357?s=128&d=identicon&r=PG", "display_name": "Buster", "link": "https://stackoverflow.com/users/1396177/buster"}, "edited": false, "score": 0, "creation_date": 1473022515, "post_id": 39321285, "comment_id": 65974738, "body": "Thanks for your comments on my (now deleted) answer. I said <i>&quot;The for loop body only runs once&quot;</i> which you corrected: <i>&quot;The loop body runs once for each line in the output of cat file.&quot;</i> (I didn&#39;t know that backticks behaved that way in list context.) I also posted a mangled version of my fix due to a copy-and-paste mix-up. It should have said: [perl -pe &quot;s/\\.(\\d+)/.$1 $1/&quot; &lt;file &gt;file.new]"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 508, "user_id": 1396177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e636a61029e51540594084fc6cf5e357?s=128&d=identicon&r=PG", "display_name": "Buster", "link": "https://stackoverflow.com/users/1396177/buster"}, "edited": false, "score": 0, "creation_date": 1473022621, "post_id": 39321285, "comment_id": 65974769, "body": "@Buster: Also note that you should use <code>$1</code> and not <code>\\1</code> in the replacement string of a Perl substitution. That solution might be okay, but we don&#39;t know that there are never any other dot characters elsewhere in the lines, which would cause it to fail."}, {"owner": {"reputation": 508, "user_id": 1396177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e636a61029e51540594084fc6cf5e357?s=128&d=identicon&r=PG", "display_name": "Buster", "link": "https://stackoverflow.com/users/1396177/buster"}, "edited": false, "score": 0, "creation_date": 1473023209, "post_id": 39321285, "comment_id": 65974918, "body": "&quot;Fixed&quot; in my comment above refers to using $1 and not \\1, not to the second criticism, which you added afterwards, and which is also true."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1473021817, "last_edit_date": 1473021817, "creation_date": 1473021499, "answer_id": 39321285, "question_id": 39321141, "link": "https://stackoverflow.com/questions/39321141/perl-one-liner-to-add-column-to-file-if-second-field-matches/39321285#39321285", "title": "perl one liner to add column to file if second field matches", "body": "<p>You need to be very careful when writing one-line programs. Many of the normal safeguards are not in place, and it is far less easy to spot an error when ther is no layout</p>\n\n<p>Your code is equivalent to this program</p>\n\n<pre><code>for ( `cat file` ) {\n\n    my @L = split;\n\n    if ( $L[1] =~ m/^\\d+\\.\\d+$/ ) {\n        my @snp = split( /\\./, $L[1] );\n        splice( @L, 2, 0, $snp[1] );\n    }\n}\n\nopen OUT, \"&gt;file.new\";\nprint OUT \"@L\\n\";\nclose OUT;\n</code></pre>\n\n<p>Can you see now where the problem lies?</p>\n\n<p>This should do what you need</p>\n\n<pre><code>perl -anE 'splice @F, 2, 0, $F[1] =~ /\\.(\\d+)/; say \"@F\";' myfile\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3591048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vr3Mm.jpg?s=128&g=1", "display_name": "theo4786", "link": "https://stackoverflow.com/users/3591048/theo4786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 39321285, "answer_count": 1, "score": -1, "last_activity_date": 1473021817, "creation_date": 1473020391, "question_id": 39321141, "link": "https://stackoverflow.com/questions/39321141/perl-one-liner-to-add-column-to-file-if-second-field-matches", "title": "perl one liner to add column to file if second field matches", "body": "<p>I have a file that for some rows has 4 fields and for some rows has 3 fields, and looks like:</p>\n\n<pre><code>1 rs17125090 63988904 ENSG00000142856\n7 7.87455705 ENSG00000075303\n</code></pre>\n\n<p>In the cases where the row has 3 fields, the second field matches \"number.longer number\" whereas if the row has 4 fields, the second field matches \"rsnumber\". In the instances where the row has 3 fields, I would like to add a field in the third column that contains a number equal to the second field, split by \".\". For example, the resulting file would look like:</p>\n\n<pre><code>1 rs17125090 63988904 ENSG00000142856\n7 7.87455705 87455705 ENSG00000075303\n</code></pre>\n\n<p>My perl one liner is:</p>\n\n<pre><code>perl -e 'for(`cat file`){my@L=split;if($L[1]=~m/^\\d+\\.\\d+$/){my@snp=split(/\\./,$L[1]);splice(@L,2,0,$snp[1])}}open OUT,\"&gt;file.new\";print OUT \"@L\\n\"; close OUT'\n</code></pre>\n\n<p>But I just get an empty file. Can someone fix this/let me know what's going wrong?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1472991292, "creation_date": 1472991292, "answer_id": 39316809, "question_id": 39316789, "link": "https://stackoverflow.com/questions/39316789/perl-syntax-error-near/39316809#39316809", "title": "PERL syntax error near &quot;= ) &quot;", "body": "<p>The author of the script didn't prepare the script to be included in an HTML. The actual code was</p>\n\n<pre><code>while ($line = &lt;INFILE&gt;) {\n</code></pre>\n\n<p>See <a href=\"http://p3rl.org/readline\">readline</a> for details.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2682722"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 39316809, "answer_count": 1, "score": 0, "last_activity_date": 1473000685, "creation_date": 1472991102, "last_edit_date": 1473000685, "question_id": 39316789, "link": "https://stackoverflow.com/questions/39316789/perl-syntax-error-near", "title": "PERL syntax error near &quot;= ) &quot;", "body": "<p>I have found this <a href=\"https://www.dinotools.de/2008/11/24/einzelne-tracks-aus-gpx-dateien-extrahieren/\" rel=\"nofollow\">example</a> but I get this error: </p>\n\n<blockquote>\n  <p>syntax error at ./test.pl line 11, near \"= ) \" Execution of ./test.pl\n  aborted due to compilation errors.</p>\n</blockquote>\n\n<p>Line 11: <code>while($line = ) {</code></p>\n"}, {"tags": ["perl", "user-interface", "cron", "schedule"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1472982527, "creation_date": 1472982527, "answer_id": 39315626, "question_id": 39315520, "link": "https://stackoverflow.com/questions/39315520/schedule-a-perl-script-run-in-ubuntu-not-looking-at-cron/39315626#39315626", "title": "Schedule a Perl script run in Ubuntu. Not looking at cron", "body": "<p>One way is that your Perl scripting will just <code>sleep(seconds)</code> and then execute the action. In case you don't want to have this you need to tell some other service that it should invoke a program at a specific time. In UNIX this is usually done with the <a href=\"http://www.computerhope.com/unix/uat.htm\" rel=\"nofollow\">at command</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1473081323, "post_id": 39315661, "comment_id": 65994350, "body": "I did try this out. when I execute my script like:"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1473089260, "post_id": 39315661, "comment_id": 65998655, "body": "what happened?  and by the way, what language is your GUI?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1472982780, "creation_date": 1472982780, "answer_id": 39315661, "question_id": 39315520, "link": "https://stackoverflow.com/questions/39315520/schedule-a-perl-script-run-in-ubuntu-not-looking-at-cron/39315661#39315661", "title": "Schedule a Perl script run in Ubuntu. Not looking at cron", "body": "<p>Use the <code>at</code> command:</p>\n\n<pre><code>echo 'perl foo.pl' | at now + 3 hours\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1472989071, "creation_date": 1472981656, "last_edit_date": 1472989071, "question_id": 39315520, "link": "https://stackoverflow.com/questions/39315520/schedule-a-perl-script-run-in-ubuntu-not-looking-at-cron", "title": "Schedule a Perl script run in Ubuntu. Not looking at cron", "body": "<p>I've got this Perl script on Ubuntu that I need to run at a particular time in the future. I don't need it to run at that time more than once or basically what I'm trying to say is that it does not need a <code>cron</code>. </p>\n\n<p>I need to schedule a run at a future time to run once and that's it. Any idea how to go about it? I've googled a bit but every time the concept of cron comes up so not really helpful.</p>\n\n<p>I do have some code. The user clicks on a button (say \"Schedule\") on the GUI and a process starts in the background which schedules the run after (say) N hours.</p>\n\n<p>I'm ready with the GUI and the connection to the backend Perl script. The N hours is predetermined. But I don't know how to code the scheduling concept in the Perl script. </p>\n"}, {"tags": ["perl", "file", "unlink"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1487968782, "last_edit_date": 1487968782, "creation_date": 1472983331, "answer_id": 39315737, "question_id": 39315201, "link": "https://stackoverflow.com/questions/39315201/perl-undo-unlink-with-file-open/39315737#39315737", "title": "Perl: Undo unlink with file open", "body": "<p>If feasible, you can change the open mode (<code>'&gt;'</code>) to be read/write instead. Then, when you need to recover the file you can use the filehandle to print it out to a newly opened file, even with the same name if needed.</p>\n\n<pre><code>open my $fh, '+&gt;', $file;\nsay $fh \"line 1\";\nunlink $file;\nsay $fh \"more lines\";\n\nseek $fh, 0, 0;\nopen my $fh_rec, '&gt;', $file   or die \"Can't open $file (again): $!\";\nprint $fh_rec $_ while &lt;$fh&gt;;\n</code></pre>\n\n<p>This isn't exactly what is asked but it recovers the file content and access\nto it.  Further prints to <code>$fh</code> would leave the new <code>$file</code> out of sync, so this can be done when writing's done (to restore the file) or to switch the printing to <code>$fh_rec</code> (then also <code>close $fh</code>).</p>\n\n<hr>\n\n<p>Another way to recover a file is by using the OS, if it uses <code>/proc</code> and exposes file handles. Then the data can be copied from <code>/proc/PID/fd/N</code>. To identify <code>N</code> one can scan all links that are in <code>fd/</code> (a few) with <code>ls -l</code>, since the deleted file should have <code>(deleted)</code> after its name. </p>\n\n<p>Also, <code>lsof -p PID</code> lists all open file descriptors for the given process. The ones for deleted files have <code>(deleted)</code> with them.  (The <code>lsof +L1 -p PID</code> outputs only deleted entries, still quite a few.) From this output we can read off that file descriptor and then copy the data from <code>/proc/PID/fd/N</code>. This way we also get the inode number, which can also be used to recover the file.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473753152, "post_id": 39316870, "comment_id": 66250019, "body": "I completely agree, there is no facility for this and no procedure that works <i>in general</i>.  I am curious whether I am missing something, why do you say &quot;<i>Copying the content from the open filehandle <b>may</b> work.</i>&quot; (emphasis mine)?  What I posted just works (or -- how can it not?), as long as the file is opened <code>rw</code>. (It doesn&#39;t restore the original link, of course.)"}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473770089, "post_id": 39316870, "comment_id": 66259906, "body": "Copying content does not work if the whole reason for the relinking is to avoid re-reading the file (which it is in my case)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1473791676, "post_id": 39316870, "comment_id": 66272868, "body": "Ah, OK.  I didn&#39;t realize that that was the purpose."}], "tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": true, "score": 0, "last_activity_date": 1472991815, "last_edit_date": 1495540452, "creation_date": 1472991815, "answer_id": 39316870, "question_id": 39315201, "link": "https://stackoverflow.com/questions/39315201/perl-undo-unlink-with-file-open/39316870#39316870", "title": "Perl: Undo unlink with file open", "body": "<p>These answers say: 'No, not in general, and definitely not on all Unices':</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4171713/relinking-an-anonymous-unlinked-but-open-file\">Relinking an anonymous (unlinked but open) file</a></p>\n\n<p><a href=\"https://serverfault.com/questions/168909/relinking-a-deleted-file\">https://serverfault.com/questions/168909/relinking-a-deleted-file</a></p>\n\n<p>Copying the content from the open filehandle may work.</p>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 39316870, "answer_count": 2, "score": 5, "last_activity_date": 1487968782, "creation_date": 1472979435, "question_id": 39315201, "link": "https://stackoverflow.com/questions/39315201/perl-undo-unlink-with-file-open", "title": "Perl: Undo unlink with file open", "body": "<p><code>unlink</code> does not delete a file, if it is open; it just removes the name and the link to the name. Can <code>unlink</code> be undone?</p>\n\n<pre><code>open(my $fh, \"&gt;\", undef) || die;\nprint $fh \"foo\";\n# This does not work\nlink($fh,\"/tmp/bar\") || die;\n</code></pre>\n\n<p>Can an open file handle to an unlinked file be linked to a file?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "edited": false, "score": 0, "creation_date": 1472977336, "post_id": 39314920, "comment_id": 65962131, "body": "If I use my @matched_string = (grep(/\\berr\\b/, @capture) only  , it works fine"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "edited": false, "score": 0, "creation_date": 1472978269, "post_id": 39314983, "comment_id": 65962348, "body": "can i replace the above expression with @matched_string = (grep(/\\berr\\b||\\bwarn\\b/, @capture)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "edited": false, "score": 0, "creation_date": 1472978469, "post_id": 39314983, "comment_id": 65962390, "body": "@SudhirMishra Well, yes -- but that will give you all strings in <code>@capture</code> that have <i>either</i> <code>err</code> <i>or</i> <code>warn</code> words in them.  Is that what you want?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "edited": false, "score": 0, "creation_date": 1472979635, "post_id": 39314983, "comment_id": 65962676, "body": "@SudhirMishra  I added it to the answer, let me know if it isn&#39;t what you mean."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1472986329, "last_edit_date": 1472986329, "creation_date": 1472977667, "answer_id": 39314983, "question_id": 39314920, "link": "https://stackoverflow.com/questions/39314920/finding-matched-string-with-grep-does-not-return-the-matched-value/39314983#39314983", "title": "finding matched string with grep does not return the matched value", "body": "<p>The OR (<code>||</code>) imposes the <em>scalar context</em> on the first (left) <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\"><code>grep</code></a> call.  So it returns the number of times it matched, which is then evaluated for truth.  If it matched anything that number evaluates as true, so that number is returned by <code>||</code>. Otherwise you get the other list, or an empty list if that one doesn't have a match either.</p>\n\n<p>I take it that you want to get all lines with <code>err</code> from <code>@capture</code> or, if absent altogether, then all with <code>warn</code>. For this you have the make the full pass for <code>err</code> first, then look for <code>warn</code>.  A simple way</p>\n\n<pre><code>my @matched_string = grep { /\\berr\\b/ } @capture;\n@matched_string = grep { /\\bwarn\\b/ } @capture  if not @matched_string;\n</code></pre>\n\n<p>But if you simply want all strings in <code>@capture</code> with either <code>err</code> or <code>warn</code> words in them, then</p>\n\n<pre><code>my @matched_string = grep { /\\b(?:err|warn)\\b/ } @capture;\n</code></pre>\n\n<p>Please clarify the purpose if the above guesses aren't right.</p>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 6783217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XCqq0.jpg?s=128&g=1", "display_name": "Suraiya Khan", "link": "https://stackoverflow.com/users/6783217/suraiya-khan"}, "is_accepted": false, "score": 2, "last_activity_date": 1472979497, "last_edit_date": 1472979497, "creation_date": 1472978801, "answer_id": 39315115, "question_id": 39314920, "link": "https://stackoverflow.com/questions/39314920/finding-matched-string-with-grep-does-not-return-the-matched-value/39315115#39315115", "title": "finding matched string with grep does not return the matched value", "body": "<pre><code>#Perform the assignment first then do the \"or\" as follows\n#or combine the regex to achieve what you are trying to achieve:\n\n\nuse strict;\nuse warnings;\n\nmy @capture = \"err=\\\"some value\\\"\";\nmy  @matched_string;\nif ((@matched_string = grep(/\\berr\\b/, @capture)) || (@matched_string =     grep(/\\bwarn\\b/, @capture)) ) {\n   print \"@matched_string\";\n}\n\n\n\n#Another alternative (combining the regex)\n\n\nuse strict;\nuse warnings;\n\nmy @capture = \"warn\\\"some value\\\"\";\n\nif ((my @matched_string = grep(/\\b(err|warn)\\b/, @capture))) {\n   print \"@matched_string\";\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 39314983, "answer_count": 2, "score": 3, "last_activity_date": 1472986329, "creation_date": 1472977226, "last_edit_date": 1472977397, "question_id": 39314920, "link": "https://stackoverflow.com/questions/39314920/finding-matched-string-with-grep-does-not-return-the-matched-value", "title": "finding matched string with grep does not return the matched value", "body": "<p>I am using the below code to get the matched value from grep function in perl , but it always returns a value of 1 instead of returning the matched value.</p>\n\n<pre><code>use strict;    \nuse warnings; \n\nmy @capture = \"err=\\\"some value\\\"\"; \n\nif(my @matched_string = (grep(/\\berr\\b/, @capture) || grep(/\\bwarn\\b/, @capture))){\n   print \"@matched_string\";\n}\n</code></pre>\n\n<p>How can i get the matched value. </p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1472969729, "post_id": 39313988, "comment_id": 65960574, "body": "Is it your home work? Okay. What have you tried so far.?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1472969746, "post_id": 39313988, "comment_id": 65960580, "body": "Now explain how you get that output from that input.  &quot;Nearest&quot; and &quot;small&quot; are not exact terms"}, {"owner": {"reputation": 11, "user_id": 4331644, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e5ebb9836c4fe3f4cf8a56804667302?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan M", "link": "https://stackoverflow.com/users/4331644/karthikeyan-m"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1472972081, "post_id": 39313988, "comment_id": 65960982, "body": "@ysth for example if we take 4 in this list. we need to check nearest small number than 4. 1 is far away than 2."}, {"owner": {"reputation": 11, "user_id": 4331644, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e5ebb9836c4fe3f4cf8a56804667302?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan M", "link": "https://stackoverflow.com/users/4331644/karthikeyan-m"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1472972388, "post_id": 39313988, "comment_id": 65961046, "body": "@mkHun its asked in interview. i tried multiple ways but could not find the solution."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1472974299, "post_id": 39313988, "comment_id": 65961474, "body": "I don&#39;t understand the question at all. How do you get those output numbers?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1473009246, "post_id": 39313988, "comment_id": 65971007, "body": "@melpomene: for each number, they want the nearest smaller number (and the smaller of the two if equally distant)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473009660, "post_id": 39313988, "comment_id": 65971134, "body": "@ysth But for 8, the next smallest number is 6. How do you get 2?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1473010826, "post_id": 39313988, "comment_id": 65971491, "body": "@melpomeme &quot;nearest smaller number&quot;, nearest in distance, not smallness"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1472972973, "creation_date": 1472972973, "answer_id": 39314440, "question_id": 39313988, "link": "https://stackoverflow.com/questions/39313988/perl-find-nearest-smaller-number-for-each-element-in-array/39314440#39314440", "title": "perl : find nearest smaller number for each element in array", "body": "<p>A brute force approach doesn't seem like a bad idea here.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util 'min';\n\nmy @in = qw/8 2 4 5 1 6 0 3 2/;\n\nmy @out;\n\nfor my $index (0..$#in) {\n    for my $offset (1..$#in) {\n        my $least = min(\n            $index-$offset &gt;= 0 ? $in[$index-$offset] : (),\n            $index+$offset &lt;= $#in ? $in[$index+$offset] : ()\n        );\n\n        if ( ! defined $least ) {\n            push @out, -1;\n            last;\n        }\n        elsif ( $least &lt; $in[$index]) {\n            push @out, $least;\n            last;\n        }\n    }\n}\n\nprint \"@out\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5837906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vfo5J6QtJbc/AAAAAAAAAAI/AAAAAAAAANQ/VjayaXn0CPY/photo.jpg?sz=128", "display_name": "Ganesh Balooni", "link": "https://stackoverflow.com/users/5837906/ganesh-balooni"}, "is_accepted": false, "score": 0, "last_activity_date": 1505718003, "creation_date": 1505718003, "answer_id": 46273341, "question_id": 39313988, "link": "https://stackoverflow.com/questions/39313988/perl-find-nearest-smaller-number-for-each-element-in-array/46273341#46273341", "title": "perl : find nearest smaller number for each element in array", "body": "<p>C# Code to get nearest smaller element in a array</p>\n\n<pre><code>        Console.WriteLine(\"How many numbers you want in your array? \");\n        int length = Convert.ToInt32(Console.ReadLine());\n        int[] myArray = new int[length];\n        int[] resultArray = new int[length];\n\n        Console.WriteLine(\"Enter \" + length + \" numbers for your array..\");\n        for (int i = 0; i &lt; myArray.Length ; i++)\n        {\n            myArray[i] = Convert.ToInt32(Console.ReadLine());\n        }\n\n        for (int i = 0; i &lt; myArray.Length; i++) {\n            int k = -1;\n            for (int j = 0; j &lt; myArray.Length; j++) {\n                if (myArray[i] &gt; myArray[j] &amp;&amp; (k == -1 || ((i - Array.IndexOf&lt;int&gt;(myArray, k) &gt;= Math.Abs(i - j) ) &amp;&amp; k &gt; myArray[j] )))\n                {\n                    k = myArray[j];\n                }\n            }\n            resultArray[i] = k;\n        }\n\n        Console.WriteLine(\"Desired Output: \");\n        for (int i = 0; i &lt; resultArray.Length; i++)\n        {\n            Console.WriteLine(resultArray[i]);\n        }\n\n        Console.ReadLine();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4331644, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e5ebb9836c4fe3f4cf8a56804667302?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan M", "link": "https://stackoverflow.com/users/4331644/karthikeyan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1505718003, "creation_date": 1472968958, "last_edit_date": 1472973023, "question_id": 39313988, "link": "https://stackoverflow.com/questions/39313988/perl-find-nearest-smaller-number-for-each-element-in-array", "title": "perl : find nearest smaller number for each element in array", "body": "<p>wants to generate array which is nearest smaller number for each element in an array.(-1 if the element is 0)</p>\n\n<p>example </p>\n\n<p>Input array: 8 2 4 5 1 6 0 3 2</p>\n\n<p>Output array: 2 1 2 1 0 0 -1 0 0</p>\n"}, {"tags": ["arrays", "perl", "swap"], "answers": [{"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": true, "score": 2, "last_activity_date": 1473048188, "last_edit_date": 1473048188, "creation_date": 1472960613, "answer_id": 39313349, "question_id": 39312795, "link": "https://stackoverflow.com/questions/39312795/swap-two-arrays-without-using-tmp/39313349#39313349", "title": "Swap two arrays without using `@tmp`", "body": "<p>Perl flattens all lists, and list assignment is greedy, so you can never assign to <code>(@ours, @theirs)</code> and expect <code>@theirs</code> to get anything. To put it another way... You can't pass an 'array' to a subroutine. Subroutines in Perl can only receive a list of 0 or more scalars.</p>\n\n<p>You could swap the individual (scalar) elements of the array inside a loop, but this assumes both arrays are of equal length</p>\n\n<pre><code>for my $i (0 .. $#ours) {\n    ( $ours[$i], $theirs[$i] ) = ( $theirs[$i], $ours[$i] );\n} \n</code></pre>\n\n<hr>\n\n<p>Perl 5.22 did introduce an experimental feature called <a href=\"http://perldoc.perl.org/perlref.html#Assigning-to-References\" rel=\"nofollow\">reference aliasing</a> which allows you to assign to a reference. If you are running 5.22 or later, you can enable the experimental feature and then do this.</p>\n\n<pre><code>(\\@ours, \\@theirs) = (\\@theirs, \\@ours);\n</code></pre>\n\n<p>To enable the feature, and disable the warnings for using an experimental feature, you would do this</p>\n\n<pre><code>use v5.22;\nuse warnings;\nuse feature 'refaliasing';\nno warnings 'experimental::refaliasing';\n</code></pre>\n\n<p>Alternatively, install the <a href=\"https://metacpan.org/pod/experimental\" rel=\"nofollow\">experimental</a> module which handles the warnings for you</p>\n\n<pre><code>use v5.22;\nuse warnings;\nuse experimental 'refaliasing';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 3, "last_activity_date": 1493710405, "last_edit_date": 1493710405, "creation_date": 1472961930, "answer_id": 39313452, "question_id": 39312795, "link": "https://stackoverflow.com/questions/39312795/swap-two-arrays-without-using-tmp/39313452#39313452", "title": "Swap two arrays without using `@tmp`", "body": "<p>What about some logic</p>\n\n<pre><code>@ar = qw(one two three four);\n@br = (1..5);\nunshift(@ar,@br);\n@br = splice(@ar,scalar @br);\nprint \"@ar\\n@br\\n\";\n</code></pre>\n\n<p>Array swapping is not possible because of the flattening. <code>(@ar,@br)=(@br,@ar)</code> </p>\n\n<p>Actually you are creating new list those elements coming from two arrays. Finally you have the one list. That the list data are gone to the first array (@ar). The second array should  be empty (@br). </p>\n"}], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 39313349, "answer_count": 2, "score": 3, "last_activity_date": 1493710405, "creation_date": 1472952911, "question_id": 39312795, "link": "https://stackoverflow.com/questions/39312795/swap-two-arrays-without-using-tmp", "title": "Swap two arrays without using `@tmp`", "body": "<p>It is very simple to swap two scalar values like:</p>\n\n<pre><code>($ours, $theirs) = ($theirs, $ours);\n</code></pre>\n\n<p>Then, how should I do this with array variables?</p>\n\n<pre><code># (@ours, @theirs) = (@theirs, @ours);  # XXX\n\n# lame\nmy @tmp = @ours;\n@ours = @theirs;\n@theirs = @tmp;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 2, "creation_date": 1472935850, "post_id": 39311110, "comment_id": 65955259, "body": "Instead of using this cumbersome way, find each floating-point numbers and build a new string."}], "answers": [{"comments": [{"owner": {"reputation": 1352, "user_id": 73077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a2499f7835b6607a0f217f00089bcc?s=128&d=identicon&r=PG", "display_name": "Jiri Klouda", "link": "https://stackoverflow.com/users/73077/jiri-klouda"}, "edited": false, "score": 0, "creation_date": 1472935407, "post_id": 39311129, "comment_id": 65955170, "body": "<a href=\"https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch06s10.html\" rel=\"nofollow noreferrer\">safaribooksonline.com/library/view/regular-expressions-cookb&zwnj;&#8203;ook/&hellip;</a>"}, {"owner": {"reputation": 12281, "user_id": 1322268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfWtq.jpg?s=128&g=1", "display_name": "shawnt00", "link": "https://stackoverflow.com/users/1322268/shawnt00"}, "edited": false, "score": 0, "creation_date": 1472935551, "post_id": 39311129, "comment_id": 65955197, "body": "I don&#39;t think that would correctly handle something slightly malformed this way <code>1.23.4</code>"}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 12281, "user_id": 1322268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfWtq.jpg?s=128&g=1", "display_name": "shawnt00", "link": "https://stackoverflow.com/users/1322268/shawnt00"}, "edited": false, "score": 0, "creation_date": 1472935647, "post_id": 39311129, "comment_id": 65955217, "body": "@shawnt00 I added a <code>\\b</code> to address that."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1472936204, "post_id": 39311129, "comment_id": 65955343, "body": "Adding <code>\\b</code> doesn&#39;t prevent to find a match in  <code>1.23.4</code>, you need something stronger."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472936982, "post_id": 39311129, "comment_id": 65955521, "body": "I changed the 2 <code>\\b</code> into a <code>(?:\\A|\\s)</code> and <code>(?:\\z|\\s)</code>, hopefully that should do it."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472937742, "post_id": 39311129, "comment_id": 65955710, "body": "I did consider using zero-width assertions, but I think there is not reason here. They are usually slower."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472938612, "post_id": 39311129, "comment_id": 65955930, "body": "Your pattern, as it stands, doesn&#39;t match 6.2 in the original problem. So...? And a word boundary <i>is</i> a zero-width assertion."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 2, "last_activity_date": 1472939193, "last_edit_date": 1472939193, "creation_date": 1472935133, "answer_id": 39311129, "question_id": 39311110, "link": "https://stackoverflow.com/questions/39311110/perl-regex-substitute-everything-not-a-float-with-space/39311129#39311129", "title": "Perl regex substitute everything not a float with space", "body": "<p>I think it would be easier to extract all floats first:</p>\n\n<pre><code>my @floats = $substitute_this =~ /(?&lt;!\\S)([+-]?\\d+\\.\\d+)(?!\\S)/g;\n</code></pre>\n\n<p>and then join them into a single string:</p>\n\n<pre><code>print join(' ', @floats);\n</code></pre>\n\n<p><strong>Edit</strong>: As Jiri Klouda points out below, this regular expression for floats is rather simplistic, but it's just an example. You can adjust it if you want. The point is that this approach let's you invert the logic of what you were trying to do, so that you don't have to try to match anything that <em>is not</em> a float (which is hard), but rather you just have to match anything that <em>is</em> a float.</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 5270129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843704a15ec527ddb1b66bdb8e780a1?s=128&d=identicon&r=PG&f=1", "display_name": "hampadampadoo", "link": "https://stackoverflow.com/users/5270129/hampadampadoo"}, "edited": false, "score": 0, "creation_date": 1473008538, "post_id": 39311727, "comment_id": 65970826, "body": "Nice, but I got a <code>&quot;variable length lookbehind not implemented in regex (regex)&quot;</code> error. It seems it comes from the first part in the regex: <code>(?&lt;=\\s|\\A)\\d+</code>. I tried to change this to <code>((?&lt;=\\s)\\d+|(?&lt;=\\A)\\d+)</code> but then I got the output <code>(lots of spaces) 3.8 7.3</code>."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 143, "user_id": 5270129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843704a15ec527ddb1b66bdb8e780a1?s=128&d=identicon&r=PG&f=1", "display_name": "hampadampadoo", "link": "https://stackoverflow.com/users/5270129/hampadampadoo"}, "edited": false, "score": 0, "creation_date": 1473011893, "post_id": 39311727, "comment_id": 65971817, "body": "You were right. Please check update and live demo. @hampadampadoo"}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 0, "last_activity_date": 1473011848, "last_edit_date": 1473011848, "creation_date": 1472940314, "answer_id": 39311727, "question_id": 39311110, "link": "https://stackoverflow.com/questions/39311110/perl-regex-substitute-everything-not-a-float-with-space/39311727#39311727", "title": "Perl regex substitute everything not a float with space", "body": "<p>As an alternative to @redneb solution, a one-go RegEx would be like this:</p>\n\n<pre><code>\\d++\\.\\d++(?= +|\\Z)(*SKIP)(?!)|[^\\s]+ *|\\s(?=\\s)\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>echo \"5.23 ABC123  5.4 6.2965  9.7    3.8   7.3 5.3.3 ABC.2356\" | perl -ne \"s/\\d++\\.\\d++(?= +|\\Z)(*SKIP)(?!)|[^\\s]+ *|\\s(?=\\s)//g; print;\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5.23 5.4 6.2965 9.7 3.8 7.3 \n</code></pre>\n\n<p><a href=\"http://fiddle.re/qkey3a\" rel=\"nofollow\">Live demo</a> (Use global match and replace with nothing)</p>\n"}, {"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1472950672, "post_id": 39312621, "comment_id": 65958150, "body": "How is this different than the solution that was posted four hours ago?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472950854, "last_edit_date": 1472950854, "creation_date": 1472950315, "answer_id": 39312621, "question_id": 39311110, "link": "https://stackoverflow.com/questions/39311110/perl-regex-substitute-everything-not-a-float-with-space/39312621#39312621", "title": "Perl regex substitute everything not a float with space", "body": "<p>This solution uses a global regex pattern match to finds all floating-point numbers\u2014optional sign, digits, dot, digits\u2014that are neither preceded nor followed by a non-space character. The resulting list is simply joined using spaces and returned to the original variable</p>\n\n<p>I can't tell whether you have any numbers in any other format (without a decimal point, for instance) but you say <em>\"substitute everything not a float of the form\u00a0x.x\"</em> so that is what I have coded, with the addition of the optional sign character which you mention later</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = \"ABC123  5.4 6.2  9.7    3.8   7.3\";\n\n$s = join ' ', $s =~ / (?&lt;!\\S) [+-]? \\d+ \\. \\d+ (?!\\S) /xg;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>5.4 6.2 9.7 3.8 7.3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 6782635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vi3AT.jpg?s=128&g=1", "display_name": "Mathieu Kerjouan", "link": "https://stackoverflow.com/users/6782635/mathieu-kerjouan"}, "is_accepted": false, "score": 0, "last_activity_date": 1472974074, "creation_date": 1472974074, "answer_id": 39314545, "question_id": 39311110, "link": "https://stackoverflow.com/questions/39311110/perl-regex-substitute-everything-not-a-float-with-space/39314545#39314545", "title": "Perl regex substitute everything not a float with space", "body": "<p>You can solved this problem with <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\">map</a> over your list:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub extract_float {\n  #\u00a0split string with null char (\\s+)\n  my @array = split(/\\s+/, shift);\n\n  # anonymous function who return string only if \n  #\u00a0arguments is in form `integer.integer`\n  my $fun = sub { $_ =~ !\\d+\\.\\d+! };\n\n  # map $fun on @array\n  my @map = map(&amp;$fun, @array);\n\n  # convert @array in string (each value separated with space)\n  join(\" \", @map);\n}\n\nsub extract_float_oneline {\n  join(\" \", map({$_ =~ /(\\d+\\.\\d+)/} split(/\\s+/, shift)));\n}\n\nmy $string = \"ABC123  5.4 6.2  9.7    3.8   7.3\";\nprint extract_float($string).\"\\n\";\n# 5.4 6.2 9.7 3.8 7.3\n\nprint extract_float_oneline($string).\"\\n\";\n# 5.4 6.2 9.7 3.8 7.3\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5270129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843704a15ec527ddb1b66bdb8e780a1?s=128&d=identicon&r=PG&f=1", "display_name": "hampadampadoo", "link": "https://stackoverflow.com/users/5270129/hampadampadoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1473011848, "creation_date": 1472934929, "question_id": 39311110, "link": "https://stackoverflow.com/questions/39311110/perl-regex-substitute-everything-not-a-float-with-space", "title": "Perl regex substitute everything not a float with space", "body": "<p>I have a string and I want to substitute everything not a float of the form <code>x.x</code> but still keep exactly one space between each floating-point number:</p>\n\n<pre><code> my $substitute_this = \"ABC123  5.4 6.2  9.7    3.8   7.3\";\n my $substitution =  $substitute_this =~ s/(some regex)/(something else?)/gr;\n print $substitution; #5.4 6.2 9.7 3.8 7.3\n</code></pre>\n\n<p>I do not really have a clue how to accomplish this, I know how to substitute floats:</p>\n\n<pre><code> s/[-+]?[0-9]+\\.[0-9]+//gr\n</code></pre>\n\n<p>and I know that to unmatch something in a character class I do something like </p>\n\n<pre><code>[^0-9]\n</code></pre>\n\n<p>But the regex for floating-point numbers is so long I don't know how to negate it. The second problem is to get only one space between every float, which I do not have a clue about how to accomplish.</p>\n"}, {"tags": ["java", "regex", "xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1472922433, "post_id": 39309225, "comment_id": 65951409, "body": "You could try writing a function <code>process_switch</code> that takes an XML tree node (<code>XML::Twig</code> or <code>Mojo::DOM</code> would be good choices for parsing the file) and an indentation level. Call it with the top <code>switch</code> element in the file. Get the node&#39;s first <code>case</code> child. Get the <code>condition</code> child of the <code>case</code> and print it as <code>&quot;\\t&quot; x $indentation . if( COND ) {</code>. If the <code>case</code> has a <code>switch</code> child element, call yourself recursively with an <code>$indentation+1</code>. Close the <code>if</code> bock and do the same with an <code>otherwise</code> if present."}, {"owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1472973514, "post_id": 39309225, "comment_id": 65961307, "body": "Hi mbethke, thank you for spending your time to answer my question. My opinion is the same with you, but the difficulty is how to get Otherwise block if in the Case block has another sub-otherwise block. Can you help me write a sample perl code to solve this case ?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 0, "creation_date": 1472962883, "post_id": 39310329, "comment_id": 65959658, "body": "Hi Borodin, thank you for spending your time to answer my question. I&#39;m sorry if my question was not clear. Actually, my posted XML input is only a format, the actual input XML file is more complicated, it includes other same switch block and other XML tags. So that, I need a sub routine for getting block based on tag as well as @_ input and another sub routine for analyzing gotten block and do recursion in this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 0, "creation_date": 1472986849, "post_id": 39310329, "comment_id": 65964496, "body": "@Kamogawa: As far as I can can tell my answer solves your problem. Why do you think it doesn&#39;t? Have you tried it?"}, {"owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 0, "creation_date": 1472998171, "post_id": 39310329, "comment_id": 65967561, "body": "When I run your code, there is a problem is that it keeps only data in [CDATA[....]], and deletes other block types except Switch block. For example, before Switch block I have other block :    `    &lt;invoke name=&quot;name1&quot; operation=&quot;operation1&quot; displayName=&quot;Invoke1&quot; id=&quot;6&quot;&gt;       &lt;input&gt;         &lt;parameter name=&quot;Name&quot; variable=&quot;Name&quot;/&gt;         &lt;parameter name=&quot;ID&quot; variable=&quot;ID&quot;/&gt;       &lt;/input&gt;       &lt;output&gt;         &lt;parameter name=&quot;Return&quot; variable=&quot;Return&quot;/&gt;       &lt;/output&gt;     &lt;/invoke&gt;`  I want to keep this block to convert in another format."}, {"owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 0, "creation_date": 1472998198, "post_id": 39310329, "comment_id": 65967571, "body": "In addition, for condition of if--else, can you tell me how to get condition (ex: C3 &gt; 0 ) into a string to process. Thank you in advance!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 1, "creation_date": 1473000251, "post_id": 39310329, "comment_id": 65968218, "body": "@Kamogawa: All of this is completely new. You didn&#39;t mention anything about it in your original question. I&#39;ve spent a long time already working on your problem and I&#39;m not going to do any more, especially as you don&#39;t appear to be making any effort at all of your own."}, {"owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "edited": false, "score": 0, "creation_date": 1473001130, "post_id": 39310329, "comment_id": 65968525, "body": "Hi Borodin,  I&#39;m sorry because I did not explain clearly in my original question, and took your time in my problem. Actually, it&#39;s difficulty for me. I tried many times before, but I could not solve it. Anyway, thank you so much!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472929500, "last_edit_date": 1472929500, "creation_date": 1472928890, "answer_id": 39310329, "question_id": 39309225, "link": "https://stackoverflow.com/questions/39309225/perl-convert-a-nested-xml-format-to-java-with-recursion/39310329#39310329", "title": "Perl - Convert a nested XML format to Java with recursion", "body": "<p>Here's a solution that uses <a href=\"https://metacpan.org/pod/XML::Parser\" rel=\"nofollow\"><code>XML::Parser</code></a>. I've used <code>Style =&gt; 'Subs'</code> because the only events I'm interested in are the start and end of <code>case</code> and <code>otherwise</code> elements, and non-blank character data</p>\n\n<p>The array <code>@indent</code> has another element pushed onto it every time we descend into a block, and the last element is popped off when the block ends. The value of the last element in the array is the number of <code>case</code> elements we've seen so far at this level. That allows us to output <code>else if</code> for all occurrences after the first</p>\n\n<p>I've wrapped the whole of the text in parentheses, because your third <code>condition</code> element contains <code>(c3) &gt;0</code>, which doesn't make sense otherwise</p>\n\n<p>I trust that it's clear enough for you to make any adjustments that you may need</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::Parser;\n\nmy $parser = XML::Parser-&gt;new(\n    Style    =&gt; 'Subs',\n    Handlers =&gt; { Char  =&gt; \\&amp;handle_char },\n);\n\nmy @indent = (0);\n\n$parser-&gt;parse(*DATA);\n\nsub indent {\n    '    ' x $#indent;\n}\n\nsub case {\n\n    print indent;\n    print \"else \" if $indent[-1] &gt; 0;\n    print \"if ( \";\n\n    push @indent, 0;\n}\n\nsub case_ {\n\n    pop @indent;\n\n    ++$indent[-1];\n\n    print indent, \"}\\n\";\n}\n\nsub otherwise {\n\n    print indent, \"else {\\n\";\n\n    push @indent, 0;\n}\n\nsub otherwise_ {\n\n    pop @indent;\n    print indent, \"}\\n\";\n}\n\nsub handle_char {\n    my ($expat, $string) = @_;\n\n    print $string, \" ) {\\n\" if $string =~ /\\S/;\n}\n\n\n__DATA__\n&lt;root&gt;\n    &lt;switch name=\"...\" displayName=\"...\" id=\"13\"&gt;\n        &lt;case id=\"14\"&gt;\n          &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c1)]]&gt;&lt;/condition&gt;\n        &lt;/case&gt;\n        &lt;otherwise id=\"106\"&gt;\n          &lt;switch name=\"...\" displayName=\"...\" id=\"15\"&gt;\n            &lt;case id=\"16\"&gt;\n              &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c2)]]&gt;&lt;/condition&gt;\n                &lt;switch name=\"...\" displayName=\"...\" id=\"19\"&gt;\n                  &lt;case id=\"20\"&gt;\n                    &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c3) &gt;0)]]&gt;&lt;/condition&gt;\n                  &lt;/case&gt;\n                  &lt;otherwise id=\"106\"&gt;\n                  &lt;/otherwise&gt;\n                &lt;/switch&gt;\n            &lt;/case&gt;\n            &lt;otherwise id=\"107\"&gt;\n                &lt;switch name=\"...\" displayName=\"...\" id=\"33\"&gt;\n                  &lt;case id=\"64\"&gt;\n                    &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c4)]]&gt;&lt;/condition&gt;\n                  &lt;/case&gt;\n                  &lt;otherwise id=\"108\"&gt;\n                  &lt;/otherwise&gt;\n                &lt;/switch&gt;\n            &lt;/otherwise&gt;\n          &lt;/switch&gt;\n        &lt;/otherwise&gt;\n      &lt;/switch&gt;\n&lt;/root&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>if ( (c1) ) {\n}\nelse {\n    if ( (c2) ) {\n        if ( (c3) &gt;0) ) {\n        }\n        else {\n        }\n    }\n    else {\n        if ( (c4) ) {\n        }\n        else {\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6791052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8274bde1f1f2f635a5324509dc3759b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamogawa", "link": "https://stackoverflow.com/users/6791052/kamogawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1473000595, "creation_date": 1472921304, "last_edit_date": 1473000595, "question_id": 39309225, "link": "https://stackoverflow.com/questions/39309225/perl-convert-a-nested-xml-format-to-java-with-recursion", "title": "Perl - Convert a nested XML format to Java with recursion", "body": "\n\n<p>I need to convert a nested XML format as below to Java using Perl:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;invoke name=\"name1\" operation=\"operation1\" displayName=\"Invoke1\" id=\"6\"&gt;\n  &lt;input&gt;\n    &lt;parameter name=\"Value\" variable=\"Value\"/&gt;\n    &lt;parameter name=\"ID\" variable=\"ID\"/&gt;\n  &lt;/input&gt;\n  &lt;output&gt;\n    &lt;parameter name=\"Return\" variable=\"Return\"/&gt;\n  &lt;/output&gt;\n&lt;/invoke&gt;\n&lt;switch name=\"...\" displayName=\"...\" id=\"13\"&gt;\n    &lt;case id=\"14\"&gt;\n        &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c1)]]&gt;&lt;/condition&gt;\n    &lt;/case&gt;\n    &lt;otherwise id=\"106\"&gt;\n        &lt;switch name=\"...\" displayName=\"...\" id=\"15\"&gt;\n            &lt;case id=\"16\"&gt;\n                &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c2)]]&gt;&lt;/condition&gt;\n                &lt;switch name=\"...\" displayName=\"...\" id=\"19\"&gt;\n                    &lt;case id=\"20\"&gt;\n                        &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c3) &gt;0)]]&gt;&lt;/condition&gt;\n                    &lt;/case&gt;\n                    &lt;otherwise id=\"106\"&gt; &lt;/otherwise&gt;\n                &lt;/switch&gt;\n            &lt;/case&gt;\n            &lt;otherwise id=\"107\"&gt;\n                &lt;switch name=\"...\" displayName=\"...\" id=\"33\"&gt;\n                    &lt;case id=\"64\"&gt;\n                        &lt;condition expressionLanguage=\"...\"&gt;&lt;![CDATA[(c4)]]&gt;&lt;/condition&gt;\n                    &lt;/case&gt;\n                    &lt;otherwise id=\"108\"&gt; &lt;/otherwise&gt;\n                &lt;/switch&gt;\n            &lt;/otherwise&gt;\n        &lt;/switch&gt;\n    &lt;/otherwise&gt;\n&lt;/switch&gt;\n</code></pre>\n\n<p>The expected output as the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>&lt;invoke name=\"name1\" operation=\"operation1\" displayName=\"Invoke1\" id=\"6\"&gt;\n  &lt;input&gt;\n    &lt;parameter name=\"Value\" variable=\"Value\"/&gt;\n    &lt;parameter name=\"ID\" variable=\"ID\"/&gt;\n  &lt;/input&gt;\n  &lt;output&gt;\n    &lt;parameter name=\"Return\" variable=\"Return\"/&gt;\n  &lt;/output&gt;\n&lt;/invoke&gt;\nif(c1) {\n}else{\n    if(c2) {\n        if(c3) {\n        }else{\n        }\n    }else{\n        if(c4) {\n        }else{\n        }\n    }\n}\n</code></pre>\n\n<p>I think that it may be implemented using 4 steps:</p>\n\n<ol>\n<li>Read XML file -> get the first switch1 block -> convert to if--else</li>\n<li>Get case1 block and otherwise1 block of switch1 block</li>\n<li>Implement recursion from step1 for case1 block and otherwise1 block</li>\n<li>Read the rest of XML file and do the same from s1</li>\n</ol>\n\n<p>It's actually difficult for me to do recursion in this case. Can some Perl experts help me here ?</p>\n"}, {"tags": ["perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472936987, "post_id": 39308628, "comment_id": 65955522, "body": "<a href=\"https://metacpan.org/pod/distribution/Catalyst-Runtime/lib/Catalyst/RouteMatching.pod\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/Catalyst-Runtime/lib/Catalyst/&zwnj;&#8203;&hellip;</a> talks about the route matching, and says that if there are several actions inside the same controller that match the same path, the one defined last (lowest) in the code will win. It does not talk about several controllers however. It stands to reason that the same is valid, but the order of loading the Components might be random, thus you see a fluctuation."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472937041, "post_id": 39308628, "comment_id": 65955535, "body": "I suggest to ask this in #catalyst on irc.perl.org. It will likely get better answers there as the authors of Catalyst do not actively participate here."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1473064529, "creation_date": 1473064529, "answer_id": 39326663, "question_id": 39308628, "link": "https://stackoverflow.com/questions/39308628/dealing-with-ambiguous-controller-actions-in-perl-catalyst/39326663#39326663", "title": "Dealing with ambiguous controller actions in Perl Catalyst", "body": "<p>I'm not sure if there is an offical Catalyst way of doing this, but you could try the following, gently poached from a <a href=\"http://www.gossamer-threads.com/lists/catalyst/users/29879\" rel=\"nofollow\">Catalyst question on how to list all actions in an app</a></p>\n\n<p>Try adding something like the following to your <code>App.pm</code> just right after the <code>__PACKAGE__-&gt;setup()</code> line:</p>\n\n<pre><code># Start the application\n__PACKAGE__-&gt;setup();\n\n# Get all known actions and store the action name and source controller\nmy $controller_map = {};\nmy @controllers = map { __PACKAGE__-&gt;controller($_) } __PACKAGE__-&gt;controllers;\nfor my $controller ( @controllers ) {\n    my $controller_name = ref $controller;\n    my @actions = $controller-&gt;get_action_methods;\n    for my $action ( @actions ) {\n        my $name = $action-&gt;name;\n        next if $name =~ m|^_|; # _DISPATCH, _BEGIN, _AUTO, _ACTION, _END\n        next if $name eq 'auto';\n        next if $name eq 'begin';\n        next if $name eq 'index';\n        $controller_map-&gt;{ $name }-&gt;{ $controller_name }++;\n    }\n}\n\n# Show all action names that come from more than 1 controller\nmy $bad_action_names = 0;\nfor my $action ( sort keys %$controller_map ) {\n    my @original_controllers = keys %{ $controller_map-&gt;{ $action } };\n    if ( scalar @original_controllers &gt; 1 ) {\n        $bad_action_names++;\n        print \"Bad Action Names for '$action' : \" . join(' ', @original_controllers) . \"\\n\";\n    }\n}\n\ndie \"Unable to continue!!!\" if $bad_action_names;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 1112389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d57fabd338c16abef8bc776b15ef1b0?s=128&d=identicon&r=PG", "display_name": "ntwk", "link": "https://stackoverflow.com/users/1112389/ntwk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1473064529, "creation_date": 1472917237, "question_id": 39308628, "link": "https://stackoverflow.com/questions/39308628/dealing-with-ambiguous-controller-actions-in-perl-catalyst", "title": "Dealing with ambiguous controller actions in Perl Catalyst", "body": "<h2>The problem</h2>\n\n<p>I have been learning the Catalyst web framework and I am trying to understand how Catalyst dispatches URLs to application \"actions\".</p>\n\n<p>It seems I can write my application with ambiguous URL dispatching rules:</p>\n\n<pre><code>package Myapp::Controller::Root {\n    __PACKAGE__-&gt;config(namespace =&gt; '');\n    ....\n    sub foo :Local {\n        my ( $self, $c ) = @_;\n\n        $c-&gt;response-&gt;body('foo action in Root controller.');\n    }\n}\n\npackage Myapp::Controller::Foo {\n    ....\n    sub default :Path {\n        my ( $self, $c ) = @_;\n\n        $c-&gt;response-&gt;body('default action in Foo controller.');\n    }\n}\n</code></pre>\n\n<p>These two actions are defined in different packages but both are associated with the '/foo/...' path.  Looking at the above code, it's not clear which action will take precedence.  That decision seems to be more or less made at random by Catalyst when the application is launched.  Sometimes it is the former action, sometimes it's the latter.  </p>\n\n<p>Note that the above code is a contrived example and I probably wouldn't intentionally create two different actions that map to the same path.  Nonetheless, I don't know how to predict which action will ultimately get called just by looking at the code.</p>\n\n<h2>The question</h2>\n\n<p>Is there a way to instruct Catalyst to disallow this kind of ambiguity or at least provide a warning?</p>\n"}, {"tags": ["linux", "bash", "perl", "grep"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1472915570, "post_id": 39308395, "comment_id": 65949260, "body": "Why Perl? Why not just use grep?"}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1472916122, "post_id": 39308395, "comment_id": 65949436, "body": "Trying to automate the process. I want to be able to type something like perl grep.pl &quot;google.com&quot; and have everything work behind the scenes."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1472916600, "post_id": 39308492, "comment_id": 65949569, "body": "Thanks very much redneb. Is there a way to make &quot;google.com&quot; a variable based on input prior to grepping?"}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1472917866, "post_id": 39308492, "comment_id": 65949955, "body": "I meant a variable assigned from keyboard input. I tried the following but it seems as though its trying to read the string entered as the file name:        #!/bin/bash  read -p &quot;Enter fixed string to search: &quot; string  grep -Frl &quot;$string&quot; | \\ \twhile IFS = read -r x; do \t\ttcpdump -r &quot;$x&quot; grep -F &quot;$string&quot; -C 10 \tdone"}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "reply_to_user": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1472918064, "post_id": 39308492, "comment_id": 65950012, "body": "You can say <code>s=&quot;$1&quot;</code> at the beginning of the script. You can then pass the string as a command line argument to script where you saved the above code. If you want to read it from the stdin, replace the first line with <code>IFS= read -r s</code>."}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1472923664, "post_id": 39308492, "comment_id": 65951752, "body": "Thanks much, redneb."}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1472925262, "post_id": 39308492, "comment_id": 65952265, "body": "Done. Thanks again."}], "tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": true, "score": 2, "last_activity_date": 1472916649, "last_edit_date": 1472916649, "creation_date": 1472916192, "answer_id": 39308492, "question_id": 39308395, "link": "https://stackoverflow.com/questions/39308395/perl-script-to-grep-directory-for-string-and-print/39308492#39308492", "title": "Perl Script to Grep Directory For String and Print", "body": "<p>Here's some bash code that does that:</p>\n\n<pre><code>s=\"google.com\"\ngrep -Frl \"$s\" | \\\n    while IFS= read -r x; do\n        tcpdump -r \"$x\" | grep -F \"$s\" -C10\n    done\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 1, "creation_date": 1472923638, "post_id": 39308642, "comment_id": 65951748, "body": "This is exactly what I needed Ed. Thanks!"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1472917294, "creation_date": 1472917294, "answer_id": 39308642, "question_id": 39308395, "link": "https://stackoverflow.com/questions/39308395/perl-script-to-grep-directory-for-string-and-print/39308642#39308642", "title": "Perl Script to Grep Directory For String and Print", "body": "<p>idk about perl but you can do it easily enough just in shell:</p>\n\n<pre><code>str=\"google.com\"\nfind . -type f -name 'snort.log.*' -exec grep -FlZ \"$str\" {} + |\nxargs -0 -I {} sh -c 'tcpdump -r \"{}\" | grep -F '\"$str\"' -C10'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 39308492, "answer_count": 2, "score": 1, "last_activity_date": 1472918975, "creation_date": 1472915472, "last_edit_date": 1472918975, "question_id": 39308395, "link": "https://stackoverflow.com/questions/39308395/perl-script-to-grep-directory-for-string-and-print", "title": "Perl Script to Grep Directory For String and Print", "body": "<p>I would like to create a perl or bash script that will read keyboard input and assign a variable, perform a fixed string grep recursively within the current directory filled with Snort logs, and then automatically tcpdump the matched files, grep its output, and print the specified lines to the terminal. Does anyone have a good idea of how this should work? </p>\n\n<p>Here is an example of the methodology I want from the script:</p>\n\n<p>step 1: Read keyboard input and assign it to variable named string.</p>\n\n<p>step 2 command: grep -Fr \"$string\"</p>\n\n<p>step 2 output: snort.log.1470609906 matches</p>\n\n<p>step 3 command: tcpdump -r snort.log.1470609906 | grep -F \"$string\" C-10</p>\n\n<p>step 3 output: </p>\n\n<p><a href=\"http://i.stack.imgur.com/yzFjb.jpg\" rel=\"nofollow\">Snort log</a></p>\n"}, {"tags": ["perl", "concurrency", "parallel-processing", "stdin"], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 3, "last_activity_date": 1472911749, "creation_date": 1472911749, "answer_id": 39307830, "question_id": 39307355, "link": "https://stackoverflow.com/questions/39307355/read-stdin-while-waiting-for-remote-data-terminate-when-remote-data-is-download/39307830#39307830", "title": "Read STDIN while waiting for remote data; terminate when remote data is downloaded", "body": "<p>There are a number of ways you can do this.  One of the more obvious ways is to spawn a thread to do the remote work, and, after you read from STDIN, and, assuming you can't find the answer there, join the thread (to ensure it's done) and check there.  The thread would need to do everything you already have in <code>getRemoteBookmarks</code>, as well as erase the \"choose a bookmark\" line (usually printing <code>\"\\r\", ' ' x 60, \"\\r\"</code> will suffice), print out the dumper of the new group, and print out the new \"choose a bookmark\" entry.</p>\n\n<p>There's a bit of extra finnagling required to stop the thread from printing anything out if the choice is already made, sharing variables between threads, etc., but that's the general idea.</p>\n\n<p>Another option is to handle this through event processing.  You'd basically have both the input (using the event handling in <a href=\"https://metacpan.org/pod/Term::ReadLine\" rel=\"nofollow\">Term::ReadLine</a> - see <a href=\"https://metacpan.org/pod/Term::ReadLine::Event\" rel=\"nofollow\">Term::ReadLine::Event</a> for how to do this with various event modules) and your ssh going on at the same time.  What this avoids is some of the thread sharing and such, since everything is happening in the same thread.</p>\n\n<p>Either way, your script is going to be much less simple, and you may really be better off just printing out \"Gathering information, please wait\" at the beginning, gathering all of the options, both local and remote, and then printing out the options.  From a cost/benefit perspective, that is.</p>\n\n<p>Good luck.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1472944516, "creation_date": 1472944516, "answer_id": 39312125, "question_id": 39307355, "link": "https://stackoverflow.com/questions/39307355/read-stdin-while-waiting-for-remote-data-terminate-when-remote-data-is-download/39312125#39312125", "title": "Read STDIN while waiting for remote data; terminate when remote data is downloaded", "body": "<p>Here is a simple example using <a href=\"https://metacpan.org/pod/IPC::Open3\" rel=\"nofollow\"><code>IPC::Open3</code></a> to open a single child process that reads the remote bookmarks. When the child is finished it will store the bookmarks in a file (the alternative would be to use threads, pipes or filehandles to communicate, but I think that would complicate the program slightly). The parent will get a <code>CHLD</code> signal when the child process terminates, this will cause the parent to exit its input loop and read the remote bookmarks from disk. Then the parent reenters the input loop:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse IPC::Open3;\nuse Symbol qw(gensym);\nuse Storable qw(retrieve);\n\nlocal $SIG{CHLD} = sub {\n    die \"\\nBackground process finished..\\n\";\n};\n\nmy $child1 = start_reading_remote_bookmarks(  );\nmy $local_bookmarks = {\n    a =&gt; \"local bookmark A\",\n    b =&gt; \"local bookmark B\",\n    c =&gt; \"local bookmark C\",\n};\nprint Dumper $local_bookmarks;\neval {\n    run_input_loop();\n};\nif ($@) {\n    print \"\\n\";\n    my $remote_bookmarks = retrieve('bookmarks.dat');\n    print Dumper $remote_bookmarks;\n    run_input_loop();\n}\n\nsub run_input_loop {\n    while (1) {\n        print \"Choose a bookmark: \";\n        chomp(my $answer = &lt;STDIN&gt;);\n        say \"You want: $answer\";\n        # process $answer...\n    }\n}\n\nsub start_reading_remote_bookmarks {\n    my $cmd = 'get_bookmarks.pl';\n    my $cherr = gensym;\n    my $pid = open3( my $chin, my $chout, $cherr, $cmd );\n    return { pid =&gt; $pid, kid_in =&gt; $chin, kid_out =&gt; $chout, kid_err =&gt; $cherr };\n}\n</code></pre>\n\n<p>where <code>get_bookmarks.pl</code> is</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Storable qw(store);\n\nsleep 5;\nmy $fn = 'bookmarks.dat';\nstore { d =&gt; \"remote bookmark D\", e =&gt; \"remote bookmark E\" }, $fn;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6250812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb991df4bc026bd841c1c8a7c56ada30?s=128&d=identicon&r=PG&f=1", "display_name": "alan", "link": "https://stackoverflow.com/users/6250812/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1472944516, "creation_date": 1472908759, "question_id": 39307355, "link": "https://stackoverflow.com/questions/39307355/read-stdin-while-waiting-for-remote-data-terminate-when-remote-data-is-download", "title": "Read STDIN while waiting for remote data; terminate when remote data is downloaded", "body": "<p>I have a simple perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse Data::Dumper;\nuse utf8;\nbinmode( STDOUT, \":utf8\" );\n$|++;\n\nmy $localBookmarks = {\n    a =&gt; \"local bookmark A\",\n    b =&gt; \"local bookmark B\",\n    c =&gt; \"local bookmark C\",\n};\nprint Dumper $localBookmarks;\n\nmy $remoteBookmarks = getRemoteBookmarks();\nprint Dumper $remoteBookmarks;\n\nprint \"choose a bookmark: \";\nmy $answer = &lt;STDIN&gt;;\nprint \"You want: $answer\";\n# process $answer...\n\nsub getRemoteBookmarks\n{\n    # Net::SSH::Perl connection; exec command; parse it; return it\n    # lets just simulate this\n    sleep( 5 );\n    return { d =&gt; \"remote bookmark D\", e =&gt; \"remote bookmark E\" };\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>$ perl test.pl\n$VAR1 = {\n          'b' =&gt; 'local bookmark B',\n          'a' =&gt; 'local bookmark A',\n          'c' =&gt; 'local bookmark C'\n        };\n$VAR1 = {\n          'd' =&gt; 'remote bookmark D',\n          'e' =&gt; 'remote bookmark E'\n        };\nchoose a bookmark:\n</code></pre>\n\n<p>Of course after <code>print Dumper $localBookmarks</code> there is a silence for 5 seconds. </p>\n\n<p>Is it possible to read <code>&lt;STDIN&gt;</code> right after printing \"local bookmarks\", while waiting for \"remote bookmarks\"? In case I know that local bookmarks is all I need this time (and I dont have to wait few seconds for the download). Otherwise, when \"remote bookmarks\" are downloaded, current <code>&lt;STDIN&gt;</code> should be terminated, downloaded bookmarks should be printed, and - again - at the bottom there should be <code>&lt;STDIN&gt;</code>. Is this possible with perl?</p>\n"}, {"tags": ["javascript", "jquery", "ajax", "perl", "template-toolkit"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472877462, "post_id": 39302768, "comment_id": 65940368, "body": "What&#39;s the difference between the working HTML and the generated HTML? What&#39;s the difference in the URLs between the working HTML and the generated HTML?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472893434, "post_id": 39302768, "comment_id": 65943493, "body": "Where is the <code>$</code> for jquery in that last snippet?"}, {"owner": {"reputation": 151, "user_id": 6789640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-sd-gziWy5zY/AAAAAAAAAAI/AAAAAAAAAA4/VvBp8ca_v-E/photo.jpg?sz=128", "display_name": "Jeffrey Tackett", "link": "https://stackoverflow.com/users/6789640/jeffrey-tackett"}, "edited": false, "score": 0, "creation_date": 1472906393, "post_id": 39302768, "comment_id": 65946759, "body": "There is literally no difference in the two HTML files, except that one is a .tmpl file called by Template Toolkit, and the other is a .html file called directly by the browser without going through TT.  simbabque, I&#39;m sorry I don&#39;t understand the question.  The last snippet is an error message generated by the browser console.  It has picked that line from the javascript in the code above as being the problem.  However, it works just fine in that exact form when called outside of a TT generated HTML page."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472909005, "post_id": 39302768, "comment_id": 65947493, "body": "Turn off INTERPOLATE, it treats $ as the beginning of a perl variable name. Also turn off EVAL_PERL, you&#39;re not using any [% PERL %] blocks in your template. In fact, you really shouldn&#39;t be generating JavaScript with templates in the first place; just use a static file and leave the templates for your HTML."}, {"owner": {"reputation": 151, "user_id": 6789640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-sd-gziWy5zY/AAAAAAAAAAI/AAAAAAAAAA4/VvBp8ca_v-E/photo.jpg?sz=128", "display_name": "Jeffrey Tackett", "link": "https://stackoverflow.com/users/6789640/jeffrey-tackett"}, "edited": false, "score": 0, "creation_date": 1472909373, "post_id": 39302768, "comment_id": 65947601, "body": "Wow, it was that simple.  I was using both of those things in a previous project, and copied and pasted that portion into this one to get started.  Didn&#39;t even consider that the interpolation was affecting the Javascript.  Thank you Mr. Manifestation of Borat.  You have been my savior."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472913703, "post_id": 39302768, "comment_id": 65948709, "body": "@JeffreyTackett: I hope you have learned from this to write only code that has a function that you can explain. Boilerplate code has a place, but it should never be a &quot;black box&quot; to you."}, {"owner": {"reputation": 151, "user_id": 6789640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-sd-gziWy5zY/AAAAAAAAAAI/AAAAAAAAAA4/VvBp8ca_v-E/photo.jpg?sz=128", "display_name": "Jeffrey Tackett", "link": "https://stackoverflow.com/users/6789640/jeffrey-tackett"}, "edited": false, "score": 0, "creation_date": 1472918247, "post_id": 39302768, "comment_id": 65950058, "body": "Heh.  I appreciate that Borodin, and your help is definitely much appreciated as well ... truly.  That said, I don&#39;t have the luxury of delaying results until I&#39;ve learned all that I need to learn about another language.  Passable critical thinking skills, some moderate Perl experience, and an unmatched will to search, read, and experiment has allowed me to accomplish the goals required of me over the last month.  Once the urgency subsides, I&#39;ll have to time to finish the Udemy classes I started 3 weeks ago.  Thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6789640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-sd-gziWy5zY/AAAAAAAAAAI/AAAAAAAAAA4/VvBp8ca_v-E/photo.jpg?sz=128", "display_name": "Jeffrey Tackett", "link": "https://stackoverflow.com/users/6789640/jeffrey-tackett"}, "edited": false, "score": 0, "creation_date": 1472917915, "post_id": 39308106, "comment_id": 65949969, "body": "Many thanks.  I am sure the reason I&#39;m not seeing the error you spoke of is due to some of the processing stuff I left out for the sake of simplicity.  I appreciate you going above and beyond to assist.  Very cool.  Everything works great without INTERPOLATE turned on, and per Suit&#39;s recommendation above, I moved the javascript to an external file.  Some minor tweaks from the above information, and I believe I&#39;m good to go. Thank you again.  Much appreciated."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472914394, "last_edit_date": 1592644375, "creation_date": 1472913519, "answer_id": 39308106, "question_id": 39302768, "link": "https://stackoverflow.com/questions/39302768/jquery-js-not-referencing-properly-within-perl-template-toolkit-generated-files/39308106#39308106", "title": "jquery.js not referencing properly within Perl Template Toolkit-generated files", "body": "\n<p>The immediate problem is that you have enabled the <code>INTERPOLATE</code> option, which interpolates Perl variables anywhere in the template. That makes the module attempt to replace <code>$(</code> by its value, and destroys the JavaScript syntax</p>\n<p>It's a sloppy way of using templates anyway: you should pass all the values you need in the <code>$vars</code> hash, and extract them from there using <code>[% variable %]</code> template directives. The same applies to the <code>EVAL_PERL</code> option, as any complex data manipulation should ordinarily be in the code that calls <code>process</code>. Everything you need to do inside the template is available as a Template directive</p>\n<p>Talking of the <code>$vars</code> hash, you should be getting <code>Not a HASH reference</code> errors, because you are passing to <code>process</code> a reference to the string variable <code>$result</code> instead of a hash containing that value. It's unclear how you want that value to be handled, but the only mention of <code>id</code> in your HTML is the <code>id</code> attribute of the <code>&lt;input&gt;</code> element at the bottom of the HTML, so I've put a directive in their to show you how it all works</p>\n<p>Take a look at this code</p>\n<h3>CGI program</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse CGI;\nuse Template;\n\nmy $cgi    = CGI-&gt;new;\nmy $id     = $cgi-&gt;param('user_text') // 'abc123';\nmy $result = uc $id;\n\nprint $cgi-&gt;header( -charset =&gt; 'utf-8' );\n\nmy $tt = Template-&gt;new( {\n    # INCLUDE_PATH =&gt; '/usr/lib/cgi-bin/ajax_example/:/var/www/html/ajax_example/', \n    POST_CHOMP   =&gt; 1,\n} );\n\n$tt-&gt;process('client.html', { result =&gt; $result } );\n</code></pre>\n<p>I have modified your HTML file like this. I couldn't tell what you wanted to do with the value that the CGI code pulls from the <code>user_text</code> parameter, so I put it into a <code>value</code> attribute for the first input field</p>\n<h3>Template file</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n    &lt;head&gt;\n\n        &lt;title&gt;AJAX Example&lt;/title&gt;\n        &lt;meta charset=&quot;UTF-8&quot; /&gt;\n\n        &lt;script src=&quot;http://domainname/ajax_example/jquery.js&quot; /&gt;\n\n        &lt;script type=&quot;text/javascript&quot;&gt;\n\n            function myTimer() {\n\n                var typingTimer;\n                var doneTypingInterval = 2000;\n\n                $(&quot;#user_text&quot;).keyup( function() {\n\n                   clearTimeout(typingTimer);\n\n                   if ( $('#user_text' ).val() ) {\n                       typingTimer = setTimeout(updateText, doneTypingInterval);\n                   }\n                } );\n\n                function updateText() {\n\n                    var current_text = document.getElementById('user_text').value;\n                    var http = new XMLHttpRequest();\n\n                    http.onreadystatechange = function() {\n\n                        if ( http.readyState == 4 &amp;&amp; http.status == 200 ) {\n                            var response = http.responseText;\n                            document.getElementById('server_response').value = response;\n                        }\n                    };\n\n                    http.open(&quot;GET&quot;,\n                        &quot;http://domainname/ajax_example/cgi-bin/server.pl?user_text=&quot; + current_text,\n                        true );\n\n                    http.send();\n                }\n            }\n\n        &lt;/script&gt;\n\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n        &lt;div&gt;Input Text:\n            &lt;input type=&quot;text&quot; id=&quot;user_text&quot; name=&quot;user_text&quot; value=&quot;[% result %]&quot; onkeyup=&quot;myTimer()&quot;/&gt;\n        &lt;/div&gt;\n        &lt;br/&gt;\n\n        &lt;div&gt;Server Resp.:\n            &lt;textarea id=&quot;server_response&quot;  name=&quot;server_response&quot;/&gt;\n        &lt;/div&gt;\n        &lt;br/&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>And here's the resulting output from the CGI code. As you can see, the <code>$(&quot;#user_text&quot;).keyup</code> call remains intact, and the value from the CGI code\u2014the <code>result</code> element passed in the <code>$vars</code> hash\u2014has been substituted into the <code>value</code> attribute of the text <code>input</code> element</p>\n<p>I hope this helps you to progress and get your application working</p>\n<h3>output</h3>\n<pre class=\"lang-html prettyprint-override\"><code>Content-Type: text/html; charset=utf-8\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n    &lt;head&gt;\n\n        &lt;title&gt;AJAX Example&lt;/title&gt;\n        &lt;meta charset=&quot;UTF-8&quot; /&gt;\n\n        &lt;script src=&quot;http://domainname/ajax_example/jquery.js&quot; /&gt;\n\n        &lt;script type=&quot;text/javascript&quot;&gt;\n\n            function myTimer() {\n\n                var typingTimer;\n                var doneTypingInterval = 2000;\n\n                $(&quot;#user_text&quot;).keyup( function() {\n\n                   clearTimeout(typingTimer);\n\n                   if ( $('#user_text' ).val() ) {\n                       typingTimer = setTimeout(updateText, doneTypingInterval);\n                   }\n                } );\n\n                function updateText() {\n\n                    var current_text = document.getElementById('user_text').value;\n                    var http = new XMLHttpRequest();\n\n                    http.onreadystatechange = function() {\n\n                        if ( http.readyState == 4 &amp;&amp; http.status == 200 ) {\n                            var response = http.responseText;\n                            document.getElementById('server_response').value = response;\n                        }\n                    };\n\n                    http.open(&quot;GET&quot;,\n                        &quot;http://domainname/ajax_example/cgi-bin/server.pl?user_text=&quot; + current_text,\n                        true );\n\n                    http.send();\n                }\n            }\n\n        &lt;/script&gt;\n\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n        &lt;div&gt;Input Text:\n            &lt;input type=&quot;text&quot; id=&quot;user_text&quot; name=&quot;user_text&quot; value=&quot;ABC123&quot; onkeyup=&quot;myTimer()&quot;/&gt;\n        &lt;/div&gt;\n        &lt;br/&gt;\n\n        &lt;div&gt;Server Resp.:\n            &lt;textarea id=&quot;server_response&quot;  name=&quot;server_response&quot;/&gt;\n        &lt;/div&gt;\n        &lt;br/&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 6789640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-sd-gziWy5zY/AAAAAAAAAAI/AAAAAAAAAA4/VvBp8ca_v-E/photo.jpg?sz=128", "display_name": "Jeffrey Tackett", "link": "https://stackoverflow.com/users/6789640/jeffrey-tackett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 39308106, "answer_count": 1, "score": 2, "last_activity_date": 1472914394, "creation_date": 1472870589, "last_edit_date": 1592644375, "question_id": 39302768, "link": "https://stackoverflow.com/questions/39302768/jquery-js-not-referencing-properly-within-perl-template-toolkit-generated-files", "title": "jquery.js not referencing properly within Perl Template Toolkit-generated files", "body": "<p>I have an extremely simple little JavaScript/Perl CGI example that I've used to get started with a larger project. When I run it as <code>client.html</code> and <code>server.pl</code>, it works flawlessly. However, when I change the <code>client.html</code> to <code>client.tmpl</code>, and call it from the same <code>server.pl</code> script using Template Toolkit, it can't seem to find jQuery functions.</p>\n<p>I have even created a <code>master.tmpl</code> file, and used <code>[% INCLUDE client.html %]</code> inside it, and it fails. The browser console verifies that the path to <code>jquery.js</code> is correct, but it's like it fails to load it when it's inside a template.</p>\n<p>The following is the HTML file that I'm essentially trying to turn into a <code>.tmpl</code> file (formatting messed up, first time here, sorry):</p>\n<h3>client.html</h3>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;AJAX Example&lt;/title&gt;\n        &lt;meta charset=&quot;UTF-8&quot; /&gt;\n        &lt;script src=&quot;http://domainname/ajax_example/jquery.js&quot;&gt;&lt;/script&gt;\n\n        &lt;script type=&quot;text/javascript&quot;&gt;\n        function myTimer() {\n            var typingTimer;\n            var doneTypingInterval = 2000;\n\n            $(&quot;#user_text&quot;).keyup( function() {\n\n               clearTimeout(typingTimer);\n\n               if ( $('#user_text' ).val()) {\n                   typingTimer = setTimeout(updateText, doneTypingInterval);\n               }\n            });\n\n            function updateText() {\n\n                var current_text = document.getElementById('user_text').value;\n                var http = new XMLHttpRequest();\n\n                http.onreadystatechange = function() {\n\n                    if ( http.readyState == 4 &amp;&amp; http.status == 200 ) {\n                        var response = http.responseText;\n                        document.getElementById('server_response').value = response;\n                    }\n                };\n\n                http.open(&quot;GET&quot;, &quot;http://domainname/ajax_example/cgi-bin/server.pl?user_text=&quot; + current_text , true );\n\n                http.send();\n            }\n        }\n\n        &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;div&gt;Input Text: &lt;input type=&quot;text&quot; id=&quot;user_text&quot; name=&quot;user_text&quot;  onkeyup=&quot;myTimer()&quot;/&gt;&lt;/div&gt;&lt;br/&gt;\n        &lt;div&gt;Server Resp.: &lt;textarea id=&quot;server_response&quot;  name=&quot;server_response&quot;&gt; &lt;/textarea&gt;&lt;/div&gt;\n        &lt;br/&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The <code>server.pl</code> that works:</p>\n<h3>server.pl</h3>\n<pre><code>$cgi = CGI-&gt;new;\n$id = $cgi-&gt;param('user_text');\n$result = uc($id);\nprint $cgi-&gt;header();\nprint $result;\n</code></pre>\n<p>The <code>server.pl</code> that doesn't work:</p>\n<h3>server.pl</h3>\n<pre><code>$cgi = CGI-&gt;new;\n$id = $cgi-&gt;param('user_text');\n**returned from result calculation sub** $result = uc($id);\n\nmy $config = {\n    EVAL_PERL    =&gt; 1,\n    POST_CHOMP   =&gt; 1,\n    INTERPOLATE =&gt; 1,\n    INCLUDE_PATH =&gt; '/usr/lib/cgi-bin/ajax_example/:/var/www/html/ajax_example/',  \n};\n\n    print $cgi-&gt;header( -charset=&gt;'utf-8' );\n    my $tt = Template-&gt;new($config);\n    $tt-&gt;process('client.tmpl', \\$result);\n}\n</code></pre>\n<p>Keep in mind, I am trying my best to summarize the code, but the Perl and JavaScript work just fine, unless it's being used through TT.  The error is:</p>\n<pre><code>#user_text.keyup is not a function:\n(&quot;#user_text&quot;).keyup(function(){\n</code></pre>\n<p>Same error I would get if I put in a bad path to <code>jquery.js</code>.  The path is good though, without a doubt.</p>\n<p>Thank you for any recommendations anyone can provide.</p>\n"}, {"tags": ["php", "perl", "str-replace"], "comments": [{"owner": {"reputation": 64787, "user_id": 892493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxAIF.png?s=128&g=1", "display_name": "drew010", "link": "https://stackoverflow.com/users/892493/drew010"}, "edited": false, "score": 1, "creation_date": 1472855218, "post_id": 39301347, "comment_id": 65936834, "body": "The <code>$lol</code> parameter passed to your callback by PHP&#39;s ob functions is not what you think it is.  It&#39;s a bitmask, not the string you defined above.  That&#39;s why you&#39;re seeing 9, as 9 is the combination of the flags passed to the function."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472855884, "post_id": 39301347, "comment_id": 65937007, "body": "I&#39;m sorry, but ewww; that&#39;s such a bad representation of Perl I shuddered. That&#39;s not quite how we do things ;)"}, {"owner": {"reputation": 45, "user_id": 6778441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1384c459b04ac17e3f02844e91f3ad98?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6778441/david"}, "reply_to_user": {"reputation": 64787, "user_id": 892493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxAIF.png?s=128&g=1", "display_name": "drew010", "link": "https://stackoverflow.com/users/892493/drew010"}, "edited": false, "score": 0, "creation_date": 1472855987, "post_id": 39301347, "comment_id": 65937028, "body": "@drew010 - thanks, stevieb lol, I feel dirty enough just replacing &quot;EOF&quot; with &quot;HTML&quot;,  what could I do better?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472856395, "post_id": 39301347, "comment_id": 65937117, "body": "it&#39;s definitely valid, that&#39;s for sure. You get a pass because I can tell you&#39;re just testing things out. Out of curiosity, what&#39;s your end goal for what you&#39;re doing? Is this a conceptual test of a real world problem, or are you just playing around. I&#39;m legitimately curious."}, {"owner": {"reputation": 45, "user_id": 6778441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1384c459b04ac17e3f02844e91f3ad98?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6778441/david"}, "edited": false, "score": 0, "creation_date": 1472856908, "post_id": 39301347, "comment_id": 65937229, "body": "Kind of trying to make a site blog thing, using sqlite as the database. I&#39;ve been finding PHP a bit clunky on HTML rendering and reading other replies it&#39;s tricky to do so. This is just an idea to test a shoutbox type thing. So if I can take a users post data push that in to a varible, create an pre-defined temple and then just raw output the code. (&quot;MSG&quot; $comment&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6778441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1384c459b04ac17e3f02844e91f3ad98?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6778441/david"}, "edited": false, "score": 0, "creation_date": 1472857167, "post_id": 39301536, "comment_id": 65937295, "body": "globals are fun, and now it just works. Black Magiic. Thanks!"}], "tags": [], "owner": {"reputation": 1383, "user_id": 5578714, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/mufAl.png?s=128&g=1", "display_name": "David White", "link": "https://stackoverflow.com/users/5578714/david-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1472856091, "creation_date": 1472856091, "answer_id": 39301536, "question_id": 39301347, "link": "https://stackoverflow.com/questions/39301347/php-perl-experimenting-with-syntax-9/39301536#39301536", "title": "php / perl Experimenting with syntax &quot;9&quot;?", "body": "<p><code>ob_start</code> is not expecting incoming variables like <code>$foo</code> .  As drew010 indicated, the format for your callback must be:</p>\n\n<pre><code>string handler ( string $buffer [, int $phase ] )\n</code></pre>\n\n<p>You can work around it in a couple of ways.  For example:</p>\n\n<pre><code>ob_start(function($buffer) use ($lol) {\n  return (str_replace(\"MSG\", \"$lol\", $buffer));\n});\n</code></pre>\n\n<p>or if you don't mind global variables:</p>\n\n<pre><code>function callback($buffer)\n{\n  global $lol;\n  return (str_replace(\"MSG\", \"$lol\", $buffer));\n}\nob_start(\"callback\")\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6778441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1384c459b04ac17e3f02844e91f3ad98?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6778441/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 39301536, "answer_count": 1, "score": 0, "last_activity_date": 1472856091, "creation_date": 1472854519, "question_id": 39301347, "link": "https://stackoverflow.com/questions/39301347/php-perl-experimenting-with-syntax-9", "title": "php / perl Experimenting with syntax &quot;9&quot;?", "body": "<p>I'm currently just toying with PHP and it's syntax. But I am getting an random result.</p>\n\n<p>My idea is to use perl to generate HTML and then replace certian keywords with PHP define. However playing with this, this is my idea for now</p>\n\n<p>dino.php</p>\n\n<pre><code>&lt;?php\n $lol = \"Seriously, so I can enter text here from DB and stuff...\";\nfunction callback($buffer,$lol)\n\n{\n  return (str_replace(\"MSG\", \"$lol\", $buffer));\n}\n\nob_start(\"callback\");\n\n$html = shell_exec(\"/usr/bin/perl /fox/perl/simple.pl 2&gt;&amp;1\");\nprint ($html);\n\n$css = shell_exec(\"/usr/bin/perl /fox/perl/css.pl 2&gt;&amp;1\");\nprint ($css);  \n\n\nob_end_flush();\n?&gt;\n</code></pre>\n\n<p>simple.pl</p>\n\n<pre><code>#!/usr/local/bin/perl\nprint &lt;&lt;HTML;\n&lt;table width=\"auto\" border=\"1\" class=\"center\" id=\"container\" cellspacing=\"10\"&gt;\n&lt;td id=\"main_content\" width=\"auto\" &gt;&lt;b&gt;Baa! &lt;/b&gt;&lt;br /&gt;\n    Well? what you doing here.. Baaa &lt;br /&gt;\n     MSG\n&lt;br /&gt;\n\n&lt;/td&gt;\n\n&lt;br /&gt;\n&lt;/table&gt;\nHTML\n</code></pre>\n\n<p>Now, the page renders perfectly, however where the string <strong>MSG</strong> exists, I get a result of <strong>9</strong></p>\n\n<pre><code>Baa!\nWell? what you doing here.. Baaa\n9 \n</code></pre>\n\n<p>Curious to what's causing nine to appear, I'm assuming i'm counting some sort of value but not sure what value and if I am, why <strong>9</strong>? Is there another syntax I should be using to do such?</p>\n\n<p>If I remove the declaration with a string (\"MSG\", \"lol\", $buffer) it behaves as it should. Replacing MSG with lol. </p>\n\n<p>thxs.</p>\n"}, {"tags": ["perl", "web-scraping"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472852852, "post_id": 39301062, "comment_id": 65936139, "body": "This page does not open in my browser. Does it open in yours? If not, did you expect that WWW::Mechanize could open a page that a browser can&#39;t?"}, {"owner": {"reputation": 192, "user_id": 3864153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmgeN.jpg?s=128&g=1", "display_name": "anurag", "link": "https://stackoverflow.com/users/3864153/anurag"}, "reply_to_user": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472853265, "post_id": 39301062, "comment_id": 65936264, "body": "Dude it is opening in my browser. It might using some cookies of my browser as i am logged in. BTW thanks for your response and down vote."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472853454, "post_id": 39301062, "comment_id": 65936307, "body": "Ok, so do you have cookies setup with WWW::Mechanize? Also, you might have to spoof the <code>User-Agent</code> header."}, {"owner": {"reputation": 192, "user_id": 3864153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmgeN.jpg?s=128&g=1", "display_name": "anurag", "link": "https://stackoverflow.com/users/3864153/anurag"}, "reply_to_user": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472853774, "post_id": 39301062, "comment_id": 65936396, "body": "yes, I did that but that&#39;s too not working."}, {"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 0, "creation_date": 1472854109, "post_id": 39301062, "comment_id": 65936489, "body": "Does the page work correctly in your browser if you disable javascript? Also, it might be related to the <code>Referer</code> header. I think <code>WWW::Mechanize</code> does send that header by default. So make sure that you haven&#39;t disabled it for some reason."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472860591, "post_id": 39301062, "comment_id": 65938016, "body": "You didn&#39;t show a request that worked -- following the link you provided in a browser also gives 403 -- and you didn&#39;t show how you tried to recreate that request."}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 3864153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmgeN.jpg?s=128&g=1", "display_name": "anurag", "link": "https://stackoverflow.com/users/3864153/anurag"}, "is_accepted": true, "score": 0, "last_activity_date": 1472873420, "creation_date": 1472873420, "answer_id": 39302965, "question_id": 39301062, "link": "https://stackoverflow.com/questions/39301062/wwwmechanize-returning-forbidden-url-error/39302965#39302965", "title": "WWW::Mechanize returning forbidden url error", "body": "<p>Just got the solution. I was doing t wrong.\nWhat I was doing is to submit form on this page while the form is at the home page.\nNow i am submitting the form on home page and then using mech->get for this UR.\nIts working. Thanks for all your responce.</p>\n"}], "owner": {"reputation": 192, "user_id": 3864153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmgeN.jpg?s=128&g=1", "display_name": "anurag", "link": "https://stackoverflow.com/users/3864153/anurag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 39302965, "answer_count": 1, "score": -2, "last_activity_date": 1472873420, "creation_date": 1472852454, "last_edit_date": 1472871635, "question_id": 39301062, "link": "https://stackoverflow.com/questions/39301062/wwwmechanize-returning-forbidden-url-error", "title": "WWW::Mechanize returning forbidden url error", "body": "<p>This is the URL \n<a href=\"https://trade.4over.com/orders/ajax/product_run_size.php?id_product=599983\" rel=\"nofollow\">https://trade.4over.com/orders/ajax/product_run_size.php?id_product=599983</a>\nI am trying to store its data using mechanize. It is returning forbidden error and when i am hitting it in browser it is giving response.\nI am using WWW::Mechanize module.\nHere is the code that I am using </p>\n\n<pre><code>my $mech = new WWW::Mechanize;\n    $mech-&gt;add_header( 'User-agent' =&gt; 'Mozilla/5.0 (Windows; U; Windows NT 6.1; nl; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13');\n        $mech -&gt; cookie_jar(HTTP::Cookies-&gt;new());\n        $mech-&gt;get($url);\n        my $result = $mech-&gt;submit_form(\n        form_number =&gt; 2,\n        fields       =&gt;\n        {\n            username  =&gt; 'username', # Name of the input field and value\n            password =&gt; 'password',\n        },\n        button    =&gt; 'log_in' # Name of the submit button\n        ); \n        my $content = encode 'utf8',$mech-&gt;decoded_content;\n        return $content;\n</code></pre>\n"}, {"tags": ["java", "perl", "rabbitmq", "message-queue", "mom"], "answers": [{"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": true, "score": 1, "last_activity_date": 1472887273, "creation_date": 1472887273, "answer_id": 39304358, "question_id": 39299381, "link": "https://stackoverflow.com/questions/39299381/rabbitmq-and-application-decoupling/39304358#39304358", "title": "RabbitMQ and Application Decoupling", "body": "<p>Yes, you can do it that way. If it's not a hard work, I'll include the database load on the Perl step. This probably avoids to handle an intermediate file, but I don't know if it's a viable task on your project.</p>\n\n<p>In order to use RabbitMQ, I'll recommend you the <a href=\"https://metacpan.org/pod/AnyEvent::RabbitMQ\" rel=\"nofollow\">AnyEvent::RabbitMQ</a> CPAN module. As the documentation establishes, You can use AnyEvent::RabbitMQ to:</p>\n\n<ul>\n<li>Declare and delete exchanges</li>\n<li>Declare, delete, bind and unbind queues</li>\n<li>Set QoS and confirm mode</li>\n<li>Publish, consume, get, ack, recover and reject messages</li>\n<li>Select, commit and rollback transactions</li>\n</ul>\n"}], "owner": {"reputation": 263, "user_id": 1549605, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1e6f158feee0e197310c7f0e2f64fca?s=128&d=identicon&r=PG", "display_name": "user1549605", "link": "https://stackoverflow.com/users/1549605/user1549605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 39304358, "answer_count": 1, "score": 1, "last_activity_date": 1472887273, "creation_date": 1472843865, "last_edit_date": 1472850693, "question_id": 39299381, "link": "https://stackoverflow.com/questions/39299381/rabbitmq-and-application-decoupling", "title": "RabbitMQ and Application Decoupling", "body": "<p>I need to setup RabbitMQ in an attempt to redesign our architecture using asynchronous messaging.</p>\n\n<p><strong>Existing Application Flow:</strong></p>\n\n<ul>\n<li>JEE web application (via browser) creates a new thread. </li>\n<li>This thread creates a new OS process to invoke a Perl script to do some processing. </li>\n<li>Perl script writes its output in a file and the control comes back to the thread. </li>\n<li>The thread then reads the output file and loads the results to the database.</li>\n<li>The control passes to the servlet which displays the result to the UI.</li>\n</ul>\n\n<p>All these are synchronous and time consuming and we need to convert this to asynchronous messaging communication.</p>\n\n<p>Now, I am planning to break this down to the following different components but not sure if this would work with RabbitMQ:</p>\n\n<p><strong>Application Breakdown:</strong></p>\n\n<ul>\n<li>JEE Web Application which is the Producer for RabbitMQ</li>\n<li>Separate the Perl Script in to its own application that supports RabbitMQ communication. This Perl client will consume the message, process it and places a new message in RabbitMQ for the next step</li>\n<li>Separate the output file to database loader into its own Java application that suppors RabbitMQ communication. This would consume the message from the queue corresponding to the Perl client's message from the previous step.</li>\n</ul>\n\n<p>This way, the output would be available in the database and the asynchronous flow would be completed.</p>\n\n<ol>\n<li>Is is possible to separate the applications this way compatible to RabbitMQ?</li>\n<li>Are there any better ways to do this?</li>\n<li>Please suggest some framework components for RabbitMQ and Perl</li>\n</ol>\n\n<p>Appreciate your inputs with this.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 1, "creation_date": 1472836163, "post_id": 39297417, "comment_id": 65928970, "body": "See <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">File test operators</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": true, "score": 8, "last_activity_date": 1472847570, "last_edit_date": 1472847570, "creation_date": 1472835615, "answer_id": 39297476, "question_id": 39297417, "link": "https://stackoverflow.com/questions/39297417/perl-magic-symbols-w-r-and/39297476#39297476", "title": "perl magic symbols -w -r and _", "body": "<p><a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"noreferrer\">From</a>:</p>\n\n<pre><code>-r  File is readable by effective uid/gid.\n-w  File is writable by effective uid/gid.\n</code></pre>\n\n<p>So <code>-r</code> and <code>-w</code> test if the file is readable. The underscore is a special handle that is used to ask perl to return information about the file specified in the most recent file test, which is <code>-d $dir_path</code> in this case.</p>\n\n<p>So your code tests whether <code>$dir_path</code> is a directory for which we have read &amp; write permissions.</p>\n"}], "owner": {"reputation": 497, "user_id": 3384373, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/41328490fc7a1482e26b5e2561384ad3?s=128&d=identicon&r=PG&f=1", "display_name": "Ameyj", "link": "https://stackoverflow.com/users/3384373/ameyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 39297476, "answer_count": 1, "score": 4, "last_activity_date": 1472847570, "creation_date": 1472835358, "question_id": 39297417, "link": "https://stackoverflow.com/questions/39297417/perl-magic-symbols-w-r-and", "title": "perl magic symbols -w -r and _", "body": "<p>What does this mean in perl ?</p>\n\n<pre><code>my $dirPath = \"/some/dir\"\nif (-d $dir_path &amp;&amp; -r _ &amp;&amp; -w _ )\n{\n\n}\n</code></pre>\n\n<p>I know what -d does but what about -w and -r and _ ? </p>\n"}, {"tags": ["windows", "perl", "mingw"], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": 3, "last_activity_date": 1531470117, "creation_date": 1531470117, "answer_id": 51320748, "question_id": 39296368, "link": "https://stackoverflow.com/questions/39296368/how-to-install-perl-5-10-from-mingw-installation-manager/51320748#51320748", "title": "How to install perl 5.10 from MinGW installation manager?", "body": "<p>There are a couple of things you could try:</p>\n\n<p>Perl-MinGW project, which seems to be an update of perl for MinGW: <a href=\"https://sourceforge.net/projects/perl-mingw/?source=navbar\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/perl-mingw/?source=navbar</a></p>\n\n<p>Or try to use MSYS2, which already uses a newer version of perl: <a href=\"https://www.msys2.org/\" rel=\"nofollow noreferrer\">https://www.msys2.org/</a></p>\n"}], "owner": {"reputation": 2300, "user_id": 2136963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bded0441c9af7ee72d1cf6e5733e0b6c?s=128&d=identicon&r=PG", "display_name": "user2136963", "link": "https://stackoverflow.com/users/2136963/user2136963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3733, "favorite_count": 1, "protected_date": 1518306350, "answer_count": 1, "score": 7, "last_activity_date": 1531470117, "creation_date": 1472831368, "last_edit_date": 1472869286, "question_id": 39296368, "link": "https://stackoverflow.com/questions/39296368/how-to-install-perl-5-10-from-mingw-installation-manager", "title": "How to install perl 5.10 from MinGW installation manager?", "body": "<p>When I try to build openssl on windows with msys.bat, <code>./configure mingw shared</code> reports an error.</p>\n\n<blockquote>\n  <p>Perl v5.10.0 required--this is only v5.8.8, stopped at ./configure line 12.</p>\n</blockquote>\n\n<p>The MinGW Installation Manager lists 5.8.8 as a repository version. \n<a href=\"https://i.stack.imgur.com/Tabnf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Tabnf.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I get a more recent version of perl? I already installed strawberry perl, but I don't know if it's possible to connect it to msys.</p>\n"}, {"tags": ["perl", "utf-8", "cyrillic", "writetofile"], "comments": [{"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "edited": false, "score": 0, "creation_date": 1472831570, "post_id": 39296232, "comment_id": 65926531, "body": "Which class does object <code>$message</code> belongs to?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1472831749, "post_id": 39296232, "comment_id": 65926626, "body": "what about <code>binmode</code> to print"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472833831, "post_id": 39296232, "comment_id": 65927780, "body": "<i>&quot;I have a class that has a string field input which contains utf-8 characters&quot;</i> Your <code>input</code> field shouldn&#39;t be encoded: it should consist of unencoded characters. Decoding and encoding should be done on input and output to allow your code to work entirely in characters."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 1, "creation_date": 1472838085, "post_id": 39296232, "comment_id": 65929983, "body": "try use <code>use utf8; my $a=$message-&gt;toString(); utf8::decode($a); print $fh $a;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473281166, "post_id": 39296232, "comment_id": 66085354, "body": "You have had a number of answers. Do none of them resolve your question? Please take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>, as this post should be either pursued further or marked as resolved."}], "answers": [{"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1472832714, "post_id": 39296502, "comment_id": 65927165, "body": "<code>use utf8;</code> mostly means that your code is in utf8, doesn&#39;t really change the input/output characteristics."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473281525, "post_id": 39296502, "comment_id": 66085542, "body": "This is simply wrong. <code>use utf8</code> only indicates that the Perl source file is UTF-8-encoded, and since the code is all in 7-bit ASCII it would have no effect at all."}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": false, "score": 1, "last_activity_date": 1472831843, "creation_date": 1472831843, "answer_id": 39296502, "question_id": 39296232, "link": "https://stackoverflow.com/questions/39296232/cyrillic-symbols-shown-strang%d0%b5ly-when-writing-to-a-file/39296502#39296502", "title": "Cyrillic symbols shown strang\u0435ly when writing to a file", "body": "<p>I suppose you miss<br>\n<code>use utf8;</code><br>\nin your code...</p>\n\n<p>This code produces the \"output.txt\" file you do expect:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse utf8;\n\nmy $dest = \"output.txt\";\nmy $message = \"\u0437\u0434\u0440\u0430\u0432\u0435\u0439\u0442\u0435\";\n\nprint \"\\nBefore saving to file\\n\" . $message . \"\\n\";\n\nopen (my $fh, '&gt;&gt;:encoding(UTF-8)', $dest)\n    or die \"Cannot open $dest : $!\";\n\nlock($fh);\nprint $fh $message;\nclose $fh;\n</code></pre>\n\n<p>I did not use <code>toString()</code> method because I'm working on native strings, not real objects, but this does not change the substance...</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1472833631, "post_id": 39296904, "comment_id": 65927671, "body": "<i>&quot;In general, I find it quite painful to work in characters over bytes&quot;</i>. That is strange. Using a simple byte string you have to be aware of what encoding it uses and allow for multi-byte characters. Surely, when you&#39;re processing strings you want a character to be just a character, independent of its encoding."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473276294, "post_id": 39296904, "comment_id": 66083177, "body": "@Borodin - 99% of the time, I don&#39;t have to worry about encodings. Things Just Work (TM).  When I have to worry about encodings at all, things get harried and difficult, and then I have to pay a lot of attention to the details about what encoding I need where, and then it&#39;s painful.  However, once I get the encodings lined up between perl and all the other processes / files, then it works nicely."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473280564, "post_id": 39296904, "comment_id": 66085101, "body": "I understand your frustration, and things mostly work because the majority of data is simple 7-bit ASCII, and designers of character encodings have made sure that those 128 characters are mostly unchanged. But I don&#39;t get your preference for working in bytes over characters, as it exposes you to the internals of whatever encodings are thrown at you. Consider the small Greek mu <code>\u03bc</code>  used for &quot;micro&quot;. If you insist on working in bytes then that will be a value of 0x3F if your source is encoded in ISO-8859-1, or the two bytes 0xCE 0xBC if the encoding is UTF-8."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473280900, "post_id": 39296904, "comment_id": 66085234, "body": "On the other hand, if you inform Perl how your sources are encoded, the result will be the 32-bit Unicode character 0x03BC regardless of the original encoding. If you meant &quot;I wish all my data was ASCII&quot; then I understand completely, but 128 characters just aren&#39;t enough for many purposes. If you hold on to the paradigm of decoding and encoding all input and output (preferably using the appropriate Perl IO layers on the file handles) then your code normally needs to deal only in a consistent set of Unicode characters. Surely that&#39;s a more attractive proposition?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473282689, "post_id": 39296904, "comment_id": 66086066, "body": "99% of the time, I don&#39;t have to worry about mu, either :P  Most of the time, and quite often even when dealing with non-English text, I can get away with reading in a file, doing whatever with it, and writing it back out.  Rarely do I need to manipulate anything that isn&#39;t in English text.  And then it doesn&#39;t matter.  All my one-liners, almost all of my tooling, etc., I don&#39;t need to worry.  I&#39;ve been our local locale expert, I can do it, but, thankfully, most of the time, I don&#39;t have to."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1473283559, "post_id": 39296904, "comment_id": 66086416, "body": "That&#39;s what I&#39;m saying. Data is usually 7-bit ASCII, but sometimes you need to process non-ASCII data, and then it seems perverse to me to insist on working with the byte-level data instead of characters. There are some quite common non-ASCII characters: The <i>no-break space</i> for HTML perhaps, or various currencies like the UK pound <code>&#163;</code>, the yen <code>&#165;</code> or the cent <code>&#162;</code>, as well as the copyright <code>&#169;</code> and registered trade mark <code>&#174;</code> symbols. If you can pick your jobs so that you never have to work in non-ASCII then great, but always working in bytes will leave you frustrated."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1472833284, "creation_date": 1472833284, "answer_id": 39296904, "question_id": 39296232, "link": "https://stackoverflow.com/questions/39296232/cyrillic-symbols-shown-strang%d0%b5ly-when-writing-to-a-file/39296904#39296904", "title": "Cyrillic symbols shown strang\u0435ly when writing to a file", "body": "<p>How does your <code>toString</code> method work? I would guess, based on the output you've provided, that the <code>toString</code> method is producing bytes instead of characters, and then perl is getting confused when trying to convert it.</p>\n\n<p>Try <code>binmode STDOUT, ':encoding(UTF-8)'</code> before your print to see if it produces the same output as the file - otherwise your test is apples and oranges.</p>\n\n<p>If it's already bytes instead of characters, you can open your <code>$dest</code> without any <code>encoding(...)</code> layer and it'll work.</p>\n\n<p>In general, I find it quite painful to work in characters over bytes, but since it resolves more corner cases that I don't have to think about anymore, the extra work becomes worth it, but it is extra work.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472833484, "creation_date": 1472833484, "answer_id": 39296954, "question_id": 39296232, "link": "https://stackoverflow.com/questions/39296232/cyrillic-symbols-shown-strang%d0%b5ly-when-writing-to-a-file/39296954#39296954", "title": "Cyrillic symbols shown strang\u0435ly when writing to a file", "body": "<p>The contents of the string returned by your <code>toString</code> method are already UTF-8 encoded. That works fine when you print it to your terminal because it is expecting UTF-8 data. But when you open your output file with </p>\n\n<pre><code>open (my $fh, '&gt;&gt;:encoding(UTF-8)', $dest) or die \"Cannot open $dest : $!\"\n</code></pre>\n\n<p>you are asking that Perl should <em>reencode</em> the data as UTF-8. That converts each byte of the UTF-8-encoded data to a separate UTF-8 sequence, which isn't what you want at all. Unfortunately you don't show your code for the class that <code>$message</code> belongs to, so I can't help you with this</p>\n\n<p>You can fix that by changing your <code>open</code> call to just </p>\n\n<pre><code>open (my $fh, '&gt;&gt;', $dest) or die \"Cannot open $dest : $!\"\n</code></pre>\n\n<p>which will avoid the additional encoding step. But you should really be working with unencoded characters throughout your Perl code: removing any encoding from files you are reading from, and encoding output data as necessary when you write to output files.</p>\n"}], "owner": {"reputation": 1349, "user_id": 3623150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3T4cu.jpg?s=128&g=1", "display_name": "bob_saginowski", "link": "https://stackoverflow.com/users/3623150/bob-saginowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 39296954, "answer_count": 3, "score": 3, "last_activity_date": 1473281330, "creation_date": 1472830960, "last_edit_date": 1473281330, "question_id": 39296232, "link": "https://stackoverflow.com/questions/39296232/cyrillic-symbols-shown-strang%d0%b5ly-when-writing-to-a-file", "title": "Cyrillic symbols shown strang\u0435ly when writing to a file", "body": "<p>I have a class that has a string field <code>input</code> which contains UTF-8 characters. My class also has a method <code>toString</code>. I want to save instances of the class to a file using the method <code>toString</code>. The problem is that strange symbols are being written in the file:</p>\n\n<pre><code>my $dest = \"output.txt\";\n\nprint \"\\nBefore saving to file\\n\" . $message-&gt;toString() . \"\\n\";\n\nopen (my $fh, '&gt;&gt;:encoding(UTF-8)', $dest) \n    or die \"Cannot open $dest : $!\";\n\nlock($fh);\nprint $fh $message-&gt;toString();\nunlock($fh);\nclose $fh;       \n</code></pre>\n\n<p>The first print works fine</p>\n\n<pre><code>Input: {\"paramkey\":\"message\",\"paramvalue\":\"\u0437\u0434\u0440\u0430\u0432\u0435\u0439\u0442\u0435\"}\n</code></pre>\n\n<p>is being printed to the console. The problem is when I write to the file:</p>\n\n<pre><code>Input: {\"paramkey\":\"message\",\"paramvalue\":\"\u00d0\u00b7\u00d0\u00b4\u00d1\u00d0\u00b0\u00d0\u00b2\u00d0\u00b5\u00d0\u00b9\u00d1\u00d0\u00b5\"}\n</code></pre>\n\n<p>I used <a href=\"http://perldoc.perl.org/functions/flock.html\" rel=\"nofollow\"><code>flock</code></a> for locking/unlocking the file.</p>\n"}, {"tags": ["perl", "unicode"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1472831075, "post_id": 39295880, "comment_id": 65926225, "body": "There are som missing the UTF8 PerlIO layers on input and output. The following works as expected: <code>echo -n &quot;What&#233;ver 5&quot; | perl -Mutf8 -CSDA -pe &quot;s&#47;(\\p{Upper})&#47;(\\1)&#47;g&quot;</code>. See also <a href=\"http://stackoverflow.com/questions/10891643/regex-for-uppercase-unicode-does-not-match-%C3%93\">Regex for uppercase Unicode does not match \u201c&#211;\u201d?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1472832677, "creation_date": 1472832677, "answer_id": 39296749, "question_id": 39295880, "link": "https://stackoverflow.com/questions/39295880/perl-regex-replacement-of-logical-unicode-characters/39296749#39296749", "title": "Perl regex replacement of logical unicode characters", "body": "<p>You haven't told Perl to expect UTF-8 input, so it is treating each byte of the encoding as a separate character</p>\n\n<p>Within a program you can set the default encoding for the three standard IO channels like this</p>\n\n<pre><code>use open ':std' =&gt; ':encoding(UTF-8)'\n</code></pre>\n\n<p>On the command line, the option <code>-CS</code> does the same thing, so this should work for you. I have removed the unnecessary autosplit option and replaced <code>\\1</code> with the correct <code>$1</code> in the replacement string</p>\n\n<pre><code>echo \"What\u00e9ver 5\" | perl -CS -pe \"s/(\\p{Upper})/($1)/g\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1506310506, "last_edit_date": 1506310506, "creation_date": 1472833699, "answer_id": 39297013, "question_id": 39295880, "link": "https://stackoverflow.com/questions/39295880/perl-regex-replacement-of-logical-unicode-characters/39297013#39297013", "title": "Perl regex replacement of logical unicode characters", "body": "<p>Assuming that your terminal uses UTF-8 encoding, </p>\n\n<pre><code>$ echo -n \"\u00e9\" | perl -ne 'printf \"%vX\\n\", $_'\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>C3.A9\n</code></pre>\n\n<p>so the input to the Perl program has not been converted internally to Unicode (it is still a string of UTF-8 bytes)</p>\n\n<p>To convert the input to a Perl string, add a UTF-8 layer on the standard input stream using option <code>-CI</code> :</p>\n\n<pre><code>$ echo -n \"\u00e9\" | perl -CI -ne 'printf \"%vX\\n\", $_'\n</code></pre>\n\n<p>the output is now </p>\n\n<pre><code>E9\n</code></pre>\n\n<p>However, if you also try to print the character back to standard output\nyou will not get <code>\u00e9</code> but a unicode replacement character <code>\ufffd</code> from the terminal. This is because the character <code>0xE9</code> is Unicode, but the terminal expect UTF-8, and <code>0xE9</code> is not valid UTF-8:</p>\n\n<pre><code>$ echo -n \"\u00e9\" | perl -CI -nE 'printf \"$_: %vX\\n\", $_, $_'\n\ufffd: E9\n</code></pre>\n\n<p>To get correct output, you can add an UFT-8 encoding layer on the standard output stream also (using <code>-CO</code> flag):</p>\n\n<pre><code>$ echo -n \"\u00e9\" | perl -CIO -nE 'printf \"$_: %vX\\n\", $_, $_'\n\u00e9: E9\n</code></pre>\n\n<p>According to <a href=\"http://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\">perlunicode</a> </p>\n\n<blockquote>\n  <p>\"Upper\" is a synonym for \"Uppercase\" , and we could have written\n  \\p{Uppercase} equivalently as \\p{Upper}</p>\n</blockquote>\n\n<p>and  </p>\n\n<blockquote>\n  <p>For instance, \\p{Uppercase} matches any single character with the\n  Unicode \"Uppercase\" property</p>\n</blockquote>\n\n<p>It seems like if you try to use <code>\\p{Upper}</code> on a byte string, you will not get any warnings from Perl. Also bytes in the range <code>0xC0</code> to <code>0xDE</code> will match the uppercase property. Try</p>\n\n<pre><code>perl -E 'for $i (0x80..0xFF) {$_=chr $i; printf \"%x\\n\", $i if /\\p{Upper}/}'\n</code></pre>\n\n<p>This explains the output you got:</p>\n\n<pre><code>$ echo \"What\u00e9ver 5\" | perl -ape \"s/(\\p{Upper})/(\\1)/g\"\n(W)hat(\ufffd)\ufffdver 5\n</code></pre>\n\n<p>Here, the letter <code>\u00e9</code> is represented as 2 bytes (in UTF-8) <code>0xC3</code> and <code>0xA9</code>, and <code>0xC3</code> will match the Unicode <code>Upper</code> property.</p>\n\n<p>A solution to your problem is therefore to add UTF-8 encoding layers on the standard input and output (you can combine <code>-CI</code> and <code>-CO</code> using <code>-CS</code>):</p>\n\n<pre><code>echo \"What\u00e9ver 5\" | perl -CS -ape \"s/(\\p{Upper})/(\\1)/g\"\n</code></pre>\n\n<p>with output:</p>\n\n<pre><code>(W)hat\u00e9ver 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1472836464, "creation_date": 1472836464, "answer_id": 39297680, "question_id": 39295880, "link": "https://stackoverflow.com/questions/39295880/perl-regex-replacement-of-logical-unicode-characters/39297680#39297680", "title": "Perl regex replacement of logical unicode characters", "body": "<p>As illustrated by the other answers, turning on UTF-8 in Perl is a piecemeal process. There's <code>use utf8</code> for the syntax and raw strings. Then you have to make sure all your filehandles are UTF-8. What about <code>@ARGV</code>? <code>readdir</code>? <code>glob</code>? The output from <code>``</code>?</p>\n\n<p>There's nothing worse than having half your program working in ASCII and the other half working in UTF-8. <a href=\"https://metacpan.org/pod/utf8::all\" rel=\"nofollow\">utf8::all</a> to the rescue!</p>\n\n<p>Install it, add <code>use utf8::all</code>, and it will turn on UTF-8... all of it. Someone else figured it out, you don't have to worry about it.</p>\n\n<pre><code>$ echo \"What\u00e9ver 5\" | perl -ape \"use utf8::all; s/(\\p{Upper})/(\\1)/g\"\n(W)hat\u00e9ver 5\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 639493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/154be007f9924a865d9409072fba0b55?s=128&d=identicon&r=PG", "display_name": "Nathann Cohen", "link": "https://stackoverflow.com/users/639493/nathann-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 1, "accepted_answer_id": 39297013, "answer_count": 3, "score": 0, "last_activity_date": 1506310506, "creation_date": 1472829782, "question_id": 39295880, "link": "https://stackoverflow.com/questions/39295880/perl-regex-replacement-of-logical-unicode-characters", "title": "Perl regex replacement of logical unicode characters", "body": "<p>Here is a simple substitution that adds parentheses arounds upper-case characters in an unicode string. As you can see, the result is rather ugly:</p>\n\n<pre><code>~$ echo \"What\u00e9ver 5\" | perl -ape \"s/(\\p{Upper})/(\\1)/g\"\n(W)hat(\ufffd)\ufffdver 5\n</code></pre>\n\n<p>My understanding is that the regex operates on \"code points\" instead of \"logical characters\", which splits my '\u00e9' into meaningless characters. Is there a way to force the regex to work on logical unicode characters at once ?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 6205, "user_id": 2921949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ae08b97982bf0de035b7111f86ae2b?s=128&d=identicon&r=PG", "display_name": "Andrew Diamond", "link": "https://stackoverflow.com/users/2921949/andrew-diamond"}, "edited": false, "score": 0, "creation_date": 1472832736, "post_id": 39296303, "comment_id": 65927179, "body": "I haven&#39;t ran this yet, but from a quick overview, it looks like it&#39;s finding an XML tag <code>Reference</code>, and adding the children <code>HintPath</code> and <code>Private</code>, correct? If so, how do I limit it to find tags that have an attribute set to a certain value?"}, {"owner": {"reputation": 6205, "user_id": 2921949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ae08b97982bf0de035b7111f86ae2b?s=128&d=identicon&r=PG", "display_name": "Andrew Diamond", "link": "https://stackoverflow.com/users/2921949/andrew-diamond"}, "edited": false, "score": 0, "creation_date": 1472832800, "post_id": 39296303, "comment_id": 65927221, "body": "ie: <code>Reference</code> tags that have <code>Include=&quot;log4net, Version=1.2.10.0...</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 6205, "user_id": 2921949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ae08b97982bf0de035b7111f86ae2b?s=128&d=identicon&r=PG", "display_name": "Andrew Diamond", "link": "https://stackoverflow.com/users/2921949/andrew-diamond"}, "edited": false, "score": 0, "creation_date": 1472833264, "post_id": 39296303, "comment_id": 65927460, "body": "Easily enough. Bear with me, I&#39;ll update the example. <a href=\"http://xmltwig.org/xmltwig/quick_ref.html\" rel=\"nofollow noreferrer\">xmltwig.org/xmltwig/quick_ref.html</a>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1472833853, "last_edit_date": 1472833853, "creation_date": 1472831186, "answer_id": 39296303, "question_id": 39295878, "link": "https://stackoverflow.com/questions/39295878/perl-find-and-replace-deleting-files/39296303#39296303", "title": "perl find and replace deleting files", "body": "<p>I'd suggest you're going to trip yourself up in two different ways if you're not really careful.</p>\n\n<ul>\n<li>Parsing XML with regex is a bad idea. It's messy, because <code>regex</code> isn't contextual, where XML is. </li>\n<li>Perl has a perfectly good <code>Find</code> module, that means you don't need to use the command version. </li>\n</ul>\n\n<p>I don't know specifically why you're having a problem, but I'd guess it's because the <code>find</code> command is generating linefeeds, and you're not stripping them? </p>\n\n<p>Anyway, I'd suggest that you do neither, and use <code>XML::Twig</code> and <code>File::Find::Rule</code> to do this job just within perl. </p>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse File::Find::Rule;\nuse XML::Twig;\n\n#setup the parser - note, this may reformat (in valid XML sorts of ways).\nmy $twig = XML::Twig-&gt;new(\n   pretty_print =&gt; 'indented',\n\n   #set a handler for 'Reference' elements - to insert your values.\n   twig_handlers =&gt; {\n      'Reference' =&gt; sub {\n         $_-&gt;insert_new_elt( 'Private' =&gt; 'True' );\n         $_-&gt;insert_new_elt(\n            'HintPath' =&gt; '..\\..\\..\\..\\ExternalDLLs\\log4net.dll' );\n\n         #flush is needed to write out the change.\n         $_-&gt;flush;\n      }\n   }\n);\n\n#use rules to find suitable files to alter.\nforeach my $xml_file (\n   File::Find::Rule-&gt;or(\n      File::Find::Rule-&gt;name('*.csproj'),\n      File::Find::Rule-&gt;name('*.vbproj'),\n   )-&gt;in('.')\n  )\n{\n   print \"\\nFound: $xml_file\\n\";\n\n   #do the parse.\n   $twig-&gt;parsefile_inplace($xml_file);\n}\n</code></pre>\n\n<p>Following on from comments - if you want to extend to match a <code>Reference</code> attribute, there's two possiblities - either set a handler on the <em>specific</em> xpath:</p>\n\n<p>twig_handlers => {\n      'Reference[@Include=\"log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL\"]' => sub {\n         $_->insert_new_elt( 'Private' => 'True' );\n         $_->insert_new_elt(\n            'HintPath' => '........\\ExternalDLLs\\log4net.dll' );</p>\n\n<pre><code>     #flush is needed to write out the change.\n     $_-&gt;flush;\n  }\n</code></pre>\n\n<p>}</p>\n\n<p>This selects based on attribute content (but bear in mind the above is quite long and convoluted). </p>\n\n<p>Alternatively - the handler 'fires' for each reference you encounter, so you can build a test. </p>\n\n<pre><code>my $twig = XML::Twig-&gt;new(\n   pretty_print =&gt; 'indented',\n\n   #set a handler for 'Reference' elements - to insert your values.\n   twig_handlers =&gt; {\n      'Reference' =&gt; sub {\n         #note - instead of 'eq' you can do things like regex tests. \n         if ( $_ -&gt; att('Include') eq \"log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL\") {\n              $_-&gt;insert_new_elt( 'Private' =&gt; 'True' );\n              $_-&gt;insert_new_elt( 'HintPath' =&gt; '..\\..\\..\\..\\ExternalDLLs\\log4net.dll' );\n         }\n\n         #flush is needed to write out the change.\n         $_-&gt;flush;\n      },\n   }\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "is_accepted": false, "score": 0, "last_activity_date": 1472831856, "creation_date": 1472831856, "answer_id": 39296511, "question_id": 39295878, "link": "https://stackoverflow.com/questions/39295878/perl-find-and-replace-deleting-files/39296511#39296511", "title": "perl find and replace deleting files", "body": "<p><code>perl -pi</code> processes the input files line by line. Your substitution contains a regex that tries to match some text that spans across multiple lines, so it will not work correctly. You can activate the \"slurp\" mode with the <code>-000</code> flag (i.e. <code>perl -000 -pie '.....'</code>) which reads the entire file in memory. Of course, you need to make sure that you don't have any huge files in that directory. I don't know why the files get deleted, <code>perl -i</code> does rename the original files, but that doesn't appear to be the problem here.</p>\n\n<p>Another thing to note is that the <code>find ...</code> command will fail if any file has a name that contains spaces, so maybe you so do something like <code>IFS=$'\\n'</code> before executing the command.</p>\n"}], "owner": {"reputation": 6205, "user_id": 2921949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ae08b97982bf0de035b7111f86ae2b?s=128&d=identicon&r=PG", "display_name": "Andrew Diamond", "link": "https://stackoverflow.com/users/2921949/andrew-diamond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 39296303, "answer_count": 2, "score": 2, "last_activity_date": 1472833853, "creation_date": 1472829775, "last_edit_date": 1495535351, "question_id": 39295878, "link": "https://stackoverflow.com/questions/39295878/perl-find-and-replace-deleting-files", "title": "perl find and replace deleting files", "body": "<p>I'm new to Perl scripting, but I need to do a large amount of regex find-and-replaces across hundreds of files.</p>\n\n<p>I came across <a href=\"https://blog.josephscott.org/2005/08/18/perl-oneliner-recursive-search-and-replace/\" rel=\"nofollow noreferrer\">this website</a> which recommends the Perl command <code>perl -p -i -e 's/oldstring/newstring/g' *</code> to get all files, and then <code>perl -p -i -e 's/oldstring/newstring/g' 'find ./ -name *.html\\'</code> to filter that to certain files.</p>\n\n<p>My goal is to find all *.csproj and *.vbproj files and replace a reference to a .dll to a new path.</p>\n\n<p>Those are both XML file types.</p>\n\n<p>The text I'm replacing is</p>\n\n<pre><code>&lt;Reference Include=\"log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL\"&gt;\n  &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n&lt;/Reference&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;Reference Include=\"log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL\"&gt;\n  &lt;SpecificVersion&gt;False&lt;/SpecificVersion&gt;\n  &lt;Private&gt;True&lt;/Private&gt;\n  &lt;HintPath&gt;..\\..\\..\\..\\ExternalDLLs\\log4net.dll&lt;/HintPath&gt;\n&lt;/Reference&gt;\n</code></pre>\n\n<p>The command I have so far is </p>\n\n<pre><code>perl -p -i -e 's/&lt;Reference Include=\"log4net, (?:.*?[\\t\\s\\n\\r])*?&lt;\\/Reference&gt;/&lt;Reference Include=\"log4net, Version=1\\.2\\.10\\.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL\"&gt;&lt;SpecificVersion&gt;False&lt;\\/SpecificVersion&gt;&lt;Private&gt;True&lt;\\/Private&gt;&lt;HintPath&gt;\\.\\.\\\\\\.\\.\\\\\\.\\.\\\\\\.\\.\\\\ExternalDLLs\\\\log4net\\.dll&lt;\\/HintPath&gt;&lt;\\/Reference&gt;/g'  `find . -type f \\( -name \"*.vbproj\" -or -name \"*.csproj\" \\)`\n</code></pre>\n\n<p>Which seems to try and work, but it just ends up deleting all of my *.vbproj and *.csproj files. </p>\n\n<p>I can't figure out why my script is deleting files.</p>\n\n<p>Any help?</p>\n\n<p>Edit: it prints this out per file </p>\n\n<p><code>Can't do inplace edit on ./Middletier/TDevAccess/AmCad.Components.TDevAccess.csproj: No such file or directory.</code></p>\n\n<p>Edit 2: Im using Bash on Ubuntu on Windows if that matters</p>\n\n<p>Could <a href=\"https://stackoverflow.com/a/2616900/2921949\">this</a> be related? </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472832218, "post_id": 39296519, "comment_id": 65926886, "body": "sub newConn in SQLConnect.pm (listed above) is not returning a variable when using myINIconfig::ini_dbUser($args-&gt;{dns}) as the hash value. Am I loading this incorrectly?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1472831880, "creation_date": 1472831880, "answer_id": 39296519, "question_id": 39295806, "link": "https://stackoverflow.com/questions/39295806/what-is-the-appropriate-way-to-return-a-variable-from-another-namespacemethod/39296519#39296519", "title": "What is the appropriate way to return a variable from another namespace::method using a dispatch table", "body": "<p>ini_dbUser is expecting to be passed <code>$args</code> (a hashref with a <code>dns</code> key), not <code>$args-&gt;{dns}</code>.</p>\n\n<p>This also looks wrong:</p>\n\n<pre><code>my $self = bless {\n    dns      =&gt; $args,\n</code></pre>\n\n<p>That is setting <code>{ 'dns' =&gt; { 'dns' =&gt; 'SOMETHING' }, ...</code></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472832758, "post_id": 39296563, "comment_id": 65927195, "body": "By updating this: myINIconfig::ini_dbUser($args), my hash should actually pass this to my DBI-&gt;connect:  dns =&gt; dbhandle, user=&gt;username, password=&gt;password. Right? Once my sub ini_dbUser process the argument that is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472832960, "post_id": 39296563, "comment_id": 65927311, "body": "@user6788226: I can&#39;t tell. You don&#39;t show a call to <code>DBI-&gt;connect</code>."}, {"owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472833707, "post_id": 39296563, "comment_id": 65927705, "body": "my $dbh = DBI-&gt;connect(&#39;DBI:ODBC:&#39;.$self-&gt;{dns}, $self-&gt;{user}, $self-&gt;{password},                         {RaiseError =&gt; 1, AutoCommit =&gt; 0})                             or die &quot;Couldn&#39;t connect to database: &quot; . DBI-&gt;errstr . &quot;\\n&quot;;"}, {"owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472833810, "post_id": 39296563, "comment_id": 65927758, "body": "There are lots of moving parts to this. We&#39;re running on version 5.8.5, otherwise, I would have used one of CPAN&#39;s ini packages."}, {"owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "edited": false, "score": 0, "creation_date": 1472837820, "post_id": 39296563, "comment_id": 65929808, "body": "The plan here was to get away from 1) and go with 2)  1) my $db_bareports = SQLConnect-&gt;new({ dns =&gt; &quot;DBHANDLE&quot;, user=&gt; &quot;report_user&quot;, password=&gt; &quot;mypass&quot; }); 2) my $db_bareports = SQLConnect-&gt;newConn(&#39;DBHANDLE&#39;);"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1472832051, "creation_date": 1472832051, "answer_id": 39296563, "question_id": 39295806, "link": "https://stackoverflow.com/questions/39295806/what-is-the-appropriate-way-to-return-a-variable-from-another-namespacemethod/39296563#39296563", "title": "What is the appropriate way to return a variable from another namespace::method using a dispatch table", "body": "<p>You're getting confused about levels of hash indexing</p>\n\n<p>First of all, your constructor <code>newConn</code> is being passed a reference to a hash <code>{dns =&gt; \"SOMETHING\"}</code> for the value of <code>$args</code>, which you then use directly when you create the object in the element <code>dns =&gt; $args</code>. That means you are setting it to <code>dns =&gt; {dns =&gt; \"SOMETHING\"}</code> which doesn't look at all right</p>\n\n<p>Then you're extracting the value of the <code>dns</code> element of <code>$args</code> when you call <code>myINIconfig::ini_dbUser($args-&gt;{dns})</code>, so you're calling <code>myINIconfig::ini_dbUser(\"SOMETHING\")</code>. But <code>ini_dbUser</code> first copies that parameter to <code>$self</code>, and then tries to use it as a hash reference in <code>my $dbh = ( $self-&gt;{dns} )</code>. Hence your error message <code>Can't use string (\"SOMETHING\") as a HASH ref</code></p>\n\n<p>I can't tell what is correct, but changing the call to just <code>myINIconfig::ini_dbUser($args)</code> will at least get it working</p>\n\n<p>Your use of <code>$self</code> implies that <code>ini_dbUser</code> is an object-oriented method, but you're calling it as a simple function. Is that perhaps the problem?</p>\n"}], "owner": {"reputation": 13, "user_id": 6788226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52d7569b456b99bb0c8199ac5967494?s=128&d=identicon&r=PG&f=1", "display_name": "user6788226", "link": "https://stackoverflow.com/users/6788226/user6788226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 39296563, "answer_count": 2, "score": 1, "last_activity_date": 1472832051, "creation_date": 1472829523, "last_edit_date": 1472831533, "question_id": 39295806, "link": "https://stackoverflow.com/questions/39295806/what-is-the-appropriate-way-to-return-a-variable-from-another-namespacemethod", "title": "What is the appropriate way to return a variable from another namespace::method using a dispatch table", "body": "<h3>code:</h3>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse lib '/home/user/perl/lib/';\n\nuse SQLConnect;\n\nmy $db_something = SQLConnect-&gt;newConn({dns =&gt; \"SOMETHING\"});\n\nmy $sql_data = $db_something-&gt;select_fetchallArray();\n\nfor my $row ( @{$sql_data} ) {\n\n    print \",\";\n\n    for my $column (@{$row}) {\n        print $column . \",\";\n    }\n\n    print \"\\n\";\n</code></pre>\n\n<h3>SQLConnect.pm (personal)</h3>\n\n<pre><code>sub newConn {\n    my ($class, $args) = @_;\n\n    my $self = bless {\n        dns      =&gt; $args,\n        user     =&gt; myINIconfig::ini_dbUser($args-&gt;{dns}),\n        password =&gt; myINIconfig::ini_dbPass($args-&gt;{dns}),\n    }, $class;\n}\n</code></pre>\n\n<p>Is this the appropriate way to return a variable using a dispatch table? The variables I am trying to return live in my <code>iniConfig</code> package, which contains a method to parse an <code>odbc.ini</code> file for the username and password to our SQL databases. I am receiving the following error:</p>\n\n<blockquote>\n  <p>Can't use string (\"SOMETHING\") as a HASH ref while \"strict refs\" in use.</p>\n</blockquote>\n\n<pre><code>sub ini_dbUser {\n    my $self = shift;\n\n    my $dbh = ( $self-&gt;{dns} );\n\n    open( INI, \"$path$ini\" ) || die \"Can't open $ini: $!\\n\";\n\n    while (&lt;INI&gt;) {\n        chomp;\n\n        next if /^\\s*#/;    # ignore comments\n        next if /^\\s*;/;    # ignore ;\n\n        if ( /^\\s*[\\s*(.+?)\\s*]\\s*$/ ) { }\n\n        if ( /^\\s*([^=]+?)\\s*=\\s*(.*?)\\s*$/ ) {\n\n            if ( ( $database eq $dbh ) &amp;&amp; ( $keyword eq \"username\" ) ) {\n                $user = $value;\n                print \"$user\\n\";\n            }\n        }\n    }\n\n    close(INI);\n    return ($user);\n}\n</code></pre>\n"}, {"tags": ["php", "regex", "perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472828204, "post_id": 39295282, "comment_id": 65924509, "body": "consider you are using the greedy operator <code>.*</code>"}, {"owner": {"reputation": 3640, "user_id": 4916265, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7adc8a9e81649bef7804a35ccc478ab8?s=128&d=identicon&r=PG", "display_name": "JustOnUnderMillions", "link": "https://stackoverflow.com/users/4916265/justonundermillions"}, "edited": false, "score": 0, "creation_date": 1472828326, "post_id": 39295282, "comment_id": 65924589, "body": "<code>#^[^&#47;]{2}.*#m</code> can be a solution"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1472828344, "post_id": 39295282, "comment_id": 65924597, "body": "<code>&#47;^(?!\\&#47;\\&#47;)&#47;</code> have you tryed with the negative match? this will ignore everything that starts with <code>&#47;&#47;</code>"}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1472829292, "post_id": 39295282, "comment_id": 65925159, "body": "What about multi-line comments? If you don&#39;t care about that, I think you could use the inverse of this answer: <a href=\"http://stackoverflow.com/questions/32462878/how-do-i-remove-only-javascript-comments-that-start-with/32467204#32467204\" title=\"how do i remove only javascript comments that start with\">stackoverflow.com/questions/32462878/&hellip;</a> ... <code>^\\h*&#47;&#47;.*$(*SKIP)(*FAIL)|.*</code>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "edited": false, "score": 0, "creation_date": 1472830596, "post_id": 39295538, "comment_id": 65925934, "body": "thanks.  This appears to work on lines with no indent or preceding whitespace.  However if its indented then it matches all, both commented and uncommented.  So I removed the start of line ^ and it still matches all...  so I readded the ^ with whitespace as ^\\s* and ^ * but still matches all."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "edited": false, "score": 0, "creation_date": 1473052396, "post_id": 39295538, "comment_id": 65980271, "body": "Then you should have specified in your question all the variants of your input"}, {"owner": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "edited": false, "score": 0, "creation_date": 1473064941, "post_id": 39295538, "comment_id": 65985110, "body": "I&#39;ve updated the question to reflect this.  My thoughts were that as this was a regex it should match anywhere in the line, with preceding whitespace or with whitespace afterwards, or with other code before or after.  Rather than an exact match for the example line I&#39;d given"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "edited": false, "score": 0, "creation_date": 1473068773, "post_id": 39295538, "comment_id": 65987251, "body": "You cannot use negative look-behind like <code>.* (negative look-behind) .* </code>"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "edited": false, "score": 0, "creation_date": 1473068798, "post_id": 39295538, "comment_id": 65987274, "body": "So you either make a 2 step regex, either use @borodin &#39;s answer"}], "tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": false, "score": -1, "last_activity_date": 1473053111, "last_edit_date": 1473053111, "creation_date": 1472828664, "answer_id": 39295538, "question_id": 39295282, "link": "https://stackoverflow.com/questions/39295282/regexp-match-except-on-comment/39295538#39295538", "title": "Regexp match except on comment", "body": "<p>For the input specified in question :</p>\n\n<pre><code>//$page_content .= '&lt;meta http-equiv=\"refresh\"\n</code></pre>\n\n<p>This will do the thing:</p>\n\n<pre><code>use strict;\n\nuse warnings;\n\n\nopen my $fh, \"&lt;\", \"my_path\\\\data.txt\";\n\nwhile ( my $line = &lt;$fh&gt;) {\n    if ( $line =~ /^(?!\\/\\/).*?&lt;meta http-equiv=\\\"refresh\\\"/){\n        print $line;\n    }\n}\n</code></pre>\n\n<p>If you have more spaces or other indent operators, use a look-behind operator:\n    use strict;</p>\n\n<pre><code>use warnings;\n\n\nopen my $fh, \"&lt;\", \"c:\\\\users\\\\uidp7702\\\\desktop\\\\data.txt\";\n\nwhile ( my $line = &lt;$fh&gt;) {\n    if ( $line =~ /(?&lt;!\\/\\/)\\$page_content\\s.=\\s\\'.*?&lt;meta http-equiv=\\\"refresh\\\"/){\n        print $line;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472830818, "creation_date": 1472830818, "answer_id": 39296182, "question_id": 39295282, "link": "https://stackoverflow.com/questions/39295282/regexp-match-except-on-comment/39296182#39296182", "title": "Regexp match except on comment", "body": "<p>Just remove the comment before checking for the string</p>\n\n<pre><code>while ( &lt;$fh&gt; ) {\n\n    s|//.*||;\n\n    if ( /&lt;meta http-equiv=\"refresh\"/ ) {\n        ...;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3797323, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc6d2554b582baf6238267071b54f56f?s=128&d=identicon&r=PG&f=1", "display_name": "Curious User", "link": "https://stackoverflow.com/users/3797323/curious-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473064901, "creation_date": 1472827825, "last_edit_date": 1473064901, "question_id": 39295282, "link": "https://stackoverflow.com/questions/39295282/regexp-match-except-on-comment", "title": "Regexp match except on comment", "body": "<p>I'm trying to find all occurrences of some code unless that code is preceded by a comment.</p>\n\n<p>Here's an example of what I want to find:</p>\n\n<pre><code>$page_content .= '&lt;meta http-equiv=\"refresh\"\n</code></pre>\n\n<p>or </p>\n\n<pre><code>$page_content .= 'Some other text here&lt;/p&gt;&lt;meta http-equiv=\"refresh\"\n</code></pre>\n\n<p>With or without preceding white space.\nHere's what I want to ignore</p>\n\n<pre><code>//$page_content .= '&lt;meta http-equiv=\"refresh\"\n</code></pre>\n\n<p>again with or without preceding white space.</p>\n\n<p>That way I can be sure that my code base never contains this code unless it's in a comment or set up an automatic alert if it is found without getting false alerts for when its commented out (ignore multi-line comments for now).</p>\n\n<p>I've tried using look behind </p>\n\n<pre><code>(?&lt;!\\/\\/).*&lt;meta http-equiv=\"refresh\"\n</code></pre>\n\n<p>but I've not had much luck as this still matches every occurrence, commented or not.</p>\n\n<p>One more thing: It would be great if it was in one regex rather in a loop of code so that I can search in Notepad++ or other editor that supports reg exp searches.\n(Its amazing how differently one question can be read/understood.  I'd thought I'd been pretty clear but from the variety of completely valid answers its clear that I could have included a lot more detail :-)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472826096, "post_id": 39294445, "comment_id": 65923072, "body": "Arrays do no print anything. It&#39;s your code that does stuff, not the array."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 1818250, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3706ecf8adf01d16cbc540d84cee5e8e?s=128&d=identicon&r=PG&f=1", "display_name": "MBH", "link": "https://stackoverflow.com/users/1818250/mbh"}, "edited": false, "score": 0, "creation_date": 1472854516, "post_id": 39294516, "comment_id": 65936615, "body": "This works exactly as I had desired. I&#39;ll research hashes a little more. Thank you."}], "tags": [], "owner": {"reputation": 7145, "user_id": 267398, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/beea308e4f0cd2781b8b3a362bac5493?s=128&d=identicon&r=PG", "display_name": "sebnukem", "link": "https://stackoverflow.com/users/267398/sebnukem"}, "is_accepted": true, "score": 4, "last_activity_date": 1472835931, "last_edit_date": 1472835931, "creation_date": 1472825631, "answer_id": 39294516, "question_id": 39294445, "link": "https://stackoverflow.com/questions/39294445/why-is-this-array-only-printing-the-last-number/39294516#39294516", "title": "Why is this array only printing the last number?", "body": "<p>If you take your loop:</p>\n\n<pre><code>foreach my $rev (@revenue) {\n  foreach my $r (@rows) {\n    $worksheet-&gt;AddCell( $r, $col, \"$rev\" );\n  }\n}\n</code></pre>\n\n<p>The last <code>$rev</code> to write is 18365, and you will overwrite the previous values in all 3 rows.</p>\n\n<p>What you can do is creating a row-to-revenue hash from both your lists and traverse it:</p>\n\n<pre><code>my @rows = (2, 10, 17);\nmy @revenue = (10200, 9025, 18365);\nmy $col = 2;\n\nmy %data;\nfor my $i (0 .. $#rows) {\n    $data{$rows[$i]} = $revenue[$i]; # row =&gt; revenue\n}\n\nforeach $row (keys %data) {\n    $worksheet-&gt;AddCell($row, $col, $data{$row});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 1818250, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3706ecf8adf01d16cbc540d84cee5e8e?s=128&d=identicon&r=PG&f=1", "display_name": "MBH", "link": "https://stackoverflow.com/users/1818250/mbh"}, "edited": false, "score": 0, "creation_date": 1472853972, "post_id": 39294898, "comment_id": 65936442, "body": "Thank you for the clear explanation. I think I understand where I was going wrong before. The desired output would be      row col rev     2     2    10200 -      10   2    9025 -      17   2    18365 -   So I need them to loop, but only once each. Unfortunately, I am working with an existing spreadsheet so using additional columns does not work."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1472826700, "creation_date": 1472826700, "answer_id": 39294898, "question_id": 39294445, "link": "https://stackoverflow.com/questions/39294445/why-is-this-array-only-printing-the-last-number/39294898#39294898", "title": "Why is this array only printing the last number?", "body": "<p>Here's an illustration of what your code does. I replaced the <code>AddCell</code> with a simple <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow\"><code>say</code></a>, which is like <code>print</code> with a newline at the end.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nmy @rows = (2, 10, 17);\nmy @revenue = (10200, 9025, 18365);\n\nmy $col = 2;\n\nsay \"row\\tcol\\trev\";\nforeach my $rev (@revenue) {\n    foreach my $r (@rows) {\n        say join \"\\t\", $r, $col, $rev;\n    }\n}\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>row col rev\n2   2   10200\n10  2   10200\n17  2   10200\n2   2   9025\n10  2   9025\n17  2   9025\n2   2   18365\n10  2   18365\n17  2   18365\n</code></pre>\n\n<p>As you can see, it iterates through all the revenues, and then for each revenue it writes to rows 2, 10 and 17.</p>\n\n<pre><code>2   2   10200\n10  2   10200\n17  2   10200\n</code></pre>\n\n<p>And here it goes again.</p>\n\n<pre><code>2   2   9025\n10  2   9025\n17  2   9025\n</code></pre>\n\n<p>Since it's always in the same column (that's the 2), the values get overwritten. That's why only the last round of values are there.</p>\n\n<p>I don't really know what you are expecting as the correct output, but since you have fixed rows, you might want to use three columns? You could increase the <code>$col</code> variable after you're done writing all rows for each <code>$rev</code>.</p>\n\n<pre><code>foreach my $rev (@revenue) {\n    foreach my $r (@rows) {\n        $worksheet-&gt;AddCell( $r, $col, $rev );\n    }\n    $col++;\n}\n</code></pre>\n\n<p>Now the output of our little program above would be like this, and all values would be there.</p>\n\n<pre><code>row col rev\n2   2   10200\n10  2   10200\n17  2   10200\n2   3   9025\n10  3   9025\n17  3   9025\n2   4   18365\n10  4   18365\n17  4   18365\n</code></pre>\n\n<hr>\n\n<p>Note that I removed the double-quotes <code>\"\"</code> around <code>$rev</code>. You don't need to quote variables like that.</p>\n"}], "owner": {"reputation": 121, "user_id": 1818250, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3706ecf8adf01d16cbc540d84cee5e8e?s=128&d=identicon&r=PG&f=1", "display_name": "MBH", "link": "https://stackoverflow.com/users/1818250/mbh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 39294516, "answer_count": 2, "score": 2, "last_activity_date": 1472835931, "creation_date": 1472825399, "question_id": 39294445, "link": "https://stackoverflow.com/questions/39294445/why-is-this-array-only-printing-the-last-number", "title": "Why is this array only printing the last number?", "body": "<p>My first time working with Perl. I'm using it to take data from multiple cells from one Excel file and put them in another, existing Excel file. </p>\n\n<p>I've managed to extract the data I need from the first file and put it into an @array. I started a new file to experiment with writing the data into the specific cells I need.</p>\n\n<p>The problem is that when the script runs it has the same number in all cells, 18365. While the @rows arrays is working correctly and putting the number in the correct cell, the @revenue array only prints the last number. </p>\n\n<p>Is there something I am overlooking or not understanding? Is there a better way to do this? I thank you in advance. </p>\n\n<pre><code>use warnings;\nuse strict;\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\n\nmy $parser = Spreadsheet::ParseExcel::SaveParser-&gt;new();\nmy $workbook = $parser-&gt;Parse('xls_test.xls');\n\nif (!defined $workbook ) {\n    die $parser-&gt;error(), \".\\n\";\n}\n\nmy $worksheet = $workbook-&gt;worksheet(0);\n\nmy @rows = (2, 10, 17);\nmy @revenue = (10200, 9025, 18365);\n\nmy $col = 2;\n\nforeach my $rev (@revenue) {\n    foreach my $r (@rows) {\n        $worksheet-&gt;AddCell( $r, $col, \"$rev\" );\n    }\n}\n\n$workbook-&gt;SaveAs('xls_test.xls');\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1472824608, "post_id": 39294123, "comment_id": 65922043, "body": "What&#39;s the error?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1472828938, "post_id": 39294123, "comment_id": 65924953, "body": "Building an SQL statement by interpolating variables into a string is generally a very bad idea - See <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">Bobby Tables</a> for details."}], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 0, "creation_date": 1472825009, "post_id": 39294226, "comment_id": 65922326, "body": "this worked, thank you very much, would you mind explaining what exactly went wrong? my variables are mostly full numbers, but 2-3 are either strings or variant types, i thought marking them with &#39; &#39; would be enough"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 1, "creation_date": 1472825146, "post_id": 39294226, "comment_id": 65922419, "body": "You will have to quote things precisely for MySQL to be happy processing them. Using bind variables (the <code>?</code> in the <code>prepare()</code>), and then passing your values to <code>execute()</code> will do the &quot;heavy lifting&quot; of quoting where it needs to for you. It&#39;s generally the recommended way to pass in variables to statements."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472826978, "post_id": 39294226, "comment_id": 65923686, "body": "And for the record, I meant placeholders, not bind variables, they are different things!"}], "tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": true, "score": 6, "last_activity_date": 1472832502, "last_edit_date": 1495540301, "creation_date": 1472824722, "answer_id": 39294226, "question_id": 39294123, "link": "https://stackoverflow.com/questions/39294123/why-is-mysql-giving-me-a-syntax-error/39294226#39294226", "title": "Why is MySQL giving me a syntax error?", "body": "<p>You are possibly getting quotation errors arising from passing your variables in as a string. You should instead use placeholders.</p>\n\n<p>Try doing something like this instead:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO `teso`( Terminal, Zeitstempel, Ergebnisnummer, Ergebnistext, \n   Transart, Belegnummer, `Trace`, Betrag, Kartenart, Kartennummer, Entrymode ) \n   values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )');\n$sth-&gt;execute($tid, $zeit, $ergebnisnummer, $ergebnistext,\n   $transart, $belegnummer, $trace, $betrag, $kartenart,\n   $kartennummer, $entrymode) or die $DBI::errstr;\n</code></pre>\n\n<p>I've also included <a href=\"https://stackoverflow.com/a/39294232/791908\">mwp's answer too</a>.</p>\n\n<p>It is also worth time reading <a href=\"https://stackoverflow.com/a/39295970/791908\">Borodins Answer</a> for a more thorough way to approach placeholders and SQL inside perl.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472824850, "post_id": 39294232, "comment_id": 65922209, "body": "Wouldn&#39;t it figure out that it can only have column names inside of a <code>INSERT INTO foo ( ... )</code> construct?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472824935, "post_id": 39294232, "comment_id": 65922277, "body": "That would be nice, but unfortunately, no."}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 0, "creation_date": 1472825095, "post_id": 39294232, "comment_id": 65922387, "body": "ye, I had an error before that was caused by the column &quot;Terminal-ID&quot;, the -ID was causing Problems, took me 1 hour to realize, so i tried putting trace in `` already but it didnt work sadly, thanks for the good answer though!"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 3, "last_activity_date": 1472824730, "creation_date": 1472824730, "answer_id": 39294232, "question_id": 39294123, "link": "https://stackoverflow.com/questions/39294123/why-is-mysql-giving-me-a-syntax-error/39294232#39294232", "title": "Why is MySQL giving me a syntax error?", "body": "<p>I believe \"trace\" is a reserved word in MySQL. Try adding backticks around the column name(s). </p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1472825422, "post_id": 39294417, "comment_id": 65922577, "body": "Your first assumption is wrong. Perl does not run anything in backticks tha is inside of the double-quotes. Interpolation does not work that way."}, {"owner": {"reputation": 564, "user_id": 1654778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bac50293fe6f852f79dc4025cd5fb2b9?s=128&d=identicon&r=PG", "display_name": "Vasily Redkin", "link": "https://stackoverflow.com/users/1654778/vasily-redkin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472825688, "post_id": 39294417, "comment_id": 65922773, "body": "@simbabque, you&#39;re absolutely right! Updated answer."}], "tags": [], "owner": {"reputation": 564, "user_id": 1654778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bac50293fe6f852f79dc4025cd5fb2b9?s=128&d=identicon&r=PG", "display_name": "Vasily Redkin", "link": "https://stackoverflow.com/users/1654778/vasily-redkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472825852, "last_edit_date": 1472825852, "creation_date": 1472825328, "answer_id": 39294417, "question_id": 39294123, "link": "https://stackoverflow.com/questions/39294123/why-is-mysql-giving-me-a-syntax-error/39294417#39294417", "title": "Why is MySQL giving me a syntax error?", "body": "<p><strike>I think, error is because backticks around <code>teso</code> is interpolated by perl.</strike>\nAnyway, interpolating values into a query string is a really bad idea.\nYou can replace quotation marks around your query with a single quotes (to eliminate undesired interpolation) and replace values to be inserted with a placeholders. Then you should pass actual values to execute() method. Like this:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO teso( Terminal, Zeitstempel, Ergebnisnummer, Ergebnistext, Transart, Belegnummer, Trace, Betrag, Kartenart, Kartennummer, Entrymode ) \nvalues ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )');\n$sth-&gt;execute($tid, $zeit, $ergebnisnummer, $ergebnistext, $transart, $belegnummer, $trace, $betrag, $kartenart, $kartennummer, $entrymode) or die $DBI::errstr;\n$sth-&gt;finish();\n</code></pre>\n\n<p>or, if you wish to insert just a single row, you can replace all this with a single do():</p>\n\n<pre><code>$dbh-&gt;do('INSERT INTO teso( Terminal, Zeitstempel, Ergebnisnummer, Ergebnistext, Transart, Belegnummer, Trace, Betrag, Kartenart, Kartennummer, Entrymode ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )', undef,\n  $tid, $zeit, $ergebnisnummer, $ergebnistext, $transart, $belegnummer, $trace, $betrag, $kartenart, $kartennummer, $entrymode ) or die $DBI::errstr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472830104, "creation_date": 1472830104, "answer_id": 39295970, "question_id": 39294123, "link": "https://stackoverflow.com/questions/39294123/why-is-mysql-giving-me-a-syntax-error/39295970#39295970", "title": "Why is MySQL giving me a syntax error?", "body": "<p>Values in an SQL expression must be quoted correctly. Simple numeric values don't need quoting, and I imagine the first three columns that you used -- terminal ID, timestamp, and result number -- are all numbers, which is why they worked without quotes</p>\n\n<p>The <code>DBI</code> module provides functions database handle method <code>quote</code> which will do this for you (as well as <code>quote_identifier</code> which does the same thing for identifiers, such as table and column names). However it is always much safer to <code>prepare</code> an SQL statement with <em>placeholders</em> instead of trying to interpolate the values into the string yourself. Then the actual values can be provided in the <code>execute</code> call, wehen <code>DBI</code> will implicitly call <code>$dbh-&gt;quote</code> on all of the values before inserting them into the statement</p>\n\n<p>It is also best to <code>prepare</code> a statement just <em>once</em>, as the handle may then be used repeatedly. And there is no need to extract a series of scalar variables from your <code>%row</code> hash -- a <em>hash slice</em> can be used to fetch the correct fields straight from the hash into the <code>execute</code> call. It is best, however, to keep a list of the field names in an array as you have done with <code>@headers</code>; in fact your <code>@headers</code> may be the same as my <code>@items</code>, in which case there is no need to define both</p>\n\n<p>I have used a <em>here document</em> for the SQL string. If you want to do the same thing then be careful that there must be <em>no white space</em> either before or after the end tag <code>END_SQL</code> otherwise it won't be found</p>\n\n<p>Note that I've used <code>join</code> together with the list repetition operator <code>x</code> to produce exactly the right number of question mark placeholders in the QSL. It's much safer to do things this way so as to avoid miscounting, and to allow the number of fields to be changed without altering the SQL statement. You can <code>print \"$sql\\n\"</code> to see the SQL that has been built if you wish</p>\n\n<p>I hope this helps</p>\n\n<pre><code>my @items = qw/\n    tid zeit ergebnisnummer ergebnistext transart\n    belegnummer trace betrag kartenart kartennummer entrymode\n/;\n\nmy $sql = sprintf &lt;&lt;END_SQL, join ', ', ('?') x @items;\nINSERT INTO teso (\n    Terminal, Zeitstempel, Ergebnisnummer, Ergebnistext, Transart,\n    Belegnummer, Trace, Betrag, Kartenart, Kartennummer, Entrymode\n)\nVALUES (%s)\nEND_SQL\n\nmy $insert = $dbh-&gt;prepare($sql);\n\nfor my $file ( @file ) {\n\n    my $current_file = \"$currentdir\\\\$file\";\n\n    open my $fh, '&lt;', $current_file or die qq{Unable to open \"$current_file\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n\n        my %row;\n        @row{@headers} = split /;/;\n\n        $insert-&gt;execute(@row{@items}) or die $sth-&gt;errstr;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 39294226, "answer_count": 4, "score": 0, "last_activity_date": 1472832502, "creation_date": 1472824397, "last_edit_date": 1472830264, "question_id": 39294123, "link": "https://stackoverflow.com/questions/39294123/why-is-mysql-giving-me-a-syntax-error", "title": "Why is MySQL giving me a syntax error?", "body": "<p>so I am pretty much a big newbie in coding and I am kinda learning by Trial and error, this time I am trying to work with a DB with Perl, actually it works well when I just use 3 table headers (Terminal, Zeitstempel, Ergebnisnummer) but when I try to add more headers (Ergebnistext, Transart, Belegnummer, Trace, Betrag, Kartenart, Kartennummer, Entrymode) it is always giving me a Syntax-error and I checked for half an hour but couldnt find the error. If anyone knows why I would appreciate your help! this part of my code Looks like this:</p>\n\n<pre><code>            foreach $file (@file)\n        {\n            $currentfile = \"$currentdir\\\\$file\";\n            open(zloop, \"&lt;\", $currentfile) or die \"Failed to open file: $!\\n\";\n                    while ( &lt;zloop&gt; ) {\n                    my %row;\n                    chomp;\n                    @row{@headers} = split /;/;\n                    my $tid = $row{'tid'}; \n                    my $zeit = $row{'zeit'};\n                    my $ergebnisnummer = $row{'ergebnisnummer'};\n                    my $ergebnistext = $row{'ergebnistext'};\n                    my $transart = $row{'transart'};\n                    my $belegnummer = $row{'belegnummer'};\n                    my $trace = $row{'trace'};\n                    my $betrag = $row{'betrag'};\n                    my $kartenart = $row{'kartenart'}; \n                    my $kartennummer = $row{'kartennummer'};\n                    my $entrymode = $row{'entrymode'}; \n\n    my $sth = $dbh-&gt;prepare(\"INSERT INTO `teso`( Terminal, Zeitstempel, Ergebnisnummer, Ergebnistext, Transart, Belegnummer, Trace, Betrag, Kartenart, Kartennummer, Entrymode ) \n    values ( $tid, $zeit, $ergebnisnummer, $ergebnistext, $transart, $belegnummer, $trace, $betrag, $kartenart, $kartennummer, $entrymode )\");\n    $sth-&gt;execute() or die $DBI::errstr;\n    $sth-&gt;finish();\n</code></pre>\n\n<p>i didnt Change the variable names to english because maybe they are causing the Syntax error. This is the error message:</p>\n\n<blockquote>\n  <p>DBD::mysql::st execute failed: You have an error in your SQL syntax;\n  check the m anual that corresponds to your MySQL server version for\n  the right syntax to use near '' )' at line 2 at\n  C:\\Users\\Desktop\\findlogstamp\\sqlneu.pl lin e 50,  line 1. You\n  have an error in your SQL syntax; check the manual that corresponds to\n  your MySQL server version for the right syntax to use near '' )' at\n  line 2 at C:\\User s\\Desktop\\findlogstamp\\sqlneu.pl line 50, \n  line 1.</p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "search", "replace"], "comments": [{"owner": {"reputation": 16405, "user_id": 6776093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/heFeh.png?s=128&g=1", "display_name": "redneb", "link": "https://stackoverflow.com/users/6776093/redneb"}, "edited": false, "score": 2, "creation_date": 1472823596, "post_id": 39293497, "comment_id": 65921368, "body": "No, I don&#39;t think there is a better approach. You have to use the evaluate option in <code>s&#47;&#47;&#47;</code>. Note though, that this might be dangerous if you don&#39;t trust the user."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1472827782, "post_id": 39293497, "comment_id": 65924230, "body": "See also <a href=\"http://stackoverflow.com/questions/29107353/using-the-ee-modifier-safely-with-the-s-operator-when-the-right-side-is-input\">Using the ee modifier safely with the s/// operator when the right side is input from user</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1472828387, "post_id": 39293497, "comment_id": 65924631, "body": ".. and <a href=\"https://metacpan.org/pod/String::Substitution\" rel=\"nofollow noreferrer\">String::Substitution</a>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1472824991, "creation_date": 1472824991, "answer_id": 39294319, "question_id": 39293497, "link": "https://stackoverflow.com/questions/39293497/search-replacement-in-string/39294319#39294319", "title": "Search/replacement in string", "body": "<p>A double-quoted string cannot be interpolated without compiling it</p>\n\n<p>The <code>/ee</code> modifier carries the same warnings as <code>eval</code>: it is always dangerous to execute code of any sort entered by the user, and even a simple string may contain a block consisting of any Perl code the user likes to enter, like <code>\"my dangerous string @{ unlink glob '*.*'}\"</code></p>\n\n<p>I suggest that you make use of the excellent <a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow\"><code>String::Interpolate</code></a> module, which exports a <code>safe_interpolate</code> function that will use the <a href=\"https://metacpan.org/pod/Safe\" rel=\"nofollow\"><code>Safe</code></a> module to perform the interpolation in a \"safe\" compartment</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse String::Interpolate 'safe_interpolate';\n\nmy $text =    'fred flintstone and wilma flintstone are good couples';\nmy $regex =   '(fred|wilma) flintstone';\nmy $replace = '\\u\\L$1\\E Flintstone';\n\n$text =~ s/$regex/ safe_interpolate($replace) /eg;  # do replacement\n\nprint $text,\"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1472826054, "creation_date": 1472826054, "answer_id": 39294680, "question_id": 39293497, "link": "https://stackoverflow.com/questions/39293497/search-replacement-in-string/39294680#39294680", "title": "Search/replacement in string", "body": "<p>(First, you shouldn't use <code>-w</code> anymore. It's been supplanted by the (lexically scoped, more predictable) <code>use warnings</code> pragma in 2000.)</p>\n\n<p>For your problem, you could use <a href=\"https://metacpan.org/pod/Data::Munge#replace-STRING-REGEX-REPLACEMENT-FLAG\" rel=\"nofollow\"><code>replace</code></a> from the <a href=\"https://metacpan.org/pod/Data::Munge\" rel=\"nofollow\">Data::Munge</a> module, which is \"a clone of javascript's <code>String.prototype.replace</code>\".</p>\n\n<pre><code>use Data::Munge qw(replace);\n\n$text = replace($text, $regex, $replace, 'g');\n</code></pre>\n\n<p>This will expand things like <code>$&amp;</code> or <code>$1</code>, but not backslash sequences such as <code>\\u</code>. For that, you could specify your own expansion function, but then you'd have to parse and replace special sequences in your replacement string manually. For <code>$1</code> and friends, this is easy, but something like <code>\\Ufoo\\Q$1\\Ebar\\Ebaz</code> is hard to handle correctly, especially if <code>$1</code> contains <code>'\\E'</code> (even perl itself has had problems in this area historically). But if you get that part working, it's easy to plug into <code>replace</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 4633691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4647dac2390cda43fc6bd044dee749?s=128&d=identicon&r=PG&f=1", "display_name": "ashesh", "link": "https://stackoverflow.com/users/4633691/ashesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 39294319, "answer_count": 2, "score": 2, "last_activity_date": 1472826054, "creation_date": 1472822455, "last_edit_date": 1472823370, "question_id": 39293497, "link": "https://stackoverflow.com/questions/39293497/search-replacement-in-string", "title": "Search/replacement in string", "body": "<p></p>\n\n<p>I have a Perl program where the user enters some text, a search pattern and a replacement string.</p>\n\n<p>I am using the the <code>s///</code> operator to replace the search pattern by the replacement string, but in this scenario, if the user enters capture variables (like <code>$1</code>) or backslash escapes (like <code>\\u</code> or <code>\\L</code>) in the replacement string, the replacement pattern should process these metacharacters but rather it is treating them as string characters.</p>\n\n<p>I have the following code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\nuse strict;\n\nchomp(my $text =    &lt;STDIN&gt;);  #read the text\nchomp(my $regex =   &lt;STDIN&gt;); #read the search pattern\nchomp(my $replace = &lt;STDIN&gt;); #read the replacement pattern\n\n$text=~s/$regex/$replace/g;  # do replacement\n\nprint $text,\"\\n\";\n</code></pre>\n\n<p>The sample input for this code is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>fred flintstone and wilma flintstone are good couples\n(fred|wilma) flintstone\n\\u\\L$1\\E Flintstone\n</code></pre>\n\n<p>The output is for above code is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\\u\\L$1\\E Flintstone and \\u\\L$1\\E Flintstone are good couples\n</code></pre>\n\n<p>I have found a way to make this correct in the following code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\nuse strict;\n\nchomp(my $text    = &lt;STDIN&gt;);\nchomp(my $regex   = &lt;STDIN&gt;);\nchomp(my $replace = &lt;STDIN&gt;);\n\n$replace = '\"' . $replace . '\"';   # creating the string as '\"\\u\\L$1\\E Flintstone\"'\n\n$text = ~s/$regex/$replace/gee; # applying double evaluation\n\nprint $text,\"\\n\";\n</code></pre>\n\n<p>Now this code gives the correct output as</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Fred Flintstone and Wilma Flintstone are good couples\n</code></pre>\n\n<p>I want to know if there is a better approach for this problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472938306, "post_id": 39288159, "comment_id": 65955863, "body": "You have received three comprehensive answers, and you wrote in a comment that your problem has been solved. May I ask you to please select the solution that you think best answers your question and accept it by clicking the check mark next to it? That will mark your question as being resolved, and people will no longer come here thinking that you still need help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472938728, "post_id": 39288159, "comment_id": 65955955, "body": "I think it would be useful for you to read <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472973740, "post_id": 39288159, "comment_id": 65961359, "body": "it&#39;s done, thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472807504, "post_id": 39288586, "comment_id": 65911117, "body": "Minor style point - I&#39;d probably suggest using <code>or die</code> rather than <code>|| die</code> - the reason being that with parenthesis it&#39;s irrelevant, but you can write <code>open my $fh, &#39;&lt;&#39;, $filename or die &quot;$!&quot;</code> and it&#39;ll work properly, where with <code>||</code> it won&#39;t. I  would however, also suggest a 3 arg open."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1472807780, "post_id": 39288586, "comment_id": 65911327, "body": "Will do, I was already correcting the 3rd argument <code>open()</code> as we speak (as well as a programmatical error) :)"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 2, "creation_date": 1472808442, "post_id": 39288586, "comment_id": 65911799, "body": "Thank Drav for your help, but this don&#39;t give for exemple the common words between line 2 and line one, three and four for example, just the line one and the others."}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472808581, "post_id": 39288586, "comment_id": 65911897, "body": "@ahmed I typo&#39;ed, I forgot the <code>%previous = %present;</code> it should work fine now :)"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472810684, "post_id": 39288586, "comment_id": 65913279, "body": "same problem :( this is the result i have $VAR1 = [           &#39;perl&#39;,           &#39;java&#39;         ]; ----------------------------------------- $VAR1 = [           &#39;perl&#39;,           &#39;java&#39;         ]; ----------------------------------------- $VAR1 = [           &#39;java&#39;         ]; -----------------------------------------"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472811646, "post_id": 39288586, "comment_id": 65913836, "body": "Aaah you want to compare each line to the other three? (rather than 1st with 2nd, 2nd with 3rd, 3rd with 4th) which is what I&#39;m doing?"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472812110, "post_id": 39288586, "comment_id": 65914101, "body": "yes this is the result i want, the first line with the others, the seconde line with the first, the third and the fourth line, the third line with the first, the seconde and last line and so on"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472812513, "post_id": 39288586, "comment_id": 65914310, "body": "my $file= &#39;/home/ahmed/Bureau/test2/test5/terms.txt&#39;; open my $fh, &#39;&lt;&#39;, $file or die &quot;$!&quot;;  my %previous; while(&lt;$fh&gt;) {     my %present;      if(!%previous) {         %previous = map { lc($_) =&gt; 1 } split;         next;     } else {         %present = map { lc($_) =&gt; 1 } split;     }      my @intersection = grep { exists $present{$_} } keys %previous;      print Dumper(\\@intersection);     print &quot;-----------------------------------------\\n&quot;;      %previous = %present; } i taped your code, the result like i told you,"}, {"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "reply_to_user": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472817845, "post_id": 39288586, "comment_id": 65917522, "body": "@ahmed combined mine and <a href=\"http://stackoverflow.com/users/257635/chankey-pathak\">Chankey&#39;s</a> answers to give the solution you were looking for."}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472820002, "post_id": 39288586, "comment_id": 65918927, "body": "Ok Drav, i still look at all the solutions to find the best one, i will indicate it when i finish, thanks for your help really :)"}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472823065, "post_id": 39288586, "comment_id": 65921016, "body": "This seem the best solution :) but just a small problem, REALLY i&#39;m sorry, just i would the display like this Line 1 has 2 words in common with line 2 Line 1 has 3 words in common with line 3 Line 1 has 3 words in common with line 4, Line 2 has 2 words in common with line 1 Line 2 has 2 words in common with line 3 Line 1 has 2 words in common with line 4,and so on ... and just extract from each line the first word, i didn&#39;t arrive at it, or how to transform the result in simple array to facilitate the read"}], "tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": false, "score": 1, "last_activity_date": 1472823939, "last_edit_date": 1495542167, "creation_date": 1472807433, "answer_id": 39288586, "question_id": 39288159, "link": "https://stackoverflow.com/questions/39288159/compare-all-lines-in-a-file/39288586#39288586", "title": "Compare all lines in a file", "body": "<p>Combining <a href=\"https://stackoverflow.com/users/257635/chankey-pathak\">Chankey</a> and my answers, gives the below solution.</p>\n\n<p>First build an array of hashes, which represents each of the lines (the first <code>while</code> loop, based on Chankey's answer).</p>\n\n<p>We then step through each element of the array with a <code>foreach</code>. We then  create a <code>splice</code> of the other elements minus the present \"line\" we are processing which ends up in <code>@others</code>. Then we compare the \"present line\" <code>$lines[$count]</code> hash with <code>grep</code> against the other lines inside <code>@others</code> using <code>map</code> (where each element of <code>@others</code> is set in <code>$_</code> during the <code>map</code>). </p>\n\n<p>The result for each of these comparsions is put inside an array reference (the square brackets around the <code>grep</code>) and all comparisions foreach line are stored inside <code>%results</code>;   </p>\n\n<pre><code>use warnings;\nuse strict;    \nuse feature 'say';\n\nuse Data::Dumper;\n\nmy @lines;\nwhile(&lt;DATA&gt;) {\n    push @lines, { map { $_ =&gt; 1 } split };\n}\n\nmy %results;\nmy $count=0;\nforeach(@lines) {\n    say 'Comparing Line ' . ($count+1) . ' with other lines';\n\n    my @others = @lines;\n    splice @others, $count, 1;\n    # this is the same as my first answer, but doing so for\n    # each line via map()\n    @{ $results{$count+1} } = map {\n        [ grep { exists ${$lines[$count]}{$_} } keys %{ $_ } ]\n    } @others;\n\n    $count++;\n}\n\nprint Dumper(\\%results);\n__DATA__\nperl java python php scala\njava pascal perl ruby ada \nASP awk php java perl\nC# ada python java scala\n</code></pre>\n\n<p>Give the outputs</p>\n\n<pre><code>$VAR1 = {\n      '4' =&gt; [\n               [\n                 'python',\n                 'java',\n                 'scala'\n               ],\n               [\n                 'ada',\n                 'java'\n               ],\n               [\n                 'java'\n               ]\n             ],\n      '1' =&gt; [\n               [\n                 'perl',\n                 'java'\n               ],\n               [\n                 'perl',\n                 'php',\n                 'java'\n               ],\n               [\n                 'python',\n                 'java',\n                 'scala'\n               ]\n             ],\n      '3' =&gt; [\n               [\n                 'php',\n                 'perl',\n                 'java'\n               ],\n               [\n                 'perl',\n                 'java'\n               ],\n               [\n                 'java'\n               ]\n             ],\n      '2' =&gt; [\n               [\n                 'perl',\n                 'java'\n               ],\n               [\n                 'perl',\n                 'java'\n               ],\n               [\n                 'ada',\n                 'java'\n               ]\n             ]\n    };\n</code></pre>\n\n<p>Just to break down the more complex part:</p>\n\n<p>The <code>map</code> is iterating <code>@others</code>, which is an array of hashes.\nEach element corresponding to the \"other lines\" we are matching against.</p>\n\n<p>For each iteration of <code>map</code> we get each element of <code>@others</code> inside\n<code>$_</code>. This is each of the lines we are comparing against. We then get the keys of that specific array element (\"the words of that line\") via: </p>\n\n<pre><code>    keys %{ $_ }\n</code></pre>\n\n<p>Next we pass these words to <code>grep { }</code>, and it receives them in it's own <code>$_</code> (one for each word). So at this point we are stepping through each word of \"another line\", and seeing if it <code>exists</code> in our present line <code>$lines[$count]</code>: </p>\n\n<pre><code>    exists ${ $lines[$count] }{$_} \n</code></pre>\n\n<p>The words of our \"present line\" <code>${ $lines[$count] }</code>, with key <code>$_</code> (the word on the \"other line\" we're trying to match).</p>\n\n<p><code>grep</code> returns all the matched words of the present line vs the line being compared, and <code>map</code> does this for all lines inside <code>@others</code>. </p>\n\n<p>Finally each comparision's results, inside the <code>map()</code>, will return an array of arrays, which will be stored in the results hash with the key <code>$count+1</code> (the line number being compared to).</p>\n\n<pre><code>    @{ $results{$count+1} } =  map { ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 1, "creation_date": 1472810631, "post_id": 39288860, "comment_id": 65913250, "body": "This would be a more rational way of approaching it <i>if</i> you are looking to do more than just one comparision."}, {"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472810857, "post_id": 39288860, "comment_id": 65913368, "body": "Thanks chankey ; it work , but i tried to automatically pass to the next line but no result  for (my $i=2; $i&lt;5;$i++){ my @words_in_third_line = @{$lines{&#39;$i&#39;}};}   this not work this the error i have : Can&#39;t use an undefined value as an ARRAY reference at ./wordCount.pl line 79, &lt;F&gt; line 4."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 1, "creation_date": 1472813405, "post_id": 39288860, "comment_id": 65914802, "body": "@Ahmed: You have used <code>$i</code> inside single quote which is non-interpolable. Use it with double quotes. <code>&quot;$i&quot;</code>."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1472808741, "last_edit_date": 1472808741, "creation_date": 1472808146, "answer_id": 39288860, "question_id": 39288159, "link": "https://stackoverflow.com/questions/39288159/compare-all-lines-in-a-file/39288860#39288860", "title": "Compare all lines in a file", "body": "<blockquote>\n  <p>But I would like to compare also the second line with first, the third and the\n  fourth, the same for the third line</p>\n</blockquote>\n\n<p>My suggestion would be to create a proper data structure which contains line number and the words in it. So that it's easy to compare any line with another line. For example see below:</p>\n\n<pre><code>use warnings;\nuse strict;    \nuse Data::Dumper;\n\nmy %lines;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    my @words_in_line = split /\\s/, $_;\n    $lines{$.} = \\@words_in_line;\n}\nprint Dumper \\%lines;\n\n__DATA__\nperl java python php scala\njava pascal perl ruby ada \nASP awk php java perl\nC# ada python java scala\n</code></pre>\n\n<p>This gives below structure which you can easily work upon to get desired data:</p>\n\n<pre><code>$VAR1 = {\n          '4' =&gt; [\n                   'C#',\n                   'ada',\n                   'python',\n                   'java',\n                   'scala'\n                 ],\n          '3' =&gt; [\n                   'ASP',\n                   'awk',\n                   'php',\n                   'java',\n                   'perl'\n                 ],\n          '2' =&gt; [\n                   'java',\n                   'pascal',\n                   'perl',\n                   'ruby',\n                   'ada'\n                 ],\n          '1' =&gt; [\n                   'perl',\n                   'java',\n                   'python',\n                   'php',\n                   'scala'\n                 ]\n        };\n</code></pre>\n\n<p><strong>Example:</strong> Compare first line with third line</p>\n\n<pre><code>my @words_in_first_line = @{$lines{'1'}};\nmy @words_in_third_line = @{$lines{'3'}};\n\nmy @intersection = List::Compare-&gt;new(\\@words_in_first_line, \\@words_in_third_line)-&gt;get_intersection;\nprint @intersection;\n</code></pre>\n\n<p>This looks flexible to me, rather than doing everything in loop and handling previous/current/next line which is too restrictive.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472896674, "post_id": 39291370, "comment_id": 65944329, "body": "Thanks Bodorin, but have you any idea to compare also line 2 with line 1, 3 and 4, and compare line 3 with line 1, 2, and 4, and so on ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "edited": false, "score": 0, "creation_date": 1472902866, "post_id": 39291370, "comment_id": 65945818, "body": "@Ahmed: All possible pairs of lines have been compared.  Comparing line 2 with line 1 is the same as comparing line 1 with line 2 -- the output says that there are 2 words in common. The same applies to all the other pairs you think are missing."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472816309, "last_edit_date": 1472816309, "creation_date": 1472815979, "answer_id": 39291370, "question_id": 39288159, "link": "https://stackoverflow.com/questions/39288159/compare-all-lines-in-a-file/39291370#39291370", "title": "Compare all lines in a file", "body": "\n\n<p>This solution builds an array of hashes corresponding to the lines of the array. Then two nested loops use <code>grep</code> to count the number of words that occur both in any given hash and all following ones</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy @data;\n\nwhile ( &lt;DATA&gt; ) {\n    push @data, { map { $_ =&gt; 1 } split };\n}\n\nfor my $i ( 0 .. $#data-1 ) {\n\n    for my $j ( $i + 1 .. $#data ) {\n\n        my $join = grep { $data[$i]{$_} } keys %{ $data[$j] };\n\n        printf \"Line %s has %d word%s in common with line %d\\n\",\n            $i + 1,\n            $join,\n            $join == 1 ? '' : 's',\n            $j + 1;        }\n}\n\n\n\n__DATA__\nperl java python php scala\njava pascal perl ruby ada \nASP awk php java perl\nC# ada python java scala\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Line 1 has 2 words in common with line 2\nLine 1 has 3 words in common with line 3\nLine 1 has 3 words in common with line 4\nLine 2 has 2 words in common with line 3\nLine 2 has 2 words in common with line 4\nLine 3 has 1 word in common with line 4\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5618951, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f64af1c8dfefafdb01b1b63aba0bd9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5618951/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 39291370, "answer_count": 3, "score": 0, "last_activity_date": 1472823939, "creation_date": 1472806222, "last_edit_date": 1472808189, "question_id": 39288159, "link": "https://stackoverflow.com/questions/39288159/compare-all-lines-in-a-file", "title": "Compare all lines in a file", "body": "<p>I have a file contains this text: </p>\n\n<pre><code>perl java python php scala\njava pascal perl ruby ada \nASP awk php java perl\nC# ada python java scala\n</code></pre>\n\n<p>I would like to compare each two line and display the number of shared word, I wrote a program who display the shared number of word between the first line and the others lines, first line and second line contain 2 (perl, java) common word, first and third have 3 words, and first and fourth have 3 words.\nBut I would like to compare also the second line with first, the third and the fourth, the same for the third line, and so on. \nThis is my code:</p>\n\n<pre><code>open(F,\"/home/Bureau/test2/terms.txt\")||die \" Pb pour ouvrir\";\nmy $firstLine = &lt;F&gt;;\n\nmy @a =split(/ /, $firstLine);\nwhile (&lt;F&gt;) {\n\nmy @b = split(/ /,$_ );\n\nmy @intersection =\n    grep { defined }\n        @{ { map { lc ,=&gt; $_ } @a } }\n           { map { lc } @b };\nprint $#intersection.\"\\n\";\n} \n</code></pre>\n\n<p>I think that the problem is how to change the contents of @a with the next line, I tried but I didn't arrive at a solution, \nThanks for all.</p>\n"}, {"tags": ["perl", "file", "variables"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1472805566, "post_id": 39287902, "comment_id": 65909807, "body": "You can use an Array instead of variables for every column"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472806412, "post_id": 39287902, "comment_id": 65910402, "body": "And indeed - you <i>should</i> at any point where you&#39;ve &#39;numbered&#39; your variables."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472822575, "post_id": 39287902, "comment_id": 65920657, "body": "You should be using Text::CSV_XS. That will handle the quoted fields too."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1472805573, "creation_date": 1472805573, "answer_id": 39287962, "question_id": 39287902, "link": "https://stackoverflow.com/questions/39287902/how-to-read-a-line-and-save-multiple-parameters-into-variables-separated-by/39287962#39287962", "title": "how to read a line and save multiple parameters into variables separated by ;?", "body": "<p>If you're just doing 'numbered fields' then you should be thinking 'array':</p>\n\n<pre><code>use Data::Dumper;\nwhile ( &lt;$reader&gt; ) {  \n    chomp;\n    my @row = split /;/; \n    print Dumper \\@row;\n}\n</code></pre>\n\n<p>This will give you an array that you can access - e.g. <code>$row[0]</code> for the first element. </p>\n\n<pre><code>$VAR1 = [\n          '1',\n          '22',\n          '333',\n          '\\'4444\\'',\n          '55555'\n        ];\n</code></pre>\n\n<p>If you <em>know</em> what the headers are 'named' and prefer to work on names you can do something similar with a hash:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @cols = qw ( id value fish name sprout ); \n\nwhile ( &lt;DATA&gt; ) {\n    my %row;\n    chomp;\n    @row{@cols} = split /;/;\n    print Dumper \\%row;\n}\n\n__DATA__\n1;22;333;'4444';55555\n</code></pre>\n\n<p>This gives instead:</p>\n\n<pre><code>$VAR1 = {\n          'fish' =&gt; '333',\n          'name' =&gt; '\\'4444\\'',\n          'id' =&gt; '1',\n          'value' =&gt; '22',\n          'sprout' =&gt; '55555'\n        };\n</code></pre>\n\n<p>Note - hashes are unordered, but their whole point is that you don't need to care about the 'order' - just <code>print $row{name},\"\\n\";</code></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1472837435, "last_edit_date": 1472837435, "creation_date": 1472805985, "answer_id": 39288083, "question_id": 39287902, "link": "https://stackoverflow.com/questions/39287902/how-to-read-a-line-and-save-multiple-parameters-into-variables-separated-by/39288083#39288083", "title": "how to read a line and save multiple parameters into variables separated by ;?", "body": "<p>You need to read from the filehandle <code>$reader</code>, line by line. See the tutorial <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow\"><code>perlopentut</code></a> and the full reference <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>open</code></a>. \nThen you <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow\"><code>split</code></a> each line by the separator <code>;</code>, what returns a list which you assign to an array.</p>\n\n<pre><code>open my $reader, \"&lt;\", $currentfile or die \"Failed to open file: $!\\n\";\nwhile (my $line = &lt;$reader&gt;) {\n    chomp($line);\n    my @params = split ';', $line;\n    # do something with @params, it will be overwritten on next iteration\n}\nclose $reader;\n</code></pre>\n\n<p>The <em>diamond operator</em> <code>&lt;&gt;</code> reads from a filehandle, <code>&lt;$fh&gt;</code>, returning a line at a time. See about it <a href=\"http://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow\"><code>in perlop</code></a>. When there are no more lines it returns <code>undef</code> and looping stops. You may assign the string that it returns to a variable which you declare (<code>my $line</code>), which then exists only within the body of the <code>while</code> loop. If you don't, but do <code>while (&lt;$fh&gt;)</code> instead, the line is assigned to the <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow\"><code>special variable</code></a> <code>$_</code>, which is default for many things in Perl.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp</code></a> removes the linefeed (new line) from the end of the line.</p>\n\n<p>Note that <code>'4444'</code> from your example is <em>not</em> a number and cannot be used as such.</p>\n\n<p>Alternatively, you can take a reference to the array with parameters on each line, and put it in another array which thus will in the end contain all lines.</p>\n\n<pre><code>my @all_params;\nwhile (my $line = &lt;$reader&gt;) {\n   my @params = split ';', $line;\n   push @all_params, \\@params;\n}\n</code></pre>\n\n<p>Now <code>@all_params</code> has elements which are references, each to an array with parameters for one line. For how to work with references see the tutorial <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\"><code>perlreftut</code></a> and the Cookbook on complex data structures, <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\"><code>perldsc</code></a>.</p>\n\n<p>The following is more complex but let me mention it since it's a bit of an idiom. You can do the above in one statement</p>\n\n<pre><code>my @all_params = map { [ split ';', $_ ] } &lt;$reader&gt;;\n</code></pre>\n\n<p>This uses <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\"><code>map</code></a>, which applies the code in <code>{ ... }</code> to each element of the list that is submitted to it, returning a list. So it takes a list and returns the processed list. The <code>[...]</code> inside makes an <em>anonymous array</em>, equivalent to the reference we took of an array previously. The filehandle <code>&lt;$reader&gt;</code>returns all lines of the file in one list when invoked in the <em>list context</em>, which is in this case imposed by <code>map</code> (since it must receive a list).</p>\n\n<hr>\n\n<p>An important one: <em>always start your programs with</em></p>\n\n<pre><code>use warnings 'all';\nuse strict;\n</code></pre>\n\n<p>The order of these doesn't really matter. Mostly you'll see <code>use strict;</code> first.  </p>\n\n<p>Then your loop over filenames need be <code>foreach my $file (@file) { ... }</code> and you must <em>declare</em> all variables, so <code>my $currentfile = ...</code>.</p>\n"}], "owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1472837435, "creation_date": 1472805377, "last_edit_date": 1472806458, "question_id": 39287902, "link": "https://stackoverflow.com/questions/39287902/how-to-read-a-line-and-save-multiple-parameters-into-variables-separated-by", "title": "how to read a line and save multiple parameters into variables separated by ;?", "body": "<p>So lets say I have a file.txt, this documents Syntax is like this:</p>\n\n<pre><code>\"1;22;333;'4444';55555\",\n</code></pre>\n\n<p>I now want my code to do the following:</p>\n\n<ol>\n<li>open the file = already done</li>\n<li>read line and save each Parameter separated by <code>;</code> into a variable like ( $one = 1, $two = 22, $three = 333, $four = '4444', $five = 55555; )</li>\n<li>this step would be writing the variables into a DB but thats done already</li>\n<li>Loop until all lines of the file are done</li>\n</ol>\n\n<p>So I actually Need help with Step 2, i think I am able to do the Loop and DB code. Do you guys have any ideas or tips how I could do this? beginnerfriendly would be nice so I can learn out of it. </p>\n\n<pre><code>       foreach $file (@file){               \n           $currentfile = \"$currentdir\\\\$file\";\n           open(my $reader, \"&lt;\", $currentfile) or die \"Failed to open file: $!\\n\";\n           ?????\n           close $reader;\n       }\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472804904, "post_id": 39287675, "comment_id": 65909378, "body": "I think you first should familiarize yourself with concept of the <a href=\"https://en.wikipedia.org/wiki/Scunthorpe_problem\" rel=\"nofollow noreferrer\">Scunthorpe Problem</a>, and then approach this problem with more than a one liner (especially if other end users are involved). Also filtering of masks are often circumnavigated with 0 b 5 C u r 1 + y, that computers find hard to spot, whilst humans tend to be able to read."}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "reply_to_user": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "edited": false, "score": 0, "creation_date": 1472806741, "post_id": 39287675, "comment_id": 65910614, "body": "Thank @Draw Sloan, I am somewhat familiar of the spamming problem. However, I need to implement this with as few libraries as possible (it will be run on the client&#39;s side) so I can lose a bit from efficiency for the sake of simplicity."}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 6049292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5ib6.png?s=128&g=1", "display_name": "louigi600", "link": "https://stackoverflow.com/users/6049292/louigi600"}, "edited": false, "score": 1, "creation_date": 1472805603, "post_id": 39287772, "comment_id": 65909830, "body": "That will work fine as long as the to_mask.txt file does not contains lines with special characters that would need to be backslashed ... if so then the to_mask.txt could be manipulated prior so that it can be used as above."}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 596, "user_id": 6049292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5ib6.png?s=128&g=1", "display_name": "louigi600", "link": "https://stackoverflow.com/users/6049292/louigi600"}, "edited": false, "score": 0, "creation_date": 1472805835, "post_id": 39287772, "comment_id": 65910011, "body": "@louigi600: you&#39;re right...OP could change delimiters, to avoid <code>&#47;</code> problems... But this can be done only knowing the contents of <code>to_mask.txt</code> file, and using a character which is not present (if any...)."}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472806281, "post_id": 39287772, "comment_id": 65910321, "body": "@Sobrique: you&#39;re right, too... Ughhh... :-) See my updated answer, just posted a write-once solution..."}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "reply_to_user": {"reputation": 596, "user_id": 6049292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5ib6.png?s=128&g=1", "display_name": "louigi600", "link": "https://stackoverflow.com/users/6049292/louigi600"}, "edited": false, "score": 0, "creation_date": 1472806495, "post_id": 39287772, "comment_id": 65910464, "body": "Thanks @louigi600 for the effort, but as Sobrique points out, the emphasis is on efficiency, then simplicity. I was also thinking about iterating through the masking file, it does perform the job. But since grep already implements the Commentz-Walter algorithm quite efficiently, I didn&#39;t want to re-invent the wheel."}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 1, "creation_date": 1472806600, "post_id": 39287772, "comment_id": 65910532, "body": "@MarcoS: delimiters are not an issue, I can control the masking terms, nothing funky will be there"}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472807223, "post_id": 39287772, "comment_id": 65910931, "body": "@MarcoS Thanks, I tested both your answers, but it gives me an error: sed: 1: &quot;input.txt&quot;: command i expects \\ followed by text"}, {"owner": {"reputation": 596, "user_id": 6049292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5ib6.png?s=128&g=1", "display_name": "louigi600", "link": "https://stackoverflow.com/users/6049292/louigi600"}, "edited": false, "score": 0, "creation_date": 1472807875, "post_id": 39287772, "comment_id": 65911398, "body": "@MarcoS ... no just sed all the special caharacters used in regular expressions ... if none found sed won&#39;t replace them. but that would make things even less efficient. Well any solution using a shell is probabbly less then the most efficient. If you want efficiency you&#39;re gonna haveto get your hands dirty with some code."}, {"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472809099, "post_id": 39287772, "comment_id": 65912254, "body": "@vivasra, @ louigi600: right... But see my second update... One liner, working code... :-)"}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472809774, "post_id": 39287772, "comment_id": 65912698, "body": "@MarcoS Thanks, it does do the job. I&#39;ll definitely use your code too in the benchmark!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1472845070, "post_id": 39287772, "comment_id": 65933304, "body": "Those scripts will ALL be immensely slow (even the fastest one) and corrupt the output given various input file contents. See <a href=\"http://unix.stackexchange.com/questions/169716/why-is-using-a-shell-loop-to-process-text-considered-bad-practice\">why-is-using-a-shell-loop-to-process-text-considered-bad-pra&zwnj;&#8203;ctice</a> and google UUOC."}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": false, "score": 1, "last_activity_date": 1472809037, "last_edit_date": 1472809037, "creation_date": 1472805000, "answer_id": 39287772, "question_id": 39287675, "link": "https://stackoverflow.com/questions/39287675/finding-and-replacing-from-a-large-file/39287772#39287772", "title": "Finding and replacing from a large file", "body": "<p>You could try:</p>\n\n<pre><code>while read mask; do sed -i \"s/$mask/XXX/g\" input.txt; done &lt; to_mask.txt\n</code></pre>\n\n<p>Probably not the most efficient solution in the world, but it should do the job... :-)<br>\nAs a bonus it just uses the shell and the <code>sed</code> command...</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>This is a solution which is faster (it writes big <code>input.txt</code> file just once). \nIt first builds a <code>fullmask</code> variable, as the concatenation of all masks separated by <code>|</code> (the <code>OR</code> operator).\nThough, I find it less clear than first solution posted... :-)</p>\n\n<pre><code>fullmask=\"\"; cat to_mask.txt | while read mask; do fullmask=\"$fullmask|$mask\"; done &amp;&amp; sed -i \"s/$fullmask/XXX/g\" input.txt\n</code></pre>\n\n<p>Please not I have not tested this solution, it could contain some issue...<br>\nMore, it assumes <code>to_mask.txt</code> does not contain any <code>|</code> nor any <code>/</code> characters...</p>\n\n<p><strong>UPDATE 2</strong>:</p>\n\n<p>Sorry! <code>sed</code> does not support regexes, in substitutions... :-(<br>\nI came up with this solution using <code>perl</code>, much uglier, but definitely working (just tested on a simple use case):</p>\n\n<pre><code> fullmask=\"(\"; while read mask; do if [ \"$fullmask\" != \"(\" ]; then fullmask=\"$fullmask|$mask\"; else fullmask=\"$fullmask$mask\"; fi; done &lt; to_mask.txt; fullmask=\"$fullmask)\"; perl -p -i -e \"s/$fullmask/XXX/g\" input.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472807576, "post_id": 39288206, "comment_id": 65911175, "body": "Thanks. The non-capturing regex doesn&#39;t seem to work, but if I comment it out it works like a charm. By the way, if my mask terms are &quot;a&quot;, &quot;b&quot; and &quot;c&quot;, is this correct for a non-capturing $mega_regex: (?^:\\b(?:a|b|c)\\b)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472807875, "post_id": 39288206, "comment_id": 65911399, "body": "Hrm, not sure which bit isn&#39;t working - but yes, <code>(?:pattern)</code> is a noncapturing group. It&#39;s not vital in this case, but it&#39;s redundant. I&#39;m getting reasonable results (with a much smaller data set) with: <code>(?^:\\b(?:fish|foo|moo)\\b)</code>"}, {"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 0, "creation_date": 1472808327, "post_id": 39288206, "comment_id": 65911715, "body": "Not sure either, syntax seems to be fine. But as you said, that part is redundant, so your solution works perfectly."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1472806349, "creation_date": 1472806349, "answer_id": 39288206, "question_id": 39287675, "link": "https://stackoverflow.com/questions/39287675/finding-and-replacing-from-a-large-file/39288206#39288206", "title": "Finding and replacing from a large file", "body": "<p>I think I'd tackle it like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#read the mask file into memory. \nopen ( my $mask, '&lt;', \"to_mask.txt\" ) or die $!;\nchomp ( my @terms = &lt;$mask&gt; ); \nclose ( $mask );\n#build a really big regex\n#map quotemeta means handling metachars. \n#if you _know_ there are none, then you can omit this.\n#or if you actually want to be able to use regex in your terms file. \nmy $mega_regex = join \"|\", map { quotemeta } @terms; \n\n   #compile it into a non-capturing regex, and use \\b to anchor on word boundaries. \n   #You don't want to be filtering out Scunthorpe ... \n   $mega_regex = qr/\\b(?:$mega_regex)\\b/;\n\n#&lt;&gt; means iterate 'stdin' or 'files specified on command line'. \n#just like how grep/sed/awk does it\nwhile ( &lt;&gt; ) { \n    s/$mega_regex/XXX/g;\n    print;  #to STDOUT\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "edited": false, "score": 1, "creation_date": 1473036462, "post_id": 39299712, "comment_id": 65977419, "body": "Thanks, also for your comment above!"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1472845481, "creation_date": 1472845481, "answer_id": 39299712, "question_id": 39287675, "link": "https://stackoverflow.com/questions/39287675/finding-and-replacing-from-a-large-file/39299712#39299712", "title": "Finding and replacing from a large file", "body": "<p>You just need 1 command:</p>\n\n<pre><code>awk 'NR==FNR{t=(t?t\"|\":\"\")$0;next} {gsub(t,\"XXX\")} 1' to_mask.txt input.txt\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6786653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a192a23480a0592a0dc43ae9f08837?s=128&d=identicon&r=PG&f=1", "display_name": "vivasra", "link": "https://stackoverflow.com/users/6786653/vivasra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 39288206, "answer_count": 3, "score": 2, "last_activity_date": 1473302570, "creation_date": 1472804695, "last_edit_date": 1473302570, "question_id": 39287675, "link": "https://stackoverflow.com/questions/39287675/finding-and-replacing-from-a-large-file", "title": "Finding and replacing from a large file", "body": "<p>Masking problem: I need to locate and mask (i.e., replace with say \"XXX\") certain terms (words/expressions) from a single, large text file (input.txt, 100+ MB). The terms (10K+) that I need to locate are saved in a single file (to_mask.txt). How can I perform this in an efficient way?</p>\n\n<p>I was thinking of doing this in two steps: first locate the rows that actually contain the terms</p>\n\n<pre><code>grep -Ff to_mask.txt -o -n input.txt\n</code></pre>\n\n<p>Next go through the output and do the actual replacing (term -> \"XXX\").</p>\n\n<p>This seems a bit tedious, can it be done in a smarter way?</p>\n\n<p>Any combination of basic commands (grep, sed, awk, one-line-perl) are welcome!</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>MarcoS, Kenavoz, Ed Morton and Sobrique all gave working solutions, thanks!\nI chose Sobrique's solution as my accepted solution, since it was much faster than the rest given my data. It may not handle some special cases, but I'm sure it can be extended to able to do so, plus it does the job at hand in its current condition.</p>\n\n<p><strong>UPDATE2:</strong></p>\n\n<p>For reference, here's the solution provided by Kenavoz:</p>\n\n<pre><code>sed -f &lt;(sed 's~^~s\\~~;s~$~\\~XXX\\~~' to_mask.txt) input.txt\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1472806686, "post_id": 39286461, "comment_id": 65910587, "body": "Not sure where you got that code, but I have one slight quibble with it. <code>@list-1</code> is better written as <code>$#list</code>. <code>@list</code> in scalar context gives you the the number of elements in <code>@list</code> and subtracting one from that gives you the last index in the array. But <code>$#list</code> is a special variable that gives you the last index in <code>@list</code> without requiring the subtraction. It&#39;s more efficient and it better expresses your intention."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1472806781, "post_id": 39286461, "comment_id": 65910642, "body": "Oh. Actually I have another problem with that code. <code>@list</code> is a terrible name for an array variable. It promotes the incorrect (but depressingly common) idea that arrays and lists in Perl are the same thing."}, {"owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472808898, "post_id": 39286461, "comment_id": 65912117, "body": "@DaveCross Thanks for the information. I have taken the code from here : <a href=\"http://www.perlmonks.org/?node_id=388315\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=388315</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472810217, "post_id": 39286461, "comment_id": 65912992, "body": "And I see that <a href=\"http://www.perlmonks.org/?node_id=388325\" rel=\"nofollow noreferrer\">a reply there</a> had exactly the same quibbles as I did :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472822396, "post_id": 39286461, "comment_id": 65920531, "body": "@Dave Cross, Re &quot;<i>It&#39;s more efficient</i>&quot;, It&#39;s either a tiny tiny tiny bit more efficient or many many times less efficient depending on your version of Perl and how you use it. For example, <code>f(\\@a, 0, $#a)</code> is less efficient than <code>f(\\@a, 0, @a-1)</code> no matter what version of Perl you use. But talking of efficient here is <i>silly</i>!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472825175, "post_id": 39286461, "comment_id": 65922432, "body": "Everyone needs a little silliness in their life occasionally :-) And perhaps I was talking about programmer efficiency (ok, you got me - I wasn&#39;t). But I&#39;d be fascinated to read more about the example you cite. Do you have a link to a detailed explanation?"}], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 4, "last_activity_date": 1472801863, "last_edit_date": 1472801863, "creation_date": 1472801115, "answer_id": 39286598, "question_id": 39286461, "link": "https://stackoverflow.com/questions/39286461/finding-missing-numbers-in-a-list-in-perl/39286598#39286598", "title": "Finding missing numbers in a list in Perl", "body": "<blockquote>\n  <p>map <strong>EXPR</strong>,<strong>LIST</strong> </p>\n  \n  <p>Evaluates the BLOCK or EXPR for each element of LIST\n  (locally setting $_ to each element) and returns the list value\n  composed of the results of each such evaluation.</p>\n</blockquote>\n\n<p>In your case:</p>\n\n<pre><code>map $list[$_-1]+1..$list[$_]-1, 1..@list-1;\n</code></pre>\n\n<p><strong>LIST: <code>1..@list-1</code>:</strong> Is a list which contains elements from 1 to 4 (array length-1)</p>\n\n<p><strong>EXPR: <code>$list[$_-1]+1..$list[$_]-1</code>:</strong>  Uses the index from above (1 to 4) and evaluates expression with range operator.</p>\n\n<p>At each iteration below happens:</p>\n\n<pre><code>$list[1-1]+1..$list[1]-1: 1+1..2-1 = ''\n$list[2-1]+1..$list[2]-1: 2+1..5-1 = 34\n$list[3-1]+1..$list[3]-1: 5+1..6-1 = ''\n$list[4-1]+1..$list[4]-1: 6+1..7-1 = ''\n</code></pre>\n"}], "owner": {"reputation": 5041, "user_id": 1061331, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/w3Tbz.jpg?s=128&g=1", "display_name": "Chamara Keragala", "link": "https://stackoverflow.com/users/1061331/chamara-keragala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 39286598, "answer_count": 1, "score": 0, "last_activity_date": 1472801863, "creation_date": 1472800668, "question_id": 39286461, "link": "https://stackoverflow.com/questions/39286461/finding-missing-numbers-in-a-list-in-perl", "title": "Finding missing numbers in a list in Perl", "body": "<p>For instance, given ( 1, 2, 5, 6, 7), i'd like to determine that 3 and 4 are missing?</p>\n\n<p>I've found  following code which achieves my goal.</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\n@list= (1,2,5,6,7);\n@missing = map $list[$_-1]+1..$list[$_]-1, 1..@list-1;\nprint Dumper(\\@missing);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          3,\n          4\n        ];\n</code></pre>\n\n<p>Can someone please explain the logic behind above code?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1472797598, "post_id": 39285407, "comment_id": 65905312, "body": "See also <a href=\"http://stackoverflow.com/questions/23991032/extract-data-between-square-brackets-using-perl\">Extract data between square brackets using Perl</a>"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1472797622, "post_id": 39285407, "comment_id": 65905329, "body": "Your code is incorrect, Provide a mininmal working example."}, {"owner": {"reputation": 25, "user_id": 3789221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0d4fed0f41bf6ab99242ba64352061?s=128&d=identicon&r=PG&f=1", "display_name": "user3789221", "link": "https://stackoverflow.com/users/3789221/user3789221"}, "reply_to_user": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 0, "creation_date": 1472798997, "post_id": 39285407, "comment_id": 65906002, "body": "code is working correctly for me...how to do addition of a number within square brackets in perl... @Raju"}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "edited": false, "score": 1, "creation_date": 1472799672, "post_id": 39285407, "comment_id": 65906377, "body": "use strict and use warnings;"}], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 2, "creation_date": 1472804888, "post_id": 39287321, "comment_id": 65909366, "body": "Why not use <code>my @ranges = ( $line =~ &#47;\\[\\s(\\d*)\\sto\\s(\\d*)\\s]&#47;);</code> ? The conversion to int will be automatic when you add the number to <code>$ranges[0]</code> for example."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1472805426, "post_id": 39287321, "comment_id": 65909716, "body": "I did not knew this trick, feel free to edit my answer! Thank you for this knowledge!"}], "tags": [], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "is_accepted": true, "score": 2, "last_activity_date": 1472803505, "creation_date": 1472803505, "answer_id": 39287321, "question_id": 39285407, "link": "https://stackoverflow.com/questions/39285407/how-to-sum-the-value-in-a-matrix-element-or-within-square-brackets/39287321#39287321", "title": "how to sum the value in a matrix element or within square brackets[ ]", "body": "<pre><code>use strict;\n\nuse warnings;\n\nmy $file = \"path\\\\data.txt\";\n\nopen (my $fh, \"&lt;\", $file) or die \"can't open this file\";\n\nmy $number = 4;\n\nwhile ( my $line = &lt;$fh&gt;){\n\n    if ( $line =~ /\\[\\s(\\d*)\\sto\\s(\\d*)\\s]/){\n\n        my $first_range = int($1);\n        $first_range = $1 + $number;\n\n        my $second_range = int($2);\n        $second_range = $2 + $number;\n\n        print \"\\n[ $first_range to $second_range ]\";\n    }\n}\n</code></pre>\n\n<p>The regex will store in <code>$1</code> and <code>$2</code> the two ranges.</p>\n\n<pre><code>$line =~ /\\[\\s(\\d*)\\sto\\s(\\d*)\\s]/\n</code></pre>\n\n<p>Base on the input pattern  <code>[ number to number ]</code>.</p>\n\n<pre><code>int($1);\n</code></pre>\n\n<p>This will convert the string to integer.</p>\n\n<pre><code>$first_range = $1 + $number;\n</code></pre>\n\n<p>Adds to your range the number which you want ( i hardcoed it to be 4, <code>my $number = 4</code>).</p>\n"}], "owner": {"reputation": 25, "user_id": 3789221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0d4fed0f41bf6ab99242ba64352061?s=128&d=identicon&r=PG&f=1", "display_name": "user3789221", "link": "https://stackoverflow.com/users/3789221/user3789221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 39287321, "answer_count": 1, "score": -1, "last_activity_date": 1472803505, "creation_date": 1472796595, "last_edit_date": 1472798834, "question_id": 39285407, "link": "https://stackoverflow.com/questions/39285407/how-to-sum-the-value-in-a-matrix-element-or-within-square-brackets", "title": "how to sum the value in a matrix element or within square brackets[ ]", "body": "<p>suppose i have a value 2 \nto be <strong>added to the matrix or range</strong> having\n<strong>[ 99 to 103 ]\n[ 267 to 271 ]</strong>\n what's is the method of doing it ?</p>\n\n<p>expected output:[ 101 to 105 ]\n                [ 269 to 273 ].</p>\n\n<p>i have already fetch the range ..here is the code.</p>\n\n<pre><code>enter code here\n$input= $argv[0];\nopen($file,\"$input\");\nwhile($line=&lt;$file&gt;)\n{ \n  $ranges.=$line if($line=~m/\\[/);  \n  print   $ranges, \n if \n         ($line=~m/----------------------------------------------------------------------/);\n }\n</code></pre>\n\n<p>i want to add 2 to the matrix .thanks for any help</p>\n\n<p><strong>input file:</strong></p>\n\n<pre><code>&gt;13pk_A: starts from 5\nITNDYRIRSALPTLKKVLTEGGSCVLMSHLGRPKGIPMAQAGKIRSTGGVPGFQQKATL\nTotal number of repeat(s) = 2\nThe length of repeat = 4\nNumber of residues in the repeat = 4\nKKVL        z0\n[ 13 to 16 ]\n[ 44 to 47 ]\n----------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472790343, "post_id": 39284123, "comment_id": 65902850, "body": "At the very least, needs to be <code>-accel =&gt; $A</code>, which also means you&#39;ll need to move the initialization of <code>$A</code>. (<code>-accel</code>, <code>-accelerator</code> and <code>-accelerratortable</code> are aliases.)"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3829111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYb2S.png?s=128&g=1", "display_name": "Lik", "link": "https://stackoverflow.com/users/3829111/lik"}, "is_accepted": false, "score": 0, "last_activity_date": 1472917914, "creation_date": 1472917914, "answer_id": 39308732, "question_id": 39284123, "link": "https://stackoverflow.com/questions/39284123/syntax-for-win32guiacceleratortable/39308732#39308732", "title": "Syntax for Win32::GUI::AcceleratorTable", "body": "<p>I changed the code according to ikegami's hint which solved my problem. Thank you ikegami!</p>\n\n<pre><code># first initialize AcceleratorTable...\nmy $A = new Win32::GUI::AcceleratorTable(\n        \"Ctrl-X\"       =&gt; \"Close\",\n        \"Shift-N\"      =&gt; \"New\",\n        \"Ctrl-Alt-Del\" =&gt; \"Reboot\",\n        \"b\"      =&gt; sub { print \"Hello\\n\"; },\n);\n\n# ...and then define main window using the -accel option\nmy $window = Win32::GUI::Window-&gt;new(\n    -name   =&gt; 'MainWindow',\n    -width  =&gt; 250,\n    -height =&gt; 200,\n    -text   =&gt; 'keys',\n    -accel  =&gt; $A,\n);\n</code></pre>\n\n<p>...and voil\u00e0 - it works :-)</p>\n"}], "owner": {"reputation": 61, "user_id": 3829111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYb2S.png?s=128&g=1", "display_name": "Lik", "link": "https://stackoverflow.com/users/3829111/lik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472917914, "creation_date": 1472789048, "question_id": 39284123, "link": "https://stackoverflow.com/questions/39284123/syntax-for-win32guiacceleratortable", "title": "Syntax for Win32::GUI::AcceleratorTable", "body": "<p>I want my GUI to react on single key strokes.</p>\n\n<p>This works fine with the -keydown option as long as the windows object has the focus.</p>\n\n<p>To get feedback about keystrokes without the focus I want to use Win32::GUI::AcceleratorTable.</p>\n\n<p>In the docs I took the code snippets you can see in my code. But I'm confused about the syntax to use. Once the docs say Win32::GUI::Accelerator and in others there is mentioned Win32::AcceleratorTable (even though there is no such package on CPAN). The same with the options -accel, -accelerators and -acceleratortable.</p>\n\n<p>How has the code to look like to get feedback about keycode of a keystroke?</p>\n\n<p>Here is my (not working) code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Win32::GUI();\n\n# define main window\nmy $window = Win32::GUI::Window-&gt;new(\n    -name   =&gt; 'MainWindow',\n    -width  =&gt; 250,\n    -height =&gt; 200,\n    -text   =&gt; 'keys',\n    -accel  =&gt; Win32::GUI::AcceleratorTable,    # ????\n    # or -accelerator, or -acceleratortable     # ????\n);\n\n$window-&gt;AddLabel( -name =&gt; 'lblStatus', -top =&gt; 5, -left =&gt; 5, -text =&gt; \"pressed key\", );\n\n# a text field to give feedback about the key press\n$window-&gt;AddTextfield( -name =&gt; 'txtStatus',\n    -width =&gt; 80,\n    -height =&gt; 20,\n    -top =&gt; 20,\n    -left =&gt; 5,\n    -tip =&gt; \"displays value of key\",\n);\n\n# I took this from CPAN Win32::GUI::AcceleratorTable which should at least print\n# \"Hello\" on the console if one presses the lowercase letter \"b\" on the keyboard\n$A = Win32::GUI::AcceleratorTable-&gt;new(\n        \"Ctrl-X\"       =&gt; \"Close\",\n        \"Shift-N\"      =&gt; \"New\",\n        \"Ctrl-Alt-Del\" =&gt; \"Reboot\",\n        \"b\"      =&gt; sub { print \"Hello\\n\"; },\n);\n\n# display app\n$window-&gt;Show();\n\n# start of event handler\nWin32::GUI::Dialog();\n\nexit (0);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "reply_to_user": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "edited": false, "score": 0, "creation_date": 1472784798, "post_id": 39283409, "comment_id": 65901665, "body": "@Sebastian Lenartowicz Thanks for helping me clean my question up a bit."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1472784759, "post_id": 39283486, "comment_id": 65901657, "body": "Great! Thanks. You are right about the grep, but I really appreciated your perl answer for this. So many people want to remove duplicate lines, not unique lines. I was having a hard time with this question. You made it look easy! :)"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1472784909, "post_id": 39283486, "comment_id": 65901687, "body": "Finding lines in one file that match lines in another file is somewhat of a common Unix command-line task, so once you&#39;ve seen it a few times, the solution comes rather naturally! Happy to help."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 2, "last_activity_date": 1472783922, "last_edit_date": 1472783922, "creation_date": 1472783518, "answer_id": 39283486, "question_id": 39283409, "link": "https://stackoverflow.com/questions/39283409/perl-removing-unique-lines-between-two-files/39283486#39283486", "title": "Perl: removing unique lines between two files", "body": "<p>Something like this might get the job done. :-)</p>\n\n<pre><code>grep -f &lt;(grep ^m160505_ file1) file2\n</code></pre>\n\n<p>Here's a Perl solution, since that's what you asked:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\ndie \"usage: $0 &lt;file1&gt; &lt;file2&gt;\\n\"\n  unless @ARGV == 2;\n\nopen(my $file1, '&lt;', $ARGV[0])\n  or die \"Could not open file1: $!\\n\";\n\nmy %keys;\nwhile (&lt;$file1&gt;) {\n  chomp;\n  $keys{$_} = 1 if /^m160505_/;\n}\n\nclose($file1);\n\nopen (my $file2, '&lt;', $ARGV[1])\n  or die \"Could not open file2: $!\\n\";\n\nwhile (&lt;$file2&gt;) {\n  chomp;\n  my ($key) = /\\t(.+)$/;\n  print \"$_\\n\" if $keys{$key};\n}\n\nclose($file2);\n</code></pre>\n\n<p>In action:</p>\n\n<pre><code>$ grep -f &lt;(grep ^m160505_ file1) file2\nacCAATCCCATCACCATCtt    m160505_031746_42156_s1_p0|105337|10450_16161\natTAAAATACCATTATATgg    m160505_031746_42156_s1_p0|104750|20537_27903\ncaAACTCCAACTACGAACtg    m160505_031746_42156_s1_p0|103809|17563_25308\natCTATTTAAACCTAATCgg    m160505_031746_42156_s1_p0|103217|8075_11486\n\n$ ./atgc.pl file1 file2\nacCAATCCCATCACCATCtt    m160505_031746_42156_s1_p0|105337|10450_16161\natTAAAATACCATTATATgg    m160505_031746_42156_s1_p0|104750|20537_27903\ncaAACTCCAACTACGAACtg    m160505_031746_42156_s1_p0|103809|17563_25308\natCTATTTAAACCTAATCgg    m160505_031746_42156_s1_p0|103217|8075_11486\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 39283486, "answer_count": 1, "score": 0, "last_activity_date": 1472784234, "creation_date": 1472782874, "last_edit_date": 1472784234, "question_id": 39283409, "link": "https://stackoverflow.com/questions/39283409/perl-removing-unique-lines-between-two-files", "title": "Perl: removing unique lines between two files", "body": "<p>Instead of removing duplicate lines, I am interested in removing unique lines found between two files. The files have different formats. </p>\n\n<p>File 1: </p>\n\n<pre><code>m160505_031746_42156_s1_p0|105337|10450_16161\nm160505_031746_42156_s1_p0|104750|20537_27903\nm160505_031746_42156_s1_p0|103809|17563_25308\nm160505_031746_42156_s1_p0|103217|8075_11486 \n</code></pre>\n\n<p>File 2 (tab separated):</p>\n\n<pre><code>acCAATCCCATCACCATCtt    m160505_031746_42156_s1_p0|105337|10450_16161\natTAAAATACCATTATATgg    m160505_031746_42156_s1_p0|104750|20537_27903\ncaAACTCCAACTACGAACtg    m160505_031746_42156_s1_p0|103809|17563_25308\natCTATTTAAACCTAATCgg    m160505_031746_42156_s1_p0|103217|8075_11486\nacCAATCCCATCACCATCtt    m160505_031746_42156_s1_p0|152092|36592_40830\natTAAAATACCATTATATgg    m160505_031746_42156_s1_p0|143825|13009_23809\ncaAACTCCAACTACGAACtg    m160505_031746_42156_s1_p0|143710|0_20191\natCTATTTAAACCTAATCgg    m160505_031746_42156_s1_p0|140833|25358_34709\n</code></pre>\n\n<p>File 2 has the same lines as File 1 in column 2, preceded by 20 letters in column 1. The 20 letter pattern in column 1 is repeated in File 2 (several times, more than just twice), with unique associated sequences each occurrence.</p>\n\n<p>I would like to match the sequences in File 1 with the second column in File 2. If there is a match, I would like to then generate a new file with both columns for each match, maintaining the relationship File 2 has between the two columns. In effect, I am looking to simply remove the rows in File 2 that do not have column 2 matches in File 1.</p>\n\n<p>I realize my code needs help, but here is what I have so far to give you more of an idea of how I am thinking. I will probably end up needing to use a hash, although I am worried about doing so because of the repeats in column 1. I don't want to lose those and their relationships to column 2. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(OUT, '&gt;', '/path/to/out.txt') or die $!;\nopen(FMT0, '&lt;', '/path/to/fmt0.txt') or die $!;\n\nmy $regex = qr/m160505_.*/;\nwhile(my $line = &lt;FMT0&gt;){\n    $line =~ $regex;\n    open(FMT6, '&lt;', '/path/to/fmt6.txt') or die $!;\n    while(my $zero_fmt = &lt;FMT6&gt;){\n            if ($zero_fmt =~ /([A-Z]{20})\\t($line)/i){\n                    print OUT $zero_fmt;\n            }\n    }\n}\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472802959, "post_id": 39283325, "comment_id": 65908262, "body": "Why do you load the CGI and IO::Handle modules, but make no use of them? Are they used in other bits of the program that you haven&#39;t shown us?"}, {"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1472806993, "post_id": 39283325, "comment_id": 65910802, "body": "@Dave, I&#39;ve used autoflush before deciding to open and close the file in the loop."}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "edited": false, "score": 0, "creation_date": 1472783796, "post_id": 39283426, "comment_id": 65901453, "body": "Yes, that was it. Now you works as expected. Thank you very much!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1472782994, "creation_date": 1472782994, "answer_id": 39283426, "question_id": 39283325, "link": "https://stackoverflow.com/questions/39283325/perl-file-i-o-issue/39283426#39283426", "title": "Perl file I/O issue", "body": "<p>You need to <code>close</code> the file <em>before</em> the <code>sleep</code>. As it stands, the data is flushed to the file by the <code>close</code> and then immediately overwritten by the next <code>open</code>, and left empty for one second</p>\n\n<p>You also need to write</p>\n\n<pre><code>close $html_file or die $!\n</code></pre>\n\n<p>as the code you have is equivalent to</p>\n\n<pre><code>close($html_file || die)\n</code></pre>\n\n<p>so your program will never die as long as <code>$html_file</code> is <em>true</em></p>\n"}], "owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 39283426, "answer_count": 1, "score": 0, "last_activity_date": 1472893407, "creation_date": 1472782163, "last_edit_date": 1472893407, "question_id": 39283325, "link": "https://stackoverflow.com/questions/39283325/perl-file-i-o-issue", "title": "Perl file I/O issue", "body": "<p>I'm developing a Perl script that's supposed to generate an HTML file from numerical values from other file. The idea is to read the file that has these values and then list them in a separate HTML file. The file that contains the numerical values is updated every a certain period of time, and those changes should be seen on the HTML. </p>\n\n<p>Even though these values are correctly read (I've tested it) they are not printed in the HTML. Whats-more, the HTML tags are not even printed. This is the code I've written:</p>\n\n<pre><code>#!/usr/bin/perl\nuse IO::Handle;\nuse CGI qw(:standard);\n\nprint \"Status: 200 OK\", \"\\n\";\nprint \"Content-type: text/plain\", \"\\n\\n\";\n\nfor(;;) {\n    open (my $input_file, \"&lt;\", \"/path/to/input/file/input_file.txt\") || die \"Unable to open the file: $!\";\n    open (my $html_file, \"&gt;\", \"/path/to/html/file/index.html\") || die \"Unable to open the HTML file: $!\";\n    print $html_file \"&lt;html&gt;&lt;head&gt;&lt;title&gt;title&lt;/title&gt;&lt;META HTTP-QUIV='refresh' CONTENT='10'&gt;&lt;/head&gt;&lt;body&gt;\";\n    @lines = &lt;$input_file&gt;;\n    foreach my $line (@lines) {\n        print $html_file \"&lt;p&gt;$line&lt;/p&gt;\";\n    }\n    print $html_file \"&lt;/body&gt;&lt;/html&gt;\";\n    sleep 1;\n    close $input_file || die;\n    close $html_file || die; \n}\n</code></pre>\n\n<p>The script only works in the first <strong>for</strong> iteration. What I mean is that the HTML tags and the numerical values are correctly printed in the output file. Then, from iteration 2 to N, the <strong>file remains literally empty</strong>. I can not see what I'm missing here. Why does it work in the first iteration but not in the following ones?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["regex", "string", "perl", "sas"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1472782167, "post_id": 39283304, "comment_id": 65901082, "body": "SO is not a free coding service. If you&#39;ve been working on this for a week, surely you have some attempts that came close to what you want. Post them, and then we can help you fix them. But we&#39;re not going to do it for you."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1472782218, "post_id": 39283304, "comment_id": 65901093, "body": "Can&#39;t you just use <code>^weight$</code> for Q1?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472788154, "post_id": 39283304, "comment_id": 65902368, "body": "Your (1), as shown, is simple (<code>&#47;^weight\\s*$&#47;</code>) ... and then the problem with that is that (2) and (3) aren&#39;t relevant -- you don&#39;t need all that to distinguish them.  If you really want it, as an exercise, it&#39;s a basic use of lookarounds. For example, <code>&#47;weight(?!\\s*(?:change|percentile))&#47;</code> to have it match <code>weight</code> without listed words after it, etc. // It takes experience, so some years.  However, you can pick up basics pretty rapidly, for very adequate use. // Most importantly: please make your questions far more specific -- tell us <i>what</i> is bothering, show us what you did."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472788437, "post_id": 39283304, "comment_id": 65902439, "body": "By this question it appears that you may need a <i>thorough</i> read on this, beginning to end, from some introductory text.  The <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perlretut</code></a> is good, and the part on <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\"><code>lookarounds</code></a> in particular, I think. There are many other sources out there.  Better yet, perhaps a chapter from your favorite Perl book.  If you are trying to &#39;figure it out&#39; by poklng around it may be tough. I&#39;d say, first read up on it then play."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1472838076, "post_id": 39283304, "comment_id": 65929974, "body": "Correction for the first example in the comment above -- since your strings may have space at the beginning you need <code>&#47;^\\s*weight\\s*$&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1472788937, "post_id": 39283606, "comment_id": 65902529, "body": "Technically, <code>^weight\\z</code> for #1 as <code>^weight$</code> matches both <code>&quot;weight&quot;</code> and <code>&quot;weight\\n&quot;</code>"}, {"owner": {"reputation": 53, "user_id": 2529904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec6dd7513731ea50af7b395726c52ae?s=128&d=identicon&r=PG", "display_name": "Ryan Liebert", "link": "https://stackoverflow.com/users/2529904/ryan-liebert"}, "edited": false, "score": 0, "creation_date": 1472820494, "post_id": 39283606, "comment_id": 65919234, "body": "Thanks so much. Sorry I didn&#39;t include more of what I have tried.  ^weight$ was not successful however, to my surprise (as is often the case with regex code) that didn&#39;t match anything in the list..  I was trying to modify the code: /(?&lt;!percentile )(?&lt;!change )weight(?! ?change| percentile)/  instead to positive lookbehind/aheads, I tried this: /(?&lt;=percentile )(?&lt;=change )weight(?= ?change| percentile)/  But that actually doesn&#39;t match anything. Do you know why that is? :)"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1472921691, "post_id": 39283606, "comment_id": 65951175, "body": "That change means you&#39;re asking for &quot;weight&quot; to be simultaneously preceded by &quot;percentile&quot; and &quot;change&quot;, which doesn&#39;t make sense as only one of those can actually be there. So that will never match anything at all. The lookahead alone would work as it contains an alternation, so either of <code>change</code> with or without a preceding space, or <code>percentile</code> would be allowed."}], "tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": true, "score": 1, "last_activity_date": 1472784508, "creation_date": 1472784508, "answer_id": 39283606, "question_id": 39283304, "link": "https://stackoverflow.com/questions/39283304/perl-regex-matching-match-string-with-single-word-only-how-to-use-negative-loo/39283606#39283606", "title": "Perl regex matching: Match string with single word only, how to use negative lookbehind lookahead as well", "body": "<p>1) @Barmar mentioned it already: <code>^weight$</code> is fine for doing what you're asking. Are you sure that's what you want though, i.e. \"weight\" on a line by itself?</p>\n\n<p>2) You could do something like <code>/(?&lt;!percentile )(?&lt;!change )weight(?! ?change| percentile)/</code>. The negative lookbehinds can't be written as <code>(?&lt;!change |percentile )</code> as the RE engine does not support variable width lookbehind but as the matches are zero-width you can just list them separately. All that looks awfully specific though. It would fail e.g. if your text contained these words separated by a line break.</p>\n\n<p>3) Just add another negative lookbehind for <code>****</code> and <code>water</code>.</p>\n\n<p>I'm not all that good at regex :) And I never sat down and decided to learn the ins and outs, that's pretty useless if you don't have a use case; you'll just forget it in a short while. Now that I've been using regexen for over 20 years I'm still learning new things, like how to match Unicode properties just a few weeks ago.</p>\n"}], "owner": {"reputation": 53, "user_id": 2529904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fec6dd7513731ea50af7b395726c52ae?s=128&d=identicon&r=PG", "display_name": "Ryan Liebert", "link": "https://stackoverflow.com/users/2529904/ryan-liebert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 39283606, "answer_count": 1, "score": 1, "last_activity_date": 1472784508, "creation_date": 1472781949, "last_edit_date": 1472782121, "question_id": 39283304, "link": "https://stackoverflow.com/questions/39283304/perl-regex-matching-match-string-with-single-word-only-how-to-use-negative-loo", "title": "Perl regex matching: Match string with single word only, how to use negative lookbehind lookahead as well", "body": "<p>I'm genuinely exhausted in trying to get this regex to work. I'm using perl regex in sas. If anyone could help me I'd greatly appreciate it. I have three questions, consider the following lines of text (the line numbers are only there for reference):</p>\n\n<pre><code>1 weight\n2 weightchange\n3 weight change\n4 weight percentile\n5 change weight\n6 percentile weight\n7 **** weight pre op\n8 water weight\n9 weight percentile\n10 myocardial infarction\n</code></pre>\n\n<ol>\n<li><p>How would I use regex to match <code>1</code> but NOT <code>2-9</code>? (is the a way to match a word that is at the beginning and end simultaneously?)</p></li>\n<li><p>How would I use regex and negative lookahead / lookbehind assertions to match <code>1</code> and then explicitly exclude <code>2-6</code>?</p></li>\n<li><p>How would I modify the regex suitable to solve Q2 to then exclude <code>7</code> and <code>8</code>?</p></li>\n</ol>\n\n<p>Bonus question: How long did it take you to get <em>good</em> at using regex? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["mysql", "perl", "dbi", "dbix-class"], "comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1472859727, "post_id": 39282938, "comment_id": 65937832, "body": "hello abra do you have any suggestion? have you worked with DBIx? do you know DBIx? any of your friends know DBIx? pl show them this question."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1473110272, "post_id": 39282938, "comment_id": 66006699, "body": "DBIx is a whole namespace in which DBIx::Class is just one module. The abbreviation of DBIx::Class is DBIC."}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1473084100, "post_id": 39308147, "comment_id": 65995955, "body": "accepted and up-voted. thx for your time and help Frew. It is many times better then many other site-admins who clearly have no knowledge of DBIx but down-voted and ready to critique."}], "tags": [], "owner": {"reputation": 9154, "user_id": 12448, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/88c6023527fbe5a832d1092d7d032a95?s=128&d=identicon&r=PG", "display_name": "Frew Schmidt", "link": "https://stackoverflow.com/users/12448/frew-schmidt"}, "is_accepted": true, "score": 3, "last_activity_date": 1472913775, "creation_date": 1472913775, "answer_id": 39308147, "question_id": 39282938, "link": "https://stackoverflow.com/questions/39282938/equivalent-dbixclass-syntax/39308147#39308147", "title": "equivalent DBIx::Class syntax?", "body": "<p>So first you'd define a rel on the tags from products.</p>\n\n<pre><code> MySchema::Result::Product-&gt;has_many(\n    'tags', 'MySchema::Result::ProductTag', 'product_id'\n );\n</code></pre>\n\n<p>Thne define a rel on products from tags:</p>\n\n<pre><code> MySchema::Result::ProductTag-&gt;belongs_to(\n    'products', 'MySchema::Result::Product', 'product_id'\n );\n</code></pre>\n\n<p>These would have already been inferred if you were using Schema::Loader by the way. (Shameless plug: the above would be shorter and sweeter with DBIx::Class::Candy and DBIx::Class::Helper::Row::RelationshipDWIM)</p>\n\n<p>Now to replicate your original query:</p>\n\n<pre><code>$schema-&gt;resultset('Product')-&gt;search({\n  tags.tag_id =&gt; { -in =&gt; [1,23,54] },\n}, {\n  join =&gt; 'tags',\n  group_by =&gt; 'me.product_id',\n  having =&gt; { 'count 1' =&gt; 3 },\n})\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 39308147, "answer_count": 1, "score": -2, "last_activity_date": 1472913775, "creation_date": 1472778392, "last_edit_date": 1495535628, "question_id": 39282938, "link": "https://stackoverflow.com/questions/39282938/equivalent-dbixclass-syntax", "title": "equivalent DBIx::Class syntax?", "body": "<p>i have this mysql query from this <a href=\"https://stackoverflow.com/questions/11409869/mysql-nm-relationship-find-rows-with-several-specific-relations\">question</a>.</p>\n\n<pre><code>SELECT a.*\nFROM products a\nINNER JOIN product_tags b ON a.product_id = b.product_id\nWHERE b.tag_id IN (1,23,54)\nGROUP BY a.product_id\nHAVING COUNT(1) = 3\n</code></pre>\n\n<p>i am trying to figure how to get this converted to <a href=\"http://search.cpan.org/~ribasushi/DBIx-Class-0.082840/lib/DBIx/Class.pod\" rel=\"nofollow noreferrer\">DBIx::Class</a> syntax?</p>\n\n<p>from DBIx docs, this is what it says about joins, but i am not sure how to incorporate it?</p>\n\n<p>DEFINING JOINS AND RELATIONSHIPS ^</p>\n\n<p>In DBIx::Class each relationship between two tables needs to first be defined in the ResultSource for the table. If the relationship needs to be accessed in both directions (i.e. Fetch all tracks of a CD, and fetch the CD data for a Track), then it needs to be defined for both tables.</p>\n\n<p>For the CDs/Tracks example, that means writing, in MySchema::CD:</p>\n\n<pre><code>  MySchema::CD-&gt;has_many('tracks', 'MySchema::Tracks');\n</code></pre>\n\n<p>And in MySchema::Tracks:</p>\n\n<pre><code>  MySchema::Tracks-&gt;belongs_to('cd', 'MySchema::CD', 'CDID');\n</code></pre>\n\n<p>There are several other types of relationships, they are more comprehensively described in DBIx::Class::Relationship.\nUSING JOINS ^</p>\n\n<p>Once you have defined all your relationships, using them in actual joins is fairly simple. The type of relationship that you chose e.g. has_many, already indicates what sort of join will be performed. has_many produces a LEFT JOIN for example, which will fetch all the rows on the left side, whether there are matching rows on the right (table being joined to), or not. You can force other types of joins in your relationship, see the DBIx::Class::Relationship docs.</p>\n\n<p>When performing either a search or a find operation, you can specify which relations to also refine your results based on, using the join attribute, like this:</p>\n\n<pre><code>  $schema-&gt;resultset('CD')-&gt;search(\n    { 'Title' =&gt; 'Funky CD',\n      'tracks.Name' =&gt; { like =&gt; 'T%' }\n    },\n    { join      =&gt; 'tracks',\n      order_by  =&gt; ['tracks.id'],\n    }\n  );\n</code></pre>\n\n<p>If you don't recognise most of this syntax, you should probably go read \"search\" in DBIx::Class::ResultSet and \"ATTRIBUTES\" in DBIx::Class::ResultSet, but here's a quick break down:</p>\n\n<p>The first argument to search is a hashref of the WHERE attributes, in this case a restriction on the Title column in the CD table, and a restriction on the name of the track in the Tracks table, but ONLY for tracks actually related to the chosen CD(s). The second argument is a hashref of attributes to the search, the results will be returned sorted by the id of the related tracks.</p>\n"}, {"tags": ["perl", "pack", "unpack"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1472757937, "post_id": 39279371, "comment_id": 65893335, "body": "I think you should split your second question into a separate post; it&#39;s not really related to the first question. It will be easier for future visitors to find answers that way."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1472758413, "post_id": 39279371, "comment_id": 65893550, "body": "12.2 is a decimal number that is equal to 122/10. But it cannot be represented by the expression <code>m&#47;(2**n)</code>, and therefore cannot be represented accurately using data types that rely on C&#39;s floating point types.  The precision is lost the moment your code experiences the number 12.2 -- internally there is no such thing as the floating point value 12.2.  We have similar problems in base-10, but have grown accustomed to them, so they don&#39;t surprise us.  An example would be expressing 1/3rd in decimal form: 0.33? Close by some measures, but not accurate."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1472758887, "post_id": 39279371, "comment_id": 65893795, "body": "Your array <code>@Data</code> is artificial. Ordinarily it will consist of text strings, not floating-point numbers. I think you need to send the text <code>&quot;@Data&quot;</code> instead of trying to pack the values as floating point. The &quot;other end&quot;, whatever it is, can easily split the string on whitespace and recover exactly what was sent."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472759147, "post_id": 39279371, "comment_id": 65893934, "body": "Please, <b><i>always</i></b> <code>use strict</code>, even in the most trivial of Perl programs"}, {"owner": {"reputation": 47, "user_id": 6783878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbXLIrQ2wvI/AAAAAAAAAAI/AAAAAAAAASU/hL4-oO1xPAE/photo.jpg?sz=128", "display_name": "Asheesh", "link": "https://stackoverflow.com/users/6783878/asheesh"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472759184, "post_id": 39279371, "comment_id": 65893949, "body": "Thanks.. i will ask it as a Second question..  @ThisSuitIsBlackNot"}, {"owner": {"reputation": 12658, "user_id": 5920214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4bbe6feca39eebe96274d3f07c44d9?s=128&d=identicon&r=PG", "display_name": "tfb", "link": "https://stackoverflow.com/users/5920214/tfb"}, "edited": false, "score": 4, "creation_date": 1472762935, "post_id": 39279371, "comment_id": 65895643, "body": "Assuming you are dealing in latitudes and longitudes in degrees, on Earth, then the error between 12.2 and 12.199999892651, at the equator is 12mm."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6783878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbXLIrQ2wvI/AAAAAAAAAAI/AAAAAAAAASU/hL4-oO1xPAE/photo.jpg?sz=128", "display_name": "Asheesh", "link": "https://stackoverflow.com/users/6783878/asheesh"}, "edited": false, "score": 0, "creation_date": 1472759147, "post_id": 39279696, "comment_id": 65893933, "body": "The Receiving hardware end can only accepts values... It cannot accept the strings"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 47, "user_id": 6783878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbXLIrQ2wvI/AAAAAAAAAAI/AAAAAAAAASU/hL4-oO1xPAE/photo.jpg?sz=128", "display_name": "Asheesh", "link": "https://stackoverflow.com/users/6783878/asheesh"}, "edited": false, "score": 0, "creation_date": 1472759295, "post_id": 39279696, "comment_id": 65893999, "body": "Then I think you are going to have to accept some loss of accuracy. You might try the &quot;d&quot; (double) pack format instead of &quot;f&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 47, "user_id": 6783878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbXLIrQ2wvI/AAAAAAAAAAI/AAAAAAAAASU/hL4-oO1xPAE/photo.jpg?sz=128", "display_name": "Asheesh", "link": "https://stackoverflow.com/users/6783878/asheesh"}, "edited": false, "score": 0, "creation_date": 1472759297, "post_id": 39279696, "comment_id": 65894000, "body": "@Asheesh: If the receiving end can accept only packed floating point then you are stuck with losing accuracy."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472759314, "post_id": 39279696, "comment_id": 65894007, "body": "@Borodin Jinx. :)"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 4, "last_activity_date": 1472758987, "creation_date": 1472758987, "answer_id": 39279696, "question_id": 39279371, "link": "https://stackoverflow.com/questions/39279371/how-can-i-eliminate-floating-point-inaccuracy-when-i-pack-and-unpack-a-floating/39279696#39279696", "title": "How can I eliminate floating point inaccuracy when I pack and unpack a floating point number?", "body": "<p>The short answer is: don't pack these numbers as floats. You will lose accuracy due to IEEE floating point representation. Instead, convert them to \"character decimals\" (i.e. strings), and pack them as strings. If you really need the accuracy, and don't need to perform math operations on them, you may want to store them as strings in Perl as well. </p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 7, "last_activity_date": 1472852243, "last_edit_date": 1472852243, "creation_date": 1472759273, "answer_id": 39279774, "question_id": 39279371, "link": "https://stackoverflow.com/questions/39279371/how-can-i-eliminate-floating-point-inaccuracy-when-i-pack-and-unpack-a-floating/39279774#39279774", "title": "How can I eliminate floating point inaccuracy when I pack and unpack a floating point number?", "body": "<p><code>pack</code>'s <code>f</code> template is for single-precision floating point numbers, which on most platforms is good to 7 or so decimal places of accuracy. The <code>d</code> template offers double-precision and will be good enough for ~15 decimal places.</p>\n\n<pre><code>print unpack(\"f\", pack(\"f\",12.2));          # \"12.1999998092651\"\nprint unpack(\"d\", pack(\"d\",12.2));          # \"12.2\"\n\nprintf \"%.20f\",unpack(\"f\", pack(\"f\",12.2)); # \"12.19999980926513671875\"\nprintf \"%.20f\",unpack(\"d\", pack(\"d\",12.2)); # \"12.19999999999999928946\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472852207, "last_edit_date": 1472852207, "creation_date": 1472789357, "answer_id": 39284161, "question_id": 39279371, "link": "https://stackoverflow.com/questions/39279371/how-can-i-eliminate-floating-point-inaccuracy-when-i-pack-and-unpack-a-floating/39284161#39284161", "title": "How can I eliminate floating point inaccuracy when I pack and unpack a floating point number?", "body": "<p>2/10 is a periodic number in binary just like 1/3 is a periodic number in decimal. It's impossible to store it exactly in a floating point number as it would take infinite storage.</p>\n\n<p>As such, it's not <code>pack</code> that's introducing the error; it's faithfully storing precisely the number you provided it.</p>\n\n<pre><code>$ perl -E'say sprintf \"%.20e\", 12.2'\n1.21999999999999992895e+01\n\n$ perl -E'say sprintf \"%.20e\", unpack \"d\", pack \"d\", 12.2'\n1.21999999999999992895e+01\n</code></pre>\n\n<p>As long as you use floating point numbers, you will not be able to store 12.2 exactly.</p>\n\n<p>But as you can see above, you can store store precisely enough by using <code>d</code> (double-precision, almost 16 digits of precision) instead of <code>f</code> (single-precision, over 7 digits of precision). Perl uses double-precision, so you were actually introducing precision loss by using <code>f</code> instead of <code>d</code>.</p>\n\n<p>So use <code>d</code>, and round your results (<code>sprintf \"%.10f\"</code>).</p>\n"}], "owner": {"reputation": 47, "user_id": 6783878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hbXLIrQ2wvI/AAAAAAAAAAI/AAAAAAAAASU/hL4-oO1xPAE/photo.jpg?sz=128", "display_name": "Asheesh", "link": "https://stackoverflow.com/users/6783878/asheesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1472852243, "creation_date": 1472757704, "last_edit_date": 1472759718, "question_id": 39279371, "link": "https://stackoverflow.com/questions/39279371/how-can-i-eliminate-floating-point-inaccuracy-when-i-pack-and-unpack-a-floating", "title": "How can I eliminate floating point inaccuracy when I pack and unpack a floating point number?", "body": "<p>I am packing an array of numbers to send via UDP to another piece of hardware using socket programming. </p>\n\n<p>When I <code>pack</code> the number 12.2 and then <code>unpack</code> it, I get 12.199999892651. As I am working with numbers related to latitudes and longitudes, I cannot have such deviations.</p>\n\n<p>This is the simple script I wrote:</p>\n\n<pre><code>use warnings;\n\nuse Time::HiRes qw (sleep);\n\n@Data = ( 20.2, 30.23, 40.121, 1, 2, 3, 4, 6. 4, 3.2, 9.9, 0.1, 12.2, 0.99, 7.8, 999, 12.3 );\n\n$myArr = pack('f*', @Data);\n\nprint \"$myArr\\n\\n\";\n\n@Dec = unpack('f*',$myArr);\n\nprint \"@Dec\";\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>20.2000007629395 30.2299995422363 40.1209983825684 1 2 3 4 6.40000009536743 3.20 000004768372 9.89999961853027 0.100000001490116 12.1999998092651 0.9900000095367 43 7.80000019073486 999 12.3000001907349\n</code></pre>\n\n<p>Is there any way I can control the precision?</p>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472755865, "post_id": 39278158, "comment_id": 65892415, "body": "<code>\u2022Before and After LME46</code> is this a typo?"}, {"owner": {"reputation": 305, "user_id": 5461890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2AtJM.png?s=128&g=1", "display_name": "Mahmoud", "link": "https://stackoverflow.com/users/5461890/mahmoud"}, "edited": false, "score": 0, "creation_date": 1472764898, "post_id": 39278158, "comment_id": 65896466, "body": "I edit my question"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472756085, "post_id": 39278232, "comment_id": 65892507, "body": "<code>(?&lt;!\\.flag)</code> will never match. Ever thought to ask the OP about it? And <code>\\w+</code>.does not cover <code>can have</code>  and  alphanum."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472756356, "post_id": 39278232, "comment_id": 65892650, "body": "Could always use <code>[\\p{L}\\p{N}]*</code> before and after, as I&#39;m not sure <code>\\w</code> in perl is so versed in script. Either way, the [._] does not jive except if it&#39;s on the boundary?"}, {"owner": {"reputation": 305, "user_id": 5461890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2AtJM.png?s=128&g=1", "display_name": "Mahmoud", "link": "https://stackoverflow.com/users/5461890/mahmoud"}, "edited": false, "score": 0, "creation_date": 1472765437, "post_id": 39278232, "comment_id": 65896717, "body": "No, because  this case does not work :  <code>abcLME999abc.any_things</code> and the string before and after the LME999 are optional not required"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 4, "last_activity_date": 1472767006, "last_edit_date": 1472767006, "creation_date": 1472753259, "answer_id": 39278232, "question_id": 39278158, "link": "https://stackoverflow.com/questions/39278158/could-not-find-the-right-regex-pattern/39278232#39278232", "title": "Could not find the right regex pattern", "body": "<p>You can use this regex:</p>\n\n<pre><code>^(?!TE?MP_).*?LME999.*$(?&lt;!\\.flag|_TEMP)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/vZ0aG1/6\" rel=\"nofollow\">RegEx Demo</a></p>\n\n<p><strong>RegEx Breakup:</strong></p>\n\n<pre><code>^                   # line start\n(?!TE?MP_)          # negative lookahead to assert failure if starts with TMP_ or TEMP_\n.*?                 # match 0 or more of any char (lazy)\nLME999              # match LME99\n.*                  # match 0 or more of any char \n$                   # line end\n(?&lt;!\\.flag|_TEMP)   # negative lookbehind to assert failure if ends with .flag or _TEMP\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 5461890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2AtJM.png?s=128&g=1", "display_name": "Mahmoud", "link": "https://stackoverflow.com/users/5461890/mahmoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39278232, "answer_count": 1, "score": 2, "last_activity_date": 1472767006, "creation_date": 1472753018, "last_edit_date": 1472764882, "question_id": 39278158, "link": "https://stackoverflow.com/questions/39278158/could-not-find-the-right-regex-pattern", "title": "Could not find the right regex pattern", "body": "<p>I want to write a regular expression to match every word which :</p>\n\n<ul>\n<li>Does not start with any of these 2 strings (TEMP_, TMP_)</li>\n<li>Contains in the middle the string : LME999</li>\n<li>Does not end with any of these 2 strings (.flag, _TEMP)</li>\n<li>Before and After LME999, the string can have any alphanumeric character</li>\n</ul>\n\n<p>I wrote this regular expression, but it does not work as expected</p>\n\n<pre><code>(?!TEMP_)+(?!TMP_)+(\\w)+LME999+(\\w)+((?!.flag)(?!_TEMP))\n</code></pre>\n\n<p>Here are some valid string: \nStringLME999String</p>\n"}, {"tags": ["perl", "hash", "key"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472753740, "post_id": 39277993, "comment_id": 65891297, "body": "What are <code>@correlatedPttns</code>, <code>@data</code>, and <code>$cnt</code>? Do you have <code>use strict</code> and <code>use warnings &#39;all&#39;</code> in place?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1472754111, "post_id": 39277993, "comment_id": 65891499, "body": "Your subject line says <code>print Perl hash key value (key is an array)</code> but a Perl hash key can only be a simple C string: it is not even a Perl string."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": -1, "last_activity_date": 1472754679, "last_edit_date": 1472754679, "creation_date": 1472754100, "answer_id": 39278447, "question_id": 39277993, "link": "https://stackoverflow.com/questions/39277993/print-perl-hash-key-value-key-is-an-array/39278447#39278447", "title": "print Perl hash key value (key is an array)", "body": "<p>Without commenting on whether your scheme hash keys could be improved upon ...</p>\n\n<p>Output from <code>Data::Dumper</code> is suitable to be passed to Perl's <code>eval</code> function.</p>\n\n<pre><code>for ( keys %pairToDataHash)\n{\n    my ($VAR1,$VAR2);     # required for 'use strict'\n    eval $_;\n    ... now $VAR1, $VAR2 are loaded\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1472755198, "last_edit_date": 1472755198, "creation_date": 1472754882, "answer_id": 39278645, "question_id": 39277993, "link": "https://stackoverflow.com/questions/39277993/print-perl-hash-key-value-key-is-an-array/39278645#39278645", "title": "print Perl hash key value (key is an array)", "body": "<p>Data::Dumper is a debugging tool. It's not appropriate to use here.</p>\n\n<p>It looks like you have pairs of integers, so just use</p>\n\n<pre><code>$pairToDataHash{ join ':', @$pair }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for ( keys %pairToDataHash ) {\n   my @pair = split /:/;\n   ...\n}\n</code></pre>\n\n<p>If you have floating point numbers instead, use</p>\n\n<pre><code>$pairToDataHash{ pack 'd*', @$pair }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for ( keys %pairToDataHash ) {\n   my @pair = unpack 'd*';\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6772363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a564b71d1e652bd4a8c293b9f4d932?s=128&d=identicon&r=PG&f=1", "display_name": "zufl", "link": "https://stackoverflow.com/users/6772363/zufl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1472755198, "creation_date": 1472752395, "question_id": 39277993, "link": "https://stackoverflow.com/questions/39277993/print-perl-hash-key-value-key-is-an-array", "title": "print Perl hash key value (key is an array)", "body": "<p>Hi I have a Perl hash defined as:</p>\n\n<pre><code>foreach my $pair (@correlatedPttns)\n{    \n   # slice the data out\n    my @tmp = ();\n    for (my $x = 0; $x&lt;$cnt; $x++)\n    {    \n        push @tmp,[ @{ $data[$x] } [ 0, @$pair[0], @$pair[1] ] ]; # epochtime, Pi, Pj\n    }    \n\n    #build hash\n    $pairToDataHash{Dumper(@$pair)} = \\@tmp;\n}\n</code></pre>\n\n<p>If output the hash, print Dumper(\\%pairToDataHash), it will looks like:</p>\n\n<pre><code>$VAR1 = {\n          '$VAR1 = 30; \n$VAR2 = 31; \n' =&gt; [\n\n\n                                       [     \n                                        'TIME',\n                                        'P30',\n                                        'P31' \n                                      ],    \n                                      [     \n                                        '1398038853',\n                                        '0',  \n                                        '0'   \n                                      ],    \n</code></pre>\n\n<p>How do I get the individual keys because the key was formed as an array via Dumper. I need to access the value $VAR1=30. How do I get the element of keys? </p>\n\n<pre><code>for ( keys %pairToDataHash)\n{\n      #get the key element value. \n}\n</code></pre>\n"}, {"tags": ["perl", "unix", "system"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1472744072, "post_id": 39275327, "comment_id": 65885940, "body": "Just some terminology that might make searching easier: what you&#39;re calling a &quot;root path&quot; is usually called an absolute path, and a &quot;non-root path&quot; is called a relative path."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1472795343, "post_id": 39275327, "comment_id": 65904353, "body": "An absolute path is one which after tilde expansion begins with a slash. You can shortcut by looking for tilde or slash, and handle invalid tilde expansions separately later in the code."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1472849244, "post_id": 39275327, "comment_id": 65934986, "body": "@tripleee Careful about the tilde, not all programs interpret it as meaning $HOME. Try <code>perl -MFile::Find -e &#39;find(sub { print &quot;$File::Find::name\\n&quot;; }, &quot;~&quot;);&#39;</code> --- it prints nothing, but clearly I do have files in <code>~</code>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1472883772, "post_id": 39275327, "comment_id": 65941360, "body": "It seems rather clear from the question that the OP wants to support tilde expansion. If this is required in a context where it is not already supported, they&#39;ll have to implement it themselves, obviously."}], "answers": [{"tags": [], "owner": {"reputation": 1532, "user_id": 791908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmGC4.jpg?s=128&g=1", "display_name": "Drav Sloan", "link": "https://stackoverflow.com/users/791908/drav-sloan"}, "is_accepted": true, "score": 1, "last_activity_date": 1472744622, "last_edit_date": 1472744622, "creation_date": 1472743965, "answer_id": 39275654, "question_id": 39275327, "link": "https://stackoverflow.com/questions/39275327/check-if-a-directory-exists-as-an-absolute-path/39275654#39275654", "title": "Check if a directory exists as an absolute path", "body": "<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nuse Cwd qw/abs_path getcwd/;\nuse File::HomeDir;\n\nmy $path = 'foo/../bar';\n\nif($path =~ /^~/) {\n    my $home = File::HomeDir-&gt;my_home;\n    $path =~ s/^~/$home/;\n}\n\nif($path !~ m!^/!) {\n    $path = getcwd . \"/$path\";\n}\n\nmy $full_path = abs_path($path);\n\nif(defined $full_path &amp;&amp; -d $full_path) {\n    say \"$full_path exists\";\n} else {\n    say \"$path is non-existant\";\n}\n</code></pre>\n\n<p><code>File::Homedir</code> will allow you to get a users home directory, and you\ncan then replace the tilde in the path.</p>\n\n<p>If the path at this point doesn't start with <code>/</code> (is a relative path) prepend the current working directory with <code>getcwd</code>, to get an absolute path.</p>\n\n<p>Once you've done that you can pass it through <code>abs_path</code> to resolve things like <code>.</code> and <code>..</code> as well as symlinks.</p>\n\n<p>Finally you can then test that with <code>-d</code> to see if the resultant path exists.</p>\n"}], "owner": {"reputation": 339, "user_id": 5000430, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f6de9dd22e8befaffb46827037b700be?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5000430/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 39275654, "answer_count": 1, "score": -2, "last_activity_date": 1473269625, "creation_date": 1472742993, "last_edit_date": 1473269625, "question_id": 39275327, "link": "https://stackoverflow.com/questions/39275327/check-if-a-directory-exists-as-an-absolute-path", "title": "Check if a directory exists as an absolute path", "body": "<p>How would one check if the path/directory exists (-d) and is a full pathname from root directory?</p>\n\n<pre><code>i.e. ~/mysubdir vs /home/me/mysubdir vs mysubdir. \n</code></pre>\n\n<ul>\n<li>I want the argument supplied to die if it is not a root path that\nexists. os specific for unix. </li>\n<li>Or, given a directory, get its full root path if it exists?</li>\n</ul>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1472740897, "post_id": 39274484, "comment_id": 65883692, "body": "Always use strict; use warnings; in your code."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1472741064, "post_id": 39274484, "comment_id": 65883826, "body": "Your are 100% right. But I think it is not necessary for that sample. It is just to describe the question."}], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": 2, "last_activity_date": 1472741351, "creation_date": 1472741351, "answer_id": 39274721, "question_id": 39274484, "link": "https://stackoverflow.com/questions/39274484/perl-sort-array-after-a-hash-value/39274721#39274721", "title": "Perl: Sort Array after a Hash-value", "body": "<p><code>@list = sort { $a-&gt;{'k1'} &lt;=&gt; $b-&gt;{'k1'} } @l;</code></p>\n"}, {"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 1, "creation_date": 1472742441, "post_id": 39274727, "comment_id": 65884821, "body": "Thanks, thats the perl&#39;ish I was looking for ;-)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1472741368, "creation_date": 1472741368, "answer_id": 39274727, "question_id": 39274484, "link": "https://stackoverflow.com/questions/39274484/perl-sort-array-after-a-hash-value/39274727#39274727", "title": "Perl: Sort Array after a Hash-value", "body": "<p>To sort by the value behind the <code>k1</code> key, you can do as follows.</p>\n\n<pre><code>my @sorted = sort { $a-&gt;{k1} &lt;=&gt; $b-&gt;{k1} } @l;\n</code></pre>\n\n<p>The variables <code>$a</code> and <code>$b</code> are reserved special vars for <a href=\"http://perldoc.perl.org/functions/sort.html\"><code>sort</code></a>. If your list-items are references, you can just use them as such.</p>\n\n<p>Output with <a href=\"http://p3rl.org/Data::Printer\">Data::Printer</a>:</p>\n\n<pre><code>[\n    [0] {\n        k1   1,\n        k2   \"one\"\n    },\n    [1] {\n        k1   2,\n        k2   \"two\"\n    },\n    [2] {\n        k1   3,\n        k2   \"three\"\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39274727, "answer_count": 2, "score": 1, "last_activity_date": 1472741368, "creation_date": 1472740691, "question_id": 39274484, "link": "https://stackoverflow.com/questions/39274484/perl-sort-array-after-a-hash-value", "title": "Perl: Sort Array after a Hash-value", "body": "<p>Is there a \"Perl-ish\" way to sort a array of hashes after a hash-val?</p>\n\n<pre><code>my @l = ({k1 =&gt; \"1\", k2 =&gt; \"one\"}, {k1 =&gt; \"2\", k2 =&gt; \"two\"}, \n     {k1 =&gt; \"3\", k2 =&gt; \"three\"});\n\nforeach (@l)\n{\n  print \"\\n\" . $_-&gt;{k1} . \", \" . $_-&gt;{k2};\n}\n</code></pre>\n\n<p>The order I get is the order I inserted (what else...). But I'd like to sort it after a hash-value.\nI can imagine the algorithmic-way. But I am asking about a maybe already existing function or something.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "input", "hashmap", "output", "filehandle"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 3, "creation_date": 1472736729, "post_id": 39272887, "comment_id": 65880428, "body": "Please <code>use strict; use warnings;</code> in your Perl program. Syntax of your code is incorrect. <code>elseif</code> should be <code>elsif</code>."}, {"owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472737652, "post_id": 39272887, "comment_id": 65881153, "body": "My mistake, It should be elsif, I had to copy the code by hand. That is why this mistake happened."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1472738872, "post_id": 39272887, "comment_id": 65882187, "body": "you should still <code>use warnings;</code> and <code>use strict;</code>... Are you using this as a module in another script, or running it as a script itself? Please update your question with your expected output"}, {"owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "edited": false, "score": 0, "creation_date": 1472742752, "post_id": 39272887, "comment_id": 65885048, "body": "The code was written before me. It has the current error so I am trying figure out what the problem is. The code does not have the use strict or use warnings. I have added additional information."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1472743097, "post_id": 39272887, "comment_id": 65885258, "body": "Are there multiple records, or just one? What separates the records?"}, {"owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "edited": false, "score": 0, "creation_date": 1472743954, "post_id": 39272887, "comment_id": 65885852, "body": "The next record would begin directly below the last line with hex data on it. There are no empty lines between the records. My problem occurs in the case of multiple records or a single record. It does not print the data of the last record. It seems to get stuck in the while(&lt;$fH&gt;) loop. For simplicity sake, I made the example contain only one record."}, {"owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "edited": false, "score": 0, "creation_date": 1472750870, "post_id": 39272887, "comment_id": 65889758, "body": "I have also noticed in the example above. If I modify the file with the record data and add an extra empty line at the end of the file. Then it will print that record. Otherwise if there is no empty line at the end it will NOT print that record. Keep in mind it does this for the last record in the file (in my John Snow example it is the only record). I have tried using the chomp feature to verify if there was a &quot;\\n&quot; at the end of the hex string. In the case where there was no additional empty line at the end of the file, chomp would still return a 1."}, {"owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "edited": false, "score": 0, "creation_date": 1472765724, "post_id": 39272887, "comment_id": 65896839, "body": "I figured out the problem. It was the way it was reading in the record. It was waiting for the next message in order to exit the loop. The hex message reading would wait for the start of the next message (Message Type). Once it reached that it, it would memorize it and then exit. The code needs to be modified to be able to read the hex lines without relying on the first line from the next message."}], "owner": {"reputation": 1, "user_id": 6783329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzROG.png?s=128&g=1", "display_name": "jeonsah", "link": "https://stackoverflow.com/users/6783329/jeonsah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472743328, "creation_date": 1472736537, "last_edit_date": 1472742680, "question_id": 39272887, "link": "https://stackoverflow.com/questions/39272887/perl-reading-from-file-into-hash-failure", "title": "perl reading from file into hash failure", "body": "<p>I have a <code>perl</code> script that reads data from a file and then prints it to a custom color terminal on <code>linux</code>. It is reading the file one line at a time. The file contains messages about human attributes (<code>first name, last name, eye color</code>) followed by a hex message. </p>\n\n<p><strong>Problem:</strong> The problem occurs on the last attribute or when there is only one attribute in the file. It will read in the data and not print it to the custom terminal.</p>\n\n<p>Here is an example of what I have in the file that does not work:</p>\n\n<pre><code>Message Type: Human Attribute   \nFirst Name: John\nLast Name: Snow\nEye color: brown\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11\n</code></pre>\n\n<p>The last line in the hex message is the last line in the file.. Here is the code I am using:</p>\n\n<pre><code>package Lib::HumanAttributeMessageProcessing;\n\nuse Exporter;\n\n@ISA = ('Exporter');\n@EXPORT = qw(&amp;readRecord &amp;initializeReader);\n\nsub initializeReader {\n    $messageHandler = shift;\n    $fileHandlers{$messageHandler} = shift;\n}\n\nsub readRecord {\n    my $mH = shift;\n    my $fH = $fileHandlers{$mH};\n    my $remaingLine = $lastLines{$mH};\n    $lastLines{$mH} = undef;\n    my %jRecord = ();\n\nunless ($remainingLine) {\n    $lastLines{$mH} = undef;\nreturn;\n}\n\nif ($remainingLine =~ /Message Type:\\s+([a-zA-Z0-9_]+)/) {\n    $jRecord{\"TYPE\"} = $1;\n}\n\n$state = 0;\n\nwhile (&lt;$fH&gt;) {\n    if (!state &amp;&amp; /Message Type:\\s+([a-zA-Z0-9_]+)/) {\n        $jRecord{\"TYPE\"} = $1;\n    } elsif (!state &amp;&amp; /First Name:\\s+([a-zA-Z_]+)/) {  \n        $jRecord{\"FIRSTNAME\"} = $1;\n    } elsif (!state &amp;&amp; /Last Name:\\s+([a-zA-Z_]+)/) {   \n        $jRecord{\"LASTNAME\"} = $1;\n    } elsif (!state &amp;&amp; /EYECOLOR:\\s+([a-zA-Z_]+)/) {    \n        $jRecord{\"EYECOLOR\"} = $1;\n    } elsif (/^a[a-f\\d]{2}/) {\n        chomp;\n        $jRecord {\"HEX\"} .= $_ . \" \";\n        $state = 1;\n    } elsif ($state){\n        $lastLines{$mH} = $_;\n        last;\n    } else {\n        print STDERR \"SKIPPING LINE: $_\\n\";\n    }\n}\n\n\\%jRecord;\n}\n</code></pre>\n\n<p>Ive noticed that it reads the last line in the hex message but never exits the while loop. This code is in its own file that is called HumanAttributeMessageProcessing.pm. It is called by another file that is a perl script. Here is the script code that is calling the file:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse lib \"./\";\nuse Lib::HumanAttributeMessageProcessing;\nuse FileHandle;\n\n%count = ();\n$log = shift @ARGV;\n\nopen PIPE \"tail -f -n +0 $log |\"\n    or die \"Cannot open pipe\\n\";\n\ninitializeReader(\"1\", \\*PIPE\\n\";\n$count = 1;\nSTDOUT-&gt;autoflush;\nPIPE-&gt;autoflush;\n\nwhile(1)\n{\n    $record = readRecord(\"1\");\n\n    if(defined($record))\n    {\n        $MSGType = getMessageType($record);\n        $count{sprintf, \"%s\", $MSGType}++;\n        system(\"clear\");\n        print \"Summary:\\n\";\n        $total = 0;\n        foreach $key (sort keys %count)\n        {\n            $value = $count{key};\n            printf \"# %-55s # %7s #\\n\", $key, $value;\n            $total += $value;\n            printf \"# %-55s # %7s #\\n\", $total;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["arrays", "perl", "csv", "hash"], "comments": [{"owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1472737604, "post_id": 39272293, "comment_id": 65881117, "body": "<a href=\"https://gist.github.com/anonymous/8750158b1d3a7f5d840b35c24bd4c16a\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/8750158b1d3a7f5d840b35c24bd4c16a</a>  Sorry, output too long for this little box here :) But it looks to me like the same, i&#39;ve postet above in my question."}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 1, "creation_date": 1472738841, "post_id": 39272293, "comment_id": 65882149, "body": "<code>foreach my $dauerauftrag_values (@dauerauftrag)</code> and <code>print(%{$dauerauftra_values}{&#39;date_time&#39;});</code> name of variable is not identical !!!! <code>$dauerauftrag_values</code> NOT A <code>$dauerauftra_values</code>"}, {"owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "edited": false, "score": 2, "creation_date": 1472738946, "post_id": 39272293, "comment_id": 65882230, "body": "Always use <code>use strict;</code> and <code>use warnings</code> ! They help to avoid annoying typos"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472764927, "post_id": 39272293, "comment_id": 65896480, "body": "I love how everything is in English but the <i>Dauerauftr&#228;ge</i>. Those are called <i>standing orders</i> in English. Consistency in variable and function naming is important. It&#39;s great that all your vars are snake case, that&#39;s the way Perl people typically do it. But you should be consistent with the language that you take the var names from too. That makes it easier to read. Nothing wrong with German, but don&#39;t mix. You even have half German half English in there. With a typo in the German word. The longer you wait to fix that the schwieriger it will get. Sounds weird, doesn&#39;t it? ;-)"}, {"owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472798132, "post_id": 39272293, "comment_id": 65905579, "body": "@simbabque: Yes i know, it&#39;s a it weird, in a english code and only one german word. Hopefully my english isn&#39;t too bad ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472798439, "post_id": 39272293, "comment_id": 65905724, "body": "It amused me. Your English is fine. It&#39;s just important to be consistent. Nothing wrong with going all German either. That just makes it hard to get help on it on here. Understanding what variables do is very useful. ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "edited": false, "score": 0, "creation_date": 1472797926, "post_id": 39274278, "comment_id": 65905481, "body": "Yes, you&#39;re right. I have some problems with dereferencing."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1472740087, "creation_date": 1472740087, "answer_id": 39274278, "question_id": 39272293, "link": "https://stackoverflow.com/questions/39272293/read-hashes-from-array-in-perl/39274278#39274278", "title": "Read Hashes from Array in Perl", "body": "<p>It appears as though you don't quite understand how to dereference the data structure. Have a look at the following code which I've changed up a bit in hopes that'll make things a bit clearer:</p>\n\n<pre><code>my @keys = keys(%dauerauftraege);\n\nfor my $key (@keys) {\n\n    print \"*** $key ***\\n\";\n\n    my $aref = $dauerauftraege{$key};\n\n    for my $values_href (@$aref){\n        print \"$values_href-&gt;{date_time}\\n\";\n        print \"$values_href-&gt;{sender}\\n\";\n        print \"$values_href-&gt;{recipient}\\n\";\n        print \"$values_href-&gt;{format}\\n\";\n        print \"$values_href-&gt;{transport}\\n\";\n        print \"$values_href-&gt;{partnername}\\n\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">perldsc</a></p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "edited": false, "score": 0, "creation_date": 1472797990, "post_id": 39274286, "comment_id": 65905508, "body": "this really works for me, like a charm. Thank&#39;s to your code, i now see, where  i&#39;ve done the mistake(s). Tank you! :-)"}], "tags": [], "owner": {"reputation": 7145, "user_id": 267398, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/beea308e4f0cd2781b8b3a362bac5493?s=128&d=identicon&r=PG", "display_name": "sebnukem", "link": "https://stackoverflow.com/users/267398/sebnukem"}, "is_accepted": true, "score": 1, "last_activity_date": 1472740113, "creation_date": 1472740113, "answer_id": 39274286, "question_id": 39272293, "link": "https://stackoverflow.com/questions/39272293/read-hashes-from-array-in-perl/39274286#39274286", "title": "Read Hashes from Array in Perl", "body": "<p>I think the problem is how you access your data structure. Try this:</p>\n\n<pre><code>my @dauerauftraege_keys = keys %dauerauftraege;\nprint(\"count dauerauftraege: \".(scalar @dauerauftraege_keys).\"\\n\");\n# iterate over the keys to get the array of hashes\nforeach my $dauerauftrag_key (@dauerauftraege_keys) {\n    # retrieve the array\n    my $dauerauftrag = $dauerauftraege{\"$dauerauftrag_key\"}; # ref to array\n    my @a = @$dauerauftrag;\n    print(\"count hashes inside the array: \".(scalar @a).\"\\n\");\n    # iterate over the hashes and print the values\n    foreach my $dauerauftrag_values (@a) { # also a reference\n        print $dauerauftrag_values-&gt;{'date_time'} . \"\\n\";\n        print $dauerauftrag_values-&gt;{'sender'} . \"\\n\";\n        print $dauerauftrag_values-&gt;{'recipient'} . \"\\n\";\n        print $dauerauftrag_values-&gt;{'format'} . \"\\n\";\n        print $dauerauftrag_values-&gt;{'transport'} . \"\\n\"; \n        print $dauerauftrag_values-&gt;{'partnername'} . \"\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1472765037, "post_id": 39274459, "comment_id": 65896534, "body": "Lexical file handles please."}, {"owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "edited": false, "score": 0, "creation_date": 1472797609, "post_id": 39274459, "comment_id": 65905321, "body": "Thank&#39;s a lot for your answer. +1 because I like, how you done the &quot;one-line-ifs&quot; with Perl. Like this really much, makes the code looking god :-) +1 also for the hint of <code>use strict;</code> and <code>use warnings;</code>! :)"}], "tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1472765225, "last_edit_date": 1472765225, "creation_date": 1472740620, "answer_id": 39274459, "question_id": 39272293, "link": "https://stackoverflow.com/questions/39272293/read-hashes-from-array-in-perl/39274459#39274459", "title": "Read Hashes from Array in Perl", "body": "<p>Always use pragma <code>use strict;</code> and <code>use warnings;</code>. They help avoid typos and other problems.</p>\n\n<p><code>%dauerauftraege</code> is a hash, you have tried to access it like an array. And you're trying to make a loop through the hash, and at the same time to print on each iteration of the entire hash.</p>\n\n<p>I think the code might look something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy %dauerauftraege;\n\n# Glob all CSV-Files in folder\nmy @files = glob(\"*.csv\");\n\nforeach my $file(@files) {\n    # read the file\n    open(my $fh, \"&lt;\", $file) or die(\"Could not open File\");\n\n    LINE:\n    foreach my $line(&lt;$fh&gt;) {\n        chomp($line);\n        next LINE unless($line);\n\n        # Split Line into Fields\n        my @line_data = split(\";\", $line);\n\n        my $phys_name = $line_data[1];\n\n        # skip the header file\n        next LINE if ($phys_name eq \"PhysName\");\n\n        @{$dauerauftraege{\"$phys_name\"}}\n          {'date_time', 'sender', 'recipient',\n           'format', 'transport', 'partnername'}=@line_data[0,2..6];\n    }\n}\n</code></pre>\n\n<p>And print ...</p>\n\n<pre><code># Get the keys to iterate over them\nmy @dauerauftraege_keys = keys(%dauerauftraege);\nprint(\"count dauerauftraege: \".(scalar @dauerauftraege_keys).\"\\n\");\n# iterate over the keys to get the array of hashes\nforeach my $dauerauftrag_key (@dauerauftraege_keys) {\n    print \"\\n$dauerauftrag_key:\\n\";\n    print join(\"\\n\",\n          @{$dauerauftraege{\"$dauerauftrag_key\"}}{'date_time','sender','recipient',\n                          'format','transport','partnername'}).\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3144902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ffaedbba4ef6da88faec79f4ce0a0a6?s=128&d=identicon&r=PG&f=1", "display_name": "C3D1", "link": "https://stackoverflow.com/users/3144902/c3d1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 39274286, "answer_count": 3, "score": 2, "last_activity_date": 1472765225, "creation_date": 1472734984, "last_edit_date": 1472735335, "question_id": 39272293, "link": "https://stackoverflow.com/questions/39272293/read-hashes-from-array-in-perl", "title": "Read Hashes from Array in Perl", "body": "<p>im new to perl (started yesterday evening).\nI have a problem with array of hashes.</p>\n\n<p>Following situation:\nI have several csv-files from a logging application. The logfiles are created daily and are really bad structured. I want to group them together and show some statistics.\nReading and parsing the csv isn't really a problem, but i want to store the columns inside a hash for easyer access.\nInside the csv-file, the secound column (PhysName) is the column, on which i want to group the data. So i thought, it's a good idea to save only the other columns inside a hash, save several of  these hashes inside an array and save the array inside an other hash, where i take the PhysName as Key.</p>\n\n<p>That wasn't a big deal at all:</p>\n\n<pre><code>my %dauerauftraege;\n\n# Glob all CSV-Files in folder\nmy @files = glob(\"*.csv\");\n\nforeach my $file(@files) {\n    # read the file\n    open(DATA, \"&lt;$file\") or die(\"Could not open File\");\n\n    LINE:\n    foreach my $line(&lt;DATA&gt;) {\n        chomp($line);\n        if ($line eq \"\") {\n            next LINE;\n        }\n\n        # Split Line into Fields\n        my @line_data = split(\";\", $line);\n\n        my $phys_name = $line_data[1];\n\n        # skip the header file\n        if ($phys_name eq \"PhysName\") {\n            next LINE;\n        }\n\n        my %values =(\n        'date_time' =&gt; $line_data[0],\n        'sender' =&gt; $line_data[2],\n        'recipient' =&gt; $line_data[3],\n        'format' =&gt; $line_data[4],\n        'transport' =&gt; $line_data[5],\n        'partnername' =&gt; $line_data[6]);\n\n        push(\\@{$dauerauftraege{\"$phys_name\"}}, \\%values);\n    }\n}\n</code></pre>\n\n<p>When i try to verify this with <code>print(Dumper(%dauerauftraege))</code>i get the following:</p>\n\n<pre><code>$VAR1 = 'YYYYYYYXXXXXXXX';\n$VAR2 = [\n          {\n            'transport' =&gt; 'FTP',\n            'format' =&gt; 'V1',\n            'partnername' =&gt; 'A_TEST',\n            'date_time' =&gt; '2016.07.25 11:16:52',\n            'sender' =&gt; 'BBB',\n            'recipient' =&gt; 'CCC'\n          },\n          {\n            'recipient' =&gt; 'CCC',\n            'sender' =&gt; 'BBB',\n            'partnername' =&gt; 'A_TEST',\n            'date_time' =&gt; '2016.07.25 11:17:15',\n            'format' =&gt; 'V1',\n            'transport' =&gt; 'FTP'\n          }\n        ];\n$VAR3 = 'XXXXXXXYYYYYYYY';\n$VAR4 = [\n          {\n            'format' =&gt; 'V2',\n            'partnername' =&gt; 'S_TEST',\n            'date_time' =&gt; '2016.07.25 10:15:02',\n            'recipient' =&gt; 'DDD',\n            'sender' =&gt; 'AAA',\n            'transport' =&gt; 'HTTP'\n          },\n          {\n            'transport' =&gt; 'HTTP',\n            'recipient' =&gt; 'DDD',\n            'sender' =&gt; 'AAA',\n            'partnername' =&gt; 'S_TEST',\n            'format' =&gt; 'V2',\n            'date_time' =&gt; '2016.07.25 10:15:30'\n          }\n        ];\n</code></pre>\n\n<p>My first thought was, that Dumper Displays me the odd $VAR's as keys, and the even $VAR's as Values, but after i take a closer look at the hash inside the even $VAR's, i'm pretty shure i have done something wrong while inserting the inner hash (with the columns and values) into the array, stored in the <code>%dauerauftraege</code> Hash.</p>\n\n<p>So, now when it comes to read from the Hash, containing an array of hashes with this code here</p>\n\n<pre><code># Get the keys to iterate over them\nmy @dauerauftraege_keys = keys(%dauerauftraege);\nprint(\"count dauerauftraege: \".(scalar @dauerauftraege_keys).\"\\n\");\n# iterate over the keys to get the array of hashes\nforeach my $dauerauftrag_key (@dauerauftraege_keys) {\n    # retrive the array\n    my @dauerauftrag = $dauerauftraege{\"$dauerauftrag_key\"};\n    print(\"count hashes inside the array: \".(scalar @dauerauftrag).\"\\n\");\n    # iterate over the hashes and print the values\n    foreach my $dauerauftrag_values (@dauerauftrag) {\n        print(%{$dauerauftra_values}{'date_time'});\n        print(\"\\n\");\n        print(%{$dauerauftra_values}{'sender'});\n        print(\"\\n\");\n        print(%{$dauerauftra_values}{'recipient'});\n        print(\"\\n\");\n        print(%{$dauerauftra_values}{'format'});\n        print(\"\\n\");\n        print(%{$dauerauftra_values}{'transport'});\n        print(\"\\n\");\n        print(%{$dauerauftra_values}{'partnername'});\n        print(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>i always get this error:</p>\n\n<pre><code>count dauerauftraege: 2\ncount hashes inside the array: 1\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 56, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 57, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 58, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 59, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 60, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 61, &lt;DATA&gt; line 5.\ndate_timesenderrecipientformattransportpartnernamecount hashes inside the array: 1\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 56, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 57, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 58, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 59, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 60, &lt;DATA&gt; line 5.\nUse of uninitialized value in print at ./LastRun_Evaluation.pl line 61, &lt;DATA&gt; line 5.\ndate_timesenderrecipientformattransportpartnername\n</code></pre>\n\n<p>That makes me belive, that my problem is in the followinig line:</p>\n\n<pre><code>push(\\@{$dauerauftraege{\"$phys_name\"}}, \\%values);\n</code></pre>\n\n<p>When i carefully read this line, i understand the following:\n<code>$dauerauftraege{\"$phys_name\"}</code> returns me a skalar (<code>$</code>) containing an reference to the array, which is dereferenced by <code>@{}</code> to  the Array.\nAnd now with <code>\\%values</code> i pass an reference to the <code>values</code> Hash to the <code>push</code> Funktion, which add it to the reference to the array, which is indicated by the <code>\\</code> in front of the @.</p>\n\n<p>I would be verry happy, if anyone could help me with this problem.\nThank you alot guys :-)</p>\n"}, {"tags": ["apache", "perl", "csrf", "csrf-protection", "cgi-application"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472722166, "post_id": 39267531, "comment_id": 65870123, "body": "Are your apps based upon CGI::Application?"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1472722208, "post_id": 39267531, "comment_id": 65870158, "body": "@Dr.Avalanche: Yes it&#39;s based upon CGI::Application."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1472723558, "post_id": 39267531, "comment_id": 65871131, "body": "You need to make sure that any Ajax requests also include the csrf parameter."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1472723642, "post_id": 39267531, "comment_id": 65871178, "body": "@xxfelixxx: mod_csrf does that. C::A::P::ProtectCSRF doesn&#39;t mention it."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1472725630, "last_edit_date": 1592644375, "creation_date": 1472725114, "answer_id": 39268891, "question_id": 39267531, "link": "https://stackoverflow.com/questions/39267531/how-to-prevent-cross-site-request-forgery-attack/39268891#39268891", "title": "How to Prevent Cross-Site Request Forgery Attack?", "body": "<p>I can understand that you found the documentation for <a href=\"https://metacpan.org/pod/CGI::Application::Plugin::ProtectCSRF\" rel=\"nofollow noreferrer\"><code>CGI::Application::Plugin::ProtectCSRF</code></a> unclear: it is a little impregnable</p>\n<p>All that the Perl module appears to do is to add a <code>hidden</code> field to each HTML form with the name <code>_csrf_id</code> and a random value derived from various sources and encoded through SHA1. The protection comes when the response from the client requires that the same value must be returned to the server</p>\n<p>It is quite nicely coded, but it uses custom <em>subroutine attributes</em>, and the documentation for the <a href=\"http://perldoc.perl.org/attributes.html#Package-specific-Attribute-Handling\" rel=\"nofollow noreferrer\"><code>attributes</code></a> pragma says this</p>\n<blockquote>\n<p><strong>WARNING</strong>: the mechanisms described here are still experimental. Do not rely on the current implementation</p>\n</blockquote>\n<p>I cannot tell from my quick review whether the subroutine prototypes are essential to the module, but I recommend that you use the Apache <code>mod_csrf</code> module instead, which is likely to be more thoroughly tested than the Perl module, and has proper documentation</p>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 0, "last_activity_date": 1473423541, "creation_date": 1473423541, "answer_id": 39411442, "question_id": 39267531, "link": "https://stackoverflow.com/questions/39267531/how-to-prevent-cross-site-request-forgery-attack/39411442#39411442", "title": "How to Prevent Cross-Site Request Forgery Attack?", "body": "<p>Since we were using in house server, not apache, therefore, mod_csrf was not possible to implement. </p>\n\n<p>I ditched ProtectCSRF module as the documentation was unclear.</p>\n\n<p>I solved it by doing below:</p>\n\n<ol>\n<li>Add an element in header template which is common to all pages, this element contains CSRF token which is being passed from server</li>\n<li><p>Create a JavaScript function and bind it to onload event. This JS function does below tasks:</p>\n\n<p>a) Find forms in current page</p>\n\n<p>b) If forms are found then create a hidden \"input\" element and append it to each form</p>\n\n<p>c) Take the value which was put in header and assign it to above created elements</p>\n\n<p>d) Now all forms have a hidden input element which contains CSRF token from point 1</p></li>\n<li><p>Now whenever a form gets submitted this hidden element will also be submitted, whose value we are verifying at server end. If tokens do not match then there is CSRF, for which we throw the error and block request</p></li>\n</ol>\n"}], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3775, "favorite_count": 0, "accepted_answer_id": 39411442, "answer_count": 2, "score": 5, "last_activity_date": 1473423541, "creation_date": 1472721524, "last_edit_date": 1472725292, "question_id": 39267531, "link": "https://stackoverflow.com/questions/39267531/how-to-prevent-cross-site-request-forgery-attack", "title": "How to Prevent Cross-Site Request Forgery Attack?", "body": "<p>We ran <a href=\"https://portswigger.net/burp/\" rel=\"nofollow\">Burp Suite</a> on our product and found some security vulnerabilities. The tool detected some of the CGI files which are vulnerable to <em>Cross-Site Request Forgery</em> attacks (CSRF).</p>\n\n<p>As usual I did search for CSRF protection module on CPAN and found <a href=\"https://metacpan.org/pod/release/HOLLY/CGI-Application-Plugin-ProtectCSRF-1.01/CGI/Application/Plugin/ProtectCSRF.pm\" rel=\"nofollow\">CGI::Application::Plugin::ProtectCSRF</a>.</p>\n\n<p>I'm wondering how can I integrate this module into our application in a generalized way? The documentation is not clear to me. How do I configure this module and make minimal changes to make sure whole application is secured from CSRF.</p>\n\n<p>I also came across <a href=\"http://mod-csrf.sourceforge.net/\" rel=\"nofollow\">mod_csrf</a> (an Apache module to prevent CSRF). Is installing this module and setting below in apache configuration file enough to prevent CSRF?</p>\n\n<pre><code>&lt;VirtualHost&gt;\n\n    CSRF_Enable on\n    CSRF_Action deny\n    CSRF_EnableReferer off\n\n&lt;/VirtualHost&gt;\n</code></pre>\n"}, {"tags": ["perl", "sendmail", "nagios"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472719696, "post_id": 39266471, "comment_id": 65868322, "body": "Unrelated but I guess you&#39;re using Net::SMTP::TLS which is too old."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1472719812, "post_id": 39266471, "comment_id": 65868392, "body": "@ChankeyPathak: Net::SMTP::TLS is not used in this code but the error (wrong use of SSL_version) is the same in both cases."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1472719981, "post_id": 39266471, "comment_id": 65868494, "body": "@SteffenUllrich Ah I see."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5523781, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/72f1b40cefd7356a781d07fa436bfc77?s=128&d=identicon&r=PG&f=1", "display_name": "Richard wei", "link": "https://stackoverflow.com/users/5523781/richard-wei"}, "edited": false, "score": 1, "creation_date": 1472729406, "post_id": 39266823, "comment_id": 65875056, "body": "Thank you very much.....It must be work,I change the command of  the send mail, I add the option -o tls=no before your answer\u3002Thank you\u3002"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1472719675, "creation_date": 1472719675, "answer_id": 39266823, "question_id": 39266471, "link": "https://stackoverflow.com/questions/39266471/my-sendmail-log-get-tls-setup-failed/39266823#39266823", "title": "My sendmail log get TLS setup failed", "body": "<p>If you mean with <code>sendEmail.pl</code> <a href=\"http://caspian.dotconf.net/menu/Software/SendEmail/\" rel=\"nofollow\">this script with the last update from 2009</a> then you are using unsupported and broken software. It might work if you change the following line in the script:</p>\n\n<pre><code>-   if (! IO::Socket::SSL-&gt;start_SSL($SERVER, SSL_version =&gt; 'SSLv3 TLSv1')) {\n+   if (! IO::Socket::SSL-&gt;start_SSL($SERVER)) {\n</code></pre>\n\n<p>Reason for this change is that the setting of <code>SSL_version</code> in the code was wrong from the beginning, only that 7 years ago IO::Socket::SSL did not complain about it but simply used the first setting <code>SSLv3</code>. But since 4 years IO::Socket::SSL is stricter and complains about the wrong usage. Apart from that <code>SSLv3</code> would not work in many cases anyway today because the protocol is disabled for security reasons.</p>\n"}], "owner": {"reputation": 53, "user_id": 5523781, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/72f1b40cefd7356a781d07fa436bfc77?s=128&d=identicon&r=PG&f=1", "display_name": "Richard wei", "link": "https://stackoverflow.com/users/5523781/richard-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3804, "favorite_count": 1, "accepted_answer_id": 39266823, "answer_count": 1, "score": 2, "last_activity_date": 1472719675, "creation_date": 1472718610, "question_id": 39266471, "link": "https://stackoverflow.com/questions/39266471/my-sendmail-log-get-tls-setup-failed", "title": "My sendmail log get TLS setup failed", "body": "<p>I setup my nagios in docker container,and It working.and sendmail can send mail to me.</p>\n\n<p>I find it can't send message to me one day,and I see the Log of sendmail,I get this error </p>\n\n<p><code>\nnagios sendEmail.pl[15471]: ERROR =&gt; TLS setup failed: SSL connect attempt failed because of handshake problems error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure\n</code></p>\n\n<p>during this time,I just stop and restart my nagios container</p>\n\n<p>the packages of libio-socket-ssl-perl and libnet-ssleay-perl perl also have installed.</p>\n\n<p>How can I slove this problem??</p>\n\n<p>Thanks very much</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1472717714, "post_id": 39266046, "comment_id": 65867094, "body": "Your question is unclear.  Can you be more specific and edit the question with more details?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1472720044, "post_id": 39266046, "comment_id": 65868529, "body": "I understand your question, but there is no <code>Browser</code> module on CPAN. Can you give a better example please?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1472740862, "post_id": 39266046, "comment_id": 65883666, "body": "Related: <a href=\"http://stackoverflow.com/q/25112397/176646\">How can I make ExtUtils::Manifest include empty directories?</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1472741861, "post_id": 39266046, "comment_id": 65884418, "body": "I&#39;ve created .exists files in distributions before so I understand your question, but I&#39;m confused about one thing: I&#39;ve downloaded several versions of Catalyst::Plugin::Browser and none of them has any .exists files. For the benefit of future visitors, it would be nice to give the module version and the actual path to the file so people can see what you&#39;re seeing, or to just leave that information out altogether."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1472724601, "creation_date": 1472724601, "answer_id": 39268684, "question_id": 39266046, "link": "https://stackoverflow.com/questions/39266046/what-for-there-is-file-exists-in-perl-installed-modules-folders/39268684#39268684", "title": "What for there is file .exists in Perl installed modules&#39; folders?", "body": "<p>The documentation for the <code>dir_target</code> target in <a href=\"https://metacpan.org/pod/ExtUtils::MM_Any\" rel=\"nofollow\">ExtUtils::MM_Any</a> says this:</p>\n\n<blockquote>\n  <p>Because depending on a directory to just ensure it exists doesn't work\n  too well (the modified time changes too often) dir_target() creates a\n  .exists file in the created directory. It is this you should depend\n  on.</p>\n</blockquote>\n\n<p>So it's part of the mechanisms used by the CPAN module installation toolchain.</p>\n"}], "owner": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 39268684, "answer_count": 1, "score": -2, "last_activity_date": 1472740967, "creation_date": 1472717292, "last_edit_date": 1472740967, "question_id": 39266046, "link": "https://stackoverflow.com/questions/39266046/what-for-there-is-file-exists-in-perl-installed-modules-folders", "title": "What for there is file .exists in Perl installed modules&#39; folders?", "body": "<p>I have installed CPAN modules some time ago. After I open a folder of module <code>Catalyst-Plugin-Browser</code>, there is a file .exists. What for is it there?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3876, "user_id": 1072765, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/00c053be97f619e2d33b1eb5761c42be?s=128&d=identicon&r=PG", "display_name": "Ghost", "link": "https://stackoverflow.com/users/1072765/ghost"}, "edited": false, "score": 0, "creation_date": 1472712157, "post_id": 39264082, "comment_id": 65863873, "body": "I would assign the captured output using backticks into a <code>scalar</code>, and use <code>spilt</code> and reassign it to an <code>array</code>. That&#39;s one way to go about it."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 3876, "user_id": 1072765, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/00c053be97f619e2d33b1eb5761c42be?s=128&d=identicon&r=PG", "display_name": "Ghost", "link": "https://stackoverflow.com/users/1072765/ghost"}, "edited": false, "score": 0, "creation_date": 1472737450, "post_id": 39264082, "comment_id": 65880997, "body": "No, no, no @Ghost. Backticks in list context already captures the output into an array, one <code>$&#47;</code>-ending line per element."}, {"owner": {"reputation": 3876, "user_id": 1072765, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/00c053be97f619e2d33b1eb5761c42be?s=128&d=identicon&r=PG", "display_name": "Ghost", "link": "https://stackoverflow.com/users/1072765/ghost"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1472809178, "post_id": 39264082, "comment_id": 65912314, "body": "@mob: Oh! I wasn&#39;t aware of that. Thanks for letting me know about this. Will keep this in mind going further"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1472715454, "post_id": 39264486, "comment_id": 65865765, "body": "@Coder: Remember that each line in the array will be terminated by a newline character which, depending on your application, may need to be chomped."}, {"owner": {"reputation": 65, "user_id": 5289987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849d7488d4516e34db18a87a7e23e875?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/5289987/coder"}, "edited": false, "score": 0, "creation_date": 1472720019, "post_id": 39264486, "comment_id": 65868511, "body": "Got it! Thanks :)"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 9, "last_activity_date": 1472738164, "last_edit_date": 1472738164, "creation_date": 1472712592, "answer_id": 39264486, "question_id": 39264082, "link": "https://stackoverflow.com/questions/39264082/how-to-store-the-output-of-a-command-in-an-array-line-by-line-in-perl/39264486#39264486", "title": "How to store the output of a command in an array line by line in perl?", "body": "<p>A simple</p>\n\n<pre><code>@array = `ipconfig`;\n</code></pre>\n\n<p>does the trick. Note that, as Borodin rightly points out, the array elements so assigned include the newlines.</p>\n"}], "owner": {"reputation": 65, "user_id": 5289987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849d7488d4516e34db18a87a7e23e875?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/5289987/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "closed_date": 1472912213, "answer_count": 1, "score": 2, "last_activity_date": 1508172835, "creation_date": 1472711165, "last_edit_date": 1508172835, "question_id": 39264082, "link": "https://stackoverflow.com/questions/39264082/how-to-store-the-output-of-a-command-in-an-array-line-by-line-in-perl", "closed_reason": "Duplicate", "title": "How to store the output of a command in an array line by line in perl?", "body": "<p>For eg, I want to store the contents of the command <code>ipconfig</code> in an array, such that each line of output is stored in a new index of array, i.e.\n<code>array[0]</code> contains the 1st line output.\n<code>array[1]</code> contains the 2nd line output and so on.</p>\n\n<p>How can I achieve that?</p>\n"}, {"tags": ["perl", "soap", "namespaces"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1472721261, "post_id": 39262470, "comment_id": 65869442, "body": "Is this something for a customer? How dirty of a solution would you be comfortable with? Your code doesn&#39;t have <code>use warnings</code>, but my assessment is that it is not very messy. It&#39;s just SOAP::Lite and all the stuff that relates to it that doesn&#39;t really look like modern Perl."}, {"owner": {"reputation": 141, "user_id": 1303081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a41aa1e611399a23d186a82262e3c3c8?s=128&d=identicon&r=PG", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/1303081/adam-thompson"}, "edited": false, "score": 0, "creation_date": 1486508784, "post_id": 39262470, "comment_id": 71373661, "body": "The LogRhythm API documentation is not just terrible, it is downright misleading.  Expect some functions to take arguments in a totally different order to the one documented."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "edited": false, "score": 1, "creation_date": 1472798685, "post_id": 39268591, "comment_id": 65905847, "body": "Thanks for taking the time to put together such a detailed response.  I think I understand what you are suggesting, and from my poking around the code, looks like it will work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "edited": false, "score": 0, "creation_date": 1472798951, "post_id": 39268591, "comment_id": 65905975, "body": "You&#39;re welcome. The hardest part about this kind of thing in my opinion is to find out where you have to look. I will probably come back here myself at some point for a reference. You don&#39;t keep details like this in your head unless you use them every day I guess. :-)"}, {"owner": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "edited": false, "score": 0, "creation_date": 1472799118, "post_id": 39268591, "comment_id": 65906078, "body": "The only potential issue is the number of &quot;Methods&quot; that are published by each of several services in the API requiring their request to be doctored, but I have some thoughts about how to deal with that.  In any case, I will be sure to update here if this resolves my issue.  Thanks again."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "edited": false, "score": 0, "creation_date": 1472799253, "post_id": 39268591, "comment_id": 65906160, "body": "You could have a list of tags and possibly the  things they need to be updated with. Either build a precompiled regex with <code>qr</code> or make a hash and go through that. If there is more than one tag per request, add the <code>&#47;g</code> flag to you substitutions."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1472724357, "last_edit_date": 1495535367, "creation_date": 1472724357, "answer_id": 39268591, "question_id": 39262470, "link": "https://stackoverflow.com/questions/39262470/perl-soaplite-interfacing-to-a-vendor-api-on-net/39268591#39268591", "title": "Perl SOAP::Lite interfacing to a vendor API on .NET", "body": "<p>Here is a bit of a hacky solution. It hooks into the Transport layer of your SOAP::Lite client and modifies each outgoing request.</p>\n\n<p>I have used a random web service I found by googling so you can copy and paste the example code and run it without credentials. <a href=\"http://graphical.weather.gov/xml/\" rel=\"nofollow noreferrer\">The service</a> is run by the US National Weather Service. In my example I am using their endpoint to return the lat/long coordinates of a US zip code.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse SOAP::Lite;\n\nmy $client = SOAP::Lite-&gt;new(\n    proxy =&gt; 'http://graphical.weather.gov/xml/SOAP_server/ndfdXMLserver.php'\n);\n$client-&gt;service('http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl');\n\n# the transport layer is a subclass of LWP::UserAgent\n$client-&gt;transport-&gt;add_handler(\n    request_prepare =&gt; sub {\n        my ( $request, $ua, $h ) = @_;\n        my $content = $request-&gt;content;\n\n        # this is the content before modification\n        say 'before: ' . $content;\n\n        # modify the content with a simple regex substitution\n        $content =~ s{&lt;LatLonListZipCode&gt;}{&lt;LatLonListZipCode xmlns=\"http://example.org\"&gt;};\n        $request-&gt;content($content);\n\n        # so it doesn't throw a 'Content-Length header value \n        # was wrong, fixed' warning\n        $request-&gt;header( 'Content-Length' =&gt; length $content );\n\n        # this is the content after modification\n        say 'after: ' . $content;\n\n        # the return value is ignored\n    }\n);\n\nmy $res = $client-&gt;LatLonListZipCode('90210');\nsay $res-&gt;result;\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>This works because the <a href=\"https://metacpan.org/pod/distribution/SOAP-Lite/lib/SOAP/Transport.pod#SOAP::Transport::HTTP::Client\" rel=\"nofollow noreferrer\">SOAP::Transport</a> layer for this kind of SOAP communication, <a href=\"https://metacpan.org/pod/distribution/SOAP-Lite/lib/SOAP/Transport.pod#SOAP::Transport::HTTP::Client\" rel=\"nofollow noreferrer\">SOAP::Transport::HTTP::Client</a>, is a subclass of <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>. The UserAgent is very flexible, and offers a lot of <a href=\"https://metacpan.org/pod/LWP::UserAgent#Handlers\" rel=\"nofollow noreferrer\">different handlers</a> for certain events. The one we are using is <a href=\"https://metacpan.org/pod/LWP::UserAgent#request_prepare-sub-my-request-ua-h-_\" rel=\"nofollow noreferrer\"><code>request_prepare</code></a>, which allows us to alter the <a href=\"https://v1.metacpan.org/pod/HTTP::Request\" rel=\"nofollow noreferrer\">HTTP::Request</a> before it is sent over the wire (or wireless, or whatever).</p>\n\n<blockquote>\n  <p>The handler is called before the request is sent and can modify the request any way it see fit. This can for instance be used to add certain headers to specific requests.</p>\n</blockquote>\n\n<p>In the handler that we are adding, we grab the content of the request and use a regex substitute to add an xmlns to the <code>&lt;LatLongListZipCode&gt;</code> tag. While <a href=\"https://stackoverflow.com/q/1732348/1331451\">parsing XML with regex is not a good idea</a>, altering a bit of text that happens to look like XML is fine, since we don't care to understand what's in it at that time.</p>\n\n<p>Because the request had already been built, we need to update the header field for <em>Content-Length</em>. It would update automatically, but at the same time issue a warning. We can omit that by simply updating it.</p>\n\n<p>Here is the output of the program, split into three parts.</p>\n\n<p><strong>Content of the request before change</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;soap:Envelope soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;&lt;soap:Body&gt;&lt;LatLonListZipCode&gt;&lt;c-gensym3 xsi:type=\"xsd:int\"&gt;90210&lt;/c-gensym3&gt;&lt;/LatLonListZipCode&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p><strong>Content of the request after change</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;soap:Envelope soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;&lt;soap:Body&gt;&lt;LatLonListZipCode xmlns=\"http://example.org\"&gt;&lt;c-gensym3 xsi:type=\"xsd:int\"&gt;90210&lt;/c-gensym3&gt;&lt;/LatLonListZipCode&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p><strong>Content of the response</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version='1.0'?&gt;&lt;dwml version='1.0' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd'&gt;&lt;latLonList&gt;34.0995,-118.414&lt;/latLonList&gt;&lt;/dwml&gt;\n</code></pre>\n\n<p>Obviously the change worked, the request was still processed and the service I chose doesn't care about that xmlns attribute.</p>\n\n<p><strong>Adopting for your web service</strong></p>\n\n<p>For your use-case, you would have to make sure that only the requests that do not work out of the box get changed. If all of them should be changed, it might be as simple as this. Just do it once after you have built the client.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$lrapi-&gt;transport-&gt;add_handler(\n    request_prepare =&gt; sub {\n        my ( $request, $ua, $h ) = @_;\n        my $content = $request-&gt;content;\n\n        # modify the content with a simple regex substitution\n        $content =~ s{&lt;tns:GetClassificationsByType&gt;}{&lt;tns:GetClassificationsByType xmlns=\"http://www.logrhythm.com/webservices\"&gt;};\n        $request-&gt;content($content);\n\n        # so it doesn't throw a 'Content-Length header value was wrong, fixed' warning\n        $request-&gt;header( 'Content-Length' =&gt; length $content );\n    }\n);\n</code></pre>\n\n<p><strong>Disclaimer</strong></p>\n\n<p>As I said, this is a pragmatic solution. But SOAP is very complex, and there are very few clients that get everything right. There are also a lot of servers that do a lot of things less-than-right. Sometimes pragmatism is the best course of action. Of course the behavior in the server might change, in which case this could break. But that's a risk worth taking I believe.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1473153066, "post_id": 39339138, "comment_id": 66019984, "body": "Glad it helped. You don&#39;t need to escape <code>&quot;</code> in your regular expression, and if you use a different delimiter (like I did below in the <code>s{}{}</code>) you can also get rid of the backslashes in front of the slashes. Inside of the <code>[]</code> you only need to escape <code>]</code>, while a dot is just a dot, not a meta char. So it could look like this: <code>m{^&quot;(http:&#47;&#47;[\\w.&#47;]+)&#47;(\\w+)&#47;(\\w+)&quot;$}</code>. That&#39;s way easier to read."}], "tags": [], "owner": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "is_accepted": false, "score": 1, "last_activity_date": 1473122328, "creation_date": 1473122328, "answer_id": 39339138, "question_id": 39262470, "link": "https://stackoverflow.com/questions/39262470/perl-soaplite-interfacing-to-a-vendor-api-on-net/39339138#39339138", "title": "Perl SOAP::Lite interfacing to a vendor API on .NET", "body": "<p>As a follow-up to my original post, and to @simbabque, I have tested this and can confirm that @simbabque's suggestion works.</p>\n\n<p>In order to cater for the extended list of available methods (there are 6 distinct service definitions, with a total of 59 methods available.  This may increase in future editions of the API...), I have implemented the suggested <code>add_handler</code> as follows:</p>\n\n<pre><code>$lrapi-&gt;transport-&gt;add_handler(\n    request_prepare =&gt; sub {\n        my ( $request, $ua, $h ) = @_;\n        my $content = $request-&gt;content;\n\n        # Get the SOAPAction Header from the current request\n        my $soapAction = $request-&gt;header('SOAPAction');\n\n        # Parse the SOAPAction Header, and determine the method being called\n        $soapAction =~ m/^\\\"(http:\\/\\/[\\w\\.\\/]+)\\/(\\w+)\\/(\\w+)\\\"$/;\n        my ($lruri, $lrsvc, $lrmethod) = ($1, $2, $3);\n\n        # Modify the content with a simple regex substitution\n        $content =~ s{&lt;tns:$lrmethod&gt;}{&lt;tns:$lrmethod xmlns=\"$lruri\"&gt;};\n        $request-&gt;content($content);\n\n        # So it doesn't throw a 'Content-Length header value was wrong, fixed' warning\n        $request-&gt;header( 'Content-Length' =&gt; length $content );\n    }\n);\n</code></pre>\n\n<p>I also had to set a property on the <code>$lrapi-&gt;transport</code> to ensure that it had some values.  I simply set the proxy property on the transport to serve this purpose.  For some reason the transport property is not built the same way when using a WSDL service resulting in errors.</p>\n\n<p>I used something akin to the following, before calling <code>add_handler</code>, to achieve this:</p>\n\n<pre><code>$lrapi-&gt;proxy (\"https://melcapi01.soc.ipsec.net.au/LogRhythm.API/Services/LookupServiceBasicAuth.svc\");\n</code></pre>\n\n<p>This results in the <code>$lrapi-&gt;transport</code> object being built properly, allowing the <code>add_handler</code> to function correctly.</p>\n\n<p>Thanks again to @simbabque for the solution.</p>\n\n<p>I hope this article is of use to others also.</p>\n"}], "owner": {"reputation": 23, "user_id": 6781332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RgDPvqwHs7I/AAAAAAAAAAI/AAAAAAAAAN4/agoJbYDI3uw/photo.jpg?sz=128", "display_name": "John Berkers", "link": "https://stackoverflow.com/users/6781332/john-berkers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 39268591, "answer_count": 2, "score": 1, "last_activity_date": 1473122328, "creation_date": 1472702179, "last_edit_date": 1472720977, "question_id": 39262470, "link": "https://stackoverflow.com/questions/39262470/perl-soaplite-interfacing-to-a-vendor-api-on-net", "title": "Perl SOAP::Lite interfacing to a vendor API on .NET", "body": "<p>Frequent reader, first time question-asker.</p>\n\n<p>I am working on interfacing Perl with a SOAP API provided by one of our vendors (LogRhythm), and seem to have hit a bit of a road-block.</p>\n\n<p>I have been able to interface with the API, and have overcome the Authentication challenges I originally encountered.  Now I am having an issue with Name Space tagging in the SOAP Envelope Body when I need to supply parameters to the SOAP call.</p>\n\n<p>The API provided by the Vendor is built around .NET and WCF.</p>\n\n<p>My prototype code currently looks like the following:</p>\n\n<pre><code>use strict;\nno strict \"refs\";\n\nuse Data::Dumper;\nuse IO::Socket::SSL qw (SSL_VERIFY_NONE) ;\nuse SOAP::Lite;\nuse Tie::IxHash;\n\n# Username and Password\nmy $sUID = \"&lt;API UserID&gt;\";\nmy $sPWD = \"&lt;API Password&gt;\";\n\n# WSDL definition URI.  Using a cached local copy using file:/... also works\nmy $LookupService_wsdl = 'https://melcapi01.soc.ipsec.net.au/LogRhythm.API/Services/LookupServiceBasicAuth.svc?singleWsdl';\nmy $lrns = 'http://www.logrhythm.com/webservices';\n\n# Ensure that a consistent xmlns:soap value is used, without this we get inconsistent results.\n$SOAP::Constants::PREFIX_ENV = 'SOAP-ENV';\n\n# Don't validate SSL Certificate while testing\nIO::Socket::SSL::set_defaults(SSL_verify_mode =&gt; \"SSL_VERIFY_NONE\");\n\n# Construct the security header\nmy %authHash;\ntie %authHash, \"Tie::IxHash\";\n%authHash = (\n            Username =&gt; SOAP::Data-&gt;type( '' =&gt; $sUID )-&gt;prefix('wsse'),\n            Password =&gt; SOAP::Data-&gt;type( '' =&gt; $sPWD )-&gt;prefix('wsse'),\n    );\n\nmy $wsse = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\";\nmy $securityHeader = SOAP::Header-&gt;new(\n    name   =&gt; 'Security',\n    uri    =&gt; $wsse,\n    prefix =&gt; 'wsse',\n    value  =&gt; \\SOAP::Data-&gt;new(\n        name   =&gt; 'UsernameToken',\n        prefix =&gt; 'wsse',\n        value  =&gt; \\%authHash,\n      )\n);\n\n# Error handling\non_fault =&gt; sub { my($soap, $res) = @_; \n    die ref $res ? $res-&gt;faultstring : $soap-&gt;transport-&gt;status;\n};\n\n# Define the SOAP Instance\nmy $lrapi = SOAP::Lite\n    -&gt; readable (1)\n    -&gt; service($LookupService_wsdl)\n    -&gt; on_action( sub {return $action});\n\n# Set the default Namespace\n$lrapi-&gt;default_ns($lrns);\n\n# Actually get data from the LookupService\nmy $result;\n\n# Build up the parameters\nmy @classificationType = ( SOAP::Data-&gt;new(name =&gt;'classificationType', value =&gt; 2000));\n\n$result = $lrapi-&gt;GetClassificationsByType($securityHeader);\n\nprint Dumper $result;\n</code></pre>\n\n<p>This results in the following SOAP Request:</p>\n\n<pre><code>SOAPAction: \"http://www.logrhythm.com/webservices/LookupService/GetClassificationsByType\"\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;SOAP-ENV:Envelope \n    SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" \n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \n    xmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" \n    xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" \n    xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" \n    xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" \n    xmlns:tns=\"http://www.logrhythm.com/webservices\" \n    xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" \n    xmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" \n    xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" \n    xmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\" \n    xmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" \n    xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" \n    xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" \n    xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" \n    xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" \n    xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;SOAP-ENV:Header&gt;\n        &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;wsse:UsernameToken&gt;\n                &lt;wsse:Username&gt;reporting&lt;/wsse:Username&gt;\n                &lt;wsse:Password&gt;password&lt;/wsse:Password&gt;\n            &lt;/wsse:UsernameToken&gt;\n        &lt;/wsse:Security&gt;\n    &lt;/SOAP-ENV:Header&gt;\n    &lt;SOAP-ENV:Body&gt;\n        &lt;tns:GetClassificationsByType&gt;\n            &lt;classificationType xsi:type=\"xsd:int\"&gt;2000&lt;/classificationType&gt;\n            &lt;classificationTypeSpecified xsi:type=\"xsd:boolean\"&gt;true&lt;/classificationTypeSpecified&gt;\n        &lt;/tns:GetClassificationsByType&gt;\n    &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n\n<p>Which returns no results.  I have done some digging and Request Doctoring using .NET WebService Studio, and have identified that the problem is caused by a missing xmlns identifier on the  element in the SOAP Body.</p>\n\n<p>The SOAP Request should look like the following:</p>\n\n<pre><code>SOAPAction: \"http://www.logrhythm.com/webservices/LookupService/GetClassificationsByType\"\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;SOAP-ENV:Envelope \n    SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" \n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \n    xmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" \n    xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" \n    xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" \n    xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" \n    xmlns:tns=\"http://www.logrhythm.com/webservices\" \n    xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" \n    xmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" \n    xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" \n    xmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\" \n    xmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" \n    xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" \n    xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" \n    xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" \n    xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" \n    xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;SOAP-ENV:Header&gt;\n        &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;wsse:UsernameToken&gt;\n                &lt;wsse:Username&gt;reporting&lt;/wsse:Username&gt;\n                &lt;wsse:Password&gt;password&lt;/wsse:Password&gt;\n            &lt;/wsse:UsernameToken&gt;\n        &lt;/wsse:Security&gt;\n    &lt;/SOAP-ENV:Header&gt;\n    &lt;SOAP-ENV:Body&gt;\n        &lt;tns:GetClassificationsByType xmlns=\"http://www.logrhythm.com/webservices\"&gt;\n            &lt;classificationType xsi:type=\"xsd:int\"&gt;2000&lt;/classificationType&gt;\n            &lt;classificationTypeSpecified xsi:type=\"xsd:boolean\"&gt;true&lt;/classificationTypeSpecified&gt;\n        &lt;/tns:GetClassificationsByType&gt;\n    &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n\n<p>Various support requests indicate that this should be resolved by manually setting the <code>default_ns</code> on the SOAP::Lite object, however, this is not working for me.</p>\n\n<p>I have gone digging through the source for <a href=\"https://v1.metacpan.org/pod/SOAP::Lite\" rel=\"nofollow\">SOAP::Lite</a> (1.20) to see what is happening, and it seems that the <code>{'_use_default_ns'}</code> property, which is set to <code>1</code> before making the SOAP method call, seems to get reset to <code>0</code> during processing of the call.</p>\n\n<p>I have also tried to manually build the SOAP::Lite object with the intent of using the <code>call()</code> method to get the desired results, however, I think I am running into issues with the number of name spaces that are auto-added as a result of the <code>service()</code> mechanism I am currently using.  If I want to use the <code>call()</code> method it seems I cannot set up the object using <code>service()</code>.</p>\n\n<p>Does anyone have any other suggestions I can try as I am at a loss at this point?</p>\n\n<p>Any assistance would be greatly appreciated.</p>\n\n<p>Disclaimer: I am not a programmer/developer, I am a Senior Security Engineer/Consultant/Architect with some programming ability so I apologise in advance if my code is badly structured.  This is also my first foray into fiddling with SOAP.</p>\n"}]