[{"tags": ["string", "perl", "reference"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 3, "creation_date": 1505919525, "post_id": 46325121, "comment_id": 79611539, "body": "Even if you could do what you were trying to do, the original content would be gone because of reference counting. Just use a different variable for the reference."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1505920731, "post_id": 46325121, "comment_id": 79612464, "body": "@AKHolland oh, right... I did not think of the reference counting..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1505965472, "post_id": 46325121, "comment_id": 79630433, "body": "@AKHolland, Nonsense. It can&#39;t be gone if it&#39;s still accessible. If the OP could do what they are trying to do (access the original value as <code>$$x</code>), then it would be a major bug in Perl if its reference count had reached zero."}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1505919384, "post_id": 46325353, "comment_id": 79611440, "body": "But wouldn&#39;t this make a copy of the string? Wouldn&#39;t &quot;abcefgh&quot; and &quot;$string&quot; exist in the same time?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1505919936, "post_id": 46325353, "comment_id": 79611831, "body": "@soger: So create it right at the beginning: <code>my $string = \\ &#39;abcdefgh&#39;;</code>."}, {"owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 1, "creation_date": 1505920805, "post_id": 46325353, "comment_id": 79612528, "body": "real life is not that simple."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "edited": false, "score": 0, "creation_date": 1505926592, "post_id": 46325353, "comment_id": 79616422, "body": "@soger: What is wrong with duplicating the string? Short of writing some C code it is the only way to get a reference to the variable&#39;s <i>content</i> instead of to the variable itself. I can&#39;t see it being a problem unless the string holds multiple gigabytes."}, {"owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "edited": false, "score": 0, "creation_date": 1505964153, "post_id": 46325353, "comment_id": 79630123, "body": "You copy the value, but need to just get reference to it. see <a href=\"https://stackoverflow.com/a/46325686/1336858\">stackoverflow.com/a/46325686/1336858</a>"}, {"owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505964293, "post_id": 46325353, "comment_id": 79630173, "body": "@ikegami You are wrong here. choroba does &quot;$value&quot;, not just $value, so optimization will not be applied. AFAIK."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "edited": false, "score": 0, "creation_date": 1505965235, "post_id": 46325353, "comment_id": 79630376, "body": "@Akzhan Abdulin, You are right that I was wrong. I didn&#39;t realize <code>\\&quot;$x&quot;</code> had been used. COW does not (currently) come into play in that situation (although it should). Comment deleted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505965658, "post_id": 46325353, "comment_id": 79630466, "body": "<code>$string = \\ &quot;$string&quot;;</code> is similar to <code>$string = \\( my $anon = $string );</code> except the former forces stringification, and actually does copy the string (unlike the latter in newer versions of Perl)."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1505919202, "creation_date": 1505919202, "answer_id": 46325353, "question_id": 46325121, "link": "https://stackoverflow.com/questions/46325121/make-variable-reference-its-own-string-content/46325353#46325353", "title": "Make variable reference its own string content", "body": "<p>Assign a reference to the value, not to the variable:</p>\n\n<pre><code>my $string = 'abcefgh';\n$string = \\ \"$string\";\n\nprint $$string, \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1505966356, "last_edit_date": 1505966356, "creation_date": 1505929139, "answer_id": 46328519, "question_id": 46325121, "link": "https://stackoverflow.com/questions/46325121/make-variable-reference-its-own-string-content/46328519#46328519", "title": "Make variable reference its own string content", "body": "<p>What you are asking is impossible. A variable can't contain both a reference and a string. You must utilize two variables. This leaves you with two options.</p>\n\n<p><strong>Store the reference in a new variable</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use feature qw( say );\n   my $x = \"abc\";\n   my $y = \\$x;\n   say $y;\n   say $$y;\n'\nSCALAR(0x232a398)\nabc\n</code></pre>\n\n<p>Nice and simple, efficient, and no confusion as to what the variable contains at what time.</p>\n\n<p>The downside of this approach is that references to the original <code>$x</code> won't see the change. It's hard to imagine a situation where this would matter, however.</p>\n\n<p>Note that the new var could even have the same name as the old one. I don't recommend this as it's needlessly confusing and error-prone.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use feature qw( say );\n   my $x = \"abc\";\n   my $x = \\$x;\n   say $x;\n   say $$x;\n'\nSCALAR(0x232a398)\nabc\n</code></pre>\n\n<p><strong>Store the value in a new variable</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use feature qw( say );\n   my $x = \"abc\";\n   $x = \\( my $container = $x );\n   say $x;\n   say $$x;\n'\nSCALAR(0x175cbe0)\nabc\n</code></pre>\n\n<p>The downside of this approach is it involves copying the string. However, that's only the case until 5.20. 5.20 introduced a copy-on-write mechanism for strings. That means the above won't actually copy the string in 5.20+; it will just copy a pointer instead. Note that both scalars share the same string buffer (<code>0x2ac53d0</code>) in the following example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MDevel::Peek -e'my $x = \"abc\"; my $y = $x; Dump($_) for $x, $y;' 2&gt;&amp;1 \\\n   | grep -P '^(?:SV|  FLAGS|  PV)\\b'\nSV = PV(0x2a9f0c0) at 0x2abcdc8\n  FLAGS = (POK,IsCOW,pPOK)\n  PV = 0x2ac53d0 \"abc\"\\0\nSV = PV(0x2a9f150) at 0x2abcde0\n  FLAGS = (POK,IsCOW,pPOK)\n  PV = 0x2ac53d0 \"abc\"\\0\n</code></pre>\n\n<p>While <code>$x = \\\"$x\"</code> has been suggested as a shorter version of <code>$x = \\( my $container = $x );</code>, it forces stringification, and it copies the entire string, even in versions of Perl that support COW.</p>\n"}], "owner": {"reputation": 907, "user_id": 1677926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec08c32808dffec5028fc8ffdafc22e4?s=128&d=identicon&r=PG", "display_name": "soger", "link": "https://stackoverflow.com/users/1677926/soger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 46328519, "answer_count": 2, "score": 4, "last_activity_date": 1613939833, "creation_date": 1505918567, "last_edit_date": 1522449939, "question_id": 46325121, "link": "https://stackoverflow.com/questions/46325121/make-variable-reference-its-own-string-content", "title": "Make variable reference its own string content", "body": "<p>I wanted to make a variable reference its own content so I did this:</p>\n\n<pre><code>$x=\\$x;\n</code></pre>\n\n<p>but that does not work as I expected, <code>$x</code> became a reference to itself so <code>$$x</code> is the same as <code>$x</code>. What I was expecting is that <code>$$x</code> becomes the original string.  Why is that and how should I write it correctly without making a copy of the string in <code>$x</code>? Because in some cases <code>$x</code> can be a huge string.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1505908222, "post_id": 46321008, "comment_id": 79603228, "body": "I think you need to explain what it is that you&#39;re trying to do. Also, <code>print $Refstyles{$1}</code> will print something like <code>CODE(0x1e8fea0)</code> and won&#39;t call the subroutine at all."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505910970, "post_id": 46321008, "comment_id": 79605208, "body": "Updated my Question"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1505911394, "post_id": 46321008, "comment_id": 79605493, "body": "No, even after your edit, it&#39;s really not clear what you&#39;re trying to do or what problems you are having."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1505913532, "post_id": 46321008, "comment_id": 79607000, "body": "Again updated... I dont know here how to explain more clear"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505915199, "post_id": 46321008, "comment_id": 79608371, "body": "Well, for a start, you could tell us what you are trying to achieve. And what problems you are having. What output are you expecting? What are you actually getting? What are the differences?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1505915737, "post_id": 46321008, "comment_id": 79608755, "body": "Output should be same what I have updated (\\bibinfo{title} changed \\bibinfo{articletitle}). The way I need to do in different format. I am using <i>if else</i> hence I expecting this in via hashes."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1505915853, "post_id": 46321008, "comment_id": 79608842, "body": "Each and every references I am using <i>If else</i> in coding. In this case I need to do in different way using hashes and sub routines."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1505919276, "post_id": 46321008, "comment_id": 79611360, "body": "Don&#39;t give more information in comments. Please edit the information into your question. Delete all of the content of your question and start again. Start with &quot;I have the following data&quot; (and explain what the data is). Go on with &quot;I want to change the data by (describe the transformation)&quot;. Then &quot;I expect this output.... but I&#39;m getting this ...&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1505977596, "post_id": 46327045, "comment_id": 79634655, "body": "Woww.. Fantastic...I got it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1505924096, "creation_date": 1505924096, "answer_id": 46327045, "question_id": 46321008, "link": "https://stackoverflow.com/questions/46321008/how-can-i-reuse-sub-function-in-hashes/46327045#46327045", "title": "How can I reuse sub function in hashes", "body": "<p>Ok. I think I understand. Your question is something like this:</p>\n\n<blockquote>\n  <p>I have some TeX documents which have a <code>\\bibtype{xxx}</code> definition followed by a <code>\\bibinfo{title}</code> definition on the following line.</p>\n  \n  <p>I need to change the <code>title</code> in the <code>bibinfo</code> definition using the <code>bibtype</code> value to determine the replacement text.</p>\n  \n  <p>And I'd like to do that using a hash of subroutine references, where each subroutine changes one type of <code>bibtype</code>.</p>\n</blockquote>\n\n<p>Is that accurate?</p>\n\n<p>If it is, I think you're overcomplicating things. I think you can do this without subroutines or references or anything like that. I would write that like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# Hash that maps the bibtype to the title type\nmy %subs = (\n  article     =&gt; 'articletitle',\n  book        =&gt; 'booktitle',\n  proceedings =&gt; 'proceedingstitle',\n);\n\n# Turn the keys of that hash into a regex\nmy $match = join('|', keys %subs);\n\nmy $sample = '\nreflistStart\n\\bibtype{Article}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Book}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Proceedings}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\n';\n\n# A slightly complex substitution operator.\n# We match all of the text that we're interested in (over two lines).\n# We capture the bibtype and then replace the title with the new\n# title string as looked up in our %subs hash.\n# Another slight cleverness, is the use of \\K and (?=...) to match\n# bits of the string that we don't want to replace. See perldoc perlre\n# for more details.\n# Oh, and we use /g to change all of the titles in one go.\n$sample =~ s/bibtype\\{($match)\\}%\\n\\\\bibinfo\\{\\Ktitle(?=\\})/$subs{lc $1}/eig;\n\nprint $sample;\n</code></pre>\n\n<p>Running this gives the following output:</p>\n\n<pre><code>reflistStart\n\\bibtype{Article}%\n\\bibinfo{articletitle}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Book}%\n\\bibinfo{booktitle}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Proceedings}%\n\\bibinfo{proceedingstitle}{Sample Title}\nreflistEnd\n</code></pre>\n\n<p>Which looks right to me.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 46327045, "answer_count": 1, "score": -3, "last_activity_date": 1505924096, "creation_date": 1505907404, "last_edit_date": 1505913492, "question_id": 46321008, "link": "https://stackoverflow.com/questions/46321008/how-can-i-reuse-sub-function-in-hashes", "title": "How can I reuse sub function in hashes", "body": "<pre><code>use strict;\nuse warnings;\n\n#My sample bbl content\n\nmy $sample = '\nreflistStart\n\\bibtype{Article}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Book}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Proceedings}%\n\\bibinfo{title}{Sample Title}\nreflistEnd\n';\n\n$sample=~s#reflistStart((?:(?!reflist(?:Start|End)).)*)reflistEnd#my $fulcnt=$&amp;;\nif($fulcnt=~m/\\\\bibtype\\{article\\}/i)\n{\n    $fulcnt = ArticleReplacement($fulcnt);\n}\nelsif($fulcnt=~m/\\\\bibtype\\{book\\}/i)\n{\n    $fulcnt = BookReplacement($fulcnt);\n}\nelsif($fulcnt=~m/\\\\bibtype\\{proceedings\\}/i)\n{\n    $fulcnt = ProceedingsReplacement($fulcnt);\n}\n($fulcnt);\n#ges;\n\nsub ArticleReplacement\n{\n    my $arttext = shift;\n    $arttext=~s/\\\\bibinfo\\{title\\}/\\\\bibinfo\\{articletitle\\}/g;\n    return $arttext;\n}\nsub BookReplacement\n{\n    my $arttext = shift;\n    $arttext=~s/\\\\bibinfo\\{title\\}/\\\\bibinfo\\{booktitle\\}/g;\n    return $arttext;\n}\nsub ProceedingsReplacement\n{\n    my $arttext = shift;\n    $arttext=~s/\\\\bibinfo\\{title\\}/\\\\bibinfo\\{proceedingstitle\\}/g;\n    return $arttext;\n}\n</code></pre>\n\n<h1>Output:</h1>\n\n<pre><code>reflistStart\n\\bibtype{Article}%\n\\bibinfo{articletitle}{Sample Title} #title changed as articletitle\nreflistEnd\nreflistStart\n\\bibtype{Book}%\n\\bibinfo{Booktitle}{Sample Title}\nreflistEnd\nreflistStart\n\\bibtype{Proceedings}%\n\\bibinfo{Proceedingstitle}{Sample Title}\nreflistEnd;\n</code></pre>\n\n<p>Here I am doing for each reference types (article, book, Proceedings) in \"IF\" Conditions. Hence my question, there is any other by using hashes for example:</p>\n\n<pre><code> my %Refstyles = ( 'article' =&gt; \\&amp;ArticleReplacement, 'book' =&gt; \\&amp;BookReplacement, ... );\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 675, "user_id": 1179945, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c57c3166877ba7fa58a70609c331f00?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/1179945/arjun"}, "reply_to_user": {"reputation": 19060, "user_id": 4003419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lIeUm.png?s=128&g=1", "display_name": "LukStorms", "link": "https://stackoverflow.com/users/4003419/lukstorms"}, "edited": false, "score": 0, "creation_date": 1505908021, "post_id": 46320734, "comment_id": 79603087, "body": "Actually in the example above it is comma but it could be any combination of non white-space characters."}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 1, "creation_date": 1505909795, "post_id": 46320734, "comment_id": 79604310, "body": "can you try: <code>perl -pe &#39;s&#47;(?&lt;=&quot;)[^ \\\\]+(?=&quot;)&#47;*****&#47;g;&#39; file</code> ?"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 1, "creation_date": 1505910238, "post_id": 46320734, "comment_id": 79604650, "body": "Instead of <code>[^\\s]+</code> use: <code>[^ \\\\]</code> to ignore <code>\\n</code> as well"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1505944509, "post_id": 46320734, "comment_id": 79625414, "body": "<code>^[^&quot;\\v]*?&quot;\\K((?!\\\\n)[^&quot;\\v]+)(?=&quot;)</code> using <code>m</code> modifier with <code>**</code> as substitution?"}, {"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "reply_to_user": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1506100828, "post_id": 46320734, "comment_id": 79699585, "body": "@k-five, that will ignore a 4th column containing just &quot;\\&quot; in addition to &quot;\\n&quot;"}, {"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "edited": false, "score": 0, "creation_date": 1506100995, "post_id": 46320734, "comment_id": 79699666, "body": "@arjun, actually &quot;\\n&quot; in your data is a backslash and a n, so it is also a combination of non white-space characters."}, {"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "reply_to_user": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1506333688, "post_id": 46320734, "comment_id": 79762177, "body": "@k-five, again, your regexp does not match a line such as <code>6       SQLCHAR             0       1       &quot;\\&quot;     5     &quot;&quot;</code> or anything in quotes having one or more \\ like <code>&quot;stuff\\&quot;</code>- see: <a href=\"https://regex101.com/r/uBU9an/1\" rel=\"nofollow noreferrer\">there</a>. Arjun says that 4th column &quot;could be any combination of non white-space characters&quot;. Also, Arjun requires substitution to be <code>&quot;**&quot;</code>, not <code>&quot;****&quot;</code>. In fact, it is unclear what Arjun wants not to match because <code>\\n</code> <b>is</b> a combination of non white-space characters. For instance, Arjun should clarify if <code>&quot;a b&quot;</code> or <code>&quot;\\t&quot;</code> should match, so we know what he means."}, {"owner": {"reputation": 675, "user_id": 1179945, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c57c3166877ba7fa58a70609c331f00?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/1179945/arjun"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1507188820, "post_id": 46320734, "comment_id": 80113184, "body": "@ctwheels solution worked for me thanks."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "edited": false, "score": 0, "creation_date": 1506331182, "post_id": 46376235, "comment_id": 79760515, "body": "this will match the line <code>5       SQLCHAR             0       1       &quot;\\n&quot;     5     &quot;&quot;</code> and that is not the wanted result"}, {"owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "reply_to_user": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "edited": false, "score": 0, "creation_date": 1506449660, "post_id": 46376235, "comment_id": 79823741, "body": "Tardis, perhaps you are looking at the problem differently? Please support your &quot;will match&quot; statement with an example. Mine follows..."}], "tags": [], "owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "is_accepted": false, "score": 0, "last_activity_date": 1506142923, "creation_date": 1506142923, "answer_id": 46376235, "question_id": 46320734, "link": "https://stackoverflow.com/questions/46320734/regex-match-non-white-space-characters-except-new-line-with-perl/46376235#46376235", "title": "regex match non white space characters except new line with perl", "body": "<p>If you are using an older version of Perl then that may be a factor. In any case, I would suggest you make a minor modification ...</p>\n\n<pre><code>$_ =~ s/\"[^\\s\"]+\"/\"$delimiter\"/;\n</code></pre>\n\n<p>... that is a \", one or more NOT whitespace OR \", then a \"</p>\n"}, {"tags": [], "owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "is_accepted": false, "score": 0, "last_activity_date": 1506526911, "last_edit_date": 1506526911, "creation_date": 1506339233, "answer_id": 46404223, "question_id": 46320734, "link": "https://stackoverflow.com/questions/46320734/regex-match-non-white-space-characters-except-new-line-with-perl/46404223#46404223", "title": "regex match non white space characters except new line with perl", "body": "<p>Since the OP says in his comment that the contents on 4th column could be \"any combination of non white-space characters\", and that he states that he does not want substitution to happen for the case when 4th column contains \"\\n\" literally, I suggest he matches the contents of 4th column and then test, in two steps, whether what is in quotes includes a <em>literal</em> representation of what Perl would understand as a whitespace.</p>\n\n<p>For doing that, we could use <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a> or we could use a regexp with the <a href=\"https://perldoc.perl.org/perlre.html#Other-Modifiers\" rel=\"nofollow noreferrer\"><code>ee</code> modifier</a>, which is better and safer.</p>\n\n<p>Here is an example using the latter (<strong>update</strong> - dataset correctly includes the OP's and additional cases):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $delimiter=\"**\";\n\nwhile (&lt;DATA&gt;) {\n    # we capture the contents of the quotes in\n    # 4th column, checking also the expected format\n    if (/(^([^\\s]+\\s+){4})\"([^\"]+)\"(.*)/) {\n        my $st = $3;\n        # \"\\n\" in the file is actually \"\\\\n\" for Perl\n        # so, to have Perl understand it as \"\\n\", we need\n        # to have Perl effectively escape it, we can\n        # do that with a regexp and the ee modifier\n        $st =~ s/\\\\([tnfr])/\"qq{\\\\$1}\"/gee;\n        # now this will match an \"\\n\", \"\\r\", \"\\f\" or \"\\t\"\n        if (!($st =~ /\\s/)) {\n            print \"$1\\\"$delimiter\\\"$4\\n\";\n        } else {\n            print $_;\n        }\n    } else {\n        print \"error: wrong line format: $_\\n\";\n    }\n}\n\n__DATA__\n1       SQLCHAR             0       5       \",,,\"      1     \"\"\n2       SQLCHAR             0       25      \",,,,\"      2     \"\"\n3       SQLCHAR             0       1       \",\"      3     \"\"\n4       SQLCHAR             0       12      \",\"      4     \"\"\n5       SQLCHAR             0       1       \"\\n\"     5     \"\"\n6       SQLCHAR             0       8       \"a b\"     6     \"\"\n7       SQLCHAR             0       8       \"\\t\"     7     \"\"\n8       SQLCHAR             0       9       \"\\\"     8     \"\"\n9       SQLCHAR             0       9       \"stuff\\\"     8     \"\"\n</code></pre>\n\n<p>which would result in:</p>\n\n<pre><code>1       SQLCHAR             0       5       \"**\"      1     \"\"\n2       SQLCHAR             0       25      \"**\"      2     \"\"\n3       SQLCHAR             0       1       \"**\"      3     \"\"\n4       SQLCHAR             0       12      \"**\"      4     \"\"\n5       SQLCHAR             0       1       \"\\n\"     5     \"\"\n6       SQLCHAR             0       8       \"a b\"     6     \"\"\n7       SQLCHAR             0       8       \"\\t\"     7     \"\"\n8       SQLCHAR             0       9       \"**\"     8     \"\"\n9       SQLCHAR             0       9       \"**\"     8     \"\"\n</code></pre>\n\n<p>Please note that there is no easy way to determine what a given script running on a given environment could understand as being a \"<a href=\"https://perldoc.perl.org/perlrecharclass.html#Whitespace\" rel=\"nofollow noreferrer\">Perl whitespace</a>\", since it depends on many factors, and that <code>[\\t\\n\\f\\r ]</code> is just a simplified view of what Perl can understand as whitespace.</p>\n\n<p>Quoting a bit of <code>perlrecharclass</code>:</p>\n\n<blockquote>\n  <p>Whitespace</p>\n  \n  <p>\\s matches any single character considered whitespace.</p>\n  \n  <p>If the /a modifier is in effect ...</p>\n  \n  <p>In all Perl versions, \\s matches the 5 characters [\\t\\n\\f\\r ]; that is, the horizontal tab, the newline, the form feed, the carriage\n  return, and the space. Starting in Perl v5.18, it also matches the\n  vertical tab, \\cK . See note 1 below for a discussion of this.\n  otherwise ...</p>\n  \n  <p>For code points above 255 ...</p>\n  \n  <p>\\s matches exactly the code points above 255 shown with an \"s\" column in the table below.</p>\n  \n  <p>For code points below 256 ...</p>\n  \n  <p>if locale rules are in effect ...</p>\n  \n  <p>\\s matches whatever the locale considers to be whitespace. (...)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "edited": false, "score": 0, "creation_date": 1506515284, "post_id": 46433282, "comment_id": 79851322, "body": "Your example program is wrong because you attempt to use a Perl variable to define the data-set.The OP&#39;s data-set is in a file, which is being read by Perl, and that file contains &quot;\\n&quot; literally in 4th colum of line 5, and thus when reading this file, the string obtained will contain there a slash and a n, and not a carriage return."}, {"owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "reply_to_user": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "edited": false, "score": 0, "creation_date": 1506540268, "post_id": 46433282, "comment_id": 79867016, "body": "@argun I may have read your question incorrectly. When you state: <i>i.e &quot;,,,&quot; and &quot;,,,,&quot; and &quot;,&quot; except new line i.e &quot;\\n&quot;</i> is \\n a single character or two characters? Thanks!"}, {"owner": {"reputation": 395, "user_id": 8138432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fc8d250838c8772636a3818ed89422b?s=128&d=identicon&r=PG&f=1", "display_name": "Tardis", "link": "https://stackoverflow.com/users/8138432/tardis"}, "reply_to_user": {"reputation": 675, "user_id": 1179945, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c57c3166877ba7fa58a70609c331f00?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/1179945/arjun"}, "edited": false, "score": 0, "creation_date": 1507018128, "post_id": 46433282, "comment_id": 80034015, "body": "@arjun, then your question seems to be as I understood it, and you may be interested in checking-out <a href=\"https://stackoverflow.com/questions/46320734/regex-match-non-white-space-characters-except-new-line-with-perl/46433282#46404223\">my answer</a>, to see if that does meet your needs. It would be nice that you provide some kind of feedback, since your question has really confused many contributors here, and you have only distributed information quite sparingly. I suggest you update your question to include the disseminated bits of information so it expresses clearer requirements."}], "tags": [], "owner": {"reputation": 689, "user_id": 5683411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef57d432c88881f4e9f9f52347d8a8a?s=128&d=identicon&r=PG", "display_name": "Ken Schumack", "link": "https://stackoverflow.com/users/5683411/ken-schumack"}, "is_accepted": false, "score": 0, "last_activity_date": 1506449888, "creation_date": 1506449888, "answer_id": 46433282, "question_id": 46320734, "link": "https://stackoverflow.com/questions/46320734/regex-match-non-white-space-characters-except-new-line-with-perl/46433282#46433282", "title": "regex match non white space characters except new line with perl", "body": "<p>C:\\Users\\Ken>type test.pl</p>\n\n<pre><code>#!C:\\Strawberry\\perl\\bin\\perl -w\n$\\=\"\\n\";\nmy $d=\"**\";\nmy $L1=\"5 SQLCHAR 0 1 \\\",,,\\\" 5 \\\"\\\"\";\nmy $L2=\"5 SQLCHAR 0 1 \\\"\\n\\\" 5 \\\"\\\"\";\nforeach my $L ($L1,$L2)\n{\n  print \"LineIn=$L\";\n  if ($L=~ s/\"[^\\s\"]+\"/\"$d\"/) {print \"#YES L=$L\";}\n  else {print \"#NO  L=$L\";}\n}\n</code></pre>\n\n<p>C:\\Users\\Ken>test.pl</p>\n\n<pre><code>LineIn=5 SQLCHAR 0 1 \",,,\" 5 \"\"\n#YES L=5 SQLCHAR 0 1 \"**\" 5 \"\"\nLineIn=5 SQLCHAR 0 1 \"\n\" 5 \"\"\n#NO  L=5 SQLCHAR 0 1 \"\n\" 5 \"\"\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 1179945, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c57c3166877ba7fa58a70609c331f00?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/1179945/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1507187867, "creation_date": 1505906618, "last_edit_date": 1507187867, "question_id": 46320734, "link": "https://stackoverflow.com/questions/46320734/regex-match-non-white-space-characters-except-new-line-with-perl", "title": "regex match non white space characters except new line with perl", "body": "<p>I want to match the fifth column i.e \",,,\" and \",,,,\" and \",\" except new line i.e \"\\n\" and then replace them with some value. the following is a file delimited by space . I tried following code:\nNote: Though the example shows commas in the fifth column.It could be any characters (including tab \\t) other than newline (\\n).</p>\n\n<pre><code>my $delimiter=\"**\";\nmy $dir_to_check=$DIR; \nopendir my $DIR, $dir_to_check or die \"Error in opening dir '$dir_to_check' because: $!\";\n    my @files = readdir($DIR);\n    closedir($DIR);\n    foreach my $file (@files)\n    {\n            if($file =~ /\\.fmt/)\n            {\n                unless ( open( CONTRL_FILE, \"&lt; $dir_to_check/$file\" ) ) {\n                    print \"error while opening file $dir_to_check/$file \\n\"\n                }   # UNLESS\n\n\n               if ($file eq 'test.fmt')\n               {\n                    unless ( open( CONTRL_FILE_1, \"&gt; $dir_to_check/$file.temp\" ) ) {\n                    print \"error while opening file $file \\n\"\n                    }   # UNLESS\n                    while(&lt;CONTRL_FILE&gt;)\n                    {\n\n                            $_ =~ s/\"[^\\s]+\"/\"$delimiter\"/ ;\n                            print CONTRL_FILE_1 $_;\n\n                    }\n                    close(CONTRL_FILE_1);\n               }\n            }\n    }\n</code></pre>\n\n<p>Data:</p>\n\n<pre><code>1       SQLCHAR             0       5       \",,,\"      1     \"\"\n2       SQLCHAR             0       25      \",,,,\"      2     \"\"\n3       SQLCHAR             0       1       \",\"      3     \"\"\n4       SQLCHAR             0       12      \",\"      4     \"\"\n5       SQLCHAR             0       1       \"\\n\"     5     \"\"\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>1       SQLCHAR             0       5       \"*****\"      1     \"\"\n2       SQLCHAR             0       25      \"*****\"      2     \"\"\n3       SQLCHAR             0       1       \"*****\"      3     \"\"\n4       SQLCHAR             0       12      \"*****\"      4     \"\"\n5       SQLCHAR             0       1       \"*****\"     5     \"\"\n</code></pre>\n\n<p>Expected Result :</p>\n\n<pre><code>1       SQLCHAR             0       5       \"**\"      1     \"\"\n2       SQLCHAR             0       25      \"**\"      2     \"\"\n3       SQLCHAR             0       1       \"**\"      3     \"\"\n4       SQLCHAR             0       12      \"**\"      4     \"\"\n5       SQLCHAR             0       1       \"\\n\"     5     \"\"\n</code></pre>\n"}, {"tags": ["perl", "counter"], "comments": [{"owner": {"reputation": 318, "user_id": 2519491, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd168e3abd991d6c6d83109997eef665?s=128&d=identicon&r=PG", "display_name": "hahahakebab", "link": "https://stackoverflow.com/users/2519491/hahahakebab"}, "edited": false, "score": 0, "creation_date": 1505903922, "post_id": 46319684, "comment_id": 79600402, "body": "I believe this line --- @uniqueID = uniq(@IDs); ---- is removing what you need to count."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505905084, "post_id": 46319684, "comment_id": 79601093, "body": "The code you show doesn&#39;t compile. It is <i>essential</i> to show the exact code that is giving problems when you ask for help. You haven&#39;t even shown the part that generates the output; you must give us something that we can run that exhibits the problem you are having."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1505918012, "post_id": 46319684, "comment_id": 79610413, "body": "This looks like a scope issue. All of your <code>my</code> variables are within a scope that forces them to be reset every time you call the subroutine or loop through your UIDs. (ie. <code>my %seen</code> and <code>my $row</code> will both be reset each time you enter that scope.)"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1505907090, "creation_date": 1505907090, "answer_id": 46320893, "question_id": 46319684, "link": "https://stackoverflow.com/questions/46319684/same-value-increment-counter-start-over-again-when-a-new-value-is-encountered/46320893#46320893", "title": "Same value increment counter start over again when a new value is encountered", "body": "\n\n<p>You haven't shown enough of your code to be able to say for certain what is wrong. This program produces the output that you require by keeping track of the contents of the preceding line and comparing after each read to see if it has changed</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $tag   = '';\nmy $count;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n    chomp $line;\n    $count = $tag ne $line ? 1 : $count + 1;\n    print \"$line $count\\n\";\n    $tag = $line;\n}\n\n__DATA__\nAAA\nAAA\nAAA\nBBB\nBBB\nBBB\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>AAA 1\nAAA 2\nAAA 3\nBBB 1\nBBB 2\nBBB 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2580, "user_id": 988525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/487zi.jpg?s=128&g=1", "display_name": "Ian McGowan", "link": "https://stackoverflow.com/users/988525/ian-mcgowan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505947653, "creation_date": 1505947653, "answer_id": 46332832, "question_id": 46319684, "link": "https://stackoverflow.com/questions/46319684/same-value-increment-counter-start-over-again-when-a-new-value-is-encountered/46332832#46332832", "title": "Same value increment counter start over again when a new value is encountered", "body": "<p>Seems like a better candidate for awk than perl, but the key trick is to remember the last value and reset the counter when the current value doesn't equal the last value?</p>\n\n<pre><code>#!/bin/perl\nwhile (&lt;&gt;) {\n  chomp;\n  if ($_ ne $last) {\n    $last=$_;\n    $ctr=1;\n  } else {\n    $ctr++;\n  }\n  print \"$_ $ctr\\n\";\n}\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>$perl t.pl &lt; a\nAAA 1\nAAA 2\nAAA 3\nBBB 1\nBBB 2\nBBB 3\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8243386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2fdc4bbaec1385f2da5a44ec306451c4?s=128&d=identicon&r=PG&f=1", "display_name": "shane1717", "link": "https://stackoverflow.com/users/8243386/shane1717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46320893, "answer_count": 2, "score": 0, "last_activity_date": 1505947653, "creation_date": 1505903437, "last_edit_date": 1505907560, "question_id": 46319684, "link": "https://stackoverflow.com/questions/46319684/same-value-increment-counter-start-over-again-when-a-new-value-is-encountered", "title": "Same value increment counter start over again when a new value is encountered", "body": "\n\n<p>I have this array:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AAA\nAAA\nAAA\nBBB\nBBB\nBBB\n</code></pre>\n\n<p>What I want to do is have a counter that increments if encountered a same value but goes back to 1 when a new value is encountered. So the output would then be:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AAA 1\nAAA 2\nAAA 3\nBBB 1\nBBB 2\nBBB 3\n</code></pre>\n\n<p>I currently have this code, but it just goes 1 all the way and does not increment and go back to 1 when a new value is encountered.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub uniq {\n    my %seen;\n    grep !$seen{$_}++, @_;\n}\n\nmy %fields = ( ID =&gt; 0, );\n\nwhile ( my $line = &lt;$inputFH&gt; ) {\n\n    chomp( $line );\n    my @lineVal = split( ',', $line, -1 );\n\n    #push all IDs to array\n    push @IDs, $lineVal[ $SMfields{ID} ];\n\n    #get unique IDs\n    @uniqueID = uniq( @IDs );\n\n    ###  PART WHERE I DO THE COUNTER ######\n    foreach my $uID ( @uniqueID ) {\n        my $row = 0\n        if ( $lineVals[ $SMfields{SYMBOL} ] = $uID ) {\n            $row++;\n        }\n    }\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6518530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad4c5b498c3af55ded4c0882df7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kot789", "link": "https://stackoverflow.com/users/6518530/kot789"}, "edited": false, "score": 0, "creation_date": 1505909592, "post_id": 46320629, "comment_id": 79604156, "body": "Removing <code>$twig-&gt;purge</code> did the trick. It was in the tutorial, I&#39;m still learning the module and didn&#39;t give this one much thought.  Is there any way to add speed to the code? XML::Twig seems much slower than XML::LibXML  Which would be better: to pass level2 element to twig handlers and iterate over its children or to pass level3 element to the twig handlers and iterate over siblings?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43, "user_id": 6518530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad4c5b498c3af55ded4c0882df7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kot789", "link": "https://stackoverflow.com/users/6518530/kot789"}, "edited": false, "score": 0, "creation_date": 1505914146, "post_id": 46320629, "comment_id": 79607486, "body": "@Kot789: You need to ask a new question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1505906259, "creation_date": 1505906259, "answer_id": 46320629, "question_id": 46319622, "link": "https://stackoverflow.com/questions/46319622/removing-all-but-one-node-in-perl-xmltwig/46320629#46320629", "title": "removing all but one node in perl XML::Twig", "body": "<p>There is no need for the line <code>$twig-&gt;purge</code> or anything like it and I don't understand why you have written it</p>\n\n<p>It will discard anything that has been parsed but not printed to the output, which is the whole of the <code>level2</code> element that you have just edited</p>\n\n<p>I also recommend that you write</p>\n\n<pre><code>my $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; { level2 =&gt; \\&amp;edit },\n    pretty_print  =&gt; 'indented',\n);\n</code></pre>\n\n<p>as the <em>indirect object</em> syntax that you have used is ambiguous and prone to errors. The <code>pretty_print</code> option will also make the output XML more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": -1, "last_activity_date": 1505923614, "creation_date": 1505923614, "answer_id": 46326910, "question_id": 46319622, "link": "https://stackoverflow.com/questions/46319622/removing-all-but-one-node-in-perl-xmltwig/46326910#46326910", "title": "removing all but one node in perl XML::Twig", "body": "<p>I would suggest that unless you're specifically wanting to do incremental parsing on a large file, <code>twig_handers</code> are needlessly complicated. It's a powerful tool if you want to treat XML as a stream and modify/discard parts of that, but actually usually just loading the whole XML, and working with it is simpler and clearer. </p>\n\n<p>What you want to do appears to be to delete all 'level3' elements after the first. </p>\n\n<p>So:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\n\nmy $twig = XML::Twig-&gt;new-&gt;parsefile('your_xml_file.xml');\nmy $count;\n\nforeach my $level3 ( $twig-&gt;get_xpath('.//level3') ) {\n   #delete after the first one. \n   $level3-&gt;delete if $count++;\n}\n\n#set formatting\n$twig -&gt; set_pretty_print('indented_a');\n#print to stdout\n$twig-&gt;print;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6518530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad4c5b498c3af55ded4c0882df7fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Kot789", "link": "https://stackoverflow.com/users/6518530/kot789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46320629, "answer_count": 2, "score": 0, "last_activity_date": 1505923614, "creation_date": 1505903272, "last_edit_date": 1505904537, "question_id": 46319622, "link": "https://stackoverflow.com/questions/46319622/removing-all-but-one-node-in-perl-xmltwig", "title": "removing all but one node in perl XML::Twig", "body": "<p>I've got an xml file with a number of level3 elements. I want to remove all but one such elements. My xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;level1 id=\"level1_id\"&gt;\n    &lt;level2 id=\"level2_id\"&gt;\n        &lt;level3 id=\"level3_id1\"&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;1&lt;/attribute&gt;\n                &lt;attribute&gt;2&lt;/attribute&gt;\n            &lt;/attributes&gt;\n        &lt;/level3&gt;\n        &lt;level3 id=\"level3_id2\"&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;1&lt;/attribute&gt;\n                &lt;attribute&gt;2&lt;/attribute&gt;\n            &lt;/attributes&gt;\n        &lt;/level3&gt;\n        &lt;level3 id=\"level3_id3\"&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;1&lt;/attribute&gt;\n                &lt;attribute&gt;2&lt;/attribute&gt;\n            &lt;/attributes&gt;\n        &lt;/level3&gt;\n    &lt;/level2&gt;\n&lt;/level1&gt;\n</code></pre>\n\n<p>My perl script:</p>\n\n<pre><code>my $filename = 'test3.xml';\nmy $outfile = $filename.\"_after\";\nopen my $output, '&gt;', $outfile or die \"Couldn't open output file\\n\";\nmy $twig = new XML::Twig (twig_handlers =&gt; { 'level2' =&gt; \\&amp;edit });\n$twig-&gt;parsefile($filename);\n#$twig-&gt;flush;\n$twig-&gt;print($output);\n\nsub edit {\n    my ($twig, $element) = @_;\n    my @elements= $element-&gt;children('level3');\n    print $#elements.\"\\n\";\n    my @elements= @elements[1..$#elements];\n    print $#elements.\"\\n\";\n    my $count = 0;\n    foreach (@elements){\n        $count++;\n        $_-&gt;delete;\n    }\n    print $count;\n    $twig-&gt;purge;\n\n}\n</code></pre>\n\n<p>This however just leaves the level1 element:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;level1 id=\"level1_id\"&gt;&lt;/level1&gt;\n</code></pre>\n\n<p>On the other hand, my script works just fine when the top level is level2. Example xml file and the result after processing:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;level2 id=\"level2_id\"&gt;\n    &lt;level3 id=\"level3_id1\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute&gt;1&lt;/attribute&gt;\n            &lt;attribute&gt;2&lt;/attribute&gt;\n        &lt;/attributes&gt;\n    &lt;/level3&gt;\n    &lt;level3 id=\"level3_id2\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute&gt;1&lt;/attribute&gt;\n            &lt;attribute&gt;2&lt;/attribute&gt;\n        &lt;/attributes&gt;\n    &lt;/level3&gt;\n    &lt;level3 id=\"level3_id3\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute&gt;1&lt;/attribute&gt;\n            &lt;attribute&gt;2&lt;/attribute&gt;\n        &lt;/attributes&gt;\n    &lt;/level3&gt;\n&lt;/level2&gt;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;level2 id=\"level2_id\"&gt;\n    &lt;level3 id=\"level3_id1\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute&gt;1&lt;/attribute&gt;\n            &lt;attribute&gt;2&lt;/attribute&gt;\n        &lt;/attributes&gt;\n    &lt;/level3&gt;\n&lt;/level2&gt;\n</code></pre>\n\n<p>This is exactly what I want, i.e. just one level3 element left. What am I doing wrong? Is it to do with how I define twig handlers?\nI don't want to hard code the xml structure, e.g. my $twig = new XML::Twig (twig_handlers => { 'level1/level2' => \\&amp;edit });\nI don't know how deep level2 will be in an actual xml file and the actual files might not be identical in structure, so this part should be dynamic</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1505898153, "post_id": 46317404, "comment_id": 79596601, "body": "Why would you install one library (<code>XML::Simple</code> isn&#39;t core) but not others, when they&#39;re demonstrably better?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1505898409, "post_id": 46317404, "comment_id": 79596797, "body": "XML::Simple is Nasty.. rater use Twig."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1505898480, "post_id": 46317404, "comment_id": 79596850, "body": "I like <code>XML::Twig</code> for being easy to get started with. I like <code>XML::LibXML</code> for being fully featured and powerful."}, {"owner": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "edited": false, "score": 0, "creation_date": 1505898503, "post_id": 46317404, "comment_id": 79596865, "body": "i not sure why, i just join the company and they are not give me the right or permission to install other library"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1505898572, "post_id": 46317404, "comment_id": 79596912, "body": "I don&#39;t understand why anyone would use XML::Simple after reading <a href=\"https://metacpan.org/pod/XML::Simple#STATUS-OF-THIS-MODULE\" rel=\"nofollow noreferrer\">the warnings in the documentation</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1505898579, "post_id": 46317404, "comment_id": 79596917, "body": "You can install modules locally. But if you can&#39;t, read through <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">&quot;Why is XML::Simple discouraged&quot;</a> and get the alternatives installed."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1505898713, "post_id": 46317404, "comment_id": 79596987, "body": "Also: <code>perl 5.8.8</code> is <i>old</i>. 9 years old to be specific. If isolation is really your problem, then things like Docker can build a <code>perl</code> container quite handily."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1505898770, "post_id": 46317404, "comment_id": 79597017, "body": "Two important questions to ask when being interviewed for a Perl job. &quot;Which version of Perl do you use?&quot; and &quot;How do developers get new CPAN modules included in the project?&quot; If the answers aren&#39;t satisfactory, just don&#39;t take t he job."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1505898377, "creation_date": 1505898377, "answer_id": 46317750, "question_id": 46317404, "link": "https://stackoverflow.com/questions/46317404/how-can-i-extract-value-in-xml-file/46317750#46317750", "title": "How can i extract value in xml file?", "body": "<p>Don't use <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\"><code>XML::Simple</code></a> - this task is much easier using <code>xpath</code>, and for that you need <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"noreferrer\"><code>XML::LibXML</code></a> or <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"noreferrer\"><code>XML::Twig</code></a>. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parsefile ( '/cy/programable/1ProgrammableRevision.xml'); \n\nmy $value = $twig -&gt; get_xpath('//PartNumber[@name=\"750\"]/SubComponent[@name=\"FPGA\"]/SubComponentItem[@device_name=\"user\"]',0 ) -&gt; att('rev');\n\nprint $value;\n</code></pre>\n\n<p>One of the niceties of <code>xpath</code> is you can to partial paths - lets say you know you're looking for a \"FPGA_T6E_PIC\":</p>\n\n<pre><code>my $value = $twig -&gt; get_xpath('//SubComponentItem[@type=\"FPGA_T6E_PIC\"]',0 ) -&gt; att('rev');\nprint $value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1505899567, "post_id": 46318082, "comment_id": 79597497, "body": "<a href=\"https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la\" title=\"why its not possible to use regex to parse html xml a formal explanation in la\">stackoverflow.com/questions/6751105/&hellip;</a>"}], "tags": [], "owner": {"reputation": 138, "user_id": 8639606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-neutQ_UmytM/AAAAAAAAAAI/AAAAAAAACvA/jjP1-WuOpTU/photo.jpg?sz=128", "display_name": "Ga&#233;tan RYCKEBOER", "link": "https://stackoverflow.com/users/8639606/ga%c3%a9tan-ryckeboer"}, "is_accepted": false, "score": -3, "last_activity_date": 1505899243, "creation_date": 1505899243, "answer_id": 46318082, "question_id": 46317404, "link": "https://stackoverflow.com/questions/46317404/how-can-i-extract-value-in-xml-file/46318082#46318082", "title": "How can i extract value in xml file?", "body": "<p>With a simple regular expression ?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $name='';\n\nif (/&lt;PartNumber ([^&gt;]+)&gt;/) {\n    my $PN_attr=$1;\n    if ($PN_attr =~ /name=\"([^\"]*)\"/) {\n        $name=$1;\n    }\n}\n\nprint $name;\n</code></pre>\n\n<p>the <code>[^&gt;]+</code> scheme is there not to match end delimiter inside a <code>&lt; \u2026 &gt;</code> block.</p>\n"}], "owner": {"reputation": 13, "user_id": 8416265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea790cac0274e71f56d34cd1b920e91e?s=128&d=identicon&r=PG&f=1", "display_name": "Will Lee", "link": "https://stackoverflow.com/users/8416265/will-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505900319, "creation_date": 1505897302, "last_edit_date": 1505900319, "question_id": 46317404, "link": "https://stackoverflow.com/questions/46317404/how-can-i-extract-value-in-xml-file", "title": "How can i extract value in xml file?", "body": "<p>i would like to extract some string from XML file.\nmy XML file as below:-</p>\n\n<pre><code>&lt;PartNumber name=\"750\"&gt;\n    &lt;SubComponent name=\"FPGA\"&gt;\n        &lt;SubComponentItem name=\"0\" device_name=\"golden\" desc=\"GPCAM FPGA Golden Image\" rev=\"0x002a0023\" type=\"FPGA_T6E_PIC\" cache=\"yes\" /&gt;\n        &lt;SubComponentItem name=\"1\" device_name=\"user\"   desc=\"GPCAM FPGA User Image\"   rev=\"0x002a0023\" type=\"FPGA_T6E_PIC\" cache=\"yes\" /&gt;\n    &lt;/SubComponent&gt;\n    &lt;SubComponent name=\"LTC\"&gt;\n        &lt;SubComponentItem name=\"0\" desc=\"ltc3880-1.0v-0\" rev=\"0x0003\" type=\"PMBUS_T6E_QSFP28\" device_name=\"ltc3880-1.0v\" index=\"0xb4\" /&gt;\n        &lt;SubComponentItem name=\"1\" desc=\"ltc3880-3.3v\"   rev=\"0x0003\" type=\"PMBUS_T6E_QSFP28\" device_name=\"ltc3880-3.3v\" index=\"0xb4\" /&gt;\n    &lt;/SubComponent&gt;\n    &lt;SubComponent name=\"EEPROM\"&gt;\n        &lt;SubComponentItem name=\"0\"  desc=\"BCM8238X Retimer 0 ver\"       device_name=\"SLOT_NUMBER/%SLOT_NUMBER/0\"  rev=\"D00E\"      type=\"BCM8238X_EEPROM\" cache=\"yes\" /&gt;\n        &lt;SubComponentItem name=\"1\"  desc=\"BCM8238X Retimer 0 checksum\"  device_name=\"SLOT_NUMBER/%SLOT_NUMBER/0\"  checksum=\"600D\" type=\"BCM8238X_EEPROM\" cache=\"yes\" /&gt;\n        &lt;SubComponentItem name=\"2\"  desc=\"BCM8238X Retimer 1 ver\"       device_name=\"SLOT_NUMBER/%SLOT_NUMBER/0\"  rev=\"D00E\"      type=\"BCM8238X_EEPROM\" cache=\"yes\" /&gt;\n        &lt;SubComponentItem name=\"3\"  desc=\"BCM8238X Retimer 1 checksum\"  device_name=\"SLOT_NUMBER/%SLOT_NUMBER/0\"  checksum=\"600D\" type=\"BCM8238X_EEPROM\" cache=\"yes\" /&gt;\n    &lt;/SubComponent&gt;\n&lt;/PartNumber&gt;\n</code></pre>\n\n<p>for example i want to extract the rev value in PartNumber name =750 and inside SubComponentItem name=FPGA. how can i extract it?and store it.</p>\n\n<p>i had tried below code but still encountered some error, below is my code:-</p>\n\n<pre><code>  use strict;\n  use warnings;\n  use XML::Simple;\n  use Data::Dumper;\n\n  my $simple = XML::Simple-&gt;new();\n  my $data = $simple-&gt;XMLin('/cy/programable/1ProgrammableRevision.xml');\n\n  print Dumper($data) . \"\\n\";\n\n  print $data-&gt;{PartNumber}-&gt;{750}-&gt;{FPGA}-&gt;{0}-&gt;{rev}-&gt;[1];\n</code></pre>\n\n<p>for you information, my perl version 5.8.8, and XML::libxml or XML::Twig are not applicable. </p>\n"}, {"tags": ["perl", "csv", "hash"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1505897090, "post_id": 46315833, "comment_id": 79595872, "body": "Are you expecting the hash key to be an array? You&#39;re just using the last member of the array currently."}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1505898485, "post_id": 46315833, "comment_id": 79596851, "body": "Yes I do expect to use the array slice: @flds[0..2] as the hash key. Is it not correct? I also tried to assign @fldsSlc=@flds[0..2], and assign the array @fldsSlc as hash key, same problem."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1505900035, "creation_date": 1505900035, "answer_id": 46318387, "question_id": 46315833, "link": "https://stackoverflow.com/questions/46315833/perl-to-group-columns-in-csv-with-multilines/46318387#46318387", "title": "Perl to group columns in csv with multilines", "body": "<p>You can't use an array as a hash key like you've done because rather than use all the values, it only uses the last one.</p>\n\n<p>And you can't use a reference to the array as the keys aren't related to the values in the array. Take this example code...</p>\n\n<pre><code>for($i=0;$i&lt;3;$i++)\n  {\n  my @a=(1,2,3);\n  $hash{\\@a}=10;\n  }\n</code></pre>\n\n<p>Because the scope of <code>@a</code> is local to the loop, you end up with 3 keys. If you put the <code>my @a;</code> outside of the loop, you end up with 1 key. You can change the contents of the array and it would have no effect on the key.</p>\n\n<p>Instead what you'll have to do is <code>join</code> the array into one string.</p>\n\n<pre><code>push(@{$hash{join(\"\\t\",@flds[0..2])} }, $flds[3]);\n</code></pre>\n\n<p>I've used a tab, but any string of characters that won't ever appear in any of the 3 columns is what you want, so that if required you can <code>split</code> it later to get the original values back.</p>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 46318387, "answer_count": 1, "score": 0, "last_activity_date": 1505900035, "creation_date": 1505892640, "question_id": 46315833, "link": "https://stackoverflow.com/questions/46315833/perl-to-group-columns-in-csv-with-multilines", "title": "Perl to group columns in csv with multilines", "body": "<p>I have a csv (separated by ,) with multilines. The csv has 4 columns, of which first 3 columns contain multiline text while the group by happens on last column.</p>\n\n<p><strong>Input csv content</strong>: /tmp/test.tmp.csv</p>\n\n<pre><code>\"Total Sections\",ota,4!n,01\n\"Input History\",80,\"HHMM28!c1!a[4!a]\n6X\n9X]\",1\n\"T (MR)\",17t,(MTR),02\n\"Input History\",80,\"HHMM28!c1!a[4!a]\n6X\n9X]\",2\nReference,:4!t/1c,:(Text1)/(Text2),30\nReference,:4!t/1c,:(Text1)/(Text2),32\n</code></pre>\n\n<p>Above csv consists of 6 records, record 2 and 4 are with multilines.</p>\n\n<p><strong>Expected output</strong> (group by separate is space): </p>\n\n<pre><code>\"Total Sections\",ota,4!n,01\n\"Input History\",80,\"HHMM28!c1!a[4!a]\n6X\n9X]\",1 2\n\"T (MR)\",17t,(MTR),02\nReference,:4!t/1c,:(Text1)/(Text2),30 32\n</code></pre>\n\n<p>My <strong>perl script</strong> (read first 3 fields in hash as key, the last field in hash as value, print to csv with join):</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse Text::CSV;\n\nmy %hash;\nmy @array;\nmy $in_qfn = \"/tmp/test.tmp.csv\";\nmy $out_qfn = \"/tmp/test.out.tmp.csv\";\n\n# Li: Parsing multilines in csv\nmy $parser = Text::CSV-&gt;new({\n   binary =&gt; 1,\n   auto_diag =&gt; 1,\n   sep_char =&gt; ','\n});\n\n# Li: output multilines to csv\nmy $csvo = Text::CSV-&gt;new({\n   binary =&gt; 1,\n   eol =&gt; \"\\r\\n\",\n   sep_char =&gt; ','\n});\n\nopen(my $data, '&lt;:encoding(utf8)', $in_qfn) or die \"Could not open $in_qfn: $!\\n\";\nopen(my $sts, '&gt;:encoding(utf8)', $out_qfn) or die \"Could not write $out_qfn: $!\\n\";\n\nwhile (my $fields = $parser -&gt; getline($data)) {\n   my $fz = $fields-&gt;[0];\n   my $fo = $fields-&gt;[1];\n   my $ft = $fields-&gt;[2];\n   my $fth = $fields-&gt;[3];\n   my @flds = ($fz, $fo, $ft, $fth);\n\n   # Li: push the first 3 columns as key and the last column as value\n   push(@{$hash{@flds[0..2]} }, $flds[3]);\n}\n\n# Li: print to output csv without join yet\nfor my $k (sort keys %hash) {\n   my @fldsAll = ($k, @{ $hash{$k}});\n   print(\"###LI### 1: key: $k, value: @fldsAll\\n\");\n   $csvo -&gt; print($sts, \\@fldsAll);\n}\n</code></pre>\n\n<p>However, the script doesn't work perfectly, the hash key got lost due to the multiline and possibly special characters and without double quote everywhere. </p>\n\n<p><strong>Defected output</strong>:</p>\n\n<pre><code>(MTR),02\n4!n,01\n:(Text1)/(Text2),30,32\n\"HHMM28!c1!a[4!a]\n6X\n9X]\",1,2\n</code></pre>\n\n<p>Any idea on how to fix it? Or a brand new perl solution is also appreciate.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1591692257, "last_edit_date": 1591692257, "creation_date": 1505885330, "answer_id": 46313952, "question_id": 46313766, "link": "https://stackoverflow.com/questions/46313766/is-it-possible-to-use-hash-array-scalar-with-the-same-name-in-perl/46313952#46313952", "title": "Is it possible to use hash, array, scalar with the same name in Perl?", "body": "<p>In Perl <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">types</a> <code>SCALAR</code>, <code>ARRAY</code>, and <code>HASH</code> are distinguished by the leading sigil in the variable name, <code>$</code>, <code>@</code>, and <code>%</code> respectively, but otherwise they may bear the same name.  So <code>$var</code> and <code>@var</code> and <code>%var</code> are, other than belonging to the same <code>*var</code> <a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">typeglob</a>, completely distinct variables.</p>\n\n<p>A key for a hash must be a scalar, let's call it <code>$key</code>.  A value in a hash must also be a scalar, and the one corresponding to <code>$key</code> in the hash <code>%h</code> is <code>$h{$key}</code>, the leading <code>$</code> indicating that this is now a scalar.  Much like an element of an array is a scalar, thus <code>$ary[$index]</code>.</p>\n\n<p>In <code>foreach $var (@ary)</code> the scalar <code>$var</code> does not really \"get values\" of array elements but rather <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">aliases</a> them. So if you change it in the loop you change the element of the array.</p>\n\n<p>(Note, you have the array <code>@opts</code>, not <code>@opt</code>.)</p>\n\n<hr>\n\n<p>A few comments on the code, in the light of common practices in modern Perl</p>\n\n<ul>\n<li><p>One must always have <code>use warnings;</code> on top. The other one that is a must is <code>use strict</code>, as it enforces declaration of variables with <code>my</code> (or <code>our</code>), promoting all kinds of good behavior.  This restricts the scope of <a href=\"https://perldoc.perl.org/perlsub.html#Private-Variables-via-my()\" rel=\"nofollow noreferrer\">lexical (<code>my</code>) variables</a> to the nearest block enclosing the declaration</p></li>\n<li><p>A declaration may be done inside loops as well, allowing <code>while (my $var = EXPR) {}</code> and <code>foreach my $var (LIST) {}</code>, and then <code>$var</code> is scoped to the loop's block (and is also usable in the rest of the condition)</p></li>\n<li><p>The <a href=\"https://perldoc.perl.org/perlsub.html#Temporary-Values-via-local()\" rel=\"nofollow noreferrer\"><code>local</code></a> is a different beast altogether, and in this code those should be <code>my</code> instead</p></li>\n<li><p>Loop <a href=\"https://perldoc.perl.org/perlsyn.html#Compound-Statements\" rel=\"nofollow noreferrer\">labels</a> like <code>arg:</code> are commonly typed in block capitals</p></li>\n<li><p>The <code>&amp;</code> in front of a function name has rather particular meanings<sup>&dagger;</sup> and is rarely needed.  It is almost certainly not needed in this code</p></li>\n<li><p>Assignment of empty list like <code>my @optArgs = ()</code> when the variable is declared (with <code>my</code>) is unneeded and has no effect (with a global <code>@name</code> it may be needed to clear it from higher scope)</p></li>\n<li><p>In this code there is no need to introduce variables first since they are global and thus created the first time they are used, much like in Python &ndash; <em>Unless they are used outside of this sub</em>, in which case they may need to be cleared. That's the thing with globals, they radiate throughout all code</p></li>\n</ul>\n\n<p>Except for the last two these are unrelated to your Python translation task, for this script.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;It suppresses <a href=\"https://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">prototypes</a>; informs interpreter (at runtime) that it's a subroutine and not a \"<em>bareword</em>\", if it hasn't been already defined (can do that with <code>()</code> after the name); ensures that the user-defined sub is called, if there is a builtin of the same name; passes the caller's <code>@_</code> (when without parens, <code>&amp;name</code>); in <a href=\"https://perldoc.perl.org/functions/goto.html\" rel=\"nofollow noreferrer\">goto &amp;name</a> and <a href=\"https://perldoc.perl.org/functions/defined.html\" rel=\"nofollow noreferrer\">defined</a> ... see, for example, <a href=\"https://stackoverflow.com/a/8915304/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/1348945/4653379\">this post</a></p>\n"}, {"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 3, "creation_date": 1505896771, "post_id": 46316908, "comment_id": 79595679, "body": "<code>@bimbo</code> and <code>%bimbo</code> are, respectively, an array and a hash, not pointers of any kind. <code>\\@bimbo</code> and <code>\\%bimbo</code> are array and hash references (technically not pointers, but basically the same thing for most day-to-day uses), either of which could be assigned to <code>$bimbo_ref</code>."}, {"owner": {"reputation": 138, "user_id": 8639606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-neutQ_UmytM/AAAAAAAAAAI/AAAAAAAACvA/jjP1-WuOpTU/photo.jpg?sz=128", "display_name": "Ga&#233;tan RYCKEBOER", "link": "https://stackoverflow.com/users/8639606/ga%c3%a9tan-ryckeboer"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1505897623, "post_id": 46316908, "comment_id": 79596228, "body": "You are true, in perl sense. But if you evaluate objectively the code under, it is considered as a pointer, not a whole object"}], "tags": [], "owner": {"reputation": 138, "user_id": 8639606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-neutQ_UmytM/AAAAAAAAAAI/AAAAAAAACvA/jjP1-WuOpTU/photo.jpg?sz=128", "display_name": "Ga&#233;tan RYCKEBOER", "link": "https://stackoverflow.com/users/8639606/ga%c3%a9tan-ryckeboer"}, "is_accepted": false, "score": -2, "last_activity_date": 1505895739, "creation_date": 1505895739, "answer_id": 46316908, "question_id": 46313766, "link": "https://stackoverflow.com/questions/46313766/is-it-possible-to-use-hash-array-scalar-with-the-same-name-in-perl/46316908#46316908", "title": "Is it possible to use hash, array, scalar with the same name in Perl?", "body": "<p>First, to make it clear, in perl, as in shell, you could surround variable names in curly brackets {} :\n<code>${bimbo}</code> and <code>$bimbo</code> are the same scalar variable.</p>\n\n<p><code>@bimbo</code> is an array pointer\u00a0;\n<code>%bimbo</code> is a hash pointer\u00a0;\n<code>$bimbo</code> is a scalar (unique value).</p>\n\n<p>To address an array or hash value, you will have to use the '$' :\n<code>$bimbo{'index'}</code> is the 'index' value of hash <code>%bimbo</code>.\nIf $i contains an int, such as 1 for instance,\n<code>$bimbo[$i]</code> is the second value of the array <code>@bimbo</code>.</p>\n\n<p>So, as you can see, @ or % ALWAYS refers to the whole array, as <code>$bimbo{}</code> or <code>$bimbo[]</code> refers to any value of the hash or array.</p>\n\n<p><code>${bimbo[4]}</code> refers to the 5th value of the array <code>@bimbo</code>\u00a0; <code>%{bimbo{'index'}}</code> refers to the 'index' value of array <code>%bimbo</code>.</p>\n\n<p>Yes, all those structures could have the same name. This is one of the obvious syntax of perl.</p>\n\n<p>And, euhm\u2026 always think in perl as a C++ edulcored syntax, it is simplified, but it is C.</p>\n"}], "owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1591692257, "creation_date": 1505884422, "last_edit_date": 1510380642, "question_id": 46313766, "link": "https://stackoverflow.com/questions/46313766/is-it-possible-to-use-hash-array-scalar-with-the-same-name-in-perl", "title": "Is it possible to use hash, array, scalar with the same name in Perl?", "body": "<p>I'm converting perl script to python.<br>\nI haven't used perl language before so many things in perl confused me.<br>\nFor example, below, opt was declared as a scalar first but declared again as a hash. <code>%opt = ();</code> <br>\nIs it possible to declare a scalar and a hash with the same name in perl? <p>\nAs I know, <code>foreach $opt (@opts)</code> means that scalar opt gets values of array opts one by one. <br>opt is an array at this time??? <br>\nIn addition, what does <code>$opt{$opt}</code> mean?<br>\nopt outside <strong>$opt</strong>{$opt} is a hash and opt inside $opt{<strong>$opt</strong>} is a scalar?<br>\nI'm so confused, please help me ...</p>\n\n<pre><code>sub ParseOptions\n{\n    local (@optval) = @_;\n    local ($opt, @opts, %valFollows, @newargs);\n\n    while (@optval) {\n        $opt = shift(@optval);\n        push(@opts,$opt);\n        $valFollows{$opt} = shift(@optval);\n    }\n\n    @optArgs = ();\n    %opt = ();\n\n    arg: while (defined($arg = shift(@ARGV))) {\n        foreach $opt (@opts) {\n            if ($arg eq $opt) {\n                push(@optArgs, $arg);\n                if ($valFollows{$opt}) {\n                    if (@ARGV == 0) {\n                        &amp;Usage();\n                    }\n                    $opt{$opt} = shift(@ARGV);\n                    push(@optArgs, $opt{$opt});\n                } else {\n                    $opt{$opt} = 1;\n                }\n                next arg;\n            }\n        }\n        push(@newargs,$arg);\n    }\n\n    @ARGV = @newargs;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505891321, "post_id": 46313418, "comment_id": 79592301, "body": "So just two output files then?  What with <code>End 7.4</code>?  The title hints at more files."}, {"owner": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505891714, "post_id": 46313418, "comment_id": 79592525, "body": "Yes, as many output files to generate based on discrete ranges of floating values"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505891833, "post_id": 46313418, "comment_id": 79592599, "body": "&quot;Yes&quot; on which part? :)  Is it: two files, or one for each (near) integer range that happens to be in the file?"}, {"owner": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505892020, "post_id": 46313418, "comment_id": 79592699, "body": "For example, discrete ranges 0-1, 1-2, 2-3 etc upto 9-10 the maximum"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505892160, "post_id": 46313418, "comment_id": 79592780, "body": "in otherwords 0.* 1.* 2.* etc?"}, {"owner": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1505892248, "post_id": 46313418, "comment_id": 79592833, "body": "yes that&#39;s correct"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1505896795, "post_id": 46315951, "comment_id": 79595695, "body": "Actually the floating value can repeat and should get appended to existing entries if any in the created file for a given range."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1505897182, "post_id": 46315951, "comment_id": 79595943, "body": "@SenthilKumar  Ah ... this is a kind of thing to mention in the question, no?  It&#39;s an easy fix though: open the file for append, with mode <code>&gt;&gt;</code>.  If it doesn&#39;t exist it gets created, otherwise it appends.  Edited."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1505926751, "post_id": 46315951, "comment_id": 79616526, "body": "@SenthilKumar  Edited comments a bit, I hope they are clear.  Tested with repeating ranges as well.  This uses the same approach as your code except that handling of numbers is cleaned up and simplified, along with the extraction of Start-End blocks. Please let me know if I should add more explanation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "edited": false, "score": 0, "creation_date": 1506143771, "post_id": 46315951, "comment_id": 79711501, "body": "@SenthilKumar  You are welcome.  The code you show has good ideas but there is no need here to do such detailed processing, so I thought that it would be constructive to offer a simplification. I edited a few comments in the answer a little.  Please let me know if more commentary would be useful or if anything is unclear."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1506144184, "last_edit_date": 1506144184, "creation_date": 1505892968, "answer_id": 46315951, "question_id": 46313418, "link": "https://stackoverflow.com/questions/46313418/perl-conditional-splitting-of-a-file-into-multiple-based-on-floating-numeric-v/46315951#46315951", "title": "Perl - Conditional splitting of a file into multiple based on floating numeric value", "body": "<p>Capture the number right when testing for <code>End</code>, and then deal with that completed block of text. </p>\n\n<p>For instance, extract the integer part of the captured number and then subtract it from the number to see whether it is <code>&lt;= 0.9</code>. Then that integer, or it + 1, is used for the file name.  It is here where we also need to clear the buffer.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'data.txt';\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @buff;\nwhile (&lt;$fh&gt;) \n{\n    push @buff, $_;\n\n    if (my ($num) = /^End\\s+(.*)/) \n    {\n        my $N = int $num;\n        my $fout = 'name_'.  ($num - $N &lt;= 0.9 ? $N : $N+1 ) . '.txt';\n\n        open my $fh_out, '&gt;&gt;', $fout or die \"Can't open $fout: $!\";\n        print $fh_out $_ for @buff;\n\n        @buff = (); \n    }   \n}\n</code></pre>\n\n<p>This expects that <code>End num</code> is surely the end of a block. The file is opened in for append (<code>&gt;&gt;</code>) since blocks with the number in the same range should all go in the file for that range. Also, opening a file in append mode creates a new file if it doesn't already exist so that takes care of both possibilities.</p>\n\n<p>Tested with data including multiple blocks within same range and a block with <code>N.95</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 8574719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0a6e1da674813feea299ac35a3962c?s=128&d=identicon&r=PG&f=1", "display_name": "Senthil Kumar", "link": "https://stackoverflow.com/users/8574719/senthil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46315951, "answer_count": 1, "score": 1, "last_activity_date": 1506144184, "creation_date": 1505882431, "last_edit_date": 1505898305, "question_id": 46313418, "link": "https://stackoverflow.com/questions/46313418/perl-conditional-splitting-of-a-file-into-multiple-based-on-floating-numeric-v", "title": "Perl - Conditional splitting of a file into multiple based on floating numeric value", "body": "<p>I want to split a file contents to multiple outputfiles by comparing floating number present as string in the last line. For example, the file below contains more than 100K such lines:</p>\n\n<pre><code>Start:/abc/def\n.....\nEnd 1.2\nStart:/xyz/uvw\n.....\nEnd 2.8\n</code></pre>\n\n<p>I want to print every lines from <code>Start</code> to <code>End</code> to <code>OUTFILE1</code> if <code>End</code> contains values between 1 and 1.9. Otherwise print all such lines to <code>OUTFILE2</code> if <code>End</code> contains values between 2 and 2.9. Likewise, multiple output files have to be generated based on discrete range of the floating value upto 10 ie 0-1, 1-2,2-3 and so on. If there are many floating values in a given range, then entries should get appended to output files.</p>\n\n<p>The code I tried below has issues in comparing floating number correctly and also problems in conditionally emptying the array contents to required output files. Any suggestions how to fix it?</p>\n\n<pre><code>foreach $lineIn(@file1_list) {\n  $_ = $lineIn;\n\n  if (/Start:/) {\n    $pattern1 = 1;\n  } elsif(/End\\s/) {\n    my @slackno = split / \\s + /, $_; \n    $pattern2 = 1;\n    push(@buflines, $_);\n  }\n  if ($pattern1 = ~1 and $pattern2 = ~0) {\n    push(@buflines, $_);\n  } else {\n    $pattern1 = 0;\n    $pattern2 = 0;\n  }\n}\nif ($slackno[3] &gt;= 2.0 and $slackno[3] &lt;= 2.9) {\n  foreach(@buflines) {\n    print FILE2 $_;\n  }\n}\nclose(FILE2);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1505899745, "post_id": 46313017, "comment_id": 79597607, "body": "Please don&#39;t use CGI,pm if you have any choice in the matter. Something based on PSGI/Plack will make your life so much easier."}], "answers": [{"tags": [], "owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "is_accepted": false, "score": 1, "last_activity_date": 1505879810, "creation_date": 1505879810, "answer_id": 46313039, "question_id": 46313017, "link": "https://stackoverflow.com/questions/46313017/perl-what-does-means-in-perl/46313039#46313039", "title": "Perl :what does &quot;-&quot; means in perl", "body": "<p>It's a string literal, just like \"-title\" or \"-BGCOLOR\".</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1505880029, "creation_date": 1505880029, "answer_id": 46313072, "question_id": 46313017, "link": "https://stackoverflow.com/questions/46313017/perl-what-does-means-in-perl/46313072#46313072", "title": "Perl :what does &quot;-&quot; means in perl", "body": "<p><a href=\"http://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a>:</p>\n\n<blockquote>\n  <p>[Unary <code>\"-\"</code> ...] If the operand is an identifier, a string consisting of a minus sign concatenated with the identifier is returned. Otherwise, if the string starts with a plus or minus, a string starting with the opposite sign is returned.</p>\n</blockquote>\n\n<p>In other words, <code>-\"foo\"</code> is <code>\"-foo\"</code>.</p>\n\n<blockquote>\n  <p>The <code>=&gt;</code> operator (sometimes pronounced \"fat comma\") is a synonym for the comma except that it causes a word on its left to be interpreted as a string if it begins with a letter or underscore and is composed only of letters, digits and underscores.</p>\n</blockquote>\n\n<p>In other words, <code>foo =&gt; 42</code> is <code>\"foo\", 42</code>.</p>\n\n<p>Taken together, this means <code>-title =&gt; uc($color)</code> is <code>\"-title\", uc($color)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8638268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8529973a465670bff17058322d7b14?s=128&d=identicon&r=PG&f=1", "display_name": "tezr", "link": "https://stackoverflow.com/users/8638268/tezr"}, "edited": false, "score": 0, "creation_date": 1505889451, "post_id": 46313456, "comment_id": 79591231, "body": "why the key strings start with hyphens? And when i use hyphens? what is the difference between the key strings without hyphens?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1505895964, "post_id": 46313456, "comment_id": 79595174, "body": "Nothing. They&#39;re just strings."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 4, "last_activity_date": 1505882648, "creation_date": 1505882648, "answer_id": 46313456, "question_id": 46313017, "link": "https://stackoverflow.com/questions/46313017/perl-what-does-means-in-perl/46313456#46313456", "title": "Perl :what does &quot;-&quot; means in perl", "body": "<p>Whenever you come across confusing syntax in Perl, a handy tool is the <code>-MO=Deparse</code> option.  This causes Perl to check the syntax of a script and output the script in a normalized form, rather than executing it.</p>\n\n<p>So if I do</p>\n\n<pre><code>perl -MO=Deparse -e '$cgi-&gt;start_html(-title =&gt; uc($color), -BGCOLOR =&gt; $color);'\n</code></pre>\n\n<p>I get a result of:</p>\n\n<pre><code>$cgi-&gt;start_html(-'title', uc $color, -'BGCOLOR', $color);\n-e syntax OK\n</code></pre>\n\n<p>There are three differences here:</p>\n\n<ol>\n<li>Quotes were added to <code>title</code> and <code>BGCOLOR</code>.</li>\n<li>The <code>=&gt;</code> operators changed to commas.</li>\n<li>The parentheses disappeared from <code>uc($color)</code>.</li>\n</ol>\n\n<p>The first two are the normal effects of the <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\"><code>=&gt;</code> (\"fat comma\")</a> operator: It's equivalent to a comma, except that if the thing to the left is an identifier (starting with a letter or underscore and containing only alphanumeric characters and underscores), that identifier becomes a quoted string.</p>\n\n<p>And the parentheses after <code>uc</code> just aren't strictly necessary in this situation, since the builtin function <code>uc</code> is prototyped to take 0 or 1 arguments.</p>\n\n<p>But now we have <code>-'title'</code> and <code>-'BGCOLOR'</code>, so what's the negative of a string?  Checking <a href=\"http://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a>, we see that unary minus follows the rules:</p>\n\n<ol>\n<li>If the operand is a number or a string representation of a number, does an arithmetic negation.</li>\n<li>Otherwise, if the string starts with <code>'+'</code> or <code>'-'</code>, switches just the first character of the string to the opposite sign.</li>\n<li>Otherwise, if the string starts with a letter, adds a <code>'-'</code> to the beginning of the string.</li>\n<li>Otherwise, attempts to convert the string to a number, probably prints a warning if warnings are enabled, and then does an arithmetic negation.</li>\n</ol>\n\n<p>Here we have case 3, so <code>-'title'</code> is <code>'-title'</code> and <code>-'BGCOLOR'</code> is <code>'-BGCOLOR'</code>.</p>\n\n<p>So presumably the <code>start_html</code> method expects a list of arguments which come in key-value pairs, and the key strings are supposed to start with hyphens.  (It might or might not internally use these arguments to create a hash, with a line like <code>my %options = @_;</code>.)</p>\n\n<p>This is all a little roundabout, plus you'd get confusing results if you ever tried passing something like <code>-3zzz =&gt; $value</code>.  So I'd personally add explicit quotes here to make it obvious what's being passed, but keep using the fat commas anyway to emphasize the arguments are meant to be key/value pairs:</p>\n\n<pre><code>$cgi-&gt;start_html('-title' =&gt; uc($color), '-BGCOLOR' =&gt; $color);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1505899498, "post_id": 46316792, "comment_id": 79597448, "body": "I agree it was not the best idea but it&#39;s not so uncommon and other modules use that convention as well. The first time I saw it I had the same question as the OP and wondered why they would use only <i>one</i> dash, not <i>two</i> (like in --real-long-options). I think it doesn&#39;t work then without <code>&#39;--quoting&#39;</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1505899668, "post_id": 46316792, "comment_id": 79597547, "body": "@PerlDuck: I don&#39;t think I use any other modules that use this convention (of course, I don&#39;t use CGI.pm very often these days either)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1505895430, "creation_date": 1505895430, "answer_id": 46316792, "question_id": 46313017, "link": "https://stackoverflow.com/questions/46313017/perl-what-does-means-in-perl/46316792#46316792", "title": "Perl :what does &quot;-&quot; means in perl", "body": "<p>It has no effect here. It's just treated as part of the string. I assume that the original author of CGI.pm wanted to make the options look more like command-line options. I think that was a terrible idea.</p>\n"}], "owner": {"reputation": 33, "user_id": 8638268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8529973a465670bff17058322d7b14?s=128&d=identicon&r=PG&f=1", "display_name": "tezr", "link": "https://stackoverflow.com/users/8638268/tezr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 46313456, "answer_count": 4, "score": 3, "last_activity_date": 1505895430, "creation_date": 1505879616, "last_edit_date": 1505879790, "question_id": 46313017, "link": "https://stackoverflow.com/questions/46313017/perl-what-does-means-in-perl", "title": "Perl :what does &quot;-&quot; means in perl", "body": "<p>what does '-' mean in the param </p>\n\n<pre><code>$cgi-&gt;start_html(-title =&gt; uc($color), -BGCOLOR =&gt; $color);\n</code></pre>\n\n<p>I just know it is used in hash type, but this is param in a sub. So it makes me confused, and i searched for a long time.</p>\n"}, {"tags": ["perl", "ipv6", "gethostbyname"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1505866382, "post_id": 46311285, "comment_id": 79584659, "body": "In the second snippet, all you need is <code>use subs qw( gethostbyname );</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505866409, "post_id": 46311285, "comment_id": 79584667, "body": "In the third snippet, I think wrapping <code>patch_package</code> with a <code>BEGIN</code> will do."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1505866520, "post_id": 46311285, "comment_id": 79584694, "body": "But you probably want to patch from outside the module that has the calls to <code>gethostbyname</code> (or you&#39;d simply call the right sub instead). You can do that by naming your override <code>CORE::GLOBAL::gethostbyname</code> (before the module using <code>gethostbyname</code> is loaded). See <a href=\"https://perldoc.perl.org/perlsub.html#Overriding-Built-in-Functions\" rel=\"nofollow noreferrer\">Overriding Built-in Functions</a>. You can use <code>caller</code> to only provide the override to select modules."}, {"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505950773, "post_id": 46311285, "comment_id": 79627286, "body": "I actually also played around with <code>BEGIN { }</code>, but Ican&#39;t remember if it was with <code>patch_package</code> or only with <code>sub gethostbyname { }</code>. Thanks for the comments!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505891891, "post_id": 46313594, "comment_id": 79592625, "body": "Thanks for catching this. I didn&#39;t cause I was in a rush, but that&#39;s why I posted comments instead of an answer :)"}, {"owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "edited": false, "score": 0, "creation_date": 1505950841, "post_id": 46313594, "comment_id": 79627298, "body": "Thanks for digging that deep. I indeed thought it&#39;s solely checking if a hostname resolves or not and that hence the actual type of the return value is irrelevant."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1505883414, "creation_date": 1505883414, "answer_id": 46313594, "question_id": 46311285, "link": "https://stackoverflow.com/questions/46311285/is-it-possible-to-overwrite-or-monkey-patch-gethostbyname-in-perl-so-that-it-sup/46313594#46313594", "title": "Is it possible to overwrite or monkey-patch gethostbyname in Perl so that it supports IPv6?", "body": "<p>TL;TR: That's not explaining how to override <code>gethostbyname</code> (the existing comments should help doing that) but instead explaining that this does not fix your actual problem of making this specific code IPv6 ready.</p>\n\n<hr>\n\n<p>First, what should a IPv6 ready <code>gethostbyname</code> return? With IPv4 it returns a packed IPv4 address and that's expected by code calling <code>gethostbyname</code>. Such code will usually be followed by use of <code>sockaddr_in</code>, <code>PF_INET</code> sockets etc. But with IPv6 this code instead needs to use <code>sockaddr_in6</code> and <code>PF_INET6</code> which means it is not enough to patch <code>gethostbyname</code>.</p>\n\n<p>And, looking further into the code you have to fix this is actually the case. You just linked in your question to a call of <code>gethostbyname</code>  which only checks if it returns a defined value. But if you look <a href=\"https://sources.debian.net/src/backuppc/3.3.1-4/lib/BackupPC/Lib.pm/#L713\" rel=\"nofollow noreferrer\">further in the code</a> you'll see explicit use of <code>inet_aton</code>, <code>PF_INET</code> sockets etc, i.e. everything assuming IPv4 only addresses.</p>\n"}], "owner": {"reputation": 5181, "user_id": 793172, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2ec2c4d63fb493164e87d386646c2285?s=128&d=identicon&r=PG", "display_name": "Axel Beckert", "link": "https://stackoverflow.com/users/793172/axel-beckert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505883414, "creation_date": 1505865109, "question_id": 46311285, "link": "https://stackoverflow.com/questions/46311285/is-it-possible-to-overwrite-or-monkey-patch-gethostbyname-in-perl-so-that-it-sup", "title": "Is it possible to overwrite or monkey-patch gethostbyname in Perl so that it supports IPv6?", "body": "<p>I have a given <a href=\"https://sources.debian.net/src/backuppc/3.3.1-4/bin/BackupPC_dump/#L496\" rel=\"nofollow noreferrer\">application which uses Perl's <code>gethostbyname</code> to check if a hostname exists in DNS</a>. I don't want to patch the source code of that application not written by me. But I think about overwriting <code>gethostbyname</code> in one of the Perl-written configuration files.</p>\n\n<p>So I wonder if there's a chance to overwrite that function by monkey-patching it in some way.</p>\n\n<p>The <a href=\"http://backuppc.sourceforge.net/faq/BackupPC.html#How-BackupPC-Finds-Hosts\" rel=\"nofollow noreferrer\">documentation of that application says that its hostname lookups work as follows</a>:</p>\n\n<pre><code>$ perl -e 'print(gethostbyname(\"ipv6.google.com\") ? \"ok\\n\" : \"not found\\n\");'\nnot found\n</code></pre>\n\n<p>So far I tried:</p>\n\n<pre><code>$ perl -E 'use Socket qw(:DEFAULT getaddrinfo); sub gethostbyname { my ($err, @result) = getaddrinfo(@_); return @result; }; print(gethostbyname(\"ipv6.google.com\") ? \"ok\\n\" : \"not found\\n\");'\nnot found\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>$ perl -E 'use Socket qw(:DEFAULT getaddrinfo); use Monkey::Patch::Action qw(patch_package); patch_package(\"*\", \"gethostbyname\", \"add\", sub { my ($err, @result) = getaddrinfo(@_); return @result; }); print(gethostbyname(\"ipv6.google.com\") ? \"ok\\n\" : \"not found\\n\");'\nnot found\n</code></pre>\n\n<p>(I also tried <code>main</code> instead of <code>*</code> and <code>replace</code> instead of <code>add</code>. <code>replace</code> bailed out as follows: <code>Replacing *::gethostbyname: must already exist at /usr/share/perl5/Monkey/Patch/Action.pm line 31.</code>)</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505863364, "post_id": 46311052, "comment_id": 79583942, "body": "I updated the question. Sorry for the confusion. The extension can only be a number."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505863409, "post_id": 46311052, "comment_id": 79583953, "body": "Doesn&#39;t affect the answer."}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505864181, "post_id": 46311052, "comment_id": 79584152, "body": "It works awesome. I have spent the entire afternoon to match it. I don&#39;t realize I can use replace. I am just new to perl and regex. You alway gave me quick responds and always help me a lot. 10000000+ Thanks. @ikegami"}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505864671, "post_id": 46311052, "comment_id": 79584263, "body": "so you replaced the part before last slash(included) with {} by using the first pattern. And the replaced <code>.num</code> with {} by using the second pattern right? @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 1, "creation_date": 1505864805, "post_id": 46311052, "comment_id": 79584298, "body": "Replaced the chars up to including the last <code>&#47;</code> with an empty string, then replaced <code>.</code>+(1 or more digits)+EOS with an empty string."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1505864936, "last_edit_date": 1505864936, "creation_date": 1505863103, "answer_id": 46311052, "question_id": 46311025, "link": "https://stackoverflow.com/questions/46311025/perl-extract-string-between-last-slash-and-last-dot-optional/46311052#46311052", "title": "Perl: extract string between last slash and last dot (optional)", "body": "<p>It's tricky do in a single match, so I wouldn't do it that way.</p>\n\n<pre><code>my $base = $str =~ s{.*/}{}sr =~ s{\\.\\d+\\z}{}r;   # 5.14+\n</code></pre>\n\n<p>If you want to support earlier versions of Perl, you can use</p>\n\n<pre><code>my $base = $str;\n$base =~ s{.*/}{}s;\n$base =~ s{\\.\\d+\\z}{};\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 46311052, "answer_count": 1, "score": 0, "last_activity_date": 1505864936, "creation_date": 1505862916, "last_edit_date": 1505863202, "question_id": 46311025, "link": "https://stackoverflow.com/questions/46311025/perl-extract-string-between-last-slash-and-last-dot-optional", "title": "Perl: extract string between last slash and last dot (optional)", "body": "<p>My strings are</p>\n\n<p><code>my $str1 = \"/user/admin/music/dangerous-women.1\";</code> (with number as extension)</p>\n\n<p><code>my $str2 = \"/user/admin/music/dangerous-women\";</code> (without number as extension)</p>\n\n<p><code>my $str3 = \"/user/admin/music/dangerous.women.2\";</code> (with number as extension)</p>\n\n<p>How can I use regular expression to extract <code>dangerous-women</code> and <code>dangerous.women</code></p>\n\n<p>i.e. Anything between the last slash and last dot (optional).\nSo the extension is only number.</p>\n"}, {"tags": ["regex", "bash", "perl", "scripting"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1505856029, "post_id": 46309869, "comment_id": 79581746, "body": "How is this a question about bash?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1505856167, "post_id": 46309869, "comment_id": 79581798, "body": "(BTW -- it&#39;s a little hard to tell what you&#39;re asking. If you could build a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that simplified as much as possible, it would be easier to understand if we hard something with input, existing output, desired output, and code that didn&#39;t include any unrelated/irrelevant factors -- for instance, if the question isn&#39;t <i>about</i> SQL, it would be ideal to not have SQL be an element of the code)."}, {"owner": {"reputation": 7, "user_id": 8532780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KpyWZX4U_U/AAAAAAAAAAI/AAAAAAAAAj4/_bWIeod1HW0/photo.jpg?sz=128", "display_name": "Cristopher Jr. Vivieca Ramos", "link": "https://stackoverflow.com/users/8532780/cristopher-jr-vivieca-ramos"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1505856171, "post_id": 46309869, "comment_id": 79581799, "body": "The script is in Perl but can be in Bash too."}, {"owner": {"reputation": 7, "user_id": 8532780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KpyWZX4U_U/AAAAAAAAAAI/AAAAAAAAAj4/_bWIeod1HW0/photo.jpg?sz=128", "display_name": "Cristopher Jr. Vivieca Ramos", "link": "https://stackoverflow.com/users/8532780/cristopher-jr-vivieca-ramos"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1505856269, "post_id": 46309869, "comment_id": 79581841, "body": "Thanks, I goint to try write a best example. I don&#39;t know a good english. Thanks Charles."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1505856904, "post_id": 46309869, "comment_id": 79582077, "body": "With GNU grep: <code>echo &quot;MY NAME IS CRISTOPHER&quot; | grep -Eo &#39;[^ ]* NAME [^ ]*&#39;</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505860376, "post_id": 46309869, "comment_id": 79583136, "body": "One way, simplest case: <code>my ($before, $after) = $string =~ &#47;(\\w+)\\s+$name\\s+(\\w+)&#47;;</code>  where <code>$name</code> has <code>NAME</code> or whatever you need to select."}], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 8639606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-neutQ_UmytM/AAAAAAAAAAI/AAAAAAAACvA/jjP1-WuOpTU/photo.jpg?sz=128", "display_name": "Ga&#233;tan RYCKEBOER", "link": "https://stackoverflow.com/users/8639606/ga%c3%a9tan-ryckeboer"}, "is_accepted": true, "score": 0, "last_activity_date": 1505903254, "creation_date": 1505903254, "answer_id": 46319616, "question_id": 46309869, "link": "https://stackoverflow.com/questions/46309869/find-the-words-in-a-string-either-side-of-a-given-word/46319616#46319616", "title": "Find the words in a string either side of a given word", "body": "<p>If your question is about finding a pattern in a string, in perl, so one answer could be with regular expressions:</p>\n\n<pre><code>my $string='MY NAME IS';\nmy $pattern='NAME';\nif ($string =~ /$pattern/) {\n    print \"Before: $`\\n\";\n    print \"After: $'\\n\";\n}\n</code></pre>\n\n<p>See also the whole list of special <a href=\"http://www.perlmonks.org/?node_id=353259\" rel=\"nofollow noreferrer\">RE variables</a>.</p>\n"}], "owner": {"reputation": 7, "user_id": 8532780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7KpyWZX4U_U/AAAAAAAAAAI/AAAAAAAAAj4/_bWIeod1HW0/photo.jpg?sz=128", "display_name": "Cristopher Jr. Vivieca Ramos", "link": "https://stackoverflow.com/users/8532780/cristopher-jr-vivieca-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 46319616, "answer_count": 1, "score": 0, "last_activity_date": 1505903254, "creation_date": 1505855801, "last_edit_date": 1505860200, "question_id": 46309869, "link": "https://stackoverflow.com/questions/46309869/find-the-words-in-a-string-either-side-of-a-given-word", "title": "Find the words in a string either side of a given word", "body": "<p>I have the following Perl script</p>\n\n<pre><code>$filters = \"SELECT lead_id, status, user, title, first_name, last_name, city, phone_number FROM vicidial_list , vicidial_lists WHERE vicidial_list.list_id = vicidial_lists.list_id\";\n$stmtA   = \"SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = 'asterisk' AND TABLE_NAME = 'vicidial_list'\";\n$sthA    = $dbhA-&gt;prepare( $stmtA ) or die \"preparing: \", $dbhA-&gt;errstr;\n\n$sthA-&gt;execute or die \"executing: $stmtA \", $dbhA-&gt;errstr;\n\n$counter = 0;\n$columns = ();\n\nwhile ( my @row = $sthA-&gt;fetchrow_array ) {\n\n    # GET the name columns by pos\n    $column = \"@row[0] \\n\";\n\n    # Check if exists the name columns\n    if ( index( $filters, @row[$counter] ) &gt; -1 ) {\n\n        $find    = @row[$counter];\n        $replace = \"vicidial_list.\" . @row[$counter];\n\n        # Replace the name column\n        $filters =~ s/$find/$replace/g;\n\n    }\n}\n\nprint $filters . \"\\n\\n\";\n\n#Close connection\n$sthA-&gt;finish();\n</code></pre>\n\n<p>In the part that has a comment <code># Check if exists the name columns</code> I want to know what have after and before some string. </p>\n\n<p>For example, with <code>MY NAME IS CRISTOPHER</code> if I select <code>NAME</code> then it should return that it is preceded by <code>MY</code> and followed by <code>IS</code>.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1505846430, "post_id": 46303931, "comment_id": 79577048, "body": "Re &quot;<i>I personally prefer avoiding that complexity and the cumbersome interface</i>&quot;, <a href=\"https://pastebin.com/Q6f2bsqU\" rel=\"nofollow noreferrer\">wut</a>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505851967, "post_id": 46303931, "comment_id": 79579965, "body": "@ikegami The interaction between various configuration options can get rather nontrivial, and the default config might not be intuitive \u2013 I certainly was surprised to learn about the insanity of <code>auto_abbrev</code> and <code>pass_through</code>. My viewpoint is probably tainted from having attempted to write a drop-in replacement for a subset of Getopt::Long features. But yeah, I guess Getopt::Long is perfectly fine for a large range of use cases. Thank you for suggesting <code>posix_default</code> as a sane configuration starting point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505852919, "post_id": 46303931, "comment_id": 79580403, "body": "<code>pass_through</code> is off by default, and is useful in certain circumstances. For when certain options are global and certain options are for a specific command, you can extract the global options using an initial scan with <code>pass_through</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505853226, "post_id": 46303931, "comment_id": 79580535, "body": "It disables <code>auto_abbrev</code>, <code>permute</code>, and <code>+</code> as a prefix. One might be tempted to say &quot;who cares if the user wants to abbreviate&quot;, but leaving <code>auto_abbrev</code> on creates backwards compatibility issues. (e.g. If <code>--ignore</code> exists, someone might use <code>--i</code>, which prevents you later creating <code>--ignite</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505853275, "post_id": 46303931, "comment_id": 79580558, "body": "I included <code>bundling</code> in the above because it prevents <code>-long</code>."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 2, "last_activity_date": 1505833699, "creation_date": 1505833699, "answer_id": 46303931, "question_id": 46303004, "link": "https://stackoverflow.com/questions/46303004/how-do-options-behave-in-perls-getoptlong/46303931#46303931", "title": "How do options behave in Perl&#39;s Getopt::Long?", "body": "<p>Getopt::Long supports various argument types. <code>foo!</code> declares a <code>--foo</code> option with boolean value, whereas <code>foo=s</code> would expect a string value. The <code>!</code> is not negation in this case. If you want a value that is incremented each time the option is specified use the <code>+</code> type like <code>foo+</code>. For more details, read the <a href=\"https://metacpan.org/pod/Getopt::Long#Summary-of-Option-Specifications\" rel=\"nofollow noreferrer\">Summary of Option Specifications</a>.</p>\n\n<p>By default, Getopt::Long will allow abbreviated parameter names as long as the abbreviation is unambiguous. So if you have <code>--house</code> and <code>--home</code>, then both <code>--hou</code> and <code>--hom</code> would be recognized but not <code>--ho</code>. You can explicitly enable or disable this behaviour with the <code>auto_abbrev</code> configuration flag. See <a href=\"https://metacpan.org/pod/Getopt::Long#Configuring-Getopt::Long\" rel=\"nofollow noreferrer\">Configuring Getopt::Long</a> for all the configuration options. You can set them with the <code>Getopt::Long::Configure()</code> function.</p>\n\n<p>Getopt::Long is a very complicated module with tons of configuration options. Whatever you want it to do you can probably configure it do that, but I personally prefer avoiding that complexity and the cumbersome interface. Parsing arguments by hand is not much more difficult in simple cases (e.g. options without arguments).</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1505834623, "creation_date": 1505834623, "answer_id": 46304251, "question_id": 46303004, "link": "https://stackoverflow.com/questions/46303004/how-do-options-behave-in-perls-getoptlong/46304251#46304251", "title": "How do options behave in Perl&#39;s Getopt::Long?", "body": "<blockquote>\n  <p>I have put a \"!\" at the end of option name is-header to negate</p>\n</blockquote>\n\n<p>Actually, if you read <a href=\"https://metacpan.org/pod/Getopt::Long#A-little-bit-less-simple-options\" rel=\"nofollow noreferrer\">the documentation</a>, it says this:</p>\n\n<blockquote>\n  <p>A negatable option is specified with an exclamation mark ! after the option name</p>\n</blockquote>\n\n<p>\"Negatable\" is not the same as \"negated\".</p>\n\n<p>Negatable means that you can turn the option off by including \"no\" before the option's name.</p>\n\n<pre><code>script.pl --is_header\n</code></pre>\n\n<p>And</p>\n\n<pre><code>script.pl --nois_header\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 46303931, "answer_count": 2, "score": 0, "last_activity_date": 1507289553, "creation_date": 1505831065, "last_edit_date": 1507289553, "question_id": 46303004, "link": "https://stackoverflow.com/questions/46303004/how-do-options-behave-in-perls-getoptlong", "title": "How do options behave in Perl&#39;s Getopt::Long?", "body": "<p>I have following piece of code that I am trying to understand:</p>\n\n<pre><code>use Getopt::Long;\n\nmy $isheader ;\n\nif( !GetOptions(\n\n    \"is-header!\"               =&gt; \\$isheader,\n\n  ) ) { exit 1; }\n\nprint \"isheader is = $isheader\\n\" ;\n</code></pre>\n\n<p>When I run the code as:</p>\n\n<pre><code>script.pl  --is-header\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>isheader is = 1\n</code></pre>\n\n<p>I have put a \"!\" at the end of option name is-header to negate so shouldn't output be:</p>\n\n<pre><code>isheader is = 0 \n</code></pre>\n\n<p>Secondly, if I run the script as:</p>\n\n<pre><code>script.pl --is \n</code></pre>\n\n<p>It is still able to print</p>\n\n<pre><code>isheader is = 1\n</code></pre>\n\n<p>So I guess Perl expands partial names of the options?</p>\n\n<p>Thirdly, I run </p>\n\n<pre><code>script.pl --is-header --is-head \n</code></pre>\n\n<p>Why does it not fail with ambiguous option error? It prints </p>\n\n<pre><code>isheader is = 1\n</code></pre>\n\n<p>Also if I replace  is-header! with is-header+  in the above code it still prints </p>\n\n<pre><code>isheader is = 1\n</code></pre>\n\n<p>while I guess it should print  isheader is = 2 , why so ?</p>\n\n<p>I read <code>https://perldoc.perl.org/Getopt/Long.html</code> and was experimenting with that to understand it, but seems like I am messing up.</p>\n"}, {"tags": ["perl", "hadoop", "hive"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1505829217, "post_id": 46302183, "comment_id": 79567071, "body": "We don&#39;t have enough information. All that tells us is that your <code>fetch</code> is returning an <code>Thrift::TException</code> object. Given the module description suggests it&#39;s &quot;alpha&quot; quality, then I&#39;m not sure we can do much to help."}, {"owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1505829401, "post_id": 46302183, "comment_id": 79567209, "body": "@Sobrique this is stderr Thrift::TException=HASH(0x1911438)\t(in cleanup) Thrift::TException=HASH(0x2869a78) at (eval 144) line 31, &lt;DATA&gt; line 1."}, {"owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1505829480, "post_id": 46302183, "comment_id": 79567272, "body": "@Sobrique 31st line $client-&gt;connect or die &quot;Could not connect&quot;; in my code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505844381, "post_id": 46302183, "comment_id": 79576044, "body": "Please <i>always</i> add <code>use strict</code> and <code>use warnings &#39;all&#39;</code> to the top of every Perl program you write, especially before you ask for help to fix it. I see that you have chosen to comment out <code>use warnings &#39;all&#39;</code>, so presumably you have had warnings that you didn&#39;t like and chose to disable them instead of fixing the problem. That is a lazy and unprofessional approach, and you really should do better before you ask the world what is wrong with what you have written."}, {"owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505900311, "post_id": 46302183, "comment_id": 79598041, "body": "@Borodin I missed copying that actually, usually my Perl binaries path are from different path usually"}, {"owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "edited": false, "score": 0, "creation_date": 1505901038, "post_id": 46302183, "comment_id": 79598546, "body": "@Tagar can you send me the working code here"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1505830665, "creation_date": 1505830665, "answer_id": 46302874, "question_id": 46302183, "link": "https://stackoverflow.com/questions/46302183/thrifttexception-hash0x25d18e0-error/46302874#46302874", "title": "Thrift::TException=HASH(0x25d18e0) error", "body": "<p>OK, so the problem here is - you're doing something that's failing.\nThe module you import - <a href=\"http://search.cpan.org/~sscaffidi/Thrift-API-HiveClient-0.003/lib/Thrift/API/HiveClient.pm\" rel=\"nofollow noreferrer\"><code>Thrift::API::Hiveclient</code></a> warns:</p>\n\n<blockquote>\n  <p>THIS CODE IS ALPHA-QUALITY, EXPERIMENTAL, AND LIKELY FLAMMABLE</p>\n</blockquote>\n\n<p>Having said that - what is happening here, is for some the action is failing, and it's <code>die</code>ing with an error object.</p>\n\n<p>That error object has status code and message with it. (I don't think this is idomatic perl though, it's more like Java :)). </p>\n\n<p>So in the <code>connect</code> there's an error, that's not being handled properly so your code is dying. </p>\n\n<p>A <a href=\"http://cpansearch.perl.org/src/JKING/Thrift-0.9.3/lib/Thrift.pm\" rel=\"nofollow noreferrer\"><code>Thrift::TException</code></a> is a fairly simple sort of object:</p>\n\n<pre><code>package Thrift::TException;\n\nsub new {\n    my $classname = shift;\n    my $self = {message =&gt; shift, code =&gt; shift || 0};\n\n    return bless($self,$classname);\n}\n1;\n</code></pre>\n\n<p>Literally just a message and a code.</p>\n\n<p>To get at that message, you'll need to dereference your object, and that's what doesn't seem to be happening. </p>\n\n<p>My best guess is the <code>_open</code> method in <a href=\"http://cpansearch.perl.org/src/JKING/Thrift-0.9.3/lib/Thrift/Socket.pm\" rel=\"nofollow noreferrer\"><code>Thrift::Socket</code></a> is returning an error, and the HiveClient isn't actually trapping/handling it. </p>\n\n<p>It <em>should</em> be doing an <code>eval</code> and trapping the error, and then unpacking the TException. </p>\n\n<p>Somewhere here:</p>\n\n<pre><code>sub connect {\n  my ($self) = @_;\n  $self-&gt;_transport-&gt;open;\n}\n</code></pre>\n\n<p>Maybe. I'm not 100% sure, because <code>Moo</code> might do something cute with <code>die</code>, but I can't find or see where that is. </p>\n\n<p>So short answer - you're probably failing to connect, to be sure you'd need to grab that error message - to do that you'll need to hack the <code>Hiveclient</code> to eval the operation. This is what you signed up for by using a module that's \"Alpha quality\".  </p>\n"}], "owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 46302874, "answer_count": 1, "score": -1, "last_activity_date": 1505830665, "creation_date": 1505828797, "question_id": 46302183, "link": "https://stackoverflow.com/questions/46302183/thrifttexception-hash0x25d18e0-error", "title": "Thrift::TException=HASH(0x25d18e0) error", "body": "<p>I am trying to connect to Hive via Perl module Thrift::API::HiveClient and below is the code to connect to Hadoop hive and retrieve the data</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse DBI;\nuse DBI::DBD;\nuse Data::Dumper;\nuse List::MoreUtils qw(uniq);\nuse DateTime;\n#use warnings 'all';\nuse POSIX qw(strftime);\nuse LWP::Simple;\nuse Thrift;\nuse Thrift::API::HiveClient;\nuse Data::Dumper;\n\nmy $latest_return;\n\n# Database connection\nmy $client = Thrift::API::HiveClient-&gt;new(\n     host    =&gt; 'localhost',\n    port    =&gt; '10000',\n);\n$client-&gt;connect or die \"Could not connect\";\n\nmy $rh = $client-&gt;execute('select * from devtest.users');\nmy $return = [];\nwhile ($latest_return = $client-&gt;fetch($rh)) { # will die with an error if it fails\n    print $latest_return;\n}\n</code></pre>\n\n<p>When I execute the above script it throws below message</p>\n\n<p>Thrift::TException=HASH(0x25d18e0) </p>\n\n<p>I also tried Dumper to print the result nothing got printed.</p>\n\n<p>any help is much appreciated.</p>\n"}, {"tags": ["perl", "blessed", "matrix-synapse"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1505832183, "creation_date": 1505832183, "answer_id": 46303399, "question_id": 46302151, "link": "https://stackoverflow.com/questions/46302151/perl-issue-with-blessed-object/46303399#46303399", "title": "Perl: Issue with blessed object", "body": "<p>I'd guess that this is a quoting error. If you look at <a href=\"http://cpansearch.perl.org/src/PEVANS/Net-Async-Matrix-0.18/lib/Net/Async/Matrix/Room.pm\" rel=\"nofollow noreferrer\"><code>Net::Async::Matrix::Room</code></a>:</p>\n\n<pre><code>sub send_message\n{\n   my $self = shift;\n   my %args = ( @_ == 1 ) ? ( type =&gt; \"m.text\", body =&gt; shift ) : @_;\n\n   my $type = $args{msgtype} = delete $args{type} or\n      croak \"Require a 'type' field\";\n\n   $MSG_REQUIRED_FIELDS{$type} or\n      croak \"Unrecognised message type '$type'\";\n\n   foreach (@{ $MSG_REQUIRED_FIELDS{$type} } ) {\n      $args{$_} or croak \"'$type' messages require a '$_' field\";\n   }\n\n   if( defined( my $txn_id = $args{txn_id} ) ) {\n      $self-&gt;_do_PUT_json( \"/send/m.room.message/$txn_id\", \\%args )\n         -&gt;then_done()\n   }\n   else {\n      $self-&gt;_do_POST_json( \"/send/m.room.message\", \\%args )\n         -&gt;then_done()\n   }\n}\n</code></pre>\n\n<p>The <code>type</code> you sent is handled by this sub, and then the actual message gets handed off to <code>_do_POST_json</code> in <a href=\"http://cpansearch.perl.org/src/PEVANS/Net-Async-Matrix-0.18/lib/Net/Async/Matrix.pm\" rel=\"nofollow noreferrer\"><code>Net::Async::Matrix</code></a>.</p>\n\n<p>But you've sent a string containing a <code>:</code>. </p>\n\n<p>So I think what's happening is it's encoding like this:</p>\n\n<pre><code>use JSON;\nuse Data::Dumper;\n\nmy $json = encode_json ( {body =&gt; \"m1ndgames: said test\"});\nprint Dumper  $json;\n</code></pre>\n\n<p>But the response that's coming back, at line 292 which is:</p>\n\n<pre><code>if( length $content and $content ne q(\"\") ) {\n         eval {\n            $content = decode_json( $content );\n            1;\n         } or\n            return Future-&gt;fail( \"Unable to parse JSON response $content\" );\n         return Future-&gt;done( $content, $response );\n      }\n</code></pre>\n\n<p>So I <em>think</em> is what is happening is the remote server is sending you a broken error code, and the module isn't handling it properly - it's expecting <code>JSON</code> but it isn't actually getting it. </p>\n\n<p>My best guess would be - try dropping the <code>:</code> out of your message, because I would guess there's some bad quoting happening. But without seeing the code on the server side, I can't quite tell. </p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 6145532, "user_type": "registered", "profile_image": "https://graph.facebook.com/518518511668646/picture?type=large", "display_name": "m1ndgames", "link": "https://stackoverflow.com/users/6145532/m1ndgames"}, "edited": false, "score": 0, "creation_date": 1505895096, "post_id": 46306978, "comment_id": 79594610, "body": "Thanks! This was the cause!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1505846515, "last_edit_date": 1505846515, "creation_date": 1505843852, "answer_id": 46306978, "question_id": 46302151, "link": "https://stackoverflow.com/questions/46302151/perl-issue-with-blessed-object/46306978#46306978", "title": "Perl: Issue with blessed object", "body": "<p><code>parse_formatted_message</code> returns a String::Tagged object. This class overloads concatenation so that <code>\"$sendername said: $msg\"</code> also returns a String::Tagged object. This object is passed to <code>sendmsg</code> which tries to serialize it into JSON, but it refuses to serialize objects.</p>\n\n<p>Fix: Replace </p>\n\n<pre><code>my $msg = parse_formatted_message( $content );\n</code></pre>\n\n<p>with </p>\n\n<pre><code>my $msg = parse_formatted_message( $content )-&gt;str;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6145532, "user_type": "registered", "profile_image": "https://graph.facebook.com/518518511668646/picture?type=large", "display_name": "m1ndgames", "link": "https://stackoverflow.com/users/6145532/m1ndgames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 46306978, "answer_count": 2, "score": 1, "last_activity_date": 1505846515, "creation_date": 1505828706, "last_edit_date": 1505832404, "question_id": 46302151, "link": "https://stackoverflow.com/questions/46302151/perl-issue-with-blessed-object", "title": "Perl: Issue with blessed object", "body": "<p>I am creating a bot that connects to a <a href=\"https://matrix.org/\" rel=\"nofollow noreferrer\">Matrix</a> server. For that I use <a href=\"http://p3rl.org/Net::Async::Matrix\" rel=\"nofollow noreferrer\">Net::Async::Matrix</a>.</p>\n\n<p>The code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Net::Async::Matrix;\nuse Net::Async::Matrix::Utils qw ( parse_formatted_message );\nuse IO::Async::Loop;\nuse Data::Dumper;\n\n\nmy $loop = IO::Async::Loop-&gt;new;\n\nmy $matrix = Net::Async::Matrix-&gt;new(\nserver =&gt; 'matrix.server.net',\n    on_error =&gt; sub {\n            my ( undef, $message ) = @_;\n            warn \"error: $message\\n\";\n    },\n);\n$loop-&gt;add( $matrix );\n\n$matrix-&gt;login(\n    user_id  =&gt; '@bot:matrix.server.net',\n    password =&gt; 'password',\n)-&gt;get;\n\nmy $room = $matrix-&gt;join_room( '#Lobby:matrix.server.net' )-&gt;get;\n\n$room-&gt;configure(\n    on_message =&gt; sub {\n            my ( undef, $member, $content, $event ) = @_;\n            my $msg = parse_formatted_message( $content );\n            my $sendername = $member-&gt;displayname;\nprint Dumper $sendername;\n            &amp;sendmsg(\"$sendername said: $msg\");\n    },\n);\n\nmy $stream = $matrix-&gt;start;\n\nsub sendmsg {\n        my $input = shift;\n        if ($input) {\n                $room-&gt;send_message(\n                        type =&gt; \"m.text\",\n                        body =&gt; $input,\n                 ),\n        }\n}\n\n$loop-&gt;run;\n</code></pre>\n\n<p>Basically, I want the bot to echo what was said.</p>\n\n<p>I get following output:</p>\n\n<blockquote>\n  <p>$VAR1 = 'm1ndgames'; Longpoll failed - encountered object 'm1ndgames\n  said: test',  but neither allow_blessed, convert_blessed nor\n  allow_tags settings are enabled (or TO_JSON/FREEZE method missing) at \n  /usr/local/share/perl/5.24.1/Net/Async/Matrix.pm line 292.</p>\n</blockquote>\n\n<p>and I don't understand it. When I enter a string like <code>test</code> into the body, it gets sent to the room.</p>\n"}, {"tags": ["regex", "string", "perl"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 1, "creation_date": 1505823115, "post_id": 46300003, "comment_id": 79562413, "body": "Thanks Its working. Can you elaborate a little on uses of \\b."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 0, "creation_date": 1505823283, "post_id": 46300003, "comment_id": 79562558, "body": "@JayeshRanjanMajhi: A word boundary <code>\\b</code> is a zero-length assertion that match a boundary between a word character and a non-word character. See: <a href=\"http://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow noreferrer\">regular-expressions.info/wordboundaries.html</a>"}, {"owner": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 0, "creation_date": 1505823552, "post_id": 46300003, "comment_id": 79562760, "body": "one doubt : how can I mimic this thing  if($test2  =~ /^jayesh/) when using variable"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 0, "creation_date": 1505823709, "post_id": 46300003, "comment_id": 79562899, "body": "@JayeshRanjanMajhi: Sorry, I don&#39;t get you. What do you mean by <code>mimic this thing</code>?"}, {"owner": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 0, "creation_date": 1505824122, "post_id": 46300003, "comment_id": 79563180, "body": "I want to know how can I modify the regular expression to get output as yes2 only   my $test1 = &quot;cat&quot;; my $test2 = &quot;My name is cat&quot;; my $test3 = &quot;My name is cat.ball&quot;;  if($test2  =~ /$test1/){     print &quot;yes2\\n&quot;; }  if($test3 =~ /$test1/){    print &quot;yes3\\n&quot;; }"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "edited": false, "score": 0, "creation_date": 1505824767, "post_id": 46300003, "comment_id": 79563629, "body": "@JayeshRanjanMajhi: Change <code>&#47;\\b$test1\\b&#47;</code> into <code>&#47;(?:^|\\s)$test1(?:\\s|$)&#47;</code> this will match <code>cat</code> only if it is surrounded by spaces or at the begining or at the end of the string."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1505822677, "creation_date": 1505822677, "answer_id": 46300003, "question_id": 46299964, "link": "https://stackoverflow.com/questions/46299964/how-to-compare-two-string-stored-in-variables-in-perl/46300003#46300003", "title": "How to Compare two string stored in variables in Perl?", "body": "<p>To match a regex use <code>=~</code> operator:</p>\n\n<pre><code>if($test2  =~ /$test1/){\n    print \"yes2\\n\";\n}\n\nif($test3 =~ /$test1/){\n   print \"yes3\\n\";\n}\n</code></pre>\n\n<p>You could use word boundaries to match exactly, to avoid matching <code>caterpillar</code>:</p>\n\n<pre><code>if($test2  =~ /\\b$test1\\b/){\n    print \"yes2\\n\";\n}\n\nif($test3 =~ /\\b$test1\\b/){\n   print \"yes3\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1548482764, "last_edit_date": 1548482764, "creation_date": 1505830453, "answer_id": 46302789, "question_id": 46299964, "link": "https://stackoverflow.com/questions/46299964/how-to-compare-two-string-stored-in-variables-in-perl/46302789#46302789", "title": "How to Compare two string stored in variables in Perl?", "body": "<p>Here is another method, not using <code>if</code> directly.</p>\n\n<pre><code>$result = ($test2  =~ /\\b$test1\\b/) ? \"Matched\" : \"No Match\";\nprint \"$result\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 8639606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-neutQ_UmytM/AAAAAAAAAAI/AAAAAAAACvA/jjP1-WuOpTU/photo.jpg?sz=128", "display_name": "Ga&#233;tan RYCKEBOER", "link": "https://stackoverflow.com/users/8639606/ga%c3%a9tan-ryckeboer"}, "is_accepted": false, "score": 0, "last_activity_date": 1505896168, "creation_date": 1505896168, "answer_id": 46317039, "question_id": 46299964, "link": "https://stackoverflow.com/questions/46299964/how-to-compare-two-string-stored-in-variables-in-perl/46317039#46317039", "title": "How to Compare two string stored in variables in Perl?", "body": "<p>The simplest way to check a string contained in another one is via a regular expression :</p>\n\n<pre><code>print \"Found.\" if ( $test2 ~= /$test1/);\n</code></pre>\n\n<p>in your case, you would even be more concise :</p>\n\n<pre><code>foreach $str in ( $test1, $test2 ) {\n   print \"Found $test1 in $str.\" if ( $str ~= /$test1/);\n}\n</code></pre>\n\n<p>or even, using default assignemnt\u00a0:</p>\n\n<pre><code>foreach ( $test1, $test2 ) {\n   print \"Found $test1 in $str.\" if ( /$test1/ );\n}\n</code></pre>\n\n<p>The test is checking against <code>$_</code>, which is automatically assigned by the foreach clause.</p>\n"}], "owner": {"reputation": 39, "user_id": 8230074, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tgyFAB3uHag/AAAAAAAAAAI/AAAAAAAAHPY/_qq1Jr0Ib_8/photo.jpg?sz=128", "display_name": "Jayesh Ranjan Majhi", "link": "https://stackoverflow.com/users/8230074/jayesh-ranjan-majhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1526, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1548482764, "creation_date": 1505822563, "last_edit_date": 1505822585, "question_id": 46299964, "link": "https://stackoverflow.com/questions/46299964/how-to-compare-two-string-stored-in-variables-in-perl", "title": "How to Compare two string stored in variables in Perl?", "body": "<p>I want to check if $test1 is present in $test2 and $test3.</p>\n\n<p>I tried with the following code but I am not getting the correct output.</p>\n\n<pre><code>my $test1 = \"cat\";\nmy $test2 = \"My name is cat\";\nmy $test3 = \"My name is apple\";\n\nif($test2  eq /$test1/){\n    print \"yes2\\n\";\n}\n\nif($test3 eq /$test1/){\n   print \"yes3\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 7, "last_activity_date": 1505820821, "creation_date": 1505820821, "answer_id": 46299362, "question_id": 46299218, "link": "https://stackoverflow.com/questions/46299218/incrementing-values-in-a-hash-perl/46299362#46299362", "title": "Incrementing values in a hash Perl", "body": "<p>Hashes aren't ordered in Perl. If you want the values sorted, sort them:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $ref = { a =&gt; 1, b =&gt; 2, c =&gt; 3 };\n\n$_++ for values %$ref;\nsay join ' ', sort values %$ref;        # By values.\nsay join ' ', @$ref{ sort keys %$ref }; # By keys.\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 7648410, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Uak9.png?s=128&g=1", "display_name": "uprightbassfan78", "link": "https://stackoverflow.com/users/7648410/uprightbassfan78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 46299362, "answer_count": 1, "score": 3, "last_activity_date": 1505820821, "creation_date": 1505820349, "question_id": 46299218, "link": "https://stackoverflow.com/questions/46299218/incrementing-values-in-a-hash-perl", "title": "Incrementing values in a hash Perl", "body": "<p>I'm trying to increment hash values , but I'm getting confusing output. I'm passing an array of arrays, hashes and scalar values into a function.</p>\n\n<p>The code below intends to see first of all if it is a hash and if so goes through the values and increments them.</p>\n\n<pre><code>elsif (ref($_) eq \"HASH\"){\n\n        foreach $s (values %{$_}){\n            $s++;\n        }\n    }\n</code></pre>\n\n<p>I'm passing in the following hashes:</p>\n\n<pre><code> { a =&gt; 1, b =&gt; 2, c =&gt; 3  }, { d =&gt; 4, e =&gt; 5 },\n</code></pre>\n\n<p>Yet when I print or return $s I get varying output, such as:</p>\n\n<pre><code>4 2 3 5 6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>2 4 3 6 5\n</code></pre>\n\n<p>or some other random variation. What I want is, obviously, </p>\n\n<pre><code>2 3 4 5 6\n</code></pre>\n\n<p>I'm sure it's something very simple, but I'm not very experienced in Perl.</p>\n"}, {"tags": ["perl", "oop", "logging"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1505818489, "post_id": 46298535, "comment_id": 79559258, "body": "Please don&#39;t use <code>new Child</code>. You&#39;ll find <code>Child-&gt;new</code> has far fewer hard-to-debug corner cases."}, {"owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505818535, "post_id": 46298535, "comment_id": 79559293, "body": "Ok, good to know, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "edited": false, "score": 0, "creation_date": 1505821660, "post_id": 46299343, "comment_id": 79561426, "body": "This is working great. I just changed <code>&#39;&gt;&#39;</code> to <code>&#39;&gt;&gt;&#39;</code> to append new data in the log file. Thanks!"}], "tags": [], "owner": {"reputation": 319, "user_id": 8263154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a95488587a93c3c1863a022a4bd33a51?s=128&d=identicon&r=PG&f=1", "display_name": "ilux", "link": "https://stackoverflow.com/users/8263154/ilux"}, "is_accepted": true, "score": 2, "last_activity_date": 1505820763, "creation_date": 1505820763, "answer_id": 46299343, "question_id": 46298535, "link": "https://stackoverflow.com/questions/46298535/redirect-print-stream-from-other-class-method/46299343#46299343", "title": "Redirect print stream from other class method", "body": "<p>You need something like this:</p>\n\n<pre><code>sub talkToLog{\n    my $self = shift;\n\n    my $logName = 'file.log';\n    my $output = '';\n\n    open TOOUTPUT, '&gt;', \\$output or die \"Can't open TOOUTPUT: $!\";\n    select TOOUTPUT;\n\n    $self-&gt;sayHello;\n    $self-&gt;log($logName, $output);\n\n    $output = '';\n    $self-&gt;sayBye;\n    $self-&gt;log($logName, $output);\n\n    select STDOUT;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "is_accepted": false, "score": 1, "last_activity_date": 1505834971, "last_edit_date": 1505834971, "creation_date": 1505823511, "answer_id": 46300288, "question_id": 46298535, "link": "https://stackoverflow.com/questions/46298535/redirect-print-stream-from-other-class-method/46300288#46300288", "title": "Redirect print stream from other class method", "body": "<p>Just for the record, based on ilux answer, I modified Child class adding two new methods to make the code cleaner: <code>buffer_start</code> and <code>buffer_get_clean</code>.</p>\n\n<p>They are similar to PHP's <code>ob_start</code> and <code>ob_get_clean</code> methods, but you just have to add <code>buffer</code> attribute to the class (<code>$self-&gt;{buffer}</code>).</p>\n\n<pre><code>package Child;\n\nuse strict;\nuse warnings;\n\nuse parent 'Parent';\n\nsub new\n{\n    my $class = shift;\n    my $self = $class-&gt;SUPER::new();\n    $self-&gt;{buffer} = '';    # &lt;---- Note this\n    return $self;\n}\n\nsub talk{\n    my $self = shift;\n    $self-&gt;sayHello;\n    $self-&gt;sayBye;\n}\n\nsub talkToLog{\n    my $self = shift;\n\n    my $logName = 'file.log';\n\n    # Cleaner way:\n\n    $self-&gt;buffer_start;\n    $self-&gt;sayHello;\n    $self-&gt;log($logName, $self-&gt;buffer_get_clean);\n\n    $self-&gt;buffer_start;\n    $self-&gt;sayBye;\n    $self-&gt;log($logName, $self-&gt;buffer_get_clean);\n}\n\nsub buffer_start{\n    my $self = shift;\n    open my $fh, '&gt;&gt;', \\$self-&gt;{buffer};\n    select $fh;\n}\n\nsub buffer_get_clean{\n    my $self = shift;\n    select STDOUT;\n    my $buffer = $self-&gt;{buffer};\n    $self-&gt;{buffer} = '';\n    return $buffer;\n}\n\nsub log{\n    my $self = shift;\n    my $filename = shift;\n    my $string = shift;\n    open(my $fh, \"&gt;&gt;\", $filename) || die \"Couldn't open file $filename: $!\";\n    print $fh $string;\n    close $fh;\n    return;\n}\n\n1;\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 46299343, "answer_count": 2, "score": 2, "last_activity_date": 1505834971, "creation_date": 1505818251, "last_edit_date": 1505818711, "question_id": 46298535, "link": "https://stackoverflow.com/questions/46298535/redirect-print-stream-from-other-class-method", "title": "Redirect print stream from other class method", "body": "<p>Say I have a Parent and a Child classes. <strong>I can modify only Child class.</strong></p>\n\n<p>Parent class has some <code>print</code>'s in it.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Parent;\n\nuse strict;\nuse warnings;\n\nsub new\n{\n    my $class = shift;\n    my $self = {};\n    bless $self, $class;\n    return $self;\n}\n\nsub sayHello{\n    my $self = shift;\n    print \"Hello world\\n\";\n}\n\nsub sayBye{\n    my $self = shift;\n    print \"Bye world\\n\";\n}\n\n1;\n</code></pre>\n\n<p>In my Child class I have a method to print content into log files.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>package Child;\n\nuse strict;\nuse warnings;\n\nuse parent 'Parent';\n\nsub new\n{\n    my $class = shift;\n    my $self = $class-&gt;SUPER::new();\n    return $self;\n}\n\nsub talk{\n    my $self = shift;\n    $self-&gt;sayHello;\n    $self-&gt;sayBye;\n}\n\nsub talkToLog{\n    my $self = shift;\n\n    my $logName = 'file.log';\n\n    $self-&gt;log($logName, $self-&gt;sayHello); # Here's my best (not working) try\n    $self-&gt;log($logName, $self-&gt;sayBye);\n}\n\nsub log{\n    my $self = shift;\n    my $filename = shift;\n    my $string = shift;\n    open(my $fh, \"&gt;&gt;\", $filename) || die \"Couldn't open file $filename: $!\";\n    print $fh $string;\n    close $fh;\n    return;\n}\n\n1;\n</code></pre>\n\n<p><strong>Question:</strong> Is there some way to \"catch\" the stream of those prints from Child class and log that content using the <code>log</code> method?</p>\n\n<hr>\n\n<p>Here is the pl file I'm using to try.</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Child;\nmy $child = Child-&gt;new;\n\n$child-&gt;talk;\n$child-&gt;talkToLog;\n</code></pre>\n\n<p>It prints this in console:</p>\n\n<pre>\nHello world\nBye world\nHello world\nBye world\n</pre>\n"}, {"tags": ["perl", "unix", "command-line"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1505816312, "post_id": 46297734, "comment_id": 79557794, "body": "What have you tried? What problems are you having? Show us your code. If you don&#39;t have any code, then Stack Overflow is probably not the right place for your question."}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505816529, "post_id": 46297734, "comment_id": 79557950, "body": "yes i tried it.Please find the code below, system(&quot;location=&#39;/home/shon&#39;; if [[ -f $location/sample.txt ]] then echo &#39;file found....&#39;; else echo &#39;Error in getting file&#39;; exit 255 fi&quot;); OP:syntax error near unexpected token `then&#39;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505816802, "post_id": 46297734, "comment_id": 79558129, "body": "Please <a href=\"https://stackoverflow.com/review/suggested-edits/17377553\">edit your queestion</a> to format the code as code so it&#39;s easy to read. If you want a large group of strangers to read and understand your code, then it&#39;s only polite to make it as easy as possible for them."}, {"owner": {"reputation": 511, "user_id": 2982989, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6055c5901906a657154fbe834b8998c6?s=128&d=identicon&r=PG", "display_name": "rolz", "link": "https://stackoverflow.com/users/2982989/rolz"}, "edited": false, "score": 0, "creation_date": 1505816835, "post_id": 46297734, "comment_id": 79558149, "body": "#! /usr/bin/perl     my $location =&quot;/home/shon/sample.txt&quot;;     if (-f $location)     {       print &quot;file found....&quot;;     }     else     {      print &quot;Error in getting file&quot;;     }"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 511, "user_id": 2982989, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6055c5901906a657154fbe834b8998c6?s=128&d=identicon&r=PG", "display_name": "rolz", "link": "https://stackoverflow.com/users/2982989/rolz"}, "edited": false, "score": 0, "creation_date": 1505816881, "post_id": 46297734, "comment_id": 79558172, "body": "@rolindroy: That looks like an answer to the question. Why not post it as an answer, rather than a comment?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1505817285, "post_id": 46297734, "comment_id": 79558437, "body": "If you want to use <code>if</code> and <code>then</code> on the same line in shell then you need to separate them by a <code>;</code> as in <code>if [[ -f ... ]]; then ...</code>. Is that your problem?"}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505820661, "post_id": 46297734, "comment_id": 79560760, "body": "@Dave I gave it as a readble code. but when posting, it comes in the single line... Please help me in it.."}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1505820988, "post_id": 46297734, "comment_id": 79560969, "body": "@PerlDuck :That holds good. it worked. But I was thinking if we can run a part of unix script as it is, in a .ksh file from perl.."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1505821204, "post_id": 46297734, "comment_id": 79561118, "body": "<i>Re: I gave it as a readble code. but when posting, it comes in the single line</i> Posts in comments cannot contain newline characters. They are always single-line and thus unreadable for non-trivial code. Furthermore, some languages (shell, python) <i>require</i> newlines at certain places (or <code>;</code> instead). Posts in a question can be formatted just as in an editor (newlines, indentation, etc.), there&#39;s even a little toolbar for formatting. See <a href=\"https://stackoverflow.com/editing-help\">editing-help</a>. Inserting newlines is as simple as hitting the ENTER key."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1505820461, "post_id": 46298122, "comment_id": 79560637, "body": "My requirement is what ever the unix command passed to a wrapper_script.pl should execute the same. the provided answer is the perl script equivalent to the unix script given in the questions. I need to run the unix script as the sample given above from perl."}], "tags": [], "owner": {"reputation": 511, "user_id": 2982989, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6055c5901906a657154fbe834b8998c6?s=128&d=identicon&r=PG", "display_name": "rolz", "link": "https://stackoverflow.com/users/2982989/rolz"}, "is_accepted": false, "score": 2, "last_activity_date": 1505816919, "creation_date": 1505816919, "answer_id": 46298122, "question_id": 46297734, "link": "https://stackoverflow.com/questions/46297734/how-to-run-unix-block-command-egif-from-perl/46298122#46298122", "title": "How to run unix block command eg:if from perl", "body": "<p>Try this </p>\n\n<pre><code>#! /usr/bin/perl\nmy $location =\"/home/shon/sample.txt\";\nif (-f $location)\n{\n  print \"file found....\";\n}\nelse\n{\n print \"Error in getting file\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1505821231, "post_id": 46298227, "comment_id": 79561143, "body": "Thanks @glenn_jackman : that is exactly what i looked for... Thanks for the response and if possible, could you Please breif the concept of spawnning a shell.."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "edited": false, "score": 0, "creation_date": 1505833484, "post_id": 46298227, "comment_id": 79570048, "body": "&quot;spawn&quot; just means to start a new process. Here, we&#39;re using perl&#39;s <code>system</code>  function to launch &quot;bash&quot; with some arguments."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505849330, "post_id": 46298227, "comment_id": 79578689, "body": "Re &quot;<i>put the shell code in a quoted heredoc so that perl does not substitute the shell variables.</i>&quot;, Could have used a single-quoted literal for that. What <code>&lt;&lt;&#39;END_SHELL_CODE&#39;</code> actually does is save you from having to escape <code>\\ </code>."}, {"owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505888987, "post_id": 46298227, "comment_id": 79590991, "body": "@ikegami how to substitute a perl variable in the unix script as per your suggestion. EG: <code>#! &#47;usr&#47;bin&#47;perl   @cmds = @ARGV;   chomp($schedule_id);   system &#39;bash&#39;, &#39;-c&#39;, &lt;&lt;&#39;END_SHELL_CODE&#39;;   @cmds   END_SHELL_CODE   print &quot;shell executed:@cmds\\n&quot;; </code>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 2, "last_activity_date": 1505817811, "last_edit_date": 1505817811, "creation_date": 1505817290, "answer_id": 46298227, "question_id": 46297734, "link": "https://stackoverflow.com/questions/46297734/how-to-run-unix-block-command-egif-from-perl/46298227#46298227", "title": "How to run unix block command eg:if from perl", "body": "<p>As suggested, this code is simple to translate into perl. Assuming you have something more complex, you can spawn a shell to run it: put the shell code in a <strong>quoted</strong> heredoc so that perl does not substitute the shell variables.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>system 'bash', '-c', &lt;&lt;'END_SHELL_CODE';\n    location=\"/home/shon\"\n    if [[ -f $location/sample.txt ]]; then \n        echo \"file found....\" \n    else \n        echo \"Error in getting file\" \n        exit 255 \n    fi\nEND_SHELL_CODE\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5113879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1ddd948721a67e77f83d4f16494edc?s=128&d=identicon&r=PG", "display_name": "Shon Cleneeto", "link": "https://stackoverflow.com/users/5113879/shon-cleneeto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 46298227, "answer_count": 2, "score": -1, "last_activity_date": 1505817811, "creation_date": 1505815841, "last_edit_date": 1505817070, "question_id": 46297734, "link": "https://stackoverflow.com/questions/46297734/how-to-run-unix-block-command-egif-from-perl", "title": "How to run unix block command eg:if from perl", "body": "<p>How to run a if block in unix from perl.\nEg:</p>\n\n<pre><code>location=\"/home/shon\";\n    if [[ -f $location/sample.txt ]]\n    then\n        echo \"file found....\"\n    else\n       echo \"Error in getting file\"\n       exit 255\n   fi\n</code></pre>\n\n<p>from perl.</p>\n"}, {"tags": ["php", "apache", "perl"], "comments": [{"owner": {"reputation": 1469, "user_id": 5782416, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/WnU2f.jpg?s=128&g=1", "display_name": "Jack Hales", "link": "https://stackoverflow.com/users/5782416/jack-hales"}, "edited": false, "score": 1, "creation_date": 1505810920, "post_id": 46295853, "comment_id": 79554150, "body": "Doesn&#39;t apache deal with <code>.pl</code> as knowing to parse in PeRL and <code>.php</code> knows to parse in PHP?"}, {"owner": {"reputation": 2668, "user_id": 1703471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wXH6q.jpg?s=128&g=1", "display_name": "sissy", "link": "https://stackoverflow.com/users/1703471/sissy"}, "edited": false, "score": 0, "creation_date": 1505811933, "post_id": 46295853, "comment_id": 79554818, "body": "take a look to apache virtual hosts. It is not a problem of running different programming languages applications. Have a look at this <a href=\"https://httpd.apache.org/docs/current/vhosts/examples.html\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/current/vhosts/examples.html</a>"}, {"owner": {"reputation": 1, "user_id": 7207905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eab725150664c0c639aef7c459f268?s=128&d=identicon&r=PG&f=1", "display_name": "jessy wan", "link": "https://stackoverflow.com/users/7207905/jessy-wan"}, "edited": false, "score": 0, "creation_date": 1505823331, "post_id": 46295853, "comment_id": 79562590, "body": "sissy, Thank you so much I will read the link!"}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 6255113, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-P72Ln8KN0J0/AAAAAAAAAAI/AAAAAAAABcg/E9tqGK7IVlg/photo.jpg?sz=128", "display_name": "CJG", "link": "https://stackoverflow.com/users/6255113/cjg"}, "is_accepted": false, "score": 1, "last_activity_date": 1505811115, "creation_date": 1505811115, "answer_id": 46295968, "question_id": 46295853, "link": "https://stackoverflow.com/questions/46295853/how-to-run-php-and-perl-program-in-one-serverapache/46295968#46295968", "title": "How to run PHP and Perl program in one server(Apache)", "body": "<p>You could use mod_rewrite calls in your httpd.conf file to intercept specific URLs and make sure they're routed and handled accordingly.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/286004/hidden-features-of-mod-rewrite\">Hidden features of mod_rewrite</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7207905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1eab725150664c0c639aef7c459f268?s=128&d=identicon&r=PG&f=1", "display_name": "jessy wan", "link": "https://stackoverflow.com/users/7207905/jessy-wan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505811115, "creation_date": 1505810760, "question_id": 46295853, "link": "https://stackoverflow.com/questions/46295853/how-to-run-php-and-perl-program-in-one-serverapache", "title": "How to run PHP and Perl program in one server(Apache)", "body": "<p>I want to put my PHP program on Apache server(there are existing Perl program running there).\nAnd I want to invoke those programs independently.</p>\n\n<p>For example)</p>\n\n<p>\"<a href=\"http://my-address/existing-program\" rel=\"nofollow noreferrer\">http://my-address/existing-program</a>\" goes to Perl program,</p>\n\n<p>on the other hand, \"<a href=\"http://my-address/new-program\" rel=\"nofollow noreferrer\">http://my-address/new-program</a>\" goes to PHP program.</p>\n\n<p>I might need to modify \"httpd.conf\" but I am not sure how.\nAny advise would be helpful.</p>\n\n<p>Kind regards.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1505808399, "post_id": 46294993, "comment_id": 79552705, "body": "Your example is no Perl code."}, {"owner": {"reputation": 55, "user_id": 4814930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-tQyJN_kU6JA/AAAAAAAAAAI/AAAAAAAAASQ/fBYRy2qtmzI/photo.jpg?sz=128", "display_name": "Prem Rexx", "link": "https://stackoverflow.com/users/4814930/prem-rexx"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1505810162, "post_id": 46294993, "comment_id": 79553693, "body": "Can you please check now?"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1505810508, "post_id": 46294993, "comment_id": 79553898, "body": "You know, that it is a silly idea to order object members? They are defined as an &quot;unordered set of name/value pairs&quot;. <a href=\"http://www.json.org/index.html\" rel=\"nofollow noreferrer\">json.org/index.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1505811350, "last_edit_date": 1505811350, "creation_date": 1505810750, "answer_id": 46295850, "question_id": 46294993, "link": "https://stackoverflow.com/questions/46294993/json-sort-in-perl/46295850#46295850", "title": "Json Sort in Perl", "body": "<p>I agree with the comments about sorting json, but for the sake of a perl teaser. </p>\n\n<p>There is probably a more elegant way of doing it but this will work</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nundef $/;\n\nmy @array_of_json=('{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }','{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }','{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }','{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }');\n\nfor (sort mySort @array_of_json) {\n    print \"$_\\n\";\n}\n\nsub mySort {\n        $a=~/\"id\":\"(\\d+)\"/;\n        my $ida=$1;\n        $b=~/\"id\":\"(\\d+)\"/;\n        my $idb=$1;\n        return $ida &lt;=&gt; $idb;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": false, "score": 0, "last_activity_date": 1505811724, "last_edit_date": 1505811724, "creation_date": 1505810912, "answer_id": 46295903, "question_id": 46294993, "link": "https://stackoverflow.com/questions/46294993/json-sort-in-perl/46295903#46295903", "title": "Json Sort in Perl", "body": "<p>Having said, that it is a silly idea to sort JSON object members, this will do what you want:</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\nuse JSON::XS;\n\nmy @array_of_json=('{\"id\":\"3\", \"name\":\"John\", \"age\":31, \"city\":\"New York\"}',\n                   '{\"id\":\"2\", \"name\":\"Prem\", \"age\":26, \"city\":\"India\"}',\n                   '{\"id\":\"4\", \"name\":\"Mark\", \"age\":27, \"city\":\"USA\"}',\n                   '{\"id\":\"1\", \"name\":\"Anto\", \"age\":28, \"city\":\"UK\"}');\n\n\nmy $j = JSON::XS-&gt;new-&gt;utf8-&gt;allow_nonref;\n\nfor my $h (sort { $a-&gt;{id} &lt;=&gt; $b-&gt;{id} } map { $j-&gt;decode($_) } @array_of_json)\n{\n  print\n      '{',\n      join (',',\n            map { $j-&gt;encode ($_) . ':' . $j-&gt;encode ($h-&gt;{$_}) }\n            ('id', 'name', 'age', 'city')),\n      \"}\\n\";\n}\n</code></pre>\n\n<p>You need the Perl module <a href=\"http://search.cpan.org/~mlehmann/JSON-XS/XS.pm\" rel=\"nofollow noreferrer\">JSON::XS</a> to parse and encode JSON data. Install it with something like <code>apt-get install libjson-xs-perl</code>.</p>\n\n<p>The above could be found already on SO:</p>\n\n<ul>\n<li>Parse JSON: <a href=\"https://stackoverflow.com/q/15756746/402322\">How to parse JSON like variable in Perl?</a></li>\n<li>Format JSON: <a href=\"https://stackoverflow.com/q/31170479/402322\">Perl&#39;s JSON::XS not encoding UTF8 correctly?</a></li>\n<li>Sort hash: <a href=\"https://stackoverflow.com/q/383528/402322\">How can I sort a hash&#39;s keys naturally?</a></li>\n<li>Perl's map: <a href=\"https://stackoverflow.com/q/136204/402322\">What&#39;s the point of Perl&#39;s map?</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 1, "creation_date": 1505811515, "post_id": 46296037, "comment_id": 79554543, "body": "This is better than my answer, interesting problem :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505824356, "post_id": 46296037, "comment_id": 79563346, "body": "Any reason why you&#39;ve declared <code>$m</code> and <code>$n</code> outside of the sort subroutine?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1505824834, "post_id": 46296037, "comment_id": 79563687, "body": "@DaveCross There is no reason,  corrected, Now I declare the variable inside the scope. Because we don&#39;t want to use the variable outside the scope. Is it correct?  Thanks :)"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1505824659, "last_edit_date": 1505824659, "creation_date": 1505811325, "answer_id": 46296037, "question_id": 46294993, "link": "https://stackoverflow.com/questions/46294993/json-sort-in-perl/46296037#46296037", "title": "Json Sort in Perl", "body": "<p>You can try the following,</p>\n\n<pre><code>my @sorted = sort {\n\n    my ($m)=$a=~m/\"id\":\"(\\d+)/;  \n\n    my ($n)=$b=~m/\"id\":\"(\\d+)/;  \n\n     $m&lt;=&gt;$n                  \n\n    } @array_of_json;\n\nprint join\"\\n\",@sorted , \"\\n\";\n</code></pre>\n\n<p>Store the numbers after id into <code>$m</code> and <code>$n</code> and make a sort for those variables.</p>\n\n<p>Then always put <code>use warnings</code> and <code>use strict</code> in your program, declare the variable.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1505812219, "creation_date": 1505812219, "answer_id": 46296336, "question_id": 46294993, "link": "https://stackoverflow.com/questions/46294993/json-sort-in-perl/46296336#46296336", "title": "Json Sort in Perl", "body": "<p>Your current sample data can be sorted by using the default behaviour of the <code>sort</code> function.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Data::Dumper;\n\nmy @array_of_json = (\n  '{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }',\n  '{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }',\n  '{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }',\n  '{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }',\n);\n\nmy @sorted = sort @array_of_json;\n\nsay Dumper \\@sorted;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = [\n          '{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }',\n          '{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }',\n          '{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }',\n          '{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }'\n        ];\n</code></pre>\n\n<p>But if you want anything more complex, I'd recommend decoding the JSON and sorting the data structures.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse JSON 'decode_json';\nuse Data::Dumper;\n\nmy @array_of_json = map { decode_json $_ }  (\n  '{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }',\n  '{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }',\n  '{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }',\n  '{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }',\n);\n\nmy @sorted = sort { $a-&gt;{id} &lt;=&gt; $b-&gt;{id } } @array_of_json;\n\nsay Dumper \\@sorted;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4814930, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-tQyJN_kU6JA/AAAAAAAAAAI/AAAAAAAAASQ/fBYRy2qtmzI/photo.jpg?sz=128", "display_name": "Prem Rexx", "link": "https://stackoverflow.com/users/4814930/prem-rexx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1505824659, "creation_date": 1505807884, "last_edit_date": 1505810142, "question_id": 46294993, "link": "https://stackoverflow.com/questions/46294993/json-sort-in-perl", "title": "Json Sort in Perl", "body": "<p>I need to sort json values which is in array elements. I need to sort by json field id. Is it possible to sort?</p>\n\n<p>Can please anyone help in this case?</p>\n\n<p>Kindly find below code.</p>\n\n<pre><code>$json1 = '{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }';\n$json2 = '{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }';\n$json3 = '{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }';\n$json4 = '{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }';\n@array_of_json = ($json1,$json2,$json3,$json4);\n</code></pre>\n\n<p>After sorting by id, Need Output like this,</p>\n\n<pre><code>{\"id\":\"1\",\"name\":\"Anto\", \"age\":28, \"city\":\"UK\" }\n{\"id\":\"2\",\"name\":\"Prem\", \"age\":26, \"city\":\"India\" }\n{\"id\":\"3\",\"name\":\"John\", \"age\":31, \"city\":\"New York\" }\n{\"id\":\"4\",\"name\":\"Mark\", \"age\":27, \"city\":\"USA\" }\n</code></pre>\n"}, {"tags": ["windows", "perl", "perl-module", "usleep"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1505801000, "post_id": 46292816, "comment_id": 79548158, "body": "If you are going to sleep in units of seconds, why not just use sleep (second resolution)?   You may also need to accept the param as <code>my ($self, $seconds) = @_;</code> in the first line of your xsleep subroutine."}, {"owner": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1505801452, "post_id": 46292816, "comment_id": 79548402, "body": "thanks @xxfelixxx, it was the $self issue."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1505844919, "creation_date": 1505844919, "answer_id": 46307249, "question_id": 46292816, "link": "https://stackoverflow.com/questions/46292816/perl-on-windows-stuck-on-calling-for-usleep-from-another-module/46307249#46307249", "title": "perl on windows stuck on calling for usleep from another module", "body": "<p><code>xsleep</code> is being called as a method, which means the invocant (the result of the left side of <code>-&gt;</code>) is passed as the first argument. This is currently ending up in <code>$seconds</code>. References numify to their address, so you get an extremely large numbers in <code>$seconds</code>. For example,</p>\n\n<pre><code>$ perl -e'CORE::say(0+{})'\n9304720\n</code></pre>\n\n<p>Either adjust <code>xsleep</code> so it can be called as a method,</p>\n\n<pre><code>$self-&gt;{GLOBAL_OBJ}-&gt;xsleep($delay) if $delay;\n\nsub xsleep {    \n    my $self    = shift;\n    my $seconds = shift;\n    ...\n}\n</code></pre>\n\n<p>or call <code>xsleep</code> as a sub</p>\n\n<pre><code>The::Package::xsleep($delay) if $delay;\n\nsub xsleep {    \n    my $seconds = shift;\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5609010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qrWMYNT_zCU/AAAAAAAAAAI/AAAAAAAAACE/WsQ7hOE1FpQ/photo.jpg?sz=128", "display_name": "Omer Levy", "link": "https://stackoverflow.com/users/5609010/omer-levy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505844919, "creation_date": 1505800435, "question_id": 46292816, "link": "https://stackoverflow.com/questions/46292816/perl-on-windows-stuck-on-calling-for-usleep-from-another-module", "title": "perl on windows stuck on calling for usleep from another module", "body": "<p>I'm using the following perl code on windows environment:</p>\n\n<pre><code>use Time::HiRes qw(usleep);\n\n    #(some code here)\n\n$self-&gt;{GLOBAL_OBJ}-&gt;xsleep($delay) if($delay);\n\n\nsub xsleep {    \n    my $seconds = shift;\n    #print \"will sleep:$seconds seconds\\n\";\n    $seconds = $seconds * 1000000;\n    usleep($seconds);\n    #print \"slept:$seconds micro seconds\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>When I call xsleep like that (from another module) the system is stuck and I can only stop it by ctrl+c, however when I call it from the current module it works fine.</p>\n\n<p>Can anyone tell me why this is and how can I fix it?\nThanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505792972, "post_id": 46291425, "comment_id": 79545620, "body": "Tip: Replace <code>$FindBin::Bin</code> with <code>$FindBin::RealBin</code>. The former is broken for symbolic links to your script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505794035, "post_id": 46291425, "comment_id": 79545878, "body": "Tip: You can&#39;t actually return a hash from a sub (just scalars), so you are actually returning a the keys and values of the hash and creating a new hash on the outside. One would normally return a reference to the hash instead."}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 6311455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b243ed559166d0ebfc2a8ee8d77f0d45?s=128&d=identicon&r=PG&f=1", "display_name": "0_o", "link": "https://stackoverflow.com/users/6311455/0-o"}, "edited": false, "score": 0, "creation_date": 1505793779, "post_id": 46291453, "comment_id": 79545813, "body": "you sir, are a savior. but now I get this: foo.pm did not return a true value at invoking file(nvd_extract.pl) line 12."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 397, "user_id": 6311455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b243ed559166d0ebfc2a8ee8d77f0d45?s=128&d=identicon&r=PG&f=1", "display_name": "0_o", "link": "https://stackoverflow.com/users/6311455/0-o"}, "edited": false, "score": 1, "creation_date": 1505793805, "post_id": 46291453, "comment_id": 79545817, "body": "Add <code>1;</code> to the bottom of the module. Modules must return a true value."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1505792790, "creation_date": 1505792790, "answer_id": 46291453, "question_id": 46291425, "link": "https://stackoverflow.com/questions/46291425/debugging-global-symbol-requires-explicit-package-name/46291453#46291453", "title": "Debugging Global symbol requires explicit package name", "body": "<p>You use a hash named <code>%vuln</code> you never declared.</p>\n\n<pre><code>$vuln{$cve_id} = \\%value;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>return %vuln; \n</code></pre>\n\n<p>You declared an array named <code>@vuln</code> you never use.</p>\n\n<pre><code>my @vuln;\n</code></pre>\n\n<p>Replace that declaration with</p>\n\n<pre><code>my %vuln;\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 6311455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b243ed559166d0ebfc2a8ee8d77f0d45?s=128&d=identicon&r=PG&f=1", "display_name": "0_o", "link": "https://stackoverflow.com/users/6311455/0-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 46291453, "answer_count": 1, "score": 0, "last_activity_date": 1505792933, "creation_date": 1505792559, "last_edit_date": 1592644375, "question_id": 46291425, "link": "https://stackoverflow.com/questions/46291425/debugging-global-symbol-requires-explicit-package-name", "title": "Debugging Global symbol requires explicit package name", "body": "<p>This is my first encounter with Perl. I know this question has been asked earlier and I have checked</p>\n<p><a href=\"https://stackoverflow.com/questions/3141412/global-symbol-requires-explicit-package-name\">Global symbol requires explicit package name</a></p>\n<p><a href=\"https://stackoverflow.com/questions/3592770/explanation-of-global-symbol-requires-explicit-package-name\">Explanation of &#39;global symbol requires explicit package name&#39;</a></p>\n<p><a href=\"https://stackoverflow.com/questions/4257179/why-does-perl-say-global-symbol-symbol-requires-explicit-package-name-at-progr\">Why does Perl say Global symbol &quot;SYMBOL&quot; requires explicit package name at PROGRAM.pl line X?</a></p>\n<p>But I am unable to find error in my code. I am tasked to debug this. Any help would be really appreciated.</p>\n<pre><code>package foo;\n\n\n\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\n\nsub extract {\n    my $fname = shift\n        or warn(&quot;provide the XML file to load\\n&quot;),\n           return;\n\n    my $xml = XML::LibXML-&gt;load_xml(location =&gt; $fname);\n    my ($nvd)  = $xml-&gt;nonBlankChildNodes;\n\n    my @vuln;\n    for my $entry ($nvd-&gt;nonBlankChildNodes) {\n        my %value;\n        # %value = parse_nvd_entry($entry);\n\n        for my $attr ($entry-&gt;attributes) {\n            $value{$attr-&gt;nodeName} = $attr-&gt;nodeValue;\n        }\n\n        # rename 'name' to 'cve_id'\n        my $cve_id = $value{cve_id} = delete $value{name};\n        \n        $vuln{$cve_id} = \\%value;\n    }\n\n    return  %vuln;\n}\n</code></pre>\n<p>This package is called and invoked here</p>\n<pre><code>use strict;\nuse warnings;\n\nuse FindBin;\nuse lib qq($FindBin::Bin/../lib);\n\nuse foo;\nuse Dumpvalue;\n\nif (@ARGV != 1) {\n   die &quot;Extract vulnerability records into database file\\n&quot;,\n       &quot;Usage:\\n    $0 &lt;NVD_XML_files&gt;\\n\\n&quot;;\n}\n\nmy %vuln = foo::extract(@ARGV);\n\nDumpvalue-&gt;new-&gt;dumpValue(\\%vuln);\n</code></pre>\n<p>The script produces this output:</p>\n<blockquote>\n<p>Global symbol &quot;%vuln&quot; requires explicit package name at /Users/dev/projects/software/foo/scripts/../lib/foo.pm line 35.</p>\n<p>Global symbol &quot;%vuln&quot; requires explicit package name at /Users/dev/projects/software/foo/scripts/../lib/foo.pm line 38.</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 14088, "user_id": 4642212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f858afc6f98f72ca7d617da224a28db7?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Simon", "link": "https://stackoverflow.com/users/4642212/sebastian-simon"}, "edited": false, "score": 3, "creation_date": 1505781669, "post_id": 46290061, "comment_id": 79543108, "body": "Looks like it\u2019s just replacing <code>-fp [^ ]+</code> (literal <code>-fp</code>, space, at least one non-space character) by the empty string. <code>@</code> is just the regex delimiter, I think."}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1505781791, "post_id": 46290061, "comment_id": 79543133, "body": "You can go to regex101.com and type a pattern into the bar at the top to test it out and see an explanation of each step. This regex is matching all literal characters except for the <code>[^ ]+</code>, which matches a non-space character one or more times."}, {"owner": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "edited": false, "score": 0, "creation_date": 1505782492, "post_id": 46290061, "comment_id": 79543275, "body": "Xufox is correct, CAustin is partially right"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505782557, "post_id": 46290061, "comment_id": 79543293, "body": "You can go to www.regular-expression.info to learn about regular expressions."}], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "edited": false, "score": 0, "creation_date": 1505803260, "post_id": 46290188, "comment_id": 79549478, "body": "Thanks a lot! Your answer helped me."}, {"owner": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1505844085, "post_id": 46290188, "comment_id": 79575868, "body": "@benjamin-w Thanks for the code tag trick :) I will no longer have that issue"}], "tags": [], "owner": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "is_accepted": false, "score": 5, "last_activity_date": 1505790971, "last_edit_date": 1505790971, "creation_date": 1505782589, "answer_id": 46290188, "question_id": 46290061, "link": "https://stackoverflow.com/questions/46290061/cmd-s-fp-what-does-it-mean-in-perl/46290188#46290188", "title": "$cmd =~ s@-fp [^ ]+@@; What does it mean in Perl?", "body": "<p>This removes the <code>-fp</code> optional parameter and its value from the command.</p>\n\n<hr>\n\n<p>This takes the string stored by variable <code>$cmd</code> and replaces a section matching <code>-fp [^ ]+</code> with nothing.</p>\n\n<p>This command is employing the fact that Perl subsitution (or other regex modifiers) can have any delimiter character. What is normally written as <code>s/.../.../</code> is <code>s@...@...@</code> here. That may be the source of confusion.</p>\n\n<p><code>=~</code> is a <a href=\"http://perldoc.perl.org/perlop.html#Binding-Operators\" rel=\"noreferrer\">binary binding operator</a> which takes the left argument as the string to perform the right argument argument on, in this case a substitution.</p>\n\n<p><code>-fp [^ ]+</code></p>\n\n<ol>\n<li><code>-fp </code> matches literally.</li>\n<li><code>[^ ]+</code> matches one or more characters which are not space.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1505826830, "last_edit_date": 1505826830, "creation_date": 1505808947, "answer_id": 46295311, "question_id": 46290061, "link": "https://stackoverflow.com/questions/46290061/cmd-s-fp-what-does-it-mean-in-perl/46295311#46295311", "title": "$cmd =~ s@-fp [^ ]+@@; What does it mean in Perl?", "body": "<p>Let's get the easy bit out of the way first. The <code>$cmd =~</code> simply means \"do the substitution on the variable <code>$cmd</code>\".</p>\n\n<p>Not all of this expression is a regex. It's actually the substitution operator - <code>s/REGEX/STRING/</code>. It matches the REGEX and replaces it with the STRING.</p>\n\n<p>Like many similar operators in Perl, the substitution operator allows you to choose the delimiter character that you use. In this case, the programmer has made the slightly bizarre choice to use <code>@</code>.</p>\n\n<p>So, we have this:</p>\n\n<pre><code>$cmd =~ s/-fp [^ ]+//;\n</code></pre>\n\n<p>And we now know that it means. \"Match the variable <code>$cmd</code> against the regex <code>-fp [^ ]+</code> and replace it with an empty string\". Why an empty string? Because the replacement string bit (between the second and third <code>/</code>) is an empty string.</p>\n\n<p>All we need to do now is to understand the actual regex - <code>-fp [^ ]+</code>. And it's not very complicated.</p>\n\n<ul>\n<li><code>-fp</code> - the first four characters (up to and including the space) match themselves. So this matches the literal string \"-fp \".</li>\n<li><code>[^ ]</code> - this is a \"character class\". Normally, it means \"match any of the characters inside <code>[...]</code>\". But the <code>^</code> at the start inverts that meaning to \"match any characters <strong>expect</strong> the ones between <code>[^...]</code>. So this is match anything that isn't a space.</li>\n<li><code>+</code> - this is a modifier that means \"match one or more of the previous expression\".</li>\n</ul>\n\n<p>So, put together, this is \"match the string '-fp ' followed by one or more non-space characters.</p>\n\n<p>And, adding in the rest of the expression, we get:</p>\n\n<blockquote>\n  <p>Look at the string in <code>$cmd</code>, if you find the string '-fp -' followed by one or more non-space characters, then replace the matched portion with an empty string.</p>\n</blockquote>\n"}], "owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505826830, "creation_date": 1505781391, "last_edit_date": 1505790961, "question_id": 46290061, "link": "https://stackoverflow.com/questions/46290061/cmd-s-fp-what-does-it-mean-in-perl", "title": "$cmd =~ s@-fp [^ ]+@@; What does it mean in Perl?", "body": "<pre><code>$cmd =~ s@-fp [^ ]+@@;\n</code></pre>\n\n<p>Is there anyone who let me know what this regex means in Perl?\nI couldn't find any regex like above through googling...</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505760434, "post_id": 46285645, "comment_id": 79535491, "body": "You say &quot;<i><b>file</b> named XXXXlog.num</i>&quot;  but your examples show a <i>directory</i>, <code>...&#47;syslog.1&#47;&#39;</code> (note the trailing slash) -- which is it?  And, is this <i>always</i> the last thing in the name/path?"}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505760678, "post_id": 46285645, "comment_id": 79535626, "body": "@zdim sorry for the confusion. I meant the file&#39;s name(XXXXlog.num) is alway the last thing in the whole path."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1505759587, "post_id": 46285674, "comment_id": 79535078, "body": "You could also do <code>(\\w+)log\\b</code>."}], "tags": [], "owner": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "is_accepted": false, "score": 2, "last_activity_date": 1505760778, "last_edit_date": 1505760778, "creation_date": 1505758210, "answer_id": 46285674, "question_id": 46285645, "link": "https://stackoverflow.com/questions/46285645/extract-certain-part-of-a-string-in-perl/46285674#46285674", "title": "Extract certain part of a string in Perl", "body": "<pre><code>\\w+(?=log\\b)\n</code></pre>\n\n<p>matches one or more alphanumeric characters that are followed by <code>log</code> (but not <code>logging</code> etc.)</p>\n\n<p>If the filename format is fixed, you can make the regex more reliable by using</p>\n\n<pre><code>\\w+(?=log\\.\\d+\\/$)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505774244, "post_id": 46286300, "comment_id": 79541329, "body": "Just a small question. Why we need to add parentheses to <b>my ($name)</b> rather then using   <b>my $name</b> ? @zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505774479, "post_id": 46286300, "comment_id": 79541402, "body": "@Luke  What the match operator (<code>m&#47;...&#47;</code>) returns depends on the <i>context</i>.  In scalar context, which we have in <code>if ($v =~ &#47;...&#47;)</code> or in <code>$ret = $v =~ &#47;...&#47;</code> (etc), it returns true/false; In list context, it returns the actual list of matches.  So we need to impose list context on it, which is what the parens do <code>($match) = $v =~ &#47;...&#47;</code>.   Or we can say <code>@matches = $v =~ &#47;...&#47;</code> of course."}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505775796, "post_id": 46286300, "comment_id": 79541727, "body": "so in this case it returned true/ false right? I think my $filepath is scalar context.. So in order to convert true/false on it, then we need to use parens()?  I am not quite understand. Thanks so much @zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505776058, "post_id": 46286300, "comment_id": 79541783, "body": "@Luke  This context business is about the <i>regex matching</i>.  With parenthesis it returns the actual match (not just true/false), so we get <code>sys</code> or such. (Without the parenthesis it would return 1 or empty string, for false!).  The filenames you show in the question are just a normal assignment, of a string to a variable.  No need for parenthesis there."}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505776246, "post_id": 46286300, "comment_id": 79541826, "body": "OH. GOTCHA. appreciate it."}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505802084, "post_id": 46286300, "comment_id": 79548767, "body": "What if I have strings with dash like Abigail said, how can I fixed the Regex based on your <b>.N optional</b> case. Let say <code>my $file2 = &#39;&#47;user&#47;mike&#47;desktop&#47;movie&#47;dns-sys.log&#39;;</code> How can I extract <b>dns-sys</b>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505802921, "post_id": 46286300, "comment_id": 79549303, "body": "@Luke  Updated the answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505803658, "post_id": 46286300, "comment_id": 79549720, "body": "@Luke  I&#39;ve added more, and fixed a bad typo in the optional part. (It had <code>*</code> while it should have <code>+</code> to work as described.)  Thank you for making me look again."}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505846478, "post_id": 46286300, "comment_id": 79577081, "body": "Thanks for you clear explanation all the time, which is very helpful. I learn a lot about Regex from you. @zdim"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1506055930, "last_edit_date": 1506055930, "creation_date": 1505760785, "answer_id": 46286300, "question_id": 46285645, "link": "https://stackoverflow.com/questions/46285645/extract-certain-part-of-a-string-in-perl/46286300#46286300", "title": "Extract certain part of a string in Perl", "body": "<p>The main property of shown strings is that the <code>*log*</code> phrase is <em>last</em>.</p>\n\n<p>Then anchor the pattern, so we wouldn't match a <code>log</code> somewhere in the middle</p>\n\n<pre><code>my ($name) = $string =~ /(\\w+)log\\.[0-9]+$/;\n</code></pre>\n\n<p>while if <code>.N</code> extension is optional</p>\n\n<pre><code>my ($name) = $string =~ /(\\w+)log(?:\\.[0-9]+)?$/;\n</code></pre>\n\n<hr>\n\n<p>The above uses the <code>\\w+</code> pattern to capture the text preceding <code>log</code>. But that text may also contain non-word characters (<code>-</code>, <code>.</code>, etc), in which case we would use <code>[^/]+</code> to capture everything after the last <code>/</code>, as pointed out in <a href=\"https://stackoverflow.com/a/46289256/4653379\">Abigail's answer</a>.  With <code>.N</code> optional, per question in the comments</p>\n\n<pre><code>my ($name) = $string =~ m{ ([^/]+) log (?: \\.[0-9]+ )? $}x;\n</code></pre>\n\n<p>where I added the <code>}x</code> modifier, with which spaces inside are ignored, what can aid readibility.</p>\n\n<p>I use a set of delimiters other than <code>/</code> to be able to use <code>/</code> inside without escaping it, and then the <code>m</code> is compulsory. The <code>[^...]</code> is a <em>negated character class</em>, matching any character <em>not</em> listed inside. So <code>[^/]+log</code> matches all successive characters which are not <code>/</code>, coming before <code>log</code>.</p>\n\n<p>The <em>non capturing group</em> <code>(?: ... )</code> groups patterns inside, so that <code>?</code> applies to the whole group, but doesn't needlessly capture them.</p>\n\n<p>The <code>(?:\\.[0-9]+)?</code> pattern was written specifically so to disallow things like <code>log.</code> (nothing after dot) and <code>log5</code>.  But if these are acceptable, change it to the simpler <code>\\.?[0-9]*</code></p>\n\n<p><strong>Update</strong> &nbsp; Corrected a typo in code: for optional <code>.N</code> there is <code>+</code>, not <code>*</code></p>\n"}], "owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 46286300, "answer_count": 2, "score": 0, "last_activity_date": 1506055930, "creation_date": 1505758108, "last_edit_date": 1505841240, "question_id": 46285645, "link": "https://stackoverflow.com/questions/46285645/extract-certain-part-of-a-string-in-perl", "title": "Extract certain part of a string in Perl", "body": "<p>I have the following Perl strings. The lengths and the patterns are different. The file is always named <code>*log.999</code></p>\n\n<pre><code>my $file1 = '/user/mike/desktop/sys/syslog.1';\nmy $file2 = '/user/mike/desktop/movie/dnslog.2';\nmy $file3 = '/haselog.3';\nmy $file4 = '/user/mike/desktop/movie/dns-sys.log'\n</code></pre>\n\n<p>I need to extract the words before <code>log</code>. In this case, <code>sys</code>, <code>dns</code>, <code>hase</code> and <code>dns-sys</code>. </p>\n\n<p>How can I write a regular expression to extract them? </p>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505759054, "post_id": 46285706, "comment_id": 79534785, "body": "Is <code>WWW::Curl::Multi</code> &quot;sufficiently similar&quot;? [it is provided as Debian package]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 1, "creation_date": 1505759356, "post_id": 46285706, "comment_id": 79534964, "body": "I have no experience with WWW::Curl, but it is also an interface to libcurl. Net::Curl came out of WWW::Curl, but the docs don&#39;t say why. Both have been updated since."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505842754, "post_id": 46285706, "comment_id": 79575215, "body": "huh? The second answer doesn&#39;t mention AnyEvent::Curl::Multi. And mine does (by virtue of mention you should use a module like AnyEvent::Curl::Multi). I&#39;ve edited the question to specifically mention that module. I don&#39;t know why you&#39;d want all the complexity of AnyEvent?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505843145, "post_id": 46285706, "comment_id": 79575388, "body": "I prefer to use perl modules provided as Debian packages.  You answer is better <b>but</b> the other answer first fitted environment  I use and prefer. [I have up-voted your answer]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505843185, "post_id": 46285706, "comment_id": 79575412, "body": "So you&#39;re saying you&#39;re going to use AnyEvent::HTTP? That&#39;s not what you said above. You said you were going to use AnyEvent::Curl::Multi. And you said that WWW::Curl::Multi is provided as a Debian package. So confused!"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505843700, "post_id": 46285706, "comment_id": 79575650, "body": "<b>My earlier comment clarified</b>: I have decided to accept the second answer because AnyEvent::Curl::Multi <b>IS NOT</b> provided as Debian package. WWW::Curl::Multi seems &quot;event loop like&quot;. I have chosen full event loop perl packages (AnyEvent+AnyEvent::HTTP) provided as Debian packages."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505843956, "post_id": 46285706, "comment_id": 79575794, "body": "Again, the second answer doesn&#39;t mention AnyEvent::Curl::Multi, and you&#39;ve accepted my answer of not using one request per thread."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505844283, "post_id": 46285706, "comment_id": 79575990, "body": "By the way, it makes no sense to use a &quot;full event loop&quot; to just wait for a completely different event loop. Now, if you&#39;re going to use it instead of using threads for other things, that&#39;s fine. If so, you might want to throw Coro into the mix. It&#39;s a user-land co-operative multi-tasking system*  that&#39;s compatible with AnyEvent. (* - This means it runs single-processor, and one &quot;thread&quot; can block all others for extensive periods of time.) Using Coro can also help make your code look more normal."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1505842796, "last_edit_date": 1505842796, "creation_date": 1505758322, "answer_id": 46285706, "question_id": 46285388, "link": "https://stackoverflow.com/questions/46285388/thead-safe-http-client-module/46285706#46285706", "title": "Thead safe HTTP client module", "body": "<p>Don't use multiple threads; that will just slow things down and given you headaches. Instead, use an existing engine that can perform parallel requests.</p>\n\n<p>For example,</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?Net::Curl::Multi\" rel=\"nofollow noreferrer\">Net::Curl::Multi</a> and <a href=\"http://search.cpan.org/perldoc?WWW::Curl::Multi\" rel=\"nofollow noreferrer\">WWW::Curl::Mult</a> provide access to libcurl, a proven, powerful and fast engine. (I've used the former in production.) You can still process the responses in different threads if you so desire.</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?AnyEvent::HTTP\" rel=\"nofollow noreferrer\">AnyEvent::HTTP</a> and <a href=\"http://search.cpan.org/perldoc?AnyEvent::Curl::Multi\" rel=\"nofollow noreferrer\">AnyEvent::Curl::Multi</a> are two other such engines. However, using these would add a lot of overhead (which may affect performance and robustness), and I don't know how well the various event loops deal with threaded environments.</p>\n\n<p>If any of these modules don't have a Debian package, just create one!</p>\n"}, {"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505766130, "post_id": 46287499, "comment_id": 79538320, "body": "Does <code>AnyEvent::HTTP</code> support &quot;1.&quot; without extra coding?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1505766583, "post_id": 46287499, "comment_id": 79538543, "body": "@Andrzej A. Filip, Not sure what you mean by that. Clients won&#39;t automatically retry, so you&#39;ll have to make a request for the missing range regardless of the client."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505770184, "post_id": 46287499, "comment_id": 79540123, "body": "@ikegami Is is simple/trivial to construct request for the missing part? [Command line curl offers command line option to download specific range]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505770356, "post_id": 46287499, "comment_id": 79540186, "body": "No matter what client you used, it&#39;s just a question of adding a header. You also need to check if the response is a complete response or just the requested range."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505771928, "post_id": 46287499, "comment_id": 79540689, "body": "See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests\" rel=\"nofollow noreferrer\">HTTP range requests</a>. It uses <code>curl</code> in its examples, but nothing about the page is specific to <code>curl</code>."}], "tags": [], "owner": {"reputation": 248, "user_id": 3006604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a438c3ea2f0a9241554a5e9762e1384c?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/3006604/pascal"}, "is_accepted": true, "score": 0, "last_activity_date": 1505765655, "creation_date": 1505765655, "answer_id": 46287499, "question_id": 46285388, "link": "https://stackoverflow.com/questions/46285388/thead-safe-http-client-module/46287499#46287499", "title": "Thead safe HTTP client module", "body": "<p><a href=\"http://search.cpan.org/~mlehmann/AnyEvent-HTTP-2.23/HTTP.pm\" rel=\"nofollow noreferrer\">AnyEvent::HTTP</a> supports whatever event loop you would like to use.</p>\n"}], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 46287499, "answer_count": 2, "score": -1, "last_activity_date": 1505842796, "creation_date": 1505756941, "question_id": 46285388, "link": "https://stackoverflow.com/questions/46285388/thead-safe-http-client-module", "title": "Thead safe HTTP client module", "body": "<p>Which module would you recommend for thread safe HTTP client?<br>\n[ Alternative: event based multi-session HTTP client ]</p>\n\n<p>Extra requirements:</p>\n\n<ol>\n<li>Support for retries (use of partially downloaded big files)</li>\n<li>Shared cookies</li>\n<li>Provided as Debian package</li>\n<li>Multi-session parallel download of big files [less important]</li>\n</ol>\n"}, {"tags": ["apache", "perl"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505746046, "post_id": 46282077, "comment_id": 79527284, "body": "One approach would be to build a new server, using whatever DR plan you have in place, or even better, server orchestration scripts if you have them. Then point the system that uses this server to the new instance, assuming it starts up."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505746164, "post_id": 46282077, "comment_id": 79527374, "body": "Whilst this piece of advice won&#39;t help you immediately, it seems you have uncovered a substantial business risk, and once this service is restored, you should address that as a matter of priority. Having a server in your stack that is unmaintained (or with no internal expertise to administrate it) needs to be addressed."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505746383, "post_id": 46282077, "comment_id": 79527521, "body": "Please read <a href=\"//meta.stackoverflow.com/q/326569\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a> - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505746492, "post_id": 46282077, "comment_id": 79527603, "body": "Does <code>&#47;opt&#47;eprints3&#47;archives&#47;ast&#47;cfg&#47;cfg.d</code> exist? If so, find out where the root config is (<code>&#47;opt&#47;eprints3&#47;*</code>?) and see if it is referenced in there. Maybe you have a config key pointing to the wrong file?"}, {"owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505747403, "post_id": 46282077, "comment_id": 79528234, "body": "nope it seems the config is as it should be, there is no other config at the root folder. all that exists is whats at the archive. i can also run <code>bin&#47;epadmin test ast</code> and it tells me my config looks fine."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1505775555, "post_id": 46282077, "comment_id": 79541670, "body": "I would start looking for where <code>&#47;opt&#47;eprints3&#47;archives&#47;test&#47;cfg&#47;cfg.d</code> is referenced. It looks intermingled in your Apache config, which looks like it might be dynamically modified in this Perl app. I suggest you examine the Apache config and see what clues you can get there."}], "answers": [{"tags": [], "owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "is_accepted": true, "score": 0, "last_activity_date": 1505808150, "creation_date": 1505808150, "answer_id": 46295071, "question_id": 46282077, "link": "https://stackoverflow.com/questions/46282077/eprints3-ast-is-not-a-valid-repository-identifier/46295071#46295071", "title": "Eprints3: &#39;ast&#39; is not a valid repository identifier", "body": "<p>The issue was that there was an empty 'test' folder beside our 'ast' archive. The removal of this folder fixed the issue. The reason why this behavior only started now is still a bit of a mystery.</p>\n"}], "owner": {"reputation": 1373, "user_id": 3662277, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hvN2t.jpg?s=128&g=1", "display_name": "ThriceGood", "link": "https://stackoverflow.com/users/3662277/thricegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 46295071, "answer_count": 1, "score": 0, "last_activity_date": 1505808150, "creation_date": 1505745593, "last_edit_date": 1505748434, "question_id": 46282077, "link": "https://stackoverflow.com/questions/46282077/eprints3-ast-is-not-a-valid-repository-identifier", "title": "Eprints3: &#39;ast&#39; is not a valid repository identifier", "body": "<p></p>\n\n<p>Our production EPrints (3.3.15) instance has recently failed.</p>\n\n<p>Nothing has changed regarding either the EPrints config or the Apache config, but on Sunday some errors appeared in the Apache error.log file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>------------------------------------------------------------------\n---------------- EPrints System Error ----------------------------\n------------------------------------------------------------------\nCan't read cfg.d config files from /opt/eprints3/archives/test/cfg/cfg.d: No such file or directory\n------------------------------------------------------------------\nEPrints System Error inducing stack dump\n at /opt/eprints3/perl_lib/EPrints.pm line 145\n    EPrints::abort() called at /opt/eprints3/perl_lib/EPrints/Config.pm line 252\n    EPrints::Config::load_repository_config_module('test') called at /opt/eprints3/perl_lib/EPrints/Repository.pm line 447\n    EPrints::Repository::load_config('EPrints::Repository=HASH(0x7fe00c0d1688)') called at /opt/eprints3/perl_lib/EPrints/Repository.pm line 153\n    EPrints::Repository::new('EPrints::Repository', 'test', 'db_connect', 0) called at /opt/eprints3/perl_lib/EPrints.pm line 491\n    EPrints::repository('EPrints=HASH(0x7fe00ce7b428)', 'test', 'db_connect', 0) called at /opt/eprints3/perl_lib/EPrints.pm line 581\n    EPrints::load_repositories('EPrints=HASH(0x7fe00ce7b428)') called at /opt/eprints3/perl_lib/EPrints.pm line 397\n    EPrints::post_config_handler('APR::Pool=SCALAR(0x7fe00c829928)', 'APR::Pool=SCALAR(0x7fe00c8297c0)', 'APR::Pool=SCALAR(0x7fe00c829880)', 'Apache2::ServerRec=SCALAR(0x7fe00c8297f0)') called at -e line 0\n    eval {...} called at -e line 0\n[Sun Sep 17 06:25:16 2017] [notice] Apache/2.2.16 (Debian) mod_auth_kerb/5.4 mod_ssl/2.2.16 OpenSSL/0.9.8o Phusion_Passenger/3.0.12 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations\n</code></pre>\n\n<p>(then there is a few hundred of these errors)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>------------------------------------------------------------------\n---------------- EPrints System Error ----------------------------\n------------------------------------------------------------------\n'ast' is not a valid repository identifier:\nPerlSetVar EPrints_ArchiveID ast\n------------------------------------------------------------------\nEPrints System Error inducing stack dump\n at /opt/eprints3/perl_lib/EPrints.pm line 145\n    EPrints::abort('EPrints') called at /opt/eprints3/perl_lib/EPrints/Apache/Rewrite.pm line 62\n    EPrints::Apache::Rewrite::handler('Apache2::RequestRec=SCALAR(0x7fe00c8297c0)') called at -e line 0\n    eval {...} called at -e line 0\n[Sun Sep 17 06:25:32 2017] [error] [client 46.229.168.67] File does not exist: (null)\n</code></pre>\n\n<p>I have no idea what happened. I just find it strange that the first error relates to it trying to load config for the <code>test</code> archive, which also exists beside our <code>ast</code> archive. Thereafter it's not recognising our <code>ast</code> archive.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 8, "creation_date": 1505719450, "post_id": 46273696, "comment_id": 79509901, "body": "<code>my ($continent,$region,@rest) = @parse_list; $hash{$continent}{$region} = \\@rest;</code>"}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1505751450, "post_id": 46273696, "comment_id": 79530890, "body": "@\u0421\u0443\u0445\u043e\u043927 it works!! Thank you so much."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505758155, "post_id": 46277021, "comment_id": 79534334, "body": "it works pretty well!. Thanks for solving my problem. :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505798352, "post_id": 46277021, "comment_id": 79547198, "body": "@Luke: Glad to hear it works &quot;pretty well&quot; :-/ Hope you learned something from reading it."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1505738678, "last_edit_date": 1505738678, "creation_date": 1505730419, "answer_id": 46277021, "question_id": 46273696, "link": "https://stackoverflow.com/questions/46273696/perl-put-array-element-into-hash/46277021#46277021", "title": "perl put array element into hash", "body": "<p>When you're \"parsing\" your list, it's not very helpful to store everything in a single array. Instead, put the data into more useful variables.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $string_array = [\n  \"Europe West France Spain Germany\",\n  \"Europe North Finland Iceland\",\n  \"Asia East Japan Korea China\",\n  \"America North Mexico USA Canada\"\n];\n\nmy %geography;\n\nfor (@$string_array) {\n  my ($continent, $region, @countries) = split;\n\n  $geography{$continent}{$region} = \\@countries;\n}\n\nprint Dumper \\%geography;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>$VAR1 = {\n          'America' =&gt; {\n                         'North' =&gt; [\n                                      'Mexico',\n                                      'USA',\n                                      'Canada'\n                                    ]\n                       },\n          'Europe' =&gt; {\n                        'West' =&gt; [\n                                    'France',\n                                    'Spain',\n                                    'Germany'\n                                  ],\n                        'North' =&gt; [\n                                     'Finland',\n                                     'Iceland'\n                                   ]\n                      },\n          'Asia' =&gt; {\n                      'East' =&gt; [\n                                  'Japan',\n                                  'Korea',\n                                  'China'\n                                ]\n                    }\n        };\n</code></pre>\n\n<p><strong>Update</strong> (to add some more explanation):</p>\n\n<p>I've changed the name of <code>%hash</code> to <code>%geography</code> - naming variables well is very important.</p>\n\n<p>When using the <code>for (...)</code> construct, it's often useful to use Perl's default behaviour and store the list elements in <code>$_</code>. This is because <code>$_</code> is often the default input variable for various operations. In this case, for example, I could have written:</p>\n\n<pre><code>for my $geo (@$string_array) {\n  my ($continent, $region, @countries) = split /\\s+/, $geo;\n  ...\n}\n</code></pre>\n\n<p>But the <code>split</code> function works on <code>$_</code> by default. And, even better, its standard behaviour is to split on <code>/\\s+/</code>, so we can omit all that too and end up with much cleaner code:</p>\n\n<pre><code>for (@$string_array) {\n  my ($continent, $region, @countries) = split;\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "accepted_answer_id": 46277021, "answer_count": 1, "score": 2, "last_activity_date": 1505738678, "creation_date": 1505719229, "last_edit_date": 1505724016, "question_id": 46273696, "link": "https://stackoverflow.com/questions/46273696/perl-put-array-element-into-hash", "title": "perl put array element into hash", "body": "<p>I have an array with a bunch of strings as elements, and I want to put then into hash. So I spilt the strings in the array first and then put the parsed strings into a new array call parse_list.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Data::Dumper qw(Dumper);\nmy %hash;\n\nmy $string_array = [\n                \"Europe West France Spain Germany\",\n                \"Europe North Finland Iceland\",\n                \"Asia East Japan Korea China\",\n                \"America North Mexico USA Canada\"\n    ];\n\nforeach my $country(@{$string_array}){ \n    my @parse_list = split(/\\s+/, $country);\n    (my $continent,my $region,) = @parse_list[0,1];\n    #I just know how to get the continent and region, I don't know how to put       \n    #the element from index [2..4] to an array \n\n}\n</code></pre>\n\n<p>How can I set </p>\n\n<p><strong>Continent</strong> as the primary key and the <strong>Region</strong> as the value in the first layer of the hash.</p>\n\n<p><strong>Region</strong> as the secondary key and the array <strong>Country</strong> as the value in the second layer of the hash.</p>\n\n<p>so it is like </p>\n\n<pre><code>my %hash = (\n    Europe =&gt; {\n        West =&gt; [ \"France\", \"Spain\", \"Germany\"]\n        }\n    );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505716166, "post_id": 46272857, "comment_id": 79508073, "body": "just split the reversed IP address and reorder them."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1505716210, "post_id": 46272857, "comment_id": 79508096, "body": "<code>$result = join &quot;.&quot;, reverse split &#47;[.]&#47;, $ip</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1505717669, "post_id": 46272857, "comment_id": 79508819, "body": "@\u0421\u0443\u0445\u043e\u043927 Thank you."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1505718393, "post_id": 46272857, "comment_id": 79509225, "body": "I&#39;m curious, why are you doing this?  What&#39;s an example of an nslookup result that doesn&#39;t match?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1505718585, "post_id": 46272857, "comment_id": 79509344, "body": "@ysth There a whole bunch of old lookup entries that are pointing to the incorrect ip&#39;s, so instead of doing them one by one, I use the script and input all the ip&#39;s to see where the incorrect entries are. So as example, there are servers that has the correct IP and hostname, but their lookup entries are incorrect."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505791690, "post_id": 46272857, "comment_id": 79545293, "body": "Re &quot;<i>If it matches</i>&quot;, It always will. <code>nslookup 10.11.12.13</code> is a shortcut for <code>nslookup -type=ptr 13.12.11.10.in-addr.arpa</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505805979, "post_id": 46272857, "comment_id": 79551195, "body": "@ikegami yes, but if it a servername is registered as <code>10.11.12.14</code> and I do a lookup for <code>10.11.12.13</code>  I will not get a result back, and that is how I am testing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505812485, "post_id": 46272857, "comment_id": 79555188, "body": "That&#39;s not what you asked, though, and that doesn&#39;t require reversing Anything! You just need to check if you got a result back; you don&#39;t also have to check if the query is your query because it will always be"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "edited": false, "score": 0, "creation_date": 1505717706, "post_id": 46272953, "comment_id": 79508841, "body": "Thanks a lot for the answer"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1505718717, "post_id": 46272953, "comment_id": 79509423, "body": "Where you interpolate <code>$sserddapi</code> in regexes, you want <code>\\Q$sserddapi\\E</code> instead.  And you want \\ before the .&#39;s in your substitution.  Also, your if match for 13.12.11.10 would match e.g. 13.12.11.101 too, which I&#39;m guessing is wrong"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 0, "last_activity_date": 1505718431, "last_edit_date": 1505718431, "creation_date": 1505716575, "answer_id": 46272953, "question_id": 46272857, "link": "https://stackoverflow.com/questions/46272857/reversing-the-ip-address-in-linux-using-perl/46272953#46272953", "title": "Reversing the IP address in Linux using perl", "body": "<p>So what we need to do is to just split the actual address, reorder them in reverse and then match the IP to the reversed IP.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $ipaddress = '10.11.12.13';    \nmy @ip = split /\\./,$ipaddress;                      #split the IP by .\nmy $sserddapi = \"$ip[3].$ip[2].$ip[1].$ip[0]\";       #reverse it\nmy @lookup = `nslookup $ipaddress`;                  #do the match\n   $lookup[3] =~ s/\\s+//g;                           #remove all whitespace\nmy @device = split /=/, $lookup[3];                  #get the hostname\n    if ($lookup[3] =~ /^$sserddapi/) {               #see if it matches\n    $lookup[3] =~ s/$sserddapi.in-addr.arpaname=//g; #Remove the unwanted stuff\n    print \"$ipaddress = $lookup[3]\\n\";               #print the result\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "edited": false, "score": 0, "creation_date": 1505717654, "post_id": 46272994, "comment_id": 79508811, "body": "Thanks for the answer. I marked the other one as correct it gave me the match as well but this one is good. it says I cannot vote as I do not have 15 reputation yet so cannot vote your answer up."}], "tags": [], "owner": {"reputation": 447, "user_id": 6437978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba0a12137fee82324a7ee8ae62156eb?s=128&d=identicon&r=PG&f=1", "display_name": "insert_name_here", "link": "https://stackoverflow.com/users/6437978/insert-name-here"}, "is_accepted": false, "score": 1, "last_activity_date": 1505716763, "creation_date": 1505716763, "answer_id": 46272994, "question_id": 46272857, "link": "https://stackoverflow.com/questions/46272857/reversing-the-ip-address-in-linux-using-perl/46272994#46272994", "title": "Reversing the IP address in Linux using perl", "body": "<p>Simply split the IP address on <code>.</code>s using <code>split</code>, reverse the resulting array, then rejoin it:</p>\n\n<pre><code>join(\".\", reverse(split(/\\./, $ip)))\n</code></pre>\n\n<p>This will give you the \"reversed\" IP address, which you can then compare to the <code>nslookup</code> result.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8624950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 46272953, "answer_count": 2, "score": 0, "last_activity_date": 1505718431, "creation_date": 1505716112, "question_id": 46272857, "link": "https://stackoverflow.com/questions/46272857/reversing-the-ip-address-in-linux-using-perl", "title": "Reversing the IP address in Linux using perl", "body": "<p>I have a job where I need to do nslookup on an IP address. If it matches then I need to print the name of the host. The problem is that the IP address comes reversed when running the command.</p>\n\n<pre><code>nslookup 10.11.12.13\n13.12.11.10.in-addr.arpa\n</code></pre>\n\n<p>I tried to use <code>reverse</code> but that reversed everything which is not what I want.</p>\n\n<pre><code>my $ip = '13.12.11.10';\n$result = reverse($ip);\nprint $result;\n</code></pre>\n\n<p>which then prints <code>01.11.21.31</code>\nI do not want to reverse everything, just the full numbers.</p>\n\n<p>Please can someone help?</p>\n"}, {"tags": ["perl", "svn"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1505697379, "last_edit_date": 1505697379, "creation_date": 1505694147, "answer_id": 46270054, "question_id": 46269435, "link": "https://stackoverflow.com/questions/46269435/perl-svnhooks-and-svnhooksnotify/46270054#46270054", "title": "Perl, SVN::Hooks, and SVN::Hooks::Notify", "body": "<p>The NOTIFY block sets a post-commit hook; there is no separate hook for notify.</p>\n\n<p>And as far as I can tell from the SVN::Hook source, you can have set as many of a given hook as you want, and they will run in the order you add them in.  So you may need to do e.g.:</p>\n\n<pre><code>use SVN::Hooks;\nBEGIN {\n    POST_COMMIT { ... }\n}\nuse SVN::Hooks::Notify;\n</code></pre>\n\n<p>to have your other hook come before the notify hook.</p>\n"}], "owner": {"reputation": 13, "user_id": 7622626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHfxw.png?s=128&g=1", "display_name": "vergessen", "link": "https://stackoverflow.com/users/7622626/vergessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505697379, "creation_date": 1505687110, "question_id": 46269435, "link": "https://stackoverflow.com/questions/46269435/perl-svnhooks-and-svnhooksnotify", "title": "Perl, SVN::Hooks, and SVN::Hooks::Notify", "body": "<p>Can anyone tell me offhand if SVN::Hooks::Notify's NOTIFY and NOTIFY_DEFAULTS blocks replace (or rather, stop the evaluation of) the POST_COMMIT block?  My PRE_COMMIT block works fine, and my existing NOTIFY/NOTIFY_DEFAULTS blocks process just fine.  </p>\n\n<p>However, nothing I have under the POST_COMMIT block fires at all... and yes, hooks/post-commit is linked to the script.  The perdocs for svn::hooks::notify state that it runs within POST_COMMIT, but I would prefer to do some extra processing first <em>before</em> kicking off a notification email (eg, inserting pertinent information into a db table for later use).</p>\n"}, {"tags": ["mysql", "perl", "template-toolkit", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505665344, "post_id": 46265790, "comment_id": 79495050, "body": "What&#39;s the <code>&quot;PRI&quot;</code> for? There is no column with that name, and the DBI docs do not refer to that as a special case. It can also not be treated like a number, so it should throw an error."}, {"owner": {"reputation": 83, "user_id": 8622719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b899f224cbdc74a6f72ff20a7a97ad6f?s=128&d=identicon&r=PG&f=1", "display_name": "W R", "link": "https://stackoverflow.com/users/8622719/w-r"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505666275, "post_id": 46265790, "comment_id": 79495312, "body": "Sorry for the mistake. Should have been Time      &#39;entries&#39; =&gt; $sth-&gt;fetchall_hashref(&#39;Time&#39;),"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1505674105, "post_id": 46266403, "comment_id": 79497889, "body": "<code>$dbh-&gt;selectall_arrayref($sql, { Slice =&gt; {} })</code>, to be specific. This produces an AoH."}], "tags": [], "owner": {"reputation": 890, "user_id": 1336858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14c71614ddf0252a06612c9bde5c3c5d?s=128&d=identicon&r=PG", "display_name": "Akzhan Abdulin", "link": "https://stackoverflow.com/users/1336858/akzhan-abdulin"}, "is_accepted": true, "score": 9, "last_activity_date": 1505668763, "last_edit_date": 1505668763, "creation_date": 1505666201, "answer_id": 46266403, "question_id": 46265790, "link": "https://stackoverflow.com/questions/46265790/template-toolkit-displays-unique-row/46266403#46266403", "title": "template toolkit displays unique row", "body": "<p>Please take a note that <a href=\"http://search.cpan.org/~timb/DBI-1.637/DBI.pm#fetchall_hashref\" rel=\"noreferrer\">fetchall_hashref</a> returns hashref { FieldValue => FieldsHash }.</p>\n\n<p>When some field values aren't unique, you missed some FieldHashes (every next record with same Time value will overwrite previous in result hashref).</p>\n\n<p>Please use arrays of rows (<a href=\"https://metacpan.org/pod/DBI#fetchall_arrayref\" rel=\"noreferrer\"><code>selectall_arrayref</code></a>) in these cases.</p>\n\n<p>P.S.: Time in this query always is not unique (sometimes two records may be added simultaneously).</p>\n"}], "owner": {"reputation": 83, "user_id": 8622719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b899f224cbdc74a6f72ff20a7a97ad6f?s=128&d=identicon&r=PG&f=1", "display_name": "W R", "link": "https://stackoverflow.com/users/8622719/w-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 46266403, "answer_count": 1, "score": 8, "last_activity_date": 1505668763, "creation_date": 1505662316, "last_edit_date": 1505666241, "question_id": 46265790, "link": "https://stackoverflow.com/questions/46265790/template-toolkit-displays-unique-row", "title": "template toolkit displays unique row", "body": "<p>I am using Perl dancer2 to write an application. Running select query in mysql displays all records. But the same query run in dancer2 and template toolkit displays only unique records.</p>\n\n<p>Eg. 34 records fetched when this is run in mysql client.</p>\n\n<pre><code>    select timing.time as Time,\n           church.church_name as Church_Name, \n           church.church_address as Address, \n           language.language_name as Language, \n           denomination.denomination_name as Denomination, \n           city.city_name as City, \n           state.state_name as State, \n           country.country_name as Country \n      from church \n      join country on church.church_countryid=country_id \n      join state on church.church_stateid=state.state_id \n      join city on church.church_cityid=city.city_id \n      join church_mass_timing on church.church_id=church_mass_timing.church_id \n      join timing on church_mass_timing.time_id=timing.time_id \n      join language on church_mass_timing.language_id=language.language_id \n      join denomination on church.church_denominationid=denomination.denomination_id \n  order by church.church_name,\n           timing.time;\n</code></pre>\n\n<p>Same query in Dancer with Template Toolkit returns 11 records.</p>\n\n<pre><code>get '/church_list' =&gt; sub {\nmy $db = connect_db();\nmy $sql='select timing.time as Time,\n                church.church_name as Church_Name, \n                church.church_address as Address, \n                language.language_name as Language, \n                denomination.denomination_name as Denomination, \n                city.city_name as City, \n                state.state_name as State, \n                country.country_name as Country \n           from church \n           join country on church.church_countryid=country_id \n           join state on church.church_stateid=state.state_id \n           join city on church.church_cityid=city.city_id \n           join church_mass_timing on church.church_id=church_mass_timing.church_id \n           join timing on church_mass_timing.time_id=timing.time_id \n           join language on church_mass_timing.language_id=language.language_id \n           join denomination on church.church_denominationid=denomination.denomination_id \n       order by church.church_name,\n                timing.time';\nmy $sth = $db-&gt;prepare($sql) or die $db-&gt;errstr;\n$sth-&gt;execute or die $sth-&gt;errstr;\ntemplate 'church_list.tt' =&gt; { 'title' =&gt; 'church list',\n   'site' =&gt; 'Church Timings', \n   'entries' =&gt; $sth-&gt;fetchall_hashref('Time'),\n};\n};    \n</code></pre>\n\n<p>this is the church_list.tt</p>\n\n<pre><code>&lt;% INCLUDE header.tt %&gt;\n&lt;ul id=\"content\"&gt;\n&lt;button id=\"btnExport\"&gt;Export to xls&lt;/button&gt;\n&lt;br /&gt;\n&lt;br /&gt;\n&lt;div id=\"table_wrapper\"&gt;\n\n&lt;% IF entries.size %&gt;\n&lt;table border=\"1\" cellspacing=\"2\" widht=\"100%\"&gt;\n&lt;tr&gt;\n&lt;th&gt;&lt;center&gt;Time&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;Church name&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;Address&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;Language&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;Denomination&lt;/center&gt;&lt;/th&gt;  \n&lt;th&gt;&lt;center&gt;City&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;State&lt;/center&gt;&lt;/th&gt;\n&lt;th&gt;&lt;center&gt;Country&lt;/center&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;% FOREACH id IN entries.keys %&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;% entries.$id.Time %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.Church_Name %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.Address %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.language %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.denomination %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.city %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.state %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;% entries.$id.country %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;% END %&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;% ELSE %&gt;\n&lt;li&gt;&lt;em&gt;No entries here so far.&lt;/em&gt;\n&lt;% END %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1505646649, "post_id": 46263262, "comment_id": 79489774, "body": "In practice you&#39;ll always want to write to another file, even <code>perl -i -pe &#39;s&#47;perl&#47;python&#47;i&#39; test.txt</code> works in that manner. Alternatively you can read whole file at once, make changes and write whole file back to same handle."}, {"owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1505647186, "post_id": 46263262, "comment_id": 79489921, "body": "@\u0421\u0443\u0445\u043e\u043927 can you explain what does the options do in the command i.e -i -pe"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1505659612, "post_id": 46263262, "comment_id": 79493383, "body": "It&#39;s file <b>handle</b>, not handler."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505696458, "post_id": 46263262, "comment_id": 79502941, "body": "You have the full <a href=\"https://stackoverflow.com/a/46268062/4653379\">answer by ikegami</a>, and here is another <a href=\"https://stackoverflow.com/a/40269154/4653379\">post</a> also showing how to keep the same inode."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505674827, "post_id": 46265277, "comment_id": 79498128, "body": "Note that this uses two handles."}], "tags": [], "owner": {"reputation": 78, "user_id": 5993787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4855aa2caf99d56665e5ff777dd5efd5?s=128&d=identicon&r=PG", "display_name": "Yongbin Yu", "link": "https://stackoverflow.com/users/5993787/yongbin-yu"}, "is_accepted": true, "score": 0, "last_activity_date": 1505663433, "last_edit_date": 1505663433, "creation_date": 1505659125, "answer_id": 46265277, "question_id": 46263262, "link": "https://stackoverflow.com/questions/46263262/how-to-modify-content-of-a-file-using-single-file-handle/46265277#46265277", "title": "How to modify content of a file using single file handle", "body": "<p>As @\u0421\u0443\u0445\u043e\u043927 answered</p>\n\n<p>it's typical situation that perl onliner pleasingly  used.</p>\n\n<blockquote>\n  <p>perl -i -pe 's/perl/python/i'</p>\n</blockquote>\n\n<p><code>perl</code> takes below options</p>\n\n<ul>\n<li><code>-p</code> : make line by line loop(every line assign into <code>$_</code> and print after evaluated <code>$_</code>)</li>\n<li><code>-e</code> : evaluate code block in above loop ( regex take <code>$_</code> as default operand )</li>\n<li><code>-i</code> : in plcae file edit (if you pass arguments for -i, perl preserve original files with that extention)</li>\n</ul>\n\n<p>if you run below script</p>\n\n<blockquote>\n  <p>perl -i.bak -pe 's/perl/python/i' test.txt</p>\n</blockquote>\n\n<p>you will get modified <code>test.txt</code></p>\n\n<pre><code>im learning python\nim in File handlers chapter\n</code></pre>\n\n<p>and get original text files named in <code>test.txt.bak</code></p>\n\n<pre><code>im learning perl\nim in File handlers chapter\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1505709974, "last_edit_date": 1505709974, "creation_date": 1505676570, "answer_id": 46268062, "question_id": 46263262, "link": "https://stackoverflow.com/questions/46263262/how-to-modify-content-of-a-file-using-single-file-handle/46268062#46268062", "title": "How to modify content of a file using single file handle", "body": "<p>You can't delete from a file (except at the end).<br>\nYou can't insert characters into a file (except at the end).</p>\n\n<p>You can replace a character in a file.<br>\nYou can append to a file.<br>\nYou can shorten a file.<br>\nThat's it. </p>\n\n<p>You're imagining you can simply replace \"Perl\" with \"Python\" in the file. Those aren't of the same length, so it would require inserting characters into the file, and you can't do that.</p>\n\n<p>You can effectively insert characters into a file by loading the rest of the file into memory and writing it back out two characters further. But doing this gets tricky for very large files. It's also very slow since you end up copying a (possibly very large) portion of the file every time you want to insert characters.</p>\n\n<p>The other problem with in-place modifications is that you can't recover from an error. If something happens, you'll be left with an incomplete or corrupted file.</p>\n\n<p>If the file is small and you're ok with losing the data if something goes wrong, the simplest approach is to load the entire file into memory.</p>\n\n<pre><code> open(my $fh, '&lt;+', $qfn)\n    or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\n my $file = do { local $/; &lt;$fh&gt; };\n\n $file =~ s/Perl/Python/g;\n\n seek($fh, 0, SEEK_SET)\n    or die $!;\n print($fh $file)\n    or die $!;\n truncate($fh)\n    or die $!;\n</code></pre>\n\n<p>A safer approach is to write the data to a new file, then rename the file when you're done.</p>\n\n<pre><code> my $new_qfn = $qfn . \".tmp\";\n open(my $fh_in, '&lt;', $qfn)\n    or die(\"Can't open  \\\"$qfn\\\": $!\\n\");\n open(my $fh_out, '&lt;', $new_qfn)\n    or die(\"Can't create \\\"$new_qfn\\\": $!\\n\");\n\n while (&lt;$fh_in&gt;) {\n     s/Perl/Python/g;\n     print($fh_out $_);\n }\n\n close($fh_in);\n close($fh_out);\n\n rename($qfn_new, $qfn)\n    or die $!;\n</code></pre>\n\n<p>The downside of this approach is it might change the file's permissions, and hardlinks will point to the old content instead of the new file. You also need permissions to create a file.</p>\n"}], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 46265277, "answer_count": 2, "score": 0, "last_activity_date": 1505709974, "creation_date": 1505645559, "last_edit_date": 1505674736, "question_id": 46263262, "link": "https://stackoverflow.com/questions/46263262/how-to-modify-content-of-a-file-using-single-file-handle", "title": "How to modify content of a file using single file handle", "body": "<p>I'm trying to modify content of a file using Perl.</p>\n\n<p>The following script works fine.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen(FH,\"test.txt\") || die \"not able to open test.txt $!\";\nopen(FH2,\"&gt;\",\"test_new.txt\")|| die \"not able to opne test_new.txt $!\";\n\nwhile(my $line = &lt;FH&gt;)\n{\n        $line =~ s/perl/python/i;\n        print FH2 $line;\n}\nclose(FH);\nclose(FH2);\n</code></pre>\n\n<p>The content of <code>test.txt</code>:</p>\n\n<pre><code>im learning perl\nim in File handlers chapter\n</code></pre>\n\n<p>The output in <code>test_new.txt</code>:</p>\n\n<pre><code>im learning python\nim in File handlers chapter\n</code></pre>\n\n<p>If I try to use same file handle for modifying the content of file, then I'm not getting expected output. The following is the script that attempts to do this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen(FH,\"+&lt;\",\"test.txt\") || die \"not able to open test.txt $!\";\n\nwhile(my $line = &lt;FH&gt;)\n{\n        $line =~ s/perl/python/i;\n        print FH $line;\n}\nclose(FH);\n</code></pre>\n\n<p>Incorrect output in <code>test.txt</code>:</p>\n\n<pre><code>im learning perl\nim learning python\n chapter\n chapter\n</code></pre>\n\n<p>How do I modify the file contents using single file handle?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 0, "creation_date": 1505644026, "post_id": 46263006, "comment_id": 79489090, "body": "Why do you tag this question as <code>bash</code> and you actually ask for perl code?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1505644997, "creation_date": 1505644997, "answer_id": 46263182, "question_id": 46263006, "link": "https://stackoverflow.com/questions/46263006/using-perl-to-add-lines-containing-only-one-string-to-previous-line/46263182#46263182", "title": "Using perl to add lines containing only one string to previous line", "body": "<pre><code>perl -0777 -pe 's/\\n(\\S+)$/ $1/mg'\n</code></pre>\n\n<p>Untested, but the idea is to slurp the whole file into a string, then replace  by spaces all newlines that precede a single-word line.</p>\n"}], "owner": {"reputation": 1, "user_id": 8621829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2392f6639236c57f98e199b51988cf?s=128&d=identicon&r=PG&f=1", "display_name": "bbith", "link": "https://stackoverflow.com/users/8621829/bbith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505644997, "creation_date": 1505643816, "last_edit_date": 1505644575, "question_id": 46263006, "link": "https://stackoverflow.com/questions/46263006/using-perl-to-add-lines-containing-only-one-string-to-previous-line", "title": "Using perl to add lines containing only one string to previous line", "body": "<p>I have a file of names of this kind:</p>\n\n<blockquote>\n  <p>Jos\u00e9e Maria<br>\n  Sanchez<br>\n  Marco Robert<br>\n  Figaro<br>\n  Max Theodor Schmitz<br>\n  John Smith<br>\n  Maria Catharina Luise<br>\n  Armino</p>\n</blockquote>\n\n<p>and I want to add each line containing one single string (only one name) to the previous line:</p>\n\n<blockquote>\n  <p>Jos\u00e9e Maria Sanchez<br>\n  Marco Robert Figaro<br>\n  Max Theodor Schmitz<br>\n  John Smith<br>\n  Maria Catharina Luise Armino</p>\n</blockquote>\n\n<p>Is there a good one-liner using perl?</p>\n"}, {"tags": ["perl", "logging", "log4perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505643687, "post_id": 46262844, "comment_id": 79488992, "body": "why do you not want to have the <code>INFO</code> on every line? I would have to look at the implementation internals, but maybe you can build something that wraps <code>-&gt;info</code> to behave the way you want when you pass in a list. Then you can have <code>@logmessages</code> instead of <code>$logmessage</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505644685, "post_id": 46262844, "comment_id": 79489267, "body": "On the other hand, that would break the default behavior that each argument is one whole message."}, {"owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1505644999, "post_id": 46262844, "comment_id": 79489354, "body": "@simbabque there are &#39;groups&#39; of log messages that naturally go together, and are for information. I find it easier to read if these groups are formatted in the way that I&#39;ve outlined above. if every single line has <code>INFO</code> or <code>WARN</code> or something else, then I find myself ignoring them, which (for me) takes away some of their value"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505648087, "post_id": 46262844, "comment_id": 79490170, "body": "Why not simply make your own wrapper to hide the newline part that you don&#39;t like?"}, {"owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505660818, "post_id": 46262844, "comment_id": 79493731, "body": "Would like to see such a wrapper"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505847697, "post_id": 46262844, "comment_id": 79577792, "body": "How do you decide which messages go into a group, of all possible <code>info</code> ones?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505848161, "post_id": 46262844, "comment_id": 79578065, "body": "I&#39;m not sure what you would consider removal of scaffolding. (After all, some means of communicating that two messages are related is needed.) Are you asking for something like <code>$logger-&gt;info(&quot;some information&quot;); $logger-&gt;moreinfo(&quot;more information&quot;);</code>?"}, {"owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "edited": false, "score": 0, "creation_date": 1505849344, "post_id": 46262844, "comment_id": 79578702, "body": "I think something like logger-&gt;info(...,heading) for lines that have INFO and logger-&gt;info(...) for non-headings. Or, perhaps, logger-&gt;info-heading and logger-&gt;info."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506022205, "post_id": 46262844, "comment_id": 79663831, "body": "You need to tag me (<code>@ikegami</code>) for me to get notified."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506022453, "post_id": 46262844, "comment_id": 79663962, "body": "Your wrapper: When you receive a heading call, flush your buffer (join the contents with newlines, then send the buffer to the actual logger), then add the new data to the buffer. When you receive a non-heading call, add the new data to the buffer. Flush on destruction."}, {"owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506022563, "post_id": 46262844, "comment_id": 79664019, "body": "@ikegami that sounds like a nice approach, I&#39;d certainly be interested in seeing it. I like zdim&#39;s answer, and am using it with, for example <code>$logger-&gt;info(&quot;*...&quot;)</code> for &#39;headings&#39; and <code>$logger-&gt;info(&quot;...&quot;)</code> for &#39;non-headings&#39; (I&#39;ve adjusted the anonymous subroutine accordingly)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506022799, "post_id": 46262844, "comment_id": 79664145, "body": "Re &quot;<i>I&#39;d certainly be interested in seeing it.</i>&quot;, hum? I just showed it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506022829, "post_id": 46262844, "comment_id": 79664159, "body": "Re &quot;<i>I like zdim&#39;s answer</i>&quot;, aye, probably simpler. I was simply answering your question as to how one would write a wrapper."}], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "edited": false, "score": 0, "creation_date": 1505937536, "post_id": 46309392, "comment_id": 79622403, "body": "Many thanks, I like this a lot. Thanks for the links as well, most informative. I&#39;ll wait a few days before accepting and awarding the bounty to maximize exposure."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "edited": false, "score": 0, "creation_date": 1506241383, "post_id": 46309392, "comment_id": 79733783, "body": "@cmhughes  Great to hear that it helps, thank you for saying that. I just noticed your comments and added an idea for an &quot;interface&quot; for that. Thank you for the attribution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "edited": false, "score": 0, "creation_date": 1506457027, "post_id": 46309392, "comment_id": 79827389, "body": "@cmhughes  I added another approach, that is in fact a &quot;proper&quot; way to fine tune these kinds of things. (It is likely too heavy-handed for this purpose, unless there is more in reality.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1506458590, "last_edit_date": 1506458590, "creation_date": 1505853460, "answer_id": 46309392, "question_id": 46262844, "link": "https://stackoverflow.com/questions/46262844/log4perl-grouping-messages/46309392#46309392", "title": "log4perl: grouping messages", "body": "<p>One way is to add <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.49/lib/Log/Log4perl/Layout/PatternLayout.pm#Custom_cspecs\" rel=\"nofollow noreferrer\">custom \"cspecs\"</a> to your <code>PatternLayout</code>.  Using an API</p>\n\n<blockquote>\n<pre><code>Log::Log4perl::Layout::PatternLayout::add_global_cspec(\n    'A', sub { ... }\n);                    # can now use %A\n</code></pre>\n</blockquote>\n\n<p>where this needs to come before the call to <code>new</code> which can then use the <code>%A</code> specifier.</p>\n\n<p>This can be set up in <a href=\"http://search.cpan.org/dist/Log-Log4perl-1.36/lib/Log/Log4perl/Config.pm\" rel=\"nofollow noreferrer\">configuration</a> instead, as shown in linked docs. Or <code>add_global_cspec</code> method can be called on the <code>$layout</code> object (but I couldn't figure out the interface.)</p>\n\n<p>The anonymous sub receives </p>\n\n<blockquote>\n<pre><code>($layout, $message, $category, $priority, $caller_level)  \n</code></pre>\n  \n  <p>layout: the PatternLayout object that called it<br>\n      message: the logging message (%m)<br>\n      category: e.g. groceries.beverages.adult.beer.schlitz<br>\n      priority: e.g. DEBUG|WARN|INFO|ERROR|FATAL<br>\n      caller_level: how many levels back up the call stack you have \n          to go to find the caller</p>\n</blockquote>\n\n<p>what can be used to implement criteria for formatting the prints.</p>\n\n<p>Here is a simple example custom-specifying the whole format</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Log::Log4perl qw(get_logger :levels);\n\nmy $logger = get_logger();\n$logger-&gt;level($INFO);\n\nLog::Log4perl::Layout::PatternLayout::add_global_cspec( \n    'A', sub { return ( \n        $_[1] !~ /^more/                 # /^more/ taken to indicate \n           ?  \"$_[3]: \"                  # the continuation criterion,\n           :  ' ' x length $_[3] . '  '  # or start with 'INFO: '\n    ) . $_[1]\n});\n\nmy $layout = Log::Log4perl::Layout::PatternLayout-&gt;new(\"%A%n\");\n\nmy $appender = Log::Log4perl::Appender-&gt;new(\n    \"Log::Dispatch::File\",\n    filename =&gt; \"new_test.log\",\n    mode     =&gt; \"write\",\n);\n\n$logger-&gt;info('some info');\n$logger-&gt;info('more info');\n\n$logger-&gt;info('info');\n$logger-&gt;info('more and more info');\n</code></pre>\n\n<p>which prints</p>\n\n<pre>\nINFO: some info\n      more info\nINFO: info\n      more and more info\n</pre>\n\n<p>Such a custom specifier can of course be combined with the provided ones. </p>\n\n<p>Since the list in <code>info(...)</code> is joined by the logger into a string that is passed along to appender(s) we can decide on the heading in the caller with an apparent interface</p>\n\n<pre><code>$logger-&gt;info('*', \"... message ...\");  # * for heading (add INFO:)\n</code></pre>\n\n<p>where the first string above is whatever the regex in our <code>cspec</code> looks for. </p>\n\n<p>This formats each log line based on its content. A more rounded option is to <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.39/lib/Log/Log4perl/FAQ.pm#How_can_I_write_my_own_appender?\" rel=\"nofollow noreferrer\">write your own appender (FAQ)</a>, which is a rather simple class where you can keep and manipulate lines as needed. See an example of <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.39/lib/Log/Log4perl/FAQ.pm#How_can_I_bundle_several_log_messages_into_one?\" rel=\"nofollow noreferrer\">bundling messages (FAQ)</a>, for instance.</p>\n\n<p>Finally, a proper way to fine-tune how messages are selected is by adding a <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.47/lib/Log/Log4perl.pm#Categories\" rel=\"nofollow noreferrer\">category</a>. Then you can pull a new logger and configure it to display <code>INFO:</code> (for the header line), while the rest of messages in that group go by the other logger, configured to not display it. See <a href=\"https://stackoverflow.com/a/36937303/4653379\">this post</a> for a simple example.</p>\n\n<p>The downside is that there is now a lot more to do with loggers, appenders, and layout, and all that for only a small tweak in this case.</p>\n\n<p>If these don't fit the bill please clarify how you decide which prints are to be grouped.</p>\n"}], "owner": {"reputation": 651, "user_id": 1091649, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WbI7o.png?s=128&g=1", "display_name": "cmhughes", "link": "https://stackoverflow.com/users/1091649/cmhughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 46309392, "answer_count": 1, "score": 3, "last_activity_date": 1506458590, "creation_date": 1505642777, "question_id": 46262844, "link": "https://stackoverflow.com/questions/46262844/log4perl-grouping-messages", "title": "log4perl: grouping messages", "body": "<p>I'm using <code>log4perl</code> to log messages from a <code>perl</code> script. With <code>mwe.pl</code> as below, then I receive the following (desired) output in <code>test.log</code></p>\n\n<pre><code>INFO: some information\n      more information\n</code></pre>\n\n<p>My current implementation uses:</p>\n\n<pre><code>my $logmessage = \"some information\\n\";\n$logmessage .= \"more information\";\n$logger-&gt;info($logmessage);\n</code></pre>\n\n<p>Notice in particular that I have  specified the line break manually using <code>\\n</code>, which I'd like to avoid. </p>\n\n<p>Is there a way that I can achieve my desired output (<code>test.log</code>), without having to scaffold my logging input?</p>\n\n<h1><code>mwe.pl</code></h1>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Log::Log4perl qw(get_logger :levels);\n\nmy $logger = get_logger();\n$logger-&gt;level($INFO);\n\nmy $layout = Log::Log4perl::Layout::PatternLayout-&gt;new(\"%p: %m{indent}%n\");\nmy $appender = Log::Log4perl::Appender-&gt;new(\n    \"Log::Dispatch::File\",\n    filename =&gt; \"test.log\",\n    mode     =&gt; \"write\",\n);\n\n$appender-&gt;layout($layout);\n$logger-&gt;add_appender($appender);\n\nmy $logmessage = \"some information\\n\";\n$logmessage .= \"more information\";\n$logger-&gt;info($logmessage);\n\nexit(0);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505595549, "post_id": 46258248, "comment_id": 79480331, "body": "<code>$data{&#39;First&#39;}</code> is a reference to an array. You want <code>print &quot;@{ $data{&#39;First&#39;} }&quot;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1505596685, "post_id": 46258248, "comment_id": 79480620, "body": "Work through tutorial <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>   and cookbook <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>"}], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 6934607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87af3023c7f62d51b72233eb464ba27e?s=128&d=identicon&r=PG&f=1", "display_name": "Yang Yu", "link": "https://stackoverflow.com/users/6934607/yang-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1505698207, "creation_date": 1505698207, "answer_id": 46270399, "question_id": 46258248, "link": "https://stackoverflow.com/questions/46258248/hash-of-array-in-perl/46270399#46270399", "title": "Hash of array in Perl", "body": "<p>You should use <code>@{}</code> to access a ref of a array:</p>\n\n<pre><code>%HoA=(\n    flintstones =&gt;[\"fred\",\"barney\"],\n);\n\n$HoA{teletubbies}=[\"tinky winky\",\"dipsy\",\"laa-laa\",\"po\"];\n\nfor $family (keys %HoA){\n    print \"$family: @{$HoA{$family}}\\n\";\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>simpsons: homer Marge bart\nteletubbies: tinky winky dipsy laa-laa po\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 2838493, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86388736e34c168fd054c7452f9d7387?s=128&d=identicon&r=PG&f=1", "display_name": "Rgarg", "link": "https://stackoverflow.com/users/2838493/rgarg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505698207, "creation_date": 1505594340, "question_id": 46258248, "link": "https://stackoverflow.com/questions/46258248/hash-of-array-in-perl", "title": "Hash of array in Perl", "body": "<p>I am trying to create a hash of array. How do I access/print the entire array? Here is the code:   </p>\n\n<pre><code> my %data;    \n my @row = (\"My\", \"Name\", \"is\", \"Anthony\", \"Gonzalves\");\n print \"@row\";\n $data{'First'} = \\@row;\n print \"@data{'First'}\"; \n</code></pre>\n\n<p>The output of the above code is:\nMy Name is Anthony GonzalvesARRAY(0x7fa1a5831dc8).</p>\n"}, {"tags": ["perl", "findandmodify"], "comments": [{"owner": {"reputation": 319, "user_id": 8263154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a95488587a93c3c1863a022a4bd33a51?s=128&d=identicon&r=PG&f=1", "display_name": "ilux", "link": "https://stackoverflow.com/users/8263154/ilux"}, "edited": false, "score": 0, "creation_date": 1505590947, "post_id": 46257616, "comment_id": 79479073, "body": "What type of your text file? If it&#39;s XLM - you should use XML::Simple to get id value and replace it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 319, "user_id": 8263154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a95488587a93c3c1863a022a4bd33a51?s=128&d=identicon&r=PG&f=1", "display_name": "ilux", "link": "https://stackoverflow.com/users/8263154/ilux"}, "edited": false, "score": 1, "creation_date": 1505591176, "post_id": 46257616, "comment_id": 79479136, "body": "@ilux Re: &quot;<i>you should use XML::Simple</i>&quot;. The <code>XML::Simple</code> has been deprecated and even its own docs recommend against its use, for many reasons.  It had its place and was important a long time ago but it shouldn&#39;t be used nowadays.  Standards are &#39;XML::LibXML` and <code>XML::Twig</code>."}, {"owner": {"reputation": 147, "user_id": 1420482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df2559b26ccc3cfafea0a8172a44bbaf?s=128&d=identicon&r=PG", "display_name": "user1420482", "link": "https://stackoverflow.com/users/1420482/user1420482"}, "reply_to_user": {"reputation": 319, "user_id": 8263154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a95488587a93c3c1863a022a4bd33a51?s=128&d=identicon&r=PG&f=1", "display_name": "ilux", "link": "https://stackoverflow.com/users/8263154/ilux"}, "edited": false, "score": 0, "creation_date": 1505592017, "post_id": 46257616, "comment_id": 79479368, "body": "Thank @ilux Re, XML::LibXML or XML::Twig are the solution."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1553242724, "last_edit_date": 1553242724, "creation_date": 1505592580, "answer_id": 46258037, "question_id": 46257616, "link": "https://stackoverflow.com/questions/46257616/perl-replace-strings-within-specific-blocks-in-a-file/46258037#46258037", "title": "Perl replace strings within specific blocks in a file", "body": "<p>If this indeed has an XML-like structure as it appears, it should be processed using modules for that, either <a href=\"http://search.cpan.org/dist/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\">XML::LibXML</a> or <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow noreferrer\">XML::Twig</a>.  </p>\n\n<p>But this task as shown is easily done in an elementary way as well </p>\n\n<pre><code>perl -0777 -wpE'\n    BEGIN { $cnt = 0 };\n    s/&lt;g\\nid=\"g\\K(.*?)\"/q(g).(++$cnt).q(\")/eg;\n' input.txt\n</code></pre>\n\n<p>which expects the file-format to be exactly as shown.  It reads the whole file into a string, by <code>-0777</code>, what isn't prettiest and may be unsuitable for very large files.</p>\n\n<p>Another way is to set the record separator to <code>&lt;g</code>, so every \"line\" is the block to process</p>\n\n<pre><code>perl -wpE'\n    BEGIN { local $/ = \"&lt;g\"; $cnt = 0 }; \n    s/id=\"g\\K(.*?)\"/q(g).++$cnt.q(\")/eg; \n' input.txt\n</code></pre>\n\n<p>where now the regex is free to seek precisely <code>id=\"...\"</code> and we can process line-by-line.</p>\n\n<p>These both print the expected output.  They are in one-liners for easier testing, I suggest transferring to a script.  </p>\n"}], "owner": {"reputation": 147, "user_id": 1420482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df2559b26ccc3cfafea0a8172a44bbaf?s=128&d=identicon&r=PG", "display_name": "user1420482", "link": "https://stackoverflow.com/users/1420482/user1420482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 46258037, "answer_count": 1, "score": 0, "last_activity_date": 1553242724, "creation_date": 1505589599, "last_edit_date": 1506057489, "question_id": 46257616, "link": "https://stackoverflow.com/questions/46257616/perl-replace-strings-within-specific-blocks-in-a-file", "title": "Perl replace strings within specific blocks in a file", "body": "<p>hi I am trying to replace strings in a file, test.txt with strings like these :</p>\n\n<pre><code>  &lt;g\n   id=\"g16526\"&gt;\n  &lt;g\n\n  &lt;g\n   id=\"gnnnnn\"&gt;\n  &lt;g\n</code></pre>\n\n<p>and turn them into</p>\n\n<pre><code>  &lt;g\n   id=\"gg1\"&gt;\n  &lt;g\n   ...\n  &lt;g\n   id=\"ggn\"&gt;\n  &lt;g\n</code></pre>\n\n<p>using this perl script</p>\n\n<pre><code>    #!C:/Strawberry/perl\n    open(FILE, \"&lt;test.txt\") || die \"File not found\";\n    my @lines = &lt;FILE&gt;;\n    close(FILE);\n    my $string = '&lt;g\n    id=';\n    my $string2 = '&lt;g\n    &lt;g'; \n    my $anything = \".*\";\n\n    my $replace = 'gg';\n    my @newlines;\n    my $counter = 1;\n\n    foreach(@lines) {\n      $_ =~ s/\\Qstring$anything\\Q$string2/$string$replace$string2$counter/g;\n      $counter++;\n      push(@newlines,$_);\n    }\n\n    open(FILE, \"&gt;test.txt\") || die \"File not found\";\n    print FILE @newlines;\n    close(FILE);\n</code></pre>\n\n<p>but it doesnt work, any suggestions appreciated</p>\n"}, {"tags": ["regex", "bash", "perl", "absolute-path"], "answers": [{"tags": [], "owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "is_accepted": true, "score": 3, "last_activity_date": 1505593765, "creation_date": 1505593765, "answer_id": 46258179, "question_id": 46257427, "link": "https://stackoverflow.com/questions/46257427/bash-perl-script-to-convert-relative-paths-to-absolute-paths/46258179#46258179", "title": "Bash &amp; Perl script to convert relative paths to absolute paths", "body": "<p>Why the 2 scripts?  That's inefficient.</p>\n\n<p>Perl is perfectly capable of retrieving the list of files and has modules which simplifies that process as well as modules to parse and alter the paths.</p>\n\n<p><a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow noreferrer\">File::Find - Traverse a directory tree.</a></p>\n\n<p><a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule - Alternative interface to File::Find</a></p>\n\n<p><a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename - Parse file paths into directory, filename and suffix.</a></p>\n\n<p><a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec - portably perform operations on file names</a></p>\n"}], "owner": {"reputation": 81, "user_id": 7920994, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/67067d097f34643c5be6982ddefcc9e0?s=128&d=identicon&r=PG&f=1", "display_name": "Foobar-naut", "link": "https://stackoverflow.com/users/7920994/foobar-naut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 46258179, "answer_count": 1, "score": 0, "last_activity_date": 1505593765, "creation_date": 1505588315, "question_id": 46257427, "link": "https://stackoverflow.com/questions/46257427/bash-perl-script-to-convert-relative-paths-to-absolute-paths", "title": "Bash &amp; Perl script to convert relative paths to absolute paths", "body": "<p>I have a top level dir path and I want to convert all the relative paths to absolute paths existing in all files inside this directory recursively.\ne.g. I have this dir structure:</p>\n\n<pre><code>$ tree\n.\n|-- DIR\n|   |-- inner_level.ext1\n|   `-- inner_level.ext2\n|-- top_level.ext1\n`-- top_level.ext2\n</code></pre>\n\n<p>Content of <code>top_level.ext1</code>:</p>\n\n<pre><code>../../a/b/c/filename_1.txt\n../../a/d/e/filename_2.txt\n</code></pre>\n\n<p>Assume the top level dir path is <code>/this/is/the/abs/dir/path/</code></p>\n\n<p>Want to convert the content of <code>top_level.ext1</code> to:</p>\n\n<pre><code>/this/is/the/abs/a/b/c/filename_1.txt\n/this/is/the/abs/a/d/e/filename_2.txt\n</code></pre>\n\n<p>Content of <code>top_level.ext2</code>:</p>\n\n<pre><code>cc_include+=-I../../util1/src/module1/moduleController -I../../util/src/module1/module2Controller;\ncc_include+=-I../../util2/src/module2/moduleUtility;\n</code></pre>\n\n<p>Want to convert the content of <code>top_level.ext2</code> to:</p>\n\n<pre><code>cc_include+=-I/this/is/the/abs/util1/src/module1/moduleController -I/this/is/the/abs/util/src/module1/module2Controller;\ncc_include+=-I/this/is/the/abs/util2/src/module2/moduleUtility;\n</code></pre>\n\n<p>Also, want to apply this same conversion over the files inside DIR.</p>\n\n<p>e.g. \nContent of <code>DIR/inner_level.ext1</code>:</p>\n\n<pre><code>../../../a/b/c/filename_1.txt\n../../../a/d/e/filename_2.txt\n</code></pre>\n\n<p>Want to convert the content of <code>DIR/inner_level.ext1</code> to:</p>\n\n<pre><code>/this/is/the/abs/a/b/c/filename_1.txt\n/this/is/the/abs/a/d/e/filename_2.txt\n</code></pre>\n\n<p>Same for the <code>DIR/inner_level.ext2</code> also.</p>\n\n<p>Have written this two scripts. </p>\n\n<p>Conversion of <code>top_level.ext1</code> is working successfully.</p>\n\n<p><code>file_manager.sh</code>:</p>\n\n<pre><code>#!/usr/bin/bash\nfile='resolve_path.pl'\nbasedir='/this/is/the/abs/dir/path'\n\nrun_perl(){\n    echo -e \"\\n File getting modified: $1\"\n    cp $1 tmp.in\n    perl $file \n    mv tmp.out $1\n    rm tmp.in\n}\n\nfind $basedir -type f |while read inputfile\ndo \n    run_perl $inputfile\ndone\n</code></pre>\n\n<p><code>resolve_path.pl</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse 5.010;\nuse Switch;\n\n#******************************************************\n#       Set-up Directory And Input/Output File Names\n#******************************************************\nour $in_file  = glob('tmp.in');\nmy $out_file1 = 'tmp.out';\nprint \"Input file: $in_file\\n\";\n\n#************************************\n#       Local and Global Variables\n#*************************************\nmy $current_path = \"/this/is/the/abs/dir/path\";\nmy $temp_path = $current_path;\n\n#************************************\n#       Open Read and Write File\n#************************************\nopen(READ, $in_file) || die \"cannot open $in_file\";\nopen(WRITE, \"&gt;$out_file1\") || die \"cannot open $out_file1\";\n\n\n#******************************************************\n#       Read The Input [*.out] File Line By Line\n#******************************************************\nwhile (&lt;READ&gt;) {\n    if(/^(\\.\\.\\/){1,}(\\w+\\/)*(\\w+).(\\w+)/){\n      my $file_name = $3;\n        my $file_ext  = $4;\n\n        my @count = ($_ =~ /\\.\\.\\//g);\n        my $cnt = @count;\n\n        my @prev_dir = ($_ =~ /\\w+\\//g);\n        my $prev_dir_cnt = @prev_dir;\n        my $file_prev_dir = join('', @prev_dir);\n\n        $temp_path = $current_path;\n        for(my $i=0; $i&lt;$cnt; $i++){\n            if($temp_path =~m/(\\/.*)\\/\\w+/){\n                $temp_path = $1;\n            }\n        }\n\n        print WRITE \"$temp_path\".\"\\/\".\"$file_prev_dir\".\"$file_name\".\"\\.\".\"$file_ext\".\"\\n\";\n\n    } else {\n        print WRITE \"$_\";\n    }\n}\n</code></pre>\n\n<p>Issues I am facing:</p>\n\n<ol>\n<li><p>No conversion is applied over <code>top_level.ext2</code> &amp; <code>DIR/inner_level.ext2</code>\nas my Perl script is not parsing properly for <code>../</code>es (i.e.\n<code>cc_include+=-I</code> is coming at the beginning). </p></li>\n<li><p>conversion from relative path to absolute path is not working\nproperly for <code>DIR/inner_level.ext1</code> and a wrong path is getting\nappended.</p></li>\n</ol>\n\n<p>It would be helpful if someone can suggest expected changes in my scripts to solve the above said two issues.</p>\n"}, {"tags": ["perl", "http"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1505588615, "post_id": 46257227, "comment_id": 79478391, "body": "<a href=\"https://metacpan.org/pod/URI::QueryParam\" rel=\"nofollow noreferrer\">metacpan.org/pod/URI::QueryParam</a>, <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">metacpan.org/pod/CGI</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1505593693, "last_edit_date": 1505593693, "creation_date": 1505592987, "answer_id": 46258087, "question_id": 46257227, "link": "https://stackoverflow.com/questions/46257227/perl-httprequest-best-way-to-parse-the-query-paramters/46258087#46258087", "title": "Perl HTTP::Request - best way to parse the query-paramters", "body": "<pre><code>use List::Util qw( pairs );   # Version 1.29+\nuse URI        qw( );\n\nmy $uri = URI-&gt;new( $request-&gt;uri );\n\n# If none of the parameters can have multiple values.\n# Usage: my $value = $params{$key};\nmy %params = $uri-&gt;query_form();\n\n# If some of the parameters can have multiple values.\n# Usage: my $value  = $params{$key}[0];\n# Usage: my @values = @{ $params{$key} };\nmy %params;\nfor my $pair ( pairs $uri-&gt;query_form() ) {\n   my ( $key, $value ) = @$pair;\n   push @{ $params{$key} }, $value;\n}\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/perldoc?URI::QueryParam\" rel=\"nofollow noreferrer\">URI::QueryParam</a> adds methods to <code>$uri</code> that appear to be convenient in this situation (<code>query_param</code> and <code>query_form_hash</code>), but are far too error-prone to use.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505671949, "creation_date": 1505587035, "last_edit_date": 1505671949, "question_id": 46257227, "link": "https://stackoverflow.com/questions/46257227/perl-httprequest-best-way-to-parse-the-query-paramters", "title": "Perl HTTP::Request - best way to parse the query-paramters", "body": "<p>I get an object HTTP::Request out of a webserver if a request occurs. I only see GET-query-parameters in the URL or if it is from a POST in the header.</p>\n\n<p>Is there a way HTTP::Request or any other package gives me these parameters in a nice way (e.g. a hash) and I do not need to parse it my myself?</p>\n\n<p>e.g. GET\n<a href=\"http://example.net?a=3&amp;b=jack\" rel=\"nofollow noreferrer\">http://example.net?a=3&amp;b=jack</a></p>\n\n<p>I'd like to access the value of a (= 3) and b (= jack) without parse it manually from the URL or the HTTP-Header (if POST).</p>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Thanks for the good advice about the package URI. It works perfectly for parameters in the URL.</p>\n\n<p>But not for POST where the parameters are in the body. I adapted it for that.</p>\n\n<pre><code>if ($req-&gt;method eq \"POST\")      # $req is HTTP::Request\n{           {\n  my $uri = URI-&gt;new (\"/whatever?\" . $req-&gt;content);  # not very pretty\n  %params = $uri-&gt;query_form ();\n  ...\n</code></pre>\n\n<p>to get the same results. Do you think thats a good idea or is there a better  - more straighter way??</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505576850, "post_id": 46255523, "comment_id": 79474854, "body": "Can&#39;t modify constant item in scalar assignment at jdoodle.pl line 7, near &quot;&quot;/var/home/smoketest/dhcpv6.pl.28709.log&quot;;&quot; Execution of jdoodle.pl aborted due to compilation errors."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505577184, "post_id": 46255523, "comment_id": 79474965, "body": "That&#39;s because I typed the code without testing it and had syntax errors ;)  The variables were missing <code>$</code> symbols.  Should be fixed now"}, {"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505577398, "post_id": 46255523, "comment_id": 79475040, "body": "I tried this : sub potatoex {       my $potato=&quot;Junos: 17.4DCB&quot;;   if($potato = ~/&quot;Junos: 17.4[a-zA-Z0-9_.]*&quot;/) {     return &quot;/var/home/smoketest/dhcpv6.pl.28709.log&quot;;   } } main :  {   my $ex= potatoex();   my $goodge= &quot;Apurva $ex Arnav&quot;;   print $goodge; }"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505577473, "post_id": 46255523, "comment_id": 79475068, "body": "@ApurvaArnav yw, just remember to upvote, select answers, and contribute on SO ;)"}, {"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505577722, "post_id": 46255523, "comment_id": 79475151, "body": "I&#39;m sorry, but this is the first time I am using SO, how to upvote and select answers?"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505578008, "post_id": 46255523, "comment_id": 79475226, "body": "@ApurvaArnav the number next to the answer/question can be upped or downed by a voter and there is a checkmark under that.  Selecting answers to your questions will help you gain more points.  More points will enable more features for you on the site."}, {"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505583046, "post_id": 46255523, "comment_id": 79476705, "body": "I have selected the answer, but whenever I change the number from 0 to 1, it gets changed back to 0"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505587452, "post_id": 46255523, "comment_id": 79478017, "body": "@ApurvaArnav it&#39;s no worries to me, I have enough pts, just good that you know how as you begin to use the site and even help others"}, {"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505653929, "post_id": 46255523, "comment_id": 79491690, "body": "I have one question, if you could help. How to match exact pattern in perl?"}, {"owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505654065, "post_id": 46255523, "comment_id": 79491735, "body": "Suppose I want to choose from &quot;Junos: 17.4-xyz&quot; and &quot;Junos: 16.1-abc&quot; , If it is 17.4, I want associated if clause to be executed , otherwise 16.1 if clause. How to do that?"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "edited": false, "score": 0, "creation_date": 1505659243, "post_id": 46255523, "comment_id": 79493272, "body": "@ApurvaArnav I would first have to get you going through the process.  First have you searched the site and/or google?  If they wouldn&#39;t reveal anything, I would suggest asking a new question.  This is the added benefit of more points for you and more points for others.  It also permits multiple answers, since your question can be solved in multiple ways."}], "tags": [], "owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "is_accepted": true, "score": 1, "last_activity_date": 1505577098, "last_edit_date": 1505577098, "creation_date": 1505575928, "answer_id": 46255523, "question_id": 46255381, "link": "https://stackoverflow.com/questions/46255381/replace-a-variable-as-string-with-results-from-a-subroutine-in-perl/46255523#46255523", "title": "Replace a variable as string with results from a subroutine in perl", "body": "<p>You are <code>print</code>ing from your subroutine instead of <code>return</code>ing the value from it.  Try using <code>return</code> in <code>potatoex</code>.</p>\n\n<pre><code>sub potatoex {    \n  my $potato    = q{Junos: 17.4DCB};\n  my $returnVal = '';\n\n  if( $potato =~ /Junos: 17\\.4[a-zA-Z0-9_.]*/ ) {\n    $returnVal = q{/var/home/smoketest/dhcpv6.pl.28709.log};\n  }\n\n  $returnVal;\n}\n\n{\n  my $ex     = potatoex();\n  my $goodge = qq{Apurva $ex Arnav};\n\n  print $goodge;\n}\n</code></pre>\n\n<p>While you could use <code>return</code> in an <code>if</code> block above (instead of <code>print</code>), I instead decided to use a variable, which will always return either the value you are trying to or an empty string.  You could explicitly state the return <code>return returnVal;</code>, but it isn't required as perl allows implicit returns (make note of this and figure out if it should fit in your best practices or not).</p>\n"}], "owner": {"reputation": 13, "user_id": 8616194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebffa0bf1520b2351c4ba92487e22978?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Arnav", "link": "https://stackoverflow.com/users/8616194/apurva-arnav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 46255523, "answer_count": 1, "score": 1, "last_activity_date": 1505577098, "creation_date": 1505574961, "last_edit_date": 1505575857, "question_id": 46255381, "link": "https://stackoverflow.com/questions/46255381/replace-a-variable-as-string-with-results-from-a-subroutine-in-perl", "title": "Replace a variable as string with results from a subroutine in perl", "body": "<p>I am trying to replace the variable \"ex\" with it's string value(which it gets from subroutine \"potatoex()\" and put it in the definition of another variable \"goodge\",\nnot getting any syntax error but this seems to be not working out.\nPlease help.</p>\n\n<pre><code>sub potatoex {    \n  my $potato=\"Junos: 17.4DCB\";\n  if($potato = ~/\"Junos: 17.4[a-zA-Z0-9_.]*\"/) {\n    print \"/var/home/smoketest/dhcpv6.pl.28709.log\";\n  }\n}\n</code></pre>\n\n<p>main :</p>\n\n<pre><code>{\n  my $ex= potatoex();\n  my $goodge= \"Apurva $ex Arnav\";\n  print $goodge;\n}\n</code></pre>\n\n<p>CURRENT O/P : /var/home/smoketest/dhcpv6.pl.28709.logApurva 1 Arnav</p>\n\n<p>EXPECTED O/P: Apurva /var/home/smoketest/dhcpv6.pl.28709.log Arnav</p>\n\n<p>Thanks,\nApurva</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1505574514, "post_id": 46254693, "comment_id": 79474092, "body": "On <i>Stack Overflow</i> we expect questions to include the code that you can&#39;t get to work. If you haven&#39;t written any code then you are asking in the wrong place."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505579098, "post_id": 46254693, "comment_id": 79475573, "body": "From your code it looks like you&#39;re trying to process XML data. There are special modules for that. I suggest you take a look at <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a>."}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 1, "creation_date": 1505583733, "post_id": 46254693, "comment_id": 79476888, "body": "I suppose you get a better answer when you show (relevant portions of) your XML file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1505600767, "post_id": 46254693, "comment_id": 79481544, "body": "There are some fundamental things wrong in your code. You never open a filehandle <code>INFILE</code>, and you attempt to read from a filename. Please <a href=\"https://stackoverflow.com/posts/46254693/edit\">edit</a> and show your <i>real</i> code."}, {"owner": {"reputation": 342, "user_id": 6242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f23e14013b897e15a7852bec2ec762?s=128&d=identicon&r=PG&f=1", "display_name": "jwal", "link": "https://stackoverflow.com/users/6242321/jwal"}, "edited": false, "score": 0, "creation_date": 1505606246, "post_id": 46254693, "comment_id": 79482486, "body": "Traversing XML files is a little tricky, particularly if you have to handle UTF-16 as well. You should use one of the XML libraries for that. Then you can do XML selections for your files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 342, "user_id": 6242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f23e14013b897e15a7852bec2ec762?s=128&d=identicon&r=PG&f=1", "display_name": "jwal", "link": "https://stackoverflow.com/users/6242321/jwal"}, "edited": false, "score": 1, "creation_date": 1505658714, "post_id": 46254693, "comment_id": 79493100, "body": "@JamieWalton: Where did you get the idea that the OP is using UTF-16? What did I miss?!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1505658875, "post_id": 46254693, "comment_id": 79493150, "body": "@simbabque: <code>INFILE</code> is opened in the statement before the <code>while</code>, and I think <code>&lt;file_Name.txt&gt;</code> is supposed to be a glob."}, {"owner": {"reputation": 342, "user_id": 6242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f23e14013b897e15a7852bec2ec762?s=128&d=identicon&r=PG&f=1", "display_name": "jwal", "link": "https://stackoverflow.com/users/6242321/jwal"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1506106485, "post_id": 46254693, "comment_id": 79702435, "body": "@Borodin, I don&#39;t think you missed anything. I&#39;ve just been caught with it."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1506107635, "post_id": 46289403, "comment_id": 79702979, "body": "<code>while( defined($line=&lt;$infh&gt;) ) { ... }</code> is normally written <code>while( $line = &lt;$infh&gt; ) { ... }</code>"}, {"owner": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1506197297, "post_id": 46289403, "comment_id": 79725838, "body": "@Borodin: this would give the beginner a really bad habit because one day in a different context it won&#39;t work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1506198927, "post_id": 46289403, "comment_id": 79726278, "body": "I disagree. It is extremely rare that I see an implicit <code>defined</code> test for <code>while</code>, yet none of my students have ever had an issue with it in fifteen years. There are a number of other peculiarities in your code: no <code>use warnings</code>; declaration of all your variables at the top of the program; use of <code>die</code> ... unless <code>open</code> instead of the usual idiom <code>open</code> ... <code>or die</code>; and <code>undef $outfh</code> instead of <code>$outfh = undef</code>. I think any one of those is more dangerously misleading than omitting the <code>defined</code> test."}, {"owner": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1506316980, "post_id": 46289403, "comment_id": 79753117, "body": "@Borodin: there&#39;s a million of ways to write in perl (especially in perl) and if mine doesn&#39;t suit you write you own because I am not a freelancer, the only reason I wrote this is to help someone, I have nothing to promote, so put the frustration of your life in a workout e.g. rather than clicking a thumb down button, this just kills volunteering. Or if you do want to use the internet this way at least put your real name and photo."}], "tags": [], "owner": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "is_accepted": false, "score": -1, "last_activity_date": 1505776164, "creation_date": 1505776164, "answer_id": 46289403, "question_id": 46254693, "link": "https://stackoverflow.com/questions/46254693/divide-a-text-file-into-number-of-small-files/46289403#46289403", "title": "Divide a text file into number of small files", "body": "<p>There are many things totally incorrect in your code.</p>\n\n<p>So here's how I would write it:</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Split a large file into files named by the latest &lt;Name&gt;...&lt;/Name&gt; tag read.\n\nuse strict;\n\nmy $infile = $ARGV[0];\nmy $outprefix = $ARGV[1];\n\ndie(\"USAGE: $0 inputfile.xml out-prefix-\") unless $outprefix;\n\nmy $name = \"noname\"; # current name to add to $outprefix\nmy $infh; # input file handle\nmy $outfh; # output file handle\nmy $line; # line being read\n\ndie(\"Cannot open input file \\\"$infile\\\" : $!\")\n    unless open($infh, \"&lt;$infile\");\n\nwhile( defined($line=&lt;$infh&gt;) ){\n\n    if( $line =~ m!^&lt;Name&gt;([^&lt;&gt;]+)&lt;/Name&gt;!i ){\n        $name = lc($1);\n        $name =~ s/[^\\w.]+/-/g;\n        $name =~ s/^-//;\n        $name =~ s/-$//;\n        $name = \"noname\" unless $name;\n\n        # Close output of previous name :\n        if( $outfh ){\n            close($outfh);\n            undef $outfh;\n        }\n    }\n\n    unless( $outfh ){\n        die(\"Cannot open output file \\\"$outprefix$name\\\" : $!\")\n            unless open($outfh, \"&gt;&gt;$outprefix$name\");\n        print(\"Now writing to $outprefix$name ...\\n\");\n    }\n\n    print($outfh $line);\n\n}\n\nclose($outfh) if $outfh;\nclose($infh);\n\nprint(\"DONE.\\n\");\n</code></pre>\n\n<p>Don't forget we don't know the file name before the first  tag so if you want to include something that's before (in other words split earlier) you will have to buffer these lines in a variable before writing them.</p>\n"}], "owner": {"reputation": 11, "user_id": 8514406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6067549fdd22dae58c33bd80c2375892?s=128&d=identicon&r=PG&f=1", "display_name": "jijo", "link": "https://stackoverflow.com/users/8514406/jijo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505776164, "creation_date": 1505570332, "last_edit_date": 1505597862, "question_id": 46254693, "link": "https://stackoverflow.com/questions/46254693/divide-a-text-file-into-number-of-small-files", "title": "Divide a text file into number of small files", "body": "<p>I have to break a text file\u2014approx 600MB\u2014to many smaller files, each with a unique name.</p>\n\n<p>In the main file I have a tag (say <code>name</code>) which is repeated throughout the file. I have to make sets of six of those tags and place them in smaller text files.</p>\n\n<p>Code: I am not able to generate multiple test files as my code is not proper.</p>\n\n<pre><code>$flag  = 0;\n$flag1 = 0;\n\nopen( OUTPUT, \"&gt; Break$flag1.txt\" ) or die \"error open output file: $!\\n\";\n\nforeach $iis_file ( &lt;file_Name.txt&gt; ) {\n\n    #printf OUTPUT \"Processing file: %s\\n\", $iis_file;\n\n    open( INFILE, $iis_file ) or die \"Can't open $file: $!\";\n\n    while ( &lt;INFILE&gt; ) {\n\n        if ( /^&lt;Name(.*)&lt;\\/Name&gt;/i ) {\n\n            $flag = $flag + 1;\n\n            if ( $flag &lt;= 6 ) {\n                printf OUTPUT \"&lt;Name$1&lt;\\/Name&gt;\\n&lt;\\/Name&gt;\\n\";\n            }\n        }\n    }\n\n    close INFILE;\n}\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1505560176, "post_id": 46252782, "comment_id": 79469938, "body": "if you do not mind; what is your objective of running this script?"}, {"owner": {"reputation": 289, "user_id": 6146321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b0793062cc80d0c3109313bef44dc9?s=128&d=identicon&r=PG&f=1", "display_name": "fd0", "link": "https://stackoverflow.com/users/6146321/fd0"}, "edited": false, "score": 0, "creation_date": 1505560855, "post_id": 46252782, "comment_id": 79470144, "body": "Likely, <code>mixvl.pl</code> is not in <code>cron</code>&#39;s  PATH variable which usually is <code>&#47;bin:&#47;usr&#47;bin</code>."}, {"owner": {"reputation": 29, "user_id": 4240121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000286432811/picture?type=large", "display_name": "Vijay Pavan Kumar Kudupudi", "link": "https://stackoverflow.com/users/4240121/vijay-pavan-kumar-kudupudi"}, "edited": false, "score": 0, "creation_date": 1505567015, "post_id": 46252782, "comment_id": 79471866, "body": "we are using above script to convert voicelogs  to mp3 ."}, {"owner": {"reputation": 29, "user_id": 4240121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000286432811/picture?type=large", "display_name": "Vijay Pavan Kumar Kudupudi", "link": "https://stackoverflow.com/users/4240121/vijay-pavan-kumar-kudupudi"}, "edited": false, "score": 0, "creation_date": 1505567407, "post_id": 46252782, "comment_id": 79471997, "body": "we are using above script to convert voicelogs  to mp3 .syntax  to convert raw to wav mixvl.pl file1.raw file2.raw file.wav"}, {"owner": {"reputation": 29, "user_id": 4240121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000286432811/picture?type=large", "display_name": "Vijay Pavan Kumar Kudupudi", "link": "https://stackoverflow.com/users/4240121/vijay-pavan-kumar-kudupudi"}, "edited": false, "score": 0, "creation_date": 1505567460, "post_id": 46252782, "comment_id": 79472008, "body": "then how to set the perl path for cron"}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 0, "last_activity_date": 1505568516, "creation_date": 1505568516, "answer_id": 46254436, "question_id": 46252782, "link": "https://stackoverflow.com/questions/46252782/shell-and-perl-in-same-file/46254436#46254436", "title": "shell and perl in same file", "body": "<p>Several problems with your code:</p>\n\n<ul>\n<li><code>status0</code> variable is never set: use <code>$?</code></li>\n<li>you have a couple of <code>fi</code> keywords with no <code>if</code> statement</li>\n<li><a href=\"http://mywiki.wooledge.org/ParsingLs\" rel=\"nofollow noreferrer\">Don't parse <code>ls</code></a></li>\n<li>you call the same command pipeline several times. Call it once: that's what variables are for</li>\n<li>in fact, you don't need awk at all. Use the shell <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion\" rel=\"nofollow noreferrer\">parameter expansion</a></li>\n<li>cron has a different environment from your shell. Most likely <code>mixvl.pl</code> cannot be found in cron's minimal PATH. Specify the path explicitly.</li>\n</ul>\n\n<p>Try this:</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>rsync -avz /dacx /storage/mp3/\nif [ $? -eq 0 ]; then\n    for f in /storage/mp3/*\n    do\n        fileroot=\"${f%-in.*}\"\n        /path/to/mixvl.pl \"$f\" \"$fileroot\"-out.talaw \"$fileroot\"\n        lame -q0 -b8 \"$fileroot\".wav \"$fileroot\".mp3\n        rm \"$fileroot\".wav \"$fileroot\"-out.talaw \"$f\"\n    done\n fi\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4240121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000286432811/picture?type=large", "display_name": "Vijay Pavan Kumar Kudupudi", "link": "https://stackoverflow.com/users/4240121/vijay-pavan-kumar-kudupudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 46254436, "answer_count": 1, "score": 0, "last_activity_date": 1505568516, "creation_date": 1505557149, "question_id": 46252782, "link": "https://stackoverflow.com/questions/46252782/shell-and-perl-in-same-file", "title": "shell and perl in same file", "body": "<p>Below code i written in shell script but it has some perl command </p>\n\n<p>while i am executing below script manually from form terminal i am able to execute complete code</p>\n\n<p>but while i am using crontab i am able to execute all the line except below code </p>\n\n<pre><code>mixvl.pl $f `ls $f | awk -F \"-in.\" '{print $1}'`-out.talaw `ls $f | awk -F \"-in.\" '{print $1}'`\n</code></pre>\n\n<hr>\n\n<pre><code> #!/bin/bash\n rsync -avz /dacx /storage/mp3/\n if [ $status0 -eq 0 ];then\n    FILES=/storage/mp3/*\n    for f in $FILES\n    do\n           mixvl.pl $f `ls $f | awk -F \"-in.\" '{print $1}'`-out.talaw `ls $f | awk -F \"-in.\" '{print $1}'`\n           lame -q0 -b8 `ls $f | awk -F \"-in.\" '{print $1}'`.wav `ls $f | awk -F \"-in.\" '{print $1}'`.mp3\n           rm -rf `ls $f | awk -F \"-in.\" '{print $1}'`.wav\n            rm -rf `ls $f | awk -F \"-in.\" '{print $1}'`-out.talaw\n            rm -rf $f\n          fi\n       fi\n    done\n fi\n</code></pre>\n\n<p>can you please help me to execute both perl and shell in a file </p>\n"}, {"tags": ["linux", "perl", "ubuntu-server", "webmin", "webmin-module-development"], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 4519500, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/FRdEr.jpg?s=128&g=1", "display_name": "Sergiu", "link": "https://stackoverflow.com/users/4519500/sergiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1505559854, "creation_date": 1505559854, "answer_id": 46253166, "question_id": 46251754, "link": "https://stackoverflow.com/questions/46251754/error-while-try-to-create-a-new-user-and-updating-the-user-in-web-min/46253166#46253166", "title": "Error while try to create a new user and updating the user in web min", "body": "<p>Have you tried restarting Webmin?</p>\n"}], "owner": {"reputation": 759, "user_id": 5751745, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8911a546b25d574dc7f67f41c1840ca9?s=128&d=identicon&r=PG&f=1", "display_name": "Nithya", "link": "https://stackoverflow.com/users/5751745/nithya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505559854, "creation_date": 1505549831, "last_edit_date": 1505551917, "question_id": 46251754, "link": "https://stackoverflow.com/questions/46251754/error-while-try-to-create-a-new-user-and-updating-the-user-in-web-min", "title": "Error while try to create a new user and updating the user in web min", "body": "<p>I don't know what i did wrong during installation.. I am using ubuntu server 17.04. I can't able to create new user and edit the user. Please help me to understand i am doing wrong</p>\n\n<p>Error:</p>\n\n<p>Can't locate timelocal.pl in @INC (@INC contains: /usr/share/webmin /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base /usr/share/webmin/ . ..) at /usr/share/webmin/useradmin/edit_user.cgi line 6.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DkVF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DkVF6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1505547102, "post_id": 46251346, "comment_id": 79466377, "body": "Maybe <code>&#47;^(?:(\\w)(?!\\1).)+\\1?$&#47;</code>? Not sure you need the <code>\\1?</code> at the end: you added it to your pattern to allow an optional occurrence of the first word char at the end of the string, right? If &quot;any character&quot; means a word char, the <code>.</code> should be replaced with <code>\\w</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1505547116, "post_id": 46251346, "comment_id": 79466379, "body": "It is pretty unclear what the rules are \u2014 and why the second is not what you want.  Please explain more clearly, maybe with the help of a couple more examples (positive and negative) of what is wanted.  Would <code>dcdcdc</code> be OK? Would <code>dccc</code> be OK?  Would <code>cdefg</code> be OK?"}, {"owner": {"reputation": 50800, "user_id": 1765658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcfe3194de7a9e1a1cdaa81933b307?s=128&d=identicon&r=PG", "display_name": "F. Hauri", "link": "https://stackoverflow.com/users/1765658/f-hauri"}, "edited": false, "score": 0, "creation_date": 1505548035, "post_id": 46251346, "comment_id": 79466603, "body": "Nice regex! <a href=\"https://xkcd.com/1313/\" rel=\"nofollow noreferrer\">xkcd.com/1313</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 0, "last_activity_date": 1505547173, "creation_date": 1505547173, "answer_id": 46251404, "question_id": 46251346, "link": "https://stackoverflow.com/questions/46251346/how-to-match-this-string-afa-but-not-bebeeeb-in-perl/46251404#46251404", "title": "How to match this string &#39;afa&#39; but not &#39;bebeeeb&#39; in Perl?", "body": "<p>You can try this:</p>\n\n<pre><code>^(?:(\\w)(?!\\1))+$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/CEuO4K/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1505595964, "last_edit_date": 1505595964, "creation_date": 1505595662, "answer_id": 46258393, "question_id": 46251346, "link": "https://stackoverflow.com/questions/46251346/how-to-match-this-string-afa-but-not-bebeeeb-in-perl/46258393#46258393", "title": "How to match this string &#39;afa&#39; but not &#39;bebeeeb&#39; in Perl?", "body": "<p>Easier to check for the opposite.</p>\n\n<pre><code># Doesn't contain repeated word characters.\n$s !~ /(\\w)\\1/\n</code></pre>\n\n<p>Otherwise, you have to check <em>at every position</em>. (You were checking <em>at any position</em>.)</p>\n\n<pre><code># Every character is a non-word character or a non-repeated word character\n$s =~ /^(?:\\W|(\\w)(?!\\1))*\\z/\n</code></pre>\n\n<p>If the input can only contain word characters, the above simplifies to</p>\n\n<pre><code># Every character is a non-repeated word character\n$s =~ /^(?:(\\w)(?!\\1))*\\z/\n</code></pre>\n\n<p>or even</p>\n\n<pre><code># Every character is a non-repeated character\n$s =~ /^(?:(.)(?!\\1))*\\z/s\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505595964, "creation_date": 1505546654, "last_edit_date": 1505546997, "question_id": 46251346, "link": "https://stackoverflow.com/questions/46251346/how-to-match-this-string-afa-but-not-bebeeeb-in-perl", "title": "How to match this string &#39;afa&#39; but not &#39;bebeeeb&#39; in Perl?", "body": "<pre><code>$s1='afa';\n$s2='bebeeeb';\n\n$s1=~/((\\w)(?!\\2))+\\2?/;\n</code></pre>\n\n<p>This regex matches both of the strings.\nI want to match only the first string. (The first character followed by any character but not the first character. The captured two characters can be repeated any number of times.)</p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array", "hash", "dereference"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505522780, "post_id": 46248808, "comment_id": 79462358, "body": "Tip: <code>my %hash=();</code> can be simplified to <code>my %hash;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505522796, "post_id": 46248808, "comment_id": 79462362, "body": "Tip: You never use <code>$hash_ref</code>."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505549202, "post_id": 46248884, "comment_id": 79466885, "body": "Thank so much, I just use an example to express my question which has something wrong in the logic...... But I still want to use 2D array in my hash. Maybe just ignore the North and South. Sorry for the confusion.@bipll"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505575148, "post_id": 46248884, "comment_id": 79474335, "body": "Do you want to splice array of arrays into a single string? Something like <code>join &#39; &#39;, map join(&#39; &#39;, @$_), @$array</code>?"}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1505520841, "creation_date": 1505520841, "answer_id": 46248884, "question_id": 46248808, "link": "https://stackoverflow.com/questions/46248808/perl-dereference-array-of-multidimensional-hashes/46248884#46248884", "title": "Perl: Dereference array of Multidimensional hashes", "body": "<p>First of all, <code>keys %hash</code> is a singleton list <code>('continent')</code> in your code. May I suppose you really wanted continent names as keys? Then simply write it as</p>\n\n<pre><code>my %hash = (America =&gt; [...], Asia =&gt; [...]);\n</code></pre>\n\n<p>Next, 'North' and 'South' look more like regions inside continents, you've probably missed a layer in design description.</p>\n\n<p>Which suggests something like:</p>\n\n<pre><code>my %hash = (America =&gt; {North =&gt; ['Canada', 'USA'], South =&gt; ['Peru', 'Brazil']});\nfor my $continent (keys %hash) {\n    for my $region (keys %{$hash{$continent}}) {\n        print \"$continent, $region, @{$hash{$continent}{$region}}\\n\"\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>America, North, Canada USA\nAmerica, South, Peru Brazil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505548662, "post_id": 46249033, "comment_id": 79466743, "body": "So in the second and the third line, you iterate all the continent? I am not quite understand your solution although it works pretty good, Could you please explain <b>$hash{continent}</b>, <b>(keys(%$by_continent))</b>, <b>@$continent</b>? Thank you so much."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "edited": false, "score": 0, "creation_date": 1505753879, "post_id": 46249033, "comment_id": 79532158, "body": "It returns the keys in the hash referenced by <code>$by_continent</code> (and by <code>$hash{continent}</code>)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1505522683, "creation_date": 1505522683, "answer_id": 46249033, "question_id": 46248808, "link": "https://stackoverflow.com/questions/46248808/perl-dereference-array-of-multidimensional-hashes/46249033#46249033", "title": "Perl: Dereference array of Multidimensional hashes", "body": "<p>If you have a choice, you should change your data structure's design to what @bipll <a href=\"https://stackoverflow.com/a/46248884/589924\">suggested</a>. Your existing data structure's design requires more complex code than necessary. If you can't, read on.</p>\n\n<hr>\n\n<p>The first loop is incorrect.</p>\n\n<p>This doesn't iterate over the continent names:</p>\n\n<pre><code>foreach my $continent (keys %hash) {\n</code></pre>\n\n<p>This does:</p>\n\n<pre><code>foreach my $continent (keys %{ $hash{continent} }) {\n</code></pre>\n\n<hr>\n\n<p>The second loop is incorrect.</p>\n\n<p><code>$hash{$continent}</code> now <code>$hash{continent}{$continent}</code> is a reference to an array, not a reference to a hash.</p>\n\n<hr>\n\n<p>Fixed:</p>\n\n<pre><code>my $by_continent = $hash{continent};\nfor my $continent_name (keys(%$by_continent)) {\n    my $continent = $by_continent-&gt;{$continent_name};\n    for my $region (@$continent) {\n        my $region_name = $region-&gt;[0];\n        my @country_names = @{$region}[0..$#$region];\n        print(\"$continent_name, $region_name: \", join(', ', @country_names), \"\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 46249033, "answer_count": 2, "score": 0, "last_activity_date": 1505522683, "creation_date": 1505519985, "question_id": 46248808, "link": "https://stackoverflow.com/questions/46248808/perl-dereference-array-of-multidimensional-hashes", "title": "Perl: Dereference array of Multidimensional hashes", "body": "<p>My overall structure has three layers:</p>\n\n<p>The first layer is a hash: <strong>Key</strong>:Continent  <strong>Value</strong>: Country</p>\n\n<p>The second layer is a hash: <strong>Key</strong>: Country  <strong>Value</strong>: 2D array with specific countries</p>\n\n<p>The Third layer is a <strong>2D array</strong></p>\n\n<p>So far I have my code below:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\nmy %hash=(); #initialize a hash \nmy $hash_ref = \\%hash;\n\n$hash{continent} = { \n    America =&gt; [\n    ['North', 'Canada', 'USA'],\n    ['South', 'Peru', 'Brazil'],\n    ],\n    Asia =&gt; [\n    ['East', 'Japan', 'China'],\n    ['Sounth', 'India','Bangladesh'],\n    ],\n}; \n\nforeach my $continent (keys %hash) {\n    foreach my $country (keys %{ $hash{$continent} }) {\n        print \"$continent, $country : @{$hash{$continent}{$country}}\\n\";\n    }\n}\n\n#print Dumper \\%hash;\n</code></pre>\n\n<p>This is the output: </p>\n\n<p>continent, Asia : ARRAY(0x7fb159824890) ARRAY(0x7fb15a004628)</p>\n\n<p>continent, America : ARRAY(0x7fb159803ee8) ARRAY(0x7fb1598240e0)</p>\n\n<p>My question is:\nHow can I deference the 2D-array in the hash of the hash rather than get their reference??</p>\n"}, {"tags": ["perl", "smtp", "non-ascii-characters"], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 674965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb15e08f8b72f712e0cca80778669f4?s=128&d=identicon&r=PG", "display_name": "f055", "link": "https://stackoverflow.com/users/674965/f055"}, "edited": false, "score": 0, "creation_date": 1533753008, "post_id": 46251617, "comment_id": 90466668, "body": "Thanks a lot, you just fixed my 2-hours-long problem and explained it fully! &lt;slow clap&gt;"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1505551663, "last_edit_date": 1505551663, "creation_date": 1505548728, "answer_id": 46251617, "question_id": 46248458, "link": "https://stackoverflow.com/questions/46248458/perl-smtp-cant-send-email-with-non-ascii-characters-in-body/46251617#46251617", "title": "Perl SMTP: can&#39;t send email with non-ascii characters in body", "body": "<p>TL;TR: the fix is simple but the problem itself is complex. To fix the issue add:</p>\n\n<pre><code>$email = Encode::encode('utf-8',$email-&gt;as_string)\n</code></pre>\n\n<p>before giving the mail to <code>sendmail(...)</code>. But note the warning at the end of this answer about possible problems when sending 8 bit data like this inside a mail in the first place.</p>\n\n<hr>\n\n<p>To actually understand the problem and the fix one has to look deeper into the handling of characters vs. octets in sockets in Perl: </p>\n\n<ul>\n<li><code>Email::Sender::Transport::SMTP</code> uses <code>Net::SMTP</code> which itself uses the <code>syswrite</code> method of the  underlying <code>IO::Socket::SSL</code> or <code>IO::Socket::IP</code> (or <code>IO::Socket::INET</code>) socket, depending if SSL was used or not. </li>\n<li><code>syswrite</code> expects octets and it expects the number of octets written to the socket. </li>\n<li>But, the mail you construct with <code>Email::Simple</code> returns not octets but a string with the UTF8 flag set. In this string the number of characters is different from the number of octets because the Russian <code>\u0442\u0435\u043a\u0441\u0442</code> is treated as 5 characters while it is 10 octets when converted with the UTF-8.</li>\n<li><code>Email::Sender::Transport::SMTP</code> just forwards the UTF8 string of the email to <code>Net::SMTP</code> which uses it inside a <code>syswrite</code>. The length is computed using <code>length</code> which gives the number of characters which is different from the number of octets in this case. But on the socket site it will take the octets and not the characters out of the string and will treat the given length as number of octets.</li>\n<li>Because it will treat the given length as octets and not characters it will ultimately send less data to the server as expected by the upper layers of the program. </li>\n<li>This way the end-of-mail marker (line with single dot) gets not send and thus the server is waiting for the client to send more data while the client is not aware of more data to send. </li>\n</ul>\n\n<p>As an example take a mail which consists only of two Russian characters '\u0438\u0439'. With line ends and the end-of-mail marker it consists of 7 characters:</p>\n\n<pre><code>\u0438\u0439\\r\\n.\\r\\n\n</code></pre>\n\n<p>But, these 7 characters are actually 9 octets because the first 2 characters are two octets each</p>\n\n<pre><code>\u0438       \u0439       \\r \\n   .   \\r  \\n\nd0 b8   d0 b9   0d  0a  2e  0d  0a  \n</code></pre>\n\n<p>Now, a <code>syswrite($fd,\"\u0438\u0439\\r\\n.\\r\\n\",7)</code> will only write the first 7 octets of the 7 character but 9 octets long string:</p>\n\n<pre><code>\u0438       \u0439       \\r \\n   . \nd0 b8   d0 b9   0d  0a  2e\n</code></pre>\n\n<p>This means that the end-of-mail marker is incomplete. And this means that the mail server will wait for more data while the mail client is not aware of any more data it needs to sent. Which essentially causes the application to hang.</p>\n\n<p>Now, who is too blame for this?</p>\n\n<p>One could argue that IO::Socket::SSL::syswrite should deal with UTF8 data in a sane way and this what was requested but in <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=98372\" rel=\"nofollow noreferrer\">RT#98732</a>. But, the documentation for <code>syswrite</code> in IO::Socket::SSL clearly says that it works on bytes. And since it is practically impossible to create a sane character based behavior when considering non-blocking sockets this bug was rejected. Also non-SSL sockets will have problems with UTF8 strings too: if you would not use SSL in the first place the program would not hang but crash with <code>Wide character in syswrite ...</code> instead.</p>\n\n<p>Next layer up would be to expect <code>Net::SMTP</code> to properly handle such UTF8 strings. Only, it is explicitly said in the <a href=\"https://metacpan.org/pod/Net::SMTP#data-(-[-DATA-]-)\" rel=\"nofollow noreferrer\">documentation of Net::SMTP::data</a>: </p>\n\n<blockquote>\n  <p>DATA may be a reference to a list or a list and <strong>must be encoded by the caller to octets</strong> of whatever encoding is required, e.g. by using the Encode module's encode() function.</p>\n</blockquote>\n\n<p>Now one could argue that either <code>Email::Transport</code> should handle UTF8 strings properly or that <code>Email::Simple::as_string</code> should not return a UTF8 string in the first place. </p>\n\n<p>But one could go even another layer up: to the developer itself. Mail is traditionally ASCII only and sending non-ASCII characters inside a mail is a bad idea since it works only reliably with mail servers having the 8BITMIME extension. If mail servers are involved which don't support this extension the results are unpredictable, i.e. mail can be transformed (which might break signatures), can be changed to be unreadable or could be lost somewhere. Thus better use a more complex module like <code>Email::MIME</code> and set an appropriate content transfer encoding.</p>\n"}], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "accepted_answer_id": 46251617, "answer_count": 1, "score": 1, "last_activity_date": 1505551663, "creation_date": 1505516569, "question_id": 46248458, "link": "https://stackoverflow.com/questions/46248458/perl-smtp-cant-send-email-with-non-ascii-characters-in-body", "title": "Perl SMTP: can&#39;t send email with non-ascii characters in body", "body": "<p>Code, sending email (working good):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;\nuse strict;\nuse warnings;\n\nuse Email::Sender::Simple qw(sendmail);\nuse Email::Sender::Transport::SMTP ();\nuse Email::Simple ();\nuse open ':std', ':encoding(UTF-8)';\n\nsub send_email\n{\n    my $email_from = shift;\n    my $email_to = shift;\n    my $subject = shift;\n    my $message = shift;\n\n    my $smtpserver = 'smtp.gmail.com';\n    my $smtpport = 465;\n    my $smtpuser   = 'user@gmail.com';\n    my $password = 'secret';\n\n    my $transport = Email::Sender::Transport::SMTP-&gt;new({\n        host =&gt; $smtpserver,\n        port =&gt; $smtpport,\n        sasl_username =&gt; $email_from,\n        sasl_password =&gt; $password,\n        debug    =&gt; 1,\n        ssl =&gt; 1,\n    });\n\n    my $email = Email::Simple-&gt;create(\n        header =&gt; [\n            To      =&gt; $email_to,\n            From    =&gt; $email_from,\n            Subject =&gt; $subject,\n        ],\n        body =&gt; $message,\n    );\n\n    $email-&gt;header_set( 'Content-Type' =&gt; 'text/html' );\n    $email-&gt;header_set( 'charset' =&gt; 'UTF-8' );\n    sendmail($email, { transport =&gt; $transport });\n}\n\nsend_email('user@gmail.com', 'user@gmail.com', 'Hello', 'test email');\n</code></pre>\n\n<p>As soon as I add non-ascii characters to the body:</p>\n\n<pre><code>send_email('user@gmail.com', 'user@gmail.com', 'Hello', 'test email. \u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442');\n</code></pre>\n\n<p>it hangs with the last message in debug output:</p>\n\n<pre><code>Net::SMTP::_SSL=GLOB(0x8d41fa0)&gt;&gt;&gt; charset: UTF-8\nNet::SMTP::_SSL=GLOB(0x8d41fa0)&gt;&gt;&gt; \nNet::SMTP::_SSL=GLOB(0x8d41fa0)&gt;&gt;&gt; test email. \u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442\nNet::SMTP::_SSL=GLOB(0x8d41fa0)&gt;&gt;&gt; .\n</code></pre>\n\n<p>How to fix?</p>\n"}, {"tags": ["perl", "cygwin", "packages", "package-managers"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505501885, "post_id": 46245896, "comment_id": 79456049, "body": "Did you try to install the <code>if</code> module on cygwin (i.e. <code>cpan if</code>)?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505502001, "post_id": 46245896, "comment_id": 79456096, "body": "@mob <code>if</code> ought to be a core module since Perl 5.6.2. If <code>if.pm</code> can&#39;t be found, something is quite wrong with the Perl installation."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1505502216, "post_id": 46245896, "comment_id": 79456201, "body": "What error message does <code>perl -e &#39;use if&#39;</code> print? If the <code>if</code> module is installed correctly, it should be something like &quot;<code>Too few arguments to &#39;use if&#39;</code> ...&quot;. If it isn&#39;t, it should be something like &quot;<code>Can&#39;t locate if.pm in @INC (you may need to install the if module)</code> ...&quot;."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505502218, "post_id": 46245896, "comment_id": 79456202, "body": "Maybe, but <a href=\"https://metacpan.org/pod/if\" rel=\"nofollow noreferrer\"><code>if</code> has a dual-life</a> and it might not hurt to install it again. It would try installing <code>if</code> before I tried reinstalling <code>perl</code>, at least."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505502295, "post_id": 46245896, "comment_id": 79456246, "body": "@mob: I&#39;d check whether it&#39;s installed (see my previous comment) before trying to install it again. I don&#39;t know what you mean by &quot;dual-life&quot;."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505502396, "post_id": 46245896, "comment_id": 79456301, "body": "<a href=\"https://stackoverflow.com/questions/6009476/what-is-a-dual-life-module\" title=\"what is a dual life module\">stackoverflow.com/questions/6009476/what-is-a-dual-life-modu&zwnj;&#8203;le</a>"}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "edited": false, "score": 0, "creation_date": 1505502712, "post_id": 46245896, "comment_id": 79456437, "body": "cpan does not appear to be installed/functioning. Some quick searching turned up no good solutions to this problem.   <b>$ cpan if</b>     <b>Can&#39;t locate App/Cpan.pm in @INC ...</b>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505502776, "post_id": 46245896, "comment_id": 79456462, "body": "@mob: Thanks for the explanation. But if the <code>if</code> module is missing, installing it is likely to fix that one problem without correcting some underlying problem with the OP&#39;s Perl installation. If <code>if</code> is missing, I&#39;d consider (a) trying to track down the cause of the problem, and (b) reinstalling Perl. (Reading the question more closely, I see the OP has Perl 5.22, and the <code>if</code> module really is missing.) I wonder if <code>@INC</code> could be messed up somehow."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1505502908, "post_id": 46245896, "comment_id": 79456528, "body": "Let&#39;s see what modules you have installed. Can you please provide a listing of the <code>@INC</code> directories? E.g. like <code>perl -E&#39;say for @INC&#39; | xargs ls</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1505503068, "post_id": 46245896, "comment_id": 79456603, "body": "Some general notes: <code>use if</code> refers to a module named <code>if</code>, not related to the built-in <code>if</code> keyword. That module has been part of the core Perl distribution since 5.6.2, and you&#39;re using 5.22. The error message indicates that the <code>if</code> module is missing -- which shouldn&#39;t be possible. Other <code>use</code> statements work, so the problem is specific to the <code>if</code> module. Speculation: Your Perl installation is messed up, or your <code>@INC</code> is messed up, perhaps due to an incorrect environment variable, or Cygwin has done something weird."}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1505503076, "post_id": 46245896, "comment_id": 79456605, "body": "@amon: This is the output of <code>perl -E&#39;say for @INC&#39; | xargs ls</code>  <a href=\"https://pastebin.com/Bksy51ER\" rel=\"nofollow noreferrer\">pastebin.com/Bksy51ER</a>"}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1505503974, "post_id": 46245896, "comment_id": 79456951, "body": "@amon: The only installed package that matches &quot;perl&quot; is the <code>perl</code> package. <a href=\"https://i.imgur.com/SxeuKSo.png\" rel=\"nofollow noreferrer\">i.imgur.com/SxeuKSo.png</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1505504285, "post_id": 46245896, "comment_id": 79457089, "body": "It would be most useful for somebody else using Perl under Cygwin to run the same command."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1505505137, "post_id": 46245896, "comment_id": 79457481, "body": "@Keith Thompson, <a href=\"https://pastebin.com/Qeu1Sxai\" rel=\"nofollow noreferrer\">here you go</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505505563, "post_id": 46245896, "comment_id": 79457661, "body": "@femtobarn, You should have a package named <code>perl-base</code> installed; it&#39;s a dependency of the <code>perl</code> package."}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505506179, "post_id": 46245896, "comment_id": 79457875, "body": "@ikegami: <code>perl-base</code> is not installed, <a href=\"https://i.imgur.com/CZxVYtC.png\" rel=\"nofollow noreferrer\">nor does it exist in my <code>Full</code> package list</a>. Something must be very wrong. Is it the <a href=\"https://i.imgur.com/LY8YEIU.png\" rel=\"nofollow noreferrer\">mirror</a> I am using?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505506346, "post_id": 46245896, "comment_id": 79457948, "body": "I meant <code>perl_base</code>. But ignore that. As I was about to post until matzeri beat me to it, <code>cygcheck</code> says the file is in <code>perl-5.22.4-1</code>."}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505506922, "post_id": 46245896, "comment_id": 79458172, "body": "@ikegami: The correct name is <code>perl_base</code>. It exists, and it was not installed. The reason must be that the wrong version of the perl package was  selected. After installation of the <code>perl_base</code> package, <code>perl -v</code> reported the following: <code>$ perl -v  This is perl 5, version 24, subversion 1 (v5.24.1) built for x86_64-cygwin-threads-multi </code> Will write detailed solution. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505507148, "post_id": 46246823, "comment_id": 79458255, "body": "I wish I could find a command to reinstall a package. <code>cygwin-setup-x86_64.exe -q -P perl-5.22.4-1</code> doesn&#39;t do anything if the package is already installed."}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "edited": false, "score": 0, "creation_date": 1505507879, "post_id": 46246823, "comment_id": 79458527, "body": "When I installed <code>perl_base</code>, the problem went away. Full details provided in my answer. Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505507914, "post_id": 46246823, "comment_id": 79458538, "body": "@femtoban, No, it&#39;s when you reinstalled <code>perl</code> (&quot;Perl then upgraded to v5.24.1&quot;) like matzeri suggested."}], "tags": [], "owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "is_accepted": false, "score": 1, "last_activity_date": 1505541629, "last_edit_date": 1505541629, "creation_date": 1505506016, "answer_id": 46246823, "question_id": 46245896, "link": "https://stackoverflow.com/questions/46245896/perl-use-if-statements-in-cygwin-break-configure-script/46246823#46246823", "title": "Perl &quot;use if&quot; statements in cygwin break Configure script", "body": "<p><code>if.pm</code> is part of the standard perl package</p>\n\n<pre><code>$ cygcheck -f /usr/lib/perl5/5.22/if.pm\nperl-5.22.4-1\n</code></pre>\n\n<p>You should check if the package is correctly installed</p>\n\n<pre><code>$ cygcheck -c perl\nCygwin Package Information\nPackage              Version        Status\nperl                 5.22.4-1       OK\n</code></pre>\n\n<p>and if not, as it seems, re-install it.</p>\n\n<p>In addition, as you can see  also inside <code>setup.ini</code>, on setup-<code>arch</code>.exe there are 3 available package versions and you should note mix them.</p>\n\n<pre><code>@ perl\nsdesc: \"Perl programming language interpreter\"\n...\nversion: 5.22.4-1\n...\n[prev]\nversion: 5.22.3-1\n..\n[test]\nversion: 5.24.1-1\n</code></pre>\n\n<p>The current one is the <code>5.22.4-1</code> and <code>5.24.1-1</code> is a test version for the possible future usage. As you clearly don't need a <code>test</code> version, just use the current stable <code>5.22.4-1</code>.\nMixing up is not good for you...</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505507865, "post_id": 46247145, "comment_id": 79458522, "body": "No, it&#39;s the reinstallation of the <code>perl</code> package (&quot;Perl then upgraded to v5.24.1&quot;) that fixed it, like matzeri answered. You just used a convoluted approach to doing so."}, {"owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505508146, "post_id": 46247145, "comment_id": 79458614, "body": "I&#39;m not sure if simply selecting the newer version of the <code>perl</code> package would have resolved the issue. It appears that a version of <code>perl</code> that did not have a correpsonding <code>perl_base</code> package was installed. After manually selecting <code>perl_base</code>, the newer <code>perl</code> was automatically selected, and the issue was resolved. Seems pedantic, but others who run into the same issue may be confused if upgrading <code>perl</code> alone does not solve their issue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505508711, "post_id": 46247145, "comment_id": 79458827, "body": "Re &quot;<i>I&#39;m not sure if simply selecting the newer version of the perl package would have resolved the issue.</i>&quot;, You have it completely backwards. <code>perl_base</code> has nothing to do with this. The missing file (<code>if.pm</code>) is provided by <code>perl</code>, not <code>perl_base</code>. So of course reinstalling/upgrading <code>perl</code> will solve your problem."}], "tags": [], "owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "is_accepted": false, "score": -1, "last_activity_date": 1505507771, "creation_date": 1505507771, "answer_id": 46247145, "question_id": 46245896, "link": "https://stackoverflow.com/questions/46245896/perl-use-if-statements-in-cygwin-break-configure-script/46247145#46247145", "title": "Perl &quot;use if&quot; statements in cygwin break Configure script", "body": "<p><strong>SOLUTION: Wrong version of <code>perl</code> package was installed.</strong></p>\n\n<p>Problem was caused by not selecting <code>perl_base</code> package. </p>\n\n<p>Indicating Symptom: </p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 22, subversion 4 (v5.22.4) built for cygwin-\nthread-multi\n</code></pre>\n\n<p>Problem solved by manually selecting perl_base package. Perl then upgraded to v5.24.1 and included <code>if.pm</code> module in <code>@INC</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MBWkr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MBWkr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Indication of Solution:\n    $ perl -v</p>\n\n<pre><code>This is perl 5, version 24, subversion 1 (v5.24.1) built for x86_64-cygwin-\nthreads-multi\n</code></pre>\n\n<p>After installation of <code>perl_base</code> package, the Configure script completed without <code>Can't locate if.pm in @INC</code> errors. </p>\n"}], "owner": {"reputation": 19, "user_id": 8616177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ru6XO.jpg?s=128&g=1", "display_name": "femtobarn", "link": "https://stackoverflow.com/users/8616177/femtobarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1505541629, "creation_date": 1505501696, "last_edit_date": 1505507201, "question_id": 46245896, "link": "https://stackoverflow.com/questions/46245896/perl-use-if-statements-in-cygwin-break-configure-script", "title": "Perl &quot;use if&quot; statements in cygwin break Configure script", "body": "<p>I am attempting to compile openssl from source on cygwin. The Configure script that ships with <a href=\"https://www.openssl.org/source/openssl-1.1.0f.tar.gz\" rel=\"nofollow noreferrer\">openssl-1.1.0f</a> appears to break on conditional \"use if...\" inclusion statements when running inside cygwin. </p>\n\n<p><strong>On Linux (succeeds):</strong></p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 26, subversion 0 (v5.26.0) built for i686-linux-gnu-\nthread-multi-64int\n....\n$ CC='/usr/bin/gcc -static' ./Configure no-shared no-async linux-x86_64\nFile::Glob::glob() will disappear in perl 5.30. Use File::Glob::bsd_glob() \ninstead. at ./Configure line 272.\nConfiguring OpenSSL version 1.1.0f (0x1010006fL)\n    no-asan         [default]  OPENSSL_NO_ASAN\n....\nConfigured for linux-x86_64.\n</code></pre>\n\n<p><strong>On Cygwin (fails):</strong></p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 22, subversion 4 (v5.22.4) built for cygwin-thread-\nmulti\n...\n$ CC='/usr/bin/gcc -static' ./Configure no-shared no-async mingw\nCan't locate if.pm in @INC (you may need to install the if module) (@INC \ncontains: /usr/lib/perl5/site_perl/5.22/x86_64-cygwin-threads \n/usr/lib/perl5/site_perl/5.22 /usr/lib/perl5/vendor_perl/5.22/x86_64-cygwin-\nthreads /usr/lib/perl5/vendor_perl/5.22 /usr/lib/perl5/5.22/x86_64-cygwin-\nthreads /usr/lib/perl5/5.22 .) at ./Configure line 17.\nBEGIN failed--compilation aborted at ./Configure line 17.\n\n$ head -n 17 Configure\n#! /usr/bin/env perl\n# -*- mode: perl; -*-\n# Copyright 2016 The OpenSSL Project Authors. All Rights Reserved.\n#\n# Licensed under the OpenSSL license (the \"License\").  You may not use\n# this file except in compliance with the License.  You can obtain a copy\n# in the file LICENSE in the source distribution or at\n# https://www.openssl.org/source/license.html\n\n##  Configure -- OpenSSL source tree configuration script\n\nuse 5.10.0;\nuse strict;\nuse File::Basename;\nuse File::Spec::Functions qw/:DEFAULT abs2rel rel2abs/;\nuse File::Path qw/mkpath/;\nuse if $^O ne \"VMS\", 'File::Glob' =&gt; qw/glob/;\n</code></pre>\n\n<p>Replacing </p>\n\n<pre><code>use if $^O ne \"VMS\", 'File::Glob' =&gt; qw/glob/;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>use File::Glob qw/glob/;\n</code></pre>\n\n<p>causes script to succeed until next \"use if\" statement: </p>\n\n<pre><code>$ head -n 17 Configure\n#! /usr/bin/env perl\n# -*- mode: perl; -*-\n# Copyright 2016 The OpenSSL Project Authors. All Rights Reserved.\n#\n# Licensed under the OpenSSL license (the \"License\").  You may not use\n# this file except in compliance with the License.  You can obtain a copy\n# in the file LICENSE in the source distribution or at\n# https://www.openssl.org/source/license.html\n\n##  Configure -- OpenSSL source tree configuration script\n\nuse 5.10.0;\nuse strict;\nuse File::Basename;\nuse File::Spec::Functions qw/:DEFAULT abs2rel rel2abs/;\nuse File::Path qw/mkpath/;\nuse File::Glob qw/glob/;\n\n$ CC='/usr/bin/gcc -static' ./Configure no-shared no-async mingw\nCC='/usr/bin/gcc -static' ./Configure no-shared no-async mingw\nConfiguring OpenSSL version 1.1.0f (0x1010006fL)\nno-asan         [default]  OPENSSL_NO_ASAN\n...\nno-zlib-dynamic [default]\nConfiguring for mingw\nWarning: failed to load Config_git.pl, something strange about this perl...\nSomething wrong with this line:\nProgram fragment delivered error ``Can't locate if.pm in @INC (you may need \nto install the if module) (@INC contains: util \n/usr/lib/perl5/site_perl/5.22/x86_64-cygwin-threads \n/usr/lib/perl5/site_perl/5.22 /usr/lib/perl5/vendor_perl/5.22/x86_64-cygwin-\nthreads /usr/lib/perl5/vendor_perl/5.22 /usr/lib/perl5/5.22/x86_64-cygwin-\nthreads /usr/lib/perl5/5.22 .) at /home/tester/socat/build/openssl-\n1.1.0f/test/build.info line 296.\nat /home/tester/socat/build/openssl-1.1.0f/test/build.info at ./Configure \nline 1616.\n</code></pre>\n\n<p>How do I make this cygwin Perl act like this Linux Perl? Is there something else that can be done to make this Configure script succeed?</p>\n\n<p>Here are my installed modules:</p>\n\n<pre><code>$ perl -E'say for @INC' | xargs ls\nls: cannot access '/usr/lib/perl5/site_perl/5.22/x86_64-cygwin-threads': No such file or directory\nls: cannot access '/usr/lib/perl5/site_perl/5.22': No such file or directory\nls: cannot access '/usr/lib/perl5/vendor_perl/5.22/x86_64-cygwin-threads': No such file or directory\n.:\n(redacted)\n\n/usr/lib/perl5/5.22:\nAutoLoader.pm   Carp.pm      DirHandle.pm  FileHandle.pm  Locale          Params     SelectSaver.pm  Tie            version\nAutoSplit.pm    Class        Exporter      FindBin.pm     locale.pm       parent.pm  SelfLoader.pm   Time           version.pm\nB               Config       Exporter.pm   Getopt         Math            Parse      strict.pm       unicore        warnings\nbase.pm         constant.pm  ExtUtils      I18N           Module          PerlIO     Symbol.pm       UNIVERSAL.pm   warnings.pm\nbytes.pm        CPAN         feature.pm    integer.pm     overload        PerlIO.pm  Term            utf8.pm        Win32API\nbytes_heavy.pl  Digest       fields.pm     IO             overload.pm     Pod        Test            utf8_heavy.pl  x86_64-cygwin-threads\nCarp            Digest.pm    File          IPC            overloading.pm  Safe.pm    Text            vars.pm        XSLoader.pm\n\n/usr/lib/perl5/5.22/x86_64-cygwin-threads:\nattributes.pm  Config.pm        Data           Encode     Fcntl.pm  IO      List    Opcode.pm  re.pm      Storable.pm  Win32API\nauto           Config_heavy.pl  Digest         Encode.pm  File      IO.pm   MIME    PerlIO     Scalar     Time\nB.pm           Cwd.pm           DynaLoader.pm  Errno.pm   I18N      lib.pm  mro.pm  POSIX.pm   Socket.pm  Win32.pm\n\n/usr/lib/perl5/vendor_perl/5.22:\nCPAN\n</code></pre>\n"}, {"tags": ["arrays", "perl", "pass-by-reference"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1505501214, "post_id": 46245709, "comment_id": 79455745, "body": "The line <code>my $source_files = (@_);</code> assigns to a scalar <code>$source_files</code>, thus being in scalar context; it then uses the number of elements in the array, <code>1</code> here. Replace with <code>my ($source_files) = @_;</code>.  See practically the duplicate: <a href=\"https://stackoverflow.com/a/46232503/4653379\">this post</a> from a few days ago."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505501461, "post_id": 46245709, "comment_id": 79455865, "body": "thank you, that fixed the problem; also, just putting parentheses around $source_files fixed the problem. i don&#39;t understand the purpose of shift"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505501575, "post_id": 46245709, "comment_id": 79455905, "body": "I am marking it as a duplicate since the error is exactly the same (even though the code is different), and the comment above with the same link solved it.  If there is a problem with this please let me know."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505501752, "post_id": 46245709, "comment_id": 79455981, "body": "The <code>shift</code> removes an element from the front of the array, <i>and returns it</i>.  Then that can be assigned to a scalar.  By default it works on <code>@_</code> thus just <code>my $var = shift;</code>.  This is often used to first remove that element first so that the (remaining) <code>@_</code> can later be processed more easily.  For instance, in object-oriented code you&#39;ll often see <code>my $self = shift;</code> to get the object <i>and</i> remove it from <code>@_</code>, so that <code>@_</code> stays with only the &quot;real&quot; arguments for method&#39;s operation."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505533304, "post_id": 46245709, "comment_id": 79463762, "body": "I added a note on the use of <code>shift</code> for this purpose to the linked answer/duplicate"}], "answers": [{"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 0, "last_activity_date": 1505501758, "last_edit_date": 1505501758, "creation_date": 1505501164, "answer_id": 46245772, "question_id": 46245709, "link": "https://stackoverflow.com/questions/46245709/cant-print-array-reference-perl/46245772#46245772", "title": "can&#39;t print array reference perl", "body": "<p>use </p>\n\n<pre><code>my $source_files = shift;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>my $source_files = (@_);\n</code></pre>\n\n<p>See the <a href=\"http://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">documentation of shift</a> for more info.</p>\n"}], "owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 1, "closed_date": 1505501506, "answer_count": 1, "score": 0, "last_activity_date": 1505501758, "creation_date": 1505500858, "last_edit_date": 1505501394, "question_id": 46245709, "link": "https://stackoverflow.com/questions/46245709/cant-print-array-reference-perl", "closed_reason": "Duplicate", "title": "can&#39;t print array reference perl", "body": "<p>I printed out the array within the first function and it is valid. I can't print it out in the second function.</p>\n\n<p>Error message: Can't use string (\"1\") as an ARRAY ref while \"strict refs\" in use at ConvertToVformat.pl line 24.</p>\n\n<pre><code>my $dir = cwd();\nmy $source_files = DetermineSourceFiles();\nDetermineFileInfo($source_files);\n\nsub DetermineSourceFiles {\n    my @source_files;\n    opendir my $dh, $dir or die \"Cant open $dir: $!\";\n    while (my $file = readdir($dh)) {\n        if ($file =~ /(.*?\\d+.bin)/) {\n            push @source_files, $file;\n        }\n    }\n    closedir $dh;\n    return \\@source_files;\n}\n\nsub DetermineFileInfo {\n    my $source_files = (@_);\n    foreach my $file (@$source_files) {\n        print \"$source_files\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "file-io", "file-handling"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 1, "last_activity_date": 1505500751, "creation_date": 1505500751, "answer_id": 46245683, "question_id": 46245593, "link": "https://stackoverflow.com/questions/46245593/perl-couldnt-open-a-file-with-file-name-as-input/46245683#46245683", "title": "Perl: Couldn&#39;t open a file with file name as input", "body": "<p><a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a> your input variables to remove the newlines:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n#names of file to be input and output \nmy $inputfile = &lt;STDIN&gt;;\nmy $outputfile = &lt;STDIN&gt;;\n\nchomp $inputfile;\nchomp $outputfile;\n\nopen(INPUT,'&lt;', $inputfile) \nor die \"Could not open file '$inputfile' $!\";\n\nopen(OUTPUT, '&gt;', $outputfile) \nor die \"Could not open file '$outputfile' $!\";\n\nwhile (&lt;INPUT&gt;) {\n  print OUTPUT;\n}\n\nclose INPUT;\nclose OUTPUT;\nprint \"done\\n\";\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 7262846, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf755f303617001c4aefa77a3ed77e59?s=128&d=identicon&r=PG&f=1", "display_name": "gokyori", "link": "https://stackoverflow.com/users/7262846/gokyori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 46245683, "answer_count": 1, "score": 1, "last_activity_date": 1505500751, "creation_date": 1505500403, "question_id": 46245593, "link": "https://stackoverflow.com/questions/46245593/perl-couldnt-open-a-file-with-file-name-as-input", "title": "Perl: Couldn&#39;t open a file with file name as input", "body": "<p>I am trying to copy lines of a file to another file.I want to give filenames for both input and output file. I tried to do without asking for any input parameters and it worked fine but with filename as input it failed.Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n#names of file to be input and output \nmy $inputfile = &lt;STDIN&gt;;\nmy $outputfile = &lt;STDIN&gt;;\n\nopen(INPUT,'&lt;', $inputfile) \nor die \"Could not open file '$inputfile' $!\";\n\nopen(OUTPUT, '&gt;', $outputfile) \nor die \"Could not open file '$outputfile' $!\";\n\nwhile (&lt;INPUT&gt;) {\n  print OUTPUT;\n}\n\nclose INPUT;\nclose OUTPUT;\nprint \"done\\n\";\n</code></pre>\n"}, {"tags": ["perl", "ssh", "telnet", "openssh"], "comments": [{"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1505497992, "post_id": 46244511, "comment_id": 79454379, "body": "<a href=\"https://metacpan.org/pod/Net::Appliance::Session\" rel=\"nofollow noreferrer\">Net::Appliance::Session</a> is a good alternative for sake of Cisco"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1505498705, "post_id": 46244511, "comment_id": 79454732, "body": "Can you add more code -- what is the <code>$cmd</code>, and in particular the one that fails? (It may well be about the command itself.) Perhaps that&#39;s why this is getting close votes."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1505499279, "post_id": 46244511, "comment_id": 79454984, "body": "@zdim. Thank you. I just updated my question with Commands."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 1, "creation_date": 1505508130, "post_id": 46244511, "comment_id": 79458611, "body": "Is the connection getting closed immediately, or does it seem to be a timeout?"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1505508863, "post_id": 46244511, "comment_id": 79458888, "body": "Yes. It is getting closed immediately after the output of first command. Something weird. I have tested with nearly 100 Cisco devices to make sure it is not issue related to devices."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1505525240, "post_id": 46244511, "comment_id": 79462734, "body": "Re: &quot;<i>closed immediately after the output of first command.</i>&quot; -- is it closed <i>after the first command</i> (before the second one is even attempted) as the comment above says, or <i>as it runs the second command</i> as the question implies?  I don&#39;t know about Cisco things but this is debugging.  You can find out by adding print statements right before and right after you run the second command, having <code>$| = 1</code> set (no buffering), and redirecting STDERR along with STDOUT to a file. Then you should see when exactly the error message comes."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1505578858, "post_id": 46244511, "comment_id": 79475489, "body": "See the module FAQ: <a href=\"https://metacpan.org/pod/Net::OpenSSH#Connecting-to-switches,-routers,-etc.\" rel=\"nofollow noreferrer\">Connecting to switches, routers, etc.</a>"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505499256, "creation_date": 1505495131, "last_edit_date": 1505499256, "question_id": 46244511, "link": "https://stackoverflow.com/questions/46244511/ssh-connection-closed-after-issuing-first-command", "title": "SSH Connection closed after issuing first command", "body": "<p>I am using Perl OpenSSH (Net::OpenSSH) to connect Cisco Devices.  I am able to connect the devices but the problem is, it is disconnecting after issuing my first command on the server.</p>\n\n<p>Please check the code below for Connections and to capture Command output. </p>\n\n<p>Connection code: </p>\n\n<pre><code>my %params = (\n       host         =&gt; $hostname,\n       user         =&gt; $username,\n       passwd       =&gt; $password,          \n       timeout      =&gt; defined $timeout ? $timeout : $self-&gt;{timeout},\n       kill_ssh_on_timeout =&gt; 1,\n       master_opts =&gt; [\n           -o =&gt; \"UserKnownHostsFile=/dev/null\",\n           -o =&gt; \"StrictHostKeyChecking=no\",\n           -o =&gt; \"ServerAliveInterval=120\",\n       ]\n   );  \n\n   $ssh_connection_obj = Net::OpenSSH-&gt;new(%params);\n</code></pre>\n\n<p>To Capture Command: </p>\n\n<p>Commands are :</p>\n\n<ol>\n<li><p>sh int desc - I am getting output for this command, since this is my first command. After that i am getting the below error as mentioned. </p></li>\n<li><p>sh arp - So this is my second one. Because the connection closed error after my first command output. I am getting nothing on this command. </p></li>\n</ol>\n\n<p>But This is all happening with Perl OpenSSH module. but working good with Telnet module. And also if i try login manually using terminal window of my local machine, that time also working fine. So i am just thinking. Is that issue with OpenSSH module? or Cisco Devices?</p>\n\n<p>Also If it is Juniper devices, the OpenSSH module responding pretty good on all commands. </p>\n\n<pre><code>@openssh_output = $ssh_connection_obj-&gt;capture(\"$cmd\");\n</code></pre>\n\n<p>I am getting output for the first command. But I am getting this error</p>\n\n<pre><code>Connection to &lt;IP_ADDRESS&gt; closed by remote host.\n</code></pre>\n\n<p>when i try to capture output for another command. </p>\n\n<p>Also i have tried with Telnet connection (new Net::Telnet). It is working good without any issues for all consequent commands.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1505486253, "post_id": 46242102, "comment_id": 79448092, "body": "On my 5.24.1 <code>print $(a)</code> is a syntax error."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1505486293, "post_id": 46242102, "comment_id": 79448117, "body": "... also a syntax error on my 5.6.2"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505486764, "post_id": 46242102, "comment_id": 79448391, "body": "Edited in double quotes to salvage this question"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1505505175, "post_id": 46242102, "comment_id": 79457502, "body": "Why would you wrap a variable name in arbitrary punctuation characters and expect that to work? Why <code>$(a)</code> instead of <code>$[a]</code> or <code>$&lt;a&gt;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505487136, "post_id": 46242236, "comment_id": 79448616, "body": "thanks, and why do print &quot;$a&quot;;  and print &quot;${a}&quot;; work the same way,  is it that both the syntax types are supported in perl or there is any other logical reason ?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1505487745, "post_id": 46242236, "comment_id": 79448987, "body": "<code>${...}</code> is necessary because sometimes the sigil needs to be applied to a complicated expression (<code>${$foo-&gt;{bar}[42]}</code>). The simpler <code>$var</code> syntax is necessary because if Perl programmers had to type extra braces every time they wanted to refer to a variable, Perl would have never caught on (it is bad enough that you have to keep typing <code>$</code>)."}, {"owner": {"reputation": 1399, "user_id": 3857002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d723ed492dde5408b8839a82ef472cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Ed.", "link": "https://stackoverflow.com/users/3857002/ed"}, "edited": false, "score": 2, "creation_date": 1505491178, "post_id": 46242236, "comment_id": 79450920, "body": "Additionally, <code>${...}</code> may be used not just to give a variable name as the <code>...</code>, but also an expression that returns a scalar-reference, which is then dereferenced with <code>${}</code>. Really, it&#39;s a good idea to read the above-referenced &quot;perldata&quot; page :-)"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 3, "creation_date": 1505491332, "post_id": 46242236, "comment_id": 79451021, "body": "The most common use case for <code>${varname}</code> is when you interpolate and there is no separation. Example: <code>&quot;${bytes_total}B available&quot;</code> (functionally the same as <code>${bytes_total} . &#39;B available&#39;</code>) would not work written as <code>&quot;$bytes_totalB available&quot;</code> because Perl would be looking for a variable <code>$bytes_totalB</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1505495320, "post_id": 46242236, "comment_id": 79453017, "body": "@mob you are confusing <code>${ scalar-ref-expr }</code> and <code>${ identifier(optional index) }</code>; you are talking about the former, the question is about the latter."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1505495504, "post_id": 46242236, "comment_id": 79453134, "body": "<code>${...}</code> has many uses, but I never said <code>$foo-&gt;{bar}[42]</code> was a scalar reference and not a string."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1505499755, "post_id": 46242236, "comment_id": 79455163, "body": "@mob if it is a string it is a symbolic scalar reference"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1505486601, "creation_date": 1505486601, "answer_id": 46242236, "question_id": 46242102, "link": "https://stackoverflow.com/questions/46242102/accessing-perl-scalar-variables-in/46242236#46242236", "title": "accessing perl scalar variables in ()", "body": "<p><a href=\"https://metacpan.org/pod/perlvar#$REAL_GROUP_ID\" rel=\"noreferrer\"><code>$(</code></a> is a valid scalar in Perl. It contains the space-separated list of group ids that the current user belongs to.</p>\n\n<p>So <code>print \"$(a)\"</code> is equivalent to <code>print $( . \"a)\"</code> and you can expect output like</p>\n\n<pre><code>perl -e 'print \"$(a)\"'\n100 100 14677a)\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46242236, "answer_count": 1, "score": 0, "last_activity_date": 1505486747, "creation_date": 1505486177, "last_edit_date": 1505486747, "question_id": 46242102, "link": "https://stackoverflow.com/questions/46242102/accessing-perl-scalar-variables-in", "title": "accessing perl scalar variables in ()", "body": "<pre><code>$a=10 \nprint \"$a\";\nprint \"${a}\";\nprint \"$(a)\";\n</code></pre>\n\n<p><code>print \"$a\";</code> and  <code>print \"${a}\";</code>  work exactly same way, looks like both syntax are supported in perl to print scalar variables, but  <code>print \"$(a)\";</code> prints strange values , Want to undersand what happens when  <code>print \"$(a)\";</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505502588, "post_id": 46240664, "comment_id": 79456378, "body": "<code>split( &#47;[|]&#47; )</code> is usually written as <code>split &#47;\\|&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505483081, "post_id": 46240771, "comment_id": 79445875, "body": "Thanks but what about   @$fn ? Could you explain how that works ?"}, {"owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505484380, "post_id": 46240771, "comment_id": 79446890, "body": "so In Perl string can be dereferenced as array  ?  because in code above $fn is actually a string."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 2, "creation_date": 1505484565, "post_id": 46240771, "comment_id": 79447009, "body": "@Vicky no, in line 1 the variable <code>$strings</code> is assigned with an array reference of strings, and in line 5 <code>$fn</code> is initialized with <code>$strings</code>. So it&#39;s an array ref."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 1, "creation_date": 1505484732, "post_id": 46240771, "comment_id": 79447110, "body": "@Vicky what line 15 does is it assignes the result of the <code>split</code> operation to elements in <code>%heading</code> named after every element in the array reference <code>$strings</code>, and one that&#39;s called <code>&quot;One&quot;</code>. It seems it&#39;s reading a CSV file that is using a pipe <code>|</code> as the delimiter. It is supposed to have at least five fields (city, state, country, language and code), but if there is a sixth field that ends up in <code>$heading{One}</code>, and then the special case in line 17ff occurs. However, line 19 does nothing as the lexical variable <code>$One</code> goes out of scope immediately because that block ends in the next line."}, {"owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505485369, "post_id": 46240771, "comment_id": 79447561, "body": "@choroba: Thanks again I understand that now, one last thing that I want to ask is that whenever an array is dereferenced using an array reference  like in @$fn, it never comes in a scalar context ? (to return count of array elements)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505485637, "post_id": 46240771, "comment_id": 79447733, "body": "@Vicky: I don&#39;t understand. Of course, dereferencing an array ref in scalar context returns the size: <code>my $size = @{ [ &#39;a&#39; .. &#39;z&#39; ] };</code> sets $size to 26."}, {"owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 0, "creation_date": 1505485885, "post_id": 46240771, "comment_id": 79447877, "body": "I mean  when using  @$fn in the above code , isn&#39;t it being used in scalar context ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "edited": false, "score": 1, "creation_date": 1505486264, "post_id": 46240771, "comment_id": 79448100, "body": "@Vicky: No, the list of keys enforces array context."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1505483320, "last_edit_date": 1505483320, "creation_date": 1505482119, "answer_id": 46240771, "question_id": 46240664, "link": "https://stackoverflow.com/questions/46240664/hash-assignment-as-array/46240771#46240771", "title": "Hash assignment as array", "body": "<p>That's called a \"slice\". It assigns to several keys at once:</p>\n\n<pre><code>@hash{ $key1, $key2 } = ($value1, $value2);\n</code></pre>\n\n<p>is a shorter and faster way of doing</p>\n\n<pre><code>$hash{$key1} = $value1;\n$hash{$key2} = $value2;\n</code></pre>\n\n<p><code>@$fn</code> is the same as <code>@{ $fn }</code>, i.e. array dereference. </p>\n"}], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46240771, "answer_count": 1, "score": 1, "last_activity_date": 1507456695, "creation_date": 1505481820, "last_edit_date": 1507456695, "question_id": 46240664, "link": "https://stackoverflow.com/questions/46240664/hash-assignment-as-array", "title": "Hash assignment as array", "body": "<p>I'm trying to understand the piece of code below; I just cannot understand what is being done in line 15.</p>\n\n<p>It seems like it is trying to initialise/assign to <code>%heading</code> but I am just not sure how that syntax works.</p>\n\n<pre><code>$strings = [qw(city state country language code   )];\n\nmy $file = \"fname\";\nmy $fn   = $strings;\nmy $c    = 0;\n\nopen( FILEH, \"&lt; ${file}.txt\" ) or die( $! );\n\nwhile ( &lt;FILEH&gt; ) {\n\n    my %heading;\n    chomp;\n    $c++;\n\n    @heading{ ( @$fn, \"One\" ) } = split( /[|]/ );  # Line 15\n\n    if ( defined( $heading{\"One\"} ) ) {\n        my $One = $heading{\"One\"};\n    }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1505470665, "post_id": 46236949, "comment_id": 79437665, "body": "I have difficulty understanding what precisely you are trying to match. Could you perhaps show a number of test cases in a machine-readable, tabular form that can be easily fed to a test script?"}], "answers": [{"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473108, "post_id": 46237690, "comment_id": 79439143, "body": "Is this newline character added automatically by perl?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473268, "post_id": 46237690, "comment_id": 79439246, "body": "@revo No, it&#39;s automatically added by <code>echo</code> (unless you use the <code>-n</code> flag)."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473363, "post_id": 46237690, "comment_id": 79439301, "body": "So you mean <code>echo -n &#39;blah &quot;blah&quot; blah&quot;&#39; | perl -ne &#39;if(&#47;^(&quot;?+)(.*[^&quot;])(\\1)$&#47;){print &quot;$1\\n$2\\n$3&quot;}&#39;</code> should work?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473465, "post_id": 46237690, "comment_id": 79439359, "body": "@revo ... try it and see?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473557, "post_id": 46237690, "comment_id": 79439428, "body": "@revo It prints nothing here. What OS are you using? What does <code>echo -n &#39;blah &quot;blah&quot; blah&quot;&#39;</code> output by itself?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473636, "post_id": 46237690, "comment_id": 79439475, "body": "<code>echo -n</code> does it job perfectly but <code>-n</code> here doesn&#39;t affect output of <code>perl -ne ...</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473859, "post_id": 46237690, "comment_id": 79439610, "body": "@revo I don&#39;t understand what you mean by that. What OS are you using? What does <code>echo -n &#39;blah &quot;blah&quot; blah&quot;&#39;</code> output by itself?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505473999, "post_id": 46237690, "comment_id": 79439698, "body": "If you can&#39;t get what I&#39;m saying, keeping up this conversation is time-wasting."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505474191, "post_id": 46237690, "comment_id": 79439820, "body": "@revo How do you expect my to &quot;get&quot; anything if you don&#39;t respond to what I&#39;m asking?"}, {"owner": {"reputation": 633, "user_id": 1005670, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/590a75bc71a1c429a92f24b91ed27ba8?s=128&d=identicon&r=PG", "display_name": "vect", "link": "https://stackoverflow.com/users/1005670/vect"}, "edited": false, "score": 0, "creation_date": 1505475093, "post_id": 46237690, "comment_id": 79440372, "body": "@melpomene Thank you for pointing out the cases with empty string/string consisting of two quotes only. I overlooked them. The regex with optional middle part doesn&#39;t match empty string, though. But it works fine with a string composed of two quotes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1505480213, "post_id": 46237690, "comment_id": 79443739, "body": "@revo: Why is your operating system a secret?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505483178, "post_id": 46237690, "comment_id": 79445946, "body": "Not on the right track... you are mistaken. Being public doesn&#39;t mean you can jump straight into the conversation which you weren&#39;t part of, although you can start one. These two have a <a href=\"https://www.google.com/search?q=define+difference\" rel=\"nofollow noreferrer\"><i>difference</i></a>. <i>Sorry to jump into the middle of your conversation...</i> is a polite beginning which you wouldn&#39;t follow since you like it the other way, hence my poor removed comment. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1505483577, "post_id": 46237690, "comment_id": 79446255, "body": "@revo: Really, I would be very surprised if you can find anyone to agree with you here. If it is permitted to modify others&#39; posts then it seems a little strange to prohibit joining in a conversation. I am also surprised, given your conduct in the comments above, that you claim to value politeness. I suggest that you should verify your misconception on <a href=\"https://meta.stackoverflow.com/\"><i>Meta Stack Overflow</i></a>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505483928, "post_id": 46237690, "comment_id": 79446528, "body": "History shows we never had a pleasant dialogue with each other. That&#39;s why I never try to start one with you, you shouldn&#39;t try either. That way life&#39;s good, LG. @Borodin"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1505473386, "last_edit_date": 1505473386, "creation_date": 1505472159, "answer_id": 46237690, "question_id": 46236949, "link": "https://stackoverflow.com/questions/46236949/regex-for-strings-optionally-surrounded-with-quotes/46237690#46237690", "title": "regex for strings optionally surrounded with quotes", "body": "<p>In your last case, <code>(\"?+)</code> matches the empty string. <code>(\\1)</code> effectively becomes a no-op: It also matches an empty string.</p>\n\n<p>That leaves us with <code>^(.*[^\"])$</code>. This matches because your input string has a non-<code>\"</code> character at the end: a newline (<code>\"\\n\"</code>).</p>\n\n<p>You can fix this by removing the newline before running the regex (<code>perl -ne 'chomp; ...'</code>).</p>\n\n<hr>\n\n<p>As a side note, you might want to make the middle part of your regex optional. Otherwise it won't match the empty string or a string consisting of two quotes (<code>\"\"</code>).</p>\n"}], "owner": {"reputation": 633, "user_id": 1005670, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/590a75bc71a1c429a92f24b91ed27ba8?s=128&d=identicon&r=PG", "display_name": "vect", "link": "https://stackoverflow.com/users/1005670/vect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 46237690, "answer_count": 1, "score": 3, "last_activity_date": 1505473605, "creation_date": 1505469793, "question_id": 46236949, "link": "https://stackoverflow.com/questions/46236949/regex-for-strings-optionally-surrounded-with-quotes", "title": "regex for strings optionally surrounded with quotes", "body": "<p>I'm trying to build a regex that matches strings which are either surrounded with quotes or have no quotes at either side. Moreover, a string the regex has to match may have quotes in the middle. Here's a result of my efforts at the moment:</p>\n\n<pre><code>^(\"?+)(.*[^\"])(\\1)$\n</code></pre>\n\n<p>It works well with strings having quotes both at start and end, having no quotes at any side or having quotes at start only:</p>\n\n<pre><code>$ echo '\"blah \"blah\" blah\"' | perl -ne 'if(/^(\"?+)(.*[^\"])(\\1)$/){print \"$1\\n$2\\n$3\"}'\n\"\nblah \"blah\" blah\n\"\n$ echo 'blah \"blah\" blah' | perl -ne 'if(/^(\"?+)(.*[^\"])(\\1)$/){print \"$1\\n$2\\n$3\"}'\n\nblah \"blah\" blah\n\n$ echo '\"blah \"blah\" blah' | perl -ne 'if(/^(\"?+)(.*[^\"])(\\1)$/){print \"$1\\n$2\\n$3\"}'\n</code></pre>\n\n<p>But it matches strings having quotes only at end:</p>\n\n<pre><code>$ echo 'blah \"blah\" blah\"' | perl -ne 'if(/^(\"?+)(.*[^\"])(\\1)$/){print \"$1\\n$2\\n$3\"}'\n\nblah \"blah\" blah\"\n</code></pre>\n\n<p>Any ideas what's the problem with the regex and how to fix it?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505494779, "post_id": 46236025, "comment_id": 79452754, "body": "Do not overrwrite <code>&#47;usr&#47;bin&#47;perl</code>!!!! You&#39;ll mess up your system"}, {"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505889563, "post_id": 46236025, "comment_id": 79591290, "body": "Thanks sure..I am not going to overwrite"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "edited": false, "score": 0, "creation_date": 1505896677, "post_id": 46238427, "comment_id": 79595631, "body": "Somehow I managed to remove my newer version of perl but I would like to use perl 5.26 for some programming purpose.. is there anyway to update my perl or if any suggestion also will helps me."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1505474648, "creation_date": 1505474648, "answer_id": 46238427, "question_id": 46236025, "link": "https://stackoverflow.com/questions/46236025/how-to-change-the-location-of-perl/46238427#46238427", "title": "How to change the location of perl?", "body": "<blockquote>\n  <p>But it supposed to be in /usr/bin</p>\n</blockquote>\n\n<p>It's a bad idea to overwrite the system installation of Perl. Half to most of the other installed software that is depending on that Perl version will break. If you're particularly unlucky, you'll break a low-level system tool, and you'll end up in a situation where the system is in such a bad condition that you cannot easily recover from except by a full reinstall.</p>\n\n<blockquote>\n  <p>When I type <code>which perl</code> It was showing <code>usr/local/bin/perl</code> And cpan installed at <code>usr/local/lib/cpan</code> Why it happened?</p>\n</blockquote>\n\n<p>Because the default <a href=\"http://search.cpan.org/~shay/perl-5.24.2/INSTALL#Installation_prefix\" rel=\"nofollow noreferrer\">installation prefix</a> is <code>/usr/local</code>. It can be changed in the <code>./Configure</code> step.</p>\n\n<blockquote>\n  <p>How can I rectify this problem.</p>\n</blockquote>\n\n<p>The simple (but slightly tedious) way is to always use the full paths. So installing BioPerl is: </p>\n\n<pre><code>/usr/local/lib/cpan Bio::Perl\n</code></pre>\n\n<p>\u2026 the shebang to your own Perl programs is </p>\n\n<pre><code>#!/usr/local/bin/perl\n</code></pre>\n\n<p>etc.</p>\n\n<p>This works because installed modules will go into your custom Perl's library path, and your custom Perl's executable knows how to find them.</p>\n"}, {"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 1, "last_activity_date": 1505479190, "creation_date": 1505479190, "answer_id": 46239826, "question_id": 46236025, "link": "https://stackoverflow.com/questions/46236025/how-to-change-the-location-of-perl/46239826#46239826", "title": "How to change the location of perl?", "body": "<p>I think using a tool like <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a> or <a href=\"https://metacpan.org/pod/release/TOKUHIROM/App-plenv-v1.4.0/bin/plenv\" rel=\"nofollow noreferrer\">plenv</a> is safer and provides you a lot of features. For example, you can install different versions of Perl and use whatever you want, without collisions between installations.</p>\n\n<p>It is not a good idea to change the system perl.</p>\n"}], "owner": {"reputation": 177, "user_id": 8376143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-UD8qIbVHv-s/AAAAAAAAAAI/AAAAAAAAAKM/hpXrE1K13yQ/photo.jpg?sz=128", "display_name": "Thulasi R", "link": "https://stackoverflow.com/users/8376143/thulasi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 46238427, "answer_count": 2, "score": 3, "last_activity_date": 1505479190, "creation_date": 1505466982, "last_edit_date": 1505468418, "question_id": 46236025, "link": "https://stackoverflow.com/questions/46236025/how-to-change-the-location-of-perl", "title": "How to change the location of perl?", "body": "<p>I tried to upgrade the perl version from 5.22.1 to 5.26. But unfortunately it installed at /usr/local/bin\nBut it supposed to be in /usr/bin</p>\n\n<p>I have both versions of perl in system. When I am trying to use bioperl modules, it was saying can't find module, install. But in actual I had all required modules. I worked with those modules earlier. How can I rectify this problem.</p>\n\n<p>In actual what I did was</p>\n\n<pre><code>cp perl 5.26.0\n./Configure -de -Desuches\nmake\nmake tests\nmake install\n</code></pre>\n\n<p>I did with root access</p>\n\n<p>When I type</p>\n\n<pre><code>which perl\n</code></pre>\n\n<p>It was showing</p>\n\n<pre><code>usr/local/bin/perl\n</code></pre>\n\n<p>And <code>cpan</code> installed at</p>\n\n<pre><code>usr/local/lib/cpan\n</code></pre>\n\n<p>Why it happened? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505498643, "post_id": 46235219, "comment_id": 79454699, "body": "Re &quot;<i>should I adopt the newer style in all of my code?</i>&quot;, YES! You are trying to use an experimental feature of Perl that has already been removed from Perl. It makes no sense to go out of your way to write code that will stop working."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1505465601, "post_id": 46235385, "comment_id": 79434355, "body": "Note that there&#39;s a new explicit dereferencing syntax: <code>keys $vars{$chr1}-&gt;%*</code>"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 7, "last_activity_date": 1505465123, "creation_date": 1505465123, "answer_id": 46235385, "question_id": 46235219, "link": "https://stackoverflow.com/questions/46235219/use-specified-version-of-perl/46235385#46235385", "title": "Use specified version of perl", "body": "<p>You can test for the version of perl with <code>$]</code> and do something like:</p>\n\n<pre><code>use v5.18.2;\n\nif ($] &gt;= 5.024) {\n    die(\"You are using a version of Perl too new for this program\");\n}\n</code></pre>\n\n<p>\u2026 <strong>but this is a <em>terrible</em> idea</strong>. You should be future proofing your code, not designing it to blow up if Perl is too new.</p>\n\n<hr>\n\n<p>As the error message says, it was an experimental feature. It turned out to have <a href=\"http://www.perlmonks.org/?node_id=1190816\" rel=\"noreferrer\">lots of different problems</a>.</p>\n\n<p>You should stop using it and go back to using explicit dereferencing (which is not the new syntax, it is the original syntax after the new syntax turned out to be a bad idea).</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1505498453, "last_edit_date": 1505498453, "creation_date": 1505480438, "answer_id": 46240218, "question_id": 46235219, "link": "https://stackoverflow.com/questions/46235219/use-specified-version-of-perl/46240218#46240218", "title": "Use specified version of perl", "body": "<p>You can specify a minimum version with <code>use</code> and a maximum version with <code>no</code>.</p>\n\n<pre><code>use v5.14.0;   # die if $] &lt; 5.014    # When C&lt;&lt; keys EXPR &gt;&gt; was introduced\nno v5.24.0;    # die if $] &gt;= 5.024   # When C&lt;&lt; keys EXPR &gt;&gt; was removed\n\nno if $] &gt;= 5.020, warnings =&gt; qw( experimental::autoderef );\n</code></pre>\n\n<p>but this is a terrible idea ... what Quentin said ...</p>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 46235385, "answer_count": 2, "score": 2, "last_activity_date": 1505498453, "creation_date": 1505464646, "question_id": 46235219, "link": "https://stackoverflow.com/questions/46235219/use-specified-version-of-perl", "title": "Use specified version of perl", "body": "<p>I am using a script that traverses a HoH:</p>\n\n<pre><code>for my $bp (sort { $a &lt;=&gt; $b } keys $vars{$chr1}){\n  for my $chr2 (sort keys $vars{$chr1}{$bp}){\n    [...]\n  }\n}\n</code></pre>\n\n<p>On my local computer (running perl <code>v5.18.2</code>) this is accepted syntax. However, I am concerned about the portability of this section, as when I run this on my cluster (running perl <code>v5.24.0</code>), the script dies with:</p>\n\n<blockquote>\n  <p>Experimental keys on scalar is now forbidden at script/mergesvs.pl\n  line 66.</p>\n</blockquote>\n\n<p>As I understand it, I can fix this by changing the above to: </p>\n\n<pre><code>for my $bp (sort { $a &lt;=&gt; $b } keys %{ $vars{$chr1} }){\n  for my $chr2 (sort keys %{ $vars{$chr1}{$bp} }){\n    [...]\n  }\n}\n</code></pre>\n\n<p>But as I use the former syntax more often, I would prefer to use a version of perl compatible with this (e.g. <code>v5.18.2</code>) in this script. </p>\n\n<p>I've tried adding <code>use 5.18.2</code> at the top of the script, but it makes no difference. Where should I specify what version of perl to use? </p>\n\n<p>Or should I adopt the newer style in all of my code? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1505461593, "post_id": 46234187, "comment_id": 79431977, "body": "Google search first entry returned <a href=\"http://www.perlmonks.org/?node_id=469971\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1505461593, "post_id": 46234187, "comment_id": 79431978, "body": "When you <code>use strict</code>, what error message do you get? Hint: this has <i>nothing</i> to do with typeglobs."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1505461678, "post_id": 46234187, "comment_id": 79432032, "body": "Your errors come from your variables not being declared with <code>my</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505461884, "post_id": 46234187, "comment_id": 79432155, "body": "It&#39;s unclear what you are asking (since <code>use strict;</code> has no effects on typeglobs)."}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1505462165, "post_id": 46234187, "comment_id": 79432301, "body": "I am asking since all perl program should be programmed w/ use strict and when I declare *spud with use strict, it gives me error . *** actually I am wrong. I am able to declar but not sure how to use it yet.. will come back"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505462301, "post_id": 46234187, "comment_id": 79432391, "body": "@user3502374: Please answer the question, what error message do you get? I assure you that <code>use strict</code> has no effect on typeglobs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1505471855, "post_id": 46234187, "comment_id": 79438395, "body": "I&#39;m not clear how hotel rooms are supposed to degrade one&#39;s question-writing abilities!"}, {"owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "edited": false, "score": 0, "creation_date": 1505472673, "post_id": 46234187, "comment_id": 79438880, "body": "We were hurry to leave the hotel to catch a uber but it is my fault that this post was pure definition of how not to ask questions! I will start a new thread once i can put my thoughts,examples and question in proper form. Apology once again"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506373069, "last_edit_date": 1506373069, "creation_date": 1505463669, "answer_id": 46234949, "question_id": 46234187, "link": "https://stackoverflow.com/questions/46234187/typeglob-cannot-be-used-under-strict/46234949#46234949", "title": "Typeglob cannot be used under strict", "body": "<p>The errors from your code are because you are using undeclared variables, and have nothing to do with typeglobs</p>\n\n<p>If I simply declare all of the variables using <code>our</code> and reinstate <code>use strict</code>, your code works fine</p>\n\n<pre><code> #!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nour $spud = 'wow';\nour @spud = qw(foo bar);\n\nour ($potato, @potato);\n\n*potato = *spud;\n\nprint \"$potato\\n\";\nprint \"@potato\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>wow\nfoo bar\n</code></pre>\n\n<p>Typeglobs contain only <em>package</em> variables, so I have to use <code>our</code> instead of <code>my</code> to get this to work. Package variables should be avoided wherever possible, but different techniques are necessary for aliasing lexical variables</p>\n\n<p>Aliasing is rarely necessary or useful, and it can easily make a labyrinth out of a simple piece of code. The one place where it is useful is in importing subroutines from another package (all named subroutines have package identifiers) but the core <code>Exporter</code> module implements the ugly guts of the importing process and should always be used unless you have an extraordinary requirement that <code>Exporter</code> cannot satisfy</p>\n"}], "owner": {"reputation": 751, "user_id": 3502374, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c6a2169ef6b4b7d9943dd7dd4c596d8?s=128&d=identicon&r=PG&f=1", "display_name": "user3502374", "link": "https://stackoverflow.com/users/3502374/user3502374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1505498283, "answer_count": 1, "score": -2, "last_activity_date": 1506373069, "creation_date": 1505461031, "last_edit_date": 1505469916, "question_id": 46234187, "link": "https://stackoverflow.com/questions/46234187/typeglob-cannot-be-used-under-strict", "closed_reason": "Not suitable for this site", "title": "Typeglob cannot be used under strict", "body": "<p>I understand how symbol and typeglob works, but I cannot understand when these would be used since typeglobs cannot be used under <code>use strict</code>.</p>\n\n<p>Can someone please explain?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\n#use strict;\n\n$spud = 'wow';\n@spud = qw(foo bar);\n*potato = *spud;\n\nprint \"$potato\\n\";\n</code></pre>\n\n<p>Edit: guys i am sorry.  I was in a hotel room and i typed up this question without thoughts and without verifying the code.   I see two errors.  One i didnt post the right code and also someone pointed out that my error checking was inaccurate.  I deserved all the negative vote as this was classic case of how one shouldnt ask questions.   </p>\n"}, {"tags": ["perl", "cgi", "postdata"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505460313, "post_id": 46233809, "comment_id": 79431269, "body": "Show your upload code if you want us to point out what&#39;s wrong with it!"}, {"owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505460700, "post_id": 46233809, "comment_id": 79431481, "body": "@ikegami I even don&#39;t understand how should i get the file name. As usual I got a filename in QUERY_STRING and than write it to the server <code>my $filehandle = $self-&gt;{cgiQuery}-&gt;param(&#39;filename&#39;);             my $filename = $xmlrootpath.$cgiData-&gt;{filename};                          my $buffer;             open (OUTFILE,&quot;&gt; $filename&quot;);                          while (my $bytesread = read($filehandle, $buffer, 1024))             {                 print OUTFILE $buffer;             }              close OUTFILE;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505461072, "post_id": 46233809, "comment_id": 79431683, "body": "There is no file name to be had. Now please fulfill my request."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1505461197, "post_id": 46234181, "comment_id": 79431757, "body": "Yes, i need receive file from the <code>application&#47;octet-stream</code> request and save it to the server. What I should do after <code>my $file = $cgi-&gt;param(&#39;POSTDATA&#39;);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1505461209, "post_id": 46234181, "comment_id": 79431767, "body": "Nothing. That places the file (the body of the request) in <code>$file</code>. There is nothing else to do."}, {"owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1505461428, "post_id": 46234181, "comment_id": 79431894, "body": "But there is content within the <b>offers0_14.xml</b>. There is a big XML Inside this file. How should I get that content ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1505461533, "post_id": 46234181, "comment_id": 79431949, "body": "If you want the contents of <code>offers0_14.xml</code>, maybe you should post that instead of <code>type=catalog&amp;mode=file&amp;filename=offers0_14.xml</code>."}, {"owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "edited": false, "score": 0, "creation_date": 1505464258, "post_id": 46234181, "comment_id": 79433527, "body": "Actually, that&#39;s the problem. This request send me the client 1C:Enterprise and he claims that there is a full XML inside the offers0_14.xml"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1505461198, "last_edit_date": 1505461198, "creation_date": 1505461005, "answer_id": 46234181, "question_id": 46233809, "link": "https://stackoverflow.com/questions/46233809/how-to-upload-a-file-from-post-request-content-type-application-octet-stream/46234181#46234181", "title": "How to upload a file from POST request. CONTENT_TYPE: application/octet-stream. Perl", "body": "<p>If you want to post a file:</p>\n\n<pre><code>open(my $fh, '&lt;:raw', $qfn)\n   or die $!;\n\nmy $file = do { local $/; &lt;$fh&gt; };\n\n$ua-&gt;post($uri,\n   Content_Type =&gt; 'application/octet-stream',\n   Content =&gt; $file,\n);\n</code></pre>\n\n<p>To receive it:</p>\n\n<pre><code>my $file = $cgi-&gt;param('POSTDATA');\n</code></pre>\n\n<hr>\n\n<p>If you want to post a form that includes a file upload field:</p>\n\n<pre><code>$ua-&gt;post($uri,\n   Content_Type =&gt; 'form-data',\n   Content =&gt; [\n      type  =&gt; 'catalog',\n      mode  =&gt; 'file',\n      file  =&gt; [ $qfn ],\n   ],\n);\n</code></pre>\n\n<p>To receive it:</p>\n\n<pre><code>my $fn = $cgi-&gt;param('file');  # Not safe to use!!!\nmy $fh = $cgi-&gt;upload('file');\nmy $file = do { local $/; &lt;$fh&gt; };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "is_accepted": true, "score": 0, "last_activity_date": 1505483059, "creation_date": 1505483059, "answer_id": 46241077, "question_id": 46233809, "link": "https://stackoverflow.com/questions/46233809/how-to-upload-a-file-from-post-request-content-type-application-octet-stream/46241077#46241077", "title": "How to upload a file from POST request. CONTENT_TYPE: application/octet-stream. Perl", "body": "<p>The solution is next, That POSTDATA is binary file. So, i got that file by this code</p>\n\n<pre><code>my $file_cgi = CGI-&gt;new($ENV{POSTDATA});\nmy $file = $file_cgi-&gt;Vars;\n\nmy $filename = path_to_the_file_on_the_server;    \nopen (OUTFILE,\"&gt; $filename\");\nprint OUTFILE $file-&gt;{POSTDATA};\nclose OUTFILE;\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 46241077, "answer_count": 2, "score": -1, "last_activity_date": 1505483059, "creation_date": 1505459657, "question_id": 46233809, "link": "https://stackoverflow.com/questions/46233809/how-to-upload-a-file-from-post-request-content-type-application-octet-stream", "title": "How to upload a file from POST request. CONTENT_TYPE: application/octet-stream. Perl", "body": "<p>I get a POST request with </p>\n\n<pre><code>CONTENT_TYPE: application/octet-stream\n</code></pre>\n\n<p>I get all data like this </p>\n\n<pre><code>my $cgiQuery = CGI-&gt;new() or die();\nmy $cgiData = $cgiQuery-&gt;Vars;\n\nmy $getQuery = CGI-&gt;new($ENV{QUERY_STRING});\nmy $getData = $getQuery-&gt;Vars;\n\nforeach my $getKey(keys %{$getData})\n{\n    $cgiData-&gt;{$getKey} = $getData-&gt;{$getKey};\n}\n\nmy $data = $cgiQuery-&gt;param('POSTDATA');\n</code></pre>\n\n<p>But when i try to print it</p>\n\n<pre><code>print Dumper($data) .\"\\n\";\nprint Dumper($cgiData) .\"\\n\";\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>$VAR1 = 'type=catalog&amp;mode=file&amp;filename=offers0_14.xml';\n\n$VAR1 = {\n      'POSTDATA' =&gt; 'type=catalog&amp;mode=file&amp;filename=offers0_14.xml',\n      'session' =&gt; 'aa4979ad18f64e4d959dd16444cee5fd'\n    };\n</code></pre>\n\n<p>How can i get and upload file filename=offers0_14.xml to the server?</p>\n"}, {"tags": ["apache", "perl", "ssh"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505459664, "post_id": 46233482, "comment_id": 79430895, "body": "What do you mean by  <i>Though if i run through browser it does not run at line</i> What errors are you seeing? What happens?"}, {"owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505460024, "post_id": 46233482, "comment_id": 79431104, "body": "@Gerhard Barnard : i am trying to execute this perl file through php. So when i shell_exec the perl file it says &quot;WARNING: terminal is not fully functional&quot;"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505461879, "post_id": 46233482, "comment_id": 79432152, "body": "are you able to ssh manually from the source to destination without errors? What OS is the source and OS of the destination?"}, {"owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505463334, "post_id": 46233482, "comment_id": 79432981, "body": "@Gerhard Barnard: yes manually i am able to restart the server without any errors. Source server and destination serveer is Ubuntu Linux."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505463444, "post_id": 46233482, "comment_id": 79433044, "body": "Then why not just use a much easier method and ssh directly using ssh-keys?"}, {"owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505463885, "post_id": 46233482, "comment_id": 79433292, "body": "@Gerhard Barnard: Why ssh-keys? i am able to login successfully. Though when executing the restart command i get the above error."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505463976, "post_id": 46233482, "comment_id": 79433338, "body": "it is more secure and much easier to use. See answer"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1505464177, "post_id": 46233482, "comment_id": 79433471, "body": "&quot;command in perl - php&quot; \u2014 What does PHP have to do with this?"}, {"owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1505467113, "post_id": 46233482, "comment_id": 79435328, "body": "@Quentin: i wish to run the script through browser. Though not giving desired results."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "edited": false, "score": 0, "creation_date": 1505467187, "post_id": 46235035, "comment_id": 79435387, "body": "Thanks. I will try this way also."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1505467723, "last_edit_date": 1505467723, "creation_date": 1505463991, "answer_id": 46235035, "question_id": 46233482, "link": "https://stackoverflow.com/questions/46233482/restart-apache-server-by-ssh-command-in-perl-php/46235035#46235035", "title": "restart apache server by ssh command in perl php", "body": "<p>Though Net::SSH is an elegant module, I would suggest using the system tools available to you by default.</p>\n\n<p>You have ssh available and using ssh-keys are more secure, especially due to the fact that you currently display passwords in a script. If you are unsure of how to setup ssh-keys, let me know and I will add it to the answer.</p>\n\n<p>Effectively your entire script can purely be:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $apache_status = `ssh username\\@servername systemctl status apache2`;\n   print $apache_status;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2572564, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/86d69a421a0d2160ca356922225f8e85?s=128&d=identicon&r=PG", "display_name": "abhimanyu", "link": "https://stackoverflow.com/users/2572564/abhimanyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539537508, "creation_date": 1505458472, "last_edit_date": 1539537508, "question_id": 46233482, "link": "https://stackoverflow.com/questions/46233482/restart-apache-server-by-ssh-command-in-perl-php", "title": "restart apache server by ssh command in perl php", "body": "<p>I am trying to restart the Apache server through ssh command in perl - php.</p>\n\n<p>Below is code I tried. It works through PuTTY. Though if I run through browser it does not run at line : <code>$output = $ssh-&gt;exec(\"systemctl status apache2\")</code>; </p>\n\n<pre><code>use Net::SSH::Expect;\nmy $ssh = Net::SSH::Expect-&gt;new (\n            host =&gt; \"xx.xx.xx.xx\", \n            password=&gt; 'adsd#21', \n            user =&gt; 'root', \n            raw_pty =&gt; 1\n        );\nprint(\"\\n\");\nmy $output = $ssh-&gt;login();\nprint($output);\nif ($output !~ /Welcome/) {\n    die \"Login has failed. Login output was $login_output\";\n}\n\n\n$output = $ssh-&gt;exec(\"systemctl status apache2\");\n</code></pre>\n\n<p>The Error:</p>\n\n<blockquote>\n  <p>\"WARNING: terminal is not fully functional\"</p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "text"], "comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1505458277, "post_id": 46232770, "comment_id": 79430115, "body": "Step 1: Stop using <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">regexes</a>. <a href=\"https://en.wikipedia.org/wiki/Context-free_grammar#Examples\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Context-free_grammar#Examples</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1505495078, "last_edit_date": 1505495078, "creation_date": 1505457220, "answer_id": 46233153, "question_id": 46232770, "link": "https://stackoverflow.com/questions/46232770/regex-perl-match-delimited-latex-text/46233153#46233153", "title": "Regex perl match delimited LaTeX text", "body": "<p>I suggest to reach for a tool for handling the (complex) problem of <em>balanced/nested delimiters</em>, instead of attempting to parse it by hand. Perhaps first look at the core <a href=\"http://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> or <a href=\"http://search.cpan.org/~abigail/Regexp-Common-2017060201/lib/Regexp/Common.pm\" rel=\"nofollow noreferrer\">Regexp::Common</a>.  See <a href=\"https://stackoverflow.com/a/46121634/4653379\">this post</a> for an example of their use, that also comes very close to what you need.</p>\n\n<hr>\n\n<p>In this case you may evade the problem, by making use of a specific property of your string. </p>\n\n<p>If this formula is always inline, that is between <code>$...$</code>, then those <code>$</code>'s solve the problem</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $line = q( \n   $\\ket{\\bfG \\bfP^L_{2ex}}$, and the real space, $\\ket{\\bfP^L_{2ex}}$ \n);\n\nmy @kets = $line =~ m| \\$\\\\ket{ (.+?) }\\s*\\$ |gx;\n\nsay for @kets;\n</code></pre>\n\n<p>This prints </p>\n\n<pre>\n\\bfG \\bfP^L_{2ex}\n\\bfP^L_{2ex}\n</pre>\n\n<p>This is easy since the text you need is simply between the literal <code>$\\ket{</code> and the first next <code>}$</code>; there is no issue of what's inside, so there is no problem with nested delimiters.</p>\n\n<p>The <code>.+?</code> matches all characters up to the following pattern, here <code>}$</code> (with optional spaces, <code>\\s*</code>, just in case). The <code>$</code> and <code>\\</code> need be escaped. The <code>|x</code> modifier allows spaces for readability.</p>\n"}], "owner": {"reputation": 1, "user_id": 3439342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07be76c70f3e852b9c868aa4f06a2985?s=128&d=identicon&r=PG", "display_name": "iaveiga", "link": "https://stackoverflow.com/users/3439342/iaveiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505495078, "creation_date": 1505455623, "last_edit_date": 1505494604, "question_id": 46232770, "link": "https://stackoverflow.com/questions/46232770/regex-perl-match-delimited-latex-text", "title": "Regex perl match delimited LaTeX text", "body": "<p>I'm reading a .tex file and replacing according to a pattern for save in another .tex file. My left delimiter is </p>\n\n<pre><code>\\ket{\n</code></pre>\n\n<p>and the right delimiter is </p>\n\n<pre><code>}\n</code></pre>\n\n<p>The regex <code>\\\\ket\\{(.+)\\}</code> can match  </p>\n\n<pre>\n\\ket{0}\n</pre>\n\n<p>but with complex lines such as </p>\n\n<pre>\n$\\ket{\\bfG \\bfP^L_{2ex}}$, and the real space, $\\ket{\\bfP^L_{2ex}}$\n</pre>\n\n<p>it matches the entire text</p>\n\n<pre>\n\\bfG \\bfP^L_{2ex}}$, and the real space, $\\ket{\\bfP^L_{2ex}\n</pre>\n\n<p>Modifying the regex to </p>\n\n<pre><code>\\\\ket{([^{}]*|[^}])*}{1,2}\n</code></pre>\n\n<p>I can detect the mentioned complex line, but in cases such as </p>\n\n<pre>\nreciprocal lattice, $\\ket{\\bfG \\bfP^L_{2ex}{3}{2}}$, and the real space, $\\ket{\\bfP^L_{2ex}}$\n</pre>\n\n<p>that doesn't work. How can I solve this? What algorithms/topics/books/tutorial must I read to solve problems like this?  </p>\n"}, {"tags": ["arrays", "perl", "hash", "pass-by-reference", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1505457007, "post_id": 46232503, "comment_id": 79429454, "body": "Thanks, I already mark your answer as &quot;Accepted Answer&quot;, just one question, does this solution also apply in the second code which I pass an array to the sub?  This is because I plan to make another case which point to one server only which I no need to list all the keys of %srvs.. but I plan to use the same subroutine stop to pass the one server name"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1505457874, "post_id": 46232503, "comment_id": 79429897, "body": "@MrAZ Ah, I didn&#39;t notice the other one.  In that, the problem is with <code>&quot;@s&quot;</code>, that the array us under quotes -- it gets evaluated into a string and your sub receives that one string (all elements separated by spaces)! In that case you&#39;d want <code>stop(@s)</code>.  Thank you for the attribution.  Let me know if more questions pop up"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "edited": false, "score": 0, "creation_date": 1505533186, "post_id": 46232503, "comment_id": 79463750, "body": "@MrAZ  I added a bit to the answer: A comment on the second code segment and a note on other ways to get arguments from <code>@_</code>. Just so you know"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1506056477, "last_edit_date": 1506056477, "creation_date": 1505454528, "answer_id": 46232503, "question_id": 46232091, "link": "https://stackoverflow.com/questions/46232091/pass-hash-to-subroutine-comes-to-error-in-perl/46232503#46232503", "title": "Pass hash to subroutine comes to error in perl", "body": "<p>The assignment is in the scalar context in your <code>sub stop</code> on the line</p>\n\n<pre><code>my $servs = @_;\n</code></pre>\n\n<p>so <code>$servs</code> receives the number of elements of <code>@_</code>, that is <code>1</code> in your code.  Then the attempt to dereference that <code>1</code> with <code>%{$servs}</code> draws the error.</p>\n\n<p>Change it to <code>my ($servs) = @_;</code> where the <code>()</code> results in the list context for <code>=</code> <sup>&lowast;</sup></p>\n\n<p>A few comments.</p>\n\n<ul>\n<li><p>The hash with servers is likely to be used mostly via its reference.  Then why not use a hashref, <code>my $serv = { ... }</code></p></li>\n<li><p>There is never a reason to quote a scalar, like <code>\"$option\"</code>; just <code>switch($option)</code></p></li>\n<li><p>The <code>&amp;</code> in front of a sub is quite special; you mostly likely need <code>main()</code> instead of <code>&amp;main</code></p></li>\n<li><p>Second code sample has <code>stop(\"@s\");</code>, whereby <code>@s</code> is interpolated inside <code>\"\"</code>. So the sub receives a single string: array elements with spaces between them.  You need <code>stop(@s)</code></p></li>\n</ul>\n\n<p>You seem to be using <a href=\"http://perldoc.perl.org/5.8.9/Switch.html\" rel=\"nofollow noreferrer\">Switch</a> module. It is a rather non-trivial source filter; surely there are other ways to do what you need. The <a href=\"http://perldoc.perl.org/feature.html#The-%27switch%27-feature\" rel=\"nofollow noreferrer\">feature switch</a> is experimental, too.  See <a href=\"http://perldoc.perl.org/perlsyn.html#Switch-Statements\" rel=\"nofollow noreferrer\">Switch Statements in perlsyn</a></p>\n\n<hr>\n\n<p><sup>&lowast;</sup> &nbsp; The <code>my @args = @_;</code> serves the same purpose of course. Then process <code>@args</code> suitably.</p>\n\n<p>A commonly seen way to retrieve the first argument is also</p>\n\n<pre><code>sub fun {\n    my $first_arg = shift;  # same as: shift @_;\n    ...\n}\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/shift.html\" rel=\"nofollow noreferrer\">shift</a> removes an element from the front of its argument (array), and returns it; by default it acts on <code>@_</code> which you thus don't have to write.  </p>\n\n<p>This is often seen in object-oriented code, to get the object off of <code>@_</code> so that <code>@_</code> can then be worked with more easily. But it is also often used when <code>@_</code> has a single argument, for convenience.</p>\n"}], "owner": {"reputation": 199, "user_id": 7417672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ad237af02e20c5e05e2fc22985bf646?s=128&d=identicon&r=PG&f=1", "display_name": "MrAZ", "link": "https://stackoverflow.com/users/7417672/mraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 46232503, "answer_count": 1, "score": 1, "last_activity_date": 1506056477, "creation_date": 1505452533, "question_id": 46232091, "link": "https://stackoverflow.com/questions/46232091/pass-hash-to-subroutine-comes-to-error-in-perl", "title": "Pass hash to subroutine comes to error in perl", "body": "<p>My code as below,</p>\n\n<pre><code>my %srvs = (\n    serv_1 =&gt; {\n         agents =&gt; 'agent_path',\n         ...\n         ...\n    },\n    serv_2 =&gt; {\n         &lt;same like above&gt;\n    },\n    serv_3 =&gt; {\n          ...\n    ........\n    ........\n    serv_8 =&gt; {\n            ...\n    },\n);\n\n        switch (\"$option\") {\n                case 1  { print \"Option 1 selected. \\n\"; &amp;main; }\n                case 2  { print \"Option 2 selected. \\n\"; stop(\\%srvs); }\n                case 3  { print \"Option 3 selected. \\n\"; start(\\%srvs); }\n                else    { print \"Option are not valid. \\n\"; exit 0; }\n        }\n\nsub stop {\n        my $servs = @_;\n\n        foreach my $s_name (sort keys %{$servs}) {\n                print \"$s_name \\n\";             \n\n                my $ssh = Net::OpenSSH-&gt;new(\"&lt;user_id&gt;\\@$s_name\", timeout=&gt;30);\n                $ssh-&gt;error and die \"Unable to connect $s_name  ---&gt;  \" . $ssh-&gt;error and print \"\\n\";\n\n                $ssh-&gt;pipe_in(\"perl /&lt;path&gt;/&lt;script_name&gt;.pl stop all\") or die \"Unable to run command.\\n\";\n        }\n\n}\n</code></pre>\n\n<p>What I try to do is get a server name which is the keys of %srvs, which is (serv_1, serv2, etc.)</p>\n\n<p>When I run the code, I received below error,</p>\n\n<blockquote>\n  <p>Can't use string (\"1\") as a HASH ref while \"strict refs\" in use at\n  .pl line 260, &lt;> line 1.</p>\n</blockquote>\n\n<p>I also try different method which is call as array from the case control statement,</p>\n\n<pre><code>----\n----\ncase 2  { print \"Option 2 selected. \\n\"; my @s = sort keys %srvs; stop(\"@s\"); }\n---\n---\nsub stop {\n\n        my @servs = @_;\n\n        foreach my $s_name (@serv) {\n                print \"$s_name \\n\";             \n\n                my $ssh = Net::OpenSSH-&gt;new(\"&lt;id_server&gt;\\@$s_name\", timeout=&gt;30);\n                $ssh-&gt;error and die \"Unable to connect $s_name  ---&gt;  \" . $ssh-&gt;error and print \"\\n\";\n\n                $ssh-&gt;pipe_in(\"&lt;path_name&gt; &lt;script_name&gt;.pl stop all\") or die \"Unable to run command.\\n\";\n        }\n}\n</code></pre>\n\n<p>This code can be process, however it list all the server name (which is all the keys of %srvs) in single flat line, I cannot divide the list using foreach.</p>\n\n<p>Need assist since quite confuse with the passing method.</p>\n"}, {"tags": ["regex", "perl", "optimization", "pcre"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505449625, "post_id": 46228408, "comment_id": 79426777, "body": "Is this Perl or PCRE? You tagged both, said PCRE, but use a Perl match operator."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8611509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5f26104a3b7e3474147c46343ec178?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCats83", "link": "https://stackoverflow.com/users/8611509/ilovecats83"}, "edited": false, "score": 0, "creation_date": 1505425172, "post_id": 46228541, "comment_id": 79421089, "body": "&quot;cat&quot; and &quot;dog&quot; was an example.  Let&#39;s say I wanted to find &quot;cat&quot;,&quot;dog&quot;,&quot;bird&quot;,&quot;fish&quot; in any order.  Then I would have to either do the lookahead or a ton of permutations."}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "reply_to_user": {"reputation": 1, "user_id": 8611509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5f26104a3b7e3474147c46343ec178?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCats83", "link": "https://stackoverflow.com/users/8611509/ilovecats83"}, "edited": false, "score": 0, "creation_date": 1505425427, "post_id": 46228541, "comment_id": 79421185, "body": "Ah, thought you only had a maximum of two. In that case yeah, this solution would not be very scalable."}], "tags": [], "owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "is_accepted": false, "score": 0, "last_activity_date": 1505424653, "creation_date": 1505424653, "answer_id": 46228541, "question_id": 46228408, "link": "https://stackoverflow.com/questions/46228408/multi-line-pcre-w-lookahead-issue-counting-matches/46228541#46228541", "title": "Multi-line PCRE w\\ lookahead, issue counting matches", "body": "<p>The main problem isn't that you're using greedy quantifiers; it's that you're using using the <code>^</code> anchor along with lookahead and <code>.*</code>. The pattern will have no choice but to match either everything or nothing.</p>\n\n<p>Instead, just drop the lookahead approach and match <code>cat</code> and <code>dog</code> with anything in between, or the other way around:</p>\n\n<p><code>/cat.*?dog|dog.*?cat/gs</code></p>\n\n<p>In this case, you actually do need to specify lazy quantifiers with <code>?</code>, or else it will grab all matches as one match like you feared.</p>\n\n<p><a href=\"https://regex101.com/r/nv9Nj7/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/nv9Nj7/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1505440894, "creation_date": 1505440894, "answer_id": 46230602, "question_id": 46228408, "link": "https://stackoverflow.com/questions/46228408/multi-line-pcre-w-lookahead-issue-counting-matches/46230602#46230602", "title": "Multi-line PCRE w\\ lookahead, issue counting matches", "body": "<p>Just a suggestion, but perhaps this is more readable than a complex regex</p>\n\n<pre><code>use List::MoreUtils 'all';\n\nmy @things = qw( cat dog bird fish );\n\nfor my $line ( @lines ) {\n    if ( all { $line =~ / \\b $_ \\b /x } @things ) {\n        # DO STUFF\n    }\n}\n</code></pre>\n\n<p>The <code>all</code> function is part of <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a>, but also available in <a href=\"https://metacpan.org/pod/List::AllUtils\" rel=\"nofollow noreferrer\">List::AllUtils</a> and <a href=\"https://metacpan.org/pod/List::SomeUtils\" rel=\"nofollow noreferrer\">List::SomeUtils</a></p>\n\n<p>This implementation relies on you processing your string line by line, so you might do something like <code>for my line ( split(/\\n/, $string) ) { ... }</code></p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1505455681, "last_edit_date": 1505455681, "creation_date": 1505442433, "answer_id": 46230804, "question_id": 46228408, "link": "https://stackoverflow.com/questions/46228408/multi-line-pcre-w-lookahead-issue-counting-matches/46230804#46230804", "title": "Multi-line PCRE w\\ lookahead, issue counting matches", "body": "<p>CAustin's answer can be simplified to:</p>\n\n<pre><code>/(cat|dog).*?(?!\\1)(?:cat|dog)/gs\n</code></pre>\n\n<p>which is easier to expand to more strings.  With 4 strings:</p>\n\n<pre><code>/(cat|dog|bird|fish).*?(?!\\1)(cat|dog|bird|fish).*?(?!\\1|\\2)(cat|dog|bird|fish).*?(?!\\1|\\2|\\3)(?:cat|dog|bird|fish)/gs\n</code></pre>\n\n<p>and restricting some useless backtracking:</p>\n\n<pre><code>/(cat|dog|bird|fish)(?&gt;.*?(?!\\1)(cat|dog|bird|fish))(?&gt;.*?(?!\\1|\\2)(cat|dog|bird|fish))(?&gt;.*?(?!\\1|\\2|\\3)(?:cat|dog|bird|fish))/gs\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8611509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e5f26104a3b7e3474147c46343ec178?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCats83", "link": "https://stackoverflow.com/users/8611509/ilovecats83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1505455681, "creation_date": 1505424008, "last_edit_date": 1505449641, "question_id": 46228408, "link": "https://stackoverflow.com/questions/46228408/multi-line-pcre-w-lookahead-issue-counting-matches", "title": "Multi-line PCRE w\\ lookahead, issue counting matches", "body": "<p>I am trying to perform a regex that matches if both the word cat AND dog are in the regex in any order with multi-line support</p>\n\n<pre><code>matches\n\ncat asdjfaldsfj dog\n####\ndoes NOT match\n\ncat adfasdf8989\n####\nmatches\n\ndog adlsjf88989 cat\n####\nmatches\n\ncat asdf8a89sdf8\na sdf asd f ads f ads fasdf\ndog  a dsf ads fads f\nasdfadsfadsf\n</code></pre>\n\n<p>The regex I'm using is pretty simple</p>\n\n<pre><code>/^(?=.*\\bcat\\b)(?=.*\\bdog\\b).*$/gs\n</code></pre>\n\n<p>The problem is that this only finds the first occurrence since it is greedy.  I really want the following to count two matches but it only matches once</p>\n\n<pre><code>cat asdf8a89sdf8\na sdf asd f ads f ads fasdf\ndog  a dsf ads fads f\nasdfadsfadsf\ncat asdf8a89sdf8\na sdf asd f ads f ads fasdf\ndog  a dsf ads fads f\nasdfadsfadsf\n</code></pre>\n\n<p>Even without the second set of cat STUFF dog STUFF the regex still matches until the end.</p>\n\n<p>I'm using regex101.com to test.</p>\n"}, {"tags": ["perl", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8610767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efec6dc5fc2ea6049a1e923d328086ab?s=128&d=identicon&r=PG&f=1", "display_name": "p_agarwal", "link": "https://stackoverflow.com/users/8610767/p-agarwal"}, "edited": false, "score": 0, "creation_date": 1505439198, "post_id": 46226065, "comment_id": 79424639, "body": "I didn&#39;t consider that. I only posted the code that I couldn&#39;t explain. Thanks for pointing out the error though."}], "tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": false, "score": 0, "last_activity_date": 1505419044, "last_edit_date": 1505419044, "creation_date": 1505413884, "answer_id": 46226065, "question_id": 46225990, "link": "https://stackoverflow.com/questions/46225990/how-do-i-resolve-one-argument-passed-to-a-subroutine-defined-to-accept-2-paramet/46226065#46226065", "title": "How do I resolve one argument passed to a subroutine defined to accept 2 parameters in Perl", "body": "<p>The surrounding curly braces create a hash <em>reference</em> or hashref, which is a single scalar. The argument values will be</p>\n\n<ul>\n<li><code>$pkg</code> &mdash; the name of the containing package, likely <code>\"P_module\"</code></li>\n<li><code>$input</code> &mdash; reference to the supplied hash</li>\n</ul>\n\n<p>The code <code>$input-&gt;{key}</code> accesses the value associated with the key <code>\"key\"</code>, which is supplied by the caller with</p>\n\n<pre><code>my $new_obj = new P_module({key =&gt; 'abc'});\n</code></pre>\n\n<p>It is considered better style to write this as</p>\n\n<pre><code>my $new_obj = P_module-&gt;new({key =&gt; 'abc'});\n</code></pre>\n\n<p>You might add another key, as in</p>\n\n<pre><code>my $new_obj = P_module-&gt;new({key =&gt; 'abc', other =&gt; 'unused'});\n</code></pre>\n\n<p>The value associated with <code>\"key\"</code> gets copied into the object&rsquo;s state with</p>\n\n<pre><code>$obj-&gt;{key} = $input-&gt;{key};\n</code></pre>\n\n<p>Note that Perl subroutines return the value of the last expression, so your code has a bug. You want the last line of <code>P_module::new</code> to be</p>\n\n<pre><code>bless ($obj, ref($pkg)||$pkg);\n</code></pre>\n\n<p>Because that will return the blessed object that can then be used to call other methods, <em>e.g.</em>,</p>\n\n<pre><code>my $new_obj = new P_module({key =&gt; 'abc'});\nprint $new_obj-&gt;other_method_that_you_must_define(), \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8610767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efec6dc5fc2ea6049a1e923d328086ab?s=128&d=identicon&r=PG&f=1", "display_name": "p_agarwal", "link": "https://stackoverflow.com/users/8610767/p-agarwal"}, "edited": false, "score": 0, "creation_date": 1505438530, "post_id": 46226083, "comment_id": 79424503, "body": "Thanks so very much. That was a very helpful explanation :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1505414815, "last_edit_date": 1505414815, "creation_date": 1505413930, "answer_id": 46226083, "question_id": 46225990, "link": "https://stackoverflow.com/questions/46225990/how-do-i-resolve-one-argument-passed-to-a-subroutine-defined-to-accept-2-paramet/46226083#46226083", "title": "How do I resolve one argument passed to a subroutine defined to accept 2 parameters in Perl", "body": "<p>First of all,</p>\n\n<pre><code>my $new_obj = new P_module({ key =&gt; 'abc' });\n</code></pre>\n\n<p>is better written as</p>\n\n<pre><code>my $new_obj = P_module-&gt;new({ key =&gt; 'abc' });\n</code></pre>\n\n<p>This is short for</p>\n\n<pre><code>my %anon = ( key =&gt; 'abc' );\nmy $new_obj = P_module-&gt;new(\\%anon);\n</code></pre>\n\n<hr>\n\n<p>When making a method call, the invocant (what's left of the <code>-&gt;</code>) is passed as the first argument. That means <code>$pkg</code> is the string <code>P_module</code>, and <code>$input</code> is the reference returned by <code>{ key =&gt; 'abc' }</code>.</p>\n\n<p>Since <code>$input</code> is a reference to a hash, <code>$input-&gt;{key}</code> gets the value of the element with key <code>key</code> from the referenced hash.</p>\n\n<hr>\n\n<p>How I would have written this:</p>\n\n<pre><code>sub new {\n    my ($class, %args) = @_;\n    my $self = bless({}, $class);      # If base class.\n    #my $self = $class-&gt;SUPER::new();  # If inheriting.\n    $self-&gt;{key} = $args{$key};\n    return $self;\n }\n\n my $obj = P_module-&gt;new( key =&gt; 'abc' );\n</code></pre>\n\n<p>There's no need for a hash in the caller, and there's no reason to support <code>$existing_obj-&gt;new</code>. It also uses more standard names <code>$class</code> and <code>$self</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505414319, "post_id": 46226124, "comment_id": 79415855, "body": "I agree. In the unlikely event that you needed <code>$existing_obj-&gt;new</code>, you could still use <code>ref($existing_obj)-&gt;new</code>. This (and a separate <code>clone</code> constructor if cloning is required) is far cleaner, as far as I&#39;m concerned. That said, this answer is a really a comment, and I would mark it as such."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505415082, "post_id": 46226124, "comment_id": 79416260, "body": "If the comment system allowed the space and formatting necessary to make a detailed explanation, I would have made it a comment."}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 2, "last_activity_date": 1505414099, "creation_date": 1505414099, "answer_id": 46226124, "question_id": 46225990, "link": "https://stackoverflow.com/questions/46225990/how-do-i-resolve-one-argument-passed-to-a-subroutine-defined-to-accept-2-paramet/46226124#46226124", "title": "How do I resolve one argument passed to a subroutine defined to accept 2 parameters in Perl", "body": "<p>Do you have a reason that you have this:</p>\n\n<pre><code>bless ($obj, ref($pkg)||$pkg);\n</code></pre>\n\n<p>instead of this?</p>\n\n<pre><code>bless ($obj, $pkg);\n</code></pre>\n\n<p>If not, then I'm assuming you cut &amp; pasted it from some other code somewhere.  What you probably want is the latter.</p>\n\n<p>That <code>ref($pkg)||$pkg</code> allows you to do this:</p>\n\n<pre><code>my $new_object = $existing_obj-&gt;new;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>my $new_object = new Classname;\n</code></pre>\n\n<p>Since you probably don't need to do that, then just stick with</p>\n\n<pre><code>bless ($obj, $pkg);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505416051, "post_id": 46226505, "comment_id": 79416763, "body": "<code>my $self = my $self = { %$input }; return bless $self, $class;</code> is more simply written <code>return bless { %$input }, $class;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505416704, "post_id": 46226505, "comment_id": 79417103, "body": "@ikegami   I pulled back from showing yet more compact ways (I had that exact form already typed), given the basic purpose of this.  But it&#39;s tempting ... added.  Thank you for the edit."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 0, "last_activity_date": 1529689549, "last_edit_date": 1529689549, "creation_date": 1505415706, "answer_id": 46226505, "question_id": 46225990, "link": "https://stackoverflow.com/questions/46225990/how-do-i-resolve-one-argument-passed-to-a-subroutine-defined-to-accept-2-paramet/46226505#46226505", "title": "How do I resolve one argument passed to a subroutine defined to accept 2 parameters in Perl", "body": "<p>When you call a method the object itself is passed behind the scenes; or, if the sub uses <a href=\"http://perldoc.perl.org/functions/bless.html\" rel=\"nofollow noreferrer\">bless</a> then it is the constructor and the class name is passed instead.  So any method receives that, the object or the class name, as its first argument. The rest are arguments explicitly passed to the method.</p>\n\n<p>You pass a <em>hash reference</em> <code>{...}</code>, what is a scalar. So that is assigned to <code>$input</code>, given that the \"quitely\" passed class name is assigned to <code>$pkg</code>.</p>\n\n<p>The constructor for that interface, with a hash reference, is most customarily and simply written as</p>\n\n<pre><code>sub new {\n    my ($class, $input) = @_;\n    my $self = { %$input };\n    return bless $self, $class;\n}\n</code></pre>\n\n<p>where <code>return</code> may be omitted since the return of the last evaluated statement is returned. The last two lines can be written as <code>return bless { %$input }, $class;</code>, and an (anonymous) hashref is initialized, blessed into its package <code>$class</code> (so it's an object), and returned.</p>\n\n<p>Note that you don't have to pass a hashref; a plain hash makes for cleaner interface.  A reference need be used if there may be yet other arguments, \nto make it possible to parse all that.</p>\n\n<p>However, you normally want to process arguments. For one, you <strong>must</strong> check that they conform to what your class supports, and not just blindly assign the keys passed by a user to the attributes. Then work out defaults if you provide them, check values if you need to, etc.</p>\n\n<p>This initialization of data is sometimes split into a separate subroutine.  For example</p>\n\n<pre><code>sub new {\n    my ($class, $input) = @_;\n    my $self = {};\n    bless $self, $class;       # $self is an object now\n    $self-&gt;_init($input);      # on which methods can be called\n    return $self;\n}\n\nsub _init {\n    my ($self, $args) = @_;\n    # Check arguments, work out defaults (etc), \n    # then assign to self as appropriate\n    %$self = %$args;\n}\n</code></pre>\n\n<p>where the code writes \"back\" via reference so that <code>$self</code> in <code>new</code> is updated.</p>\n\n<p>This should be used with the normal method invocation </p>\n\n<pre><code>my $new_obj = P_module-&gt;new({key =&gt; 'abc', other =&gt; '...'});\n</code></pre>\n\n<p>and <strong>not</strong> using <em>indirect notation</em> <code>new P_module</code>.  The constructor, mostly called <code>new</code> (merely by custom &ndash; you can call it what you want), is a normal sub special only because it <code>bless</code>es a reference (normally a hash reference) and is thus passed the class name instead of the object. Thus it \"knows\" its package and is an object. </p>\n\n<p>Literature: <a href=\"http://perldoc.perl.org/perlmod.html#Perl-Modules\" rel=\"nofollow noreferrer\">perlmod</a> (a class is a package), tutorial <a href=\"http://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perlootut</a>, and reference <a href=\"http://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perlobj</a>.</p>\n\n<p>Once you get comfortable with Perl's built-in object-oriented facilities, what I recommend doing, there are many modules that make all this (and much more) easier to do. </p>\n\n<p>The first to recommend are the very modern <a href=\"http://search.cpan.org/~ether/Moose-2.2006/lib/Moose.pm\" rel=\"nofollow noreferrer\">Moose</a> and its light-weight counterpart <a href=\"http://search.cpan.org/~haarg/Moo-2.003002/lib/Moo.pm\" rel=\"nofollow noreferrer\">Moo</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8610767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efec6dc5fc2ea6049a1e923d328086ab?s=128&d=identicon&r=PG&f=1", "display_name": "p_agarwal", "link": "https://stackoverflow.com/users/8610767/p-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 46226083, "answer_count": 4, "score": 1, "last_activity_date": 1529689549, "creation_date": 1505413570, "last_edit_date": 1505413794, "question_id": 46225990, "link": "https://stackoverflow.com/questions/46225990/how-do-i-resolve-one-argument-passed-to-a-subroutine-defined-to-accept-2-paramet", "title": "How do I resolve one argument passed to a subroutine defined to accept 2 parameters in Perl", "body": "<p>I am creating a new object as follows:</p>\n\n<pre><code>my $new_obj = new P_module({key =&gt; 'abc'});\n</code></pre>\n\n<p>The P_module has a constructor defined as follows:</p>\n\n<pre><code>sub new {\n    my ($pkg, $input) = @_;\n    my $obj = {};\n    bless ($obj, ref($pkg)||$pkg);\n    $obj-&gt;{key} = $input-&gt;{key};\n }\n</code></pre>\n\n<p>From what I have read, since a hash is being passed as argument to new, it will be represented as a 2-element array. So, <code>pkg</code> should be <code>key</code> and <code>input</code> should be <code>abc</code>. Then, how does <code>obj</code> come to hold a key <code>key</code> and what does <code>$input-&gt;{key}</code> even mean?</p>\n"}, {"tags": ["perl", "amazon-web-services", "amazon-redshift", "amazon-redshift-spectrum"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "edited": false, "score": 0, "creation_date": 1505441440, "post_id": 46227616, "comment_id": 79425119, "body": "Can I use this tool to connect from a Linux server which is present outside the cluster?I am assuming I have psql installed in the Linux server."}, {"owner": {"reputation": 1410, "user_id": 3713955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/189c41b6e8cd9db66d5adc85813172cc?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/3713955/rahul-gupta"}, "reply_to_user": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "edited": false, "score": 0, "creation_date": 1505483051, "post_id": 46227616, "comment_id": 79445855, "body": "Yes, you can, as long as you have necessary credentials and permissions."}, {"owner": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "edited": false, "score": 0, "creation_date": 1505500279, "post_id": 46227616, "comment_id": 79455353, "body": "Hi @Rahul Gupta, Thanks for the response.I tried it out actually it worked.Just one additional ask.There is a redshift-CLI as per the Redshift documentation.Does it allow the same functionality?"}, {"owner": {"reputation": 1410, "user_id": 3713955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/189c41b6e8cd9db66d5adc85813172cc?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/3713955/rahul-gupta"}, "reply_to_user": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "edited": false, "score": 0, "creation_date": 1505508343, "post_id": 46227616, "comment_id": 79458695, "body": "I don&#39;t think so. You will need a client because CLI is just for managing the clusters."}, {"owner": {"reputation": 1410, "user_id": 3713955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/189c41b6e8cd9db66d5adc85813172cc?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/3713955/rahul-gupta"}, "reply_to_user": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "edited": false, "score": 0, "creation_date": 1505508535, "post_id": 46227616, "comment_id": 79458761, "body": "And if CLI is the only option you have, you can use Data Pipeline, which is usually used to automate the process."}], "tags": [], "owner": {"reputation": 1410, "user_id": 3713955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/189c41b6e8cd9db66d5adc85813172cc?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/3713955/rahul-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1505420405, "creation_date": 1505420405, "answer_id": 46227616, "question_id": 46224991, "link": "https://stackoverflow.com/questions/46224991/execute-copy-command-on-redshift-database-from-a-linux-server-outside-aws-cluste/46227616#46227616", "title": "Execute COPY command on Redshift database from a Linux server outside AWS cluster", "body": "<p>Are you looking for this. <br>\n<a href=\"http://docs.aws.amazon.com/redshift/latest/mgmt/connecting-from-psql.html\" rel=\"nofollow noreferrer\">psql- a terminal-based front end from PostgreSQL</a></p>\n\n<p>You just have to connect to your redshift cluster with the connection configuration and then you can execute any query on the cluster. <br> <br>\nPS - The file to be copied/Unload always has to be on s3.\n<br>If I\u2019ve made a bad assumption please comment and I\u2019ll refocus my answer.</p>\n"}], "owner": {"reputation": 53, "user_id": 6644371, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/da19660ddfb56b73b938fd4db79e391a?s=128&d=identicon&r=PG&f=1", "display_name": "indranil", "link": "https://stackoverflow.com/users/6644371/indranil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 46227616, "answer_count": 1, "score": 0, "last_activity_date": 1505420405, "creation_date": 1505409619, "question_id": 46224991, "link": "https://stackoverflow.com/questions/46224991/execute-copy-command-on-redshift-database-from-a-linux-server-outside-aws-cluste", "title": "Execute COPY command on Redshift database from a Linux server outside AWS cluster", "body": "<p>I want to load data into Redshift database from amazon S3 using 'COPY' command.But I want to execute it from a shell/perl  script present in a Linux machine present outside AWS cluster.I wanted to know if there is any Redshift  client that can be installed in the Linux machine available to help me achieve this similar to the SnowSQL client for SnowFlake?</p>\n"}, {"tags": ["linux", "perl", "diskspace"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1505405382, "post_id": 46222485, "comment_id": 79410661, "body": "Please don&#39;t link to images of code. It is much better to paste your actual code into the question."}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 8263154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a95488587a93c3c1863a022a4bd33a51?s=128&d=identicon&r=PG&f=1", "display_name": "ilux", "link": "https://stackoverflow.com/users/8263154/ilux"}, "is_accepted": true, "score": 0, "last_activity_date": 1505412370, "last_edit_date": 1592644375, "creation_date": 1505403843, "answer_id": 46223374, "question_id": 46222485, "link": "https://stackoverflow.com/questions/46222485/get-mounted-disk-space-on-temp-in-linux-machine/46223374#46223374", "title": "Get mounted disk space on Temp in Linux machine", "body": "<p>The <code>df</code> function from <a href=\"https://metacpan.org/pod/Filesys::Df\" rel=\"nofollow noreferrer\"><code>Filesys::Df</code></a>\nmodule returns a reference to a hash (<a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\"><code>perldoc perlreftut</code></a>) with <code>fs</code> info fields</p>\n<h3>Example:</h3>\n<pre><code>$VAR1 = {\n    user_bavail =&gt; '170614.21875',\n    user_blocks =&gt; '179796.8203125',\n    user_fused  =&gt; 408762,\n    used        =&gt; '9182.6015625',\n    fused       =&gt; 408762,\n    bavail      =&gt; '170614.21875',\n    user_used   =&gt; '9182.6015625',\n    su_bavail   =&gt; '180077.20703125',\n    ffree       =&gt; 11863876,\n    fper        =&gt; 3,\n    user_favail =&gt; 11863876,\n    favail      =&gt; 11863876,\n    user_files  =&gt; 12272638,\n    blocks      =&gt; '189259.80859375',\n    su_favail   =&gt; 11863876,\n    files       =&gt; 12272638,\n    per         =&gt; 5,\n    su_blocks   =&gt; '189259.80859375',\n    bfree       =&gt; '180077.20703125',\n    su_files    =&gt; 12272638\n};\n</code></pre>\n<p>So you free space is</p>\n<pre><code>my $ref = df($dir, 1);\nprint $ref-&gt;{bavail} . &quot; bytes\\n&quot;;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4405176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zf1mJjRH6FM/AAAAAAAAAAI/AAAAAAAAAQQ/4B8PBl2Tn5k/photo.jpg?sz=128", "display_name": "Pushkar Ghatpande", "link": "https://stackoverflow.com/users/4405176/pushkar-ghatpande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 46223374, "answer_count": 1, "score": -2, "last_activity_date": 1505412370, "creation_date": 1505401328, "last_edit_date": 1505411092, "question_id": 46222485, "link": "https://stackoverflow.com/questions/46222485/get-mounted-disk-space-on-temp-in-linux-machine", "title": "Get mounted disk space on Temp in Linux machine", "body": "<p>I am new to perl world. I written one perl script for calculating free disk space. But whenever output generates, it gives me different number than what actually shows using df -h command. </p>\n\n<p>So my requirement is i want to show specific mounted free disk space. E.g I want to show only /boot \"Use%\" figure and it should match with df -h command figure. </p>\n\n<p>Please find my script for reference as follows by clicking link named Actual Script. </p>\n\n<p><a href=\"https://i.stack.imgur.com/LOCwV.jpg\" rel=\"nofollow noreferrer\">Actual Script</a></p>\n"}, {"tags": ["arrays", "perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 2156, "user_id": 7273347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/381f953406e0dc6301d1d0bdb6f95c24?s=128&d=identicon&r=PG&f=1", "display_name": "airborne", "link": "https://stackoverflow.com/users/7273347/airborne"}, "edited": false, "score": 0, "creation_date": 1505390512, "post_id": 46218521, "comment_id": 79399561, "body": "Yes, you are right. I think I did misinterpret the error message. I thought for some reason the objects itself are undefined."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1505407544, "post_id": 46218521, "comment_id": 79412002, "body": "Without a declaration for <code>first</code>, <code>first {$_-&gt;TestName eq $sTestcase} @aTestcaseList</code> was interpreted as the <code>(do {$_-&gt;TestName eq $sTestcase})-&gt;first(@aTestcaseList)</code> indirect method call. <code>$_</code> is undefined, so <code>$_-&gt;TestName</code> threw that error."}], "tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 4, "last_activity_date": 1505390316, "creation_date": 1505390316, "answer_id": 46218521, "question_id": 46218015, "link": "https://stackoverflow.com/questions/46218015/using-listutil-first-on-an-array-of-moose-objects/46218521#46218521", "title": "Using List::Util first on an array of Moose objects", "body": "<p>You forgot to import the function <code>first</code> from <code>List::Util</code> like</p>\n\n<pre><code>use List::Util qw(first);\n</code></pre>\n"}], "owner": {"reputation": 2156, "user_id": 7273347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/381f953406e0dc6301d1d0bdb6f95c24?s=128&d=identicon&r=PG&f=1", "display_name": "airborne", "link": "https://stackoverflow.com/users/7273347/airborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 46218521, "answer_count": 1, "score": 1, "last_activity_date": 1505397936, "creation_date": 1505388825, "last_edit_date": 1505397936, "question_id": 46218015, "link": "https://stackoverflow.com/questions/46218015/using-listutil-first-on-an-array-of-moose-objects", "title": "Using List::Util first on an array of Moose objects", "body": "<p>I have an array called <code>aTestCaseList</code> which is initialized and filled with (Moose) objects of type \"Testcase\". As expected I can print out the Attribute <code>TestName</code> of every <code>Testcase</code> Object in <code>aTestCaseList</code>. But when I try to find the first Object in the list named \"Test4\" using <a href=\"https://perldoc.perl.org/List/Util.html#first\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/List/Util.html#first</a> I get the following error</p>\n\n<blockquote>\n  <p>Can't call method \"TestName\" on an undefined value</p>\n</blockquote>\n\n<p>Why are the objects in the array suddenly undefined?</p>\n\n<pre><code>use Testcase;\n\nmy @aTestcaseList=();\nfor (my $i=1; $i &lt;= 9; $i++) {\n  push(@aTestcaseList,Testcase-&gt;new(\"Test\".$i));\n}\nmy $sTestcase=\"Test4\";\nforeach my $sTestDummy(@aTestcaseList)\n{\n     #Works as expected and prints: Test1 Test2 Test3 ... Test9\n     print $sTestDummy-&gt;TestName.\" \"; \n} \n# throws the error:\nmy $sFindTest=first {$_-&gt;TestName eq $sTestcase} @aTestcaseList;\n\npackage Testcase;\nuse Moose;\nuse namespace::autoclean;\n\nhas 'TestName' =&gt; (is =&gt;'ro',isa=&gt;'Str');\n\naround BUILDARGS =&gt; sub\n{\n    my $orig = shift;\n    my $class = shift;\n\n    if ( @_ == 1 &amp;&amp; ! ref $_[0] ) {\n        return $class-&gt;$orig(TestName =&gt; $_[0]);\n    }\n    else {\n        return $class-&gt;$orig(@_);\n    }\n};\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n1;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505381014, "post_id": 46215052, "comment_id": 79393130, "body": "<code>!-d</code> tests that the file is not a directory. <code>-o</code> check the file ownership"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1505408464, "post_id": 46215052, "comment_id": 79412588, "body": "For operators that take a file handle, you can pass the name of a glob. <code>-d _</code> is short for <code>-d *_</code> just like <code>print STDOUT ...</code> is short for <code>print *STDOUT ...</code>"}, {"owner": {"reputation": 985, "user_id": 1437501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2d65100a83f4e213217cd04546f312?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1437501/matthias"}, "edited": false, "score": 1, "creation_date": 1505424244, "post_id": 46215052, "comment_id": 79420752, "body": "Does your code actually read &quot;if (...): raise Exception(...)&quot;? Does that syntax come from some module?"}, {"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "reply_to_user": {"reputation": 985, "user_id": 1437501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2d65100a83f4e213217cd04546f312?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1437501/matthias"}, "edited": false, "score": 0, "creation_date": 1505436506, "post_id": 46215052, "comment_id": 79424092, "body": "@Matthias Yes, it is. I didn&#39;t write it myself, it is a part of TightVNC source code. Is there any problem there?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 3, "creation_date": 1505449614, "post_id": 46215052, "comment_id": 79426770, "body": "@Kim The TightVNC source code doesn&#39;t contain that. tightvnc-1.3.10_unixsrc.tar.bz2&#39;s vncserver contains <code>if (!-d _ || !-o _ || ($vncUserDirUnderTmp &amp;&amp; ($mode &amp; 0777) != 0700)) {     die &quot;$prog: Wrong type or access mode of $vncUserDir.\\n&quot;; }</code>. What you put in your question looks like a strange mix of Perl and Python."}, {"owner": {"reputation": 985, "user_id": 1437501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2d65100a83f4e213217cd04546f312?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1437501/matthias"}, "edited": false, "score": 0, "creation_date": 1505492984, "post_id": 46215052, "comment_id": 79451922, "body": "@hvd Exactly^^ I was just curious about the syntax, because I never saw perl code written like that. I thought maybe they added new syntax with 5.2x (but did not find it in a delta), or you are using some module. Since no one pointed out the syntax error, I thought it might be valid with some version of perl or some module."}, {"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "edited": false, "score": 2, "creation_date": 1505648390, "post_id": 46215052, "comment_id": 79490253, "body": "Ah...That&#39;s my mistake. I had tried to convert Perl code to Python. I edited the code. I&#39;m sorry ."}], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1521946120, "post_id": 46215203, "comment_id": 85946726, "body": "But what is the initial value of that stat cache? I notice that it contains something even if there was no previous stat call. Is it just random garbage?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1522274002, "post_id": 46215203, "comment_id": 86097230, "body": "@AnT An interesting point. I&#39;d guess that it could refer to the script itself, but I can&#39;t get anything out of it. Among other attempts, I print all filetests (like <code>-s _</code>), before anything else in the script, and they&#39;re all <code>undef</code>.  So I can&#39;t confirm that the <code>stat</code> cache is set (while the handle itself, <code>*_</code>, is)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 60, "last_activity_date": 1506010615, "last_edit_date": 1506010615, "creation_date": 1505380835, "answer_id": 46215203, "question_id": 46215052, "link": "https://stackoverflow.com/questions/46215052/what-is-single-underscore-in-perl-without-or/46215203#46215203", "title": "What is _ (single underscore) in Perl without $ or @?", "body": "<p>When used with a <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"noreferrer\">filetest (-X)</a> operator the <code>stat</code> structure of the previous file test is used</p>\n\n<blockquote>\n  <p>If any of the file tests (or either the <code>stat</code> or <code>lstat</code> operator) is given the special filehandle consisting of a solitary underline, then the <code>stat</code> structure of the previous file test (or <code>stat</code> operator) is used, saving a system call.<br>\n  ...<br>\n  Example:  </p>\n\n<pre><code>stat($filename);  \nprint \"Readable\\n\" if -r _;  \nprint \"Writable\\n\" if -w _;\n...\n</code></pre>\n</blockquote>\n\n<p>So in your example <code>!-d _</code> tests whether the file last <code>stat</code>-ed isn't a directory.</p>\n\n<p><strong>Update</strong> &nbsp;  </p>\n\n<p>The unusual <code>_</code> is really a typeglob <code>*_</code> but with operators expecting a filehandle the <code>*</code> may be omitted, like <code>&lt;*STDIN&gt;</code> may be written as <code>&lt;STDIN&gt;</code>.  It is found in the symbol table</p>\n\n<pre><code>print *{$main::{_}}{IO}, \"\\n\";   # --&gt;  IO::Handle=IO(0x2311970)\n</code></pre>\n\n<p>In a one-liner the <code>*_</code> gets set up only after calls to <code>stat</code> and <code>_</code> are made.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1505408555, "post_id": 46216094, "comment_id": 79412643, "body": "They&#39;re actually queued (executed left to right), right?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 8, "creation_date": 1505408626, "post_id": 46216094, "comment_id": 79412687, "body": "I learned something new today! (Didn&#39;t know about stackable file tests.)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 42, "last_activity_date": 1505836700, "last_edit_date": 1505836700, "creation_date": 1505383219, "answer_id": 46216094, "question_id": 46215052, "link": "https://stackoverflow.com/questions/46215052/what-is-single-underscore-in-perl-without-or/46216094#46216094", "title": "What is _ (single underscore) in Perl without $ or @?", "body": "<p>When you call one of the file test operators (<code>-f</code>, <code>-d</code>, <code>-s</code>, etc) Perl actually makes a call to the operating system's <code>stat</code> function. The <code>stat</code> function returns a structure full of all sorts of interesting information about the file in question, but each of the file test operators only looks at one of the fields from that structure (is it a file? is it a directory? how big is it?)</p>\n\n<p>It's common that you might want to know more that one piece of information about a file (is it a file? can I read it? can I execute it?) The naive way to write that is:</p>\n\n<pre><code>if (-f $file and -r $file and -x $file)\n</code></pre>\n\n<p>But that makes three calls to <code>stat</code> - with each one of them only looking at one of the fields from the structure. To mitigate that, Perl is clever and caches the results of the most recent call to <code>stat</code>. It is cached against the special filehandle <code>_</code>. So a more efficient way to write the same code is:</p>\n\n<pre><code>if (-f $file and -r _ and -x _)\n</code></pre>\n\n<p>That only makes one call to <code>stat</code>.</p>\n\n<p>Since Perl 5.10, you can also use \"stacked file tests\" and write this code as:</p>\n\n<pre><code>if (-x -r -f $file) # Note reversed order of operators\n</code></pre>\n\n<p><strong>Update:</strong> <a href=\"https://perldoc.perl.org/perlfunc.html#-X-FILEHANDLE\" rel=\"noreferrer\">perldoc</a> says this about stacked file operators.</p>\n\n<blockquote>\n  <p>As of Perl 5.10.0, as a form of purely syntactic sugar, you can\n  stack file test operators, in a way that <code>-f -w -x $file</code> is\n  equivalent to<code>\"-x $file &amp;&amp; -w _ &amp;&amp; -f _</code>. (This is only fancy\n  syntax: if you use the return value of <code>-f $file</code> as an argument\n  to another filetest operator, no special magic will happen.)</p>\n</blockquote>\n"}], "owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3345, "favorite_count": 5, "answer_count": 2, "score": 46, "last_activity_date": 1506010615, "creation_date": 1505380468, "last_edit_date": 1505648335, "question_id": 46215052, "link": "https://stackoverflow.com/questions/46215052/what-is-single-underscore-in-perl-without-or", "title": "What is _ (single underscore) in Perl without $ or @?", "body": "<p>I have some code like this:</p>\n\n<pre><code>if (!-d _ || !-o _ || ($vncUserDirUnderTmp &amp;&amp; ($mode &amp; 0777) != 0700)) {\n    raise Exception(\"$prog: Wrong type or access mode of $vncUserDir.\\n\")\n}\n</code></pre>\n\n<p>I could find information about <code>@_</code> and <code>$_</code> in Perl but not about <code>_</code> alone.\nWhat does it mean in <code>-d _</code> and <code>-o _</code> here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505378475, "post_id": 46214334, "comment_id": 79391369, "body": "should it not be <code>use external_pm;</code> Your pm files and directories should Match your module names."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505378488, "post_id": 46214334, "comment_id": 79391377, "body": "Where is located your external module? Let&#39;s say that it is under lib/ExtScript.pm, you can run your main script like: perl -Ilib main.pl"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505378650, "post_id": 46214334, "comment_id": 79391476, "body": "@GerhardBarnard It&#39;s just a folder with scripts so the folder name won&#39;t match the sript name."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505378684, "post_id": 46214334, "comment_id": 79391502, "body": "@mabe02 The path is  <code>D:&#47;external_pm&#47;ExtScript.pm</code>. That&#39;s why I push the directory <code>D:&#47;external_pm</code> and try to use the <code>ExtScript.pm</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505378762, "post_id": 46214334, "comment_id": 79391548, "body": "then you could just do <code>use external_pm::ExtScript;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1505408808, "post_id": 46214334, "comment_id": 79412787, "body": "Tip: If <code>d:&#47;external_pm&#47;</code> has modules you want to make accessible to all your scripts, I would set env var PERL5LIB in this case. (Right-click on my computer | Properties | Advanced | Environment Variables)"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505457782, "post_id": 46214334, "comment_id": 79429855, "body": "@ikegami Thanks for the suggestion, I was looking at this possibility too, but the code snippet is part of a bigger application that will be deployed on different PC&#39;s and the external modules will be copied by convention in <code>external_pm</code> ( that&#39;s just a generic name to make the question more understandable), so I won&#39;t be able to change de environment before execution. I went with <code>require</code> finally."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505457927, "post_id": 46214334, "comment_id": 79429928, "body": "Might make more sense to deploy it in the same dir as the script (<code>use FindBin qw( $RealBin ); use lib $RealBin;</code>) or a subdir (<code>use FindBin qw( $RealBin ); use lib &quot;$RealBin&#47;lib&quot;;</code>)"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1505458369, "post_id": 46214334, "comment_id": 79430174, "body": "@ikegami makes a lot of sense for me too, but apparently not for the guys that developed the application, I can&#39;t change the location at this moment (it&#39;s a 50k lines+ application). I will keep in mind this convention when I will have the possibility to implement it."}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1505379313, "post_id": 46214425, "comment_id": 79391931, "body": "Thank you for the answer!"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1505378644, "creation_date": 1505378644, "answer_id": 46214425, "question_id": 46214334, "link": "https://stackoverflow.com/questions/46214334/how-can-i-use-an-external-lib-in-a-begin-block/46214425#46214425", "title": "How can I use an external lib in a BEGIN block", "body": "<p><code>use ExtScript;</code> is executed before <code>push @INC</code>. Either</p>\n\n<ul>\n<li>move <code>use ExtScript;</code> out of the <code>BEGIN</code> block</li>\n<li>or change it to <code>require</code>/<code>import</code></li>\n<li>or use the <code>-I</code> command-line option or <code>PERL5LIB</code> env variable.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1505379299, "post_id": 46214511, "comment_id": 79391924, "body": "Thanks for the detailed explanation!"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 9, "last_activity_date": 1505378905, "creation_date": 1505378905, "answer_id": 46214511, "question_id": 46214334, "link": "https://stackoverflow.com/questions/46214334/how-can-i-use-an-external-lib-in-a-begin-block/46214511#46214511", "title": "How can I use an external lib in a BEGIN block", "body": "<p><code>use</code> statements are executed at compile time (specifically, during the BEGIN phase), whereas normal code is run later. Let's look at this simplified snippet:</p>\n\n<pre><code>BEGIN {\n  push @INC, \"some/dir\";\n  use Example;\n}\n</code></pre>\n\n<p>If we spell out all phases explicitly, that would be equivalent to:</p>\n\n<pre><code>BEGIN {\n  push @INC, \"some/dir\";\n  BEGIN { require Example; Example-&gt;import() }\n}\n</code></pre>\n\n<p>So the <code>Example</code> module will be imported before the <code>push</code> runs.</p>\n\n<p>There are a number of ways to address this.</p>\n\n<p>The simplest way is to put <em>only</em> the <code>@INC</code> manipulation into a BEGIN block, and import the module outside:</p>\n\n<pre><code>BEGIN { push @INC, \"some/dir\" }\nuse Example;\n</code></pre>\n\n<p>A better solution is to use the <code>lib</code> pragma to handle <code>@INC</code>:</p>\n\n<pre><code>use lib \"some/dir\";\nuse Example;\n</code></pre>\n\n<p>However, there is a major difference: <code>use lib</code> puts additional directories at the beginning of the module search path, so you may accidentally override other modules. <code>push @INC</code> only adds directories to the end, as a fallback if a module wasn't found in other locations.</p>\n"}], "owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 46214511, "answer_count": 2, "score": 3, "last_activity_date": 1505378905, "creation_date": 1505378362, "last_edit_date": 1505378720, "question_id": 46214334, "link": "https://stackoverflow.com/questions/46214334/how-can-i-use-an-external-lib-in-a-begin-block", "title": "How can I use an external lib in a BEGIN block", "body": "<p>I want to use an external library in the <code>BEGIN</code> block of a Perl script.\nThe first test which I did was to check whether my <code>@INC</code> is getting popullated if I push some values:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nBEGIN {\n    push @INC, \"d:/external_pm/\";\n\n    use Data::Dumper;\n    print Dumper @INC;\n}\n</code></pre>\n\n<p>Which works as expected and shows:</p>\n\n<pre><code>$VAR1 = 'D:/perl/5163/site/lib';\n$VAR2 = 'D:/perl/5163/lib';\n$VAR3 = '.';  # I am not sure about this one?!\n$VAR4 = 'd:/external_pm/';\n</code></pre>\n\n<p>Now I want to import a module right after the <code>push</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nBEGIN {\n    push @INC, \"d:/external_pm/\";\n\n    use Data::Dumper;\n    print Dumper @INC;\n    use ExtScript;\n}\n</code></pre>\n\n<p>The error which follows is showing me that <code>@INC</code> was not updated:<br>\n<code>Can't locate ExtScript.pm in @INC (@INC contains: D:/perl/5163/site/lib\nD:/perl/5163/lib .) at file.pl line 9.\nBEGIN failed--compilation aborted at file.pl line 9.</code></p>\n\n<p>Why the <code>@INC</code> it's not updating?\nI can't import a module in the <code>BEGIN</code> block? Or is a missusage of Perl?</p>\n"}, {"tags": ["perl", "email", "sendgrid-api-v2"], "answers": [{"tags": [], "owner": {"reputation": 248, "user_id": 3006604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a438c3ea2f0a9241554a5e9762e1384c?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/3006604/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1505390702, "creation_date": 1505390702, "answer_id": 46218655, "question_id": 46214236, "link": "https://stackoverflow.com/questions/46214236/perl-sendgrid-and-netsmtp-and-mimeentity/46218655#46218655", "title": "Perl, Sendgrid and Net::SMTP and MIME::Entity", "body": "<p>If the program worked before, did not change, and is not giving any errors, there is probably nothing wrong with it.  Test sending the email manually.</p>\n\n<p>Start by encoding your username and password:</p>\n\n<pre><code>perl -MMIME::Base64 -e 'print encode_base64 $_ for qw/myloginemail myloginpass/'\n</code></pre>\n\n<p>Then use telnet with encoded username after the first 334 and password after the second:</p>\n\n<pre><code>telnet smtp.sendgrid.net 587\nTrying 167.89.118.51...\nConnected to smtp.sendgrid.net.\nEscape character is '^]'.\n220 SG ESMTP service ready at ismtpd0011p1las1.sendgrid.net\nhelo testing.com\n250 Hello, nice to meet you\nauth login\n334 VXNlcm5hbWU6\nbXlsb2dpbmVtYWls\n334 UGFzc3dvcmQ6\nbXlsb2dpbnBhc3M=\n235 Authentication succeeded\nmail from:&lt;testmailacct@gmail.com&gt;\n250 2.1.5 Ok\nrcpt to:&lt;testmailacct@gmail.com&gt;\n250 2.1.5 Ok\ndata\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\nsubject: test\n\nThis is test 0.\n.\n250 2.0.0 Ok: queued as BBAEA3483C73\nquit\n221 2.0.0 Bye\nConnection closed by foreign host.\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8489078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KvRMCZrNihI/AAAAAAAAAAI/AAAAAAAAAA4/k65mISQ1W7U/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/8489078/richard-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505390702, "creation_date": 1505378077, "question_id": 46214236, "link": "https://stackoverflow.com/questions/46214236/perl-sendgrid-and-netsmtp-and-mimeentity", "title": "Perl, Sendgrid and Net::SMTP and MIME::Entity", "body": "<p>In my Perl code, I was using Net::SMTP and MIME:Entity to send email through my Sendgrid account (from their v2 api, where I could use my account login as the api)...</p>\n\n<p>it was working flawlessly.</p>\n\n<p>But we moved servers to a newer version.\nStill Unix (Linux), but has newer hardware, including a newer version of Plesk.\nThe IP addresses are all the same, we moved them to the new hardware. We did change the IP address that is the primary one, but we made sure we added it to sendgrid whitelabel...</p>\n\n<p>So I'm clueless why it would stop working.\nI am not getting any errors in the code, the api is connecting. But I don't ever see any emails, no matter what I do.</p>\n\n<p>Since no errors, not sure why it does not work.</p>\n\n<p>Here is my code, do you see the flaw that would make it fail?</p>\n\n<pre><code>sub Send_Multi_Part_Email_MimeLite {\n    my ($__to,$__cc,$__bcc,$__from,$__subject,$__html_message,$__text_message,$__importance,$__xpriority,$__x_ms_priority) = @_;\n    if($__x_ms_priority &amp;&amp; ($__x_ms_priority =~ /\\|/)) {\n        ($__x_ms_priority,$_attachFile,$_attachFilePath) = split /\\|/, $__x_ms_priority, 3;\n    }\n    if($__xpriority &amp;&amp; ($__xpriority =~ /\\|/)) {\n        ($__xpriority,$_unSubKey,$_mbrUn) = split /\\|/, $__xpriority, 3;\n    }\n    if($__importance &amp;&amp; ($__importance =~ /\\|/)) {\n        ($__importance,$_emailType) = split /\\|/, $__importance, 2;\n    }\n\n    my $_useNewSystem = 1; # Declare new system... set to 1 to use it and not use MimeLite any longer...\n    if($_useNewSystem) {\n        use MIME::Entity;\n        use Net::SMTP;\n\n        my $_sendIp = $ENV{REMOTE_ADDR} || \"127.0.0.1\";\n        if($__to &amp;&amp; ($__to =~ /\\;/)) {\n            $__to =~ s/\\;/\\,/g;\n        }\n        if($__cc &amp;&amp; ($__cc=~ /\\;/)) {\n            $__cc =~ s/\\;/\\,/g;\n        }\n        if(!$__bcc) {\n            $__bcc = 'testmailacct@gmail.com'; # not real, but when in production is a real email, so we can get emails to confirm they are being delivered... only when debugging... Commented out if not in test mode...\n        }\n\n        if($__bcc &amp;&amp; ($__bcc =~ /\\;/)) {\n            $_bcc =~ s/\\;/\\,/g;\n        }\n        if(!$__html_message) {\n            $__html_message = $__text_message;\n            $__html_message =~ s/\\n/br().\"\\n\"/eg;\n            $__html_message =~ s/\\cM\\cJ/br().\"\\n\"/eg;\n        }\n\n        $_emailSentType = \"\";\n\n\n        $mime = MIME::Entity-&gt;build(Type  =&gt; 'multipart/alternative',\n                                Encoding =&gt; '-SUGGEST',\n                                From =&gt; $__from,\n                                To =&gt; $__to,\n                                Subject =&gt; $__subject,\n                                'Importance'    =&gt; $__importance,\n                                \"X-Mailer\"      =&gt; \"$_co_domain Sendgrid Mailer - Version 2.0\",\n                                'X-Organization' =&gt; \"$_co_name\",\n                                \"X-Mail-Sent-For\" =&gt; \"The Club or www.$_co_domain/$_un; From IP: $_sendIp\",\n                                'X-Priority' =&gt; $__xpriority,\n                                'X-MSMail-Priority' =&gt; $__x_ms_priority\n        );\n\n        $_sendKey = \"\"; # removed for security...\n\n        $_removeLink = qq~https://www.testing.com/backoffice.cgi?page=unsubscribe$_sendKey~;\n        $__text_message .= qq~\n\n    You are receiving this email as a club member of The $_co_name. You can turn off your\n    email subscription by logging into your back office with your username and password\n    that you registered with. Or you may click:\n    $_removeLink to remove yourself.\n    ~;\n\n\n        if($__html_message) {\n            $__html_message .= qq~&lt;br&gt;\n            &lt;br&gt;\n    &lt;span style=\"font-size: 12px; color: #808040;\"&gt;\n    You are receiving this email as a club member of The $_co_name.&lt;br&gt;\n    You can turn off your email subscription by logging into your back office&lt;br&gt;\n    with your username and password that you registered with.&lt;br&gt;\n    Or you may click: &lt;a href=\"$_removeLink\"&gt;Here&lt;/a&gt; to remove yourself,&lt;br&gt;\n    or call our Customer Care Center at (888)123-4567 for assistance&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;&lt;/span&gt;\n    &lt;br&gt;\n    ~;\n\n        }\n\n    $mime-&gt;attach(Type =&gt; 'text/plain',\n                 Encoding =&gt;'-SUGGEST',\n                 Data =&gt; $__text_message);\n\n    $mime-&gt;attach(Type =&gt; 'text/html',\n                 Encoding =&gt;'-SUGGEST',\n                 Data =&gt; $__html_message);\n\n        if($_attachFile) {\n        ### Attach stuff to it:\n        if($_attachFilePath &amp;&amp; ($_attachFilePath =~ /csv$/i)) {\n            $_mimType = \"text/csv\";\n            $_mimEncoding = \"US-ASCII\";\n        } elsif($_attachFilePath &amp;&amp; ($_attachFilePath =~ /gif$/i)) {\n            $_mimType = \"image/gif\";\n            $_mimEncoding = \"base64\";\n        } elsif($_attachFilePath &amp;&amp; ($_attachFilePath =~ /jpg$/i)) {\n            $_mimType = \"images/jpeg\";\n            $_mimEncoding = \"base64\";\n        } elsif($_attachFilePath &amp;&amp; ($_attachFilePath =~ /png$/i)) {\n            $_mimType = \"images/png\";\n            $_mimEncoding = \"base64\";\n        } else {\n            $_mimType = \"text/plain\";\n            $_mimEncoding = \"UTF-8\";\n        }\n        # Attach the file that it sent...\n        $mime-&gt;attach(Path     =&gt; $_attachFilePath,\n                     Type     =&gt; \"$_mimType\",\n                 Encoding =&gt; \"$_mimEncoding\");\n      }\n\n\n        # Sendgrid Login credentials\n        $username = 'myloginemail';\n        $password = \"myloginpass\";\n\n        # Open a connection to the SendGrid mail server\n        $smtp = Net::SMTP-&gt;new('smtp.sendgrid.net',\n                                    Port=&gt; 587,\n                                    Timeout =&gt; 60,\n                                    Hello =&gt; \"testing.com\", Debug =&gt; 1) or return(\"0\",\"could not establish connection!: $!\");\n\n        # Authenticate\n        if($smtp) {\n            $smtp-&gt;auth($username, $password);\n            # Send the rest of the SMTP stuff to the server\n            $smtp-&gt;mail($__from);\n            $smtp-&gt;to($__to);\n            $smtp-&gt;data($mime-&gt;stringify);\n            $smtp-&gt;quit();\n\n            open(DEB,\"&gt;&gt;/home/path/files/aa_mime_email_debug_tracking.txt\");\n            seek(DEB,0,2);\n            $_resultMsg = $smtp-&gt;message();\n            $_resultMsg =~ s/\\n//eg;\n            $_resultMsg =~ s/\\cM\\cJ//eg;\n\n\n            # just added this, not sure if it will work... want to create a loop of the $smtp to put it in the debug file, so I can see what is happening and why email does not go anywhere, but connection works...\n            $_resultMsg2 = \"\";\n              foreach (keys %{$smtp}) {\n                $_resultMsg2 .= \",\" if $_resultMsg2;\n                # Test this one:\n              $_resultMsg2 .= \" $_ =&gt; ${$hash_ref}{$_}\";\n              # Then test this one:\n              $_resultMsg2 .= \", $_ = \" . ${$hash_ref}-&gt;{$_};\n            }\n\n            print DEB qq~Result: '~ . $_resultMsg . qq~'; smtpTest: '~ . $_resultMsg2 . qq~'; From =&gt; \"$__from\", To =&gt; \"$__to\", Subject =&gt; \"$__subject\", If Member Username passed: \"$_mbrUn\", on: ~ . Format_Date_For_Viewing(time(),\"\") . \"\\n\";\n            close(DEB);\n            return (1,\"\");\n        } else {\n\n            open(DEB,\"&gt;&gt;/home/path/files/aa_mime_email_debug_tracking.txt\");\n            seek(DEB,0,2);\n            print DEB qq~ERROR: '~ . $smtp-&gt;message() . qq~' (Sendgrid error!!!) - From =&gt; \"$__from\", To =&gt; \"$__to\", Subject =&gt; \"$__subject\", If Member Username passed: \"$_mbrUn\", on: ~ . Format_Date_For_Viewing(time(),\"\") . \"\\n\";\n            close(DEB);\n            return (0,$smtp-&gt;message());\n        }\n    } else {\n        # Code for old email system... not using sendgrid, using sendmail... no longer in use, but code left there for times when sendgrid not working or something... used MimeLite\n    }\n}\n</code></pre>\n\n<p>Anyhow, I have no idea why it is not working. The Server admins checked and there are no errors or no emails in the queue, either... so nothing just stuck somewhere, that we can find...</p>\n\n<p>Can someone see anything, aside from my terrible programming??? lol</p>\n\n<p>Thanks,\n-Richard</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1346, "user_id": 7917910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75c481e1da6fee556c223936f4a23f83?s=128&d=identicon&r=PG&f=1", "display_name": "Martin B.", "link": "https://stackoverflow.com/users/7917910/martin-b"}, "edited": false, "score": 0, "creation_date": 1505369739, "post_id": 46211543, "comment_id": 79386465, "body": "It <i>must</i> be regex?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1505370787, "post_id": 46211543, "comment_id": 79386981, "body": "<code>(?s)^(?!sping$)(?!js$)(?!css$)(?!json$)(?=s200)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1505376295, "last_edit_date": 1505376295, "creation_date": 1505370980, "answer_id": 46212121, "question_id": 46211543, "link": "https://stackoverflow.com/questions/46211543/regular-expression-in-perl-to-excluded-patterns-but-include-pattern/46212121#46212121", "title": "regular expression in Perl to excluded patterns but include pattern", "body": "<p>For starters, your regex doesn't match anything because you only have lookarounds in your regex.</p>\n\n<pre><code>?=           # look ahead for match\n?&lt;!          # negative look behind\n</code></pre>\n\n<p>In other words, you're not matching anything, with your regex you're looking for a <code>position</code> in a string.</p>\n\n<p>explanation:</p>\n\n<pre><code>(?=              # pos. lookahead\n ^.*$            # read anything\n                 # and AFTER reading everything, check\n (?&lt;!sping)      # if you have NOT read sping\n (?&lt;!js)         # if you have NOT read js\n (?&lt;!css)        # if you have NOT read css\n (?&lt;!json)       # if you have NOT read json\n)\n(?=s200)         # from this position, check if there's \"s200\" ahead.\n</code></pre>\n\n<p>Conclusion: your regex will never ever comply with your requirements.</p>\n\n<p>You could solve this with just one regex, for example with:</p>\n\n<pre><code>(.*)s200(.*)$(?&lt;!css|js|json|sping)\n</code></pre>\n\n<p>which says</p>\n\n<pre><code>.*                       # read anything\ns200                     # read s200\n.*                       # read anything\n$                        # match the end of the string\n(?&lt;!css|js|json|sping)   # negative lookbehind: \n                         # if you have read css,js,json or sping, fail\n</code></pre>\n\n<p>You could do this simple in two steps:</p>\n\n<ul>\n<li>first check if string contains s200 with <code>/s200/</code></li>\n<li>check if string doesn't end with sping, js, json or json with <code>/css|js(on)?|sping$/</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1505372846, "post_id": 46212402, "comment_id": 79388179, "body": "You should explain why the effort of OP doesn&#39;t work, because that&#39;s the question."}], "tags": [], "owner": {"reputation": 1346, "user_id": 7917910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75c481e1da6fee556c223936f4a23f83?s=128&d=identicon&r=PG&f=1", "display_name": "Martin B.", "link": "https://stackoverflow.com/users/7917910/martin-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1505372967, "last_edit_date": 1505372967, "creation_date": 1505372032, "answer_id": 46212402, "question_id": 46211543, "link": "https://stackoverflow.com/questions/46211543/regular-expression-in-perl-to-excluded-patterns-but-include-pattern/46212402#46212402", "title": "regular expression in Perl to excluded patterns but include pattern", "body": "<p>You have tagged this as <code>perl</code>, so here's a <code>perl</code> solution:</p>\n\n<pre><code>$_ = $stringToTest;\nif (/s200/) {\n    # We now know that the string contains \"s200\"\n    if (/sping|json|js|css$/) {\n        # We now know it end with one of sping,json,js or css\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6214033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e9c9feba48f860fe801a2ce7eb742c?s=128&d=identicon&r=PG&f=1", "display_name": "Dong Long", "link": "https://stackoverflow.com/users/6214033/dong-long"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505376295, "creation_date": 1505368549, "question_id": 46211543, "link": "https://stackoverflow.com/questions/46211543/regular-expression-in-perl-to-excluded-patterns-but-include-pattern", "title": "regular expression in Perl to excluded patterns but include pattern", "body": "<p>I want to have a regex pattern to match a line:<br>\n1.this line must contain the word \"s200\"<br>\n2. the end of the string cannot be \"sping\",\"js\",\"json\",\"css\"</p>\n\n<p>Here is a monster I got,which doesn't work</p>\n\n<p><code>(?=^.*$(?&lt;!sping)(?&lt;!js)(?&lt;!css)(?&lt;!json))(?=s200)</code></p>\n\n<p>I am new to regex, any help would be aapreciated!</p>\n"}]