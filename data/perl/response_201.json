[{"tags": ["html", "perl", "cookies", "session-cookies"], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1542234307, "post_id": 53309288, "comment_id": 93500097, "body": "in this case the $cookie variable is empty. It has nothing, no cookie name nothing. So I guess it has no impact on browser or session??"}, {"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1542234363, "post_id": 53309288, "comment_id": 93500120, "body": "for expiry/logout, i have a separate cgi which sends back the cookie with 0 sec for expiry and it does its job."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1542234830, "post_id": 53309288, "comment_id": 93500312, "body": "@rajeev: yes, sending an empty cookie has no effect."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1542232464, "creation_date": 1542232464, "answer_id": 53309288, "question_id": 53309240, "link": "https://stackoverflow.com/questions/53309240/can-i-send-empty-cookie-to-browser/53309288#53309288", "title": "can i send empty cookie to browser?", "body": "<p>This is discussed in the normative documentation for cookies, RFC6265</p>\n\n<blockquote>\n  <p>If the user agent receives a new cookie with the same cookie-name,\n     domain-value, and path-value as a cookie that it has already stored,\n     the existing cookie is evicted and replaced with the new cookie.\n     Notice that servers can delete cookies by sending the user agent a\n     new cookie with an <code>Expires</code> attribute with a value in the past.</p>\n</blockquote>\n\n<p>So, a cookie is only explicitly removed when it is sent by you with an expiration date in the past. Obviously users and/or user-agents can still remove your cookies for whatever other reason.</p>\n\n<h3>See also</h3>\n\n<p>The HTTP RFC relating to Cookies, <a href=\"https://tools.ietf.org/html/rfc6265\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc6265</a></p>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 53309288, "answer_count": 1, "score": 0, "last_activity_date": 1542232464, "creation_date": 1542232237, "question_id": 53309240, "link": "https://stackoverflow.com/questions/53309240/can-i-send-empty-cookie-to-browser", "title": "can i send empty cookie to browser?", "body": "<p>from my perl program, I am sending response to AJAX calls like this:</p>\n\n<pre><code>...a lot of code...\n$| = 1;\nprint $q-&gt;header(-type=&gt;'text/html',-cookie=&gt;$cookie);\nmy $tt = Template-&gt;new({INCLUDE_PATH =&gt; $htmlTempletPath});\n$tt-&gt;process($returnVal,$ttVars)|| die $tt-&gt;error();\n1;\n</code></pre>\n\n<p>When user first login, i set and send this $cookie as session ID etc. for auth purposes. Whenever i increase expire-time on cookie, i send it back thru -cookie=> directive.</p>\n\n<p>my concern is, if $cookie variable is empty, how does it affect the browser/session or the cookie which is already setup? Or does the browser silently ignore -cookie=> (empty)</p>\n\n<p>Pl advice. I looked around but found no help.</p>\n"}, {"tags": ["sqlite", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 0, "last_activity_date": 1542219536, "creation_date": 1542219536, "answer_id": 53306498, "question_id": 53305625, "link": "https://stackoverflow.com/questions/53305625/does-sqlite-perform-disk-activity-when-calling-select-statements-with-autocommit/53306498#53306498", "title": "Does SQLite perform disk-activity when calling SELECT statements with AutoCommit turned off in perl?", "body": "<p>If I understand correctly, you're trying to choose between backup_from_file or reading directly from disk storage. No matter which path you choose, you'll be reading the data from disk.  Provided you've got the memory to spare, the read cache associated with a direct read should stick around for any reasonable duration.  If your queries use indexes, you may even avoid reading certain blocks entirely for a small bonus.</p>\n\n<p>The downside of this question is that it reeks of premature optimization.  Benchmark your approaches and see which one wins in your particular application.</p>\n"}, {"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1542220559, "creation_date": 1542220559, "answer_id": 53306731, "question_id": 53305625, "link": "https://stackoverflow.com/questions/53305625/does-sqlite-perform-disk-activity-when-calling-select-statements-with-autocommit/53306731#53306731", "title": "Does SQLite perform disk-activity when calling SELECT statements with AutoCommit turned off in perl?", "body": "<p>Generally speaking, yes.</p>\n\n<p>SQLite does not load the whole database into memory on <code>connect</code>. Indeed, the database may be much larger than memory -- SQLite databases have a maximum size of roughly 140 TB. SQLite will cache some recently used data in memory, but most queries on a large database will hit the disk (or the OS disk cache).</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 3, "last_activity_date": 1542271512, "creation_date": 1542271512, "answer_id": 53315426, "question_id": 53305625, "link": "https://stackoverflow.com/questions/53305625/does-sqlite-perform-disk-activity-when-calling-select-statements-with-autocommit/53315426#53315426", "title": "Does SQLite perform disk-activity when calling SELECT statements with AutoCommit turned off in perl?", "body": "<p>In general, yes, if your database is on disk, then the disk will be accessed to carry out any <code>SELECT</code> unless the necessary data is buffered in memory somewhere (most likely either within SQLite itself or in a disk cache).</p>\n\n<p>But note that phrase, \"<em>if your database is on disk</em>\".  SQLite also supports in-memory databases.  If you have enough spare RAM to hold the database, and if you're going to do enough operations on it to make up for the cost of copying it into memory in the first place, this may be worth looking into.</p>\n\n<p>Instead of the setup in the question, you can:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect('dbi:SQLite:dbname=:memory:');\n$dbh-&gt;sqlite_backup_from_file('folder/path/file.db');\n</code></pre>\n\n<p>You will then have an in-memory database which is a copy of your original on-disk database, which you can <code>SELECT</code> against to your heart's content without having to touch the disk (unless it's too big and some of that memory gets swapped out).</p>\n\n<p>If you make any changes to the in-memory database, you'll also need to</p>\n\n<pre><code>$dbh-&gt;sqlite_backup_to_file('folder/path/file.db');\n</code></pre>\n\n<p>before <code>$dbh</code> disconnects if you want to save those changes back to disk.</p>\n\n<p>And keep in mind that this is only safe if no other process might be making changes to the on-disk copy at the same time as you're changing the in-memory copy, since neither one will know about changes made to the other.</p>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1542271512, "creation_date": 1542216068, "last_edit_date": 1542217429, "question_id": 53305625, "link": "https://stackoverflow.com/questions/53305625/does-sqlite-perform-disk-activity-when-calling-select-statements-with-autocommit", "title": "Does SQLite perform disk-activity when calling SELECT statements with AutoCommit turned off in perl?", "body": "<p>I created a new SQLite database in disk file with AutoCommit turned off using:</p>\n\n<pre><code>my $dsn      = \"dbi:SQLite:dbname=folder/path/file.db\";\nmy $user     = \"\";\nmy $password = \"\";\nmy $dbh = DBI-&gt;connect($dsn, $user, $password,{AutoCommit =&gt; 0});\n\n#\u2026 Doing some processing on the database (Creating tables/Inserting rows/Updating fields)\n\n#\u2026 Many query SELECT statements here\n    # My question here: Does SQLite read data from memory or disk each time a SELECT statement is performed.\n</code></pre>\n\n<p>When querying data (using SELECT SQL statements), does SQLite read data from disk file or memory? Does SQLite perform any disk activity (which is lower in performance than memory RAM activity)?<br><br></p>\n\n<hr>\n\n<p><strong><em>Side-Notes:</em></strong></p>\n\n<p>The answer of this question will help guide me to choose whether to load DB from disk file to memory first, then process and query data from it, and at end <a href=\"https://stackoverflow.com/questions/53304184/\">save it back to disk file after finishing</a>, or the other option to use simply the solution of turning off the AutoCommit.<br><br>\n<em>Note:</em> My created database won't get too large, so I don't worry about the issue of getting my database filling the memory.<br><br></p>\n\n<p>If SQLite reads data from disk each time a SELECT query statement is called, then this will cause a tremendous performance lag compared to copying DB to memory solution mentioned in my <a href=\"https://stackoverflow.com/questions/53304184\">previous question</a>.</p>\n\n<hr>\n\n<p><strong><em>Helpful Answer Approaching:</em></strong><br>\n\u2022 <a href=\"https://gist.github.com/schwern/4cd618e7233aa71324dd84d878e31048\" rel=\"nofollow noreferrer\">Performance testing</a> by <a href=\"https://stackoverflow.com/users/14660/schwern\">Schwern</a> (mentioned <a href=\"https://stackoverflow.com/questions/53304184/how-to-save-in-memory-sqlite-database-to-a-file-in-perl/53304435#comment93491144_53304435\">here</a>) shows that operating and querying on whether an in-memory or in-disk database results the same performance.</p>\n"}, {"tags": ["sqlite", "perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1542211264, "post_id": 53304184, "comment_id": 93489257, "body": "Could you start with an on-disk database, work in a transaction, and only commit at the end of the program? What are you trying to accomplish?"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1542211936, "post_id": 53304184, "comment_id": 93489656, "body": "No, I want to start it in memory, then save it to a disk file. If I was to start with a saved to disk database scenario, I&#39;ll load an already existing in-disk DB, then create a duplicate copy of it to a separate new empty in-memory DB (I don&#39;t know a simple way of how to do this). Then do all the sql processing on the in-memory DB (to avoid the lag caused by disk read/write if processing on the in-disk DB directly). At end, copy back the updated version (the in-memory DB) to the in-disk DB."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1542212530, "post_id": 53304184, "comment_id": 93490034, "body": "If it&#39;s just for optimization purposes, try using a normal on-disk database, <a href=\"https://metacpan.org/pod/DBI#Transactions\" rel=\"nofollow noreferrer\">turning off AutoCommit</a>, and only committing your transaction at the end (or every few thousand inserts). I ran some tests and it&#39;s just as fast <i>as long as AutoCommit is off</i> which it generally should be. And you can load a database into an existing in memory database with <a href=\"https://metacpan.org/pod/DBD::SQLite#%24dbh-%3Esqlite_backup_from_file(-%24filename-)\" rel=\"nofollow noreferrer\"><code>sqlite_backup_from_file</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1542214218, "post_id": 53304435, "comment_id": 93491042, "body": "When querying data (using SELECT SQL statement), does SQLite read data from disk file or memory? If SQLite reads data from memory then turning off AutoCommit will be exactly the same and a simpler option. If it reads data from disk, then disabling AutoCommit will still have a disk-read lag."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1542214420, "post_id": 53304435, "comment_id": 93491144, "body": "@Omar I can&#39;t say for sure, but SQLite is very mature and should do its own memory caching. These questions can be answered with performance testing. <a href=\"https://gist.github.com/schwern/4cd618e7233aa71324dd84d878e31048\" rel=\"nofollow noreferrer\">I did my own</a> and, again, there seems to be no difference."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 1, "creation_date": 1542214593, "post_id": 53304435, "comment_id": 93491243, "body": "@Omar <a href=\"https://www.sqlite.org/inmemorydb.html\" rel=\"nofollow noreferrer\">Temporary databases</a>, for example... <i>&quot;Even though a disk file is allocated for each temporary database, in practice the temporary database usually resides in the in-memory pager cache and hence is very little difference between a pure in-memory database created by &quot;:memory:&quot; and a temporary database created by an empty filename. The sole difference is that a &quot;:memory:&quot; database must remain in memory at all times whereas parts of a temporary database might be flushed to disk if database becomes large or if SQLite comes under memory pressure.&quot;</i>"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 1, "creation_date": 1542216811, "post_id": 53304435, "comment_id": 93492432, "body": "Thanks a lot for your effort. Your  test give a very good indication. They&#39;re seemingly the same in performance."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1569837754, "post_id": 53304435, "comment_id": 102712824, "body": "@Schwern I have the same problem but with a different use-case. In my case, I have a GUI, and the user may do lots of changes to the db from the GUI. The changes will be affected if and only if the user presses the save button. If I disable auto-commit, it means that a transaction will be open for some minutes/hours. Is it still a good idea to disable auto-commit in this case?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1569864830, "post_id": 53304435, "comment_id": 102726207, "body": "@Gupta Transactions are not so much a performance concern as a data integrity. They ensure changes are done all at once (commit) or not at all (rollback); you don&#39;t want partial changes. You need a transaction else how do you roll the user&#39;s changes back when they don&#39;t want them? The performance impact seems easily enough to test, but presumably there&#39;s only one user who is waiting on hitting save, so who would it be impacting? Finally, do you need to store the changes in the database <i>before</i> the user decides to save them?"}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1569913858, "post_id": 53304435, "comment_id": 102739506, "body": "@Schwern Well, I am asking because as far as I know, having an open transaction means having some locks on the affected db objects. So, having a transaction that takes one hour, means that a lock does exist on some object for one hour. Doesn&#39;t this long-living lock affect other users? And about your last Q, well, it is easier to keep them on DB, otherwise, I should keep all of them in a temporary data structure in memory and save them while pressing the SAVE button."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1569949013, "post_id": 53304435, "comment_id": 102758261, "body": "@Gupta This is easy enough for you to try out yourself. And yes, if you&#39;re concerned about long running transactions causing locks you can keep the changes in memory until the user saves them. Most ORMs support this. Or you could time out idle connections. Or you can restructure your data so you can store changes and save &quot;activates&quot; them either by flipping a flag or changing a reference."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 6, "last_activity_date": 1542214634, "last_edit_date": 1542214634, "creation_date": 1542211864, "answer_id": 53304435, "question_id": 53304184, "link": "https://stackoverflow.com/questions/53304184/how-to-save-in-memory-sqlite-database-to-a-file-in-perl/53304435#53304435", "title": "How to save in-memory sqlite database to a file in perl?", "body": "<p>Yes, you can use <a href=\"https://metacpan.org/pod/DBD::SQLite#$dbh-%3Esqlite_backup_to_file(-$filename-)\" rel=\"nofollow noreferrer\"><code>$dbh-&gt;sqlite_backup_to_file( $filename )</code></a> and then connect to that file like a normal SQLite database. For more see <a href=\"https://www.sqlite.org/backup.html\" rel=\"nofollow noreferrer\">the SQLite Backup API docs</a>.</p>\n\n<p>But you can accomplish basically the same thing with the same performance by <a href=\"https://metacpan.org/pod/DBI#Transactions\" rel=\"nofollow noreferrer\">turning off AutoCommit</a> and only committing your transaction when you're done with your bulk inserts. SQLite will probably hold all your inserts in memory until they're committed.</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\n    \"dbi:SQLite:dbname=test.sqlite\", undef, undef, { RaiseError =&gt; 1, AutoCommit =&gt; 0 }\n);\n\n...do your inserts...\n\n$dbh-&gt;commit;\n</code></pre>\n\n<p><a href=\"https://gist.github.com/schwern/4cd618e7233aa71324dd84d878e31048\" rel=\"nofollow noreferrer\">A simple benchmark</a> shows this is just as fast and it's more flexible.</p>\n\n<p>Turning off AutoCommit will give you a big boost with either option.</p>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 1, "accepted_answer_id": 53304435, "answer_count": 1, "score": 6, "last_activity_date": 1542217649, "creation_date": 1542211056, "last_edit_date": 1542217649, "question_id": 53304184, "link": "https://stackoverflow.com/questions/53304184/how-to-save-in-memory-sqlite-database-to-a-file-in-perl", "title": "How to save in-memory sqlite database to a file in perl?", "body": "<p>I create an SQLite <a href=\"https://www.sqlite.org/inmemorydb.html\" rel=\"nofollow noreferrer\">database in memory</a> using:</p>\n\n<pre><code>my $dsn      = \"dbi:SQLite:dbname=:memory:\"; # better in read/write operations performance than disk-file saved database.\nmy $user     = \"\";\nmy $password = \"\";\nmy $dbh = DBI-&gt;connect($dsn, $user, $password,{});\n\n#\u2026 Doing some processing on the database (Creating tables/Inserting rows/Updating fields)\n\n#\u2026 After finishing, I need to save the database to a local disk file.\n</code></pre>\n\n<p>What I need to do is after finishing playing with the in-memory database, I need to save it to disk file <code>file.db</code>.</p>\n\n<hr>\n\n<p><strong><em>Updated (Answer Summarised):</em><br>\u2022 Helpful Commands:</strong> Thanks to <a href=\"https://stackoverflow.com/a/53304435/3503851\">Schwern</a> for his answer and <a href=\"https://stackoverflow.com/questions/53304184/how-to-save-in-memory-sqlite-database-to-a-file-in-perl/53304435#comment93490034_53304184\">comment</a>.<br></p>\n\n<ul>\n<li><strong><code>$dbh-&gt;sqlite_backup_to_file( $file_path )</code></strong> Copies database from memory to a file.</li>\n<li><strong><code>$dbh-&gt;sqlite_backup_from_file( $file_path )</code></strong> Copies database to memory from a file.</li>\n<li><strong><code>my $dbh = DBI-&gt;connect($dsn, $user, $password,{AutoCommit =&gt; 0})</code></strong> Disabling AutoCommit seems to be a better and simpler option to optimize performance like using the previous two commands. I just need to make sure that when turning off AutoCommit, SQLite SELECT operations doesn't do any disk activity (<a href=\"https://stackoverflow.com/questions/53305625/\">other question</a>).\n\n<ul>\n<li><em>Update:</em> <a href=\"https://gist.github.com/schwern/4cd618e7233aa71324dd84d878e31048\" rel=\"nofollow noreferrer\">Performance testing</a> by <a href=\"https://stackoverflow.com/users/14660/schwern\">Schwern</a> (mentioned <a href=\"https://stackoverflow.com/questions/53304184/how-to-save-in-memory-sqlite-database-to-a-file-in-perl/53304435#comment93491144_53304435\">here</a>) shows that operating and querying on whether an in-memory or in-disk database results the same performance.</li>\n</ul></li>\n</ul>\n"}, {"tags": ["perl", "terminal", "ansi"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542200433, "post_id": 53300631, "comment_id": 93482137, "body": "The console escape sequences work by printing text to the terminal. Backticks gobble up the output of the script. Most likely you just want <code>print &quot;\\e]30;$1\\a&quot;;</code> from within Perl."}, {"owner": {"reputation": 3290, "user_id": 538256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b66145aa15d4d35021cdf994822fda6?s=128&d=identicon&r=PG", "display_name": "alessandro", "link": "https://stackoverflow.com/users/538256/alessandro"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542201111, "post_id": 53300631, "comment_id": 93482526, "body": "how stupid not to see it! Thanks that was exectly it"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1542205354, "post_id": 53300631, "comment_id": 93485389, "body": "<a href=\"https://metacpan.org/pod/Term::Title\" rel=\"nofollow noreferrer\">Term::Title</a> might be of interest."}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1542201233, "creation_date": 1542201233, "answer_id": 53301094, "question_id": 53300631, "link": "https://stackoverflow.com/questions/53300631/ansi-sequence-to-change-terminal-name/53301094#53301094", "title": "ANSI sequence to change terminal name", "body": "<p>The console escape sequences work by printing text to the terminal. In your case, the backticks gobble up the output of the script.</p>\n\n<p>Most likely you just want print \"\\e]30;$1\\a\"; from within Perl:</p>\n\n<pre><code>my $title = \"Fancy terminal title\";\nprint \"\\e]30;${title}\\a\";\n</code></pre>\n"}], "owner": {"reputation": 3290, "user_id": 538256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b66145aa15d4d35021cdf994822fda6?s=128&d=identicon&r=PG", "display_name": "alessandro", "link": "https://stackoverflow.com/users/538256/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "closed_date": 1542237761, "accepted_answer_id": 53301094, "answer_count": 1, "score": -1, "last_activity_date": 1542201233, "creation_date": 1542199729, "last_edit_date": 1542200834, "question_id": 53300631, "link": "https://stackoverflow.com/questions/53300631/ansi-sequence-to-change-terminal-name", "closed_reason": "Not suitable for this site", "title": "ANSI sequence to change terminal name", "body": "<p>I use a bash script (<em>konsole-name.sh</em>) to change a terminal name, like this:</p>\n\n<pre><code>#!/usr/bin/bash\necho -en \"\\e]30;$1\\a\"\n</code></pre>\n\n<p>and I wanted to use the same method from a perl script that I use to check the GPU temperature, so that it updates periodically the window title.</p>\n\n<p>Yet I didnt find a way.\nI tried both this:</p>\n\n<pre><code>$comm='echo -en \"\\e]30;T=$t\\a\"';\n`$comm`;\n</code></pre>\n\n<p>and this, using my bash script:</p>\n\n<pre><code>$comm=\"konsole-name.sh T=$t\";\n`$comm`;\n</code></pre>\n\n<p>there is some way to do it?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1542200510, "post_id": 53300266, "comment_id": 93482176, "body": "You are only ever assigning the same reference <code>$data</code>. The easiest approach to make them different between each other is to move <code>my $data = ...; </code> into the loop."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1542377168, "post_id": 53333560, "comment_id": 93557681, "body": "<code>my %hash = ();</code> is equivalent to <code>my %hash; %hash = ();</code>, which is redundant because <code>my</code> already creates the hash empty."}, {"owner": {"reputation": 37, "user_id": 10651767, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tE1zkJufBNs/AAAAAAAAAAI/AAAAAAAAAdE/OhbJUnk7zy0/photo.jpg?sz=128", "display_name": "Marcin K", "link": "https://stackoverflow.com/users/10651767/marcin-k"}, "edited": false, "score": 0, "creation_date": 1542884791, "post_id": 53333560, "comment_id": 93733160, "body": "Thank you, this was helpful , i have made loop with added your code and it works like a charm :)"}, {"owner": {"reputation": 1136, "user_id": 1694803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5qVj9.jpg?s=128&g=1", "display_name": "Boris D&#228;ppen", "link": "https://stackoverflow.com/users/1694803/boris-d%c3%a4ppen"}, "reply_to_user": {"reputation": 37, "user_id": 10651767, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tE1zkJufBNs/AAAAAAAAAAI/AAAAAAAAAdE/OhbJUnk7zy0/photo.jpg?sz=128", "display_name": "Marcin K", "link": "https://stackoverflow.com/users/10651767/marcin-k"}, "edited": false, "score": 0, "creation_date": 1543234630, "post_id": 53333560, "comment_id": 93831453, "body": "@MarcinK nice! Glad I could be of help. Could you please accept the answer as your valid answer by clicking the checkmark at the left side of this answer. This will help you, me and all the other stack users. thx"}, {"owner": {"reputation": 37, "user_id": 10651767, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tE1zkJufBNs/AAAAAAAAAAI/AAAAAAAAAdE/OhbJUnk7zy0/photo.jpg?sz=128", "display_name": "Marcin K", "link": "https://stackoverflow.com/users/10651767/marcin-k"}, "edited": false, "score": 0, "creation_date": 1543328901, "post_id": 53333560, "comment_id": 93872914, "body": "@Boris D&#228;ppen Done :)"}], "tags": [], "owner": {"reputation": 1136, "user_id": 1694803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5qVj9.jpg?s=128&g=1", "display_name": "Boris D&#228;ppen", "link": "https://stackoverflow.com/users/1694803/boris-d%c3%a4ppen"}, "is_accepted": true, "score": 0, "last_activity_date": 1542373653, "last_edit_date": 1542373653, "creation_date": 1542354773, "answer_id": 53333560, "question_id": 53300266, "link": "https://stackoverflow.com/questions/53300266/insert-anonymous-hash-into-anonymous-hash-for-counting-in-a-loop/53333560#53333560", "title": "insert anonymous hash into anonymous hash for counting in a loop", "body": "<p>Counting is very simple in Perl, thanks to Autovivification. You can just create anonymous data structures on the fly, like so:</p>\n\n<pre><code>use Data::Dumper;\n\nmy %hash = ();\n\n$hash{apple}{green}++;\n$hash{apple}{red}  ++;\n$hash{pear}{yellow}++;\n$hash{apple}{green}++;\n$hash{apple}{red}  ++;\n$hash{apple}{green}++;\n\nprint Dumper(\\%hash);\n</code></pre>\n\n<p>This will produce the desired structure for counting:</p>\n\n<pre><code>$VAR1 = {\n          'apple' =&gt; {\n                       'green' =&gt; 3,\n                       'red' =&gt; 2\n                     },\n          'pear' =&gt; {\n                      'yellow' =&gt; 1\n                    }\n        };\n</code></pre>\n\n<p>This also works in loops using variables (here using a reference to a hash):</p>\n\n<pre><code>my $hash_ref = {};\nfor my $fruit (qw( apple pear apple peach apple pear )) {\n    $hash_ref-&gt;{$fruit}++;\n}\nprint Dumper($hash_ref);\n</code></pre>\n\n<p>resulting in:</p>\n\n<pre><code>$VAR1 = {\n          'peach' =&gt; 1,\n          'pear' =&gt; 2,\n          'apple' =&gt; 3\n        };\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10651767, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tE1zkJufBNs/AAAAAAAAAAI/AAAAAAAAAdE/OhbJUnk7zy0/photo.jpg?sz=128", "display_name": "Marcin K", "link": "https://stackoverflow.com/users/10651767/marcin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 53333560, "answer_count": 1, "score": 0, "last_activity_date": 1543422535, "creation_date": 1542198505, "last_edit_date": 1543422535, "question_id": 53300266, "link": "https://stackoverflow.com/questions/53300266/insert-anonymous-hash-into-anonymous-hash-for-counting-in-a-loop", "title": "insert anonymous hash into anonymous hash for counting in a loop", "body": "<p>I'm trying to count starts and stops of some services i keep track of in logs. \nI'm not going to past here entire code, but my way of doing hash is this:\n I'm passing those starts and stops into anonymous hash .\n First I'm creating anonymous hash  filled with keys and values (in my case $knot is a key an zeros are values). Next im replaqcing values with another hash.\nMy code looks like this:</p>\n\n<pre><code>foreach $knot (@knots){ \n        chomp $knot;\n        $variable = $variable.\"$knot;0;\";\n\n        $Services = {split(/;/,$variable)};\n}\n\n my $data =\n    {\n            Starts=&gt;'0',\n            Stops=&gt;'0',\n    };  \n\nforeach my $key (keys %$Services) {\n           $Services-&gt;{$key} = $data; \n}\nprint Dumper $Services;\n</code></pre>\n\n<p>Printing shows:</p>\n\n<pre><code>$VAR1 = {\n      ' knot1' =&gt; {\n                      'Stops' =&gt; '0',\n                      'Starts' =&gt; '0'\n                    },\n      ' knot2' =&gt; $VAR1-&gt;{' knot1'},\n      ' knot3' =&gt; $VAR1-&gt;{' knot1'},\n      ' knot4' =&gt; $VAR1-&gt;{' knot1'},\n      ' knot5' =&gt; $VAR1-&gt;{' knot1'},\n</code></pre>\n\n<p>and so on. Is there a better way of doing this? My way if i'm correct is badly written because changing knot1 starts/stops changes every other knot values.</p>\n"}, {"tags": ["perl", "printf"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1542198308, "post_id": 53299751, "comment_id": 93480901, "body": "You&#39;ll find <a href=\"https://metacpan.org/pod/Term::ANSIColor\" rel=\"nofollow noreferrer\">Term::ANSIColor</a> useful."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "edited": false, "score": 0, "creation_date": 1542207460, "post_id": 53299924, "comment_id": 93486786, "body": "Thanks @choroba.  Fighting a bit on how to comment in less than the allowed characters.."}, {"owner": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "edited": false, "score": 0, "creation_date": 1542207932, "post_id": 53299924, "comment_id": 93487128, "body": "Thanks @choroba.  Fighting a bit on how to comment in less than the allowed characters :-) And the return key makes life difficult.  What if you change &#39;color =&gt; &#39;GREEN&#39; to &#39;server =&gt; &#39;HOST1&#39; and &#39;server =&gt; &#39;HOST2&#39; and in the next heartbeat I need to increment the counter and modify the &#39;last_run&#39; value for each server value?  It is just that this is part of a greater plan and I use the %HeartbeatHash to keep track. I would need to change that only to put some color in the output."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "edited": false, "score": 1, "creation_date": 1542208352, "post_id": 53299924, "comment_id": 93487436, "body": "I think that&#39;s irrelevant to the question. You can insert the colours into the hash, or deduce them from the status, the point is not to concatenate the colour codes with the value to be printed, but to print them as separate <code>%s</code> items."}, {"owner": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "edited": false, "score": 0, "creation_date": 1542209013, "post_id": 53299924, "comment_id": 93487785, "body": "Perhaps irrelevant to the issue, but relevant to the solution, hence my followup question But this is probably seen as a different topic and not in the spirit of stackoverflow. My first topic on stackoverflow, so still learning."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "edited": false, "score": 1, "creation_date": 1542209541, "post_id": 53299924, "comment_id": 93488104, "body": "I didn&#39;t want to design the data structure for you, so I used a simpler one. Now it&#39;s upon you to decide whether you want to include the colour ANSI sequences in the hash, or derive them from the values before printing."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1542203956, "last_edit_date": 1542203956, "creation_date": 1542197380, "answer_id": 53299924, "question_id": 53299751, "link": "https://stackoverflow.com/questions/53299751/perl-printf-of-colored-text-wrong-format-output/53299924#53299924", "title": "Perl printf of colored text - wrong format output", "body": "<p>Print the colour codes separately so they aren't included in the length calculation by <code>printf</code>:</p>\n\n<pre><code>my @heartbeats = (\n    { color =&gt; 'GREEN',\n      code_before =&gt; \"\",\n      code_after =&gt; \"\",\n      counter =&gt; 1,\n      last_run =&gt; 'Passed',\n      time =&gt; 10 },\n    { color =&gt; 'GREEN',\n      code_before =&gt; $GREEN,\n      code_after =&gt; $DEFAULTCOLOR,\n      counter =&gt; 2,\n      last_run =&gt; 'Passed',\n      time =&gt; 10 },\n);\n\nprintf \"%-9s %7s %-7s %-s\\n\", qw( Heartbeat Counter LastRun TriggerTime );\nfor my $heartbeat (@heartbeats) {\n    printf \"%-9s %7s %s%-7s%s %-d\\n\",\n        @$heartbeat{qw{ color counter code_before last_run code_after time }};\n}\n</code></pre>\n\n<p>Also, using <a href=\"http://p3rl.org/Term::ANSIColor\" rel=\"nofollow noreferrer\">Term::ANSIColor</a> would simplify the code and prevent accidental typos in the ANSI colour sequences.</p>\n"}], "owner": {"reputation": 13, "user_id": 10268967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fLrr.jpg?s=128&g=1", "display_name": "Erik J.", "link": "https://stackoverflow.com/users/10268967/erik-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 53299924, "answer_count": 1, "score": 1, "last_activity_date": 1542203956, "creation_date": 1542196745, "question_id": 53299751, "link": "https://stackoverflow.com/questions/53299751/perl-printf-of-colored-text-wrong-format-output", "title": "Perl printf of colored text - wrong format output", "body": "<p>I have this issue, that when I use colored text, the printf formatting (aligning) is not correct.\nIn this example, notice how the last column is 1 space to the left.\nSearching for a solution only tells me that it, most probably, has to do with the escape sequence in the color variables in the code.</p>\n\n<p>it there a simple solution for this issue, or do I need to add code to add a space when the text is colored ??</p>\n\n<p>The code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\nuse Data::Dumper;\n\n# Color variables\nmy $DEFAULTCOLOR = \"\\e[0m\";\nmy $RED = \"\\e[31m\";\nmy $GREEN = \"\\e[32m\";\nmy $YELLOW = \"\\e[33m\";\nmy $BLUE = \"\\e[34m\";\nmy $MAGENTA = \"\\e[35m\";\n\nmy %HeartbeatHash = (\n'BOTH' =&gt; [ '-', 0, '-', 10 ],\n'PTN' =&gt; [ '-', 0, '-', 10 ],\n'PKT' =&gt; [ '-', 0, '-', 10 ],\n);\n\nprintf (\"%-9s %7s %-7s %-s\\n\", \"Heartbeat\", \"Counter\", \"LastRun\", \"TriggerTime\");\nprintf (\"%-9s %7s %-7s %-d\\n\", \"NOCOLOR\", ${HeartbeatHash{'PKT'}[1]}, ${HeartbeatHash{'PKT'}[2]}, ${HeartbeatHash{'PKT'}[3]});\n\n${HeartbeatHash{'PKT'}[1]}++;\n${HeartbeatHash{'PKT'}[2]} = \"Passed\";\n\nprintf (\"%-9s %7s %-7s %-s\\n\", \"Heartbeat\", \"Counter\", \"LastRun\", \"TriggerTime\");\nprintf (\"%-9s %7s %-7s %-d\\n\", \"NOCOLOR\", ${HeartbeatHash{'PKT'}[1]}, ${HeartbeatHash{'PKT'}[2]}, ${HeartbeatHash{'PKT'}[3]});\n\n${HeartbeatHash{'PKT'}[1]}++;\n${HeartbeatHash{'PKT'}[2]} = \"${GREEN}Passed${DEFAULTCOLOR}\";\n\nprintf (\"%-9s %7s %-7s %-s\\n\", \"Heartbeat\", \"Counter\", \"LastRun\", \"TriggerTime\");\nprintf (\"%-9s %7s %-7s %-d\\n\", \"GREEN\", ${HeartbeatHash{'PKT'}[1]}, ${HeartbeatHash{'PKT'}[2]}, ${HeartbeatHash{'PKT'}[3]});\n\n$DEFAULTCOLOR = \"\\033[0m\";\n$GREEN = \"\\033[32m\";\n\n${HeartbeatHash{'PKT'}[1]}++;\n${HeartbeatHash{'PKT'}[2]} = \"${GREEN}Passed${DEFAULTCOLOR}\";\n\nprintf (\"%-9s %7s %-7s %-s\\n\", \"Heartbeat\", \"Counter\", \"LastRun\", \"TriggerTime\");\nprintf (\"%-9s %7s %-7s %-d\\n\", \"GREEN\", ${HeartbeatHash{'PKT'}[1]}, ${HeartbeatHash{'PKT'}[2]}, ${HeartbeatHash{'PKT'}[3]});\n</code></pre>\n\n<p>The output (the terminal shows the text 'Passed' in green for the last 2 lines:</p>\n\n<pre><code>Heartbeat Counter LastRun TriggerTime\nNOCOLOR         0 -       10\nHeartbeat Counter LastRun TriggerTime\nNOCOLOR         1 Passed  10\nHeartbeat Counter LastRun TriggerTime\nGREEN           2 Passed 10\nHeartbeat Counter LastRun TriggerTime\nGREEN           3 Passed 10\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542196890, "post_id": 53299694, "comment_id": 93480113, "body": "Welcome to Stack Overflow. Please make sure your code includes <code>use strict&#39;</code> and <code>use warnings;</code>. These pragmas will help you spot mistakes. (You have the <code>-w</code> in the shebang, but <code>use warnings</code> is the more modern form). You can then <a href=\"https://stackoverflow.com/posts/53299694/edit\">edit</a> your question to include the updated code and any warnings it may throw."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1542197486, "post_id": 53299694, "comment_id": 93480436, "body": "Also, see <a href=\"http://p3rl.org/reverse\" rel=\"nofollow noreferrer\">reverse</a>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542204935, "post_id": 53299694, "comment_id": 93485124, "body": "<a href=\"https://codegolf.stackexchange.com/a/11165/5202\">codegolf.stackexchange.com/a/11165/5202</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542200100, "post_id": 53299990, "comment_id": 93481947, "body": "Or, if you want to have fun <b>and</b> you want poor performances <b>and</b> you want to give headaches to people reading your code (don&#39;t tell me this never happens!!), you can use a recursive regex... <code>&#47;^((.)(?1)\\2|.?)$&#47;</code> ;)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1542201050, "post_id": 53299990, "comment_id": 93482489, "body": "<i>The reverse built-in, when called on a scalar, turns the string around.</i> That&#39;s not strictly accurate, is it? :-) <code>perl -E&#39;say reverse &quot;foobar&quot;&#39;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1542203070, "post_id": 53299990, "comment_id": 93483842, "body": "@DaveCross oops. :D"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1542203048, "last_edit_date": 1542203048, "creation_date": 1542197605, "answer_id": 53299990, "question_id": 53299694, "link": "https://stackoverflow.com/questions/53299694/how-do-i-check-a-palindrome-in-perl/53299990#53299990", "title": "How do I check a palindrome in Perl?", "body": "<p>Your code only checks the first letter and then stops the loop if they are the same. You've correctly identified that problem. It's because of the <a href=\"http://perldoc.perl.org/functions/last.html\" rel=\"nofollow noreferrer\"><code>last</code></a>.</p>\n\n<pre><code>foreach $i (0..$half){\n    my $count = 0;\n    if($all[$i] eq $all[-($i+1)]){\n        print \"true\\n\";\n        last;                       # &lt;-- here\n    }else{\n        print \"flase\\n\";\n    }\n}\n</code></pre>\n\n<p>This will make Perl exit the loop. What you want to do instead is keep checking every letter. Once you've reached the middle, your result is true because the string is a <a href=\"https://en.wikipedia.org/wiki/Palindrome\" rel=\"nofollow noreferrer\">palindrome</a>. But as soon as you see a mismatch, you have to fail and exit.</p>\n\n<p>You do that by keeping a status in a variable, and checking afterwards. I've added <code>strict</code> and <code>warnings</code> and made the code a bit shorter.</p>\n\n<pre><code>my $name = lc 'Do ducks see God?';\n$name =~ s/[^a-z]//g;\nmy @all = split //, $name;\nmy $half = $#all / 2;\n\nmy $is_palindrome = 1;\nforeach my $i ( 0 .. $half ) {\n    my $count = 0;\n    if ( $all[$i] ne $all[ -( $i + 1 ) ] ) {\n        $is_palindrome = 0;\n        last;\n    }\n}\n\nif ($is_palindrome) {\n    print \"true\\n\";\n} else {\n    print \"false\\n\";\n}\n</code></pre>\n\n<p>It's easier to use a <a href=\"http://perldoc.perl.org/functions/ne.html\" rel=\"nofollow noreferrer\"><code>ne</code> check</a>, because having an empty block after the <a href=\"http://perldoc.perl.org/functions/if.html\" rel=\"nofollow noreferrer\"><code>if</code></a> like this is confusing. </p>\n\n<pre><code>if ( 1 == 0 ) {\n} else {\n    # do stuff\n}\n</code></pre>\n\n<p>It's easier to turn the condition around and get rid of the block, or use <a href=\"http://perldoc.perl.org/functions/unless.html\" rel=\"nofollow noreferrer\"><code>unless</code></a>, which is the same as <em>if not</em> in Perl.</p>\n\n<pre><code>if ( 1 != 0 ) {\n    # do stuff\n}\n\nunless ( 1 == 0 ) {\n    # do stuff\n} \n</code></pre>\n\n<hr>\n\n<p>Note that there is a way shorter implementation: You can compare the string with its <code>reverse</code>. The <a href=\"http://perldoc.perl.org/functions/reverse.html\" rel=\"nofollow noreferrer\"><code>reverse</code> built-in</a>, when called in scalar context, turns the string around.</p>\n\n<pre><code>my $name = lc '12321';\n$name =~ s/[^a-z]//g;\n\nif ($name eq reverse $name) {\n    print \"true\\n\";\n} else {\n    print \"false\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542197829, "post_id": 53300031, "comment_id": 93480612, "body": "You stole my variable name... Give it back! :D"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542223562, "post_id": 53300031, "comment_id": 93495531, "body": "The <code>reverse</code> solutions needs to do twice as many checks, but I suspect that each check takes less than half the time as the checks in the other solution, so it&#39;s still faster."}, {"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1542292454, "post_id": 53300031, "comment_id": 93523603, "body": "The second solution works for me if <code>reverse name</code> is between parenthesis <code>(reverse $name)</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1542293768, "post_id": 53300031, "comment_id": 93524432, "body": "@saudic: Oops. Yes, I had a precedence error. I&#39;ve fixed it by changing <code>reverse $name</code> to <code>reverse($name)</code>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1542293717, "last_edit_date": 1542293717, "creation_date": 1542197726, "answer_id": 53300031, "question_id": 53299694, "link": "https://stackoverflow.com/questions/53299694/how-do-i-check-a-palindrome-in-perl/53300031#53300031", "title": "How do I check a palindrome in Perl?", "body": "<p>Currently, you print \"true\" or \"false\" for every iteration of your array of characters. You really want to check each letter and only print the result at the end.</p>\n\n<pre><code>my $is_palindrome = 1;\n\nforeach $i (0..$half){\n    if ($all[$i] ne $all[-($i+1)]){\n        $is_palindrome = 0;\n        last;\n    }\n}\n\nsay $is_palindrome ? 'true' : 'false';\n</code></pre>\n\n<p>But, personally, I think it's easier just to check your <code>$name</code> variable is the same as its reverse.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $name = $ARGV[0];\n$name = lc $name;\n$name =~ s/[^a-z]//g;\n\nsay $name eq reverse($name) ? 'true' : 'false';\n</code></pre>\n\n<p><strong>Note:</strong> Please use <code>use warnings</code> instead of <code>-w</code> and also <code>use strict</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 53299990, "answer_count": 2, "score": 1, "last_activity_date": 1542293717, "creation_date": 1542196564, "last_edit_date": 1542196811, "question_id": 53299694, "link": "https://stackoverflow.com/questions/53299694/how-do-i-check-a-palindrome-in-perl", "title": "How do I check a palindrome in Perl?", "body": "<p>I am trying to write a palindrome checker in Perl. It's supposed to return <code>\"true\"</code> if the input is the same forwards and backwards.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>./determine kayak\nTrue\n./determine \"Do geese see God?\"\nTrue\n./determine \"Do ducks see God?\"\nFalse\n</code></pre>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>#!/usr/bin/perl -w \n\n$name = $ARGV[0];\n$name = lc $name;\n$name =~ s/[^a-z]//g;\n@all = split //,$name;\n$half = $#all/2;\n\nforeach $i (0..$half){\n    my $count = 0;\n    if($all[$i] eq $all[-($i+1)]){\n        #print\"$all[$i]\\n\";\n        #print\"$all[-($i+1)]\\n\";\n        print \"true\\n\";\n        last;       \n    }else{\n        print \"flase\\n\";\n    }\n\n}\n</code></pre>\n\n<p>It can't determine true or false after read all.</p>\n\n<p>For example:\nwhen read: <code>\"Do ducks see God?\"</code>, the first two letter is same, so it will print true, but this should be false.</p>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1542196527, "post_id": 53299123, "comment_id": 93479894, "body": "Instead of reaching for threads, I think it&#39;s better to use the parallel API of <code>Net::DNS</code> as shown in the examples, <a href=\"https://metacpan.org/source/NLNETLABS/Net-DNS-1.18/demo/mresolv\" rel=\"nofollow noreferrer\">metacpan.org/source/NLNETLABS/Net-DNS-1.18/demo/mresolv</a> etc."}, {"owner": {"reputation": 3984, "user_id": 4121573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kxnXk.png?s=128&g=1", "display_name": "Adonis", "link": "https://stackoverflow.com/users/4121573/adonis"}, "edited": false, "score": 0, "creation_date": 1542196603, "post_id": 53299123, "comment_id": 93479945, "body": "I don&#39;t see you using any threads in your code, could you post the specific part with which you have an issue?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10651610"}, "reply_to_user": {"reputation": 3984, "user_id": 4121573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kxnXk.png?s=128&g=1", "display_name": "Adonis", "link": "https://stackoverflow.com/users/4121573/adonis"}, "edited": false, "score": 0, "creation_date": 1542219127, "post_id": 53299123, "comment_id": 93493436, "body": "@Adonis I don&#39;t really have an issue with the code itself. Running the code works BUT in just one instance. So if I have a database of say 200,000 entries, you can imagine how long it would take to go through it? If I am able to make the code run as a multi thread, say for example, 10 threads, then it would shorten the time to one-tenth. The issue is how do I add multithread. I went over some multithreading manuals and documents but it&#39;s so complex for me. Thanks"}, {"owner": {"reputation": 3984, "user_id": 4121573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kxnXk.png?s=128&g=1", "display_name": "Adonis", "link": "https://stackoverflow.com/users/4121573/adonis"}, "edited": false, "score": 0, "creation_date": 1542276656, "post_id": 53299123, "comment_id": 93514119, "body": "Stackoverflow deals mainly with specific coding issues, not with the creation of new features..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10651610"}, "edited": false, "score": 0, "creation_date": 1542219349, "post_id": 53303343, "comment_id": 93493566, "body": "Thank you for the reference materials. I will go through while I await your manual."}], "tags": [], "owner": {"reputation": 41, "user_id": 9396010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e0e843934a57e82bc87e031686a094?s=128&d=identicon&r=PG&f=1", "display_name": "Darius D", "link": "https://stackoverflow.com/users/9396010/darius-d"}, "is_accepted": false, "score": 2, "last_activity_date": 1542208433, "creation_date": 1542208433, "answer_id": 53303343, "question_id": 53299123, "link": "https://stackoverflow.com/questions/53299123/how-can-i-make-this-perl-script-run-multi-threaded/53303343#53303343", "title": "How can I make this Perl Script run Multi-threaded?", "body": "<p>When I get home, I'll write a better manual. Including code excerpts</p>\n\n<ul>\n<li>Step 1: Create a sequence with all important calls as a separate function</li>\n<li>Step 2: Use the function from step 1 to create the individual threads and specialize this function with the individual parameters</li>\n<li>Step 3: After the sequence is finish detach the thread.</li>\n</ul>\n\n<p>Maybe do Step 2 as a Loop/Daemon</p>\n\n<hr>\n\n<p>Here you can read something about threads and how do you use them in your code.</p>\n\n<p><a href=\"http://www.mathematik.uni-ulm.de/help/perl5/doc/perlthrtut.html\" rel=\"nofollow noreferrer\">mathematik.uni-ulm.de - English Tutorial Modul threads</a></p>\n\n<p>The Perldoc have a good example too:</p>\n\n<p><a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">perldoc - threads</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10651610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543608291, "creation_date": 1542194766, "last_edit_date": 1543608291, "question_id": 53299123, "link": "https://stackoverflow.com/questions/53299123/how-can-i-make-this-perl-script-run-multi-threaded", "title": "How can I make this Perl Script run Multi-threaded?", "body": "<p>I have to submit a class project for a perl script that run in a multithread and validates MX record against a list. I think I have the script ready but I just don't know how to implement multithreading to make it run, for example, in 50 threads. Kindly examine script below and help. SO basically, what I want it to do is to make the script run in a multithreaded way to speed it up and make it complete faster.\nYour help is very much appreciated.</p>\n\n<p>Edit: solved</p>\n"}, {"tags": ["perl", "google-maps"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542189932, "post_id": 53296495, "comment_id": 93475976, "body": "Have you looked at the debugging process outlined in <a href=\"https://developers.google.com/maps/premium/previous-licenses/articles/usage-limits\" rel=\"nofollow noreferrer\">developers.google.com/maps/premium/previous-licenses/article&zwnj;&#8203;s/&hellip;</a> ? The 24h limits are checked/reset once a day, so maybe you have to wait 24 hours. Also, maybe change your token just in case it has been leaked."}, {"owner": {"reputation": 1, "user_id": 7628134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0w53qzKudFw/AAAAAAAAAAI/AAAAAAAAAKs/sRxOaPLcKeU/photo.jpg?sz=128", "display_name": "RobH", "link": "https://stackoverflow.com/users/7628134/robh"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542194527, "post_id": 53296495, "comment_id": 93478784, "body": "Issue was the perl module being used was too old and was hardcoded to use http not https. It also had a parameter for setting the api key, but never sent it.  I&#39;ve discarded the module in favour of a direct call to the api url."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7628134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0w53qzKudFw/AAAAAAAAAAI/AAAAAAAAAKs/sRxOaPLcKeU/photo.jpg?sz=128", "display_name": "RobH", "link": "https://stackoverflow.com/users/7628134/robh"}, "is_accepted": false, "score": 0, "last_activity_date": 1542194866, "creation_date": 1542194866, "answer_id": 53299158, "question_id": 53296495, "link": "https://stackoverflow.com/questions/53296495/unexplained-google-maps-geocoding-over-query-limit/53299158#53299158", "title": "Unexplained Google Maps Geocoding OVER_QUERY_LIMIT", "body": "<p>The issue was the perl module being used was too old and was hardcoded to use http not https. It also had a parameter for setting the api key, but never sent it.</p>\n\n<p>I've discarded the module in favour of a direct call to the api url</p>\n"}], "owner": {"reputation": 1, "user_id": 7628134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0w53qzKudFw/AAAAAAAAAAI/AAAAAAAAAKs/sRxOaPLcKeU/photo.jpg?sz=128", "display_name": "RobH", "link": "https://stackoverflow.com/users/7628134/robh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1542194866, "creation_date": 1542186561, "last_edit_date": 1542194736, "question_id": 53296495, "link": "https://stackoverflow.com/questions/53296495/unexplained-google-maps-geocoding-over-query-limit", "title": "Unexplained Google Maps Geocoding OVER_QUERY_LIMIT", "body": "<p>I have a Perl script that uses Google's geocoding at a slow rate but today I'm hitting the 'OVER_QUERY_LIMIT' error.</p>\n\n<p>I'm fully signed up with billing and well below any budget limits.</p>\n\n<p>In the last 30 days Google says I've made 2,074 Geocoding API requests (with 0.1% errors) and they would be evenly distributed over the 30 days.</p>\n\n<p>I've bumped the quotas up to unlimited, per 100 up to 5,000 (max) and per 100 per user to unlimited and still the error occurs.</p>\n\n<p>The relevant Perl would be:</p>\n\n<pre><code>use Google::GeoCoder::Smart;\n\nmy ($resultnum, $error, @results, $returncontent) = $geo-&gt;geocode(\"address\" =&gt; $g, \"key\" =&gt; \"valid_key_hidden\", \"region\" =&gt; \"au\");\n</code></pre>\n\n<p>Any ideas ?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1542175658, "post_id": 53294023, "comment_id": 93469156, "body": "The Python third-party <a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\"><code>regex</code> library</a> has something called nested sets."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 2, "last_activity_date": 1542175285, "creation_date": 1542175285, "answer_id": 53294023, "question_id": 53293914, "link": "https://stackoverflow.com/questions/53293914/perl-match-some-char-but-not-include-someone/53294023#53294023", "title": "perl match some char but not include someone", "body": "<p>There is no way in current Perl regex to modify a character class; if you want to exclude something from a character class, you just have to enumerate the characters you want.</p>\n\n<p><code>[a-zA-Z]</code> minus <code>[BCD]</code> is <code>[a-zAE-Z]</code>.</p>\n\n<p><code>\\s</code> minus <code>\\t</code> is <code>[\\n\\f\\r ]</code> (also somewhat depending on flags etc; see <a href=\"https://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlrecharclass.html</a>)</p>\n"}], "owner": {"reputation": 3, "user_id": 7324060, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454440784581250/picture?type=large", "display_name": "Julung Fan", "link": "https://stackoverflow.com/users/7324060/julung-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53294023, "answer_count": 1, "score": 0, "last_activity_date": 1542262989, "creation_date": 1542174649, "last_edit_date": 1542262989, "question_id": 53293914, "link": "https://stackoverflow.com/questions/53293914/perl-match-some-char-but-not-include-someone", "title": "perl match some char but not include someone", "body": "<p>I have some string patterns like the following</p>\n\n<pre><code>(group 1)[(group 2)]\n</code></pre>\n\n<p>group 1 would be mixed chars of following</p>\n\n<p>(1)  include a-zA-Z but not BCD</p>\n\n<p>(2)  include \\s but not \\t</p>\n\n<p>How can I use regex for group1 ?</p>\n\n<p>like this ? ([a-zA-Z|^BCD]+|[\\s|^\\t]+) </p>\n\n<p>Actually, what I want to do is </p>\n\n<pre><code>John [\u2026.]\nJohn [\u2026.]\nJohn [\u2026.]\nJahn [\u2026.]\nJaja [\u2026.]\nlaja [\u2026.]\n\u2026\n</code></pre>\n\n<p>I want to use a <strong>regex method</strong> to include John and exclude Jahn, Jaja, laja.</p>\n\n<p>That's to include some specific patterns and exclude some specific patterns in one regex declaration.</p>\n"}, {"tags": ["linux", "perl", "debian"], "comments": [{"owner": {"reputation": 2172, "user_id": 8600836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VrWy0.jpg?s=128&g=1", "display_name": "sulabh chaturvedi", "link": "https://stackoverflow.com/users/8600836/sulabh-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1542160270, "post_id": 53291976, "comment_id": 93465581, "body": "You can use Perl System() function. read here - <a href=\"https://gssg.stanford.edu/public/systemfunction.html\" rel=\"nofollow noreferrer\">gssg.stanford.edu/public/systemfunction.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1542162080, "last_edit_date": 1542162080, "creation_date": 1542161583, "answer_id": 53292220, "question_id": 53291976, "link": "https://stackoverflow.com/questions/53291976/using-perl-for-taking-command-inputs/53292220#53292220", "title": "Using Perl for taking command inputs", "body": "<p><code>&lt;&gt;</code> is short for <code>&lt;ARGV&gt;</code>. <code>ARGV</code> is a magical handle that reads from the files named by the elements of <code>@ARGV</code>, or from <code>STDIN</code> if <code>@ARGV</code> is empty (as is the case here). So all you need to do is read using <code>&lt;&gt;</code>.</p>\n\n<p>For example,</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings qw( all );\n\nwhile (&lt;&gt;) {\n   chomp;\n   print \"Got &lt;$_&gt;\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ps aux | grep pts | ./script.pl\nGot &lt;ikegami  22570  0.0  0.0 101028  3460 ?        S    Nov07   0:02 sshd: ikegami@pts/2 &gt;\nGot &lt;ikegami  22571  0.0  0.0 129928  3456 pts/2    Ss   Nov07   0:00 -bash&gt;\nGot &lt;ikegami  22865  0.0  0.0 127240  2432 pts/2    R+   18:12   0:00 ps aux&gt;\nGot &lt;ikegami  22866  0.0  0.0 120540  2160 pts/2    S+   18:12   0:00 grep pts&gt;\nGot &lt;ikegami  22867  0.0  0.0 129604  3928 pts/2    R+   18:12   0:00 /usr/bin/perl ./script.pl&gt;\n</code></pre>\n\n<p>All that's left is to extract the information you want from the data you read in. Of course, you could simply use</p>\n\n<pre><code>ps ah -o tty,command\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10649327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc1a9ee87650513262f7b229bb6c35d?s=128&d=identicon&r=PG&f=1", "display_name": "DigiSlinger", "link": "https://stackoverflow.com/users/10649327/digislinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542168216, "creation_date": 1542159694, "last_edit_date": 1542168216, "question_id": 53291976, "link": "https://stackoverflow.com/questions/53291976/using-perl-for-taking-command-inputs", "title": "Using Perl for taking command inputs", "body": "<p>I'm having trouble with Perl reading in the output of a command.</p>\n\n<p>The command in question: <code>ps | grep |</code></p>\n\n<p>I am trying to execute a script like this:</p>\n\n<pre><code>ps  | grep  | script.pl\n</code></pre>\n\n<p>where the output of \"<code>ps  | grep |</code> \" will be used as input for the script to print out the status and its corresponding command.</p>\n\n<p>Output:</p>\n\n<pre><code>0    command1\n1    command2\n....\n</code></pre>\n\n<p>I know in bash you can access an argument to be used as input by using \"$#\".\nWhere # corresponds to its position in the command line. No clue in Perl. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1542167734, "post_id": 53291813, "comment_id": 93467168, "body": "it is not a bad thing to have code that does what it says."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542223957, "post_id": 53291813, "comment_id": 93495704, "body": "@ysth of course, and I wouldn&#39;t accept a solution that isn&#39;t that way.  I wasn&#39;t too fond of the &quot;-l&quot; option put in the shebang line because it&#39;s easy to miss.  I don&#39;t like using two lines, and I don&#39;t want to do <code>my $x = &lt;&gt;; chomp $x;</code> in one line."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1542164397, "post_id": 53291925, "comment_id": 93466525, "body": "Bad! This solution throws a warning if the last line ends with a line feed or if the file is empty, and it skips the last line otherwise."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542167627, "post_id": 53291925, "comment_id": 93467142, "body": "Also -1 for suggesting a source filter as a solution to any problem"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1542183117, "post_id": 53291925, "comment_id": 93472049, "body": "I specifically mentioned it uses a source filter so the reader can make their own decision on whether they&#39;re ok with that. If it makes it any better, the source filter is parsed using <code>PPI</code>, which makes it some-what more reliable, but of course not perfect."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 1, "creation_date": 1542222301, "post_id": 53291925, "comment_id": 93494971, "body": "I could use this part: <code>chomp(my $date = `date`);</code>  I had tried something close before posting this and it failed with &quot;Can&#39;t modify scalar chomp in scalar assignment&quot; - that&#39;s because I missed adding the parens."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 3, "last_activity_date": 1542183298, "last_edit_date": 1542183298, "creation_date": 1542159171, "answer_id": 53291925, "question_id": 53291813, "link": "https://stackoverflow.com/questions/53291813/is-there-a-less-tedious-way-to-use-perl-chomp/53291925#53291925", "title": "Is there a less tedious way to use Perl chomp?", "body": "<p>You can wrap <code>chomp</code> around the whole expression</p>\n\n<pre><code>chomp(my $date = `date`);\nsay $date;\n</code></pre>\n\n<p>For other suggestions on a sort of \"auto-chomp\" on filehandles, see <a href=\"https://stackoverflow.com/a/10155406/3124587\">this</a> answer.</p>\n\n<p><strong>Update</strong>: There's also a <a href=\"https://metacpan.org/pod/Backtick::AutoChomp\" rel=\"nofollow noreferrer\"><code>Backtick::AutoChomp</code></a> module, which is implemented with a source filter.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I originally also had the following snippet without actually testing it</p>\n\n<pre><code>while (chomp(my $line = &lt;$fh&gt;)) {\n    say $line;\n}\n</code></pre>\n\n<p>As per ikegami's comment, this is unreliable and will misbehave in various ways.</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1542167635, "post_id": 53291975, "comment_id": 93467144, "body": "<code>&lt;$fh&gt;;</code> throws away a line; it only implicitly sets <code>$_</code> in a while expression"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1542239363, "post_id": 53291975, "comment_id": 93501731, "body": "While this is nice for short programs, be wary: $_ is a global variable, and code you call can easily clobber it in the middle of your loop; also, while(&lt;$fh&gt;) does <i>not</i> localize its usage of $_, and so will inflict the same on any outer code. Assigning to a lexical variable avoids both these problems."}], "tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": false, "score": 3, "last_activity_date": 1542168721, "last_edit_date": 1542168721, "creation_date": 1542159692, "answer_id": 53291975, "question_id": 53291813, "link": "https://stackoverflow.com/questions/53291813/is-there-a-less-tedious-way-to-use-perl-chomp/53291975#53291975", "title": "Is there a less tedious way to use Perl chomp?", "body": "<p>Another option to reduce tedium is to learn to love <code>$_</code></p>\n\n<pre><code>while(&lt;$fh&gt;) {\n   chomp;\n}\n\nlocal $_ = &lt;$fh&gt;;\nchomp;\n\nlocal $_ = `command`;\nchomp;\n</code></pre>\n\n<p>Same number of lines, but now they are half as long :)</p>\n\n<p>edit: Corrected thanks to @ysth's comment, learnt something new today</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542222081, "post_id": 53292539, "comment_id": 93494859, "body": "Thanks, I could see this being useful in a common lib.  I understand you need this scalar implementation when calling chomper on a &lt;HANDLE&gt; to not slurp up all lines at once.  Otherwise maybe this variant can be used for both scalars and arrays  <code>sub chomper {    chomp(@_) if defined(@_);    return @_; } </code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542222192, "post_id": 53292539, "comment_id": 93494918, "body": "<code>defined(@array)</code> makes no sense. And your changes make it unusable to the OP (without adding <code>scalar</code> around the argument in the caller)"}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542222851, "post_id": 53292539, "comment_id": 93495206, "body": "I understand the OP is for scalar context.  I&#39;m trying to see if both scalars and arrays can be handled as native chomp can, i.e. something that would allow <code>my @files = chomper(`ls`);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542223062, "post_id": 53292539, "comment_id": 93495319, "body": "I just said you could... but I take it back. It would make for a really weird sub. Best to make it only work on a scalar, and use <code>map</code> to apply it to each element of a list. (<code>my @files = map chomper, `ls`</code>)"}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542241976, "post_id": 53292539, "comment_id": 93502423, "body": "About <code>_</code> I found the following (learned a new thing):  &quot;As the last character of a prototype, or just before a semicolon, a @ or a % , you can use _ in place of $ : if this argument is not provided, $_ will be used instead.&quot;    I&#39;m still unclear on why we need the <code>if defined</code> condition."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542270659, "post_id": 53292539, "comment_id": 93510598, "body": "@Automaton, Because <code>&lt;&gt;</code> returns undef on EOF."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542312733, "post_id": 53292539, "comment_id": 93534853, "body": "I understand but I didn&#39;t see any issue when removing that condition, at least not in my perl-5.10 release.  I even tried <code>$my u = chomper(undef); print &quot;&gt;$u&lt;&quot;;</code> and it gives <code>&gt;&lt;</code> without complaining."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542312812, "post_id": 53292539, "comment_id": 93534883, "body": "That code isn&#39;t valid Perl, so I&#39;m pretty sure it did complain. Even if you fix the typo, you&#39;d get not one but two &quot;uninitialized value&quot; warnings"}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1542318531, "post_id": 53292539, "comment_id": 93537142, "body": "silly mistake on my part of forgetting to use strict &amp; warnings, that&#39;s why it didn&#39;t complain."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1542223078, "last_edit_date": 1542223078, "creation_date": 1542164228, "answer_id": 53292539, "question_id": 53291813, "link": "https://stackoverflow.com/questions/53291813/is-there-a-less-tedious-way-to-use-perl-chomp/53292539#53292539", "title": "Is there a less tedious way to use Perl chomp?", "body": "<pre><code>sub chomper(_) {\n   my ($line) = @_;\n   chomp($line) if defined($line);\n   return $line;\n}\n\nwhile (defined( my $line = chomper(&lt;&gt;) )) {\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 53292539, "answer_count": 3, "score": 2, "last_activity_date": 1542223078, "creation_date": 1542158202, "question_id": 53291813, "link": "https://stackoverflow.com/questions/53291813/is-there-a-less-tedious-way-to-use-perl-chomp", "title": "Is there a less tedious way to use Perl chomp?", "body": "<p>Very frequently I have to do:</p>\n\n<pre><code>#similarly in while (my $val = &lt;$fh&gt;){...}\nmy $val = &lt;$fh&gt;;\nchomp $val;\n\nmy $res = `command`;\nchomp $res;\n</code></pre>\n\n<p>I'd rather skip the second line if I could.  I see I can use the -l option in my shebang line based on:  <a href=\"https://stackoverflow.com/questions/10154783/is-there-anything-in-core-perl-to-auto-chomp-lines-from-operator\">Is there anything in core Perl to auto-chomp lines from &quot;&lt;&gt;&quot; operator?</a> </p>\n\n<p>Is there something similar for backticks?  Or alternately, is there a way to chomp inline that is less verbose?</p>\n"}, {"tags": ["bash", "perl", "git-bash"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542153950, "post_id": 53291122, "comment_id": 93464155, "body": "Are these actually TSV (tab-separated values) files?"}, {"owner": {"reputation": 65, "user_id": 10649035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08989bb48e839998afcb20f22cc1036?s=128&d=identicon&r=PG", "display_name": "Faustino Delgado", "link": "https://stackoverflow.com/users/10649035/faustino-delgado"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542154598, "post_id": 53291122, "comment_id": 93464318, "body": "yes, they are, they point is i want to do it recursively, because all those files are in different directories, I know I can subset the files and apply a simple sed function, but it will be time consuming"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1542154755, "post_id": 53291122, "comment_id": 93464359, "body": "Do you want to just remove all spaces at the end of each tab-delimited field then?"}, {"owner": {"reputation": 65, "user_id": 10649035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08989bb48e839998afcb20f22cc1036?s=128&d=identicon&r=PG", "display_name": "Faustino Delgado", "link": "https://stackoverflow.com/users/10649035/faustino-delgado"}, "edited": false, "score": 0, "creation_date": 1542154828, "post_id": 53291122, "comment_id": 93464371, "body": "Yes, without affecting the first column and the first row, since those are metadata fields."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10649035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08989bb48e839998afcb20f22cc1036?s=128&d=identicon&r=PG", "display_name": "Faustino Delgado", "link": "https://stackoverflow.com/users/10649035/faustino-delgado"}, "edited": false, "score": 0, "creation_date": 1542212701, "post_id": 53291751, "comment_id": 93490138, "body": "that definetly solved the problem in the situation of just one row and one column of metadata, sorry for asking this, but I&#39;m not well versed in perl yet, how do I make the starting col row options dependable in a pair of variables?, because the number of metadata columns and rows vary greately.  In other things, when I was about to sleep I tought of a very simple solution:   &#39;sed &#39;s/[[:space:]]*\\t/\\t/g&#39; file &gt;outputfile&#39;"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1542157660, "last_edit_date": 1592644375, "creation_date": 1542157660, "answer_id": 53291751, "question_id": 53291122, "link": "https://stackoverflow.com/questions/53291122/start-sed-from-a-specific-coordinate-in-a-dataframe-tab-delimited-through-gitb/53291751#53291751", "title": "Start sed from a specific coordinate in a dataframe (tab delimited) through gitbash", "body": "<p>The question seems to boil down to:</p>\n<blockquote>\n<p>Do you want to just remove all spaces at the end of each tab-delimited field then?</p>\n<p>Yes, without affecting the first column and the first row, since those are metadata fields</p>\n</blockquote>\n<p>Assuming that you don't have to worry about any fields with embedded tabs (If you do, you'll want a solution with an actual CSV parser):</p>\n<p>Skipping the first column and first row make it a bit more complicated, but it can still be done as a somewhat cumbersome one-liner:</p>\n<pre><code>$ cat a.tsv\nfoo     bar     baz\nab  bc  de\n1   1   3\n$ xxd a.tsv\n00000000: 666f 6f20 0962 6172 2009 6261 7a0a 6162  foo .bar .baz.ab\n00000010: 2009 6263 2009 6465 0a31 2020 0931 2020   .bc .de.1  .1  \n00000020: 0933 0a                                  .3.\n$ perl -pe 'if ($. &gt; 1) { my @f = split /\\t/; $_ = join &quot;\\t&quot;, $f[0], map { s/ +$//; $_ } @f[1..$#f] }' a.tsv | xxd\n00000000: 666f 6f20 0962 6172 2009 6261 7a0a 6162  foo .bar .baz.ab\n00000010: 2009 6263 0964 650a 3120 2009 3109 330a   .bc.de.1  .1.3.\n</code></pre>\n<p>You can see the trailing spaces in the fields other than the first line and first column in following lines have been removed.</p>\n<p>If you want to edit a directory tree's worth of files in place:</p>\n<pre><code>$ find /path/to/the/dir/ -name &quot;*.tsv&quot; -exec perl -pi -e 'if ($. &gt; 1) { my @f = split /\\t/; $_ = join &quot;\\t&quot;, $f[0], map { s/ +$//; $_ } @f[1..$#f] }' \\{\\} \\;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10649035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08989bb48e839998afcb20f22cc1036?s=128&d=identicon&r=PG", "display_name": "Faustino Delgado", "link": "https://stackoverflow.com/users/10649035/faustino-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542159865, "creation_date": 1542152764, "last_edit_date": 1542159865, "question_id": 53291122, "link": "https://stackoverflow.com/questions/53291122/start-sed-from-a-specific-coordinate-in-a-dataframe-tab-delimited-through-gitb", "title": "Start sed from a specific coordinate in a dataframe (tab delimited) through gitbash", "body": "<p>I have several files where I want to apply this option, if available.</p>\n\n<p>A colleague of mine developed a perl script to get the proportion of unique characters/strings in a file starting in a specific coordinate, it works like this:</p>\n\n<pre><code>$./perlscript.pl --f=&lt;File.gz&gt; --r=&lt;row start&gt; --c=&lt;col start&gt; &gt; outputfile\n</code></pre>\n\n<p>Which is great, since it allows to process a variety of files and sizes.</p>\n\n<p>After applying this script to a handful of files, I detected that a lot of those unique characters, came with a space after them.</p>\n\n<p>This same colleague developed a script that replaces unwanted characters with others, the problem is that this script just replaces one option at a time, and if that unwanted character comes along with other wanted characters, it does not recognize the specific unwanted character, i.e:</p>\n\n<p>to get \"AB\" and \"CD\", from \"AB \" and \"CD \", I have to specify to the script to replace \"AB \" for \"AB\" and \"CD \" for \"CD\" individually. </p>\n\n<p>I just want to eliminate the space  starting from a specific coordinate in a file, to not mess with the colnames and rownames.</p>\n\n<p>It does not have to be exclusively with sed, it can also be a perl script or an awk function.</p>\n"}, {"tags": ["multithreading", "perl", "xs"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542135815, "post_id": 53287629, "comment_id": 93457684, "body": "I think variables at the Perl level ( anything having an <code>SV</code> or coming from <code>newSV</code> ) are not shared, while anything at the C/XS level is shared, because that&#39;s how C is."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1558216141, "last_edit_date": 1558216141, "creation_date": 1542139029, "answer_id": 53288571, "question_id": 53287629, "link": "https://stackoverflow.com/questions/53287629/why-are-static-variables-in-an-xsub-not-thread-safe/53288571#53288571", "title": "Why are static variables in an xsub not thread safe?", "body": "<p>Each thread has its own interpreter. This struct<sup>[1]</sup> stores everything that makes up <code>perl</code>, including parser state, regex engine state, symbol table, and all \"<code>SV</code>\" (which includes scalars, arrays, hashes, code, etc). Creating a new thread from within Perl copies makes a copy of the current interpreter.</p>\n\n<p>XS code may safely use the Perl API because each function has a parameter that specifies the interpreter to use. This is often invisible to the code thanks to macros, but you might have noticed references to \"<code>THX</code>\" or \"Perl context\". Just don't pass an SV that belongs to one interpreter to another. (You might have heard of the \"Free to wrong pool\" error message that can result from this.)</p>\n\n<p>But Perl can't offer any protection to things outside of its knowledge or control, such as the static storage of the external libraries it loads. No copies of those are made. Two threads could call the same C function at the same time, so precautions need to be taken as if you were writing a multi-threaded C program.</p>\n\n<p>That macro framework to which your quote alludes gives access to per-interpreter storage. It also allows the library to specify a function to call on creation of new Perl threads to clone the variables into to the new interpreter.</p>\n\n<hr>\n\n<ol>\n<li>If Perl is built without <code>-Dusemultiplicity</code>, the Perl interpreter consists of a bajillion global (static) variables instead. <code>MULTIPLICITY</code> moves them into a struct and adds a context parameter to Perl API calls. This has a performance penalty, but it allows a process to have multiple Perl interpreters. Because threaded builds of Perl requires this, building a threaded <code>perl</code> (<code>-Dusethreads</code>) presumes <code>-Dusemultiplicity</code>.</li>\n</ol>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 53288571, "answer_count": 1, "score": 1, "last_activity_date": 1558216141, "creation_date": 1542134746, "question_id": 53287629, "link": "https://stackoverflow.com/questions/53287629/why-are-static-variables-in-an-xsub-not-thread-safe", "title": "Why are static variables in an xsub not thread safe?", "body": "<p>According to <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\"><code>perldoc threads</code></a>:</p>\n\n<blockquote>\n  <p>Since Perl 5.8, thread programming has been available using a model\n  called interpreter threads which provides a new Perl interpreter for\n  each thread, and, by default, results in no data or state information\n  being shared between threads.</p>\n</blockquote>\n\n<p>What type of <code>data</code> or <code>state</code> information is referred to in the above quote? According to <a href=\"https://perldoc.perl.org/perlxs.html#Safely-Storing-Static-Data-in-XS\" rel=\"nofollow noreferrer\"><code>perldoc perlxs</code></a>: </p>\n\n<blockquote>\n  <p>Starting with Perl 5.8, a macro framework has been defined to allow\n  static data to be safely stored in XS modules that will be accessed\n  from a multi-threaded Perl.</p>\n</blockquote>\n\n<p>So it seems to me static variables are shared between threads? But Perl variables are not shared?\n(I am trying to figure out exactly what kind of data is thread safe, and how to create a thread safe module)</p>\n"}, {"tags": ["wordpress", "perl", "oauth", "signature"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "edited": false, "score": 0, "creation_date": 1542306779, "post_id": 53290353, "comment_id": 93532130, "body": "Thanks. I could not get things working with Net::OAuth so I tried writing my code again from scratch and explicitly following the guidelines at <a href=\"http://lti.tools/oauth/\" rel=\"nofollow noreferrer\">lti.tools/oauth</a> until my code output matched theirs.  Hallelujah! It&#39;s now working."}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 0, "last_activity_date": 1542147427, "creation_date": 1542147427, "answer_id": 53290353, "question_id": 53287622, "link": "https://stackoverflow.com/questions/53287622/am-i-generating-the-oauth-signature-incorrectly-or-is-there-another-issue-with-t/53290353#53290353", "title": "Am I generating the OAuth signature incorrectly or is there another issue with this Perl / OAuth client code?", "body": "<p>Try using <a href=\"https://metacpan.org/pod/Net::OAuth\" rel=\"nofollow noreferrer\">Net::OAuth</a></p>\n\n<p>If you really need to fix your implementation then try removing all <code>uri_escape</code> and testing with data that doesn't require any escaping.\nIt looks like you have some unnecessary or double escaping. Start with <code>build_base_string</code> function. \nI thinks that <code>=</code> sign should be unescaped.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "is_accepted": false, "score": 0, "last_activity_date": 1542307607, "creation_date": 1542307607, "answer_id": 53326061, "question_id": 53287622, "link": "https://stackoverflow.com/questions/53287622/am-i-generating-the-oauth-signature-incorrectly-or-is-there-another-issue-with-t/53326061#53326061", "title": "Am I generating the OAuth signature incorrectly or is there another issue with this Perl / OAuth client code?", "body": "<p>I could not get things working with Net::OAuth so I tried writing my code again from scratch and explicitly following the guidelines at <a href=\"http://lti.tools/oauth/\" rel=\"nofollow noreferrer\">http://lti.tools/oauth/</a> until my code output matched theirs.  Hallelujah! It's now working.</p>\n\n<p>One thing I had to add, and Postman fails to do this as well, is to url encode the signature. Makes sense, of course, but odd that Postman misses it and sends an occasional unescaped '+'.</p>\n"}], "owner": {"reputation": 113, "user_id": 10387670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf786ab55696fdffc26afbab4a51cd1?s=128&d=identicon&r=PG&f=1", "display_name": "mifydnu", "link": "https://stackoverflow.com/users/10387670/mifydnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1052, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1542307607, "creation_date": 1542134711, "question_id": 53287622, "link": "https://stackoverflow.com/questions/53287622/am-i-generating-the-oauth-signature-incorrectly-or-is-there-another-issue-with-t", "title": "Am I generating the OAuth signature incorrectly or is there another issue with this Perl / OAuth client code?", "body": "<p>OK, I'm going nuts here. I've spent the better part of a week working on this with Fiddler, Rest API Log, Apache logs, Postman, etc. and am no closer to a solution. Hopefully this will provide someone with a good laugh (as it's easy) and me with a solution (for my sanity).</p>\n\n<p>I have a Wordpress 4.9.8 install hosted on hostgator. I have the WP REST API - OAuth 1.0a Server plugin installed and am attempting to authenticate with OAuth from a Perl script. I've been successful connecting with Postman using the credential generated by registering an application in the UI (Wordpress > Users > Applications) but cannot seem to crack the code using curl or a perl script (or php or anything else I've tried).  As Postman works (whenever it does not generate a space in the OAuth signature) I believe the plugin does, in fact, work. Below is my code where I've attempted to follow the spec regarding parameters, sorting, URI encoding, utf8 encoding, etc. Everything 'looks' ok when examining headers/query params in either Fiddle or the REST API Log plugin (pretty great little tool, that) and yet, no love.</p>\n\n<p>Thanks for any advice or direction.</p>\n\n<p>Client code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse JSON;\nuse URI::Escape;\nuse Digest::HMAC_SHA1 qw( hmac_sha1 );\nuse MIME::Base64 qw( encode_base64 );\nuse Encode;\nuse Data::Dumper;\n\nmy $timestamp = time();\nmy $method    = 'GET';\nmy $url       = \"https://hoppingmadmonkey.com/wp-json/myapiplugin/v2/greeting\";\n\nmy $client_secret = \"GelrnAAr1nCe5fzmTqzrU82PsfKCmKlDOZrLPakQRkH4sizJ\";\nmy $token_secret  = \"mdeVuJnrs8VSDJNJfMNPQRqBkG8xadfK0jAYjDGhmKOeaY7O\";\n\n#my $nonce = $ARGV[0];          # test with Postman generated parameters\n#$timestamp = $ARGV[1];         # test with Postman generated parameters\n#my $signature = $ARGV[2];      # test with Postman generated parameters\n\nmy %params = (\n        oauth_consumer_key =&gt; \"NCo8bflKU9LI\",\n        oauth_signature_method =&gt; \"HMAC-SHA1\",\n        oauth_realm        =&gt; \"https://hoppingmadmonkey.com\",\n        oauth_timestamp    =&gt; $timestamp,\n        oauth_token        =&gt; \"2GeFG7MkXliq2OBOSSCSRBPX\",\n        oauth_version      =&gt; \"1.0\",\n);\n\n$params{oauth_nonce}    = create_nonce();\n#$params{oauth_nonce}    = $nonce;              # test with Postman generated parameters\n$params{oauth_timestamp} = $timestamp;\n\nmy $key            = create_key($client_secret,$token_secret);\nmy ($params,$base) = build_base_string($method, $url, \\%params);\nmy $signature      = create_signature($base, $key);\n\n\n#for (sort keys %params) { print \"$_=$params{$_}\", \"\\n\"; }\nprint \"params: $params\\n\\n\";\nprint \"basestring: $base\\n\\n\";\nprint \"key: $key\\n\\n\";\nprint \"signature [$signature]\\n\\n\";\n\n$params{oauth_signature} = $signature;          # -- set signature for GET query string\n\nmy $request_string = build_request_string($url,\\%params);\nprint \"\\nrequest_string [$request_string]\\n\\n\";\n\nmy $ua = LWP::UserAgent-&gt;new();\n$ua-&gt;default_header(\"Authorization\", \"Basic user:pass\");\nmy $response = $ua-&gt;get($request_string);\nprint Dumper $response, \"\\n\";\nexit;\n\nmy $curlcmd = qq{/usr/bin/curl -i -X GET \"$request_string\"};\n#`$curlcmd 2&gt;&amp;1`;\n\n\nsub create_signature {\n        my ($t,$k) = @_;\n        my $str = encode_base64(hmac_sha1($t,$k));\n        chomp $str;\n        return $str;\n}\n\n\n# Create unique nonce\n#\nsub create_nonce {\n        my $str = `/bin/cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 11 | head -n 1`;\n        chomp $str;\n        return $str;\n}\n\n# Create oauth key for generating hmac-sha1 signature\n#\nsub create_key {\n        my ($cs,$ts) = @_;\n        $cs = encode('utf8',uri_escape($cs));\n        $ts = encode('utf8',uri_escape($ts));\n        return \"$cs&amp;$ts\";\n}\n\n\n# Build basestring for generating hmac-sha1 signature\n#\nsub build_request_string {\n        my ($u,$p) = @_;\n        my %params = %$p;\n\n        my $str = $u . '?';\n        my @tmp;\n        for (sort keys %params) {\n                $p = uri_escape($_) . '=' . uri_escape($params{$_});\n                push @tmp, $p;\n        }\n        $str .= join '&amp;', @tmp;\n        return $str;\n}\n\n\n# build the base string parameter for creating the signature\n#\nsub build_base_string {\n        my ($m,$u,$phash) = @_;\n        my %params = %$phash;\n\n        my $str = $method;\n        $str .= '&amp;' . uri_escape($u) . '&amp;';\n        my @tmp;\n        for (sort keys %params) {\n                push @tmp, uri_escape(\"$_=$params{$_}\");\n        }\n        $params = join '&amp;', @tmp;\n        $str .= join '&amp;', @tmp;\n        return $params,$str;\n\n}\n\n1;\n</code></pre>\n\n<p>The result of running this from the command line is:</p>\n\n<pre><code>dnu [test] ::&gt;./oauth-perl.pl\nparams: oauth_consumer_key%3DNCo8bflKU9LI&amp;oauth_nonce%3DJrGdlVLXpB4&amp;oauth_realm%3Dhttps%3A%2F%2Fhoppingmadmonkey.com&amp;oauth_signature_method%3DHMAC-SHA1&amp;oauth_timestamp%3D1542134239&amp;oauth_token%3D2GeFG7MkXliq2OBOSSCSRBPX&amp;oauth_version%3D1.0\n\nbasestring: GET&amp;https%3A%2F%2Fhoppingmadmonkey.com%2Fwp-json%2Fmyapiplugin%2Fv2%2Fgreeting&amp;oauth_consumer_key%3DNCo8bflKU9LI&amp;oauth_nonce%3DJrGdlVLXpB4&amp;oauth_realm%3Dhttps%3A%2F%2Fhoppingmadmonkey.com&amp;oauth_signature_method%3DHMAC-SHA1&amp;oauth_timestamp%3D1542134239&amp;oauth_token%3D2GeFG7MkXliq2OBOSSCSRBPX&amp;oauth_version%3D1.0\n\nkey: GelrnAAr1nCe5fzmTqzrU82PsfKCmKlDOZrLPakQRkH4sizJ&amp;mdeVuJnrs8VSDJNJfMNPQRqBkG8xadfK0jAYjDGhmKOeaY7O\n\nsignature [2pJRR1fz0uUdUWHlUjHFWlXFbL4=]\n\n\nrequest_string [https://hoppingmadmonkey.com/wp-json/myapiplugin/v2/greeting?oauth_consumer_key=NCo8bflKU9LI&amp;oauth_nonce=JrGdlVLXpB4&amp;oauth_realm=https%3A%2F%2Fhoppingmadmonkey.com&amp;oauth_signature=2pJRR1fz0uUdUWHlUjHFWlXFbL4%3D&amp;oauth_signature_method=HMAC-SHA1&amp;oauth_timestamp=1542134239&amp;oauth_token=2GeFG7MkXliq2OBOSSCSRBPX&amp;oauth_version=1.0]\n\n$VAR1 = bless( {\n                 '_protocol' =&gt; 'HTTP/1.1',\n                 '_content' =&gt; '\n{\"code\":\"json_oauth1_signature_mismatch\",\"message\":\"OAuth signature does not match\",\"data\":{\"status\":401}}',\n                 '_rc' =&gt; '401',\n                 '_headers' =&gt; bless( {\n                                        'connection' =&gt; 'close',\n                                        'cache-control' =&gt; 'no-cache, must-revalidate, max-age=0',\n                                        'date' =&gt; 'Tue, 13 Nov 2018 18:37:19 GMT',\n                                        'client-ssl-cert-issuer' =&gt; '/C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=COMODO RSA Domain Validation Secure Server CA',\n                                        'client-ssl-cipher' =&gt; 'ECDHE-RSA-AES256-GCM-SHA384',\n                                        'client-peer' =&gt; '192.185.236.193:443',\n                                        'access-control-expose-headers' =&gt; 'X-WP-Total, X-WP-TotalPages',\n                                        'x-robots-tag' =&gt; 'noindex',\n                                        'client-warning' =&gt; 'Missing Authenticate header',\n                                        'client-date' =&gt; 'Tue, 13 Nov 2018 18:37:22 GMT',\n                                        'client-ssl-warning' =&gt; 'Peer certificate not verified',\n                                        'content-type' =&gt; 'application/json; charset=UTF-8',\n                                        'client-transfer-encoding' =&gt; [\n                                                                        'chunked'\n                                                                      ],\n                                        'server' =&gt; 'Apache',\n                                        'x-endurance-cache-level' =&gt; '2',\n                                        'client-ssl-socket-class' =&gt; 'IO::Socket::SSL',\n                                        'link' =&gt; '&lt;https://hoppingmadmonkey.com/index.php/wp-json/&gt;; rel=\"https://api.w.org/\"',\n                                        'access-control-allow-headers' =&gt; 'Authorization, Content-Type',\n                                        'client-response-num' =&gt; 1,\n                                        'x-content-type-options' =&gt; 'nosniff',\n                                        'client-ssl-cert-subject' =&gt; '/OU=Domain Control Validated/OU=Hosted by HostGator.com, LLC./OU=PositiveSSL Wildcard/CN=*.hostgator.com',\n                                        'expires' =&gt; 'Wed, 11 Jan 1984 05:00:00 GMT'\n                                      }, 'HTTP::Headers' ),\n                 '_msg' =&gt; 'Unauthorized',\n                 '_request' =&gt; bless( {\n                                        '_content' =&gt; '',\n                                        '_uri' =&gt; bless( do{\\(my $o = 'https://hoppingmadmonkey.com/wp-json/myapiplugin/v2/greeting?oauth_consumer_key=NCo8bflKU9LI&amp;oauth_nonce=JrGdlVLXpB4&amp;oauth_realm=https%3A%2F%2Fhoppingmadmonkey.com&amp;oauth_signature=2pJRR1fz0uUdUWHlUjHFWlXFbL4%3D&amp;oauth_signature_method=HMAC-SHA1&amp;oauth_timestamp=1542134239&amp;oauth_token=2GeFG7MkXliq2OBOSSCSRBPX&amp;oauth_version=1.0')}, 'URI::https' ),\n                                        '_headers' =&gt; bless( {\n                                                               'user-agent' =&gt; 'libwww-perl/5.833',\n                                                               'authorization' =&gt; 'Basic user:pass'\n                                                             }, 'HTTP::Headers' ),\n                                        '_method' =&gt; 'GET',\n                                        '_uri_canonical' =&gt; bless( do{\\(my $o = 'https://hoppingmadmonkey.com/wp-json/myapiplugin/v2/greeting?oauth_consumer_key=NCo8bflKU9LI&amp;oauth_nonce=JrGdlVLXpB4&amp;oauth_realm=https%3A%2F%2Fhoppingmadmonkey.com&amp;oauth_signature=2pJRR1fz0uUdUWHlUjHFWlXFbL4%3D&amp;oauth_signature_method=HMAC-SHA1&amp;oauth_timestamp=1542134239&amp;oauth_token=2GeFG7MkXliq2OBOSSCSRBPX&amp;oauth_version=1.0')}, 'URI::https' )\n                                      }, 'HTTP::Request' )\n               }, 'HTTP::Response' );\n$VAR2 = '\n';\n</code></pre>\n\n<p>In the interests of expedience, I've included my real secrets and website. It's all test at the moment. Feel free to try a solution if you have that kind of time on your hands. I can always invalidate the tokens if/when they get abused and will obviously change once/if I can understand the problem.</p>\n\n<p>The obvious thought is that I am not generating the signature correctly (Big Hint: </p>\n\n<pre><code>{\"code\":\"json_oauth1_signature_mismatch\",\"message\":\"OAuth signature does not match\",\"data\":{\"status\":401}}',\n</code></pre>\n\n<p>)</p>\n\n<p>I think I've ready everything on the entire Internet to no avail. Thanks in advance for any thoughts. And if you are near Atlanta, GA and help me out, the beer's on me.</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["regex", "perl", "sed"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1542128725, "creation_date": 1542128725, "answer_id": 53286152, "question_id": 53285955, "link": "https://stackoverflow.com/questions/53285955/regex-substitute-multiple-lines-for-a-single-line/53286152#53286152", "title": "Regex substitute multiple lines for a single line", "body": "<p>Both sed and Perl process the input line by line. You can tell Perl to load the whole file into memory by using <code>-0777</code> (if it's not too large):</p>\n\n<pre><code>perl -0777 -pe 's=[0-9]{2}/[0-9]{2}/[0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2}\\n\\nPage [0-9]+ of [0-9]+=PAGE BREAK=g'\n</code></pre>\n\n<p>Note that I used <code>[0-9]</code>, because <code>\\d</code> can match \u0664, \u0ed6, \u096c, or \ud835\udfe1.</p>\n\n<p>I also used <code>s===</code> instead of <code>s///</code> so I don't have to backslash the slashes in the date part.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1542145046, "last_edit_date": 1542145046, "creation_date": 1542144632, "answer_id": 53289794, "question_id": 53285955, "link": "https://stackoverflow.com/questions/53285955/regex-substitute-multiple-lines-for-a-single-line/53289794#53289794", "title": "Regex substitute multiple lines for a single line", "body": "<p>Another Perl variant</p>\n\n<pre><code>$ cat page_break.txt\n123 45 jh kljl\n11/13/2018 08:33:00\n\nPage 1 of 1\nghjgjh hkjhj\nfhfghfghfh\n11/13/2018 08:33:00\n\nPage 1 of 2\nghgigkjkj\n\n$ perl -ne '{ if ( (/\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}:\\d{2}/ and $x++)or ( /^\\s*$/ and $x++) or (/Page \\d of \\d/ and $x++) ){} if($x==0) { print \"$_\" } if($x==3) { print \"PAGE BREAK\\n\"; $x=0} }' page_break.txt\n123 45 jh kljl\nPAGE BREAK\nghjgjh hkjhj\nfhfghfghfh\nPAGE BREAK\nghgigkjkj\n\n$\n</code></pre>\n"}], "owner": {"reputation": 2306, "user_id": 3991649, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/nwb21.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3991649/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 53286152, "answer_count": 2, "score": -1, "last_activity_date": 1542145046, "creation_date": 1542128151, "question_id": 53285955, "link": "https://stackoverflow.com/questions/53285955/regex-substitute-multiple-lines-for-a-single-line", "title": "Regex substitute multiple lines for a single line", "body": "<p>I have a plain text file in which I need to substitute multiple consecutive lines of text with a single replacement line.  For example, when I have a date and time, followed by a blank line, followed by a page number,</p>\n\n<pre><code>11/13/2018 08:33:00\n\nPage 1 of 1\n</code></pre>\n\n<p>I'd like to replace it with a single line (e.g., <code>PAGE BREAK</code>).</p>\n\n<p>I've tried</p>\n\n<pre><code>sed 's/\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}:\\d{2}\\n\\nPage \\d of \\d/PAGE BREAK/g' file1.txt &gt; file2.txt\n</code></pre>\n\n<p>and</p>\n\n<pre><code>perl -pe 's/\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}:\\d{2}\\n\\nPage \\d of \\d/PAGE BREAK/g' file1.txt &gt; file2.txt\n</code></pre>\n\n<p>but it leaves the text unchanged.</p>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542127350, "post_id": 53285318, "comment_id": 93453391, "body": "@jack: Can I point you at <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1542144921, "post_id": 53285318, "comment_id": 93461434, "body": "From <a href=\"https://perldoc.pl/perlop#Additive-Operators\" rel=\"nofollow noreferrer\">perlop</a>: Binary <code>&quot;+&quot;</code> returns the sum of two numbers. Binary <code>&quot;.&quot;</code> concatenates two strings."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1542126514, "post_id": 53285405, "comment_id": 93452820, "body": "Perhaps throw in a blurb about interpolation as well (I was going to but you&#39;ve already got the first part done): <code>my $hostname_table = &quot;${hostname}_table&quot;;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1542126596, "post_id": 53285405, "comment_id": 93452882, "body": "@stevieb: I considered it, but the need for <code>{...}</code> in this case made it slightly more complicated than I wanted to explain. I&#39;ll give it a go :-/"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1542126704, "post_id": 53285405, "comment_id": 93452964, "body": "You don&#39;t have to, it was just a thought ;)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1542126774, "post_id": 53285405, "comment_id": 93453007, "body": "@stevieb: Done."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1542126810, "post_id": 53285405, "comment_id": 93453037, "body": "++. I just thought it would round out the answer is all."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1542126862, "last_edit_date": 1542126862, "creation_date": 1542126468, "answer_id": 53285405, "question_id": 53285318, "link": "https://stackoverflow.com/questions/53285318/perl-add-a-variable-in-a-variable/53285405#53285405", "title": "Perl - add a variable in a variable", "body": "<p>What you're looking for here is called \"string concatenation\". Perl uses a dot (<code>.</code>) as the concatenation operator, not the <code>+</code> which you've tried to use.</p>\n\n<pre><code>$hostname_table = $hostname . '_table';\nprint $hostname_table;\n</code></pre>\n\n<p><strong>Update:</strong> Another common approach would be to just \"interpolate\" the values in a double-quoted string.</p>\n\n<pre><code>$hostname_table = \"$hostname_table\"; # This doesn't work.\n</code></pre>\n\n<p>Unfortunately, this simple approach doesn't work here as \"_table\" is valid as part of a variable name and, therefore, Perl doesn't know where your variable name ends. You can get around that by using a slightly more complex syntax which wraps the variable name in <code>{ ... }</code>.</p>\n\n<pre><code>$hostname_table = \"${hostname}_table\";\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 53285405, "answer_count": 1, "score": 1, "last_activity_date": 1542126862, "creation_date": 1542126226, "last_edit_date": 1542126689, "question_id": 53285318, "link": "https://stackoverflow.com/questions/53285318/perl-add-a-variable-in-a-variable", "title": "Perl - add a variable in a variable", "body": "<p>I want add the variable <code>$hostname</code> in the variable <code>$hostame_table</code> appended with <code>_table</code>.</p>\n\n<p>My code:</p>\n\n<pre><code>use Sys::Hostname ();\nmy $hostname = Sys::Hostname::hostname();\nmy $hostname_table = \"$hostname\"+\"_table\";\nprint \"$hostname_table\";\n</code></pre>\n\n<p>I would like the result to be <code>computername_table</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1542124832, "post_id": 53284859, "comment_id": 93451725, "body": "Welcome to Stack Overflow. Please <a href=\"https://stackoverflow.com/posts/53284859/edit\">edit</a> your question and include sample input and output. It&#39;s hard to understand what you mean exactly."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1542125824, "post_id": 53284859, "comment_id": 93452369, "body": "Can quotes be nested, can they be escaped, does an apostrophe count as a quote, and what should happen in those cases?"}, {"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1542127064, "post_id": 53284859, "comment_id": 93453190, "body": "$str=~s/(.*?)(&quot;.*?&quot;)/sprintf(&quot;%s%s&quot;,lc $1, $2)/ge;    #this will do it"}, {"owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542128575, "post_id": 53284859, "comment_id": 93454154, "body": "@simbabque Thanks, I have added sample input and output now."}, {"owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1542128688, "post_id": 53284859, "comment_id": 93454227, "body": "@DavidO The input I am working on is SQL and the ones I have do not have nested quotes and there are no apostrophes."}, {"owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1542128729, "post_id": 53284859, "comment_id": 93454257, "body": "@hoffmeister Will try that out, thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542129174, "post_id": 53284859, "comment_id": 93454537, "body": "So you want to make the SQL commands lowercase?"}, {"owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542129336, "post_id": 53284859, "comment_id": 93454636, "body": "@simbabque yes, all the text except ones within single quotes"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542129445, "post_id": 53284859, "comment_id": 93454694, "body": "Why do you want to do this?"}, {"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1542129517, "post_id": 53284859, "comment_id": 93454745, "body": "I have found that the general answer to the question &quot;Can X be done in Perl with a regex?&quot; is &quot;yes&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1542135865, "post_id": 53284859, "comment_id": 93457709, "body": "@SilvioMayolo usually though the answer to the question &quot;Should this be done in Perl with a regex&quot; is &quot;no&quot; though. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "edited": false, "score": 0, "creation_date": 1542131179, "post_id": 53286366, "comment_id": 93455567, "body": "Thanks a lot for that, exactly what I was looking for."}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 2, "last_activity_date": 1542129429, "creation_date": 1542129429, "answer_id": 53286366, "question_id": 53284859, "link": "https://stackoverflow.com/questions/53284859/lowercase-everything-except-content-between-single-quotes-perl/53286366#53286366", "title": "lowercase everything except content between single quotes - perl", "body": "<p>You can give this a shot. All one regexp.</p>\n\n<pre><code>$str =~ s/(?:^|'[^']*')\\K[^']*/lc($&amp;)/ge;\n</code></pre>\n\n<p>Or, cleaner and more documented (this is semantically equivalent to the above)</p>\n\n<pre><code>$str =~ s/\n  (?:\n    ^     | # Match either the start of the string, or\n    '[^']*' # some text in quotes.\n  )\\K       # Then ignore that part,\n            # because we want to leave it be.\n  [^']*     # Take the text after it, and\n            # lowercase it.\n  /lc($&amp;)/gex;\n</code></pre>\n\n<p>The <code>g</code> flag tells the regexp to run as many times as necessary. <code>e</code> tells it that the substitution portion (<code>lc($&amp;)</code>, in our case) is Perl code, not just text. <code>x</code> lets us put those comments in there so that the regexp isn't total gibberish.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1542141538, "creation_date": 1542141538, "answer_id": 53289147, "question_id": 53284859, "link": "https://stackoverflow.com/questions/53284859/lowercase-everything-except-content-between-single-quotes-perl/53289147#53289147", "title": "lowercase everything except content between single quotes - perl", "body": "<p>One more variant with Perl one-liner. I'm using hex \\x27 for single quotes</p>\n\n<pre><code>$ cat sql_str.txt\nand (t.TARGET_TYPE='RAC_DATABASE' or (t.TARGET_TYPE='ORACLE_DATABASE' and t.TYPE_QUALIFIER3 != 'racinst'))\n\n$ perl -ne ' { @F=split(/\\x27/); for my $val (0..$#F) { $F[$val]=lc($F[$val]) if $val%2==0 } ; print join(\"\\x27\",@F) } ' sql_str.txt\nand (t.target_type='RAC_DATABASE' or (t.target_type='ORACLE_DATABASE' and t.type_qualifier3 != 'racinst'))\n\n$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 10621944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042363385806265/picture?type=large", "display_name": "Charles Jie", "link": "https://stackoverflow.com/users/10621944/charles-jie"}, "is_accepted": false, "score": 1, "last_activity_date": 1542471367, "creation_date": 1542471367, "answer_id": 53353055, "question_id": 53284859, "link": "https://stackoverflow.com/questions/53284859/lowercase-everything-except-content-between-single-quotes-perl/53353055#53353055", "title": "lowercase everything except content between single quotes - perl", "body": "<p>Don't you play too hard with regexp for such a simple job?</p>\n\n<p>Why not get the kid 'split' for it today?</p>\n\n<pre><code>#!/usr/bin/perl\nwhile (&lt;&gt;)\n{\n    @F = split \"'\";\n    @F = map { $_ % 2 ? $F[$_] : lc $F[$_] } (0..@F);\n    print join \"'\", @F;\n}\n</code></pre>\n\n<p>The above is for understanding. We often join the latter two lines reasonably into:</p>\n\n<pre><code>print join \"'\", map { $_ % 2 ? $F[$_] : lc $F[$_] } (0..@F);\n</code></pre>\n\n<p>Or enjoy more, making it a one-liner? (in bash shell) In concept, it looks like:</p>\n\n<pre><code>perl -pF/'/ -e 'join \"'\", map { $_ % 2 ? $F[$_] : lc $F[$_] } (0..@F);' YOUR_FILE\n</code></pre>\n\n<p>In reality, however, we need to respect the shell and do some escape (hard) job:</p>\n\n<pre><code>perl -pF/\\'/ -e 'join \"'\"'\"'\", map { $_ % 2 ? $F[$_] : lc $F[$_] } (0..@F);' YOUR_FILE\n</code></pre>\n\n<p>(The single-quoted single quote needs to become 5 letters: <code>'\"'\"'</code>)</p>\n\n<p>If it doesn't help your job, it helps sleep.</p>\n"}], "owner": {"reputation": 53, "user_id": 10647105, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hzyRnb9xNLw/AAAAAAAAAAI/AAAAAAAAAAA/hSZL7LVWh0c/photo.jpg?sz=128", "display_name": "Prabhu David", "link": "https://stackoverflow.com/users/10647105/prabhu-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 53286366, "answer_count": 3, "score": 1, "last_activity_date": 1542471367, "creation_date": 1542124773, "last_edit_date": 1542128217, "question_id": 53284859, "link": "https://stackoverflow.com/questions/53284859/lowercase-everything-except-content-between-single-quotes-perl", "title": "lowercase everything except content between single quotes - perl", "body": "<p>Is there a way in perl to replace all text in input line except ones within single quotes(There could be more than one) using regex, I have achieved this using the code below but would like to see if it can be done with regex and map.</p>\n\n<pre><code>while (&lt;&gt;) {\n    my $m=0;\n    for (split(//)) { \n        if (/'/ and ! $m) {\n            $m=1;\n            print;\n        }\n        elsif (/'/ and $m) {\n            $m=0;\n            print;\n        }\n        elsif ($m) {\n            print;\n        }\n        else {\n            print lc;\n        }\n    }\n} \n</code></pre>\n\n<hr>\n\n<pre><code>**Sample input:**\n\nand (t.TARGET_TYPE='RAC_DATABASE' or (t.TARGET_TYPE='ORACLE_DATABASE' and t.TYPE_QUALIFIER3 != 'racinst'))\n\n**Sample output:**\n\nand (t.target_type='RAC_DATABASE' or (t.target_type='ORACLE_DATABASE' and t.type_qualifier3 != 'racinst'))\n</code></pre>\n"}, {"tags": ["apache", "perl", "environment-variables", "cgi"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542116432, "post_id": 53279763, "comment_id": 93446177, "body": "Maybe a better question for serverfault.com?"}, {"owner": {"reputation": 59, "user_id": 10644988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebdc086ca7fa4801b2cfd65222b6dbe?s=128&d=identicon&r=PG", "display_name": "postFix", "link": "https://stackoverflow.com/users/10644988/postfix"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1542702687, "post_id": 53279763, "comment_id": 93653340, "body": "@Could we please migrate it then ? It seams I&#39;m not in the position to do so. Thank you!"}], "owner": {"reputation": 59, "user_id": 10644988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebdc086ca7fa4801b2cfd65222b6dbe?s=128&d=identicon&r=PG", "display_name": "postFix", "link": "https://stackoverflow.com/users/10644988/postfix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 496, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1542121740, "creation_date": 1542107581, "last_edit_date": 1542121740, "question_id": 53279763, "link": "https://stackoverflow.com/questions/53279763/apache-perl-cgi-script-sso-trouble-and-environment-variables", "title": "Apache Perl CGI script sso trouble and environment variables", "body": "<p>I\u2019m lost and I don\u2019t know where else I could ask after spending hours and days of researching. </p>\n\n<p>I\u2019m trying to integrate and application written in Perl (OTRS) running with Apache to SSO all my agents. Between the client and the OTRS Server there is a Tivoli Access Manager and on it we have a junction configured. When the client opens the OTRS WAM enabled resource the TAM Server performs already SSO by taking the user id from the Kerberos ticket and checks whether the given user is able to access the junction if he/she is then TAM sets an variable named iv-user in the HTTPheader of the request and passes it to the application OTRS. </p>\n\n<p>When I open the url <a href=\"http://myserver/otrs/index.pl\" rel=\"nofollow noreferrer\">http://myserver/otrs/index.pl</a> I can see that Apache receives the iv-user variable in the HTTP header (I have configured mod_log_forensic in Apache):</p>\n\n<p><img src=\"https://i.stack.imgur.com/Syggx.jpg\" alt=\"iv-user variable in the HTTP request\"></p>\n\n<p>When I login now with my user id and password and access the information section of the system I can see that the variable was basically \u201cre-write?\u201d to HTTP_IV_USER</p>\n\n<p><img src=\"https://i.stack.imgur.com/z2h0V.png\" alt=\"iv_user to HTTP_IV_USER\"></p>\n\n<p>In the end when I call a URL CGI script are being called and as per my understanding the \u201crewrite\u201d is a common CGI  thing so to say \n <a href=\"https://tools.ietf.org/html/rfc3875\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc3875</a></p>\n\n<pre><code>\u201cThe server SHOULD set meta-variables specific to the protocol and\n   scheme for the request.  Interpretation of protocol-specific\n   variables depends on the protocol version in SERVER_PROTOCOL.  The\n   server MAY set a meta-variable with the name of the scheme to a\n   non-NULL value if the scheme is not the same as the protocol.  The\n   presence of such a variable indicates to a script which scheme is\n   used by the request.\n\n   Meta-variables with names beginning with \"HTTP_\" contain values read\n   from the client request header fields, if the protocol used is HTTP.\n   The HTTP header field name is converted to upper case, has all\n   occurrences of \"-\" replaced with \"_\" and has \"HTTP_\" prepended to\n   give the meta-variable name.  The header data can be presented as\n   sent by the client, or can be rewritten in ways which do not change\n   its semantics.  If multiple header fields with the same field-name\n   are received then the server MUST rewrite them as a single value\n   having the same semantics.  Similarly, a header field that spans\n   multiple lines MUST be merged onto a single line.  The server MUST,\n   if necessary, change the representation of the data (for example, the\n   character set) to be appropriate for a CGI meta-variable.\u201d\n</code></pre>\n\n<p>Now I enable SSO within OTRS (that is basically one line) as OTRS relies that the user was already pre-authenticated and it looks for the REMOTE_USER variable to SSO into OTRS:</p>\n\n<pre><code> HTTPBasicAuth for Agents\nIf you want to implement a \"single sign on\" solution for all your agents, you can use HTTP basic authentication (for all your systems) and the HTTPBasicAuth module for OTRS (see Example below). \nExample 4.14. Authenticate Agents using HTTPBasic\n# This is an example configuration for an apache ($ENV{REMOTE_USER})\n# auth. backend. Use it if you want to have a singe login through\n# apache http-basic-auth\n$Self-&gt;{'AuthModule'} = 'Kernel::System::Auth::HTTPBasicAuth';\n\n# Note:\n#\n# If you use this module, you should use as fallback\n# the following configuration settings if the user is not authorized\n# apache ($ENV{REMOTE_USER})\n$Self-&gt;{LoginURL} = 'http://host.example.com/not-authorised-for-otrs.html';\n$Self-&gt;{LogoutURL} = 'http://host.example.com/thanks-for-using-otrs.html';\n</code></pre>\n\n<p>Because I didn\u2019t want to mess with the production environment I have configured my own test environment and to simulate the TAM Server I have used <code>Modify Headers for Google Chrome</code> to set the headers.<br>\nWhen I set the variable in <code>Modify Headers</code> in the header directly to <code>HTTP_IV_USER</code> not <code>iv_user</code> and take the value from <code>HTTP_IV_USER</code> and set it to <code>REMOTE_USER</code>  in Apache <code>SetEnvIf HTTP_IV_USER \"(.*)$\" REMOTE_USER=$1</code>  I can SSO successfully. </p>\n\n<p>But the problem is that Apache receives the variable as iv_user. If I set it that way in Modify Headers for Google Chrome SSO fails with the error message <code>ser: No $ENV{REMOTE_USER} or $ENV{HTTP_REMOTE_USER} !(REMOTE_ADDR: x.x.x.x)</code>. so it looks like that my SetEnvIf does not get triggered. </p>\n\n<p>I can go and add the <code>HTTP_IV_USER</code> variable directly in the OTRS code as follows but don\u2019t think that this is an elegant way to handle it: </p>\n\n<p><a href=\"https://i.stack.imgur.com/P46VU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P46VU.jpg\" alt=\"change in HTTPBasicAuth.pm\"></a></p>\n\n<p>Long story shor here are my questions:</p>\n\n<ol>\n<li>Does Apache create the variable <code>HTTP_IV_USER</code> from the variable found in the HTTP header (<code>iv_user</code>)</li>\n<li>If yes, can it be that it is using the <code>SetEnv</code> directive to do so ? </li>\n<li>If yes, and this is my only guess, does my SetEnvIf directive not work because of <code>The SetEnv directive runs late during request processing meaning that directives such as SetEnvIf and RewriteCond will not see the variables set with it</code>. <a href=\"http://httpd.apache.org/docs/2.4/env.html#using\" rel=\"nofollow noreferrer\">http://httpd.apache.org/docs/2.4/env.html#using</a> </li>\n</ol>\n\n<p>I hope my problem is clear and understandable and I know that there are passionate people out there wiling to share their knowledge and expertise :) </p>\n\n<p>Many thanks in advance and best regards! </p>\n"}, {"tags": ["perl", "cpan", "macos-mojave", "dbd-mysql"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542102918, "post_id": 53277884, "comment_id": 93438525, "body": "Maybe using <code>DBD::MariaDB</code> ( <a href=\"https://metacpan.org/pod/DBD::MariaDB\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBD::MariaDB</a> ) instead works better, although both drivers had recent releases that should address most failures."}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542113856, "post_id": 53277884, "comment_id": 93444614, "body": "Ok, getting closer. &quot;Can&#39;t link/include C library &#39;ssl&#39;, &#39;crypto&#39;, aborting.&quot;  looks like I need to point it to the ssl and crypto libraries."}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542118307, "post_id": 53277884, "comment_id": 93447412, "body": "Got it. Finally done by hand. Shees. See My Answer."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1552918930, "post_id": 53283082, "comment_id": 97181847, "body": "Awesome. Thanks. Been trying to figure this out for an hour. The install instructions for the module need to be updated and had me trying to get it to work with mysql-connector-c. Your solution worked like a charm, though. Note that you should change the version number in the path from 8.0.12 to 8.0.&lt;whatever&gt;."}], "tags": [], "owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "is_accepted": false, "score": 13, "last_activity_date": 1542118786, "creation_date": 1542118786, "answer_id": 53283082, "question_id": 53277884, "link": "https://stackoverflow.com/questions/53277884/cpan-install-of-dbdmysql-failing-on-tests-and-symbol-not-found-osx-mojave/53283082#53283082", "title": "cpan install of DBD::mysql failing on tests and symbol not found. OSX Mojave", "body": "<p>So I finally found it. Of course, it was locating the libraries and include files properly.</p>\n\n<p>So I went into the cpan directory on my system</p>\n\n<pre><code>/Users/robert/.cpan/build/DBD-mysql-4.048-0\n</code></pre>\n\n<p>After checking just where the brew installations were for both openssl and mysql, I woke up.</p>\n\n<pre><code>sudo perl Makefile.PL --libs=\"-L/usr/local/opt/openssl/lib -lssl -lcrypto -L/usr/local/lib -L/usr/local/Cellar/mysql/8.0.12/lib -lmysqlclient\"\n</code></pre>\n\n<p>Now. that worked because after looking in the mysaql lib directory, I see that the library is 'mysqlclient' and not mysql. As you see above.</p>\n\n<p>Now that worked doing the Makefile.PL thing as above.</p>\n\n<p>Then 'make' worked. As above. Not showing any errors... as above</p>\n\n<p>Then <strong>sudo make test worked</strong> - this time.</p>\n\n<pre><code>All tests successful.\nFiles=73, Tests=9, 11 wallclock secs ( 0.24 usr  0.15 sys +  8.25 cusr  1.23 csys =  9.87 CPU)\nResult: PASS\n</code></pre>\n\n<p>Finally - make install. Worked</p>\n\n<pre><code>zeus:DBD-mysql-4.048-0 robert$ sudo make install\n\"/usr/local/Cellar/perl/5.28.0/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- mysql.bs blib/arch/auto/DBD/mysql/mysql.bs 644\nManifying 3 pod documents\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nInstalling /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle\nInstalling /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/Bundle/DBD/mysql.pm\nInstalling /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/DBD/mysql.pm\nInstalling /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/DBD/mysql/INSTALL.pod\nInstalling /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/DBD/mysql/GetInfo.pm\nInstalling /usr/local/Cellar/perl/5.28.0/share/man/man3/Bundle::DBD::mysql.3\nInstalling /usr/local/Cellar/perl/5.28.0/share/man/man3/DBD::mysql::INSTALL.3\nInstalling /usr/local/Cellar/perl/5.28.0/share/man/man3/DBD::mysql.3\nAppending installation info to /usr/local/Cellar/perl/5.28.0/lib/perl5/5.28.0/darwin-thread-multi-2level/perllocal.pod\nzeus:DBD-mysql-4.048-0 robert$ pwd\n/Users/robert/.cpan/build/DBD-mysql-4.048-0\n</code></pre>\n\n<p>Well finally. Now why did I want this? I can't remember.</p>\n"}], "owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2083, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1542118786, "creation_date": 1542101681, "last_edit_date": 1542116119, "question_id": 53277884, "link": "https://stackoverflow.com/questions/53277884/cpan-install-of-dbdmysql-failing-on-tests-and-symbol-not-found-osx-mojave", "title": "cpan install of DBD::mysql failing on tests and symbol not found. OSX Mojave", "body": "<p>This looks like it's been around for years - but I can't find anything recent and related to Mac, and dealing only with just installing the CPAN module DBD::mysql I've been trawling the internet for days now...</p>\n\n<pre><code>#   Failed test 'use DBD::mysql;'\n#   at t/00base.t line 15.\n#     Tried to use 'DBD::mysql'.\n#     Error:  Can't load '/Users/robert/.cpanm/work/1542100720.91387/DBD-mysql-4.048/blib/arch/auto/DBD/mysql/mysql.bundle' for module DBD::mysql: dlopen(/Users/robert/.cpanm/work/1542100720.91387/DBD-mysql-4.048/blib/arch/auto/DBD/mysql/mysql.bundle, 2): Symbol not found: _mysql_affected_rows\n#   Referenced from: /Users/robert/.cpanm/work/1542100720.91387/DBD-mysql-4.048/blib/arch/auto/DBD/mysql/mysql.bundle\n#   Expected in: flat namespace\n#  in /Users/robert/.cpanm/work/1542100720.91387/DBD-mysql-4.048/blib/arch/auto/DBD/mysql/mysql.bundle at /usr/local/Cellar/perl/5.28.0/lib/perl5/5.28.0/darwin-thread-multi-2level/DynaLoader.pm line 197.\n# ^@ at t/00base.t line 15.\n# Compilation failed in require at t/00base.t line 15.\n# BEGIN failed--compilation aborted at t/00base.t line 15.\nBailout called.  Further testing stopped:  Unable to load DBD::mysql\nFAILED--Further testing stopped: Unable to load DBD::mysql\nmake: *** [test_dynamic] Error 255\n-&gt; FAIL Installing DBD::mysql failed. See /Users/robert/.cpanm/work/1542100720.91387/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>This is the cpanm line I'm using.</p>\n\n<pre><code>sudo cpanm  --configure-args=\"--libs='-L/usr/local/opt/openssl/lib -L/usr/local/lib -L/usr/local/Cellar/mysql/8.0.12/lib' --cflags='-I/usr/local/opt/openssl/include -I/usr/local/include/mysql -I/usr/local/Cellar/mysql/8.0.12/include/mysql'\" DBD::mysql\n</code></pre>\n\n<p>I have installed mysql with Homebrew, and everything else for that matter. I've even copied a few libs into system directories - but nothing seems to want to get this cpan module to install and work.</p>\n\n<p><strong>EDIT: Additions after this line. \nLet's try Making the package by hand</strong></p>\n\n<pre><code>sudo perl Makefile.PL --libs=\"-L/usr/local/opt/openssl/lib -L/usr/local/lib -L/usr/local/Cellar/mysql/8.0.12/lib -lssl -lcrypto\"\n</code></pre>\n\n<p>The Result of Make. Looking good. I see no errors here.Apparently all libs are available for compiling.</p>\n\n<pre><code>zeus:DBD-mysql-4.048-0 robert$ sudo perl Makefile.PL --libs=\"-L/usr/local/opt/openssl/lib -lssl -lcrypto -L/usr/local/lib -L/usr/local/Cellar/mysql/8.0.12/lib\"\nI will use the following settings for compiling and testing:\n\n  cflags        (mysql_config ) = -I/usr/local/Cellar/mysql/8.0.12/include/mysql\n  embedded      (guessed      ) = \n  libs          (User's choice) = -L/usr/local/opt/openssl/lib -lssl -lcrypto -L/usr/local/lib -L/usr/local/Cellar/mysql/8.0.12/lib\n  mysql_config  (Users choice ) = mysql_config\n  nocatchstderr (default      ) = 0\n  nofoundrows   (default      ) = 0\n  nossl         (default      ) = 0\n  testdb        (User's choice) = test\n  testhost      (default      ) = \n  testpassword  (default      ) = \n  testport      (default      ) = \n  testsocket    (default      ) = \n  testuser      (User's choice) = root\n\nTo change these settings, see 'perl Makefile.PL --help' and\n'perldoc DBD::mysql::INSTALL'.\n\nChecking if libs are available for compiling...\nLooks good.\n\nChecking if your kit is complete...\nLooks good\nUsing DBI 1.642 (for perl 5.028000 on darwin-thread-multi-2level) installed in /usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/darwin-thread-multi-2level/auto/DBI/\nGenerating a Unix-style Makefile\nWriting Makefile for DBD::mysql\nWriting MYMETA.yml and MYMETA.json\nzeus:DBD-mysql-4.048-0 robert$ \n</code></pre>\n\n<p>Now let's see if a <strong>make</strong> works.</p>\n\n<p>Looking good. 1 warning about WIDEST_UTYPE but it's only a warning...</p>\n\n<p>Then, mysql.bundle is made</p>\n\n<pre><code>chmod 755 blib/arch/auto/DBD/mysql/mysql.bundle\nManifying 3 pod documents\n</code></pre>\n\n<p>Ok, now the big test. <strong>make test</strong>.</p>\n\n<p>... and it fails.</p>\n\n<pre><code>zeus:DBD-mysql-4.048-0 robert$ sudo make test\n\"/usr/local/Cellar/perl/5.28.0/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- mysql.bs blib/arch/auto/DBD/mysql/mysql.bs 644\nPERL_DL_NONLAZY=1 \"/usr/local/Cellar/perl/5.28.0/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/00base.t .............................. 1/6 \n#   Failed test 'use DBD::mysql;'\n#   at t/00base.t line 15.\n#     Tried to use 'DBD::mysql'.\n#     Error:  Can't load '/Users/robert/.cpan/build/DBD-mysql-4.048-0/blib/arch/auto/DBD/mysql/mysql.bundle' for module DBD::mysql: dlopen(/Users/robert/.cpan/build/DBD-mysql-4.048-0/blib/arch/auto/DBD/mysql/mysql.bundle, 2): Symbol not found: _mysql_affected_rows\n#   Referenced from: /Users/robert/.cpan/build/DBD-mysql-4.048-0/blib/arch/auto/DBD/mysql/mysql.bundle\n#   Expected in: flat namespace\n#  in /Users/robert/.cpan/build/DBD-mysql-4.048-0/blib/arch/auto/DBD/mysql/mysql.bundle at /usr/local/Cellar/perl/5.28.0/lib/perl5/5.28.0/darwin-thread-multi-2level/DynaLoader.pm line 197.\n#  at t/00base.t line 15.\n# Compilation failed in require at t/00base.t line 15.\n# BEGIN failed--compilation aborted at t/00base.t line 15.\nBailout called.  Further testing stopped:  Unable to load DBD::mysql\nFAILED--Further testing stopped: Unable to load DBD::mysql\nmake: *** [test_dynamic] Error 255\n</code></pre>\n\n<p>... and there it is. The same error. Now I also tried MariaDB - same result, although slightly different error messages.</p>\n\n<p>What am I missing here.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1542078893, "post_id": 53273095, "comment_id": 93429451, "body": "@Shawn, yes. The code I shown you will permanently print the comma &quot;,&quot; , I know I can use join ( &quot;,&quot; ) but I can&#39;t figured it out."}], "answers": [{"tags": [], "owner": {"reputation": 1465, "user_id": 7327755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsjT4.jpg?s=128&g=1", "display_name": "Ashton Wiersdorf", "link": "https://stackoverflow.com/users/7327755/ashton-wiersdorf"}, "is_accepted": false, "score": 1, "last_activity_date": 1542089474, "last_edit_date": 1542089474, "creation_date": 1542081750, "answer_id": 53273601, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl/53273601#53273601", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>Using <code>join</code> would generally be the best answer, but that would only work if you want to prevent a comma at the end of the line. (At least for a straight-forward answer, I'm sure you could hack it.)</p>\n\n<p>You can make use of Perl's <code>$#array_name</code> variables inside a <code>for</code> loop to check when you're at the end of both lists, like so:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n\nmy @names       = qw(ALLIES BOBBY CAKRA);\nmy @families    = qw(A B C);\n\nfor my $i (0..$#names) {\n    for my $j (0..$#families) {\n    print \"$names[$i]\" . ($i == $#names &amp;&amp; $j == $#families ? ' ' : ', ') . \"// $families[$j]\\n\";\n    }\n}\n</code></pre>\n\n<p>Also, a just a note on style: the Perl Style Guide (try <code>perldoc perlstyle</code>) recommends using all-capital variable names only when they're constants. It's not a big deal, and definitely not required, but it can make it a little easier for others to follow your code. :)</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542097623, "post_id": 53273603, "comment_id": 93435465, "body": "how about if I use hash? How can I iterate like what I use in array? - the question is updated"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542116492, "post_id": 53273603, "comment_id": 93446223, "body": "@Danial Haris, <code>@names = keys(%h); @families = values(%h);</code>"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542168874, "post_id": 53273603, "comment_id": 93467401, "body": "@ikegami, I can&#39;t use arrays or turn it into arrays from hash because I have sorted the data in a multidimensional hash. Do we have a way to do like array does? like $array[0], something like this because I have already tied the hash, so the order will be in place now?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542169138, "post_id": 53273603, "comment_id": 93467443, "body": "@DanialHaris, uh, hashes can&#39;t be sorted. If it&#39;s not really a hash but one of those tied things, then what makes you think that <code>each</code> will preserve the order but not <code>keys</code>?"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542191543, "post_id": 53273603, "comment_id": 93476958, "body": "@ikegami, no. What I mean is I already sort the data into a multidimensional hash, and I tied it with the module to keep it in order. So, Can we do for hash like this e.g $hash{names}[0] to loop like arrays for this answer."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542192417, "post_id": 53273603, "comment_id": 93477536, "body": "@ikegami, thank you! Actually thinking if hash works the same way as array to iterate it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542192476, "post_id": 53273603, "comment_id": 93477567, "body": "<code>$hash{ (keys(%hash))[0] }</code>, but calling <code>keys</code> like this repeatedly would be very inefficient compared to <code>$hash{ $names[0] }</code> as in zdim&#39;s code"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542195151, "post_id": 53273603, "comment_id": 93479110, "body": "@ikegami, I have updated the question so that I can learn something new and make it easier for us."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1542241573, "post_id": 53273603, "comment_id": 93502303, "body": "@DanialHaris  I was away for a while, just now could read these comments.  I&#39;ll look at it tonight"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542266778, "post_id": 53273603, "comment_id": 93508772, "body": "@DanialHaris  I don&#39;t regularly use tied things but here&#39;s what I see in  tests. The first-order keys in a tied hash (<code>AGILE</code>, <code>SMART</code>,.. in your case) are ordered and you could extract them with <code>keys</code> and have them in that order.  However, the <i>next</i> order elements aren&#39;t and they&#39;ll just be &quot;normal&quot; hashy things -- inherently unordered (you can sort them on the fly).  I&#39;d imagine that you can add tied hashes for every next order (dimension) but that&#39;d be silly.  So the best I can say is, sort them (again) when printing. To get the original order use a hash to record it and use that in sort."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542266935, "post_id": 53273603, "comment_id": 93508832, "body": "@DanialHaris  Also, I appreciate that you are responsive and working on your question, but this addition changes it greatly. There were 5 (five) answers before you added this and now none of them address it.  Since the addition is rather different perhaps you want another question on that?  Then I suggest think through it carefully so to ask the right thing. (And if you do end up with another question then remove this addition, so to leave the question as it was before the addition.)"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1542271717, "post_id": 53273603, "comment_id": 93511139, "body": "@zdim, Okey okey. I will open up another question."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1542081762, "creation_date": 1542081762, "answer_id": 53273603, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl/53273603#53273603", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>I don't see that there is an elegant and clean way since you need to drop the comma on the last element of both arrays.  Then add an explicit condition, while iterating over indices so to be able to single out the last elements</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @names       = qw(ALLIES BOBBY CAKRA);\nmy @families    = qw(A B C);\n\nfor my $n (0..$#names) {\n    for my $f (0..$#families) {\n        say $names[$n], \n            ( ($n == $#names and $f == $#families) ?  ' // ' : ', // '),\n            $families[$f];\n    }   \n}\n</code></pre>\n\n<p>The parenthesis in the condition of the ternary operator <code>( ? : )</code> are needed for precedence. Another way is to use <code>&amp;&amp;</code> instead of <code>and</code>, which binds more tightly, but I didn't want the code to rely on \na specific operator.</p>\n\n<p>The syntax <code>$#ary</code> is for the index of the last element of <code>@ary</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542115659, "post_id": 53273993, "comment_id": 93445678, "body": "Handles empty <code>@names</code> and/or empty <code>@families</code> &quot;poorly&quot;."}], "tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": false, "score": 1, "last_activity_date": 1542084506, "creation_date": 1542084506, "answer_id": 53273993, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl/53273993#53273993", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>Special casing the last element is always messy, there are a bunch of trade offs, you just end up choosing which one looks less bad to you.</p>\n\n<p>Another option compared to @zdim's perfectly good solution.</p>\n\n<p>Note that I'm going to change @names and @families during execution, more tradeoffs, copying the array is the easy fix if it is a problem.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @names       = qw(ALLIES BOBBY CAKRA);\nmy @families    = qw(A B C);\n\nmy $last_name = pop(@names);\n\nforeach my $names (@names)\n{\n       foreach my $families (@families)\n       {\n           print \"$names, // $families\\n\";\n       }\n}\n\nmy $last_family = pop(@families);\n\nforeach my $families (@families)\n{\n       print \"$last_name, // $families\\n\";\n}\n\nprint \"$last_name // $last_family\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1542116397, "last_edit_date": 1542116397, "creation_date": 1542115976, "answer_id": 53282176, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl/53282176#53282176", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>The alternative is to separate the output from the cross-product generation, and handling the last cast specially.</p>\n\n<pre><code>my @cross_product;\nfor my $n (0..$#names) {\n    for my $f (0..$#families) {\n       push @cross_product, [ $n, $f ];\n    }   \n}\n\nif (@cross_product) {\n   say \"$_-&gt;[0], // $_-&gt;[1]\" for @cross_product[0..@cross_product-2];\n   say \"$_-&gt;[0] // $_-&gt;[1]\" for $cross_product[-1];\n}\n</code></pre>\n\n<p>You can even avoid using up any memory as follows:</p>\n\n<pre><code>use Set::CrossProduct qw( );\n\nmy $i = Set::CrossProduct-&gt;new([ \\@names, \\@families ]);\nmy $N = $i-&gt;cardinality;\nsay sprintf '%1$s%3$s // %2$d', $i-&gt;get(), $_?',':'' for -$N+1..0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 1, "last_activity_date": 1542141183, "creation_date": 1542141183, "answer_id": 53289066, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl/53289066#53289066", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>I thought of a variation to ikegami's (storing the results in a temporary array). There would be too many changes to comfortably fit in a comment, so here:</p>\n\n<p>You could store the comma to the temporary list, too, and then remove it from only the last line.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @names         = qw(ALLIES BOBBY CAKRA);\nmy @families      = qw(A B C);\nmy @output_lines;\n\nforeach my $name (@names) {\n    foreach my $family (@families) {\n        push @output_lines, [$name, ',', ' // ' . $family . \"\\n\"];\n    }\n}\n\nif (@output_lines) {\n    $output_lines[-1][1] = '';  # remove comma from last line\n    print map { @$_ } @output_lines;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53273603, "answer_count": 5, "score": 1, "last_activity_date": 1542273844, "creation_date": 1542077607, "last_edit_date": 1542273844, "question_id": 53273095, "link": "https://stackoverflow.com/questions/53273095/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-1-perl", "title": "How to print comma &quot;,&quot; in the middle of sentenced when necessary, Part 1, Perl", "body": "<p>I need to print comma \",\" when the list more than one, and if more than one, the last list I don't want to print comma. I know I can use Join to to do this but I can't loop @NAMES with comma if there is another @FAMILIES to add in.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @NAMES       = qw(ALLIES BOBBY CAKRA);\nmy @FAMILIES    = qw(A B C);\n\n\nforeach my $names (@NAMES)\n{\n       foreach my $families (@FAMILIES)\n       {\n       print \"$names, // $families\\n\";\n       }\n}\n</code></pre>\n\n<p>Expected Outcome:</p>\n\n<pre><code>ALLIES, // A\nALLIES, // B\nALLIES, // C\nBOBBY, // A\nBOBBY, // B\nBOBBY, // C\nCAKRA, // A\nCAKRA, // B\nCAKRA // C\n</code></pre>\n"}, {"tags": ["linux", "shell", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1542079516, "post_id": 53272899, "comment_id": 93429582, "body": "The quotes are escaped so the shell doesn&#39;t interpret them as the end of the quoted argument of echo."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542117182, "post_id": 53272899, "comment_id": 93446693, "body": "Note that this command will have problems if <code>$password</code> contains shell meta characters (space, <code>;</code>, <code>(</code>, etc)"}], "answers": [{"tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": false, "score": 2, "last_activity_date": 1542083890, "creation_date": 1542083890, "answer_id": 53273908, "question_id": 53272899, "link": "https://stackoverflow.com/questions/53272899/basic-perl-shellscripting-question-using-crypt/53273908#53273908", "title": "Basic Perl/Shellscripting question using crypt", "body": "<p>The one liner you posted is fairly complex, it nests a bunch of commands, this nesting leads to all the backslashes.</p>\n\n<p>Breaking it down will probably make it clear for you.</p>\n\n<p>From bash (or similar) you have</p>\n\n<pre><code>$password = 'ABC123'; # set somewhere, using a constant for clarity\necho \"pass=\\$(perl -e 'print crypt(\\\"password\\\", \\\"password\\\")' $password)\" &gt;&gt; /home/testscript.sh\n</code></pre>\n\n<p>This adds the following line to testscript.sh, probably a bash shell script</p>\n\n<pre><code>pass=$(perl -e 'print crypt(\"password\", \"password\")' ABC123)\n</code></pre>\n\n<p>Note that we have stripped all the slashes away and the password has been supplied.</p>\n\n<p>The first half of this can then be executed as a one line perl script.</p>\n\n<pre><code>print crypt(\"password\", \"password\")\n</code></pre>\n\n<p>This uses the C library crypt function to compute the hash of password, using the salt password.</p>\n\n<p>So all the slashes are required to prevent propagate the elements, like the quotes and dollar signs, further down the execution path.</p>\n\n<hr>\n\n<p>Note that this code isn't actually useful, the crypt is encrypting a constant, I would have assumed that <code>$password</code> was meant to be passed inside the function call, it doesn't seem useful in the current location.</p>\n\n<p>Also having a script generate a script which calls perl... it doesn't look pretty. I don't know the full context but I find it hard to believe that this is the best way.  Personally I would avoid the games and just write a single perl script. My personal rule of thumb is that any bash script that gets complex or goes over 50 lines is done in perl, but that is heavily influenced by the fact that I don't grok or enjoy bash.</p>\n"}], "owner": {"reputation": 1, "user_id": 10643659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/10643659/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542083890, "creation_date": 1542076044, "last_edit_date": 1542076140, "question_id": 53272899, "link": "https://stackoverflow.com/questions/53272899/basic-perl-shellscripting-question-using-crypt", "title": "Basic Perl/Shellscripting question using crypt", "body": "<p>I am currently learning how to use perl and how to begin to shellscript. I am trying to send via echo a code snip to another shell script that crypts a password to then be used to add a new user in linux.\nThe snippit:</p>\n\n<pre><code>echo \"pass=\\$(perl -e 'print crypt(\\\"password\\\", \\\"password\\\")' $password)\" &gt;&gt; /home/testscript.sh\n</code></pre>\n\n<p>which will use the following command to add a new user:</p>\n\n<pre><code>/usr/sbin/useradd -m -p \\$pass testuser\n</code></pre>\n\n<p>My question is: why all the backslashes? Like <code>\\&amp;(perl</code>, <code>\\\"password\\\"</code>, and <code>\\$pass</code> in the add user code? Are they needed? Or could I just have:</p>\n\n<pre><code>echo \"pass=$(perl -e 'print crypt(\"password\", \"password\")' $password)\" \n</code></pre>\n\n\n\n<pre><code>/usr/sbin/useradd -m -p &amp;pass testuser \n</code></pre>\n"}, {"tags": ["perl", "executable"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1542067934, "post_id": 53271765, "comment_id": 93427269, "body": "I don&#39;t know if I was incorrectly using the shebang or not, but the use of Deparse worked for me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1542071413, "post_id": 53271765, "comment_id": 93427973, "body": "The Deparse way will change line numbers and may even introduce differences and errors, creating debugging nightmares if you don&#39;t keep the generated file."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1542066622, "creation_date": 1542066622, "answer_id": 53271765, "question_id": 53271695, "link": "https://stackoverflow.com/questions/53271695/specify-p-option-on-compiled-perl-script/53271765#53271765", "title": "Specify -p option on compiled Perl script", "body": "<p>I don't know much about `PAR::Packer', but perhaps if you give the script a shebang line </p>\n\n<pre><code>#! windows/ignores/this -p\n...\n</code></pre>\n\n<p><code>PAR::Packer</code> might respect it in the executable file.</p>\n\n<p>If not, you can always* convert a <code>-p</code> using script into a regular script like so:</p>\n\n<pre><code>perl -MO=Deparse -p myscript-p.pl &gt; myscript-no-p.pl\n</code></pre>\n\n<p>* - unless your script has unusual constructions that <code>B::Deparse</code> can't deparse correctly</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1542070332, "creation_date": 1542070332, "answer_id": 53272219, "question_id": 53271695, "link": "https://stackoverflow.com/questions/53271695/specify-p-option-on-compiled-perl-script/53272219#53272219", "title": "Specify -p option on compiled Perl script", "body": "<p>The <code>-p</code> switch has a defined behavior and its documentation shows <a href=\"https://perldoc.pl/perlrun#-p\" rel=\"nofollow noreferrer\">equivalent code</a>, so just write your program to work that way to begin with.</p>\n\n<pre><code>LINE:\n  while (&lt;&gt;) {\n      ...             # your program goes here\n  } continue {\n      print or die \"-p destination: $!\\n\";\n  }\n</code></pre>\n\n<p>(If on Perl 5.22 or newer, consider using <a href=\"https://perldoc.pl/perl5220delta#New-double-diamond-operator\" rel=\"nofollow noreferrer\">&lt;&lt;>></a> instead of <code>&lt;&gt;</code>.)</p>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 53271765, "answer_count": 2, "score": 0, "last_activity_date": 1542070332, "creation_date": 1542066033, "question_id": 53271695, "link": "https://stackoverflow.com/questions/53271695/specify-p-option-on-compiled-perl-script", "title": "Specify -p option on compiled Perl script", "body": "<p>I am using Strawberry Perl under Windows 10. I have a Perl script that I always call with a -p option.</p>\n\n<p>I would like to compile it to an executable .exe using the <em>pp</em> program from <em>PAR::Packer</em>. Is it possible to specify that it should execute with a <em>-p</em> option? </p>\n\n<p>Either on the command of the compilation <em>pp</em> command or on the command line of the resulting executable is run would be acceptable.</p>\n"}, {"tags": ["c#", "python", ".net", "regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1542058841, "post_id": 53270459, "comment_id": 93424669, "body": "You could perhaps instantiate your RegEx object with <code>RegexOptions.ExplicitCapture</code> (<a href=\"https://docs.microsoft.com/en-gb/dotnet/api/system.text.regularexpressions.regexoptions?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-gb/dotnet/api/&hellip;</a>)"}, {"owner": {"reputation": 23566, "user_id": 178757, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/487b39e86dd577c22005472b9a307b1b?s=128&d=identicon&r=PG", "display_name": "Jez", "link": "https://stackoverflow.com/users/178757/jez"}, "edited": false, "score": 0, "creation_date": 1542058908, "post_id": 53270459, "comment_id": 93424690, "body": "@elgonzo That looks good, if you put it as an answer I can accept."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "is_accepted": true, "score": 3, "last_activity_date": 1542059043, "creation_date": 1542059043, "answer_id": 53270535, "question_id": 53270459, "link": "https://stackoverflow.com/questions/53270459/how-to-invert-the-regular-expression-group-capture-logic/53270535#53270535", "title": "How to invert the regular expression group capture logic?", "body": "<p>If you want to avoid the clumsiness of <code>(?: )</code> and turn <code>( )</code> groups into non-capturing groups, use the <a href=\"https://docs.microsoft.com/en-gb/dotnet/standard/base-types/regular-expression-options?view=netframework-4.7.2#explicit-captures-only\" rel=\"nofollow noreferrer\"><code>RegexOptions.ExplicitCapture</code></a> option. Only named groups (<code>(?&lt;name&gt;subexpression)</code>) will be captured if this option is being used.</p>\n\n<p>However, you cannot turn non-capturing groups <code>(?: )</code> into capturing groups, unfortunately.</p>\n\n<p>The RegEx constructor as well as other methods from the RegEx class accept <code>RegexOptions</code> flags.</p>\n\n<p>For example:</p>\n\n<pre><code>Regex.Matches(input, pattern, RegexOptions.ExplicitCapture)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1596681065, "last_edit_date": 1596681065, "creation_date": 1542071137, "answer_id": 53272300, "question_id": 53270459, "link": "https://stackoverflow.com/questions/53270459/how-to-invert-the-regular-expression-group-capture-logic/53272300#53272300", "title": "How to invert the regular expression group capture logic?", "body": "<p>In any language that supports <a href=\"http://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">named capture groups</a> you can simply use them for what you want captured, and ignore the numbered ones.</p>\n<pre><code>my $string = q(Available from v5.10 in Perl.);\n\n$string =~ /([A-Z].+?)(?&lt;ver&gt;[0-9.]+)\\s+(.*?)\\./;\n\nsay &quot;Version: $+{ver}&quot;;\n</code></pre>\n<p>After the regex the capture is available in <code>%+</code> hash, inside the regex in <code>\\k&lt;name&gt;</code> or <code>\\g{name}</code>.</p>\n<p>The downside is that you still capture all that other stuff (what hurts efficiency a little), while the upside is that you still capture all that other stuff (what helps flexibility, if some of it turns needed).</p>\n"}], "owner": {"reputation": 23566, "user_id": 178757, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/487b39e86dd577c22005472b9a307b1b?s=128&d=identicon&r=PG", "display_name": "Jez", "link": "https://stackoverflow.com/users/178757/jez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 53270535, "answer_count": 2, "score": 1, "last_activity_date": 1596681065, "creation_date": 1542058644, "question_id": 53270459, "link": "https://stackoverflow.com/questions/53270459/how-to-invert-the-regular-expression-group-capture-logic", "title": "How to invert the regular expression group capture logic?", "body": "<p>To create a capturing group in a regex you use <code>(match)</code> and you prefix it with <code>?:</code> to make it non-capturing, like <code>(?:match)</code>.  The thing is, in any kind of complicated regular expression I find myself wanting to create far more non-capturing groups than capturing ones, so I'd like to reverse this logic and only capture groups beginning with <code>?:</code> (or whatever).  How can I do this?  I mainly use regular expressions with .NET, but I wouldn't mind answers for other languages with regular expressions like Perl, PHP, Python, JavaScript, etc.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542045523, "post_id": 53267484, "comment_id": 93419363, "body": "(This was closed as a duplicate to a question whose answer is <code>split &#39; &#39;</code>, which is not appropriate here. Re-opened.)"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542045190, "post_id": 53267519, "comment_id": 93419230, "body": "So much more compact, love it. However, I can&#39;t figure a way to only output words greater than 1 character (so we would discard the -w)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542045226, "post_id": 53267519, "comment_id": 93419249, "body": "<code>\\w\\w+</code> or simply <code>\\w{2,}</code>"}, {"owner": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542045597, "post_id": 53267519, "comment_id": 93419389, "body": "Perfect, thank you so much! Can you use extraction to convert all of the letters to lowercase as well?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542045760, "post_id": 53267519, "comment_id": 93419444, "body": "No, but neither could <code>split</code>. Just do it outside (<code>++$words{lc($_)}</code>)."}, {"owner": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542047545, "post_id": 53267519, "comment_id": 93420160, "body": "Ahh okay no worries! I was just seeing to what extent I could work this whole &quot;extraction&quot; method. Sorry about that"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "edited": false, "score": 0, "creation_date": 1542051762, "post_id": 53267519, "comment_id": 93421844, "body": "A regex match returns parts of the original string, just like <code>split</code>. The difference is that you specify what separates what you want with <code>split</code>, and you specify what you want with a regex match."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1542044985, "creation_date": 1542044985, "answer_id": 53267519, "question_id": 53267484, "link": "https://stackoverflow.com/questions/53267484/split-regex-return-only-characters-digits-and-underscores-perl/53267519#53267519", "title": "Split Regex, return only characters, digits and underscores. Perl", "body": "<p>Don't split, extract.</p>\n\n<pre><code>++$words{$_} for $line =~ /\\w+/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542063215, "post_id": 53270748, "comment_id": 93426038, "body": "That doesn&#39;t handle strings that don&#39;t start with a word (such as the OP&#39;s example). /// Also, this approach doesn&#39;t lend itself to improving the definition of a word. All else being equal, a solution that can evolve is better."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542064486, "post_id": 53270748, "comment_id": 93426397, "body": "I agree, but it&#39;s an option, and it is still extensible in some ways. For instance, if you change the definition of &quot;word character&quot; to include <code>:</code>: <code>split &#47;[^\\w:]+&#47;, $line</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542064570, "post_id": 53270748, "comment_id": 93426423, "body": "There are of course unicode considerations to <code>\\w</code> and <code>\\W</code>, but until the code in question is decoding its input from UTF-8, I&#39;m assuming it&#39;s not a factor for this input..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542064688, "post_id": 53270748, "comment_id": 93426449, "body": "That&#39;s hardly the way word parsers evolve, though. First, there&#39;s <code>&#39;s</code>,..."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542064943, "post_id": 53270748, "comment_id": 93426537, "body": "@ikegami If you really want to do that right, there&#39;s the <a href=\"https://perldoc.pl/perlrebackslash#%5Cb%7Bwb%7D\" rel=\"nofollow noreferrer\">unicode word boundary</a> in recent Perls..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542065068, "post_id": 53270748, "comment_id": 93426570, "body": "I don&#39;t want to expand the OP&#39;s definition that much, but since it works well with split, you might want to mention it?"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1542065419, "last_edit_date": 1542065419, "creation_date": 1542060133, "answer_id": 53270748, "question_id": 53267484, "link": "https://stackoverflow.com/questions/53267484/split-regex-return-only-characters-digits-and-underscores-perl/53270748#53270748", "title": "Split Regex, return only characters, digits and underscores. Perl", "body": "<p>You can also do this with split and the negated word <a href=\"https://perldoc.pl/perlrebackslash#Character-classes\" rel=\"nofollow noreferrer\">character class</a>:</p>\n\n<pre><code>foreach my $word (split /\\W+/, $line) {\n  $words{$word}++;\n}\n</code></pre>\n\n<p>But note that since your string starts with non-word characters, the first word it will return is the empty string at the beginning of the string.</p>\n\n<p>Another tool for this task (but more suited to prose than code and filenames) is the <a href=\"https://perldoc.pl/perlrebackslash#%5Cb%7Bwb%7D\" rel=\"nofollow noreferrer\">unicode word boundary</a>, which uses Unicode rules for where words start and end, and takes into account things like apostrophes being part of words (<code>can't</code>). To utilize this, you'd first need to split your input into a list containing both words and non-words, and then find the words (easiest way is probably to use any elements that contain at least one word character):</p>\n\n<pre><code>foreach my $word (grep { m/\\w/ } split /\\b{wb}/, $line) {\n  $words{$word}++;\n}\n</code></pre>\n\n<p>The <code>\\b{wb}</code> regex sequence requires Perl 5.24+.</p>\n"}], "owner": {"reputation": 47, "user_id": 9914597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170c179fb5f9a0d903c820f4680a015c?s=128&d=identicon&r=PG&f=1", "display_name": "Conman", "link": "https://stackoverflow.com/users/9914597/conman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 53267519, "answer_count": 2, "score": 2, "last_activity_date": 1542065419, "creation_date": 1542044827, "question_id": 53267484, "link": "https://stackoverflow.com/questions/53267484/split-regex-return-only-characters-digits-and-underscores-perl", "title": "Split Regex, return only characters, digits and underscores. Perl", "body": "<p>Attempting to break up the line</p>\n\n<p><code>#!/usr/bin/perl -w</code></p>\n\n<p>with the following code </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %words;\n\nwhile (my $line = &lt;&gt;)\n{\nforeach my $word (split /:|,\\s*|\\/|!|\\#|-/, $line)\n{\n    $words{$word}++;\n}\n}\n\nforeach my $word (keys %words)\n{\nprint \"$word: $words{$word}\\n\";\n}\n</code></pre>\n\n<p>Is there an easier way to have the split command only split at words, numbers and underscores? Rather than setting all of these delimiters.</p>\n\n<p>Attempting to get the output</p>\n\n<pre><code>usr: 1\nbin: 1\nperl: 1\n</code></pre>\n"}, {"tags": ["json", "perl", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1542042291, "post_id": 53265788, "comment_id": 93417833, "body": "The first option didn&#39;t fix it, but from_json did - thank you!"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "edited": false, "score": 0, "creation_date": 1542042329, "post_id": 53265788, "comment_id": 93417858, "body": "@DomGlennon: Oh, I forgot to include <code>use Encode</code>, sorry."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1542052800, "last_edit_date": 1542052800, "creation_date": 1542038266, "answer_id": 53265788, "question_id": 53265573, "link": "https://stackoverflow.com/questions/53265573/perl-encoding-from-json-issue/53265788#53265788", "title": "Perl encoding from JSON issue", "body": "<p><code>decode_json</code> needs UTF-8 encoded input, so use <code>from_json</code> instead that accepts unicode:</p>\n\n<pre><code>my $json = from_json($data);\n</code></pre>\n\n<p>Another option would be to encode the data yourself:</p>\n\n<pre><code>use Encode;\n\nmy $encoded_data = encode('UTF-8', $data);\n...\nmy $json = decode_json($data);\n</code></pre>\n\n<p>But it makes little sense to encode data just to decode it.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1542071166, "last_edit_date": 1542071166, "creation_date": 1542043090, "answer_id": 53267077, "question_id": 53265573, "link": "https://stackoverflow.com/questions/53265573/perl-encoding-from-json-issue/53267077#53267077", "title": "Perl encoding from JSON issue", "body": "<p><code>decode_json</code> expects UTF-8, but you're passing decoded text (Unicode Code Points) instead.</p>\n\n<p>So, you could remove the existing character decoding.</p>\n\n<pre><code>use feature qw( say );\nuse open 'std', ':encoding(UTF-8)';\nuse JSON qw( decode_json );\n\nmy $json_utf8 = do {\n   open(my $fh, '&lt;:raw', $in_qfn)\n      or die(\"Can't open \\\"$in_qfn\\\": $!\\n\");\n\n   local $/;\n   &lt;$fh&gt;;\n };\n\nmy $data = decode_json($json_utf8);\n\n{\n   open(my $fh, '&gt;', $out_qfn)\n      or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n\n   for my $result (@{ $data-&gt;{results} }) {\n      say $fh $result-&gt;{text};\n   }\n}\n</code></pre>\n\n<p>Or, you could use <code>from_json</code> (or <code>JSON-&gt;new-&gt;decode</code>) instead of <code>decode_json</code>.</p>\n\n<pre><code>use feature qw( say );\nuse open 'std', ':encoding(UTF-8)';\nuse JSON qw( from_json );                         # &lt;---\n\nmy $json_ucp = do {\n   open(my $fh, '&lt;', $in_qfn)                     # &lt;---\n      or die(\"Can't open \\\"$in_qfn\\\": $!\\n\");\n\n   local $/;\n   &lt;$fh&gt;;\n };\n\nmy $data = from_json($json_ucp);                  # &lt;---\n\n{\n   open(my $fh, '&gt;', $out_qfn)\n      or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n\n   for my $result (@{ $data-&gt;{results} }) {\n      say $fh $result-&gt;{text};\n   }\n}\n</code></pre>\n\n<p>The arrows point to the three minor differences between the two snippets.</p>\n\n<hr>\n\n<p>I made a number of cleanups.</p>\n\n<ul>\n<li>Missing <code>local $/;</code> in case there are line breaks in the JSON.</li>\n<li>Don't use 2-arg <code>open</code>.</li>\n<li>Don't needlessly use global variables.</li>\n<li>Use better names for variables. <code>$data</code> and <code>$json</code> were notably reversed, and <code>$file</code> didn't contain a file.</li>\n<li>Limit the scope of your variables, especially if they use up system resources (e.g. file handles).</li>\n<li>Use <code>:encoding(UTF-8)</code> (the standard encoding) instead of <code>:encoding(utf8)</code> (an encoding only used by Perl). <code>:utf8</code> is even worse as it uses the internal encoding rather than the standard one, and it can lead to corrupt scalars if provided bad input.</li>\n<li>Get rid of the noisy quotes around identifiers used as hash keys.</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 6240626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lV9tFXWG394/AAAAAAAAAAI/AAAAAAAAAcs/YibcaoddADE/photo.jpg?sz=128", "display_name": "Dom Glennon", "link": "https://stackoverflow.com/users/6240626/dom-glennon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542071166, "creation_date": 1542037579, "question_id": 53265573, "link": "https://stackoverflow.com/questions/53265573/perl-encoding-from-json-issue", "title": "Perl encoding from JSON issue", "body": "<p>apologies if this is a really stupid question or already asked elsewhere. I'm reading in some JSON and using decode_json on it, then extracting text from it and outputting that to a file. </p>\n\n<p>My problem is that Unicode characters are encoded as eg \\u2019 in the JSON, decode_json appears to convert this to \\x{2019}. When I grab this text and output to a UTF8-encoded file, it appears as garbage.</p>\n\n<p>Sample code:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse JSON qw( decode_json );\nuse Data::Dumper;\n\nopen IN, $file or die;\nbinmode IN, \":utf8\";\nmy $data = &lt;IN&gt;;\nmy $json = decode_json( $data );\nopen OUT, \"&gt;$outfile\" or die;\nbinmode OUT, \":utf8\";\nbinmode STDOUT, \":utf8\";\nforeach my $textdat (@{ $json-&gt;{'results'} }) {\n    print STDOUT Dumper($textdat);\n    my $text = $textdat-&gt;{'text'};\n    print OUT \"$text\\n\";\n}\n</code></pre>\n\n<p>The Dumper output shows that the \\u encoding has been converted to \\x encoding. What am I doing wrong?</p>\n"}, {"tags": ["perl", "clone"], "answers": [{"comments": [{"owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "edited": false, "score": 0, "creation_date": 1542122565, "post_id": 53266247, "comment_id": 93450215, "body": "Thanks, I added reference counts. Great idea!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1542122675, "last_edit_date": 1542122675, "creation_date": 1542039851, "answer_id": 53266247, "question_id": 53265483, "link": "https://stackoverflow.com/questions/53265483/custom-storable-hooks-for-dclone-ing-a-light-weight-object-referencing-a-heavy-w/53266247#53266247", "title": "Custom Storable hooks for dclone-ing a light-weight object referencing a heavy-weight object", "body": "<p>You could add reference counts.</p>\n\n<pre><code>my %larges;\n\nsub STORABLE_freeze {\n   my ( $self, $cloning ) = @_;\n   if ($cloning) {\n      my $large_key = pack('j', refaddr(self-&gt;{large})); \n      $larges{$large_key} //= [ $self-&gt;{large}, 0 ];\n      ++$larges{$large_key}[1];\n      return ( $large_key, $self-&gt;{tiny} );\n   } else {\n      return ( \"\", $self-&gt;{tiny}, $self-&gt;{large} );\n   }\n}\n\nsub STORABLE_thaw {\n   my ( $self, $cloning, $serialized ) = splice(@_, 0, 3);\n   if ($cloning) {\n      my $large_key = $serialized;\n      $self-&gt;{ tiny  } = shift;\n      $self-&gt;{ large } = $larges{$large_key}[0];\n      --$larges{$large_key}[1]\n         or delete($larges{$large_key});\n   } else {\n      $self-&gt;{ tiny  } = shift;\n      $self-&gt;{ large } = shift;\n   }\n}\n</code></pre>\n\n<p>Untested.</p>\n\n<p>If the cloning process dies, you'll have a memory leak.</p>\n\n<hr>\n\n<p>Alternatively, you could avoid the need for external resources as follows:</p>\n\n<pre><code>use Inline C =&gt; &lt;&lt;'__EOS__';\n\n   IV get_numeric_ref(SV *sv) {\n      SvGETMAGIC(sv);\n      if (!SvROK(sv))\n         croak(\"Argument not a reference\");\n\n      sv = MUTABLE_SV(SvRV(sv));\n      SvREFCNT_inc(sv);\n      return PTR2IV(sv);   /* Despite its name, can be used to convert pointer to IV */\n   }\n\n   SV* get_perl_ref_from_numeric_ref(IV iv) {\n      SV* sv = PTR2IV(iv);\n      return newRV_noinc(sv);\n   }\n\n__EOS__\n\nsub STORABLE_freeze {\n   my ( $self, $cloning ) = @_;\n   if ($cloning) {\n      return ( pack('j', get_numeric_ref($self-&gt;{large})), $self-&gt;{tiny} );\n   } else {\n      return ( \"\", $self-&gt;{tiny}, $self-&gt;{large} );\n   }\n}\n\nsub STORABLE_thaw {\n   my ( $self, $cloning, $serialized ) = splice(@_, 0, 3);\n   if ($cloning) {\n      $self-&gt;{ tiny  } = shift;\n      $self-&gt;{ large } = get_perl_ref_from_numeric_ref(unpack('j', $serialized));\n   } else {\n      $self-&gt;{ tiny  } = shift;\n      $self-&gt;{ large } = shift;\n   }\n}\n</code></pre>\n\n<p>Didn't test <code>STORABLE_freeze</code> and <code>STORABLE_thaw</code>, but tested the C/XS code using the following:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say state );\n\nuse Cpanel::JSON::XS qw( );\n\nsub _dump {\n   state $encoder = Cpanel::JSON::XS-&gt;new-&gt;canonical-&gt;allow_nonref;\n   return $encoder-&gt;encode($_[0]);\n}\n\n{\n   my %h = ( a =&gt; 4, b =&gt; 5 );\n   say _dump(\\%h);                                # {\"a\":4,\"b\":5}\n   say sprintf \"0x%x\", \\%h;                       # 0x32cdbf8\n   say Internals::SvREFCNT(%h);                   # 1\n   my $i = get_numeric_ref(\\%h);\n   say sprintf \"0x%x\", $i;                        # 0x32cdbf8\n   say Internals::SvREFCNT(%h);                   # 2\n   my $ref = get_perl_ref_from_numeric_ref($i);\n   say sprintf \"0x%x\", $ref;                      # 0x32cdbf8\n   say Internals::SvREFCNT(%h);                   # 2\n   say _dump($ref);                               # {\"a\":4,\"b\":5}\n}\n</code></pre>\n\n<p>If the cloning process dies, you'll have a memory leak. I suppose it would be safe to rely on \"large\" not going anywhere during the cloning process, so you could remove the <code>SvREFCNT_inc</code> and change <code>newRV_noinc</code> to <code>newRV</code> to avoid the potential memory leak.</p>\n\n<hr>\n\n<p>To avoid the possible memory leak, never store \"large\" in the object.</p>\n\n<pre><code>my %larges;\n\nsub new {\n   my $class = shift;\n   my $self = bless({}, $class);\n   return $self-&gt;_init(@_);\n}\n\nsub _init {\n   my ($self, $tiny, $large) = @_;\n   $self-&gt;{ tiny } = $tiny;\n\n   {\n      my $large_key = pack('j', refaddr($self));\n      $self-&gt;{ large_key } = $large_key;\n      $larges{ $large_key } = $large;\n   }\n\n   return $self;\n}\n\nsub DESTROY {\n   my ($self) = @_;\n   if (defined( my $large_key = $self-&gt;{ large_key } )) {\n      delete( $larges{ $large_key } );\n   }\n}\n\nsub STORABLE_freeze {\n   my ( $self, $cloning ) = @_;\n   if ($cloning) {\n      return ( $self-&gt;{large_key}, $self-&gt;{tiny} );\n   } else {\n      return ( \"\", $self-&gt;{tiny}, $larges{ $self-&gt;{large_key} } );\n   }\n}\n\nsub STORABLE_thaw {\n   my ( $self, $cloning, $serialized ) = splice(@_, 0, 3);\n   if ($cloning) {\n      my ($tiny) = @_;\n      my $large_key = $serialized;\n      $self-&gt;_init($tiny, $larges{ $large_key });\n   } else {\n      $self-&gt;_init(@_);\n   }\n}\n</code></pre>\n\n<p>Untested.</p>\n\n<p>No memory leaks if the cloning process dies.</p>\n"}], "owner": {"reputation": 9191, "user_id": 345716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/07f86ee9fbdc7b247c49a6894b46a455?s=128&d=identicon&r=PG", "display_name": "Peter V. M&#248;rch", "link": "https://stackoverflow.com/users/345716/peter-v-m%c3%b8rch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 53266247, "answer_count": 1, "score": 2, "last_activity_date": 1542122675, "creation_date": 1542037258, "question_id": 53265483, "link": "https://stackoverflow.com/questions/53265483/custom-storable-hooks-for-dclone-ing-a-light-weight-object-referencing-a-heavy-w", "title": "Custom Storable hooks for dclone-ing a light-weight object referencing a heavy-weight object", "body": "<p>Say I have a tiny object that has a reference to a huge object:</p>\n\n<pre><code>package Tiny;\n\nsub new {\n    my ($class, $tiny, $large) = @_;\n    return bless { tiny =&gt; $tiny, large =&gt; $large };\n}\n</code></pre>\n\n<p>I'd like to create a <code>STORABLE_freeze</code>/<code>STORABLE_thaw</code> pair that lets me (recursively) clone <code>$tiny</code> but maintain/keep the reference to <code>$large</code> as-is without cloning $large too.</p>\n\n<p>I tried temporarily deleting <code>$self-&gt;{large}</code> (see below), and putting it in a hash with a <code>Scalar::Util::refaddr</code> key and a weak reference to <code>$large</code>, serializing the rest of <code>$self</code>, and then putting the (weak) reference back into both the original object immediately and the cloned one in <code>STORABLE_thaw</code>, but it is a mess, and on every clone, the weak ref <em>value</em> gets deleted when it goes out of scope, but the  <em>key</em> remains in the hash forever leaking memory and I need a global class member hash (<code>%largeWeakRefs</code>) to hold the temporary <code>$large</code> reference. Has a smell.</p>\n\n<p>How it that possible to do this in a cleaner way?</p>\n\n<p>Here is my solution using the hash to hold the large ref temporarily:</p>\n\n<pre><code>package Tiny;\n\nuse Scalar::Util qw(refaddr weaken);\n\nsub new {\n    my ( $class, $tiny, $large ) = @_;\n    return bless { tiny =&gt; $tiny, large =&gt; $large }, $class;\n}\n\n# Ugly temporary storage to hold $large refs from _freeze to _thaw...\nmy %largeWeakRefs;\nsub STORABLE_freeze {\n    my ( $self, $cloning ) = @_;\n    my $large = delete local $self-&gt;{large};\n    my $refaddr = refaddr $large;\n    $largeWeakRefs{$refaddr} = $large;\n    weaken $largeWeakRefs{$refaddr};\n    my %restOfSelf = %$self;\n    $self-&gt;{large} = $large;\n    return $refaddr, \\%restOfSelf;\n}\n\nsub STORABLE_thaw {\n    my ($self, $cloning, $refaddr, $restOfSelf) = @_;\n    %$self = %$restOfSelf;\n    $self-&gt;{large} = $largeWeakRefs{$refaddr};\n    return $self;\n}\n</code></pre>\n\n<p>(Yes I know, my example only handles cloning, not straight-up freeze and thaw)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1542032692, "post_id": 53263728, "comment_id": 93412446, "body": "Switch is a source filter, which means it must parse the Perl code that follows itself. An impossible feat, so it doesn&#39;t really actually try. You get errors such as the one you describe, and they can be very hard to debug. Avoid Switch."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1542033182, "post_id": 53264012, "comment_id": 93412773, "body": "Or use a dispatch table if viable."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 6, "last_activity_date": 1542032106, "creation_date": 1542032106, "answer_id": 53264012, "question_id": 53263728, "link": "https://stackoverflow.com/questions/53263728/perls-switch-grabs-a-case-string-inside-a-here-document-and-gets-confused/53264012#53264012", "title": "Perl&#39;s &quot;Switch&quot; grabs a &#39;case&#39; string inside a HERE document and gets confused?", "body": "<p>Don't <code>use Switch</code> if you can possibly avoid it, it's a source filter and you have found one of the bugs lurking in it's depths. given()/when() would be better, but that has problems and is now marked as experimental. If you want the equivalent of a case statement try</p>\n\n<pre><code>for ($test_this) {\n    if ( ! /\\D/ ) {\n        say 'is numbers';\n        last;\n    }\n    if ( $_ eq 'exit' ) {\n        say 'exit found';\n        last;\n    }\n    if (/^\\p{Lu}/) {\n        say 'Upper case letter';\n        last;\n    }\n    # Default option\n    say 'Default';\n    last;\n}\n</code></pre>\n"}], "owner": {"reputation": 12612, "user_id": 884463, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tH15z.png?s=128&g=1", "display_name": "David Tonhofer", "link": "https://stackoverflow.com/users/884463/david-tonhofer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 53264012, "answer_count": 1, "score": 1, "last_activity_date": 1542038744, "creation_date": 1542031142, "last_edit_date": 1542038744, "question_id": 53263728, "link": "https://stackoverflow.com/questions/53263728/perls-switch-grabs-a-case-string-inside-a-here-document-and-gets-confused", "title": "Perl&#39;s &quot;Switch&quot; grabs a &#39;case&#39; string inside a HERE document and gets confused?", "body": "<p>I have a little Perl code, with a HERE document. Inside the HERE document's text, there is embedded the keyword <em>case</em>. This seems to unnerve the <a href=\"https://perldoc.perl.org/5.8.9/Switch.html\" rel=\"nofollow noreferrer\">Switch</a> statement mightily. Am I crazy?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse utf8;  # Meaning \"This lexical scope (i.e. file) contains utf8\"\n\nuse Switch;\n\nsub printUsage {\n   print STDERR &lt;&lt; \"HERE\";\n\n                       +\n  --rollback           | - In case of \"--reallydo\", perform a ROLLBACK instead of a COMMIT at\n                       |   transaction end.\n                       + \nHERE\n}\n</code></pre>\n\n<p>Running this in Perl 5.16 gives:</p>\n\n<pre><code>Bad case statement (invalid case value?) near avo2.pl line 13\n</code></pre>\n\n<p>i.e. <code>In case of</code> isn't appreciated \"here\", literally. Some bug? Should I raise this at the <a href=\"https://rt.perl.org/Public/\" rel=\"nofollow noreferrer\">Perl bug tracker</a>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1542020815, "post_id": 53260811, "comment_id": 93405983, "body": "<code>&lt;&gt;</code> reads a line at a time by default, looks like you&#39;re expecting it to read more than one."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1542021070, "post_id": 53260811, "comment_id": 93406128, "body": "Given the structure of your data, it might be easier to do a bit of formatting (like <code>s&#47;^.*?=\\s*&#47;&#47;</code> to remove the <code>const users = </code> (adapt that depending on your files...)) and to use the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON</a> module instead of using regex."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1542023077, "last_edit_date": 1542023077, "creation_date": 1542021542, "answer_id": 53261062, "question_id": 53260811, "link": "https://stackoverflow.com/questions/53260811/perl-match-specific-number-and-word/53261062#53261062", "title": "perl match specific number and word", "body": "<p>You've made one large mistake and one smaller one.</p>\n\n<p>Mainly, you seem to have forgotten that <code>&lt;FILE&gt;</code> will read in a single line from your file. And none of the individual lines from your file will match your regex. You could verify this by printing the value of <code>$line</code> inside your loop.</p>\n\n<p>The simplest way to fix this is to use the <code>$/</code> variable. <code>$/</code> is Perl's \"input record separator\". It contains the text string that Perl uses to determine the end of a record when reading from a file. The default value is <code>\\n</code> (which is why <code>&lt;...&gt;</code> reads a line at a time), but we can change it to make it more useful.</p>\n\n<pre><code>$/ = \"},\\n\";\n</code></pre>\n\n<p>Now, if you print <code>$line</code>, you'll get something far more useful.</p>\n\n<p>But the code still doesn't work. Because of the small error in your regex.</p>\n\n<p>Your regex looks like this:</p>\n\n<pre><code>age:(.*)\\,\\s*gender: 'male'\\}\n</code></pre>\n\n<p>It assumes that the closing <code>}</code> directly follows the string <code>male</code>. But that's not the case - there's a newline between them. If you change the regex to account for this, then it will work:</p>\n\n<pre><code>age:(.*)\\,\\s*gender: 'male'\\s*\\}\n</code></pre>\n\n<p>Your code now works, but parsing code like this is rather fragile. You'd probably be better advised to remove the <code>const users =</code> and then parse the rest using a JSON parser.</p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1542035991, "post_id": 53263645, "comment_id": 93414356, "body": "You are not helping the OP, nor anyone who may come later with a similar issue. There are decent chances that his code snippet is part of a larger program, in which case your answer isn&#39;t useful. Yes, writing one-liners is somewhat fun, but I don&#39;t think this is a good answer."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542036484, "post_id": 53263645, "comment_id": 93414628, "body": "@Dada.. the answer is specific to this input file. I never claimed that it is a generic solution..The OP never mentioned what you are saying as the requirement and is fine with my answer..please understand the context and then downvote.. or give your best answer before you downvote other&#39;s."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1542038031, "post_id": 53263645, "comment_id": 93415432, "body": "Thing is, anyone who is sufficiently proficient in Perl to understand your one-liner wouldn&#39;t have had the problem in the first place. Also, I don&#39;t complain about the fact that your answer is specific to this input file, but rather that your answer assumes that the OP only wanted to do the 4 lines of code he wrote. In all likelihood, it&#39;s part of a bigger program, and once a retrieves the ages/gender, he does something with them."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1542038204, "post_id": 53263645, "comment_id": 93415527, "body": "And regarding your &quot;give your best answer before you downvote other&#39;s&quot;: this is in no case a rule of SO, and makes no sense imo. I can think your answer isn&#39;t good without writing one of my own. But if you care: I read the question, thought about it, wrote a comment suggesting a better way to deal with the issue, read Dave&#39;s answer, upvoted it. So I think I understand well enough the context. And after that, I saw your answer, and wrote my comment explaining why I disagree. =&gt; I don&#39;t think my methodology is wrong and that I shouldn&#39;t have downvoted."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542038606, "post_id": 53263645, "comment_id": 93415767, "body": "Your assumption might be equally wrong.. the snippet could be part of a large bash program where the OP uses perl script to extract the age and gender.. In that case my answer fits well and that is the reason the OP has upvoted.."}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1542031202, "last_edit_date": 1542031202, "creation_date": 1542030811, "answer_id": 53263645, "question_id": 53260811, "link": "https://stackoverflow.com/questions/53260811/perl-match-specific-number-and-word/53263645#53263645", "title": "perl match specific number and word", "body": "<p>You can do it with Perl-oneliner also. I used \\x27 hex for matching single quotes. Check this out</p>\n\n<pre><code>&gt; perl -ne ' BEGIN {$/=\"}\"} { print $x if /(age:(.+?).*(gender:\\s\\x27male\\x27))/osmg and $x=\"$1\\n\" } ' const.txt\nage: 52,\n    gender: 'male'\nage: 25,\n    gender: 'male'\n&gt;\n</code></pre>\n\n<p>or more compact one.</p>\n\n<pre><code>&gt; perl -ne ' BEGIN {$/=\"}\"} { print $x if /age:.*gender:\\s\\x27male\\x27/osmg and $x=\"$&amp;\\n\" } ' const.txt\nage: 52,\n    gender: 'male'\nage: 25,\n    gender: 'male'\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53261062, "answer_count": 2, "score": 1, "last_activity_date": 1542031202, "creation_date": 1542020635, "question_id": 53260811, "link": "https://stackoverflow.com/questions/53260811/perl-match-specific-number-and-word", "title": "perl match specific number and word", "body": "<p>Given a file include:</p>\n\n<pre><code>const users = [\n  {\n    name: 'Jeff',\n    age: 52,\n    gender: 'male'\n  },\n  {\n    name: 'Andy',\n    age: 25,\n    gender: 'male'\n  },\n  {\n    name: 'Sarah',\n    age: 30,\n    gender: 'female'\n  },\n  {\n    name: 'Phoebe',\n    age: 21,\n    gender: 'female'\n  },\n  {\n    name: 'Doris',\n    age: 81,\n    gender: 'female'\n  }\n];\n</code></pre>\n\n<p>And i am trying to match \"age with gender is male\",but i don't know why my code cant match this. But it works on \"<a href=\"https://regex101.com/r/cO8lqs/24\" rel=\"nofollow noreferrer\">https://regex101.com/r/cO8lqs/24</a>\"</p>\n\n<pre><code>while ($line = &lt;FILE&gt;){\n    if($line =~ /age:(.*)\\,\\s*gender: 'male'\\}/g){\n        print \"$1\\n\"; #output display number only\n        print \"$line\\n\";\n    }   \n}\n</code></pre>\n\n<p>should match like this:</p>\n\n<pre><code>age: 52,\ngender: 'male'\n\nage: 25,\ngender: 'male'\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 1039377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c27b66161d75fe5099c6ea1675bfb4?s=128&d=identicon&r=PG", "display_name": "SylvainB", "link": "https://stackoverflow.com/users/1039377/sylvainb"}, "edited": false, "score": 0, "creation_date": 1542025175, "post_id": 53260260, "comment_id": 93408321, "body": "Thanks for your answer Corion. Sadly, this is bogus because it will convert some sigle-line comments like <code>&#47;&#47; # List of trainings</code> to <code>*&#47; List of trainings</code>, but it won&#39;t convert indented comments (with spaces before the //)"}, {"owner": {"reputation": 327, "user_id": 1039377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c27b66161d75fe5099c6ea1675bfb4?s=128&d=identicon&r=PG", "display_name": "SylvainB", "link": "https://stackoverflow.com/users/1039377/sylvainb"}, "edited": false, "score": 0, "creation_date": 1542025657, "post_id": 53260260, "comment_id": 93408581, "body": "Thanks, I&#39;ll test tour update. I&#39;ve added a link to a sample file to convert"}, {"owner": {"reputation": 327, "user_id": 1039377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c27b66161d75fe5099c6ea1675bfb4?s=128&d=identicon&r=PG", "display_name": "SylvainB", "link": "https://stackoverflow.com/users/1039377/sylvainb"}, "edited": false, "score": 0, "creation_date": 1542027594, "post_id": 53260260, "comment_id": 93409604, "body": "Ok, I&#39;ve changed your code a little bit to <a href=\"https://gist.github.com/sylvainbx/3c2a0f161b945ae1f231e69a52798e59\" rel=\"nofollow noreferrer\">this one</a> and it&#39;s working perfectly. I didn&#39;t know that we can use functions in substitute regex with perl, this is amazing, thanks a lot!"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 0, "last_activity_date": 1542025476, "last_edit_date": 1542025476, "creation_date": 1542018628, "answer_id": 53260260, "question_id": 53258968, "link": "https://stackoverflow.com/questions/53258968/regex-to-convert-jsdoc-from-coffeescript-to-javascript/53260260#53260260", "title": "Regex to convert JSDoc from coffeescript to javascript", "body": "<p>You can't easily do this within a single regular expression, as you need to capture and replace the first <code>// #</code> differently from the second <code>// #</code>. The following script shows how you can call a subroutine on the right hand side of the replacement and in that subroutine, you can use three simple regular expressions to convert your comment to JSdoc:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nmy $js = &lt;&lt;'JS';\n\nfoo\n\n// #\n// This will remove the given file from the machine attachments list. If the file was previously uploaded\n// to the server, it will be marked for deletion on the server. Otherwise, it will be simply truncated from\n// the attachments array.\n// @param file {Object} the file to delete\n// @returns {boolean}\n// #\n\n// # List of trainings\nbar\n\nJS\n\nsub uncomment {\n    my($doc) = @_;\n    $doc =~ s!^// #!/*!;\n    $doc =~ s!// #$! */!;\n    $doc =~ s!^//( #)?! $1 ||'' eq '#' ? '/*' : ' *' !gme;\n    warn $doc;\n    $doc\n}\n\n$js =~ s!(// #\\R// (.+\\n)+( *)// #\\R)!uncomment($1)!gme;\nprint $js;\n</code></pre>\n\n<p>Converted to a stand-alone document-to-JSdoc pipe, the following works:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nlocal $/;\nmy $js = &lt;&gt;;\n\nsub uncomment {\n    my($doc) = @_;\n    $doc =~ s!^// #!/*!;\n    $doc =~ s!// #$! */!;\n    $doc =~ s!^//( #)?! $1 ||'' eq '#' ? '/*' : ' *' !gme;\n    warn $doc;\n    $doc\n}\n\n$js =~ s!(// #\\R// (.+?\\n)+( *)// #\\R)!uncomment($1)!gme;\nprint $js;\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 1039377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c27b66161d75fe5099c6ea1675bfb4?s=128&d=identicon&r=PG", "display_name": "SylvainB", "link": "https://stackoverflow.com/users/1039377/sylvainb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53260260, "answer_count": 1, "score": 0, "last_activity_date": 1542025616, "creation_date": 1542013977, "last_edit_date": 1542025616, "question_id": 53258968, "link": "https://stackoverflow.com/questions/53258968/regex-to-convert-jsdoc-from-coffeescript-to-javascript", "title": "Regex to convert JSDoc from coffeescript to javascript", "body": "<p>I'm trying to convert a project from coffeescript to javascript. I've successfully used the decaffeinate tool but something remains boring to convert manually: JSdoc comments</p>\n\n<p>In coffescript we took the habit to write them like using the formalism of this example:</p>\n\n<pre><code>##\n# This will remove the given file from the machine attachments list. If the file was previously uploaded\n# to the server, it will be marked for deletion on the server. Otherwise, it will be simply truncated from\n# the attachments array.\n# @param file {Object} the file to delete\n# @returns {boolean}\n##\n</code></pre>\n\n<p>After using decaffeinate, they were transformed to something like that:</p>\n\n<pre><code>// #\n// This will remove the given file from the machine attachments list. If the file was previously uploaded\n// to the server, it will be marked for deletion on the server. Otherwise, it will be simply truncated from\n// the attachments array.\n// @param file {Object} the file to delete\n// @returns {boolean}\n// #\n</code></pre>\n\n<p>So I've tried to write a perl regex to make them look like the standard JSdoc syntax. But I'm stuck with the central lines: I can't find to way to put a star at the beginning of each lines ... Here's the best I've came to:</p>\n\n<pre><code>find . -type f -name \"*.js\" | xargs perl -0777 -i -pe 's~// #\\n( +// (.+\\n)+)( +)// #~/**\\n$1$3 */~gm;'\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>/**\n// This will remove the given file from the machine attachments list. If the file was previously uploaded\n// to the server, it will be marked for deletion on the server. Otherwise, it will be simply truncated from\n// the attachments array.\n// @param file {Object} the file to delete\n// @returns {boolean}\n */\n</code></pre>\n\n<p>But ideally, it should be transformed to:</p>\n\n<pre><code>/**\n * This will remove the given file from the machine attachments list. If the file was previously uploaded\n * to the server, it will be marked for deletion on the server. Otherwise, it will be simply truncated from\n * the attachments array.\n * @param file {Object} the file to delete\n * @returns {boolean}\n */\n</code></pre>\n\n<p>Here's an example of a complete file to transform: <a href=\"https://gist.github.com/sylvainbx/96e53b879b4dd7ef7cdd153c3fc3c5b8\" rel=\"nofollow noreferrer\">https://gist.github.com/sylvainbx/96e53b879b4dd7ef7cdd153c3fc3c5b8</a></p>\n\n<p>Any help would be appreciated :)</p>\n"}, {"tags": ["json", "perl", "lwp"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1542013662, "post_id": 53258442, "comment_id": 93402180, "body": "You are not correclty passing the parameters: <code>&quot;https:&#47;&#47;www.googleapis.com&#47;drive&#47;v3&#47;teamdrives?requestId=$r&zwnj;&#8203;equestID, Content-Type =&gt; application&#47;json, Content =&gt; $json&quot;</code> - move everything starting from <code>Content-Type</code> out of the string."}, {"owner": {"reputation": 33, "user_id": 2540966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6e31a9e6ddf7f8e09d3e78592441e2?s=128&d=identicon&r=PG", "display_name": "Armitage", "link": "https://stackoverflow.com/users/2540966/armitage"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542014305, "post_id": 53258442, "comment_id": 93402496, "body": "i just change it to <code>my $resp = $oauth2-&gt;post(&quot;https:&#47;&#47;www.googleapis.com&#47;drive&#47;v3&#47;teamdrive&zwnj;&#8203;s?requestId=$request&zwnj;&#8203;ID&quot;, &quot;Content-Type =&gt; application&#47;json&quot;, &quot;Content =&gt; $json&quot;);</code> but im still getting the same error code and message"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1542014459, "post_id": 53258442, "comment_id": 93402579, "body": "Yes, because you&#39;re still passing the parameters wrong. See the documentation of <code>LWP::UserAgent</code> on <code>-&gt;post</code>: <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">metacpan.org/pod/LWP::UserAgent</a> . You need <code>&#39;Content-Type&#39; =&gt; &#39;application&#47;json&#39;, &#39;Content&#39; =&gt; $json)</code> ."}, {"owner": {"reputation": 33, "user_id": 2540966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6e31a9e6ddf7f8e09d3e78592441e2?s=128&d=identicon&r=PG", "display_name": "Armitage", "link": "https://stackoverflow.com/users/2540966/armitage"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542015422, "post_id": 53258442, "comment_id": 93403067, "body": "oh my, you are right Corion. Such a simple yet accurate answer from you. I just corrected them and it works, thanks Corion."}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1542015588, "creation_date": 1542015588, "answer_id": 53259380, "question_id": 53258442, "link": "https://stackoverflow.com/questions/53258442/create-google-team-drive-with-perl-module-lwpauthenoauth2/53259380#53259380", "title": "Create Google Team Drive with Perl module LWP::Authen::OAuth2", "body": "<p>You are not correctly passing the parameters in your call to <code>-&gt;post</code>:</p>\n\n<pre><code>my $resp = $oauth2-&gt;post(\"https://www.googleapis.com/drive/v3/teamdrives?requestId=$requestID, Content-Type =&gt; application/json, Content =&gt; $json\");\n</code></pre>\n\n<p>Move everything starting from Content-Type out of the string:</p>\n\n<pre><code>my $resp = $oauth2-&gt;post(\n    \"https://www.googleapis.com/drive/v3/teamdrives?requestId=$requestID\",\n    \"Content-Type\" =&gt; \"application/json\",\n    \"Content\" =&gt; $json\n);\n</code></pre>\n\n<p>See also the documentation of <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> on the <code>-&gt;post</code> method.</p>\n"}], "owner": {"reputation": 33, "user_id": 2540966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6e31a9e6ddf7f8e09d3e78592441e2?s=128&d=identicon&r=PG", "display_name": "Armitage", "link": "https://stackoverflow.com/users/2540966/armitage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 53259380, "answer_count": 1, "score": 2, "last_activity_date": 1542020081, "creation_date": 1542012026, "last_edit_date": 1542020081, "question_id": 53258442, "link": "https://stackoverflow.com/questions/53258442/create-google-team-drive-with-perl-module-lwpauthenoauth2", "title": "Create Google Team Drive with Perl module LWP::Authen::OAuth2", "body": "<p>I'm trying to use Perl with LWP::Authen::OAuth2 to perform google team drive creation. Understand to create google team drive using google Drive API, it requires 1 param to be posted that is <code>requestId</code> and another json body <code>name</code> (reference: <a href=\"https://developers.google.com/drive/api/v3/reference/teamdrives/create\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/v3/reference/teamdrives/create</a>)</p>\n\n<p>However, I keep getting the error code 400 and error message saying </p>\n\n<blockquote>\n  <p>The Team Drive name must be provided, not empty, and not entirely whitespace.</p>\n</blockquote>\n\n<p>which indicate the json body of <code>name</code> is not posted correctly.</p>\n\n<p>Below is my code:</p>\n\n<pre><code># Go get the auth tokens\n$oauth2-&gt;request_tokens(code =&gt; $code);\n\nmy $requestID = \"randomrequestID\";\nmy $json = '{\"name\": \"anyteamdrivename\"}';\n\nmy $resp = $oauth2-&gt;post(\"https://www.googleapis.com/drive/v3/teamdrives?requestId=$requestID, Content-Type =&gt; application/json, Content =&gt; $json\");\n\n\nmy $data = decode_json($resp-&gt;content());\nuse Data::Dumper;\nprint Dumper $data;\n</code></pre>\n\n<p>Appreciate if someone with Perl knowledge will be able to shade some light.</p>\n"}, {"tags": ["multithreading", "perl", "bioperl"], "answers": [{"comments": [{"owner": {"reputation": 582, "user_id": 1862330, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/2c38f99284fc1d1f9b30bd359bec95e5?s=128&d=identicon&r=PG", "display_name": "BioDeveloper", "link": "https://stackoverflow.com/users/1862330/biodeveloper"}, "edited": false, "score": 0, "creation_date": 1542085517, "post_id": 53265702, "comment_id": 93430898, "body": "Thanks, good piece of advice @Sobrique . I will try to make it work with remaining code."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1542037978, "creation_date": 1542037978, "answer_id": 53265702, "question_id": 53257579, "link": "https://stackoverflow.com/questions/53257579/how-to-apply-multithreading-to-bioseqio-translate-code-bioperl/53265702#53265702", "title": "How to apply multithreading to Bio::SeqIO translate code (Bioperl)?", "body": "<p>I'm afraid I'm not going to rewrite your code for you, but I can give you some pointers on how to accomplish threading. </p>\n\n<p>The thing you need to understand about perl threading is it's <em>not</em> a lightweight thread. You should spawn a number of threads equal to the parallelism, run them off a <code>Thread::Queue</code> and go from there. </p>\n\n<p>You also need to avoid any non-thread-safe modules - you can use them if you're <em>careful</em> but that usually means instantiating them within the thread with <code>require</code> and <code>import</code> instead of <code>use</code> at the start of the program.</p>\n\n<p>I would also suggest avoiding trying to do your output IO in parallel - return the thread results and coalesce them (sorting if necessary) in the 'main' thread (or spin off a single writer). </p>\n\n<p>So I'd go with something like;</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse threads;\n\nuse Thread::Queue;\nuse Storable qw ( freeze thaw );\n\nmy $NUM_THREADS = 16;    #approx number of cores.\n\nmy $translate_q         = Thread::Queue-&gt;new;\nmy $translate_results_q = Thread::Queue-&gt;new;\n\n\nsub translate_thread {\n   while ( my $item = translate_q-&gt;dequeue ) {\n      my $seq  = thaw $item;\n      my $pseq = $seq-&gt;translate();\n      $translate_results_q-&gt;enqueue( freeze $pseq );\n\n   }\n\n}\n\nthreads-&gt;create( \\&amp;translate_thread ) for 1 .. $NUM_THREADS;\n\nwhile ( my $seq =&gt; $seqin-&gt;next_seq ) {\n   $translate_q-&gt;enqueue( freeze($seq) );\n}\n$translate_q-&gt;end;\n\n$_-&gt;join for threads-&gt;list;\n$translate_results_q-&gt;end;\n\nwhile ( my $result = $translate_results_q-&gt;dequeue ) {\n   my $pseg = thaw($result);\n}\n</code></pre>\n\n<p>Note - this won't work as is, because it's missing merging with the rest of your ocde. But hopefully it illustrates how the queue and threading can work to get parallelism? </p>\n\n<p>You pass around your objects using <code>freeze</code> and <code>thaw</code> from Storable, and use the parallelism to unpack them.</p>\n\n<p>Don't go too mad on the number of threads - for primarily compute workloads (e.g. no IO) then a number of threads equal to the number of cores is about right. If they'll be blocking on IO, you can increase this number, but going past about double isn't going to do very much. </p>\n\n<p>You can't really parallelise disk IO efficiently - it just doesn't work like that. So do that in the 'main' thread. </p>\n"}], "owner": {"reputation": 582, "user_id": 1862330, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/2c38f99284fc1d1f9b30bd359bec95e5?s=128&d=identicon&r=PG", "display_name": "BioDeveloper", "link": "https://stackoverflow.com/users/1862330/biodeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542037978, "creation_date": 1542007820, "last_edit_date": 1542013272, "question_id": 53257579, "link": "https://stackoverflow.com/questions/53257579/how-to-apply-multithreading-to-bioseqio-translate-code-bioperl", "title": "How to apply multithreading to Bio::SeqIO translate code (Bioperl)?", "body": "<p>I am translating a fasta nucleotide file into protein sequences by this code  </p>\n\n<pre><code>use Bio::SeqIO;\nuse Getopt::Long;\n\nmy ($format,$outfile) = 'fasta';\n\nGetOptions(\n    'f|format:s'  =&gt; \\$format,\n    'o|out|outfile:s' =&gt; \\$outfile,\n    );\n\nmy $oformat = 'fasta';\n$file=$ARGV[0];\nchomp $file;\n\n# this implicity uses the &lt;&gt; file stream\nmy $seqin = Bio::SeqIO-&gt;new( -format =&gt; $format, -fh =&gt; \\*ARGV);\nmy $seqout;\nif( $outfile ) {\n    $seqout = Bio::SeqIO-&gt;new( -format =&gt; $oformat, -file =&gt; \"&gt;$outfile\" );\n} else {\n# defaults to writing to STDOUT\n    $seqout = Bio::SeqIO-&gt;new( -format =&gt; $oformat );\n}\n\n    while( (my $seq = $seqin-&gt;next_seq()) ) {\n            my $pseq = $seq-&gt;translate();\n            $seqout-&gt;write_seq($pseq);\n    }\n</code></pre>\n\n<p>I implement \n<strong>threads</strong> and <strong>threads::shared</strong> perl modules to achieve in other cases but I want to apply following code into previous task  </p>\n\n<pre><code>use threads;\nuse threads::shared;\nuse List::Util qw( sum );\nuse YAML;\nuse constant NUM_THREADS =&gt;100;\n\nmy @output :shared;\n\nmy $chunk_size = @data / NUM_THREADS;\n\nmy @threads;\nfor my $chunk ( 1 .. NUM_THREADS ) {\n    my $start = ($chunk - 1) * $chunk_size;\n    push @threads, threads-&gt;create(\n        \\&amp;doOperation,\n        \\@data,\n        $start,\n        ($start + $chunk_size - 1),\n        \\@output,\n    );\n}\n$_-&gt;join for @threads;\n\nsub doOperation{\n    my ($data, $start, $end, $output) = @_;\n\n    my $id = threads-&gt;tid;\n\n    print \"$id \";\n\n    for my $i ($start .. $end) {\n        print \"Thread [$id] processing row $i\\n\";\n</code></pre>\n\n<p><strong>#THIS WHILE SHOULD BE MULTITHREADED</strong></p>\n\n<pre><code>    while( (my $seq = $seqin-&gt;next_seq()) ) {\n            my $pseq = $seq-&gt;translate();\n            $seqout-&gt;write_seq($pseq);\n    }\n</code></pre>\n\n<p><strong>#THIS WHILE SHOULD BE MULTITHREADED</strong></p>\n\n<pre><code>        sleep 1 if 0.2 &gt; rand;\n    }\n    print \"Thread done.\\n\";\n    return;\n}\nprint \"\\n$time\\n\";\nmy $time = localtime;\nprint \"$time\\n\";\n</code></pre>\n\n<p>Threads are being created but somehow it can not process the fasta file.\nThe fisrt code works fine without multi threading.</p>\n"}, {"tags": ["perl", "curl", "unicode", "https", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542012509, "post_id": 53257317, "comment_id": 93401615, "body": "Thanks! So it means that encode_json api cannot support using the \\u6d4b\\u8bd5 format and must use the format you mentioned above. If I want to stick to \\u6d4b\\u8bd5, then I have to find another way to pass the variable in the inner json value."}, {"owner": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542016377, "post_id": 53257317, "comment_id": 93403548, "body": "Any suggestion to work with \\u6d4b\\u8bd5 string format  as it&#39;s the database format ? use  --trace-ascii /dev/stdout with curl I can see that curl is sending out &quot;content&quot;: &quot;\\u6d4b\\u8bd5&quot; to the https server."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542032544, "post_id": 53257317, "comment_id": 93412342, "body": "If you checked the output of your code (with my change), you&#39;d also see <code>\\u6d4b\\u8bd5</code> within the output. Again, let <code>encode_json</code> handle the JSON encoding!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542032859, "post_id": 53257317, "comment_id": 93412559, "body": "If you have <code>\\u6d4b\\u8bd5</code> in the database, you&#39;ve done something wrong. You shouldn&#39;t see <code>\\u6d4b\\u8bd5</code> outside of JSON. Maybe you did some shoddy manual parsing instead of using <code>decode_json</code> or similar? (Of course, if the database field contains proper JSON, then just <code>decode_json</code> or similar as the first step of getting the value you want.)"}, {"owner": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542080388, "post_id": 53257317, "comment_id": 93429758, "body": "\\u6d4b\\u8bd5 is from another REST api, for example, 182383:\\u6d4b\\u8bd5,182384:\\u7a4b\\u2bd5,etc, the list is available from the website. Then I save the list in local JSON array and use the number key to find its value and send it to my backend server, which will push to the registered app."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "edited": false, "score": 0, "creation_date": 1542115442, "post_id": 53257317, "comment_id": 93445528, "body": "What&#39;s your point? Are you claiming <code>decode_json</code> or similar was used somewhere in that process? If not, what I said still stands."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1542006410, "creation_date": 1542006410, "answer_id": 53257317, "question_id": 53256796, "link": "https://stackoverflow.com/questions/53256796/curl-works-fine-but-perl-lwp-failed-to-post-unicode-code-to-https-server/53257317#53257317", "title": "Curl works fine but Perl LWP failed to post Unicode code to HTTPS server", "body": "<p>Earlier, you didn't encode. Now, you double encode. <code>encode_json</code> is already handling the encoding to JSON, so don't do it manually too!</p>\n\n<p>If you provide the 12 characters <code>\\u6d4b\\u8bd5</code>, it will receive the 12 characters <code>\\u6d4b\\u8bd5</code>.</p>\n\n<p>If you provide the two characters U+6D4B and U+8BD5, it will receive the two characters U+6D4B and U+8BD5.</p>\n\n<ul>\n<li><code>my $var = chr(0x6D4B) . chr(0x8BD5);</code></li>\n<li><code>my $var = \"\\x{6D4B}\\x{8BD5}\";</code></li>\n<li><code>my $var = \"\\N{U+6D4B}\\N{U+8BD5}\";</code></li>\n<li><code>use utf8; my $var = \"\u6d4b\u8bd5\";</code></li>\n<li>etc</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 53257317, "answer_count": 1, "score": 0, "last_activity_date": 1542009654, "creation_date": 1542003518, "last_edit_date": 1542009654, "question_id": 53256796, "link": "https://stackoverflow.com/questions/53256796/curl-works-fine-but-perl-lwp-failed-to-post-unicode-code-to-https-server", "title": "Curl works fine but Perl LWP failed to post Unicode code to HTTPS server", "body": "<p>My snippet as below, using curl I can send the Unicode string to the server\nand after push notify the message to my mobile phone, displayed correctly the Chinese characters on the phone. </p>\n\n<pre><code>      curl  \"https://oapi.dingtalk.com/robot/send?access_token=$ACCESS_TOKEN\" \\\n   -H 'Content-Type: application/json' \\\n   -d '{\"msgtype\": \"text\", \"text\": {\n        \"content\": \"\\u6d4b\\u8bd5\",\n     }}' \n</code></pre>\n\n<p>But when I use the Perl LWP library to send the same content to the server,\nI only got 6d4b8bd5 displayed on the app.\nI've tried to use tcpdump to compare the difference between curl and LWP sent out buffer, but as it's https server it's not working.</p>\n\n<pre><code>    #!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Cpanel::JSON::XS qw( encode_json );\n# Create a user agent object\nuse LWP::UserAgent;\n$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"curl/7.47.0\");\n\n\n# Create a request\nmy $req = HTTP::Request-&gt;new(POST =&gt; 'https://oapi.dingtalk.com/robot/send?access_token=bf47148ea6a1b125395f9313873ac508');\n\n$req-&gt;content_type('application/json;charset=utf-8');\n\nmy $var='\\u6d4b\\u8bd5';\n\nmy $message = encode_json({ msgtype =&gt; \"text\", text =&gt; { content =&gt; $var } });\n\n$req-&gt;content($message);\n\n# Pass request to the user agent and get a response back\nmy $res = $ua-&gt;request($req);\n\n# Check the outcome of the response\nif ($res-&gt;is_success) {\n  print $res-&gt;content;\n} else {\n  print $res-&gt;status_line, \"n\";\n}\n</code></pre>\n\n<p>any suggestions? Thanks!</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1542002396, "post_id": 53256461, "comment_id": 93397752, "body": "Do you mean the DBI method? If so, read the docs: <a href=\"https://metacpan.org/pod/DBI#disconnect\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI#disconnect</a>"}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 4, "last_activity_date": 1542007291, "creation_date": 1542007291, "answer_id": 53257478, "question_id": 53256461, "link": "https://stackoverflow.com/questions/53256461/is-the-mysql-command-myconnection-disconnect-required-in-perl/53257478#53257478", "title": "Is the MySQL command $myconnection-&gt;disconnect(); required in Perl", "body": "<p>No, that's not required. The connection will close naturally when your script exits.</p>\n\n<p>Generally speaking, <code>$dbh-&gt;disconnect()</code> is only required in a few very specific situations. Most of the time, you can rely on the connection being closed when the script exits, or when all copies of the handle have gone out of scope.</p>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53257478, "answer_count": 1, "score": 1, "last_activity_date": 1542007291, "creation_date": 1542001296, "question_id": 53256461, "link": "https://stackoverflow.com/questions/53256461/is-the-mysql-command-myconnection-disconnect-required-in-perl", "title": "Is the MySQL command $myconnection-&gt;disconnect(); required in Perl", "body": "<p>Is it required that I call the MySQL command \n<code>$myconnection-&gt;disconnect();</code> before exiting my Perl scripts? I've read somewhere that it's not necessary, but I want to be sure.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "http", "post", "lwp"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1541987954, "creation_date": 1541987954, "answer_id": 53255118, "question_id": 53255021, "link": "https://stackoverflow.com/questions/53255021/how-to-pass-variable-to-http-post-api-in-perl/53255118#53255118", "title": "how to pass variable to http post API in Perl?", "body": "<p>You didn't properly convert the value into a JSON string.</p>\n\n<pre><code>use Cpanel::JSON::XS qw( encode_json );\n\nmy $message = encode_json({ msgtype =&gt; \"text\", text =&gt; { content =&gt; $var1 } });\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4131398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c83e54bc5954877936ef9bf91df6c1?s=128&d=identicon&r=PG&f=1", "display_name": "codebyte", "link": "https://stackoverflow.com/users/4131398/codebyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 53255118, "answer_count": 1, "score": 1, "last_activity_date": 1541987954, "creation_date": 1541986959, "question_id": 53255021, "link": "https://stackoverflow.com/questions/53255021/how-to-pass-variable-to-http-post-api-in-perl", "title": "how to pass variable to http post API in Perl?", "body": "<p>My snippet as below, I googled and cannot find a solution to pass variable to \nthe post request in my quoted string.\nMost of the google result are just pass plain Json key value string pairs to the \npost content. But I need to pass the parameter to the inner Json value part and call the related REST api.  any suggestions? Thanks!</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\n# Create a user agent object\nuse LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;agent(\"MyApp/0.1\");\n\n\n# Create a request\nmy $req = HTTP::Request-&gt;new(POST =&gt; 'https://oapi.dingtalk.com/robot/send?access_token=foofb73f');\n\n$req-&gt;content_type('application/json');\n\nmy $var1=\"value from var\";\n\n# works fine\nmy $message = '{\"msgtype\": \"text\",\"text\":{\"content\":\"plain string ok\"}}';\n\n# failed to compile\n# my $message = '{\"msgtype\": \"text\",\"text\":{\"content\":$var1}}';\n\n\n$req-&gt;content($message);\n\n# Pass request to the user agent and get a response back\nmy $res = $ua-&gt;request($req);\n\n# Check the outcome of the response\nif ($res-&gt;is_success) {\n  print $res-&gt;content;\n} else {\n  print $res-&gt;status_line, \"n\";\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "directory"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1541961409, "post_id": 53251859, "comment_id": 93388526, "body": "See: <a href=\"http://stackoverflow.com/q/6697753/3776858\">Difference between single and double quotes in bash</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1541963118, "post_id": 53251859, "comment_id": 93388960, "body": "What exactly do you mean by <i>&quot;extension&quot;</i>? To avoid going into sub directories with <code>find</code> you could also use the <code>maxdepth</code> option, e.g.: <code>find . -maxdepth 1 -type f</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541965641, "post_id": 53251859, "comment_id": 93389723, "body": "Is the <code>cd</code> performed in the same shell as <code>find</code>? Please provide a minimal directory structure and value for <code>$1</code> that demonstrates the problem."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1541964416, "creation_date": 1541964416, "answer_id": 53252372, "question_id": 53251859, "link": "https://stackoverflow.com/questions/53251859/get-extensions-inside-directory-bash/53252372#53252372", "title": "Get extensions inside directory bash", "body": "<p>You could try the following Perl command:</p>\n\n<pre><code>perl -MList::Util=uniq -sE '\n   chdir $dir; say for uniq map { /\\.([^.\\/]+)$/ ? $1 : () } grep -f, &lt;*&gt;;\n' -- -dir=\"$1\" &gt; \"$1\"-extensions.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1541996514, "last_edit_date": 1541996514, "creation_date": 1541966077, "answer_id": 53252618, "question_id": 53251859, "link": "https://stackoverflow.com/questions/53251859/get-extensions-inside-directory-bash/53252618#53252618", "title": "Get extensions inside directory bash", "body": "<p>There's obviously something you're not saying, because there's no bug in <code>find</code> that will list files outside of the specified directory, and there's no bug in your Perl program that will invent extensions.</p>\n\n<pre><code>$ find\n.\n./foo\n./foo/a.good\n./a.bad\n./script\n\n$ cat ./script\n#!/bin/bash\ncd $1\nfind . -type f | perl -ne 'print $1 if m/\\.([^.\\/]+)$/' | sort -u &gt; $1extensions.txt\n\n$ ./script foo\n\n$ cat foo/fooextensions.txt\ngood\ntxt        &lt;-- From the output file you created inside the directory in which you search.\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10599105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-icLgnXTh4Fw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbATtbA0wXLkM8lQZzYTq1ct4pIi_g/mo/photo.jpg?sz=128", "display_name": "user10599105", "link": "https://stackoverflow.com/users/10599105/user10599105"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1541996514, "creation_date": 1541961063, "last_edit_date": 1541961430, "question_id": 53251859, "link": "https://stackoverflow.com/questions/53251859/get-extensions-inside-directory-bash", "title": "Get extensions inside directory bash", "body": "<p>Im trying to get all the extensions in the directory passed as $1 parameter.\nThe problem is that Im getting extensions that are not inside $1. I use cd command to get into the directory in the first line but it seems that it does not work.</p>\n\n<pre><code>cd $1\n\n find . -type f | perl -ne 'print $1 if m/\\.([^.\\/]+)$/' | sort -u &gt; $1extensions.txt\n</code></pre>\n"}, {"tags": ["macos", "perl", "cpan"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1541935870, "post_id": 53248167, "comment_id": 93381434, "body": "Does the amavisd run in the same perl you installed the library to? Also not that you installed <a href=\"http://p3rl.org/install\" rel=\"nofollow noreferrer\">install</a> (which is fortunately harmless)."}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541949605, "post_id": 53248167, "comment_id": 93385147, "body": "Yes, sorry, I did install \u201cinstall\u201d.. but yes, I\u2019ve made sure I only have the one version of Perl. Updated to the latest. 5.8 I think it is."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541973876, "post_id": 53248167, "comment_id": 93391963, "body": "Where did <code>cpanm</code> instlal the module? What&#39;s the value of the @INC variable in amavisd before it fails to find the missing module?"}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542008357, "post_id": 53248167, "comment_id": 93399829, "body": "/usr/local/Cellar/perl/5.28.0/lib/perl5/site_perl/5.28.0/dar&zwnj;&#8203;win-thread-multi-2le&zwnj;&#8203;vel/Net/LibIDN.pm and in inc is here i think. add_entropy($], @INC, %ENV);"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1542013929, "post_id": 53248167, "comment_id": 93402318, "body": "I fear <code>amavisd</code> uses the system perl."}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542014242, "post_id": 53248167, "comment_id": 93402463, "body": "You are right! I should have thought of this. I will move the system perl and link the Brew perl there. It has now at least found a different module that is missing... Thanks for that hint"}, {"owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542014866, "post_id": 53248167, "comment_id": 93402790, "body": "Oh yes, I changed the shebang line in amavisd to reflect the perl path, from #!/usr/bin/perl to #!/usr/local/bin/perl and now it&#39;s ok."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1542017397, "creation_date": 1542017397, "answer_id": 53259915, "question_id": 53248167, "link": "https://stackoverflow.com/questions/53248167/i-have-perl5-28-installed-and-netlibidn-installed-but-amavisd-cant-find-it/53259915#53259915", "title": "I have Perl5.28 installed and Net::LibIDN installed but amavisd cant find it", "body": "<p>It's because <code>amavisd</code> uses the system perl, while <code>cpanm</code> was installed to a custom perl and installs modules there.</p>\n\n<p>Either install the module to system perl, or try to convince <code>amavisd</code> to run in the custom perl (might involve manually changing the shebang lines in its source files).</p>\n"}], "owner": {"reputation": 503, "user_id": 9277248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3198e2d695ddcd19cc13b4d5e9d68d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Harry McGovern", "link": "https://stackoverflow.com/users/9277248/harry-mcgovern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 53259915, "answer_count": 1, "score": 0, "last_activity_date": 1542017397, "creation_date": 1541934968, "last_edit_date": 1541946303, "question_id": 53248167, "link": "https://stackoverflow.com/questions/53248167/i-have-perl5-28-installed-and-netlibidn-installed-but-amavisd-cant-find-it", "title": "I have Perl5.28 installed and Net::LibIDN installed but amavisd cant find it", "body": "<p>I'm on a MacMini, using Homebrew to install things.</p>\n\n<p>But - amavisd can't start because apparently it can't find this Net::IDN module?</p>\n\n<p>I'm getting this </p>\n\n<pre><code>ERROR: MISSING REQUIRED BASIC MODULES:\nNet::LibIDN\nBEGIN failed--compilation aborted at /usr/local/sbin/amavisd line 251.\n</code></pre>\n\n<p>But I'm sure it is installed.</p>\n\n<pre><code>Fetching http://www.cpan.org/authors/id/D/DA/DAGOLDEN/install-  0.01.tar.gz ... OK\nConfiguring install-0.01 ... OK\nBuilding and testing install-0.01 ... OK\nSuccessfully installed install-0.01\nNet::LibIDN is up to date. (0.12)\n1 distribution installed\n</code></pre>\n\n<p>So how do I tell Perl to find it now? </p>\n\n<p>EDIT:\nSo I'm forcing a reinstall - but still no joy</p>\n\n<pre><code>zeus:~ robert$ sudo cpanm --reinstall Net::LibIDN\nPassword:\n--&gt; Working on Net::LibIDN\nFetching http://www.cpan.org/authors/id/T/TH/THOR/Net-LibIDN-0.12.tar.gz ... OK\nConfiguring Net-LibIDN-0.12 ... OK\nBuilding and testing Net-LibIDN-0.12 ... OK\nSuccessfully reinstalled Net-LibIDN-0.12\n1 distribution installed\nzeus:~ robert$ \n</code></pre>\n\n<p>and trying to run amavisd ...</p>\n\n<pre><code>zeus:~ robert$ sudo /usr/local/sbin/amavisd -c /usr/local/etc/amavisd.conf debug\nPassword:\nERROR: MISSING REQUIRED BASIC MODULES:\n  Net::LibIDN\nBEGIN failed--compilation aborted at /usr/local/sbin/amavisd line 251.\nzeus:~ robert$ \n</code></pre>\n\n<p>So for some reason, it seems amavisd-new can't find the module. Just that Module?</p>\n"}, {"tags": ["perl", "ubuntu"], "comments": [{"owner": {"reputation": 898, "user_id": 3327376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa7d48656cb0ca601d075d37db1b0f5e?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/3327376/matt"}, "edited": false, "score": 4, "creation_date": 1541927015, "post_id": 53247228, "comment_id": 93379274, "body": "&quot;Nothing worked&quot; isn&#39;t real descriptive. What happened? Did you get an error message?"}, {"owner": {"reputation": 644, "user_id": 3928678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gy7ef.jpg?s=128&g=1", "display_name": "cecil merrel aka bringrainfire", "link": "https://stackoverflow.com/users/3928678/cecil-merrel-aka-bringrainfire"}, "edited": false, "score": 2, "creation_date": 1541928286, "post_id": 53247228, "comment_id": 93379556, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12436587/how-to-run-perl-script-from-any-where-any-directory\">How to run perl script from any where (any directory)</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541929947, "post_id": 53247228, "comment_id": 93379914, "body": "If an executable isn&#39;t in a directory in your path, you need to explicitly provide the path to it. <code>.&#47;list-iana-reserved-ranges</code> etc. That error when you tried running it directly through perl suggests it&#39;s not a perl program, btw..."}], "answers": [{"comments": [{"owner": {"reputation": 14543, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "edited": false, "score": 0, "creation_date": 1547111952, "post_id": 53247569, "comment_id": 95082092, "body": "<code>#!&#47;usr&#47;bin&#47;env perl</code> would be even better."}, {"owner": {"reputation": 621, "user_id": 10590519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymYMa.png?s=128&g=1", "display_name": "bitinerant", "link": "https://stackoverflow.com/users/10590519/bitinerant"}, "reply_to_user": {"reputation": 14543, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "edited": false, "score": 0, "creation_date": 1547144344, "post_id": 53247569, "comment_id": 95100893, "body": "Thanks. I had wondered about the <code>env</code> form of the shebang and today I finally looked it up: <a href=\"https://unix.stackexchange.com/questions/29608/\">Why is it better to use \u201c#!/usr/bin/env NAME\u201d instead of \u201c#!/path/to/NAME\u201d as my shebang?</a>. According to the accepted and top answer, it&#39;s not <i>necessarily</i> better. It depends."}], "tags": [], "owner": {"reputation": 621, "user_id": 10590519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymYMa.png?s=128&g=1", "display_name": "bitinerant", "link": "https://stackoverflow.com/users/10590519/bitinerant"}, "is_accepted": false, "score": 3, "last_activity_date": 1541930197, "creation_date": 1541930197, "answer_id": 53247569, "question_id": 53247228, "link": "https://stackoverflow.com/questions/53247228/how-to-run-perl-script-on-ubuntu/53247569#53247569", "title": "How to run perl script on Ubuntu", "body": "<p>To run a Perl script,</p>\n\n<ul>\n<li>put the interpreter in the first line of the files with a \"shabang\" or \"hash bang\" (<code>#!</code>), which the script you linked to already has:</li>\n</ul>\n\n<p><code>#!/usr/bin/perl</code></p>\n\n<ul>\n<li>make the files executable:</li>\n</ul>\n\n<p><code>chmod +x list-iana-reserved-ranges aggregate-cidr-addresses</code></p>\n\n<ul>\n<li>add <code>./</code> to the beginning of the filenames (this is a Linux security feature to not accidentally run scripts in your current directory):</li>\n</ul>\n\n<p><code>./list-iana-reserved-ranges | ./aggregate-cidr-addresses</code></p>\n"}], "owner": {"reputation": 17, "user_id": 4738388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0dfdf4b2a659bf12fb1c474e6868773?s=128&d=identicon&r=PG&f=1", "display_name": "Bostjan", "link": "https://stackoverflow.com/users/4738388/bostjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2856, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541930197, "creation_date": 1541926918, "last_edit_date": 1541928529, "question_id": 53247228, "link": "https://stackoverflow.com/questions/53247228/how-to-run-perl-script-on-ubuntu", "title": "How to run perl script on Ubuntu", "body": "<p>How to run perl script on Ubuntu?\nHow to run this script \n<a href=\"https://zwitterion.org/software/aggregate-cidr-addresses/\" rel=\"nofollow noreferrer\">https://zwitterion.org/software/aggregate-cidr-addresses/</a></p>\n\n<p>I\u2019ve created the file aggregate-cidr-addresses as shown in the example. </p>\n\n<p>I\u2019ve copied the file from the server in the same directory </p>\n\n<p>then I run as shown in the example</p>\n\n<pre><code>root@Ubuntu:~$ list-iana-reserved-ranges | aggregate-cidr-addresses\nlist-iana-reserved-ranges: ukaz ni bil najden (translate command not found)\naggregate-cidr-addresses: ukaz ni bil najden (translate command not found)\n</code></pre>\n\n<p>and also </p>\n\n<pre><code>root@Ubuntu:~$ perl list-iana-reserved-ranges | aggregate-cidr-addresses\nNumber found where operator expected at list-iana-reserved-ranges line 2, near \"192.168.1.0\"\n(Missing semicolon on previous line?)\nsyntax error at list-iana-reserved-ranges line 2, near \"192.168.1.0\"\nExecution of list-iana-reserved-ranges aborted due to compilation errors.\naggregate-cidr-addresses: ukaz ni bil najden (translate command not found)\n</code></pre>\n\n<p>I've got </p>\n\n<pre><code>command not found\n</code></pre>\n\n<p>How to run this properly? </p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541923891, "post_id": 53246900, "comment_id": 93378728, "body": "<a href=\"https://perldoc.perl.org/functions/readlink.html\" rel=\"nofollow noreferrer\">readlink</a>"}, {"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541929847, "post_id": 53246900, "comment_id": 93379890, "body": "This returns the real path for the original file."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1541953084, "post_id": 53246900, "comment_id": 93386142, "body": "@jww, the asker wants to get absolute path to the <b>link file</b>, not to the <i>target file</i> like in the referenced question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541959073, "post_id": 53246900, "comment_id": 93387864, "body": "The <code>&#47;path&#47;to&#47;folder&#47;link.file</code> is the &quot;full&quot; (absolute) path since it starts with a  <code>&#47;</code> so it appears that you don&#39;t want that.  When you say &quot;<i>.. will return <code>&#47;path&#47;to&#47;folder&#47;link.file</code> instead of <code>&#47;path&#47;to&#47;folder&#47;original.txt</code></i>&quot; it appears that you have the absolute path of the link but want the absolute path of the target (contrary to what the previous sentence states)."}, {"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1542007478, "post_id": 53246900, "comment_id": 93399475, "body": "@jww was right. I want the full absolute path of the link file and not the original file it points to."}, {"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1542007512, "post_id": 53246900, "comment_id": 93399492, "body": "@jww not a duplicate, since the link relates to absolute path of the original file"}, {"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1542007702, "post_id": 53246900, "comment_id": 93399570, "body": "Yes, @Tsyvarev is right. I want the absolute path of the link file itself like states in the post"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1541954183, "last_edit_date": 1541954183, "creation_date": 1541932505, "answer_id": 53247883, "question_id": 53246900, "link": "https://stackoverflow.com/questions/53246900/getting-a-symbolic-link-full-path/53247883#53247883", "title": "Getting a symbolic link full path", "body": "<p>Use a method that doesn't check the file system such as <a href=\"http://search.cpan.org/perldoc?File::Spec::Functions\" rel=\"nofollow noreferrer\">File::Spec::Functions</a>'s <code>rel2abs</code>. </p>\n\n<pre><code>[~]$ perl -MCwd=abs_path -e'CORE::say abs_path($ARGV[0])' tmp\n/tmp/ikegami\n\n[~]$ perl -MFile::Spec::Functions=rel2abs -e'CORE::say rel2abs($ARGV[0])' tmp\n/home/ikegami/tmp\n</code></pre>\n\n<p>Of course, if you can guarantee it's a relative path, you could simply use the following:</p>\n\n<pre><code>[~]$ perl -MCwd=getcwd -e'CORE::say getcwd().\"/\".$ARGV[0]' tmp\n/home/ikegami/tmp\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1542007462, "answer_count": 1, "score": 0, "last_activity_date": 1542007651, "creation_date": 1541923759, "last_edit_date": 1542007651, "question_id": 53246900, "link": "https://stackoverflow.com/questions/53246900/getting-a-symbolic-link-full-path", "closed_reason": "Duplicate", "title": "Getting a symbolic link full path", "body": "<p>I would like to get the symbolic link full path.</p>\n\n<p>Consider the following:</p>\n\n<p><code>/path/to/folder/link.file</code> links to <code>/path/to/folder/original.txt</code>.</p>\n\n<p>I need to acquire the <strong>links'</strong> full path and not the original file, such as:</p>\n\n<pre><code>$fullpath = abs_path(\"link.file\");\n</code></pre>\n\n<p>will return <code>/path/to/folder/link.file</code> instead of <code>/path/to/folder/original.txt</code>.</p>\n\n<p>I tried reading but couldn't get a working solution..</p>\n\n<p>To clarify, the absolute path of the <strong>link file</strong> itself</p>\n"}, {"tags": ["javascript", "python", "perl", "web", "search"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1541933831, "post_id": 53246828, "comment_id": 93380863, "body": "Note that you can use perldoc and pydoc from the command line. However, some Perl installations omit the documentation, and pydoc is only a frontend for the <code>help()</code> system \u2013 it only shows the docstrings and introspects the structure of modules/classes, but does not show the full documentation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541966379, "post_id": 53246828, "comment_id": 93389946, "body": "<code>perldoc</code> command line tool gives access to Perl docs. Depending on command-line options, it can bring up specific perl doc pages, docs on modules, specific functions or special vars."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541927029, "post_id": 53246922, "comment_id": 93379280, "body": "I will get the copy on docs during the exam. I cannot take material into the exam."}, {"owner": {"reputation": 606, "user_id": 3580789, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5b41bd2528cc72f32724ed4273babc33?s=128&d=identicon&r=PG&f=1", "display_name": "oglop", "link": "https://stackoverflow.com/users/3580789/oglop"}, "reply_to_user": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1542175237, "post_id": 53246922, "comment_id": 93469032, "body": "You should also be able to rebuilt the docs from sources because sphinx web contains it&#39;s sources in <code>_sources</code> eg: <a href=\"https://docs.python.org/3/_sources/\" rel=\"nofollow noreferrer\">docs.python.org/3/_sources</a>"}], "tags": [], "owner": {"reputation": 606, "user_id": 3580789, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5b41bd2528cc72f32724ed4273babc33?s=128&d=identicon&r=PG&f=1", "display_name": "oglop", "link": "https://stackoverflow.com/users/3580789/oglop"}, "is_accepted": false, "score": 0, "last_activity_date": 1541923914, "creation_date": 1541923914, "answer_id": 53246922, "question_id": 53246828, "link": "https://stackoverflow.com/questions/53246828/hacky-documentation-website-search-using-either-perl-or-python/53246922#53246922", "title": "Hacky documentation website search using either Perl or Python", "body": "<p>Why don't you build the docs yourself with sphinx?</p>\n\n<p>Just take python repo <a href=\"https://github.com/python/cpython/tree/master/Doc\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/tree/master/Doc</a> and run the sphinx, then you can also apply any theme you like: python-docs-theme, rtd-theme.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541926931, "post_id": 53247066, "comment_id": 93379260, "body": "Download option has been blocked. I can do wget and stuff no internet access and since the link you provided is hosted outside, I don&#39;t have access to it."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "reply_to_user": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541927720, "post_id": 53247066, "comment_id": 93379409, "body": "how can you &quot;do wget and stuff &quot; without internet access?"}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "reply_to_user": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541927739, "post_id": 53247066, "comment_id": 93379411, "body": "what does &quot;Download option has been blocked&quot; mean?"}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "reply_to_user": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541927856, "post_id": 53247066, "comment_id": 93379445, "body": "can you not just download the html docs then just upload the docs to the uni domain?"}, {"owner": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 0, "creation_date": 1541928034, "post_id": 53247066, "comment_id": 93379490, "body": "I am on some sort of a private network. So WGET works to pull the website hosted on the private uni server. But links pointing to external download sources are disabled(like download python docs link), I can only access links that point to locations within the docs."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "reply_to_user": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "edited": false, "score": 1, "creation_date": 1541928157, "post_id": 53247066, "comment_id": 93379526, "body": "You could learn a basic implementation of... <a href=\"http://www.zackgrossbart.com/hackito/search-engine-python/\" rel=\"nofollow noreferrer\">zackgrossbart.com/hackito/search-engine-python</a>"}], "tags": [], "owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1541925312, "creation_date": 1541925312, "answer_id": 53247066, "question_id": 53246828, "link": "https://stackoverflow.com/questions/53246828/hacky-documentation-website-search-using-either-perl-or-python/53247066#53247066", "title": "Hacky documentation website search using either Perl or Python", "body": "<p>I think the best way for you would be to download the docs for offline use;</p>\n\n<p><a href=\"https://docs.python.org/3.6/archives/python-3.6.7-docs-html.zip\" rel=\"nofollow noreferrer\">https://docs.python.org/3.6/archives/python-3.6.7-docs-html.zip</a></p>\n\n<p>You can then search the documentation offline aswell.</p>\n"}], "owner": {"reputation": 47, "user_id": 5509473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBLP7.jpg?s=128&g=1", "display_name": "cRAYonhere", "link": "https://stackoverflow.com/users/5509473/crayonhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542438226, "creation_date": 1541922910, "last_edit_date": 1542438226, "question_id": 53246828, "link": "https://stackoverflow.com/questions/53246828/hacky-documentation-website-search-using-either-perl-or-python", "title": "Hacky documentation website search using either Perl or Python", "body": "<p>I have a test coming up where we have been provided full access to perl5 and python3 documentation. The problem the search feature in these documentations have been disabled as I guess it uses the internet to get results.[Exam environment, the internet is disabled] </p>\n\n<p>I was hoping if I could write a hacky/ make-shift website documentation search to use during the exam.[I will learn and reproduce the code in exam and then use it NOT carry it on a device or something]</p>\n\n<p>All the resources available online either reference external libraries or implement sophisticated ranking searches. Which is not practical for my purpose.</p>\n\n<p>Details:</p>\n\n<ol>\n<li>The documentation is hosted on the university domain</li>\n<li>I have access to Perl5, Python3.6, python2.7, Vanilla JS</li>\n</ol>\n\n<p>Requirement:</p>\n\n<ol>\n<li>Search website for the keyword</li>\n<li>display links based on the frequency of the said keyword</li>\n</ol>\n\n<p>I would appreciate if you could point me to appropriate resources or give advice as to how to approach this. </p>\n\n<p><strong>EDIT 1:</strong>\nI am on some sort of a private network. So WGET works to pull the website but links pointing to external download sources are disabled, I can only access links that point to locations within the docs.</p>\n\n<p><strong>EDIT 2:</strong>\nI ended up using perldocs had a hard time looking for stuff but it was better than alternatives and best available. </p>\n"}, {"tags": ["perl", "output", "repeat"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541922874, "post_id": 53246765, "comment_id": 93378564, "body": "How many times does that last foreach loop run?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541923130, "post_id": 53246765, "comment_id": 93378604, "body": "When you supply <i>different</i> words your hash will have two keys (one for each <code>$sortWord</code>) and each key will have only one value in its arrayref. So both <code>if</code> and the first <code>elsif</code> are false; in the last <code>elsif</code> you end up matching that one word to itself but with spaces -- it fails.  So you wind up in the <code>else</code>, for both words."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541923557, "post_id": 53246765, "comment_id": 93378675, "body": "There is no &quot;FALSE&quot; or such value in Perl; if you want that you print it. (There are <code>0</code> and empty string <code>&#39;&#39;</code>  and <code>undef</code>. If you attempt to print a variable which is <code>undef</code> you&#39;ll get a warning.)  I don&#39;t see how a script would know what to print."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924037, "post_id": 53246765, "comment_id": 93378754, "body": "@zdim, thanks so much, that&#39;s exactly what I figured was happening. Any suggestions on how to get it to NOT happen? Like saying &quot;else { only look at one of the variables; print &quot;blah blah&quot;; }"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924137, "post_id": 53246765, "comment_id": 93378769, "body": "Oh, right: If the words are same or anagrams your hash will have one key, if they aren&#39;t it will have more than one key -- in which case you don&#39;t need this analysis.  So check that first."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924176, "post_id": 53246765, "comment_id": 93378775, "body": "@zdim, also, thanks so much for your comment on TRUE/FALSE ... I&#39;ve been trying to make the script return those values all day, with utter failure."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924395, "post_id": 53246765, "comment_id": 93378815, "body": "@zdim, so sorry, what do you mean by &quot;this analysis&quot;? If the user inputs two phrases that are anagrams, they need to be told &quot;TRUE, these are anagrams&quot; or whatever. This part of the script works fine, for the reasons you&#39;ve already pointed out. Thanks!!!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924514, "post_id": 53246765, "comment_id": 93378837, "body": "I mean, if the words are different and not anagrams your hash gets two keys, otherwise one.  So you first check whether the hash has more than one key and if it does you inform them that the words are not anagrams and exit.  Otherwise, the program proceeds to the &quot;analysis&quot; (I meant the loop over hash values)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924808, "post_id": 53246765, "comment_id": 93378897, "body": "Did that make sense?  So, <code>if (keys %anaHash &gt; 1) { say &quot;Not anagrams&quot;; exit };</code>  Then follows the code that iterates over hash values."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541924904, "post_id": 53246765, "comment_id": 93378912, "body": "The <code>say</code> is print with added newline.  You need <code>use feature qw(say)</code> at the beginning to enable it (not if you have <code>use v5.XX</code> larger than 5.10, or you use some modules that enable it)."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "edited": false, "score": 0, "creation_date": 1541925166, "post_id": 53246765, "comment_id": 93378963, "body": "@zim, awesome, awesome, thank you. I&#39;m so excited. I&#39;ll let you know the results!!!!!"}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541927786, "post_id": 53246765, "comment_id": 93379425, "body": "@zdim, thank you so much again. In the interest of helping the community, here is the re-written end of the script sans comments to stay within the character limits:  if (keys %anaHash &gt; 1) {     say &quot;\\n\\nFALSE: Your two terms are not acronyms.&quot;;     exit; }   foreach  $sortWords (values %anaHash) {      if (1 &lt; @$sortWords  &amp;&amp; \t@$sortWords[0] eq @$sortWords[1]) { \tsay &quot;\\n\\nFALSE: Your phrases are identical!\\n&quot;;     }      elsif (1 &lt; @$sortWords &amp;&amp; \t   @$sortWords[1] ne @$sortWords[0]) { \tsay &quot;\\n\\nTRUE: @$sortWords[0] and @$sortWords[1] are anagrams!&quot;;     } }"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542976039, "post_id": 53246765, "comment_id": 93766236, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=1225564\" rel=\"nofollow noreferrer\">PerlMonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "edited": false, "score": 0, "creation_date": 1541928244, "post_id": 53247159, "comment_id": 93379546, "body": "thank you so much; I think you&#39;re right. I do feel that &quot;yes&quot; and &quot;yes&quot; shouldn&#39;t be anagrams, but maybe I can check after the clean-up and before the split/join. I&#39;ll let you know how it went in the morning!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "edited": false, "score": 0, "creation_date": 1541928458, "post_id": 53247159, "comment_id": 93379593, "body": "@Rebecca: Good point. I suggest checking for identical strings after converting to lower case."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "edited": false, "score": 0, "creation_date": 1541928516, "post_id": 53247159, "comment_id": 93379607, "body": "Dave, also, this will make &quot;to, by&quot; match &quot;Toby&quot; which I don&#39;t think is fair, either. :) Still though, I think you&#39;re correct."}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "edited": false, "score": 0, "creation_date": 1541928615, "post_id": 53247159, "comment_id": 93379631, "body": "Sorry, babbling. All I need to do is add spaces after the [a-z]&#39;s."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1541927925, "last_edit_date": 1541927925, "creation_date": 1541926281, "answer_id": 53247159, "question_id": 53246765, "link": "https://stackoverflow.com/questions/53246765/perl-final-output-line-in-foreach-loop-prints-twice/53247159#53247159", "title": "Perl: Final Output Line in Foreach Loop Prints Twice", "body": "<p>It's useful to print out the contents of <code>%anaHash</code> after you've finished building it, but before you start examining it. Using the words \"foo\" and \"bar\", I get this result using <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a>.</p>\n\n<pre><code>$VAR1 = {\n          'abr' =&gt; [\n                     'bar'\n                   ],\n          'foo' =&gt; [\n                     'foo'\n                   ]\n        };\n</code></pre>\n\n<p>So the hash has two keys. And as you loop round all of the keys in the hash, you'll get the message twice (once for each key).</p>\n\n<p>I'm not really sure what the hash is for here. I don't think it's necessary. I think that you need to:</p>\n\n<ol>\n<li>Read in the two words</li>\n<li>Convert the words to a canonical format</li>\n<li>Check if the two strings are the same</li>\n</ol>\n\n<p>Simplified, your code would look like this:</p>\n\n<pre><code>print 'Give me a word: ';\nchomp(my $word1 = &lt;STDIN&gt;);\nprint 'Give me another word: ';\nchomp(my $word2 = &lt;STDIN&gt;);\n\n# convert to lower case\n$word1 = lc $word1;\n$word2 = lc $word2;\n\n# remove non-letters\n$word1 =~ s/[^a-z]//g;\n$word2 =~ s/[^a-z]//g;\n\n# sort letters\n$word1 = join '', sort split //, $word1;\n$word2 = join '', sort split //, $word2;\n\nif ($word1 eq $word2) {\n  # you have an anagram\n} else {\n  # you don't\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1541952378, "post_id": 53247706, "comment_id": 93385943, "body": "<code>$aWord =~ tr&#47;A-Z&#47;a-z&#47;</code> is a rather over-complicated way to write <code>lc $aWord</code> :-)"}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542040125, "post_id": 53247706, "comment_id": 93416621, "body": "I know. It&#39;s just a habit. :)"}, {"owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542040223, "post_id": 53247706, "comment_id": 93416687, "body": "I usually have long lists of s// and m// and I like seeing them all together. If that makes sense."}], "tags": [], "owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "is_accepted": false, "score": 0, "last_activity_date": 1541948358, "last_edit_date": 1541948358, "creation_date": 1541931228, "answer_id": 53247706, "question_id": 53246765, "link": "https://stackoverflow.com/questions/53246765/perl-final-output-line-in-foreach-loop-prints-twice/53247706#53247706", "title": "Perl: Final Output Line in Foreach Loop Prints Twice", "body": "<p>My final answer, thanks so much to Dave and @zdim! I'm so happy I could die.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse feature qw(say);\n\n#I have to use this to make STDIN work. IDK why.\n\n$|=1;\n\n#declare variables below\n\nprint \"First word?\\n\";\n\n$aWord = &lt;STDIN&gt;;\nchomp $aWord;\n\nprint \"Second word?\\n\";\n\n$bWord = &lt;STDIN&gt;;\nchomp $bWord;\n\n#clean up input\n$aWord =~ tr/A-Z/a-z/;\n$bWord =~ tr/A-Z/a-z/;\n$aWord =~  s/[^a-z ]//ig;\n$bWord =~  s/[^a-z ]//ig;\n\n#if the two inputs are identical, print FALSE and exit\nif ($aWord eq $bWord) {\n    say \"\\n\\nFALSE: Your phrases are identical!\\n\";\n    exit;\n}\n\n#split each word by character, sort characters alphabetically, join characters\n\n$aSortWord = join '', sort(split(//, $aWord));\n$bSortWord = join '', sort(split(//, $bWord));\n\n#if the sorted characters match, you have an anagram\n#if not, you don't\n\nif ($aSortWord eq $bSortWord) {\n  say \"\\n\\nTRUE: Your two terms are anagrams!\";\n}\nelse {\n    say \"\\n\\nFALSE: Your two terms are not acronyms.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10635273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9nSd3.jpg?s=128&g=1", "display_name": "ScarletRoxanne", "link": "https://stackoverflow.com/users/10635273/scarletroxanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 53247159, "answer_count": 2, "score": 1, "last_activity_date": 1541948358, "creation_date": 1541922123, "question_id": 53246765, "link": "https://stackoverflow.com/questions/53246765/perl-final-output-line-in-foreach-loop-prints-twice", "title": "Perl: Final Output Line in Foreach Loop Prints Twice", "body": "<p>I'm trying to write a very simple script that takes two words from STDIN and outputs TRUE if they're anagrams and FALSE if not. My main issue is that if the two words aren't anagrams (this is the final \"else\" statement in the script), the output looks like:</p>\n\n<p>Sorry, that's not an anagram pair\nSorry, that's not an anagram pair</p>\n\n<p>where I just want:</p>\n\n<p>Sorry, that's not an anagram pair</p>\n\n<p>Other, more minor issues for the especially generous:</p>\n\n<ul>\n<li>I know what the FALSE values are for Perl, but I can't get the script to print FALSE by, for example, setting a variable to '' or 0, etc. or saying \"return ''\". Ideally, I wouldn't have to put \"print TRUE/FALSE\" in the script at all.</li>\n<li>I put in the last elsif statement in the script to see if it would affect the printing twice problem. It didn't, and now I'm curious why my m// expression doesn't work. It's supposed to find pairs that are identical except that one has more whitespace than the other.</li>\n</ul>\n\n<p>Here's the script! I'm sorry it's so long - again, the problem is at the very end with the final \"else\" statement. Many thanks!!!</p>\n\n<pre><code>#To Run: Type start.pl on the command line.\n#The script should prompt you to enter a word or phrase.\n#Once you've done that, it'll prompt you for another one.\n#Then you will be told if the two terms are anagrams or not.\n\n#!/usr/bin/perl -w\nuse strict;\n\n#I have to use this to make STDIN work. IDK why.\n\n$|=1;\n\n#variables\n\nmy $aWord;\nmy $bWord;\nmy $word;\nmy $sortWord;\nmy $sortWords;\nmy @words;\nmy %anaHash;\n\nprint \"\\nReady to play the anagram game? Excellent.\\n\\nType your first word or phrase, then hit Enter.\\n\\n\";\n\n$aWord = &lt;STDIN&gt;;\nchomp $aWord;\n\nprint \"\\n\\nThanks! Now type your second word or phrase and hit Enter.\\n\\n\";\n\n$bWord = &lt;STDIN&gt;;\nchomp $bWord;\n\n#This foreach loop performs the following tasks:\n\n#1. Pushes the two words from STDIN into an array (unsure if this is really necessary)\n#2. lowercases everything and removes all characters except for letters &amp; spaces\n#3. splits both words into characters, sorts them alphabetically, then joins the sorted letters into a single \"word\"\n#4.pushes the array into a hash\n\n@words = ($bWord, $aWord);\nforeach $word (@words) {\n    $word =~ tr/A-Z/a-z/;\n    $word =~ s/[^a-z ]//ig;\n    $sortWord = join '', sort(split(//, $word));\n    push @{$anaHash{$sortWord}}, $word;\n}\n\n#This foreach loop tries to determine if the word pairs are anagrams or not.\n\nforeach  $sortWords (values %anaHash) {\n\n    #\"if you see the same word twice AND the input was two identical words:\"\n\n    if (1 &lt; @$sortWords  &amp;&amp;\n    @$sortWords[0] eq @$sortWords[1]) {\n    print \"\\n\\nFALSE: Your phrases are identical!\\n\\n\";\n    }\n\n    #\"if you see the same word twice AND the input was two different words (i.e. a real anagram):\"\n\n    elsif (1 &lt; @$sortWords &amp;&amp;\n       @$sortWords[0] ne @$sortWords[1]) {\n    print \"\\n\\nTRUE: @$sortWords[0] and @$sortWords[1] are anagrams!\\n\\n\";\n    }\n\n    #this is a failed attempt to identify pairs that are identical except one has extra spaces. Right now, this fails and falls into the \"else\" category below.\n\n    elsif  (@$sortWords[0] =~ m/ +@$sortWords[-1]/ ||\n        @$sortWords[-1] =~ m/ +@$sortWords[0]/) { \n    print \"\\n\\FALSE: @$sortWords[0] and @$sortWords[-1] are NOT anagrams. Spaces are characters, too!\\n\\n\";\n    }\n\n    #This is supposed to identify anything that's not an acronym. But the output prints twice! It's maddening!!!!\n    else {\n    print \"Sorry, that's not an anagram pair\\n\";    \n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "edited": false, "score": 0, "creation_date": 1541903934, "post_id": 53245380, "comment_id": 93375917, "body": "my code:@content = &lt;FILE&gt;;  foreach $line (@content){ \tif($line =~ /^#(\\d+)/){ \t\t$number = $1; \t\t$line =~ s/^#(\\d+)/$content[$number-1]/; \t} \tprint &quot;$line&quot;; }"}, {"owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "edited": false, "score": 0, "creation_date": 1541904192, "post_id": 53245380, "comment_id": 93375948, "body": "Idk why the output have extra white space"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541905462, "post_id": 53245380, "comment_id": 93376119, "body": "Please edit your question and enter text (for input, output, and code) instead of images.  If formatting is a problem there are detailed instructions on help pages (and I&#39;ll help now).  I took care of the code you showed in the comment."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541908192, "post_id": 53245380, "comment_id": 93376456, "body": "By extra whitespace, do you mean the newlines your substitution ends up doubling up?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1541914043, "post_id": 53245380, "comment_id": 93377187, "body": "Please don&#39;t post images of text. Why do people thing that&#39;s useful? Please edit your question and replace the images with actual text."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1541914821, "creation_date": 1541914821, "answer_id": 53246153, "question_id": 53245380, "link": "https://stackoverflow.com/questions/53245380/perl-why-it-has-a-extra-white-space-in-output/53246153#53246153", "title": "Perl, Why it has a extra white space in output", "body": "<p>Here's a version of your code with sample input data. If you want people to help you with problems like this, then it's a good idea to make it as easy as possible for them. Posting images of your input data does not make it easy. Also, it's a good development trick to store sample data in the <code>DATA</code> filehandle so that the code and data are together in the same file.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @content = &lt;DATA&gt;;\n\nforeach my $line (@content){\n    if($line =~ /^#(\\d+)/){\n        my $number = $1;\n        $line =~ s/^#(\\d+)/$content[$number-1]/;\n    }\n    print \"$line\";\n}\n\n__DATA__\nline A\nline B\nline C\n#7\nline D\n#2\nline E\n</code></pre>\n\n<p>I've also added <code>use strict</code> and <code>use warnings</code> to your code. In this case, they don't really help, but you should get into the habit of always including them in your Perl programs.</p>\n\n<p>Your problem is here:</p>\n\n<pre><code>$line =~ s/^#(\\d+)/$content[$number-1]/;\n</code></pre>\n\n<p>Each of the lines in your <code>@content</code> array will include a newline character at the end. But in this line you're replacing the <code>#</code> symbol and the following digit with a complete other line from the array. You're not replacing the original newline and you're adding another newline (from the replacement string) so the line ends up containing two newlines.</p>\n\n<p>The easiest fix is to add the newline to the pattern you are matching.</p>\n\n<pre><code>$line =~ s/^#(\\d+)\\n/$content[$number-1]/;\n</code></pre>\n\n<p>Note that an experienced Perl programmer would write your code like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @content = &lt;DATA&gt;;\n\nfor (@content){\n    s/^#(\\d+)\\n/$content[$1 - 1]/;\n    print;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 53246153, "answer_count": 1, "score": 0, "last_activity_date": 1578382597, "creation_date": 1541903923, "last_edit_date": 1578382597, "question_id": 53245380, "link": "https://stackoverflow.com/questions/53245380/perl-why-it-has-a-extra-white-space-in-output", "title": "Perl, Why it has a extra white space in output", "body": "<p>input:</p>\n\n<p><img src=\"https://i.stack.imgur.com/GSI9U.png\" alt=\"\"></p>\n\n<p>output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/bd0ry.png\" alt=\"\"></p>\n\n<p>but my out put have one extra white space on last two line.\nmy output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/S8EGI.png\" alt=\"\"></p>\n\n<p>my code:</p>\n\n<pre><code>@content = &lt;FILE&gt;; \n\nforeach $line (@content){ \n    if($line =~ /^#(\\d+)/){ \n        $number = $1; \n        $line =~ s/^#(\\d+)/$content[$number-1]/; \n    }\n    print \"$line\"; \n} \n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/aobPX.png\" alt=\"\"></p>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["c", "perl", "libraries", "xs"], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 605371, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f647420229636bb7c7e65f659b8d2b21?s=128&d=identicon&r=PG", "display_name": "Alberto", "link": "https://stackoverflow.com/users/605371/alberto"}, "edited": false, "score": 0, "creation_date": 1541860829, "post_id": 53239345, "comment_id": 93365873, "body": "Thanks. I noticed this entry in the DynaLoader doc, but it wasn&#39;t clear. Thank you!"}], "tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 4, "last_activity_date": 1541867587, "last_edit_date": 1541867587, "creation_date": 1541855958, "answer_id": 53239345, "question_id": 53238891, "link": "https://stackoverflow.com/questions/53238891/sharing-c-functions-between-two-xs-perl-modues/53239345#53239345", "title": "Sharing C functions between two XS Perl modues", "body": "<p>To make module A export its C symbols with <code>DynaLoader</code>, you have to add the following to <code>A.pm</code>:</p>\n\n<pre><code>sub dl_load_flags { 1 }\n</code></pre>\n\n<p>This is badly documented, unfortunately. See <a href=\"https://www.perlmonks.org/?node_id=691130\" rel=\"nofollow noreferrer\">this thread on PerlMonks</a> and the <a href=\"https://metacpan.org/source/XSAWYERX/perl-5.28.0/ext/DynaLoader/DynaLoader_pm.PL#L102\" rel=\"nofollow noreferrer\"><code>DynaLoader</code>source code</a> for more details. The effect of the flag is to set <code>RTLD_GLOBAL</code> when loading <code>A.so</code> with <a href=\"http://man7.org/linux/man-pages/man3/dlopen.3.html\" rel=\"nofollow noreferrer\"><code>dlopen</code></a> which makes its symbols available to other shared objects.</p>\n"}], "owner": {"reputation": 501, "user_id": 605371, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f647420229636bb7c7e65f659b8d2b21?s=128&d=identicon&r=PG", "display_name": "Alberto", "link": "https://stackoverflow.com/users/605371/alberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53239345, "answer_count": 1, "score": 2, "last_activity_date": 1541867587, "creation_date": 1541852443, "question_id": 53238891, "link": "https://stackoverflow.com/questions/53238891/sharing-c-functions-between-two-xs-perl-modues", "title": "Sharing C functions between two XS Perl modues", "body": "<p>I have a Perl module <code>A</code> that is a XS based module. I have an <code>A.xs</code> file, and an <code>aux_A.c</code> file, where I have some standard C functions. I use <code>DynaLoader</code>, and it works file.</p>\n\n<p>Now, I have a new module <code>B</code>, that is also a XS module. I also have the <code>B.xs</code> file, and the <code>aux_B.c</code> file. Now, I want that a standard C function defined in <code>aux_B.c</code> file to be able to use a function defined in <code>aux_A.c</code> file.</p>\n\n<p>One option is to make A module to create a standard C library, and link B module with it. But I was trying to get away from that option.</p>\n\n<p>Is there any other way to go?</p>\n\n<p>What I am currently getting is DynaLoader complaining on undefined symbol when trying to load the <code>B.so</code> library.</p>\n\n<p>Thanks\nAlberto</p>\n"}, {"tags": ["perl", "ftp", "net-ftp"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1541856001, "post_id": 53238575, "comment_id": 93364574, "body": "You might use the <code>Debug</code> option for <code>new</code> to see what it is actually doing. Maybe this will help to debug the problem."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1541856430, "post_id": 53238575, "comment_id": 93364681, "body": "@Steffen I used <code>my $f1 = Net::FTP::Recursive-&gt;new($host1, DEBUG =&gt; 1) or die &quot;Can&#39;t open \\$f1 $host1\\n&quot;;</code> and it gives no output. Do you have another debug option?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1541856920, "post_id": 53238575, "comment_id": 93364808, "body": "It is <code>Debug</code>, not <code>DEBUG</code>. See also the usage example in <a href=\"https://metacpan.org/pod/Net::FTP::Recursive\" rel=\"nofollow noreferrer\">the documentation</a>."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1541858371, "post_id": 53238575, "comment_id": 93365159, "body": "@Steffen Thanks, I added debug infos in my question."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1541859591, "post_id": 53238575, "comment_id": 93365527, "body": "Based on the debug output it looks like the server will not reply in time when doing a listing for <code>&#47;folder</code>. Given that it works for <code>&#47;folder&#47;subfolder1</code> it looks like a server side problem and not a problem of <code>Net::FTP::Recursive</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "is_accepted": false, "score": 0, "last_activity_date": 1542217382, "creation_date": 1542217382, "answer_id": 53305984, "question_id": 53238575, "link": "https://stackoverflow.com/questions/53238575/perl-netftprecursive-cant-download-folder-but-files-of-subfolders/53305984#53305984", "title": "Perl Net::FTP::Recursive: Can&#39;t download folder but files of subfolders", "body": "<p>To download the directories and files a tried the following workaround: using a loop over all subdirectory and appyling <code>rget</code>. It does the job I want. Nevertheless, the reason why <code>rget</code> does not work on the upper level is still not answered. At least now it is clear that it is not a permission probplem.</p>\n\n<pre><code># ftp-server directory\nmy $ftpdir = \"folder\";\n\n# Defie local download folder\nmy $download = \"C:/local\";\nchdir($download);       \n\n# Change to remote directory\n$f1-&gt;cwd($ftpdir) or die \"Can't cwd to $ftpdir\\n\", $f1-&gt;message;\n\n# grep all folder of top level\nmy @ftp_directories = $f1-&gt;ls;\n\n# remove . and ..\n@ftp_subdir = grep ! /^\\.+$/, @ftp_subdir;\n\nforeach my $sd (@ftp_subdir) {\n\n    # Make folder on local computer\n    my $localdir = catfile($download,$sd);\n    mkdir $localdir;\n\n    # Change local working directory\n    chdir $localdir;\n\n\n    # Change to remote sub directory to be downloaded\n    $f1-&gt;cwd($sd) or die \"Can't cwd to $sd\\n\";\n    }\n\n    # download files\n    $f1-&gt;rget();\n\n    # Change to upper level\n    $f1-&gt;cwd(\"..\");\n}  \n\n$f1-&gt;quit;\n</code></pre>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542217382, "creation_date": 1541850099, "last_edit_date": 1542100514, "question_id": 53238575, "link": "https://stackoverflow.com/questions/53238575/perl-netftprecursive-cant-download-folder-but-files-of-subfolders", "title": "Perl Net::FTP::Recursive: Can&#39;t download folder but files of subfolders", "body": "<p>I succeed to download files from a subfolder of the ftp-server. But if I want to download the folders from upper level it does not work.</p>\n\n<p>Here is the folder structure:</p>\n\n<ul>\n<li>folder         rwx r-x r-x\n\n<ul>\n<li>subfolder1   rwx r-x r-x\n\n<ul>\n<li>file1   rw- r-- r--</li>\n<li>file2    rw- r-- r--</li>\n</ul></li>\n<li>subfolder2   rxx r-x r-x\n\n<ul>\n<li>file3    rw- r-- r--</li>\n<li>file4    rw- r-- r--</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>If I use this:</p>\n\n<pre><code>$f1-&gt;cwd(\"/folder/subfolder1\");\n$f1-&gt;rget();\n$f1-&gt;quit;\n</code></pre>\n\n<p>the files file1 and file2 will be downloaded.</p>\n\n<p>If I use this:</p>\n\n<pre><code>$f1-&gt;cwd(\"/folder\");\n$f1-&gt;rget();\n$f1-&gt;quit;\n</code></pre>\n\n<p>nothing will be downloaded and the program finished due to timeout. I expected that it will download subfolder1 and subfolder2 and the content of the subfolders. Is there any explanation for this and how can I solve it in the way that I can download subfolder and files?</p>\n\n<p>A detailled description of the code is <a href=\"https://stackoverflow.com/questions/53230107/cant-call-method-filename-without-a-package-or-object-reference\">here</a></p>\n\n<p><strong>UPDATE 1:</strong> Debugging   </p>\n\n<p>Debugging with</p>\n\n<pre><code>my $f1 = Net::FTP::Recursive-&gt;new($host1, Debug =&gt; 1) or die \"Can't open $host1\\n\";\n</code></pre>\n\n<p>gives the following:</p>\n\n<pre><code>Net::FTP::Recursive=GLOB(0x312bf50)&gt;&gt;&gt; CWD /folder\nNet::FTP::Recursive=GLOB(0x312bf50)&lt;&lt;&lt; 250 CWD command successful\nNet::FTP::Recursive=GLOB(0x312bf50)&gt;&gt;&gt; PWD\nNet::FTP::Recursive=GLOB(0x312bf50)&lt;&lt;&lt; 257 \"/folder\" is the current directory\nNet::FTP::Recursive=GLOB(0x312bf50)&gt;&gt;&gt; PASV\nNet::FTP::Recursive=GLOB(0x312bf50)&lt;&lt;&lt; 227 Entering Passive Mode (188,40,220,103,255,187).\nNet::FTP::Recursive=GLOB(0x312bf50)&gt;&gt;&gt; LIST\nNet::FTP::Recursive=GLOB(0x312bf50)&lt;&lt;&lt; 150 Opening BINARY mode data connection for file list\nTimeout at C:/Strawberry/perl/lib/Net/FTP.pm line 1107.\n</code></pre>\n\n<p><strong>UPDATE 2:</strong> Timeout at C:/Strawberry/perl/lib/Net/FTP.pm line 1107.</p>\n\n<p><code>_list_cmd</code> is the function of the line mentioned in the debug output. I also add the lines where <code>_list_cmd</code>is used and wrapped lines to make it more readible conserving line numbers.</p>\n\n<pre><code> 671 # Try to delete the contents\n 672 # Get a list of all the files in the directory, excluding \n      #     the current and parent directories \n 673 my @filelist = map { /^(?:\\S+;)+ (.+)$/ ? ($1) : () } \n          grep { !/^(?:\\S+;)*type=[cp]dir;/i } $ftp-&gt;_list_cmd(\"MLSD\", $dir);\n\n 925 sub ls  { shift-&gt;_list_cmd(\"NLST\", @_); }\n 925 sub dir { shift-&gt;_list_cmd(\"LIST\", @_); }\n\n\n1087 sub _list_cmd {\n1088   my $ftp = shift;\n1089   my $cmd = uc shift;\n1090 \n1091   delete ${*$ftp}{'net_ftp_port'};\n1092   delete ${*$ftp}{'net_ftp_pasv'};\n1093 \n1094   my $data = $ftp-&gt;_data_cmd($cmd, @_);\n1095 \n1096   return\n1097     unless (defined $data);\n1098 \n1099   require Net::FTP::A;\n1100   bless $data, \"Net::FTP::A\";    # Force ASCII mode\n1101 \n1102   my $databuf = '';\n1103   my $buf     = '';\n1104   my $blksize = ${*$ftp}{'net_ftp_blksize'};\n1105 \n1106   while ($data-&gt;read($databuf, $blksize)) {\n1107     $buf .= $databuf;\n1108   }\n1109 \n1110   my $list = [split(/\\n/, $buf)];\n1111 \n1112   $data-&gt;close();\n1114   if (EBCDIC) {\n1115     for (@$list) { $_ = $ftp-&gt;toebcdic($_) }\n1116   }\n1117 \n1118   wantarray\n1119     ? @{$list}\n1120     : $list;\n1121 }\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541840126, "post_id": 53237394, "comment_id": 93360907, "body": "You are trying to use <i>symbolic reference</i>, to create variable names dynamically; it&#39;s only trouble and (almost) never necessary.  Why not simply put references to those hashes in an array?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541840174, "post_id": 53237394, "comment_id": 93360914, "body": "The hash is made with key of the first element (<code>$d[0]</code>) and value of ... the eight-th (<code>$d[7]</code>) -- is that intended?"}, {"owner": {"reputation": 15, "user_id": 10374589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea4c8e64d36da136697f13ea83d741?s=128&d=identicon&r=PG&f=1", "display_name": "SangramJB", "link": "https://stackoverflow.com/users/10374589/sangramjb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541840599, "post_id": 53237394, "comment_id": 93360987, "body": "@zdim...yes, correctly understood. Each line has 10 columns, but i need to form the hash out of column 1 (key) and column 7 (value)....yes that symbolic reference aspect did come, but i wasn&#39;t sure how to apply it here... :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541840800, "post_id": 53237394, "comment_id": 93361020, "body": "OK, thank you. The symbolic reference business -- you don&#39;t want it. Just don&#39;t do it.  Now, your explanation says that &quot;<i>contents of the first column from all files (sorted n uniq-ed) is reference value</i>&quot; -- how is that? The &quot;<i>first column</i>&quot; from all files is a long list of values, how is that a reference?  Can you show a sample?"}, {"owner": {"reputation": 15, "user_id": 10374589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea4c8e64d36da136697f13ea83d741?s=128&d=identicon&r=PG&f=1", "display_name": "SangramJB", "link": "https://stackoverflow.com/users/10374589/sangramjb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541841384, "post_id": 53237394, "comment_id": 93361131, "body": "OK...now i have files like : exp1.txt, exp2.txt, exp3.txt so on. To collect and create a list of all reference values I do this : <code>cut -f 1 *.txt | sort | uniq &gt; ref_list.txt</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541842459, "post_id": 53237394, "comment_id": 93361340, "body": "Thank you -- I am still not sure that I understand, but see my answer. Should be easy to adjust to precisely how that reference file is used."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541843577, "post_id": 53237394, "comment_id": 93361615, "body": "So that explanation in the beginning (which I quoted above) is about the reference file, while the data files simply form <code>col1 =&gt; col7</code> hash? And then you want to print all those <code>col7</code> for keys from the reference file? If that is so my answer should work directly, otherwise tweak how the reference file is used."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541842936, "post_id": 53237651, "comment_id": 93361456, "body": "@SangramJB Edited code (it was splitting on any space, from my tests, now it uses tab), and added some notes."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1541918301, "last_edit_date": 1541918301, "creation_date": 1541842415, "answer_id": 53237651, "question_id": 53237394, "link": "https://stackoverflow.com/questions/53237394/creating-multiple-hashes-from-multiple-files-in-one-go/53237651#53237651", "title": "Creating multiple hashes from multiple files in one go", "body": "<p>The shown code attempts to use <em>symbolic references</em> to construct variable names at runtime. Those things can raise a lot of trouble and should not be used, except very occasionally in very specialized code. </p>\n\n<p>Here is a way to read multiple files, each into a hash, and store them for later processing.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Data::Dump qw(dd);\n\nmy @files = @ARGV;\n\nmy @data;\nfor my $file (@files) {\n    open my $fh, '&lt;', $file  or do {\n        warn \"Skip $file, can't open it: $!\";\n        next;\n    };\n    push @data, { map { (split /\\t/, $_)[0,6] } &lt;$fh&gt; };\n}\n\ndd \\@data;\n</code></pre>\n\n<p>Each hash associates the first column with the seventh (index 6), as clarified, for each line. A reference to such a hash for each file, formed by <code>{ }</code>, is added to the array. </p>\n\n<p>Note that when you add a key-value pair to a hash which already has that key the new overwrites the old. So if a string repeats in the first column in a file, the hash for that file will end up with the value (column 7) for the last one. The OP doesn't discuss possible duplicates of this kind in data files (only for the reference file), please clarify if needed.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> is used only to print; if you don't wish to install it use core <code>Data::Dumper</code>.</p>\n\n<p>I am not sure that I get the use of that \"reference file\", but you can now go through the array of hash references for each file and fetch values as needed.  Perhaps like</p>\n\n<pre><code>open my $fh_ref, '&lt;', $ref_file or die \"Can't open $ref_file: $!\";\n\nwhile (my $line = &lt;$fh_ref&gt;) {\n\n    my $key = ...   # retrieve the key from $line\n    print \"$key: \";\n\n    foreach my $hr (@data) {\n        print \"$hr-&gt;{$key} \";\n    }\n    say '';\n}\n</code></pre>\n\n<p>This will print <code>key:</code> followed by values for that string, one from each file.</p>\n"}], "owner": {"reputation": 15, "user_id": 10374589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea4c8e64d36da136697f13ea83d741?s=128&d=identicon&r=PG&f=1", "display_name": "SangramJB", "link": "https://stackoverflow.com/users/10374589/sangramjb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541918301, "creation_date": 1541839749, "last_edit_date": 1541840681, "question_id": 53237394, "link": "https://stackoverflow.com/questions/53237394/creating-multiple-hashes-from-multiple-files-in-one-go", "title": "Creating multiple hashes from multiple files in one go", "body": "<p>I want to perform a vlookup like process but with multiple files wherein the contents of the first column from all files (sorted n uniq-ed) is reference value. Now I would like to store these key-values pairs from each file in each hash and then print them together. Something like this:</p>\n\n<p>file1: while(){$hash1{$key}=$val}...file2: while(){$hash2{$key}=$val}...file3: while(){$hash3{$key}=$val}...so on</p>\n\n<p>Then print it: print \"$ref_val      $hash1{$ref_val}       $hash3{$ref_val}                  $hash3{$ref_val}...\" </p>\n\n<pre><code>$i=1;\n@FILES = @ARGV;\nforeach $file(@FILES)\n{\nopen($fh,$file);\n$hname=\"hash\".$i; ##trying to create unique hash by attaching a running number to hash name\nwhile(&lt;$fh&gt;){@d=split(\"\\t\");$hname{$d[0]}=$d[7];}$i++;\n}\n$set=$i-1;       ##store this number for recreating the hash names during printing\n\nopen(FH,\"ref_list.txt\");\nwhile(&lt;FH&gt;)\n{\nchomp();print \"$_\\t\";\n## here i run the loop recreating the hash names and printing its corresponding value\nfor($i=1;$i&lt;=$set;$i++){$hname=\"hash\".$i; print \"$hname{$_}\\t\";}\nprint \"\\n\";\n}\n</code></pre>\n\n<p>Now this where I am stuck perl takes $hname as hash name instead of $hash1, $hash2...</p>\n\n<p>Thanks in advance for the helps and opinions</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837286, "post_id": 53237102, "comment_id": 93360363, "body": "Could you show what you mean by &quot;every possible match&quot;?"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837339, "post_id": 53237102, "comment_id": 93360374, "body": "e.g   1st match  = start F F Q Q E R Q Q stop"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837388, "post_id": 53237102, "comment_id": 93360379, "body": "2nd = start F F Q Q E R Q Q stop R Q R R H A G C R H W Y G C E R R Q R Q H V F R R A G S S A N A T A A A E Q H R L L R S G Q V R Y P F stop  etc..   (sorry hit return by accident thats why 2 coments)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837410, "post_id": 53237102, "comment_id": 93360383, "body": "It&#39;s best if you edit your full expected output into the answer. Perhaps using a shorter string."}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837465, "post_id": 53237102, "comment_id": 93360395, "body": "Im just thinking now I need to replace the first shortest substring and omit the stop don&#39;t I before looping again?"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837489, "post_id": 53237102, "comment_id": 93360402, "body": "okay I will do that. 1 moment please"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541837498, "post_id": 53237102, "comment_id": 93360404, "body": "I get what you want from your sample, with your code. Perhaps something is different in your real program?"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541837754, "post_id": 53237102, "comment_id": 93360458, "body": "No I need to create an array of every possible match to perform some processing on each match later in the program. Its a bioinformatics project, I am searching for open reading frames in a translated dna strand"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1541837833, "post_id": 53237102, "comment_id": 93360477, "body": "@PhilipButler Have you looked for an existing bioinformatics library that might do this?"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541837915, "post_id": 53237102, "comment_id": 93360498, "body": "Schwern, they do exist however I havn&#39;t been able to find one in Perl that allows me to look at the code. I was hoping to use regex to solve this but I may need to resort to searching the string manually char by char"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541837980, "post_id": 53237102, "comment_id": 93360505, "body": "(1) Is it always the same between A&#39;s (all B&#39;s in this case), or can there be different things in between? (2) There is no closing A in your example -- does there have to be one, or not?"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541838063, "post_id": 53237102, "comment_id": 93360522, "body": "@zdim, there will be one or many As and one or many Bs with a range of non A,B chars of any length in between a given A and B"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541838108, "post_id": 53237102, "comment_id": 93360528, "body": "the periods are just used for demonstrative purposes above"}, {"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541838171, "post_id": 53237102, "comment_id": 93360544, "body": "i.e A is the beginning marker for a sub-string and B is the end marker"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541838248, "post_id": 53237102, "comment_id": 93360557, "body": "Ah, now the  problem makes sense. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541839053, "post_id": 53237301, "comment_id": 93360690, "body": "Super answer. very concise, exactly what I need"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 1, "creation_date": 1541839149, "post_id": 53237301, "comment_id": 93360711, "body": "@PhilipButler Great :)  Let me know if testing with real data shows problems, or if other questions pop up"}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1541896316, "post_id": 53237301, "comment_id": 93374799, "body": "I learned something new with <code>my @seqs = split &#47;(B)&#47;, $1; </code> - didn&#39;t know about capturing the delimiter before."}, {"owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1541897008, "post_id": 53237301, "comment_id": 93374899, "body": "To skip the redundant non-B-ending lines you can do <code>say @seqs[0..$i] if ($seqs[$i] eq &#39;B&#39;);</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "edited": false, "score": 0, "creation_date": 1541905153, "post_id": 53237301, "comment_id": 93376077, "body": "@Automaton  Thank you, fixed. I didn&#39;t pay close enough attention to what should be extracted.  I use the (even) number of elements rather than testing against <code>B</code> so that it doesn&#39;t involve the actual separator."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "edited": false, "score": 0, "creation_date": 1541905999, "post_id": 53237301, "comment_id": 93376211, "body": "@PhilipButler  Fixed the printing statement to drop the redundant elements, what I missed. Now it extracts (and prints) what is shown in the question."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1541905061, "last_edit_date": 1541905061, "creation_date": 1541838734, "answer_id": 53237301, "question_id": 53237102, "link": "https://stackoverflow.com/questions/53237102/perl-regex-find-and-return-every-possible-match/53237301#53237301", "title": "Perl Regex Find and Return Every Possible Match", "body": "<p>There are various ways to parse the string so to scoop up what you want.</p>\n\n<p>For example, use regex to step through all <code>A...A</code> substrings and process each capture</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $s = \"A.....B.....B......B......B......B\";\n\nwhile ($s =~ m/(A.*)(?=A|$)/gi) {\n    my @seqs = split /(B)/, $1; \n    for my $i (0..$#seqs) {\n        say @seqs[0..$i] if $i % 2 != 0;\n    }   \n}\n</code></pre>\n\n<p>The <code>(?=A|$)</code> is a lookahead, so <code>.*</code> matches everything up to an <code>A</code> (or the end of string) but that <code>A</code> is not consumed and so is there for the next match. The <code>split</code> uses <code>()</code> in the separator pattern so that the separator, too, is returned (so we have all those B's).  It only prints for an even number of elements, so only substrings ending with the separator (<code>B</code> here).</p>\n\n<p>The above prints</p>\n\n<pre>\nA.....B\nA.....B.....B\nA.....B.....B......B\nA.....B.....B......B......B\nA.....B.....B......B......B......B\n</pre>\n\n<p>There may be bioinformatics modules that do this but I am not familiar with them.</p>\n"}], "owner": {"reputation": 409, "user_id": 9494364, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jIZJbP_46ak/AAAAAAAAAAI/AAAAAAAAAAA/9p9XZoFOa8c/photo.jpg?sz=128", "display_name": "Philip Butler", "link": "https://stackoverflow.com/users/9494364/philip-butler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 53237301, "answer_count": 1, "score": 2, "last_activity_date": 1541905061, "creation_date": 1541836916, "last_edit_date": 1541838687, "question_id": 53237102, "link": "https://stackoverflow.com/questions/53237102/perl-regex-find-and-return-every-possible-match", "title": "Perl Regex Find and Return Every Possible Match", "body": "<p>Im trying to create a while loop that will find every possible sub-string within a string. But so far all I can match is the largest instance or the shortest. So for example I have the string</p>\n\n<p><em>EDIT CHANGE STRING FOR DEMO PURPOSES</em></p>\n\n<pre><code>\"A.....B.....B......B......B......B\"\n</code></pre>\n\n<p>And I want to find every possible sequence of \"A.......B\"</p>\n\n<p>This code will give me the shortest possible return and exit the while loop</p>\n\n<pre><code>while($string =~ m/(A(.*?)B)/gi) {\n    print \"found\\n\";\n    my $substr = $1;\n    print $substr.\"\\n\";\n}\n</code></pre>\n\n<p>And this will give me the longest and exit the while loop.</p>\n\n<pre><code>$string =~ m/(A(.*)B)/gi\n</code></pre>\n\n<p>But I want it to loop through the string returning every possible match. Does anyone know if Perl allows for this?</p>\n\n<p><em>EDIT ADDED DESIRED OUTPUT BELOW</em></p>\n\n<pre><code>found\nA.....B\nfound\nA.....B.....B\nfound\nA.....B.....B......B\nfound\nA.....B.....B......B......B\nfound\nA.....B.....B......B......B......B\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541837610, "post_id": 53236211, "comment_id": 93360432, "body": "You say &quot;integer&quot; but give <code>$14.00</code> example? If you really mean to round prices to 0 cents you need to modify @ikegami solution, perhaps by adding an optional dollar match <code>(\\$?)</code> and then in the replacement have two cases, <code>s&#47;..&#47;$1 ? to-zero-cents : to-int&#47;ge</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541837695, "post_id": 53236211, "comment_id": 93360446, "body": "A clumsy way to do the &quot;zero-cents&quot; above is to nest <code>sprintf</code>&#39;s, one for rounding the other for precision: <code>s&#47;(\\$?)(\\d+\\.\\d+)&#47;$1 ? $1.sprintf(&quot;%.2f&quot;,sprintf &quot;%.0f&quot;, $2) : sprintf(&quot;%.0f&quot;,$2)&#47;ge</code>.  There are other ways."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1541828340, "creation_date": 1541828340, "answer_id": 53236294, "question_id": 53236211, "link": "https://stackoverflow.com/questions/53236211/perl-regex-convert-multiple-decimal-numbers-on-a-line-to-nearest-integer/53236294#53236294", "title": "perl regex - convert multiple decimal numbers on a line to nearest integer", "body": "<p>Use <code>s///e</code> to put code as the replacement expression. The code is expected to return the value to use as the replacement.</p>\n\n<pre><code> s/(\\d+\\.\\d+)/ sprintf(\"%.0f\", $1) /eg\n</code></pre>\n\n<p>(Feel free to use Math::Round's <code>round</code> if you wish. I just used that with which I am familiar.)</p>\n"}], "owner": {"reputation": 1905, "user_id": 8713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed61e21ec072346277da9569f1c9f966?s=128&d=identicon&r=PG&f=1", "display_name": "ceno980", "link": "https://stackoverflow.com/users/8713450/ceno980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "accepted_answer_id": 53236294, "answer_count": 1, "score": 1, "last_activity_date": 1541828340, "creation_date": 1541827251, "question_id": 53236211, "link": "https://stackoverflow.com/questions/53236211/perl-regex-convert-multiple-decimal-numbers-on-a-line-to-nearest-integer", "title": "perl regex - convert multiple decimal numbers on a line to nearest integer", "body": "<p>I am practicing a Perl regex question where I have lines in the following format that are read in from stdin:</p>\n\n<p>I bought 2.3kg of oranges for $13.50.</p>\n\n<p>It takes 4.5 hours to get from the city to the sea.</p>\n\n<p>She moved in 2010, and left in 2014.</p>\n\n<p>And I have to convert all the decimal numbers in each line to their nearest integer. So the expected output would look like:</p>\n\n<p>I bought 2kg of oranges for $14.00.</p>\n\n<p>It takes 5 hours to get from the city to the sea.</p>\n\n<p>She moved in 2010, and left in 2014.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Math::Round;\n\nmy @lines = &lt;STDIN&gt;; \nchomp @lines;\n\nforeach my $line (@lines) {\n    $line =~ s/(\\d+\\.?\\d*)/hello/g;\n}\n</code></pre>\n\n<p>The part which I am not sure how to do is actually replace the decimal numbers in each line with their integer version. My approach is to read all the lines from stdin into an array, and then for each match on each line substitute the decimal number with its nearest whole number. I know you can round floating point numbers in Perl using the round() function.</p>\n\n<p>However, using the round() function as the replacement text within the 's/(\\d+.?\\d*)//g' would not work. Using the substitution operator seemed to be the simplest approach, but I don't think I will be able to use it.\nI am not exactly sure what other methods I could use to solve this problem. Any insights would be really appreciated.</p>\n"}, {"tags": ["perl", "unit-testing", "testing"], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1541826276, "post_id": 53235845, "comment_id": 93358749, "body": "this is perfect, I submitted an edit to add &amp;{} for the goto. I also added code to set/increate tests by 2 as use_ok and critic_ok are 2 tests already. I have not figured out how to make that nicer, can&#39;t seem to find a way to convert array to hash in-line without a variable. Feel free to prettify that part :-)) Thanks!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1541826842, "post_id": 53235845, "comment_id": 93358820, "body": "@lukash I simplified the <code>tests + 2</code> logic. Why add <code>&amp;{ }</code>?"}, {"owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1541828188, "post_id": 53235845, "comment_id": 93358976, "body": "<code>&amp;{ }</code> was added because without it I get <code>Bareword found where operator expected at ... line .., near &quot;goto Test::More&quot; (Do you need to predeclare goto?)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541829321, "post_id": 53235845, "comment_id": 93359121, "body": "@melpomene, I agree with lukash. I tested your code with 5.10 to 5.28, and none worked. You need <code>goto &amp;{ Test::More-&gt;can(&#39;import&#39;) }</code> or <code>goto(Test::More-&gt;can(&#39;import&#39;))</code> for your code to compile."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1541829695, "post_id": 53235845, "comment_id": 93359155, "body": "@lukash Should be fixed now. Took me a while to get the prerequisites installed to actually test this code."}, {"owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1541919844, "post_id": 53235845, "comment_id": 93378065, "body": "@melpomene didn&#39;t know I could use the <code>+</code>, looks nicer than <code>&amp;{ }</code>. Appreciate the effort."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1541829667, "last_edit_date": 1541829667, "creation_date": 1541821680, "answer_id": 53235845, "question_id": 53235746, "link": "https://stackoverflow.com/questions/53235746/perl-tests-common-parent-for-tests/53235845#53235845", "title": "Perl tests - common parent for tests", "body": "<p>Sounds like you just want a helper module that loads some other modules and runs some initial tests for you.</p>\n\n<p>Something like:</p>\n\n<pre><code># ParentTest.pm\npackage ParentTest;\nuse strict;\nuse warnings;\n\nuse Test::Perl::Critic (-severity =&gt; 3);\nuse Module::Path 'module_path';\nuse Test::More;\nuse Test::Log4perl;\n\nsub import {\n    my (undef, $module, %args) = @_;\n\n    $args{tests} += 2;\n\n    plan %args;\n    Test::Log4perl-&gt;suppress_logging;\n    use_ok $module;\n    critic_ok module_path $module;\n\n    @_ = 'Test::More';\n    goto +Test::More-&gt;can('import');\n}\n\n1\n</code></pre>\n\n<p>Usage would be:</p>\n\n<pre><code>use ParentTest \"My::Module\", tests =&gt; 6;\n</code></pre>\n\n<p>This is all untested, but the idea is:</p>\n\n<ul>\n<li>We want to run some code to set up the initial test plan and run some tests.</li>\n<li>We also want to export everything that <code>Test::More</code> exports, so our caller doesn't have to <code>use Test::More</code> themselves.</li>\n<li><code>use Some::Module @args</code> is equivalent to <code>BEGIN { require \"Some/Module.pm\"; Some::Module-&gt;import(@args); }</code>, so we can just put our custom logic in the <code>import</code> method.</li>\n<li>We start by ignoring the first argument (which is a class name because <code>import</code> is called as a class method) and assigning the remaining arguments to <code>$module</code> and <code>%args</code>.</li>\n<li>We increment <code>$args{tests}</code> by 2 to account for the two extra tests we perform automatically (if <code>tests</code> wasn't passed in, it is implicitly created here).</li>\n<li>We pass <code>%args</code> to <a href=\"https://perldoc.pl/Test::More#I-love-it-when-a-plan-comes-together\" rel=\"nofollow noreferrer\"><code>plan</code> from <code>Test::More</code></a>, which is nice for setting up a test plan outside of the initial <code>use</code> line.</li>\n<li>We perform the initial tests.</li>\n<li>We tail call <code>Test::More::import</code>, erasing our own stack frame. This makes it look like our caller did <code>Test::More-&gt;import()</code>, which exports all the <code>Test::More</code> utility functions to them.</li>\n<li>The unary <code>+</code> in <code>goto +Test::More-&gt;...</code> has no real effect, but it helps distinguish between the <code>goto LABEL</code> and <code>goto EXPRESSION</code> syntactic forms. We want the latter interpretation.</li>\n</ul>\n"}], "owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 53235845, "answer_count": 1, "score": 1, "last_activity_date": 1541829667, "creation_date": 1541820048, "question_id": 53235746, "link": "https://stackoverflow.com/questions/53235746/perl-tests-common-parent-for-tests", "title": "Perl tests - common parent for tests", "body": "<p>I have a set of tests, always named <code>Module.t</code>, each one starts like this:</p>\n\n<pre><code>use 5.026;\nuse strict;\nuse warnings;\n\nuse Test::Perl::Critic (-severity =&gt; 3);\nuse Module::Path 'module_path';\nuse Test::More tests =&gt; 8;\nuse Test::Log4perl;\nTest::Log4perl-&gt;suppress_logging;\n\nBEGIN { use_ok(\"My::Module\") }\ncritic_ok(module_path(\"My::Module\"));\n\n... actual tests for this module ...\n</code></pre>\n\n<p>It's done this way because a bunch of modules are not coded very nicely and in effort to refactor stuff as we go, I'm trying to write tests for individual modules over time. Eg. I can't just enable Perl::Critic for all sources cause it will blow up in my face.</p>\n\n<p>I would like to ideally make a \"parent\" test for all of these so that when me or a different developer wants to write a new test they will always have all the required stuff. Something like:</p>\n\n<pre><code>use 5.026;\nuse strict;\nuse warnings;\n\n# 6 tests because 2 (use_ok and critic_ok) are already in the parent\nuse parent ParentTest(\"My::Module\", tests =&gt; 6);\n\n... actual tests for this module ...\n</code></pre>\n\n<p>Does perl have a way of doing that?</p>\n\n<p>Disclaimer: I'm a perl noob, so maybe this has a better solution :-)    </p>\n"}, {"tags": ["perl", "for-loop"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1541805822, "post_id": 53234488, "comment_id": 93355701, "body": "Use <code>;</code> instead of <code>,</code>"}], "answers": [{"comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1541805863, "post_id": 53234508, "comment_id": 93355712, "body": "Typically we don&#39;t answer typo questions. Comment instead and vote for closing because of a typo."}, {"owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1541805903, "post_id": 53234508, "comment_id": 93355719, "body": "@ThomasWeller Got it, thanks for the heads up."}], "tags": [], "owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "is_accepted": false, "score": 1, "last_activity_date": 1541805818, "creation_date": 1541805818, "answer_id": 53234508, "question_id": 53234488, "link": "https://stackoverflow.com/questions/53234488/how-do-you-make-a-for-loop-increment-by-1-each-time/53234508#53234508", "title": "How do you make a for loop increment by 1 each time", "body": "<p>Perl uses semicolons to delimit arguments for a for loop.</p>\n\n<p>Try this:</p>\n\n<pre><code>my $i = 0;\nfor ($i = 4; $i &lt; 11; $i++) {\n    print \"$i\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541806579, "post_id": 53234588, "comment_id": 93355881, "body": "This is probably way too much detail for the OP, which buries the lede:  <code>for my $i (4 .. 10) { }</code> is much simpler and cleaner."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1541806891, "last_edit_date": 1541806891, "creation_date": 1541806360, "answer_id": 53234588, "question_id": 53234488, "link": "https://stackoverflow.com/questions/53234488/how-do-you-make-a-for-loop-increment-by-1-each-time/53234588#53234588", "title": "How do you make a for loop increment by 1 each time", "body": "<p>Perl has two types of <code>for</code> loop, the <a href=\"https://perldoc.pl/perlsyn#For-Loops\" rel=\"nofollow noreferrer\">classic C style version</a> (<code>for (INIT; COND; STEP)</code>) and the <a href=\"https://perldoc.pl/perlsyn#Foreach-Loops\" rel=\"nofollow noreferrer\">list iteration version</a> (<code>for VAR (LIST)</code>).</p>\n\n<p>You were trying to use the first form, but your code doesn't contain <code>;</code>, so Perl parses it as the second form; i.e. it's trying to iterate over the elements of the list <code>$i = 4, $i &lt; 11, $i++</code>, which evaluates to <code>4, 1, 4</code> and sets <code>$i</code> to <code>5</code>.</p>\n\n<p>In detail: <code>$i = 4</code> evaluates to <code>4</code> and sets <code>$i</code> to <code>4</code> as a side effect. <code>$i &lt; 11</code> compares the value of <code>$i</code> (currently <code>4</code>) to <code>11</code>, which evaluates to <code>1</code> (true). <code>$i++</code> evaluates the the current value of <code>$i</code> (<code>4</code>) and increments <code>$i</code> as a side effect, setting it to <code>5</code>.</p>\n\n<p>You didn't specify a loop variable, so Perl uses <code>$_</code> by default.</p>\n\n<p>However, your loop body doesn't use <code>$_</code> at all and just prints the final value of <code>$i</code> in each iteration, which is <code>5</code>. You can see a bit better what's going on if you print <code>$_</code> instead:</p>\n\n<pre><code>for ($i = 4, $i &lt; 11, $i++) {\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4\n1\n4\n</code></pre>\n\n<p>To get the results you want, either write <code>for ($i = 4; $i &lt; 11; $i++)</code> or convert fully to the list iteration variant:</p>\n\n<pre><code>for my $i (4 .. 10) {\n    print \"$i\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9104209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LKOnSpkma8A/AAAAAAAAAAI/AAAAAAAAAbE/bDMVpxI6q3s/photo.jpg?sz=128", "display_name": "Chris Kiihne", "link": "https://stackoverflow.com/users/9104209/chris-kiihne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "closed_date": 1541806839, "answer_count": 2, "score": 0, "last_activity_date": 1541806891, "creation_date": 1541805660, "last_edit_date": 1541806481, "question_id": 53234488, "link": "https://stackoverflow.com/questions/53234488/how-do-you-make-a-for-loop-increment-by-1-each-time", "closed_reason": "Not suitable for this site", "title": "How do you make a for loop increment by 1 each time", "body": "<p>I have a Perl loop</p>\n\n<pre><code>my $i = 0;\n    for ($i = 4, $i &lt; 11, $i++) {\n        print \"$i\\n\";\n    }\n</code></pre>\n\n<p>and I don't know why but instead of printing out\n4\n5\n6 \n7\n8\n9\n10 \nall on separate lines to my console it just prints out 5 5 5 and then terminates</p>\n"}, {"tags": ["python", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541805490, "post_id": 53234447, "comment_id": 93355623, "body": "Honestly even with the example of what your aiming to get your question doesnt make much sense."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541805601, "post_id": 53234447, "comment_id": 93355644, "body": "&quot;ALPHA with a long number increment by 100&quot; but you dont &#39;increment&#39; in your example you are adding 2 zeros a random number."}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "reply_to_user": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541805692, "post_id": 53234447, "comment_id": 93355663, "body": "If the description is confusing, I do apologise. I provided an end result to see where I am trying to get."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541805789, "post_id": 53234447, "comment_id": 93355692, "body": "You want to replace &#39;ALPHA&#39; with numbers? do the numbers represent any thing or just random?"}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "reply_to_user": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541805907, "post_id": 53234447, "comment_id": 93355721, "body": "Yes the number represent epoch time unix in milliseconds. So they need to go up from the first arg. But I am using example for simplification."}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "reply_to_user": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806318, "post_id": 53234447, "comment_id": 93355818, "body": "@JackHerer - This problem is almost unsolvable unfortunately!"}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806553, "post_id": 53234447, "comment_id": 93355869, "body": "this very far from unsolvable!!!!"}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806578, "post_id": 53234447, "comment_id": 93355879, "body": "With a little more info this is actually pretty simple"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541806596, "post_id": 53234447, "comment_id": 93355888, "body": "Looks pretty simple. I&#39;ll throw something together later today when I&#39;m at a computer if it hasn&#39;t been solved yet. I just don&#39;t get where the 15X00  and 20300 is coming from though if you&#39;re starting with 10000."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806601, "post_id": 53234447, "comment_id": 93355890, "body": "I am not very good with regex but that may the best way to go with this"}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1541806861, "post_id": 53234447, "comment_id": 93355945, "body": "@melpomene, I have tried sed -i -e &#39;s/&#40;st=&#41;.\\{13\\}/\\10100/2&#39; data.txt, also perl -pi -e &#39;s/&#91;st=ALPHA\\10000([0-9]+)/3640+$1/e&#39; data.txt | so tried a few things, but not quite what I expected..."}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806876, "post_id": 53234447, "comment_id": 93355950, "body": "As the downvote says, you have clearly not done any resaerch into this problem because you will find there are many ways to do this, I have just done what i think you need doing but I feel you should really spend some time trying to do it youself. apologies if i sound rude, i promise im not being rude, just following SO police to push at getting you to try harder it can be done and very easily with some learning"}, {"owner": {"reputation": 776, "user_id": 3978993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jamie Lindsey", "link": "https://stackoverflow.com/users/3978993/jamie-lindsey"}, "edited": false, "score": 0, "creation_date": 1541806981, "post_id": 53234447, "comment_id": 93355977, "body": "Something to get you started: <code>[i + DELIMITER for i in STRING.split(DELIMITER) if i]</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1541807109, "post_id": 53234447, "comment_id": 93355999, "body": "@Saffik I tried your Perl code and got <code>Unmatched ) in regex; marked by &lt;-- HERE in m&#47;[st=ALPHA\\10000([0-9]+) &lt;-- HERE &#47; at -e line 1.</code>"}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541807150, "post_id": 53234447, "comment_id": 93356017, "body": "@Shawn - 10000 is starting value. Increment this by 100 for all lines with same uniId. If uniId changes to new one, then increment by 5000, keep incrementing by 100 for all subsequent lines with same uniId. Throughout we will keep track of st value."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541807235, "post_id": 53234447, "comment_id": 93356038, "body": "Ah, I didn&#39;t see the 5000 part. My bad."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1541830854, "post_id": 53234447, "comment_id": 93359329, "body": "&quot;This ^ should be REPLACED and applied to file data.txt&quot;  --  be very careful here; that sounds dangerously like editing-in-place, which would complicate the problem a <b>lot</b>;  just output to a separate file, say, <code>data-with-numbers.txt</code>;  if you really need the final output file to be called <code>data.txt</code> for some reason, then rename the original <code>data.txt</code> and then rename <code>data-with-numbers.txt</code> to become <code>data.txt</code>  ... all this might go without saying, but I filled up a hard drive once, <code>grep</code>ing from an input file and appending the results to the same file &quot;for convenience&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "edited": false, "score": 0, "creation_date": 1541861540, "post_id": 53235399, "comment_id": 93366063, "body": "Good answer. I like the first approach in awk. A couple of lines and job done. The perl approach is also good albeit I noticed it trims/removes the last &quot; <code>&amp;</code> &quot; on the last line. I will take the awk approach as it is simpler!"}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "edited": false, "score": 0, "creation_date": 1541895228, "post_id": 53235399, "comment_id": 93374625, "body": "one quick question. When I use the AWK script like: <code>.&#47;transform.sh 1539504910000 &lt; data.txt &gt; temp.txt</code>, it uses scientific notation eg: &amp;st=1.5395e+12&amp;type.... | The input is epoch time linux, any idea how to print and do it in normal numeric format? - I am trying somethings but if i can work it out :)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "edited": false, "score": 1, "creation_date": 1541908379, "post_id": 53235399, "comment_id": 93376474, "body": "@Saffik awk numbers are floating point. I think there&#39;s a variable that controls how they&#39;re formatted when converted to a string."}, {"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "edited": false, "score": 0, "creation_date": 1542033256, "post_id": 53235399, "comment_id": 93412827, "body": "solved by using gawk. Was using mawk by default. thanks alot buddy"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1541817574, "last_edit_date": 1541817574, "creation_date": 1541815227, "answer_id": 53235399, "question_id": 53234447, "link": "https://stackoverflow.com/questions/53234447/replace-string-with-custom-values-and-iterate-for-all-occurrences/53235399#53235399", "title": "Replace string with custom values and iterate for all occurrences", "body": "<p>Okay, here's one way, using awk (wrapped in a shell script for convenience because it's a bit too much for a one-liner):</p>\n\n\n\n<pre><code>#!/bin/sh\n# Usage:\n# $./transform.sh [STARTCOUNT] &lt; data.txt &gt; temp.txt\n# $ mv -f temp.txt data.txt\nawk  -F '&amp;' -v \"cnt=${1:-10000}\" -v 'OFS=&amp;' \\\n   'NR == 1 { ac = cnt; uni = $4; }\n    NR &gt; 1 &amp;&amp; $4 == uni { cnt += 100 }\n    $4 != uni { cnt += 5000; ac = cnt; uni = $4 }\n    { $2 = \"st=\" cnt; $5 = \"acceptCode=\" ac; print }'\n</code></pre>\n\n<p>Running this on a file holding your sample input:</p>\n\n<pre><code>$ ./transform.sh 10000 &lt; data.txt\n&amp;st=10000&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=10100&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=15100&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=ured&amp;\n&amp;st=15200&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=15300&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=20300&amp;type=rec&amp;uniId=DAVE&amp;acceptCode=20300&amp;drainNel=teef&amp;\n</code></pre>\n\n<p>And a perl version that does an in-place edit of the input file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -ani -F'&amp;'\n# Usage:\n# $ ./transform.pl COUNT datafile\nuse warnings;\nuse strict;\nuse English;\n\nour ($count, $a, $uni);\n\nBEGIN {\n  $count = shift @ARGV;\n  die \"Missing count argument\" unless defined $count and $count =~ /^\\d+$/;\n  $ac = $count;\n  $uni = \"\";\n  $OFS = '&amp;';\n}\n\nif ($NR == 1) {\n  $uni = $F[3];\n} elsif ($uni ne $F[3]) {\n  $count += 5000;\n  $ac = $count;\n  $uni = $F[3];\n} else {\n  $count += 100;\n}\n$F[1] = \"st=$count\";\n$F[4] = \"acceptCode=$ac\";\nprint @F;\n</code></pre>\n\n<p>Running it on your sample input:</p>\n\n<pre><code>$ ./transform.pl 10000 data.txt\n$ cat data.txt\n&amp;st=10000&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=10100&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=15100&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=ured&amp;\n&amp;st=15200&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=15300&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=20300&amp;type=rec&amp;uniId=DAVE&amp;acceptCode=20300&amp;drainNel=teef&amp;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "edited": false, "score": 0, "creation_date": 1541861456, "post_id": 53236397, "comment_id": 93366047, "body": "Very useful code there. Appreciate it. You sir, are a genius."}], "tags": [], "owner": {"reputation": 462, "user_id": 3369612, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001282127093/picture?type=large", "display_name": "Kristian", "link": "https://stackoverflow.com/users/3369612/kristian"}, "is_accepted": false, "score": 1, "last_activity_date": 1541829601, "creation_date": 1541829601, "answer_id": 53236397, "question_id": 53234447, "link": "https://stackoverflow.com/questions/53234447/replace-string-with-custom-values-and-iterate-for-all-occurrences/53236397#53236397", "title": "Replace string with custom values and iterate for all occurrences", "body": "<h3>A few assumptions</h3>\n\n<p>Your requirement 2) I want to replace all the text ALPHA with the given long number as arg and increment by 100 for e.g. if uniId is the same. If it is different it will increment by 5000 for e.g._ in conjunction with your example output requires your input data to be <strong>sorted on the uniId</strong> field. If the file is not sorted, the 100 increments and the 5000 increments will not yield the desired initial values for each uniId</p>\n\n<p>The increment scheme assumes that no one uniId value will have enough records to increment into the next 5000 range set for newly identified uniId values.</p>\n\n<pre><code>#!/usr/bin/env python3\n\nfrom collections import OrderedDict\nimport csv\nimport sys\n\nclass TrackingVars(object):\n    \"\"\"\n    The TrackingVars class manages the business logic for maintaining the\n    st field counters and the acctCode values for each uniId\n    \"\"\"\n\n    def __init__(self, long_number):\n        self.uniId_table = {}\n        self.running_counter = long_number\n\n    def __initial_value__(self):\n        \"\"\"\n        The first encounter for a uniId will have st = acctCode\n        \"\"\"\n        retval = (self.running_counter, self.running_counter)\n        return retval\n\n    def get_uniId(self, id):\n        \"\"\"\n        A convenience method for returning uniId tracking values\n        \"\"\"\n        curval, original_value = self.uniId_table.get(id, self.__initial_value__())\n        return (curval, original_value)\n\n    def track(self, uniId):\n        \"\"\"\n        curval = original_value when a new uniId is encountered.\n        If the uniId is known, simply increment curval by 100\n        if the uniId is new and there is at least 1 key in the\n        tracking table increment curval by 5000\n        always update tracking variables\n        \"\"\"\n        curval, original_value = self.get_uniId(uniId)\n        if uniId in self.uniId_table.keys():\n            curval = curval + 100\n        else:\n            if self.uniId_table:\n                curval = curval + 5000\n                original_value = curval\n        self.running_counter = curval\n        retval = (curval, original_value)\n        self.uniId_table[uniId] = retval\n        return retval\n\n\ndef data_lines(filename):\n    \"\"\"\n    Read file as input delimited by &amp;\n    \"\"\"\n    with open(filename, \"r\", newline=None) as fin:\n        csvin = csv.reader(fin, delimiter=\"&amp;\")\n        for row in csvin:\n            yield row\n\ndef transform_data_line(line):\n    \"\"\"\n    Transform data into key, values pairs\n    leading and traling &amp; have no valid key, value pairs\n    \"\"\"\n    head = (\"head\", None)\n    tail = (\"tail\", None)\n    items = [head]\n    for field in line[1:-1]:\n        key, value = field.split(\"=\")\n        items.append([key, value])\n    retval = OrderedDict(items)\n    retval[\"tail\"] = tail\n    return retval\n\ndef process_data_line(record, text_to_replace, tracking_vars):\n    \"\"\"\n    if st value is ALPHA update record with tracking variables\n    \"\"\"\n    st = record.get(\"st\")\n    if st is not None:\n        if st == text_to_replace:\n            uniId = record.get(\"uniId\")\n            curval, original_value = tracking_vars.track(uniId)\n            record[\"st\"] = curval\n            record[\"acceptCode\"] = original_value\n    return record\n\n\ndef process_file():\n    \"\"\"\n    Get the long number from the command line input.\n    Initialize the tracking variables.\n    Process each row of the file.\n    \"\"\"\n    long_number = sys.argv[1]\n    tracking_vars = TrackingVars(int(long_number))\n    for row in data_lines(\"data.txt\"):\n        record = transform_data_line(row)\n        retval = process_data_line(record, \"ALPHA\", tracking_vars)\n        yield retval\n\n\ndef write(iter_in, filename_out):\n    \"\"\"\n    Write each row from the iterator to the csv.\n    make sure the first and last fields are empty.\n    \"\"\"\n    with open(filename_out, \"w\", newline=None) as fout:\n        csvout = csv.writer(fout, delimiter=\"&amp;\")\n        for row in iter_in:\n            encoded_row = [\"{0}={1}\".format(k, v) for k, v in row.items()]\n            encoded_row[0]=\"\"\n            encoded_row[-1]=\"\"\n            csvout.writerow(encoded_row)\n\nif __name__ == \"__main__\":\n    write(process_file(), \"data.new.txt\")\n</code></pre>\n\n<h3>Output</h3>\n\n<p><code>$cat data.net.txt</code></p>\n\n<pre><code>&amp;st=10000&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=10100&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=15100&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=ured&amp;\n&amp;st=15200&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=15300&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=20300&amp;type=rec&amp;uniId=DAVE&amp;acceptCode=20300&amp;drainNel=teef&amp;\n</code></pre>\n\n<h3>Conclusion</h3>\n\n<p>Only you know why the business rules for the incrementing number scheme are the way they are. However having a control break on uniId and the st value dependent upon the previous uniId increment seems problematic to me. You could process unsorted files if each new uniId encountered would start at a new 5000 boundary. For example  15000, 2000, 25000, etc. </p>\n\n<h3>P.S</h3>\n\n<p>I love the AWK and Perl answers. They are simple and straight forward. They answer the question exactly as it was posed.  Now all we need is a SED example :)</p>\n"}, {"comments": [{"owner": {"reputation": 919, "user_id": 3367799, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vyx3C.jpg?s=128&g=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/3367799/jjj"}, "edited": false, "score": 0, "creation_date": 1554603574, "post_id": 55554942, "comment_id": 97811200, "body": "Please elaborate why it&#39;s more efficient."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1554601591, "creation_date": 1554601591, "answer_id": 55554942, "question_id": 53234447, "link": "https://stackoverflow.com/questions/53234447/replace-string-with-custom-values-and-iterate-for-all-occurrences/55554942#55554942", "title": "Replace string with custom values and iterate for all occurrences", "body": "<p>just bit more efficient control, in one line gnu awk:</p>\n\n<pre><code>awk  -F\\&amp; -vi=10000 -vOFS=\\&amp; '{if(NR==1) { ac=i; u=$4; } else { if($4==u) i+=100; else { i+=5000; ac=i; u=$4; } }; $2=\"st=\" i; $5 =gensub(/[0-9]+/,ac,1,$5); print } ' data.txt\n</code></pre>\n\n<p>accept any various string on 5th field.. Thank Shawn.</p>\n"}], "owner": {"reputation": 679, "user_id": 8863970, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/836bb1fabb9655b8e495be37b9e0b314?s=128&d=identicon&r=PG&f=1", "display_name": "Saffik", "link": "https://stackoverflow.com/users/8863970/saffik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 53235399, "answer_count": 3, "score": -3, "last_activity_date": 1554601591, "creation_date": 1541805205, "last_edit_date": 1541809168, "question_id": 53234447, "link": "https://stackoverflow.com/questions/53234447/replace-string-with-custom-values-and-iterate-for-all-occurrences", "title": "Replace string with custom values and iterate for all occurrences", "body": "<p>I am trying to replace some text in a file using either SED, PERL, AWK or a python script. I've tried a couple of things but can't seem to work it out.</p>\n\n<p>I have the following in a text file called <code>data.txt</code></p>\n\n<pre><code>&amp;st=ALPHA&amp;type=rec&amp;uniId=JIM&amp;acceptCode=123&amp;drainNel=supp&amp;\n&amp;st=ALPHA&amp;type=rec&amp;uniId=JIM&amp;acceptCode=167&amp;drainNel=supp&amp;\n&amp;st=ALPHA&amp;type=rec&amp;uniId=SARA&amp;acceptCode=231&amp;drainNel=ured&amp;\n&amp;st=ALPHA&amp;type=rec&amp;uniId=SARA&amp;acceptCode=344&amp;drainNel=iris&amp;\n&amp;st=ALPHA&amp;type=rec&amp;uniId=SARA&amp;acceptCode=349&amp;drainNel=iris&amp;\n&amp;st=ALPHA&amp;type=rec&amp;uniId=DAVE&amp;acceptCode=201&amp;drainNel=teef&amp;\n</code></pre>\n\n<p>1) Script will take an input argument in the form of a number, e.g: <code>10000</code></p>\n\n<p>2) I want to replace all the text <code>ALPHA</code> with the given long number as arg and increment by 100 for e.g. if <strong>uniId</strong> is the same. If it is different it will increment by 5000 for e.g.</p>\n\n<p>3) I want to replace all the <strong>acceptCode</strong> to change to the first <strong>st</strong> for all lines with the same <strong>uniId</strong></p>\n\n<blockquote>\n  <p>./script 10000</p>\n</blockquote>\n\n<p>.. still confused? Well, the final result could be this:</p>\n\n<pre><code>&amp;st=10000&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=10100&amp;type=rec&amp;uniId=JIM&amp;acceptCode=10000&amp;drainNel=supp&amp;\n&amp;st=15100&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=ured&amp;\n&amp;st=15200&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=15300&amp;type=rec&amp;uniId=SARA&amp;acceptCode=15100&amp;drainNel=iris&amp;\n&amp;st=20300&amp;type=rec&amp;uniId=DAVE&amp;acceptCode=20300&amp;drainNel=teef&amp;\n</code></pre>\n\n<p>This ^ should be REPLACED and applied to file <code>data.txt</code> - not just print on screen.</p>\n"}, {"tags": ["perl", "amazon-s3", "authorization", "signature"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1541793024, "post_id": 53231810, "comment_id": 93351753, "body": "show your code that&#39;s generating the request/signature?"}, {"owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542304231, "post_id": 53231810, "comment_id": 93530933, "body": "I am facing signature mismatch issue when singing my HTTPS requests with V4.   <code>&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;&#47;Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your key and signing method.&lt;&#47;Message&gt;&lt;AWSAccessKeyId&gt;AXXXXXXXXXXXXXXQXXXX&lt;&#47;AWSAc&zwnj;&#8203;cessKeyId&gt;&lt;StringToS&zwnj;&#8203;ign&gt;AWS4-HMAC-SHA256 20181015T075241Z 20181015&#47;us-east-1&#47;s3&#47;aws4_request 47d80c227b12680c22a13d486415c0299a180c2a41e85cd63c9b294a8e41&zwnj;&#8203;80c2&lt;&#47;StringToSign&gt;&lt;&zwnj;&#8203;SignatureProvided&gt;df&zwnj;&#8203;2280c2611318c2df926b&zwnj;&#8203;20080c2dcabe80c278c9&zwnj;&#8203;87e3dedba75880c2c305&zwnj;&#8203;a0&lt;&#47;SignatureProvide&zwnj;&#8203;d&gt;</code>"}, {"owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542304271, "post_id": 53231810, "comment_id": 93530953, "body": "I&#39;ve used the Amazon::S3 module to create request and used Net::Amazon::Signature::V4 module to sign the request header. When I comment out the above two lines from S3.pm _make_request(), the signature actually matches."}, {"owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542306237, "post_id": 53231810, "comment_id": 93531913, "body": "@ysth Please let me know if any other information is required. Thanks!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542317764, "post_id": 53231810, "comment_id": 93536843, "body": "if you provide a runnable script (obscuring any private information like keys) showing exactly what you are doing more people will at least look at your problem: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "owner": {"reputation": 123, "user_id": 2173020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/39a8dd0daac21e06cfd0c852d656be20?s=128&d=identicon&r=PG", "display_name": "tuxian", "link": "https://stackoverflow.com/users/2173020/tuxian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541789953, "creation_date": 1541789953, "question_id": 53231810, "link": "https://stackoverflow.com/questions/53231810/s3-signature-mismatch-with-amazons3-perl", "title": "S3 signature mismatch with Amazon::S3 perl", "body": "<p>When I try to generate the request header along with the signature, I'm getting a signature mismatch error. </p>\n\n<p>I used Amazon::S3 Perl module to generate the request. And when analyzed the difference in approach on how the signature is calculated between this module and AWS CLI, I found out that when I comment out the below line from S3.pm inside _make_request() method, makes the signature matches.</p>\n\n<pre><code>$self-&gt;_add_auth_header($http_headers, $method, $path)\n      unless exists $headers-&gt;{Authorization};\n</code></pre>\n\n<p>Am I referring it correctly or is there any other module I can use just for generating the signature alone or at the last option, I can write my own module which inherits the actual module (if possible or mimic the actual module with the custom change).</p>\n"}, {"tags": ["mysql", "perl", "rt"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 3766486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Tyy1.jpg?s=128&g=1", "display_name": "EaglePsyX", "link": "https://stackoverflow.com/users/3766486/eaglepsyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1549522888, "creation_date": 1549522888, "answer_id": 54567911, "question_id": 53231611, "link": "https://stackoverflow.com/questions/53231611/rt-4-0-3-to-4-4-3-leads-to-performance-issues-due-acl-checks/54567911#54567911", "title": "RT 4.0.3 to 4.4.3 leads to performance issues due ACL checks", "body": "<p>Ok, the answer is a \"new\" Request-Tracker feature:\n<strong><a href=\"https://docs.bestpractical.com/rt/4.4.2/RT_Config.html#UseSQLForACLChecks\" rel=\"nofollow noreferrer\">UseSQLForACLCheck</a></strong>.</p>\n\n<p>Disabling this parameter return the whole performance.</p>\n"}], "owner": {"reputation": 45, "user_id": 3766486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Tyy1.jpg?s=128&g=1", "display_name": "EaglePsyX", "link": "https://stackoverflow.com/users/3766486/eaglepsyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549522888, "creation_date": 1541788897, "question_id": 53231611, "link": "https://stackoverflow.com/questions/53231611/rt-4-0-3-to-4-4-3-leads-to-performance-issues-due-acl-checks", "title": "RT 4.0.3 to 4.4.3 leads to performance issues due ACL checks", "body": "<p>I\u2018m trying to update an old request-tracker 4.0.3 instance to 4.4.3. The upgrade works even with 82\u2019319 user ( inclusive privileged LDAP users; ExternalAuth ).</p>\n\n<p>So far so good, but I realized that the performance for displaying queues is terribly slow by using a   privileged user. The longer the displayed queue the longer the execution time. I\u2019m talking about minutes\u2026 By using the root user or a privileged user with the administration permission \u201cdo everything or nothing\u201d ( translated from German ) I got instantly the queues.</p>\n\n<p>Furthermore I figured out that a mysql query leads to the long execution time. Since the root execution does not require an ACL check it runs faster. But I guess that\u2019s not normal to consume so much time.  It took hours to figure that out.</p>\n\n<p>Basically the differences by the queries (MYSQL EXPLAIN SELECT ...) are:</p>\n\n<p><code>\n| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra \n| SIMPLE| Groups_2| ref| groups1,groups2,groups3| groups1 | 67 | const | 693212 | Using where; Distinct\n| SIMPLE | CachedGroupMembers_3 | ref | DisGrouMem,CachedGroupMembers3,cachedgroupmembers1 | DisGrouMem | 12 | rt3.Groups_2.id,const,const | 1 | Using where; Using index; Distinct\n</code></p>\n\n<p>I guess 693212 rows in the <strong>Groups</strong> table are pretty much. The old (still running) RT 4.0.3 instance with the same not updated instance runs like a charm.</p>\n\n<p>Did I made a mistake?</p>\n\n<p>By the way I got this warning during the database upgrade:</p>\n\n<blockquote>\n  <p>Processing 4.3.0 Now inserting data. [6564] [Wed Aug 29 22:44:51 2018]\n  [warning]: You have 11141 users(s) with a non-empty value for column\n  'ExternalAuthId'. Core RT does not use this column, so perhaps an\n  extension or local modification makes use of it. Please migrate these\n  user values to a custom field or an attribute because this upgrade\n  will drop these columns. at ./etc/upgrade/4.3.0/content line 67.\n  (./etc/upgrade/4.3.0/content:67) [6564] [Wed Aug 29 22:44:51 2018]\n  [warning]: You have 256 users(s) with a non-empty value for column\n  'AuthSystem'. Core RT does not use this column, so perhaps an\n  extension or local modification makes use of it. Please migrate these\n  user values to a custom field or an attribute because this upgrade\n  will drop these columns. at ./etc/upgrade/4.3.0/content line 67.\n  (./etc/upgrade/4.3.0/content:67)</p>\n</blockquote>\n\n<p>I did not change anything in order to solve this problem but since the LDAP user are still able to login I guess that\u2019s not the problem.</p>\n\n<p>Does somebody has any ideas?</p>\n\n<p>user:\n<code>SELECT DISTINCT main.* FROM Tickets main LEFT JOIN Groups Groups_2  ON ( Groups_2.Domain = 'RT::Ticket-Role' ) AND ( Groups_2.Instance = main.id ) JOIN Queues Queues_1  ON ( Queues_1.id = main.Queue ) LEFT JOIN CachedGroupMembers CachedGroupMembers_3  ON ( CachedGroupMembers_3.Disabled = '0' ) AND ( CachedGroupMembers_3.MemberId = '1296794' ) AND ( CachedGroupMembers_3.GroupId = Groups_2.id )  WHERE ( ( main.Queue IN ('44', '59', '1', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '19', '20', '21', '22', '23', '24', '25', '26', '27', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '57', '58', '59', '60', '62', '63', '64', '65', '66', '68', '69', '72', '78', '79', '73', '80', '82', '83', '85', '88', '90', '92', '93', '94', '97', '99', '28', '102', '103', '106', '108', '109') OR  ( CachedGroupMembers_3.MemberId IS NOT NULL AND Groups_2.Name = 'Requestor' )  OR  ( CachedGroupMembers_3.MemberId IS NOT NULL AND Groups_2.Name = 'Cc' AND main.Queue IN ('77') )  OR  ( CachedGroupMembers_3.MemberId IS NOT NULL AND Groups_2.Name = 'AdminCc' )  OR  ( main.Owner = '1296794' )  ) ) AND (main.IsMerged IS NULL) AND (main.Status != 'deleted') AND (main.Type = 'ticket') AND (main.Queue = '72' AND  (  ( Queues_1.Lifecycle = 'assets' AND  ( main.Status = 'new' OR main.Status = 'allocated' OR main.Status = 'in-use' )  )  OR  ( Queues_1.Lifecycle = 'default' AND  ( main.Status = 'new' OR main.Status = 'open' OR main.Status = 'stalled' )  )  OR  ( Queues_1.Lifecycle = 'approvals' AND  ( main.Status = 'new' OR main.Status = 'open' OR main.Status = 'stalled' )  )  ) )  ORDER BY main.id ASC  LIMIT 50;\n</code></p>\n\n<p>11 rows in set (37.49 sec)</p>\n\n<p>root:</p>\n\n<p><code>SELECT main.* FROM Tickets main JOIN Queues Queues_1  ON ( Queues_1.id = main.Queue )  WHERE (main.IsMerged IS NULL) AND (main.Status != 'deleted') AND (main.Type = 'ticket') AND (main.Queue = '72' AND  (  ( Queues_1.Lifecycle = 'default' AND  ( main.Status = 'new' OR main.Status = 'open' OR main.Status = 'stalled' )  )  OR  ( Queues_1.Lifecycle = 'assets' AND  ( main.Status = 'new' OR main.Status = 'allocated' OR main.Status = 'in-use' )  )  OR  ( Queues_1.Lifecycle = 'approvals' AND  ( main.Status = 'new' OR main.Status = 'open' OR main.Status = 'stalled' )  )  ) )  ORDER BY main.id ASC  LIMIT 50;</code></p>\n\n<p>11 rows in set (0.00 sec)</p>\n"}, {"tags": ["perl", "ftp", "net-ftp"], "comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1541857922, "post_id": 53230107, "comment_id": 93365070, "body": "Now it is obsolete but correct debugging is <code>Debug =&gt; 1</code> and not <code>DEBUG =&gt; Y 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1541846841, "post_id": 53233924, "comment_id": 93362350, "body": "I removed the function <code>yoursub1</code> and the argument in <code>f1-&gt;rget()</code>. At the end I have only <code>f1-&gt;cwd(); f1-&gt;rget();f1-&gt;quit();</code>. This works!. Again, you saved my day."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1541801559, "creation_date": 1541801559, "answer_id": 53233924, "question_id": 53230107, "link": "https://stackoverflow.com/questions/53230107/cant-call-method-filename-without-a-package-or-object-reference/53233924#53233924", "title": "Can&#39;t call method &quot;filename&quot; without a package or object reference", "body": "<p><code>yoursub1</code> is completely wrong. It's suppose to parse the lines returned from the FTP server (provided as arguments to the sub), and return a list of Net::FTP::Recursive::File objects for each remote file (other than <code>.</code> and <code>..</code>).</p>\n\n<p>If the default implementation (<code>Net::FTP::Recursive::parse_files</code>) is sufficient, simply remove <code>ParseSub =&gt; \\&amp;yoursub1</code>. Otherwise, you should probably start by copying <code>Net::FTP::Recursive::parse_files</code> and adjusting it for your FTP server's output.</p>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 53233924, "answer_count": 1, "score": 0, "last_activity_date": 1541801559, "creation_date": 1541782387, "question_id": 53230107, "link": "https://stackoverflow.com/questions/53230107/cant-call-method-filename-without-a-package-or-object-reference", "title": "Can&#39;t call method &quot;filename&quot; without a package or object reference", "body": "<p>I want to download from a ftp server (host1) a bunch of directories with content. To do that I use library <a href=\"https://metacpan.org/pod/Net::FTP::Recursive\" rel=\"nofollow noreferrer\">Net::FTP::Recursive</a>. When I run the code the folders and files were downloaded. Nevertheless, I got this message: </p>\n\n<pre><code>&gt;Can't call method \"filename\" without a package or object reference \n at C:\\10_LIB~1\\PerlLib\\lib\\perl5/Net/FTP/Recursive.pm line 86.\n</code></pre>\n\n<p>I wonder why this happens, what impact it has and how I can avoid this. </p>\n\n<p>Here is the code to download:</p>\n\n<pre><code># -- Libraries\n\n# coding and diagnostic\nuse strict;\nuse warnings;\n\n# FTP connection\nuse Net::FTP;\nuse Net::FTP::Recursive;\n\n# -- Settings\n\nmy $host1      = \"ftp.host1.com\";\nmy $user1      = \"myname\\@myweb.com\";\nmy $password1  = \"password\";\n\n# -- Connection to ftp server\n\nmy $f1 = Net::FTP::Recursive-&gt;new($host1) or die \"Can't open \\$f1 $host1\\n\";\n$f1-&gt;login($user1, $password1) or die \"Can't log \\$f1 $user1 in\\n\";\n$f1-&gt;cwd() or die \"Can't cwd to host folder\\n\";\n\n# $f1-&gt;ascii();\n$f1-&gt;binary;\n\n# -- Directory to download the contents\n\nmy $download = \"C:/mydirectory/download\";\nchdir($download);\n\n# -- Host1\n\n$f1-&gt;cwd();\n$f1-&gt;rget( ParseSub =&gt; \\&amp;yoursub1 );\n$f1-&gt;quit;    \n\nsub yoursub1 {\n$f1-&gt;rget;\n}\n</code></pre>\n\n<p>I used perl on Windows 7 with version:</p>\n\n<pre><code>perl -v\nThis is perl 5, version 28, subversion 0 (v5.28.0) built for MSWin32-x64-multi-thread\n</code></pre>\n\n<p>And here is the code from /Net/FTP/Recursive.pm until line 86 from the message:</p>\n\n<pre><code>sub _rget {\n    my($ftp) = shift;\n\n    my @dirs;\n\n    my @ls = $ftp-&gt;dir();\n\n    my @files = $options{ParseSub}-&gt;( @ls );\n\n    @files = grep { $_-&gt;filename =~ $options{MatchAll} } @files\n      if $options{MatchAll};\n\n    @files = grep { $_-&gt;filename !~ $options{OmitAll} } @files\n      if $options{OmitAll};\n\n    print STDERR join(\"\\n\", @ls), \"\\n\"\n      if $ftp-&gt;debug;\n\n    my $remote_pwd = $ftp-&gt;pwd;\n    my $local_pwd = Cwd::cwd();\n\n    FILE:\n    foreach my $file (@files){\n        #used to make sure that if we're deleting the files, we\n        #successfully retrieved the file\n        my $get_success = 1;\n        my $filename = $file-&gt;filename();       # &lt;- 86 \n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1541776963, "post_id": 53228495, "comment_id": 93343781, "body": "It&#39;s a web proxy, it requires you to provide a URL. Try <code>http:&#47;&#47;192.168.3.10</code>, possibly with a port."}, {"owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "edited": false, "score": 0, "creation_date": 1541778210, "post_id": 53228495, "comment_id": 93344487, "body": "This might help: <a href=\"https://stackoverflow.com/questions/42649791/cpan-first-launch-proxy-configuration\" title=\"cpan first launch proxy configuration\">stackoverflow.com/questions/42649791/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541801108, "post_id": 53228973, "comment_id": 93354481, "body": "Couldn&#39;t &quot;Proxy&quot; indicate a misconfigured env var?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541831067, "post_id": 53228973, "comment_id": 93359365, "body": "Oh, course. I didn&#39;t say where the misconfiguration was as I didn&#39;t have enough information to even guess."}, {"owner": {"reputation": 1, "user_id": 8316033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87iaWNlnpE0/AAAAAAAAAAI/AAAAAAAAABI/Sx1f5MkY998/photo.jpg?sz=128", "display_name": "Mithil Gaikwad", "link": "https://stackoverflow.com/users/8316033/mithil-gaikwad"}, "edited": false, "score": 0, "creation_date": 1542017164, "post_id": 53228973, "comment_id": 93403990, "body": "Can you tell me what more information do I need to provide ? And how do I provide it as an url ?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1541778443, "creation_date": 1541778443, "answer_id": 53228973, "question_id": 53228495, "link": "https://stackoverflow.com/questions/53228495/proxy-must-be-specified-as-absolute-uri-192-168-3-10-is-not-at-usr-share-per/53228973#53228973", "title": "Proxy must be specified as absolute URI; &#39;192.168.3.10&#39; is not at /usr/share/perl/5.26/CPAN/FTP.pm line 355", "body": "<p>It looks like your CPAN proxy is misconfigured. It should be an absolute URL (as the error message says) not just an IP address. <code>http://192.168.3.10/</code> will probably work (but you might need to add a port number too).</p>\n\n<p>Do you have any suggestions that would make the error message clearer?</p>\n"}, {"tags": [], "owner": {"reputation": 925, "user_id": 28321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55357f1aabb527ec639daa583e971dc1?s=128&d=identicon&r=PG", "display_name": "aunlead", "link": "https://stackoverflow.com/users/28321/aunlead"}, "is_accepted": false, "score": 0, "last_activity_date": 1579712605, "creation_date": 1579712605, "answer_id": 59864804, "question_id": 53228495, "link": "https://stackoverflow.com/questions/53228495/proxy-must-be-specified-as-absolute-uri-192-168-3-10-is-not-at-usr-share-per/59864804#59864804", "title": "Proxy must be specified as absolute URI; &#39;192.168.3.10&#39; is not at /usr/share/perl/5.26/CPAN/FTP.pm line 355", "body": "<p>I ran into similar issue. Solved it by removing all configured proxies from CPAN and then using environment proxy.</p>\n\n<p>You can remove configured proxies from cpan using following commands either on <code>cpan</code> or <code>perl -MCPAN -e shell</code> -</p>\n\n<pre><code>o conf http_proxy \"\"\no conf ftp_proxy \"\"\no conf proxy_user \"\"\no conf proxy_pass \"\"\no conf commit\nq\n</code></pre>\n\n<p>And then configure required environment proxy. Example - <code>export http_proxy=http://proxyserver:8080</code> for Linux or <code>set http_proxy=http://proxyserver:8080</code> for Windows </p>\n\n<p>Now you should be able to install required modules <code>cpan[6]&gt; install LWP</code></p>\n"}], "owner": {"reputation": 1, "user_id": 8316033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87iaWNlnpE0/AAAAAAAAAAI/AAAAAAAAABI/Sx1f5MkY998/photo.jpg?sz=128", "display_name": "Mithil Gaikwad", "link": "https://stackoverflow.com/users/8316033/mithil-gaikwad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1748, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1579712605, "creation_date": 1541776785, "question_id": 53228495, "link": "https://stackoverflow.com/questions/53228495/proxy-must-be-specified-as-absolute-uri-192-168-3-10-is-not-at-usr-share-per", "title": "Proxy must be specified as absolute URI; &#39;192.168.3.10&#39; is not at /usr/share/perl/5.26/CPAN/FTP.pm line 355", "body": "<p>I have been trying to install Regulatory Sequence Analysis Tools (RSAT) on my stand alone computer. The OS is Ubuntu latest version. I am new to it too. While downloading some necessary PERL modules I get this error:</p>\n\n<p><strong>\"Proxy must be specified as absolute URI; '192.168.3.10' is not at /usr/share/perl/5.26/CPAN/FTP.pm line 355.\nmakefiles/install_rsat.mk:256: recipe for target 'perl_modules_install' failed\nmake: *</strong> [perl_modules_install] Error 255**\"</p>\n\n<p>Tried solving it with \"perl -MCPAN -eshell\" but same error pops out. Please help me .</p>\n\n<p>Your help will be very appreciated</p>\n"}, {"tags": ["sql", "perl", "request"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 4, "creation_date": 1541754965, "post_id": 53222621, "comment_id": 93332495, "body": "Your script does only a single insert. If you call it multiple times it will do multiple inserts. Am I correct that you are actually looking for a way to not insert a row if it is already there? In this case <a href=\"https://chartio.com/resources/tutorials/how-to-insert-if-row-does-not-exist-upsert-in-mysql/\" rel=\"nofollow noreferrer\">How to INSERT If Row Does Not Exist (UPSERT) in MySQL</a> might help."}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1541755541, "post_id": 53222621, "comment_id": 93332755, "body": "i execute this script every 5 minute and that create many same line in the table, i don&#39;t want same line in my table"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1541755931, "post_id": 53222621, "comment_id": 93332973, "body": "Create a unique index on the fields that should be unique?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1541756089, "post_id": 53222621, "comment_id": 93333046, "body": "@jack: I&#39;m not sure what you problem really is. This script uses a fixed statement to insert a line - which will of course add the data when executed since these data are hard coded in the script. If you intention is to have only this single row in the table then why do you execute this script multiple times?"}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "edited": false, "score": 0, "creation_date": 1541756312, "post_id": 53222621, "comment_id": 93333139, "body": "i show you all code"}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "edited": false, "score": 0, "creation_date": 1541756562, "post_id": 53222621, "comment_id": 93333264, "body": "i do all request of my logfile"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1541772258, "post_id": 53222621, "comment_id": 93341089, "body": "I&#39;ve edited your question to fix the formatting of the input file. You&#39;re welcome, but please consider doing it yourself in the future."}], "answers": [{"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1541775268, "post_id": 53224475, "comment_id": 93342798, "body": "Adding a &quot;processed&quot; flag in a (text) log file is likely to involve re-writing the entire file every time (although there are ways around that). The better way to avoid re-processing log lines would be to use File::Tail (<a href=\"https://metacpan.org/pod/File::Tail\" rel=\"nofollow noreferrer\">metacpan.org/pod/File::Tail</a>) or similar so that each new run can pick up where the previous one left off instead of starting from the beginning of the file every time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1541778774, "post_id": 53224475, "comment_id": 93344808, "body": "@DaveSherohman: I didn&#39;t claim they were all <b>good</b> options :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1541773331, "last_edit_date": 1541773331, "creation_date": 1541761305, "answer_id": 53224475, "question_id": 53222621, "link": "https://stackoverflow.com/questions/53222621/perl-dont-send-double-sql-request/53224475#53224475", "title": "Perl - don&#39;t send double sql request", "body": "<p>In a comment, you say this:</p>\n\n<blockquote>\n  <p>i execute this script every 5 minute and that create many same line in the table, i don't want same line in my table</p>\n</blockquote>\n\n<p>I think this is what is happening.</p>\n\n<p>Every five minutes you run your program. Each time you run the program you use exactly the same log file as input. So the same records get processed every time and new copies of the data are inserted on each run.</p>\n\n<p>There's nothing wrong with your existing code. It's doing exactly what you've asked it to do. It's just not clever enough. You need to make it cleverer. You have a few options.</p>\n\n<ol>\n<li>Remove from the log file the records that have been processed. That way you only insert each record once.</li>\n<li>Add a flag to each record in your log file which indicates that it has been added to the database. You can then check that flag when processing the file and only insert records that don't have the flag.</li>\n<li>Add an index to your table to ensure that it can only contain one copy of each record. You'll then need to change your code so it ignores any duplicate data errors that you get back from the database.</li>\n<li>Use <a href=\"https://mariadb.com/kb/en/library/replace/\" rel=\"nofollow noreferrer\"><code>REPLACE</code></a> instead of <code>INSERT</code> and ensure you have the correct primary key on your table to ensure that duplicate records aren't inserted.</li>\n</ol>\n\n<p>Without knowing a log more about your particular application, it's hard to know which of these options is the best approach for you. I suspect you'll find the <code>REPLACE</code> option the easiest to implement.</p>\n\n<p><strong>Update:</strong> I hope you'll find some general comments on your code to be useful.</p>\n\n<p>Your code to open the file works, of course, but it is some distance from current best practice. I recommend a) using a lexical filehandle, b) using the three-arg version of <code>open()</code> and c) checking the return value from the call.</p>\n\n<pre><code>open my $fh, '&lt;', 'logfile'\n  or die \"Could not open 'logfile': $!\\n\";\n</code></pre>\n\n<p>Using variables called <code>$word1</code>, <code>$word2</code>, etc is a terrible idea. A better idea would be to use an array:</p>\n\n<pre><code>my @words = split ' ',\n</code></pre>\n\n<p>If you really want individual variables, then please give them better names:</p>\n\n<pre><code>my ($day, $mon, $date, $time, $year, ... ) = split(' ');\n</code></pre>\n\n<p>Personally, I'd turn each record into a hash.</p>\n\n<pre><code>my @cols = qw[day mon date time year ... ];\n\n# and then, in your loop\nmy %record;\n@record{@cols} = split ' ';\n</code></pre>\n\n<p>Converting the month to a number the way you do it is clunky. Consider setting up a conversion hash.</p>\n\n<pre><code>my %months = (\n  Jan =&gt; 1,\n  Feb =&gt; 2,\n  ...\n);\n</code></pre>\n\n<p>Then your code becomes (assuming <code>$mon</code> instead of <code>$word2</code>):</p>\n\n<pre><code>$mon = sprintf '%02d', $months{$mon}\n  or die \"$mon is not a valid month\\n\";\n</code></pre>\n\n<p>But, actually, you should use something like <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> to deal with dates and times.</p>\n\n<pre><code>my $timestamp = \"$day $mon $date $time $year\";\nmy $tp = Time::Piece-&gt;strptime($timestamp, '%a %b %d %H:%M:%S $Y');\nsay $tp-&gt;ymd, ' ', $tp-&gt;hms;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 53224475, "answer_count": 1, "score": -1, "last_activity_date": 1542039352, "creation_date": 1541754134, "last_edit_date": 1541772207, "question_id": 53222621, "link": "https://stackoverflow.com/questions/53222621/perl-dont-send-double-sql-request", "title": "Perl - don&#39;t send double sql request", "body": "<p>i have a perl script and i don't want to send a double request :</p>\n\n<p>the request is '2018-03-15 12:30:00', 'Metric A', 62 and i want send only one time and not more :</p>\n\n<p>in my mariadb bdd i have double line :</p>\n\n<pre><code> SELECT time, measurement, valueOne FROM `metric_values`;\n</code></pre>\n\n<p>results :</p>\n\n<pre><code>+---------------------+-----------------+----------+ \n| time                | measurement     | valueOne |\n+---------------------+-----------------+----------+ \n| 2018-03-15 12:30:00 | Metric A        |       62 | \n| 2018-03-15 12:30:00 | Metric A        |       62 |\n</code></pre>\n\n<p>my perl scipt :</p>\n\n<pre><code>use DBI;\nopen (FILE, 'logfile');\nwhile (&lt;FILE&gt;) {\n\n($word1, $word2, $word3, $word4, $word5, $word6, $word7, $word8, $word9, $word10, $word11, $word12, $word13, $word14) = split(\" \");\n\n$word13 =~ s/[^\\d.]//g;\n\n\n    if ($word13 &gt; 5) {\n\n        if ($word2 eq \"Jan\") {\n\n        $word2 = \"01\"\n        }\n\n        if ($word2 eq \"Feb\") {\n\n        $word2 = \"02\"\n        }\n\n        if ($word2 eq \"Mar\") {\n\n        $word2 = \"03\"\n        }\n\n        if ($word2 eq \"Apr\") {\n\n        $word2 = \"04\"\n        }\n\n        if ($word2 eq \"May\") {\n\n        $word2 = \"05\"\n        }\n\n        if ($word2 eq \"Jun\") {\n\n        $word2 = \"06\"\n        }\n\n        if ($word2 eq \"Jul\") {\n\n        $word2 = \"07\"\n        }\n\n        if ($word2 eq \"Aug\") {\n\n        $word2 = \"08\"\n        }\n\n        if ($word2 eq \"Sep\") {\n\n        $word2 = \"09\"\n        }\n\n        if ($word2 eq \"Oct\") {\n\n        $word2 = \"10\"\n        }\n\n        if ($word2 eq \"Nov\") {\n\n        $word2 = \"11\"\n        }\n\n        if ($word2 eq \"Dec\") {\n\n        $word2 = \"12\"\n        }\n\n        print \"'$word5-$word2-$word3 $word4', $word11, $word13 \\n\";\n\n              }\n    # Connect to the database.\n    my $dbh = DBI-&gt;connect(\"DBI:mysql:database=db;host=ip\",\n                           \"titi\", 'mp!',\n                           {'RaiseError' =&gt; 1}) ;\n\n\n    my $sth = $dbh-&gt;prepare(\n\n        \"INSERT `metric_values` (time, measurement, valueOne) VALUES('$word5-$word2-$word3 $word4', $word11, $word13);\")#result is ('2018-03-15 12:30:00', 'Metric A', 62)\n\n        or die \"prepare statement failed: $dbh-&gt;errstr()\";\n    $sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n    print $sth-&gt;rows . \" rows found.\\n\";\n\n    $sth-&gt;finish;\n</code></pre>\n\n<p>my log file:</p>\n\n<pre><code>Wed Oct 17 04:57:08 2018 : Resource = 'toto' cstep= 'titi' time =23.634s \nWed Oct 17 04:57:50 2018 : Resource = 'toto' cstep= 'titi' time =22.355s \n</code></pre>\n\n<h1>thanks for your response</h1>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 332, "user_id": 2010012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/01f47bec1cf38b0bc2ba112a6613fe1c?s=128&d=identicon&r=PG", "display_name": "james28909", "link": "https://stackoverflow.com/users/2010012/james28909"}, "edited": false, "score": 0, "creation_date": 1541745559, "post_id": 53220312, "comment_id": 93328757, "body": "Seems to work fine for me. Perl 5.22.1 in WSL"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1541746305, "post_id": 53220312, "comment_id": 93328994, "body": "Is the file you&#39;re reading from empty?"}, {"owner": {"reputation": 3, "user_id": 2150462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oS6Ju.png?s=128&g=1", "display_name": "rvzm", "link": "https://stackoverflow.com/users/2150462/rvzm"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541750516, "post_id": 53220312, "comment_id": 93330478, "body": "@Shawn it was, actually. Thank you. It turns out that updating the files on the vm from my laptop was overwriting the one I had generated (and was using), so I&#39;m adding a <code>dev</code> argument through getopt to generate stock files. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1541751960, "creation_date": 1541751960, "answer_id": 53222143, "question_id": 53220312, "link": "https://stackoverflow.com/questions/53220312/perl-claims-uninitialized-value-on-a-variable-that-was-set-from-an-array/53222143#53222143", "title": "Perl claims uninitialized value on a variable that was set from an array", "body": "<p>A few suggestions on your code.</p>\n\n<p>You should check whether you've opened an empty file and take appropriate action:</p>\n\n<pre><code>chomp(my @ls = &lt;$fhd&gt;);\ndie \"No data in file $dfile\\n\" unless @ls;\n</code></pre>\n\n<p>You can use list assignment simplify the next line:</p>\n\n<pre><code>my ($gt, $gn, $gp) = @ls;\n</code></pre>\n\n<p>You can use string interpolation to simplify your <code>print()</code> line:</p>\n\n<pre><code>print \"Game '$gn' was started $gt with $gp players.\\nthese were the scores:\\n\";\n</code></pre>\n\n<p>A <code>foreach</code> loop is usually far easier to understand than a C-style <code>for</code> loop.</p>\n\n<pre><code>foreach (3 .. $#ls) {\n  print $ls[$_];\n}\n</code></pre>\n\n<p>You can simplify that even more by iterating over array elements rather than array indexes.</p>\n\n<pre><code>foreach (@ls[3 .. $#ls]) {\n  print $_;\n}\n</code></pre>\n\n<p>Or perhaps rewrite it using the postfix version of the loop.</p>\n\n<pre><code>print foreach @ls[3 .. $#ls];\n</code></pre>\n\n<p>And, finally, if you want to exit your program in completely normal circumstances, then use <code>exit</code> instead of <code>die</code>.</p>\n\n<p>The first of these suggestions will solve the problem that you're having.</p>\n"}], "owner": {"reputation": 3, "user_id": 2150462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oS6Ju.png?s=128&g=1", "display_name": "rvzm", "link": "https://stackoverflow.com/users/2150462/rvzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541751960, "creation_date": 1541741111, "question_id": 53220312, "link": "https://stackoverflow.com/questions/53220312/perl-claims-uninitialized-value-on-a-variable-that-was-set-from-an-array", "title": "Perl claims uninitialized value on a variable that was set from an array", "body": "<p>I'm not sure why its doing this, but it is. I have a project i'm working on for keeping score, and saving it to text/data files. it also will show information saved in a file, and a few other goodies. Right now, i have a set of code that i'm trying to get working. I have the file set so that it automatically runs a certain sub, but i'm trying to trigger the sub that shows data. I run the script using <code>perl scorecard.pl --display-file scores.dat</code>, and i get the following:</p>\n\n<pre><code>    Use of uninitialized value $gn in print at scorecard.pl line 30.\n    Use of uninitialized value $gt in print at scorecard.pl line 30.\n    Use of uninitialized value $gp in print at scorecard.pl line 30.\n    Game '' was started  with  players.\n    these were the scores:\n    Use of uninitialized value $gp in numeric lt (&lt;) at scorecard.pl line 31.\n    Died at scorecard.pl line 35.\n    Welcome to scorecard\n    A simple scorecard script\n\n    What game would you like to score?\n    ^C\n</code></pre>\n\n<p>Here's the code for the display sub:</p>\n\n<pre><code>    sub dispfile()\n    {\n        my ($opt_name, $dfile) = @_;\n        open (my $fhd,'&lt;',$dfile)\n         or die \"Could not open file '\",$dfile,\"'.\\n\";\n        chomp(my @ls = &lt;$fhd&gt;);\n        my $gt = $ls[0];\n        my $gn = $ls[1];\n        my $gp = $ls[2];\n        print \"Game '\",$gn,\"' was started \",$gt,\" with \",$gp,\" players.\\nthese were the scores:\\n\";\n        for(my $i=3;$i&lt;$gp;$i++){\n            print $ls[$i];\n            }\n        close $fhd;\n        die;\n        }\n</code></pre>\n\n<p>The whole project is currently on my github, and i have pushed the latest version to my dev-0.1-r2 branch: <a href=\"https://github.com/rvzm/scorecard/blob/dev-0.1-r2/scorecard.pl\" rel=\"nofollow noreferrer\">GitHub - scorecard.pl</a></p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1541751122, "post_id": 53218233, "comment_id": 93330721, "body": "If you need to use the syntax <code>$self-&gt;attribute-&gt;{a} = ???</code> to update a hash key, I think a tied hash is the only(?) option. If however you could change syntax to <code>$self-&gt;attribute( &lt;args&gt; )</code> where <code>&lt;args&gt;</code> can be either a hash ref or a scalar, where <code>attribute</code> is now a method (not an attribute) and the old <code>attribute</code> is renamed to e.g. <code>_attribute</code>, you could avoid using a tied hash. Now the method <code>attribute</code> will check if its argument is a scalar or a hash ref and update <code>_attribute</code> accordingly."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1541774608, "post_id": 53218233, "comment_id": 93342406, "body": "@H&#229;kon I absolutly avoid to access attributes via internal reference, but I&#39;m developing a class will be used by other people, and I concerned on how to make it robust, because I&#39;m quite sure that some developer will use shortcuts  even if is not a best practice :-("}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1541762646, "post_id": 53224131, "comment_id": 93336416, "body": "Or simply use an object instead of hash"}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1541784843, "post_id": 53224131, "comment_id": 93348175, "body": "Can an overload of the copy constructor (=) be a possible solution for watching a variable (of any type) for changes?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1541785201, "post_id": 53224131, "comment_id": 93348337, "body": "@Hannibal According to the <a href=\"https://perldoc.perl.org/overload.html\" rel=\"nofollow noreferrer\">overload</a> documentation: \u201cSimple assignment is not overloadable\u201d. You&#39;d have to use tied scalars for that. I don&#39;t think the \u201ccopy constructor\u201d can help here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 2, "creation_date": 1541801695, "post_id": 53224131, "comment_id": 93354653, "body": "@Hannibal, Re &quot;<i>Can an overload of the copy constructor&quot;</i>, No. Copy constructor overloads are used to create immutable objects. Magic variables (of which tied variables is one type) would be the generic approach."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541807445, "post_id": 53224131, "comment_id": 93356081, "body": "Great @ikegami , you solved my day!!!!!!  ..after many years of Perl programming, that language never ends to astonish me.. MAGIC VARIABLES are the solution!!!"}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1541911018, "post_id": 53224131, "comment_id": 93376810, "body": "Well, I did some try with magic vars, but the scalar context propagation with a syntax like <code>sub()-&gt;{a}-&gt;{b}</code> forces the <code>store</code> event to fire even if there is no (explicit) assignment. A tied (recursive) interface seems the only way for achieving my goal."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1541759995, "creation_date": 1541759995, "answer_id": 53224131, "question_id": 53218233, "link": "https://stackoverflow.com/questions/53218233/watch-for-changes-of-a-moose-attribute/53224131#53224131", "title": "Watch for changes of a Moose attribute", "body": "<p>Once you change the hash ref directly rather than using accessor methods, Moose is no longer involved. Having your attributes return a reference to a tied hash would be the only strategy to make changes to the hash observable, yet this is not a particularly attractive solution. Tied variables are rare and likely to trigger bugs in some code. They are comparatively difficult to implement. And they imply a performance overhead for every hash access.</p>\n\n<p>Strongly consider whether you can change your design to avoid exposing the internal hash. E.g. have a getter that only returns a (shallow) copy of the hash, and a setter for individual elements in the hash. You may be able to autogenerate some of these accessors using the <code>handles</code> and <code>traits</code> mechanisms, e.g. see <a href=\"https://metacpan.org/pod/Moose::Meta::Attribute::Native::Trait::Hash\" rel=\"nofollow noreferrer\"> Moose::Meta::Attribute::Native::Trait::Hash</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1541819758, "post_id": 53235122, "comment_id": 93357944, "body": "Hmm. It shouldn&#39;t since nothing is being stored. Will investigate when I&#39;m no longer loafinated (have a loaf of cat on me)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541871962, "post_id": 53235122, "comment_id": 93368998, "body": "It&#39;s still triggering for <code>my $x = $doc-&gt;value-&gt;{ b }-&gt;{ c };</code>"}], "tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": false, "score": 2, "last_activity_date": 1541910902, "last_edit_date": 1541910902, "creation_date": 1541811715, "answer_id": 53235122, "question_id": 53218233, "link": "https://stackoverflow.com/questions/53218233/watch-for-changes-of-a-moose-attribute/53235122#53235122", "title": "Watch for changes of a Moose attribute", "body": "<p>The following approach, based on <a href=\"https://metacpan.org/pod/Tie::Trace\" rel=\"nofollow noreferrer\">Tie::Trace</a> Perl module, demonstrates how to easily watch for a Moose attribute change, even if modified through a direct access to the contained hashref instead of using the appropriate setter method.  </p>\n\n<pre><code>package Test::Document ;\n\nuse Mouse ;\nuse Tie::Trace qw&lt;watch&gt; ;\n\nhas _changed =&gt; ( is =&gt; 'rw', isa =&gt; 'Bool' ) ;\n...\nhas value =&gt; (\n    is      =&gt; 'rw', isa =&gt; 'HashRef',\n    default =&gt; sub { { } },\n    trigger =&gt; sub { shift-&gt;_changed( 1 )  }\n) ;\n\nsub BUILD {\n    my ( $self ) = @_ ;\n    $self-&gt;_changed( 0 ) ; # reset flag\n    watch %{ $self-&gt;{ value } } , debug=&gt; sub {\n        $self-&gt;_changed(1)\n    };\n    return $self ;\n}\n\npackage main ;\n\nmy $doc = Test::Document-&gt;new( value =&gt; { a =&gt; 1 , b =&gt; { c =&gt; 3 } } ) ;\n\nmy $x = $doc-&gt;value-&gt;{ b }-&gt;{ e } ; # not changed\n\n$doc-&gt;value-&gt;{ b }-&gt;{ e } = 4 ; # changed\n\n$doc-&gt;_changed(0);\ndelete $doc-&gt;value-&gt;{ b }-&gt;{ e } ; # changed\n\n$doc-&gt;_changed(0);\n$doc-&gt;value({ a =&gt; 1 }) ; # changed\n</code></pre>\n\n<p>PROS: It works :)</p>\n\n<p>CONS: The recursive tied approach, on hashes with a lot of keys and nesting levels, may produce performance issues. I have to do some benchmark.    </p>\n\n<p>NOTE: I tried with the magic vars, but the scalar context propagation with a syntax like <code>sub()-&gt;{a}-&gt;{b}</code> forces the <code>store</code> event to fire even if there is no (explicit) assignment. Suggestions are welcome.</p>\n"}], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 53224131, "answer_count": 2, "score": 1, "last_activity_date": 1541910902, "creation_date": 1541724122, "last_edit_date": 1541862018, "question_id": 53218233, "link": "https://stackoverflow.com/questions/53218233/watch-for-changes-of-a-moose-attribute", "title": "Watch for changes of a Moose attribute", "body": "<p>Is there any way in Moose of triggering a callback when the content of an attribute is changed via reference instead of setting its value via mutator?</p>\n\n<p>Let's assume the following code:</p>\n\n<pre><code>has _changed  =&gt; ( is =&gt; 'rw' , isa=&gt;'Bool' ) ;\nhas attribute =&gt; ( \n    is=&gt;'rw', isa=&gt;'Maybe[HashRef]', \n    default =&gt; sub { { a =&gt; 1 , b =&gt; 2 } },     \n    trigger =&gt; sub { shift-&gt;_changed(1) } \n) ;\n</code></pre>\n\n<p>the trigger works as expected setting the attribute value through mutator: </p>\n\n<pre><code>$self-&gt;attribute({ a =&gt; 2 , b =&gt; 2 }) ; # OK\n</code></pre>\n\n<p>but setting directly a value through its key then the trigger doesn't fires (of course): </p>\n\n<pre><code>$self-&gt;attribute-&gt;{a} = 3 ; # KO\n</code></pre>\n\n<p>I discarded the idea of creating (and comparing) a digest of serialized attribute's content, because it can be a very huge hashref with several nesting levels, and making a digest at every attribute access can produce a performance issue.</p>\n\n<p>A tied hashref (as attribute value) could be a possible solution?\nAny idea or suggestion is very appreciated. </p>\n\n<p>NOTE: The structure of contained hashref is not known (I'm writing an ORM class, so the struct can vary depending on documents stored on NOSQL db side).</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1541714802, "post_id": 53216837, "comment_id": 93321396, "body": "What problems do you have?"}, {"owner": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541715908, "post_id": 53216837, "comment_id": 93321813, "body": "don<code>t wotk .. the phone numbers don</code>t extract"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541716212, "post_id": 53216837, "comment_id": 93321935, "body": "Can you post a sample of the input and the expected numbers to extract? Note that <code>|+</code> fails for me with <code>Quantifier follows nothing in regex; marked by &lt;-- HERE in m&#47;|+ &lt;-- HERE &#47; at ...</code>."}, {"owner": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1541716329, "post_id": 53216837, "comment_id": 93321979, "body": "(31, &#39;cell&#39;, 20, &#39;&#39;, &#39;0860720877&#39;, 0), (41, &#39;cell&#39;, 25, &#39;&#39;, &#39;0879057884&#39;, 0), (43, &#39;cell&#39;, 26, &#39;&#39;, &#39;0879565724&#39;, 0), (46, &#39;cell&#39;, 28, &#39;&#39;, &#39;0872374089&#39;, 0), (23, &#39;cell&#39;, 15, &#39;Terri&#39;, &#39;0872213090&#39;, 0), like this looks"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541716462, "post_id": 53216837, "comment_id": 93322033, "body": "Your regular expression has a <code>3</code>, as if you expect each phone number to begin with <code>083...</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1541752170, "post_id": 53216837, "comment_id": 93331202, "body": "@MyUnivers: Please <a href=\"https://stackoverflow.com/posts/53216837/edit\">edit your question</a> to include the input data that you have given in a comment. Unformatted data in a comment is hard to read."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "edited": false, "score": 0, "creation_date": 1541716997, "post_id": 53217137, "comment_id": 93322231, "body": "ie]# perl -wne&#39;for(/(?:(?:\\b00|\\+)08[. ]?)?3\\d{2}[. ]?\\d{6,7}\\b/g) { print &quot;$_\\n&quot; } *.txt &gt;save;cat save |sort|uniq&gt;mmm;wc -l mmm &gt; ^C  don`t work .."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "edited": false, "score": 0, "creation_date": 1541717245, "post_id": 53217137, "comment_id": 93322334, "body": "What does the <code>3</code> mean?  <code>08[,]?)?   --&gt; 3 &lt;--- \\d{2}[.] ...</code>"}, {"owner": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "edited": false, "score": 0, "creation_date": 1541717423, "post_id": 53217137, "comment_id": 93322400, "body": "sorry i copy it from other comm and i foggot to delete it"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1541716272, "creation_date": 1541716272, "answer_id": 53217137, "question_id": 53216837, "link": "https://stackoverflow.com/questions/53216837/hello-i-have-some-problems-with-this-perl-wnewhile/53217137#53217137", "title": "hello i have some problems with this perl -wne&#39;while", "body": "<p>Problem 1: <code>+</code> is a metacharacter you need to escape or else you will see the error message</p>\n\n<blockquote>\n  <p><code>Quantifier follows nothing in regex; marked by &lt;-- HERE in m/(?:(?:\\b00|+ &lt;-- HERE</code></p>\n</blockquote>\n\n<p>So change the expression in that group to <code>(?:\\b00|\\+)</code></p>\n\n<p>Problem 2: <code>while (condition) { ... }</code> is an infinite loop if <code>condition</code> is true and if <code>condition</code> doesn't change inside the loop.</p>\n\n<p>When the script does find a match, the while loop will never terminate and it will print out the first match it finds into the file <code>save</code>, forever.</p>\n\n<p>An alternative to <code>while (/.../) { print $&amp; }</code> that will Do What You Mean is <code>for (/.../g) { print $_ }</code>. The <code>/g</code> modifier asks Perl to find as many matches as it can on the input. The <code>for (LIST) { ... }</code> construct loads each element of the list into the topic variable <code>$_</code>.</p>\n\n<p>Updated script now looks like:</p>\n\n<pre><code>for(/(?:(?:\\b00|\\+)08[. ]?)?3\\d{2}[. ]?\\d{6,7}\\b/g) { print \"$_\\n\" }\n</code></pre>\n\n<p>If you continue to have trouble, include examples of your input, what you expect the output to be, and any error messages you observe when your code runs.</p>\n"}], "owner": {"reputation": 11, "user_id": 10625886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MyUnivers", "link": "https://stackoverflow.com/users/10625886/myunivers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541716272, "creation_date": 1541714624, "last_edit_date": 1541714756, "question_id": 53216837, "link": "https://stackoverflow.com/questions/53216837/hello-i-have-some-problems-with-this-perl-wnewhile", "title": "hello i have some problems with this perl -wne&#39;while", "body": "<p>I have some problems with this</p>\n\n<pre><code>perl -wne 'while(/(?:(?:\\b00|+)08[. ]?)?3\\d{2}[. ]?\\d{6,7}\\b/){print \"$&amp;\\n\"}' *.txt &gt;save\ncat save |sort|uniq&gt;mmm\nwc -l mmm \n</code></pre>\n\n<p>How can I exatrct from a file some phone numbers .. the numbers start with 08 .. </p>\n"}, {"tags": ["perl", "ssl", "https", "daemon", "chain"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1541708485, "creation_date": 1541708485, "answer_id": 53215555, "question_id": 53215350, "link": "https://stackoverflow.com/questions/53215350/httpdaemonssl-auto-fetch-and-serve-intermediate-certs/53215555#53215555", "title": "HTTP::Daemon::SSL auto-fetch and serve intermediate certs", "body": "<p>There is no builtin way to make HTTP::Daemon::SSL automatically get the missing certificates. Also, your observation that such thing is done with Apache or Python is wrong. In general the server need to be properly configured to send the necessary certificates. </p>\n\n<p>Some browsers can work around misconfigured servers and sometimes these workarounds work only in specific situations. For example Firefox will cache intermediate certificates it has seen and use these to fill in missing chain certificates in other connections later. But this will fail if the intermediate certificate was not seen before by Firefox which can be easily tried with a newly created profile. What you've saw with Apache and Python is likely the use of already cached certificates.<br>\nSome browsers can also use the CA Issuers attribute in the Authority Information Access extension of the certificate to download a missing certificate. I think Chrome can do this. But this will of course impact the load time of the page since the missing certificate need to be retrieved first from some other server.</p>\n"}], "owner": {"reputation": 3, "user_id": 9513546, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Steve Palmer", "link": "https://stackoverflow.com/users/9513546/steve-palmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53215555, "answer_count": 1, "score": 0, "last_activity_date": 1541708485, "creation_date": 1541707527, "question_id": 53215350, "link": "https://stackoverflow.com/questions/53215350/httpdaemonssl-auto-fetch-and-serve-intermediate-certs", "title": "HTTP::Daemon::SSL auto-fetch and serve intermediate certs", "body": "<p>I\u2019ve create a secure server in Perl using HTTP::Daemon::SSL on Windows 8.1\nIt works fine with Chrome and IE.  It fails under Firefox \u2013 ISSUER UNKNOWN.\nI can append to the SSL_cert_file the issuer\u2019s chain cert and Firefox can then connect.\nI\u2019ve notice Firefox has no problems WITHOUT the issuer\u2019s chain cert appended to the SSL_cert_file when using as a secure server Apache on Windows or Python on a Raspberry Pi.\nIs there any way to tell Perl\u2019s HTTP::Daemon::SSL to fetch and serve the required chain certificate(s) without having to manually add them to SSL_cert_file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 6, "creation_date": 1541696160, "post_id": 53212269, "comment_id": 93312815, "body": "Enabling warnings would give you a hint to the problem"}, {"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 0, "creation_date": 1541696300, "post_id": 53212269, "comment_id": 93312910, "body": "can&#39;t reproduce the problem on mac with 5.18.2 . Did a loop of 10000 repeats and the ordering is consistent"}, {"owner": {"reputation": 31, "user_id": 2434977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da9cfc57cbd6bf497877feae507b24c2?s=128&d=identicon&r=PG", "display_name": "user2434977", "link": "https://stackoverflow.com/users/2434977/user2434977"}, "edited": false, "score": 0, "creation_date": 1541723845, "post_id": 53212269, "comment_id": 93324022, "body": "I add a loop in the program, but get 10000 same result."}], "answers": [{"comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1541696622, "post_id": 53212371, "comment_id": 93313102, "body": "Comparing by strings (naively, anyway) would put <code>10:00</code> before <code>9:00</code>, though. You need something that handles such time strings specifically."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1541696806, "post_id": 53212371, "comment_id": 93313212, "body": "If you want to sort by &quot;clock times&quot;, you could do <code>sort { my ($h_a, $m_a) = split &#47;:&#47;, $d{$a}{t1}; my ($h_b, $m_b) = split &#47;:&#47;, $d{$b}{t1}; $h_a &lt;=&gt; $h_b || $m_a &lt;=&gt; $m_b } keys %d</code>. This would still of course not understand things like AM and PM and day changes."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1541698099, "post_id": 53212371, "comment_id": 93313904, "body": "Or if these are (for example) minute:second durations, you could use <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a> like so: <code>use List::UtilsBy &#39;nsort_by&#39;; foreach my $k (nsort_by { my ($m, $s) = split &#47;:&#47;, $d{$_}{t1}; $m*60 + $s } keys %d) { ... }</code>"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1541699979, "last_edit_date": 1541699979, "creation_date": 1541695532, "answer_id": 53212371, "question_id": 53212269, "link": "https://stackoverflow.com/questions/53212269/perl-sort-hash-how-to-sort-by-hashkey-secondkey/53212371#53212371", "title": "Perl sort hash, how to sort by $hash{$key}-&gt;{secondkey}", "body": "<p>You need to use <code>cmp</code> instead of <code>&lt;=&gt;</code> since you are comparing strings.\nThe comments are correct and we need to take into consideration 10+ hours.\nYou need to use sprintf to add leading zero when hours are less than 10 to have strings sorted correctly.</p>\n\n<pre><code>foreach my $k (sort { sprintf(\"%05s\", ($d{$a}-&gt;{t1})) cmp sprintf(\"%05s\", ($d{$b}-&gt;{t1})) } keys %d) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 31, "user_id": 2434977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da9cfc57cbd6bf497877feae507b24c2?s=128&d=identicon&r=PG", "display_name": "user2434977", "link": "https://stackoverflow.com/users/2434977/user2434977"}, "edited": false, "score": 0, "creation_date": 1541874302, "post_id": 53216738, "comment_id": 93369705, "body": "@user2434977 kindly mark the question as answered, thanks"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1541714058, "creation_date": 1541714058, "answer_id": 53216738, "question_id": 53212269, "link": "https://stackoverflow.com/questions/53212269/perl-sort-hash-how-to-sort-by-hashkey-secondkey/53216738#53216738", "title": "Perl sort hash, how to sort by $hash{$key}-&gt;{secondkey}", "body": "<p><code>&lt;=&gt;</code> is for comparing numbers, but your times have a colon, which makes them strings instead of numbers. One workaround is to just remove the colon, so that <code>&lt;=&gt;</code> can operate on them in number context.</p>\n\n<pre><code>use v5.10;\n\nsay \"$_: $d{$_}-&gt;{t1}\" for sort { $d{$a}-&gt;{t1} =~ s/://r &lt;=&gt; $d{$b}-&gt;{t1} =~ s/://r } keys %d;\n</code></pre>\n\n<p>The <code>r</code> modifier on the substitution means return the new value without altering the old value.</p>\n"}], "owner": {"reputation": 31, "user_id": 2434977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da9cfc57cbd6bf497877feae507b24c2?s=128&d=identicon&r=PG", "display_name": "user2434977", "link": "https://stackoverflow.com/users/2434977/user2434977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541714058, "creation_date": 1541695199, "last_edit_date": 1541706405, "question_id": 53212269, "link": "https://stackoverflow.com/questions/53212269/perl-sort-hash-how-to-sort-by-hashkey-secondkey", "title": "Perl sort hash, how to sort by $hash{$key}-&gt;{secondkey}", "body": "<p>I have a Perl function:</p>\n\n<pre><code>my %d;\n\n$d{\"aaaa\"}-&gt;{t1} = \"9:49\";\n$d{\"bbbb\"}-&gt;{t1} = \"9:30\";\n\nforeach my $k (sort { ($d{$a}-&gt;{t1}) &lt;=&gt; ($d{$b}-&gt;{t1}) } keys %d)\n{\n    print \"$k:  $d{$k}-&gt;{t1}\\n\";\n}\n</code></pre>\n\n<p>I want to sort by t1, so 9:30 before 9:49 and I want to get the result:</p>\n\n<pre><code>bbbb:  9:30\naaaa:  9:49\n</code></pre>\n\n<p>but the result is not suitable.</p>\n\n<p>It seems like the result is random?</p>\n\n<pre><code>C:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\naaaa:  9:49\nbbbb:  9:30\n\nC:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\nbbbb:  9:30\naaaa:  9:49\n\nC:\\tmp&gt;a.pl\naaaa:  9:49\nbbbb:  9:30\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BMc55.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BMc55.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "unicode", "utf-8", "escaping", "unicode-escapes"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1541699856, "post_id": 53210791, "comment_id": 93314676, "body": "FYI, you need <code>-Mutf8</code> or <code>use utf8;</code> for your source code to be interpreted from UTF-8 (since that&#39;s how Perl ends up receiving it from the command line or a file). This is independent of how you end up outputting it."}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1541850406, "post_id": 53210791, "comment_id": 93363183, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/627661/how-can-i-output-utf-8-from-perl\">How can I output UTF-8 from Perl?</a>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1541851815, "post_id": 53210791, "comment_id": 93363540, "body": "@Lankymart not a duplicate. The linked question is about outputting Unicode characters properly. This question is about escaping Unicode characters. The solutions (IO layers vs Data::Dumper) are completely different."}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1541851920, "post_id": 53210791, "comment_id": 93363560, "body": "@amon I may not be a Perl programmer, but using <code>print</code> to output multi byte characters seems the same however you spin it."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 5, "creation_date": 1541852614, "post_id": 53210791, "comment_id": 93363734, "body": "@Lankymart I&#39;m a Perl tag gold badge holder and could duplicate-close the question with a single vote if it were a duplicate. But understanding of Perl is not required here. That question asks how to output properly encoded Unicode characters, e.g. <code>\ud83d\ude00</code>. This question additionally wants to output escapes, e.g. <code>\\x{1f600}</code>. They both use <code>print</code> merely because they both want to <i>output</i> something, but they output something different."}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1541861472, "post_id": 53210791, "comment_id": 93366051, "body": "@amon Fair enough, my mistake."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 13, "last_activity_date": 1541693390, "last_edit_date": 1541693390, "creation_date": 1541691931, "answer_id": 53211263, "question_id": 53210791, "link": "https://stackoverflow.com/questions/53210791/escape-multibyte-characters/53211263#53211263", "title": "Escape multibyte characters", "body": "<p><code>Data::Dumper</code>, for one, can do this.</p>\n\n<pre><code>use utf8;\nuse Encode;\nuse Data::Dumper;\n$Data::Dumper::Terse = 1;   # suppress  '$VAR1 = ...' header\n$Data::Dumper::Useqq = 1;   # make output printable\n\nprint Dumper(\"hello \u263a world\");\nprint Dumper(encode(\"UTF-8\",\"hello \u263a world\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"hello \\x{263a} world\"\n\"hello \\342\\230\\272 world\"\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong>: the relevant function in the <code>Data::Dumper</code> module is <code>qquote</code>, so you can skip setting <code>$Useqq</code> and <code>$Terse</code>:</p>\n\n<pre><code>use utf8;\nuse Encode;\nuse Data::Dumper;\n\nprint Data::Dumper::qquote(\"hello \u263a world\"), \"\\n\";\nprint Data::Dumper::qquote(encode(\"UTF-8\",\"hello \u263a world\")), \"\\n\";\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10624526"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1541693390, "creation_date": 1541690458, "question_id": 53210791, "link": "https://stackoverflow.com/questions/53210791/escape-multibyte-characters", "title": "Escape multibyte characters", "body": "<p>With Python - I can take a string and return it with multibyte characters\nUTF-8 escaped:</p>\n\n<pre><code>$ python3 -c 'print(\"hello \u263a world\".encode(\"utf-8\"))'\nb'hello \\xe2\\x98\\xba world'\n</code></pre>\n\n<p>Or unicode escaped:</p>\n\n<pre><code>$ python3 -c 'print(\"hello \u263a world\".encode(\"unicode-escape\"))'\nb'hello \\\\u263a world'\n</code></pre>\n\n<p>Can Perl do something like this? I tried \"quotemeta\" but it seems it is not the\nright tool:</p>\n\n<pre><code>$ perl -e 'print quotemeta(\"hello \u263a world\\n\");'\nhello\\ \\\ufffd\\\ufffd\\\ufffd\\ world\\\n</code></pre>\n"}, {"tags": ["perl", "fork"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1541678134, "post_id": 53206592, "comment_id": 93302468, "body": "What are the exit codes of crashing children? <code>wait()</code> returns that exit code, so you can act on that."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541686652, "post_id": 53206592, "comment_id": 93307062, "body": "<code>wait</code> returns a process id but sets the exit code in <code>$?</code> as a side-effect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541699988, "post_id": 53206592, "comment_id": 93314741, "body": "&quot;<i>failrly standard stuff</i>&quot; -- note though that the blocking <code>wait</code> waits for one process one at a time. So if something takes longer you won&#39;t know about any others before that one&#39;s done. (And what if one locks up?) Consider a loop with non-blocking (<code>WNOHANG</code>) <code>waitpid</code> instead. There are examples in <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a> and <a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1541700287, "post_id": 53206592, "comment_id": 93314904, "body": "Also, there is no need for <code>defined</code> test in the <code>if-elsif</code> branches since you nicely check right after the <code>fork</code> whether it returned <code>undef</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541679741, "post_id": 53207387, "comment_id": 93303276, "body": "The POSIX module has <a href=\"http://perldoc.perl.org/POSIX.html#WAIT\" rel=\"nofollow noreferrer\">functions</a> for examining the return value to find out why it exited. OP probably needs <code>WIFSIGNALED()</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541686598, "post_id": 53207387, "comment_id": 93307022, "body": "It&#39;s the other way. A normal non-zero exit code will be shifted 8 bits to the right (multiplied by 256) in <code>$?</code>. When <code>$?</code> is greater than 0 but less than 256, it holds the signal number that terminated the child process."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1541689673, "post_id": 53207387, "comment_id": 93308931, "body": "@mob, Not quite either. Only the lower 7 bits hold the signal number. The 8th indicates a core dump. Fixed the answer."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1541689810, "last_edit_date": 1541689810, "creation_date": 1541678691, "answer_id": 53207387, "question_id": 53206592, "link": "https://stackoverflow.com/questions/53206592/perl-fork-how-to-check-if-child-crashed/53207387#53207387", "title": "perl fork() how to check if child crashed", "body": "<p>As per the document for <code>wait</code>:</p>\n\n<blockquote>\n  <p>Behaves like wait(2) on your system: it waits for a child process to\n                 terminate and returns the pid of the deceased process, or \"-1\" if\n                 there are no child processes.  The status is returned in $?  and\n                 \"${^CHILD_ERROR_NATIVE}\".  Note that a return value of \"-1\" could\n                 mean that child processes are being automatically reaped, as\n                 described in perlipc.</p>\n</blockquote>\n\n<p>If your child was killed by a signal, <code>$? &amp; 0x7F</code> will be true and equal to the number of the signal that killed the child.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1541690247, "last_edit_date": 1541690247, "creation_date": 1541689330, "answer_id": 53210419, "question_id": 53206592, "link": "https://stackoverflow.com/questions/53206592/perl-fork-how-to-check-if-child-crashed/53210419#53210419", "title": "perl fork() how to check if child crashed", "body": "<p><code>wait</code> sets <code>$?</code></p>\n\n<blockquote>\n  <p>Behaves like <code>wait(2)</code> on your system: it waits for a child process to terminate and returns the pid of the deceased process, or <code>-1</code> if there are no child processes. The status is returned in <code>$?</code> and $<code>{^CHILD_ERROR_NATIVE}</code>.</p>\n</blockquote>\n\n<p>So,</p>\n\n<pre><code>my $child_pid = wait();\n\nif    ( $? == -1  ) { die \"wait failed: $!\\n\"; }\nelsif ( $? &amp; 0x7F ) { warn \"Child $child_pid killed by signal \".( $? &amp; 0x7F ).\"\\n\"); }\nelsif ( $? &gt;&gt; 8   ) { warn \"Child $child_pid exited with error \".( $? &gt;&gt; 8 ).\"\\n\"); }\nelse                { print \"Child $child_pid exited successfully\\n\"; }\n</code></pre>\n\n<p>If the program truly crashed, you'd get <code>Child killed by signal 11</code>, which is <code>SIGSEGV</code>.</p>\n\n<p>If it threw an uncaught exception, you'd likely get <code>Child exited with error XXX</code>. The exact value will vary by program and could be meaningless. By default, Perl uses <code>$! || ($? &gt;&gt; 8) || 255</code> for exit value on an uncaught exception.</p>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 1, "accepted_answer_id": 53210419, "answer_count": 2, "score": 2, "last_activity_date": 1541690247, "creation_date": 1541675559, "question_id": 53206592, "link": "https://stackoverflow.com/questions/53206592/perl-fork-how-to-check-if-child-crashed", "title": "perl fork() how to check if child crashed", "body": "<p>I have some Perl code that generates a number of child processes. The basic code is as follows:</p>\n\n<pre><code> my $forked = 0;\n my $err = 0;\n my $Processes_To_Use_After_Calc=10;     \n print \"Parent ($$) has started\\n\";\n for my $ispawn (1 .. $Processes_To_Use_After_Calc){\n    my $child_pid = fork();\n    die \"Cannot fork: $!\" if !defined $child_pid; # system overload\n    if(defined $child_pid &amp;&amp; $child_pid &gt; 0) {\n        ## Parent\n        $forked++;\n    } elsif(defined $child_pid){\n        #\n        # Here some calculations are performed\n        #\n        print \"Child $$ has finished (number $ispawn) \\n\";\n    }\n}\nfor(1..$forked) {\n    my $child_pid = wait();\n}\n</code></pre>\n\n<p>All fairly standard stuff. Now, I would like to know if any of the child processes crash (failed to terminate correctly). Clearly if the last statement of each child process is not printed I could assume there was a problem. However I would like another method that would exit the parent program completely and close all child processes that were still open if one of the child processes crashes. Is this possible?</p>\n"}, {"tags": ["perl", "getcwd", "cwd"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541671914, "post_id": 53205339, "comment_id": 93299207, "body": "Can it run external programs via backticks/<code>qx</code>?"}, {"owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541672902, "post_id": 53205339, "comment_id": 93299742, "body": "I don&#39;t want to use external programs."}, {"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 0, "creation_date": 1541676101, "post_id": 53205339, "comment_id": 93301338, "body": "Does your program use chdir internally?  Could you read the working directory from %ENV maybe?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541676364, "post_id": 53205339, "comment_id": 93301488, "body": "No <code>my $dir = qx&#47;pwd&#47;;</code> then? What OS is this for?"}, {"owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "edited": false, "score": 0, "creation_date": 1541677641, "post_id": 53205339, "comment_id": 93302226, "body": "OS = win32 And is it possible to get CWD internally, without external programs, environment variables, and etc."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541680220, "post_id": 53205339, "comment_id": 93303532, "body": "Why do you not want to use external programs or anything like that? For that matter, why not a full Perl?"}, {"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 0, "creation_date": 1541680502, "post_id": 53205339, "comment_id": 93303669, "body": "Why can&#39;t you reference %ENV?  Would a function call be acceptable?"}, {"owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "edited": false, "score": 0, "creation_date": 1541686644, "post_id": 53205339, "comment_id": 93307057, "body": "Guyz, my question is &quot;is it possible&quot;, and not &quot;why do I not want&quot;."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541688867, "post_id": 53205339, "comment_id": 93308452, "body": "And none of us want to waste time with an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>, which, given the odd requirements and lack of explanation, this sounds like."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541690829, "post_id": 53205339, "comment_id": 93309665, "body": "Re &quot;<i>my question is &quot;is it possible&quot;</i>&quot;, No, it&#39;s not. You were told you it was possible, and you rejected it. So we&#39;re trying to figure out what your question really is."}, {"owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "edited": false, "score": 0, "creation_date": 1541696868, "post_id": 53205339, "comment_id": 93313245, "body": "@Spawn I asking because the very old versions of miniperl was linked with win32 module and getcwd is worked there without any externals libs. Newer versions have not Win32. So I&#39;m interesting are there alternate ways to get CWD in newer versions without external routines. Maybe there is a way to compile and build miniperl linked to Win32 or CWD module. You really should not waste your time if you have no idea."}, {"owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541697290, "post_id": 53205339, "comment_id": 93313483, "body": "@ikegami The old version of miniperl is used in old project where software size is very critical. We do not want to add additional executables. We do not want to use external environment. We want to update miniperl for some reasons, but we need to CWD routines that is not supported in new versions. SO IT&#39;S YES - Questions is &quot;is it possible&quot;."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541710065, "post_id": 53205339, "comment_id": 93319475, "body": "The current directory is <code>.</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1541760128, "post_id": 53205339, "comment_id": 93335193, "body": "Re &quot;<i>Maybe there is a way to compile and build miniperl linked to Win32 or CWD module.</i>&quot;, You can definitely do that with <code>perl</code>. Don&#39;t know about <code>miniperl</code>. <code>miniperl</code> is a tool for building <code>perl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1541763110, "creation_date": 1541763110, "answer_id": 53224946, "question_id": 53205339, "link": "https://stackoverflow.com/questions/53205339/is-it-possible-to-get-current-working-directory-in-miniperl-not-perl/53224946#53224946", "title": "Is it possible to get Current Working Directory in miniperl (NOT PERL)?", "body": "<p>Yes, it's possible using the following:</p>\n\n<pre><code>chomp( my $cwd = `cd` );\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 7068954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkLYk.gif?s=128&g=1", "display_name": "NoSkill", "link": "https://stackoverflow.com/users/7068954/noskill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 53224946, "answer_count": 1, "score": -1, "last_activity_date": 1541763110, "creation_date": 1541671210, "question_id": 53205339, "link": "https://stackoverflow.com/questions/53205339/is-it-possible-to-get-current-working-directory-in-miniperl-not-perl", "title": "Is it possible to get Current Working Directory in miniperl (NOT PERL)?", "body": "<p>The only difference between miniperl and perl is that miniperl cannot load XS-based perl modules as shared objects. So it can't load WIN32 or CWD modules.</p>\n\n<p>Is it possible to get Current Working Directory in miniperl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1566, "user_id": 838719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e41f0d263b08f4986d8e538d01a751fb?s=128&d=identicon&r=PG", "display_name": "Florian Echtler", "link": "https://stackoverflow.com/users/838719/florian-echtler"}, "edited": false, "score": 0, "creation_date": 1541668453, "post_id": 53204566, "comment_id": 93297243, "body": "You should add a lot more detail to this question. Are you looking for Perl code to find odd numbers in the argument list?"}, {"owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "reply_to_user": {"reputation": 1566, "user_id": 838719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e41f0d263b08f4986d8e538d01a751fb?s=128&d=identicon&r=PG", "display_name": "Florian Echtler", "link": "https://stackoverflow.com/users/838719/florian-echtler"}, "edited": false, "score": 0, "creation_date": 1541668509, "post_id": 53204566, "comment_id": 93297270, "body": "my %count; foreach $arg (@ARGV){  \t$count{$arg}++; \tif ($count{$arg} % 2 eq 1){ \t\tprint &quot;$arg&quot;; \t} \t } print &quot;\\n&quot;; But not working"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1541668537, "post_id": 53204566, "comment_id": 93297285, "body": "What have you tried? And what makes a even and b odd? They&#39;re both letters, not numbers..."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "edited": false, "score": 0, "creation_date": 1541672197, "post_id": 53205020, "comment_id": 93299361, "body": "And wahts the difference between ++$counts{$arg}; And  $counts{$arg}++?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "edited": false, "score": 0, "creation_date": 1541672346, "post_id": 53205020, "comment_id": 93299449, "body": "They don&#39;t return quite the same thing. But if you ignore the value they return, there is no difference because <code>$counts{$arg}++;</code> gets optimized into <code>++$counts{$arg};</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1541669978, "creation_date": 1541669978, "answer_id": 53205020, "question_id": 53204566, "link": "https://stackoverflow.com/questions/53204566/perl-find-odd-odd-number-in-argument/53205020#53205020", "title": "perl find odd odd number in argument", "body": "<p>It looks like you want to print the values that appear an odd number of times.</p>\n\n<p>The problem with your attempt is that you check the counts before you finish obtaining the count of the different values!</p>\n\n<p>Solution:</p>\n\n<pre><code>my %counts;\nfor my $arg (@ARGV) {\n    ++$counts{$arg};\n}\n\nmy @matches;\nfor my $arg (@ARGV) {\n    if ($counts{$arg} % 2 == 1) {\n        push @matches, $arg;\n    }\n}\n\nprint(\"@matches\\n\");\n</code></pre>\n\n<p>Note that I changed <code>eq</code> to <code>==</code> because <code>eq</code> is for string comparisons.</p>\n\n<p>Simplified solution:</p>\n\n<pre><code>my %counts;\n++$counts{$_} for @ARGV;\nmy @matches = grep { $counts{$_} % 2 } @ARGV;\nprint(\"@matches\\n\");\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10616791, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917306068346676/picture?type=large", "display_name": "Brian Li", "link": "https://stackoverflow.com/users/10616791/brian-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 1, "accepted_answer_id": 53205020, "answer_count": 1, "score": -1, "last_activity_date": 1541669978, "creation_date": 1541668311, "last_edit_date": 1541669719, "question_id": 53204566, "link": "https://stackoverflow.com/questions/53204566/perl-find-odd-odd-number-in-argument", "title": "perl find odd odd number in argument", "body": "<p>Example:</p>\n\n<pre><code>./odd.pl a a b b b\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>b b b\n</code></pre>\n\n<p>find a odd number argument and print</p>\n\n<p>I tried:</p>\n\n<pre><code>my %count;\nforeach $arg (@ARGV) {\n    $count{$arg}++;\n    if ($count{$arg} % 2 eq 1) { print \"$arg\"; }\n}\n\nprint \"\\n\";\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1541657335, "post_id": 53202134, "comment_id": 93292942, "body": "<code>echo &quot;${STR1%&#47;*}&#47;&quot;</code>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1598094093, "post_id": 53202134, "comment_id": 112349462, "body": "I apologies I mistakenly reopened this. I am not able to make it dup now, could someone please make it dup <a href=\"https://stackoverflow.com/questions/4563060/how-to-cut-the-last-field-from-a-shell-string\" title=\"how to cut the last field from a shell string\">stackoverflow.com/questions/4563060/&hellip;</a>  my kid has wrongly touched that option :)"}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 4, "last_activity_date": 1541656468, "last_edit_date": 1541656468, "creation_date": 1541656139, "answer_id": 53202170, "question_id": 53202134, "link": "https://stackoverflow.com/questions/53202134/how-to-remove-last-element-of-the-delimited-string-using-bash-sed-awk-perl-insid/53202170#53202170", "title": "How to remove last element of the delimited string using Bash/Sed/Awk/Perl inside bash script", "body": "<p><strong><em>Solution 1st:</em></strong> If you have GNU <code>awk</code> then try following.</p>\n\n<pre><code>echo \"$STR2\" | awk 'BEGIN{FS=OFS=\"/\"}NF--'\n</code></pre>\n\n<p><strong><em>Solution 2nd:</em></strong> Or with parameter expansion of pure BASH(probably BEST solution among all mentioned here).</p>\n\n<pre><code>echo \"${STR2%/*}\"\n/home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9\n</code></pre>\n\n<p><strong><em>Solution 3rd:</em></strong> Using <code>awk</code> match.</p>\n\n<pre><code>echo \"$STR2\" | awk 'match($0,/\\/.*\\//){print substr($0,RSTART,RLENGTH-1)}'\n</code></pre>\n\n<p><strong><em>Solution 4th:</em></strong> using <code>sub</code> of <code>awk</code> program.</p>\n\n<pre><code>echo \"$STR2\" | awk '{sub(/\\/[[:alnum:]]+$/,\"\")} 1'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 5, "last_activity_date": 1541656262, "creation_date": 1541656262, "answer_id": 53202190, "question_id": 53202134, "link": "https://stackoverflow.com/questions/53202134/how-to-remove-last-element-of-the-delimited-string-using-bash-sed-awk-perl-insid/53202190#53202190", "title": "How to remove last element of the delimited string using Bash/Sed/Awk/Perl inside bash script", "body": "<p>Just use <code>dirname</code>:</p>\n\n<pre><code>$ dirname /home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9/K4me3\n/home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9\n</code></pre>\n"}], "owner": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "closed_date": 1598094259, "accepted_answer_id": 53202170, "answer_count": 2, "score": 1, "last_activity_date": 1598093941, "creation_date": 1541655911, "last_edit_date": 1541655942, "question_id": 53202134, "link": "https://stackoverflow.com/questions/53202134/how-to-remove-last-element-of-the-delimited-string-using-bash-sed-awk-perl-insid", "closed_reason": "Duplicate", "title": "How to remove last element of the delimited string using Bash/Sed/Awk/Perl inside bash script", "body": "<p>I have the following bash script</p>\n\n<pre><code>#!/bin/bash\nSTR1=/home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9/CTCF\nSTR2=/home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9/K4me3\n</code></pre>\n\n<p>What I want to do is to remove last element of the <code>$STR1</code> and <code>$STR2</code> delimited with <code>/</code>, and do it inside that bash script.</p>\n\n<p>Yielding in </p>\n\n<pre><code>/home/ubuntu/foo/hicpro_data/output/3333_XX501621_0368_AH2BHTBGX9/\n</code></pre>\n\n<p>for both <code>$STR1</code> and <code>$STR2</code> and assign it to a new variable say <code>NW_STR1</code>.\nHow can I achieve that?</p>\n"}, {"tags": ["regex", "perl", "unix", "exit", "expect.pm"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1541649124, "post_id": 53199828, "comment_id": 93291011, "body": "Can you clarify your first sentence? Are you using perl&#39;s expect, or the plain Tcl expect and the spawned program is implemented in perl? Do you actually require expect for this task?"}, {"owner": {"reputation": 41, "user_id": 7238722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf11475935d44a1d58993dea808b55ad?s=128&d=identicon&r=PG&f=1", "display_name": "seek", "link": "https://stackoverflow.com/users/7238722/seek"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1541651668, "post_id": 53199828, "comment_id": 93291571, "body": "Yes I&#39;m using perl&#39;s expect. And the spawned program/task is basically a git clone of a remote repository. Now I&#39;m unable to precisely tell when the cloning process is done and if I can proceed with the rest of my automation script"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1541656769, "post_id": 53199828, "comment_id": 93292777, "body": "If there is no interaction why use <code>Expect</code>?  How is the program &quot;<i>inconsistent</i>&quot; -- what are other ways for it to finish, other than just exit?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1541702655, "last_edit_date": 1541702655, "creation_date": 1541658439, "answer_id": 53202501, "question_id": 53199828, "link": "https://stackoverflow.com/questions/53199828/waiting-on-expect-until-spawned-program-completes/53202501#53202501", "title": "Waiting on expect - until spawned program completes", "body": "<p>It is not stated what else  <code>Expect</code> is used for, or how else the program may indicate its exit. </p>\n\n<p>Assuming that at one point interaction stops and we only wait for the program to exit, you can use <a href=\"https://metacpan.org/pod/release/RGIERSIG/Expect-1.21/Expect.pod#I-just-want-to-read-the-output-of-a-process-without-expect()ing-anything.-How-can-I-do-this?\" rel=\"nofollow noreferrer\">expect(undef)</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Expect;\n\nmy $cmd = 'ls -l ./ | head -5; sleep 3';\n\nmy $exp = Expect-&gt;spawn( $cmd );\nsay \"Started process \", $exp-&gt;pid;   \n\n$exp-&gt;raw_pty(1);\n$exp-&gt;log_stdout(0);\n# ...\n\n$exp-&gt;expect(undef);\nsay \"Program exited with status \", $exp-&gt;exitstatus;\n\nsay $exp-&gt;before;\n</code></pre>\n\n<p>If no output is expected after the program goes incommunicado remove <code>before</code>.</p>\n\n<p>Another way is to set up a <code>$SIG{CHLD}</code> signal handler, where you check for the program's PID and set a flag that other code can then check. The PID is in a variable which need be declared before the handler and then set with <code>pid</code> method after the process is started, so that it is legal (under <code>strict</code>) to use in the handler and it is set for when the handler runs. </p>\n\n<p>Then <code>exitstatus</code> isn't useful (<code>-1</code>) as the process is reaped in the handler.</p>\n"}], "owner": {"reputation": 41, "user_id": 7238722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf11475935d44a1d58993dea808b55ad?s=128&d=identicon&r=PG&f=1", "display_name": "seek", "link": "https://stackoverflow.com/users/7238722/seek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53202501, "answer_count": 1, "score": 2, "last_activity_date": 1586916356, "creation_date": 1541636196, "last_edit_date": 1586916356, "question_id": 53199828, "link": "https://stackoverflow.com/questions/53199828/waiting-on-expect-until-spawned-program-completes", "title": "Waiting on expect - until spawned program completes", "body": "<p>I'm trying to use expect to spawn a program in an automation script in perl. </p>\n\n<p>And I'm trying to decide how to wait on expect for this program to finish, since \n - I can't rely on any string matching as the program is not consistent with how it exits\n - I would like to wait on expect until the user prompt is seen and the user gets control. </p>\n\n<p>Is there any means of doing it without performing a regex on the user prompt ? Any flags or exit codes I can rely on which tells the user has control now. </p>\n\n<p>Thanks</p>\n"}]