[{"tags": ["perl"], "comments": [{"owner": {"reputation": 1, "user_id": 9802811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc58ecdb7b9a195ab91eab8275496825?s=128&d=identicon&r=PG&f=1", "display_name": "elaird", "link": "https://stackoverflow.com/users/9802811/elaird"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1526509798, "post_id": 50380356, "comment_id": 87777780, "body": "The data is in a CSV file formatted as per below.   I need to find the state highest number of births by name and year                      406738\tPilar\t1964\tF\tCA\t8 406739\tPiper\t1964\tF\tCA\t8 406740\tRaelynn\t1964\tF\tCA\t8 406741\tRafaela\t1964\tF\tCA\t8 406742\tReba\t1964\tF\tCA\t8 406743\tRisa\t1964\tF\tCA\t8 406744\tRobbi\t1964\tF\tCA\t8 406745\tRolanda\t1964\tF\tCA\t8"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1526513420, "post_id": 50380356, "comment_id": 87778706, "body": "Hint: a database would be a good option. A hash would be another option."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1526513467, "post_id": 50380356, "comment_id": 87778720, "body": "The <code>&#47;...&#47;</code> bit is a <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">regular expression</a>, with specific rules of use.  You want <code>&#47;Paul\\s+1982&#47;</code>, or rather with variables <code>&#47;$n\\s+\\$y&#47;</code> (pick better names though).  That will match lines that have <code>Paul</code> followed by at least one &quot;space&quot; (tab included) followed by <code>1982</code>"}, {"owner": {"reputation": 146, "user_id": 7408563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U871e.jpg?s=128&g=1", "display_name": "asthman", "link": "https://stackoverflow.com/users/7408563/asthman"}, "edited": false, "score": 3, "creation_date": 1526536791, "post_id": 50380356, "comment_id": 87784178, "body": "Maybe you need to define some variables to save lowest and highest numbers and states and use them in the loop."}], "answers": [{"tags": [], "owner": {"reputation": 1309, "user_id": 2631304, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7744c67c172e28b0fb042efbd00405c6?s=128&d=identicon&r=PG", "display_name": "steven smith", "link": "https://stackoverflow.com/users/2631304/steven-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1526859178, "creation_date": 1526859178, "answer_id": 50440312, "question_id": 50380356, "link": "https://stackoverflow.com/questions/50380356/perl-find-the-highest-value-in-file-by-two-factors/50440312#50440312", "title": "Perl - find the highest value in file by two factors", "body": "<p>You want to put your data in multiple hashes.  This would be a start:</p>\n\n<pre><code>my %parsedInfo;\n\nmy @info;\nmy $i = 1;\nwhile (defined (my $line = &lt;DATA&gt;)) {\n    my ($lineNumber, $name, $year, $gender, $state, $total)\n        = @info = split /\\s+/, $line;\n    push @{$parsedInfo{$name}{$year}{$state}}, [@info];\n}\nforeach my $name (sort keys %parsedInfo) {\n    my $yearRef = $parsedInfo{$name};\n    foreach my $year (sort {$a &lt;=&gt; $b} keys %$yearRef) {\n        my $stateRef = $yearRef-&gt;{$year};\n        foreach my $state (sort keys %$stateRef) {\n            print \"$name=&gt;$year=&gt;$state ==========\\n\";\n            for my $infoRef (@{$parsedInfo{$name}{$year}{$state}}) {\n                print join(':', @$infoRef), \"\\n\";\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Output looks like this</p>\n\n<pre><code>Pilar=&gt;1964=&gt;CA ==========\n406738:Pilar:1964:F:CA:8\nPiper=&gt;1964=&gt;CA ==========\n406739:Piper:1964:F:CA:8\nRaelynn=&gt;1964=&gt;CA ==========\n406740:Raelynn:1964:F:CA:8\nRafaela=&gt;1964=&gt;CA ==========\n406741:Rafaela:1964:F:CA:8\nReba=&gt;1964=&gt;CA ==========\n406742:Reba:1964:F:CA:8\nRisa=&gt;1964=&gt;CA ==========\n406743:Risa:1964:F:CA:8\nRobbi=&gt;1964=&gt;CA ==========\n406744:Robbi:1964:F:CA:8\nRolanda=&gt;1964=&gt;CA ==========\n406745:Rolanda:1964:F:CA:8\n</code></pre>\n\n<p>This creates a hash keyed to the name that contains a hash keyed to the year which contains a hash keyed to the state which contains the data for that entry.</p>\n\n<p>Once you have it in the appropriate hash you can do whatever you want.  Put it in the debugger and step through it for a better understanding.  Without better data I can't do much more.</p>\n\n<p>Hope this helps...\nSteve S.</p>\n"}], "owner": {"reputation": 1, "user_id": 9802811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc58ecdb7b9a195ab91eab8275496825?s=128&d=identicon&r=PG&f=1", "display_name": "elaird", "link": "https://stackoverflow.com/users/9802811/elaird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526859178, "creation_date": 1526507051, "last_edit_date": 1526547999, "question_id": 50380356, "link": "https://stackoverflow.com/questions/50380356/perl-find-the-highest-value-in-file-by-two-factors", "title": "Perl - find the highest value in file by two factors", "body": "<p>I have a file and I need to read it in to Perl, find all the total number of births with my name and year of birth and then find the states with the highest and lowest numbers of birth for my name and year.  I can do the first part, but I am completely lost when it comes to trying to find the highest and lowest states by year and DOB.  How do I match and keep track of this?\nHere is the code I have so far:</p>\n\n<pre><code>use 5.13.0;\nuse warnings;\nuse strict;\n\nmy $file;\nmy $line;\nmy $count = 0;\nmy $total;\nmy $name;\nmy $year, my $gender;\nmy $state;\n\n$file = \"StateNames.csv\";\n\nopen( FILE, \"$file\" );\nwhile ( $line = &lt;FILE&gt; ) {\n   if ( $line =~ /Paul,1982/ ) {\n      ( $line, $name, $year, $gender, $state, $total ) = split /,/, $line;\n      $count = $count + $total;\n   }\n}\n\nif ( $count == 0 ) {\n   print\n     \"There were no people named Paul found.        Please       try again.\";\n}\n\nprint \"The total number of people named Paul born in 1982 is $count\";\nprint $state $total;\n</code></pre>\n\n<p>File</p>\n\n<pre><code>406738 Pilar 1964 F CA 8\n406739 Piper 1964 F CA 8\n406740 Raelynn 1964 F CA 8\n406741 Rafaela 1964 F CA 8\n406742 Reba 1964 F CA 8\n406743 Risa 1964 F CA 8\n406744 Robbi 1964 F CA 8\n406745 Rolanda 1964 F CA 8\n</code></pre>\n"}, {"tags": ["html", "perl", "parsing", "html-parsing", "html-parser"], "answers": [{"tags": [], "owner": {"reputation": 4890, "user_id": 6398044, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f71218cef5ac99acbfc45fa3a9a531?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6398044/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1526500432, "last_edit_date": 1526500432, "creation_date": 1526499760, "answer_id": 50378804, "question_id": 50378204, "link": "https://stackoverflow.com/questions/50378204/how-htmlquery-autocomplete-invalid-html-in-perl-5/50378804#50378804", "title": "How HTML::Query autocomplete invalid HTML in perl 5?", "body": "<p>I found partial answer. Adding to hash <code>%data</code> pair: </p>\n\n<pre><code>html =&gt; $q-&gt;as_HTML\n</code></pre>\n\n<p>I can see for invalid <code>HTML</code> this result:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;table&gt;\n            &lt;thead&gt;&lt;/thead&gt;\n            &lt;th&gt;A&lt;/th&gt;\n            &lt;tr&gt;\n                &lt;th&gt;B&lt;/th&gt;\n                &lt;th&gt;C&lt;/th&gt;\n                &lt;tbody&gt;&lt;/tbody&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;E&lt;/td&gt;\n                &lt;td&gt;F&lt;/td&gt;\n                &lt;td&gt;G&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So I know how invalid <code>HTML</code> is converted.</p>\n\n<p>In my opinion it can be changed. Link to created Issue:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/abw/HTML-Query/issues/8\" rel=\"nofollow noreferrer\">https://github.com/abw/HTML-Query/issues/8</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1098, "user_id": 1026604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc64c8a64808ad8314256f145213f9bd?s=128&d=identicon&r=PG", "display_name": "kamelkev", "link": "https://stackoverflow.com/users/1026604/kamelkev"}, "is_accepted": true, "score": 2, "last_activity_date": 1526866715, "creation_date": 1526866715, "answer_id": 50440958, "question_id": 50378204, "link": "https://stackoverflow.com/questions/50378204/how-htmlquery-autocomplete-invalid-html-in-perl-5/50440958#50440958", "title": "How HTML::Query autocomplete invalid HTML in perl 5?", "body": "<p>I'm the maintainer of this package.</p>\n\n<p>HTML::Query provides selector magic on top of the parsing capabilities provided by HTML::Tree. HTML::Query itself provides no parsing itself. Your problem is with HTML::Tree, not with HTML::Query.</p>\n\n<p>HTML:Tree largely predates specification conformity. It was originally created back when IE ruled the internet (1999) and handles HTML based upon \"real world\" usage. It does a pretty good job of handling HTML 4 documents, but as you note there are issues with unconventional markup that is otherwise legal in HTML 4. There is no recourse for handling these edge cases, the library cannot and will not handle them, as there are thousands of organizations who are reliant on the existing implementation to continue working as it has been.</p>\n\n<p>HTML::Tree does not properly support HTML5. The author of the underlying library HTML::TagSet refuses to support it, and argues with (or ignores) anyone who offers a solution, or offers to take over the library. This stance effectively prevents ALL derivative projects from properly handling HTML5 - HTML::Query and CSS::Inliner are no exception.</p>\n\n<p>As for the suggestion to use HTML::HTML5::Parser or \"whatever other Perl modules that provide an HTML parser\" - I welcome patches. That being said: there are no sufficiently maintained Perl libraries that bring to the table what HTML::Tree did, so any such attempt is likely to fail, but let's see what you can come up with.</p>\n"}], "owner": {"reputation": 4890, "user_id": 6398044, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f71218cef5ac99acbfc45fa3a9a531?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6398044/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50440958, "answer_count": 2, "score": 0, "last_activity_date": 1526866715, "creation_date": 1526497153, "question_id": 50378204, "link": "https://stackoverflow.com/questions/50378204/how-htmlquery-autocomplete-invalid-html-in-perl-5", "title": "How HTML::Query autocomplete invalid HTML in perl 5?", "body": "<p>I have invalid <code>HTML</code> code with lacking <code>tr</code> in <code>thead</code>. Despite this I am trying to select elements of this <code>HTML</code> using <code>HTML::Query</code> but selectors have counter intuitive behavior.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nrequire HTML::Query;\nuse JSON;\n\nmy $q = HTML::Query-&gt;new( text =&gt; '\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;th&gt;A&lt;/th&gt;\n        &lt;th&gt;B&lt;/th&gt;\n        &lt;th&gt;C&lt;/th&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    &lt;tr&gt;\n        &lt;td&gt;E&lt;/td&gt;\n        &lt;td&gt;F&lt;/td&gt;\n        &lt;td&gt;G&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n' );\n\nmy %data = (\n    tr =&gt; $q-&gt;query('tr')-&gt;first-&gt;as_trimmed_text,\n    tbody =&gt; $q-&gt;query('tbody')-&gt;first-&gt;as_trimmed_text\n);\n\nprint JSON-&gt;new-&gt;utf8(0)-&gt;encode( \\%data );\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{\n  \"tbody\": \"\",\n  \"tr\": \"BC\"\n}\n</code></pre>\n\n<p>Of course if I use correct <code>HTML</code> code with missing <code>tr</code>:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;thead&gt;\n    &lt;tr&gt;\n        &lt;th&gt;A&lt;/th&gt;\n        &lt;th&gt;B&lt;/th&gt;\n        &lt;th&gt;C&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    &lt;tr&gt;\n        &lt;td&gt;E&lt;/td&gt;\n        &lt;td&gt;F&lt;/td&gt;\n        &lt;td&gt;G&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Then program print suspected intuitive output:</p>\n\n<pre><code>{\n  \"tr\": \"ABC\",\n  \"tbody\": \"EFG\"\n}\n</code></pre>\n\n<p>My questions:</p>\n\n<ul>\n<li>why in first case letter <code>A</code> is omitted?</li>\n<li>why <code>tbody</code> cant be found?</li>\n<li>how <code>HTML::Query</code> treats invalid <code>HTML</code>? Is it fixed? In which way?</li>\n</ul>\n"}, {"tags": ["perl", "http", "module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526494269, "post_id": 50377415, "comment_id": 87771157, "body": "You need to show the code that uses your module and describe in detail how it isn&#39;t doing what you want."}, {"owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526495910, "post_id": 50377415, "comment_id": 87771940, "body": "Exactly, before verifying all of that, I would like to know if the syntax of the function generateError() is correct or not"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1526499682, "post_id": 50377415, "comment_id": 87773744, "body": "Why ask us? The Perl compiler is much more reliable. What does <code>perl -c Result.pm</code> tell you?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526502070, "post_id": 50377415, "comment_id": 87774816, "body": "as @Borodin mentioned, you can check the syntax of your module using <code>perl -c Result.pm</code> but I am a little confused by the question, what do you mean by <i>&quot;I am a little lost to generate the function managing all this&quot;</i>? Do you want to know how you will need to use the module from a main script?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526502827, "post_id": 50377415, "comment_id": 87775148, "body": "There is a bug in that, if all of the <code>if</code>/<code>elsif</code> tests fail, no <code>return</code> statement is executed and it is far from obvious what value will actually be returned."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1526536588, "post_id": 50377415, "comment_id": 87784080, "body": "Are you aware of the <code>HTTP::Response</code> module?"}, {"owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "edited": false, "score": 0, "creation_date": 1526536886, "post_id": 50377415, "comment_id": 87784224, "body": "Oh, no I&#39;m not :/"}, {"owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "edited": false, "score": 0, "creation_date": 1526537278, "post_id": 50377415, "comment_id": 87784414, "body": "When I launch perl -c Result.pm, it returns me this : &quot;Result.pm syntax OK&quot; Furthermore, I edited my subject by adding a function on which I am going to have to modify to take into account functions of Result.pm"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1526537582, "post_id": 50377415, "comment_id": 87784585, "body": "@Maestro Welcome to Stack Overflow! You might want to look into <a href=\"https://metacpan.org/pod/Test::Tutorial\" rel=\"nofollow noreferrer\">testing your module</a> to make sure it does what it&#39;s supposed to do. But Ii&#39;s not clear to me how App and Result relate. There do not appear to be any HTTP requests in App for Result to generate an error message from."}, {"owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1526538018, "post_id": 50377415, "comment_id": 87784795, "body": "Thanks @Schwern ! :) Actually, I am trying to relate App.pm and Result.pm to generate http error, but I don&#39;t know how to do it :/"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1526549048, "post_id": 50377415, "comment_id": 87791287, "body": "I am curious what the overall goal of your project is. Are you writing your own web framework? Now of course we&#39;ve all tried that (though we don&#39;t all admit to it), but to be honest, that might not be a good exercise early on in your career. It might be smarter to master one or more of the existing web frameworks first, and if you are really interested in how they work, why not start contributing to one? 1/2"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1526549053, "post_id": 50377415, "comment_id": 87791290, "body": "... The <a href=\"https://p3rl.org/Dancer2\" rel=\"nofollow noreferrer\">Dancer2</a> project is always looking for <a href=\"https://github.com/PerlDancer/Dancer2/issues?q=is:open+is:issue+label:%22Beginner+Suitable%22\" rel=\"nofollow noreferrer\">new contributors</a>, and they have some really nice people on their team. 2/2"}, {"owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "edited": false, "score": 0, "creation_date": 1526552135, "post_id": 50377415, "comment_id": 87793318, "body": "I am currently working on a website allowing users to create Surveys, campaigns, datasets from csv file to generate graphics via dashboards."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1526580379, "post_id": 50377415, "comment_id": 87811475, "body": "@Maestro There&#39;s no HTTP calls in App.pm, so there&#39;s no obvious relation. We&#39;d need to know why you think you need Result.pm. And there&#39;s not enough information about your surrounding code, like what is handling <code>$self-&gt;query</code>? Is it <a href=\"https://metacpan.org/pod/CGI::Application\" rel=\"nofollow noreferrer\">CGI::Application</a>? As others have mentioned, you probably shouldn&#39;t be doing such low level error handling. A better web framework such as <a href=\"https://metacpan.org/pod/Dancer2\" rel=\"nofollow noreferrer\">Dancer2</a> and their plugins can handle that."}], "owner": {"reputation": 776, "user_id": 9801814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ykdq6.jpg?s=128&g=1", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9801814/maestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526536319, "creation_date": 1526493941, "last_edit_date": 1526536319, "question_id": 50377415, "link": "https://stackoverflow.com/questions/50377415/module-to-manage-http-errors", "title": "Module to manage HTTP errors", "body": "<p>I'm writing a Perl module <code>Result</code> to manage HTTP errors.</p>\n\n<p>I am a little lost to generate the function managing all this.</p>\n\n<h3>Result.pm</h3>\n\n<pre><code>package Result;\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\nuse Log::Log4perl;\n\nsub new\n{\n    my $class = shift;\n    my %params = @_;\n\n    my $self = {\n        code      =&gt; $params{'code'},\n        value     =&gt; $params{'value'}\n    };\n\n    bless $self, $class;\n    return $self;\n}\n\nsub generateError\n{\n    my $self = shift;\n    my %params = @_;\n\n    if($self-&gt;{'code'} == 200)\n    {\n        return \"Your request was well executed !\";\n    }\n    elsif($self-&gt;{'code'} == 400)\n    {\n        return \"There is an error in your request! Please verify it!\";\n    }\n    elsif($self-&gt;{'code'} == 404)\n    {\n        return \"We did not find for what you ask !\"\n    }\n    elsif($self-&gt;{'code'} == 500)\n    {\n        return \"Internal error of the server, please re-try later !\";\n    }\n    elsif($self-&gt;{'code'} == 504)\n    {\n        return \"Your request has set of time to be executed, please retry !\";\n    }\n}\n\n1;\n</code></pre>\n\n<h3>App.pm</h3>\n\n<pre><code>sub template\n{\n    my $self = shift;\n\n    my $query   = $self-&gt;query;\n    my $id = $query-&gt;param('id');\n\n    my $session = $self-&gt;param('session');\n    my $profile = $session-&gt;param('profile');\n\n    my $Project = Project-&gt;newFromId($id);\n    if(!$Project or $Project eq 'NOT_FOUND')\n    {\n        return $self-&gt;redirect('?rm=notfound');\n    }\n\n    if(!$profile-&gt;{'uid'} or $Project-&gt;{'userId'} != $profile-&gt;{'uid'})\n    {\n        return $self-&gt;redirect('?rm=notfound');\n    }\n\n    my $mailContent = from_json($Project-&gt;{'mail'});\n\n    my $templateContent = formatTemplate($Project-&gt;{'template'});\n\n    my $infos = [\n        {\n            'ID'        =&gt; $id,\n            'TEMPLATE'  =&gt; $templateContent,\n            'MAILSUBJECT'   =&gt; $mailContent-&gt;{'subject'},\n            'MAILBODY'  =&gt; $mailContent-&gt;{'body'}\n        }\n    ];\n\n    if($mailContent-&gt;{'type'} eq 'text')\n    {\n        $infos-&gt;[0]{'MAILTEXT'} = 1;\n    }\n    else\n    {\n        $infos-&gt;[0]{'MAILHTML'} = 1;\n    }\n\n    return $self-&gt;processtmpl('template.tmpl', $infos); \n}\n1;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1526491829, "post_id": 50376845, "comment_id": 87769887, "body": "How are you executing the script? What arguments are you passing?"}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1526492231, "post_id": 50376845, "comment_id": 87770124, "body": "./script.pl nucleotide.fasta A"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1526492997, "creation_date": 1526492997, "answer_id": 50377184, "question_id": 50376845, "link": "https://stackoverflow.com/questions/50376845/the-output-of-a-subroutine-is-returning-0/50377184#50377184", "title": "The output of a subroutine is returning 0", "body": "<p>The problem is here:</p>\n\n<pre><code>my $perc = perc_nucleotide($line , $nt);\nprintf(\"The percentage of $nt nucleotide in given sequence is %.0f\", $perc);\n</code></pre>\n\n<p><code>perc_nucleotide</code> is returning <code>0.18018018018018</code> but the format <code>%.0f</code> says to print it with no decimal places. So it gets truncated to 0. You should probably use something more like <code>%.2f</code>.</p>\n\n<hr>\n\n<p>It's also worth noting that <code>perc_nucleotide</code> does not have a <code>return</code>. It still works, but for reasons that might not be obvious.</p>\n\n<p><code>perc_nucleotide</code> sets <code>my $perc = ($count/$total_len)*100;</code> but never uses that <code>$perc</code>. The <code>$perc</code> in the main program is a different variable.</p>\n\n<p><code>perc_nucleotide</code> does return something, every Perl subroutine without an explicit return returns the \"last evaluated expression\". In this case it's  <code>my $perc = ($count/$total_len)*100;</code> but the last evaluated expression rules can get a bit tricky.</p>\n\n<p>It's easier to read and safer to have an explicit return. <code>return ($count/$total_len)*100;</code></p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "is_accepted": false, "score": 0, "last_activity_date": 1526571467, "creation_date": 1526571467, "answer_id": 50395451, "question_id": 50376845, "link": "https://stackoverflow.com/questions/50376845/the-output-of-a-subroutine-is-returning-0/50395451#50395451", "title": "The output of a subroutine is returning 0", "body": "<p>I corrected the script and it gave me right answers.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n##### Subroutine to calculate percentage of all nucleotides in a DNA sequence #####\n\nmy $input = $ARGV[0];\nmy $nt = $ARGV[1];\nmy $args = $#ARGV + 1;\n\nif($args != 2){\n    print \"Error!!! Insufficient number of arguments\\n\";\n    print \"Usage: $0 &lt;input_fasta_file&gt; &lt;nucleotide&gt;\\n\";\n}\n\nmy($FH, $line);\n\nopen($FH, '&lt;', $input) || die \"Couldn\\'t open input file: $input\\n\";\n\n$line = do{\n    local $/;\n    &lt;$FH&gt;;\n};\n\nchomp $line;\n\n#print $line;\n\n$line =~ s/&gt;(.*)//g;\n$line =~ s/\\s+//g;\n\n#print \"$line\\n\";\n\nmy $total_len = length($line);\nmy $perc_of_nt = perc($line, $nt);\n\n**printf(\"The percentage of nucleotide $nt in a given sequence is %.2f%%\", $perc_of_nt);\nprint \"\\n\";**\n\n\n#print \"$total_len\\n\";\n\nsub perc{\n    my($line, $nt) = @_;\n    my $char; my $count = 0;\n    **foreach $char (split //, $line){\n    if($char eq $nt){\n        $count += 1;\n    }\n    }** \n**return (($count/$total_len)*100)**\n}\n</code></pre>\n\n<p>The answer for the above input file is:</p>\n\n<pre><code>Total_len = 555\nThe percentage of nucleotide A in a given sequence is 18.02%\nThe percentage of nucleotide T in a given sequence is 18.74%\nThe percentage of nucleotide G in a given sequence is 28.47%\n</code></pre>\n\n<p>The changes which I made are in bold.</p>\n\n<p>Thanks for amazing insight!!!</p>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50377184, "answer_count": 2, "score": 1, "last_activity_date": 1526571467, "creation_date": 1526491723, "last_edit_date": 1526492495, "question_id": 50376845, "link": "https://stackoverflow.com/questions/50376845/the-output-of-a-subroutine-is-returning-0", "title": "The output of a subroutine is returning 0", "body": "<p>I have written a script which uses a subroutine to call percentage of nucleotides in a given sequence. When I run the script the output for each nucleotide percentage is always shown to be zero.</p>\n\n<p>Here's my code;</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#### Subroutine to report percentage of each nucleotide in DNA sequence ####\n\nmy $input = $ARGV[0];\nmy $nt = $ARGV[1];\nmy $args = $#ARGV +1;\n\nif($args != 2){\n    print \"Error!!! Insufficient number of arguments\\n\";\n    print \"Usage: $0 &lt;input fasta file&gt;\\n\";\n}\n\nmy($FH, $line);\n\nopen($FH, '&lt;', $input) || die \"Could\\'nt open file: $input\\n\";\n\n$line = do{\n    local $/;\n    &lt;$FH&gt;;\n};\n\n$line =~ s/&gt;(.*)//g;\n$line =~ s/\\s+//g;\n\nmy $perc = perc_nucleotide($line , $nt);\nprintf(\"The percentage of $nt nucleotide in given sequence is %.0f\", $perc);\nprint \"\\n\";\n\n\nsub perc_nucleotide {\n    my($line, $nt) = @_;\n    print \"$nt\\n\";\n    my $count = 0;\n    if( $nt eq \"A\" || $nt eq \"T\" || $nt eq \"G\" || $nt eq \"C\"){\n    $count++;\n    }\n    my $total_len = length($line);\n    my $perc = ($count/$total_len)*100;\n\n}\n</code></pre>\n\n<p>I think that I am setting the <code>$count</code> variable wrong. I tried different ways but can't figure it out. </p>\n\n<p>This is the input file</p>\n\n<pre><code>&gt;XM_024894547.1 Trichoderma citrinoviride Redoxin (BBK36DRAFT_1163529), partial mRNA\nATGGCCTTCCGTCTCCCTCTGCGCCGCATTGCCCTGGCCCGCCCCGCCACCGTTGCGCGTGGCTTCCACT\nCGACGCCCCGCGCCCTGGTCAAGGTCGGCGACGAGGTCCCGAGCTTGGAGCTGTTCGAGAAGTCGGCCGC\nCAGCAAGATCAACCTGGCCGACGAGTTCAAGAAGGGCGACGGCTACATTGTCGGCGTCCCGGGCGCCTTC\nTCCGGCACCTGCTCCGGCACCCACGTCCCGTCGTACATCAACCACCCTGACATCAAGACGGCCGGCCAGG\nTCTTTGTCGTCTCCGTCAACGACCCCTTTGTCATGAAGGCTTGGGCAGACCAGCTGGATCCCGCCGGAGA\nGACAGGAATCCGGTTCGTTGCCGACCCCACGGCTGAGTTCACAAAGGCTCTGGAACTGGGATTCGACGAC\nGCTGCTCCTCTGTTCGGAGGCACCCGAAGCAAGCGCTATGCTCTCAAGGTTAAGGATGGCAAGGTCACTG\nCCGCCTTTGTTGAGCCCGACAACACGGGCACTTCCGTGTCAATGGCCGACAAGGTCCTCAGCTAA\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 420, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1526490010, "creation_date": 1526486673, "last_edit_date": 1526490010, "question_id": 50375446, "link": "https://stackoverflow.com/questions/50375446/cant-install-lwpparalleluseragent-on-windows-strawberry-perl", "title": "can&#39;t install LWP::Parallel::UserAgent on Windows (Strawberry Perl)", "body": "<p>When I try to install LWP::Parallel::UserAgent using CPAN on Windows (Strawberry Perl v5.16.3), I get the below error. I think it might not be only me, because <code>reports MSOUTH/ParallelUserAgent-2.62.tgz</code> shows that it fails for most/all of the CPAN Testers on Windows.</p>\n\n<p>Still, it seems like it should be an easy problem to solve. The problem is just that TAP::Formatter::Console can't be found. I actually have this module installed, but the installer is using a bad @INC. It is prepending <code>../</code> to absolute paths, like <code>../C:/berrybrew/5.16.3_64/perl/site/lib</code>. If it just stopped doing that, I think it might work. Any idea how to do that / otherwise fix this?</p>\n\n<p>(EDIT: Alternatively, maybe the issue is that there isn't a <code>use TAP::Harness</code> in Test::Harness.pm. But I've installed plenty of other CPAN modules without issue.)</p>\n\n<pre><code>cpan&gt; install LWP::Parallel::UserAgent\nDatabase was generated on Tue, 15 May 2018 19:43:39 GMT\nRunning install for module 'LWP::Parallel::UserAgent'\nRunning make for M/MS/MSOUTH/ParallelUserAgent-2.62.tgz\nFetching with LWP:\nhttp://cpan.strawberryperl.com/authors/id/M/MS/MSOUTH/ParallelUserAgent-2.62.tgz\nFetching with LWP:\nhttp://cpan.strawberryperl.com/authors/id/M/MS/MSOUTH/CHECKSUMS\nChecksum for C:\\berrybrew\\5.16.3_64\\cpan\\sources\\authors\\id\\M\\MS\\MSOUTH\\ParallelUserAgent-2.62.tgz ok\nScanning cache C:\\berrybrew\\5.16.3_64\\cpan\\build for sizes\n............................................................................DONE\n\n  CPAN.pm: Building M/MS/MSOUTH/ParallelUserAgent-2.62.tgz\n\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for LWP::Parallel\nWriting MYMETA.yml and MYMETA.json\ncp lib/LWP/Parallel/Protocol/http.pm blib\\lib\\LWP\\Parallel\\Protocol\\http.pm\ncp lib/LWP/Parallel/Protocol/https.pm blib\\lib\\LWP\\Parallel\\Protocol\\https.pm\ncp lib/LWP/RobotPUA.pm blib\\lib\\LWP\\RobotPUA.pm\ncp lib/LWP/Parallel/UserAgent.pm blib\\lib\\LWP\\Parallel\\UserAgent.pm\ncp lib/LWP/Parallel/Protocol/ftp.pm blib\\lib\\LWP\\Parallel\\Protocol\\ftp.pm\ncp lib/LWP/Parallel/Protocol/file.pm blib\\lib\\LWP\\Parallel\\Protocol\\file.pm\ncp lib/Bundle/ParallelUA.pm blib\\lib\\Bundle\\ParallelUA.pm\ncp lib/LWP/ParallelUA.pm blib\\lib\\LWP\\ParallelUA.pm\ncp lib/LWP/Parallel/Protocol.pm blib\\lib\\LWP\\Parallel\\Protocol.pm\ncp lib/LWP/Parallel/RobotUA.pm blib\\lib\\LWP\\Parallel\\RobotUA.pm\ncp lib/LWP/Parallel.pm blib\\lib\\LWP\\Parallel.pm\n  MSOUTH/ParallelUserAgent-2.62.tgz\n  C:\\berrybrew\\5.16.3_64\\c\\bin\\dmake.exe -- OK\nRunning make test\n\"C:\\berrybrew\\5.16.3_64\\perl\\bin\\perl.exe\" t/TEST\nCan't load TAP::Formatter::Console: Can't locate TAP/Formatter/Console.pm in @INC (@INC contains: ../blib/lib ../blib/arch ../C:/berrybrew/5.16.3_64/perl/site/lib ../C:/berrybrew/5.16.3_64/perl/vendor/lib ../C:/berrybrew/5.16.3_64/perl/lib\n../.) at (eval 30) line 2.\n at C:/berrybrew/5.16.3_64/perl/site/lib/Test/Harness.pm line 251.\ndmake.exe:  Error code 130, while making 'test'\n  MSOUTH/ParallelUserAgent-2.62.tgz\n  C:\\berrybrew\\5.16.3_64\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports MSOUTH/ParallelUserAgent-2.62.tgz\nRunning make install\n  make test had returned bad status, won't install without force\nStopping: 'install' failed for 'LWP::Parallel::UserAgent'.\nFailed during this command:\n MSOUTH/ParallelUserAgent-2.62.tgz            : make_test NO\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526482498, "post_id": 50374035, "comment_id": 87764398, "body": "What result does it produce?"}, {"owner": {"reputation": 151, "user_id": 1783259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bKwNE.jpg?s=128&g=1", "display_name": "physi", "link": "https://stackoverflow.com/users/1783259/physi"}, "edited": false, "score": 1, "creation_date": 1526482595, "post_id": 50374035, "comment_id": 87764475, "body": "you&#39;re code iterates only over the inputfile. So only 4 lines are the result. You have to find the highest number of the inputfile first and then loop from 1 to max."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 151, "user_id": 1783259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bKwNE.jpg?s=128&g=1", "display_name": "physi", "link": "https://stackoverflow.com/users/1783259/physi"}, "edited": false, "score": 1, "creation_date": 1526482787, "post_id": 50374035, "comment_id": 87764618, "body": "@physi no need to find the highest number since the file is sorted"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526483295, "post_id": 50374345, "comment_id": 87764975, "body": "And here I thought all you do is golf. Which explains why your answer is shorter than mine. :D"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1526483672, "post_id": 50374345, "comment_id": 87765234, "body": "@simbabque I had to refrain myself from using single letter variables, and <code>-p</code> to remove half the script... <code>perl -plE &#39;say&quot;$c\\t0&quot;while++$c&lt;$_;$_.=&quot;\\t1&quot;&#39;</code> :D"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 6, "last_activity_date": 1526483942, "last_edit_date": 1526483942, "creation_date": 1526483113, "answer_id": 50374345, "question_id": 50374035, "link": "https://stackoverflow.com/questions/50374035/keeping-a-count-while-reading-a-file-line-by-line/50374345#50374345", "title": "Keeping a count while reading a file line by line", "body": "<p>You are iterating over the lines of your input file, and each time printing one line, so your output only has as much lines as your input.</p>\n\n<p>Instead, you want to keep a counter (like you did), and for each line, while that counter is less that the number on the line, print <code>$counter 0</code>, because that number is not present in your input:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\n\nopen (my $in, '&lt;', $infile) or die (\"Could not open file: $!.\");\n\nmy $counter = 0;\nwhile ( my $line  = &lt;$in&gt; ) {\n    chomp $line;\n    while ( ++$counter &lt; $line ) {\n        print \"$counter\\t0\\n\"\n    }\n    print \"$line\\t1\\n\" # or 'print \"$counter\\t1\\n\"', whichever you find clearer\n}\n\nclose $in;\n</code></pre>\n\n<p>Also, note that I've use a 3 arguments open, and a lexical variable <code>$in</code> for your filehandle instead of your <code>IN</code>, and I've included <code>$!</code> in the error message so if something goes wrong, you'll know what it was.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1526483122, "creation_date": 1526483122, "answer_id": 50374346, "question_id": 50374035, "link": "https://stackoverflow.com/questions/50374035/keeping-a-count-while-reading-a-file-line-by-line/50374346#50374346", "title": "Keeping a count while reading a file line by line", "body": "<p>One way to do this is to add a second loop that keeps counting up until you have a match.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $counter = 1;\nLINE: while( my $line  = &lt;DATA&gt;) {\n    chomp $line;\n    while () {\n        if ($counter == $line) {\n            print \"$counter\\t1\\n\";\n            $counter++;\n            next LINE;\n        }\n        else {\n            print \"$counter\\t0\\n\";\n            $counter++;\n        }\n    }\n}\n\n__DATA__\n1\n3\n7\n8\n</code></pre>\n\n<p>This makes use of the infinite loop <code>while () { ... }</code> construct, as well as a <em>label</em> (<code>LINE:</code>) on the outer loop and the <a href=\"http://perldoc.perl.org/functions/next.html\" rel=\"nofollow noreferrer\"><code>next LABEL</code> keyword</a>, which breaks out of the inner loop and skips to the next iteration of the loop with the label. Since we're counting after comparing, we need to start with <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1526484850, "creation_date": 1526484850, "answer_id": 50374912, "question_id": 50374035, "link": "https://stackoverflow.com/questions/50374035/keeping-a-count-while-reading-a-file-line-by-line/50374912#50374912", "title": "Keeping a count while reading a file line by line", "body": "<p>This Perl program will do as you ask. It reads each number from the input file and prints a line with a zero for every value preceding it that hasn't been output. It then prints the input value with a one and goes to read the next number from the input</p>\n\n<p>This program expects the path to the input file as a parameter on the command line and prints the output to STDOUT</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy $n = 1;\n\nwhile ( &lt;&gt; ) {\n      my ($f) = split;\n      print $n++, \"\\t0\\n\" while $n &lt; $f;\n      print $n++, \"\\t1\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>1   1\n2   0\n3   1\n4   0\n5   0\n6   0\n7   1\n8   1\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 50374345, "answer_count": 3, "score": 2, "last_activity_date": 1526484850, "creation_date": 1526482237, "last_edit_date": 1526483650, "question_id": 50374035, "link": "https://stackoverflow.com/questions/50374035/keeping-a-count-while-reading-a-file-line-by-line", "title": "Keeping a count while reading a file line by line", "body": "\n\n<p>I have a file that looks like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1\n3\n7\n8\n</code></pre>\n\n<p>It has numbers that increase but not in a consistent way: it is random.</p>\n\n<p>I would like a file that looks like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1   1\n2   0\n3   1\n4   0\n5   0 \n6   0\n7   1\n8   1\n</code></pre>\n\n<p>It fills in the missing numbers in the left hand column and adds a <code>\\t1</code> to show that it was present in the original file (0 for absent). So far I have:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! /usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy $infile = $ARGV[0];\n\nopen(IN, $infile) or die (\"Could not open file.\");\n\nmy $counter = 0;\n\nwhile ( my $line  = &lt;IN&gt; ) {\n\n    chomp $line;\n\n    if ( $counter == $line ) {\n        print \"$line\\t1\\n\";\n        ++$counter;\n    }\n    else {\n        print \"$counter\\t0\\n\";\n        ++$counter;\n    }\n}\n\nclose (IN);\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>0   0\n1   0\n2   0\n3   0\n</code></pre>\n\n<p>It isn't producing the desired result. Any ideas?</p>\n"}, {"tags": ["perl", "smtp", "sendmail", "spf", "dkim"], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "edited": false, "score": 0, "creation_date": 1526838785, "post_id": 50374125, "comment_id": 87889457, "body": "Relying on servers to add DKIM signature, but for some reason it doesn&#39;t do it correctly with mail sent from Mime::Lite. I can use another module DKIM::Mail::Signer to do it, but I&#39;m starting to doubt the added complexity since it works OK without outgoing auth. I don&#39;t understand your concerns over performance. &#39;May as well do&#39; what directly?"}, {"owner": {"reputation": 29469, "user_id": 333340, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EUElo.jpg?s=128&g=1", "display_name": "Synchro", "link": "https://stackoverflow.com/users/333340/synchro"}, "reply_to_user": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "edited": false, "score": 0, "creation_date": 1526844479, "post_id": 50374125, "comment_id": 87891232, "body": "Send via SMTP to localhost rather than using sendmail to do the same thing but slower."}], "tags": [], "owner": {"reputation": 29469, "user_id": 333340, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EUElo.jpg?s=128&g=1", "display_name": "Synchro", "link": "https://stackoverflow.com/users/333340/synchro"}, "is_accepted": false, "score": 1, "last_activity_date": 1526482490, "creation_date": 1526482490, "answer_id": 50374125, "question_id": 50371332, "link": "https://stackoverflow.com/questions/50371332/authenticating-email-through-smtp-or-dkim/50374125#50374125", "title": "Authenticating email through SMTP or DKIM", "body": "<p>Local authentication doesn't add much to the credibility of your messages, but also there's no harm in it. It will show up in your <code>Received</code> headers either way, and there's a distant possibility you might be marked down by spam filters for it (they'd probably be more interested in whether any hops were unencrypted, which is independent of auth).</p>\n\n<p>That you used auth shouldn't make any difference to DKIM - but what will make a difference is where (and if) your DKIM signing takes place - for example if your local mail server signs but your remote one doesn't. Does the Mail::Lite package do DKIM signing itself? Or are you relying on your servers to do it? Your headers in received messages will show you what has been signed where, and they may also give you some clues about what exactly is wrong with your DKIM signature - it would be useful if you added gmail's headers to your question.</p>\n\n<p>A separate concern is performance - submitting via a sendmail binary is relatively inefficient - all sendmail binaries do is open a synchronous SMTP connection to localhost anyway, so you may as well do it directly - this is what postfix recommends.</p>\n"}], "owner": {"reputation": 1149, "user_id": 1009504, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/72e0a2778528fc5aa75bfcabf3e16664?s=128&d=identicon&r=PG", "display_name": "freeworlder", "link": "https://stackoverflow.com/users/1009504/freeworlder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526482490, "creation_date": 1526474677, "last_edit_date": 1526476113, "question_id": 50371332, "link": "https://stackoverflow.com/questions/50371332/authenticating-email-through-smtp-or-dkim", "title": "Authenticating email through SMTP or DKIM", "body": "<p>I'm using Perl with the\n<a href=\"https://metacpan.org/pod/MIME::Lite\" rel=\"nofollow noreferrer\"><code>Mime::Lite</code> module</a>\nto send email to my subscribed mailing list using\n<a href=\"http://www.dkim.org/\" rel=\"nofollow noreferrer\"><em>DomainKeys Identified Mail</em> (DKIM)</a>\nand\n<a href=\"http://www.openspf.org/\" rel=\"nofollow noreferrer\"><em>Sender Policy Framework</em> (SPF)</a>\nrecord:</p>\n\n<pre><code>use MIME::Lite;\nuse Net::SMTP;\n\nmy $host = 'mail.domain.com';\nmy $user = 'user@domain.com';\nmy $pass = 'password1234';\n\nMIME::Lite-&gt;send('smtp', $host, AuthUser =&gt; $user, AuthPass =&gt; $pass);\nmy $msg = MIME::Lite-&gt;new(\n    From     =&gt; $from,\n    To       =&gt; $to,\n    Subject  =&gt; $subject_enc,\n    Type     =&gt; 'text/plain; charset=UTF-8',\n    Encoding =&gt; 'quoted-printable',\n    Data     =&gt; 'Hello everyone!'\n);\n$msg-&gt;send;\n</code></pre>\n\n<p>This works just fine, but the DKIM signature fails in Gmail (and presumably others). </p>\n\n<p>However, when I send email without SMTP authentication:</p>\n\n<pre><code>use MIME::Lite;\nmy $msg = MIME::Lite-&gt;new(\n    From    =&gt; $from,\n    To      =&gt; $to,\n    Subject =&gt; $subject_enc,\n    Type     =&gt; 'text/plain; charset=UTF-8',\n    Encoding =&gt; 'quoted-printable',\n    Data     =&gt; 'Hello everyone!'\n);\n$msg-&gt;send;\n</code></pre>\n\n<p>The DKIM passes fine.</p>\n\n<p>So my question is: if I have successfully implemented both DKIM and SPF records on all my outgoing email, is it even necessary to use SMTP authentication to verify the sender of the email, or is piping to <code>Sendmail</code> with the appropriate headers sufficient to ensure best chance of delivery?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526507165, "post_id": 50367724, "comment_id": 87776911, "body": "Then it will fail at <code>$_-&gt;{$index}-&gt;{ssid}</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526515723, "post_id": 50367724, "comment_id": 87779230, "body": "@ikegami: I have no idea how the structure should be populated from the string."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526516718, "post_id": 50367724, "comment_id": 87779459, "body": "Neither do I. ."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1526515749, "last_edit_date": 1526515749, "creation_date": 1526464529, "answer_id": 50367724, "question_id": 50367575, "link": "https://stackoverflow.com/questions/50367575/cant-use-string-as-an-array-ref-while-strict-refs-in-use/50367724#50367724", "title": "Can&#39;t use string as an ARRAY ref while &quot;strict refs&quot; in use", "body": "<p>$result_string is initialized with a string value. You cannot dereference a string value as an array reference.</p>\n\n<p>If you want to split the string on semicolons, use <a href=\"http://p3rl.org/split\" rel=\"nofollow noreferrer\">split</a>:</p>\n\n<pre><code>my @results = split /;/, $result_string;\n</code></pre>\n\n<p>You can then iterate over <code>@results</code>:</p>\n\n<pre><code>for my $result (@results) { ...\n</code></pre>\n\n<p>You haven't explained how the structure should be populated from the string, so I can't help you with the rest of the code.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9799283"}, "edited": false, "score": 0, "creation_date": 1526624685, "post_id": 50367873, "comment_id": 87825260, "body": "Hi,  Thanks for your help!! I am the beginner in PERL coding and facing below error this time after making the changes that you suggested: Can&#39;t use string (&quot;RCSoWLAN&quot;) as a HASH ref while &quot;strict refs&quot; in use   #!/perl64/bin/perl use strict; use warnings;  my $result_string= &#39;RCSoWLAN;ePDG-2;Qguest;ASUS_ATT_VOWIFI&#39;; my $index = 1;  for ( split /;/, $result_string ) {              print &quot;SSID[$index]: $_-&gt;{$index}-&gt;{ssid}\\n&quot;; \t\t\t$index++;          }"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1526464872, "creation_date": 1526464872, "answer_id": 50367873, "question_id": 50367575, "link": "https://stackoverflow.com/questions/50367575/cant-use-string-as-an-array-ref-while-strict-refs-in-use/50367873#50367873", "title": "Can&#39;t use string as an ARRAY ref while &quot;strict refs&quot; in use", "body": "<p>As the error message says, <code>@{ $result_string }</code> tries to dereference the string as if it were an array reference. But it's just a string, so Perl can't do it for you</p>\n\n<p>It looks as though you have semicolon-separated data, and the easiest approach is to use <code>split</code> to separate it into fields</p>\n\n<p>This should work better for you</p>\n\n<pre><code>for ( split /;/, $result_string ) {\n\n    print \"SSID[$index]: $_\\n\";\n    ++$index;\n }\n</code></pre>\n\n<p>but I can't follow what you're trying to do with <code>$_-&gt;{$index}-&gt;{ssid}</code>. Perhaps you would explain?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9799283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1709, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1526515749, "creation_date": 1526464103, "last_edit_date": 1592644375, "question_id": 50367575, "link": "https://stackoverflow.com/questions/50367575/cant-use-string-as-an-array-ref-while-strict-refs-in-use", "title": "Can&#39;t use string as an ARRAY ref while &quot;strict refs&quot; in use", "body": "<p>I am trying to execute the below mentioned code and observed the error</p>\n<blockquote>\n<p>Can't use string (&quot;RCSoWLAN;ePDG-2;Qguest;ASUS_ATT_&quot;...) as an ARRAY ref while &quot;strict refs&quot; in use.</p>\n</blockquote>\n<h3>Perl code</h3>\n<pre><code>#!/perl64/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $result_string = 'RCSoWLAN;ePDG-2;Qguest;ASUS_ATT_VOWIFI;RCS_IWLAN;Qguest;Pandora;Hydra;ASUS_ATT_VOWIFI_5G;Linksys_Performance_2.4G;RCS_NAT;ePDG7;Qguest;Pandora;Hydra;ipv6testap;Linksys_Performance_5G;ASUS_stress_5G;Hydra';\n\nmy $index = 1;\n\nforeach ( @{ $result_string } ) {\n\n    print &quot;SSID[$index]: $_-&gt;{$index}-&gt;{ssid}\\n&quot;;\n    $index++;\n}\n</code></pre>\n"}, {"tags": ["oracle", "perl", "dbi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1526462664, "post_id": 50366954, "comment_id": 87750208, "body": "Do you mean <code>execute(&#39;new numlist(134)&#39;)</code>?"}, {"owner": {"reputation": 82580, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "edited": false, "score": 0, "creation_date": 1526464744, "post_id": 50366954, "comment_id": 87751731, "body": "Probably a duplicate of <a href=\"https://stackoverflow.com/q/42649731/1509264\">stackoverflow.com/q/42649731/1509264</a>"}], "answers": [{"tags": [], "owner": {"reputation": 82580, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "is_accepted": false, "score": 1, "last_activity_date": 1526465369, "creation_date": 1526465369, "answer_id": 50368058, "question_id": 50366954, "link": "https://stackoverflow.com/questions/50366954/passing-oracletable-of-number-to-a-stored-procedure-from-perl/50368058#50368058", "title": "Passing oracletable of number to a stored procedure from perl", "body": "<p>If you only want to pass an array with a single element then, adapting your code:</p>\n\n<pre><code>$lAeging = $gDBH-&gt;prepare(q{\n        BEGIN\n            X(?,NUMLIST(?),?,?);\n        END;\n    });\n\n$lAeging-&gt;execute(\n    'XXXXX',\n    134,\n    $gStartDatepassed,\n    $gEndDatePassed\n  );\n</code></pre>\n\n<p>If you want to pass a variable length collection then this is <a href=\"https://stackoverflow.com/a/34699771/1509264\">possible in Java</a> but I have never seen a documented solution for Perl.</p>\n\n<p>You can, however, pass the list as a delimited string and then there are <a href=\"https://web.archive.org/web/20170914140540/https://stackoverflow.com/documentation/oracle/1968/splitting-delimited-strings#t=201709141405407224393\" rel=\"nofollow noreferrer\">many, many ways</a> to split it back to an collection in the database. One way is to use this pure PL/SQL function:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION split_Number_List(\n  i_str    IN  VARCHAR2,\n  i_delim  IN  VARCHAR2 DEFAULT ','\n) RETURN NUMLIST DETERMINISTIC\nAS\n  p_result       NUMLIST := NUMLIST();\n  p_start        NUMBER(5) := 1;\n  p_end          NUMBER(5);\n  c_len CONSTANT NUMBER(5) := LENGTH( i_str );\n  c_ld  CONSTANT NUMBER(5) := LENGTH( i_delim );\nBEGIN\n  IF c_len &gt; 0 THEN\n    p_end := INSTR( i_str, i_delim, p_start );\n    WHILE p_end &gt; 0 LOOP\n      p_result.EXTEND;\n      BEGIN\n        p_result( p_result.COUNT ) := TO_NUMBER( SUBSTR( i_str, p_start, p_end - p_start ) );\n      EXCEPTION\n        WHEN OTHERS THEN\n          p_result( p_result.COUNT ) := NULL;\n      END;\n      p_start := p_end + c_ld;\n      p_end := INSTR( i_str, i_delim, p_start );\n    END LOOP;\n    IF p_start &lt;= c_len + 1 THEN\n      p_result.EXTEND;\n      BEGIN\n        p_result( p_result.COUNT ) := TO_NUMBER( SUBSTR( i_str, p_start, c_len - p_start + 1 ) );\n      EXCEPTION\n        WHEN OTHERS THEN\n          p_result( p_result.COUNT ) := NULL;\n      END;\n    END IF;\n  END IF;\n  RETURN p_result;\nEND;\n/\n</code></pre>\n"}], "owner": {"reputation": 59167, "user_id": 134713, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5143bb3f979be36f8508d2605b215a4d?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/134713/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526465369, "creation_date": 1526462531, "last_edit_date": 1526462864, "question_id": 50366954, "link": "https://stackoverflow.com/questions/50366954/passing-oracletable-of-number-to-a-stored-procedure-from-perl", "title": "Passing oracletable of number to a stored procedure from perl", "body": "<p>I have stored procedure like below:</p>\n\n<pre><code>x(list IN NUMLIST)\n</code></pre>\n\n<p>I am calling from perl like below:</p>\n\n<pre><code>$lAeging-&gt;execute(new numlist(134))\n</code></pre>\n\n<p>I am getting an error like:</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"numlist\" (perhaps you forgot to load \"numlist\"?)</p>\n</blockquote>\n\n<p>The actual api has 4 args and second being the problemetic one.:</p>\n\n<pre><code>$lAeging = $gDBH-&gt;prepare(q{\n        BEGIN\n            X(?,?,?,?);\n        END;\n    });\n\n$lAeging-&gt;execute('XXXXX',\n                      new numlist(134),\n                      $gStartDatepassed,\n                      $gEndDatePassed);\n</code></pre>\n\n<p>Can anybody please point out the mistake here.</p>\n"}, {"tags": ["perl", "uninstallation", "berrybrew"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1526418011, "post_id": 50358559, "comment_id": 87734857, "body": "This is a really good question."}], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526478457, "post_id": 50360524, "comment_id": 87761194, "body": "Thanks. Can you add some instructions here about what specifically to remove from the path variables?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526488399, "post_id": 50360524, "comment_id": 87768101, "body": "Any entries that start with <code>C:\\berrybrew</code> (or the base install directory if you&#39;ve changed it from the default). One of the path entries will point to <code>c:\\berrybrew\\bin</code>, and there may be one more that points to the currently in-use Perl installation (also under <code>C:\\berrybrew\\...</code>)."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 1, "creation_date": 1526489162, "post_id": 50360524, "comment_id": 87768454, "body": "Thanks. I added that as a step in your post."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526515759, "post_id": 50360524, "comment_id": 87779239, "body": "@Stephen I greatly appreciate your patience here. &#39;berrybrew&#39; has been a massive undertaking to say the least, and I had to learn the C# language to ensure its existence. Merci beaucoup."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526567375, "post_id": 50360524, "comment_id": 87803757, "body": "Thank YOU! berrybrew is awesome."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1526501419, "last_edit_date": 1526501419, "creation_date": 1526427204, "answer_id": 50360524, "question_id": 50358559, "link": "https://stackoverflow.com/questions/50358559/how-to-uninstall-berrybrew-perlbrew-for-windows/50360524#50360524", "title": "How to uninstall berrybrew\u2014perlbrew for Windows?", "body": "<p>Disclaimer: <a href=\"https://github.com/stevieb9/berrybrew\" rel=\"nofollow noreferrer\">berrybrew</a> author here...</p>\n\n<p>To uninstall and return your system back to default:</p>\n\n<ul>\n<li><code>berrybrew off</code></li>\n<li><code>berrybrew unconfig</code></li>\n<li>then delete the directory you downloaded it to, as well as the installation directory (by default, <code>C:\\berrybrew</code>)</li>\n<li>Edit your PATH variable to remove any entries that start with <code>C:\\berrybrew</code> (or the base install directory if you've changed it from the default). One of the path entries will point to <code>C:\\berrybrew\\bin</code>, and there may be one more that points to the currently in-use Perl installation (also under <code>C:\\berrybrew\\...</code>). Technically speaking, there shouldn't be any after the first two commands are run, but one should always verify</li>\n</ul>\n\n<p>Essentially, there's really nothing to \"uninstall\". It comes down to removing <code>$ENV{PATH}</code> ie. specific environment variables that point to a) berrybrew.exe binary itself, and b) the Perl installation that you last used.</p>\n\n<p>I will update the documentation to provide more clarity in this regard.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 50360524, "answer_count": 1, "score": 3, "last_activity_date": 1534733938, "creation_date": 1526415471, "last_edit_date": 1534733938, "question_id": 50358559, "link": "https://stackoverflow.com/questions/50358559/how-to-uninstall-berrybrew-perlbrew-for-windows", "title": "How to uninstall berrybrew\u2014perlbrew for Windows?", "body": "<p>I have been running <code>berrybrew</code> on Windows\n(here's the <a href=\"http://blogs.perl.org/users/steve_bertrand/2016/07/berrybrew-the-perlbrew-for-windows-rewritten-and-enhanced.html\" rel=\"nofollow noreferrer\">home page</a>  and <a href=\"https://github.com/stevieb9/berrybrew\" rel=\"nofollow noreferrer\">GitHub repository</a>).\nI'm having some trouble with it and I want to uninstall and reinstall it, but I can't figure out how to do that.</p>\n\n<p>I am hoping it is as simple as just deleting the directory where it was installed and <code>C:\\berrybrew</code>, which is where it seems to keep files, but I don't know for sure. The instructions contain installation instructions, but no <em>uninstallation</em> instructions.</p>\n"}, {"tags": ["python", "perl", "anaconda", "conda"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526417331, "post_id": 50356636, "comment_id": 87734538, "body": "I may well be missing something here as I&#39;m not familiar with <i>Conda</i>, and if so I&#39;d be grateful if you enlightened me. I&#39;m not clear how you expect to <code>import</code> Perl modules into Python code. I imagine that Python is getting upset about the colons in the module name. Package and module names should look like a standard Python identifier, perhaps with dot separators, and even digits are discouraged. Even if the statement was valid, Python doesn&#39;t stand a chance of understanding the Perl code in the <code>.pm</code> file."}, {"owner": {"reputation": 625, "user_id": 1964671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2588097249de89f9c976e40d20f67be?s=128&d=identicon&r=PG", "display_name": "august", "link": "https://stackoverflow.com/users/1964671/august"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526419405, "post_id": 50356636, "comment_id": 87735382, "body": "For conda recipes you write a <code>build.sh</code> file which builds the software, and a <code>meta.yaml</code> file which has other information like what dependencies are needed and what tests to run. I didn&#39;t expect to import Perl modules into Python code, but for some reason the <code>meta.yaml</code> parsed testing Perl import statements as Python ones, which led to my question. I just found the answer however, it was a bug in conda that was fixed in later versions: <a href=\"https://github.com/conda/conda-build/issues/1967\" rel=\"nofollow noreferrer\">github.com/conda/conda-build/issues/1967</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526420305, "post_id": 50356636, "comment_id": 87735696, "body": "Ah I see. Thank you. Please would you write up your solution as an answer? You can then accept it yourself to mark the question as being resolved."}], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 1964671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2588097249de89f9c976e40d20f67be?s=128&d=identicon&r=PG", "display_name": "august", "link": "https://stackoverflow.com/users/1964671/august"}, "is_accepted": true, "score": 0, "last_activity_date": 1526492292, "creation_date": 1526492292, "answer_id": 50377008, "question_id": 50356636, "link": "https://stackoverflow.com/questions/50356636/how-to-test-imports-from-building-perl-modules-for-conda/50377008#50377008", "title": "how to test imports from building perl modules for conda?", "body": "<p>Self-answer:</p>\n\n<p>It was a bug in conda that was patched later on: <a href=\"https://github.com/conda/conda-build/issues/1967\" rel=\"nofollow noreferrer\">https://github.com/conda/conda-build/issues/1967</a></p>\n\n<p>Instead of the <code>meta.yaml</code> parsing Perl import test statements as Perl, it was parsing them as Python.</p>\n"}], "owner": {"reputation": 625, "user_id": 1964671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2588097249de89f9c976e40d20f67be?s=128&d=identicon&r=PG", "display_name": "august", "link": "https://stackoverflow.com/users/1964671/august"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50377008, "answer_count": 1, "score": 0, "last_activity_date": 1526492292, "creation_date": 1526407372, "question_id": 50356636, "link": "https://stackoverflow.com/questions/50356636/how-to-test-imports-from-building-perl-modules-for-conda", "title": "how to test imports from building perl modules for conda?", "body": "<p>Whenever I try to build any perl recipes for conda (<a href=\"https://github.com/bioconda/bioconda-recipes/tree/master/recipes/perl-module-build\" rel=\"nofollow noreferrer\">example</a>), I get the following type of error:</p>\n\n<pre><code>$ conda build /home/conda/recipes/perl-module-build/\n+ source /home/conda/miniconda2/bin/activate /home/conda/miniconda2/conda-bld/perl-module-build_1526324675451/_t_env\n+ /home/conda/miniconda2/conda-bld/perl-module-build_1526324675451/_t_env/bin/python -s /home/conda/miniconda2/conda-bld/perl-module-build_1526324675451/test_tmp/run_test.py\n  File \"/home/conda/miniconda2/conda-bld/perl-module-build_1526324675451/test_tmp/run_test.py\", line 2\n    import Module::Build\n                 ^\nSyntaxError: invalid syntax\nTESTS FAILED: perl-module-build-0.4224-pl5.20.3_0\n</code></pre>\n\n<p>The contents of <code>run_test.py</code> are all import statements:</p>\n\n<pre><code>$ cat /home/conda/miniconda2/conda-bld/perl-module-build_1526324675451/test_tmp/run_test.py \nprint(\"import: u'Module::Build'\")\nimport Module::Build\n</code></pre>\n\n<p>The issue appears to be Python taking issue with the import statement, but I am not sure what I should be doing given that all the perl recipes I've found use the same kind of lines in their <code>meta.yaml</code> files (can see the full meta.yaml for the example above <a href=\"https://github.com/bioconda/bioconda-recipes/blob/master/recipes/perl-module-build/meta.yaml\" rel=\"nofollow noreferrer\">here</a>), i.e.</p>\n\n<pre><code>test:\n    imports:\n        - Module::Build\n</code></pre>\n\n<p>What am I missing? I am running conda-build version 2.1.10 and python2.7 on a Docker image with CentOS6 for reasons having to do with computing cluster compatibility. I can provide the image and commands if needed.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1526406021, "post_id": 50356241, "comment_id": 87728850, "body": "Interestingly, it works on regex101."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 5, "creation_date": 1526407059, "post_id": 50356241, "comment_id": 87729418, "body": "The problem can be simplified even further: <code>&#47;(?&lt;!August )a&#47;i</code> already says &quot;Variable length lookbehind...&quot;, but remove one letter from <code>August</code> and it works fine. Remove the <code>&#47;i</code> and it works fine. And if you want to laugh: <code>August</code> doesn&#39;t work, as show above. <code>Abcdst</code> doesn&#39;t work. But <code>Abcdet</code> works."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1526407485, "post_id": 50356241, "comment_id": 87729635, "body": "Maybe it&#39;s because <code>st</code> can be a ligature? Same with <code>fi</code> and <code>ff</code>."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1526407799, "post_id": 50356241, "comment_id": 87729770, "body": "perl 5.10 seems fine with any of these regexes, as well"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526412069, "post_id": 50356241, "comment_id": 87732012, "body": "I tested and this behavior starts somewhere between Perl 5.16.3_64 and 5.26.1_64, at least in Strawberry Perl. Updated my question to reflect that. The former version is fine with the code, the latter is not."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 2, "creation_date": 1526412618, "post_id": 50356241, "comment_id": 87732277, "body": "<code>pod&#47;perl5220deltapod</code> in the Perl sources mention for &quot;Variable length lookbehind not implemented in regex m/%s/&quot;, that &quot;The perldiag entry for this warning has had information about Unicode behavior added.&quot;. So I guess, that 5.22.0 is pretty close."}, {"owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "edited": false, "score": 1, "creation_date": 1527006895, "post_id": 50356241, "comment_id": 87958731, "body": "The plan is to fix these ligature lookbehind problems in 5.30"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 9795619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17545e359d5f05c2b789f5e691a2b54e?s=128&d=identicon&r=PG&f=1", "display_name": "Hegel F.", "link": "https://stackoverflow.com/users/9795619/hegel-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1526408806, "last_edit_date": 1526408806, "creation_date": 1526406348, "answer_id": 50356364, "question_id": 50356241, "link": "https://stackoverflow.com/questions/50356241/variable-length-lookbehind-not-implemented-but-it-isnt-variable-length/50356364#50356364", "title": "&quot;Variable length lookbehind not implemented&quot; but it isn&#39;t variable length", "body": "<p>Put <code>(?i)</code> after lookbehind:</p>\n\n<p><code>(?&lt;!(Mon|Fri|Sun)day |August )(?i)abcd(?-i)</code></p>\n\n<p>or </p>\n\n<p><code>(?&lt;!(Mon|Fri|Sun)day |August )(?i:abcd)</code></p>\n\n<p>To me it seems to be a bug.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 21, "last_activity_date": 1526408191, "creation_date": 1526408191, "answer_id": 50356845, "question_id": 50356241, "link": "https://stackoverflow.com/questions/50356241/variable-length-lookbehind-not-implemented-but-it-isnt-variable-length/50356845#50356845", "title": "&quot;Variable length lookbehind not implemented&quot; but it isn&#39;t variable length", "body": "<p>That's because <code>st</code> can be a ligature. The same happens to <code>fi</code> and <code>ff</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse utf8;\n\nmy $fi = '\ufb01';\nprint $fi =~ /fi/i;\n</code></pre>\n\n<p>So imagine something like <code>\ufb01|fi</code> where, indeed, the lengths of alternatives isn't the same.</p>\n"}, {"comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 10, "creation_date": 1526408594, "post_id": 50356855, "comment_id": 87730191, "body": "To contribute to this: It&#39;s also mentioned in <a href=\"https://perldoc.perl.org/perldiag.html#Variable-length-lookbehind-not-implemented-in-regex-m/%s/\" rel=\"nofollow noreferrer\"><code>perldiag</code></a>: &quot;There are non-obvious Unicode rules under <code>&#47;i</code> that can match variably, but which you might not think could.&quot;. Another solution, apart from the <code>&#47;aa</code> switch, might be reversing the string and do it with lookaheads, if you need Unicode support and variable length lookarounds."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1526412116, "post_id": 50356855, "comment_id": 87732044, "body": "Do you know why this behavior was not present in earlier versions of Perl? 5.16.3_64 does not throw an error but 5.26.1_64 does, at least in Strawberry Perl."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1526412242, "post_id": 50356855, "comment_id": 87732107, "body": "Yes this behavior is version dependent as mentioned in linked discussion as well. Unfortunately I don&#39;t have insight into exact version when this behavior started."}, {"owner": {"reputation": 4954, "user_id": 1627296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceb7c611dc636503f32cffb20348616?s=128&d=identicon&r=PG", "display_name": "Stephane Chazelas", "link": "https://stackoverflow.com/users/1627296/stephane-chazelas"}, "edited": false, "score": 3, "creation_date": 1526470326, "post_id": 50356855, "comment_id": 87755338, "body": "Replacing the <code>s</code> or <code>t</code> with <code>[s]</code> or <code>[t]</code> also seems to work around the problem."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 4954, "user_id": 1627296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceb7c611dc636503f32cffb20348616?s=128&d=identicon&r=PG", "display_name": "Stephane Chazelas", "link": "https://stackoverflow.com/users/1627296/stephane-chazelas"}, "edited": false, "score": 0, "creation_date": 1526478168, "post_id": 50356855, "comment_id": 87760965, "body": "Thanks and very good point @StephaneChazelas. Both <code>&#47;(?&lt;![s]t)A&#47;i</code> or <code>&#47;(?&lt;!s[t])A&#47;i</code> work without errors but using <code>&#47;aa</code> is relatively easier than tweaking a bigger. regex"}, {"owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 1, "creation_date": 1528490767, "post_id": 50356855, "comment_id": 88543766, "body": "@Stephen \u2013 <code>ss</code> being matched by <code>&#223;</code> was present in Perl 5.16.3 but the other stylistic ligatures were added later, possibly around 5.22.  I&#39;ve tried to map all digraphs with variable look-behind lengths, with as much versioning information as I could find, in <a href=\"https://stackoverflow.com/a/50765660/519360\">my answer</a>."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 77, "last_activity_date": 1526471073, "last_edit_date": 1526471073, "creation_date": 1526408270, "answer_id": 50356855, "question_id": 50356241, "link": "https://stackoverflow.com/questions/50356241/variable-length-lookbehind-not-implemented-but-it-isnt-variable-length/50356855#50356855", "title": "&quot;Variable length lookbehind not implemented&quot; but it isn&#39;t variable length", "body": "<p>I have reduced your problem to this:</p>\n\n<pre><code>my $text = 'M Y H A P P Y T E X T';\nmy $regex = '(?&lt;!st)A';\nprint ($text =~ m/$regex/i ? \"true\\n\" : \"false\\n\");\n</code></pre>\n\n<p>Due to presence of <code>/i</code> (case insensitive) modifier and presence of certain character combinations such as <code>\"ss\"</code> or <code>\"st\"</code> that can be replaced by a <a href=\"http://en.wikipedia.org/wiki/Special:Search?search=Typographic_ligature\" rel=\"noreferrer\">Typographic_ligature</a> causing it to be a variable length (<code>/August/i</code> matches for instance on both <code>AUGUST</code> (6 characters) and <code>augu\ufb06</code> (5 characters, the last one being U+FB06)).</p>\n\n<p>However if we remove <code>/i</code> (case insensitive) modifier then it works because typographic ligatures are not matched.</p>\n\n<p><strong>Solution:</strong> Use <code>aa</code> modifiers i.e.:</p>\n\n<pre><code>/(?&lt;!st)A/iaa\n</code></pre>\n\n<p>Or in your regex:</p>\n\n<pre><code>my $text = 'M Y H A P P Y T E X T';\nmy $regex = '(?&lt;!(Mon|Fri|Sun)day |August )abcd';\nprint ($text =~ m/$regex/iaa ? \"true\\n\" : \"false\\n\");\n</code></pre>\n\n<p>From <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"noreferrer\">perlre</a>:</p>\n\n<blockquote>\n  <p>To forbid ASCII/non-ASCII matches (like \"k\" with \"\\N{KELVIN SIGN}\"), specify the \"a\" twice, for example <code>/aai</code> or <code>/aia</code>. (The first occurrence of \"a\" restricts the <code>\\d</code>, etc., and the second occurrence adds the \"/i\" restrictions.) But, note that code points outside the ASCII range will use Unicode rules for <code>/i</code> matching, so the modifier doesn't really restrict things to just ASCII; <strong>it just forbids the intermixing of ASCII and non-ASCII</strong>.</p>\n</blockquote>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=1045325\" rel=\"noreferrer\">See a closely related discussion here</a></p>\n"}, {"tags": [], "owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "is_accepted": false, "score": 2, "last_activity_date": 1531234872, "last_edit_date": 1531234872, "creation_date": 1528478501, "answer_id": 50765660, "question_id": 50356241, "link": "https://stackoverflow.com/questions/50356241/variable-length-lookbehind-not-implemented-but-it-isnt-variable-length/50765660#50765660", "title": "&quot;Variable length lookbehind not implemented&quot; but it isn&#39;t variable length", "body": "<p><code>st</code> could be represented in a 1-character <a href=\"https://en.wikipedia.org/wiki/Typographic_ligature#Stylistic_ligatures\" rel=\"nofollow noreferrer\">stylistic ligature</a> as <code>\ufb06</code> or <code>\ufb05</code>, so its length could be 2 or 1.</p>\n\n<p>Quickly finding perl's full list of 2\u21921-character ligatures using a bash command:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -e 'print $^V'\nv5.26.2\n$ for lig in {a..z}{a..z}; do \\\n    perl -e 'print if /(?&lt;!'$lig')x/i' 2&gt;/dev/null || echo $lig; done\n\nff fi fl ss st\n</code></pre>\n\n<p>These respectively represent the <code>\ufb00</code>, <code>\ufb01</code>, <code>\ufb02</code>, <code>\u00df</code>, and <code>\ufb06</code>/<code>\ufb05</code> ligatures.  <br><sup>(<code>\ufb05</code> represents <code>\u017ft</code>, using the obsolete <a href=\"https://en.wikipedia.org/wiki/Long_s\" rel=\"nofollow noreferrer\" title=\"U+017F Latin small letter long s\">long s character</a>; it matches <code>st</code> and it does <em>not</em> match <code>ft</code>.)</sup></p>\n\n<p>Perl also supports the remaining stylistic ligatures, <code>\ufb03</code> and <code>\ufb04</code> for <code>ffi</code> and <code>ffl</code>, though this isn't noteworthy in this context since lookbehinds already have issues with <code>\ufb00</code> and <code>\ufb01</code>/<code>\ufb02</code> separately.</p>\n\n<p>Future releases of perl may include more stylistic ligatures, though all that remain are font-specific (e.g. <a href=\"https://en.wikipedia.org/wiki/Linux_Libertine#Unicode_coverage\" rel=\"nofollow noreferrer\">Linux Libertine</a> has stylistic ligatures for <code>ct</code> and <a href=\"https://en.wikipedia.org/wiki/Ch_(digraph)\" rel=\"nofollow noreferrer\"><code>ch</code></a>) or debatably stylistic (such as the Dutch <a href=\"https://en.wikipedia.org/wiki/IJ_(digraph)#Encoding\" rel=\"nofollow noreferrer\"><code>\u0133</code></a> for <code>ij</code> or the obsolete Spanish <a href=\"https://en.wikipedia.org/wiki/Ll#Spanish\" rel=\"nofollow noreferrer\" title=\"broken L\"><code>\ua747</code></a> for <code>ll</code>).  It doesn't seem appropriate to have this treatment for ligatures that are not entirely interchangeable (nobody would accept <code>d\u0153s</code> for <code>does</code>), though there are other scenarios, such as including <code>\u00df</code> thanks to its <a href=\"https://en.wikipedia.org/wiki/%C3%9F#Keyboards_and_encoding\" rel=\"nofollow noreferrer\">uppercase form being <code>SS</code></a>.</p>\n\n<p>Perl 5.16.3 (and similarly old versions) only stumble on <code>ss</code> (for <code>\u00df</code>) and fail to expand the other ligatures in lookbehinds (they have fixed width and will not match). I didn't seek out the bugfix to itemize exactly which versions are affected.</p>\n\n<p>Perl 5.14 introduced ligature support, so earlier versions don't have this problem.</p>\n\n<h2>Workarounds</h2>\n\n<p>Workarounds for <code>/(?&lt;!August)x/i</code> (only the first will properly avoid <code>Augu\ufb06</code>):</p>\n\n<ul>\n<li><code>/(?&lt;!Augus[t])(?&lt;!Augu(?=st).)x/i</code> (absolutely comprehensive)</li>\n<li><code>/(?&lt;!Augu(?aa:st))x/i</code> (just the <code>st</code> in the lookbehind is \"ASCII-safe\" \u00b2)</li>\n<li><code>/(?&lt;!(?aa)August)x/i</code> (the whole the lookbehind is \"ASCII-safe\" \u00b2)</li>\n<li><code>/(?&lt;!August)x/iaa</code> (the whole regex is \"ASCII-safe\" \u00b2)</li>\n<li><code>/(?&lt;!Augus[t])x/i</code> (breaks ligature seeking \u00b9)</li>\n<li><code>/(?&lt;!Augus.)x/i</code> (slightly different, matches more)</li>\n<li><code>/(?&lt;!Augu(?-i:st))x/i</code> (case-sensitive <code>st</code> in lookbehind, won't match <code>AugusTx</code>)</li>\n</ul>\n\n<p>These toy with removing the <em>case-insensitive modifier</em>\u00b9 or adding the <em>ASCII-safe modifier</em>\u00b2 in various places, often requiring the regex writer to specifically know of the variable-width ligature.</p>\n\n<p>The first variation (which is the only comprehensive one) matches the variable widths with two lookbehinds: first for the six character version (no ligatures as noted in the first quote below) and second for any ligatures, employing a <em>forward</em> lookahead (which has zero width!) for <code>st</code> (including the ligatures) and then accounting for its single character width with a <code>.</code></p>\n\n<p>Two segments of the <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\"><code>perlre</code> man page</a>:</p>\n\n<h3>\u00b9 Case-insensitive modifier <code>/i</code> &amp; ligatures</h3>\n\n<blockquote>\n  <p>There are a number of Unicode characters that match a sequence of\n  multiple characters under <code>/i</code>.  For example, \"LATIN SMALL LIGATURE\n  FI\" should match the sequence <code>fi</code>.  Perl is not currently able to\n  do this when the multiple characters are in the pattern and are\n  split between groupings, or when one or more are quantified.  Thus</p>\n  \n  <pre class=\"lang-php prettyprint-override\"><code>\"\\N{LATIN SMALL LIGATURE FI}\" =~ /fi/i;          # Matches [in perl 5.14+]\n\"\\N{LATIN SMALL LIGATURE FI}\" =~ /[fi][fi]/i;    # Doesn't match!\n\"\\N{LATIN SMALL LIGATURE FI}\" =~ /fi*/i;         # Doesn't match!\n\"\\N{LATIN SMALL LIGATURE FI}\" =~ /(f)(i)/i;      # Doesn't match!\n</code></pre>\n</blockquote>\n\n<h3>\u00b2 ASCII-safe modifier <code>/aa</code> (perl 5.14+)</h3>\n\n<blockquote>\n  <p>To forbid ASCII/non-ASCII matches (like <code>k</code> with <code>\\N{KELVIN SIGN}</code>),\n  specify the <code>a</code> twice, for example <code>/aai</code> or <code>/aia</code>.  (The first\n  occurrence of <code>a</code> restricts the <code>\\d</code>, etc., and the second occurrence\n  adds the <code>/i</code> restrictions.)  But, note that code points outside the\n  ASCII range will use Unicode rules for <code>/i</code> matching, so the modifier\n  doesn't really restrict things to just ASCII; it just forbids the\n  intermixing of ASCII and non-ASCII.</p>\n  \n  <p>To summarize, this modifier provides protection for applications that\n  don't wish to be exposed to all of Unicode.  Specifying it twice gives\n  added protection.</p>\n</blockquote>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2934, "favorite_count": 6, "accepted_answer_id": 50356855, "answer_count": 4, "score": 56, "last_activity_date": 1531234872, "creation_date": 1526405744, "last_edit_date": 1526414328, "question_id": 50356241, "link": "https://stackoverflow.com/questions/50356241/variable-length-lookbehind-not-implemented-but-it-isnt-variable-length", "title": "&quot;Variable length lookbehind not implemented&quot; but it isn&#39;t variable length", "body": "<p>I have a very crazy regex that I'm trying to diagnose. It is also very long, but I have cut it down to just the following script. Run using Strawberry Perl v5.26.2.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $text = \"M Y H A P P Y T E X T\";\nmy $regex = '(?i)(?&lt;!(Mon|Fri|Sun)day |August )abcd(?-i)';\n\nif ($text =~ m/$regex/){\n    print \"true\\n\";\n}\nelse {\n    print \"false\\n\";\n}\n</code></pre>\n\n<p>This gives the error \"Variable length lookbehind not implemented in regex.\"</p>\n\n<p>I am hoping you can help with several issues:</p>\n\n<ol>\n<li>I don't see why this error would occur, because all of the possible lookbehind values are 7 characters: \"Monday \", \"Friday \", \"Sunday \", \"August \".</li>\n<li>I did not write this regex myself, and I am not sure how to interpret the syntax <code>(?i)</code> and <code>(?-i)</code>. When I get rid of the <code>(?i)</code> the error actually goes away. How will perl interpret this part of the regex? I would think the first two characters are evaluated to \"optional literal parentheses\" except that the parentheses isn't escaped and also in that case I would get a different syntax error because the closing parentheses would then not be matched.</li>\n<li>This behavior starts somewhere between Perl 5.16.3_64 and 5.26.1_64, at least in Strawberry Perl. The former version is fine with the code, the latter is not. Why did it start?</li>\n</ol>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1526403460, "post_id": 50354617, "comment_id": 87727432, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50218133/how-to-replace-strings-within-an-array-in-perl\">how to replace strings within an array in perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4939337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12ed56dd4920ac0dd84f67a591522349?s=128&d=identicon&r=PG&f=1", "display_name": "Husk01inJun", "link": "https://stackoverflow.com/users/4939337/husk01injun"}, "edited": false, "score": 0, "creation_date": 1526402392, "post_id": 50355177, "comment_id": 87726786, "body": "Thanks, Not getting the output when i print(@match), its printing the hash, shall I push it to a new array? PS: Need the output in an array .."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 33, "user_id": 4939337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12ed56dd4920ac0dd84f67a591522349?s=128&d=identicon&r=PG&f=1", "display_name": "Husk01inJun", "link": "https://stackoverflow.com/users/4939337/husk01injun"}, "edited": false, "score": 0, "creation_date": 1526405151, "post_id": 50355177, "comment_id": 87728415, "body": "Converting the hash back to an array is easy: <code>my @output = map { &quot;$_=&quot; . join &#39; &#39;, keys %{ $symbol{$_} } } keys %symbol;</code>."}, {"owner": {"reputation": 33, "user_id": 4939337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12ed56dd4920ac0dd84f67a591522349?s=128&d=identicon&r=PG&f=1", "display_name": "Husk01inJun", "link": "https://stackoverflow.com/users/4939337/husk01injun"}, "edited": false, "score": 0, "creation_date": 1526490357, "post_id": 50355177, "comment_id": 87769112, "body": "Thank you @choroba"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1526401893, "creation_date": 1526401893, "answer_id": 50355177, "question_id": 50354617, "link": "https://stackoverflow.com/questions/50354617/how-to-interchange-values-of-index-in-an-array/50355177#50355177", "title": "How to interchange values of index in an array?", "body": "<p>Yes, using a hash is much easier.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @match = ('signal=signal_1 signal_2 signal_3',\n             'signal_1=signal_4 signal_5 abc',\n             'abc=signal_6 signal_7');\n\nmy %symbol;\n@{ $symbol{ $_-&gt;[0] } }{ split ' ', $_-&gt;[1] } = ()\n    for map { [ split /=/ ] } @match;\n\nmy $changed;\ndo {\n    $changed = 0;\n    for my $key (keys %symbol) {\n        for my $value (keys %{ $symbol{$key} }) {\n            if (exists $symbol{$value}) {\n                my @news = keys %{ $symbol{$value} };\n                for my $new (@news) {\n                    next if exists $symbol{$key}{$new};\n\n                    $changed = 1;\n                    undef $symbol{$key}{$new};\n                }\n            }\n        }\n    }\n} while $changed;\n\nuse Data::Dumper; warn Dumper \\%symbol;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4939337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12ed56dd4920ac0dd84f67a591522349?s=128&d=identicon&r=PG&f=1", "display_name": "Husk01inJun", "link": "https://stackoverflow.com/users/4939337/husk01injun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 50355177, "answer_count": 1, "score": 0, "last_activity_date": 1526401893, "creation_date": 1526400067, "last_edit_date": 1526401331, "question_id": 50354617, "link": "https://stackoverflow.com/questions/50354617/how-to-interchange-values-of-index-in-an-array", "title": "How to interchange values of index in an array?", "body": "<p>I am trying to match the strings inside an array and interchange the related values. But not able to form the logic.</p>\n\n<pre><code>@match = (\n    \"signal=signal_1 signal_2 signal_3\", \n    \"signal_1=signal_4 signal_5 abc\", \n    \"abc=signal_6 signal_7\"\n);\n\n$i   = 0;\n$num = @match;\n\nwhile ( $i &lt; $num ) {   \n\n    $j = $i + 1;\n\n    while( $j &lt; $num ) {\n\n        $match[$i] =~ s/=/ /g;\n        $match[$j] =~ s/=/ /g;\n\n        print($match[$i]);\n        #print($match[$j]);\n\n        @link1 = split / /, $match[$i];\n        @link2 = split / /, $match[$j];\n\n        #print(@link1);\n        #print(@link2);\n\n        for ( $i = 0; $i &lt;= ($#link1); $i++ ) {\n\n            if ( $link1[$i] =~ $link2[0] ) {\n                # here I am missing the logic to interchange\n            }\n        }\n\n        $j++;\n        exit;\n    }\n\n    $i++;\n}\n</code></pre>\n\n<p>The output array should be</p>\n\n<pre><code>@match = (\n    \"signal=signal_4 signal_5 abc signal_2 signal_3\", \n    \"signal_1=signal_4 signal_5 signal_6 signal_7\", \n    \"abc=signal_6 signal_7\"\n);\n</code></pre>\n\n<p>And is it possible to convert this array into a hash and interchange the matched keys and values?</p>\n"}, {"tags": ["windows", "perl", "strawberry-perl", "summarization"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526400723, "post_id": 50352767, "comment_id": 87725845, "body": "How about you install <code>DB_File</code> module like it suggests? Use <code>cpan DB_File</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526400878, "post_id": 50352767, "comment_id": 87725952, "body": "Presumably you mean <i>&quot;db file&quot;</i>? I don&#39;t know what a bd file might be."}, {"owner": {"reputation": 158, "user_id": 9486907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacab1e7fc421e4183fe0af2105321a8?s=128&d=identicon&r=PG&f=1", "display_name": "K.cyrine", "link": "https://stackoverflow.com/users/9486907/k-cyrine"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526403389, "post_id": 50352767, "comment_id": 87727390, "body": "@Borodin I get this error when excuting cpan DB_File <code>dmake.exe:  Error code 129, while making &#39;version.o&#39;   PMQS&#47;DB_File-1.841.tar.gz   C:\\Perl64\\site\\bin\\dmake.exe -- NOT OK</code> (I am not a perl programmer)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526405307, "post_id": 50352767, "comment_id": 87728509, "body": "Please put the complete build log in your question."}, {"owner": {"reputation": 763, "user_id": 200794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a1d7aeb5a21edb0fcce12df464ff13b?s=128&d=identicon&r=PG", "display_name": "FeRD", "link": "https://stackoverflow.com/users/200794/ferd"}, "edited": false, "score": 0, "creation_date": 1526984059, "post_id": 50352767, "comment_id": 87943453, "body": "On Linux, building <code>DB_File</code> via <code>cpan</code> requires the development headers for <code>libdb</code> be installed (on Fedora that&#39;s the <code>libdb-devel</code> rpm), otherwise the build attempt will fail with exactly the same error. I don&#39;t know if the Berkeley DB library (<code>libdb</code>) exists for Windows \u2014 I assume it does \u2014 but it&#39;s a requirement for building <code>DB_File</code>."}, {"owner": {"reputation": 763, "user_id": 200794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a1d7aeb5a21edb0fcce12df464ff13b?s=128&d=identicon&r=PG", "display_name": "FeRD", "link": "https://stackoverflow.com/users/200794/ferd"}, "edited": false, "score": 0, "creation_date": 1526984410, "post_id": 50352767, "comment_id": 87943649, "body": "It would appear that ActiveState&#39;s build server <a href=\"http://ppm4.activestate.com/MSWin32-x64/5.24/2400/P/PM/PMQS/BerkeleyDB-0.55.d/log-20160618T131615.txt\" rel=\"nofollow noreferrer\">is having the same issue</a> building <code>BerkeleyDB</code> under Windows, so that&#39;s a bad sign. (<code>DB_File</code> appears to be administratively disabled on their build servers, for some reason. But <code>BerkeleyDB</code> has the same <code>libdb</code> dependency.)"}], "owner": {"reputation": 158, "user_id": 9486907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacab1e7fc421e4183fe0af2105321a8?s=128&d=identicon&r=PG&f=1", "display_name": "K.cyrine", "link": "https://stackoverflow.com/users/9486907/k-cyrine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1526479618, "creation_date": 1526394414, "last_edit_date": 1526479618, "question_id": 50352767, "link": "https://stackoverflow.com/questions/50352767/error-when-generating-wordnet-db-file", "title": "Error when generating wordnet db file", "body": "<p>To execute <code>pyrouge</code> I should generate <code>wordnet db</code> file (on windows) by running this command:</p>\n\n<pre><code>cd pyrouge-master\\tools\\ROUGE-1.5.5\\data\nperl WordNet-2.0-Exceptions/buildExeptionDB.pl ./WordNet-2.0-Exceptions ./smart_common_words.txt ./WordNet-2.0.exc.db\n</code></pre>\n\n<p>But I got this error:</p>\n\n<pre><code>Can't locate DB_File.pm in @INC (you may need to install the DB_File module) (@INC contains: C:/Perl64/site/lib C:/Perl64/lib .) at WordNet-2.0-Exceptions/build\nExeptionDB.pl line 2.\nBEGIN failed--compilation aborted at WordNet-2.0-Exceptions/buildExeptionDB.pl l\nine 2.\n</code></pre>\n\n<p>So I tried to install DB_File using CPAN <code>cpan -i DB_File</code>, but i got this error</p>\n\n<pre><code>version.c:30:16: fatal error: db.h: No such file or directory\ncompilation terminated.\ndmake.exe:  Error code 129, while making 'version.o'\n  PMQS/DB_File-1.841.tar.gz\n  C:\\Perl64\\site\\bin\\dmake.exe -- NOT OK\n</code></pre>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1526388683, "post_id": 50347984, "comment_id": 87717193, "body": "It looks like you are using Windows, and you don&#39;t know how to copy output from <code>cmd</code>. You need to right-click, pick <i>Select</i> (or <i>Mark</i> or something), then select and press the <i>Enter</i> key. Or read <a href=\"https://www.howtogeek.com/howto/windows-vista/copy-to-the-clipboard-from-the-windows-command-prompt/\" rel=\"nofollow noreferrer\">howtogeek.com/howto/windows-vista/&hellip;</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1526388703, "post_id": 50347984, "comment_id": 87717201, "body": "I would suggest <code>&#47;^(\\d+)_(\\d+)_(\\w+)_(\\d+)\\.xml$&#47;</code> unless you can&#39;t trust the format of your filenames and you need to <i>validate</i> them as well as parsing the information."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1526388501, "post_id": 50348066, "comment_id": 87717049, "body": "Note that it&#39;s only <i>successful</i> regex pattern matches that alter the number variables; a failed match will leave them untouched. Also, <code>tr&#47;&#47;&#47;</code> doesn&#39;t affect them because it doesn&#39;t use regex patterns: it is a simple character range."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1526393594, "post_id": 50348066, "comment_id": 87720863, "body": "@Borodin I my real case I test the match (if ...) before I capture. I omitted this in SO to simplify the problem. Thank you for this information . I didn&#39;t know that."}], "tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": true, "score": 10, "last_activity_date": 1526423606, "last_edit_date": 1526423606, "creation_date": 1526380505, "answer_id": 50348066, "question_id": 50347984, "link": "https://stackoverflow.com/questions/50347984/perl-strange-behaviour-of-s-g/50348066#50348066", "title": "Perl: Strange behaviour of s///g", "body": "<p><code>m//</code> and <code>s///</code> set the match variables after a successful match, while <code>tr///</code> doesn\u2019t, since it\u2019s just a character-by-character transformation. Using <code>s///</code> here just discards the previous values of <code>$1</code>, <code>$2</code>, &amp;c. because you\u2019re doing another match. Just bind them to different variables before using them.</p>\n\n<pre><code>my $x = '01_02_john_jane_fred_2017.xml';\n$x =~ /^(\\d\\d)_(\\d\\d)_((?:[a-z]+_?)+)_(\\d{4})\\.xml$/;\n\nmy $first = $1;\nmy $second = $2;\nmy $desc = $3;\nmy $year = $4;\n$desc =~ s/_//g;\n\nprint \"---print \\$first: $first\\n\";\nprint \"---print \\$second: $second\\n\";\n# ...\n</code></pre>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 50348066, "answer_count": 1, "score": 1, "last_activity_date": 1526423606, "creation_date": 1526380231, "last_edit_date": 1526405192, "question_id": 50347984, "link": "https://stackoverflow.com/questions/50347984/perl-strange-behaviour-of-s-g", "title": "Perl: Strange behaviour of s///g", "body": "<p>I have a regex which captures some parts of a string. I want to remove/replace some character of one of the captured string using s///g but it has a strange behaviour. With tr///d it gives the desired result.</p>\n\n<p>First here the output of what I want using the code with tr:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $x = '01_02_john_jane_fred_2017.xml';\n\n$x =~ /^(\\d\\d)_(\\d\\d)_((?:[a-z]+_?)+)_(\\d{4})\\.xml$/;\n\nmy $desc = $3;\n\n$desc =~ tr/_//d;\n\nprint \"---print \\$1: $1\\n\";\nprint \"---print \\$2: $2\\n\";\nprint \"---print \\$3: $3\\n\";\nprint \"---print \\$desc: $desc\\n\";\nprint \"---print \\$4: $4\\n\";\n</code></pre>\n\n<p>This is what I get:</p>\n\n<pre><code>D:\\&gt;perl p0018.pl\n---print $1: 01\n---print $2: 02\n---print $3: john_jane_fred\n---print $desc: johnjanefred\n---print $4: 2017\n</code></pre>\n\n<p>But if I use s///g instead of tr///d:</p>\n\n<pre><code>$desc =~ s/_//g;\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>D:\\&gt;perl p0018.pl\nUse of uninitialized value $1 in concatenation (.) or string at p0018.pl line 14.\n---print $1:\nUse of uninitialized value $2 in concatenation (.) or string at p0018.pl line 15.\n---print $2:\nUse of uninitialized value $3 in concatenation (.) or string at p0018.pl line 16.\n---print $3:\n---print $desc: johnjanefred\nUse of uninitialized value $4 in concatenation (.) or string at p0018.pl line 18.\n---print $4:\n</code></pre>\n\n<p>Is there an explanation for this behaviour? How I could use s instead of tr to get the desired result?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1526372328, "post_id": 50345355, "comment_id": 87706569, "body": "I don&#39;t have time to write a full answer, but instead of your current <code>push</code>, you could do something like <code>push @{$hash{$region}-&gt;{$site}}, $layer</code>. And then iterate with three nested <code>foreach</code> (one for the regions, one for the sites and one for the layers). Hope it helps."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1526372370, "post_id": 50345355, "comment_id": 87706592, "body": "@Dada thank you for that, let me try it quick."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1526372623, "post_id": 50345355, "comment_id": 87706720, "body": "@Dada how do I run each if the foreach then? <code>foreach my $values(keys %hash)</code> gets values from <code>%hash</code> and there is only one hash?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1526372813, "post_id": 50345355, "comment_id": 87706829, "body": "Could do <code>for my $region (keys %hash) { for my $site (keys %{$hash{$region}}) { say &quot;$site has layers: @{$hash{$region}-&gt;{$site}}&quot; }}</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1526391425, "post_id": 50345581, "comment_id": 87719266, "body": "Thanks very much for your input, I understand this alot better now! Upvoted your answer."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1526410025, "last_edit_date": 1526410025, "creation_date": 1526372745, "answer_id": 50345581, "question_id": 50345355, "link": "https://stackoverflow.com/questions/50345355/use-different-values-of-hash-in-different-parts-of-script/50345581#50345581", "title": "Use different values of hash in different parts of script", "body": "<p>For the direct question: iterate over keys and for each split the value into variables</p>\n\n<pre><code>foeach my $region (sort keys %hash) {\n    my ($region, $site, $layer) = split ' ', $region;\n    ...\n}\n</code></pre>\n\n<p>which you can then use for your first desired print.</p>\n\n<p>However, two notes are in order.</p>\n\n<p>Why is <code>$region</code> a part of a value when it is the key? Instead why not  </p>\n\n<pre><code>...\npush @{$hash{$region}}, \"$site $layer\";\n</code></pre>\n\n<p>so that you associate sites and layers with a region. </p>\n\n<p>More to the point, there are entries for region which have same sites and you clearly need all layers for a site within a region.  Then you may want a nested structure</p>\n\n<pre><code>%hash = ( region =&gt; { site =&gt; [ layer, ... ], ... }, ... )\n</code></pre>\n\n<p>which you can populate with</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    my ($region, $site, $layer) = split;\n    push @{$hash{$region}-&gt;{$site}}, $layer;\n}\n</code></pre>\n\n<p>From this you can carry out your second print, of all layers within sites in a region</p>\n\n<pre><code>foreach my $region (sort keys %hash) {\n    print \"$region has sites: \", \n        join(' and ', keys %{$hash{$region}}), \", with layers: \";\n    foreach my $site (keys %{$hash{$region}}) {\n        print \"@{$hash{$region}-&gt;{$site}} \"\n    }\n    say ''; \n}\n</code></pre>\n\n<p>what prints</p>\n\n<pre>\nEast has sites: Vista and Monte, with layers: layer3 layer2 \nNorth has sites: belair, with layers: layer2 layer3 \n</pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "edited": false, "score": 0, "creation_date": 1526377565, "post_id": 50345646, "comment_id": 87709878, "body": "just a quick question, I am trying to understand what this does exactly. <code>++$sites{$site_id}{layers}{$layer_id}</code> I can see it works, but cannot get my head around this formula."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1526373023, "creation_date": 1526373023, "answer_id": 50345646, "question_id": 50345355, "link": "https://stackoverflow.com/questions/50345355/use-different-values-of-hash-in-different-parts-of-script/50345646#50345646", "title": "Use different values of hash in different parts of script", "body": "<pre><code>my %sites;\nmy %regions;\nwhile (&lt;&gt;) {\n   my ($region_id, $site_id, $layer_id) = split;\n\n   # Use hashes instead of arrays to remove duplicates.    \n   ++$sites{$site_id}{layers}{$layer_id};\n   ++$regions{$region_id}{layers}{$layer_id};\n   ++$regions{$region_id}{sites}{$site_id};\n}\n\n# \"Flatten\" hashes into sorted arrays of unique elements.\nfor my $site_id (keys(%sites)) {\n   my $site = $sites{$site_id};\n   $site-&gt;{layers} = [ sort keys(%{ $site-&gt;{layers} }) ];\n}\n\nfor my $region_id (keys(%regions)) {\n   my $region = $regions{$region_id};\n   $region-&gt;{layers} = [ sort keys(%{ $region-&gt;{layers} }) ];\n   $region-&gt;{sites}  = [ sort keys(%{ $region-&gt;{sites}  }) ];\n}\n\n# Now do what we want to do.\nfor my $site_id (sort keys(%sites)) {\n   my $site = $sites{$site_id};\n   print \"$site_id has layers @{ $site-&gt;{layers} }\\n\";\n}\n\nfor my $region_id (sort keys(%regions)) {\n   my $region = $regions{$region_id};\n   print \"$region_id has sites @{ $region-&gt;{sites} } and layers @{ $region-&gt;{layers} }\\n\";\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8956060"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 50345646, "answer_count": 2, "score": 3, "last_activity_date": 1526410025, "creation_date": 1526371904, "last_edit_date": 1592644375, "question_id": 50345355, "link": "https://stackoverflow.com/questions/50345355/use-different-values-of-hash-in-different-parts-of-script", "title": "Use different values of hash in different parts of script", "body": "<p>I have a hash that I collect from a file. The below script will print all of the values as expected (note I only included important parts of the script, so opening of input file not added to not be too broad):</p>\n<pre><code>use strict;\nuse warnings;\n\nmy %hash = ();\nwhile (&lt;$fh&gt;) {\n  my ($region, $site, $layer) = split;\n  push @{$hash{$region}}, &quot;$region $site $layer&quot;;\n}\nforeach my $values(keys %hash) {\n  print $values,&quot;\\n&quot;;\n}\n</code></pre>\n<p>My question however is that I do not want to print all the values based on the key, I actually want to split the values and print them in different areas by telling the perl what I want, and not just print <code>$values</code>.</p>\n<p>For instance if I have the following data:</p>\n<pre><code>North belair layer2\nNorth belair layer3\nEast Monte layer2\nEast Vista layer3\n</code></pre>\n<p>I actually want to be able to use the values in other areas, and print something like:</p>\n<pre><code>print &quot;$site has layers: $layer&quot;\n</code></pre>\n<p>which will print:</p>\n<blockquote>\n<p>belair has layers: layer2 layer3</p>\n<p>Monte has layers: layer2</p>\n<p>Vista has layers: layer3</p>\n</blockquote>\n<p>or</p>\n<pre><code>print &quot;$region has sites, $site and $site has layers: $layer&quot;;\n</code></pre>\n<p>Which will then print:</p>\n<blockquote>\n<p>North has sites: belair and layers: layer2 layer3</p>\n<p>East has sites: Monte Vista and layers: layer2 layer3</p>\n</blockquote>\n<p>When I run multiple <code>foreach</code> loops I get duplicated results, and I am not sure which direction to goto anymore. Each search I have done only shows me how to print all <code>$values</code> for <code>key</code></p>\n"}, {"tags": ["git", "perl", "svn", "git-svn"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526370806, "post_id": 50344527, "comment_id": 87705726, "body": "Have you initiated a svn repo yet?"}, {"owner": {"reputation": 1621, "user_id": 2663585, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19599ed9c1384c3ae0f6ec1a8f9e2c35?s=128&d=identicon&r=PG", "display_name": "Iowa", "link": "https://stackoverflow.com/users/2663585/iowa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526371157, "post_id": 50344527, "comment_id": 87705930, "body": "@xxfelixxx, Yup i initially ran the &quot;git svn init &lt;SVN_URL&gt;&quot; which ran successfully. And then when i ran the &quot;git svn fetch&quot;, i ended up getting the error which i have posted in the question."}, {"owner": {"reputation": 1621, "user_id": 2663585, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19599ed9c1384c3ae0f6ec1a8f9e2c35?s=128&d=identicon&r=PG", "display_name": "Iowa", "link": "https://stackoverflow.com/users/2663585/iowa"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526371524, "post_id": 50344527, "comment_id": 87706135, "body": "@ikegami, no i replaced the &#39;actual http URL&#39; with &lt;SVN_URL&gt;."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526372056, "post_id": 50344527, "comment_id": 87706408, "body": "Have you set up a different svn repo and set it up to be the remote of this git svn repo?"}, {"owner": {"reputation": 1621, "user_id": 2663585, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19599ed9c1384c3ae0f6ec1a8f9e2c35?s=128&d=identicon&r=PG", "display_name": "Iowa", "link": "https://stackoverflow.com/users/2663585/iowa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526372420, "post_id": 50344527, "comment_id": 87706613, "body": "Precisely, i have a SVN repo running over http, and initialize it using &#39;git svn init <a href=\"http://IP:PORT/svn/trunk/Automation/UCM\" rel=\"nofollow noreferrer\">IP:PORT/svn/trunk/Automation/UCM</a>&#39;, then i set the remote using the command &#39;git remote add origin <a href=\"http://IP:PORT/svn/trunk/Automation/UCM\" rel=\"nofollow noreferrer\">IP:PORT/svn/trunk/Automation/UCM</a>&#39; and then do a &#39;git svn fetch&#39;. The last command is failing with the error which i have posted in the question."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526372673, "post_id": 50344527, "comment_id": 87706751, "body": "<a href=\"https://stackoverflow.com/questions/13571944/git-svn-unrecognized-url-scheme-error\" title=\"git svn unrecognized url scheme error\">stackoverflow.com/questions/13571944/&hellip;</a>"}, {"owner": {"reputation": 1621, "user_id": 2663585, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19599ed9c1384c3ae0f6ec1a8f9e2c35?s=128&d=identicon&r=PG", "display_name": "Iowa", "link": "https://stackoverflow.com/users/2663585/iowa"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526373313, "post_id": 50344527, "comment_id": 87707129, "body": "I upgraded git to the latest version, which is 2.17, and still getting the same error."}], "answers": [{"tags": [], "owner": {"reputation": 1401, "user_id": 1141215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4496f8f62ec95cacebe522acd5c55bf7?s=128&d=identicon&r=PG", "display_name": "PJ_Finnegan", "link": "https://stackoverflow.com/users/1141215/pj-finnegan"}, "is_accepted": false, "score": 1, "last_activity_date": 1563797976, "creation_date": 1563797976, "answer_id": 57145924, "question_id": 50344527, "link": "https://stackoverflow.com/questions/50344527/bad-url-passed-to-ra-layer-unrecognized-url-scheme/57145924#57145924", "title": "Bad URL passed to RA layer: Unrecognized URL scheme", "body": "<p>The cpan SVN::Core installation uses the SERF libraries (for HTTP scheme handling) only if it finds them.\nTry and install the SERF-dev library:</p>\n\n<pre><code>$ sudo apt-get install libserf-dev\n</code></pre>\n\n<p>then re-install (re-build) SVN::Core:</p>\n\n<pre><code>$ cpan\n...\ncpan[1]&gt; install SVN::Core\n</code></pre>\n\n<p>you should see this <code>configure</code> output:</p>\n\n<pre><code>configure: serf library configuration via pkg-config\nchecking for serf-2 library... no\nchecking for serf-1 library... yes\nchecking serf library version... 1.3.8\nchecking serf version is suitable... yes\nchecking was serf enabled... yes\n</code></pre>\n"}], "owner": {"reputation": 1621, "user_id": 2663585, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/19599ed9c1384c3ae0f6ec1a8f9e2c35?s=128&d=identicon&r=PG", "display_name": "Iowa", "link": "https://stackoverflow.com/users/2663585/iowa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1563797976, "creation_date": 1526369102, "last_edit_date": 1526433008, "question_id": 50344527, "link": "https://stackoverflow.com/questions/50344527/bad-url-passed-to-ra-layer-unrecognized-url-scheme", "title": "Bad URL passed to RA layer: Unrecognized URL scheme", "body": "<p>I installed subversion 1.9 on RHEL 7.3 x86_64 VM. Below is the output of svn version.</p>\n\n<pre><code>[root@&lt;hostname&gt; ~]# svn --version\nsvn, version 1.9.7 (r1800392)\n   compiled Aug 10 2017, 21:36:06 on x86_64-redhat-linux-gnu\n\nCopyright (C) 2017 The Apache Software Foundation.\nThis software consists of contributions made by many people;\nsee the NOTICE file for more information.\nSubversion is open source software, see http://subversion.apache.org/\n\nThe following repository access (RA) modules are available:\n\n* ra_svn : Module for accessing a repository using the svn network protocol.\n  - with Cyrus SASL authentication\n  - handles 'svn' scheme\n* ra_local : Module for accessing a repository on local disk.\n  - handles 'file' scheme\n* ra_serf : Module for accessing a repository via WebDAV protocol using serf.\n  - using serf 1.3.8 (compiled with 1.3.7)\n  - handles 'http' scheme\n  - handles 'https' scheme\n\nThe following authentication credential caches are available:\n\n* Plaintext cache in /root/.subversion\n* Gnome Keyring\n* GPG-Agent\n</code></pre>\n\n<p>I have installed git 2.9. Below is the output of git version.</p>\n\n<pre><code>[root@&lt;hostname&gt; ~]# git --version\ngit version 2.9.5\n</code></pre>\n\n<p>Any git svn operation leading to the below error.</p>\n\n<pre><code>[root@&lt;hostname&gt; codebase]# git svn fetch\nBad URL passed to RA layer: Unrecognized URL scheme for 'http://&lt;IP&gt;:&lt;PORT&gt;/svn/trunk/Automation/UCM' at /usr/local/git/share/perl5/Git/SVN.pm line 144.\n</code></pre>\n\n<p>Below is the perl version.</p>\n\n<pre><code>[root@&lt;hostname&gt; ~]# perl --version\n\nThis is perl 5, version 18, subversion 2 (v5.18.2) built for x86_64-linux\n\nCopyright 1987-2013, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n</code></pre>\n\n<p>Have installed Alien SVN using the command cpan SVN::core and have also installed subversion perl binaries.</p>\n\n<p>Googled but couldnt get it to work. Tried the solution mentioned <a href=\"https://stackoverflow.com/a/13865154/2663585\">here</a> but no luck.\nCan someone please let me know how to resolve this issue?</p>\n"}, {"tags": ["perl", "data-structures"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1526344997, "post_id": 50340658, "comment_id": 87697850, "body": "Does the input file actually have indentations of varying lengths and blank lines separating the data?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1526385417, "post_id": 50340658, "comment_id": 87714839, "body": "Is the input file a CSV? If so, don&#39;t parse it yourself. Use <code>Text::CSV</code> instead. <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">metacpan.org/pod/Text::CSV</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1526345725, "creation_date": 1526345725, "answer_id": 50340902, "question_id": 50340658, "link": "https://stackoverflow.com/questions/50340658/parse-text-file-into-nested-data-structure/50340902#50340902", "title": "Parse text file into nested data structure", "body": "<ol>\n<li>Parse each line into a hash. </li>\n<li>Remove the key column from the hash. </li>\n<li>Push the hash onto an array based on the key column.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %hash;\nmy @columns = qw(category name role age);\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my %temp;\n    @temp{@columns} = split(/\\s*,\\s*/);\n\n    my $key = delete($temp{category});\n    push(@{$hash{$key}}, \\%temp);\n}\n\nprint Dumper(\\%hash);\n\n__DATA__\nanimal, cola, husband, 36\nanimal, wilma, wife, 31\nanimal, pebbles, kid, 4\nbrutal, george, husband, 41\nbrutal, jane, wife, 39\nbrutal, elroy, kid, 9\ncosa, homer, husband, 34\ncosa, marge, wife, 37\ncosa, bart, kid, 11\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'cosa' =&gt; [\n                      {\n                        'name' =&gt; 'homer',\n                        'age' =&gt; '34',\n                        'role' =&gt; 'husband'\n                      },\n                      {\n                        'name' =&gt; 'marge',\n                        'age' =&gt; '37',\n                        'role' =&gt; 'wife'\n                      },\n                      {\n                        'name' =&gt; 'bart',\n                        'age' =&gt; '11',\n                        'role' =&gt; 'kid'\n                      }\n                    ],\n          'brutal' =&gt; [\n                        {\n                          'name' =&gt; 'george',\n                          'age' =&gt; '41',\n                          'role' =&gt; 'husband'\n                        },\n                        {\n                          'name' =&gt; 'jane',\n                          'age' =&gt; '39',\n                          'role' =&gt; 'wife'\n                        },\n                        {\n                          'name' =&gt; 'elroy',\n                          'age' =&gt; '9',\n                          'role' =&gt; 'kid'\n                        }\n                      ],\n          'animal' =&gt; [\n                        {\n                          'name' =&gt; 'cola',\n                          'age' =&gt; '36',\n                          'role' =&gt; 'husband'\n                        },\n                        {\n                          'name' =&gt; 'wilma',\n                          'age' =&gt; '31',\n                          'role' =&gt; 'wife'\n                        },\n                        {\n                          'name' =&gt; 'pebbles',\n                          'age' =&gt; '4',\n                          'role' =&gt; 'kid'\n                        }\n                      ]\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1598504612, "last_edit_date": 1598504612, "creation_date": 1526345860, "answer_id": 50340914, "question_id": 50340658, "link": "https://stackoverflow.com/questions/50340658/parse-text-file-into-nested-data-structure/50340914#50340914", "title": "Parse text file into nested data structure", "body": "<p>The data structure you show has one critical rule: A value in a hash can only be a scalar.</p>\n<p>So to associate a multi-valued variable with a key use the reference to that variable, here arrayref. And if values in that array need be more complex than scalars you again use a reference, here a hashref.<sup>\u2020</sup> So the value for each key is an arrayref whose elements are hashrefs.</p>\n<p>Then you need to learn how to access elements deeper in the structure. That isn't very complex either: dereference them at each level and you can then work with them like you would with an array or hash.</p>\n<p>All this is in <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>, for which one need be clear with <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>. A reference is <a href=\"https://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>.</p>\n<p>When this is put to use in your problem</p>\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dump qw(dd);\n\nmy $file = 'data.txt';\nopen my $fh, '&lt;', $file or die &quot;Can't open $file: $!&quot;;\n\nmy %result;\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    my ($key, $name, $role, $age) = split /\\s*,\\s*/;\n\n    push @{$result{$key}}, \n         { name =&gt; $name, role =&gt; $role, age =&gt; $age };   \n}\n\ndd \\%result;\n</code></pre>\n<p>This prints the correct data structure. I use <a href=\"http://search.cpan.org/%7Egaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a> to see a complex data structure, which need be installed; there is <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a> in the core. There are yet others.</p>\n<p>The <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> above uses a regex <code>/\\s*,\\s*/</code> for the delimiter, so to split the line by comma optionally surrounded by spaces. The default for the string to split  is <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\"><code>$_</code></a>.</p>\n<p>Note that we don't have to &quot;add a key&quot; or make its arrayref-value ahead of using them, as that's done via <em>autovivification</em>. See for example <a href=\"https://stackoverflow.com/q/8599456/4653379\">this page</a> and <a href=\"https://stackoverflow.com/q/45871957/4653379\">this page</a> and <a href=\"https://stackoverflow.com/a/41401306/4653379\">this page</a>.\nIt is a complex feature that can bite if misused so please read up on it.</p>\n<hr />\n<p><sup>\u2020</sup> If we attempt to use array or hash variables for array elements we are really trying to fit a list of values into a single &quot;slot&quot; of an array.  That can't be done of course, and what happens is that they'll get &quot;flattened&quot; \u2013 their elements are merged with all other given scalar elements, and that whole aggregate list populates the array</p>\n<pre><code>my @ary = 1..3;\nmy %hash = (a =&gt; 10, b =&gt; 20);\n# Most likely an error:\nmy @all = (5, @ary, %hash, 100);  #--&gt; (5, 1, 2, 3, a, 10, b, 20, 100)\n</code></pre>\n<p>where key-value pairs may come in any order since hashes are inherently unordered.</p>\n<p>Instead, we take references to arrays and hashes and write</p>\n<pre><code>my @all = (5, \\@ary, \\%hash, 100);\n</code></pre>\n<p>Since references are scalars they are legit elements of the array and no flattening happens. So  now contents of <code>@ary</code> and <code>%hash</code> keep their individuality and can be recovered as needed.</p>\n"}], "owner": {"reputation": 21, "user_id": 9791230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4752daaafe9a1b16b10c88453b3f87fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge", "link": "https://stackoverflow.com/users/9791230/jorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1598504612, "creation_date": 1526343171, "last_edit_date": 1529884144, "question_id": 50340658, "link": "https://stackoverflow.com/questions/50340658/parse-text-file-into-nested-data-structure", "title": "Parse text file into nested data structure", "body": "<p>This is my text file:</p>\n\n<pre><code>animal, cola, husband, 36 \nanimal, wilma, wife, 31\nanimal, pebbles, kid, 4\nbrutal, george, husband, 41\nbrutal, jane, wife, 39\nbrutal, elroy, kid, 9\ncosa, homer, husband, 34\ncosa, marge, wife, 37\ncosa, bart, kid, 11\n</code></pre>\n\n<p>And this is the data structure I want:</p>\n\n<pre><code>%HASH = (\n    animal  =&gt; [\n        { name =&gt; \"cola\",    role =&gt; \"husband\", age  =&gt; 36, },\n        { name =&gt; \"wilma\",   role =&gt; \"wife\",    age  =&gt; 31, },\n        { name =&gt; \"pebbles\", role =&gt; \"kid\",     age  =&gt;  4, },\n    ],\n    brutal  =&gt; [\n        { name =&gt; \"george\",  role =&gt; \"husband\", age  =&gt; 41, },\n        { name =&gt; \"jane\",    role =&gt; \"wife\",    age  =&gt; 39, },\n        { name =&gt; \"elroy\",   role =&gt; \"kid\",     age  =&gt;  9, },\n    ],\n    cosa  =&gt; [\n        { name =&gt; \"homer\", role =&gt; \"husband\", age =&gt; 34, },\n        { name =&gt; \"marge\", role =&gt; \"wife\",    age =&gt; 37, },\n        { name =&gt; \"bart\",  role =&gt; \"kid\",     age =&gt; 11, },\n    ],\n);\n</code></pre>\n\n<p>I have some pieces of code, but I can't assemble them into a coherent script. I want only for someone to help me to define this structure and to understand it. </p>\n"}, {"tags": ["perl", "sftp"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526318809, "post_id": 50335783, "comment_id": 87687909, "body": "Please try to spell the names of modules correctly. Do you mean <code>Net::SFTP::Foreign</code>? <code>Perl SFTP Foreign</code> doesn&#39;t make sense."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526318949, "post_id": 50335783, "comment_id": 87687980, "body": "<i>&quot;I&#39;m sorry for the formatting&quot;</i> Don&#39;t be sorry, just fix it. If you don&#39;t do it then I will have to, and that&#39;s not very fair when you&#39;re already getting free professional help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526319102, "post_id": 50335783, "comment_id": 87688066, "body": "<code>Perl:SFTP:Foreign</code> doesn&#39;t make sense either."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9188572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e59e478e81f83121b0ec9172ba930b?s=128&d=identicon&r=PG&f=1", "display_name": "Allin Brown", "link": "https://stackoverflow.com/users/9188572/allin-brown"}, "edited": false, "score": 0, "creation_date": 1526320457, "post_id": 50336017, "comment_id": 87688705, "body": "In a past version of code, a previous developer used Net::FTP to perform the same function, but I understand the modules are different. They used the LS command in FTP to return an array and then assigned that array to a single variable which acted as a counting mechanism and incrementally increased the .bak* files appropriately. I am attempting to perform the same functionality."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1526327156, "last_edit_date": 1526327156, "creation_date": 1526319371, "answer_id": 50336017, "question_id": 50335783, "link": "https://stackoverflow.com/questions/50335783/using-perlsftpforeign-count-files-via-ls/50336017#50336017", "title": "Using Perl::SFTP::Foreign count files via ls()", "body": "<p>If you're really using <code>Net::SFTP::Foreign</code> then this line is wrong.</p>\n\n<pre><code>@rls = $sftp-&gt;ls('.',wanted=&gt; qr/$file.*/ );    \n</code></pre>\n\n<p>The documentation says that the <code>ls</code> method returns a <em>reference to an array of hashes</em></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526374974, "post_id": 50338145, "comment_id": 87708093, "body": "That is because <code>find</code> returns a list of hashes instead of the array reference from <code>ls</code> that I described. This is the <i>wrong solution</i> because <code>find</code> is <i>recursive</i> and will include all matching files in the given directory or <i>anywhere in the directories beneath it</i>, so you may well find many more files than you expect. Stick to <code>ls</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 9188572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e59e478e81f83121b0ec9172ba930b?s=128&d=identicon&r=PG&f=1", "display_name": "Allin Brown", "link": "https://stackoverflow.com/users/9188572/allin-brown"}, "is_accepted": false, "score": -1, "last_activity_date": 1526328112, "creation_date": 1526328112, "answer_id": 50338145, "question_id": 50335783, "link": "https://stackoverflow.com/questions/50335783/using-perlsftpforeign-count-files-via-ls/50338145#50338145", "title": "Using Perl::SFTP::Foreign count files via ls()", "body": "<p>By changing the command from ls() to using find() it has corrected the issue. Specifically the following code was replaced </p>\n\n<p>From</p>\n\n<p><code>@rls = $sftp-&gt;ls('.', wanted =&gt; qr/$file.*/ );</code></p>\n\n<p>To</p>\n\n<p><code>@rls = $sftp-&gt;find('.',wanted=&gt; qr/^$file.*/ );</code>   </p>\n\n<p>This has successfully generated an array of the size expected. This appears to be a difference between ls (single array of hashes) vs. find (list of hashes).</p>\n"}], "owner": {"reputation": 11, "user_id": 9188572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e59e478e81f83121b0ec9172ba930b?s=128&d=identicon&r=PG&f=1", "display_name": "Allin Brown", "link": "https://stackoverflow.com/users/9188572/allin-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1526328209, "creation_date": 1526318392, "last_edit_date": 1526328209, "question_id": 50335783, "link": "https://stackoverflow.com/questions/50335783/using-perlsftpforeign-count-files-via-ls", "title": "Using Perl::SFTP::Foreign count files via ls()", "body": "<p>Using Perl::SFTP::Foreign I'm trying to count the number of files with a specific file handle.</p>\n\n<p>Usage of the result is to incrementally number files during a rename command later in the code such that the first zip file gets renamed filename.zip.bak, then filename.zip.bak2 then filename.zip.bak3 </p>\n\n<pre><code>my $file = \"filename.zip\"\n$reName  = \".bak\";\n\n@rls = $sftp-&gt;ls('.', wanted =&gt; qr/$file.*/ );    \n$rls_size = @rls;\n$fileReName = $file . $reName;\n\n\nif ( $rls_size &gt; 1 ) {\n    $fileReName = $fileReName . $rls_size ;\n}\n\nunless ( $sftp-&gt;rename($file, $fileReName) ) {\n    Print \"Error Renaming $file to $fileReName. $@ $!\\n\");\n}\n</code></pre>\n\n<p>I'm sorry for the formatting. Code keeps returning one entry in the array so as to not assign a number beyond 1 even if there are 2 or more that would normally be picked in the count. Is there something wrong with the wanted statement and the formatting of the given regex expectation?</p>\n\n<p>Here is the old Net::FTP code that was used to perform the same function:</p>\n\n<pre><code>sub process_file($)\n{   my $file = $_[0];\n\n    if($reName)\n    {   \n        @rls = $ftp-&gt;ls($file.\"*\");\n        $rls_size = @rls;\n        $fileReName = $file . $reName;\n        if($rls_size &gt; 1){  $fileReName = $fileReName . $rls_size;  }\n\n        unless ($ftp-&gt;rename($file,$fileReName))\n        {   PrintLog (0, \"Error Renaming $file to $fileReName. $@ $!\\n\");   \n            $error =101;\n            exit 101;\n        }else{  PrintLog (7, \"Renamed File $file to $fileReName.\\n\");   }\n    }\n    else{\n        unless ($ftp-&gt;delete($file))\n        {   PrintLog (0, \"Error deleting $file. $@ $!\\n\");  \n            $error =101;    \n            exit 101;\n        }else{  PrintLog (7, \"Deleted $file.\\n\");   }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["perl", "variables", "whitespace", "montage"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 0, "creation_date": 1526320631, "post_id": 50335763, "comment_id": 87688795, "body": "Thanks a lot!! I will try this asap tomorrow at work, i also have an @ in my picture name, I have to escape it with a backlashes too?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 1, "creation_date": 1526320928, "post_id": 50335763, "comment_id": 87688921, "body": "@Loubna: Yes, you do. Otherwise Perl will look for an array to insert into the string."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1526318311, "creation_date": 1526318311, "answer_id": 50335763, "question_id": 50335653, "link": "https://stackoverflow.com/questions/50335653/use-a-variable-with-whitespace-perl/50335763#50335763", "title": "use a variable with whitespace Perl", "body": "<p>You need to put quotes around the file names that have spaces. You also need to escape the backslashes</p>\n\n<pre><code>my $cmd = qq{C:\\\\...\\\\montage.exe \"$pic1\" \"$pic2\" output.png};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 1, "creation_date": 1526323394, "post_id": 50336346, "comment_id": 87690154, "body": "Yes you&#39;re true it&#39;s safer, especially that my pictures names are long, thanks !"}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 8, "last_activity_date": 1526325394, "last_edit_date": 1526325394, "creation_date": 1526320603, "answer_id": 50336346, "question_id": 50335653, "link": "https://stackoverflow.com/questions/50335653/use-a-variable-with-whitespace-perl/50336346#50336346", "title": "use a variable with whitespace Perl", "body": "<p>You can properly quote the filenames within the string you pass to system, as @Borodin shows in his answer. Something like: <code>system(\"montage.exe '$pic1' '$pic2'\")</code></p>\n\n<p>However, A more reliable and safer solution is to pass the arguments to montage.exe as extra parameters in the system call:</p>\n\n<pre><code>system('montage.exe', $pic2, $pic2, 'output.png')\n</code></pre>\n\n<p>Now you don't have to worry about nesting the correct quotes, or worry about files with unexpected characters. Not only is this simpler code, but it avoids malicious injection issues, should those file names ever come from a tainted source. Someone could enter <code>| rm *</code>, but your system call will not remove all your files for you. </p>\n\n<p>Further, in real life, you probably are not going to have a separate scalar variable for each file name. You'll have them in an array. This makes your system call even easier:</p>\n\n<pre><code>system('montage.exe', @filenames, 'output.png')\n</code></pre>\n\n<p>Not only is that super easy, but it avoids the pitfall of having a command line too long. If your filenames have nice long paths (maybe 50-100 characters), a Windows command line will exceed the max command length after around 100 files. Passing the arguments through system() instead of in one big string avoids that limitation. </p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "edited": false, "score": 0, "creation_date": 1526323282, "post_id": 50336347, "comment_id": 87690080, "body": "Thanks you, I didn&#39;t know I could do it this way!"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1526385682, "post_id": 50336347, "comment_id": 87715007, "body": "As a list, <code>system()</code> bypass any shell expansion. That is, wildcards don&#39;t work if <code>system()</code> is given a list."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1526385908, "post_id": 50336347, "comment_id": 87715157, "body": "@shawnhcorey Yep, but you could always do something like <code>system(&quot;C:\\...\\montage.exe&quot;, &lt;*.jpg&gt;, &quot;output.png&quot;)</code>."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1526386476, "post_id": 50336347, "comment_id": 87715570, "body": "No, since the default <code>glob()</code> delimits with white space. <code>use File::Glob qw{ :bsd_glob );</code>  to replace the default with one that allows white space in file names."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1526387048, "post_id": 50336347, "comment_id": 87715957, "body": "It could be a problem if the glob itself contains whitespace (to match filenames containing whitespace) but you can use extra quotes or the bsd_glob trick you mentioned to work around that. However, the example glob I gave does not contain whitespace\u2014it just returns a list of filenames that may contain whitespace\u2014so that&#39;s not an issue."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 6, "last_activity_date": 1526320604, "creation_date": 1526320604, "answer_id": 50336347, "question_id": 50335653, "link": "https://stackoverflow.com/questions/50335653/use-a-variable-with-whitespace-perl/50336347#50336347", "title": "use a variable with whitespace Perl", "body": "<p>Alternatively, you can pass the arguments to montage.exe as a list (instead of concatenating them all into a string):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $pic1 = qq(picture one.png);\nmy $pic2 = qq(picture two.png);\n\nmy @cmd = (\"C:\\...\\montage.exe\", $pic1, $pic2, \"output.png\");\n\nsystem(@cmd);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1526334364, "last_edit_date": 1526334364, "creation_date": 1526333641, "answer_id": 50339349, "question_id": 50335653, "link": "https://stackoverflow.com/questions/50335653/use-a-variable-with-whitespace-perl/50339349#50339349", "title": "use a variable with whitespace Perl", "body": "<p>In unix systems, the best approach is the multi-argument form of <code>system</code> because 1) it avoids invoking a shell, and 2) that's the format accepted by the OS call. Neither of those are true in Windows. The OS call to spawn a program expects a command line, and <code>system</code>'s attempt to form this command line is sometimes incorrect. The safest approach is to use <a href=\"http://search.cpan.org/perldoc?Win32::ShellQuote\" rel=\"nofollow noreferrer\">Win32::ShellQuote</a>.</p>\n\n<pre><code>use Win32::ShellQuote qw( quote_system );\n\nsystem quote_system(\"C:\\\\...\\\\montage.exe\", $pic1, $pic2, \"output.png\");\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9789745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434a1a8c39bf0352ce5ef15310b42f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Katy", "link": "https://stackoverflow.com/users/9789745/katy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1526334364, "creation_date": 1526317872, "question_id": 50335653, "link": "https://stackoverflow.com/questions/50335653/use-a-variable-with-whitespace-perl", "title": "use a variable with whitespace Perl", "body": "<p>I am currently working on a project but I have one big problem. I have some picture with a whitespace in the name and I want to do a montage. The problem is that I can't rename my picture and my code is like that : </p>\n\n<pre><code>$pic1 = qq(picture one.png);\n$pic2 = qq(picture two.png);\n\nmy $cmd = \"C:\\...\\montage.exe $pic1 $pic2 output.png\";\n\nsystem($cmd);\n</code></pre>\n\n<p>but because of the whitespace montage.exe doesn't work. How can I execute my code without renaming all my pictures? </p>\n\n<p>Thanks a lot for your answer!</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1526300240, "post_id": 50329497, "comment_id": 87676062, "body": "Definitly not a Python question - you&#39;d have the same issue with a C program, a shell script or another perl script."}, {"owner": {"reputation": 1590, "user_id": 7885426, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6980b93acb857452d17d9584a7bd97b7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeNoob", "link": "https://stackoverflow.com/users/7885426/codenoob"}, "reply_to_user": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1526300905, "post_id": 50329497, "comment_id": 87676519, "body": "Well yes looking back, however I wasn&#39;t sure whether I actually should have printed the string or should have done otherwise @brunodesthuilliers"}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1526304923, "post_id": 50329497, "comment_id": 87679293, "body": "If this is the excepted output from your program then yes printing it the right thing to do."}], "answers": [{"comments": [{"owner": {"reputation": 1590, "user_id": 7885426, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6980b93acb857452d17d9584a7bd97b7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeNoob", "link": "https://stackoverflow.com/users/7885426/codenoob"}, "edited": false, "score": 0, "creation_date": 1526300202, "post_id": 50329826, "comment_id": 87676038, "body": "Thankyou so much!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1526300739, "post_id": 50329826, "comment_id": 87676417, "body": "That only gives you the first line of input though, doesn&#39;t it?"}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 3, "last_activity_date": 1526299356, "creation_date": 1526299356, "answer_id": 50329826, "question_id": 50329497, "link": "https://stackoverflow.com/questions/50329497/pipe-python-string-to-perl-script/50329826#50329826", "title": "Pipe python string to perl script", "body": "<p>You need to check wether the argument is given via command line arguments or comes via STDIN.</p>\n\n<pre><code>my $file;\nif (@ARGV) {\n    $file = $ARGV[0];\n}\nelse {\n    chomp($file = &lt;STDIN&gt;); # chomp removes linebreak\n}\n</code></pre>\n"}], "owner": {"reputation": 1590, "user_id": 7885426, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6980b93acb857452d17d9584a7bd97b7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeNoob", "link": "https://stackoverflow.com/users/7885426/codenoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 50329826, "answer_count": 1, "score": 1, "last_activity_date": 1526300193, "creation_date": 1526298290, "last_edit_date": 1526300193, "question_id": 50329497, "link": "https://stackoverflow.com/questions/50329497/pipe-python-string-to-perl-script", "title": "Pipe python string to perl script", "body": "<p>I want to pipe a file path from Python to a Perl script. Although I'm familiar with Python and Bash I don't known anything about Perl.<br>\nI have the following (example) files:<br></p>\n\n<p><em>return.py</em><br></p>\n\n<pre><code>print( 'data/test.txt' )\n</code></pre>\n\n<p><em>uniprot.pl</em></p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $list = $ARGV[0]; # File containg list of UniProt identifiers.\nmy $base = 'http://www.uniprot.org';\nmy $tool = 'uploadlists';\n\nmy $contact = ''; # Please set your email address here to help us debug in case of problems.\nmy $agent = LWP::UserAgent-&gt;new(agent =&gt; \"libwww-perl $contact\");\npush @{$agent-&gt;requests_redirectable}, 'POST';\n\nmy $response = $agent-&gt;post(\"$base/$tool/\",\n                            [ 'file' =&gt; [$list],\n                              'format' =&gt; 'fasta',\n                              'from' =&gt; 'ACC+ID',\n                              'to' =&gt; 'ACC',\n                            ],\n                            'Content_Type' =&gt; 'form-data');\n\nwhile (my $wait = $response-&gt;header('Retry-After')) {\n  print STDERR \"Waiting ($wait)...\\n\";\n  sleep $wait;\n  $response = $agent-&gt;get($response-&gt;base);\n}\n\n$response-&gt;is_success ?\n  print $response-&gt;content :\n  die 'Failed, got ' . $response-&gt;status_line .\n    ' for ' . $response-&gt;request-&gt;uri . \"\\n\";\n</code></pre>\n\n<p>When I call the perl file from the shell like: <code>perl uniprot.pl data/test.txt</code> it works fine. </p>\n\n<p>I tried different approaches to pipe the python print to this call, but apparently the wrong ones:</p>\n\n<p><strong>1.</strong><br></p>\n\n<pre><code>python3 return.py | perl uniprot.pl\n</code></pre>\n\n<p>This will give: <code>Failed, got 500 Internal Server Error for http://www.uniprot.org/uploadlists/</code>. However as I know the code works (as said above) this has to be caused by wrong piping.</p>\n\n<p><strong>2</strong> <br></p>\n\n<pre><code>python3 return.py | perl uniprot.pl -\n</code></pre>\n\n<p>This will give: <code>Can't open file -: No such file or directory at /usr/share/perl5/LWP/UserAgent.pm line 476.</code> So it seems that the string is passed to the perl file, however perl is looking in a complete different directory. </p>\n\n<p><strong>3</strong> <br>\nI changed this line: <code>my $list = $ARGV[0];</code> --to--> <code>my $list = &lt;STDIN&gt;;</code> and then again calling both the above commands (thus 1 and 2). Both give: <code>Can't open file data/test.txt\n: No such file or directory at /usr/share/perl5/LWP/UserAgent.pm line 476.</code> </p>\n\n<hr>\n\n<p><strong>Question</strong>\nHow can I pass the string from <code>return.py</code> to <code>uniprot.pl</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526295854, "post_id": 50328466, "comment_id": 87673301, "body": "Please show the contents of <code>panden.txt</code>. There is likely to be a much better, more Perlish way to do this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1526351230, "post_id": 50328466, "comment_id": 87699043, "body": "You get that error when using a negative subscript whose magnitude (absolute value) is greater-than or equal to the size of the array."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1526295176, "creation_date": 1526295176, "answer_id": 50328560, "question_id": 50328466, "link": "https://stackoverflow.com/questions/50328466/modification-of-non-creatable-array-value/50328560#50328560", "title": "Modification of non-creatable array value", "body": "<p>At a guess - your regex isn't matching, therefore <code>$r</code> is still <code>-1</code> and you've an empty array. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @list;\n\n$list[-1] = 1;\n</code></pre>\n\n<p>Gives you the same error. That implies that:</p>\n\n<pre><code>$_ =~ /^\"[0-9]{2,10}\"\\|\"/\n</code></pre>\n\n<p>Doesn't match for the first line of your input. </p>\n\n<p>The point of negative indices in an array is a special case - it means 'count from the end' - so <code>$array[-1]</code> is the last element. But that doesn't really make sense when you have an empty array. </p>\n\n<p>It <em>would</em> work if you've got an array that's already been populated, but I'd suggest based on your program logic - it <em>shouldn't</em>, and so setting it to <code>-1</code> with the assumption that you'll be incrementing it later is actually asking for trouble in the first place. </p>\n"}], "owner": {"reputation": 182, "user_id": 1292494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/47faae48b2acea9108a3e60638d86b2d?s=128&d=identicon&r=PG", "display_name": "Agilix", "link": "https://stackoverflow.com/users/1292494/agilix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526295693, "creation_date": 1526294857, "last_edit_date": 1526295693, "question_id": 50328466, "link": "https://stackoverflow.com/questions/50328466/modification-of-non-creatable-array-value", "title": "Modification of non-creatable array value", "body": "<p>Running this Perl code gives me the error: </p>\n\n<blockquote>\n  <p>Modification of non-creatable array value attempted, subscript -1 at\n  update.pl line 85,  line 1.</p>\n</blockquote>\n\n<p>Line 85 is the one that has <code>$line[$r] .= $_</code>. Could anyone point me in the right direction?</p>\n\n<pre><code>my $loc =  '../update/panden.txt';\nmy $r   = -1;\nmy @line;\n\nopen (R, $loc) || die \"$!\";\n\nwhile ( &lt;R&gt; ) {\n   $_ =~ s/NULL//g;\n   $r++ if ( $_ =~ /^\"[0-9]{2,10}\"\\|\"/ );\n   $line[$r] .= $_;    # Line 85\n   my $ref = $_;\n}\n\nclose R;\n</code></pre>\n"}, {"tags": ["perl", "infinite-loop", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526311429, "post_id": 50327285, "comment_id": 87683947, "body": "Do you need the <code>$photobox</code> model to be only there once, or can it be instantiated in every request? Try moving it into a plugin. See plugins like the ones for DBIx::Class or Redis for examples."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526311813, "post_id": 50327285, "comment_id": 87684158, "body": "If you show us some more of your Photobox magic, maybe manage to reproduce the problem in your example scope, I&#39;ll try to help debug it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526311863, "post_id": 50327285, "comment_id": 87684186, "body": "And you probably want to look at the log in <i>trace</i> mode to see what&#39;s going on."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1526314104, "post_id": 50327285, "comment_id": 87685577, "body": "You are passing the redirect url to the template. You are not redirecting in this code. If you want to actually do a redirect why not call <code>redirect</code> ?"}, {"owner": {"reputation": 21, "user_id": 9787247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83af2f04a0a1aa22014893b28271937?s=128&d=identicon&r=PG&f=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/9787247/arne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526364214, "post_id": 50327285, "comment_id": 87702397, "body": "Thank you all for your answers. @simbabque I&#39;ve added details about the takePicture Method I&#39;m calling."}, {"owner": {"reputation": 21, "user_id": 9787247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83af2f04a0a1aa22014893b28271937?s=128&d=identicon&r=PG&f=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/9787247/arne"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1526364229, "post_id": 50327285, "comment_id": 87702402, "body": "@bytepusher I&#39;m passing the URL because I do not want to redirect immediately, but after some seconds. /photo is to show the photo. So it supposes so first take the picture and then show it. The template will then redirect to the next page. Showphoto in my example is a bit irritating. I&#39;ve changed it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526373515, "post_id": 50327285, "comment_id": 87707267, "body": "Ok, I doubt it has anything to do with the Photobox module. I would still make the declaration either into the route handler and have it lexical there so you get a new one every time, or if that doesn&#39;t have state, turn it into a plugin. We need to see some log output, the headers of the response you get in the browser, and the template where you do the redirect please."}, {"owner": {"reputation": 21, "user_id": 9787247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83af2f04a0a1aa22014893b28271937?s=128&d=identicon&r=PG&f=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/9787247/arne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526389398, "post_id": 50327285, "comment_id": 87717696, "body": "Thanks @simbabque. I&#39;ll see what I can get out of the log. Might take some days until I&#39;ll find time to work on my booth again."}, {"owner": {"reputation": 21, "user_id": 9787247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83af2f04a0a1aa22014893b28271937?s=128&d=identicon&r=PG&f=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/9787247/arne"}, "edited": false, "score": 1, "creation_date": 1526549805, "post_id": 50327285, "comment_id": 87791778, "body": "Hi all. I edited by question and added a workaround. I think the issues is caused, because <code>takePicture()</code>takes some time to run and Dancer / the browser does not wait. See my edit for details. Thanks, Arne"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526570400, "post_id": 50327285, "comment_id": 87805850, "body": "You need to ping people directly for them to get a notification. You can only @ mention one user per comment. I came and checked back here by myself."}], "owner": {"reputation": 21, "user_id": 9787247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83af2f04a0a1aa22014893b28271937?s=128&d=identicon&r=PG&f=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/9787247/arne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1589821138, "creation_date": 1526290777, "last_edit_date": 1589821138, "question_id": 50327285, "link": "https://stackoverflow.com/questions/50327285/perl-dancer2-infinite-loop-on-get-when-calling-a-method", "title": "Perl Dancer2 infinite-loop on get when calling a method", "body": "<p>I made a photobooth with Dancer some years ago and it worked fine.\nNow I try to move this to Dancer2. However, It's not working anymore, because I have some infinite-loop.</p>\n\n<p>Let's say my app looks like this:</p>\n\n<pre><code>package App;\nuse Dancer2;\n\n# Photobox is my pm file with all the magic\nuse Photobox;\n\nmy $photobox = photobox-&gt;new();\n\nget '/photo' =&gt; sub {\n    my $photo;\n\n    # Trigger cam and download photo. It returns me the filename of the photo.\n    $photo = $photobox-&gt;takePicture();\n\n    # Template photo is to show the photo\n    template 'photo',\n    {\n        'photo_filename' =&gt; $photo,\n        'redirect_uri' =&gt; \"someURI\"\n    };        \n}\n</code></pre>\n\n<p><code>takePicture()</code> looks like this:</p>\n\n<pre><code>sub takePicture {\n\n    my $Objekt = shift;\n    my $return;\n    my $capture;\n\n    $return = `gphoto2 --auto-detect`;\n\n    if ($return =~ m/usb:/) {\n            $capture = `gphoto2 --capture-image-and-download --filename=$photoPath$filename`;\n\n        if (!-e $photoPath.$filename) {\n            return \"no-photo-error.png\";\n        }\n        else {\n            return $filename;\n        }   \n    } else {\n      die \"Camera not found: $return\";\n    }\n}\n</code></pre>\n\n<p>When I now call <code>/photo</code>, it'll result in an infinite loop. The browser is <em>\"frefreshing\"</em> all the time and my cam is shooting one photo after the other. But it never redirects to <code>/showphoto</code>.</p>\n\n<p>It was working with Dancer(1) when I run the application just by <code>perl app.pl</code> from the bin directory. How I use Dancer2 und run it by using <code>plackup app.psgi</code></p>\n\n<p>I tried to put it into a before hook, but it changed nothing. </p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>I figured out a way to work around this issue. </p>\n\n<p>First I refactored my code a bit. Basic idea was to split the take photo and show photo operations into two different routes. This makes it easier to see what happens.</p>\n\n<pre><code>get '/takesinglephoto' =&gt; sub {\n\n    my $photo;\n\n\n    $photo = takePicture();\n    $single_photo=$photo;\n\n    redirect '/showsinglephoto';\n\n;\n\nget '/showsinglephoto' =&gt; sub {\n\n    set 'layout' =&gt; 'fotobox-main';\n    template 'fotobox_fotostrip',\n        {\n            'foto_filename' =&gt; $single_photo,\n            'redirect_uri' =&gt; \"fotostrip\",\n            'timer' =&gt; $timer,\n            'number' =&gt; 'blank'\n        };\n\n};\n</code></pre>\n\n<p>And I moved the <code>takePicture</code> method just into my Dancer main <code>App.pm</code>.</p>\n\n<p>Now I recognized from the log output, that the browser does not load the '/takesinglephoto' page once, but refreshes it every some secons. I think the reason is, that <code>takePicture()</code> takes some seconds to run and to return the output. And Dancer does not wait until it ends. With every reload, it triggers the <code>takePicture()</code> again and that causes the infinite-loop.</p>\n\n<p>I worked around this by implementing a simple check to run <code>takePicture()</code> just once.</p>\n\n<pre><code># define avariable set to 1 / true\nmy $do_stuff_once = 1;\n\nget '/takesinglephoto' =&gt; sub {\n\n    my $photo;\n\n    # check if variable is true\n    if ($do_stuff_once == 1) {\n      $photo = takePicture();\n      $single_photo=$photo;\n      # set variable to false\n      $do_stuff_once = 0;\n    }\n\n    redirect '/showsinglephoto';\n\n};\n\nget '/showsinglephoto' =&gt; sub {\n\n    # set variable back to true\n    $do_stuff_once = 1;\n    set 'layout' =&gt; 'fotobox-main';\n    template 'fotobox_fotostrip',\n        {\n            'foto_filename' =&gt; $single_photo,\n            'redirect_uri' =&gt; \"fotostrip\",\n            'timer' =&gt; $timer,\n            'number' =&gt; 'blank'\n        };\n\n};\n</code></pre>\n\n<p>Now it still refreshes <code>/takesinglephoto</code>, but it does not trigger <code>takePicture()</code> again and again and finally, when the method returns the photo filename, it redirects to <code>/showsinglephoto</code>.</p>\n\n<p>I would call this a workaround. Is there a better way to solve this?</p>\n\n<p>BR\nArne</p>\n"}, {"tags": ["perl", "fasta"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526282033, "post_id": 50324713, "comment_id": 87665307, "body": "Read your own comments: <code>#paragraph mode; Read until blank line</code>. Your input has no blank lines, so <code>&lt;$input&gt;</code> reads the entire file."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9786615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2184e193297b40e2c7c3f5f1b137b0ea?s=128&d=identicon&r=PG&f=1", "display_name": "user9786615", "link": "https://stackoverflow.com/users/9786615/user9786615"}, "edited": false, "score": 0, "creation_date": 1526289440, "post_id": 50325029, "comment_id": 87669345, "body": "Could you please tell me how can I direct the output to a file?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1526283536, "last_edit_date": 1526283536, "creation_date": 1526282842, "answer_id": 50325029, "question_id": 50324713, "link": "https://stackoverflow.com/questions/50324713/extract-fasta-sequences-from-a-file-based-on-sequence-ids/50325029#50325029", "title": "Extract FASTA sequences from a file based on sequence IDs", "body": "<p>The code you're using is for a FASTA file that has blank lines between the sequences. Yours does not so it fails</p>\n\n<p>This should work correctly, although I'm not in a position to test it</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %ids = do {\n    open my $fh, '&lt;', 'ids.txt'\n            or die qq{Unable to open \"ids.txt\" for input: $!};\n    local $/;\n    map { $_ =&gt; undef } split ' ', &lt;$fh&gt;;\n};\n\nopen my $fh, '&lt;', 'seq.fasta'\n        or die qq{Unable to open \"seq.fasta\" for input: $!};\n\nmy $print;\nwhile ( &lt;$fh&gt; ) {\n    $print = exists $ids{$1} if /^&gt;(\\S+)/;\n    print if $print;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9786615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2184e193297b40e2c7c3f5f1b137b0ea?s=128&d=identicon&r=PG&f=1", "display_name": "user9786615", "link": "https://stackoverflow.com/users/9786615/user9786615"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 50325029, "answer_count": 1, "score": 0, "last_activity_date": 1526304376, "creation_date": 1526281413, "last_edit_date": 1526304376, "question_id": 50324713, "link": "https://stackoverflow.com/questions/50324713/extract-fasta-sequences-from-a-file-based-on-sequence-ids", "title": "Extract FASTA sequences from a file based on sequence IDs", "body": "\n\n<p>I have two files. <code>seq.fasta</code> consists of FASTA sequences and <code>ids.txt</code> contains IDs for sequences to extract from <code>seq.fasta</code></p>\n\n<p>For example</p>\n\n<h3>seq.fasta</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;AUP4056.1\nMFKSLIQFFKSKSNTSNIKKENAVQRQERQDIEGWITPYSGQELLNTELRQHHLGLLWQQVSMTREMFEH\nLYQKPIERYAEMVQLLPASESHHHSHLGGMLDHGLEVISFAAKLRQNYVLPLNAAPEDQAKQKDAWTAAV\nIYLALVHDIGKSIVDIEIQLQDGKRWLAWHGIPTLPYKFRYIKQRDYELHPVLGGFIANQLIAKETFDWL\nATYPEVFSALMYAMAGHYDKANVLAEIVQKADQNSVALALGGDITKLVQKPVISFAKQLI`\n&gt;XIM5213\nFKISSKGPGDGWLTEDGLWLMSKTTADQIRAYLMGQGISVPSDNRKLFDEMQAHRVIESTSEGNAIWYCQ\nLSADAGWKPKDKFSLLRIKPEVIWDNIDDRPELFAGTICVVEKENEAEEKISNTVNEVQDTVPINKKENI\nELTSNLQEENTALQSLNPSQNPEVVVENCDNNSVDFLLNMFSDNNEQQVMNIPSADAEAGTTMILKSEPE\nNLNTHIEVEANAIPKLPTNDDTHLKSEGQKFVDWLKD\n&gt;bcna2598.1\nGPGDGWLTEDGLWLMSKTTADQIRAYLMGQGISVPSDNRKLFDEMQAHRVIESTSEGNAIWYCQ\nLSADAGWKPKDKFSLLRIKPEVIWDNIDDRPELFAGTICVVEKENEAEEKISNTVNEVQDTVPINKKENI\nELTSNLQEENTALQSLNPSQNPEVVVENCLPTNDDTHLKSEGQK\n</code></pre>\n\n<h3>ids.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>AUP4056.1 bcna2598.1 YUP42568 CAD42579.3 \nJIK6023.5 ZNB708645\n</code></pre>\n\n<p>I tried the following program provided as an answer to\n<a href=\"https://stackoverflow.com/questions/49487007/how-to-extract-fasta-sequences-from-a-file-using-sequence-ids-in-adifferent-file\"><em>How to extract FASTA sequences from a file using sequence IDs in a different file?</em></a>\nbut it just copies the <code>seq.fasta</code> file to the output.</p>\n\n<h3>Perl code</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen ( my $id_file, '&lt;', 'ids.txt' ) or die $!;\n#use split here, to split any lines on whitespace. \nchomp ( my @ids = map { split } &lt;$id_file&gt; );\nclose ( $id_file );\n\nmy %sequences;\n\nopen ( my $input, '&lt;', 'seq.fasta' ) or die $!;\n\n{\n   local $/ = '';    #paragraph mode; Read until blank line\n\n   while ( &lt;$input&gt; ) {\n      my ( $id, $sequence ) = m/&gt;\\s*(\\S+)\\n(.*)/ms;\n      $sequences{$id} = $sequence;\n   }\n}\n\nforeach my $id ( @ids ) {\n\n   if ( $sequences{$id} ) {\n      print \"&gt;$id\\n\";\n      print \"$sequences{$id}\\n\";\n   }\n}\n\nclose ($input);\nexit;\n</code></pre>\n\n<p>Could anybody please tell me where I have gone wrong?</p>\n\n<h3>UPDATE:</h3>\n\n<p>I want to store the output in a separate file.</p>\n"}, {"tags": ["perl", "perl-hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526267277, "post_id": 50322589, "comment_id": 87660924, "body": "Please dump a <i>reference to</i> the hash: <code>print Dumper \\%hash</code>. The result is much more readable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526267523, "post_id": 50322589, "comment_id": 87660948, "body": "Do you want literally <code>score1+score2</code> or are  those fields in fact numeric and you want them totalled?"}, {"owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526267753, "post_id": 50322589, "comment_id": 87661000, "body": "Thanks, Those are numeric and I want them totalled. I have edited the output of Dumper using \\%hash. @Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526268193, "post_id": 50322589, "comment_id": 87661078, "body": "Thanks. The dump doesn&#39;t seem to correspond to the input. Why does <code>a1 1902</code> have <code>score1+score2</code>? Likewise, why does <code>a4 1903</code> have  <code>score4+score6</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526268793, "post_id": 50322589, "comment_id": 87661166, "body": "Don&#39;t use <code>DATA</code> as a file handle name; it&#39;s an existing handle. For that matter, don&#39;t use global vars like <code>DATA</code> in favour of lexical vars like <code>my $DATA</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526268833, "post_id": 50322589, "comment_id": 87661170, "body": "@Borodin, For a given protein, they want the score of the first year for the first year, the sum of the scores of the first two years for the second year, the sum of the scores of the first three years for the third year, etc."}, {"owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526269638, "post_id": 50322589, "comment_id": 87661309, "body": "Yeah, what i want is for a given protein then want the score of the first year for the first year, the combined score of the first two years for the second year, etc.@Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526269676, "post_id": 50322589, "comment_id": 87661318, "body": "@swati: This question has nothing to do with autovivication. I&#39;ve removed it from the subject line and the tags."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526270725, "post_id": 50322702, "comment_id": 87661509, "body": "Is it necessary to create two hash here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526272357, "post_id": 50322702, "comment_id": 87661879, "body": "I&#39;m not sure what you mean. 5 hashes are created for your sample data set, 1 + 1 per different protein. Unlike your data structure, however, mine doesn&#39;t include any arrays."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526272506, "post_id": 50322702, "comment_id": 87661914, "body": "@swati: There&#39;s only one hash. There was a bug which I&#39;ve fixed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1526279978, "last_edit_date": 1526279978, "creation_date": 1526268086, "answer_id": 50322702, "question_id": 50322589, "link": "https://stackoverflow.com/questions/50322589/how-to-access-a-nested-hash-of-arrays-in-a-loop/50322702#50322702", "title": "How to access a nested hash of arrays in a loop?", "body": "<p>I think </p>\n\n<pre><code>a4 1903 16   # Sum of a4 1902 and a5 1903\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>a4 1903 15   # Sum of a4 1902 and a4 1903\n</code></pre>\n\n<p>If so,</p>\n\n<pre><code>my %scores_by_protein_and_year;\nwhile (&lt;DATA&gt;) {\n   my ($protein, $year, $score) = split;\n   $scores_by_protein_and_year{$protein}{$year} = $score;\n}\n\nfor my $protein (keys(%scores_by_protein_and_year)) {\n   my $scores_by_year = $scores_by_protein_and_year{$protein};\n   my $score = 0;\n   for my $year (sort { $a &lt;=&gt; $b } keys(%$scores_by_year)) {\n      $score += $scores_by_year-&gt;{$year};\n      say \"$protein $year $score\";\n   }\n}\n</code></pre>\n\n<p>This works even if the data isn't grouped/sorted.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526270598, "post_id": 50322814, "comment_id": 87661486, "body": "You mean sorted by entity in column 1 ??  Yes, it is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "edited": false, "score": 0, "creation_date": 1526272298, "post_id": 50322814, "comment_id": 87661860, "body": "@swati: It needs to be sorted by protein and by year within each protein."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1526269336, "creation_date": 1526269336, "answer_id": 50322814, "question_id": 50322589, "link": "https://stackoverflow.com/questions/50322589/how-to-access-a-nested-hash-of-arrays-in-a-loop/50322814#50322814", "title": "How to access a nested hash of arrays in a loop?", "body": "\n\n<p>If the data is always sorted as you show it then you can process the data as you read it from the file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while ( &lt;DATA&gt; ) {\n    my ($protein, $year, $score) = split;\n\n    $total = 0 unless $protein eq $current;\n    $total += $score;\n\n    print \"$protein $year $total\\n\";\n\n    $current = $protein;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>a1 1901 4\na1 1902 9\na3 1902 6\na4 1902 7\na4 1903 15\na5 1903 9\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7208278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0byC-qG6vn0/AAAAAAAAAAI/AAAAAAAACuc/-ALdLLJ-6q8/photo.jpg?sz=128", "display_name": "swati sinha", "link": "https://stackoverflow.com/users/7208278/swati-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50322814, "answer_count": 2, "score": 0, "last_activity_date": 1526279978, "creation_date": 1526266777, "last_edit_date": 1526269765, "question_id": 50322589, "link": "https://stackoverflow.com/questions/50322589/how-to-access-a-nested-hash-of-arrays-in-a-loop", "title": "How to access a nested hash of arrays in a loop?", "body": "<p>I have data in this format</p>\n\n<pre><code>a1 1901 4\na1 1902 5\na3 1902 6\na4 1902 7\na4 1903 8\na5 1903 9\n</code></pre>\n\n<p>I want to calculate the cumulative score (3rd column) for each entity in the first column. So I tried to make a hash and my code looks like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $file = shift;\nopen (DATA, $file);\n\nmy %hash;\nwhile ( my $line = &lt;DATA&gt; ) {\n  chomp $line;\n  my ($protein, $year, $score) = split /\\s+/, $line;\n  push @{ $hash{$protein}{$year} }, $score;\n}\n\nprint Dumper \\%hash;\n\nclose DATA:\n</code></pre>\n\n<p>The output looks like this</p>\n\n<pre><code>$VAR1 = {\n          'a3' =&gt; {\n                    '1902' =&gt; [\n                                5\n                              ]\n                  },\n          'a1' =&gt; {\n                    '1902' =&gt; [\n                                6\n                              ],\n                    '1901' =&gt; [\n                                4\n                              ]\n                  },\n          'a4' =&gt; {\n                    '1903' =&gt; [\n                                8\n                              ],\n                    '1902' =&gt; [\n                                7\n                              ]\n                  },\n          'a5' =&gt; {\n                    '1903' =&gt; [\n                                9\n                              ]\n                  }\n        };\n</code></pre>\n\n<p>I now want to access each entity in column 1 (a1,a2,a3) and add the score, so the desired output will be something like this:</p>\n\n<pre><code>a1 1901 4\na1 1902 9    # 4+5\na3 1902 6\na4 1902 7\na4 1903 16   # 7+9\na5 1903 9\n</code></pre>\n\n<p>But I am unable to come up with how to access the values of the created hash in a loop in order to add the values?</p>\n"}, {"tags": ["json", "perl", "perl-module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526230950, "post_id": 50318148, "comment_id": 87652904, "body": "So what&#39;s in <code>&#47;Users&#47;etudiant&#47;.cpanm&#47;work&#47;1526230657.17102&#47;build.log</code>? Do you have multiple instances of Perl? What does <code>which -a perl</code> say?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526231302, "post_id": 50318148, "comment_id": 87653017, "body": "Okay. Everything&#39;s fine except for your permissions on <code>&#47;Users&#47;etudiant&#47;perl5&#47;lib&#47;perl5</code> as it says. Just fix that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526232334, "post_id": 50318148, "comment_id": 87653300, "body": "<code>.fa</code> is a strange file type for Perl code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1526236975, "post_id": 50318148, "comment_id": 87654643, "body": "Argh, never force install!!! Then you have a broken module and a huge mess!"}], "owner": {"reputation": 501, "user_id": 9342193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6d59ee6d4f800bc1aa72380d2480d8?s=128&d=identicon&r=PG&f=1", "display_name": "Grendel", "link": "https://stackoverflow.com/users/9342193/grendel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2106, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1526232126, "creation_date": 1526228223, "last_edit_date": 1526232126, "question_id": 50318148, "link": "https://stackoverflow.com/questions/50318148/cant-install-json-pm", "title": "Can&#39;t install JSON.pm", "body": "\n\n<p>I'm trying to use a Perl script to transform my data structure into a JSON-format string. This uses the <code>asm2stats.pl</code> Perl script in the <a href=\"https://github.com/rjchallis/assembly-stats/tree/master/pl\" rel=\"nofollow noreferrer\"><code>pl</code> folder here</a></p>\n\n<p>Here is the command line I used </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl /Users/Buscou.out/ACG-scaffold.fa &gt; output.json\n</code></pre>\n\n<p>But I got this issue: </p>\n\n<blockquote>\n  <p>Can't locate JSON.pm in @INC (you may need to install the JSON module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .) at /Users/etudiant/Downloads/assembly-stats-master/pl/asm2stats.pl line 5.\n      BEGIN failed--compilation aborted at /Users/etudiant/Downloads/assembly-stats-master/pl/asm2stats.pl line 5.</p>\n</blockquote>\n\n<p>BY looking in internet, I made these installations:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>brew install cpanm\n</code></pre>\n\n<p>and</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sudo cpan JSON\n</code></pre>\n\n<p>but I still get the same error..</p>\n\n<p>Here is the issue I get when I run  <code>cpanm --force install JSON</code> :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>!\n! Can't write to /Library/Perl/5.18 and /usr/local/bin: Installing modules to /Users/etudiant/perl5\n! To turn off this warning, you have to do one of the following:\n!   - run me as a root or with --sudo option (to install to /Library/Perl/5.18 and /usr/local/bin)\n!   - Configure local::lib in your existing shell to set PERL_MM_OPT etc.\n!   - Install local::lib by running the following commands\n!\n!         cpanm --local-lib=~/perl5 local::lib &amp;&amp; eval $(perl -I ~/perl5/lib/perl5/ -Mlocal::lib)\n!\n--&gt; Working on install\nFetching http://www.cpan.org/authors/id/D/DA/DAGOLDEN/install-0.01.tar.gz ... OK\nConfiguring install-0.01 ... OK\nBuilding and testing install-0.01 ... FAIL\n! Installing install failed. See /Users/etudiant/.cpanm/work/1526230657.17102/build.log for details. Retry with --force to force install it.\n--&gt; Working on JSON\nFetching http://www.cpan.org/authors/id/I/IS/ISHIGAKI/JSON-2.97001.tar.gz ... OK\nConfiguring JSON-2.97001 ... OK\nBuilding and testing JSON-2.97001 ... FAIL\n! Installing JSON failed. See /Users/etudiant/.cpanm/work/1526230657.17102/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>Content of the <code>1526230657.17102/build.log</code> file: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>more /Users/etudiant/.cpanm/work/1526230657.17102/build.log\ncpanm (App::cpanminus) 1.7044 on perl 5.018002 built for darwin-thread-multi-2level\nWork directory is /Users/etudiant/.cpanm/work/1526230657.17102\nYou have make /usr/bin/make\nYou have LWP 6.05\nYou have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3\nYou have /usr/bin/unzip\n!\n! Can't write to /Library/Perl/5.18 and /usr/local/bin: Installing modules to /Users/etudiant/perl5\n! To turn off this warning, you have to do one of the following:\n!   - run me as a root or with --sudo option (to install to /Library/Perl/5.18 and /usr/local/bin)\n!   - Configure local::lib in your existing shell to set PERL_MM_OPT etc.\n!   - Install local::lib by running the following commands\n!\n!         cpanm --local-lib=~/perl5 local::lib &amp;&amp; eval $(perl -I ~/perl5/lib/perl5/ -Mlocal::lib)\n!\nSearching install () on cpanmetadb ...\n--&gt; Working on install\nFetching http://www.cpan.org/authors/id/D/DA/DAGOLDEN/install-0.01.tar.gz\n-&gt; OK\nUnpacking install-0.01.tar.gz\nEntering install-0.01\nChecking configure dependencies from META.yml\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring install-0.01\nRunning Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for install\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nBuilding and testing install-0.01\ncp lib/install.pm blib/lib/install.pm\nManifying 1 pod document\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/install.t .. ok\nAll tests successful.\nFiles=1, Tests=1,  0 wallclock secs ( 0.03 usr  0.01 sys +  0.02 cusr  0.00 csys =  0.06 CPU)\nResult: PASS\nManifying 1 pod document\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nERROR: Can't create '/Users/etudiant/perl5/lib/perl5'\nDo not have write permissions on '/Users/etudiant/perl5/lib/perl5'\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n at -e line 1.\nmake: *** [pure_site_install] Error 13\n-&gt; FAIL Installing install failed. See /Users/etudiant/.cpanm/work/1526230657.17102/build.log for details. Retry with --force to force install it.\nSearching JSON () on cpanmetadb ...\n--&gt; Working on JSON\nFetching http://www.cpan.org/authors/id/I/IS/ISHIGAKI/JSON-2.97001.tar.gz\n-&gt; OK\nUnpacking JSON-2.97001.tar.gz\nEntering JSON-2.97001\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (7.34)\nConfiguring JSON-2.97001\nRunning Makefile.PL\nWelcome to JSON (v.2.97001)\n=============================\n\n ** BACKWARD INCOMPATIBILITY **\n\nSince version 2.90, stringification (and string comparison) for\nJSON::true and JSON::false has not been overloaded. It shouldn't\nmatter as long as you treat them as boolean values, but a code that\nexpects they are stringified as \"true\" or \"false\" doesn't work as\nyou have expected any more.\n\n    if (JSON::true eq 'true') {  # now fails\n\n    print \"The result is 1 now.\"; # =&gt; The result is 1 now.\n\nAnd now these boolean values don't inherit JSON::Boolean, either.\nWhen you need to test a value is a JSON boolean value or not, use\nJSON::is_bool function, instead of testing the value inherits\na particular boolean class or not.\n\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for JSON\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nChecking if you have Test::More 0 ... Yes (0.98)\nBuilding and testing JSON-2.97001\ncp lib/JSON/backportPP/Compat5005.pm blib/lib/JSON/backportPP/Compat5005.pm\ncp lib/JSON/backportPP/Boolean.pm blib/lib/JSON/backportPP/Boolean.pm\ncp lib/JSON/backportPP/Compat5006.pm blib/lib/JSON/backportPP/Compat5006.pm\ncp lib/JSON/backportPP.pm blib/lib/JSON/backportPP.pm\ncp lib/JSON.pm blib/lib/JSON.pm\nManifying 5 pod documents\nPERL_DL_NONLAZY=1 \"/usr/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\n# JSON::backportPP 2.97001\nt/00_backend_version.t ................ ok\nt/00_load.t ........................... ok\nt/00_load_backport_pp.t ............... ok\nt/00_pod.t ............................ ok\nt/01_utf8.t ........................... ok\nt/02_error.t .......................... ok\nt/03_types.t .......................... ok\nt/06_pc_pretty.t ...................... ok\nt/07_pc_esc.t ......................... ok\nt/08_pc_base.t ........................ ok\nt/09_pc_extra_number.t ................ ok\nt/104_sortby.t ........................ ok\nt/105_esc_slash.t ..................... ok\nt/106_allow_barekey.t ................. ok\nt/107_allow_singlequote.t ............. ok\nt/108_decode.t ........................ ok\nt/109_encode.t ........................ ok\nt/10_pc_keysort.t ..................... ok\nt/110_bignum.t ........................ ok\nt/112_upgrade.t ....................... ok\nt/113_overloaded_eq.t ................. ok\nt/114_decode_prefix.t ................. ok\nt/115_tie_ixhash.t .................... ok\nt/116_incr_parse_fixed.t .............. ok\nt/117_numbers.t ....................... ok\nt/11_pc_expo.t ........................ ok\nt/12_blessed.t ........................ ok\nt/13_limit.t .......................... ok\nt/14_latin1.t ......................... ok\nt/15_prefix.t ......................... ok\nt/16_tied.t ........................... ok\nt/17_relaxed.t ........................ ok\nt/18_json_checker.t ................... ok\nt/19_incr.t ........................... ok\nt/20_unknown.t ........................ ok\nt/21_evans_bugrep.t ................... ok\nt/22_comment_at_eof.t ................. ok\nt/99_binary.t ......................... ok\nt/e00_func.t .......................... ok\nt/e01_property.t ...................... ok\n# 1\nt/e02_bool.t .......................... ok\nt/e03_bool2.t ......................... ok\nt/e11_conv_blessed_univ.t ............. ok\nt/e90_misc.t .......................... ok\nt/gh_28_json_test_suite.t ............. ok\nt/gh_29_trailing_false_value.t ........ ok\nt/rt_116998_wrong_character_offset.t .. ok\nt/rt_90071_incr_parse.t ............... ok\nt/x00_load.t .......................... ok\nt/x02_error.t ......................... ok\nt/x12_blessed.t ....................... ok\nt/x16_tied.t .......................... ok\nt/x17_strange_overload.t .............. ok\nt/xe04_escape_slash.t ................. ok\nt/xe05_indent_length.t ................ ok\nt/xe12_boolean.t ...................... ok\nt/xe19_xs_and_suportbypp.t ............ ok\nt/xe20_croak_message.t ................ ok\nt/xe21_is_pp.t ........................ ok\nt/zero-mojibake.t ..................... ok\nAll tests successful.\nFiles=60, Tests=3720,  5 wallclock secs ( 0.47 usr  0.16 sys +  4.45 cusr  0.34 csys =  5.42 CPU)\nResult: PASS\nManifying 5 pod documents\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nERROR: Can't create '/Users/etudiant/perl5/lib/perl5'\nDo not have write permissions on '/Users/etudiant/perl5/lib/perl5'\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n at -e line 1.\nmake: *** [pure_site_install] Error 13\n-&gt; FAIL Installing JSON failed. See /Users/etudiant/.cpanm/work/1526230657.17102/build.log for details. Retry with --force to force install it.\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 9, "creation_date": 1526183109, "post_id": 50312572, "comment_id": 87641302, "body": "Can you share your Perl code with us?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1526194920, "creation_date": 1526194920, "answer_id": 50313585, "question_id": 50312572, "link": "https://stackoverflow.com/questions/50312572/perl-how-to-calculate-difference-for-consecutive-two-numbers-in-second-column-o/50313585#50313585", "title": "perl: How to calculate difference for consecutive two numbers in second column only in a text file", "body": "<p>Store the value in a variable outside the loop in order to access it in the subsequent pass of the loop.</p>\n\n<pre><code>my $previous;\nwhile (&lt;&gt;) {\n   next if $. &lt; 3;  # Skip the header.\n\n   my @fields = split;\n   say $fields[1] - $previous if defined($previous);\n   $previous = $fields[1];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9782683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CF2p3ERVpgU/AAAAAAAAAAI/AAAAAAAAADI/8DGxG4YOQtE/photo.jpg?sz=128", "display_name": "Mauii Aloha", "link": "https://stackoverflow.com/users/9782683/mauii-aloha"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "closed_date": 1550349745, "answer_count": 1, "score": -4, "last_activity_date": 1526275129, "creation_date": 1526182992, "last_edit_date": 1526184217, "question_id": 50312572, "link": "https://stackoverflow.com/questions/50312572/perl-how-to-calculate-difference-for-consecutive-two-numbers-in-second-column-o", "closed_reason": "Duplicate", "title": "perl: How to calculate difference for consecutive two numbers in second column only in a text file", "body": "<p>For example: 32.44 and 30.97 then 30.97 and 29.77 so on for n number for using perl</p>\n\n<pre><code>Col1      Col2   Col3    Col4\n------------------------------\n0000     32.44   37.88   39.47\n0001     30.97   37.87   39.49\n0002     29.77   37.69   39.39\n0003     28.26   37.43   39.23\n</code></pre>\n"}, {"tags": ["perl", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9763713, "user_type": "registered", "profile_image": "https://graph.facebook.com/249480629146755/picture?type=large", "display_name": "cmcjake", "link": "https://stackoverflow.com/users/9763713/cmcjake"}, "edited": false, "score": 0, "creation_date": 1526180684, "post_id": 50312372, "comment_id": 87640966, "body": "Thank you!  But does m{} only allow me to split by a single character, or can I use it to split via (for instance) three characters:  [|]  ?"}, {"owner": {"reputation": 99, "user_id": 9763713, "user_type": "registered", "profile_image": "https://graph.facebook.com/249480629146755/picture?type=large", "display_name": "cmcjake", "link": "https://stackoverflow.com/users/9763713/cmcjake"}, "edited": false, "score": 0, "creation_date": 1526181057, "post_id": 50312372, "comment_id": 87641017, "body": "Works like magic.  I obviously need to take a crash course into regex.  Up to this point I have avoided it because it&#39;s difficult for my mind to read, with all the symbols.  But now that I see it in action, it&#39;s hard for me to avoid it!  Tried to upvote your answer but I don&#39;t have enough reputation as a new user, so I&#39;ll say again: thank you very much!  Sorry if this is a duplicate question, I searched.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526200047, "post_id": 50312372, "comment_id": 87644332, "body": "@duskwuff: If you want to specify an operator then <code>qr&#47;...&#47;</code> is more appropriate than <code>m&#47;...&#47;</code> as there is no actual matching happening. But I prefer a bare <code>&#47;...&#47;</code>, which offers the reminder that this is a regex pattern without any extraneous noise."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1526209355, "post_id": 50312372, "comment_id": 87646593, "body": "<code>split</code> uses regular expressions. Any regex can be used. See <code>perldoc perlre</code> for more details. <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlre.html</a>"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1526181098, "last_edit_date": 1526181098, "creation_date": 1526180529, "answer_id": 50312372, "question_id": 50312302, "link": "https://stackoverflow.com/questions/50312302/perl-split-string-by-specific-pattern/50312372#50312372", "title": "Perl, Split string by specific pattern", "body": "<p><code>[</code>, <code>|</code>, and <code>]</code> are all special characters in regular expressions -- <code>|</code> is used to separate options, and <code>[\u2026]</code> are used to specify character sets. Using an unquoted <code>|</code> makes the expression match the empty string (more specifically: the empty string or the empty string), causing it to match and split on every character boundary. These characters must be escaped to use them literally in an expression:</p>\n\n<pre><code>my @words = split /\\[\\|\\]/, $string;\n</code></pre>\n\n<p>Since all the lines makes this visually confusing, you should probably use <code>m{}</code> quotes instead of <code>//</code>, and <code>\\Q\u2026\\E</code> to quote a range of characters instead of a separate backslash for each one. (This is functionally identical, it's just a little easier to read.)</p>\n\n<pre><code>my @words = split m{\\Q[|]\\E}, $string;\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9763713, "user_type": "registered", "profile_image": "https://graph.facebook.com/249480629146755/picture?type=large", "display_name": "cmcjake", "link": "https://stackoverflow.com/users/9763713/cmcjake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1526181098, "creation_date": 1526179491, "last_edit_date": 1526180340, "question_id": 50312302, "link": "https://stackoverflow.com/questions/50312302/perl-split-string-by-specific-pattern", "title": "Perl, Split string by specific pattern", "body": "<p>I found how to split a string by whitespaces, but that only takes into an account a single character.  In my case, I have comments pasted into a file that includes newlines and whitespaces.  I have them separated by this string: [|]</p>\n\n<p>So I need to split my $string into an array for example, where $string =</p>\n\n<pre><code>This is a comment.\nThis is a newline.    \nThis is the end[|]This is second comment.\nThis is second newline.    \n[|]Last comment\n</code></pre>\n\n<p>Gets split into $array[0], $array[1], and $array[2] which include the newlines and whitespaces.  Separated by [|]</p>\n\n<p>Every example I find on the web uses a single character, such as space or newline, to split strings.  In my case I have to use a more specific identifier, which is why I selected [|] but having troubles splitting it by this.</p>\n\n<p>I have tried to limit it to parse by a single '|' character with this code:</p>\n\n<pre><code>my @words = split /|/, $string;\nforeach my $thisline (@words) {\n    print \"This line = '\" . $thisline . \"'\\n\";\n</code></pre>\n\n<p>But this seems to split the entire string, character-by-character into @words.  </p>\n"}, {"tags": ["perl", "delimiter"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1526158768, "post_id": 50310497, "comment_id": 87637205, "body": "Using a <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">proper CSV parser</a> would be a good start"}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 1, "creation_date": 1526159143, "post_id": 50310497, "comment_id": 87637304, "body": "Why not use a real database instead of CSV?"}, {"owner": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 0, "creation_date": 1526159908, "post_id": 50310497, "comment_id": 87637478, "body": "The delimiters use in this format are: comma, apostrophe, double-quote, square bracket, curly bracket and colon. Have you considered the difficulty when escaping those characters when they actually need to appear in the values? The design decision to use CSV is going to cause you pain. Either use a real database (as said above), or consider using a format like XML which would cope better with this kind of hierarchical data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 1, "creation_date": 1526160133, "post_id": 50310497, "comment_id": 87637550, "body": "@Richard: Those aren&#39;t &quot;delimiters&quot;: they&#39;re just punctuation characters."}, {"owner": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526160783, "post_id": 50310497, "comment_id": 87637734, "body": "@Borodin in order to extract the data from that line of CSV, all of those characters would need to be used, since they delimit different parts of the data, so they <i>are</i> <a href=\"https://en.m.wikipedia.org/wiki/Delimiter\" rel=\"nofollow noreferrer\">delimiters</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 1, "creation_date": 1526161048, "post_id": 50310497, "comment_id": 87637808, "body": "@Richardissimo, Re &quot;<i>in order to extract the data from that line of CSV,  all of those characters would need to be used</i>&quot;, No. This is standard CSV. (<code>sep_char</code> is <code>,</code> and <code>quote_char</code> is <code>&quot;</code>. The sample is insufficient to determine <code>escape_char</code>.) Square brackets are no more special than <code>a</code>, for example. Extracting data from the some of the fields after they&#39;ve been extracted from the CSV is another matter."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 0, "creation_date": 1526161108, "post_id": 50310497, "comment_id": 87637830, "body": "@Richardissimo The <code>&quot;</code> protect the punctuation inside fields, which are correctly delimited by <code>,</code>.  Then it&#39;s something JSON-like  in the fields"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1526161467, "post_id": 50310497, "comment_id": 87637929, "body": "The real bad decision is the choice to use something JSON-like instead of JSON. (<code>False</code> is not a valid JSON value, and <code>&#39;id&#39;</code> is not a valid object key literal.) That means you&#39;ll have to write your own parser instead of being able to take advantage of an existing parser."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526161736, "post_id": 50310497, "comment_id": 87638011, "body": "@ikegami  I think by &quot;tuple&quot; they mean the row in the file so <code>False</code> is just a CSV field.  The problem in the json-look-alike is the single quotes <code>&#39;</code> instead of <code>&quot;</code> (there may be more problems).  So perhaps it&#39;s &quot;relaxed json&quot;.  A bad choice I agree"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1526162497, "post_id": 50310497, "comment_id": 87638197, "body": "@zdim, Oops, yes, <code>False</code> isn&#39;t in the JSON-like string. That means the wrong quotes might be the only deviation from the JSON, in which case the OP could use JSON:PP with <code>-&gt;allow_singlequote(1)</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526164111, "post_id": 50310497, "comment_id": 87638567, "body": "@ikegami I didn&#39;t know that JSON::PP had that option. That&#39;s good to know!"}, {"owner": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 0, "creation_date": 1526186802, "post_id": 50310497, "comment_id": 87641798, "body": "@RichardPointing Was the CSV file supplied to you, or did you construct it yourself from things like the JSON information?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1526162808, "creation_date": 1526162808, "answer_id": 50311052, "question_id": 50310497, "link": "https://stackoverflow.com/questions/50310497/using-split-with-delimiter-with-multiple-uses/50311052#50311052", "title": "Using \u2018split\u2019 with delimiter with multiple uses", "body": "<p>Don't try to reinvent the wheel. Use an existing parser such as <a href=\"http://search.cpan.org/perldoc?Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>.</p>\n\n<p>If you need to extract data from the JSON-like strings (once you've extracted them from the CSV), you might be able to take advantage of <a href=\"http://search.cpan.org/perldoc?JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a> with <code>-&gt;allow_singlequote(1)</code>. (Note that the faster <a href=\"http://search.cpan.org/perldoc?JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a> doesn't support that option.)</p>\n"}], "owner": {"reputation": 1, "user_id": 9782006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mz5p8puOET8/AAAAAAAAAAI/AAAAAAAAArU/c42mvE_f6G8/photo.jpg?sz=128", "display_name": "Richard Pointing", "link": "https://stackoverflow.com/users/9782006/richard-pointing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526162808, "creation_date": 1526157679, "last_edit_date": 1526159998, "question_id": 50310497, "link": "https://stackoverflow.com/questions/50310497/using-split-with-delimiter-with-multiple-uses", "title": "Using \u2018split\u2019 with delimiter with multiple uses", "body": "<p>So I have a csv file on a movie database, and I am reading that into an array. I need to split each part of the array into another array, or at least have it accessible to manipulate.</p>\n\n<p>Here is an example of the csv file:</p>\n\n<pre><code>adult,belongs_to_collection,budget,genres,homepage,id,imdb_id,original_language,original_title,overview,popularity,poster_path,production_companies,production_countries,release_date,revenue,runtime,spoken_languages,status,tagline,title,video,vote_average,vote_count\n</code></pre>\n\n<p>An example of an actual tuple</p>\n\n<pre><code>False,\"{'id': 10194, 'name': 'Toy Story Collection', 'poster_path': '/7G9915LfUQ2lVfwMEEhDsn3kT4B.jpg', 'backdrop_path': '/9FBwqcd9IRruEDUrTdcaafOMKUq.jpg'}\",30000000,\"[{'id': 16, 'name': 'Animation'}, {'id': 35, 'name': 'Comedy'}, {'id': 10751, 'name': 'Family'}]\",http://toystory.disney.com/toy-story,862,tt0114709,en,Toy Story,\"Led by Woody, Andy's toys live happily in his room until Andy's birthday brings Buzz Lightyear onto the scene. Afraid of losing his place in Andy's heart, Woody plots against Buzz. But when circumstances separate Buzz and Woody from their owner, the duo eventually learns to put aside their differences.\",21.946943,/rhIRbceoE9lR4veEXuwCC2wARtG.jpg,\"[{'name': 'Pixar Animation Studios', 'id': 3}]\",\"[{'iso_3166_1': 'US', 'name': 'United States of America'}]\",1995-10-30,373554033,81.0,\"[{'iso_639_1': 'en', 'name': 'English'}]\",Released,,Toy Story,False,7.7,5415 \n</code></pre>\n\n<p>Here is my code: </p>\n\n<pre><code>open (NAMEFILE, \"movies_metadata.csv\");\nmy @topgrossmovie = &lt;NAMEFILE&gt;;\nclose NAMEFILE;\n\nforeach $x ( @topgrossmovie ) {\n    my ($adult,$belongs_to_collection,$budget,$genres,$homepage,$id,$imdb_id,$original_language,$original_title,$overview,$popularity,$poster_path,$production_companies,$production_countries,$release_date,$revenue,$runtime,$spoken_languages,$status,$tagline,$title,$video,$vote_average,$vote_count) = split /,/, $x;\n}\n</code></pre>\n\n<p>Because of their being a comma <code>,</code> within tuples makes it extremely difficult.</p>\n"}, {"tags": ["linux", "perl", "pdf", "truetype"], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1526242253, "post_id": 50310311, "comment_id": 87656168, "body": "Thanks for the reply Grant. I rewrote my script using PDF::API2. Works great."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 4, "last_activity_date": 1526156039, "creation_date": 1526156039, "answer_id": 50310311, "question_id": 50307047, "link": "https://stackoverflow.com/questions/50307047/is-importing-a-truetype-font-for-perl-module-possible/50310311#50310311", "title": "Is importing a truetype font for perl module possible?", "body": "<p>There is an old and unresolved <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=64238\" rel=\"nofollow noreferrer\">ticket</a> requesting that feature on that module, so I suspect for PDF::Create, the answer is no, you can't use TTF fonts (I'd be happy to be proven wrong on that point).</p>\n\n<p>Other Perl modules <em>can</em> use True Type and Open Type fonts. <a href=\"https://metacpan.org/pod/PDF::API2\" rel=\"nofollow noreferrer\">PDF::API2</a> does support them.  I'll confess, I found that module's API to be somewhat intimidating.</p>\n\n<p>Another module I have used extensively is <a href=\"https://metacpan.org/pod/PDF::Reuse\" rel=\"nofollow noreferrer\">PDF::Reuse</a> which can be used to create PDFs from scratch, or by combining existing pages as templates and overlaying text and other elements.  PDF::Reuse also supports the use of True Type fonts.</p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526156039, "creation_date": 1526133742, "last_edit_date": 1526136197, "question_id": 50307047, "link": "https://stackoverflow.com/questions/50307047/is-importing-a-truetype-font-for-perl-module-possible", "title": "Is importing a truetype font for perl module possible?", "body": "<p>After a great deal of toiling I have managed to hack up a perl script that use <a href=\"https://metacpan.org/pod/PDF::Create\" rel=\"nofollow noreferrer\">PDF::Create</a> to create pdf labels for a label printer. The script now works perfectly to suit my needs but the choices of fonts are limited. I have installed a true type font with gnome-font-viewer (I am using Debian Stretch).</p>\n\n<p>According to the <a href=\"https://metacpan.org/pod/PDF::Create#font(%params)\" rel=\"nofollow noreferrer\">docs for PDF::Create</a>: A postscript named \"BaseFont\" (Courier, Courier-Bold, Courier-BoldOblique, Courier-Oblique, Helvetica, Helvetica-Bold, Helvetica-BoldOblique, Helvetica-Oblique, Times-Roman, Times-Bold, Times-Italic, Times-BoldItalic or Symbol) can be used to create the pdf.</p>\n\n<p>How can I add my newly installed true type font to this list of Postscript basefonts so that I can use it to create a PDF? Or is this not possible?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1526130960, "post_id": 50306528, "comment_id": 87629245, "body": "Remove <code>([A-Z]+&quot;|[A-Z]+_[A-Z]+&quot;|[A-Z]+_[A-Z]+_[A-Z]+&quot;)</code> and put <code>(\\w+)&quot;</code> instead."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1526130963, "post_id": 50306528, "comment_id": 87629248, "body": "Put the <code>&quot;</code> outside of your capturing parenthesis. <code>...(a&quot;|b&quot;|c&quot;)...</code> becomes <code>...(a|b|c)&quot;...</code>. You can also use alternative delimiters for the expression, to get rid of the hard to read <code>\\&#47;</code> like <code>m{&#47;a&#47;b&#47;c&#47;...}</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1526130975, "post_id": 50306528, "comment_id": 87629254, "body": "You really don&#39;t want to use regex to parse HTML. If you want to parse websites, take a look at WWW::Mechanize instead"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1526131437, "creation_date": 1526131437, "answer_id": 50306722, "question_id": 50306528, "link": "https://stackoverflow.com/questions/50306528/how-do-i-remove-the-last-character-from-a-string-variable/50306722#50306722", "title": "How do I remove the last character from a string variable?", "body": "<p>Okay, you should really be processing the HTML with an appropriate module, but I'll explain the problems</p>\n\n<p>First, instead of escaping all those slashes you can use a different delimiter for the pattern. <code>/.../</code> is the same as <code>m/.../</code>, but if you use the <code>m</code> (for \"match\") then you can pick a different delimiter. Here I've used exclamation marks <code>!</code></p>\n\n<p>Secondly, there's little point in adding the closing double quote to the second capture, or to give all the alternatives of zero, one, or two underscores. The <code>\\w</code> metacharacter matches \"word\" characters, and is the same as <code>[0-9A-Za-z_]</code> i.e. alphanumerics or underscore. You just need to match as many of those as possible</p>\n\n<p>This test should work</p>\n\n<pre><code>$html =~  m!href=\"(/store/apps/category/)(\\w+)!g\n</code></pre>\n\n<p>And to answer your original question, the <code>chop</code> function removes the last character of a string. It won't work on <code>$2</code> because that value is read-only so you would have needed to declare your own variable and copy it first</p>\n\n<pre><code>my $capture = $2;\nchop $capture;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9780693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a32573313d6e1d66e73c8335ec2045?s=128&d=identicon&r=PG&f=1", "display_name": "Meirizon", "link": "https://stackoverflow.com/users/9780693/meirizon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 50306722, "answer_count": 1, "score": 1, "last_activity_date": 1526131954, "creation_date": 1526130001, "last_edit_date": 1526131954, "question_id": 50306528, "link": "https://stackoverflow.com/questions/50306528/how-do-i-remove-the-last-character-from-a-string-variable", "title": "How do I remove the last character from a string variable?", "body": "<p>I'm trying to get all of Google Play's categories into separate links, for example <code>https://play.google.com/store/apps/category/ART_AND_DESIGN</code></p>\n\n<p>This is the code I came up with</p>\n\n<pre><code>use LWP::Simple;\n\n$url     = 'https://play.google.com';\nmy $html = get($url);\n\nwhile ( $html =~ /href\\=\\\"(\\/store\\/apps\\/category\\/)([A-Z]+\"|[A-Z]+_[A-Z]+\"|[A-Z]+_[A-Z]+_[A-Z]+\")/g ) {\n\n    print \"$url$1$2\\n\";\n}\n</code></pre>\n\n<p>The problem is that <code>$2</code> also gives me the quotation mark at the end, for example <code>https://play.google.com/store/apps/category/ART_AND_DESIGN\"</code></p>\n\n<p>How do I get rid of the double quote <code>\"</code> when printing?  </p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1526092783, "last_edit_date": 1526092783, "creation_date": 1526092507, "answer_id": 50302373, "question_id": 50302364, "link": "https://stackoverflow.com/questions/50302364/how-to-type-selected-elements-of-an-array-in-double-quotes/50302373#50302373", "title": "How to type selected elements of an array in double quotes", "body": "<p>To use <code>\"</code> in a string delimited by <code>\"</code>, escape it.</p>\n\n<pre><code>\"foo: \\\"$bar\\\"\\n\"\n</code></pre>\n\n<p>You could also switch the delimiter (keeping in mind that <code>\"...\"</code> is short for <code>qq\"...\"</code>).</p>\n\n<pre><code>qq{foo: \"$bar\"\\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526160648, "post_id": 50303849, "comment_id": 87637691, "body": "Re &quot;<i>Your example will not print the entire array.</i>&quot;, Nor did they want to"}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 2, "last_activity_date": 1526113235, "last_edit_date": 1526113235, "creation_date": 1526109933, "answer_id": 50303849, "question_id": 50302364, "link": "https://stackoverflow.com/questions/50302364/how-to-type-selected-elements-of-an-array-in-double-quotes/50303849#50303849", "title": "How to type selected elements of an array in double quotes", "body": "<ol>\n<li><p>Always use</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>even in the shortest Perl scripts.</p>\n\n<p>In case of typos in the code, Perl will usually issue errors if you include them. Without, Perl will happily do weird, wrong and pointless things silently.</p></li>\n</ol>\n\n<hr>\n\n<ol start=\"2\">\n<li><p>Your example will not print the entire array. Instead you will get:</p>\n\n<pre><code> 'oranges' \n 'guavas' \n 'passionfruits' \n</code></pre>\n\n<p>The first index of an array is <code>0</code> and therefore <code>'apples'</code> is skipped because <code>$a</code> is initialized with <code>1</code>. The loop is also exited due to reaching the value <code>4</code> before printing out <code>'grapes'</code>.</p>\n\n<p>In order to print the entire array you would do:</p>\n\n<ul>\n<li><p>if you need to use the index value <code>$i</code> somewhere:</p>\n\n<pre><code>for my $i (0 .. $#fruits) {\n    print \" $i: '$fruits[$i]' \\n\";\n}\n</code></pre>\n\n<p>(<code>$#fruits</code> is the last index if <code>@fruits</code>, equal to the the size of the array minus 1. Since this array has 5 items, the index values range from 0 to 4)</p></li>\n<li><p>otherwise:</p>\n\n<pre><code>foreach my $current_fruit (@fruits) {\n    print \" '$current_fruit' \\n\";\n}\n</code></pre>\n\n<p>where <code>$current_fruit</code> is set to each item in the array <code>@fruits</code> in its turn.</p></li>\n</ul></li>\n</ol>\n\n<hr>\n\n<ol start=\"3\">\n<li><p>Quotes in Perl function as operators, and depending on which ones you use, they may or may not do various things with the included string.</p>\n\n<ul>\n<li><p>In your examples, the double quotes will do interpolation on the string, substituting the value of <code>$fruits[$a]</code> and replacing the escape sequence <code>\\n</code>. Therefore:</p>\n\n<pre><code>print \" '$fruits[$a]' \\n\";\n</code></pre>\n\n<p>(for <code>$a == 1</code>) becomes:</p>\n\n<pre><code> 'oranges' \n</code></pre></li>\n<li><p>Single quotes, in contrast, will <em>not</em> do interpolation.</p>\n\n<p>Only single quotes themselves (and backslashes preceding single quotes) need to be escaped with a backslash. (Other backslashes can optionally be escaped.) All other character sequences will appear as they are, so the argument to <code>print</code> in:</p>\n\n<pre><code>print ' \"$fruits[$a]\" \\n';\n</code></pre>\n\n<p>is considered entirely a literal string and thus</p>\n\n<pre><code> \"$fruits[$a]\" \\n \"$fruits[$a]\" \\n \"$fruits[$a]\" \\n\n</code></pre>\n\n<p>is printed out.</p></li>\n</ul>\n\n<hr>\n\n<p>To get the desired output, there are multiple ways to go about it:</p>\n\n<ol>\n<li><p>The simplest way - but not easiest to read for complex strings - is to use double quotes and escape the included quotes:</p>\n\n<pre><code>print \" \\\"$fruits[$a]\\\" \\n\";\n</code></pre></li>\n<li><p>You can use an generic notation for <code>\"...\"</code>, which is <code>qq{...}</code> where <code>{}</code> are either a pair of braces (any of <code>()</code>, <code>[]</code>, <code>{}</code> or <code>&lt;&gt;</code>) or the same other non-whitespace, non-word character, e.g.:</p>\n\n<pre><code>print qq{ \"$fruits[$a]\" \\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print qq! \"$fruits[$a]\" \\n!;\n</code></pre></li>\n<li><p>You can concatenate the string out of parts that you quote separately:</p>\n\n<pre><code>print ' \"' . $fruits[$a] . '\"' . \" \\n\";\n</code></pre></li>\n</ol>\n\n<p>Which is easiest to read in code will depend on the complexity of the string and the variables contained: For really long strings with complex dereferences, indeces and hash keys you might want to use option 3, whereas for short ones 2 would be the best.</p>\n\n<p>My entire edited code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @fruits = (\"apples\", \"oranges\", \"guavas\", \"passionfruits\", \"grapes\");\n\nfor my $i (0 .. $#fruits) {\n    print \" $i: \\\"$fruits[$i]\\\" \\n\";\n    print qq&lt; $i: \"$fruits[$i]\" \\n&gt;;\n    print ' ' . $i . ': \"' . $fruits[$i] . '\"' . \" \\n\";\n}\n\nforeach my $current_fruit (@fruits) {\n    print \" \\\"$current_fruit\\\" \\n\";\n    print qq\u00a4 \"$current_fruit\" \\n\u00a4;\n    print ' \"' . $current_fruit . '\"' . \" \\n\";\n}\n</code></pre>\n\n<hr>\n\n<p>You can learn more about the different quotes in Perl from the perldoc (or man on UNIX-like systems) page <code>perlop</code> and its <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">section titled \"Quote and Quote-like Operators\"</a>.</p></li>\n</ol>\n"}], "owner": {"reputation": 134, "user_id": 9678193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4fea879a99e77e9f3f59410018d5e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Viqtoh", "link": "https://stackoverflow.com/users/9678193/viqtoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 50302373, "answer_count": 2, "score": 3, "last_activity_date": 1526113235, "creation_date": 1526092372, "last_edit_date": 1526104863, "question_id": 50302364, "link": "https://stackoverflow.com/questions/50302364/how-to-type-selected-elements-of-an-array-in-double-quotes", "title": "How to type selected elements of an array in double quotes", "body": "<p>Here, I'm trying to print the 2nd, 3rd and 4th elements of an array in double quotes and I've only been able to do it in single quotes.</p>\n\n<pre><code>my @fruits = (\"apples\", \"oranges\", \"guavas\", \"passionfruits\", \"grapes\");\nmy $a = 1;\nwhile ($a&lt;4){\n    print \" '$fruits[$a]' \\n\";\n    $a += 1;\n}\n</code></pre>\n\n<p>But I can't do this in single quotes. When I change the single quotes to double quotes and vice versa, it prints <code>\"$fruits[$a]\"\\n</code> three times instead.\nAnd when I change all quotes to double quotes, it gives an error which I understand why.\n   Please I really need help here.</p>\n\n<p>And if I could get a way to print all three elements in double quotes without having to use a loop. Thanks!</p>\n"}, {"tags": ["perl", "proxy"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1526053274, "post_id": 50295787, "comment_id": 87608399, "body": "Don&#39;t use <code>$a</code>, it&#39;s a reserved variable for <code>sort</code>."}, {"owner": {"reputation": 9, "user_id": 7012419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsl0Alwo9U0/AAAAAAAAAAI/AAAAAAAAAFY/MwhIfNj06gA/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/7012419/derek"}, "edited": false, "score": 0, "creation_date": 1526108415, "post_id": 50295787, "comment_id": 87623751, "body": "That will be great help from your side or alternatively you can suggest a method where I can send multiple parallel http requests with sock proxy as fast as AnyEvent. I did not know any other module which sends request as fast as AnyEvent."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526109930, "post_id": 50295787, "comment_id": 87624054, "body": "@Derek: There are already modules that support this. Did you read my answer?"}, {"owner": {"reputation": 9, "user_id": 7012419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsl0Alwo9U0/AAAAAAAAAAI/AAAAAAAAAFY/MwhIfNj06gA/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/7012419/derek"}, "edited": false, "score": 0, "creation_date": 1526142880, "post_id": 50295787, "comment_id": 87632803, "body": "Yes already stared working on it. Someone suggested to add functionality in existing module so I was expecting a script but comment is removed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526161702, "post_id": 50295787, "comment_id": 87638001, "body": "Re &quot;<i>I did not know any other module which sends request as fast as AnyEvent.</i>&quot;, LWP is slow, being completely written in Perl. <a href=\"http://search.cpan.org/perldoc?Net::Curl\" rel=\"nofollow noreferrer\">Net::Curl</a> uses the very fast libcurl library. It can even do parallel requests (using <a href=\"http://search.cpan.org/perldoc?Net::Curl::Multi\" rel=\"nofollow noreferrer\">Net::Curl::Multi</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1526067481, "last_edit_date": 1526067481, "creation_date": 1526054522, "answer_id": 50296156, "question_id": 50295787, "link": "https://stackoverflow.com/questions/50295787/anyeventhttp-request-with-sock-proxy/50296156#50296156", "title": "AnyEvent::HTTP request with sock proxy", "body": "<p>The\n<a href=\"http://search.cpan.org/~mlehmann/AnyEvent-HTTP-2.22/HTTP.pm#SOCKS_PROXIES\" rel=\"nofollow noreferrer\">documentation for <code>AnyEvent::HTTP</code></a> has this</p>\n\n<blockquote>\n  <p>Socks proxies are not directly supported by AnyEvent::HTTP</p>\n</blockquote>\n\n<p>If you read that section it may describe a workaround that suits you</p>\n\n<p>Alternatively, take a look at\n<a href=\"https://metacpan.org/pod/AnyEvent::HTTP::Socks\" rel=\"nofollow noreferrer\"><code>AnyEvent::HTTP::Socks</code></a> which says</p>\n\n<blockquote>\n  <p>This module adds new \u2018socks\u2019 option to all http_* functions exported by AnyEvent::HTTP. So you can specify socks proxy for HTTP requests.</p>\n</blockquote>\n\n<p>Or <a href=\"https://metacpan.org/pod/AnyEvent::HTTP::LWP::UserAgent\" rel=\"nofollow noreferrer\"><code>AnyEvent::HTTP::LWP::UserAgent</code></a> which should allow you to use ideas from the working <code>LWP::UserAgent</code> code that you already have</p>\n"}], "owner": {"reputation": 9, "user_id": 7012419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bsl0Alwo9U0/AAAAAAAAAAI/AAAAAAAAAFY/MwhIfNj06gA/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/7012419/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526067481, "creation_date": 1526053231, "last_edit_date": 1526056202, "question_id": 50295787, "link": "https://stackoverflow.com/questions/50295787/anyeventhttp-request-with-sock-proxy", "title": "AnyEvent::HTTP request with sock proxy", "body": "<p>I am trying to send multiple HTTP get requests using Perl. I need to send those request using sock proxy.</p>\n\n<p>If I use following code, I am able to send a request with sock proxy</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new(\n    agent =&gt; q{Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; YPC 3.2.0; .NET CLR 1.1.4322)},\n);\n$ua-&gt;proxy([qw/ http https /] =&gt; 'socks://localhost:9050'); # Tor proxy\n#$ua-&gt;cookie_jar({});\n\n$a = 10;\nwhile ( $a &lt; 20 ) {\n    my $rsp = $ua-&gt;get('http://example.com/type?parameter=1&amp;parameter=2');\n    print $rsp-&gt;content;\n    $a = $a + 1;\n}\n</code></pre>\n\n<p>It works successfully but I need to use <code>AnyEvent</code> to send multiple GET requests in parallel</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nuse AnyEvent;\nuse AnyEvent::HTTP;\nuse Time::HiRes qw(time);\nuse LWP::Protocol::socks;\nuse AnyEvent::Socket;\n\nmy $cv = AnyEvent-&gt;condvar( cb =&gt; sub {\n    warn \"done\";\n});\n\nmy $urls = [\n    \"http://url-1-withallparameters\",\n    \"http://url-2-withallparameters\",\n    \"http://url-3-withallparameters\",\n];\n\nmy $start = time;\nmy $result;\n\n$cv-&gt;begin(sub { shift-&gt;send($result) });\n\nfor my $url ( @$urls ) {\n\n    $cv-&gt;begin;\n    my $now = time;\n    my $request;\n\n    $request = http_request(\n        GET =&gt; $url, \n        timeout =&gt; 2, # seconds\n        sub {\n            my ($body, $hdr) = @_;\n\n            if ($hdr-&gt;{Status} =~ /^2/) {\n                push (@$result,\n                        join(\"\\t\",\n                        ($url,\n                        \" has length \",\n                        $hdr-&gt;{'content-length'}, \n                        \" and loaded in \",\n                        time - $now,\n                        \"ms\"))\n                );\n            }\n            else {\n                push (@$result,\n                        join(\"\",\n                        \"Error for \",\n                        $url,\n                        \": (\", \n                        $hdr-&gt;{Status}, \n                        \") \", \n                        $hdr-&gt;{Reason})\n                );\n            }\n\n            undef $request;\n            $cv-&gt;end;\n        }\n    );\n}\n\n$cv-&gt;end;\nwarn \"End of loop\\n\";\n\nmy $foo = $cv-&gt;recv;\n\nprint join(\"\\n\", @$foo), \"\\n\" if defined $foo;\nprint \"Total elapsed time: \", time-$start, \"ms\\n\";\n</code></pre>\n\n<p>This is working fine but I am not able to send these requests using sock proxy.</p>\n\n<p>Even in the terminal, if I export proxy commands like <code>curl</code> and <code>wget</code> they work fine with sock proxy, but when I use a Perl command to execute this script as a sock proxy it does not work.</p>\n\n<p>I could integrate it with <code>LWP::UserAgent</code> but it is not working with <code>AnyEvent</code>.</p>\n\n<p>I have used</p>\n\n<pre><code>proxy =&gt; [ $host, $port ],\n</code></pre>\n\n<p>below</p>\n\n<pre><code>GET =&gt; $url, \n</code></pre>\n\n<p>but it works for HTTP and HTTPS proxy only, not for sock proxy.\nThis <a href=\"https://stackoverflow.com/questions/12671099/perl-anyeventhttp-request-using-proxy-fails\">url</a> is working for HTTP/HTTPS proxy but not for sock proxy.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526044476, "post_id": 50293020, "comment_id": 87602617, "body": "Please <a href=\"https://stackoverflow.com/posts/50293020/edit\">edit</a> your question and tell us about that compile error. Your code works for me when I adapt and try it on 5.26. <code>$ perl -E &#39;my $file = &quot;foo.c&quot;; say &quot;.o exists&quot; if -f $file  =~ s&#47;\\.c$&#47;\\.o&#47;gr;&#39;</code> compiles, prints nothing. <code>touch foo.c foo.o &amp;&amp; perl -E &#39;my $file = &quot;foo.c&quot;; say &quot;.o exists&quot; if( -f ($file  =~ s&#47;\\.c$&#47;\\.o&#47;gr));&#39;</code> prints an empty line and <code>.o exists</code>. With and without the parentheses."}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526044958, "post_id": 50293020, "comment_id": 87602915, "body": "@GerhardBarnard: In this example, I want to test for the existence of a .o file based on the name for a .c file.  But this is more about how to write more maintainable code with fewer variables in general."}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526045157, "post_id": 50293020, "comment_id": 87603051, "body": "@simbabque:  Hmm, it doesn&#39;t work with perl 5.8 (in fact my perl doesn&#39;t like the <code>-E</code> option...), but if I use stdin with a cut and paste of your code, it complains.  So it&#39;s just a version thing.   I can do this with the extra variables, I just wanted to get into the practice of writing neater code..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1526045399, "post_id": 50293020, "comment_id": 87603196, "body": "5.8 doesn&#39;t have the <code>&#47;r</code> flag for substitutions. That was added in 5.14. See <a href=\"https://perldoc.perl.org/perl5140delta.html#Non-destructive-substitution\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>."}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526045519, "post_id": 50293020, "comment_id": 87603271, "body": "Yes, I just realized the first example as posted, wouldn&#39;t work either (I had been trying something from the web).  I&#39;ve edited the question to use the example I did actually try, though It adds yet another line :-("}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526045559, "post_id": 50293020, "comment_id": 87603288, "body": "And that my example wouldn&#39;t compile makes sense too, because there&#39;s no <code>feature &quot;say&quot;</code> either. <code>-E</code> turns on all the features that are available in your version. Might be that that flag didn&#39;t even exist."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526045643, "post_id": 50293020, "comment_id": 87603346, "body": "Without <code>&#47;r</code> you can&#39;t do non-destructive substitution. Only way would be to create a function. If you&#39;ve got lots of those, that&#39;ll work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1526045717, "post_id": 50293020, "comment_id": 87603392, "body": "Note that the <code>&#47;g</code> modifier is meaningless here and should be omitted."}, {"owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "edited": false, "score": 0, "creation_date": 1526057224, "post_id": 50293020, "comment_id": 87610517, "body": "FWIW, it looks like v5.8.9 was released over 9 years ago <a href=\"https://perldoc.perl.org/perlhist.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlhist.html</a>"}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1526061009, "post_id": 50293020, "comment_id": 87612265, "body": "Yes.. unfortunately, this script has to be backwards compatible, as that&#39;s the default perl on our systems."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526045925, "post_id": 50293621, "comment_id": 87603528, "body": "This reminds me a lot of <a href=\"http://php.net/manual/en/function.preg-replace.php\" rel=\"nofollow noreferrer\">php.net/manual/en/function.preg-replace.php</a>, but the order of the arguments in my implementation is more Perlish somehow."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526046168, "post_id": 50293621, "comment_id": 87603675, "body": "This still uses a temporary variable <code>$text</code>; in fact it uses three!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526046204, "post_id": 50293621, "comment_id": 87603704, "body": "@Borodin it does. But it&#39;s more concise code. I think that was the point, rather than optimizing for performance."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526046346, "post_id": 50293621, "comment_id": 87603785, "body": "You can&#39;t put <code>&#47;g</code> on <code>qr&#47;&#47;</code>: it&#39;s part of the <i>operation</i>, not the regex pattern."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526046450, "post_id": 50293621, "comment_id": 87603859, "body": "@Borodin true. That doesn&#39;t encode into the flags part at the front."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526046508, "post_id": 50293621, "comment_id": 87603901, "body": "If the idea is to tighten the code then the OP&#39;s version can be reduced to a couple of lines with <code>(my $doto = $file) =~ s&#47;\\.c$&#47;\\.o&#47;</code>"}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1526049907, "post_id": 50293621, "comment_id": 87606183, "body": "Thanks, yes -- the idea is to make the code more concise/readable.   I think this is the best solution for my version of perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1526071014, "post_id": 50293621, "comment_id": 87616569, "body": "Might as well use String::Substitution <code>gsub_copy</code>/<code>gsub_modify</code> instead of that. On top of saving you on code, it supports <code>$1</code> and such in the replacement expression!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526071065, "post_id": 50293621, "comment_id": 87616592, "body": "@ikegami I didn&#39;t even know that!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526072029, "post_id": 50293621, "comment_id": 87617042, "body": "(Oops, I meant <code>sub_modify</code>/<code>gsub_modify</code>.)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1526046579, "last_edit_date": 1526046579, "creation_date": 1526045884, "answer_id": 50293621, "question_id": 50293020, "link": "https://stackoverflow.com/questions/50293020/perl-test-regex-without-creating-new-variable/50293621#50293621", "title": "Perl: test regex without creating new variable", "body": "<p>This answer talks about making the actual <code>print if -f</code> lookup code more readable. If you want the code to run faster, this solution is more expensive than your <em>ugly</em> one.</p>\n\n<p>Since in your version of Perl there is no non-destructive substitution all you could do is implement your own function for that. It will not be as nice as the <code>s///r</code>, but it does the job. If you've got several occurrences of this type of code, it will make sense.</p>\n\n<pre><code>sub replace {\n    my ($text, $pattern, $replacement) = @_;\n\n    $text =~ s{$pattern}{$replacement}g; # do you need /g?\n    return $text;\n}\n\n# ... later\n\nprint \".o exists\" if -f replace($file, qr/\\.c$/, '.o');\n</code></pre>\n\n<p>This already takes care of making a copy for you, much like your temporary variable does, so <code>$file</code> will not actually be altered.</p>\n\n<p>Note that your <code>/g</code> was useless as the filename will only ever have one end of the line, but it might not be useless later. However, it would be better to not fix it there, but to pass in an optional flag as another argument.</p>\n\n<pre><code>replace( $file, qr/.../, '.o', 'g' ); # where 'g' just means any true value\n\nsub replace {\n    my ($text, $pattern, $replacement, $global) = @_;\n\n    if ($global) {\n         $text =~ s{$pattern}{$replacement}g;\n    } else {\n         $text =~ s{$pattern}{$replacement};\n    }\n\n    return $text;\n}\n</code></pre>\n\n<p>You also generally don't need to escape the <code>.</code> in the replacement part because that's not actually a regular expression pattern, just a string.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1526047888, "post_id": 50293679, "comment_id": 87604813, "body": "@Gerhard: Given a file name, <code>*.c</code>, they want to discover whether the corresponding <code>*.o</code> exists. Like a make file, if you like."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1526046089, "creation_date": 1526046089, "answer_id": 50293679, "question_id": 50293020, "link": "https://stackoverflow.com/questions/50293020/perl-test-regex-without-creating-new-variable/50293679#50293679", "title": "Perl: test regex without creating new variable", "body": "<p>Your statement</p>\n\n<pre><code>print \".o exists\" if ( -f ($file =~ s/\\.c$/\\.o/gr) )\n</code></pre>\n\n<p>works fine on versions of Perl that support the <code>/r</code> modifier\u2014v5.14 or better. (Note that <code>/g</code> is superfluous.)</p>\n\n<p>Without it there is no way to apply a substitution without modifying a variable, although you can make it a very short-lived temporary variable using a block</p>\n\n<pre><code>{\n    (my $doto = $file) =~ s/\\.c$/\\.o/;\n    print \".o exists\" if -f $doto;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526050010, "post_id": 50294347, "comment_id": 87606261, "body": "Note that the best practices for modern Perl suggest snake_case function names. Although we like camels, we don&#39;t like CamelCase. ;)"}, {"owner": {"reputation": 573, "user_id": 9620620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e564dd4ea9cee7b6e67180c0d3dcb5e?s=128&d=identicon&r=PG&f=1", "display_name": "webmite", "link": "https://stackoverflow.com/users/9620620/webmite"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526053564, "post_id": 50294347, "comment_id": 87608573, "body": "@simbabque: I have adjusted the answer to reflect snake_case.  I see some discussion on the topic of snake_case vs camelCase for perl. Can you cite a reference link?"}], "tags": [], "owner": {"reputation": 573, "user_id": 9620620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e564dd4ea9cee7b6e67180c0d3dcb5e?s=128&d=identicon&r=PG&f=1", "display_name": "webmite", "link": "https://stackoverflow.com/users/9620620/webmite"}, "is_accepted": false, "score": 2, "last_activity_date": 1526053322, "last_edit_date": 1526053322, "creation_date": 1526048111, "answer_id": 50294347, "question_id": 50293020, "link": "https://stackoverflow.com/questions/50293020/perl-test-regex-without-creating-new-variable/50294347#50294347", "title": "Perl: test regex without creating new variable", "body": "<p>I would approach it by adding a function as follows.</p>\n\n<pre><code>sub doto_exists {\n    my $doto = shift;\n    $doto =~ s/\\.c$/\\.o/;\n    return (-f $doto);\n}\n\n$file = \"file1.c\";\n\nprint \".o exists\\n\" if doto_exists($file) ;\n</code></pre>\n"}], "owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50293621, "answer_count": 3, "score": 1, "last_activity_date": 1526053322, "creation_date": 1526043973, "last_edit_date": 1526045581, "question_id": 50293020, "link": "https://stackoverflow.com/questions/50293020/perl-test-regex-without-creating-new-variable", "title": "Perl: test regex without creating new variable", "body": "<p>Sorry if this is a basic question, but I'm somewhat new to perl, and I feel there should be a way to do this, but am having trouble finding any documentation.   I'm wondering if you can do the following without the throw-away variable <code>$doto</code>:</p>\n\n<pre><code>my $file=\"foo/bar.c\";\nmy $doto = $file;\n$doto =~ s/\\.c$/\\.o/;\nprint \".o exists\" if ( -f $doto );\n</code></pre>\n\n<p>That is, something like:</p>\n\n<pre><code>print \".o exists\" if ( -f ($file =~ s/\\.c$/\\.o/gr) );\n</code></pre>\n\n<p>(but that creates a compile error of course).  </p>\n\n<p>My compile error is as follows:</p>\n\n<blockquote>\n  <p>Bareword found where operator expected at - line 2, near \"s/.c$/.o/gr\"</p>\n</blockquote>\n\n<p>This is <code>perl, v5.8.9</code></p>\n"}, {"tags": ["perl", "parallel-processing"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1526043465, "post_id": 50292129, "comment_id": 87601972, "body": "where is the code you wrote, which you are having the issues with? Please <a href=\"https://stackoverflow.com/posts/50292129/edit\">edit</a> your question and add your attempt."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526044856, "post_id": 50292129, "comment_id": 87602862, "body": "Everything depends on <i>how</i> you are starting these processes in parallel. We can&#39;t do a thing without seeing your code."}, {"owner": {"reputation": 268, "user_id": 4434071, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/852e4f60d9c89b857a4be55ceb103be5?s=128&d=identicon&r=PG&f=1", "display_name": "HeatTheIce", "link": "https://stackoverflow.com/users/4434071/heattheice"}, "edited": false, "score": 0, "creation_date": 1526045929, "post_id": 50292129, "comment_id": 87603530, "body": "I added the code now. If you find some mistakes, it&#39;s because I just stripped it down and didn&#39;t test it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526047638, "post_id": 50292129, "comment_id": 87604660, "body": "I suggest that you make use of <a href=\"http://search.cpan.org/~toddr/IPC-Run-0.99/lib/IPC/Run.pm\" rel=\"nofollow noreferrer\"><code>IPC::Run</code></a> instead of <code>IPC:;Open3</code>: it is much more comprehensive and provides a specific <code>results</code> method to retrieve the exit status."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526072485, "post_id": 50292129, "comment_id": 87617220, "body": "It looks like you don&#39;t read from the child&#39;s STDOUT and STDERR until after they exit, in which case the child could block until killed by timeout."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1526585491, "post_id": 50292129, "comment_id": 87814205, "body": "Can you use code from GNU Parallel which is written in Perl?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1526044971, "post_id": 50293149, "comment_id": 87602927, "body": "This simply lists ways of executing processes in parallel; it doesn&#39;t answer the question at all. The OP says that they have already achieved the parallelism and is asking how to <i>manage</i> the processes."}, {"owner": {"reputation": 713, "user_id": 1164030, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jTP9g.png?s=128&g=1", "display_name": "gogators", "link": "https://stackoverflow.com/users/1164030/gogators"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526045752, "post_id": 50293149, "comment_id": 87603419, "body": "I provided examples of several common approaches which allow for, getting the exit code and managing child processes within perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1526046779, "post_id": 50293149, "comment_id": 87604078, "body": "<i>&quot;approaches which allow for, getting the exit code and managing child processes within perl&quot;</i> Do they? You didn&#39;t say so in your post, and you you certainly didn&#39;t show <i>how</i>, which would have answered the question. You just dumped four ways you know to run stuff in parallel."}], "tags": [], "owner": {"reputation": 713, "user_id": 1164030, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jTP9g.png?s=128&g=1", "display_name": "gogators", "link": "https://stackoverflow.com/users/1164030/gogators"}, "is_accepted": false, "score": -1, "last_activity_date": 1526045502, "last_edit_date": 1526045502, "creation_date": 1526044407, "answer_id": 50293149, "question_id": 50292129, "link": "https://stackoverflow.com/questions/50292129/managing-parallel-processes/50293149#50293149", "title": "Managing parallel processes", "body": "<p>First, take a look at Perl's <code>fork()</code> function. This would be the typical way I do things like this. There's a good explanation with examples <a href=\"https://perlmaven.com/fork\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>An easy to use forking module is provided by <a href=\"http://search.cpan.org/~dlux/Parallel-ForkManager-0.7.5/ForkManager.pm\" rel=\"nofollow noreferrer\">Parallel::ForkManger</a>.</p>\n\n<p>There is also Perl's <a href=\"https://perldoc.perl.org/threads.html\" rel=\"nofollow noreferrer\">interpreter-base threads</a> which is a bit lower-level, harder to use, and spawns threads rather than forking processes.</p>\n\n<p>Another possible way is with <a href=\"https://www.gnu.org/software/parallel/\" rel=\"nofollow noreferrer\">GNU Parallel</a>. <code>parallel</code> is a very powerful tool to run commands in parallel. You can easily run and manage multiple commands and scripts with it. It has a <code>---joblog</code> option which might be helpful for you.</p>\n\n<p>All of these approaches provide ways to get the exit code of the sub-processes. In the end, the best choice depends on your current implementation which you did not provide.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 9637895, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GR9zbrwHgsY/AAAAAAAAAAI/AAAAAAAABnI/u8gPXdBXD2o/photo.jpg?sz=128", "display_name": "Jeff Fisher", "link": "https://stackoverflow.com/users/9637895/jeff-fisher"}, "is_accepted": false, "score": 0, "last_activity_date": 1526047053, "last_edit_date": 1526047053, "creation_date": 1526046070, "answer_id": 50293673, "question_id": 50292129, "link": "https://stackoverflow.com/questions/50292129/managing-parallel-processes/50293673#50293673", "title": "Managing parallel processes", "body": "<p>You can use wait and waitpid to get the status of individual children. The <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a> documentation gives a few examples in the section on \"Signals\".</p>\n\n<p>Since you're using IPC::Open3, the Synopsis also has an example of using waitpid():</p>\n\n<pre><code>    my($wtr, $rdr, $err);\n    use Symbol 'gensym'; $err = gensym;\n    $pid = open3($wtr, $rdr, $err,\n            'some cmd and args', 'optarg', ...);\n\n    waitpid( $pid, 0 );\n    my $child_exit_status = $? &gt;&gt; 8;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526072313, "post_id": 50296253, "comment_id": 87617160, "body": "Doesn&#39;t waiting to call <code>read_stdout</code> and <code>read_stderr</code> until after the child finishes means you can deadlock? I don&#39;t see any documentation that F::S empties the pipes in the background, so it&#39;s a definite possibility."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1526073275, "post_id": 50296253, "comment_id": 87617482, "body": "In general F::S communicates through temporary files to get around that problem."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1526064745, "last_edit_date": 1526064745, "creation_date": 1526054861, "answer_id": 50296253, "question_id": 50292129, "link": "https://stackoverflow.com/questions/50292129/managing-parallel-processes/50296253#50296253", "title": "Managing parallel processes", "body": "<p>You have already hit upon the insight of storing background job data in mini-objects. Take the next step and try a full-featured parallelization package like <a href=\"http://metacpan.org/pod/Forks::Super\" rel=\"nofollow noreferrer\"><code>Forks::Super</code></a>. You can create background process objects that you can then query for their <a href=\"https://metacpan.org/pod/Forks::Super::Job#is_%3Cstate%3E\" rel=\"nofollow noreferrer\">status</a> and <a href=\"https://metacpan.org/pod/Forks::Super::Job#status,-exit_status\" rel=\"nofollow noreferrer\">exit code</a>. <code>Forks::Super</code> supports <a href=\"https://metacpan.org/pod/Forks::Super#timeout\" rel=\"nofollow noreferrer\">process timeouts</a> and an <a href=\"https://metacpan.org/pod/Forks::Super#open3\" rel=\"nofollow noreferrer\"><code>open3</code>-like interface</a>. </p>\n\n<pre><code>use Forks::Super;\n$Forks::Super::MAX_PROC = 10;   # optional, block while 10 jobs already running\n\n...\n\nforeach my $cmd (@commands) {\n    my $job = fork {\n         cmd =&gt; $cmd,              # run $cmd in background process\n         child_fh =&gt; 'out,err',    # child STDOUT,STDERR available to parent\n         timeout =&gt; $timeLimit     # kill the job after $timeLimit seconds\n    };\n    push @processes, $job;\n}\n\nwhile (@processes) {\n    sleep 5;\n    foreach my $job (@processes) {\n        if ($job-&gt;is_complete) {\n            $job-&gt;wait;\n            my $exit_code = $job-&gt;status;\n            my $output = $job-&gt;read_stdout;\n            my $error = $job-&gt;read_stderr;\n            # ... log status, output, error, $job-&gt;{cmd}, etc. ...\n            $job-&gt;dispose;     # close filehandles and other clean up\n        }\n    }\n    @processes = grep { !$_-&gt;is_reaped } @processes;\n}\n</code></pre>\n"}], "owner": {"reputation": 268, "user_id": 4434071, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/852e4f60d9c89b857a4be55ceb103be5?s=128&d=identicon&r=PG&f=1", "display_name": "HeatTheIce", "link": "https://stackoverflow.com/users/4434071/heattheice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1526064745, "creation_date": 1526040789, "last_edit_date": 1526045865, "question_id": 50292129, "link": "https://stackoverflow.com/questions/50292129/managing-parallel-processes", "title": "Managing parallel processes", "body": "<p>I am starting multiple bash scripts from a Perl script and I want to monitor them and log their behavior.</p>\n\n<p>I know that I can tell whether a process is still running with <code>kill 0, $pid</code> and I can get the exit code from <code>$?</code>, but with launching multiple scripts in the background I can't relate values of <code>$?</code> to the processes that gave it as an exit code.</p>\n\n<p>How can I launch those scripts in parallel, but get the exit code from each them? I need something like <a href=\"http://php.net/manual/en/function.proc-get-status.php\" rel=\"nofollow noreferrer\"><code>proc_get_status</code></a> from PHP.</p>\n\n<p>Sorry for not providing the code from the beginning.\nI stripped down the code, so the important things are to see.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse IPC::Open3;\nuse IO::Handle;\n\nmy $timeLimit = 60*60; # some time limit not to be crossed\nmy $startTime = time();\n\nmy @commands  = (); # fill up with commands to be executed\nmy @processes = ();\n\nforeach my $cmd (@commands) {\n  my $stdout = IO::Handle-&gt;new;\n  my $stderr = IO::Handle-&gt;new;\n  my $pid = open3(undef, $stdout, $stderr, $cmd);\n  push @processes, {\"pid\" =&gt; $pid, \"out\" =&gt; $stdout, \"err\" =&gt; $stderr, \"cmd\" =&gt; $fullcmd};\n}\n\ndo {\n  if (time() - $startTime &gt; $timeLimit) {\n    kill 2, $_-&gt;{pid} foreach (@processes);\n    @processes = ();\n    last;\n  } else {\n    for (my $i = 0; $i &lt; @processes; $i++) {\n      unless (kill 0, $processes[$i]) {\n        # if it's not running, I would like to check the exit code and log it from here on.\n        # also remove it from the array, thats why I used for and not foreach, so I can use splice later.\n      }\n    }\n  }\n} while (@processes &gt; 0);\n</code></pre>\n"}, {"tags": ["javascript", "html", "perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526012163, "post_id": 50284749, "comment_id": 87585866, "body": "Try using using the <code>q(...)</code> function for quoting as in  <code>q|&lt;button&gt; onclick=&#39;return getPdf(| . $user . q|);&#39;&gt;PDF&lt;&#47;button&gt;|;</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526012232, "post_id": 50284749, "comment_id": 87585876, "body": "<a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Quote-Like-Operators</a>"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526019489, "post_id": 50284749, "comment_id": 87588159, "body": "Replaced: print &quot;&lt;button onclick=&#39;return getPdf(&quot;$user&quot;);&#39;&gt;PDF&lt;/button&gt;&quot;;   With: q|&lt;button onclick=&#39;return getPdf(| . $user . q|);&#39;&gt;PDF&lt;/button&gt;|;  The button doesnt even appear now"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526020035, "post_id": 50284749, "comment_id": 87588403, "body": "try ikegami&#39;s suggestion"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1526272493, "post_id": 50284749, "comment_id": 87661912, "body": "I found the solution!"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526019288, "post_id": 50285129, "comment_id": 87588048, "body": "Thank you for your reply. This looks quite complicated for just passing a Perl variable to a js function"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 1, "creation_date": 1526019499, "post_id": 50285129, "comment_id": 87588164, "body": "You&#39;re not asking to how to pass a value to a function; you&#39;re asking how to generate JS code, and you&#39;re along how to generate HTML."}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526021476, "post_id": 50285129, "comment_id": 87589098, "body": "How exactly do I implement these two implementations? Are they supposed to be functions? I am not too familiar with Perl, I apologise"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526021573, "post_id": 50285129, "comment_id": 87589149, "body": "Huh? As you say yourself,  I already provided implementations"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526022059, "post_id": 50285129, "comment_id": 87589416, "body": "So I am supposed to copy paste these two implementation sections into my perl page? I am receiving an error: Failed to load resource: the server responded with a status of 500 (Internal Server Error)"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526022240, "post_id": 50285129, "comment_id": 87589492, "body": "It is not loading the page at all. Page output: &quot;Please try again later&quot;. Chrome console output: Failed to load resource: the server responded with a status of 500 (Internal Server Error)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526022302, "post_id": 50285129, "comment_id": 87589518, "body": "Yeah, so what error did the script give? 500 just tells you the script didn&#39;t return a response. Gotta check the logs for error messages!"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526022886, "post_id": 50285129, "comment_id": 87589861, "body": "Not too sure where I can find that"}, {"owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526272551, "post_id": 50285129, "comment_id": 87661923, "body": "I got the solution. Not too sure whether I stated my question wrongly or you just gave me a very complex answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "edited": false, "score": 0, "creation_date": 1526272810, "post_id": 50285129, "comment_id": 87661984, "body": "@Andrie, Complex problems often require &quot;complex&quot; solutions.  Yours is buggy."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1526272916, "last_edit_date": 1526272916, "creation_date": 1526013816, "answer_id": 50285129, "question_id": 50284749, "link": "https://stackoverflow.com/questions/50284749/passing-perl-variable-to-javascript-function/50285129#50285129", "title": "Passing Perl variable to Javascript function", "body": "<p>You are asking how to convert text into a JavaScript literal, and how to embed that JavaScript literal into HTML. </p>\n\n<p>This can done quite simply with the following:</p>\n\n<pre><code>print '&lt;button onclick=\"return getPdf('.text_to_html(text_to_jslit($user)).');\"&gt;PDF&lt;/button&gt;';\n</code></pre>\n\n<p>Sample implementation of <code>text_to_html</code>:</p>\n\n<pre><code>{\n   my %translations = (\n      '&amp;' =&gt; '&amp;amp;',\n      '&lt;' =&gt; '&amp;lt;',\n      '&gt;' =&gt; '&amp;lt;',\n      '\"' =&gt; '&amp;quot;',\n      \"'\" =&gt; '&amp;apos;',\n   );\n\n    my $meta_chars_class = join '', map quotemeta, sort keys %translations;\n    my $meta_chars_re = qr/([$meta_chars_class])/;\n\n   sub text_to_html { $_[0] =~ s/$meta_chars_re/$translations{$1}/rg }\n}\n</code></pre>\n\n<p>Sample implementation of <code>text_to_jslit</code>:</p>\n\n<pre><code>{\n   my @js_line_terminators = ( 0x000A, 0x000D, 0x2028, 0x2029 );\n\n   my @control_chars = ( 0x00..0x1F, 0x7F..0x9F );  # Incomplete, but optional anyway.\n\n   my %translations = (\n      ( map { chr($_) =&gt; sprintf($_ &lt;= 0xFF ? \"\\\\x%02x\" : \"\\\\u%04x\", $_) }\n         @js_line_terminators,\n         @control_chars,\n         ord('&lt;'),          # To prevent &lt;/script&gt; from appearing literally.\n      ),\n\n      # More readable escapes.\n      \"\\x08\" =&gt; '\\\\b',\n      \"\\x09\" =&gt; '\\\\t',\n      \"\\x0A\" =&gt; '\\\\n',\n      \"\\x0B\" =&gt; '\\\\v',\n      \"\\x0C\" =&gt; '\\\\f',\n      \"\\x0D\" =&gt; '\\\\r',\n\n      '\"'  =&gt; '\\\\\"',\n      '\\\\' =&gt; '\\\\\\\\',\n    );\n\n    my $meta_chars_class = join '', map quotemeta, sort keys %translations;\n    my $meta_chars_re = qr/([$meta_chars_class])/;\n\n    sub text_to_jslit { '\"'.( $_[0] =~ s/$meta_chars_re/$translations{$1}/rg ).'\"' }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1526273005, "post_id": 50323143, "comment_id": 87662044, "body": "This codes suffers from both a JavaScript code injection bug and an HTML code injection bug!!! (See <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">code injection</a>.) For example, that fails if <code>$user</code> contains <code>&#39;</code>, <code>\\ </code>, <code>&amp;</code> or <code>&quot;</code>. <code>$user</code> probably doesn&#39;t contain those, but I&#39;m sure <code>$user</code> is not the only variable, so giving a solution that&#39;s specific to <code>$user</code> isn&#39;t useful."}], "tags": [], "owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "is_accepted": true, "score": -1, "last_activity_date": 1526272437, "creation_date": 1526272437, "answer_id": 50323143, "question_id": 50284749, "link": "https://stackoverflow.com/questions/50284749/passing-perl-variable-to-javascript-function/50323143#50323143", "title": "Passing Perl variable to Javascript function", "body": "<p><strong>This is the fix</strong> </p>\n\n<p>Surround the variable that needs to be passed into a function with the following:</p>\n\n<pre><code>\\''.$variable.'\\'\n</code></pre>\n\n<p>Complete code:</p>\n\n<pre><code>print '&lt;button onclick=\"return getPdf(\\''.$user.'\\');\"&gt;PDF&lt;/button&gt;';\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8690773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ce7265e929132642641c817f31b6f8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrie", "link": "https://stackoverflow.com/users/8690773/andrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 50323143, "answer_count": 2, "score": -1, "last_activity_date": 1526272916, "creation_date": 1526010871, "last_edit_date": 1526011236, "question_id": 50284749, "link": "https://stackoverflow.com/questions/50284749/passing-perl-variable-to-javascript-function", "title": "Passing Perl variable to Javascript function", "body": "<p><strong>Problem</strong>\nI am getting errors when passing a Perl variable to a Javascript function. Am I missing something?</p>\n\n<blockquote>\n<pre><code>print \"&lt;button onclick='return getPdf(\"$user\");'&gt;PDF&lt;/button&gt;\"; \n</code></pre>\n  \n  <p>Results in error: <strong>POST page.pl 500 (Internal Server Error)</strong></p>\n\n<pre><code>print \"&lt;button onclick='return getPdf(\".$user.\");'&gt;PDF&lt;/button&gt;\"; \n</code></pre>\n  \n  <p>Results in error: <strong>Uncaught ReferenceError: Tom is not defined\n      at HTMLButtonElement.onclick (page.pl:113)</strong></p>\n\n<pre><code>print \"&lt;button onclick='return getPdf('$user');'&gt;PDF&lt;/button&gt;\"; \n</code></pre>\n  \n  <p>Results in error: <strong>Uncaught SyntaxError: Unexpected end of input</strong></p>\n\n<pre><code>print \"&lt;button onclick='return getPdf('.$user.');'&gt;PDF&lt;/button&gt;\"; \n</code></pre>\n  \n  <p>Results in error: <strong>Uncaught SyntaxError: Unexpected end of input</strong></p>\n</blockquote>\n\n<p><strong>page.pl</strong></p>\n\n<pre><code>$user = \"Tom\";\nprint \"&lt;button onclick='return getPdf();'&gt;PDF&lt;/button&gt;\";\n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>function getPdf(user) {\n    alert(\"User is: \" + user);\n}\n</code></pre>\n"}, {"tags": ["perl", "variables", "strict"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1526006882, "creation_date": 1526006882, "answer_id": 50284280, "question_id": 50283733, "link": "https://stackoverflow.com/questions/50283733/accessing-and-modifying-a-nested-hash-based-on-a-dot-separated-string/50284280#50284280", "title": "Accessing and modifying a nested hash based on a dot separated string", "body": "<p>You are building string that consists of (buggy) Perl code, but you never ask Perl to execute it. ...but that's not the right approach.</p>\n\n<pre><code>sub dive_val :lvalue {\n   my $p = \\shift;\n   $p = \\($$p-&gt;{$_}) for @_;\n   $$p\n}\n\nmy @key = split /\\./, \"apple.mango.orange\";\ndive_val($inst, @key) = $value;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Data::Diver qw( DiveVal );\n\nmy @key = split /\\./, \"apple.mango.orange\";\nDiveVal($inst, map \\$_, @key) = $value;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1526007598, "creation_date": 1526007598, "answer_id": 50284358, "question_id": 50283733, "link": "https://stackoverflow.com/questions/50283733/accessing-and-modifying-a-nested-hash-based-on-a-dot-separated-string/50284358#50284358", "title": "Accessing and modifying a nested hash based on a dot separated string", "body": "<p>Not only is a symbolic reference a very bad idea here, it doesn't even solve your problem. You're building an <em>expression</em> in <code>$key2</code>, and just jamming another dollar sign in front of its name won't make perl execute that code. For that you would need <code>eval</code>, which is another bad idea</p>\n\n<p>You can install and use the <code>Data::Diver</code> module, which does exactly this sort of thing, or you can simply loop over the list of hash keys, picking up a new hash reference each time and assigning the value to the element with the last key</p>\n\n<p>The biggest issue is actually parsing the incoming string into a list of keys and a value. This code implements a subroutine <code>apply</code> which applies the implied operation in the string to a nested hash. Unless you are confident of your data, it needs some error checking addingto make sure each of the keys in the list exists. The <code>Data:;Dumper</code> output is just to demonstrate the validity of the result</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dumper;\n\nmy $inst = { 'banana' =&gt; 2, 'guava' =&gt; 3, 'apple' =&gt; { 'mango' =&gt; { 'orange' =&gt; 80 } } };\n\nmy $s = 'apple.mango.orange = 100';\n\napply($s, $inst);\n\nprint Dumper $inst;\n\nsub apply {\n    my ($operation, $data) = @_;\n    my ($keys, $val) = $operation =~ /([\\w.]+)\\s*=\\s*(\\d+)/;\n\n    my @keys = split /\\./, $keys;\n    my $last = pop @keys;\n\n    my $hash = $data;\n    $hash = $hash-&gt;{$_} for @keys;\n    $hash-&gt;{$last} = $val;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'banana' =&gt; 2,\n          'apple' =&gt; {\n                       'mango' =&gt; {\n                                    'orange' =&gt; '100'\n                                  }\n                     },\n          'guava' =&gt; 3\n        };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1434415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8cd52adec3a3ed7a31de37ae49d4d7b?s=128&d=identicon&r=PG", "display_name": "user1434415", "link": "https://stackoverflow.com/users/1434415/user1434415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526007598, "creation_date": 1526002344, "question_id": 50283733, "link": "https://stackoverflow.com/questions/50283733/accessing-and-modifying-a-nested-hash-based-on-a-dot-separated-string", "title": "Accessing and modifying a nested hash based on a dot separated string", "body": "<p>I have a string as input, say apple.mango.orange = 100</p>\n\n<p>I also have a hash reference: </p>\n\n<blockquote>\n  <p>$inst = {\n     'banana' => 2,\n     'guava'  => 3,\n     'apple' => {\n         'mango' => {\n             'orange' => 80\n         }\n      }\n  };</p>\n</blockquote>\n\n<p>I want to modify the value of orange using the input string. Can someone please help me how I could do this?</p>\n\n<p>I tried splitting the string into (key, value) pair. I then did the following on the key string: </p>\n\n<pre><code>my $key2 = \"\\$inst-&gt;{\".$key.\"}\";\n$key2 =~ s/\\./}-&gt;{/g;\n$$key2 = $value;\n</code></pre>\n\n<p>This does not work as intended. Can someone help me out here? I have read the Perl FAQ about not using a variable value as variable but I am unable to think of an alternative. </p>\n"}, {"tags": ["c++", "perl", "makefile", "kaldi", "perl4"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526109557, "post_id": 50283077, "comment_id": 87623975, "body": "Why did you specifically get version 0.03 of Perl4::CoreLibs? The latest release is 0.04 (see e.g. <a href=\"https://metacpan.org/pod/Perl4::CoreLibs\" rel=\"nofollow noreferrer\">metacpan.org/pod/Perl4::CoreLibs</a>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526109630, "post_id": 50283077, "comment_id": 87623988, "body": "What exactly is your question now?"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526312192, "post_id": 50283077, "comment_id": 87684406, "body": "Thanks @melpomene. I just happened to find version 0.03 first on my Google search. Thanks!"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526312265, "post_id": 50283077, "comment_id": 87684460, "body": "@melpomene. Thanks for asking about my current question. I will edit the question (and take some un-necessary stuff out.) <b>Now, I want to know if using this Perl4 code is safe, or if I should try and edit some of the source code.</b>"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528322646, "post_id": 50283077, "comment_id": 88468233, "body": "There is a way that I think is easier. Basically, you install the <code>tools</code> part of <a href=\"http://kaldi-asr.org/\" rel=\"nofollow noreferrer\">kaldi</a>. You can also install the <code>src</code> part and use it if you want (unless you&#39;re on Cygwin under Windows 7 as I am, in which case there are more problems.) If you just want the <code>sclite</code> stuff, copy <code>&#47;path&#47;to&#47;kaldi&#47;tools&#47;sctk-2.4.10&#47;*</code> to a place that&#39;s not inside the kaldi tree. I did <code>mkdir $HOME&#47;sctk-2.4.10 &amp;&amp; cp &#47;path&#47;to&#47;kaldi&#47;tools&#47;sctk-2.4.10&#47;* $HOME&#47;sctk2.4.10&#47;</code> . I&#39;ll probably elaborate later. Then you can <code>rm -rf &#47;path&#47;to&#47;kaldi</code> ."}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1528322733, "post_id": 50283077, "comment_id": 88468256, "body": "Note that the fixes described here and in the other solutions to which I&#39;ve linked (<a href=\"https://stackoverflow.com/q/50283077/6505499\">link1</a>, <a href=\"https://stackoverflow.com/q/50243691/6505499\">link2</a>) are also needed if one uses a more current version of <code>sclite</code> available at jaguar.ncsl.nist.gov/pub/sctk-2.4.10-20151007-1312Z.tar.bz2"}, {"owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1531761689, "post_id": 50283077, "comment_id": 89706421, "body": "That more-current-version link might change, so here&#39;s the hosting site: <a href=\"https://www.nist.gov/itl/iad/mig/tools\" rel=\"nofollow noreferrer\">https://www.nist.gov/itl/iad/mig/tools</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "is_accepted": true, "score": 2, "last_activity_date": 1531761901, "last_edit_date": 1531761901, "creation_date": 1527097999, "answer_id": 50494597, "question_id": 50283077, "link": "https://stackoverflow.com/questions/50283077/sclite-sctk-make-check-faliure-c-perl-cygwin-safe-to-use-perl4-stuff/50494597#50494597", "title": "sclite (SCTK) `make check` faliure, C++/perl/Cygwin, Safe to use Perl4 stuff?", "body": "<h3>A Better Way</h3>\n\n<p>(Actually, a couple of better ways. See my comment under the question for the <code>kaldi</code> solution.)</p>\n\n<p>In talking with colleagues and friends, it seems that there isn't anything unsafe about the Perl4 stuff. I did find a better way to get them \"installed\", but I'll leave the notes in the question showing the \"long way\" with the tarball, <code>PERLPATH</code>, etc.</p>\n\n<p>Check that you have <code>CPAN</code></p>\n\n<pre><code>$ which cpan\n</code></pre>\n\n<p>If you see something starting with <code>which: no cpan in (...)</code>, you most likely don't have it. Try installing <code>perl</code>. For me, on Cygwin, I used</p>\n\n<pre><code>$ apt-cyg install perl\n</code></pre>\n\n<p>(Install <code>apt-cyg</code> if necessary, cf. <a href=\"https://stackoverflow.com/a/16869816/6505499\">here</a> for instructions.)</p>\n\n<p>You probably won't have to install Perl. You will likely see something like <code>/usr/bin/cpan</code> as the output of <code>which cpan</code>. If so, you're good. Enter <code>cpan</code> at the command prompt.</p>\n\n<pre><code>$ cpan\n</code></pre>\n\n<p>If it's your first time, it will ask a bunch of questions about the configuration. I just pressed \"Enter\" to accept the default each time, I finally got a prompt like this:</p>\n\n<pre><code>cpan shell -- CPAN exploration and modules installation (v2.18)\nEnter 'h' for help.\n\ncpan[1]&gt; \n</code></pre>\n\n<p>There, I entered</p>\n\n<pre><code>cpan[1]&gt; install Perl4::CoreLibs\n</code></pre>\n\n<p>The install will proceed. When it will have finished, you will be able to type <code>exit</code> and press \"Enter\", which will take you back to the <code>bash</code> command prompt.</p>\n\n<pre><code>cpan[2]&gt; exit\nLockfile removed.\n\n$\n</code></pre>\n\n<p>At this point, <code>make check</code> will still choke, but the install will complete successfully. If you want the <code>make check</code> to get all the way through, go to the \"<em>Getting past <code>make check</code></em>\" section below. At this point, though, you can do the last two steps in the process.</p>\n\n<pre><code>$ make install\n</code></pre>\n\n<p>At this point I added the install path to my <code>PATH</code> variable. Hopefully, I'll be able to put in a link about that process. <a href=\"https://stackoverflow.com/q/14637979/6505499\">Here</a> is a one-time solution.</p>\n\n<pre><code>$ export PATH=/path/to/sctk/bin:$PATH\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/14638025/6505499\">Here</a> is a lasting solution.</p>\n\n<p>Now, for the last step in the installation process:</p>\n\n<pre><code>$ make doc\n</code></pre>\n\n<p>After the <code>make doc</code>, I made sure that the <code>man</code> pages were available. I looked on my machine until I found the place where other <code>man</code> files went. (Sorry, I don't have a systematic way of doing it, I just looked in a lot of places.) For me, on Cygwin, the directory was <code>/usr/man/man1</code></p>\n\n<p>I went into the <code>doc</code> directory</p>\n\n<pre><code>cd doc\n</code></pre>\n\n<p>and copied all of the files into the directory I had found</p>\n\n<pre><code>cp -r ./* /usr/man/man1/\n</code></pre>\n\n<p>Note that there are also now <code>html</code> and <code>htm</code> files in the directory that also provide documentation.</p>\n\n<hr/>\n\n<h3>Getting past `make check`</h3>\n\n<p>So, you really want to see it go through without errors. You need to change the following file: <code>src/hubscr/RunTests.pl</code></p>\n\n<p>Originally it has the following beginning, which I have used the <code>head</code> command to show.</p>\n\n<pre><code>$ head -n 15 src/hubscr/RunTests.pl\n#!/usr/bin/perl -w\nuse strict;\nmy $operation = (defined($ARGV[0]) ? $ARGV[0] : \"test\");\nsub runIt{\nmy ($op, $testId, $options, $glm, $hub, $lang, $ref, $systems) = @_;\nmy $baseDir = $testId.\".base\";\nmy $outDir = $testId.($op eq \"setTests\" ? \".base\" : \".test\");\nprint \" Running test '$testId', operation '$op', options '$options', \ndirectory '$outDir'\\n\";\nsystem (\"mkdir -p $outDir\");\nsystem (\"rm -fr $outDir/test* $outDir/lvc*\");\n### Copy files\nforeach my $file($glm, $ref, split(/\\s+/,$systems)){\n    system(\"cp $file $outDir\");\n</code></pre>\n\n<p>Change it so that, after the <code>print</code> command, you have new lines as follows. I again use the <code>head</code> command to show the beginning of the file</p>\n\n<pre><code>$ head -n 63 src/hubscr/RunTests.pl\n#!/usr/bin/perl -w\n\nuse strict;\nmy $operation = (defined($ARGV[0]) ? $ARGV[0] : \"test\");\n\nsub runIt{\n    my ($op, $testId, $options, $glm, $hub, $lang, $ref, $systems) = @_;\n    my $baseDir = $testId.\".base\";\n    my $outDir = $testId.($op eq \"setTests\" ? \".base\" : \".test\");\n\n    print \"   Running test '$testId', operation '$op', options '$options', directory '$outDir'\\n\";\n\n    ####DWB, 2018-05-21 Getting `make check` to work####\n    if ( $testId eq \"test1-sastt\" &amp;&amp;\n         $operation eq \"test\" &amp;&amp;\n         $options eq \"-G -f rttm -F rttm -a\" &amp;&amp;\n         $outDir eq \"test1-sastt.test\" ) # &lt;problem 1&gt;\n    {\n        print \"\\n\";\n        print \"\\n#### SKIPPING ####\";\n        print \"\\nJust kidding. That breaks the make.\";\n        print \"\\nIt said: \\n\\n\";\n        print \"\\nUnescaped left brace in regex is illegal here in regex; marked by &lt;-- HERE in m/{_recursive_/_recur_{ &lt;-- HERE _sive_/_si_ve_}_}/ at ../../md-eval/md-eval.pl line 1099, &lt;DATA&gt; line 12.\";\n        print \"\\nrror: MDEVAL failed\";\n        print \"\\nCommand: md-eval.pl -nafcs -c 0.25 -o  -r sastt-case1.ref.rttm.filt -s sastt-case1.sys.rttm.filt -M sastt-case1.sys.rttm.filt.mdeval.spkrmap 1&gt; sastt-case1.sys.rttm.filt.mdeval at ../hubscr.pl line 679.\";\n        print \"\\nError: Execution failed at ./RunTests.pl line 30.\\n\\n\";\n        print \"\\n\"\n        print \"\\nThat's a perl legacy problem, see:\"\n        print \"\\n[https://unix.stackexchange.com/a/375505/291375][1]\"\n        print \"\\nI'm outta here.\";\n        print \"\\n   Sincerely, bballdave025\";\n        print \"\\n\";\n        print \"\\n\";\n\n        return;\n\n    }#endof:  if (&lt;problem 1&gt;)\n\n    if ( $testId eq \"test2-sastt\" &amp;&amp;\n         $operation eq \"test\" &amp;&amp;\n         $options eq \"-G -f rttm -F rttm -a\" &amp;&amp;\n         $outDir eq \"test2-sastt.test\" ) # &lt;problem 2&gt;\n    {\n        print \"\\n\";\n        print \"\\n#### SKIPPING ####\";\n        print \"\\nJust kidding. That breaks the make.\";\n        print \"\\nIt said: \\n\\n\";\n        print \"\\nError: Test test2-sastt has failed.  Diff output is :\";\n        print \"\\ndiff -i -x CVS -x .DS_Store -x log -x '*lur' -I '[cC]reation[ _]date' -I md-eval -r test2-sastt.test/sastt-case2.sys.rttm.filt.alignments/segmentgroup-116.html test2-sastt.base/sastt-case2.sys.rttm.filt.alignments/segmentgroup-116.html\";\n        print \"\\n 45c45\";\n        print \"\\n &lt; jg.drawStringRect(\\\"SUB48\\\",0, 47, scale*656, \\\"left\\\");\";\n        print \"\\n ---\";\n        print \"\\n####  and a whole bunch of other draw stuff! ####\";\n        print \"\\n1 at ./RunTests.pl line 61.\\n\\n\";\n        print \"\\n\"\n        print \"\\nThat looks like Java drawing code, and I don't\"\n        print \"\\neven want to mess with it!\"\n        print \"\\nI'm outta here.\";\n        print \"\\n   Sincerely, bballdave025\";\n        print \"\\n\";\n        print \"\\n\";\n\n        return;\n\n    }#endof:  if (&lt;problem 2&gt;)\n\n    system (\"mkdir -p $outDir\")\n</code></pre>\n\n<p>Now you should be able to get through. Try it:</p>\n\n<pre><code>make check\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 6505499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9632fb64ecb7a04e5f65d92a4063288?s=128&d=identicon&r=PG&f=1", "display_name": "bballdave025", "link": "https://stackoverflow.com/users/6505499/bballdave025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 1, "accepted_answer_id": 50494597, "answer_count": 1, "score": 1, "last_activity_date": 1531761901, "creation_date": 1525996697, "last_edit_date": 1531761615, "question_id": 50283077, "link": "https://stackoverflow.com/questions/50283077/sclite-sctk-make-check-faliure-c-perl-cygwin-safe-to-use-perl4-stuff", "title": "sclite (SCTK) `make check` faliure, C++/perl/Cygwin, Safe to use Perl4 stuff?", "body": "<p>I am currently trying to install NIST's <code>sclite</code>, which is part of SCTK 2.4.0 (<a href=\"https://github.com/chinshr/sctk\" rel=\"nofollow noreferrer\">github</a> or <a href=\"https://www.nist.gov/itl/iad/mig/tools\" rel=\"nofollow noreferrer\">newer version</a>). I am attempting the install on <code>Cygwin</code> in <code>bash</code>. The installation is done using <code>make</code>.</p>\n\n<p>I have gotten past the <code>make configure</code> and <code>make all</code> parts of the installation. This didn't come without some effort (See the SO posts on the <a href=\"https://stackoverflow.com/q/50278663/6505499\">first</a> (<code>file not recognized</code>) and <a href=\"https://stackoverflow.com/q/50243691/6505499\">second</a> (template/scoping) problems). When I get to the <code>make check</code> part of the install, a lot of the checks/tests pass, but then I get the following error.</p>\n\n<pre><code>Testing acomp.pl\n   No tests defined for acomp.pl\nmake[2]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/acomp'\n(cd def_art; make check)\nmake[2]: Entering directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/def_art'\nTesting def_art.pl\n   def_art.pl passed without tests\nmake[2]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/def_art'\n(cd hubscr; make check)\nmake[2]: Entering directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/hubscr'\nTesting hubscr.pl\n./RunTests.pl\n   Running test 'test1-sastt', operation 'test', options '-G -f rttm -F rttm -a', directory 'test1-sastt.test'\n      Executing command\nError: unable to get the version for program def_art.pl with the command 'def_art.pl' at ../hubscr.pl line 419.\nError: Execution failed at ./RunTests.pl line 30.\nmake[2]: *** [makefile:20: check] Error 2\nmake[2]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/hubscr'\nmake[1]: *** [makefile:68: checkFast] Error 2\nmake[1]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src'\nmake: *** [makefile:52: check] Error 2\n</code></pre>\n\n<p>I've done some research (described below), and I've been able to get past this problem. However, this involved including some outdated <code>perl</code> modules (Perl4).</p>\n\n<p>My first question was how to fix this error or how to skip that part of the test. I've been able to fix the error, and if people think that it's safe, I'll put it as an answer. Note that there is one more problem with <code>make check</code> after this problem is fixed, but I mention how to get past that at the end.</p>\n\n<p><strong>I'm wondering if using the old Perl (<code>Perl4::CoreLibs</code>) is safe and/or good programming practice. Would it be better to change the source code to use Perl5 stuff?</strong></p>\n\n<p><strong>Is there a better way altogether?</strong></p>\n\n<p><s>One thing I want to be sure of is that there are no critical tests further down the <code>make check</code> line which might fail.</s></p>\n\n<hr/>\n\n<h3>System Details</h3>\n\n<pre><code>$ uname -a\nCYGWIN_NT-6.1 CAP-D-ENG-INT3 2.10.0(0.325/5/3) 2018-02-02 15:16 x86_64 Cygwin\n$ bash --version\nGNU bash, version 4.4.12(3)-release (x86_64-unknown-cygwin) ...\n$ gcc --version\ngcc (GCC) 6.4.0 ...\n$ g++ --version\ng++ (GCC) 6.4.0 ...\n$ make --version\nGNU Make 4.2.1\nBuilt for x86_64-unknown-cygwin ...\n$ systeminfo | sed -n 's/^OS\\ *//p'\nName:                   Microsoft Windows 7 Enterprise\nVersion:                6.1.7601 Service Pack 1 Build 7601\nManufacturer:           Microsoft Corporation\nConfiguration:          Member Workstation\nBuild Type:             Multiprocessor Free\n</code></pre>\n\n<hr/>\n\n<h3>My Attempts/Research</h3>\n\n<p>From the output above, we have <code>def_art.pl</code> passing the check because there are no checks - \"<code>def_art.pl passed without tests</code>\". However, the next thing checked, <code>hubscr.pl</code>, failed. The error comes from <code>def_art.pl</code>.</p>\n\n<p>The obvious thing to do seemed to be to run <code>def_art.pl</code>, which I did.</p>\n\n<pre><code>$ ./src/def_art/def_art.pl\nCan't locate getopts.pl in @INC \n(@INC contains: /usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads /usr/local/share/perl5/site_perl/5.26 /usr/lib/perl5/vendor_perl/5.26/x86_64-cygwin-threads /usr/share/perl5/vendor_perl/5.26 /usr/lib/perl5/5.26/x86_64-cygwin-threads /usr/share/perl5/5.26) \nat ./src/def_art/def_art.pl line 40.\n</code></pre>\n\n<p>So it seems to me that this is a deprecated <code>perl</code> file (or module, or whatever).</p>\n\n<p>I dug a little further and found <a href=\"https://sourceforge.net/p/kaldi/discussion/1355348/thread/f8794e3e/?limit=25\" rel=\"nofollow noreferrer\">this discussion</a> on a <code>kaldi</code> discussion from 2014. (<code>kaldi</code> is a speech-recognition toolkit that uses the SCTK scoring system). There are 3 sections of the discussion that I think are especially relevant, which I will link (<a href=\"https://sourceforge.net/p/kaldi/discussion/1355348/thread/f8794e3e/#d9d0\" rel=\"nofollow noreferrer\">first</a>, <a href=\"https://sourceforge.net/p/kaldi/discussion/1355348/thread/f8794e3e/#d9d0/61d0/1f50\" rel=\"nofollow noreferrer\">second</a>, <a href=\"https://sourceforge.net/p/kaldi/discussion/1355348/thread/f8794e3e/#d9d0/61d0/1f50/5c4b\" rel=\"nofollow noreferrer\">third</a>). I'll insert parts here:</p>\n\n<blockquote>\n  <p><code>def_art.pl</code> is looking for <code>getopts.pl</code> which I coudn't find on my machine!</p>\n  \n  <p>... [T]hese are legacy packages that are no longer supported in recent versions\n  of Perl 5. I don't think we should accept a dependency on them. They have\n  been deprecated since the beginning of Perl 5.\n  Instead of 'require \"getopt.pl\"', we should be doing\n  <code>use Getopt::Std</code>\n  (note: modern <code>perl</code> code should not call \"<code>require</code>\" for system packages).\n  There is a similar issue with \"<code>flush.pl</code>\" in the Perl scripts. I don't know\n  what the Perl 5 package name is.\n  ... There are several places where this occurs.</p>\n</blockquote>\n\n<p>I finally found that both <code>getopts.pl</code> and <code>flush.pl</code> are available from <a href=\"http://search.cpan.org/~zefram/Perl4-CoreLibs-0.003/lib/Perl4/CoreLibs.pm\" rel=\"nofollow noreferrer\"><code>Perl4::CoreLibs</code></a>. The URL that I use for <code>wget</code> was referenced at this site. Apparently, in other <code>*NIX</code> distros, the package manager can be used, e.g.</p>\n\n<pre><code>apt-get install libperl4-corelibs-perl\n</code></pre>\n\n<p>or</p>\n\n<pre><code>yum install perl-Perl4-CoreLibs\n</code></pre>\n\n<p>but I could not find an install via <code>apt-cyg</code>. I was able to install them from a tarball, as described in the <em>What I'm Doing</em> section.</p>\n\n<p>One again, I'll state my main question: <strong>Is this safe/good programming practice? Is there a better solution?</strong></p>\n\n<p>If there is a better solution (using Perl 5), it seems that <a href=\"https://metacpan.org/pod/Perl4::CoreLibs\" rel=\"nofollow noreferrer\">this link</a> might lead the way to it.</p>\n\n<hr/>\n\n<p>Some other links that are possibly related: <a href=\"https://pkgs.org/download/perl(flush.pl)\" rel=\"nofollow noreferrer\">link_{n}</a> and <a href=\"https://stackoverflow.com/q/4538767/6505499\">link{n+1}</a> about <code>flush.pl</code>, <a href=\"https://unix.stackexchange.com/q/224716\">link_{n+2}</a> &amp; <a href=\"https://stackoverflow.com/q/47990911/6505499\">link_{n+3}</a> about <code>getopts.pl</code> and <code>Perl4::CoreLibs</code>.</p>\n\n<hr/>\n\n<h3>What I'm Doing</h3>\n\n<pre><code>$ mkdir perl_added\n\n$ cd perl_added\n\n$ wget http://search.cpan.org/CPAN/authors/id/Z/ZE/ZEFRAM/Perl4-CoreLibs-0.004.tar.gz\n\n$ tar -xzf Perl4-CoreLibs-0.004.tar.gz  \n\n$ cd Perl4-CoreLibs-0.004\n</code></pre>\n\n<p>Rather than adding this directory's <code>lib</code> subdirectory to the <code>PERLLIB</code> environment variable with a one-time command-line, environment-variable-addition thing, I did the following.</p>\n\n<p>Make a new directory in the <code>/usr/lib</code> directory, move the files there</p>\n\n<pre><code>$ stat /usr/lib/libperl4-corelibs-perl\nstat: cannot stat '/usr/lib/libperl4-corelibs-perl': No such file or directory\n# Checked that the directory didn't already exist. It didn't exist.\n\n$ mkdir /usr/lib/libperl4-corelibs-perl\n\n# Make each file executable, then move it into the new directory\n# I'd like to come back and explain this.\n$ find ./lib -type f -name \"*.pl\" -print0 | xargs -I'{}' -0 \\\nbash -c 'new_dir=/usr/lib/libperl4-corelibs-perl/; chmod +x {}; \\\nmv {} ${new_dir}'\n</code></pre>\n\n<p>Finally, I made it so that this directory will become part of the <code>perl</code> search path every time I use a terminal by adding the following line to my <code>~/.bashrc</code>\nThis command adds the path to the <code>PERLLIB</code> environment variable. Different flavors of Linux have different syntax for adding to environment variables, <strong>make sure to find out what yours is!</strong></p>\n\n<pre><code>export PERLLIB=\"/usr/bin/libperl4-corelibs-perl:$PERLLIB\"\n</code></pre>\n\n<p>The commands I ran for this were</p>\n\n<pre><code>$ echo -e \"\\n\\n## Allow Perl to use the files in Perl4::CoreLibs\" &gt;&gt; $HOME/.bashrc\n\n$ echo -e \"export PERLLIB=\\\"/usr/lib/libperl4_corelibs_perl:$PERLLIB\\\"\" &gt;&gt; $HOME/.bashrc\n\n$ source $HOME/.bashrc\n</code></pre>\n\n<p>(Thanks to @melpomene for noting that the current version is 0.004, not 0.003.)</p>\n\n<p>After that, I went back to the base folder of the install and ran <code>make clean</code>, <code>make config</code>, <code>make all</code>, and <code>make check</code>.</p>\n\n<p>That did get me farther in the <code>make check</code> but not by far.</p>\n\n<p><strong>I'm wondering if using the old Perl (Perl4::CoreLibs) is safe and/or good programming practice. Would it be better to change the source code to use Perl5 stuff?</strong></p>\n\n<p>P.S. After all this, you probably want to go back and delete the folder where you untarred everything. In my case:</p>\n\n<pre><code>rm -rf /path/to/where/I/started/perl_added\n</code></pre>\n\n<hr/>\n\n<h3>The Result/Next Steps</h3>\n\n<p>A bunch of tests that passed and then</p>\n\n<pre><code>(cd hubscr; make check)\nmake[2]: Entering directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/hubscr'\nTesting hubscr.pl\n./RunTests.pl\n   Running test 'test1-sastt', operation 'test', options '-G -f rttm -F rttm -a', directory 'test1-sastt.test'\n      Executing command\nUnescaped left brace in regex is illegal here in regex; marked by &lt;-- HERE in m/{_recursive_/_recur_{ &lt;-- HERE _sive_/_si_ve_}_}/ at ../../md-eval/md-eval.pl line 1099, &lt;DATA&gt; line 12.\nError: MDEVAL failed\n      Command: md-eval.pl -nafcs -c 0.25 -o  -r sastt-case1.ref.rttm.filt -s sastt-case1.sys.rttm.filt -M sastt-case1.sys.rttm.filt.mdeval.spkrmap 1&gt; sastt-case1.sys.rttm.filt.mdeval at ../hubscr.pl line 679.\nError: Execution failed at ./RunTests.pl line 30.\nmake[2]: *** [makefile:20: check] Error 255\nmake[2]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src/hubscr'\nmake[1]: *** [makefile:68: checkFast] Error 2\nmake[1]: Leaving directory '/cygdrive/c/David/programs/sctk2.4.0/sctk/src'\nmake: *** [makefile:52: check] Error 2\n</code></pre>\n\n<p>Maybe <a href=\"https://unix.stackexchange.com/questions/238539/automake-error-unescaped-left-brace-in-regex-is-deprecated\">this</a> will be helpful. I will post a <a href=\"https://stackoverflow.com/posts/50283077\">separate question</a> for this issue or, if the solution is quick, I will add the solution on this post.</p>\n"}, {"tags": ["perl", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1526027011, "post_id": 50282996, "comment_id": 87592145, "body": "Thanks for the edit @Borodin. I wrote this at night from my phone."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1526027149, "post_id": 50282996, "comment_id": 87592233, "body": "@vanHoesel your edit was actually not bad. I&#39;ll take up some of it. Thanks."}, {"owner": {"reputation": 83, "user_id": 9627884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WMpGL.jpg?s=128&g=1", "display_name": "Yvonne", "link": "https://stackoverflow.com/users/9627884/yvonne"}, "edited": false, "score": 0, "creation_date": 1526096144, "post_id": 50282996, "comment_id": 87621646, "body": "Great, thanks! I didn&#39;t realise the hyphen was supposed to be in there as well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 83, "user_id": 9627884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WMpGL.jpg?s=128&g=1", "display_name": "Yvonne", "link": "https://stackoverflow.com/users/9627884/yvonne"}, "edited": false, "score": 0, "creation_date": 1526110765, "post_id": 50282996, "comment_id": 87624250, "body": "@Yvonne that&#39;s a valuable lesson learned here. In programming every character matters. There is no approximation. Things are either correct or they are not. Most of the time it&#39;s a semicolon that is missing, but this kind of thing here is easy harder to track down, especially when your language is as forgiving as Perl is. :-)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 8, "last_activity_date": 1526027197, "last_edit_date": 1526027197, "creation_date": 1525995968, "answer_id": 50282996, "question_id": 50282685, "link": "https://stackoverflow.com/questions/50282685/how-to-pass-optional-parameters-in-perl-for-a-beginner/50282996#50282996", "title": "How to pass optional parameters in Perl? (For a beginner)", "body": "<blockquote>\n<pre><code>my ($self, $text, $width, $height, %opts) = @_;\n</code></pre>\n</blockquote>\n\n<p>The <code>%opts</code> gives it away. You need to pass a list of key and value pairs. It's not a reference though, just additional values that are optional.</p>\n\n<p>The <code>$self</code> gets inserted by Perl for you. Then you've got the three mandatory parameters that you already pass. After that, it's options.</p>\n\n<pre><code>$obj-&gt;section( $text, $width, $height, -indent =&gt; 1 );\n</code></pre>\n\n<p>The way those options are assigned to <code>%opts</code> will slurp all the remaining arguments after the height into that hash and will be passed through to <code>$self-&gt;paragraph</code> later on. </p>\n\n<p>Just make sure it's always pairs of values. </p>\n"}], "owner": {"reputation": 83, "user_id": 9627884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WMpGL.jpg?s=128&g=1", "display_name": "Yvonne", "link": "https://stackoverflow.com/users/9627884/yvonne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 1, "accepted_answer_id": 50282996, "answer_count": 1, "score": 6, "last_activity_date": 1526053201, "creation_date": 1525993264, "last_edit_date": 1526053201, "question_id": 50282685, "link": "https://stackoverflow.com/questions/50282685/how-to-pass-optional-parameters-in-perl-for-a-beginner", "title": "How to pass optional parameters in Perl? (For a beginner)", "body": "<p>I've read <a href=\"http://www.perl101.org/subroutines.html\" rel=\"nofollow noreferrer\">http://www.perl101.org/subroutines.html</a> but I just don't understand optional parameters.</p>\n\n<p>I want to call the <a href=\"https://metacpan.org/source/SSIMMS/PDF-API2-2.033/lib/PDF/API2/Content.pm#L2020\" rel=\"nofollow noreferrer\">following sub</a> in <a href=\"https://metacpan.org/pod/PDF::API2\" rel=\"nofollow noreferrer\">PDF::API2</a>. The doc says \"-indent\" is an option. How exactly do I pass a parameter for indent of 20?</p>\n\n<p>This is what I'm passing at the moment:</p>\n\n<pre><code>$txt-&gt;section($str, $contentwidth,$heightmax);\n</code></pre>\n\n<p>This is the sub</p>\n\n<blockquote>\n<pre><code>sub section {\n    my ($self,$text,$width,$height,%opts)=@_;\n    my $overflow = '';\n\n    foreach my $para (split(/\\n/,$text)) {\n        if(length($overflow) &gt; 0) {\n            $overflow .= \"\\n\" . $para;\n            next;\n        }\n        ($para,$height) = $self-&gt;paragraph($para,$width,$height,%opts);\n        $overflow .= $para if (length($para) &gt; 0);\n    }\n    if (wantarray) {\n        return ($overflow,$height);\n    }\n    return $overflow;\n}\n</code></pre>\n</blockquote>\n"}, {"tags": ["perl", "sorting", "machine-learning"], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 8, "last_activity_date": 1525979655, "creation_date": 1525979655, "answer_id": 50280003, "question_id": 50279420, "link": "https://stackoverflow.com/questions/50279420/learn-the-order-of-elements/50280003#50280003", "title": "Learn the order of elements", "body": "<p>The question you linked to <a href=\"https://stackoverflow.com/a/48041937/9300627\">includes another answer</a> using a graph and topological sort. The <a href=\"https://metacpan.org/pod/distribution/Graph/lib/Graph.pod\" rel=\"noreferrer\"><code>Graph</code></a> module is pretty easy to use:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Graph;\n\nmy $graph = Graph-&gt;new(directed =&gt; 1);\nmy $prev;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    $graph-&gt;add_edge($prev, $_) if length &amp;&amp; length $prev;\n    $prev = $_;\n}\nprint $_,\"\\n\" for $graph-&gt;topological_sort;\n\n__DATA__\nfirst\nsecond\nthird\nsixth\nseventh\ntenth\n\nfirst\nthird\nfourth\nfifth\nsixth\n\nthird\nfifth\nseventh\neighth\nninth\ntenth\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>first\nsecond\nthird\nfourth\nfifth\nsixth\nseventh\neighth\nninth\ntenth\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1525986244, "last_edit_date": 1525986244, "creation_date": 1525981832, "answer_id": 50280524, "question_id": 50279420, "link": "https://stackoverflow.com/questions/50279420/learn-the-order-of-elements/50280524#50280524", "title": "Learn the order of elements", "body": "<p>I tried to implement a naive solution myself. I built the <code>%order</code> hash where the values of each key were the elements that followed it. I then created a transitive closure of this structure (i.e. if <code>first</code> was before <code>second</code> and <code>second</code> was before <code>third</code>, then <code>first</code> must be before <code>third</code>). If there was enough information, each key would have a different number of values, and sorting the elements by the number of the values would give the ordered list.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy @partial = (\n    [qw[ first second third sixth seventh tenth ]],\n    [qw[ first third fourth fifth sixth ]],\n    [qw[ third fifth seventh eighth ninth tenth ]]);\n\nmy %order;\nmy %all;\nfor my $list (@partial) {\n    undef @all{ @$list };\n    undef $order{ $list-&gt;[ $_ - 1 ] }{ $list-&gt;[$_] }\n        for 1 .. $#$list;\n}\n\nmy $changed = 1;\nwhile ($changed) {\n    undef $changed;\n    for my $from (keys %order) {\n        if (my @to = keys %{ $order{$from} }) {\n            if (my @to2 = map keys %{ $order{$_} }, @to) {\n                my $before = keys %{ $order{$from} };\n                undef @{ $order{$from} }{@to2};\n                $changed = 1 if $before != keys %{ $order{$from} };\n            }\n        }\n    }\n}\n\nmy %key_counts;\n$key_counts{ keys %{ $order{$_} } }++ for keys %order;\nwarn \"Not enough information\\n\"\n    if keys %key_counts != keys %order;\n\nsay join ' ',\n    sort { keys %{ $order{$b} } &lt;=&gt; keys %{ $order{$a} } }\n    keys %order;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>first second third fourth fifth sixth seventh eighth ninth tenth\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1541617026, "last_edit_date": 1541617026, "creation_date": 1526017238, "answer_id": 50285684, "question_id": 50279420, "link": "https://stackoverflow.com/questions/50279420/learn-the-order-of-elements/50285684#50285684", "title": "Learn the order of elements", "body": "<p>This is a direct and simple-minded manual solution. </p>\n\n<p>It collects all elements in given sub-sequences and <code>sort</code>s them.  The sorting criterion is the position (index) of compared elements in the first sub-sequence that has both. If none of the sub-sequences have both elements an undecided (zero) is returned from the sort's block.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';    \nuse List::MoreUtils qw(uniq firstval);\n\nmy @all = qw(ant bug frog cat dog elk);  # to draw input (sublists) from\n\nmy @s1 = @all[0,1,3,5];\nmy @s2 = @all[1,2,4,5];\nmy @s3 = @all[2,3,4];\n\nmy @inv = (                              # for index comparison\n    { map { $s1[$_] =&gt; $_ } 0..$#s1 },  \n    { map { $s2[$_] =&gt; $_ } 0..$#s2 },  \n    { map { $s3[$_] =&gt; $_ } 0..$#s3 } \n);\n\nmy @sorted = sort { \n    my $fv = firstval { exists $_-&gt;{$a} and exists $_-&gt;{$b} } @inv;\n    ($fv) ? $fv-&gt;{$a} &lt;=&gt; $fv-&gt;{$b} : 0;\n} uniq @s1, @s2, @s3;\n\nsay \"@sorted\";\n</code></pre>\n\n<p>The complexity of this isn't as good as it can be since some of the comparisons can (in principle) be avoided but that doesn't show for smaller problems.  It prints the correct sequence, and for the posted problem as well (replace <code>@sN</code> arrays with the ones provided in the question).</p>\n\n<p>This code assumes consistent and complete enough subsequences.</p>\n\n<hr>\n\n<p>For an arbitrary number of subsets of the full list (3 above) the ancillary <code>@inv</code> is built as</p>\n\n<pre><code>my @subseqs = (\\@s1, \\@s2, \\@s3);\n\nmy @inv;\n\nfor my $rr (@subseqs) {\n    push @inv, { map { $rr-&gt;[$_] =&gt; $_ } 0..$#$rr }\n}\n</code></pre>\n"}], "owner": {"reputation": 703, "user_id": 224625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53ac2540cb47d2f8266b078938d2d39?s=128&d=identicon&r=PG", "display_name": "JohnGH", "link": "https://stackoverflow.com/users/224625/johngh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1541617026, "creation_date": 1525977295, "question_id": 50279420, "link": "https://stackoverflow.com/questions/50279420/learn-the-order-of-elements", "title": "Learn the order of elements", "body": "<p>I want to find an efficient way (in Perl preferably) to learn the fixed order of a family of words by comparing their order in multiple subsets of the group.\n(They are job parameters. There are about 30 different ones. Different jobs need different combinations of parameters &amp; there are only ever a few parameters in each job)</p>\n\n<p>For example, given:</p>\n\n<pre><code>first\nsecond\nthird\nsixth\nseventh\ntenth\n\nfirst\nthird\nfourth\nfifth\nsixth\n\nthird\nfifth\nseventh\neighth\nninth\ntenth\n</code></pre>\n\n<p>It should be able to remember the relative order relationships it sees to work out that the order is:</p>\n\n<pre><code>first\nsecond\nthird\nfourth\nfifth\nsixth\nseventh\neighth\nninth\ntenth\n</code></pre>\n\n<p>I have generated lists like:</p>\n\n<pre><code>first.second.third.sixth.seventh.tenth\nfirst.third.fourth.fifth.sixth\nthird.fifth.seventh.eighth.ninth.tenth\n</code></pre>\n\n<p>then sorted uniquely + alphabetically and visually compared them, but I have hundreds of different combinations of the 30ish parameters, so it will be a big job to sort through them all and put them together manually.</p>\n\n<p>I think @daniel-tran has answered the \"how\" in <a href=\"https://stackoverflow.com/a/48041943/224625\">https://stackoverflow.com/a/48041943/224625</a> and using that and some hackery like:</p>\n\n<pre><code>$order-&gt;{$prev}-&gt;{$this} = 1;\n$order-&gt;{$this}-&gt;{$prev} = 0;\n</code></pre>\n\n<p>I've managed to populate a hash of hashes with a 1 or a 0 for each pair of consecutive parameters to say which comes first, like:</p>\n\n<pre><code>$VAR1 = {\n    'first' =&gt; {\n        'second' =&gt; 1,\n        'third' =&gt; 1,\n    },\n    'second' =&gt; {\n        'first' =&gt; 0,\n        'third' =&gt; 1,\n    },\n    'third' =&gt; {\n        'first' =&gt; 0,\n        'second' =&gt; 0,\n        'fourth' =&gt; 1,\n        'fifth'  =&gt; 1,\n        'sixth'  =&gt; 1,\n    },            \n    'fourth' =&gt; {\n        'third' =&gt; 0,\n        'fifth' =&gt; 1,\n    },\n    ...\n</code></pre>\n\n<p>but I hit the wall trying to work out what to do in my sort function when it's asked to sort a pair that have never been seen as immediate neighbours, thus don't have a relationship defined.</p>\n\n<p>Is there an easy solution?\nAm I going about this the right way?\nIs there a better WTDI in the first place?</p>\n\n<p>Thanks,</p>\n\n<p>John</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525968377, "post_id": 50276988, "comment_id": 87570676, "body": "Please don&#39;t rewrite error messages. Copy and paste them. You will introduce typos that could hide valuable information."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1525968508, "post_id": 50276988, "comment_id": 87570749, "body": "Is $BILL an object? If it is, you shouldn&#39;t dereference it at all, not even to peek into its internal data (as in <code>$BILL-&gt;{$portion}</code>), you should call its methods instead. To iterate over the keys, there should be a method providing the list."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525968812, "post_id": 50276988, "comment_id": 87570899, "body": "Perl 5.14 introduced <a href=\"https://perldoc.perl.org/perl5140delta.html#Array-and-hash-container-functions-accept-references\" rel=\"nofollow noreferrer\">auto dereferencing</a> as an experimental feature, but it was removed again in 5.24. But not on objects."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525971349, "post_id": 50276988, "comment_id": 87572410, "body": "The difference in behaviour isn&#39;t due to AP 1603 vs AP 1604."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1525971286, "post_id": 50277139, "comment_id": 87572371, "body": "While you should use <code>keys %$ref</code> instead <code>keys $ref</code> (because the latter was an experimental feature that was abandoned), that&#39;s not the problem the OP is having. Switching to <code>keys %$ref</code> may or may not help. (I didn&#39;t downvote.)"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1525968635, "creation_date": 1525968635, "answer_id": 50277139, "question_id": 50276988, "link": "https://stackoverflow.com/questions/50276988/error-type-of-argument-to-keys-on-reference-must-be-unblessed/50277139#50277139", "title": "Error: Type of argument to keys on reference must be unblessed", "body": "<blockquote>\n<pre><code>**Line 1618:**  for (sort keys $BILL) {\n</code></pre>\n</blockquote>\n\n<p><code>$BILL</code> is a scalar value (starts with <code>$</code>), specifically a reference to a hash as can be seen how it was used earlier. You need to call <code>keys</code> on the hash itself and not on the reference to it. To do this you need to dereference it to get to the hash and call <code>keys</code> on it, i.e. use <code>keys %$BILL</code> not <code>keys $BILL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1525969078, "last_edit_date": 1525969078, "creation_date": 1525968732, "answer_id": 50277178, "question_id": 50276988, "link": "https://stackoverflow.com/questions/50276988/error-type-of-argument-to-keys-on-reference-must-be-unblessed/50277178#50277178", "title": "Error: Type of argument to keys on reference must be unblessed", "body": "<p>If <code>$BILL</code> is a blessed object, getting its <a href=\"http://p3rl.org/keys\" rel=\"nofollow noreferrer\">keys</a> makes no sense. It might have a method to provide a list of the \"keys\" that you can then use as method names or parameters to a universal getter - but we don't know, as you haven't shown how $BILL is populated and what class it's been blessed to.</p>\n\n<p>There were some changes in the behaviour of <a href=\"http://p3rl.org/keys\" rel=\"nofollow noreferrer\">keys</a> and references. To stay on the safe side, don't use it at all, dereference the reference:</p>\n\n<pre><code>keys %$BILL\n</code></pre>\n\n<p>But that applies to plain non-blessed hash references only. Applying dereference on an object breaks encapsulation (and note that <code>$BILL-&gt;{$portion}</code> dereferences the object, too).</p>\n"}], "owner": {"reputation": 17, "user_id": 5020285, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/88dd2783a33f757183860abafffd12e4?s=128&d=identicon&r=PG&f=1", "display_name": "Raul", "link": "https://stackoverflow.com/users/5020285/raul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "closed_date": 1525972460, "answer_count": 2, "score": 0, "last_activity_date": 1525972259, "creation_date": 1525968082, "last_edit_date": 1525972259, "question_id": 50276988, "link": "https://stackoverflow.com/questions/50276988/error-type-of-argument-to-keys-on-reference-must-be-unblessed", "closed_reason": "Duplicate", "title": "Error: Type of argument to keys on reference must be unblessed", "body": "<p>I am getting the error</p>\n\n<blockquote>\n  <p>Type of  of argument to keys on reference must be unblessed hasref or arrayref at xxxx.pl line 6518</p>\n</blockquote>\n\n<p>Part of the script is</p>\n\n<pre><code>    ndr_log(\"Processing file: $file [$filesize bytes] Portion: $portion; Billing Date/MDate: $portion_date/$filemtime; Reading Proc: [$entries/$entries_reading/$entries_n15]: $reading_proc\", 'Info');\n\n    if (!defined $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{mtime}\n            or $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{mtime} &lt; $filemtime) {\n\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{mtime}    = $filemtime;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{entries}  = $entries;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{readings} = $entries_reading;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{n15}      = $entries_n15;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{proc}     = $reading_proc;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{ok}       = $meter_ok;\n        $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{nok}      = $meter_nok;\n    }\n    else {\n        DbgPlain(\"Ignoring file: $file; this is older result; never version exists: $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{mtime}\");\n    }\n\n} # for files\n\n# Create Report\n#\nmy @REPORT;\n\nfor (sort keys $BILL) {  ### Line 6518\n\n    my $portion = $_;\n\n    for ( sort keys $BILL-&gt;{$portion} ) {\n\n        my $portion_date = $_;\n\n        #ndr_log(\"Portion: $portion on $portion_date\")\n\n        my $entries         = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{entries};\n        my $entries_reading = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{readings};\n        my $entries_n15     = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{n15};\n        my $reading_proc    = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{proc};\n        my $meter_ok        = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{ok};\n        my $meter_nok       = $BILL-&gt;{$portion}-&gt;{$portion_date}-&gt;{nok};\n</code></pre>\n\n<p>Is there anyway to solve it?</p>\n\n<p>I have in my new server ActivePerl 5.16.3 build 1604 and in the one that works Build 1603. Is it a version issue?</p>\n"}, {"tags": ["perl", "unit-testing", "subroutine"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525945861, "post_id": 50269677, "comment_id": 87557465, "body": "What is your question? You presumably know how to set environment variables to different values?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525948393, "post_id": 50269677, "comment_id": 87558915, "body": "@Borodin actually there are no environment variables involved. I don&#39;t see a <code>%ENV</code> anywhere. I was going to rewrite the question to this, but it&#39;s not actually that hard. It&#39;s just a method with a hash."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1525948694, "post_id": 50269677, "comment_id": 87559072, "body": "I&#39;m not sure your code does what it is supposed to do. It returns something else than what I expect it to do."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1525955099, "post_id": 50269677, "comment_id": 87562589, "body": "@simbabque:  Yeah, the question being wholly in the subject line, together with <i>&quot;fetch the API host name from the environment&quot;</i> misled me. Thanks for the edits=."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1525955301, "post_id": 50269677, "comment_id": 87562702, "body": "It would be better to use the tested <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> module instead of regex patterns."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1525951703, "creation_date": 1525951703, "answer_id": 50271911, "question_id": 50269677, "link": "https://stackoverflow.com/questions/50269677/how-do-i-write-a-perl-unit-test-for-a-method-with-a-hash-argument/50271911#50271911", "title": "How do I write a Perl unit test for a method with a hash argument?", "body": "<p>Your code is not actually very complex. You don't actually access anything very specific. It's just a hash of arguments. The correct thing to do is to test for these cases:</p>\n\n<ul>\n<li>called without args</li>\n<li>called with wrong args</li>\n<li>called with a value that doesn't match the pattern (will fail, you don't account for that)</li>\n<li>called with URL with trailing slash with port</li>\n<li>called with URL without trailing slash with port</li>\n<li>called with URL with trailing slash without port</li>\n<li>called with URL without trailing slash without port</li>\n</ul>\n\n<p>Those tests are all fairly simple.</p>\n\n<pre><code>use Test::More;\nuse strict;\nuse warnings;\n\nmy $foo = Foo-&gt;new;\n\nis( $foo-&gt;_get_api_host_from_environment(),\n    undef, 'return undef without arguments' );\nis( $foo-&gt;_get_api_host_from_environment( foo =&gt; 123 ),\n    undef, 'return undef with missing environment' );\n\n{\n    local $TODO = 'this check is not implemented yet';\n\n    is(\n        $foo-&gt;_get_api_host_from_environment(\n            environment =&gt; 'this is not a URL'\n        ),\n        undef,\n        'environment is not a URL'\n    );\n}\n\nis(\n    $foo-&gt;_get_api_host_from_environment(\n        environment =&gt; 'http://example.org:8174/'\n    ),\n    'example.org:28174',\n    'port number and trailing slash prefixes 2 to the port'\n);\nis(\n    $foo-&gt;_get_api_host_from_environment(\n        environment =&gt; 'http://example.org:8174'\n    ),\n    'example.org:28174',\n    'port number w/o trailing slash prefixes 2 to the port'\n);\n\nis(\n    $foo-&gt;_get_api_host_from_environment(\n        environment =&gt; 'http://example.org/'\n    ),\n    'example.org:4040',\n    'no port number and trailing slash adds port 4040'\n);\nis(\n    $foo-&gt;_get_api_host_from_environment(\n        environment =&gt; 'http://example.org'\n    ),\n    'example.org:4040',\n    'no port number w/o trailing slash adds port 4040'\n);\n\ndone_testing;\n</code></pre>\n\n<p>Note how my tests all have descriptive names. Good tests double as documentation for the developer that will maintain the code in the future (could be you in a year), so make sure you actually talk about what and why you are testing in your descriptions.</p>\n\n<p>There's a <code>$TODO</code> in there to show that the check for an incorrect URL has not been built yet. That test will fail, but the test suite will pass anyway because it's expected to fail.</p>\n\n<p>In order to make these tests pass, I needed to add some code around your sub. This is what I did.</p>\n\n<pre><code>package Foo;\nuse strict;\nuse warnings;\n\nsub new { return bless {}, $_[0] }\n\nsub missing_params {\n    my $self = shift;\n    my $args = shift;\n\n    foreach my $param (@_) {\n        return 1 unless exists $args-&gt;{$param};\n    }\n\n    return;\n}\n\nsub _get_api_host_from_environment {\n    my ( $self, %args ) = @_;\n\n    $self-&gt;missing_params( \\%args, qw! environment! )\n      and return;\n\n    $args{environment} =~ m{(?:https?://)?([^:\\/]+):?([^\\/]*)}\n      ;    #  http://m5devacoe01.gcsc.att.com:8174/\n    my $host = $1;    # m5devacoe01.gcsc.att.com\n    my $port = $2;    # 8174\n\n# If port is provided it means that it's a development server request. So, append 2 in the port\n    if ($port) {\n        $host .= ':2' . $port;\n    }\n    else {\n        $host .= ':4040';\n    }\n\n    return $host;\n}\n</code></pre>\n\n<p>You will notice how I changed your regular expression. That's because yours was actually wrong and didn't do what your documentation says the code does. The new pattern introduces the option of having <code>https</code> instead of <code>http</code> as the scheme, which I did not have tests for, as well as not having the scheme at all. I did not include tests for these cases, but they should really be there as well.</p>\n\n<p>It might be smarter to actually use the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a> module for this. It allows you to modify the port directly, and gives you free sanity checks.</p>\n\n<pre><code>sub _get_api_host_from_environment {\n    my ( $self, %args ) = @_;\n\n    $self-&gt;missing_params( \\%args, qw! environment! )\n      and return;\n\n    my $uri = URI-&gt;new( $args{environment} ) or return;\n    return unless $uri-&gt;scheme &amp;&amp; $uri-&gt;scheme =~ 'http'; # includes https\n\n    my $port = $uri-&gt;port;    # 8174\n\n# If port is provided it means that it's a development server request. So, append 2 in the port\n    if ($port != 80 and $port != 443) {\n        $uri-&gt;port( '2' . $port );\n    }\n    else {\n        $uri-&gt;port('4040');\n    }\n\n    # return $uri-&gt;canonical; # this would return http://example.org:28174/\n    return $uri-&gt;host_port;\n}\n</code></pre>\n\n<p>With this test, the same unit tests will still pass.</p>\n"}], "owner": {"reputation": 5, "user_id": 9691375, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YYj_D049wSQ/AAAAAAAAAAI/AAAAAAAAABA/RRm4oA7toj0/photo.jpg?sz=128", "display_name": "sarath sasidharan", "link": "https://stackoverflow.com/users/9691375/sarath-sasidharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1525951703, "creation_date": 1525944608, "last_edit_date": 1525948355, "question_id": 50269677, "link": "https://stackoverflow.com/questions/50269677/how-do-i-write-a-perl-unit-test-for-a-method-with-a-hash-argument", "title": "How do I write a Perl unit test for a method with a hash argument?", "body": "<p>This subroutine will fetch the API host name from the environment by applying a regex on it.</p>\n\n<pre><code>Parameters : \nenvironment (mandatory) - http://m5devacoe01.gcsc.att.com:8174/\nReturns :\nhost : m5devacoe01.gcsc.att.com:28174\n</code></pre>\n\n\n\n<pre><code>########################################################\n# Subroutine: _get_api_host_from_environment\n#\n# Fetches the api host name from environment by applying regex on it\n#\n# Parameters : \n# environment (mandatory) - http://m5devacoe01.gcsc.att.com:8174/\n#                    \n# Returns :\n# host : m5devacoe01.gcsc.att.com:28174\n#####################################################\n\n\n sub _get_api_host_from_environment {\n        my ($self, %args) = @_;\n\n        $self-&gt;missing_params(\\%args, qw! environment!)\n            and return;\n\n        $args{environment} =~ /([^:\\/]+):?([^\\/]*)/; #  http://m5devacoe01.gcsc.att.com:8174/\n        my $host = $1; # m5devacoe01.gcsc.att.com\n        my $port = $2; # 8174\n\n        # If port is provided it means that it's a development server request. So, append 2 in the port\n        if ($port) {\n            $host .= ':2' . $port;\n        } else {\n            $host .= ':4040';\n        }\n\n        return $host;\n    }\n</code></pre>\n\n<p>How do I unit test this method?</p>\n"}, {"tags": ["regex", "linux", "perl", "ksh"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 5, "creation_date": 1525934793, "post_id": 50266979, "comment_id": 87551967, "body": "The better and more elegant way is to use a JSON parser..."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1525937887, "post_id": 50267680, "comment_id": 87553460, "body": "That should be <code>-0777</code>, not <code>-0</code> (assuming you want to slurp the whole input). <code>-0</code> sets the input line terminator to <code>&quot;\\0&quot;</code>, not <code>undef</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1525937994, "post_id": 50267680, "comment_id": 87553509, "body": "Also, <code>perl -MJSON::PP -p0777 -e &#39;$_ = encode_json { %{decode_json $_}, time =&gt; &quot;20:00:00&quot; }</code> for compactness."}, {"owner": {"reputation": 950, "user_id": 999986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/552c507622e61c693fb2368a0d9db4d2?s=128&d=identicon&r=PG", "display_name": "Nir", "link": "https://stackoverflow.com/users/999986/nir"}, "edited": false, "score": 0, "creation_date": 1525940935, "post_id": 50267680, "comment_id": 87554935, "body": "Thanks, I guess my version does not support this &quot;Can&#39;t locate JSON/PP.pm in @INC&quot;. I have no permissions to update or install anything so I can&#39;t use jq"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1525943414, "post_id": 50267680, "comment_id": 87556085, "body": "Are you on a RedHat-based distro? Some of them split out standard Perl packages in annoying ways. Often there&#39;s a <code>perl-full</code> or similarly named package that gives you everything. <code>JSON::PP</code> has been standard since Perl 5.14."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1525952231, "post_id": 50267680, "comment_id": 87561026, "body": "IIRC it&#39;s <code>perl-core</code> on older RedHats."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 7, "last_activity_date": 1525937808, "last_edit_date": 1525937808, "creation_date": 1525936947, "answer_id": 50267680, "question_id": 50266979, "link": "https://stackoverflow.com/questions/50266979/perl-regular-expression-substitution-with-groups/50267680#50267680", "title": "perl regular expression substitution with groups", "body": "<p>Whilst you <em>could</em> do this with regexes, it would be so much easier with <a href=\"https://stedolan.github.io/jq/\" rel=\"noreferrer\">the right tool</a></p>\n\n<pre><code>jq '.time=\"20:00:00\"' somefile.json \n</code></pre>\n\n<p>If you particularly wish to use Perl, the core Perl distribution has included a JSON parser since 2011, so you could do something like:</p>\n\n<pre><code>perl -MJSON::PP=decode_json,encode_json -0 -E '$j = decode_json(&lt;&gt;); $j-&gt;{time} = \"20:00:00\"; say encode_json($j)' somefile.json\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 950, "user_id": 999986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/552c507622e61c693fb2368a0d9db4d2?s=128&d=identicon&r=PG", "display_name": "Nir", "link": "https://stackoverflow.com/users/999986/nir"}, "edited": false, "score": 0, "creation_date": 1525940642, "post_id": 50267789, "comment_id": 87554776, "body": "This is great!, I tried the $1 first but I missed the escaping and then changed to use the \\1 (which now I understand is wrong). Without escaping ,it doesn&#39;t work for me. perl -w -pe &quot;s|(.*time\\&quot;\\s*\\:\\s*\\&quot;).*?(\\&quot;.*)|\\${1}20:00:00\\${2}|g&quot;. Your last solution using \\K is great, I am defenatly going to use this one. Thanks alot!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 950, "user_id": 999986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/552c507622e61c693fb2368a0d9db4d2?s=128&d=identicon&r=PG", "display_name": "Nir", "link": "https://stackoverflow.com/users/999986/nir"}, "edited": false, "score": 2, "creation_date": 1525952176, "post_id": 50267789, "comment_id": 87561000, "body": "@Nir The whole problem is that you&#39;re using double quotes around the code. When in doubt, always use single quotes in the shell (unless you want to interpolate variables)."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 8, "last_activity_date": 1525937647, "last_edit_date": 1525937647, "creation_date": 1525937344, "answer_id": 50267789, "question_id": 50266979, "link": "https://stackoverflow.com/questions/50266979/perl-regular-expression-substitution-with-groups/50267789#50267789", "title": "perl regular expression substitution with groups", "body": "<p>Perl doesn't use <code>\\1</code> for substitution. If you had enabled warnings (e.g. with <code>perl -w</code>), perl would have told you it's <code>$1</code>. Which can be disambiguated from surrounding digits by adding <code>{</code> <code>}</code>:</p>\n\n<pre><code>perl -pe 's|(.*time\"\\s*:\\s*\").*?(\".*)|${1}20:00:00$2|g'\n</code></pre>\n\n<p>(I also removed all the redundant backslashes from the regex.)</p>\n\n<p>On another note, what's the point of matching <code>.*</code> if you're just going to replace it by itself? Couldn't it just be</p>\n\n<pre><code>perl -pe 's|(time\"\\s*:\\s*\").*?(\")|${1}20:00:00$2|g'\n</code></pre>\n\n<p>?</p>\n\n<p>I'm not a big fan of <code>.*</code> or <code>.*?</code>. If you're trying to match the inside of a quoted string, it would be better to be specific:</p>\n\n<pre><code>perl -pe 's|(time\"\\s*:\\s*\")[^\"]*(\")|${1}20:00:00$2|g'\n</code></pre>\n\n<p>We're not trying to validate the input string, so now there's really no reason to match that final <code>\"</code> (and replace it by itself) either:</p>\n\n<pre><code>perl -pe 's|(time\"\\s*:\\s*\")[^\"]*|${1}20:00:00|g'\n</code></pre>\n\n<p>If your perl is not ancient (5.10+), you can use <code>\\K</code> to \"keep\" leading parts of the string, i.e. not include it in the match:</p>\n\n<pre><code>perl -pe 's|time\"\\s*:\\s*\"\\K[^\"]*|20:00:00|g'\n</code></pre>\n\n<p>Now only the <code>[^\"]*</code> part will be substituted, saving us from having to do any capturing.</p>\n"}], "owner": {"reputation": 950, "user_id": 999986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/552c507622e61c693fb2368a0d9db4d2?s=128&d=identicon&r=PG", "display_name": "Nir", "link": "https://stackoverflow.com/users/999986/nir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 50267789, "answer_count": 2, "score": 2, "last_activity_date": 1525937808, "creation_date": 1525934275, "question_id": 50266979, "link": "https://stackoverflow.com/questions/50266979/perl-regular-expression-substitution-with-groups", "title": "perl regular expression substitution with groups", "body": "<p>I have the following json input</p>\n\n<pre><code>... \"somefield\":\"somevalue\", \"time\":\"timevalue\", \"anotherfield\":\"value\" ...\n</code></pre>\n\n<p>inside my ksh script I wish to replace timevalue with my value. So I created this regular expression using groups with works just fine</p>\n\n<pre><code>data=`cat somefile.json`\necho $data | perl -pe \"s|(.*time\\\"\\s*\\:\\s*\\\").*?(\\\".*)|\\1%TIME%\\2|g\" | another-script.sh\n\n... \"somefield\":\"somevalue\", \"time\":\"%TIME%\", \"anotherfield\":\"value\" ...\n</code></pre>\n\n<p>However ... I cannot use number as substitution because perl uses numbers to define groups .. so this one obviously doen't work</p>\n\n<pre><code>perl -pe \"s|(.*time\\\"\\s*\\:\\s*\\\").*?(\\\".*)|\\120:00:00\\2|g\"\n</code></pre>\n\n<p>I can overcome this by doing two step substitution </p>\n\n<pre><code>perl -pe \"s|(.*time\\\"\\s*\\:\\s*\\\").*?(\\\".*)|\\1%TIME%\\2|g\" | perl -pe \"s|%TIME%|20:00:00|\"\n\n... \"somefield\":\"somevalue\", \"time\":\"20:00:00\", \"anotherfield\":\"value\" ...\n</code></pre>\n\n<p>but I am sure there is a better and more elegant way doing it</p>\n"}, {"tags": ["perl", "apache2", "cgi", "execution-time"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 3, "creation_date": 1525932655, "post_id": 50266536, "comment_id": 87550928, "body": "What are the <i>exact</i> error messages you&#39;re seeing? &quot;Failed!!!&quot; and &quot;Program halted!!!&quot; are not standard error messages for any of the software you&#39;ve mentioned in your question."}, {"owner": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1525934847, "post_id": 50266536, "comment_id": 87551992, "body": "AH01215: Fatal Error:: /usr/lib/cgi-bin/script.cgi AH01215: Program halted !!: /usr/lib/cgi-bin/script.cgi  I have edited the question also."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1525945036, "post_id": 50266536, "comment_id": 87556964, "body": "HTTP isn&#39;t designed for what you&#39;re doing. You want something that starts those commands in the background and allow subsequent visits to track the progress."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "edited": false, "score": 0, "creation_date": 1525999205, "post_id": 50275927, "comment_id": 87583163, "body": "But there is no httpd.conf file exists in apache2."}, {"owner": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "edited": false, "score": 0, "creation_date": 1525999439, "post_id": 50275927, "comment_id": 87583223, "body": "Thanks to all of you for your answers. I figured out that the problem was the version of the binary. The version which was installed via apt-get was different than that of the source code. I removed the source code binary and it worked!"}, {"owner": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "reply_to_user": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "edited": false, "score": 0, "creation_date": 1526096116, "post_id": 50275927, "comment_id": 87621640, "body": "@user8392790 It might be named apache2.conf."}], "tags": [], "owner": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "is_accepted": true, "score": 0, "last_activity_date": 1525964482, "creation_date": 1525964482, "answer_id": 50275927, "question_id": 50266536, "link": "https://stackoverflow.com/questions/50266536/how-to-increase-the-execution-time-in-perl/50275927#50275927", "title": "How to increase the execution time in perl?", "body": "<p>In httpd.conf there is a <a href=\"https://httpd.apache.org/docs/2.4/mod/core.html#timeout\" rel=\"nofollow noreferrer\" title=\"Timeout\">Timeout</a> directive. It usually defaults to 60 seconds.</p>\n"}], "owner": {"reputation": 19, "user_id": 8392790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e3b6c8293ecced985afe05c3f6450c?s=128&d=identicon&r=PG&f=1", "display_name": "user8392790", "link": "https://stackoverflow.com/users/8392790/user8392790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 50275927, "answer_count": 1, "score": 0, "last_activity_date": 1525964482, "creation_date": 1525932415, "last_edit_date": 1525934806, "question_id": 50266536, "link": "https://stackoverflow.com/questions/50266536/how-to-increase-the-execution-time-in-perl", "title": "How to increase the execution time in perl?", "body": "<p>I am trying to run a Perl CGI script (named script.cgi) on apache2 server but after executing two or three commands, it stops with errors in the log file:</p>\n\n<p>\"AH01215: Fatal Error:: /usr/lib/cgi-bin/script.cgi\"</p>\n\n<p>\"AH01215: Program halted !!: /usr/lib/cgi-bin/script.cgi\"</p>\n\n<p>It successfully executes the first three external commands mentioned in the script but fails at the fourth one as it takes more time in generating complete results. I also tried printing the output of the command so that I could know whether the command is being executed or not, and I found that it is being executed but getting failed after a specific period of time.</p>\n\n<p>I tried using Time::Out module but it is not working either. The external commands are being executed in backticks(``) because the system() is not capturing output and exec() does not wait for the command to finish and starts executing the next command.</p>\n\n<p>Is there any way I could modify the timeout settings in apache2? Because I tried that too but I couldn't find any file or mod for this purpose. Please help me out.</p>\n"}, {"tags": ["perl", "date", "cron"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 5, "creation_date": 1525929623, "post_id": 50265263, "comment_id": 87549823, "body": "<a href=\"https://metacpan.org/pod/Schedule::Cron::Events\" rel=\"nofollow noreferrer\">metacpan.org/pod/Schedule::Cron::Events</a>  will parse a crontab entry and tell you the next/previous times it would run."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1525988170, "creation_date": 1525988170, "answer_id": 50281859, "question_id": 50265263, "link": "https://stackoverflow.com/questions/50265263/read-and-interpret-crontab-with-perl/50281859#50281859", "title": "Read and interpret crontab with Perl", "body": "<p>Note the 5th field: this only runs on Saturday.</p>\n\n<p>Here's something you can do with GNU date:</p>\n\n<pre><code>$ date -d \"-1 week saturday 03:00\" \"+%Y%m%d %H:%M:%S\"\n20180505 03:00:00\n\n$ date -d \"-w week saturday 03:00\" \"+%Y%m%d %H:%M:%S\"\n20180518 13:00:00\n\n$ date -d \"-2 week saturday 03:00\" \"+%Y%m%d %H:%M:%S\"\n20180428 03:00:00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1525989534, "creation_date": 1525989534, "answer_id": 50282088, "question_id": 50265263, "link": "https://stackoverflow.com/questions/50265263/read-and-interpret-crontab-with-perl/50282088#50282088", "title": "Read and interpret crontab with Perl", "body": "<p>the Schedule::Cron::Events suggestion implemented:</p>\n\n<pre><code>crontab -l | perl -MPOSIX=strftime -MSchedule::Cron::Events -lne '\n    $cron = Schedule::Cron::Events-&gt;new($_);\n    $prev = strftime(\"%F %T\", $cron-&gt;previousEvent());\n    print \"$prev =&gt; \", $cron-&gt;commandLine();\n'\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 3489993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0fccffd8707f8e544d945a9cbad7222?s=128&d=identicon&r=PG&f=1", "display_name": "gugabguerra", "link": "https://stackoverflow.com/users/3489993/gugabguerra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525989534, "creation_date": 1525924817, "question_id": 50265263, "link": "https://stackoverflow.com/questions/50265263/read-and-interpret-crontab-with-perl", "title": "Read and interpret crontab with Perl", "body": "<p>I'm writing a Perl program to check if and make sure that some system backup tasks were executed from crontab. </p>\n\n<p>I need to read the crontab and interpret when it was supposed to run, in order to check if that backup was done. Here is an example.</p>\n\n<pre><code>00 03 * * 6 system_backup.sh\n</code></pre>\n\n<p>Let's suppose this task will generate a file called <code>system_backup_20180510.iso</code></p>\n\n<p>Then my idea was to store a \"desirable date\" into a var then compare with that date in the filename. The biggest issue is how to build that desirable date with crontab's day of month field filled up.</p>\n\n<p>What you guys can suggest? Thanks</p>\n"}, {"tags": ["regex", "perl", "sed", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 6768, "user_id": 2175052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2f0b9a9bca26ef546bfeb826731c5ac?s=128&d=identicon&r=PG", "display_name": "Jane Wayne", "link": "https://stackoverflow.com/users/2175052/jane-wayne"}, "edited": false, "score": 0, "creation_date": 1525922113, "post_id": 50264908, "comment_id": 87547831, "body": "That does not seem to work; I don&#39;t observe any of the delimiters being swapped out. And yes, there will be many equations delimited by <code>$</code> pairs throughout the generated HTML. Again, to be clear, I create a Juypter Notebook <code>ipynb</code> file (which is <code>JSON</code>), and then use the <code>juypter nbconvert</code> tool to create a <code>HTML</code> file. The whole format that I would be operating against is a HTML file."}, {"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "reply_to_user": {"reputation": 6768, "user_id": 2175052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2f0b9a9bca26ef546bfeb826731c5ac?s=128&d=identicon&r=PG", "display_name": "Jane Wayne", "link": "https://stackoverflow.com/users/2175052/jane-wayne"}, "edited": false, "score": 0, "creation_date": 1525922520, "post_id": 50264908, "comment_id": 87547916, "body": "Well, I&#39;m not that familiar with Juypter Notebook.  Do all equations start with <code>$</code>?  Rather you might try <code>sed -e&#39;s&#47;\\$&#47;$\\\\latex &#47;&#39;</code>."}], "tags": [], "owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "is_accepted": false, "score": 0, "last_activity_date": 1525921887, "creation_date": 1525921887, "answer_id": 50264908, "question_id": 50264816, "link": "https://stackoverflow.com/questions/50264816/how-do-i-replace-latex-delimiters-using-a-command-line-tool-like-perl-or-sed/50264908#50264908", "title": "How do I replace LaTex $ delimiters using a command line tool like perl or sed?", "body": "<p>I am not sure what the whole format of your file might be.  If I take your example at face value and assume that the first <code>$</code> on any line is in column 1 then </p>\n\n<pre><code>sed -e's/^\\$/$\\\\latex /'\n</code></pre>\n\n<p>works for me.  But if the string to convert is <em>anywhere</em> in the file then things get harder.</p>\n"}, {"comments": [{"owner": {"reputation": 6768, "user_id": 2175052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2f0b9a9bca26ef546bfeb826731c5ac?s=128&d=identicon&r=PG", "display_name": "Jane Wayne", "link": "https://stackoverflow.com/users/2175052/jane-wayne"}, "edited": false, "score": 0, "creation_date": 1525922571, "post_id": 50264955, "comment_id": 87547923, "body": "Cool. That worked! Could you modify it to remove the output to <code>$\\latex</code> and just <code>$latex</code> since the latter is compliant with WordPress and so other users won&#39;t be confused? I&#39;ll accept this answer as it completely works (minus the output of <code>$\\latex</code> part. I&#39;ve already modified it on my test here and it works; just need the edit in this answer."}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": true, "score": 1, "last_activity_date": 1525925539, "last_edit_date": 1525925539, "creation_date": 1525922223, "answer_id": 50264955, "question_id": 50264816, "link": "https://stackoverflow.com/questions/50264816/how-do-i-replace-latex-delimiters-using-a-command-line-tool-like-perl-or-sed/50264955#50264955", "title": "How do I replace LaTex $ delimiters using a command line tool like perl or sed?", "body": "<p>You can use the following <code>sed</code> command:</p>\n\n<pre><code>sed -e 's/\\$\\([^$]*\\)\\$/$\\\\latex \\1$/g'\n</code></pre>\n\n<p><strong>INPUT:</strong></p>\n\n<pre><code>$ echo -e \"abc \\$y = w'x$ toto\\n123 \\$u = v'w$ xyz\"\nabc $y = w'x$ toto\n123 $u = v'w$ xyz\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>echo -e \"abc \\$y = w'x$ toto\\n123 \\$u = v'w$ xyz\" | sed -e 's/\\$\\([^$]*\\)\\$/$\\\\latex \\1$/g'\nabc $\\latex y = w'x$ toto\n123 $\\latex u = v'w$ xyz\n</code></pre>\n\n<p><strong>Explanations:</strong></p>\n\n<p>You use <code>sed</code> in find and replace mode and it will replace everything between two <code>$</code> characters via  this regex: <code>\\$\\([^$]*\\)\\$</code> by what is already here (backreference) and add <code>\\latex</code> at the beginning. </p>\n\n<p>Last but not least, the following <code>sed -e 's/\\$\\([^$]*\\)\\$/$latex \\1$/g'</code> sed command does the <code>$latex</code> replacement without the <code>\\</code></p>\n"}], "owner": {"reputation": 6768, "user_id": 2175052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2f0b9a9bca26ef546bfeb826731c5ac?s=128&d=identicon&r=PG", "display_name": "Jane Wayne", "link": "https://stackoverflow.com/users/2175052/jane-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50264955, "answer_count": 2, "score": 2, "last_activity_date": 1526034739, "creation_date": 1525921157, "last_edit_date": 1526034739, "question_id": 50264816, "link": "https://stackoverflow.com/questions/50264816/how-do-i-replace-latex-delimiters-using-a-command-line-tool-like-perl-or-sed", "title": "How do I replace LaTex $ delimiters using a command line tool like perl or sed?", "body": "<p>I have a bunch of Jupyter Notebooks with equations written in LaTex. I know that I can convert the notebook to HTML as follows.</p>\n\n<pre><code>jupyter nbconvert --to html --template basic test.ipynb test.html\n</code></pre>\n\n<p>However, the LaTex markup are preserved. For example, if I have <code>$y = w'x$</code>, then that still shows up in the output HTML. I want to get this generated HTML into WordPress (basically, copy/paste), but <a href=\"https://en.support.wordpress.com/latex/\" rel=\"nofollow noreferrer\">WordPress</a> delimits LaTex like this <code>$latex y = w'x$</code>.</p>\n\n<p>How can I use <code>perl</code> or <code>sed</code> (or anything else) to convert <code>$y = w'x</code> to <code>$latex y = w'x$</code>? </p>\n\n<p>I know I can just write a program to do it, but I think that's an overkill because I am sure these available command line tools can do it to. Additionally, any tool that is available on both Windows and Mac/Linux would be a bonus, since I work on both environment types, and do not want to have to resort to a *nix like environment to do this conversion (though, Windows does have Windows Linux Subsystem now, so I guess that might be ok if it's just a Linux tool).</p>\n\n<p>I tried to modify this <code>sed</code> expression from this <a href=\"https://stackoverflow.com/questions/35815988/replace-latex-with-and-multi-line\">post</a> (on Mac), but it did not work.</p>\n\n<pre><code>sed -e ' /\\$\\$/{s/\\$\\$/{\\$latex }/;:a;N;/\\$\\$/!ba;s/\\$\\$/{\\$}/};s/^\\(\\$\\)\\(.*\\)\\(\\$\\)$/{\\$latex }\\2{\\$}/' test.html\n</code></pre>\n\n<blockquote>\n  <p>unexpected EOF (pending }'s)</p>\n</blockquote>\n"}, {"tags": ["linux", "perl", "makefile", "gnu-make"], "answers": [{"tags": [], "owner": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "is_accepted": true, "score": 1, "last_activity_date": 1525966022, "last_edit_date": 1525966022, "creation_date": 1525965654, "answer_id": 50276309, "question_id": 50264241, "link": "https://stackoverflow.com/questions/50264241/how-to-handle-special-cases-in-make/50276309#50276309", "title": "How to handle special cases in make?", "body": "<p><code>$(FILES): $(TMP_DIR)/dec0.a: $(SRC_DIR)/dec.pla</code> is a <a href=\"https://www.gnu.org/software/make/manual/make.html#Static-Pattern\" rel=\"nofollow noreferrer\">static pattern rule</a>... without pattern. This is not valid make syntax.</p>\n\n<p>You could try:</p>\n\n<pre><code>FILES1 := $(patsubst $(SRC_DIR)/%.pla,$(TMP_DIR)/%.a,$(wildcard $(SRC_DIR)/*.pla))\nFILES2 := $(TMP_DIR)/dec0.a $(TMP_DIR)/dec1.a\n\n$(FILES1): $(TMP_DIR)/%.a: $(SRC_DIR)/%.pla                \n        $(BASE_CMD) &lt; $&lt; &gt; $@\n\n$(FILES2): $(TMP_DIR)/dec%.a: $(SRC_DIR)/dec.pla\n        $(BASE_CMD) -D c=$* &lt; $&lt; &gt; $@\n</code></pre>\n"}], "owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50276309, "answer_count": 1, "score": 0, "last_activity_date": 1525966022, "creation_date": 1525916023, "last_edit_date": 1525964354, "question_id": 50264241, "link": "https://stackoverflow.com/questions/50264241/how-to-handle-special-cases-in-make", "title": "How to handle special cases in make?", "body": "<p>I have following makefile where a bunch of <code>pla</code> files are processed to <code>a</code> files   </p>\n\n<p><code>$(SRC_DIR)</code> has <code>dec.pla</code>,<code>inc.pla</code>, and many more <code>*.pla</code> files</p>\n\n<p><code>$(FILES)</code> = all corresponding <code>*.a</code> files and instead of <code>dec.a</code> I have <code>dec0.a</code> and <code>dec1.a</code>  since I want to generate two different files <code>dec0.a</code> and <code>dec1.a</code> corresponding to <code>dec.pla</code> based on the variable that is being passed. How do I accomplish this?</p>\n\n<pre><code>$(FILES):$(TMP_DIR)/%.a      : $(SRC_DIR)/%.pla                \n        $(BASE_CMD)        &lt; $&lt; &gt; $@\n\n$(FILES):$(TMP_DIR)/dec0.a   : $(SRC_DIR)/dec.pla\n        $(BASE_CMD) -D c=0 &lt; $&lt; &gt; $(TMP_DIR)/dec0.a\n\n$(FILES):$(TMP_DIR)/dec1.a   : $(SRC_DIR)/dec.pla\n        $(BASE_CMD) -D c=1 &lt; $&lt; &gt; $(TMP_DIR)/dec1.a\n</code></pre>\n\n<p>I tried the above and got the error</p>\n\n<pre><code>proc.make:8: *** target pattern contains no '%'.  Stop\n</code></pre>\n\n<p>What am I missing here?</p>\n"}]