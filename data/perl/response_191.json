[{"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "is_accepted": true, "score": 3, "last_activity_date": 1536179211, "last_edit_date": 1536179211, "creation_date": 1536179135, "answer_id": 52192924, "question_id": 52192814, "link": "https://stackoverflow.com/questions/52192814/perl-regexp-delete-part-of-the-string-when-a-specific-string-is-present/52192924#52192924", "title": "Perl RegExp: Delete part of the string when a specific string is present", "body": "<p>You may use the following expression:</p>\n\n<pre><code>^(?=.*\\bPeaches\\b|.*\\bPotatoes\\b)\\S+\\s\n</code></pre>\n\n<ul>\n<li><code>^</code> Beginning of string.</li>\n<li><code>(?=.*\\bPeaches\\b|.*\\bPotatoes\\b)</code> Positive lookahead, ensures that <code>Peaches</code> or <code>Potatoes</code> substring are present in the string.</li>\n<li><code>\\S+\\s</code> Matches any non whitespace characters followed by whitespace.</li>\n</ul>\n\n<p>Regex demo <a href=\"https://regex101.com/r/yhqyIo/1\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p><strong>Perl</strong> demo:</p>\n\n<pre><code>use feature qw(say);\n\n$string1 = \"Apples Peaches Grapes\";\n$string2 = \"Spinach Tomatoes Carrots\";\n$string3 = \"Corn Potatoes Rice\";\n\n$string1 =~ s/^(?=.*\\bPeaches\\b|.*\\bPotatoes\\b)\\S+\\s//;\n$string2 =~ s/^(?=.*\\bPeaches\\b|.*\\bPotatoes\\b)\\S+\\s//;\n$string2 =~ s/^(?=.*\\bPeaches\\b|.*\\bPotatoes\\b)\\S+\\s//;\n\n\nsay $string1;\nsay $string2;\nsay $string3;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Peaches Grapes\nSpinach Tomatoes Carrots\nCorn Potatoes Rice\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1536182249, "accepted_answer_id": 52192924, "answer_count": 1, "score": 0, "last_activity_date": 1536180589, "creation_date": 1536178536, "last_edit_date": 1536180589, "question_id": 52192814, "link": "https://stackoverflow.com/questions/52192814/perl-regexp-delete-part-of-the-string-when-a-specific-string-is-present", "closed_reason": "Duplicate", "title": "Perl RegExp: Delete part of the string when a specific string is present", "body": "<p>How to apply Perl RegExp to delete the first part of the string <strong>if</strong> the string includes either <code>Potatoes</code> or <code>Peaches</code>?</p>\n\n<p>If possible, do not use the if/else condition but only the RegExp.</p>\n\n<pre><code>Input:\nApples Peaches Grapes \nSpinach Tomatoes Carrots\nCorn Potatoes Rice\n\nOutput:\nPeaches Grapes \nSpinach Tomatoes Carrots \nPotatoes Rice\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\n$string1 = \"Apples Peaches Grapes \";\n$string2 = \"Spinach Tomatoes Carrots\";\n$string3 = \"Corn Potatoes Rice\";\n\n#Use RegExp to output strings with first word deleted  \n#if it includes either Peaches or Rice.\n\n$string1 =~ s///;\n$string2 =~ s///;\n$string2 =~ s///;\n\n\nsay $string1;\nsay $string2;\nsay $string3;\n</code></pre>\n"}, {"tags": ["linux", "perl", "tcsh"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 1, "creation_date": 1536176340, "post_id": 52192004, "comment_id": 91334371, "body": "What does <code>someotherscript.csh</code> do?"}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "reply_to_user": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1536176525, "post_id": 52192004, "comment_id": 91334442, "body": "I&#39;d have to look into it.  But, thinking that it made it past that and down to the exit command, does it really matter?  Also, others run this script with no problem."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1536177472, "post_id": 52192004, "comment_id": 91334869, "body": "OK, new development, something unrelated to perl.  User can&#39;t even do this...      # This is the aa.tcsh script...     exit  Now, when the user does a &quot;tcsh aa.tcsh&quot;, it hangs. Will augment original post."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1536177892, "post_id": 52192004, "comment_id": 91335054, "body": "The first line of a tcsh script should normally be <code>#!&#47;bin&#47;tcsh -f</code> . The <code>-f</code> tells the shell not to source the user&#39;s <code>.login</code> file. Or you can invoke the script as <code>tcsh -f aa.csh</code> rather than <code>tcsh aa.csh</code>. If adding <code>-f</code> fixes the problem for that one user, then the problem is in that user&#39;s <code>.login</code> (or some other startup file)."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 3, "creation_date": 1536178397, "post_id": 52192004, "comment_id": 91335268, "body": "please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> before posting more Qs here. Good luck."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1536190585, "post_id": 52192004, "comment_id": 91338916, "body": "Clean up everything. Have that user log out (and perhaps reboot the machine) and try again.  If it&#39;s the same they should remove (and save!) their shell configuration files and try again. If that works, then they can start putting back their config a little at a time."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1536177472, "creation_date": 1536177472, "answer_id": 52192588, "question_id": 52192004, "link": "https://stackoverflow.com/questions/52192004/why-wont-system-call-in-perl-return/52192588#52192588", "title": "Why won&#39;t &#39;system&#39; call in perl return?", "body": "<p>Have him run</p>\n\n<pre><code>which exit\n</code></pre>\n\n<p>from a <code>tcsh</code> prompt. If it doesn't say something like</p>\n\n<pre><code>exit: shell built-in command\n</code></pre>\n\n<p>but rather something like</p>\n\n<pre><code>exit:   aliased to sleep 99999\n</code></pre>\n\n<p>then you've found your problem.</p>\n\n<p>If <code>exit</code> is really the last line of your <code>aa.csh</code> script, then it is redundant, and you also try to use a version of the script that doesn't call <code>exit</code> at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "is_accepted": false, "score": 1, "last_activity_date": 1536263765, "creation_date": 1536263765, "answer_id": 52211320, "question_id": 52192004, "link": "https://stackoverflow.com/questions/52192004/why-wont-system-call-in-perl-return/52211320#52211320", "title": "Why won&#39;t &#39;system&#39; call in perl return?", "body": "<p>problem was a corrupted .history file.</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536263765, "creation_date": 1536174917, "last_edit_date": 1536225961, "question_id": 52192004, "link": "https://stackoverflow.com/questions/52192004/why-wont-system-call-in-perl-return", "title": "Why won&#39;t &#39;system&#39; call in perl return?", "body": "<p>New, radical development on this.  Go to the end and read.  </p>\n\n<p>perl 5, version 18, subversion 2 (v5.18.2) built for x86_64-linux-thread-multi<br>\nRH6</p>\n\n<p>I have a perl script that makes a system() call which runs a tcsh script but, for one user, it won't return from that system call.  The code is something like this...</p>\n\n<pre><code>#!/usr/bin/env perl\nprint \"about to make the system call...\\n\";\n$rv = system(\"tcsh aa.csh\");\nprint \"system call finished, return val = $rv\\n\";\nexit;\n</code></pre>\n\n<p>And the aa.csh script...</p>\n\n<pre><code>echo \"In shell script\"     \nmkdir foo\nsource someotherscript.csh\nln -s xxx yyy\necho \"In shell script, about to exit\"\nexit\n</code></pre>\n\n<p>This script runs to completion for all users but one.  He sees this...</p>\n\n<pre><code>about to make the system call...\nIn shell script\nIn shell script, about to exit\n</code></pre>\n\n<p>And it just hangs.  If I hit ^C, it completes..</p>\n\n<pre><code>system call finished, return val = 2\n</code></pre>\n\n<p>Funny thing is, it prints the \"In shell script, about to exit\", with the very next step being \"exit\", but it just doesn't do it, at least not for this one user. All the commands that come before it are, in my mind, irrelevant because it reached this \"about to exit\" message.  It appears that the ^C is interrupting the shell script (which won't exit) and returning to the perl script which proceeds to completion. </p>\n\n<p>So my question has to do with learning why it hangs for this one guy.  There's got to be something in his environment that's causing the problem but I don't know what.  And what does a return value of \"2\" mean?  May mean nothing because I interrupted with a ^C.</p>\n\n<p>Thanks for any help</p>\n\n<p>NEW DEVELOPMENT</p>\n\n<p>This has nothing to do with perl.  If the aa.csh script is just...     </p>\n\n<pre><code>exit\n</code></pre>\n\n<p>And the user runs...</p>\n\n<pre><code>tcsh aa.csh\n</code></pre>\n\n<p>It hangs.</p>\n\n<p>What's up with that?</p>\n\n<p>Moderator, should this thread be deleted and should I repost (because this is so radically different) ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 971, "user_id": 9976846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uxw7E.png?s=128&g=1", "display_name": "Nambi_0915", "link": "https://stackoverflow.com/users/9976846/nambi-0915"}, "edited": false, "score": 0, "creation_date": 1536151837, "post_id": 52185529, "comment_id": 91320818, "body": "try this <code>^.+?(?=\\s)</code>     <a href=\"https://regex101.com/r/rnnul1/1\" rel=\"nofollow noreferrer\">regex101.com/r/rnnul1/1</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1536162119, "post_id": 52185529, "comment_id": 91327701, "body": "If your data doesn&#39;t really contain <code>String 1:</code> etc. then you shouldn&#39;t show it in your question."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1536187647, "post_id": 52185602, "comment_id": 91338345, "body": "Why don&#39;t use a simple <code>$str =~ s&#47;^\\S+\\s+&#47;&#47;</code> ?"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 1, "last_activity_date": 1537164437, "last_edit_date": 1537164437, "creation_date": 1536151879, "answer_id": 52185602, "question_id": 52185529, "link": "https://stackoverflow.com/questions/52185529/regular-expression-to-remove-the-leading-part-of-a-string/52185602#52185602", "title": "Regular expression to remove the leading part of a string", "body": "<pre><code>$string1 =~ s/^\\S+\\h+//; \n</code></pre>\n\n<ul>\n<li><code>^</code> beginning of string</li>\n<li><code>\\S+</code> 1 or more non space character</li>\n<li><code>\\h+</code> 1 or more horizontal spaces</li>\n</ul>\n\n<p>If you're using a version of Perl older than v5.10, you may use:</p>\n\n<pre><code>$string1 =~ s/^\\S+[ \\t]+//; \n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 52185602, "answer_count": 1, "score": 0, "last_activity_date": 1537164437, "creation_date": 1536151655, "last_edit_date": 1536174517, "question_id": 52185529, "link": "https://stackoverflow.com/questions/52185529/regular-expression-to-remove-the-leading-part-of-a-string", "title": "Regular expression to remove the leading part of a string", "body": "\n\n<p>I have different strings yet formatted the same with three words separated by whitespace. The goal is to delete the first part of the string. In other words, delete the leading data for each string.</p>\n\n<p>What Perl regular expression will enable me to delete the leading data while keeping the rest of the string unaffected?</p>\n\n<h3>INPUT</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>String 1: Apples Peaches Grapes\nString 2: Spinach Tomatoes Carrots\nString 3: Corn Potatoes Rice\n</code></pre>\n\n<h3>OUTPUT</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>String 1: Peaches Grapes\nString 2: Tomatoes Carrots\nString 3: Potatoes Rice\n</code></pre>\n\n<h3>Perl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! /usr/bin/perl\n\nuse v5.10.0;\nuse warnings;\n\n$string1 = \"Apples Peaches Grapes\";\n$string2 = \"Spinach Tomatoes Carrots\";\n$string3 = \"Corn Potatoes Rice\";\n\n# Apply ReqExp to Delete the First Part of the String\n$string1 =~ s/.../; \n\nsay $string1;\nsay $string2;\nsay $string3;\n</code></pre>\n"}, {"tags": ["windows", "perl", "select"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536269557, "post_id": 52183503, "comment_id": 91374256, "body": "If this part of a larger application where STDIN is a pipe from a parent, you could fix this by using a socket instead of a pipe."}], "answers": [{"tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": true, "score": 2, "last_activity_date": 1536163452, "last_edit_date": 1536163452, "creation_date": 1536155260, "answer_id": 52186741, "question_id": 52183503, "link": "https://stackoverflow.com/questions/52183503/using-ioselect-on-stdin-on-windows/52186741#52186741", "title": "Using IO::Select on STDIN on Windows", "body": "<p>You cannot, <code>perldoc perlport</code> states:</p>\n\n<pre><code>select  Only implemented on sockets. (Win32, VMS)\n</code></pre>\n\n<p>This is caused by Windows itself implementing <code>select()</code> only  for  sockets,  see <a href=\"https://docs.microsoft.com/de-de/windows/desktop/api/winsock2/nf-winsock2-select\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/de-de/windows/desktop/api/winsock2/nf-winsock2-select</a>.</p>\n\n<p>The Windows equivalent seems to be <a href=\"https://docs.microsoft.com/de-de/windows/desktop/FileIO/i-o-completion-ports\" rel=\"nofollow noreferrer\">I/O Completion Ports</a>. But you have to find a way to use them from Perl.</p>\n\n<p>If you really just care about STDIN, you can poll in a loop with <code>Term::ReadKey</code>  with a <code>ReadMode</code> of -1 (non-blocking). As the name of the module suggests, this   may only work on a tty.</p>\n"}], "owner": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 1, "accepted_answer_id": 52186741, "answer_count": 1, "score": 3, "last_activity_date": 1536163452, "creation_date": 1536145220, "last_edit_date": 1536146073, "question_id": 52183503, "link": "https://stackoverflow.com/questions/52183503/using-ioselect-on-stdin-on-windows", "title": "Using IO::Select on STDIN on Windows", "body": "<p>When I run the code below on a Linux system, as expected it outputs <code>Nothing is ready</code> about every two seconds, and also outputs anything entered on to console.</p>\n\n<p>But on Windows, <code>can_read</code> returns instantly with zero items.</p>\n\n<pre><code>use IO::Select;\n\nmy $sel = IO::Select-&gt;new();\n$sel-&gt;add(\\*STDIN);\n\nwhile ( 1 ) {\n\n    my @ready = $sel-&gt;can_read(2);\n\n    if ( scalar @ready == 0 ) {\n        print \"Nothing is ready\\n\";\n    }\n\n    foreach my $fh ( @ready ) {\n\n        if ( $fh eq \\*STDIN ) {\n            my $in = &lt;STDIN&gt;;\n            print \"got $in from stdin\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>It seems that <code>select</code> works only on Windows sockets and not on STDIN. How can I use <code>IO::Select</code> on STDIN on a Windows system?</p>\n"}, {"tags": ["perl", "dbi", "recommendation-engine", "dbix-class", "mod-perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536125928, "post_id": 52177128, "comment_id": 91305564, "body": "Perhaps you can find it in <a href=\"https://stackoverflow.com/questions/16649845/showing-error-insecure-dependency-in-parameter-3-of-dbidb-hash0xa32bd40-do\">this post</a> or in <a href=\"https://www.perlmonks.org/?node_id=834471\" rel=\"nofollow noreferrer\">this perlmonks page</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 4, "last_activity_date": 1536133694, "creation_date": 1536133694, "answer_id": 52179817, "question_id": 52177128, "link": "https://stackoverflow.com/questions/52177128/insecure-dependency-error-while-running-with-t-switch-using-cicindela2/52179817#52179817", "title": "&quot;Insecure dependency error while running with -T switch&quot; using cicindela2", "body": "<p><code>Insecure dependency... while running with -T switch</code> is Perl's way of telling you that you're running with <a href=\"https://perldoc.perl.org/perlsec.html#Taint-mode\" rel=\"nofollow noreferrer\">taint mode</a> active and attempting to do something with tainted data which could be potentially unsafe.  In this particular case, <code>$sql</code> is tainted, because some or all of its content came from sources external to the program - probably user input, although it could also have been read from a file.</p>\n\n<p>To fix this, you need to think about where <code>$sql</code> came from, so that you can work out the appropriate way to clean it up.</p>\n\n<p>In the most likely scenario, you've asked a user to supply search terms and then inserted those terms directly into your SQL string.  This is a bad idea in general, as it opens you up to the possibility of SQL injection attacks.  (Obligatory <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">Bobby Tables</a> link.)  Revise your SQL handling to make use of <a href=\"https://www.perlmonks.org/?node_id=7548\" rel=\"nofollow noreferrer\">SQL placeholders</a> instead of inserting user input into the <code>WHERE</code> clause and this vulnerability should go away.</p>\n\n<p>If tainted data is making its way into <code>$sql</code> in some other way, you need to clean up the tainted data by using a regular expression to validate it and capture the validated data, then assign the captured data to your variable.  e.g.,</p>\n\n<pre><code>my $tainted = &lt;STDIN&gt;;\n$tainted =~ /([A-Z]*)/; # Only allow uppercase characters\nmy $clean = $1;  # No longer tainted because it came from $1\n</code></pre>\n\n<p>If you need to take this route, <em><strong>DO NOT</strong></em> use <code>.*</code> as your regex to untaint the data without serious, serious consideration, because, if you just blindly accept any and all data, you will be discarding any and all benefit provided by taint mode.</p>\n"}], "owner": {"reputation": 165, "user_id": 10186035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbca2552e8d32573945c7a010fc7bfe?s=128&d=identicon&r=PG&f=1", "display_name": "anndexi99", "link": "https://stackoverflow.com/users/10186035/anndexi99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 52179817, "answer_count": 1, "score": 0, "last_activity_date": 1536151354, "creation_date": 1536122139, "last_edit_date": 1592644375, "question_id": 52177128, "link": "https://stackoverflow.com/questions/52177128/insecure-dependency-error-while-running-with-t-switch-using-cicindela2", "title": "&quot;Insecure dependency error while running with -T switch&quot; using cicindela2", "body": "<p>I am applying the <a href=\"https://github.com/livedoor/cicindela2\" rel=\"nofollow noreferrer\"><em>cicindela2</em> recommendation engine</a></p>\n<p>It uses Apache <code>mod_perl</code> and the Perl <code>DBI</code> module.</p>\n<p>Here is the rough flow of how it works</p>\n<ul>\n<li><p>Data input by Record Handler</p>\n</li>\n<li><p>Data is passed through the filter chain for batch processing</p>\n</li>\n<li><p>Temporary tables are output from batch processing</p>\n</li>\n<li><p>Recommendation result is requested by accessing the Recommend Handler which trigger the action of Recommender</p>\n</li>\n</ul>\n<p>I configured an aggregation and ran the project batch script. I know that the batch processing succeeded because I saw the output of processing from DB. But when I tried to access the recommendation result with URL that triggers the Recommend Handler, I saw a blank white page and the log said</p>\n<blockquote>\n<p>FATAL: Insecure dependency in parameter 1 of DBIx::ContextualFetch::db=HASH(0x7f2a76169e78)-&gt;prepare_cached method call while running with -T switch at /usr/local/share/perl5/Ima/DBI.pm line 398.</p>\n</blockquote>\n<p>This is where the error was thrown from the\n<a href=\"https://metacpan.org/pod/Ima::DBI\" rel=\"nofollow noreferrer\"><code>Ima::DBI</code></a>\nbase module</p>\n<h3>/usr/local/share/perl5/Ima/DBI.pm.</h3>\n<pre><code>sub _mk_sql_closure {\n\n    my ($class, $sql_name, $statement, $db_meth, $cache) = @_;\n\n    return sub {\n        my $class = shift;\n        my $dbh   = $class-&gt;$db_meth();\n\n        # Everything must pass through sprintf, even if @_ is empty.\n        # This is to do proper '%%' translation.\n\n        my $sql = $class-&gt;transform_sql($statement =&gt; @_);\n\n        return $cache    # Line 398\n            ? $dbh-&gt;prepare_cached($sql)\n            : $dbh-&gt;prepare($sql);\n    };\n}\n</code></pre>\n<p>It seems that the SQL query prepared by the program is insecure, right?</p>\n<p>What is reason for this error?</p>\n<p>Is it related to the function of cache management of DBI?</p>\n<p>Would it be solved if I clear the cache regularly?</p>\n<p>Also, I tried to log the SQL statement generated, but the output failed even when I placed something like <code>$LOGGER-&gt;warn(&quot;123&quot;)</code> in the handle subroutine of the Recommend Handler.</p>\n<p>How come the log failed and how to log it correctly?</p>\n"}, {"tags": ["perl", "network-programming"], "answers": [{"tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": 3, "last_activity_date": 1536110150, "creation_date": 1536110150, "answer_id": 52175792, "question_id": 52173904, "link": "https://stackoverflow.com/questions/52173904/the-first-ip-of-the-next-block-with-netip/52175792#52175792", "title": "the first IP of the next block with Net::IP", "body": "<p>You can't increment the last ip as mentioned in <a href=\"https://metacpan.org/pod/Net::IP#looping\" rel=\"nofollow noreferrer\">Net::IP document</a>. </p>\n\n<blockquote>\n  <p>The ++ operator returns undef when the last address of the range is reached.</p>\n</blockquote>\n\n<p>The most simple way is to convert the last ip into integer, increment, then create a brand new Net::IP object from it.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Net::IP qw(ip_inttobin ip_bintoip);\n\nmy $block = Net::IP-&gt;new('194.158.1.0/24');\nmy $next_bin = ip_inttobin($block-&gt;last_int + 1, $block-&gt;version);\nmy $next = Net::IP-&gt;new(ip_bintoip($next_bin, $block-&gt;version));\nprint $next-&gt;ip;\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536110150, "creation_date": 1536094663, "question_id": 52173904, "link": "https://stackoverflow.com/questions/52173904/the-first-ip-of-the-next-block-with-netip", "title": "the first IP of the next block with Net::IP", "body": "<p>i am trying to use Net::IP module from cpan</p>\n\n<pre><code>my $block = new Net::IP('194.158.1.0/24');\n$block-&gt;ip() # get the first ip on the block\n$block-&gt;last_ip() #get the last ip on the block\n</code></pre>\n\n<p>how can i increment the last ip , as i want to know the first ip on the next block</p>\n\n<p>i tried something like :</p>\n\n<pre><code>++$block-&gt;last_ip()\n</code></pre>\n\n<p>but this is not working any idea?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1536090167, "post_id": 52172958, "comment_id": 91296687, "body": "Is <code>java.lang.NullPointerException</code> really on a separate line?"}, {"owner": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536090430, "post_id": 52172958, "comment_id": 91296805, "body": "In some places - yes, in some it&#39;s just a space, but all of that is covered by \\s"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536149511, "post_id": 52172958, "comment_id": 91319375, "body": "You should explain how you are reading the file. If you are testing one line at a time then this cannot work without additional code. But if you are reading the entire file at once then you need a way of isolating individual messages."}], "answers": [{"comments": [{"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "reply_to_user": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "edited": false, "score": 0, "creation_date": 1536105657, "post_id": 52174926, "comment_id": 91301475, "body": "That&#39;s why I have added the <code>.*</code> before <code>verylongfoo</code>. If you don&#39;t anchor the regex, it can start matching anywhere in the string, for example just after the <code>v</code> in <code>verylongfoo</code>, so the regex will match all lines in the log."}, {"owner": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "edited": false, "score": 0, "creation_date": 1536107767, "post_id": 52174926, "comment_id": 91301828, "body": "<a href=\"https://www.regexplanet.com/advanced/perl/index.html\" rel=\"nofollow noreferrer\">regexplanet.com/advanced/perl/index.html</a> It works here, but not on my server, I have no clue why, Thank you anyway, man!"}, {"owner": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "edited": false, "score": 0, "creation_date": 1536108223, "post_id": 52174926, "comment_id": 91301907, "body": "No error, just doesn&#39;t get any exceps with java.lang.NullPointerException"}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "reply_to_user": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "edited": false, "score": 0, "creation_date": 1536108329, "post_id": 52174926, "comment_id": 91301923, "body": "What happens if you just search for <code>java.lang.NullPointerException</code>?"}], "tags": [], "owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1536101474, "creation_date": 1536101474, "answer_id": 52174926, "question_id": 52172958, "link": "https://stackoverflow.com/questions/52172958/regular-expression-to-match-all-but-some-specific-lines-of-logs/52174926#52174926", "title": "Regular expression to match all but some specific lines of logs", "body": "<p>Your regex is close, it just needs to be anchored to the beginning of the line and the negative lookahead then needs a <code>.*</code> to allow <code>verylongfoo</code> to be anywhere in the string:</p>\n\n<pre><code>^(?!.*verylongfoo).*\\sjava\\.lang\\.NullPointerException\n</code></pre>\n\n<p>Regex101 demo with single and multi-line strings is <a href=\"https://regex101.com/r/kcA7gd/13\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 10316791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119ec0b3f8ce7e24c99b5a39b56c132d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuyOhMy", "link": "https://stackoverflow.com/users/10316791/someguyohmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52174926, "answer_count": 1, "score": -1, "last_activity_date": 1536101474, "creation_date": 1536089862, "last_edit_date": 1536091494, "question_id": 52172958, "link": "https://stackoverflow.com/questions/52172958/regular-expression-to-match-all-but-some-specific-lines-of-logs", "title": "Regular expression to match all but some specific lines of logs", "body": "\n\n<p>Suppose, I have following exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>E 180822 133447.332 [pool-9982-thread-1] verylongfoo \njava.lang.NullPointerException\n</code></pre>\n\n<p>What I need is to match only those exceptions that contain <code>java.lang.NullPointerException</code> but lack the <code>verylongfoo</code> part.\nIt ought to be just a Perl 5-compatible regex, not a program written in Perl</p>\n\n<p>I've tried something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>.*(?&lt;!verylongfoo)[\\s]java\\.lang\\.NullPointerException\n</code></pre>\n\n<p>and this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(?!verylongfoo).*\\sjava\\.lang\\.NullPointerException\n</code></pre>\n\n<p>but neither works.</p>\n\n<p>When a lookbehind matches the unwanted part, it just starts matching from the second letter of it.</p>\n\n<p>Can you help me out?</p>\n"}, {"tags": ["linux", "perl", "bluetooth-lowenergy"], "answers": [{"tags": [], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "is_accepted": false, "score": 1, "last_activity_date": 1536353247, "creation_date": 1536353247, "answer_id": 52229451, "question_id": 52172830, "link": "https://stackoverflow.com/questions/52172830/netbluetooth-does-not-discover-devices/52229451#52229451", "title": "Net::Bluetooth does not discover devices", "body": "<p>It seems that <code>Net::Bluetooth</code> is for normal bluetooth devices, not for BLE. I read the source of the Perl package <code>Net-Bluetooth-0.41</code>. The module's <code>get_remote_devices</code> sub is defined in <code>Bluetooth.c</code> as a C function. It calls <code>hci_get_route</code> (in <code>libbluetooth.so</code>) at first then calls <code>hci_inquiry</code>, which inquires the bluetooth devices, but not the BLE devices. :(</p>\n"}], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536353247, "creation_date": 1536089301, "question_id": 52172830, "link": "https://stackoverflow.com/questions/52172830/netbluetooth-does-not-discover-devices", "title": "Net::Bluetooth does not discover devices", "body": "<p>I try to connect to my <code>LegoBoost</code> under <code>Perl</code> on <code>Debian 4.9.110-3+deb9u4</code>. It is a Low Energy Bluetooth (BLE) device. I can discover and connect to it using <code>gatttool</code> and <code>hci*</code> utilities, but I have no luck with Perl. I tried the following code:</p>\n\n<pre><code>use Net::Bluetooth;\nuse Data::Dumper;\n\nprint \"Get remote devices...\\n\";\nmy $rDevice = get_remote_devices();\nprint Dumper $rDevice;\n\nmy $addr = \"00:16:53:A5:3E:50\";\nprint \"SDP search...\\n\";\nmy @spd = sdp_search($addr, \"\", \"\"); # LegoBoost\nprint Dumper \\@spd;\n</code></pre>\n\n<p>returns <code>undef</code> and <code>[undef]</code>. I even tried as root, but no luck.</p>\n\n<p>I also tried to connect to this device:</p>\n\n<pre><code>print \"Connect to device...\\n\";\nmy $obj = Net::Bluetooth-&gt;newsocket(\"RFCOMM\");\ndefined($obj) or die \"socket error $!\\n\";\nprint \"Socket got \", Dumper $obj;\nsystem 'lsof', '-p', $$;\n\nmy $port = 14;\nif($obj-&gt;connect($addr, $port) != 0) { die \"connect error: $!\\n\";}\nprint \"Connected...\\n\";\nsleep 5;\n\n#### create a Perl filehandle for reading and writing\nmy $fd = $obj-&gt;perlfh();\nprint Dumper $fd;\nclose $fd or die;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Connect to device...\nSocket got $VAR1 = bless( {\n                 'PROTO' =&gt; 'RFCOMM',\n                 'SOCK_FD' =&gt; 4\n               }, 'Net::Bluetooth' );\nconnect error: Host is down\n</code></pre>\n\n<p>Any idea is appreciated!</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["perl", "hash", "find"], "answers": [{"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1536074232, "creation_date": 1536074232, "answer_id": 52169477, "question_id": 52168835, "link": "https://stackoverflow.com/questions/52168835/compare-all-files-in-two-directories-using-find-command-in-sunos/52169477#52169477", "title": "Compare all files in two Directories using find command in sunOS", "body": "<p>This is because of <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">operator precedence</a>, you could use <code>and</code> instead of <code>&amp;&amp;</code>:</p>\n\n<pre><code>find( sub { -f and $files1{$_} = $File::Find::name }, $dir1);\n</code></pre>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52169477, "answer_count": 1, "score": 0, "last_activity_date": 1536074232, "creation_date": 1536072218, "question_id": 52168835, "link": "https://stackoverflow.com/questions/52168835/compare-all-files-in-two-directories-using-find-command-in-sunos", "title": "Compare all files in two Directories using find command in sunOS", "body": "<p>I am trying to traverse in two directories and compare each file and find the differences in them\nThe find command which iam using to save file names and the data using a perl hash  is apparantly  failaing\nI am using SunS 5.10 ,\nThe code below would work on Linux OS</p>\n\n<blockquote>\n  <p>Code Snippet that is failing </p>\n</blockquote>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find;\n\nmy (%files1, %files2);\nmy ($dir1, $dir2) = @ARGV;\nfind( sub { -f &amp;&amp; $files1{$_} = $File::Find::name }, $dir1);\nfind( sub { -f &amp;&amp; $files2{$_} = $File::Find::name }, $dir2);\n</code></pre>\n\n<blockquote>\n  <p>Error</p>\n</blockquote>\n\n<pre><code>perl -c test_compare.pl\nCan't modify logical and (&amp;&amp;) in scalar assignment at test_compare.pl line 9, near \"$File::Find::name }\"\ntest_compare.pl had compilation errors.\n</code></pre>\n"}, {"tags": ["mysql", "perl", "utf-8", "dbi", "utf8mb4"], "comments": [{"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536084744, "post_id": 52168579, "comment_id": 91294450, "body": "Does &#39;$dsn&#39; contain &#39;mysql_enable_utf8=1&#39;?  I&#39;m not sure the bug you&#39;re pointing to is your problem, as that&#39;s about DBD::mysql not converting &#39;latin1&#39; variables to &#39;utf8&#39;; but  $searchExpression should be already utf-8 encoded because of &#39;use utf8;&#39; at the top.  Also, are you sure you retrieve the utf-8 data correctly? Try with fields containing not just western/latin1 characters (&#228;,&#252;,etc) but also \u0105,\u0103, \u0448, \u044f."}, {"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536131278, "post_id": 52168579, "comment_id": 91308156, "body": "I did specify the mysql_enable_utf8=1 in the connect, but I have now also added it to the $dns, with no differences. I now also added a row with the characters mentioned above, they are retrieved correctly. It seems that only the direction perl-&gt;mysql has problems. (I don&#39;t insert/update data from perl, only query it or as query filter parameter)"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536136968, "post_id": 52168579, "comment_id": 91311510, "body": "What does a  &#39;warn &quot;utf8 &quot;, utf8::is_utf8($searchExpression) ? &quot;on\\n&quot; : &quot;off\\n&quot;;&#39; just before the $sth-&gt;execute line says?"}, {"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536140512, "post_id": 52168579, "comment_id": 91313837, "body": "@mosvy it displays: utf8 on"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536152365, "post_id": 52168579, "comment_id": 91321168, "body": "I&#39;ve just tried on a older debian wheezy (libdbd-mysql-perl_4.021-1+deb7u3, libdbi-perl_1.622-1+deb7u1) but wasn&#39;t able to reproduce. Sorry. The only thing that I can think of is that the bug is elsewhere, and $searchExpression was already doubly encoded to utf8 before being passed to $sth-&gt;execute; but you probably checked that already."}, {"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1536156537, "post_id": 52168579, "comment_id": 91324060, "body": "@mosvy Thanks, that was the hint I needed. It&#39;s now working. See answer for the solution."}], "answers": [{"tags": [], "owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "is_accepted": false, "score": 0, "last_activity_date": 1536156503, "creation_date": 1536156503, "answer_id": 52187183, "question_id": 52168579, "link": "https://stackoverflow.com/questions/52168579/work-arround-the-perl-dbdmysql-utf-8-bug/52187183#52187183", "title": "Work arround the perl DBD::mysql UTF-8 bug", "body": "<p>It turned out,\nthat the string (received via Net::LDAP::Server) was already in some kind of utf8 encoding, and then the mysql driver did encode it once more.</p>\n\n<p>Solved the problem by adding this code</p>\n\n<pre><code>use Encode qw( decode );\nmy $decoded = eval { decode('UTF-8', $encoded, Encode::FB_CROAK) }\n</code></pre>\n\n<p>Code taken from this post: <a href=\"https://stackoverflow.com/questions/11691554/the-proper-way-of-encoding-detection-in-perl\">The proper way of encoding detection in perl</a></p>\n\n<p>Thanks for the hint about double encoding to mosvy</p>\n"}], "owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536156503, "creation_date": 1536071370, "last_edit_date": 1536131941, "question_id": 52168579, "link": "https://stackoverflow.com/questions/52168579/work-arround-the-perl-dbdmysql-utf-8-bug", "title": "Work arround the perl DBD::mysql UTF-8 bug", "body": "<p>We have a software written in perl which retrieves data from a mysql database.\nFor this we use the DBD::mysql interface</p>\n\n<p>We can retrieve all data correctly, the db is UTF8MB4 and the perl application uses UTF-8.</p>\n\n<p>The code to retrieve the sql result is:</p>\n\n<pre><code>use utf8;\nuse encoding 'utf8';\n\n...\nmy $dsn = \"DBI:mysql:database=mydatabase;mysql_enable_utf8=1\";\nmy $dbh = DBI-&gt;connect($dsn, $userid, $password, { mysql_enable_utf8 =&gt; 1 } ) or die $DBI::errstr;\n\n...\n\nmy $sth = $dbh-&gt;prepare(\"SELECT addressid, \n                            company, firstname, lastname, \n                            address, zip, city, country,\n                            phone, mobile, home,\n                            speeddial_phone, speeddial_mobile, speeddial_home,\n                            fax, email\n                        FROM address\n                        WHERE (firstname like ? or lastname like ? or company like ?)\n                        LIMIT $sizeLimit\n                        \");\n$sth-&gt;execute(  $searchExpression, $searchExpression, $searchExpression) or die $DBI::errstr;\n</code></pre>\n\n<p>As long as the $searchExpression is containing normal characters, it works fine.\nBut as soon as we query with special characters notin ASCII, for example \u00e9 \u00f6 \u00e4 \u00fc and similar, we don't get a empty result set back.</p>\n\n<p>According to this post, this is dues to a bug in the dbd::mysql drivers before version 4.041_01</p>\n\n<p><a href=\"http://blogs.perl.org/users/mike_b/2016/12/dbdmysql-all-your-utf-8-bugs-are-belong-to-us.html\" rel=\"nofollow noreferrer\">http://blogs.perl.org/users/mike_b/2016/12/dbdmysql-all-your-utf-8-bugs-are-belong-to-us.html</a></p>\n\n<p>I have tested different things, but to no avail.</p>\n\n<p>I did turn on request logging in the mysql server and there I see that the parameters with special characters are comming in in a wrong encoding.</p>\n\n<p>Here the output of the mysql log to file:</p>\n\n<pre><code>Time                 Id Command    Argument\n180905  9:17:06   403 Connect   inno-ldap-db@localhost on phonebook_innovaphone\n                  403 Query     SELECT addressid,\n                                company, firstname, lastname,\n                                address, zip, city, country,\n                                phone, mobile, home,\n                                speeddial_phone, speeddial_mobile, speeddial_home,\n                                fax, email\n                            FROM address\n                            WHERE companyid='1' and (firstname like 'andr\u00c3\u00a9%' or lastname like 'andr\u00c3\u00a9%' or company like 'andr\u00c3\u00a9%' )\n                            LIMIT 25\n                  403 Quit\n</code></pre>\n\n<p>Since we can't currently upgrade the system (it's debian 7, which includes only older packages like 4.021-1+deb7u3) I would need to implement a work arround the problem.</p>\n\n<p>Either some magic to pre-encode/decode the parameters, or would the odbc driver perhaps not experience this bug?</p>\n"}, {"tags": ["php", "linux", "perl", "centos7", "oracle12c"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536085604, "post_id": 52167602, "comment_id": 91294840, "body": "Have you checked if the file <code>&#47;usr&#47;local&#47;lib64&#47;perl5&#47;auto&#47;DBD&#47;Oracle&#47;Oracle.so</code> exists?"}, {"owner": {"reputation": 1, "user_id": 10314645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbad582f0affa666f73ce73be7a1fd94?s=128&d=identicon&r=PG&f=1", "display_name": "Duha Hamad", "link": "https://stackoverflow.com/users/10314645/duha-hamad"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536129648, "post_id": 52167602, "comment_id": 91307283, "body": "@H&#229;konH&#230;gland yes i did and the file exists."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536136642, "post_id": 52167602, "comment_id": 91311313, "body": "Ok, sorry but I am not familiar with running <code>perl</code> from a web server so I think I cannot give good advice here. You may try <a href=\"https://www.google.com/search?q=libclntsh.so+cannot+open+shared+object+file&amp;oq=libclntsh.so\" rel=\"nofollow noreferrer\">google</a> or debug DynaLoader.pm. Locate its source file, and go to line 190 and try to understand what is going on.."}], "answers": [{"comments": [{"owner": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1560832642, "post_id": 56631864, "comment_id": 99854130, "body": "In almost all cases it&#39;s easier to follow the <a href=\"https://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html#ic_x64_inst\" rel=\"nofollow noreferrer\">Instant Client installation instructions</a> recommendation and use <code>ldconfig</code> to set the path globally.  Then you never have to worry about setting LD_LIBRARY_PATH."}, {"owner": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "reply_to_user": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1560867201, "post_id": 56631864, "comment_id": 99872018, "body": "Fair enough - <code>ldconfig</code> sure is a good way to &quot;make sure the corresponding path is present in <code>LD_LIBRARY_PATH</code>&quot;."}], "tags": [], "owner": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "is_accepted": false, "score": 1, "last_activity_date": 1560776390, "creation_date": 1560776390, "answer_id": 56631864, "question_id": 52167602, "link": "https://stackoverflow.com/questions/52167602/cant-load-usr-local-lib64-perl5-auto-dbd-oracle-oracle-so-for-module-dbdor/56631864#56631864", "title": "Can&#39;t load &#39;/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so&#39; for module DBD::Oracle: libclntsh.so.12.1", "body": "<p>Actually, the error message contains the important pointer (emphasis mine):</p>\n\n<blockquote>\n  <p>install_driver(Oracle) failed: Can't load\n  '/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so' for module\n  DBD::Oracle: <strong>libclntsh.so.12.1: cannot open shared object file: No\n  such file or directory</strong> at /usr/lib64/perl5/DynaLoader.pm line 190. at\n  (eval 17) line 3. Compilation failed in require at (eval 17) line 3.\n  Perhaps a required shared library or dll isn't installed where\n  expected at (eval 10) line 22698.</p>\n</blockquote>\n\n<p>This problem arises when <a href=\"https://www.oracle.com/database/technologies/instant-client/downloads.html\" rel=\"nofollow noreferrer\">Oracle's \"instant client\"</a> libraries are not available via the <code>LD_LIBRARY_PATH</code> environment variable. This set of libraries contains (among others) <code>libclntsh.so</code> (the suffix is version-dependant). Once you have it installed, just make sure the corresponding path is present in <code>LD_LIBRARY_PATH</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10314645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbad582f0affa666f73ce73be7a1fd94?s=128&d=identicon&r=PG&f=1", "display_name": "Duha Hamad", "link": "https://stackoverflow.com/users/10314645/duha-hamad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3001, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560776390, "creation_date": 1536068113, "last_edit_date": 1536068693, "question_id": 52167602, "link": "https://stackoverflow.com/questions/52167602/cant-load-usr-local-lib64-perl5-auto-dbd-oracle-oracle-so-for-module-dbdor", "title": "Can&#39;t load &#39;/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so&#39; for module DBD::Oracle: libclntsh.so.12.1", "body": "<p>When trying to run a perl script that creates a new oracle database from a PHP web page, an error is raised.</p>\n\n<ul>\n<li>My PHP page is hosted at linux server (centos7)</li>\n<li><p>Updated the following environment variables:</p>\n\n<p><code>export ORACLE_HOME=oracle home path\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib\nexport PATH=$ORACLE_HOME/bin:$PATH</code></p></li>\n<li><p>The perl tool is executed from PHP code after clicking on a HTML button:</p>\n\n<p><code>exec(\"perl scriptName.pl\" )</code></p></li>\n<li><p>The following error is raised:</p>\n\n<blockquote>\n  <p>install_driver(Oracle) failed: Can't load '/usr/local/lib64/perl5/auto/DBD/Oracle/Oracle.so' for module DBD::Oracle: libclntsh.so.12.1: cannot open shared object file: No such file or directory at /usr/lib64/perl5/DynaLoader.pm line 190.\n  at (eval 17) line 3.\n  Compilation failed in require at (eval 17) line 3.\n  Perhaps a required shared library or dll isn't installed where expected\n  at (eval 10) line 22698.</p>\n</blockquote></li>\n<li><p>Even though running the perl script alone without calling from web php page by executing: <code>\"perl script.pl\"</code> on the linux server, the code executed and no errors raised.</p></li>\n</ul>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 36320, "user_id": 247893, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc9c3f0c25ae566036d6990af7dde484?s=128&d=identicon&r=PG", "display_name": "h2ooooooo", "link": "https://stackoverflow.com/users/247893/h2ooooooo"}, "edited": false, "score": 0, "creation_date": 1536047195, "post_id": 52161053, "comment_id": 91272108, "body": "This looks like <a href=\"http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc\" rel=\"nofollow noreferrer\">NOWDOC</a>. They&#39;re also explained in PERL on the <a href=\"https://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow noreferrer\">Here document wikipedia page</a>"}], "answers": [{"tags": [], "owner": {"reputation": 809, "user_id": 7659430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWGmO.png?s=128&g=1", "display_name": "simlev", "link": "https://stackoverflow.com/users/7659430/simlev"}, "is_accepted": true, "score": 3, "last_activity_date": 1536052528, "last_edit_date": 1536052528, "creation_date": 1536050617, "answer_id": 52162268, "question_id": 52161053, "link": "https://stackoverflow.com/questions/52161053/what-is-meaning-of-in-perl-and-implementation-in-php/52162268#52162268", "title": "What is meaning of &quot;&lt;&lt;&quot;, &quot;--&quot; in perl and implementation in php?", "body": "<p>Nothing very different from PHP actually.</p>\n\n<ul>\n<li><p><code>&lt;&lt;</code> Heredoc, also present in <a href=\"https://secure.php.net/manual/it/language.types.string.php#language.types.string.syntax.heredoc\" rel=\"nofollow noreferrer\">PHP</a> with slight differences:</p>\n\n<pre><code>echo (&lt;&lt;&lt;\"POST_DATA\"\nFirst line\nSecond line\nPOST_DATA\n);\n</code></pre></li>\n<li><p><code>--</code> Variable decrease, as in <code>&lt;?php $a=2; echo --$a;</code></p></li>\n</ul>\n\n<p><strong>Note:</strong></p>\n\n<p>Of course, inside a Heredoc <code>--</code> is just text.</p>\n\n<hr>\n\n<p><strong>Suggestion:</strong></p>\n\n<p>If you don't fully understand the Perl, try to run it (it's not evil code).</p>\n\n<pre><code>my $boundary = 'Nobody-has-the-intention-to-erect-a-wall';\nprint(&lt;&lt;\"POST_DATA\");\n\n--$boundary\nContent-Disposition: form-data; name=\"num_result\"\nContent-Type: text/plain\n\n$num_result\n--$boundary\nContent-Disposition: form-data; name=\"img\"; filename=\"search.jpg\"\nContent-Type: image/jpeg\n\n$image\n--$boundary--\nPOST_DATA\n</code></pre>\n\n<p>Will yield:</p>\n\n<pre><code>\u00a0\n--Nobody-has-the-intention-to-erect-a-wall\nContent-Disposition: form-data; name=\"num_result\"\nContent-Type: text/plain\n\n\n--Nobody-has-the-intention-to-erect-a-wall\nContent-Disposition: form-data; name=\"img\"; filename=\"search.jpg\"\nContent-Type: image/jpeg\n\n\n--Nobody-has-the-intention-to-erect-a-wall--\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1536052739, "creation_date": 1536052739, "answer_id": 52162912, "question_id": 52161053, "link": "https://stackoverflow.com/questions/52161053/what-is-meaning-of-in-perl-and-implementation-in-php/52162912#52162912", "title": "What is meaning of &quot;&lt;&lt;&quot;, &quot;--&quot; in perl and implementation in php?", "body": "<blockquote>\n<pre><code>$req2-&gt;content(&lt;&lt;\"POST_DATA\"); #what means this?\n</code></pre>\n</blockquote>\n\n<p>The <code>&lt;&lt;\"POST_DATA\"</code> starts a <a href=\"https://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow noreferrer\">HERE document</a>, which is essentially a long string. The double quotes <code>\"\"</code> tell Perl to do <a href=\"https://en.wikipedia.org/wiki/String_interpolation\" rel=\"nofollow noreferrer\">string interpolation</a>. That means that variables inside the string will be replaced with their content. The string ends when the parser encounters the delimiter, which in this case is the string <code>POST_DATA</code>.</p>\n\n<p>The <code>--</code> you are referring to is not an operator. It's used inside of the string. The program sends a <a href=\"https://en.wikipedia.org/wiki/MIME#Form-Data\" rel=\"nofollow noreferrer\"><code>multipart/formdata</code></a> form over HTTP. Look at <a href=\"https://tools.ietf.org/html/rfc7578\" rel=\"nofollow noreferrer\">RFC 7578</a> if you are interested in the technical details. Essentially, each part of the request body represents one document. It can be multi-line and contain lots of information. The boundary can be set in the HTTP headers, and is typically a long, random string that would not appear in any of the body parts. See <a href=\"https://stackoverflow.com/a/20321259/1331451\">this answer</a> for a more detailed explanation.</p>\n"}], "owner": {"reputation": 31, "user_id": 10292752, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ek08rqIJWA8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOwZUei0Aut5hzmTt7JTILgNr8-SQ/mo/photo.jpg?sz=128", "display_name": "JY Lee", "link": "https://stackoverflow.com/users/10292752/jy-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52162268, "answer_count": 2, "score": 1, "last_activity_date": 1536053485, "creation_date": 1536046324, "last_edit_date": 1536053485, "question_id": 52161053, "link": "https://stackoverflow.com/questions/52161053/what-is-meaning-of-in-perl-and-implementation-in-php", "title": "What is meaning of &quot;&lt;&lt;&quot;, &quot;--&quot; in perl and implementation in php?", "body": "<p>I am converting some Perl code to PHP.<br>\nHowever, I do not know much about Perl, so I have to code it with a rough meaning.  </p>\n\n<p>And, I do not understand what the below Perl code means...</p>\n\n<p>What is the meaning of <code>$req2-&gt;content(&lt;&lt;\"POST_DATA\")</code> and <code>--$boundary</code>?<br>\nI've searched the Perl <a href=\"https://perldoc.perl.org/\" rel=\"nofollow noreferrer\">documentation</a>, but it's too hard to find.</p>\n\n<p>PHP code:</p>\n\n<pre><code>...\n$boundary= 'Nobody-has-the-intention-to-erect-a-wall'; \n\n$req2 = curl_init($search_url); \ncurl_setopt($req2, CURLOPT_SSL_VERIFYPEER, 0); \ncurl_setopt($req2, CURLOPT_CUSTOMREQUEST, \"POST\"); \ncurl_setopt($req2, CURLOPT_POSTFIELDS, $data_string); \ncurl_setopt($req2, CURLOPT_RETURNTRANSFER, true); \ncurl_setopt($req2, CURLOPT_COOKIE, $cookie); \ncurl_setopt($req2, CURLOPT_HTTPHEADER, array( \n'Content-Type: multipart/form-data;boundary='.$boundary, \n'Content-Length: ' . strlen($data_string)) \n); \n$result= curl_exec($req2); \n...\n</code></pre>\n\n<p>Perl code:</p>\n\n<pre><code>...\nmy $boundary= 'Nobody-has-the-intention-to-erect-a-wall';\n$req2-&gt;content_type('multipart/form-data;boundary='.$boundary);\n$req2-&gt;header(\"Cookie\"=&gt;\"access_token_cookie=$access_token_cookie; csrf_access_token=$csrf_access_token\");\n\n$req2-&gt;content(&lt;&lt;\"POST_DATA\"); #what means this?\n\n--$boundary\nContent-Disposition: form-data; name=\"num_result\"\nContent-Type: text/plain\n\n$num_result\n--$boundary\nContent-Disposition: form-data; name=\"img\"; filename=\"search.jpg\"\nContent-Type: image/jpeg\n\n$image\n--$boundary--\nPOST_DATA\n\nmy $res = $ua-&gt;request($req2);\n...\n</code></pre>\n"}, {"tags": ["perl", "hash", "subroutine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1536046157, "post_id": 52160953, "comment_id": 91271511, "body": "General advice: Always <code>use strict;</code>. Don&#39;t call your variables <code>$a</code> or <code>$b</code> (they have a special meaning in <code>sort</code>). Don&#39;t call subroutines with <code>&amp;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536046301, "post_id": 52160953, "comment_id": 91271594, "body": "Not an exact duplicate, but similar: <a href=\"https://stackoverflow.com/questions/8481405/how-to-pass-a-hash-by-reference-in-perl\" title=\"how to pass a hash by reference in perl\">stackoverflow.com/questions/8481405/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536046604, "post_id": 52160953, "comment_id": 91271755, "body": "thanks Melpomene. I have updated the code as per your suggestion. Since it&#39;s a just sample code so i didn&#39;t care about strict function."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1536046657, "post_id": 52160953, "comment_id": 91271780, "body": "<i>Since it&#39;s a just sample code so i didn&#39;t care about strict function</i> That&#39;s never a good idea :-)"}, {"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1536053141, "post_id": 52160953, "comment_id": 91275509, "body": "Thanks Dave. I was looking a way to pass the optional arguments with hashes using perl subroutine. I got it working and here, is my sample code"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1536053222, "post_id": 52160953, "comment_id": 91275561, "body": "post your code in an answer, saying you found how to solve your problem (you could even accept your answer), it will be more readable ;)"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1536052979, "post_id": 52161222, "comment_id": 91275402, "body": "Thanks Dave. I was looking a way to pass the optional arguments with hashes using perl subroutine. I got it working and here, is my sample code"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1536047526, "last_edit_date": 1536047526, "creation_date": 1536046910, "answer_id": 52161222, "question_id": 52160953, "link": "https://stackoverflow.com/questions/52160953/can-i-pass-mix-type-of-optional-arguments-to-a-subroutine/52161222#52161222", "title": "Can I pass mix type of optional arguments to a subroutine?", "body": "<p>You call your subroutine like this:</p>\n\n<pre><code>my $c=sum(3,%h1);\n</code></pre>\n\n<p>And inside your subroutine, you access the parameters like this:</p>\n\n<pre><code>   my $var1=shift;\n   my $var2=shift;\n\n   my %hash1=@_;\n</code></pre>\n\n<p>There seems to be an obvious discrepancy here. You're passing a scalar and a hash to the subroutine, but inside your subroutine, you're expecting <strong>two</strong> scalars and a hash.</p>\n\n<p>So perhaps it will work as you expect it to if you remove the <code>my $var2 = shift</code> line.</p>\n\n<p>It's not really clear what your subroutine is meant to do. If you were to explain that, then we could probably be a little more help.</p>\n\n<p><strong>Update:</strong> You have <code>Data::Dumper</code> in your code. Why not use it to try to understand what is going on.</p>\n\n<pre><code>print Dumper(\\@_), \"\\n\";\nmy $var1=shift;\nmy $var2=shift;\n\nmy %hash1=@_;\nprint Dumper($var1, $var2, \\%hash1), \"\\n\";\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>$VAR1 = [\n          3,\n          'b',\n          3,\n          'a',\n          2\n        ];\n\nOdd number of elements in hash assignment at test line 11.\n$VAR1 = 3;\n$VAR2 = 'b';\n$VAR3 = {\n          '3' =&gt; 'a',\n          '2' =&gt; undef\n        };\n</code></pre>\n\n<p>Which shows a couple of interesting things:</p>\n\n<ul>\n<li>The hash being \"unrolled\" into a list before being put into <code>@_</code>.</li>\n<li>The warning you get when you initialise a hash from a list with an odd number of elements.</li>\n<li>Your <code>%hash1</code> variable with incorrect keys and values.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1536076178, "post_id": 52163160, "comment_id": 91290531, "body": "So you&#39;ve learned that a) optional arguments go at the end of the parameter list and b) it&#39;s better to pass hashes and arrays to subroutines as references."}], "tags": [], "owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "is_accepted": false, "score": 0, "last_activity_date": 1536053481, "creation_date": 1536053481, "answer_id": 52163160, "question_id": 52160953, "link": "https://stackoverflow.com/questions/52160953/can-i-pass-mix-type-of-optional-arguments-to-a-subroutine/52163160#52163160", "title": "Can I pass mix type of optional arguments to a subroutine?", "body": "<p>Thanks everyone. This is how we can pass optional arguments to a subroutine in perl with type mixed</p>\n\n<pre><code>#!/bin/env perl\nuse warnings;\nuse strict;\nuse Data::Dumper;\nmy %h1 = ( a=&gt; 2, b=&gt;3); \nsub sum {\n\n   my ($hash1,$var1,$var2)=@_;\n   #my($a,$b)=@_;\n   my $i=0;\n   foreach my $val (keys %{$hash1}) {\n   $i=$i+$hash1-&gt;{$val};\n   }\n   if (defined $var2 ) {\n    return ($i+$var1+$var2);\n   } else {\n    return ($i+$var1);\n   }\n}\n\nmy $c=sum(\\%h1,3);\nprint $c;\n</code></pre>\n\n<p>Please correct me if I missed something.</p>\n\n<p>Regards,\nDivesh</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8796501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pICuv.jpg?s=128&g=1", "display_name": "noxeor", "link": "https://stackoverflow.com/users/8796501/noxeor"}, "is_accepted": false, "score": 0, "last_activity_date": 1539361928, "creation_date": 1539361928, "answer_id": 52783635, "question_id": 52160953, "link": "https://stackoverflow.com/questions/52160953/can-i-pass-mix-type-of-optional-arguments-to-a-subroutine/52783635#52783635", "title": "Can I pass mix type of optional arguments to a subroutine?", "body": "<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse JSON;\nuse feature qw(say);\n\nargs_in( 'test', { foo =&gt; 'bar' }, [\"one\", \"two\", \"three\"] );\n\nsub args_in {\n  my $args_aref = parse_args( @_ );\n  say to_json $args_aref;\n}\n\nsub parse_args {\n  my @ary;\n  foreach( @_ ) {\n    my %hash;\n    if (ref $_) {\n      $hash{type} = ref $_;\n    } else {\n      $hash{type} = 'SCALAR';\n    }\n    $hash{value} = $_;\n    push @ary, \\%hash;\n  }\n  return \\@ary;\n}\n</code></pre>\n\n<p>Results:    </p>\n\n<pre><code>[\n    {\n        \"value\": \"test\",\n        \"type\": \"SCALAR\"\n    },\n    {\n        \"value\": {\n            \"foo\": \"bar\"\n        },\n        \"type\": \"HASH\"\n    },\n    {\n        \"value\": [\n            \"one\",\n            \"two\",\n            \"three\"\n        ],\n        \"type\": \"ARRAY\"\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1539361928, "creation_date": 1536045953, "last_edit_date": 1536046578, "question_id": 52160953, "link": "https://stackoverflow.com/questions/52160953/can-i-pass-mix-type-of-optional-arguments-to-a-subroutine", "title": "Can I pass mix type of optional arguments to a subroutine?", "body": "<p>I am trying to pass a hash and optional list of variables to a subroutine in hash but its not working. Could you please correct below sample code to help me with the approach?</p>\n\n<p>My sample code looks like</p>\n\n<pre><code>#!/bin/env perl\nuse warnings;\nuse strict;\nuse Data::Dumper;\nmy %h1 = ( a=&gt; 2, b=&gt;3);\nsub sum {\n   my $var1=shift;\n   my $var2=shift;\n\n   my %hash1=@_;\n   #my($a,$b)=@_;\n   my $i=0;\n   foreach my $val (keys %hash1) {\n        $i=$i+$hash1{$val};\n   }\n   if ( not defined $var2 ) {\n        return ($i+$var1);\n   } else {\n        return ($i+$var1+$var2);\n   }\n}\nmy $c=sum(3,%h1);\nprint $c;\n</code></pre>\n"}, {"tags": ["javascript", "regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536038268, "post_id": 52158979, "comment_id": 91268153, "body": "A regular expression always matches a contiguous substring of the input, it can&#39;t return anything with gaps."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536038644, "post_id": 52158979, "comment_id": 91268262, "body": "Try <code>&quot;alliteration&quot;.replace(&#47;^(.)|[aeiou]&#47;g, &#39;$1&#39;);</code>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1536040033, "post_id": 52158979, "comment_id": 91268672, "body": "Please add a proper language tag. Regex doesn&#39;t exist in a vacuum. While you may be able to translate the regex, the methods you use to apply it will generally be somewhat language specific. For example, the existing answer wouldn&#39;t work without significant modifications in Python."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536166428, "post_id": 52158979, "comment_id": 91329904, "body": "with perl you could do <code>perl -pe &quot;s&#47;(^.)|[aeiou]&#47;$1&#47;g&quot; file.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536038680, "post_id": 52159263, "comment_id": 91268274, "body": "Not all major browsers support lookbehinds yet."}, {"owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1536039712, "post_id": 52159263, "comment_id": 91268577, "body": "@MadPhysicist, you want comment for question, don&#39;t you ?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1536039930, "post_id": 52159263, "comment_id": 91268638, "body": "My mistake, I misread your name as an editor to the question as you being the author. I upvoted your answer regardless."}, {"owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "edited": false, "score": 0, "creation_date": 1536040502, "post_id": 52159263, "comment_id": 91268816, "body": "Why you vote up if I am author ?"}], "tags": [], "owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "is_accepted": true, "score": 1, "last_activity_date": 1536038810, "last_edit_date": 1536038810, "creation_date": 1536038465, "answer_id": 52159263, "question_id": 52158979, "link": "https://stackoverflow.com/questions/52158979/regexp-that-returns-the-first-letter-and-all-subsequent-consonants/52159263#52159263", "title": "regexp that returns the first letter and all subsequent consonants", "body": "<p>You can try this (javascript):</p>\n\n<pre><code>/(?!^)[eyuioa]/g\n\n\"word\".replace(/(?!^)[eyuioa]/g, \"\"); // \"wrd\"\n\"alliteration\".replace(/(?!^)[eyuioa]/g, \"\"); // \"alltrtn\"\n</code></pre>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1536052740, "accepted_answer_id": 52159263, "answer_count": 1, "score": -1, "last_activity_date": 1536054639, "creation_date": 1536036557, "last_edit_date": 1536054639, "question_id": 52158979, "link": "https://stackoverflow.com/questions/52158979/regexp-that-returns-the-first-letter-and-all-subsequent-consonants", "closed_reason": "Needs more focus", "title": "regexp that returns the first letter and all subsequent consonants", "body": "<p>What's a regexp that returns the first letter and all subsequent consonants from a word?</p>\n\n<p>In other words it should do</p>\n\n<pre><code>\"word\" =&gt; \"wrd\"\n\"alliteration\" =&gt; \"alltrtn\"\n</code></pre>\n\n<p>Is it possible to do it in one shot? with a substitution?</p>\n\n<p>Ideally in perl but I can translate from Javascript or maybe Python.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 1, "creation_date": 1536031571, "post_id": 52158323, "comment_id": 91266832, "body": "what is the word contains an underscore but does not contain a forward slash? What do you mean by saying that your delimiter is a backslash? Can you show it in your input?"}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536032359, "post_id": 52158409, "comment_id": 91267007, "body": "My string has an underscore and a forward slash.  If it has an underscore or forward slash, then match with a hyphen."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536032456, "post_id": 52158409, "comment_id": 91267028, "body": "@Minimalist  I don&#39;t understand that.  (1) Your &quot;<i>Input</i>&quot; shows <i>either</i> <code>_</code> <i>or</i> <code>&#47;</code>.  (2) The first sentence in your comment says that it&#39;s both, while the second sentence says that it&#39;s either."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536032543, "post_id": 52158409, "comment_id": 91267045, "body": "Apologize.  They are two separate strings, but the outcome is the same, a hyphen."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536032616, "post_id": 52158409, "comment_id": 91267057, "body": "Ah, OK; so it can be a <code>_</code> (in some strings), or it can be a <code>&#47;</code> (in some other strings).  That&#39;s what I assumed in this answer, and it works for that.  The <code>$string</code> in my answer can be either."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536033671, "post_id": 52158409, "comment_id": 91267243, "body": "It&#39;s better to replace the non-capturing group with a character class <code>[_&#47;]</code>. Also we should note that current regex matches <code>&#47;_APPLE</code> too which may not be desirable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536039918, "post_id": 52158409, "comment_id": 91268635, "body": "@revo  Good points, added another regex and a comment, thank you. I don&#39;t see that the character class is &quot;<i>better</i>&quot; but it is surely nicer here."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536041075, "post_id": 52158409, "comment_id": 91269042, "body": "An alternation provides engine with two different paths at a point. Engine chooses one to approach then chooses the other one if previous path fails to match. So it is possible for an engine to take an extra step depending on input string. Although it&#39;s one extra step, it costs since it is not only one extra step. Engine may go much further then needs a backtrack. So we are not sure about how many steps engine should take to find a successful match. Having that said, the best practice would be using a <code>[..]</code> whenever we are doing sth like <code>(X|Y|..)</code>. So we could say it&#39;s both better and nicer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536042803, "post_id": 52158409, "comment_id": 91269790, "body": "@revo Well, yes. But with the character class the engine also tries the first character first and then has to go back, no? Or is character class processed differently?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536044509, "post_id": 52158409, "comment_id": 91270641, "body": "Engines implement character classes differently. It&#39;s like looking for <code>x</code> among a list of characters <code>[a,b,c..]</code>. It&#39;s fast and a failure / match happens earlier. On the other hand groups couldn&#39;t be treated as a list of characters since they are supposed to enclose large expressions. It means engine should go with each path till a failure or success and it takes much more time."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536049945, "post_id": 52158409, "comment_id": 91273569, "body": "@revo Alright, thank you; I don&#39;t know how they are implemented.  Edited"}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536058566, "post_id": 52158409, "comment_id": 91278748, "body": "@zdim.  Exactly.  Clean and Efficient.  Works well in my code.  Thanks again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536126666, "post_id": 52158409, "comment_id": 91305860, "body": "@Minimalist Thank you for feedback. Let me know if questions pop up"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1536049987, "last_edit_date": 1536049987, "creation_date": 1536031784, "answer_id": 52158409, "question_id": 52158323, "link": "https://stackoverflow.com/questions/52158323/perl-regex-with-underscore-and-forward-slash/52158409#52158409", "title": "Perl RegEX with Underscore and Forward Slash", "body": "<p>The code has an extra (escaped) <code>/</code> and would match strings with <code>_/</code> (and <code>//</code> in the second case). That is not in your data, which has either <code>_</code> or <code>/</code>, not both.</p>\n\n<p>Also, there is no need to escape the <code>_</code>, and neither the <code>/</code> if it is not the delimiter.</p>\n\n<p>To match either of a few characters the cleanest and most efficient is the <em>character class</em></p>\n\n<pre><code>$string =~ s{[_/](\\w+)}{-$1};\n</code></pre>\n\n<p>The <em>alternation</em> also works here</p>\n\n<pre><code>$string =~ s{(?:_|/)(\\w+)}{-$1};\n</code></pre>\n\n<p>but it is more suitable when possibilities to match have more characters (<code>word|another</code>).</p>\n\n<p>There are quite a few assumptions here, given how little is specified in the question.  For one, <code>\\w</code> also matches digits and <code>_</code> along with letters. If you clarify the requirements I'll edit as needed.</p>\n\n<p>I assume that the missing closing delimiter, needed for the code to compile, is a typo in posting.</p>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 52158409, "answer_count": 1, "score": -1, "last_activity_date": 1536049987, "creation_date": 1536031000, "last_edit_date": 1536032661, "question_id": 52158323, "link": "https://stackoverflow.com/questions/52158323/perl-regex-with-underscore-and-forward-slash", "title": "Perl RegEX with Underscore and Forward Slash", "body": "<p>While there are several regex examples here showing the many variations, simply I just want to use regex in Perl to search 2 different strings with one string as an underscore(_) and the other string as a forwardslash (/) and replace each string with a hyphen (-) plus string.  I am using the delimiter backslash, however it is the incorrect output.</p>\n\n<pre><code> Input:          Output:\n _APPLE          -APPLE\n /APPLE          -APPLE\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>          $string1 =~ s/\\_\\/APPLE/-APPLE\n          $string2 =~ s/\\/\\/APPLE/-APPLE\n</code></pre>\n"}, {"tags": ["perl", "automation", "expect.pm"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1536006732, "post_id": 52152767, "comment_id": 91262021, "body": "I&#39;ve tidied your Perl code so that I could understand it. You should carefully indent anything you that you write, at least so that you can read it yourself, but especially if you are asking for help with it. The code you show doesn&#39;t even compile, so it certainly doesn&#39;t produce the output that you say it does. There is no point at all in posting code that behaves differently from the version you are having trouble with: we cannot possibly help you to fix an imaginary program. You should study <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536007191, "post_id": 52152767, "comment_id": 91262148, "body": "It is very hard to tell what the <i>real</i> output from your code is. You have enclosed some HTML output within in an <code>&lt;i&gt;</code> element, and <i>Stack Overflow</i> has formatted the resulting text. There is specific provision for posting text data of any sort: you simply add the data you want to show into your post and indent it all by four spaces. You can select the data and use <i>Ctrl-K</i> to achieve this, or you can click on the <b>{ }</b> icon to do the same thing. All of this is explained in <a href=\"https://stackoverflow.com/editing-help\"><i>Editing help</i></a> which is linked on the tool bar above every edit window."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536007462, "post_id": 52152767, "comment_id": 91262243, "body": "What do you mean by <i>&quot;This following line is printed, without being called:&quot;</i>. Are you saying that <code>my $var = $exp-&gt;send(&quot;ps -aef | grep -i app | wc -l\\n&quot;)</code> appears on the console, but <code>ps</code>, <code>grep</code>, and <code>wc</code> aren&#39;t run? That seems very unlikely."}, {"owner": {"reputation": 154, "user_id": 2721976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03fbdab9624f09a4064c0251961a451?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Vieru", "link": "https://stackoverflow.com/users/2721976/andrei-vieru"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536057526, "post_id": 52152767, "comment_id": 91278107, "body": "Hi Borodin, thank you for helping, I added the variable definition and the for loop to have the code exactly as I am compiling it.  I did italic for the output to emphasize what I have in the console after I execute the script. I don&#39;t understand why is showing in the console that variable, and my feeling is that send function in the  Expect module is not very documented and probably I miss some bits"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1536065888, "post_id": 52152767, "comment_id": 91283461, "body": "@AndreiVieru You might have to turn off terminal echo using <code>$exp-&gt;slave-&gt;stty( &#39;-echo&#39; )</code> before you spawn the <code>ssh</code>. This requires the <code>IO::Stty</code> module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536171773, "post_id": 52152767, "comment_id": 91332356, "body": "@AndreiVieru: <i>&quot;I did italic for the output to emphasize what I have in the console after I execute the script&quot;</i> Italic is inappropriate for either data or code. There is a specific markup standard for both embedded in Stack Overflow and you should use it. Please study <a href=\"https://stackoverflow.com/editing-help\"><b><i>Markdown help</i></b></a> and apply it carefully. I have done my best to improve your question, but only you can edit it to represent your situation accurately."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536172018, "post_id": 52156573, "comment_id": 91332487, "body": "I&#39;m sorry to down vote your answer, but the question itself is still in doubt, and if you want to provide a solution to a half-formed question then you need to specify the interpretation that you are solving. You have also posted unexplained code, and so diminished even the chance that others will benefit from this page."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1536011995, "creation_date": 1536011995, "answer_id": 52156573, "question_id": 52152767, "link": "https://stackoverflow.com/questions/52152767/printing-expect-output-without-calling-the-variable/52156573#52156573", "title": "Printing expect output without calling the variable", "body": "<p>You can get the value of the machine like this:</p>\n\n<pre><code># $exp-&gt;clear_accum(); # clear the accumulator if you need to\n$exp-&gt;expect( $timeout, '-re', 'root@machine\\d+');\nmy ($machine_number) = $exp-&gt;match() =~ /root@machine(\\d+)/;\n</code></pre>\n\n<p>Then you can get the number of processes like this:</p>\n\n<pre><code>$exp-&gt;clear_accum(); # clear the accumulator if you need to\n$exp-&gt;send(\"ps -aef | grep -i app | wc -l\\n\");\n$exp-&gt;expect( $timeout, '-re', '^\\d+');\nmy ($num_processes) = $exp-&gt;match() =~ /(\\d+)/;\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 2721976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03fbdab9624f09a4064c0251961a451?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Vieru", "link": "https://stackoverflow.com/users/2721976/andrei-vieru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536057226, "creation_date": 1535989164, "last_edit_date": 1536057226, "question_id": 52152767, "link": "https://stackoverflow.com/questions/52152767/printing-expect-output-without-calling-the-variable", "title": "Printing expect output without calling the variable", "body": "<p>I'm trying to understand the\n<a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\"><code>Expect</code></a>\nPerl module.</p>\n\n<p>I want to take the value and the machine from <code>$var</code>, but I couldn't make my code work even if I used regular expressions.</p>\n\n<p>I want to take from <code>$var</code> the machine and the value from the command prompt (like machine 1 - 7) but I don't know why it prints <code>$var</code> in the terminal as I didn't call the <code>$var</code> variable</p>\n\n<pre><code>$Expect::Exp_Internal =0;\nmy $admin_user = \"root\";\nmy $timeout = 40;\nmy $prompt = '~]#';\n\n\nmy @devices =qw(\nmachine1\nmachine2\nmachine3);\n\n\nforeach my $device (@devices){\nmy $exp = Expect-&gt;spawn(\"ssh\", \"-o\", \"UserKnownHostsFile /dev/null\", \"root\\@$device\");\n\n$exp-&gt;log_user(0);\n\n\nmy $seen_user = 0;\n\n\n$exp-&gt;expect(\n    $timeout,\n    [\n        qr/connecting \\(yes\\/no\\)\\? / =&gt; sub {\n            my $self = shift;\n            $self-&gt;send(\"yes\\r\");\n            exp_continue;\n        }\n    ],\n    [\n        qr/User: ?/ =&gt; sub {\n            my $self = shift;\n            if ( $seen_user == 1 ) {\n                $var .= \"Bad password on $device \\n&lt;br&gt;\";\n                $exp-&gt;soft_close();\n            }\n            #  $self-&gt;send(\"$admin_user\\n&lt;br&gt;\");\n            $seen_user = 1;\n            exp_continue;\n        }\n    ],\n    [\n        qr/$prompt/ =&gt; sub {\n            my $self = shift;\n            #    print 'first_prompt';\n        }\n    ],\n    [\n        'timeout' =&gt; sub {\n            $var .= \"timed out during login on $device\\n&lt;br&gt;\";\n        }\n    ]\n);\n\n$exp-&gt;log_user(1);\n\n# This following line is printed, without being called:\n\nmy $var = $exp-&gt;send(\"ps -aef | grep -i app | wc -l\\n\");\n\n#$var =~ s/\\D+//g;\n#print 'numbers'.$var;\n\nprint $var;\nundef $var;\n\nmy $logout_sent = 0;\n\n$exp-&gt;expect(\n    $timeout,\n    [\n        qr/$prompt/ =&gt; sub {\n            my $self = shift;\n            $exp-&gt;log_user(0);\n            # $self-&gt;send(\"ps -aef | grep -i sql | wc -l\\r\");\n            $self-&gt;send(\"logout\\r\");\n            $logout_sent = 1;\n            exp_continue;\n        }\n    ],\n\n    }],\n\n    [\n        qr/\\(y\\/N\\)/ =&gt; sub {\n            my $self = shift;\n            $self-&gt;send(\"y\");\n            print \"ok\\n&lt;br&gt;\";\n            #    exit 0;\n        }\n    ],\n    [\n        'timeout' =&gt; sub {\n            print \"timed out waiting for prompt\\n&lt;br&gt;\";\n            # exit 1;\n        }\n    ],\n    [\n        'eof' =&gt; sub {\n            if ($logout_sent) {\n                $var .= \"succesfully logged out from the $device\\n&lt;br&gt;\";\n                #exit 0;\n            }\n            else {\n                $var .=\"unexpected eof waiting for prompt on $device\\n&lt;br&gt;\";\n            }\n        }\n    ]\n);\n\n}\n</code></pre>\n\n<h3>The Output</h3>\n\n<p><i>    </p>\n\n<pre><code>&lt;br&gt;ps -aef | grep -i app | wc -l\n7\n[root@machine1 ~]# succesfully logged out from the machine1\n&lt;br&gt;ps -aef | grep -i app | wc -l\n9\n[root@machine2 ~]# succesfully logged out from the machine2\n&lt;br&gt;ps -aef | grep -i app | wc -l\n7\n[root@machine3 ~]# succesfully logged out from the machine3\n</code></pre>\n\n<p></i></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535989421, "post_id": 52152216, "comment_id": 91255979, "body": "Relevant: <a href=\"https://stackoverflow.com/q/106555/1331451\">stackoverflow.com/q/106555/1331451</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1536007894, "post_id": 52152216, "comment_id": 91262358, "body": "<i>&quot;without affecting performance and memory&quot;</i> Are you having problems with performance, or with memory? If so then you should <i>profile</i> your code to discover where the bottlenecks are, and focus on that code. If not then you are trying to optimise needlessly. The days are long gone when memory capacity or CPU power were so expensive that it was cost-effective to employ a programmer to reduce them. If you can save 64GB of memory, or reduce seconds of run time to milliseconds, then go ahead. But a different choice of data structure doesn&#39;t generally award such benefits."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1536008277, "post_id": 52152216, "comment_id": 91262478, "body": "<i>&quot;The hash references actually point to large hashes created using <code>tie</code> and <code>DB_File</code>&quot;</i> Then they&#39;re not using Perl hashes at all: you&#39;re simply using an API that is sufficiently similar to a hash access that the calls can usefully be made by dummy hash operations. If you check the <code>tied</code> hash then you will probably see that it remains empty. The memory usage is highly dependent on the way the <code>tie</code> has been written, and you shouldn&#39;t even consider copying hashes with constructs like <code>{ %$_ }</code>. This will create an &quot;ordinary&quot; hash and break the <code>tied</code> interface, so your code will be worthless."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1536008888, "post_id": 52152216, "comment_id": 91262646, "body": "<i>&quot;I was wondering whether [I really need to] dump everything in memory&quot;</i> Copying data from a <code>tied</code> hash to memory is counter-productive. Some things may still work, but you have lost the <code>tie</code> functionality as soon as you do that. You can <i>always</i> use <code>$x-&gt;{key} &#47;&#47; $y-&gt;{key}</code> (or <code>exists $x-&gt;{key} ? $x-&gt;{key} : $y-&gt;{key}</code> as <b>JGNI</b> suggests) unless you need to account for an element appearing in both hashes. You&#39;re trying to be too smart, and fixing problems that you haven&#39;t encountered yet."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1536017583, "post_id": 52152216, "comment_id": 91264497, "body": "Tied hashes aren&#39;t hashes at all. They are interfaces to subroutines. Since they&#39;re code rather than data, talking about the memory and performance of tied hashes in general makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1536017272, "last_edit_date": 1536017272, "creation_date": 1535987411, "answer_id": 52152320, "question_id": 52152216, "link": "https://stackoverflow.com/questions/52152216/does-merging-2-or-more-perl-hash-references-consume-more-or-less-twice-the-memor/52152320#52152320", "title": "Does merging 2 or more Perl hash references consume more or less twice the memory?", "body": "<p>The simple answer is yes.</p>\n\n<p>If you want all the keys from both hash refs without creating a new hashref, and assuming that you have no duplicated keys you could do something like.</p>\n\n<pre><code>use List::Util qw( uniq );\n\nmy @keys = uniq( keys( %$x ), keys( %$y ) );\n</code></pre>\n\n<p>Then to get the values from either array something like</p>\n\n<pre><code>my $value = exists $y-&gt;{$key} ? $y-&gt;{$key} : $x-&gt;{$key};\n</code></pre>\n\n<p>By the way why are you using hash refs rather than hashes and why is memory such a consideration that you needed to ask this question?</p>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1536122245, "post_id": 52157176, "comment_id": 91304445, "body": "Thanks for the object suggestion. I originally thought of just using a for loop to check where the data exists but this object approach is more readable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1536135294, "post_id": 52157176, "comment_id": 91310509, "body": "The down side is that sub/method calls are rather expensive."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1536018752, "last_edit_date": 1536018752, "creation_date": 1536018443, "answer_id": 52157176, "question_id": 52152216, "link": "https://stackoverflow.com/questions/52152216/does-merging-2-or-more-perl-hash-references-consume-more-or-less-twice-the-memor/52157176#52157176", "title": "Does merging 2 or more Perl hash references consume more or less twice the memory?", "body": "<p>Tied hashes aren't hashes at all. They are interfaces to subroutines. Since they're code rather than data, talking about the memory and performance of tied hashes in general makes no sense.</p>\n\n<p>Let's talk about ordinary hashes first.</p>\n\n<p><code>$z = { %$x, %$y };</code> will copy the scalars of <code>%$x</code> and <code>%$y</code> into <code>%$z</code>, so yes, it will take twice the memory (assuming no duplicate keys).</p>\n\n<p>You could share the scalars:</p>\n\n<pre><code>use Data::Alias qw( alias );\nmy $z = {};\nalias $z-&gt;{$_} = $x-&gt;{$_} for keys(%$x);\nalias $z-&gt;{$_} = $y-&gt;{$_} for keys(%$y);\n</code></pre>\n\n<p>You'd still use memory proportional to the number of the elements in both hash, but it would be far less than before if <code>%$x</code> and <code>%$y</code> are actually hashes. This might not save any memory for tied hashes.</p>\n\n<p>The alternative is not to actually merge the data at all. You could use a tied hash yourself...</p>\n\n<pre><code>package Tie::MergedHashes;\nuse Carp qw( croak );\nsub new     { my $pkg = shift; $pkg-&gt;TIEHASH(@_); }\nsub TIEHASH { bless [ @_ ], $_[0] }\nsub STORE   { croak(\"Not allowed\"); }\nsub FETCH   { for (@{$_[0]}) { return $_-&gt;{$_[1]} if exists($_-&gt;{$_[1]}); } return undef; }\n...\n\nmy $z = {};\ntie %$z, MergedHashes =&gt; ($y, $x);\n$z-&gt;{$key}\n</code></pre>\n\n<p>...but there's no reason to make the code look like hash. You could simply use an object.</p>\n\n<pre><code>package MergedHashes;\nuse Carp qw( croak );\nsub new   { bless [ @_ ], $_[0] }\nsub fetch { for (@{$_[0]}) { return $_-&gt;{$_[1]} if exists($_-&gt;{$_[1]}); } return undef; }\n...\n\nmy $z = MergedHashes-&gt;new($y, $x);\n$z-&gt;fetch($key)\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 52157176, "answer_count": 2, "score": 1, "last_activity_date": 1536018752, "creation_date": 1535986933, "last_edit_date": 1536008748, "question_id": 52152216, "link": "https://stackoverflow.com/questions/52152216/does-merging-2-or-more-perl-hash-references-consume-more-or-less-twice-the-memor", "title": "Does merging 2 or more Perl hash references consume more or less twice the memory?", "body": "<p>Given the following code, does the hash referenced by <code>$z</code> consume the same memory as that used by <code>( %$x, %$y)</code>, more or less?</p>\n\n<p>If so, is there a way to use a single reference to call data from the hashes referenced by either <code>$x</code> or <code>$y</code> like <code>$z-&gt;{$somekeytoXorY}</code> without affecting performance and memory?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $x = {\n    1 =&gt; 'a',\n    2 =&gt; 'b',\n};\n\nmy $y = {\n    3 =&gt; 'c',\n    4 =&gt; 'd',\n};\n\nmy $z = {\n    %$x, %$y\n};\n</code></pre>\n\n<h3>Update</h3>\n\n<p>The hash references actually point to large hashes created using <code>tie</code> and <a href=\"https://metacpan.org/pod/DB_File\" rel=\"nofollow noreferrer\"><code>DB_File</code></a>.</p>\n\n<p>I was wondering whether there is a chance I could use just a single hash to these so that I don't need to dump everything in memory. Also I may be using more than two of these at once.</p>\n"}, {"tags": ["regex", "perl", "aix"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535972517, "post_id": 52148323, "comment_id": 91246538, "body": "but you are telling it to delete each occurrence of it if the count is more than 1."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535972839, "post_id": 52148323, "comment_id": 91246699, "body": "and what is the purpose of <code>chomp</code> at the end of the script, when you printed <code>$line</code> already?"}, {"owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535972928, "post_id": 52148323, "comment_id": 91246749, "body": "yes I just editied the line  from      $line =~s/lorem1//gi;  to      $line =~s/lorem1//;  the chomp is just a leftover I forgot to delete ;)   it doesn&#39;t do anything.   What I&#39;m struggling with, is how to at the end either print the whole editied text or save it to file (that I could achieve with printing and simple &gt; in a command line bu first I need to print it somehow)  and I don&#39;t understand why at the end it prints the first line ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535977068, "post_id": 52148323, "comment_id": 91249160, "body": "I&#39;m unclear what it is that you want. You seem to want all occurrences of <code>lorem1</code> <i>after the first</i> removed from the document. Is that right? But your code does something different: It removes all instances or <code>lorem1</code> from each line where it appears twice or more. Which is correct?"}, {"owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535977607, "post_id": 52148323, "comment_id": 91249474, "body": "Hi I want to delete all occurences of lorem1 after the first occurence from the document, and at the end print on the screen the whole edited text."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536008275, "post_id": 52148323, "comment_id": 91262477, "body": "If you need a one line way to perform this, you can simply do: <code>perl -pe s&#47;lorem1.*?\\Klorem1.*&#47;&#47; yourfile.txt &gt; new_file.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535977994, "post_id": 52149727, "comment_id": 91249677, "body": "I tried Your code but it resulted with :i&#39;m executing this on aix if this will help         pierwsza linia  koniec   druga linia lorem1 koniec lorem1 lorem1   trzecia linia  koniec   czwarta linia  koniec   piata liniakoniec   szosta linia  koniec"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535978118, "post_id": 52149727, "comment_id": 91249738, "body": "@Deneth: Really? That&#39;s strange, I&#39;ve just tested it and it works. What is your perl version?"}, {"owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535978217, "post_id": 52149727, "comment_id": 91249799, "body": "5.8.2 (can&#39;t upgrade it)"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535978859, "post_id": 52149727, "comment_id": 91250100, "body": "@Deneth: Too bad :( I think <code>\\K</code> and/or <code>\\G</code> is not recognize."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535979836, "post_id": 52149727, "comment_id": 91250654, "body": "@Deneth: See my edit, this should work  with perl 5.8.2"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1536005385, "post_id": 52149727, "comment_id": 91261562, "body": "@Deneth: It is essential to provide information like the operating system you are using and the version of Perl that you have. Unless you specify otherwise, people will assume that you are running Linux of some sort and a version of Perl that is around v5.14 (which is already four years old) or better. If you are using Windows or an Apple system prior to Mac OS X, or a particularly old version of Perl then you <i>must</i> say so."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536008193, "post_id": 52149727, "comment_id": 91262454, "body": "You can simply do: <code>perl -pe s&#47;lorem1.*?\\Klorem1.*&#47;&#47; yourfile.txt&gt;new_file.txt</code>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536055222, "post_id": 52149727, "comment_id": 91276789, "body": "@Onyambu: That was (close) my first solution. Version 5.8.2 doesn&#39;t recognize <code>\\K</code>"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536071682, "post_id": 52149727, "comment_id": 91287565, "body": "@Toto i did give the solution below. Why cant it work eith \\K?.. am using 5.3.25 and it allows the usage of \\K. Anyway there is an option which does not use  \\Kin my answer below"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536072178, "post_id": 52149727, "comment_id": 91287930, "body": "@Onyambu: Have a look at my answer before editing. I&#39;ve used <code>\\K</code> and <code>\\G</code>, It didn&#39;t work with 5.8.2, I don&#39;t know if it was because of <code>\\G</code> or <code>\\K</code>."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536072758, "post_id": 52149727, "comment_id": 91288338, "body": "@Toto, I have not edited my answer. I did look at your answer. It has a double loop, meaning a higher complexity, and I was trying to avoid that. That&#39;s why I wrote a different answer which does not ue <code>\\K</code> or <code>\\G</code>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1535979837, "last_edit_date": 1535979837, "creation_date": 1535977333, "answer_id": 52149727, "question_id": 52148323, "link": "https://stackoverflow.com/questions/52148323/read-a-file-and-modify-it/52149727#52149727", "title": "Read a file and modify it", "body": "<pre><code>#!/usr/bin/perl \nuse strict;\nuse warnings;\n\n# lorem counter\nmy $loremcn = 0;\n# loop over the input file\nwhile (my $line = &lt;&gt; ) {\n    # if line contains lorem1 but not alorem1 or lorem12\n    if ($line =~ /\\blorem1\\b/i) {\n        # not the first time. counter &gt; 0\n        if ($loremcn) {\n            # remove all lorem1 and optional leading horizontal spaces\n            $line =~ s/\\h*\\blorem1\\b//gi;   # comment for syntax color /\n        # first time lorem1 is encountered (counter == 0)\n        } else {\n            # remove all lorem1 but the first\n        while ($line =~ s/\n                            (\\blorem1\\b.*?)     # first lorem1 in the line followed by 0 or more anycharacter\n                            \\blorem1\\b          # subsequent lorem1\n                            /$1/gix             # replace with the first group (i.e. the first lorem1\n            ) { 1;}\n        }\n        # incement counter\n        $loremcn++;\n    }\n    # print the modified line\n    print $line;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>pierwsza linia  koniec\ndruga linia lorem1 koniec  \ntrzecia linia koniec\nczwarta linia koniec\npiata liniakoniec\nszosta linia koniec\n</code></pre>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>perl test.pl inputfile &gt; outputfile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1535980014, "post_id": 52150194, "comment_id": 91250744, "body": "This will not remove the second and third lorem1 in line 2"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1535990103, "last_edit_date": 1535990103, "creation_date": 1535979178, "answer_id": 52150194, "question_id": 52148323, "link": "https://stackoverflow.com/questions/52148323/read-a-file-and-modify-it/52150194#52150194", "title": "Read a file and modify it", "body": "<p>Isn't it just this?</p>\n\n<pre><code>my $seen;\nwhile (&lt;&gt;) {\n  s/\\blorem1\\b//g if $seen;\n  $seen = 1 if /\\blorem1\\b/;\n  print;\n}\n</code></pre>\n\n<p><strong>Update:</strong> Ok, it's a little more complicated than I originally thought. But this seems to do what you wanted:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $seen;\n\nwhile (&lt;&gt;) {\n  if ($seen) {\n    s/\\blorem1\\b//g;\n  } else {\n    1 while s/(?&lt;=\\blorem1\\b)(.*)\\blorem1\\b/$1/g;\n    $seen = 1 if /\\blorem1\\b/;\n  }\n  print;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535981314, "post_id": 52150428, "comment_id": 91251473, "body": "thank You but in RL I cannot do this Your way. This whole excercise is to find a way on how to do this with streamed data.  In true scenario the whole data is not from opened text, but it&#39;s a spool data streamed to printer from SAP.  And that data needs to be corrected on the way to the printer :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "edited": false, "score": 0, "creation_date": 1535996848, "post_id": 52150428, "comment_id": 91258799, "body": "@Deneth: Then you have misrepresented the problem in your question: note that you wrote <i>&quot;First I cat a text file to my script&quot;</i>, which is <b><i>not</i></b> streamed data. In future, please provide all the information that is necessary to reproduce your problem. You should do your best to avoid wasting our time, and it is very important that you read <a href=\"http://stackoverflow.com/help/how-to-ask\"><i>How do I ask a good question?</i></a>, and in particular <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a>. Please apply the advice there to any future questions."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1535980121, "creation_date": 1535980121, "answer_id": 52150428, "question_id": 52148323, "link": "https://stackoverflow.com/questions/52148323/read-a-file-and-modify-it/52150428#52150428", "title": "Read a file and modify it", "body": "<p>Running your code with <code>B::Deparse</code> like this</p>\n\n<pre><code>perl -MO=Deparse xx.pl\n</code></pre>\n\n<p>gives this result</p>\n\n<pre><code>BEGIN { $^I = \"\"; }   # From -i\n\nLINE: while (defined($_ = readline ARGV)) {\n\n\n    use strict;\n    my $line = $_;\n    my $loremcn;\n    while (defined($line = readline ARGV)) {\n        foreach $_ ($line =~ /lorem1/gi) {\n            ++$loremcn;\n            if ($loremcn &gt;= 2) {\n                $line =~ s/lorem1//gi;\n            }\n            print \"$loremcn\\n\";\n            print $line;\n            chomp $line;\n        }\n    }\n\n\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n</code></pre>\n\n<p>So you see that you have <em>two</em> <code>while</code> loops in your code: you shouldn't mix up command-line options with a program file, as the result may be non-obvious</p>\n\n<p>Here's a way to do what I <em>think</em> you want. It uses your global counter <code>$loremcn</code> together with an <em>expression</em> global substitution to replace <code>lorem1</code> with nothing after the first instance</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\n@ARGV = 'file1.txt';\n\nmy $loremcn = 0;\n\nwhile ( &lt;&gt; ) {\n\n    s{(\\blorem1\\b[ \\t]*)}{ $loremcn++ ? '' : $1 }ge;\n\n    print;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>pierwsza linia  koniec\ndruga linia lorem1 koniec \ntrzecia linia koniec \nczwarta linia koniec\npiata liniakoniec\nszosta linia koniec\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1536016177, "post_id": 52156200, "comment_id": 91264216, "body": "Did you miss the comments where OP said he was stuck on perl 5.8 and that he wanted <i>all</i> occurrences of the word after the first one removed, not all but the first on each line? Compare his desired output to what that produces..."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536017452, "post_id": 52156200, "comment_id": 91264468, "body": "@Shawn, I hope now this meets the requirements"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536020349, "post_id": 52156200, "comment_id": 91264952, "body": "Look up what version of perl <code>\\K</code> was introduced in."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536020574, "post_id": 52156200, "comment_id": 91264988, "body": "@Shawn I really cant tell when, but if that is a problem, one can just do <code>s&#47;(^.*?\\blorem1)|\\blorem1&#47;$1&#47;g</code> which will still work. There are a ton of regular expressions to be used"}], "tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": false, "score": 1, "last_activity_date": 1536020735, "last_edit_date": 1536020735, "creation_date": 1536008847, "answer_id": 52156200, "question_id": 52148323, "link": "https://stackoverflow.com/questions/52148323/read-a-file-and-modify-it/52156200#52156200", "title": "Read a file and modify it", "body": "<p>One liner using <code>perl</code>:</p>\n\n<p>You can keep everything until the first lorem then delete all the lorems after this ie</p>\n\n<pre><code> $perl -pe \"undef $/;s/^.*?\\blorem1\\K|\\blorem1//g\" lorem.txt\n</code></pre>\n\n<ul>\n<li><code>\\b</code> -used to determine the boundary.</li>\n<li><code>.*?</code>- non-greedy match. matches everything to the second <code>lorem</code></li>\n<li><code>\\K</code> - discard any previously consumed characters. Thus deleting from the second lorem to the end</li>\n</ul>\n\n<p>output</p>\n\n<pre><code>pierwsza linia  koniec\ndruga linia lorem1 koniec\ntrzecia linia  koniec\nczwarta linia  koniec\npiata liniakoniec\nszosta linia  koniec\n</code></pre>\n\n<p>Now if you want to save this in another file, you can do:</p>\n\n<pre><code>perl -pe \"undef $/;s/^.*?\\blorem1\\K|\\blorem1//g\" lorem.txt &gt; new_file.txt\n</code></pre>\n\n<p>If your version of <code>perl</code> does not support <code>\\K</code>, you can use:</p>\n\n<pre><code> perl -pe \"undef $/;s/(^.*?\\blorem1)|\\blorem1/$1/g\" lorem.txt\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10309809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1374363f06e00ee03839f938acd3c195?s=128&d=identicon&r=PG&f=1", "display_name": "Deneth", "link": "https://stackoverflow.com/users/10309809/deneth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 52149727, "answer_count": 4, "score": 2, "last_activity_date": 1536020735, "creation_date": 1535972142, "last_edit_date": 1592644375, "question_id": 52148323, "link": "https://stackoverflow.com/questions/52148323/read-a-file-and-modify-it", "title": "Read a file and modify it", "body": "\n<p>I'm trying to process a stream of data.</p>\n<p>First I cat a text file to my script.</p>\n<p>The text file goes like this :</p>\n<pre class=\"lang-none prettyprint-override\"><code>pierwsza linia  koniec\ndruga linia lorem1 koniec lorem1 lorem1\ntrzecia linia lorem1 koniec lorem1\nczwarta linia lorem1 koniec\npiata liniakoniec\nszosta linia lorem1 koniec\n</code></pre>\n<p>What I want to achieve is a file with all lines but with just the first occurrence of <code>lorem1</code>.</p>\n<p>so the expected result should be like this</p>\n<pre class=\"lang-none prettyprint-override\"><code>pierwsza linia  koniec\ndruga linia lorem1 koniec\ntrzecia linia koniec\nczwarta linia koniec\npiata liniakoniec\nszosta linia koniec\n</code></pre>\n<p>My script goes like this</p>\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -pi\n\nuse strict;\n\nmy $line = $_;\nmy $loremcn;\n\nwhile ( $line = &lt;&gt; ) {\n\n    #if ( $line =~ m/lorem1/ )\n\n    foreach ( $line =~ m/lorem1/gi ) {\n\n        $loremcn++;\n\n        if ( $loremcn &gt;= 2 ) {\n            $line =~ s/lorem1//gi;\n        }\n\n        print &quot;$loremcn\\n&quot;;\n        print $line;\n\n        chomp $line;\n    }\n}\n</code></pre>\n<p>However the result is just one, first line (because of the <code>-pi</code> at the beginning of the script) of text.</p>\n<p>The script properly counts occurrences of <code>lorem1</code> (7) but because of the <code>/g</code> option it deletes all <code>lorem1</code> occurrences (it doesn't leave the first alone).</p>\n<p>Lastly, how at the end print the whole corrected text to the screen?</p>\n<h3>Update</h3>\n<p>I wrote this important comment on one of the answers:</p>\n<blockquote>\n<p>In RL I cannot do this Your way. This whole excercise is to find a way on how to do this with streamed data. In true scenario the whole data is not from opened text, but it's a spool data streamed to printer from SAP. And that data needs to be corrected on the way to the printer</p>\n</blockquote>\n"}, {"tags": ["perl", "select", "notify", "listen", "dbd-pg"], "comments": [{"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1535979065, "post_id": 52147560, "comment_id": 91250221, "body": "Use could just lower your sleep. I&#39;ve testet with <code>Time::HiRes::sleep(0.1);</code> and polling a hundred times (0.1*100 = 10 seconds) and a negligible amount of CPU was spent on the client side (and probably on server side as well), just <code>0.93% cpu</code> according to the bash <code>time</code> command prefix. I know this wasn&#39;t what you asked, but I thought you should know how little such polling costs."}], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535969362, "creation_date": 1535969362, "question_id": 52147560, "link": "https://stackoverflow.com/questions/52147560/get-immediate-notification-of-postgres-notify", "title": "Get immediate notification of Postgres NOTIFY", "body": "<p>Is there any way with DBD::Pg to do a blocking wait for a NOTIFY that will immediately return when a message is ready?</p>\n\n<p>I have a simple test script that can send messages using the Postgres 'NOTIFY' mechanism:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.018;\nuse strict;\nuse warnings;\nuse autodie;\n\nuse DBI qw();\n\n$| = 1;  # Flush buffer on print\nmy $dsn = 'dbi:Pg:dbname=test';\nmy $attr = {\n    AutoCommit  =&gt; 0,\n    RaiseError  =&gt; 1,\n    PrintError  =&gt; 0,\n};\nmy $topic = 'test_topic';\n\nmy $dbh = DBI-&gt;connect($dsn, '', '', $attr);\n\nwhile (1) {\n    print \"payload: \";\n    chomp(my $payload = &lt;&gt;);\n    $dbh-&gt;do(\"NOTIFY $topic, '$payload'\");\n    $dbh-&gt;commit;\n}\n</code></pre>\n\n<p>I also have a simple receiver script that uses LISTEN to subscribe to the messages:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.018;\nuse strict;\nuse warnings;\nuse autodie;\n\nuse DBI qw();\n\n$| = 1;  # Flush buffer on print\nmy $dsn = 'dbi:Pg:dbname=test';\nmy $attr = {\n    AutoCommit  =&gt; 0,\n    RaiseError  =&gt; 1,\n    PrintError  =&gt; 0,\n};\nmy $topic = 'test_topic';\n\nmy $dbh = DBI-&gt;connect($dsn, '', '', $attr);\n$dbh-&gt;do(\"LISTEN $topic\");\n\nwhile (1) {\n    $dbh-&gt;commit();\n    while(my $notify = $dbh-&gt;pg_notifies) {\n        my($topic, $pid, $payload) = @$notify;\n        say \"Got message: $topic =&gt; $payload\";\n    }\n    sleep(10);\n}\n</code></pre>\n\n<p>The problem is that <code>$dbh-&gt;pg_notifies</code> does not block, so if there are no notifications queued, it immediately returns <code>undef</code>.  I've put the <code>sleep(10)</code> so that it's not a busy loop, but of course this means I get a delay of up to 10 seconds after a NOTIFY message is sent but before my LISTEN receives it.</p>\n\n<p>Some searching suggested that at the <code>libpq</code> level, you could do a <code>select</code> on the socket to be notified immediately of an incoming NOTIFY, so I tried this:</p>\n\n<pre><code>my $sock_fd = $dbh-&gt;{pg_socket};\nmy $read_set = '';\nvec($read_set, $sock_fd, 1) = 1;\n\nwhile (1) {\n    $dbh-&gt;commit();\n    while(my $notify = $dbh-&gt;pg_notifies) {\n        my($topic, $pid, $payload) = @$notify;\n        say \"Got message: $topic =&gt; $payload\";\n    }\n    select($read_set, undef, undef, 10);\n}\n</code></pre>\n\n<p>But it doesn't seem to work and the <code>select</code> only seems to return when my 10 second timeout expires.</p>\n\n<p>It always seemed to me that NOTIFY/LISTEN provided a way to avoid polling loops, but I don't seem to be able to make it work without a polling loop.  Suggestions?</p>\n"}, {"tags": ["linux", "perl", "awk"], "comments": [{"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1535959481, "post_id": 52144468, "comment_id": 91239590, "body": "Are the columns separated with tabs? If not, it might be tricky."}, {"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1535963340, "post_id": 52144468, "comment_id": 91241519, "body": "Yes, it is separated with tabs"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1535966426, "post_id": 52144468, "comment_id": 91243147, "body": "Please avoid <i>&quot;Give me the codez&quot;</i> questions. Instead show the script you are working on and state where the problem is. Also see <a href=\"https://meta.stackoverflow.com/q/261592/608639\">How much research effort is expected of Stack Overflow users?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1535959260, "post_id": 52144572, "comment_id": 91239457, "body": "Hi Rakesh, thanks for your answer, I will try it on my workspace."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1535960378, "post_id": 52144572, "comment_id": 91240007, "body": "There is no mention of Python in the question tags"}, {"owner": {"reputation": 73869, "user_id": 532312, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kEKs8.jpg?s=128&g=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/532312/rakesh"}, "edited": false, "score": 0, "creation_date": 1535960765, "post_id": 52144572, "comment_id": 91240191, "body": "@Borodin...OP has edited the question."}], "tags": [], "owner": {"reputation": 73869, "user_id": 532312, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kEKs8.jpg?s=128&g=1", "display_name": "Rakesh", "link": "https://stackoverflow.com/users/532312/rakesh"}, "is_accepted": false, "score": -1, "last_activity_date": 1535960310, "last_edit_date": 1535960310, "creation_date": 1535957828, "answer_id": 52144572, "question_id": 52144468, "link": "https://stackoverflow.com/questions/52144468/how-to-only-grep-and-sorted-value-from-other-column/52144572#52144572", "title": "How to only grep and sorted value from other column", "body": "<p>This should help.</p>\n\n<h3>Python code</h3>\n\n<pre><code>from itertools import izip_longest\n#Python3\n#from itertools import zip_longest\n\nN = []\nD = []\nwith open(filename) as infile:\n    for line in infile:                   #Iterate Each line\n        val = line.split()[3:]            #Get Required value using slicing\n        for i in val:\n            if i.endswith(\"N,\"):\n                N.append(int(i.rstrip(\"N,\")))\n            else:\n                D.append(int(i.rstrip(\"D,\")))\n\nfor i in izip_longest(sorted(N, reverse=True), sorted(D), fillvalue=\"\"):    #Sort and iterate. \n    print(i)\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>564, 223\n551, 344\n127, 350\n'', 407\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1535962237, "post_id": 52145315, "comment_id": 91240967, "body": "Hi Shawn, this doesn&#39;t work, because it can&#39;t locate List/MoreUtils.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at test2.pl line 4. BEGIN failed--compilation aborted at test2.pl line 4"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1535962286, "post_id": 52145315, "comment_id": 91240989, "body": "@Amz You might have to install the module. I can&#39;t remember if it&#39;s core or not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535965606, "post_id": 52145315, "comment_id": 91242669, "body": "@Shawn: Only <code>List::Util</code> is core, but is has been expanded a lot in recent years."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535966432, "post_id": 52145315, "comment_id": 91243151, "body": "@Borodin Expanded, maybe, but still nothing like <code>zip</code> in it. I do see a <code>pairmap</code> function I never noticed before even though it looks to have been around for ages, though, which would have been useful. Have to remember that."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1535969191, "last_edit_date": 1535969191, "creation_date": 1535960889, "answer_id": 52145315, "question_id": 52144468, "link": "https://stackoverflow.com/questions/52144468/how-to-only-grep-and-sorted-value-from-other-column/52145315#52145315", "title": "How to only grep and sorted value from other column", "body": "<p>And a perl version with output that's formatted like yours:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse List::MoreUtils qw/zip/;\n\nmy %nums;\nwhile (&lt;&gt;) {\n  my @f = split /\\s+/;\n  for my $nd (@f[3..$#f]) {\n    if ($nd =~ /^(\\d+)([ND])/) {\n      push @{$nums{$2}}, $1;\n    }\n  }\n}\nprint \"N   D\\n\";\nmy @pairs = zip @{$nums{N}}, @{$nums{D}};\nwhile (@pairs) {\n  my ($n, $d) = (shift @pairs, shift @pairs);\n  printf \"%-3s %-3s\\n\", $n//\"\", $d//\"\";\n}\n</code></pre>\n\n<p>Edit: After some golfing and playing around:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse List::MoreUtils qw/zip6/;\nmy %nums = (N =&gt; [ \"N\" ], D =&gt; [ \"D\" ]);\nwhile (&lt;&gt;) {\n  my @f = split /\\s+/;\n  for my $nd (@f[3..$#f]) {\n    push @{$nums{$2}}, $1 if $nd =~ m/^(\\d+)([ND])/;\n  }\n}\nprintf \"%-3s %-3s\\n\", $_-&gt;[0]//\"\", $_-&gt;[1]//\"\" for zip6 @{$nums{N}}, @{$nums{D}};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1535962589, "post_id": 52145391, "comment_id": 91241144, "body": "This works great, plus I can re-use these script to manipulate different parameters for different tasks. Thanks again Borodin."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "edited": false, "score": 0, "creation_date": 1535969676, "post_id": 52145391, "comment_id": 91245067, "body": "@Amz: I&#39;ve written some annotations. What do you want to know?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535965554, "last_edit_date": 1535965554, "creation_date": 1535961189, "answer_id": 52145391, "question_id": 52144468, "link": "https://stackoverflow.com/questions/52144468/how-to-only-grep-and-sorted-value-from-other-column/52145391#52145391", "title": "How to only grep and sorted value from other column", "body": "\n\n<p>Here's a Perl solution</p>\n\n<p>The input file is read and the first three columns discarded from each line. What remains is searched for fields that look like <code>999N</code> or <code>999D</code> and they are split into a hash of arrays with <code>N</code> and <code>D</code> as its keys</p>\n\n<p>After sorting the arrays, they are displayed as columns beneath appropriate headers</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse List::Util 'max';\n\nopen my $fh, '&lt;', 'file1.txt' or die $!;\n\nmy %data;\n\nwhile ( &lt;$fh&gt; ) {\n    my @fields = split ' ', $_, 4;\n    push @{ $data{$2} }, $1 while $fields[3] =~ /(\\d+)([ND])/g;\n}\n\n$_ = [ sort { $a &lt;=&gt; $b } @$_ ] for values %data;\n\nmy $last = max map $#$_, values %data;\n\nmy $fmt = \"%-3s %-3s\\n\";\nprintf $fmt, qw/ N D /;\nfor my $i ( 0 .. $last ) {\n    printf $fmt, map { $_-&gt;[$i] // '' } @data{qw/ N D /};\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>N   D  \n127 223\n551 344\n564 350\n    407\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "is_accepted": true, "score": 2, "last_activity_date": 1535963160, "last_edit_date": 1535963160, "creation_date": 1535962067, "answer_id": 52145609, "question_id": 52144468, "link": "https://stackoverflow.com/questions/52144468/how-to-only-grep-and-sorted-value-from-other-column/52145609#52145609", "title": "How to only grep and sorted value from other column", "body": "<p>In GNU awk:</p>\n\n<pre><code>$ awk '\nBEGIN {\n    FS=\",? *\"                 #\n    OFS=\"\\t\"                  # output fields separated by tabs\n}\n{\n    for(i=4;i&lt;=NF;i++)        # process fields 4 and above\n        if($i~/N/)            # hash n and d accordingly\n            n[++j]=$i\n        else if($i~/D/)\n            d[++k]=$i\n}\nEND {\n    n[j=0]=\"N\"                # headers \n    d[k=0]=\"D\"\n    while(n[j]!=\"\"||d[k]!=\"\") # output them untile they run out\n        print substr(n[j],1,length(n[j++]-1)),substr(d[k],1,length(d[k++]-1))\n}' file\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>N      D\n564    223\n551    344\n127    350\n       407\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7839296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUMy3.png?s=128&g=1", "display_name": "Amz", "link": "https://stackoverflow.com/users/7839296/amz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 2, "closed_date": 1535981560, "accepted_answer_id": 52145609, "answer_count": 4, "score": -1, "last_activity_date": 1535969191, "creation_date": 1535957383, "last_edit_date": 1535959068, "question_id": 52144468, "link": "https://stackoverflow.com/questions/52144468/how-to-only-grep-and-sorted-value-from-other-column", "closed_reason": "Needs more focus", "title": "How to only grep and sorted value from other column", "body": "<p>I have an input file1.txt like below:</p>\n\n<p>file1.txt :</p>\n\n<pre><code>test 1 Vertical                                564N,\ntest 2 Vertical                                551N,\ntest 3 Hydrophone                              127N, 223D, 344D,\ntest 4 Hydrophone                              350D,\ntest 6 Hydrophone                              407D,\n</code></pre>\n\n<p>How can I grab only 4th column matched value and then sorted into following?</p>\n\n<pre><code>Output :\nN   D \n564 223 \n551 344\n127 350\n    407\n</code></pre>\n"}, {"tags": ["perl", "tk", "inet"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1535955491, "post_id": 52142985, "comment_id": 91237882, "body": "Note: since you do not provide any code, this question might be closed as <a href=\"https://meta.stackexchange.com/q/10582/216290\">too broad or primarily opinion-based</a>. Anyway, see <a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perldoc perlipc</a> for information about interprocess communication"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1535963138, "post_id": 52142985, "comment_id": 91241404, "body": "You can&#39;t block Tk&#39;s event loop. Your idea to delegate the work to a child task is a good one, because the alternative would be to try to work from within Tk&#39;s event loop, and I don&#39;t know if the facilities even exist to do that. Note that the child task could be a thread instead of a process. You could use JSON over a pipe to send requests to the task. As for the task, you&#39;ll need some kind of event loop there as well. Traditionally, one would use IO::Select, though IPC::Run and a number of other solutions could also be used."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536053543, "post_id": 52142985, "comment_id": 91275769, "body": "I understand that you may be unfamiliar with English, but it would be only polite to capitalise <b><i>I</i></b> instead of using <i>i</i> everywhere. Surely you know this rule? I have edited your question to make it more readable."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536316755, "post_id": 52142985, "comment_id": 91389974, "body": "You could try <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow noreferrer\"><code>AnyEvent</code></a>. This way you can listen to both GUI events and socket events at the same time without blocking. See also <a href=\"https://metacpan.org/pod/AnyEvent::Impl::Tk\" rel=\"nofollow noreferrer\"><code>AnyEvent::Impl::Tk</code></a>"}, {"owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536881857, "post_id": 52142985, "comment_id": 91593582, "body": "I tried that <code>$myip = ...</code> line on three systems. It worked on Linux, but not on NetBSD or FreeBSD. It seems a bit of a convoluted pipe when <i>you have the full power of perl right there</i>."}, {"owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "edited": false, "score": 0, "creation_date": 1537401365, "post_id": 52142985, "comment_id": 91774818, "body": "Yea its a bash command, since i am on a linux system i just did a down and dirty method of cutting the IP from the ifconfig command. If you have a suggestion on how to pull the ip using pure perl i would be glad to learn since that would be useful"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1536879252, "creation_date": 1536879252, "answer_id": 52322772, "question_id": 52142985, "link": "https://stackoverflow.com/questions/52142985/creating-a-software-router/52322772#52322772", "title": "Creating a software router", "body": "<p>So i was able to get this working with lots of experimentation. The trick was to fork the sub routine and store the pid in a file to be used at a later time for killing of the process, which never exits due to being in a infinite loop.</p>\n\n<pre><code>Sub forker {\n     $pid = fork ();\n      if ( $pid == 0 ) {\n          new_port();\n      }\n      my $pid_file = 'router.pid';\n      open (my $pidlog, '&gt;&gt;', $pid_file) or die \"cannot open file\";\n       print $pidlog \"$pid\\n\";\n       close $pidlog;\n  }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52322772, "answer_count": 1, "score": 0, "last_activity_date": 1536879252, "creation_date": 1535947145, "last_edit_date": 1536288875, "question_id": 52142985, "link": "https://stackoverflow.com/questions/52142985/creating-a-software-router", "title": "Creating a software router", "body": "<p>I want to build a software router.</p>\n\n<p>I have written the code to open a socket, receive the data, and print its received data. The GUI is going to be written using\n    <a href=\"https://metacpan.org/pod/Tk\" rel=\"nofollow noreferrer\"><code>Tk</code></a></p>\n\n<p>Below is a simple version of the code, it does basically what i want to do, with the exception of not forking the new_port subroutine. Every time i click the submit button the Tk window is stuck. If someone can please assist with adding a fork to the new_port subroutine so it spawns a new child process. The idea is i can fill in a new port in the form and hit sumbit. The window closes, I then press new again put a new port in and now a 2nd socket is open at the same time as the first. I.E port 1234 and 5678 are being listened to at the same time.</p>\n\n<pre><code>#!/usr/bin/perl -w\n use IO::Socket::INET;\n use Tk;\n\n$myip = `ifconfig | grep -i inet | head -1 | cut -d \":\" -f2 | cut -d \" \" -f1`;\n\nsub new_port {\n    my $socket = new IO::Socket::INET ( \n        LocalHost =&gt; \"$myip\",\n        LocalPort =&gt; \"$myport\",\n        Proto =&gt; 'tcp'\n        Reuse =&gt; 1);\ndie \"Cannot create socket on local host\" unless $socket;\nprint \"Server waiting for client connection on port $myport\\n\";\n\nwhile(1)\n{\n my $client_socket = $socket-&gt;accept();\n my $client_address = $client_socket-&gt;peerhost();\n my $client_port = $client_socket-&gt;peerport();\n my $input_data = \"\";\n my $received_data = \"\";\n do\n {\n   $client_socket-&gt;recv($received_data, 65536);\n   $input_data = $input_data . $received_data;\n } while ($received_data ne \"\");\n print \"INPUT----------------------------------\\n\";\n print \"Data from $client_address on port $client_port\\n\";\n print $input_data;\n shutdown($client_socket, 1);\n  }\n }\n\n sub new_port_window {\n   my $sw = MainWindow-&gt;new;\n   $sw-&gt;geometry(\"200x100\");\n   $sw-&gt;title(\"port opener\");\n   $sw-&gt;Label(-text \"Insert port #\")-&gt;place(-anchor =&gt; 'center', -relx =&gt; 0.5, -rely =&gt; 0.2);\n   $sw-&gt;Entry(-bg =&gt; 'white', -fg =&gt; 'black', -textvariable =&gt; \\$myport)-&gt;place(-anchor =&gt; 'center', -relx =&gt; 0.5, -rely =&gt; 0.4);\n   $sw-&gt;Button(-text \"submit\", -command =&gt; sub{new_port})-&gt;place(width =&gt; 100,\n   -anchor =&gt; \"center\",\n   -relx =&gt; 0.5,\n   -rely =&gt; 0.8);\n}\n\n my $mw = MainWindow-&gt;new;\n       $mw-&gt;geometry(\"150x100\");\n       $mw-&gt;title(\"GUI TEST NEW FUNCTION\");\n       $mw-&gt;Label(-text =&gt; \"click new\")-&gt;place(-anchor =&gt; \"center\", -relx =&gt; 0.5, -rely =&gt; 0.3);\n       $mw-&gt;Button(-text =&gt; \"NEW\", -command =&gt;sub{new_port_window})-&gt;place(-width =&gt; 50, -anchor =&gt; \"center\", -relx =&gt; 0.5, -rely =&gt; 0.8);\nMainLoop;\n</code></pre>\n"}, {"tags": ["perl", "monitor", "disk", "partition", "linux-df"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1535936213, "post_id": 52141067, "comment_id": 91234029, "body": "What &quot;<i>partition module</i>&quot; do you have in mind?"}, {"owner": {"reputation": 9, "user_id": 10307726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f1ed33fdfa0d585655b02a4cdec52f?s=128&d=identicon&r=PG&f=1", "display_name": "jtech", "link": "https://stackoverflow.com/users/10307726/jtech"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535963652, "post_id": 52141067, "comment_id": 91241692, "body": "The partition module is supposed to verify each mounted partition line from yesterday to today and in the future use this result to calculate how much the partition has grown up in a day"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535999490, "post_id": 52141067, "comment_id": 91259682, "body": "OK, so it is what you are writing. I thought that it may have referred to some CPAN module or such."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1535934715, "last_edit_date": 1535934715, "creation_date": 1535924214, "answer_id": 52141214, "question_id": 52141067, "link": "https://stackoverflow.com/questions/52141067/perl-script-to-compare-partition-usage-from-todays-to-yesterdays-in-different/52141214#52141214", "title": "PERL script to compare partition usage from today&#39;s to yesterday&#39;s in different hosts using a CSV file", "body": "<p>You need information from multiple lines, so you will need some variables outside of the loop.</p>\n\n<p>If the records in the CSV are ordered chronologically, you can use the following:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse DateTime      qw( );\nuse Sys::Hostname qw( hostname );\nuse Text::CSV_XS  qw( );\n\nmy $qfn = \"/tmp/df.csv\";\nopen(my $fh, '&lt;', $qfn)\n   or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\nmy $target_host = hostname =~ s/\\..*//rs;   # /\n\nmy $today_dt = DateTime-&gt;now( time_zone =&gt; \"local\" )-&gt;set_time_zone(\"floating\")-&gt;truncate( to =&gt; \"day\" );\nmy $yday_dt  = $today_dt-&gt;clone-&gt;subtract( days =&gt; 1 );\n\nmy $today = $today_dt-&gt;strftime(\"%d.%m.%Y\");\nmy $yday  = $yday_dt -&gt;strftime(\"%d.%m.%Y\");\n\nmy $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\n\nmy %yday_usage_by_partition;   \nwhile ( my $row = $csv-&gt;getline($fh) ) {\n   my ($host, $date, $partition, $usage) = @$row[0,1,6,5];\n   next if $host ne $target_host;\n\n   if ($date eq $yday) {\n      $yday_usage_by_partition{$partition} = $usage;\n   }\n   elsif ($date eq $today) {\n      if (!exists($yday_usage_by_partition{$partition})) {\n         warn(\"No data for $yday for partition $partition\\n\");\n         next;\n      }\n\n      print(\"$partition: $$yday_usage_by_partition{$partition} -&gt; $usage\\n\");\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10307726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f1ed33fdfa0d585655b02a4cdec52f?s=128&d=identicon&r=PG&f=1", "display_name": "jtech", "link": "https://stackoverflow.com/users/10307726/jtech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536245200, "creation_date": 1535922680, "question_id": 52141067, "link": "https://stackoverflow.com/questions/52141067/perl-script-to-compare-partition-usage-from-todays-to-yesterdays-in-different", "title": "PERL script to compare partition usage from today&#39;s to yesterday&#39;s in different hosts using a CSV file", "body": "<p>I am new in perl struggling to build my 1st script but, the partition module doesn't work. More details are commented in the code. Maybe the code should be rewritten using hash and reference but I have no idea how to do it. Can someone please, help me?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n#This script compares the today's result and yesterday's results between partitions for each host.\n#The \"df\" output is stored in a CSV file. If any partitions have been changed (mounted/unmounted)\n#the script must to warn and don't compare the results for that host.\n\nuse warnings;\n\nmy $file = \"/tmp/df.csv\";\nmy $host = `hostname | awk -F'.' '{print \\$1}'`;\nmy $yesterdays_date = `date -d \"-1 day\" '+%d.%m.%Y'`;\nmy $todays_date = `date '+%d.%m.%Y'`;\nchomp ($host, $yesterdays_date, $todays_date);\n\nopen(HANDLE, \"$file\") or die \"Error opening file $file: $!\";\nmy @array = &lt;HANDLE&gt;;\n\nforeach (@array){\n     @columns = split /,/;\n\n        if(/$host/ and /$todays_date/){\n            my $todays_result = $columns[5];chomp;\n            #my $todays_partition = $columns[6];chomp;\n\n            print \"Today\\'s disk usage on $host: $columns[5]\\n\";\n            #print \"$todays_result &lt;&lt;T.Result      T.Partition&gt;&gt; $todays_partition\"\n        }\n\n        elsif(/$host/ and /$yesterdays_date/){\n            my $yesterdays_result = $columns[5];chomp;\n            #my $yesterdays_partition = $columns[6];chomp;\n print \"Yesterday\\'s disk usage on $host: $columns[5]\\n\";\n            #print \"$yesterdays_result &lt;&lt;Y.Result     Y.Partition&gt;&gt;  $yesterdays_partition\";\n        }\n\n        #Debug: Print differences in mount point (condition must be \"ne\" instead eq)\n        #if ($todays_partition eq $yesterdays_partition){\n        #print \"$todays_partition &lt;&lt;Partition equal&gt;&gt; $yesterdays_partition\";\n        #}\n\n        #else{\n            #print \"Debug: Host or Date DIFFERENT or NOT FOUND for today and yesterday\\n\";\n        #}\n\n        #TO DO: print \"The diference: $todays_result-$yesterdays_result\", \"\\n\";\n};\n\nclose HANDLE;\n</code></pre>\n\n<p>The CSV file contains the following lines:</p>\n\n<pre><code>testhost,25.08.2018,100M,0,100M,0,/run/user/0\nlocalhost,01.09.2018,6.7G,1.5G,5.2G,23,/\nlocalhost,01.09.2018,485M,0,485M,0,/dev\nlocalhost,01.09.2018,496M,4.0K,496M,1,/dev/shm\nlocalhost,01.09.2018,496M,6.7M,490M,2,/run\nlocalhost,01.09.2018,496M,0,496M,0,/sys/fs/cgroup\nlocalhost,01.09.2018,497M,110M,387M,23,/boot\nlocalhost,01.09.2018,100M,0,100M,0,/run/user/0\nlocalhost,02.09.2018,6.7G,1.5G,5.2G,23,/\nlocalhost,02.09.2018,485M,0,485M,0,/dev\nlocalhost,02.09.2018,496M,4.0K,496M,1,/dev/shm\nlocalhost,02.09.2018,496M,6.7M,490M,2,/run\nlocalhost,02.09.2018,496M,0,496M,0,/sys/fs/cgroup\nlocalhost,02.09.2018,497M,110M,387M,23,/boot\nlocalhost,02.09.2018,100M,0,100M,0,/run/user/0\n</code></pre>\n\n<p>Bonus: Help with English grammar :D</p>\n"}, {"tags": ["runtime-error", "warnings", "perl"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535909006, "post_id": 52138269, "comment_id": 91228421, "body": "Your linked question provides an example. Redirect STDOUT to a file, and reproduce the problem described in the link."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535914174, "post_id": 52138269, "comment_id": 91229789, "body": "@bytepusher, Re &quot;<i>Redirect STDOUT to a file</i>&quot;, You can&#39;t get <code>EPIPE</code> from writing to a file; you can only get it from writing to a pipe or socket."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535923822, "post_id": 52138269, "comment_id": 91232070, "body": "Fair enough! My comment is out of date anyhow given you&#39;ve answered the question, but thanks for clearing that up :)"}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1536415387, "post_id": 52138269, "comment_id": 91420603, "body": "Sorry, I noticed it is indeed answered in <a href=\"https://stackoverflow.com/a/52139990/856090\">stackoverflow.com/a/52139990/856090</a>"}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1536416077, "post_id": 52138269, "comment_id": 91420767, "body": "<code>perl -e &#39;$SIG{PIPE} = &quot;IGNORE&quot;; sleep(1); print &quot;foo\\n&quot;;&#39; | echo -n</code> is the answer"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "closed_date": 1535913323, "answer_count": 0, "score": 0, "last_activity_date": 1535914102, "creation_date": 1535901025, "question_id": 52138269, "link": "https://stackoverflow.com/questions/52138269/how-to-cause-unable-to-flush-stdout-broken-pipe-in-perl", "closed_reason": "Duplicate", "title": "How to cause &quot;Unable to flush stdout: Broken pipe&quot; in Perl?", "body": "<p>Please provide me a minimal Perl example which produces this error:</p>\n\n<blockquote>\n  <p>Unable to flush stdout: Broken pipe</p>\n</blockquote>\n\n<p>See also <a href=\"https://stackoverflow.com/q/50507849/856090\">Weird error after Perl upgrade: Unable to flush stdout</a></p>\n"}, {"tags": ["regex", "mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 0, "last_activity_date": 1535855003, "creation_date": 1535855003, "answer_id": 52133499, "question_id": 52133370, "link": "https://stackoverflow.com/questions/52133370/perl-mongodb-api-regular-expression-in-filters/52133499#52133499", "title": "Perl MongoDB API - regular expression in filters", "body": "<p>One way: A bunch of positive lookahead assertations:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nmy @tests = (\"The Guild demands that the spice must flow from Arrakis\",\n             \"House Atreides will be transported to Arrakis by the Guild.\");\nfor my $test (@tests) {\n  if ($test =~ m/^(?=.*spice)\n                  (?=.*Guild)\n                  (?=.*Arrakis)/x) {\n    say \"$test: matches\";\n  } else {\n    say \"$test: fails\";\n  }\n}\n</code></pre>\n\n<p>produces:</p>\n\n<blockquote>\n  <p>The Guild demands that the spice must flow from Arrakis: matches</p>\n  \n  <p>Duke Leto will be transported to Arrakis by the Guild.: fails</p>\n</blockquote>\n"}], "owner": {"reputation": 195, "user_id": 10305221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa08ecccef1aae6a730f3806d9784727?s=128&d=identicon&r=PG&f=1", "display_name": "Duke Leto", "link": "https://stackoverflow.com/users/10305221/duke-leto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 52133499, "answer_count": 1, "score": 0, "last_activity_date": 1535855003, "creation_date": 1535852627, "question_id": 52133370, "link": "https://stackoverflow.com/questions/52133370/perl-mongodb-api-regular-expression-in-filters", "title": "Perl MongoDB API - regular expression in filters", "body": "<p>I am working in Perl with a MongoDB. I have a collection with documents that have a big text field that I need to be able to find all rows that contain multiple strings in the field.</p>\n\n<p>So for instance, if this is a database of movie quotes one row would have value:</p>\n\n<blockquote>\n  <p>We must totally destroy all spice production on Arrakis. The Guild and\n  the entire Universe depends on spice. He who can destroy a thing,\n  controls a thing.</p>\n</blockquote>\n\n<p>I want to be able to match that row with terms \"spice\", \"Arrakis\", and \"Guild\" where ALL of those terms have to be in the text.</p>\n\n<p>My current approach can only achieve matches if the terms provided happen to be in the correct order, i.e.:</p>\n\n<pre><code>$db-&gt;get_collection( 'quotes' )-&gt;find( { quote =&gt; qr/spice.*Arrakis.*Guild/i } );\n</code></pre>\n\n<p>That's a match, but</p>\n\n<pre><code>$db-&gt;get_collection( 'quotes' )-&gt;find( { quote =&gt; qr/Guild.*spice.*Arrakis/i } );\n</code></pre>\n\n<p>is not a match.</p>\n\n<p>If I were working with a SQL database I could do:</p>\n\n<pre><code>... WHERE quote LIKE '%spice%' and quote LIKE '%Arrakis%' and quote LIKE '%Guild%'\n</code></pre>\n\n<p>but with the MongoDB interface you only get one shot per field.</p>\n\n<p>Is there a way to match multiple words where all are required in one regex, or is there another way to get more than one crack at a field in the MongoDB interface?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 2, "creation_date": 1535814908, "post_id": 52129444, "comment_id": 91209227, "body": "Why would it do anything else, when you <code>seek()</code> to the beginning of the file after every read?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535835174, "post_id": 52129444, "comment_id": 91214663, "body": "Are you thinking that using <code>read</code> is a good idea here (it isn&#39;t) or are you simply experimenting with the operator?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1535822322, "post_id": 52129870, "comment_id": 91211328, "body": "Note that this won&#39;t work on Windows, because you assume a single additional line terminator character whereas Windows uses two"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1535817727, "creation_date": 1535817727, "answer_id": 52129870, "question_id": 52129444, "link": "https://stackoverflow.com/questions/52129444/perl-while-loop-using-read/52129870#52129870", "title": "Perl while loop using read()", "body": "<p>I think you misunderstand what <code>seek()</code> does. With <code>SEEK_SET</code> as the third parameter, the second parameter is interpreted as the position to move to as measured from the start of the file. So every time you run this line:</p>\n\n<pre><code>seek($IN, 6, SEEK_SET);\n</code></pre>\n\n<p>It always moves to the seventh position in the file (which is, obviously, always on the same line). Then when you run this line:</p>\n\n<pre><code>seek($IN, 0, SEEK_SET);\n</code></pre>\n\n<p>It always moves back to the start of the file.</p>\n\n<p>Initially, I thought the solution was to change <code>SEEK_SET</code> to <code>SEEK_CUR</code> (which interprets the second parameter as the amount to move relative to the current position) but it's a bit more complex than that. Here's how I got it to work:</p>\n\n<pre><code>seek($IN, 6, SEEK_CUR); # Move forward six spaces\n$line = read($IN, $data, 4);\nseek($IN, 7, SEEK_CUR); # Move forward seven places\n</code></pre>\n\n<p>But really, a regex is the best approach here.</p>\n\n<pre><code>while(&lt;$IN&gt;) {\n    ($data) = /\\s(\\d{4})/;\n    print \"$data\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10302780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KcQzlqmaaDw/AAAAAAAAAAI/AAAAAAAAAAs/K8VyZiAm9Pk/photo.jpg?sz=128", "display_name": "Tiago Bresolin", "link": "https://stackoverflow.com/users/10302780/tiago-bresolin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535822048, "creation_date": 1535814792, "last_edit_date": 1592644375, "question_id": 52129444, "link": "https://stackoverflow.com/questions/52129444/perl-while-loop-using-read", "title": "Perl while loop using read()", "body": "<p>I want to read a text file <code>data.txt</code> using <code>read</code>.\nI would like to read the first four integers of each line at a time.</p>\n<h3>data.txt</h3>\n<pre><code>line1 0101020102\nline2 2010201001\nline3 0201010201\n</code></pre>\n<p>The <code>line1</code> etc. are part of the file.</p>\n<p>This is what I could do up to now</p>\n<h3>Perl</h3>\n<pre><code>my $data;\nmy $IN;\nmy $n = 0;\n\n$line = 1;\n\nopen($IN, '&lt;', &quot;data.txt&quot;) or die &quot; Error&quot;;\n\nwhile ( $line != 0 ) {\n    seek($IN, 6, SEEK_SET);\n    $line = read($IN, $data, 4);\n    seek($IN, 0, SEEK_SET);\n}\n</code></pre>\n<p>The problem is that using this <code>while</code> loop, Perl keeps reading the first line in an infinite loop.</p>\n<p>How can I deal with this problem?</p>\n"}, {"tags": ["perl", "sh"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10131513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bEV6ubWZmws/AAAAAAAAAAI/AAAAAAAAAtw/CWIu-PIWdCI/photo.jpg?sz=128", "display_name": "Darwin Chang", "link": "https://stackoverflow.com/users/10131513/darwin-chang"}, "edited": false, "score": 0, "creation_date": 1535780075, "post_id": 52125047, "comment_id": 91201286, "body": "Is there a way to set the current directory in the script to the PointMutation folder?I am fairly new to perl, what is JSON/yaml, and is a meta file a temporary file?"}, {"owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "reply_to_user": {"reputation": 59, "user_id": 10131513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bEV6ubWZmws/AAAAAAAAAAI/AAAAAAAAAtw/CWIu-PIWdCI/photo.jpg?sz=128", "display_name": "Darwin Chang", "link": "https://stackoverflow.com/users/10131513/darwin-chang"}, "edited": false, "score": 0, "creation_date": 1535781043, "post_id": 52125047, "comment_id": 91201423, "body": "You can do <code>chdir &quot;&#47;whatever&#47;directory&#47;you&#47;want&quot;. And yes, I think it&#39;s a good idea to change into the most relevant directory. JSON and YAML are common format for storing simple data structures, see their wikipedia pages, and the corresponding perl modules JSON and YAML. But, if you&#39;re just getting started, the sample I gave and the </code>chdir` function should get you far."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535810278, "post_id": 52125047, "comment_id": 91208031, "body": "<i>&quot;create meta files (i&#39;d use JSON/yaml) which contain the necessary file names&quot;</i> For just a list of file paths, there&#39;s no reason to use anything other than a flat file. And you can magically read it without involving an external module!"}, {"owner": {"reputation": 59, "user_id": 10131513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bEV6ubWZmws/AAAAAAAAAAI/AAAAAAAAAtw/CWIu-PIWdCI/photo.jpg?sz=128", "display_name": "Darwin Chang", "link": "https://stackoverflow.com/users/10131513/darwin-chang"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535950855, "post_id": 52125047, "comment_id": 91236539, "body": "@Borodin How would you do it without JSON/yaml?"}], "tags": [], "owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "is_accepted": true, "score": 0, "last_activity_date": 1535778455, "creation_date": 1535778455, "answer_id": 52125047, "question_id": 52125003, "link": "https://stackoverflow.com/questions/52125003/perl-run-script-on-multiple-files-in-multiple-directories/52125047#52125047", "title": "Perl: Run script on multiple files in multiple directories", "body": "<p>I would do something like:</p>\n\n<pre><code>for my $dir (glob \"/Volumes/Lab/Data/Darwin/Patient/*/\"){\n    # skip if not a directory\n    if (! -d $dir) {\n        next;\n    }\n    my $txt = \"$dir/PointMutation/txtfile.txt\";\n    my $bam = \"$dir/SequencingData/DNA/bamfile.bam\";\n\n    # ... you magical stuff here\n}\n</code></pre>\n\n<p>This is assuming that all directories under <code>/Volumes/Lab/Data/Darwin/Patient/</code> follow the convention.</p>\n\n<p>That said, more long term/robust way of organizing analyses with lots of different files all over the place is either 1) organize all files necessary for each analysis under one directory, or 2) to create meta files (i'd use JSON/yaml) which contain the necessary file names.</p>\n"}], "owner": {"reputation": 59, "user_id": 10131513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bEV6ubWZmws/AAAAAAAAAAI/AAAAAAAAAtw/CWIu-PIWdCI/photo.jpg?sz=128", "display_name": "Darwin Chang", "link": "https://stackoverflow.com/users/10131513/darwin-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 52125047, "answer_count": 1, "score": 0, "last_activity_date": 1535778455, "creation_date": 1535777919, "question_id": 52125003, "link": "https://stackoverflow.com/questions/52125003/perl-run-script-on-multiple-files-in-multiple-directories", "title": "Perl: Run script on multiple files in multiple directories", "body": "<p>I have a perl script that reads a .txt and a .bam file, and creates an output called output.txt.</p>\n\n<p>I have a lot of files that are all in different folders, but are only slightly different in the filename and directory path.</p>\n\n<p>All of my txt files are in different subfolders called PointMutation, with the full path being</p>\n\n<pre><code>/Volumes/Lab/Data/Darwin/Patient/[Plate 1/P1H10]/PointMutation\n</code></pre>\n\n<p>The text(s) in the bracket is the part that changes, But the Patient subfolder contains all of my txt files.</p>\n\n<p>My .bam file is located in a subfolder named DNA with a full path of</p>\n\n<pre><code>/Volumes/Lab/Data/Darwin/Patient/[Plate 1/P1H10]/SequencingData/DNA\n</code></pre>\n\n<p>Currently how I run this script is go on the terminal </p>\n\n<pre><code>cd /Volumes/Lab/Data/Darwin/Patient/[Plate 1/P1H10]/PointMutation\nperl ~/Desktop/Scripts/Perl.pl \"/Volumes/Lab/Data/Darwin/Patient/[Plate \n1/P1H10]/PointMutation/txtfile.txt\" \"/Volumes/Lab/Data/Darwin/Patient/[Plate \n1/P1H10]/SequencingData/DNA/bamfile.bam\"\n</code></pre>\n\n<p>With only 1 or two files, that is fairly easy, but I would like to automate it once the files get much larger. Also once I run these once, I don't want to do it again, but I will get more information from the same patient, is there a way to block a folder from being read?</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1535755861, "post_id": 52123335, "comment_id": 91198039, "body": "Hi, and welcome to Stack Overflow. Your original code has a bug in it, <code>s|&lt;head&gt;.*&lt;\\head&gt;|</code>. Note the <code>\\h</code> instead of <code>&#47;h</code>. <code>\\h</code> is matches &quot;horizontal whitespace&quot;. Is this your real code? Or did you make a mistake pasting it in? Otherwise <code>s|&lt;head&gt;.*&lt;&#47;head&gt;|&lt;head&gt;...&lt;&#47;head&gt;|s;</code> is fine, though <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">you should not use regexes to parse HTML</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535756067, "post_id": 52123335, "comment_id": 91198073, "body": "Assuming <code>&lt;\\head&gt;</code> is a mistake, your code does what you expect. Whatever you are using to view the result is probably the cause of your missing tags. Are you looking at the output in a browser?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535756203, "creation_date": 1535756203, "answer_id": 52123437, "question_id": 52123335, "link": "https://stackoverflow.com/questions/52123335/in-perl-substitution-replace-field/52123437#52123437", "title": "&#39;&lt;&#39; in Perl substitution REPLACE field", "body": "<p>Assuming <code>&lt;\\head&gt;</code> is a mistake, your code does what you expect. Whatever you are using to view the result is probably the cause of your missing tags. Are you looking at the output in a browser?</p>\n\n<p>When you remove the opening <code>&lt;</code>, the tags no longer look like tags and they are displayed instead of being actioned.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1535777289, "last_edit_date": 1535777289, "creation_date": 1535776983, "answer_id": 52124937, "question_id": 52123335, "link": "https://stackoverflow.com/questions/52123335/in-perl-substitution-replace-field/52124937#52124937", "title": "&#39;&lt;&#39; in Perl substitution REPLACE field", "body": "<p>The first snippet does not produce the output you claim it does.</p>\n\n<pre><code>$ perl -e'$_ = \"&lt;head&gt;foo&lt;/head&gt;\"; s|&lt;head&gt;.*&lt;\\head&gt;|&lt;head&gt;...&lt;/head&gt;|s; CORE::say'\n&lt;head&gt;foo&lt;/head&gt;\n</code></pre>\n\n<p>The reason it doesn't perform a replacement is because <code>\\h</code> matches a horizontal whitespace character.</p>\n\n<p>You probably meant to use <code>&lt;/head&gt;</code> instead of <code>&lt;\\head&gt;</code>. That produces the desired output.</p>\n\n<pre><code>$ perl -e'$_ = \"&lt;head&gt;foo&lt;/head&gt;\"; s|&lt;head&gt;.*&lt;/head&gt;|&lt;head&gt;...&lt;/head&gt;|s; CORE::say'\n&lt;head&gt;...&lt;/head&gt;\n</code></pre>\n\n<p>Nothing even similar to your code produces just <code>...</code> as you claim. Of course, if you view a file containing <code>&lt;head&gt;...&lt;/head&gt;</code> in an HTML viewer, it would appear as <code>...</code>. To produces HTML that renders as <code>&lt;head&gt;...&lt;/head&gt;</code>, you'll need to perform some escaping.</p>\n\n<pre><code>$ perl -e'\n   use HTML::Escape qw( escape_html );\n   $_ = \"&lt;head&gt;foo&lt;/head&gt;\";\n   s|&lt;head&gt;.*&lt;/head&gt;|&lt;head&gt;...&lt;/head&gt;|s;\n   CORE::say(escape_html($_));\n'\n&amp;lt;head&amp;gt;...&amp;lt;/head&amp;gt;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3635806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800b6ba0ee5c91a3fdd739e8e76c6a8d?s=128&d=identicon&r=PG&f=1", "display_name": "JPF", "link": "https://stackoverflow.com/users/3635806/jpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535783550, "creation_date": 1535755273, "question_id": 52123335, "link": "https://stackoverflow.com/questions/52123335/in-perl-substitution-replace-field", "title": "&#39;&lt;&#39; in Perl substitution REPLACE field", "body": "<p>Why does applying the perl code</p>\n\n<pre><code> undef $/;  # read in entire file or STDIN\n $_ = &lt;&gt;;\n s|&lt;head&gt;.*&lt;\\head&gt;|&lt;head&gt;...&lt;/head&gt;|s;\n</code></pre>\n\n<p>applied to a text file containing</p>\n\n<pre><code> &lt;head&gt;[anything]&lt;/head&gt;\n</code></pre>\n\n<p>produce</p>\n\n<pre><code> ...\n</code></pre>\n\n<p>and not  </p>\n\n<pre><code> &lt;head&gt;...&lt;/head&gt;\n</code></pre>\n\n<p>?</p>\n\n<p>When the '&lt;' characters in the substitution REPLACE field are omitted, as in</p>\n\n<pre><code> s|&lt;head&gt;.*&lt;/head&gt;|head&gt;.../head&gt;|s;\n</code></pre>\n\n<p>the substitution produces</p>\n\n<pre><code> head&gt;...end&gt;\n</code></pre>\n\n<p>The '&lt;' character makes the difference, but I can find no explanation of why.</p>\n\n<p>How does one produce a '&lt;' in the substitution result?</p>\n"}, {"tags": ["perl", "github", "dist-zilla"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1535792838, "creation_date": 1535792838, "answer_id": 52126638, "question_id": 52119640, "link": "https://stackoverflow.com/questions/52119640/taking-github-repo-public-causes-problems-with-distzilla/52126638#52126638", "title": "Taking github repo public causes problems with Dist::Zilla", "body": "<p>Your <code>[Bugtracker]</code> entry leads to duplication because you are also setting the bugtracker through <code>[GitHub::Meta]</code>. Choose one or the other.</p>\n\n<p>As for version number management, note that <code>[Git::NextVersion]</code> is based on your git tags. Make sure that these tags are present in your local repository and have the correct format. That plugin uses a command line invocation similar to this to obtain all tags:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git rev-list --simplify-by-decoration --pretty=%d HEAD | grep -oE 'tag: [^,)\\s]+'\n</code></pre>\n\n<p>Public GitHub repos should not be a problem for Dist::Zilla \u2013 this is exactly the setup most dzil distros use anyway. But interactions between multiple plugins can lead to hard to track down bugs, especially since the order of plugins is important. It can help to organize your plugins by the phase in which they run, and to test whether the problem persists after removing optional plugins. It also tends to be better to start with a simple <code>dist.ini</code> and add plugins as pain points in your development process become apparent.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52126638, "answer_count": 1, "score": 1, "last_activity_date": 1535792838, "creation_date": 1535733474, "question_id": 52119640, "link": "https://stackoverflow.com/questions/52119640/taking-github-repo-public-causes-problems-with-distzilla", "title": "Taking github repo public causes problems with Dist::Zilla", "body": "<p>I have a module, built with <code>Dist::Zilla</code>. I have <code>Dist::Zilla</code> set up to automatically push changes out to my GitHub repo. Works great when the repo is private.</p>\n\n<p>However, as soon as I make the repo public, I start getting errors during the build process. Specifically, these lines in the <code>dist.ini</code></p>\n\n<pre><code>[Bugtracker]\nweb = http://github.com/myaccount/%s/issues\n</code></pre>\n\n<p>If I comment out these lines, it works. With these lines left in, I get an error:</p>\n\n<pre><code>Duplication of element resources.bugtracker.web at /Users/me/perl5/perlbrew/perls/perl-5.24.1/lib/site_perl/5.24.4/Dist/Zilla.pm line 595.\n</code></pre>\n\n<p>OK, so fine, I comment out the lines. However, another problem crops up. The version number of my builds no longer autoincrements and is stuck at the same number every time I try to release a build.</p>\n\n<p>Is there some configuration setting I need to change with Dist::Zilla so it will play nice with public github repos? Here is the full dist.ini file:</p>\n\n<pre><code>name    = Module-Test\nauthor  = me\nlicense = Perl_5\ncopyright_holder = Me\ncopyright_year   = 2018\n\n[Repository]\n;[Bugtracker]\n;web = http://github.com/sdondley/%s/issues\n[Git::NextVersion]\n[GitHub::Meta]\n[PodVersion]\n[PkgVersion]\n[NextRelease]\n[Run::AfterRelease]\nrun = mv Changes tmp &amp;&amp; cp %n-%v/Changes Changes\n[InstallGuide]\n\n[PodWeaver]\n[ReadmeAnyFromPod]\ntype = markdown\nlocation = root\nphase = release\n\n[Git::Check]\n[Git::Commit]\nallow_dirty = README.mkdn\nallow_dirty = Changes\nallow_dirty = INSTALL\n[Git::Tag]\n[Git::Push]\n[Run::AfterRelease / MyAppAfter]\nrun = mv tmp/Changes Changes\n\n[GatherDir]\n[AutoPrereqs]\n[PruneCruft]\n[PruneFiles]\nfilename = weaver.ini\nfilename = README.mkdn\nfilename = dist.ini\nfilename = .gitignore\n[ManifestSkip]\n[MetaYAML]\n[License]\n[Readme]\n[ExtraTests]\n[ExecDir]\n[ShareDir]\n[MakeMaker]\n[Manifest]\n[TestRelease]\n[FakeRelease]\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1535730844, "post_id": 52118990, "comment_id": 91188909, "body": "Is there an empty line before the closing <code>Success</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1535731971, "post_id": 52118990, "comment_id": 91189453, "body": "Crossposted to <a href=\"https://www.perlmonks.org/?node_id=1221457\" rel=\"nofollow noreferrer\">Perlmonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1535787824, "post_id": 52121122, "comment_id": 91202714, "body": "I think I&#39;d use <code>$&#47; = &#39;&#39;</code> - just in case any extra blank lines sneaked in between the records."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1535740790, "creation_date": 1535740790, "answer_id": 52121122, "question_id": 52118990, "link": "https://stackoverflow.com/questions/52118990/search-after-match-in-dynamic-lines/52121122#52121122", "title": "Search after match in dynamic lines", "body": "<p>Perl has a \"paragraph mode\". You change the input record separator, <code>$/</code> to read chunks of \"multiline\" text. This splits up your data on the double newline:</p>\n\n<pre><code>use v5.10;\n\n$/ = \"\\n\\n\";\n\nwhile( &lt;INPUT&gt; ) {\n    chomp;\n    say \"==========\\n$_\\n----------\\n\";\n    }\n</code></pre>\n\n<p>Start your program with that and try to do whatever else you're trying to do. In your next question you'll have the small demonstration program you need to get better help.</p>\n"}], "owner": {"reputation": 15, "user_id": 6562915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd4697b11ef770ba1224a511c43e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Berbert", "link": "https://stackoverflow.com/users/6562915/leonardo-berbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1535788416, "answer_count": 1, "score": -3, "last_activity_date": 1535740790, "creation_date": 1535730655, "last_edit_date": 1535730857, "question_id": 52118990, "link": "https://stackoverflow.com/questions/52118990/search-after-match-in-dynamic-lines", "closed_reason": "Needs details or clarity", "title": "Search after match in dynamic lines", "body": "<p>Dears,</p>\n\n<p>I have the file below in the following format</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>Success|Filter passed|[invalid field]|[invalid field]|Id-350a875b087965e58cbe1f4a\nAccept: text/plain, text/plain, application/json, application/*+json, */*, */*\nHost: api2.tim.com.br\nUser-Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36\nVia: 1.1 \nX-Forwarded-For: 144.22.98.123\nX-Forwarded-Host:\nX-Forwarded-Server:\n\nSuccess|Success in calling policy shortcut|[invalid field]|[invalid field]|[invalid field]|Id-350a875b087965e58cbe1f4a|Call 'Set Request Message'|GET\nAccept: text/plain, text/plain, application/json, application/*+json, */*, */*\nHost: api2.tim.com.br\nUser-Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36\nVia: 1.1 api2.tim.com.br\nX-Forwarded-For: 144.22.98.123\nX-Forwarded-Host: \nX-Forwarded-Server: \nContent-Type: text/xml; charset=\"UTF-8\"\n</code></pre>\n\n<p>I need to perform a search for the line that begins with the string \"^ Success\" and display all the items until there is a \"^ Sucess\" string again. \nHere is an example of what I need to display:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Success|Filter passed|[invalid field]|[invalid field]|Id-350a875b087965e58cbe1f4a\nAccept: text/plain, text/plain, application/json, application/*+json, */*, */*\nHost: api2.tim.com.br\nUser-Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36\nVia: 1.1 \nX-Forwarded-For: 144.22.98.123\nX-Forwarded-Host:\nX-Forwarded-Server:\n</code></pre>\n\n<p>What happens is that the amount of lines below after the match is very dynamic.</p>\n\n<p>What happens is that the amount of lines below the match is very dynamic and in the same file there may be several lines \nof the same match and I would need to display them also when the file is run.</p>\n\n<p>Could you guys help me?</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535700097, "post_id": 52110325, "comment_id": 91171275, "body": "Well, this seems fun: <a href=\"https://stackoverflow.com/questions/546746/sql-server-2008-windows-auth-login-error-the-login-is-from-an-untrusted-domain\" title=\"sql server 2008 windows auth login error the login is from an untrusted domain\">stackoverflow.com/questions/546746/&hellip;</a>"}, {"owner": {"reputation": 526, "user_id": 7326157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f374a04ccdbd4ed63291dacb8c0e2707?s=128&d=identicon&r=PG&f=1", "display_name": "Rich Campbell", "link": "https://stackoverflow.com/users/7326157/rich-campbell"}, "edited": false, "score": 0, "creation_date": 1535727288, "post_id": 52110325, "comment_id": 91187026, "body": "Can  you confirm whether you&#39;re trying to connect to a MS SQL Server or  Sybase instance running on Windows as &#39;SQL Server&#39; can be taken for either RDBMS."}, {"owner": {"reputation": 67, "user_id": 5886828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24bfdc6152eedeb98723edddc1eba67?s=128&d=identicon&r=PG&f=1", "display_name": "SwapnilM", "link": "https://stackoverflow.com/users/5886828/swapnilm"}, "edited": false, "score": 0, "creation_date": 1535950497, "post_id": 52110325, "comment_id": 91236465, "body": "@ Rich Campbell  I am trying to connect to MS SQL Server."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 5886828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24bfdc6152eedeb98723edddc1eba67?s=128&d=identicon&r=PG&f=1", "display_name": "SwapnilM", "link": "https://stackoverflow.com/users/5886828/swapnilm"}, "is_accepted": false, "score": 0, "last_activity_date": 1598442590, "creation_date": 1598442590, "answer_id": 63597017, "question_id": 52110325, "link": "https://stackoverflow.com/questions/52110325/perl-dbisybase-connect-to-sql-server-that-uses-windows-authentication-from-linu/63597017#63597017", "title": "Perl dbi:Sybase Connect to SQL Server that uses Windows Authentication from linux machine", "body": "<p>I am able to solve this with freeTds, In freeTds config file we need to set ntlmv2 to yes</p>\n<pre><code>[PACKAGE-NAME]\n        host = &lt;HOSTANME&gt;\n        database = &lt;DB-Name&gt;\n        tds version = 8.0\n        use ntlmv2 = yes\n        client charset = UTF-8\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5886828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24bfdc6152eedeb98723edddc1eba67?s=128&d=identicon&r=PG&f=1", "display_name": "SwapnilM", "link": "https://stackoverflow.com/users/5886828/swapnilm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1598442590, "creation_date": 1535699710, "last_edit_date": 1535699929, "question_id": 52110325, "link": "https://stackoverflow.com/questions/52110325/perl-dbisybase-connect-to-sql-server-that-uses-windows-authentication-from-linu", "title": "Perl dbi:Sybase Connect to SQL Server that uses Windows Authentication from linux machine", "body": "<p>I'm using perl DBI to connect to a SQL Server with dbi:Sybase from linux machine, but when I try to connect, it's giving me error like </p>\n\n<p><code>DBI connect('DBName','DOMAIN\\UserName',...) failed: Server message number=18452 severity=14 state=1 line=1 server=SERVERNAME text=Login failed. The login is from an untrusted domain and cannot be used with Windows authentication. OpenClient message: LAYER = (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (34)\nServer DATAMART, database\nMessage String: Adaptive Server connection failed\n at connect.pl line 37</code></p>\n\n<p>My code is: </p>\n\n<pre><code>BEGIN{\n   $ENV{SYBASE} = \"/opt/sybclient-12.5.1\";\n   $ENV{FREETDSCONF} = \"PATH/config/freetds.conf\";\n}\n\nuse lib \"PATH/perl-lib/lib64/perl5\";\nuse lib \"PATH/perl-lib/share/perl5/\";\n\n\nmy $lib = \"PATH/FreeTDS_32bit/libct.so.4.0.0\";\nDynaLoader::dl_load_file($lib, 1) or die \"Unable to load freetds libct.so: $!\\n\";\n\n$host = 'ServerName';  $port = 'PORT';\n$database = 'DBName';  $user = 'DOMAIN\\\\userName'; \n$auth = 'PASS';\n\n$_dmDBH = DBI-&gt;connect(dbi:Sybase:server=$host; database=$database;port=$port\",\"$user\", \"$auth\") || die \"Database connection not made: $DBI::errstr\";\n</code></pre>\n"}, {"tags": ["mysql", "perl", "soap", "dbi"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535694080, "post_id": 52109044, "comment_id": 91168783, "body": "KLooks like DBI is not installed"}, {"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535694347, "post_id": 52109044, "comment_id": 91168854, "body": "@Jens It&#39;s already installed."}, {"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535694394, "post_id": 52109044, "comment_id": 91168884, "body": "@Jens the database connection working in normal perl file. If it&#39;s DBI not installed how it&#39;s working normal .pl file"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535694483, "post_id": 52109044, "comment_id": 91168915, "body": "Where is the DBI.pm located?"}, {"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535694805, "post_id": 52109044, "comment_id": 91169022, "body": "/usr/local/lib/x86_64-linux-gnu/perl/5.26.1"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535694909, "post_id": 52109044, "comment_id": 91169066, "body": "And is that directory in the <code>@INC</code> of whatever program is trying to use your module?"}, {"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535695458, "post_id": 52109044, "comment_id": 91169255, "body": "@Shawn. No. I have used only use DBI.  You mean to use do &quot;File/DBI.pm&quot; method ?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535695896, "post_id": 52109044, "comment_id": 91169425, "body": "No... Is that directory in the <code>@INC</code> of whatever program is trying to use your module? If, say, you&#39;re trying to run it with a different version of perl than you were using for your first program, it might not be."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535699725, "post_id": 52109044, "comment_id": 91171085, "body": "Please provide the FULL error message, and the path to <code>DBI.pm</code> (<code>&#47;usr&#47;local&#47;lib&#47;x86_64-linux-gnu&#47;perl&#47;5.26.1&#47;DBI.pm</code>?)"}, {"owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535700325, "post_id": 52109044, "comment_id": 91171395, "body": "@ikegami the full error message is   &quot;&#39;Failed to access class (Marketplace): Can\\&#39;t locate DBI.pm in atINC (you may need to install the DBI module) (at INC contains: /var/www/kane/CGI-bin) at /var/www/kane/CGI-bin/Marketplace.pm line 3. BEGIN failed--compilation aborted at /var/www/kane/CGI-bin/Marketplace.pm line 3. Compilation failed in require at (eval 104) line 1. &quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1535700470, "post_id": 52109044, "comment_id": 91171467, "body": "Something in your program corrupted <code>@INC</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535704362, "post_id": 52109044, "comment_id": 91173424, "body": "Is this on a shared hosting environment or a virtual server? Does it by any chance run cpanel?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535753856, "post_id": 52109044, "comment_id": 91197589, "body": "Reopened. The problem isn&#39;t that the module isn&#39;t installed. That said, there&#39;s no information from which to proceed, so voting to close for that reason."}], "answers": [{"tags": [], "owner": {"reputation": 1324, "user_id": 6508520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80809cfc27b89f5dbd342937b64bafbd?s=128&d=identicon&r=PG&f=1", "display_name": "VinothRaja", "link": "https://stackoverflow.com/users/6508520/vinothraja"}, "is_accepted": true, "score": 1, "last_activity_date": 1537855665, "creation_date": 1537855665, "answer_id": 52491620, "question_id": 52109044, "link": "https://stackoverflow.com/questions/52109044/perl-database-connect-not-working-in-pm-file/52491620#52491620", "title": "Perl Database connect not working in .pm file", "body": "<p>Try this below code in marketplace.pm file.</p>\n\n<pre><code>use ENV;\nmy $PERL5LIB= $ENV{'PERL5LIB'};\n package Marketplace;\n\nBEGIN {\n push(@INC, $PERL5LIB);\n};\nuse DBI;\nsub connect_db {\nmy $driver = \"mysql\"; \nmy $database = \"marketplace_perl\";\nmy $dsn = \"DBI:$driver:database=$database\";\nmy $userid = \"root\";\nmy $password = \"root\";\nmy $dbh = DBI-&gt;connect($dsn, $userid, $password );\nreturn $dbh;\n}\n\nsub login_marketplace { \n\nmy $dbh=connect_db();\nmy $sth = $dbh-&gt;prepare(\"SELECT UserEmail,UserPassword FROM pj_user where UserEmail=? and UserPassword=?\");\n\n$sth-&gt;execute($UserEmail,$UserPassword);\nmy $User_count=$sth-&gt;rows;\nreturn $User_count\n\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 9998415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f582fcef6ee949146244491721dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "Kanewilliam", "link": "https://stackoverflow.com/users/9998415/kanewilliam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 3, "accepted_answer_id": 52491620, "answer_count": 1, "score": 2, "last_activity_date": 1537855665, "creation_date": 1535693847, "last_edit_date": 1535704266, "question_id": 52109044, "link": "https://stackoverflow.com/questions/52109044/perl-database-connect-not-working-in-pm-file", "title": "Perl Database connect not working in .pm file", "body": "<p>In Perl I have connected the database using DBI concept. The database connection and select table query is working fine in .pl file. But I have run the DBI database connection code in .pm file. It's not working.</p>\n\n<p>Please review code.</p>\n\n<p>Sample.pl (It's working fine)</p>\n\n<pre><code>use DBI;\nmy $driver = \"mysql\"; \n    my $database = \"marketplace_perl\";\n    my $dsn = \"DBI:$driver:database=$database\";\n    my $userid = \"root\";\n    my $password = \"root\";\n    my $dbh = DBI-&gt;connect($dsn, $userid, $password );\n    my $dbh=connect_db();\n        my $sth = $dbh-&gt;prepare(\"SELECT UserEmail,UserPassword FROM pj_user where UserEmail=? and UserPassword=?\");\n\n        $sth-&gt;execute($UserEmail,$UserPassword);\n</code></pre>\n\n<p>Marketplace.pm (It's not working)</p>\n\n<pre><code>package Marketplace;\nuse DBI;\n    sub connect_db {\n        my $driver = \"mysql\"; \n        my $database = \"marketplace_perl\";\n        my $dsn = \"DBI:$driver:database=$database\";\n        my $userid = \"root\";\n        my $password = \"root\";\n        my $dbh = DBI-&gt;connect($dsn, $userid, $password );\n       return $dbh;\n    }\n\n    sub login_marketplace { \n\n    my $dbh=connect_db();\n            my $sth = $dbh-&gt;prepare(\"SELECT UserEmail,UserPassword FROM pj_user where UserEmail=? and UserPassword=?\");\n\n            $sth-&gt;execute($UserEmail,$UserPassword);\n            my $User_count=$sth-&gt;rows;\n    return $User_count\n\n    }\n</code></pre>\n\n<p>It returns the error message of <strong>\"Failed to access class (Marketplace): Can\\'t locate DBI.pm in @INC (you may need to install the DBI module)\"</strong></p>\n\n<p>Please let me know how to fix the DB issue. </p>\n"}, {"tags": ["perl", "file", "filepath", "file-extension"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1535687727, "post_id": 52108070, "comment_id": 91167099, "body": "<a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/File/Glob.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1535688862, "post_id": 52108070, "comment_id": 91167320, "body": "You check if there&#39;s a file named <code>*.log</code>. And there isn&#39;t. To find files matching <code>*.log</code>, use <code>glob</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1535688916, "post_id": 52108070, "comment_id": 91167332, "body": "By the way, when <code>-e</code> returns false, it doesn&#39;t mean the file doesn&#39;t exist. It means an error occurred. Only when <code>$!{ENOENT}</code> is also true does it mean the file doesn&#39;t exist."}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1535690087, "post_id": 52108070, "comment_id": 91167604, "body": "Thanks for all suggestions, but i got this error when &quot;use File::Glob::glob()&quot;: File::Glob::glob() will disappear in perl 5.30. Use File::Glob::bsd_glob() instead. And this error when &quot;use File::Glob::bsd_glob()&quot;: Can&#39;t locate File/Glob/bsd_glob.pm in @INC (you may need to install the File::Glob::bsd_glob module)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1535705520, "post_id": 52108070, "comment_id": 91174040, "body": "You don&#39;t need to <code>use File::Glob</code>. Perl&#39;s <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">built-in <code>glob</code></a> is just fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535722904, "post_id": 52108070, "comment_id": 91184343, "body": "<i>&quot;It worked now. Thanks all&quot;</i> That isn&#39;t sufficient explanation. The <i>primary purpose</i> of a page on Stack Overflow is to inform other people of a solution if they have a similar problem. It doesn&#39;t help, and it&#39;s very selfish, to just bail out once your own problem is fixed. Please write up an <i>answer</i> below that describes the resolution and explains in detail what you did to fix the issue."}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1535723504, "post_id": 52108070, "comment_id": 91184712, "body": "Hello Borodin, I already have updated the result in my post. Here i use Glob feature at line 6 and 10."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535724020, "post_id": 52108070, "comment_id": 91185033, "body": "So you&#39;ve changed your question to show code that doesn&#39;t have an error? Please don&#39;t do that: it makes nonsense of any comments or answers that refer to the original version, and also doesn&#39;t make sense in your question: why are you asking for help to fix working code? Please write up an <i>answer</i> instead that explains what the problem was and what you have changed. I&#39;ve rolled back your edit to show the faulty code again."}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1535724222, "post_id": 52108070, "comment_id": 91185170, "body": "Oho, that&#39;s my fault. I will add the final code in comment."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 1, "creation_date": 1535769257, "post_id": 52118220, "comment_id": 91199916, "body": "That&#39;s what i need to post my result. Thanks you so much :)"}], "tags": [], "owner": {"reputation": 2307, "user_id": 1611362, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5ea82b95c95ab14034a879cfaedb79e?s=128&d=identicon&r=PG", "display_name": "pitseeker", "link": "https://stackoverflow.com/users/1611362/pitseeker"}, "is_accepted": false, "score": 1, "last_activity_date": 1535727834, "creation_date": 1535727834, "answer_id": 52118220, "question_id": 52108070, "link": "https://stackoverflow.com/questions/52108070/check-a-dynamic-file-with-specific-type-in-other-directory-exist-or-not-after-go/52118220#52118220", "title": "Check a dynamic file with specific type in other directory exist or not after got full path to it?", "body": "<p>You could use perl glob.<br>\nChange your script to this:<br></p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Cwd;\n\nmy $dir = getcwd; # Get current directory path into $dir\nmy $filepath = glob($dir . '/../output/*.log');\n# ..\\\\output\\\\ to get Upper location and output folder\n# assign any \"*\" base name file with type \".log\" to $filepath  \nif(-e $filepath ) { \n    print(\"File $filepath exist \\n\");\n}\nelse\n{\n    print(\"File $filepath does not exist \\n\");\n}\n</code></pre>\n\n<p>It will however ignore all but the first files that match *.log.</p>\n"}], "owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535727834, "creation_date": 1535686145, "last_edit_date": 1535724056, "question_id": 52108070, "link": "https://stackoverflow.com/questions/52108070/check-a-dynamic-file-with-specific-type-in-other-directory-exist-or-not-after-go", "title": "Check a dynamic file with specific type in other directory exist or not after got full path to it?", "body": "<p>I have a directory(at upper directory of current script execution) with some files inside. Here i have only 1 file type with .log extension, but it's *.log base name is dynamic and will be changed every time script running:</p>\n\n<p><strong>../ouput/</strong></p>\n\n<pre><code>aaa.txt bbb.txt *.log\n</code></pre>\n\n<p>On this,i want to check the file *.log exist or not, then assign it's full path with file name to a variable for process later. I'm trying with this:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse Cwd;\n\nmy $dir = getcwd; # Get current directory path into $dir\nmy $filepath = $dir . '..\\\\output\\\\*.log';\n# ..\\\\output\\\\ to get Upper location and output folder\n# assign any \"*\" base name file with type \".log\" to $filepath  \nif(-e $filepath ) {\n    print(\"File $filepath exist \\n\");\n}\nelse\n{\n    print(\"File $filepath does not exist \\n\");\n}\n</code></pre>\n\n<p>But i always get $filepath does not exist.\nIs there any mistake?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1535665646, "post_id": 52105639, "comment_id": 91162608, "body": "Remember that the CSV format requires escaping any quotes that might appear in your data."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1535665681, "post_id": 52105639, "comment_id": 91162619, "body": "For Perl solutions see <a href=\"https://stackoverflow.com/questions/1444096/how-do-i-create-a-csv-file-using-perl\">this answer</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1535671674, "post_id": 52105639, "comment_id": 91164121, "body": "Which part of this are you having trouble with? The <code>ps</code> part, the <code>grep</code> part, or the <code>awk</code> part? Are you trying to do all of this in Perl without calling <code>ps</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1535671745, "post_id": 52105639, "comment_id": 91164132, "body": "What exactly do you mean by &quot;is not working&quot;? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, none of your code uses Perl, so how is this related to your question?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1535936157, "last_edit_date": 1535936157, "creation_date": 1535671881, "answer_id": 52106665, "question_id": 52105639, "link": "https://stackoverflow.com/questions/52105639/write-command-output-to-a-csv-file-in-perl/52106665#52106665", "title": "Write command output to a csv file in perl", "body": "<p>The <a href=\"https://stackoverflow.com/questions/1444096/how-do-i-create-a-csv-file-using-perl\">link</a> in the comment by <a href=\"https://stackoverflow.com/users/87189/tadman\">tadman</a> has a lot of information, but you can also do</p>\n\n<pre><code>ps -eo pid,comm,pmem,vsz | grep process_name | \n    perl -nE '\n        BEGIN { say \"pid,comm,pmem,vsz\" }; \n        say join \",\", split\n    ' &gt; ps_process.out\n</code></pre>\n\n<p>(broken into multiple lines for readability)</p>\n\n<p>The <code>BEGIN</code> block is executed only in the compilation phase so it's not repeated in iterations.</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535740318, "creation_date": 1535740318, "answer_id": 52121033, "question_id": 52105639, "link": "https://stackoverflow.com/questions/52105639/write-command-output-to-a-csv-file-in-perl/52121033#52121033", "title": "Write command output to a csv file in perl", "body": "<p>Here is a straightforward way, using the <code>-a</code> switch to implicity create <code>@F</code> for each line piped in (it's a shortcut for saying <code>@F = split /\\s+\\, $_</code>) </p>\n\n<pre><code>echo pid,comm,pmem,vsz &gt; out.csv\nps -eo pid,comm,pmem,vsz | perl -lnaE 'say join \",\", @F' &gt;&gt; out.csv\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 52106665, "answer_count": 2, "score": 2, "last_activity_date": 1535936157, "creation_date": 1535664724, "last_edit_date": 1535665507, "question_id": 52105639, "link": "https://stackoverflow.com/questions/52105639/write-command-output-to-a-csv-file-in-perl", "title": "Write command output to a csv file in perl", "body": "<p>I am trying to write a command output to a csv file .Below is the command i want to use to write the data into a csv file </p>\n\n<pre><code>ps -eo pid,comm,pmem,vsz | grep process  | awk '{print $1\",\",$2\",\",$3\",\",$4}'\n</code></pre>\n\n<p>How we can do this in Perl . Header of the csv file should have and then corresponding values for this :</p>\n\n<pre><code>pid,comm,pmem,vsz\n</code></pre>\n\n<p>I was trying to do something like this but it is not working for me :</p>\n\n<pre><code>echo \"execution started..\"\n\npid,comm,pmem,vsz &gt;&gt; out.txt\n\nwhile [ true ]; do\n    echo \"running..\"\n    sleep 2\n    ps -eo pid,comm,pmem,vsz | grep process  | awk '{print $1\",\",$2\",\",$3\",\",$4}' &gt;&gt; out.txt\ndone\n</code></pre>\n"}, {"tags": ["perl", "seek"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 5, "creation_date": 1535660714, "post_id": 52104530, "comment_id": 91160804, "body": "<a href=\"https://stackoverflow.com/a/10353338/168657\"><code>DATA</code> is seekable</a>. Store the result of <code>tell(DATA)</code> when the script starts and treat that as the first byte of the <code>DATA</code> stream."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1535661809, "post_id": 52104530, "comment_id": 91161271, "body": "Avoid DATA if you need it seekable; use a separate file instead.  Is this for a module you are distributing?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535705438, "post_id": 52104530, "comment_id": 91173983, "body": "For what it&#39;s worth, take a look at <a href=\"https://metacpan.org/pod/Data::Section::Simple\" rel=\"nofollow noreferrer\">metacpan.org/pod/Data::Section::Simple</a>. Not exactly what you describe you want to do, but maybe useful anyway."}, {"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535808982, "post_id": 52104530, "comment_id": 91207729, "body": "@simbabque - I will keep this in my League of Extraordinary CPAN Modules. :-) Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1535659825, "post_id": 52104619, "comment_id": 91160415, "body": "OP can just use SEEK_CUR (instead of SEEK_SET) as the whence."}, {"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 0, "creation_date": 1535659897, "post_id": 52104619, "comment_id": 91160453, "body": "Duh - special semantics. So I should while() until <b>DATA</b>, get that position, then all seeks are relative to that.  Sounds like something that is either on CPAN or should be.  Thank you."}, {"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 0, "creation_date": 1535660335, "post_id": 52104619, "comment_id": 91160638, "body": "The other thing to do is:  <code>my $log_fh = \\*main::DATA; my $whence = $log_fh-&gt;tell(); $log_fh-&gt;seek($whence + 64,0); print &quot;\\n-- 64 --\\n&quot;,join (&quot;&quot;, &lt;$log_fh&gt; );</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 4, "creation_date": 1535662421, "post_id": 52104619, "comment_id": 91161516, "body": "@mpersico, Don&#39;t search for <code>__DATA__</code>. You&#39;re already positioned there. Use <code>SEEK_CUR</code> to move forwards 64 bytes.  If you need to seek back to the start, use <code>tell</code> to note the start position (before doing any seeking or reading)"}, {"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535808886, "post_id": 52104619, "comment_id": 91207709, "body": "@ikegami - look up to the third comment. :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535810493, "post_id": 52104619, "comment_id": 91208073, "body": "Don&#39;t use magical numbers like that. Use <code>SEEK_CUR</code> from Fcntl"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 7, "last_activity_date": 1535659612, "creation_date": 1535659612, "answer_id": 52104619, "question_id": 52104530, "link": "https://stackoverflow.com/questions/52104530/in-perl-why-cant-you-use-data-as-a-seekable-filehandle/52104619#52104619", "title": "In Perl, why can&#39;t you use __DATA__ as a seekable filehandle?", "body": "<blockquote>\n  <p>Running the seek(), it appears to not start at <strong>DATA</strong> but the start of the script</p>\n</blockquote>\n\n<p>I don't think you're making any mistake at all. That's exactly what happens. <code>DATA</code> is a filehandle that is open on your source file. Before your first <code>read()</code> from that filehandle, the file pointer is positioned immediately after the <code>__DATA__</code> token in the file. But you can use <code>seek()</code> to move the file pointer to any position at all in the file.</p>\n\n<p>I guess it would be harder to implement a \"special case\" filehandle that wasn't able to move back before its initial position.</p>\n"}], "owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1535671822, "creation_date": 1535659227, "last_edit_date": 1535671822, "question_id": 52104530, "link": "https://stackoverflow.com/questions/52104530/in-perl-why-cant-you-use-data-as-a-seekable-filehandle", "title": "In Perl, why can&#39;t you use __DATA__ as a seekable filehandle?", "body": "<p>Reading from DATA via the typical  slurp works. Trying to use DATA as a filehandle on which I can do a seek does not work. Is anyone able to point me the to the obvious mistake I must be making?</p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nif ($ARGV[0] eq 'seek' ) {\n    my $log_fh = \\*DATA;\n    $log_fh-&gt;seek(64,0);\n    print \"\\n-- 64 --\\n\",join (\"\", &lt;$log_fh&gt; );\n} else {\n    while (&lt;DATA&gt;) {\n        print $_;\n    }\n}\n\nexit;\n\n__DATA__\n01234567890123456789\n1234567890123456789\n1234567890123456789\n12\nX &lt;- That X is the 64th char in\nthis file.\nY &lt;- That Y is the 106th char in this file.\njunk\nmore junk.\nbye!\n\n$ perl file_from_data.pl slurp\n01234567890123456789\n1234567890123456789\n1234567890123456789\n12\nX &lt;- That X is the 64th char in\nthis file.\nY &lt;- That Y is the 106th char in this file.\njunk\nmore junk.\nbye!\n</code></pre>\n\n<p>Running the while() loop:</p>\n\n<pre><code>$ perl file_from_data.pl slurp\n01234567890123456789\n1234567890123456789\n1234567890123456789\n12\nX &lt;- That X is the 64th char in\nthis file.\nY &lt;- That Y is the 106th char in this file.\njunk\nmore junk.\nbye!\n</code></pre>\n\n<p>Running the seek(), it appears to not start at <strong>DATA</strong> but the start of the script:</p>\n\n<pre><code>$ perl file_from_data.pl seek\n\n-- 64 --\n'seek' ) {\n    my $log_fh = \\*DATA;\n    $log_fh-&gt;seek(64,0);\n    print \"\\n-- 64 --\\n\",join (\"\", &lt;$log_fh&gt; );\n} else {\n    while (&lt;DATA&gt;) {\n        print $_;\n    }\n}\n\nexit;\n\n__DATA__\n01234567890123456789\n1234567890123456789\n1234567890123456789\n12\nX &lt;- That X is the 64th char in\nthis file.\nY &lt;- That Y is the 106th char in this file.\njunk\nmore junk.\nbye!\n</code></pre>\n\n<p>This is an old Perl:</p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 16, subversion 3 (v5.16.3) built for x86_64-linux- \nthread-multi\n</code></pre>\n"}, {"tags": ["python", "perl", "pipe", "runtime-error", "flush"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535655462, "post_id": 52103391, "comment_id": 91158365, "body": "@porton, That leads to SIGPIPE being sent to the process, and the default behaviour of SIGPIPE is to kill the receiving process. The exit status of the <code>perl</code> process will reflect this. Python must change the default."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535655474, "post_id": 52103634, "comment_id": 91158371, "body": "I&#39;m pretty sure perl is not supposed to handle SIGPIPE by default."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535655640, "post_id": 52103634, "comment_id": 91158463, "body": "@melpomene Perhaps in particular situations? If it gets a <code>SIGPIPE</code> it must do something or it would be killed.  I think we&#39;d be upset if scripts printed to STDERR for over 4kB.  Apparently there was a good deliberation in Python community about informing the user, etc."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535655664, "post_id": 52103634, "comment_id": 91158487, "body": "I&#39;m also pretty sure it is getting killed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535656060, "post_id": 52103634, "comment_id": 91158710, "body": "OK, I got it -- it appears that it does killed, quietly.  (Of course I get output since that&#39;s when it gets killed!) .... testing before edit ..."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1535669399, "post_id": 52103634, "comment_id": 91163607, "body": "But some of our Perl scripts (after upgrading to a newer version of Perl) produces &quot;Unable to flush stdout: Broken pipe&quot; in the logs. What in Perl can cause this message? (This is the very question I need to answer. I was assigned the task to localize and eliminate this error, given that we don&#39;t yet know which of our Perl scripts causes this.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1535673144, "post_id": 52103634, "comment_id": 91164413, "body": "@porton After reading that question over (and melpomene&#39;s answer!) ... perhaps a signal handler won&#39;t do just so.  Ideas: either force a flush of stdout and catch (a presumed sigpipe) in the code, or do that at the very end.  That way you do what the interpreter seems to be doing but with a chance to catch the signal.  I presume that there is an actual signal."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1537727167, "last_edit_date": 1537727167, "creation_date": 1535655135, "answer_id": 52103634, "question_id": 52103391, "link": "https://stackoverflow.com/questions/52103391/brokenpipeerror-in-python-but-not-in-perl/52103634#52103634", "title": "BrokenPipeError in Python but not in Perl", "body": "<p>The python exception is raised since the reading process (<code>head</code>) closes its end so the script receives <code>SIGPIPE</code> the next time it attempts to write; see <a href=\"https://stackoverflow.com/q/26692284/4653379\">this post</a>. This involved decisions in Python community, to change defaults so to inform the user (see the linked post).</p>\n\n<p>This is not seen in Perl because it gets killed by that signal (what is its disposition) without saying anything. So you could override that</p>\n\n<pre><code>use warnings;\n\n$| = 1;\n\n$SIG{PIPE} = sub { die $! };\n\nfor my $i (0..4_000-1) {\n    print $i, \"\\n\";\n}\n</code></pre>\n\n<p>(without the <code>$| = 1</code> I need more than <code>5_000</code> above for it to happen.)</p>\n\n<p>Or, rather issue a <code>warn</code>ing (instead of <code>die</code>) so that the program continues</p>\n\n<pre><code>local $SIG{PIPE} = sub { warn \"Ignoring $_[0]: $!\" };\n</code></pre>\n\n<p><strong>Update</strong> &nbsp; Given the clarification provided in a comment I'd recommend this handler to be global in fact. It can still be overriden with a <code>local</code> one in particular scopes. Besides, there is nothing wrong with surviving a <code>SIGPIPE</code> instead of being terminated, as long as there is a warning.</p>\n\n<p>Note that even without that the exit status of the Perl process will show the problem. Run <code>echo $?</code> after the process \"completes\" (is quietly terminated); I get <code>32</code> on my system.</p>\n\n<p>To mimic Python's behavior further you could issue a <code>die</code> in the signal handler and handle that exception, by putting it all in <code>eval</code>.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/1848654/melpomene\">melpomene</a> and <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 9, "last_activity_date": 1535656979, "last_edit_date": 1535656979, "creation_date": 1535656229, "answer_id": 52103885, "question_id": 52103391, "link": "https://stackoverflow.com/questions/52103391/brokenpipeerror-in-python-but-not-in-perl/52103885#52103885", "title": "BrokenPipeError in Python but not in Perl", "body": "<p>What's going on here is that in both cases you have a process writing to a pipe whose read end was closed (by <code>head</code> exiting after a certain number of bytes).</p>\n\n<p>This causes a <code>SIGPIPE</code> signal to be sent to the writing process. By default this kills the process. The process can ignore the signal if it wants to, which just makes the <code>write</code> call fail with an <code>EPIPE</code> error.</p>\n\n<p><a href=\"https://docs.python.org/3/whatsnew/3.3.html#pep-3151\" rel=\"noreferrer\">Starting with version 3.3</a>, Python raises a <code>BrokenPipeError</code> exception in this case, so it looks like Python 1) ignores <code>SIGPIPE</code> by default and 2) translates <code>EPIPE</code> to a <code>BrokenPipeError</code> exception.</p>\n\n<p>Perl does not ignore or handle signals by default. That means it gets killed by <code>SIGPIPE</code> in your example, but because it is not the last command in a pipeline (that would be <code>head</code> here), the shell just ignores it. You can make it more visible by not using a pipeline:</p>\n\n<pre><code>perl pipe.pl &gt; &gt;(head -n3000 &gt;/dev/null)\n</code></pre>\n\n<p>This piece of bash trickery makes perl write to a pipe, but not as part of a shell pipeline. I can't test it now, but at minimum this will set <code>$?</code> (the command exit status) to <code>141</code> in the shell (128 + signal number, which for <code>SIGPIPE</code> is 13), and it may also report a <code>Broken pipe</code>.</p>\n\n<p>You can deal with it manually in the Perl code, though:</p>\n\n<ul>\n<li><p>Variant 1: Throw an error from the signal handler</p>\n\n<pre><code>$SIG{PIPE} = sub { die \"BrokenPipeError\" };\n</code></pre></li>\n<li><p>Variant 2: Ignore the signal, handle write errors</p>\n\n<pre><code>$SIG{PIPE} = 'IGNORE';\n...\nprint $i, \"\\n\" or die \"Can't print: $!\";\n</code></pre>\n\n<p>Note that in this case you have to think about buffering, however. If you don't enable autoflush (as in <code>STDOUT-&gt;autoflush(1)</code>) and output is going to a pipe or file, Perl will collect the text in an internal buffer first (and the <code>print</code> call will succeed). Only when the buffer gets full (or when the filehandle is closed, whichever happens first) is the text actually written out and the buffer emptied. This is why <code>close</code> can also report write errors.</p></li>\n</ul>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 2, "accepted_answer_id": 52103885, "answer_count": 2, "score": 2, "last_activity_date": 1537727167, "creation_date": 1535654163, "question_id": 52103391, "link": "https://stackoverflow.com/questions/52103391/brokenpipeerror-in-python-but-not-in-perl", "title": "BrokenPipeError in Python but not in Perl", "body": "<p>Consider this Python script:</p>\n\n<pre><code>for i in range(4000):\n    print(i)\n</code></pre>\n\n<p>and this Perl script:</p>\n\n<pre><code>for my $i (0..4000-1) {\n    print $i, \"\\n\";\n}\n</code></pre>\n\n<p><code>python3 pipe.py | head -n3000 &gt;/dev/null</code> produces an error:</p>\n\n<pre><code>Exception ignored in: &lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;\nBrokenPipeError: [Errno 32] Broken pipe\n</code></pre>\n\n<p>but</p>\n\n<p><code>perl pipe.pl | head -n3000 &gt;/dev/null</code> produces no error (in Perl v5.26.1).</p>\n\n<p>Why such a discrepancy between Python and Perl? How to make Perl to produce a similar error message?</p>\n"}, {"tags": ["perl", "verilog"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 1, "last_activity_date": 1535716733, "last_edit_date": 1535716733, "creation_date": 1535654109, "answer_id": 52103386, "question_id": 52102476, "link": "https://stackoverflow.com/questions/52102476/using-flip-flop-operator-to-parse-a-block-and-regex-on-a-verilog-netlist/52103386#52103386", "title": "using flip flop operator to parse a block and regex on a verilog netlist", "body": "<p>Store the lines in an array before you decide how you want to print them:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $flag = 1;\nmy @lines;\nwhile (&lt;DATA&gt;) {\n    if (/(input|output|inout|\\bmodule)/) {\n        print;\n        $flag = 1;\n    }\n    elsif (/endmodule/) {\n        for my $line (@lines) {\n            $line = \"//$line\" unless $flag;\n            print $line\n        }\n        print;\n        @lines = ();\n    }\n    else {\n        push @lines, $_;\n        if (/nch_mac|pch_mac_svt/) {\n            $flag = 0;\n        }\n    }\n}\n\n__DATA__\nmodule la_bla ( a b c d);\ninput a; \noutput; \ninout c d;\n\nuHBMN_1  X20 (.Z(en), .A(gg), .Q(qq), .EN(rr));\nnch_mac  M20 (.G(en), .D(gg), .B(qq), .S(rr));\npch_mac_svt  M20 (.G(en), .D(gg), .B(qq), .S(rr));\nendmodule \n\nmodule la_bla2 ( aw b2 c1 dt);\ninput aw;\noutput b2;\ninout c1 dt;\n\nHBMN_2  X21 (.Z(en), .A(gg), .Q(qq), .EN(rr));\nHBMN_3  X21 (.Z(env), .A(ggg7), .Q(qq), .EN(rr));\nHBMN_4  X21 (.Z(en5), .A(gg), .Q(qq8), .EN(rr));\nHBMN_5  X21 (.Z(en1), .A(gg), .Q(qq), .EN(rr));\n\nendmodule \n</code></pre>\n\n<p>Here is my exact output:</p>\n\n<pre><code>module la_bla ( a b c d);\ninput a; \noutput; \ninout c d;\n//\n//uHBMN_1  X20 (.Z(en), .A(gg), .Q(qq), .EN(rr));\n//nch_mac  M20 (.G(en), .D(gg), .B(qq), .S(rr));\n//pch_mac_svt  M20 (.G(en), .D(gg), .B(qq), .S(rr));\nendmodule \nmodule la_bla2 ( aw b2 c1 dt);\ninput aw;\noutput b2;\ninout c1 dt;\n\n\nHBMN_2  X21 (.Z(en), .A(gg), .Q(qq), .EN(rr));\nHBMN_3  X21 (.Z(env), .A(ggg7), .Q(qq), .EN(rr));\nHBMN_4  X21 (.Z(en5), .A(gg), .Q(qq8), .EN(rr));\nHBMN_5  X21 (.Z(en1), .A(gg), .Q(qq), .EN(rr));\n\nendmodule \n</code></pre>\n\n<p>If your input Verilog code is more complicated than that, use a proper parser, such as <a href=\"https://metacpan.org/release/Verilog-Perl\" rel=\"nofollow noreferrer\">Verilog-Perl</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10296445, "user_type": "registered", "profile_image": "https://graph.facebook.com/1915273508552689/picture?type=large", "display_name": "Meny", "link": "https://stackoverflow.com/users/10296445/meny"}, "is_accepted": false, "score": 1, "last_activity_date": 1535879384, "creation_date": 1535879384, "answer_id": 52135515, "question_id": 52102476, "link": "https://stackoverflow.com/questions/52102476/using-flip-flop-operator-to-parse-a-block-and-regex-on-a-verilog-netlist/52135515#52135515", "title": "using flip flop operator to parse a block and regex on a verilog netlist", "body": "<p>here is the full code that I wrote .\nit works but it can be improved. for example the line that start with  \"module\" \ncan be expand over few lines ( can be 2 lines, can be 100 lines) but it will always end up with char \";\"</p>\n\n<pre><code>#!/usr/intel/bin/perl -w\n use strict;\n use Data::Dumper;\n use Getopt::Long;\n\n\n   my $verilog1=      \"/p/ccd/wa/mlea/roodbridgetc/analog/roodbridgetc_9m1z1u/User_libs/libFlow/meny_lo   cal/noam_tc_phy_ana_top/verilog/netlist\";\n   my $verilog2=  \"/p/ccd/wa/mlea/roodbridgetc/analog/roodbridgetc_9m1z1u/User_libs/libFlow/meny_local/noam_tc_phy_ana_top/verilog/netlist2\" ;\n\n\n   open(VERILOGA,\"$verilog1\") or die \"Can't open original verilog file $verilog1 - $!\\n\"; \n   open(VERILOGAA,\"&gt;$verilog2\") or die \"Can't open destination verilog file $verilog2 - $!\\n\"; \n\n\n    my $flag = 1;\n    my @lines =();\n\n    while (&lt;VERILOGA&gt;) {\n\n    if ($_ =~ /^input|^output|^inout|^module/) {\n    print VERILOGAA $_;\n    $flag = 1;\n    }\n   elsif($_ =~ /^\\/\\/|timescale|^`include|^\\s*$/){print VERILOGAA $_ }  ## this is for general information lines in verilog netlist \n   elsif($_ =~ /\\s+{?\\w+?(\\[\\d+\\])?}?,?\\s?\\)?;?$/){print VERILOGAA $_ } ## this is for supporting the case that the \"module line contain \\n  char or {} for bus or [*]\n   elsif($_ =~ /^\\s+\\)+?;$/){print VERILOGAA $_ }\n   elsif(/^endmodule/) {\n        for my $line (@lines) {\n         $line = \"//$line\" unless $flag;\n         print VERILOGAA $line;\n     }\n      print VERILOGAA $_;\n       @lines = ();\n  }\n  else{\n    push @lines, $_; \n\nif(/^nch_mac\n   |^nch_18_mac\n   |^nch_svt_mac\n   |^nch_ulvt_dnw_mac\n   |^nch_lvt_mac\n   |^pch_lvt_mac\n   |^pch_18_mac\n   |^pch_svt_mac\n   |^nch_18_mac\n   |^pch_ulvt_mac\n   |^nch_ulvt_mac\n   |^crtmom_wo_rf\n   |^cfmom_2t_p80\n   |^nch_gate_sw\n   |^rhim_m\n   |^rhim_rf\n   |^nch_svt_dnw_mac\n   |^pwdnw\n   |^nch_lvt_dnw_mac\n   |^pch_18ud12_mac\n   |^pch_18ud15_mac\n   |^nch_ulvt_dnw_mac\n    /gx){\n\n        $flag = 0;\n       }#if\n    }#else\n}#while\n\n\n\n  close VERILOGA;\n   close ;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10296445, "user_type": "registered", "profile_image": "https://graph.facebook.com/1915273508552689/picture?type=large", "display_name": "Meny", "link": "https://stackoverflow.com/users/10296445/meny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1588207315, "creation_date": 1535649852, "last_edit_date": 1588207315, "question_id": 52102476, "link": "https://stackoverflow.com/questions/52102476/using-flip-flop-operator-to-parse-a-block-and-regex-on-a-verilog-netlist", "title": "using flip flop operator to parse a block and regex on a verilog netlist", "body": "<p>I'm trying to modify a verilog netlist that looks like this:</p>\n\n<pre><code>module la_bla ( a b c d);\ninput a; \noutput; \ninout c d;\n\nuHBMN_1  X20 (.Z(en), .A(gg), .Q(qq), .EN(rr));\nnch_mac  M20 (.G(en), .D(gg), .B(qq), .S(rr));\npch_mac_svt  M20 (.G(en), .D(gg), .B(qq), .S(rr));\nendmodule \n\nmodule la_bla2 ( aw b2 c1 dt);\ninput aw;\noutput b2;\ninout c1 dt;\n\nHBMN_2  X21 (.Z(en), .A(gg), .Q(qq), .EN(rr));\nHBMN_3  X21 (.Z(env), .A(ggg7), .Q(qq), .EN(rr));\nHBMN_4  X21 (.Z(en5), .A(gg), .Q(qq8), .EN(rr));\nHBMN_5  X21 (.Z(en1), .A(gg), .Q(qq), .EN(rr));\n\nendmodule \n.\n.\n.\n.\n.\n</code></pre>\n\n<p>Everytime that I find a line that start with a device called :\"nch_mac\" or pct_mac_svt, I want to add a comment to the ALL module content, but keep  the module statement  and terminals statements ( input , output inout) and endmodule statements untouched. I tried to work with perl flip-flop command:</p>\n\n<p>First, I tried to catch the block that starts with module and finishes with endmodule. Then I tried to capture the device name with regex.</p>\n\n<p>My problem is that required device name can be located anywhere inside the module statement - so how I comment the lines inside the module that comes before it?<br>\nI tried something like:</p>\n\n<pre><code>while&lt;FILE&gt;{\nif(/module/i.../endmodule/i){\n   if($_ =~/nch_mac|pch_mac_svt){ $newline=~ s/$_/\\/\\/$_/} \n</code></pre>\n\n<p>But this didn't work.<br>\nI want to get:</p>\n\n<pre><code> module la_bla ( a b c d);\n input a; \n output; \n inout c d;\n\n //uHBMN_1  X20 (.Z(en), .A(gg), .Q(qq), .EN(rr));\n //nch_mac  M20 (.G(en), .D(gg), .B(qq), .S(rr));\n //pch_mac_svt  M20 (.G(en), .D(gg), .B(qq), .S(rr));\n endmodule \n\n module la_bla2 ( aw b2 c1 dt);\n input aw;\n output b2;\n inout c1 dt;\n\n HBMN_2  X21 (.Z(en), .A(gg), .Q(qq), .EN(rr));\n HBMN_3  X21 (.Z(env), .A(ggg7), .Q(qq), .EN(rr));\n HBMN_4  X21 (.Z(en5), .A(gg), .Q(qq8), .EN(rr));\n HBMN_5  X21 (.Z(en1), .A(gg), .Q(qq), .EN(rr));\n\n endmodule \n .\n .\n .\n</code></pre>\n\n<p>Any advise? </p>\n"}, {"tags": ["perl", "log4perl"], "comments": [{"owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1535636647, "post_id": 52098042, "comment_id": 91147565, "body": "That&#39;s what I did. The result is not like expected. Like you can see in the example, I&#39;m missing the loglevel ERROR and FATAL in my log."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "is_accepted": true, "score": 3, "last_activity_date": 1535697037, "last_edit_date": 1535697037, "creation_date": 1535637376, "answer_id": 52098867, "question_id": 52098042, "link": "https://stackoverflow.com/questions/52098042/log4perl-one-logger-with-two-appenders-and-different-loglevels/52098867#52098867", "title": "log4perl one logger with two appenders and different loglevels", "body": "<p>I found one <strong>solution</strong> here:\n<a href=\"https://metacpan.org/pod/Log::Log4perl::Filter#DESCRIPTION\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Log::Log4perl::Filter#DESCRIPTION</a>\nSimply create your own filter...</p>\n\n<pre><code>log4perl.filter.FilterWARN = sub {      \\\n     my %p = @_;                      \\\n     if($p{log4p_level} eq \"WARN\" or  \\\n        $p{log4p_level} eq \"ERROR\" or \\\n        $p{log4p_level} eq \"FATAL\") { \\\n         return 1;                    \\\n     }                                \\\n     return 0;                        \\\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 9639756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d94b91dabf32db25162d6fe0ed194e7?s=128&d=identicon&r=PG&f=1", "display_name": "MWe", "link": "https://stackoverflow.com/users/9639756/mwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 52098867, "answer_count": 1, "score": 2, "last_activity_date": 1535697037, "creation_date": 1535634849, "last_edit_date": 1535638372, "question_id": 52098042, "link": "https://stackoverflow.com/questions/52098042/log4perl-one-logger-with-two-appenders-and-different-loglevels", "title": "log4perl one logger with two appenders and different loglevels", "body": "<p>I'm trying to log into two different files on different loglevels using a single logger:</p>\n\n<p><strong>perl.pl</strong>    </p>\n\n<pre><code>use Log::Log4perl;\nLog::Log4perl::init('log4perl.conf');\nmy $logger = Log::Log4perl-&gt;get_logger('test');\n$logger-&gt;trace('trace');\n$logger-&gt;debug('debug');\n$logger-&gt;info('info');\n$logger-&gt;warn('warn');\n$logger-&gt;error('error');\n$logger-&gt;fatal('fatal');\n</code></pre>\n\n<p><strong>log4perl.conf</strong></p>\n\n<pre><code>log4perl.logger.test = ALL, log, debug\n\nlog4perl.appender.debug = Log::Log4perl::Appender::File\nlog4perl.appender.debug.filename = debug.log\nlog4perl.appender.debug.layout = Log::Log4perl::Layout::PatternLayout\nlog4perl.appender.debug.layout.ConversionPattern = [%d] %p %m %n\n\nlog4perl.appender.log = Log::Log4perl::Appender::File\nlog4perl.appender.log.filename = log.log\nlog4perl.appender.log.layout = Log::Log4perl::Layout::PatternLayout\nlog4perl.appender.log.layout.ConversionPattern = [%d] %p %m %n\nlog4perl.appender.log.Filter = MatchWARN\n\n# Filter to match level WARN\nlog4perl.filter.MatchWARN  = Log::Log4perl::Filter::LevelMatch\nlog4perl.filter.MatchWARN.LevelToMatch  = WARN\nlog4perl.filter.MatchWARN.AcceptOnMatch = true\n</code></pre>\n\n<p><strong>Expected result:</strong></p>\n\n<p><strong>log.log:</strong></p>\n\n<pre><code>[2018/08/30 15:06:22] WARN warn \n[2018/08/30 15:06:22] ERROR error \n[2018/08/30 15:06:22] FATAL fatal\n</code></pre>\n\n<p><strong>debug.log:</strong></p>\n\n<pre><code>[2018/08/30 15:06:22] TRACE trace \n[2018/08/30 15:06:22] INFO info \n[2018/08/30 15:06:22] DEBUG debug\n[2018/08/30 15:06:22] WARN warn \n[2018/08/30 15:06:22] ERROR error \n[2018/08/30 15:06:22] FATAL fatal\n</code></pre>\n\n<p><strong>Actual result:</strong></p>\n\n<p><strong>log.log:</strong></p>\n\n<pre><code>[2018/08/30 15:06:22] WARN warn \n</code></pre>\n\n<p><strong>debug.log:</strong></p>\n\n<pre><code>[2018/08/30 15:06:22] WARN trace \n[2018/08/30 15:06:22] INFO info \n[2018/08/30 15:06:22] DEBUG debug\n[2018/08/30 15:06:22] WARN warn \n[2018/08/30 15:06:22] ERROR error \n[2018/08/30 15:06:22] FATAL fatal\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "matching"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10250361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cwPUWx1-vKI/AAAAAAAAAAI/AAAAAAAAABc/RDBakg5L_9M/photo.jpg?sz=128", "display_name": "Adam Whisnant", "link": "https://stackoverflow.com/users/10250361/adam-whisnant"}, "edited": false, "score": 0, "creation_date": 1535637043, "post_id": 52098035, "comment_id": 91147870, "body": "I used the second suggestion of ignoring boolean negation and the script works.  Cheers."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1535638486, "last_edit_date": 1535638486, "creation_date": 1535634829, "answer_id": 52098035, "question_id": 52097782, "link": "https://stackoverflow.com/questions/52097782/identify-items-in-hash-with-matching-and-non-matching-criteria/52098035#52098035", "title": "Identify items in hash with matching and non-matching criteria", "body": "<p>The negation operator <code>!</code> enforces boolean context on its argument. <code>\"+\"</code> and <code>\"-\"</code> are both true in boolean context, so <code>! $strand</code> is always false, i.e. <code>\"\"</code> in string context.</p>\n\n<p>Either store boolean value in the hash</p>\n\n<pre><code>$strand = $strand eq '+';\n</code></pre>\n\n<p>or don't use boolean negation:</p>\n\n<pre><code>my $transcripts_opposite_strand = $transripts{$chr}{ $strand eq '+' ? '-' : '+' };\n</code></pre>\n\n<p>The ternary operator can be replaced by a shorter but less readable alternatives, e.g.</p>\n\n<pre><code>   qw( + - )[ $strand eq '+' ]\n</code></pre>\n\n<p>because in numeric context, true is interpreted as 1 and false as 0.</p>\n"}], "owner": {"reputation": 25, "user_id": 10250361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cwPUWx1-vKI/AAAAAAAAAAI/AAAAAAAAABc/RDBakg5L_9M/photo.jpg?sz=128", "display_name": "Adam Whisnant", "link": "https://stackoverflow.com/users/10250361/adam-whisnant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52098035, "answer_count": 1, "score": 1, "last_activity_date": 1535638486, "creation_date": 1535634095, "last_edit_date": 1535636710, "question_id": 52097782, "link": "https://stackoverflow.com/questions/52097782/identify-items-in-hash-with-matching-and-non-matching-criteria", "title": "Identify items in hash with matching and non-matching criteria", "body": "<p>I have two tab-delimited files:\none is a reference with thousands of entries\nand the other is a list of millions of criteria\nthat are used to search the reference.</p>\n\n<p>I make a hash of the reference file with the following code</p>\n\n<pre><code>use strict;\nuse warnings;\n\n#use Data::Dumper;\n#use Timer::Runtime;\n\nuse feature qw( say );\n\nmy $in_qfn          = $ARGV[0];\nmy $out_qfn         = $ARGV[1];\nmy $transcripts_qfn = \"file\";\n\nmy %transcripts;\n\n{\n   open(my $transcripts_fh, \"&lt;\", $transcripts_qfn)\n      or die(\"Can't open \\\"$transcripts_qfn\\\": $!\\n\");\n\n   while ( &lt;$transcripts_fh&gt; ) {\n      chomp;\n      my @refs = split(/\\t/, $_);\n      my ($ref_chr, $ref_strand) = @refs[0, 6];\n      my $values =  {\n         start =&gt; $refs[3],\n         end   =&gt; $refs[4],\n         info  =&gt; $refs[8]\n      };\n\n      #print Data::Dumper-&gt;Dump([$values]), $/; #confirm structure is fine\n      push @{ $transcripts{$ref_chr}{$ref_strand} }, $values;\n   }  \n}\n</code></pre>\n\n<p>Then I open the other input file, define the elements, and parse the hash to find matching criteria</p>\n\n<pre><code>while ( &lt;$in_fh&gt; ) {\n  chomp;\n  my ($x, $strand, $chr, $y, $z) = split(/\\t/, $_);\n\n  #match the reference hash for things equal to $chr and $strand\n  my $transcripts_array = $transcripts{$chr}{$strand};\n\n  for my $transcript ( @$transcripts_array ) {\n     my $start = $transcript-&gt;{start};\n     my $end   = $transcript-&gt;{end};\n     my $info  = $transcript-&gt;{info};\n\n     #print $info and other criteria from if statements to outfile, this code works\n  }\n}\n</code></pre>\n\n<p>This works, but I would like to know if I can then find elements in the hash that match <code>$chr</code> but not <code>$strand</code> (which has a binary value of either sign).</p>\n\n<p>I put the following into the same <code>while</code> block after the previous <code>for</code>, but it does not appear to work</p>\n\n<pre><code>my $transcripts_opposite_strand = $transcripts{$chr}{!$strand};\n\nfor my $transcript (@$transcripts_opposite_strand) {\n\n   my $start = $transcript-&gt;{start};\n   my $end   = $transcript-&gt;{end};\n   my $info  = $transcript-&gt;{info};\n\n   #print $info and other criteria from if statements\n}\n</code></pre>\n\n<p>I apologize for the code snippets; I tried to keep the relevant information.   Because of the size of the files I can't really brute force it by going line by line by line.</p>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1535633397, "post_id": 52097305, "comment_id": 91145246, "body": "Please <a href=\"https://stackoverflow.com/posts/52097305/edit\">edit</a> your question and add an explanation of what your program is supposed to do. Then <a href=\"https://stackoverflow.com/posts/52097305/edit\">edit</a> your Perl program to include <code>use strict</code> and <code>use warnings</code> and make sure it compiles. Also, please include the <b>full error message</b>. Do not cut anything off, like the line number. That&#39;s important to see where the error is. In its current form we cannot answer your question, because we have no idea what you are trying to do."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1535652302, "post_id": 52097305, "comment_id": 91156836, "body": "1) You have two <code>die &quot;Error $!\\n&quot;</code> that could produce the message, but you didn&#39;t specify which one is producing the error. 2) <code>new IO::Socket::SSL-&gt;new(...)</code> should be <code>IO::Socket::SSL-&gt;new(...)</code> 3) <code>IO::Socket::SSL-&gt;new</code> sets <code>$@</code> on error. 4) ALWAYS use <code>use strict; use warnings qw( all );</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535654916, "post_id": 52097305, "comment_id": 91158091, "body": "Why are you using a mode of <code>&quot;+&lt;&quot;</code> when opening that file when all you&#39;re doing is reading from it? Also, use <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> instead. It&#39;s a better way to read a file&#39;s contents into a scalar."}, {"owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535691549, "post_id": 52097305, "comment_id": 91168012, "body": "Hi @ikegami 1) This error is coming from the first die. 2) I  updated the same but still, there is the same error from the first die. 4) I used <code>use strict; use warnings qw( all );</code> and declared all the variable using <code>my</code> keyword. Plz help"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535695354, "post_id": 52097305, "comment_id": 91169218, "body": "Oops, I was wrong about <code>$!</code>/<code>$@</code>. I thought you were using IO::Socket::INET. IO::Socket::SSL says to use <code>or die &quot;error=$!, ssl_error=$IO::Socket::SSL::SSL_ERROR&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535636498, "post_id": 52097875, "comment_id": 91147462, "body": "It is giving same error again &quot;Error Bad file descriptor&quot;"}, {"owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535638148, "post_id": 52097875, "comment_id": 91148690, "body": "I am new to PERL and I am getting this error when I am executing it from the Command line. The screenshot is attached now to the question."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535638419, "post_id": 52097875, "comment_id": 91148889, "body": "You told Perl to throw the error. Use different error messages in the two places where you tell it to <code>die</code> and you&#39;ll at least know where it happens."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535654422, "post_id": 52097875, "comment_id": 91157856, "body": "@PawanDwivedee if you read <a href=\"https://perldoc.perl.org/functions/die.html\" rel=\"nofollow noreferrer\">the documentation</a> for <code>die</code>, you&#39;ll see how to get the file name and line number where that particular <code>die</code> was called included in the error message."}, {"owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535691987, "post_id": 52097875, "comment_id": 91168138, "body": "Thanks, @Shawn and choroba, I did the same and got that error is coming from the first die."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535707112, "post_id": 52097875, "comment_id": 91175005, "body": "@PawanDwivedee: Can you add $SSL_ERROR to the message, too?"}, {"owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "edited": false, "score": 0, "creation_date": 1535712640, "post_id": 52097875, "comment_id": 91178124, "body": "Error is <code>error=Bad file descriptor, ssl_error=SSL connect attempt failed at sendXssl.pl line 6.</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1535634375, "creation_date": 1535634375, "answer_id": 52097875, "question_id": 52097305, "link": "https://stackoverflow.com/questions/52097305/giving-error-error-bad-file-descriptor-during-execution-of-perl/52097875#52097875", "title": "Giving error &#39;Error Bad file descriptor&#39; during execution of Perl", "body": "<p>You're mixing the direct and indirect method syntax together:</p>\n\n<pre><code>$sock = new IO::Socket::SSL-&gt;new(\n#       ~~~                  ~~~\n  PeerHost =&gt; $ARGV[0],\n  PeerPort =&gt; $ARGV[1],\n  SSL_verify_mode =&gt; SSL_VERIFY_NONE)\n</code></pre>\n\n<p>Remove the first <code>new</code> and try again.</p>\n"}], "owner": {"reputation": 105, "user_id": 8217623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/844643379016027/picture?type=large", "display_name": "Pawan Dwivedee", "link": "https://stackoverflow.com/users/8217623/pawan-dwivedee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537180849, "creation_date": 1535632702, "last_edit_date": 1592644375, "question_id": 52097305, "link": "https://stackoverflow.com/questions/52097305/giving-error-error-bad-file-descriptor-during-execution-of-perl", "title": "Giving error &#39;Error Bad file descriptor&#39; during execution of Perl", "body": "<p><strong>[<em>Question Updated by following the commentator's comments</em>]</strong> When I am using the following command for executing prop.obj\n<strong>&quot;perl sendXssl.pl <em>hostname</em> <em>port</em> prop.obj&quot;</strong>, It is giving error as &quot;Error Bad file descriptor, ssl_error=SSL connect attempt failed at sendXssl.pl line 6&quot;.\nPlease help me to solve this.\nMy Perl program is given below...</p>\n<h1>Perl</h1>\n<pre><code>use IO::Socket::SSL qw( SSL_VERIFY_NONE );\nuse strict;\nuse warnings qw( all );\n$|=1;\n\nmy $sock = IO::Socket::SSL-&gt;new(\n PeerHost =&gt; $ARGV[0],\n PeerPort =&gt; $ARGV[1],\n SSL_verify_mode =&gt; SSL_VERIFY_NONE)\n or die &quot;error=$!, ssl_error=$IO::Socket::SSL::SSL_ERROR&quot;;\n\nprint $sock &quot;X&quot;;\nmy $data ;\nmy $file = $ARGV[2];\nopen(my $fh,'&lt;',$file) or die &quot;Error 2 $!\\n&quot;;\n{\n local $/;\n $data = &lt;$fh&gt;;\n}\nclose($fh);\n\nmy $pack = $data;\nprint $sock $pack;\n</code></pre>\n<p>I created <strong>prop.obj</strong> object from the following java file</p>\n<h1>Java</h1>\n<pre><code>import java.io.FileOutputStream;\n    import java.io.ObjectOutputStream;\n    import java.util.Properties;\n    \n    public class PropertiesX {\n    \n        public static void main(String[] args) {\n            try {\n                String[] s = new String[1];\n                s[0] = &quot;notepad.exe&quot;;\n                Properties p = new Properties();\n                p.put(&quot;commandArgs&quot;,s);\n                p.setProperty(&quot;parent&quot;, &quot;c:\\\\windows\\\\system32\\\\notepad.exe&quot;);\n                FileOutputStream fos = new FileOutputStream(&quot;prop.obj&quot;);\n                ObjectOutputStream oos = new ObjectOutputStream(fos);\n                oos.writeObject(p);\n                oos.close();\n                System.out.println(p.toString());\n            } catch (Exception ex) {\n                ex.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1535628861, "post_id": 52095876, "comment_id": 91142073, "body": "Please mark line 42 for us."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1535629165, "post_id": 52095876, "comment_id": 91142304, "body": "<code>S[0-9]_</code> can&#39;t match <code>S10_</code>, there are two digits, not one."}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535629259, "post_id": 52095876, "comment_id": 91142370, "body": "Hi, when i modified the regex with [0-9]+ it still gave the same error. with + operator matching one or more digits."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535629475, "post_id": 52096172, "comment_id": 91142524, "body": "so why does it work for other files? can you please tell how to fix this?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535633224, "post_id": 52096172, "comment_id": 91145103, "body": "@Callie I cannot answer that, because I don&#39;t know what files you have there. Start by looking into your <code>$folder1</code> directory and list all files that are there, then see if they match your pattern. Maybe getting all files in that folder and taking only the ones you need with a pattern match is a better idea. Certainly easier to debug."}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535634373, "post_id": 52096172, "comment_id": 91145973, "body": "I tried using different expressions with the regex I am using. e.g [0-9][0-9] will match demo-1_S10_R1_001.fastq.gz but it will fail for sampleA_S2_R1_001.fastq.gz. I need to modify foreach(glob(&quot;$folder1/$project_name_S[0-9]_R1_001.fastq.gz so that it work for both S10 and S2 as well. I have tried [0-9]+ and [0-9][0-9]? but both fail. Can you suggest any modification?"}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535635134, "post_id": 52096172, "comment_id": 91146507, "body": "I modified the regex to [0-9]* and it&#39;s working for both S10 and S2 as well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535635239, "post_id": 52096172, "comment_id": 91146579, "body": "@Callie you are <b>not</b> using a regular expression. You are using a <i>wildcard</i> for <code>glob</code>. Those are two fundamentally different things that just happen to share some similar syntax. <code>[0-9]*</code> in the pattern for <code>glob</code> does not mean <i>lots of numbers, but at least none</i>, it means <i>a number, followed by anything, possibly lots of anything or nothing</i>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535636608, "post_id": 52096172, "comment_id": 91147536, "body": "@Callie see my updated answer. I think that should explain what&#39;s going on."}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535638092, "post_id": 52096172, "comment_id": 91148658, "body": "Thank you for explanation. How should I approach this problem without using the argument project_name. As I have 100&#39;s of files in folder1 and folder2 and each time giving project name is cumbersome. Is there a way in which to match filenames in folder1 and folder2 and if a match is found perform concatenation without giving project_name and processing 100s of files at a time? How can I approach this?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535638308, "post_id": 52096172, "comment_id": 91148810, "body": "@Callie I don&#39;t fully understand what you are trying to do. Do you just want to merge all files, or is it always pairs?"}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535639092, "post_id": 52096172, "comment_id": 91149370, "body": "It is always in pairs. e.g folder1 contains SampleA_S10_R1_001.fastq.gz, SampleA_S10_R2_001.fastq.gz, SampleB_S2_R1_001.fastq.gz, SampleB_S2_R2_001.fastq.gz. folder2 contains SampleA_S12_R1_001.fastq.gz, SampleA_S12_R2_001.fastq.gz, SampleB_S3_R1_001.fastq.gz, SampleB_S3_R2_001.fastq.gz."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535639528, "post_id": 52096172, "comment_id": 91149704, "body": "@Callie then you should probably write your program to find pairs and do all of them, and just tell it which folders to use. Why call it manually? Just automate it anyway. It&#39;s really just an additional loop."}, {"owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535639602, "post_id": 52096172, "comment_id": 91149756, "body": "So to merge R1 files for SampleA(folder1) with R1 files for SampleB(folder2) and merge R2 files for SampleA(folder1) with R2 files for SampleA(folder2). Same with SampleB without having to specify SampleA and SampleB"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "edited": false, "score": 0, "creation_date": 1535639769, "post_id": 52096172, "comment_id": 91149866, "body": "@Ca If you can describe your pattern in code, you can make this work automatically. I don&#39;t understand what the relation between those files it, it&#39;s really hard to read this in comments here. Essentially, you want to read all the files in the first folder, and for every file check if there is a matching file in the second folder. If there is, you do your stuff to it and write out the new file somewhere. You might also want to check if the new file already exists first so you don&#39;t overwrite it (or do double work). You can also add debug info to say when it can&#39;t find a second file."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": -1, "last_activity_date": 1535636593, "last_edit_date": 1535636593, "creation_date": 1535629226, "answer_id": 52096172, "question_id": 52095876, "link": "https://stackoverflow.com/questions/52095876/merge-files-having-same-prefix-from-different-directories/52096172#52096172", "title": "Merge files having same prefix from different directories", "body": "<p>With your second set of arguments you shouldn't see any output before the warning. It doesn't print anything. </p>\n\n<p>That's because it doesn't return any files from your <code>glob</code> calls so the <code>foreach</code> loop doesn't actually get executed. <code>$file1</code> is <code>undef</code> initially and now never gets set.</p>\n\n<pre><code>my $file1; # starts out as undef\n# ...\n\n#print \"$project_name\\n\";\nforeach(glob(\"$folder1/$project_name\\_S[0-9]_R1_001.fastq.gz\")){ # finds nothing\n    chomp;\n    #print \"Hello World\\n\";\n    $_ =~ m{$folder1/$project_name\\_S[0-9]_R1_001\\.fastq.gz};\n        #print \"$_\\n\";\n        $file1 = $_;\n        print \"$file1\\n\"; # no output here\n}\n</code></pre>\n\n<p>It probably does not find your files because you don't have any files that match the pattern.</p>\n\n<p>There are two things going on here:</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> takes <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" rel=\"nofollow noreferrer\">a sort of pattern</a> that can contain <a href=\"https://en.wikipedia.org/wiki/Wildcard_character#File_and_directory_patterns\" rel=\"nofollow noreferrer\">wildcards</a>. It only returns files that match this pattern. It is **not a regular expression*.</li>\n<li>You are doing a pattern match, and ignore the result.</li>\n</ul>\n\n<p>Let's look at it more closely.</p>\n\n<blockquote>\n<pre><code>foreach(glob(\"$folder1/$project_name\\_S[0-9]_R2_001.fastq.gz\")){\n</code></pre>\n</blockquote>\n\n<p>The interesting bit is <code>glob EXPR</code>. Your expression is:</p>\n\n<pre><code># | variable interpolation \n# |        | variable interpolation            \n# |        |            | treat this as a literal underscore, not part of var name\n# |        |            |  one digit out of group 0, 1, 2, 3, 4, 5, 6, 7, 8, 9\n# |        |            |  |   |\n  $folder1/$project_name\\_S[0-9]_R2_001.fastq.gz\n</code></pre>\n\n<p>This will return a list of files that match this pattern. If it finds no files, nothing is returned. The <code>foreach</code> loop then iterates that list. Again, if there is nothing in the list, the loop never gets called.</p>\n\n<blockquote>\n<pre><code>foreach ( glob ... ) {\n    chomp;\n    $_ =~ m{$folder1/$project_name\\_S[0-9]_R1_001\\.fastq.gz};\n    $file1 = $_;\n</code></pre>\n</blockquote>\n\n<p>You now cut off a newline with <code>chomp</code>. That doesn't make any sense, because filenames do not usually have a newline at the end.</p>\n\n<p>You then do a pattern match on the filename with the same pattern that you used for your <code>glob</code>. In this context, it is an actual regular expression, so some characters have special meanings.</p>\n\n<pre><code>m{\n  $folder1        # variable interpolation\n  /               # literal slash /\n  $project_name   # variable interpolation\n  \\_S             # literal backslash \\ and S\n  [0-9]           # one digit from 0 to 9\n  _R1_001         # literal string\n  \\.              # literal dot .\n  fastq           # literal string\n  .               # exactly one of any character\n  gz              # literal string\n};\n</code></pre>\n\n<p>As you can see, the pattern means something entirely different. You have escaped one of the dots <code>.</code>, but not both.</p>\n\n<p>But it does not matter, because this operation does not do anything. <strong>You just throw the result away!</strong></p>\n\n<p>You then assign <code>$_</code> to <code>$file1</code>, regardless of a match or not.</p>\n\n<hr>\n\n<p>I think it would make more sense to just get all gzipped files in that directory and then check them.</p>\n\n<pre><code>foreach my $filename ( glob &lt;$folder1/${project_name}*.fastq.gz&gt; ) {\n    if ( $filename =~ m{\n            /             # separates the folder from the filename\n            $project_name # anchor to project\n            _         \n            [0-9]+        # one or more numbers (001, 123, 9, ...)\n            _R1_001 \n            \\.fastq\\.gz   # file type\n            $             # end of string\n        }x\n     ) {\n        $file1 = $filename;\n        last;\n    }\n}\n</code></pre>\n\n<p>This uses the other <code>glob</code> syntax, which I find more readable, gets all files in <code>$folder1</code> that start with the <code>$project_name</code> and end in <code>.fastq.gz</code>. It then iterates the list of files and performs a pattern match to make sure we actually get the right files. I've included the <code>/x</code> modifier to ignore whitespace in the pattern, so we can have comments.</p>\n\n<p>Note the <code>[0-9]+</code>, which says one or more numbers. That's important so files with numbers higher than 9 are found.</p>\n\n<p>Once a match is found, it assigns <code>$file1</code> and then exits the loop with <a href=\"http://perldoc.perl.org/functions/last.html\" rel=\"nofollow noreferrer\"><code>last</code></a>.</p>\n\n<p>You might want to also add a check before you run your external command that uses <code>$file1</code> and <code>$file2</code>.</p>\n\n<pre><code>if ($file1 &amp;&amp; $file2) {\n     `cat $file1 $file2 &gt; $out/$project_name.R1.fastq.gz`\n} else {\n     print \"No matches found for first set of files.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52096172, "answer_count": 1, "score": 0, "last_activity_date": 1535636593, "creation_date": 1535628321, "last_edit_date": 1535629068, "question_id": 52095876, "link": "https://stackoverflow.com/questions/52095876/merge-files-having-same-prefix-from-different-directories", "title": "Merge files having same prefix from different directories", "body": "<p>I have written the following script:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\ndie \"usage:$0 &lt;Input_folder_1&gt;\\t&lt;Input_folder_2&gt;\\t&lt;Out_folder&gt;\\t&lt;Project_name&gt;\\t\\n\" unless $#ARGV == 3;\n\nmy $folder1 = shift;\n#print \"$folder1\\n\";\nmy $folder2 = shift;\n#print \"$folder2\\n\";\nmy $out = shift;\nmy $project_name = shift;\n\nmy $file1;\nmy $file2;\nmy $file3;\nmy $file4;\n\n#print \"$project_name\\n\";\nforeach(glob(\"$folder1/$project_name\\_S[0-9]_R1_001.fastq.gz\")){\n    chomp;\n    #print \"Hello World\\n\";\n    $_ =~ m{$folder1/$project_name\\_S[0-9]_R1_001\\.fastq.gz};\n        #print \"$_\\n\";\n        $file1 = $_;\n        print \"$file1\\n\";\n}\n\nforeach(glob(\"$folder2/$project_name\\_S[0-9]_R1_001.fastq.gz\")){\n    chomp;\n    #print \"Hello World\\n\";\n    $_ =~ m{$folder2/$project_name\\_S[0-9]_R1_001\\.fastq.gz};\n        #print \"$_\\n\";\n        $file2 = $_;\n        print \"$file2\\n\";\n}\n</code></pre>\n\n<p><code>cat $file1 $file2 &gt; $out/$project_name.R1.fastq.gz</code>; #line 42</p>\n\n<pre><code>foreach(glob(\"$folder1/$project_name\\_S[0-9]_R2_001.fastq.gz\")){\n    chomp;\n    #print \"Hello World\\n\";\n    $_ =~ m{$folder1/$project_name\\_S[0-9]_R2_001\\.fastq.gz};\n        #print \"$_\\n\";\n        $file3 = $_;\n        print \"$file3\\n\";\n}\n\nforeach(glob(\"$folder2/$project_name\\_S[0-9]_R2_001.fastq.gz\")){\n    chomp;\n    #print \"Hello World\\n\";\n    $_ =~ m{$folder2/$project_name\\_S[0-9]_R2_001\\.fastq.gz};\n        #print \"$_\\n\";\n        $file4 = $_;\n        print \"$file4\\n\";\n}\n\n`cat $file3 $file4 &gt; $out/$project_name.R2.fastq.gz`;\n</code></pre>\n\n<p>This script is run as follows:</p>\n\n<pre><code>./script.pl folder1 folder2 output_folder project_name\n</code></pre>\n\n<p>when I run this script with following files it runs smoothly</p>\n\n<pre><code>folder1/123-abcQ_S3_R1_001.fastq.gz\nfolder2/123-abcQ_S1_R1_001.fastq.gz\nfolder1/123-abcQ_S3_R2_001.fastq.gz\nfolder2/123-abcQ_S1_R2_001.fastq.gz\n\n./script.pl folder1 folder2 out/ 123-abcQ \n</code></pre>\n\n<p>It will merge the files folder1/123-abcQ_S3_R1_001.fastq.gz and folder2/123-abcQ_S1_R1_001.fastq.gz to create a merged 123-abcQ.R1.fastq.gz file in the output directory.</p>\n\n<p>But when I run the same script with following files it gives me an error:</p>\n\n<pre><code>folder1/demo-1_S10_R1_001.fastq.gz\nfolder1/demo-1_S10_R2_001.fastq.gz\nfolder2/demo-1_S12_R1_001.fastq.gz\nfolder2/demo-1_S12_R2_001.fastq.gz\n\n./script.pl folder1 folder2 out/ demo-1\n</code></pre>\n\n<blockquote>\n  <p>Use of uninitialized value $file1 in concatenation (.) or string at\n  ./script.pl line 42. Use of uninitialized value $file2 in\n  concatenation (.) or string at ./script.pl line 42.</p>\n</blockquote>\n\n<p>I can't figure out how to resolve this. Your adivice will be appreciated.</p>\n"}, {"tags": ["perl", "hash", "hashtable"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1535630535, "post_id": 52095874, "comment_id": 91143217, "body": "<code>lib</code> is the name of a <a href=\"https://metacpan.org/pod/lib\" rel=\"nofollow noreferrer\">pretty important and ubiquitous Perl pragma</a>; it&#39;s not a great name for one of your own packages."}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535630963, "post_id": 52095874, "comment_id": 91143533, "body": "Thanks for explanation. I just make it as an example. I will never use it in real task."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535632622, "post_id": 52095874, "comment_id": 91144674, "body": "You must <i>understand</i> the code you are writing and <i>choose</i> what to write on that basis. It is <b><i>never</i></b> correct to write stuff &quot;because it worked before&quot; or &quot;because I&#39;ve seen it done&quot;. Please justify <code>#!&#47;usr&#47;bin&#47;perl -w</code> beyond <i>&quot;It&#39;s what I write at the top of every Perl program&quot;</i>"}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1535632824, "post_id": 52095874, "comment_id": 91144827, "body": "Yes, sure. I&#39;m on this way with some trial code to undersand how hash working in perl :)"}, {"owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "edited": false, "score": 0, "creation_date": 1535633187, "post_id": 52095874, "comment_id": 91145083, "body": "For the -w option, is it use for giving message/warning in detail when exist some problem inside code?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535634310, "post_id": 52095874, "comment_id": 91145929, "body": "@HungNguyen: That&#39;s my point: if you don&#39;t know what it does then you shouldn&#39;t write it. It&#39;s easy enough to google. How do you think it&#39;s different from <code>use strict</code> and <code>use warnings</code>? You also need to be clear what the <i>shebang</i> <code>#!</code> line does and what it&#39;s for: you don&#39;t always need it. If you <i>learn the language</i> properly then you wouldn&#39;t have so much need to constantly ask the rest of the world for help on, say, <i>Stack Overflow</i>."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1535632185, "last_edit_date": 1535632185, "creation_date": 1535629045, "answer_id": 52096097, "question_id": 52095874, "link": "https://stackoverflow.com/questions/52095874/how-to-access-element-value-in-my-hash-from-an-another-package-perl/52096097#52096097", "title": "How to access element value in my %hash from an another package perl", "body": "<p><a href=\"http://p3rl.org/my\" rel=\"nofollow noreferrer\">my</a> declares a lexical variable, and you can't extend the scope of a lexical variable, i.e. share it outside the package.</p>\n\n<p>Why can't you use an <a href=\"http://p3rl.org/our\" rel=\"nofollow noreferrer\">our</a> variable?</p>\n\n<p>You can't share the lexical variable, but you can share its value. For example, you can provide a closure in the package that exposes the value:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n{   package MyLib;\n\n    my %hash = (\n        Addr =&gt; {\n            aa =&gt; 0x11223344,\n            bb =&gt; 0x55667788,\n            cc =&gt; 0xaabbccdd,\n        },\n    );\n    sub get_hash { %hash }\n\n}\n\n\nmy %hash = MyLib::get_hash();\nprint \"========================\\n\";\nprint \"1: $hash{Addr}{'aa'}\\n\";\nprint \"2: $hash{Addr}{'bb'}\\n\";\nprint \"3: $hash{Addr}{'cc'}\\n\";\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10254331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1142612e8f565823e34ab754aaee7c7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Nguyen", "link": "https://stackoverflow.com/users/10254331/hung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535632185, "creation_date": 1535628317, "question_id": 52095874, "link": "https://stackoverflow.com/questions/52095874/how-to-access-element-value-in-my-hash-from-an-another-package-perl", "title": "How to access element value in my %hash from an another package perl", "body": "<p>I have a hash inside a package name:\n<strong>./lib.pm</strong> </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\npackage lib;\n\n#my %hash = (\nour %hash = (\n    Addr =&gt;\n    {\n        'aa' =&gt; 0x11223344,\n        'bb' =&gt; 0x55667788,\n        'cc' =&gt; 0xaabbccdd,\n    },\n);\n</code></pre>\n\n<p>And i tried to access all of their elements from another package with some ways as below:\n<strong>./check.pm</strong> </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nuse Cwd;\nmy $dir = getcwd;\nunshift( @INC, $dir );\nrequire lib;\n\nprint \"========================\\n\";\nprint \"1: $lib::hash{Addr}{'aa'}\\n\";\nprint \"2: $lib::hash{Addr}{'bb'}\\n\";\nprint \"3: $lib::hash{Addr}{'cc'}\\n\";\n\nprint \"========================\\n\";\nprintf (sprintf(\"%8X\\n\", $lib::hash{Addr}{aa}));\nprintf (sprintf(\"%8X\\n\", $lib::hash{Addr}{bb}));\nprintf (sprintf(\"%8X\\n\", $lib::hash{Addr}{cc}));\n\nprint \"========================\\n\";\nmy ($Address_a, $Address_b, $Address_c);\nmy (@Address_a, @Address_b, @Address_c, @names);\n$Address_a = sprintf(\"%8X\", $lib::hash{Addr}{'aa'});\n$Address_b = sprintf(\"%8X\", $lib::hash{Addr}{'bb'});\n$Address_c = sprintf(\"%8X\", $lib::hash{Addr}{'cc'});\n@Address_a = ( $Address_a =~ m/../g );\n@Address_b = ( $Address_b =~ m/../g );\n@Address_c = unpack(\"(A2)*\", $Address_c);\n\nprintf \"========================\\n\";\nprintf (\"@Address_a \\t\\n\");\nprintf (\"@Address_b \\t\\n\");\nprintf (\"@Address_c \\t\\n\");\n\nprintf \"========================\\n\";\nprintf (\"$Address_a[0], $Address_a[1], $Address_a[2], $Address_a[3]\\n\");\nprintf (\"$Address_b[0], $Address_b[1], $Address_b[2], $Address_b[3]\\n\");\nprintf (\"$Address_c[0], $Address_c[1], $Address_c[2], $Address_c[3]\\n\");\n</code></pre>\n\n<p>And i got result normally:</p>\n\n<pre><code>========================\n1: 287454020\n2: 1432778632\n3: 2864434397\n========================\n11223344\n55667788\nAABBCCDD\n========================\n========================\n11 22 33 44\n55 66 77 88\nAA BB CC DD\n========================\n11, 22, 33, 44\n55, 66, 77, 88\nAA, BB, CC, DD\n</code></pre>\n\n<p>But when i change the way of hash declaration from \"<em>our %hash</em>\" to \"<em>my %hash</em>\", the result is gone:</p>\n\n<pre><code>========================\nUse of uninitialized value in concatenation (.) or string at ./check.pm line 10.\n1:\nUse of uninitialized value in concatenation (.) or string at ./check.pm line 11.\n2:\nUse of uninitialized value in concatenation (.) or string at ./check.pm line 12.\n3:\n========================\nUse of uninitialized value in sprintf at ./check.pm line 14.\n       0\nUse of uninitialized value in sprintf at ./check.pm line 15.\n       0\nUse of uninitialized value in sprintf at ./check.pm line 16.\n       0\n========================\nUse of uninitialized value in sprintf at ./check.pm line 20.\nUse of uninitialized value in sprintf at ./check.pm line 21.\nUse of uninitialized value in sprintf at ./check.pm line 22.\n========================\n          0\n          0\n    0\n========================\n  ,   ,   ,  0\n  ,   ,   ,  0\n, , ,  0\n</code></pre>\n\n<p>Is there any change i need when getting data from \"my %hash\"?</p>\n"}, {"tags": ["php", "perl", "post", "http-post"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1535622764, "post_id": 52093592, "comment_id": 91138115, "body": "What does the request look like in the webserver logs? It looks like the PHP code is missing the request method"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535623162, "post_id": 52093592, "comment_id": 91138399, "body": "It also misses the second step. The Perl code makes two requests. It first fetches a token, and then passes that token as a cookie in the second request. I suggest you go through the Perl code line by line and write down (or create a flowchart) on paper the steps the code does. Then you can redo that in PHP. (The <code>while</code> loop goes through all the cookies in the response of the first request and finds the <code>CSRF</code> token. That&#39;s a <i>cross site request forgery</i> token for security, and not Perl-specific.)"}], "owner": {"reputation": 31, "user_id": 10292752, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ek08rqIJWA8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOwZUei0Aut5hzmTt7JTILgNr8-SQ/mo/photo.jpg?sz=128", "display_name": "JY Lee", "link": "https://stackoverflow.com/users/10292752/jy-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535621299, "creation_date": 1535621299, "question_id": 52093592, "link": "https://stackoverflow.com/questions/52093592/webapi-occured-405-error-in-phpand-perl", "title": "webapi occured 405 error in php(and perl)", "body": "<p>I have an WEB API and Perl language example code for this API.<br>\nI want to use this API in PHP.<br>\nHowever, 405 error occurs.  </p>\n\n<p>API document(only LOGIN)  </p>\n\n<pre><code>JSON\u6587\u5b57\u5217\nFIELD   TYPE    \n*username   String  \n*password   String  \n*rememberMe String  \n</code></pre>\n\n<p>example perl code  </p>\n\n<pre><code>use strict;\nuse DBI;\nuse LWP::UserAgent;\n\n#\u8a8d\u8a3c\nmy $auth_api = 'http://testapi.com/api';\nmy $username = 'user';\nmy $password = 'pass';\n\nmy $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;parse_head(0);\n\n#\u30ed\u30b0\u30a4\u30f3\nmy $req = HTTP::Request-&gt;new(POST =&gt; $auth_api);\n$req-&gt;content_type('application/json');\n$req-&gt;content('{'\n.'\"username\":\"'.$username.'\",'\n.'\"password\":\"'.$password.'\" '\n.'}');\nmy $res = $ua-&gt;request($req);\n\n#\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\nmy $csrf_access_token = '';\nmy $access_token_cookie = '';\nmy $cookie = \"\";\nif($res-&gt;is_success) {\n    print $res-&gt;content;\n    print $res-&gt;as_string;\n    $cookie = $res-&gt;header('set-cookie');\n    my @cookies = split(/,|;/, $cookie);\n    while (my $c = shift @cookies){\n        my ($key, $value) = split(/=/, $c);\n        if($key =~ /csrf_access_token/){\n            $csrf_access_token = $value;\n        }\n        if($key =~ /access_token_cookie/){\n            $access_token_cookie = $value;\n        }\n    }\n}\nelse {\n    print $res-&gt;status_line, \"\\n\";\n    print $res-&gt;content, \"\\n\";\n}\n\nprint '\"'.$csrf_access_token.'\"',\"\\n\";\nprint '\"'.$access_token_cookie.'\"',\"\\n\";\n\n#\u691c\u7d22url\nmy $search_api = 'http://testapi.com/api';\nmy $img_url = 'https://test.com/pics/';\nmy $num_result = '10';\n\n#\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\u3059\u308b\nif($csrf_access_token ne ''){\n    my $req2 = HTTP::Request-&gt;new(POST =&gt; $search_api);\n    my $shinaban1 = 'g3717380';\n    open(my $out, '&gt;out_search.tab');\n\n    $req2-&gt;content_type('application/x-www-form-urlencoded');\n    $req2-&gt;header(\"Cookie\"=&gt;\"access_token_cookie=$access_token_cookie; csrf_access_token=$csrf_access_token\");\n    $req2-&gt;content(\n     'img_url='.$img_url.lc($shinaban1).'.jpg'.'&amp;'\n    .'num_result='.$num_result.''\n    );\n    print $req2-&gt;as_string;\n    my $res = $ua-&gt;request($req2);\n    if($res-&gt;is_success) {\n        print $out $res-&gt;content;\n        print $res-&gt;content;\n    }\n    else {\n    print $res-&gt;headers_as_string;\n        print $res-&gt;status_line, \"\\n\";\n        print $res-&gt;content, \"\\n\";\n    }\n\n}\n</code></pre>\n\n<p>example perl code run result  </p>\n\n<pre><code>C:\\Users\\TEST&gt;perl search.pl\n{\"msg\":\"Login successful\",\"status\":200}\nHTTP/1.1 200 OK\nConnection: close\nDate: Thu, 30 Aug 2018 08:47:16 GMT\nServer: nginx/1.10.3 (Ubuntu)\nContent-Length: 40\nContent-Type: application/json\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: Content-Type,Authorization,X-CSRF-Token\nAccess-Control-Allow-Methods: GET,PUT,POST,DELETE\nAccess-Control-Allow-Origin: http://testapi.com\nClient-Date: Thu, 30 Aug 2018 08:46:19 GMT\nClient-Peer: .........:8080\nClient-Response-Num: 1\nSet-Cookie: access_token_cookie=qBchXPttiGHhFDuXhi5pQjqN89LTleivPZwQ4eC0; HttpOnly; Path=/api/\nSet-Cookie: csrf_access_token=f32a..........388d; Path=/\n\n{\"msg\":\"Login successful\",\"status\":200}\n\".............\"\n\"eyJ0eXAiOiJKV1Q.............\"\nPOST http://testapi.com/api\nContent-Type: application/x-www-form-urlencoded\nCookie: access_token_cookie=eyJ0eXAiOiJKV1QiLC....4eC0; csrf_access_token=f32a5c82-3a44-44\n\nimg_url=https://testapi.com/apig3717380.jpg&amp;num_result=10\n{\n    \"status\": 0,\n    \"total_time\": 235,\n    \"preprocess_time\": 11,\n    \"get_feature_time\": 99,\n    \"calculate_euclide\": 0,\n    \"load_embeddings\": 0,\n    \"find_max\": 0,\n    \"sort_min\": 0,\n    \"post_process_img\": \"/9j/4AAQSkZCAgUEBAMEBgUGBBggLDAsKDAkKCgr/2wBDAQICAgICAZ\",\n    \"response\": [\n        {\n            \"id\": 113677,\n            \"name\": \"test\",\n            \"shban1\": \"ZO413\",\n            \"distance\": \"0.22493\",\n            \"url\": \"https://.......\",\n            \"index\": 0\n        },\n        ...\n        {\n            \"id\": 807506,\n            \"name\": \"DT039\",\n            \"shinaban1\": \"G08327\",\n            \"distance\": \"0.28992\",\n            \"url\": \"https://...............\",\n            \"index\": 9\n        }\n    ]\n}\n</code></pre>\n\n<p>my php code(only login part)  </p>\n\n<pre><code>$url = 'http://testapi.com/api';\n$username = 'user';\n$password = 'pass';\n$rememberMe = true;\n\n$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, $url);\ncurl_setopt($ch, CURLOPT_USERPWD, $username.\":\".$password);\ncurl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json'));\n$output = curl_exec($ch);\n</code></pre>\n\n<p>my php code run result  </p>\n\n<pre><code>&gt;&gt;&gt; $ch = curl_init();\n=&gt; curl resource #481\n&gt;&gt;&gt; curl_setopt($ch, CURLOPT_URL, $url);\n=&gt; true\n&gt;&gt;&gt; curl_setopt($ch, CURLOPT_USERPWD, $username.\":\".$password);\n=&gt; true\n&gt;&gt;&gt; curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json'));\n=&gt; true\n&gt;&gt;&gt; $output = curl_exec($ch);\n{\n    \"message\": \"The method is not allowed for the requested URL.\"\n}\n=&gt; true\n</code></pre>\n\n<p>webapi url info  </p>\n\n<pre><code> &gt;&gt;&gt; $info = curl_getinfo($ch);\n =&gt; [\n \"url\" =&gt; \"http://testapi.com/api\",\n \"content_type\" =&gt; \"application/json\",\n \"http_code\" =&gt; 405,\n \"header_size\" =&gt; 415,\n \"request_size\" =&gt; 163,\n \"filetime\" =&gt; -1,\n \"ssl_verify_result\" =&gt; 0,\n \"redirect_count\" =&gt; 0,\n \"total_time\" =&gt; 0.187,\n \"namelookup_time\" =&gt; 0.125,\n \"connect_time\" =&gt; 0.156,\n \"pretransfer_time\" =&gt; 0.156,\n \"size_upload\" =&gt; 0.0,\n \"size_download\" =&gt; 70.0,\n \"speed_download\" =&gt; 374.0,\n \"speed_upload\" =&gt; 0.0,\n \"download_content_length\" =&gt; 70.0,\n \"upload_content_length\" =&gt; -1.0,\n \"starttransfer_time\" =&gt; 0.172,\n \"redirect_time\" =&gt; 0.0,\n \"redirect_url\" =&gt; \"\",\n \"primary_ip\" =&gt; \"..........\",\n \"certinfo\" =&gt; [],\n \"primary_port\" =&gt; 8080,\n \"local_ip\" =&gt; \"............\",\n \"local_port\" =&gt; 5544,\n ]\n</code></pre>\n\n<p>I don't know anything about Perl.<br>\nWhat's wrong my PHP code? why occur 405 error?<br>\nThanks for your help in advance.  </p>\n"}, {"tags": ["perl", "find", "symlink"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535603932, "post_id": 52089155, "comment_id": 91128664, "body": "The docs suggest adding <code>extras({ follow =&gt; 1 })</code> to the chain of rules might be useful."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535606579, "post_id": 52089155, "comment_id": 91129345, "body": "how can i add into the script? can you help me?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1535609322, "post_id": 52089155, "comment_id": 91130198, "body": "<i>&quot;How can I add it to the script?&quot;</i> Try <code>File::Find::Rule-&gt;file()-&gt;name( &#39;table.txt&#39; )-&gt;extras({follow=&gt;1})-&gt;in( &#39;&#47;a&#47;b&#47;c&#39; )</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1535613200, "post_id": 52089155, "comment_id": 91132057, "body": "@H&#229;kon If both link and target are in the same hierarchy (searched from above) then it runs into circularity and exits with error. If they aren&#39;t, then a direct search works.  Added to my answer."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535613331, "post_id": 52089155, "comment_id": 91132123, "body": "my script work to find the file table.txt, under a parent directory i want, it searches all files with the same file name, the only it can&#39;t find, is the symlink directory, because Find could not detect it as a directory or a folder."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535613420, "post_id": 52089155, "comment_id": 91132192, "body": "This is because it doesn&#39;t &quot;follow&quot; links. You can tell it to, but then If the link is in the same hierarchy as its target it will run into circular links and, fortunately, it is smart enough to detect that and it exits with an error. See a comment added to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535610055, "post_id": 52090296, "comment_id": 91130540, "body": "Will it work for the file that not in the symlink directory too?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535610237, "post_id": 52090296, "comment_id": 91130632, "body": "@DanialHaris  This first finds all directories which <i>are</i> symlinks, since in my understanding that is what you know about the directory (that it is a link), then it finds all files in <i>those</i> directories.  For files in yet other directories you&#39;d need a separate search. All of that can probably be bundled in one search but you didn&#39;t specify what you are looking for, apart for that one file in that link-directory."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535610464, "post_id": 52090296, "comment_id": 91130734, "body": "From my script above, how can I loop each directory that it found including the symlink, to find, table.txt file, in a parent directory /a/ ."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535610626, "post_id": 52090296, "comment_id": 91130799, "body": "@DanialHaris (1) Your posted script is incomplete.  (2) The method <code>...-&gt;file-&gt;...</code> tells it to find files, not directories. So it will not return any directories.  This answer does both, finds directories and finds files, so you can see the difference."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535611504, "post_id": 52090296, "comment_id": 91131197, "body": "oh, i get it, that&#39;s mean, i can&#39;t get directly the files in the symlink or is there a way for it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535612862, "post_id": 52090296, "comment_id": 91131886, "body": "@DanialHaris If the link-directory is in a hierarchy that <i>does not</i> contain its target, then yes; I added that to the answer. Otherwise ... the files are already found in the target directory; why search its link? It&#39;s the same files.  (It actually runs into circular structures and exits with an error reporting that.)"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535616364, "post_id": 52090296, "comment_id": 91133967, "body": "Because I want it to automatically open the files and do something with it including the files in the link, which it have the same file name, table.txt"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537518722, "post_id": 52090296, "comment_id": 91822070, "body": "is there any way to open symlink directory and normal directory together?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537519203, "post_id": 52090296, "comment_id": 91822324, "body": "@DanialHaris What do you mean by open them &quot;<i>together</i>&quot;? What are you trying to do?"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537519774, "post_id": 52090296, "comment_id": 91822662, "body": "<a href=\"https://stackoverflow.com/questions/52439965/find-symbolic-link-and-directory-together-perl\" title=\"find symbolic link and directory together perl\">stackoverflow.com/questions/52439965/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537685387, "post_id": 52090296, "comment_id": 91869334, "body": "@DanialHaris I don&#39;t understand what you need (I&#39;ve read your new question).  But, as a guess: maybe you can make use of <code>-&gt;or(...)</code> in <code>File::Find::Rule</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1537822555, "post_id": 52090296, "comment_id": 91915716, "body": "@DanialHaris  I think that I saw a comment here from you, saying that my comment on <code>-&gt;or</code> was useful, bu which is now gone.  If that indeed seems helpful let me know and I can add it to my answer."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1535936485, "last_edit_date": 1535936485, "creation_date": 1535609625, "answer_id": 52090296, "question_id": 52089155, "link": "https://stackoverflow.com/questions/52089155/find-symlink-using-find-in-perl/52090296#52090296", "title": "Find symlink using Find in Perl", "body": "<p>The <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a> implements the <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">-X filetests</a>, as methods.  The one that tests whether an entry is a symlink (<code>-l</code>) is called <code>symlink</code>. </p>\n\n<p>In my reading of the question you don't know the name of that directory (otherwise, why \"find\" a file in it?), except that it is a symbolic link. Then you need to first find directories which are symlinks, then find files in them. For this second task you'll need to tell the module to <em>follow</em> the links.</p>\n\n<p>I use a test structure on disk</p>\n\n<pre>\ntest_find/a/c/c.txt\ntest_find/a/b/b.txt\ntest_find/is_link  -> a/c  (\"is_link\" is a symbolic link to \"a/c\")\n</pre>\n\n<p>and from the directory right above it I run the program</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse File::Find::Rule;\n\nmy $top_dir = shift @ARGV || './test_find';\n\nmy @symlink_dirs = File::Find::Rule-&gt;directory-&gt;symlink-&gt;in($top_dir);\n\nforeach my $dir (@symlink_dirs) {\n    my @files = File::Find::Rule-&gt;file-&gt;extras({follow =&gt; 1})-&gt;in($dir);\n    say \"in $dir: @files\";\n}\n</code></pre>\n\n<p>which prints</p>\n\n<pre>\nin test_find/is_link: test_find/is_link/c.txt\n</pre>\n\n<p>Note that the program will find <em>all</em> files in <em>all</em> directories which are symlinks. Writing an explicit loop as above allows you to add code to decide which of the symlink-directories to actually search. If you don't mind looking through all of them you can just do</p>\n\n<pre><code>my @files = File::Find::Rule-&gt;file-&gt;extras({follow =&gt; 1})-&gt;in(@symlink_dirs);\n</code></pre>\n\n<p>See documentation for features to limit the search using what you know about the directory/file.</p>\n\n<hr>\n\n<p>If the link directory is in a hierarchy not including the target, then simply search that hierarchy.</p>\n\n<p>With test structure</p>\n\n<pre>\nother_hier/is_link  -> ../test_find/a/c\ntest_find/a/c/c.txt\n</pre>\n\n<p>you only need to tell it to follow the links</p>\n\n<pre><code>my @all_files = File::Find::Rule  # may use linebreaks and spaces\n    -&gt; file\n    -&gt; extras({ follow =&gt; 1 })\n    -&gt; in('other_hier');\n</code></pre>\n\n<p>When added to the above program and printed this adds</p>\n\n<pre>\nanother/is_link/c.txt\n</pre>\n\n<p>You can of course replace the literal <code>'other_hier'</code> with <code>$top_dir</code> and invoke the program with argument <code>other_hier</code> (and make that <code>other_hier</code> directory and the link in it).</p>\n\n<p>If both link and target are in the same hierarchy that is searched then you can't do this; the search would run into circular links (the module detects that and exits with error).</p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 52090296, "answer_count": 1, "score": 1, "last_activity_date": 1535936485, "creation_date": 1535602635, "last_edit_date": 1535627109, "question_id": 52089155, "link": "https://stackoverflow.com/questions/52089155/find-symlink-using-find-in-perl", "title": "Find symlink using Find in Perl", "body": "<p>I have faced some issue on how to find a symlink inside a directory using Find library, it can't be found and I am very new in using Perl.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Find;\nuse File::Copy;\n\nmy @files = File::Find::Rule-&gt;file()\n                            -&gt;name( 'table.txt' )\n                            -&gt;in( '/a/b/c' );\nfor my $file (@files)   \n{\n\n    print \"\\nfile: $file\\n\";\n</code></pre>\n\n<p>Supposedly there is another directory that contain the specified file, table.txt, but it is a symlink that is /a/b/d, but the symlink is not there when it is printed out.</p>\n"}, {"tags": ["regex", "bash", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535602699, "post_id": 52089141, "comment_id": 91128395, "body": "Doesn&#39;t work in my script. That still results in \\\\`some\\\\`."}], "tags": [], "owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "is_accepted": false, "score": 0, "last_activity_date": 1535618235, "last_edit_date": 1535618235, "creation_date": 1535602544, "answer_id": 52089141, "question_id": 52089063, "link": "https://stackoverflow.com/questions/52089063/unable-to-perform-desired-substitution-with-backtick-character/52089141#52089141", "title": "Unable to perform desired substitution with backtick character", "body": "<p>Use this in one-liner manner from a file <strong>without Data::Dumper</strong> :</p>\n\n<pre><code>perl -pe 's/\\`/\\\\`/g' file\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>this is \\`some\\` text\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535602910, "post_id": 52089182, "comment_id": 91128445, "body": "I&#39;m not on the command line. I&#39;m trying to do this from within a perl script."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535602943, "post_id": 52089182, "comment_id": 91128451, "body": "<code>sed</code> will read from a file or you can simply pipe <code>stdout</code> to it. (e.g. <code>echo &#39;this is `some` text&#39; | sed &#39;s&#47;[</code>]/\\\\\\`/g&#39;`)  (escaping backticks in comments is a bit tricky...) You can also use <i>command substitution</i>, e.g. <a href=\"https://stackoverflow.com/questions/15113607/how-to-do-command-substitution-in-perl\">How to do command substitution in perl?</a>"}, {"owner": {"reputation": 120931, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1535603199, "post_id": 52089182, "comment_id": 91128502, "body": "@StevieD, if you&#39;re looking specifically for a Perl (internal) solution, then remove the [bash] tag from your question -- it only confuses things.  It wouldn&#39;t hurt to clarify this in the question text, too."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535603293, "post_id": 52089182, "comment_id": 91128521, "body": "oops, my bad. Thanks."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535602818, "creation_date": 1535602818, "answer_id": 52089182, "question_id": 52089063, "link": "https://stackoverflow.com/questions/52089063/unable-to-perform-desired-substitution-with-backtick-character/52089182#52089182", "title": "Unable to perform desired substitution with backtick character", "body": "<p>Or using a one liner with <code>sed</code></p>\n\n<pre><code>sed 's/[`]/\\\\\\`/g' file\n</code></pre>\n\n<p>Explanation. </p>\n\n<p>Use the <em>character class</em> <code>[...]</code> to protect the character you wish to substitute, and then use the POSIX form of escape <code>\"\\\\\"</code> to escape the actual <code>'\\'</code> you wish to include in the substituted text.</p>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535604476, "post_id": 52089344, "comment_id": 91128794, "body": "Yup, that should. But I keep getting double backslashes. There&#39;s got to be something else going on with my code. Thanks."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1535605091, "post_id": 52089344, "comment_id": 91128943, "body": "Ah, dammit, was running the output through Dumper and it was escaping the backslash so it looked like a double backslash. There goes that hour."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1535605923, "post_id": 52089344, "comment_id": 91129167, "body": "@StevieD we&#39;ve all been there."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1535604215, "creation_date": 1535604215, "answer_id": 52089344, "question_id": 52089063, "link": "https://stackoverflow.com/questions/52089063/unable-to-perform-desired-substitution-with-backtick-character/52089344#52089344", "title": "Unable to perform desired substitution with backtick character", "body": "<p>Your second one should work...</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw/say/;\nmy $string = \"a string with `backticks` in it\";\nsay \"Before: $string\";\n$string =~ s/`/\\\\`/g;\nsay \"After: $string\";\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>Before: a string with `backticks` in it\nAfter: a string with \\`backticks\\` in it\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1535627126, "accepted_answer_id": 52089344, "answer_count": 3, "score": 0, "last_activity_date": 1535618235, "creation_date": 1535601834, "last_edit_date": 1535611814, "question_id": 52089063, "link": "https://stackoverflow.com/questions/52089063/unable-to-perform-desired-substitution-with-backtick-character", "closed_reason": "Not suitable for this site", "title": "Unable to perform desired substitution with backtick character", "body": "<p>I have a string with backticks:</p>\n\n<pre><code>this is `some` text\n</code></pre>\n\n<p>I want to precede the backticks with a backslash:</p>\n\n<pre><code>this is \\`some\\` text\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>s/`/\\`/g\n</code></pre>\n\n<p>but this resulted in the original text:</p>\n\n<pre><code>this is `some` text\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>s/`/\\\\`/g\n</code></pre>\n\n<p>but this resulted in a double backslash:</p>\n\n<pre><code>this is \\\\`some\\\\` text\n</code></pre>\n\n<p>I've tried many other tricks but no luck.</p>\n"}]